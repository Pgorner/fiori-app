{"version":3,"names":["getPossibleValueHelpTemplate","internalField","vhp","FieldHelper","valueHelpProperty","valueHelpMetaPath","vhpCtx","getModel","createBindingContext","hasValueHelpAnnotations","hasValueHelpAnnotation","getObject","showValueHelpTemplate","_jsx","ValueHelp","_flexId","id","metaPath","getPath","contextPath","_exports","createFieldWrapper","fieldWrapperID","idPrefix","generate","undefined","contentDisplay","DisplayStyle","getTemplate","contentEdit","EditStyle","getTemplateWithWrapper","FieldWrapper","editMode","visible","width","textAlign","class","validateFieldGroup","children","getFieldStructureTemplate","displayStyle","collaborationEnabled","FieldEditMode","Display","_jsxs","HBox","alignItems","VBox","getFileTemplate","getCollaborationAvatar","formatOptions","fieldMode"],"sourceRoot":".","sources":["FieldStructure.tsx"],"sourcesContent":["import { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport ValueHelp from \"sap/fe/macros/ValueHelp\";\nimport HBox from \"sap/m/HBox\";\nimport VBox from \"sap/m/VBox\";\nimport type { Control$ValidateFieldGroupEvent } from \"sap/ui/core/Control\";\nimport type { TextAlign } from \"sap/ui/core/library\";\nimport FieldEditMode from \"sap/ui/mdc/enums/FieldEditMode\";\nimport type Context from \"sap/ui/model/Context\";\nimport FieldWrapper from \"../../controls/FieldWrapper\";\nimport FieldHelper from \"../../field/FieldHelper\";\nimport DisplayStyle from \"./DisplayStyle\";\nimport EditStyle from \"./EditStyle\";\nimport type { FieldBlockProperties } from \"./FieldStructureHelper\";\n\n/**\n * The function calculates the corresponding ValueHelp field in case it´s\n * defined for the specific control.\n * @param internalField\n * @returns An XML-based string with a possible ValueHelp control.\n */\nexport function getPossibleValueHelpTemplate(internalField: FieldBlockProperties): string {\n\tconst vhp = FieldHelper.valueHelpProperty(internalField.valueHelpMetaPath as unknown as Context);\n\tconst vhpCtx = (internalField.valueHelpMetaPath as unknown as Context)\n\t\t.getModel()\n\t\t.createBindingContext(vhp, internalField.valueHelpMetaPath as unknown as Context);\n\tconst hasValueHelpAnnotations = FieldHelper.hasValueHelpAnnotation(vhpCtx.getObject(\"@\"));\n\tif (hasValueHelpAnnotations && internalField.showValueHelpTemplate == true) {\n\t\t// depending on whether this one has a value help annotation included, add the dependent\n\t\treturn (\n\t\t\t<ValueHelp\n\t\t\t\t_flexId={`${internalField.id}-content_FieldValueHelp`}\n\t\t\t\tmetaPath={vhpCtx.getPath()}\n\t\t\t\tcontextPath={internalField.contextPath?.getPath()}\n\t\t\t/>\n\t\t);\n\t}\n\treturn \"\";\n}\n\n/**\n * Create the fieldWrapper control for use cases with display and edit styles.\n * @param internalField Reference to the current internal field instance\n * @returns An XML-based string with the definition of the field control\n */\nexport function createFieldWrapper(internalField: FieldBlockProperties): string {\n\tlet fieldWrapperID;\n\tif (internalField._flexId) {\n\t\tfieldWrapperID = internalField._flexId;\n\t} else if (internalField.idPrefix) {\n\t\tfieldWrapperID = generate([internalField.idPrefix, \"Field-content\"]);\n\t} else {\n\t\tfieldWrapperID = undefined;\n\t}\n\n\t// compute the display part and the edit part for the fieldwrapper control\n\tconst contentDisplay = DisplayStyle.getTemplate(internalField);\n\t// content edit part needs to be wrapped further with an hbox in case of collaboration mode\n\t// that´s why we need to call this special helper here which finally calls internally EditStyle.getTemplate\n\t// const contentEdit = EditStyle.getTemplateWithWrapper(internalField, controller, handleChange, fieldAPI);\n\tconst contentEdit = EditStyle.getTemplateWithWrapper(internalField);\n\n\treturn (\n\t\t<FieldWrapper\n\t\t\tid={fieldWrapperID}\n\t\t\teditMode={internalField.editMode}\n\t\t\tvisible={internalField.visible}\n\t\t\twidth=\"100%\"\n\t\t\ttextAlign={internalField.textAlign as TextAlign}\n\t\t\tclass={internalField.class}\n\t\t\t// TODO Field needs to be migrated\n\t\t\tvalidateFieldGroup={\".collaborativeDraft.handleContentFocusOut\" as unknown as (oEvent: Control$ValidateFieldGroupEvent) => void}\n\t\t>\n\t\t\t{{\n\t\t\t\tcontentDisplay: contentDisplay,\n\t\t\t\tcontentEdit: contentEdit\n\t\t\t}}\n\t\t</FieldWrapper>\n\t);\n}\n\n/**\n * Helps to calculate the field structure wrapper.\n * @param internalField Reference to the current internal field instance\n * @returns An XML-based string with the definition of the field control\n */\nexport function getFieldStructureTemplate(internalField: FieldBlockProperties): string {\n\t//compute the field in case of mentioned display styles\n\tif (\n\t\tinternalField.displayStyle === \"Avatar\" ||\n\t\tinternalField.displayStyle === \"Contact\" ||\n\t\tinternalField.displayStyle === \"Button\" ||\n\t\tinternalField.displayStyle === \"File\"\n\t) {\n\t\t// check for special handling in case a file type is used with the collaboration mode\n\t\t// (renders an avatar directly)\n\t\tif (\n\t\t\tinternalField.displayStyle === \"File\" &&\n\t\t\t(internalField.collaborationEnabled ?? false) &&\n\t\t\tinternalField.editMode !== FieldEditMode.Display\n\t\t) {\n\t\t\treturn (\n\t\t\t\t<HBox width=\"100%\" alignItems=\"End\">\n\t\t\t\t\t<VBox width=\"100%\">{DisplayStyle.getFileTemplate(internalField)}</VBox>\n\t\t\t\t\t{EditStyle.getCollaborationAvatar(internalField)}\n\t\t\t\t</HBox>\n\t\t\t);\n\t\t} else {\n\t\t\t//for all other cases render the displayStyles with a field api wrapper\n\t\t\treturn DisplayStyle.getTemplate(internalField);\n\t\t}\n\t} else if (internalField.formatOptions.fieldMode === \"nowrapper\" && internalField.editMode === FieldEditMode.Display) {\n\t\t//renders a display based building block (e.g. a button) that has no field api wrapper around it.\n\t\treturn DisplayStyle.getTemplate(internalField);\n\t} else {\n\t\t//for all other cases create a field wrapper\n\t\treturn createFieldWrapper(internalField);\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"FieldStructure-dbg.js"}