/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/BindingToolkit","sap/fe/base/EventDelegateHook","sap/fe/core/converters/MetaModelConverter","sap/fe/core/formatters/CollaborationFormatter","sap/fe/core/templating/PropertyFormatters","sap/fe/core/templating/PropertyHelper","sap/fe/core/templating/UIFormatters","sap/fe/macros/controls/CollaborationHBox","sap/fe/macros/controls/RadioButtons","sap/fe/macros/field/FieldTemplating","sap/fe/macros/internal/valuehelp/ValueHelpTemplating","sap/m/Avatar","sap/m/CheckBox","sap/m/DatePicker","sap/m/DateTimePicker","sap/m/FlexItemData","sap/m/Input","sap/m/MaskInput","sap/m/MaskInputRule","sap/m/RatingIndicator","sap/m/TextArea","sap/m/TimePicker","sap/ui/core/CustomData","sap/ui/mdc/Field","sap/ui/mdc/enums/FieldEditMode","../../field/FieldHelper","../../field/TextAreaEx","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs"],function(e,t,a,i,o,r,l,n,s,d,p,u,c,m,h,g,v,x,f,b,y,P,I,T,E,L,F,C,D){"use strict";var k=d.getTextAlignment;var B=d.getMultipleLinesForDataField;var M=r.hasValueHelpWithFixedValues;var A=o.getRelativePropertyPath;var S=e.pathInModel;var O=e.compileExpression;const G={getLayoutData(e){let t="";if(e.collaborationEnabled){t=C(g,{growFactor:"9"})}return t},getCollaborationAvatar(e){const a=O(e.collaborationExpression);const o=O(l.getCollaborationExpression(e.dataModelPath,i.getCollaborationActivityInitials));const r=O(l.getCollaborationExpression(e.dataModelPath,i.getCollaborationActivityColor));return C(u,{"core:require":"{FieldRuntime: 'sap/fe/macros/field/FieldRuntime'}",visible:a,initials:o,displaySize:"Custom",customDisplaySize:"1.5rem",customFontSize:"0.8rem",backgroundColor:r,press:"FieldRuntime.showCollaborationEditUser(${$source>/}, ${$view>/})",children:{dependents:C(t,{stopTapPropagation:true})}})},getDateTimePickerGeneric(e,t){const i=a.getInvolvedDataModelObjects(e.metaPath,e.contextPath);const o=k(i,e.formatOptions,e.editModeAsObject);const r={"core:require":"{FieldAPI: 'sap/fe/macros/field/FieldAPI'}",id:e.editStyleId,width:"100%",editable:e.editableExpression,enabled:e.enabledExpression,required:e.requiredExpression,textAlign:o,ariaLabelledBy:e.ariaLabelledBy,value:e.valueBindingExpression,fieldGroupIds:e.fieldGroupIds,showTimezone:e.showTimezone,minDate:t==="DateTimePicker"||t==="DatePicker"?e.minDateExpression:undefined,maxDate:t==="DateTimePicker"||t==="DatePicker"?e.maxDateExpression:undefined,change:t==="DateTimePicker"?e.change||e.eventHandlers.change:e.eventHandlers.change,liveChange:e.liveChangeEnabled?e.eventHandlers.liveChange:undefined,validateFieldGroup:e.eventHandlers.validateFieldGroup};function l(t){let a;switch(t){case"DatePicker":a=C(m,{...r,children:{customData:C(I,{value:e.dataSourcePath},"sourcePath")}});break;case"DateTimePicker":a=C(h,{...r,children:{customData:C(I,{value:e.dataSourcePath},"sourcePath")}});break;case"TimePicker":a=C(P,{...r,children:{customData:C(I,{value:e.dataSourcePath},"sourcePath")}});break}return a}return l(t)},getInputTemplate(e){const t=a.getInvolvedDataModelObjects(e.metaPath,e.contextPath);const i=k(t,e.formatOptions,e.editModeAsObject);return C(v,{"core:require":"{FieldAPI: 'sap/fe/macros/field/FieldAPI'}",id:e.editStyleId,value:e.valueBindingExpression,placeholder:e.editStylePlaceholder,width:"100%",editable:e.editableExpression,description:e.staticDescription,enabled:e.enabledExpression,required:e.requiredExpression,fieldGroupIds:e.fieldGroupIds,textAlign:i,ariaLabelledBy:e.ariaLabelledBy,maxLength:e.formatOptions.textMaxLength,change:e.eventHandlers.change,liveChange:e.liveChangeEnabled?e.eventHandlers.liveChange:undefined,validateFieldGroup:e.eventHandlers.validateFieldGroup,children:{layoutData:G.getLayoutData(e),customData:C(I,{value:e.dataSourcePath},"sourcePath")}})},showAsRadioButton(e){const t=e.property.annotations?.Common?.ValueListWithFixedValues&&M(e.property)===true&&(e.property.annotations.Common.ValueListWithFixedValues.annotations?.Common?.ValueListShowValuesImmediately&&e.property.annotations.Common.ValueListWithFixedValues.annotations?.Common?.ValueListShowValuesImmediately.valueOf()===true||e.formatOptions.fieldEditStyle==="RadioButtons");const a=e.property?.annotations?.Common?.ValueList?.Parameters.find(t=>(t.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||t.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterOut")&&t.LocalDataProperty.value===e.property.name);return t&&a!==undefined&&!e.property.annotations?.Common?.ValueListRelevantQualifiers},getRadioButtonTemplate(e){const t="/"+e.property?.annotations?.Common?.ValueList?.CollectionPath;const a=e.property?.annotations?.Common?.ValueList?.Parameters.find(t=>(t.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||t.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterOut")&&t.LocalDataProperty.value===e.property.name);const i=S(a.ValueListProperty);let o;const r=e.dataModelPath.targetEntityType.resolvePath(t).entityType.keys[0].annotations?.Common?.Text?.path;if(r){o=S(r)}else{o=i}return C(s,{id:e.editStyleId,requiredExpression:e.requiredExpression,validateFieldGroup:"FieldRuntime.onValidateFieldGroup($event)",fixedValuesPath:t,fieldGroupIds:e.fieldGroupIds,value:e.valueBindingExpression,enabledExpression:e.enabledExpression,radioButtonTextProperty:o,radioButtonKeyProperty:i,horizontalLayout:e.formatOptions.radioButtonsHorizontalLayout})},getInputWithValueHelpTemplate(e){const t=a.getInvolvedDataModelObjects(e.metaPath,e.contextPath);const i=L.computeFieldBaseDelegate("sap/fe/macros/field/FieldBaseDelegate",e.formatOptions.retrieveTextFromValueList);const o=l.getFieldDisplay(e.property,e.formatOptions.displayMode,e.editModeAsObject);const r=!!e.property?.annotations?.UI?.MultiLineText;const n=B(e,r);const s=e.metaPath.getModel().createBindingContext("Value",e.metaPath);const d=e.metaPath.getModel().createBindingContext(L.valueHelpProperty(s));const u=p.generateID(e._vhFlexId,e.vhIdPrefix,A(s,{context:s}),A(d,{context:d}));const c=k(t,e.formatOptions,e.editModeAsObject,true);const m=L.computeLabelText(e,{context:e.metaPath});let h="";if(e.property.type==="Edm.String"&&r){h=C(y,{value:e.valueBindingExpression,required:e.requiredExpression,rows:e.formatOptions.textLinesEdit,growing:e.formatOptions.textMaxLines>0?true:undefined,growingMaxLines:e.formatOptions.textMaxLines,width:"100%",change:e.eventHandlers.change,fieldGroupIds:e.fieldGroupIds})}let v="";if(e.collaborationEnabled===true){v=C(g,{growFactor:"9"})}if(this.showAsRadioButton(e)!==true){return C(T,{"core:require":"{FieldAPI: 'sap/fe/macros/field/FieldAPI'}",delegate:i,id:e.editStyleId,value:e.valueBindingExpression,placeholder:e.editStylePlaceholder,valueState:e.valueState,editMode:e.editMode,width:"100%",required:e.requiredExpression,additionalValue:e.textBindingExpression,display:o,multipleLines:n===false?undefined:n,valueHelp:u,fieldGroupIds:e.fieldGroupIds,textAlign:c,ariaLabelledBy:e.ariaLabelledBy,label:m,change:e.eventHandlers.change,liveChange:e.liveChangeEnabled?e.eventHandlers.liveChange:undefined,validateFieldGroup:e.eventHandlers.validateFieldGroup,children:{contentEdit:h,layoutData:v,customData:C(I,{value:e.dataSourcePath},"sourcePath")}})}else{return this.getRadioButtonTemplate(e)}},getCheckBoxTemplate(e){return C(c,{"core:require":"{FieldAPI: 'sap/fe/macros/field/FieldAPI'}",id:e.editStyleId,selected:e.valueBindingExpression,editable:e.editableExpression,enabled:e.enabledExpression,fieldGroupIds:e.fieldGroupIds,ariaLabelledBy:e.ariaLabelledBy,select:e.eventHandlers.change,validateFieldGroup:e.eventHandlers.validateFieldGroup,children:{customData:C(I,{value:e.dataSourcePath},"sourcePath")}})},getTextAreaTemplate(e){const t=e.formatOptions.textMaxLines?true:false;const a=!!e.formatOptions.textMaxLength;let i="";if(e.collaborationEnabled){i=C(g,{growFactor:"9"})}return C(F,{"core:require":"{FieldAPI: 'sap/fe/macros/field/FieldAPI'}",id:e.editStyleId,value:e.valueBindingExpression,placeholder:e.editStylePlaceholder,required:e.requiredExpression,rows:e.formatOptions.textLinesEdit,growing:t,growingMaxLines:e.formatOptions.textMaxLines,cols:300,width:"100%",editable:e.editableExpression,enabled:e.enabledExpression,fieldGroupIds:e.fieldGroupIds,ariaLabelledBy:e.ariaLabelledBy,maxLength:e.formatOptions.textMaxLength,showExceededText:a,change:e.eventHandlers.change,liveChange:e.liveChangeEnabled||e.formatOptions.textMaxLength?e.eventHandlers.liveChange:undefined,validateFieldGroup:e.eventHandlers.validateFieldGroup,children:{layoutData:i,customData:C(I,{value:e.dataSourcePath},"sourcePath")}})},getRatingIndicatorTemplate:e=>{const t=e.ratingIndicatorTooltip||"{sap.fe.i18n>T_COMMON_RATING_INDICATOR_TITLE_LABEL}";return C(b,{id:e.editStyleId,maxValue:e.ratingIndicatorTargetValue,value:e.valueBindingExpression,tooltip:t,iconSize:"1.375rem",class:"sapUiTinyMarginTopBottom",editable:"true",children:{layoutData:G.getLayoutData(e)}})},getTemplateWithWrapper(e){let t;if(e.editMode!==E.Display&&!!e.editStyle){if(e.collaborationEnabled??false){t=D(n,{width:"100%",alignItems:"End",children:[G.getTemplate(e),G.getCollaborationAvatar(e)]})}else{t=G.getTemplate(e)}}return t||""},getInputMaskTemplate(e){const t=[];const i=a.getInvolvedDataModelObjects(e.metaPath,e.contextPath);const o=k(i,e.formatOptions,e.editModeAsObject);if(e.mask?.maskRule){for(const a of e.mask.maskRule){t.push(C(f,{maskFormatSymbol:a.symbol,regex:a.regex}))}}return C(x,{"core:require":"{FieldAPI: 'sap/fe/macros/field/FieldAPI'}",id:e.editStyleId,value:e.valueBindingExpression,placeholder:e.editStylePlaceholder,width:"100%",editable:e.editableExpression,ariaLabelledBy:e.ariaLabelledBy,mask:e.mask?.mask,enabled:e.enabledExpression,required:e.requiredExpression,fieldGroupIds:e.fieldGroupIds,textAlign:o,placeholderSymbol:e.mask?.placeholderSymbol,liveChange:e.eventHandlers.liveChange,validateFieldGroup:e.eventHandlers.validateFieldGroup,children:{rules:t,customData:C(I,{value:e.dataSourcePath},"sourcePath")}})},getTemplate:e=>{let t;switch(e.editStyle){case"CheckBox":t=G.getCheckBoxTemplate(e);break;case"DatePicker":case"DateTimePicker":case"TimePicker":{t=G.getDateTimePickerGeneric(e,e.editStyle);break}case"Input":{t=G.getInputTemplate(e);break}case"InputWithValueHelp":{t=G.getInputWithValueHelpTemplate(e);break}case"RatingIndicator":t=G.getRatingIndicatorTemplate(e);break;case"TextArea":t=G.getTextAreaTemplate(e);break;case"InputMask":t=G.getInputMaskTemplate(e);break;default:}return t}};return G},false);
//# sourceMappingURL=EditStyle.js.map