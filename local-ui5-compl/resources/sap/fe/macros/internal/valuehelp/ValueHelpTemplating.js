/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/BindingToolkit","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/PropertyHelper","sap/fe/core/templating/UIFormatters","sap/fe/macros/field/FieldHelper","sap/fe/core/converters/MetaModelConverter","sap/fe/macros/internal/valuehelp/AdditionalValueFormatter","sap/ui/core/CustomData","sap/ui/mdc/ValueHelp","sap/ui/mdc/valuehelp/Dialog","sap/ui/mdc/valuehelp/Popover","sap/ui/mdc/valuehelp/content/Conditions","sap/ui/mdc/valuehelp/content/MTable","sap/fe/base/jsx-runtime/jsx"],function(e,t,a,n,r,o,i,l,s,u,c,p,d,g,f,m){"use strict";var v={};var h=l.getInvolvedDataModelObjects;var V=o.getDisplayMode;var b=r.isUnit;var x=r.isSemanticKey;var O=r.isGuid;var j=r.isCurrency;var y=r.hasValueListForValidation;var F=r.hasValueHelpWithFixedValues;var D=r.hasValueHelp;var H=r.hasDateType;var T=r.getLabel;var C=n.getTargetObjectPath;var P=n.enhanceDataModelPath;var I=n.checkFilterExpressionRestrictions;var M=a.isProperty;var S=a.isPathAnnotationExpression;var q=t.generate;var A=e.pathInModel;var G=e.getExpressionFromAnnotation;var U=e.formatResult;var E=e.equal;var w=e.constant;var R=e.compileExpression;const L=function(e,t){const a=V(e);const n=e.targetObject?.annotations?.Common?.Text;const r=typeof n!=="string"&&n?.annotations?.UI?.TextArrangement?.toString();if(t){return n&&S(n)&&n.path?a:"Value"}else{return r?a:"Value"}};v.getValueHelpTableDisplayMode=L;const $=function(e,t,a,n){let r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;const o=e!==a;const i={name:"sap/fe/macros/valuehelp/ValueHelpDelegate",payload:{propertyPath:e,isUnitValueHelp:o,conditionModel:t,requestGroupId:n,useMultiValueField:r,qualifiers:{},valueHelpQualifier:""}};return i};v.getDelegateConfiguration=$;const k=function(e){const t={name:"sap/fe/macros/valuehelp/ValueHelpDelegate",payload:{propertyPath:e,isDefineConditionValueHelp:true,qualifiers:{},valueHelpQualifier:""}};return R(t)};v.getDelegateConfigurationForDefineConditions=k;const B=function(e,t,a,n){if(e){return e}let r=n;if(a!==n){r=`${a}::${n}`}return q([t,r])};v.generateID=B;const Q=function(e){return F(e)||y(e)||D(e)&&(b(e)||j(e)||O(e))};v.requiresValidation=Q;const K=function(e,t){const a=e?.targetEntitySet?.annotations?.Capabilities?.FilterFunctions||t;return a?!a.includes("tolower"):true};v.useCaseSensitiveFilterRequests=K;const W=function(e){const t=e.targetObject;const a=I(e,["SingleRange"]);return t&&H(t)&&R(a)};v.isSemanticDateRange=W;const _=function(e,t){e.contextLocation=t;return R(I(e,["SingleValue","MultiValue"]))==="false"};v.shouldShowConditionPanel=_;const z=function(e,t){const a=t?.targetObject?.annotations?.Common?.Text;return a?.annotations?.UI?.TextArrangement?.valueOf()==="UI.TextArrangementType/TextOnly"&&S(a)?a.path:e};v.getColumnDataProperty=z;const J=function(e,t){const a=t?.targetObject?.annotations?.Common?.Text?.annotations?.UI?.TextArrangement;return a&&a.valueOf()!=="UI.TextArrangementType/TextSeparate"?"Edm.String":e};const N=function(e){const t=e.targetObject;const a=M(t)?J(t.type,e):"";return!a||x(t,e)?"Begin":i.getPropertyAlignment(a,{textAlignMode:"Table"})};v.getColumnHAlign=N;const X=function(e){return R(U([A("/recommendationsData","internal"),w(e)],s.getGrowing))};v.getGrowingFormatter=X;const Y=function(e,t){let a=h(e,t.contextPath);let n=h(t.metaPath,t.contextPath);if(S(n.targetObject)){n=P(n,n.targetObject.path)}if(S(a.targetObject)){a=P(a,a.targetObject.path)}if(a.targetObject){const e=B(t._flexId,t.idPrefix,C(n,true),C(a,true));const r=T(a.targetObject)||a.targetObject.name;if(D(a.targetObject)){const r=t.filterFieldValueHelp||t.requiresValidation||Q(a.targetObject);const o=t.filterFieldValueHelp?E(I(a,["SingleValue","MultiValue"]),false):false;const i=$(C(a),t.conditionModel,C(n),t.requestGroupId,t.useMultiValueField);const l=K(a,a.targetEntitySet?.annotations?.Capabilities?.FilterFunctions?.map(e=>e.toString())??[]);const s=y(a.targetObject);const g=F(a.targetObject);const v=[m(u,{value:o},"showConditionPanel")];if(s){v.push(m(u,{value:R(G(a.targetObject.annotations?.Common?.ValueListForValidation))},"valuelistForValidation"))}return m(c,{delegate:i,id:e,validateInput:r,children:{customData:v,typeahead:m(d,{children:m(f,{id:`${e}::Popover::qualifier::`,caseSensitive:l,useAsValueHelp:F(a.targetObject)})}),dialog:!g?m(p,{}):undefined}})}else if(t.filterFieldValueHelp){return m(c,{id:e,children:{customData:t.requestGroupId!==undefined?[m(u,{value:t.requestGroupId},"requestGroupId")]:[],dialog:m(p,{title:r,children:m(g,{})})}})}}};v.getValueHelpTemplate=Y;return v},false);
//# sourceMappingURL=ValueHelpTemplating.js.map