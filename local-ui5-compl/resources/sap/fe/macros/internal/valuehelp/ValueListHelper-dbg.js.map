{"version":3,"names":["columnNotAlreadyDefined","columnDefs","vhKey","some","column","path","AnnotationLabel","AnnotationText","AnnotationTextUITextArrangement","AnnotationValueListParameterIn","AnnotationValueListParameterConstant","AnnotationValueListParameterOut","AnnotationValueListParameterInOut","AnnotationValueListWithFixedValues","AnnotationsPersonalDataPotentiallySensitive","AnnotationsValueListRelevantQualifiers","_exports","_getDefaultSortPropertyName","valueListInfo","sortFieldName","metaModel","$model","getMetaModel","entitySetAnnotations","getObject","CollectionPath","sortRestrictionsInfo","getSortRestrictionsInfo","foundElement","Parameters","find","element","$Type","ValueListProperty","propertyInfo","sortable","undefined","_redundantDescription","oVLParameter","aColumnInfo","oColumnInfo","columnInfo","textColumnName","keyColumnHidden","keyColumnDisplayFormat","_hasImportanceHigh","oValueListContext","oParameter","$EnumMember","_build$SelectString","control","oViewData","getModel","oData","getData","aColumns","columns","reduce","sQuery","oProperty","includes","_getValueHelpColumnDisplayFormat","oPropertyAnnotations","isValueHelpWithFixedValues","sDisplayMode","CommonUtils","computeDisplayMode","oTextAnnotation","oTextArrangementAnnotation","$Path","getPresentationVariant","valueList","presentationVariantQualifier","PresentationVariantQualifier","presentationVariantPath","ValueListHelper","getValueListCollectionEntitySet","mValueList","createBindingContext","isTreeTableType","RecursiveHierarchyQualifier","getTableDelegate","sDefaultSortPropertyName","presentationVariant","recursiveHierarchyQualifier","initialExpansionLevel","InitialExpansionLevel","getSortConditionsFromPresentationVariant","isSuggestion","SortOrder","sortConditions","sorters","forEach","condition","sorter","propertyPath","Property","$PropertyPath","name","Descending","descending","ascending","push","JSON","stringify","getSortConditionsForValueList","sortConditionsFromPresentationVariant","getPropertyPath","oParameters","UnboundAction","EntityTypePath","Action","substring","lastIndexOf","getValueListProperty","oPropertyContext","oValueListModel","getColumnVisibility","oValueList","oSource","isDropDownList","valueHelpWithFixedValues","isVisible","columnInfos","isDialogTable","columnWithHiddenAnnotation","columnName","hasHiddenAnnotation","getColumnVisibilityInfo","sPropertyFullPath","bIsDropDownListe","oMetaModel","aColumnInfos","oColumnInfos","getTableItemsParameters","requestGroupId","itemParameters","selectString","selectStringPart","isSuspended","defaultSortPropertyName","join","hasImportance","getMinScreenWidth","getColumnWidth","isValueListWithFixedValues","arguments","length","isSmallDevice","targetObject","property","relatedProperty","additionalProperty","getAssociatedTextProperty","getAssociatedCurrencyProperty","getAssociatedUnitProperty","getAssociatedTimezoneProperty","textAnnotation","annotations","Common","Text","textArrangement","UI","TextArrangement","toString","label","Label","displayMode","getDisplayMode","size","instances","prop","propertyTypeConfig","getTypeConfig","PropertyODataConstructor","ObjectPath","get","type","formatOptions","constraints","sWidth","Util","calcColumnWidth","parseFloat","replace","Log","error","getOutParameterPaths","aParameters","sPath","endsWith","entityIsSearchable","propertyAnnotations","collectionAnnotations","searchSupported","SearchSupported","searchable","Searchable","_getConditionPath","entitySet","parts","split","conditionPath","partialPath","part","shift","$kind","$isCollection","_getColumnDefinitionFromSelectionFields","entityTypeAnnotations","selectionFields","selectionField","selectionFieldPath","columnDef","filterable","isPropertyFilterable","_mergeColumnDefinitionsFromProperties","valueListProperty","columnPath","columnPropertyType","textPropertyPath","textPath","filterInOutParameters","vhParameters","typeFilter","filter","parameter","parmeterType","getInParameters","getOutParameters","getInAndOutParameters","getInAndOutParametersList","createVHUIModel","valueHelp","vhUIModel","JSONModel","setModel","setProperty","_getDialogTitle","valuehelpLabel","propertyLabel","getProperty","dataFieldLabel","getControl","destroyVHContent","getDialog","destroyContent","getTypeahead","putDefaultQualifierFirst","qualifiers","indexDefaultVH","indexOf","unshift","splice","_getContextPrefix","bindingContext","propertyBindingParts","getPath","bindigContextParts","contextPrefixParts","i","_getVhParameter","conditionModel","contextPrefix","vhMetaModel","localDataPropertyPath","valuePath","getBindingContext","getParent","isA","_parameterIsA","firstNavigationProperty","oBoundEntity","getMetaContext","sPathOfTable","getRowBinding","filterBarAPI","filterBarMetaPath","metaPath","valueHelpContextPath","getMetaPath","contextMetaPath","MetaPath","convertTypes","newPath","getMetaPathForPath","getTarget","targetEntitySet","getClosestEntitySet","getMetaPathForObject","getRelativePath","source","helpPath","constantValue","Constant","initialValueIsSignificant","Boolean","InitialValueIsSignificant","parameterTypes","_enrichPath","propertyName","externalIdPath","key","externalIdProperty","pop","fieldPropertyPath","descriptionPath","_enrichKeys","vhKeys","_getEntityType","metaModelVH","entitySetPath","requestObject","_processParameters","annotationValueListType","valueHelpQualifier","payload","entityType","isForMultiValueField","useMultiValueField","$Key","LocalDataProperty","isPotentiallySensitive","vhParameter","valuelistInfo","keyPath","_logError","status","message","Error","String","msg","getValueListInfo","valueListInfos","propertyPathParts","valueListByQualifier","requestValueListInfo","valueHelpQualifiers","Object","keys","$qualifier","err","ALLFRAGMENTS","logFragment","_logTemplatedFragments","fragmentName","fragmentDefinition","logInfo","fragment","getLevel","Level","DEBUG","setTimeout","_templateFragment","sourceModel","containingView","getTargetView","appComponent","getAppComponent","localValueListInfo","valueListModel","valueListServiceMetaModel","viewData","converterType","XMLPreprocessor","process","XMLTemplateProcessor","loadTemplate","bindingContexts","contextPath","models","templateComponent","getController","getOwnerComponent","runAsOwner","Fragment","load","definition","controller","_getContentId","valueHelpId","isTypeahead","contentType","_addInOutParametersToPayload","vhProperties","Set","add","Array","from","textArrangementAnnotation","_getWidthInRem","isUnitValueHelp","width","$","floatWidth","Rem","fromPx","isNaN","_getTableWidth","table","minWidth","isMultiSelect","getColumns","visibleColumns","getVisible","initialSum","sumWidth","sum","getWidth","Math","max","_getJSONModelForDialog","content","isDropDownListe","id","getId","groupId","bSuggestion","_getJSONModelForCondition","caseSensitive","_getJSONModelForTypeahead","contentId","_createValueHelpTypeahead","setKeyPath","setDescriptionPath","history","enabled","checkHistoryEnabled","data","info","getMetadata","getName","setTable","field","tableMode","getMaxConditions","setMode","addEventDelegate","onAfterRendering","ResizeHandler","register","_setTableWidth","reduceWidthForUnitValueHelp","tableWidth","setWidth","historySettings","getManifestEntry","fields","historyEnabled","_createValueHelpDialog","conditionContent","sourceModelDialog","firstTypeAheadContent","getContent","getCaseSensitive","sourceModelCondition","addDependent","setValueHelp","conditionTable","getTable","tablePromise","filterBarPromise","filterBar","Promise","all","setFilterBar","setFilter","initialized","setCopyProviderVisibility","mdcTable","_setShowP13nButton","getCopyProvider","setVisible","_getContentById","contentList","item","_createPopoverContent","useAsValueHelp","MTable","group","_createDialogContent","forceBind","MDCTable","_showConditionsContent","container","conditionsContent","Conditions","addContent","_alignOrCreateContent","showConditionPanel","FetchValues","insertContent","_prepareValueHelpTypeAhead","qualifierForTypeahead","subValueListInfo","getUseAsValueHelp","removeContent","_prepareValueHelpDialog","selectedContentId","contentListItem","hasOperatorEQ","getOperators","selectedInfo","selectedContent","title","getTranslatedTextFromExpBindingString","setTitle","_addDescriptionInfosToPayload","valueHelpDescriptionPath","convertedMetadata","propertyDescriptionPath","resolvePath","target","valueHelpKeyPath","maxLength","externalIdFullPath","showValueList","map","col","getTechnicalKeys","inOutParameters"],"sourceRoot":".","sources":["ValueListHelper.ts"],"sourcesContent":["import type { EntityType, PathAnnotationExpression, Property } from \"@sap-ux/vocabularies-types\";\nimport { CommonAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport type { PresentationVariant } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport ObjectPath from \"sap/base/util/ObjectPath\";\nimport type { CompiledBindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type { MetaModelPropertyAnnotations } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { convertTypes } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { getSortRestrictionsInfo, isPropertyFilterable } from \"sap/fe/core/helpers/MetaModelFunction\";\nimport MetaPath from \"sap/fe/core/helpers/MetaPath\";\nimport type { FieldDataType } from \"sap/fe/core/services/ValueHelpHistoryServiceFactory\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport {\n\tgetAssociatedCurrencyProperty,\n\tgetAssociatedTextProperty,\n\tgetAssociatedTimezoneProperty,\n\tgetAssociatedUnitProperty\n} from \"sap/fe/core/templating/PropertyHelper\";\nimport { getDisplayMode, getTypeConfig } from \"sap/fe/core/templating/UIFormatters\";\nimport type FilterBarAPI from \"sap/fe/macros/filterBar/FilterBarAPI\";\nimport type Table from \"sap/m/Table\";\nimport Util from \"sap/m/table/Util\";\nimport type Control from \"sap/ui/core/Control\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport ResizeHandler from \"sap/ui/core/ResizeHandler\";\nimport XMLTemplateProcessor from \"sap/ui/core/XMLTemplateProcessor\";\nimport XMLPreprocessor from \"sap/ui/core/util/XMLPreprocessor\";\nimport Rem from \"sap/ui/dom/units/Rem\";\nimport type Field from \"sap/ui/mdc/Field\";\nimport type FilterField from \"sap/ui/mdc/FilterField\";\nimport type MultiValueField from \"sap/ui/mdc/MultiValueField\";\nimport type MdcInnerTable from \"sap/ui/mdc/Table\";\nimport type ValueHelp from \"sap/ui/mdc/ValueHelp\";\nimport type FieldBase from \"sap/ui/mdc/field/FieldBase\";\nimport type MdcFilterBar from \"sap/ui/mdc/filterbar/FilterBarBase\";\nimport type FilterBar from \"sap/ui/mdc/valuehelp/FilterBar\";\nimport type Container from \"sap/ui/mdc/valuehelp/base/Container\";\nimport type Content from \"sap/ui/mdc/valuehelp/base/Content\";\nimport Conditions from \"sap/ui/mdc/valuehelp/content/Conditions\";\nimport MDCTable, { type $MDCTableSettings } from \"sap/ui/mdc/valuehelp/content/MDCTable\";\nimport MTable, { type $MTableSettings } from \"sap/ui/mdc/valuehelp/content/MTable\";\nimport type BaseContext from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ODataType from \"sap/ui/model/odata/type/ODataType\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type { MetaModelEntitySetAnnotation, MetaModelType } from \"types/metamodel_types\";\n\nexport type AnnotationValueListParameter = {\n\t$Type: string;\n\tValueListProperty: string;\n\tLocalDataProperty?: {\n\t\t$PropertyPath: string;\n\t};\n\tConstant?: string;\n\tInitialValueIsSignificant?: boolean;\n\t[\"@com.sap.vocabularies.UI.v1.Importance\"]?: {\n\t\t$EnumMember: string;\n\t};\n};\n\ntype LogFragmentMethod = (info: { path: string; fragmentName: string; fragment: unknown }) => void;\n\n// com.sap.vocabularies.Common.v1.ValueListType\nexport type AnnotationValueListType = {\n\t$Type: string; // CommonAnnotationTypes.ValueListType;\n\tLabel?: string;\n\tCollectionPath: string;\n\tCollectionRoot?: string;\n\tDistinctValuesSupported?: boolean;\n\tSearchSupported?: boolean;\n\tFetchValues?: number;\n\tPresentationVariantQualifier?: string;\n\tSelectionVariantQualifier?: string;\n\tParameters: AnnotationValueListParameter[];\n\t$model: ODataModel;\n\t$qualifier?: string; // defined in case of ValueListWithFixedValues\n};\n\nexport type AnnotationValueListTypeByQualifier = Record<string, AnnotationValueListType>;\n\nconst columnNotAlreadyDefined = (columnDefs: ColumnDef[], vhKey: string): boolean => !columnDefs.some((column) => column.path === vhKey);\n\nexport const AnnotationLabel = \"@com.sap.vocabularies.Common.v1.Label\",\n\tAnnotationText = \"@com.sap.vocabularies.Common.v1.Text\",\n\tAnnotationTextUITextArrangement = \"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\",\n\tAnnotationValueListParameterIn = \"com.sap.vocabularies.Common.v1.ValueListParameterIn\",\n\tAnnotationValueListParameterConstant = \"com.sap.vocabularies.Common.v1.ValueListParameterConstant\",\n\tAnnotationValueListParameterOut = \"com.sap.vocabularies.Common.v1.ValueListParameterOut\",\n\tAnnotationValueListParameterInOut = \"com.sap.vocabularies.Common.v1.ValueListParameterInOut\",\n\tAnnotationValueListWithFixedValues = \"@com.sap.vocabularies.Common.v1.ValueListWithFixedValues\",\n\tAnnotationsPersonalDataPotentiallySensitive = \"@com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive\",\n\tAnnotationsValueListRelevantQualifiers = \"@com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers\";\n\ntype AnnotationsForProperty = {\n\t\"@com.sap.vocabularies.Common.v1.ValueList\"?: {\n\t\tSearchSupported?: boolean;\n\t};\n\t\"@com.sap.vocabularies.Common.v1.Label\"?: string; // AnnotationLabel\n\t\"@com.sap.vocabularies.Common.v1.Text\"?: {\n\t\t// AnnotationText\n\t\t$Path: string;\n\t};\n\t\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"?: {\n\t\t// AnnotationTextUITextArrangement\n\t\t$EnumMember?: string;\n\t};\n\t\"@com.sap.vocabularies.UI.v1.HiddenFilter\"?: boolean;\n\t\"@com.sap.vocabularies.Common.v1.ValueListWithFixedValues\"?: boolean; // AnnotationValueListWithFixedValues\n\t\"@com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers\"?: string[];\n\t\"@com.sap.vocabularies.UI.v1.Hidden\"?: string;\n\t\"@com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive\"?: boolean;\n};\n\ntype AnnotationSelectionField = {\n\t$PropertyPath: string;\n};\n\ntype AnnotationsForEntityType = {\n\t\"@com.sap.vocabularies.UI.v1.SelectionFields\"?: AnnotationSelectionField[];\n};\n\ntype ColumnProperty = {\n\t$Type: string;\n\t$kind: string;\n\t$isCollection: boolean;\n};\n\nexport type InOutParameter = {\n\tparmeterType: string;\n\tsource: string;\n\thelpPath: string;\n\tinitialValueIsSignificant: boolean;\n\tconstantValue?: string | boolean;\n};\n\ntype ValueHelpPayloadInfo = {\n\tvhKeys?: string[];\n\tvhParameters?: InOutParameter[];\n\tvhProperties?: string[];\n};\n\ntype ValueHelpQualifierMap = Record<string, ValueHelpPayloadInfo>;\n\ntype HistoryPayload = {\n\tenabled?: boolean;\n\tdata?: FieldDataType[];\n\thasRelevantData?: boolean;\n};\n\nexport type ValueHelpPayload = {\n\tpropertyPath: string;\n\tqualifiers: ValueHelpQualifierMap;\n\tvalueHelpQualifier: string;\n\tconditionModel?: string;\n\tisActionParameterDialog?: boolean;\n\tisUnitValueHelp?: boolean;\n\trequestGroupId?: string;\n\tuseMultiValueField?: boolean;\n\tisValueListWithFixedValues?: boolean;\n\tvalueHelpDescriptionPath?: string;\n\tpropertyDescriptionPath?: string;\n\tmaxLength?: number;\n\tvalueHelpKeyPath?: string;\n\tisDefineConditionValueHelp?: boolean;\n\tisPotentiallySensitive?: boolean;\n\thistory?: HistoryPayload;\n\texternalIdPath?: string;\n};\n\ntype ColumnDef = {\n\tpath: string;\n\ttextPath?: string;\n\tlabel: string;\n\tsortable: boolean;\n\tfilterable: boolean | CompiledBindingToolkitExpression;\n\t$Type: string;\n};\n\nexport type ValueListInfo = {\n\tkeyPath: string;\n\tdescriptionPath: string;\n\tfieldPropertyPath: string;\n\tvhKeys: string[];\n\tvhParameters: InOutParameter[];\n\tvalueListInfo: AnnotationValueListType;\n\tcolumnDefs: ColumnDef[];\n\tvalueHelpQualifier: string;\n};\n\ntype DisplayFormat = \"Description\" | \"ValueDescription\" | \"Value\" | \"DescriptionValue\";\n\ntype Path = {\n\tfieldPropertyPath: string;\n\tdescriptionPath: string;\n\tkey: string;\n};\n\nexport type SorterType = {\n\tascending?: boolean;\n\tdescending?: boolean;\n\tpath?: string;\n\tname?: string;\n};\n\nfunction _getDefaultSortPropertyName(valueListInfo: AnnotationValueListType): string | undefined {\n\tlet sortFieldName: string | undefined;\n\tconst metaModel = valueListInfo.$model.getMetaModel();\n\tconst entitySetAnnotations = metaModel.getObject(`/${valueListInfo.CollectionPath}@`) || {};\n\tconst sortRestrictionsInfo = getSortRestrictionsInfo(entitySetAnnotations);\n\tconst foundElement = valueListInfo.Parameters.find(function (element) {\n\t\treturn (\n\t\t\t(element.$Type === CommonAnnotationTypes.ValueListParameterInOut ||\n\t\t\t\telement.$Type === CommonAnnotationTypes.ValueListParameterOut ||\n\t\t\t\telement.$Type === CommonAnnotationTypes.ValueListParameterDisplayOnly) &&\n\t\t\t!(\n\t\t\t\tmetaModel.getObject(`/${valueListInfo.CollectionPath}/${element.ValueListProperty}@com.sap.vocabularies.UI.v1.Hidden`) ===\n\t\t\t\ttrue\n\t\t\t)\n\t\t);\n\t});\n\tif (foundElement) {\n\t\tif (\n\t\t\tmetaModel.getObject(\n\t\t\t\t`/${valueListInfo.CollectionPath}/${foundElement.ValueListProperty}@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement/$EnumMember`\n\t\t\t) === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\"\n\t\t) {\n\t\t\tsortFieldName = metaModel.getObject(\n\t\t\t\t`/${valueListInfo.CollectionPath}/${foundElement.ValueListProperty}@com.sap.vocabularies.Common.v1.Text/$Path`\n\t\t\t);\n\t\t} else {\n\t\t\tsortFieldName = foundElement.ValueListProperty;\n\t\t}\n\t}\n\tif (sortFieldName && (!sortRestrictionsInfo.propertyInfo[sortFieldName] || sortRestrictionsInfo.propertyInfo[sortFieldName].sortable)) {\n\t\treturn sortFieldName;\n\t} else {\n\t\treturn undefined;\n\t}\n}\n\nfunction _redundantDescription(\n\toVLParameter: {\n\t\tValueListProperty: string;\n\t},\n\taColumnInfo: ColumnInfo[]\n): boolean | undefined {\n\tconst oColumnInfo = aColumnInfo.find(function (columnInfo: ColumnInfo) {\n\t\treturn oVLParameter.ValueListProperty === columnInfo.textColumnName;\n\t});\n\tif (\n\t\toVLParameter.ValueListProperty === oColumnInfo?.textColumnName &&\n\t\t!oColumnInfo.keyColumnHidden &&\n\t\toColumnInfo.keyColumnDisplayFormat !== \"Value\"\n\t) {\n\t\treturn true;\n\t}\n\treturn undefined;\n}\n\nfunction _hasImportanceHigh(oValueListContext: { Parameters: AnnotationValueListParameter[] }): boolean {\n\treturn oValueListContext.Parameters.some(function (oParameter: AnnotationValueListParameter) {\n\t\treturn (\n\t\t\toParameter[\"@com.sap.vocabularies.UI.v1.Importance\"] &&\n\t\t\toParameter[\"@com.sap.vocabularies.UI.v1.Importance\"].$EnumMember === \"com.sap.vocabularies.UI.v1.ImportanceType/High\"\n\t\t);\n\t});\n}\n\nfunction _build$SelectString(control: Control): string | undefined {\n\tconst oViewData = control.getModel(\"viewData\") as JSONModel;\n\tif (oViewData) {\n\t\tconst oData = oViewData.getData();\n\t\tif (oData) {\n\t\t\tconst aColumns = oData.columns;\n\t\t\tif (aColumns) {\n\t\t\t\treturn aColumns.reduce(function (\n\t\t\t\t\tsQuery: string,\n\t\t\t\t\toProperty: {\n\t\t\t\t\t\tpath?: string;\n\t\t\t\t\t}\n\t\t\t\t) {\n\t\t\t\t\t// Navigation properties (represented by X/Y) should not be added to $select.\n\t\t\t\t\t// TODO : They should be added as $expand=X($select=Y) instead\n\t\t\t\t\tif (oProperty.path && !oProperty.path.includes(\"/\")) {\n\t\t\t\t\t\tsQuery = sQuery ? `${sQuery},${oProperty.path}` : oProperty.path;\n\t\t\t\t\t}\n\t\t\t\t\treturn sQuery;\n\t\t\t\t}, undefined);\n\t\t\t}\n\t\t}\n\t}\n\treturn undefined;\n}\n\nfunction _getValueHelpColumnDisplayFormat(oPropertyAnnotations: MetaModelPropertyAnnotations, isValueHelpWithFixedValues: boolean): string {\n\tconst sDisplayMode = CommonUtils.computeDisplayMode(oPropertyAnnotations);\n\tconst oTextAnnotation = oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"];\n\tconst oTextArrangementAnnotation =\n\t\toTextAnnotation && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"];\n\tif (isValueHelpWithFixedValues) {\n\t\treturn oTextAnnotation && typeof oTextAnnotation !== \"string\" && \"$Path\" in oTextAnnotation && oTextAnnotation.$Path\n\t\t\t? sDisplayMode\n\t\t\t: \"Value\";\n\t} else {\n\t\t// Only explicit defined TextArrangements in a Value Help with Dialog are considered\n\t\treturn oTextArrangementAnnotation ? sDisplayMode : \"Value\";\n\t}\n}\n\n/**\n * Retrieves the valueList's PresentationVariant.\n * @param valueList The valueList annotation\n * @returns The PresentationVariant (if any) of the valueList\n */\nfunction getPresentationVariant(valueList: AnnotationValueListType): MetaModelType<PresentationVariant> | undefined {\n\tconst presentationVariantQualifier = valueList.PresentationVariantQualifier ? `#${valueList.PresentationVariantQualifier}` : \"\";\n\tconst presentationVariantPath = `/${valueList.CollectionPath}/@com.sap.vocabularies.UI.v1.PresentationVariant${presentationVariantQualifier}`;\n\treturn valueList.$model.getMetaModel().getObject(presentationVariantPath) as MetaModelType<PresentationVariant> | undefined;\n}\n\ntype ColumnInfo = {\n\tkeyColumnHidden?: boolean;\n\tkeyColumnDisplayFormat?: string;\n\ttextColumnName?: string;\n\tcolumnName: string;\n\thasHiddenAnnotation?: boolean;\n};\nconst ValueListHelper = {\n\tgetValueListCollectionEntitySet: function (oValueListContext: Context): BaseContext | undefined {\n\t\tconst mValueList = oValueListContext.getObject();\n\t\treturn mValueList.$model.getMetaModel().createBindingContext(`/${mValueList.CollectionPath}`);\n\t},\n\n\t/**\n\t * Checks if the ValueList is annotated with a PresentationVariant.\n\t * If the PresentationVariant is annotated with a RecursiveHierarchyQualifier, the ValueList's table has to be a TreeTable.\n\t * @param valueList The valueList annotation\n\t * @returns True if the table has to be a TreeTable, false otherwise\n\t */\n\tisTreeTableType(valueList: AnnotationValueListType): boolean {\n\t\treturn getPresentationVariant(valueList)?.RecursiveHierarchyQualifier ? true : false;\n\t},\n\n\t/**\n\t * Gets the delegate for the ValueList's table.\n\t * @param valueList The valueList annotation\n\t * @returns The calculated delegate for the ValueList's table\n\t */\n\tgetTableDelegate: function (valueList: AnnotationValueListType): string {\n\t\tlet sDefaultSortPropertyName = _getDefaultSortPropertyName(valueList);\n\t\tif (sDefaultSortPropertyName) {\n\t\t\tsDefaultSortPropertyName = `'${sDefaultSortPropertyName}'`;\n\t\t}\n\t\tconst presentationVariant = getPresentationVariant(valueList);\n\t\tconst recursiveHierarchyQualifier = presentationVariant?.RecursiveHierarchyQualifier;\n\t\tif (recursiveHierarchyQualifier) {\n\t\t\tconst initialExpansionLevel = presentationVariant.InitialExpansionLevel;\n\t\t\treturn (\n\t\t\t\t\"{name: 'sap/fe/macros/internal/valuehelp/TableDelegate', payload: {collectionName: '\" +\n\t\t\t\tvalueList.CollectionPath +\n\t\t\t\t\"'\" +\n\t\t\t\t(sDefaultSortPropertyName ? \", defaultSortPropertyName: \" + sDefaultSortPropertyName : \"\") +\n\t\t\t\t\", hierarchyQualifier: '\" +\n\t\t\t\trecursiveHierarchyQualifier +\n\t\t\t\t\"'\" +\n\t\t\t\t(initialExpansionLevel ? \", initialExpansionLevel: \" + (initialExpansionLevel + 1) : \"\") +\n\t\t\t\t\"}}\"\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t\"{name: 'sap/fe/macros/internal/valuehelp/TableDelegate', payload: {collectionName: '\" +\n\t\t\tvalueList.CollectionPath +\n\t\t\t\"'\" +\n\t\t\t(sDefaultSortPropertyName ? \", defaultSortPropertyName: \" + sDefaultSortPropertyName : \"\") +\n\t\t\t\"}}\"\n\t\t);\n\t},\n\n\t/**\n\t * Gets the sort conditions set on the ValueList's PresentationVariant.\n\t * @param valueListInfo The valueList annotation\n\t * @param isSuggestion Indicates if the ValueList is used in a suggestion scenario\n\t * @returns The sort conditions if any, undefined otherwise\n\t */\n\tgetSortConditionsFromPresentationVariant: function (valueListInfo: AnnotationValueListType, isSuggestion: boolean): string | undefined {\n\t\tconst presentationVariant = getPresentationVariant(valueListInfo);\n\t\tif (presentationVariant?.SortOrder) {\n\t\t\tconst sortConditions = {\n\t\t\t\tsorters: [] as SorterType[]\n\t\t\t};\n\n\t\t\tpresentationVariant.SortOrder.forEach(function (condition) {\n\t\t\t\tconst sorter: SorterType = {},\n\t\t\t\t\tpropertyPath = condition?.Property?.$PropertyPath;\n\t\t\t\tif (isSuggestion) {\n\t\t\t\t\tsorter.path = propertyPath;\n\t\t\t\t} else {\n\t\t\t\t\tsorter.name = propertyPath;\n\t\t\t\t}\n\n\t\t\t\tif (condition.Descending) {\n\t\t\t\t\tsorter.descending = true;\n\t\t\t\t} else {\n\t\t\t\t\tsorter.ascending = true;\n\t\t\t\t}\n\t\t\t\tsortConditions.sorters.push(sorter);\n\t\t\t});\n\t\t\treturn isSuggestion ? `sorter: ${JSON.stringify(sortConditions.sorters)}` : JSON.stringify(sortConditions);\n\t\t}\n\t\treturn;\n\t},\n\n\t/**\n\t * Gets the sort conditions for the ValueList.\n\t * @param valueListInfo The ValueList annotation\n\t * @param isValueHelpWithFixedValues Indicates if ValueList has fixed values\n\t * @returns The sort conditions either from the presentation variant or the default one, undefined otherwise\n\t */\n\tgetSortConditionsForValueList: function (\n\t\tvalueListInfo: AnnotationValueListType,\n\t\tisValueHelpWithFixedValues: boolean\n\t): string | undefined {\n\t\tconst sortConditionsFromPresentationVariant = ValueListHelper.getSortConditionsFromPresentationVariant(valueListInfo, false);\n\n\t\tif (sortConditionsFromPresentationVariant) {\n\t\t\treturn sortConditionsFromPresentationVariant;\n\t\t}\n\t\tif (isValueHelpWithFixedValues) {\n\t\t\tconst sortConditions = {\n\t\t\t\tsorters: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: _getDefaultSortPropertyName(valueListInfo),\n\t\t\t\t\t\tascending: true\n\t\t\t\t\t}\n\t\t\t\t] as SorterType[]\n\t\t\t};\n\t\t\treturn JSON.stringify(sortConditions);\n\t\t}\n\t},\n\n\tgetPropertyPath: function (oParameters: { UnboundAction?: boolean; Property: string; EntityTypePath: string; Action: string }): string {\n\t\treturn !oParameters.UnboundAction\n\t\t\t? `${oParameters.EntityTypePath}/${oParameters.Action}/${oParameters.Property}`\n\t\t\t: `/${oParameters.Action.substring(oParameters.Action.lastIndexOf(\".\") + 1)}/${oParameters.Property}`;\n\t},\n\n\tgetValueListProperty: function (oPropertyContext: BaseContext): BaseContext | undefined {\n\t\tconst oValueListModel = oPropertyContext.getModel();\n\t\tconst mValueList = oValueListModel.getObject(\"/\") as unknown as { CollectionPath: string; $model: ODataModel };\n\t\treturn mValueList.$model.getMetaModel().createBindingContext(`/${mValueList.CollectionPath}/${oPropertyContext.getObject()}`);\n\t},\n\n\t// This function is used for value help m-table and mdc-table\n\tgetColumnVisibility: function (\n\t\toValueList: { Parameters: AnnotationValueListParameter[] },\n\t\toVLParameter: AnnotationValueListParameter,\n\t\toSource: {\n\t\t\tvalueHelpWithFixedValues: boolean;\n\t\t\tcolumnInfo: {\n\t\t\t\tisDialogTable: boolean;\n\t\t\t\tcolumnInfos: ColumnInfo[];\n\t\t\t};\n\t\t}\n\t): boolean {\n\t\tconst isDropDownList = oSource && !!oSource.valueHelpWithFixedValues,\n\t\t\toColumnInfo = oSource.columnInfo,\n\t\t\tisVisible = !_redundantDescription(oVLParameter, oColumnInfo.columnInfos),\n\t\t\tisDialogTable = oColumnInfo.isDialogTable;\n\n\t\tif (isDropDownList || (!isDropDownList && isDialogTable) || (!isDropDownList && !_hasImportanceHigh(oValueList))) {\n\t\t\tconst columnWithHiddenAnnotation = oColumnInfo.columnInfos.find(function (columnInfo: ColumnInfo) {\n\t\t\t\treturn oVLParameter.ValueListProperty === columnInfo.columnName && columnInfo.hasHiddenAnnotation === true;\n\t\t\t});\n\t\t\treturn !columnWithHiddenAnnotation ? isVisible : false;\n\t\t} else if (!isDropDownList && _hasImportanceHigh(oValueList)) {\n\t\t\treturn oVLParameter &&\n\t\t\t\toVLParameter[\"@com.sap.vocabularies.UI.v1.Importance\"] &&\n\t\t\t\toVLParameter[\"@com.sap.vocabularies.UI.v1.Importance\"].$EnumMember === \"com.sap.vocabularies.UI.v1.ImportanceType/High\"\n\t\t\t\t? true\n\t\t\t\t: false;\n\t\t}\n\t\treturn true;\n\t},\n\n\tgetColumnVisibilityInfo: function (\n\t\toValueList: {\n\t\t\t$model: ODataModel;\n\t\t\tCollectionPath: string;\n\t\t\tParameters: AnnotationValueListParameter[];\n\t\t},\n\t\tsPropertyFullPath: string,\n\t\tbIsDropDownListe: boolean,\n\t\tisDialogTable: boolean\n\t): {\n\t\tisDialogTable: boolean;\n\t\tcolumnInfos: ColumnInfo[];\n\t} {\n\t\tconst oMetaModel = oValueList.$model.getMetaModel();\n\t\tconst aColumnInfos: ColumnInfo[] = [];\n\t\tconst oColumnInfos = {\n\t\t\tisDialogTable: isDialogTable,\n\t\t\tcolumnInfos: aColumnInfos\n\t\t};\n\n\t\toValueList.Parameters.forEach(function (oParameter: AnnotationValueListParameter) {\n\t\t\tconst oPropertyAnnotations = oMetaModel.getObject(`/${oValueList.CollectionPath}/${oParameter.ValueListProperty}@`);\n\t\t\tconst oTextAnnotation = oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"];\n\t\t\tlet columnInfo: ColumnInfo = {} as unknown as ColumnInfo;\n\t\t\tif (oTextAnnotation) {\n\t\t\t\tcolumnInfo = {\n\t\t\t\t\tkeyColumnHidden: oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] ? true : false,\n\t\t\t\t\tkeyColumnDisplayFormat: oTextAnnotation && _getValueHelpColumnDisplayFormat(oPropertyAnnotations, bIsDropDownListe),\n\t\t\t\t\ttextColumnName: oTextAnnotation && oTextAnnotation.$Path,\n\t\t\t\t\tcolumnName: oParameter.ValueListProperty,\n\t\t\t\t\thasHiddenAnnotation: oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] ? true : false\n\t\t\t\t};\n\t\t\t} else if (oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"]) {\n\t\t\t\tcolumnInfo = {\n\t\t\t\t\tcolumnName: oParameter.ValueListProperty,\n\t\t\t\t\thasHiddenAnnotation: oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] ? true : false\n\t\t\t\t};\n\t\t\t}\n\t\t\toColumnInfos.columnInfos.push(columnInfo);\n\t\t});\n\n\t\treturn oColumnInfos;\n\t},\n\n\tgetTableItemsParameters: function (\n\t\tthis: Control,\n\t\tvalueListInfo: AnnotationValueListType,\n\t\trequestGroupId: string,\n\t\tisSuggestion: boolean,\n\t\tisValueHelpWithFixedValues: boolean\n\t): string {\n\t\tconst itemParameters = [`path: '/${valueListInfo.CollectionPath}'`];\n\n\t\t// add select to oBindingInfo (BCP 2180255956 / 2170163012)\n\t\tconst selectString = _build$SelectString(this);\n\n\t\t// since there could be recommendations/recently used values to show in the suggestion popover\n\t\t// hence we need to create some transient contexts on the valueHelp list binding\n\t\t// so we will set the updateGroupId of the list binding to avoid sending calls to the backend\n\t\t// we need to explicitly set $$sharedRequest to false to make sure we can create transient contexts in RAP\n\t\tif (requestGroupId) {\n\t\t\tconst selectStringPart = selectString ? `, '${selectString}'` : \"\";\n\n\t\t\titemParameters.push(\n\t\t\t\t`parameters: {$$sharedRequest: false, $$updateGroupId: \"donotsubmit\", $$groupId: '${requestGroupId}'${selectStringPart}}`\n\t\t\t);\n\t\t} else if (selectString) {\n\t\t\titemParameters.push(`parameters: {$$sharedRequest: false, $$updateGroupId: \"donotsubmit\", $select: '${selectString}'}`);\n\t\t}\n\n\t\tconst isSuspended = valueListInfo.Parameters.some(function (oParameter) {\n\t\t\treturn isSuggestion || oParameter.$Type === CommonAnnotationTypes.ValueListParameterIn;\n\t\t});\n\t\titemParameters.push(`suspended: ${isSuspended}`);\n\n\t\tif (!isValueHelpWithFixedValues) {\n\t\t\titemParameters.push(\"length: 10\");\n\t\t}\n\n\t\tconst sortConditionsFromPresentationVariant = ValueListHelper.getSortConditionsFromPresentationVariant(valueListInfo, isSuggestion);\n\n\t\tif (sortConditionsFromPresentationVariant) {\n\t\t\titemParameters.push(sortConditionsFromPresentationVariant);\n\t\t} else if (isValueHelpWithFixedValues) {\n\t\t\tconst defaultSortPropertyName = _getDefaultSortPropertyName(valueListInfo);\n\n\t\t\tif (defaultSortPropertyName) {\n\t\t\t\titemParameters.push(`sorter: [{path: '${defaultSortPropertyName}', ascending: true}]`);\n\t\t\t}\n\t\t}\n\n\t\treturn \"{\" + itemParameters.join(\", \") + \"}\";\n\t},\n\n\t// Is needed for \"external\" representation in qunit\n\thasImportance: function (oValueListContext: Context): string {\n\t\treturn _hasImportanceHigh(oValueListContext.getObject()) ? \"Importance/High\" : \"None\";\n\t},\n\n\t// Is needed for \"external\" representation in qunit\n\tgetMinScreenWidth: function (oValueList: { Parameters: AnnotationValueListParameter[] }): string {\n\t\treturn _hasImportanceHigh(oValueList) ? \"{= ${_VHUI>/minScreenWidth}}\" : \"416px\";\n\t},\n\n\t/**\n\t * Retrieves the column width for a given property.\n\t * @param propertyPath The propertyPath\n\t * @param isValueListWithFixedValues An indicator stating if the valueHelp has fixed values\n\t * @returns The width as a string or undefined.\n\t */\n\tgetColumnWidth: function (propertyPath: DataModelObjectPath<Property>, isValueListWithFixedValues = false): string | undefined {\n\t\tif (CommonUtils.isSmallDevice() || !propertyPath.targetObject) return;\n\t\tconst property = propertyPath.targetObject;\n\t\tlet relatedProperty: Property[] = [property];\n\t\t// The additional property could refer to the text, currency, unit or timezone\n\t\tconst additionalProperty =\n\t\t\t\tgetAssociatedTextProperty(property) ||\n\t\t\t\tgetAssociatedCurrencyProperty(property) ||\n\t\t\t\tgetAssociatedUnitProperty(property) ||\n\t\t\t\tgetAssociatedTimezoneProperty(property),\n\t\t\ttextAnnotation = property.annotations?.Common?.Text,\n\t\t\ttextArrangement = textAnnotation?.annotations?.UI?.TextArrangement?.toString(),\n\t\t\tlabel = property.annotations?.Common?.Label?.toString();\n\t\tlet displayMode: string | undefined;\n\n\t\t// default textarrangement is only used for VH with fixed values\n\t\tif (isValueListWithFixedValues && !textArrangement) {\n\t\t\t//displayMode = as annotated or default\n\t\t\tdisplayMode = getDisplayMode(propertyPath);\n\t\t} else {\n\t\t\t//displayMode = as annotated or undefined\n\t\t\tdisplayMode = textArrangement && getDisplayMode(propertyPath);\n\t\t}\n\n\t\tif (additionalProperty) {\n\t\t\tif (displayMode === \"Description\") {\n\t\t\t\trelatedProperty = [additionalProperty];\n\t\t\t} else if (!textAnnotation || (displayMode && displayMode !== \"Value\")) {\n\t\t\t\trelatedProperty.push(additionalProperty);\n\t\t\t}\n\t\t}\n\n\t\tlet size = 0;\n\t\tconst instances: ODataType[] = [];\n\n\t\trelatedProperty.forEach((prop: Property) => {\n\t\t\tconst propertyTypeConfig = getTypeConfig(prop, undefined);\n\t\t\tconst PropertyODataConstructor = ObjectPath.get(propertyTypeConfig.type);\n\t\t\tif (PropertyODataConstructor) {\n\t\t\t\tinstances.push(new PropertyODataConstructor(propertyTypeConfig.formatOptions, propertyTypeConfig.constraints));\n\t\t\t}\n\t\t});\n\t\tconst sWidth = Util.calcColumnWidth(instances, label);\n\t\tsize = sWidth ? parseFloat(sWidth.replace(\"rem\", \"\")) : 0;\n\n\t\tif (size === 0) {\n\t\t\tLog.error(`Cannot compute the column width for property: ${property.name}`);\n\t\t}\n\t\treturn size <= 20 ? size.toString() + \"rem\" : \"20rem\";\n\t},\n\n\tgetOutParameterPaths: function (aParameters: AnnotationValueListParameter[]): string {\n\t\tlet sPath = \"\";\n\t\taParameters.forEach(function (oParameter: AnnotationValueListParameter) {\n\t\t\tif (oParameter.$Type.endsWith(\"Out\")) {\n\t\t\t\tsPath += `{${oParameter.ValueListProperty}}`;\n\t\t\t}\n\t\t});\n\t\treturn sPath;\n\t},\n\n\tentityIsSearchable: function (\n\t\tpropertyAnnotations: AnnotationsForProperty,\n\t\tcollectionAnnotations: MetaModelEntitySetAnnotation\n\t): boolean {\n\t\tconst searchSupported = propertyAnnotations[\"@com.sap.vocabularies.Common.v1.ValueList\"]?.SearchSupported,\n\t\t\tsearchable = collectionAnnotations[\"@Org.OData.Capabilities.V1.SearchRestrictions\"]?.Searchable;\n\n\t\tif (\n\t\t\t(searchable === undefined && searchSupported === false) ||\n\t\t\t(searchable === true && searchSupported === false) ||\n\t\t\tsearchable === false\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t * Returns the condition path required for the condition model.\n\t * For e.g. <1:N-PropertyName>*\\/<1:1-PropertyName>/<PropertyName>.\n\t * @param metaModel The metamodel instance\n\t * @param entitySet The entity set path\n\t * @param propertyPath The property path\n\t * @returns The formatted condition path\n\t * @private\n\t */\n\t_getConditionPath: function (metaModel: ODataMetaModel, entitySet: string, propertyPath: string): string {\n\t\t// (see also: sap/fe/core/converters/controls/ListReport/FilterBar.ts)\n\t\tconst parts = propertyPath.split(\"/\");\n\t\tlet conditionPath = \"\",\n\t\t\tpartialPath: string | undefined;\n\n\t\twhile (parts.length) {\n\t\t\tlet part = parts.shift() as string;\n\t\t\tpartialPath = partialPath ? `${partialPath}/${part}` : part;\n\t\t\tconst property = metaModel.getObject(`${entitySet}/${partialPath}`);\n\t\t\tif (property && property.$kind === \"NavigationProperty\" && property.$isCollection) {\n\t\t\t\tpart += \"*\";\n\t\t\t}\n\t\t\tconditionPath = conditionPath ? `${conditionPath}/${part}` : part;\n\t\t}\n\t\treturn conditionPath;\n\t},\n\n\t/**\n\t * Returns array of column definitions corresponding to properties defined as Selection Fields on the CollectionPath entity set in a ValueHelp.\n\t * @param metaModel The metamodel instance\n\t * @param entitySet The entity set path\n\t * @returns Array of column definitions\n\t * @private\n\t */\n\t_getColumnDefinitionFromSelectionFields: function (metaModel: ODataMetaModel, entitySet: string): ColumnDef[] {\n\t\tconst columnDefs: ColumnDef[] = [],\n\t\t\tentityTypeAnnotations = metaModel.getObject(`${entitySet}/@`) as AnnotationsForEntityType,\n\t\t\tselectionFields = entityTypeAnnotations[\"@com.sap.vocabularies.UI.v1.SelectionFields\"];\n\n\t\tif (selectionFields) {\n\t\t\tselectionFields.forEach(function (selectionField: AnnotationSelectionField) {\n\t\t\t\tconst selectionFieldPath = `${entitySet}/${selectionField.$PropertyPath}`,\n\t\t\t\t\tconditionPath = ValueListHelper._getConditionPath(metaModel, entitySet, selectionField.$PropertyPath),\n\t\t\t\t\tpropertyAnnotations = metaModel.getObject(`${selectionFieldPath}@`) as AnnotationsForProperty,\n\t\t\t\t\tcolumnDef = {\n\t\t\t\t\t\tpath: conditionPath,\n\t\t\t\t\t\tlabel: propertyAnnotations[AnnotationLabel] || selectionFieldPath,\n\t\t\t\t\t\tsortable: true,\n\t\t\t\t\t\tfilterable: isPropertyFilterable(metaModel, entitySet, selectionField.$PropertyPath, false),\n\t\t\t\t\t\t$Type: metaModel.getObject(selectionFieldPath)?.$Type\n\t\t\t\t\t};\n\t\t\t\tcolumnDefs.push(columnDef);\n\t\t\t});\n\t\t}\n\n\t\treturn columnDefs;\n\t},\n\n\t_mergeColumnDefinitionsFromProperties: function (\n\t\tcolumnDefs: ColumnDef[],\n\t\tvalueListInfo: AnnotationValueListType,\n\t\tvalueListProperty: string,\n\t\tproperty: ColumnProperty,\n\t\tpropertyAnnotations: AnnotationsForProperty\n\t): void {\n\t\tlet columnPath = valueListProperty,\n\t\t\tcolumnPropertyType = property.$Type;\n\t\tconst label = propertyAnnotations[AnnotationLabel] || columnPath,\n\t\t\ttextAnnotation = propertyAnnotations[AnnotationText];\n\n\t\tif (\n\t\t\ttextAnnotation &&\n\t\t\tpropertyAnnotations[AnnotationTextUITextArrangement]?.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\"\n\t\t) {\n\t\t\t// the column property is the one coming from the text annotation\n\t\t\tcolumnPath = textAnnotation.$Path;\n\t\t\tconst textPropertyPath = `/${valueListInfo.CollectionPath}/${columnPath}`;\n\t\t\tcolumnPropertyType = valueListInfo.$model.getMetaModel()?.getObject(textPropertyPath)?.$Type as string;\n\t\t}\n\n\t\tif (columnNotAlreadyDefined(columnDefs, columnPath)) {\n\t\t\tconst columnDef: ColumnDef = {\n\t\t\t\tpath: columnPath,\n\t\t\t\t// ensure the text associated with a column that references a navigation property reflects the same navigation structure as the column\n\t\t\t\ttextPath:\n\t\t\t\t\ttextAnnotation?.$Path && valueListProperty.includes(\"/\")\n\t\t\t\t\t\t? valueListProperty.substring(0, valueListProperty.lastIndexOf(\"/\")) + \"/\" + textAnnotation.$Path\n\t\t\t\t\t\t: textAnnotation?.$Path,\n\t\t\t\tlabel: label,\n\t\t\t\tsortable: true,\n\t\t\t\tfilterable: !propertyAnnotations[\"@com.sap.vocabularies.UI.v1.HiddenFilter\"],\n\t\t\t\t$Type: columnPropertyType\n\t\t\t};\n\t\t\tcolumnDefs.push(columnDef);\n\t\t}\n\t},\n\n\tfilterInOutParameters: function (vhParameters: InOutParameter[], typeFilter: string[]): InOutParameter[] {\n\t\treturn vhParameters.filter(function (parameter) {\n\t\t\treturn typeFilter.includes(parameter.parmeterType);\n\t\t});\n\t},\n\n\tgetInParameters: function (vhParameters: InOutParameter[]): InOutParameter[] {\n\t\treturn ValueListHelper.filterInOutParameters(vhParameters, [\n\t\t\tAnnotationValueListParameterIn,\n\t\t\tAnnotationValueListParameterConstant,\n\t\t\tAnnotationValueListParameterInOut\n\t\t]);\n\t},\n\n\tgetOutParameters: function (vhParameters: InOutParameter[]): InOutParameter[] {\n\t\treturn ValueListHelper.filterInOutParameters(vhParameters, [AnnotationValueListParameterOut, AnnotationValueListParameterInOut]);\n\t},\n\n\tgetInAndOutParameters: function (vhParameters: InOutParameter[]): InOutParameter[] {\n\t\treturn ValueListHelper.filterInOutParameters(vhParameters, ValueListHelper.getInAndOutParametersList());\n\t},\n\n\tcreateVHUIModel: function (valueHelp: ValueHelp, propertyPath: string, metaModel: ODataMetaModel): JSONModel {\n\t\t// setting the _VHUI model evaluated in the ValueListTable fragment\n\t\tconst vhUIModel = new JSONModel({}),\n\t\t\tpropertyAnnotations = metaModel.getObject(`${propertyPath}@`) as AnnotationsForProperty;\n\n\t\tvalueHelp.setModel(vhUIModel, \"_VHUI\");\n\t\t// Identifies the \"ContextDependent-Scenario\"\n\t\tvhUIModel.setProperty(\"/hasValueListRelevantQualifiers\", !!propertyAnnotations[AnnotationsValueListRelevantQualifiers]);\n\t\t/* Property label for dialog title */\n\t\tvhUIModel.setProperty(\"/propertyLabel\", propertyAnnotations[AnnotationLabel]);\n\n\t\treturn vhUIModel;\n\t},\n\n\t/**\n\t * Returns the title of the value help dialog.\n\t * By default, the data field label is used, otherwise either the property label or the value list label is used as a fallback.\n\t * For context-dependent value helps, by default the value list label is used, otherwise either the property label or the data field label is used as a fallback.\n\t * @param valueHelp The valueHelp instance\n\t * @param valuehelpLabel The label in the value help metadata\n\t * @returns The title for the valueHelp dialog\n\t * @private\n\t */\n\t_getDialogTitle: function (valueHelp: ValueHelp, valuehelpLabel: string | undefined): string {\n\t\tconst propertyLabel = (valueHelp.getModel(\"_VHUI\") as JSONModel).getProperty(\"/propertyLabel\");\n\t\tconst dataFieldLabel = valueHelp.getControl()?.getProperty(\"label\");\n\t\treturn (valueHelp.getModel(\"_VHUI\") as JSONModel).getProperty(\"/hasValueListRelevantQualifiers\")\n\t\t\t? valuehelpLabel || propertyLabel || dataFieldLabel\n\t\t\t: dataFieldLabel || propertyLabel || valuehelpLabel;\n\t},\n\n\tdestroyVHContent: function (valueHelp: ValueHelp): void {\n\t\tif (valueHelp.getDialog()) {\n\t\t\tvalueHelp.getDialog().destroyContent();\n\t\t}\n\t\tif (valueHelp.getTypeahead()) {\n\t\t\tvalueHelp.getTypeahead().destroyContent();\n\t\t}\n\t},\n\n\tputDefaultQualifierFirst: function (qualifiers: string[]): string[] {\n\t\tconst indexDefaultVH = qualifiers.indexOf(\"\");\n\n\t\t// default ValueHelp without qualifier should be the first\n\t\tif (indexDefaultVH > 0) {\n\t\t\tqualifiers.unshift(qualifiers[indexDefaultVH]);\n\t\t\tqualifiers.splice(indexDefaultVH + 1, 1);\n\t\t}\n\t\treturn qualifiers;\n\t},\n\n\t_getContextPrefix: function (bindingContext: Context | undefined, propertyBindingParts: string[]): string {\n\t\tif (bindingContext && bindingContext.getPath()) {\n\t\t\tconst bindigContextParts = bindingContext.getPath().split(\"/\");\n\t\t\tif (propertyBindingParts.length - bindigContextParts.length > 1) {\n\t\t\t\tconst contextPrefixParts = [];\n\t\t\t\tfor (let i = bindigContextParts.length; i < propertyBindingParts.length - 1; i++) {\n\t\t\t\t\tcontextPrefixParts.push(propertyBindingParts[i]);\n\t\t\t\t}\n\t\t\t\treturn `${contextPrefixParts.join(\"/\")}/`;\n\t\t\t}\n\t\t}\n\n\t\treturn \"\";\n\t},\n\n\t_getVhParameter: function (\n\t\tconditionModel: string | undefined,\n\t\tvalueHelp: ValueHelp,\n\t\tcontextPrefix: string,\n\t\tparameter: AnnotationValueListParameter,\n\t\tvhMetaModel: ODataMetaModel,\n\t\tlocalDataPropertyPath: string\n\t): InOutParameter {\n\t\tlet valuePath = \"\";\n\t\tconst bindingContext = valueHelp.getBindingContext();\n\t\tif (conditionModel && conditionModel.length > 0) {\n\t\t\tif (\n\t\t\t\tvalueHelp.getParent()?.isA(\"sap.ui.mdc.Table\") &&\n\t\t\t\tbindingContext &&\n\t\t\t\tValueListHelper._parameterIsA(parameter, [\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterIn,\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t\t])\n\t\t\t) {\n\t\t\t\t// Special handling for value help used in filter dialog\n\t\t\t\tconst parts = localDataPropertyPath.split(\"/\");\n\t\t\t\tif (parts.length > 1) {\n\t\t\t\t\tconst firstNavigationProperty = parts[0];\n\t\t\t\t\tconst oBoundEntity = vhMetaModel.getMetaContext(bindingContext.getPath());\n\t\t\t\t\tconst sPathOfTable = (valueHelp.getParent() as unknown as { getRowBinding: Function }).getRowBinding().getPath(); //TODO\n\t\t\t\t\tif (oBoundEntity.getObject(`${sPathOfTable}/$Partner`) === firstNavigationProperty) {\n\t\t\t\t\t\t// Using the condition model doesn't make any sense in case an in-parameter uses a navigation property\n\t\t\t\t\t\t// referring to the partner. Therefore using the FVH context instead of the condition model.\n\t\t\t\t\t\tvaluePath = localDataPropertyPath;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tvalueHelp.getParent()?.getParent()?.getParent()?.isA<FilterBarAPI>(\"sap.fe.macros.filterBar.FilterBarAPI\") &&\n\t\t\t\tbindingContext &&\n\t\t\t\tValueListHelper._parameterIsA(parameter, [\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterIn,\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t\t])\n\t\t\t) {\n\t\t\t\t// In case we are a value help of a FilterBar, we can go up to the API to check if we are on a filterbar representing a navigation property\n\t\t\t\tconst filterBarAPI = valueHelp.getParent()?.getParent()?.getParent() as FilterBarAPI;\n\t\t\t\tconst filterBarMetaPath = filterBarAPI.metaPath;\n\t\t\t\tconst valueHelpContextPath = vhMetaModel.getMetaPath(bindingContext.getPath());\n\t\t\t\tconst contextMetaPath = new MetaPath(convertTypes(vhMetaModel), valueHelpContextPath, valueHelpContextPath);\n\t\t\t\tconst metaPath = new MetaPath(convertTypes(vhMetaModel), filterBarMetaPath, valueHelpContextPath);\n\t\t\t\tconst newPath = metaPath.getMetaPathForPath<Property>(localDataPropertyPath);\n\t\t\t\tif (newPath && newPath.getTarget()) {\n\t\t\t\t\tconst targetEntitySet = newPath.getClosestEntitySet();\n\t\t\t\t\tif (targetEntitySet === contextMetaPath.getClosestEntitySet()) {\n\t\t\t\t\t\tvaluePath = contextMetaPath.getMetaPathForObject(newPath.getTarget()).getRelativePath();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!valuePath) {\n\t\t\t\tvaluePath = conditionModel + \">/conditions/\" + localDataPropertyPath;\n\t\t\t}\n\t\t} else {\n\t\t\tvaluePath = contextPrefix + localDataPropertyPath;\n\t\t}\n\n\t\treturn {\n\t\t\tparmeterType: parameter.$Type,\n\t\t\tsource: valuePath,\n\t\t\thelpPath: parameter.ValueListProperty,\n\t\t\tconstantValue: parameter.Constant,\n\t\t\tinitialValueIsSignificant: Boolean(parameter.InitialValueIsSignificant)\n\t\t};\n\t},\n\n\t_parameterIsA(parameter: AnnotationValueListParameter, parameterTypes: CommonAnnotationTypes[]): boolean {\n\t\treturn parameterTypes.includes(parameter.$Type as CommonAnnotationTypes);\n\t},\n\n\t_enrichPath: function (\n\t\tpath: Path,\n\t\tpropertyPath: string,\n\t\tlocalDataPropertyPath: string,\n\t\tparameter: AnnotationValueListParameter,\n\t\tpropertyName: string | undefined,\n\t\tpropertyAnnotations: AnnotationsForProperty,\n\t\texternalIdPath: string | undefined\n\t): void {\n\t\tif (\n\t\t\t!path.key &&\n\t\t\tValueListHelper._parameterIsA(parameter, [\n\t\t\t\tCommonAnnotationTypes.ValueListParameterOut,\n\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t]) &&\n\t\t\tlocalDataPropertyPath === propertyName\n\t\t) {\n\t\t\t/* EXTERNALID */\n\t\t\tconst externalIdProperty = externalIdPath?.split(\"/\").pop();\n\t\t\tparameter.ValueListProperty = externalIdProperty ? externalIdProperty : parameter.ValueListProperty;\n\t\t\tpath.fieldPropertyPath = propertyPath;\n\t\t\tpath.key = parameter.ValueListProperty;\n\n\t\t\t//Only the text annotation of the key can specify the description\n\t\t\tpath.descriptionPath = propertyAnnotations[AnnotationText]?.$Path || \"\";\n\t\t}\n\t},\n\n\t_enrichKeys: function (vhKeys: string[], parameter: AnnotationValueListParameter): void {\n\t\tif (\n\t\t\tValueListHelper._parameterIsA(parameter, ValueListHelper.getInAndOutParametersList()) &&\n\t\t\t!vhKeys.includes(parameter.ValueListProperty)\n\t\t) {\n\t\t\tvhKeys.push(parameter.ValueListProperty);\n\t\t}\n\t},\n\n\t_getEntityType: async function (metaModelVH: ODataMetaModel, entitySetPath: string): Promise<EntityType> {\n\t\treturn metaModelVH.getObject(`${entitySetPath}/`) || (await metaModelVH.requestObject(`${entitySetPath}/`));\n\t},\n\n\t/**\n\t * Method to pre-process a value list annotation before using them in the templating.\n\t * @param annotationValueListType\n\t * @param propertyName\n\t * @param conditionModel\n\t * @param valueHelp\n\t * @param contextPrefix\n\t * @param metaModel\n\t * @param valueHelpQualifier\n\t * @param payload\n\t * @param entityType\n\t * @returns The ValueListInfo to be used in templating\n\t */\n\t_processParameters: function (\n\t\tannotationValueListType: AnnotationValueListType,\n\t\tpropertyName: string | undefined,\n\t\tconditionModel: string | undefined,\n\t\tvalueHelp: ValueHelp,\n\t\tcontextPrefix: string,\n\t\tmetaModel: ODataMetaModel,\n\t\tvalueHelpQualifier: string,\n\t\tpayload: ValueHelpPayload,\n\t\tentityType: EntityType | undefined\n\t): ValueListInfo | undefined {\n\t\tconst isForMultiValueField = payload.useMultiValueField;\n\t\tconst metaModelVH = annotationValueListType.$model.getMetaModel(),\n\t\t\tentitySetPath = `/${annotationValueListType.CollectionPath}`;\n\t\tif (entityType === undefined) {\n\t\t\tLog.error(`Inconsistent value help metadata: Entity ${entitySetPath} is not defined`);\n\t\t\treturn;\n\t\t}\n\t\tconst columnDefs = ValueListHelper._getColumnDefinitionFromSelectionFields(metaModelVH, entitySetPath),\n\t\t\tvhParameters: InOutParameter[] = [],\n\t\t\tpath: Path = {\n\t\t\t\tfieldPropertyPath: \"\",\n\t\t\t\tdescriptionPath: \"\",\n\t\t\t\tkey: \"\"\n\t\t\t};\n\t\tlet vhKeys: string[] = [];\n\n\t\tif (\"$Key\" in entityType && entityType.$Key) {\n\t\t\tvhKeys = [...(entityType.$Key as string[])];\n\t\t}\n\n\t\tfor (const parameter of annotationValueListType.Parameters) {\n\t\t\t//All String fields are allowed for filter\n\t\t\tconst propertyPath = `/${annotationValueListType.CollectionPath}/${parameter.ValueListProperty}`,\n\t\t\t\tproperty = metaModelVH.getObject(propertyPath),\n\t\t\t\tpropertyAnnotations = (metaModelVH.getObject(`${propertyPath}@`) || {}) as AnnotationsForProperty,\n\t\t\t\tlocalDataPropertyPath = parameter.LocalDataProperty?.$PropertyPath || \"\";\n\n\t\t\tif (propertyAnnotations[AnnotationsPersonalDataPotentiallySensitive]) {\n\t\t\t\tpayload.isPotentiallySensitive = true;\n\t\t\t}\n\n\t\t\t// If property is undefined, then the property coming for the entry isn't defined in\n\t\t\t// the metamodel, therefore we don't need to add it in the in/out parameters\n\t\t\tif (property) {\n\t\t\t\t// Search for the *out Parameter mapped to the local property\n\t\t\t\tValueListHelper._enrichPath(\n\t\t\t\t\tpath,\n\t\t\t\t\tpropertyPath,\n\t\t\t\t\tlocalDataPropertyPath,\n\t\t\t\t\tparameter,\n\t\t\t\t\tpropertyName,\n\t\t\t\t\tpropertyAnnotations,\n\t\t\t\t\tpayload.externalIdPath\n\t\t\t\t);\n\n\t\t\t\tconst valueListProperty = parameter.ValueListProperty;\n\t\t\t\tValueListHelper._mergeColumnDefinitionsFromProperties(\n\t\t\t\t\tcolumnDefs,\n\t\t\t\t\tannotationValueListType,\n\t\t\t\t\tvalueListProperty,\n\t\t\t\t\tproperty,\n\t\t\t\t\tpropertyAnnotations\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t//In and InOut and Out\n\t\t\tif (\n\t\t\t\tValueListHelper._parameterIsA(parameter, [\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterIn,\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterOut,\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t\t]) &&\n\t\t\t\tlocalDataPropertyPath !== propertyName\n\t\t\t) {\n\t\t\t\tconst vhParameter = ValueListHelper._getVhParameter(\n\t\t\t\t\tconditionModel,\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontextPrefix,\n\t\t\t\t\tparameter,\n\t\t\t\t\tmetaModel,\n\t\t\t\t\tlocalDataPropertyPath\n\t\t\t\t);\n\t\t\t\tif (\n\t\t\t\t\t!isForMultiValueField ||\n\t\t\t\t\t(isForMultiValueField && ValueListHelper._parameterIsA(parameter, [CommonAnnotationTypes.ValueListParameterIn]))\n\t\t\t\t) {\n\t\t\t\t\t// in case of Multivalue Field we disregard ValueListParameterInOut\n\t\t\t\t\tvhParameters.push(vhParameter);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Constant as InParamter for filtering\n\t\t\tif (parameter.$Type === AnnotationValueListParameterConstant) {\n\t\t\t\tvhParameters.push({\n\t\t\t\t\tparmeterType: parameter.$Type,\n\t\t\t\t\tsource: parameter.ValueListProperty,\n\t\t\t\t\thelpPath: parameter.ValueListProperty,\n\t\t\t\t\tconstantValue: parameter.Constant,\n\t\t\t\t\tinitialValueIsSignificant: Boolean(parameter.InitialValueIsSignificant)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Enrich keys with out-parameters\n\t\t\tValueListHelper._enrichKeys(vhKeys, parameter);\n\t\t}\n\n\t\t/* Ensure that vhKeys are part of the columnDefs, otherwise it is not considered in $select (BCP 2270141154) */\n\t\tfor (const vhKey of vhKeys) {\n\t\t\tif (columnNotAlreadyDefined(columnDefs, vhKey)) {\n\t\t\t\tconst columnDef: ColumnDef = {\n\t\t\t\t\tpath: vhKey,\n\t\t\t\t\t$Type: metaModelVH.getObject(`/${annotationValueListType.CollectionPath}/${path.key}`)?.$Type,\n\t\t\t\t\tlabel: \"\",\n\t\t\t\t\tsortable: false,\n\t\t\t\t\tfilterable: undefined\n\t\t\t\t};\n\t\t\t\tcolumnDefs.push(columnDef);\n\t\t\t}\n\t\t}\n\n\t\tconst valuelistInfo: ValueListInfo = {\n\t\t\tkeyPath: path.key,\n\t\t\tdescriptionPath: path.descriptionPath,\n\t\t\tfieldPropertyPath: path.fieldPropertyPath,\n\t\t\tvhKeys: vhKeys,\n\t\t\tvhParameters: vhParameters,\n\t\t\tvalueListInfo: annotationValueListType,\n\t\t\tcolumnDefs: columnDefs,\n\t\t\tvalueHelpQualifier\n\t\t};\n\t\treturn valuelistInfo;\n\t},\n\n\t_logError: function (propertyPath: string, error?: unknown): void {\n\t\tconst status = error ? (error as XMLHttpRequest).status : undefined;\n\t\tconst message = error instanceof Error ? error.message : String(error);\n\t\tconst msg = status === 404 ? `Metadata not found (${status}) for value help of property ${propertyPath}` : message;\n\n\t\tLog.error(msg);\n\t},\n\t/**\n\t * Method to compute the value list infos based on the value list annotations before using them at templating.\n\t * @param valueHelp\n\t * @param propertyPath\n\t * @param payload\n\t * @param metaModel\n\t * @returns The value list infos\n\t */\n\tgetValueListInfo: async function (\n\t\tvalueHelp: ValueHelp,\n\t\tpropertyPath: string,\n\t\tpayload: ValueHelpPayload,\n\t\tmetaModel: ODataMetaModel\n\t): Promise<ValueListInfo[]> {\n\t\tconst bindingContext = valueHelp.getBindingContext() as Context | undefined,\n\t\t\tconditionModel = payload.conditionModel,\n\t\t\tvalueListInfos: ValueListInfo[] = [],\n\t\t\tpropertyPathParts = propertyPath.split(\"/\");\n\t\ttry {\n\t\t\tconst valueListByQualifier = await metaModel.requestValueListInfo(propertyPath, true, bindingContext);\n\t\t\tconst valueHelpQualifiers = ValueListHelper.putDefaultQualifierFirst(Object.keys(valueListByQualifier)),\n\t\t\t\tpropertyName = propertyPathParts.pop();\n\n\t\t\tconst contextPrefix = payload.useMultiValueField ? ValueListHelper._getContextPrefix(bindingContext, propertyPathParts) : \"\";\n\n\t\t\tfor (const valueHelpQualifier of valueHelpQualifiers) {\n\t\t\t\t// Add column definitions for properties defined as Selection fields on the CollectionPath entity set.\n\t\t\t\tconst annotationValueListType = valueListByQualifier[valueHelpQualifier];\n\t\t\t\tconst metaModelVH = annotationValueListType.$model.getMetaModel(),\n\t\t\t\t\tentitySetPath = `/${annotationValueListType.CollectionPath}`;\n\t\t\t\tconst entityType = await ValueListHelper._getEntityType(metaModelVH, entitySetPath);\n\n\t\t\t\tconst valueListInfo = ValueListHelper._processParameters(\n\t\t\t\t\tannotationValueListType,\n\t\t\t\t\tpropertyName,\n\t\t\t\t\tconditionModel,\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontextPrefix,\n\t\t\t\t\tmetaModel,\n\t\t\t\t\tannotationValueListType.$qualifier ?? valueHelpQualifier, // for ValueListWithFixedValues, get the qualifier from $qualifier\n\t\t\t\t\tpayload,\n\t\t\t\t\tentityType\n\t\t\t\t);\n\t\t\t\t/* Only consistent value help definitions shall be part of the value help */\n\t\t\t\tif (valueListInfo) {\n\t\t\t\t\tvalueListInfos.push(valueListInfo);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthis._logError(propertyPath, err);\n\n\t\t\tValueListHelper.destroyVHContent(valueHelp);\n\t\t}\n\t\treturn valueListInfos;\n\t},\n\n\tALLFRAGMENTS: [] as {\n\t\tpath: string;\n\t\tfragmentName: string;\n\t\tfragment: unknown;\n\t}[],\n\tlogFragment: undefined as LogFragmentMethod | undefined,\n\n\t_logTemplatedFragments: function (propertyPath: string, fragmentName: string, fragmentDefinition: unknown): void {\n\t\tconst logInfo = {\n\t\t\tpath: propertyPath,\n\t\t\tfragmentName: fragmentName,\n\t\t\tfragment: fragmentDefinition\n\t\t};\n\t\tif (Log.getLevel() === Log.Level.DEBUG) {\n\t\t\t//In debug mode we log all generated fragments\n\t\t\tValueListHelper.ALLFRAGMENTS = ValueListHelper.ALLFRAGMENTS || [];\n\t\t\tValueListHelper.ALLFRAGMENTS.push(logInfo);\n\t\t}\n\t\tif (ValueListHelper.logFragment) {\n\t\t\t//One Tool Subscriber allowed\n\t\t\tsetTimeout(function () {\n\t\t\t\tValueListHelper.logFragment?.(logInfo);\n\t\t\t}, 0);\n\t\t}\n\t},\n\n\t_templateFragment: async function <T extends Table | MdcInnerTable | MdcFilterBar | ValueHelp>(\n\t\tfragmentName: string,\n\t\tvalueListInfo: ValueListInfo,\n\t\tsourceModel: JSONModel,\n\t\tpropertyPath: string,\n\t\tvalueHelp: ValueHelp\n\t): Promise<T> {\n\t\tconst containingView = CommonUtils.getTargetView(valueHelp);\n\t\tconst appComponent = CommonUtils.getAppComponent(CommonUtils.getTargetView(valueHelp));\n\n\t\tconst localValueListInfo = valueListInfo.valueListInfo,\n\t\t\tvalueListModel = new JSONModel(localValueListInfo),\n\t\t\tvalueListServiceMetaModel = localValueListInfo.$model.getMetaModel(),\n\t\t\tviewData = new JSONModel({\n\t\t\t\tconverterType: \"ListReport\",\n\t\t\t\tcolumns: valueListInfo.columnDefs || null\n\t\t\t});\n\n\t\tconst fragmentDefinition = await XMLPreprocessor.process(\n\t\t\tXMLTemplateProcessor.loadTemplate(fragmentName, \"fragment\"),\n\t\t\t{ name: fragmentName },\n\t\t\t{\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tvalueList: valueListModel.createBindingContext(\"/\"),\n\t\t\t\t\tcontextPath: valueListServiceMetaModel.createBindingContext(`/${localValueListInfo.CollectionPath}/`),\n\t\t\t\t\tsource: sourceModel.createBindingContext(\"/\")\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tvalueList: valueListModel,\n\t\t\t\t\tcontextPath: valueListServiceMetaModel,\n\t\t\t\t\tsource: sourceModel,\n\t\t\t\t\tmetaModel: valueListServiceMetaModel,\n\t\t\t\t\tviewData: viewData\n\t\t\t\t},\n\t\t\t\tappComponent\n\t\t\t}\n\t\t);\n\t\tValueListHelper._logTemplatedFragments(propertyPath, fragmentName, fragmentDefinition);\n\t\tconst templateComponent = containingView.getController()?.getOwnerComponent();\n\t\tif (templateComponent) {\n\t\t\treturn templateComponent.runAsOwner(async () => {\n\t\t\t\treturn (await Fragment.load({\n\t\t\t\t\tdefinition: fragmentDefinition,\n\t\t\t\t\tcontroller: containingView.getController()\n\t\t\t\t})) as T;\n\t\t\t});\n\t\t} else {\n\t\t\treturn (await Fragment.load({\n\t\t\t\tdefinition: fragmentDefinition,\n\t\t\t\tcontroller: containingView.getController()\n\t\t\t})) as T;\n\t\t}\n\t},\n\n\t_getContentId: function (valueHelpId: string, valueHelpQualifier: string, isTypeahead: boolean): string {\n\t\tconst contentType = isTypeahead ? \"Popover\" : \"Dialog\";\n\n\t\treturn `${valueHelpId}::${contentType}::qualifier::${valueHelpQualifier}`;\n\t},\n\n\t_addInOutParametersToPayload: function (payload: ValueHelpPayload, valueListInfo: ValueListInfo): void {\n\t\tconst valueHelpQualifier = valueListInfo.valueHelpQualifier;\n\n\t\tif (!payload.qualifiers) {\n\t\t\tpayload.qualifiers = {};\n\t\t}\n\n\t\tif (!payload.qualifiers[valueHelpQualifier]) {\n\t\t\tconst vhProperties = new Set<string>();\n\t\t\tvalueListInfo.columnDefs.forEach((column) => {\n\t\t\t\tif (!column.path.includes(\"*\")) {\n\t\t\t\t\t// In case of 1..n the condition path includes a * so we have to remove this\n\t\t\t\t\tvhProperties.add(column.path);\n\t\t\t\t}\n\t\t\t\tif (column.textPath) {\n\t\t\t\t\tvhProperties.add(column.textPath);\n\t\t\t\t}\n\t\t\t});\n\t\t\tpayload.qualifiers[valueHelpQualifier] = {\n\t\t\t\tvhKeys: valueListInfo.vhKeys,\n\t\t\t\tvhParameters: valueListInfo.vhParameters,\n\t\t\t\tvhProperties: Array.from(vhProperties)\n\t\t\t};\n\t\t}\n\t},\n\n\t_getValueHelpColumnDisplayFormat: function (\n\t\tpropertyAnnotations: AnnotationsForProperty,\n\t\tisValueHelpWithFixedValues: boolean\n\t): DisplayFormat {\n\t\tconst displayMode = CommonUtils.computeDisplayMode(propertyAnnotations, undefined),\n\t\t\ttextAnnotation = propertyAnnotations && propertyAnnotations[AnnotationText],\n\t\t\ttextArrangementAnnotation = textAnnotation && propertyAnnotations[AnnotationTextUITextArrangement];\n\n\t\tif (isValueHelpWithFixedValues) {\n\t\t\treturn textAnnotation && typeof textAnnotation !== \"string\" && textAnnotation.$Path ? displayMode : \"Value\";\n\t\t} else {\n\t\t\t// Only explicit defined TextArrangements in a Value Help with Dialog are considered\n\t\t\treturn textArrangementAnnotation ? displayMode : \"Value\";\n\t\t}\n\t},\n\n\t_getWidthInRem: function (control: Control, isUnitValueHelp: boolean): number {\n\t\tlet width = control.$().width(); // JQuery\n\t\tif (isUnitValueHelp && width) {\n\t\t\twidth = 0.3 * width;\n\t\t}\n\t\tconst floatWidth = width ? parseFloat(String(Rem.fromPx(width))) : 0;\n\n\t\treturn isNaN(floatWidth) ? 0 : floatWidth;\n\t},\n\n\t_getTableWidth: function (table: Table, minWidth: number, isMultiSelect: boolean): string {\n\t\tlet width: string;\n\t\tconst columns = table.getColumns(),\n\t\t\tvisibleColumns =\n\t\t\t\t(columns &&\n\t\t\t\t\tcolumns.filter(function (column) {\n\t\t\t\t\t\treturn column && column.getVisible && column.getVisible();\n\t\t\t\t\t})) ||\n\t\t\t\t[],\n\t\t\t// we add 1em for every column and 2.5em for a multiselect checkbox\n\t\t\tinitialSum = visibleColumns.length + (isMultiSelect ? 2.5 : 0),\n\t\t\tsumWidth = visibleColumns.reduce(function (sum, column) {\n\t\t\t\twidth = column.getWidth();\n\t\t\t\tif (width && width.endsWith(\"px\")) {\n\t\t\t\t\twidth = String(Rem.fromPx(width));\n\t\t\t\t}\n\t\t\t\tconst floatWidth = parseFloat(width);\n\n\t\t\t\treturn sum + (isNaN(floatWidth) ? 9 : floatWidth);\n\t\t\t}, initialSum);\n\t\treturn `${Math.max(sumWidth, minWidth)}em`;\n\t},\n\n\t/**\n\t * Constructs JSON Model with the properties for the value help dialog fragment where it is used as a source object.\n\t * @param valueListInfo Value list info\n\t * @param propertyPath The property path\n\t * @param content Content for which this fragment will be set\n\t * @param payload Value help payload\n\t * @returns JSONModel\n\t * @private\n\t */\n\t_getJSONModelForDialog: function (\n\t\tvalueListInfo: ValueListInfo,\n\t\tpropertyPath: string,\n\t\tcontent: MDCTable,\n\t\tpayload: ValueHelpPayload\n\t): JSONModel {\n\t\tconst isDropDownListe = false,\n\t\t\tisDialogTable = true,\n\t\t\tcolumnInfo = ValueListHelper.getColumnVisibilityInfo(valueListInfo.valueListInfo, propertyPath, isDropDownListe, isDialogTable);\n\n\t\treturn new JSONModel({\n\t\t\tid: content.getId(),\n\t\t\tgroupId: payload.requestGroupId,\n\t\t\tbSuggestion: false,\n\t\t\tcolumnInfo: columnInfo,\n\t\t\tvalueHelpWithFixedValues: isDropDownListe\n\t\t});\n\t},\n\n\t/**\n\t * Constructs JSON Model with the properties for the define condition value help fragment in the value help dialog where it is used as a source object.\n\t * @param valueListInfo Value list info\n\t * @param propertyPath The property path\n\t * @param content Content for which this fragment will be set\n\t * @param payload Value help payload\n\t * @param caseSensitive\n\t * @returns JSONModel\n\t * @private\n\t */\n\t_getJSONModelForCondition: function (\n\t\tvalueListInfo: ValueListInfo,\n\t\tpropertyPath: string,\n\t\tcontent: MDCTable,\n\t\tpayload: ValueHelpPayload,\n\t\tcaseSensitive: boolean\n\t): JSONModel {\n\t\tconst isDropDownListe = false,\n\t\t\tisDialogTable = false,\n\t\t\tcolumnInfo = ValueListHelper.getColumnVisibilityInfo(valueListInfo.valueListInfo, propertyPath, isDropDownListe, isDialogTable);\n\n\t\treturn new JSONModel({\n\t\t\tid: content.getId(),\n\t\t\tgroupId: payload.requestGroupId || undefined,\n\t\t\tbSuggestion: true,\n\t\t\tcolumnInfo: columnInfo,\n\t\t\tvalueHelpWithFixedValues: isDropDownListe,\n\t\t\tdescriptionPath: valueListInfo.descriptionPath,\n\t\t\tkeyPath: valueListInfo.keyPath,\n\t\t\tpropertyPath,\n\t\t\tcaseSensitive\n\t\t});\n\t},\n\n\t/**\n\t * Constructs JSON Model with the properties for the value help typeahead fragment where it is used as a source object.\n\t * @param valueListInfo Value list info\n\t * @param propertyPath The property path\n\t * @param content Content for which this fragment will be set\n\t * @param payload Value help payload\n\t * @param valueHelpWithFixedValues Specify is it dropdownlist or not\n\t * @returns JSONModel\n\t * @private\n\t */\n\t_getJSONModelForTypeahead: function (\n\t\tvalueListInfo: ValueListInfo,\n\t\tpropertyPath: string,\n\t\tcontent: MTable,\n\t\tpayload: ValueHelpPayload,\n\t\tvalueHelpWithFixedValues: boolean\n\t): JSONModel {\n\t\tconst isDialogTable = false,\n\t\t\tcontentId = content.getId(),\n\t\t\tcolumnInfo = ValueListHelper.getColumnVisibilityInfo(\n\t\t\t\tvalueListInfo.valueListInfo,\n\t\t\t\tpropertyPath,\n\t\t\t\tvalueHelpWithFixedValues,\n\t\t\t\tisDialogTable\n\t\t\t);\n\n\t\treturn new JSONModel({\n\t\t\tid: contentId,\n\t\t\tgroupId: payload.requestGroupId || undefined,\n\t\t\tbSuggestion: true,\n\t\t\tpropertyPath: propertyPath,\n\t\t\tcolumnInfo: columnInfo,\n\t\t\tvalueHelpWithFixedValues: valueHelpWithFixedValues\n\t\t});\n\t},\n\n\t_createValueHelpTypeahead: async function (\n\t\tpropertyPath: string,\n\t\tvalueHelp: ValueHelp,\n\t\tcontent: MTable,\n\t\tvalueListInfo: ValueListInfo,\n\t\tpayload: ValueHelpPayload,\n\t\tmetaModel: ODataMetaModel\n\t): Promise<void> {\n\t\tconst propertyAnnotations = metaModel.getObject(`${propertyPath}@`) as AnnotationsForProperty,\n\t\t\tvalueHelpWithFixedValues = propertyAnnotations[AnnotationValueListWithFixedValues] ?? false,\n\t\t\tsourceModel = this._getJSONModelForTypeahead(valueListInfo, propertyPath, content, payload, valueHelpWithFixedValues);\n\n\t\tcontent.setKeyPath(valueListInfo.keyPath);\n\t\tcontent.setDescriptionPath(valueListInfo.descriptionPath);\n\t\tpayload.isValueListWithFixedValues = valueHelpWithFixedValues;\n\t\tpayload.isPotentiallySensitive = payload.isPotentiallySensitive ?? propertyAnnotations[AnnotationsPersonalDataPotentiallySensitive];\n\t\tpayload.history = {\n\t\t\tenabled: this.checkHistoryEnabled(valueHelp, payload)\n\t\t};\n\n\t\tconst collectionAnnotations =\n\t\t\tvalueListInfo.valueListInfo.$model.getMetaModel().getObject(`/${valueListInfo.valueListInfo.CollectionPath}@`) || {};\n\n\t\tcontent.data(\"searchSupported\", ValueListHelper.entityIsSearchable(propertyAnnotations, collectionAnnotations) ? true : false);\n\n\t\tconst table = await ValueListHelper._templateFragment<Table>(\n\t\t\t\"sap.fe.macros.internal.valuehelp.ValueListTable\",\n\t\t\tvalueListInfo,\n\t\t\tsourceModel,\n\t\t\tpropertyPath,\n\t\t\tvalueHelp\n\t\t);\n\n\t\ttable.setModel(valueListInfo.valueListInfo.$model);\n\n\t\tLog.info(`Value List- suggest Table XML content created [${propertyPath}]`, table.getMetadata().getName(), \"MDC Templating\");\n\n\t\tcontent.setTable(table);\n\n\t\tconst field = valueHelp.getControl();\n\n\t\tif (\n\t\t\tfield !== undefined &&\n\t\t\t(field.isA<FilterField>(\"sap.ui.mdc.FilterField\") ||\n\t\t\t\tfield.isA<Field>(\"sap.ui.mdc.Field\") ||\n\t\t\t\tfield.isA<MultiValueField>(\"sap.ui.mdc.MultiValueField\"))\n\t\t) {\n\t\t\t//Can the filterfield be something else that we need the .isA() check?\n\t\t\tconst tableMode =\n\t\t\t\tvalueHelpWithFixedValues && (field as FieldBase).getMaxConditions() !== 1 ? \"MultiSelect\" : \"SingleSelectMaster\";\n\t\t\ttable.setMode(tableMode);\n\n\t\t\ttable.addEventDelegate({\n\t\t\t\tonAfterRendering: function () {\n\t\t\t\t\tResizeHandler.register(table, function () {\n\t\t\t\t\t\tValueListHelper._setTableWidth(table, field, tableMode, payload.isUnitValueHelp);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._setTableWidth(table, field, tableMode, payload.isUnitValueHelp);\n\t\t}\n\t},\n\n\t_setTableWidth(table: Table, field: Control, tableMode: string, isUnitValueHelp?: boolean): void {\n\t\tconst reduceWidthForUnitValueHelp = Boolean(isUnitValueHelp);\n\t\tconst tableWidth = ValueListHelper._getTableWidth(\n\t\t\ttable,\n\t\t\tValueListHelper._getWidthInRem(field, reduceWidthForUnitValueHelp),\n\t\t\ttableMode === \"MultiSelect\"\n\t\t);\n\n\t\ttable.setWidth(tableWidth);\n\t},\n\n\t/**\n\t * Check if the history is enabled for a certain field.\n\t * @param valueHelp The value help instance\n\t * @param payload Value help payload\n\t * @returns True if the history is enabled, false otherwise\n\t */\n\tcheckHistoryEnabled: function (valueHelp: ValueHelp, payload: ValueHelpPayload): boolean {\n\t\tconst appComponent = CommonUtils.getAppComponent(CommonUtils.getTargetView(valueHelp));\n\t\tconst historySettings = appComponent.getManifestEntry(\"sap.fe\")?.historySettings;\n\t\treturn historySettings?.fields?.[payload.propertyPath]?.historyEnabled ?? true;\n\t},\n\n\t_createValueHelpDialog: async function (\n\t\tmetaModel: ODataMetaModel,\n\t\tpropertyPath: string,\n\t\tvalueHelp: ValueHelp,\n\t\tcontent: MDCTable,\n\t\tvalueListInfo: ValueListInfo,\n\t\tpayload: ValueHelpPayload,\n\t\tconditionContent?: Conditions\n\t): Promise<void> {\n\t\tconst propertyAnnotations = (valueHelp.getModel() as ODataModel)\n\t\t\t\t.getMetaModel()!\n\t\t\t\t.getObject(`${propertyPath}@`) as AnnotationsForProperty,\n\t\t\tsourceModelDialog = this._getJSONModelForDialog(valueListInfo, propertyPath, content, payload);\n\n\t\tcontent.setKeyPath(valueListInfo.keyPath);\n\t\tcontent.setDescriptionPath(valueListInfo.descriptionPath);\n\n\t\tconst collectionAnnotations =\n\t\t\tvalueListInfo.valueListInfo.$model.getMetaModel().getObject(`/${valueListInfo.valueListInfo.CollectionPath}@`) || {};\n\n\t\tcontent.data(\"searchSupported\", ValueListHelper.entityIsSearchable(propertyAnnotations, collectionAnnotations) ? true : false);\n\t\tpayload.isPotentiallySensitive = payload.isPotentiallySensitive ?? propertyAnnotations[AnnotationsPersonalDataPotentiallySensitive];\n\n\t\tif (conditionContent) {\n\t\t\tconst firstTypeAheadContent = valueHelp.getTypeahead().getContent()[0] as MTable,\n\t\t\t\tcaseSensitive = firstTypeAheadContent.getCaseSensitive();\n\n\t\t\tconst sourceModelCondition = this._getJSONModelForCondition(valueListInfo, propertyPath, content, payload, caseSensitive);\n\n\t\t\tconst condition = await ValueListHelper._templateFragment<ValueHelp>(\n\t\t\t\t\"sap.fe.macros.internal.valuehelp.ValueListForCondition\",\n\t\t\t\tvalueListInfo,\n\t\t\t\tsourceModelCondition,\n\t\t\t\tpropertyPath,\n\t\t\t\tvalueHelp\n\t\t\t);\n\t\t\t/* As the condition is not added to an aggregation, but just associated, we need to explicitly set the model */\n\t\t\tcondition.setModel(metaModel);\n\n\t\t\t/* Add as dependent, otherwise it will not be properly destroyed during lifecycle handling */\n\t\t\tconditionContent.addDependent(condition);\n\t\t\tconditionContent.setValueHelp(condition.getId());\n\n\t\t\tconst conditionTable = condition\n\t\t\t\t.getTypeahead()\n\t\t\t\t.getContent()[0] // there is only one table\n\t\t\t\t.getTable();\n\n\t\t\tconst tableWidth = ValueListHelper._getTableWidth(conditionTable, 0, false);\n\t\t\tconditionTable.setWidth(tableWidth);\n\t\t}\n\n\t\tconst tablePromise = ValueListHelper._templateFragment<MdcInnerTable>(\n\t\t\t\"sap.fe.macros.internal.valuehelp.ValueListDialogTable\",\n\t\t\tvalueListInfo,\n\t\t\tsourceModelDialog,\n\t\t\tpropertyPath,\n\t\t\tvalueHelp\n\t\t);\n\n\t\tconst filterBarPromise = ValueListHelper._templateFragment<FilterBar>(\n\t\t\t\"sap.fe.macros.internal.valuehelp.ValueListFilterBar\",\n\t\t\tvalueListInfo,\n\t\t\tsourceModelDialog,\n\t\t\tpropertyPath,\n\t\t\tvalueHelp\n\t\t);\n\n\t\tconst [table, filterBar] = await Promise.all([tablePromise, filterBarPromise]);\n\n\t\ttable.setModel(valueListInfo.valueListInfo.$model);\n\t\tfilterBar.setModel(valueListInfo.valueListInfo.$model);\n\n\t\tcontent.setFilterBar(filterBar);\n\t\tcontent.setTable(table);\n\n\t\ttable.setFilter(filterBar.getId());\n\t\ttable.initialized();\n\n\t\ttable.setWidth(\"100%\");\n\n\t\tValueListHelper.setCopyProviderVisibility(table, valueHelp);\n\n\t\t//This is a temporary workarround - provided by MDC (see FIORITECHP1-24002)\n\t\tconst mdcTable = table as unknown as { _setShowP13nButton: Function };\n\t\tmdcTable._setShowP13nButton(false);\n\t},\n\n\t/**\n\t * Set the visible attribute of the CopyProvider based on the MaxCondition of the field.\n\t * In case of a single selection, the copy button is hidden. In another case, it is visible.\n\t * @param table The MDC table of the Value Help dialog\n\t * @param valueHelp The Value Help object\n\t */\n\tsetCopyProviderVisibility: function (table: MdcInnerTable, valueHelp: ValueHelp): void {\n\t\tif (valueHelp.getControl()?.isA<FieldBase>(\"sap.ui.mdc.field.FieldBase\")) {\n\t\t\ttable.getCopyProvider()?.setVisible(true);\n\t\t}\n\t},\n\n\t_getContentById: function <T extends MTable | MDCTable>(contentList: Content[], contentId: string): T | undefined {\n\t\treturn contentList.find(function (item) {\n\t\t\treturn item.getId() === contentId;\n\t\t}) as T | undefined;\n\t},\n\n\t_createPopoverContent: function (contentId: string, caseSensitive: boolean, useAsValueHelp: boolean): MTable {\n\t\treturn new MTable({\n\t\t\tid: contentId,\n\t\t\tgroup: \"group1\",\n\t\t\tcaseSensitive: caseSensitive,\n\t\t\tuseAsValueHelp: useAsValueHelp\n\t\t} as $MTableSettings);\n\t},\n\n\t_createDialogContent: function (contentId: string, caseSensitive: boolean, forceBind: boolean): MDCTable {\n\t\treturn new MDCTable({\n\t\t\tid: contentId,\n\t\t\tgroup: \"group1\",\n\t\t\tcaseSensitive: caseSensitive,\n\t\t\tforceBind: forceBind\n\t\t} as $MDCTableSettings);\n\t},\n\n\t_showConditionsContent: function (contentList: Content[], container: Container): Conditions | undefined {\n\t\tlet conditionsContent =\n\t\t\tcontentList.length && contentList[contentList.length - 1].getMetadata().getName() === \"sap.ui.mdc.valuehelp.content.Conditions\"\n\t\t\t\t? (contentList[contentList.length - 1] as Conditions)\n\t\t\t\t: undefined;\n\n\t\tif (conditionsContent) {\n\t\t\tconditionsContent.setVisible(true);\n\t\t} else {\n\t\t\tconditionsContent = new Conditions();\n\t\t\tcontainer.addContent(conditionsContent);\n\t\t}\n\n\t\treturn conditionsContent;\n\t},\n\n\t_alignOrCreateContent: function (\n\t\tvalueListInfo: ValueListInfo,\n\t\tcontentId: string,\n\t\tcaseSensitive: boolean,\n\t\tshowConditionPanel: boolean,\n\t\tcontainer: Container\n\t): MDCTable {\n\t\tconst contentList = container.getContent();\n\t\tlet content = ValueListHelper._getContentById<MDCTable>(contentList, contentId);\n\n\t\tif (!content) {\n\t\t\tconst forceBind = valueListInfo.valueListInfo.FetchValues === 2 ? false : true;\n\n\t\t\tcontent = ValueListHelper._createDialogContent(contentId, caseSensitive, forceBind);\n\n\t\t\tif (!showConditionPanel) {\n\t\t\t\tcontainer.addContent(content);\n\t\t\t} else {\n\t\t\t\tcontainer.insertContent(content, contentList.length - 1); // insert content before conditions content\n\t\t\t}\n\t\t}\n\n\t\treturn content;\n\t},\n\n\t_prepareValueHelpTypeAhead: function (\n\t\tvalueHelp: ValueHelp,\n\t\tcontainer: Container,\n\t\tvalueListInfos: ValueListInfo[],\n\t\tpayload: ValueHelpPayload,\n\t\tcaseSensitive: boolean,\n\t\tfirstTypeAheadContent: MTable\n\t): { valueListInfo: ValueListInfo; content: MTable } {\n\t\tconst contentList = container.getContent();\n\t\tlet qualifierForTypeahead = valueHelp.data(\"valuelistForValidation\") || \"\"; // can also be null\n\t\tif (qualifierForTypeahead === \" \") {\n\t\t\tqualifierForTypeahead = \"\";\n\t\t}\n\t\tconst valueListInfo = qualifierForTypeahead // fallback if qualifier for Typeahead not exists\n\t\t\t? valueListInfos.filter(function (subValueListInfo) {\n\t\t\t\t\treturn subValueListInfo.valueHelpQualifier === qualifierForTypeahead;\n\t\t\t  })[0] || valueListInfos[0]\n\t\t\t: valueListInfos[0];\n\n\t\tValueListHelper._addInOutParametersToPayload(payload, valueListInfo);\n\n\t\tconst contentId = ValueListHelper._getContentId(valueHelp.getId(), valueListInfo.valueHelpQualifier, true);\n\t\tlet content = ValueListHelper._getContentById<MTable>(contentList, contentId);\n\n\t\tif (!content) {\n\t\t\tconst useAsValueHelp = firstTypeAheadContent.getUseAsValueHelp();\n\t\t\tcontent = ValueListHelper._createPopoverContent(contentId, caseSensitive, useAsValueHelp);\n\n\t\t\tcontainer.insertContent(content, 0); // insert content as first content\n\t\t} else if (contentId !== contentList[0].getId()) {\n\t\t\t// content already available but not as first content?\n\t\t\tcontainer.removeContent(content);\n\t\t\tcontainer.insertContent(content, 0); // move content to first position\n\t\t}\n\n\t\treturn { valueListInfo, content };\n\t},\n\n\t_prepareValueHelpDialog: function (\n\t\tvalueHelp: ValueHelp,\n\t\tcontainer: Container,\n\t\tvalueListInfos: ValueListInfo[],\n\t\tpayload: ValueHelpPayload,\n\t\tselectedContentId: string,\n\t\tcaseSensitive: boolean\n\t): {\n\t\tselectedInfo: ValueListInfo;\n\t\tselectedContent: MDCTable;\n\t\tconditionContent?: Conditions;\n\t} {\n\t\tconst showConditionPanel = valueHelp.data(\"showConditionPanel\") && valueHelp.data(\"showConditionPanel\") !== \"false\";\n\t\tconst contentList = container.getContent();\n\n\t\t// set all contents to invisible\n\t\tfor (const contentListItem of contentList) {\n\t\t\tcontentListItem.setVisible(false);\n\t\t}\n\n\t\tconst conditionContent = showConditionPanel ? this._showConditionsContent(contentList, container) : undefined;\n\t\tconst field = valueHelp.getControl();\n\n\t\t// For a FilterField we check the operators if they are default (empty list=all) or include EQ\n\t\tconst hasOperatorEQ =\n\t\t\tfield && field.isA<FilterField>(\"sap.ui.mdc.FilterField\")\n\t\t\t\t? field.getOperators().length === 0 || field.getOperators().includes(\"EQ\")\n\t\t\t\t: true;\n\n\t\tlet selectedInfo: ValueListInfo | undefined, selectedContent: MDCTable | undefined;\n\n\t\t// Create or reuse contents for the current context\n\t\tfor (const valueListInfo of valueListInfos) {\n\t\t\tconst valueHelpQualifier = valueListInfo.valueHelpQualifier;\n\n\t\t\tValueListHelper._addInOutParametersToPayload(payload, valueListInfo);\n\n\t\t\tconst contentId = ValueListHelper._getContentId(valueHelp.getId(), valueHelpQualifier, false);\n\n\t\t\tconst content = this._alignOrCreateContent(valueListInfo, contentId, caseSensitive, showConditionPanel, container);\n\t\t\tcontent.setVisible(hasOperatorEQ); // Do not show a value help table for a filter field without operator 'EQ'\n\n\t\t\tif (valueListInfo.valueListInfo.Label && field) {\n\t\t\t\tconst title = CommonUtils.getTranslatedTextFromExpBindingString(valueListInfo.valueListInfo.Label, field);\n\t\t\t\tcontent.setTitle(title);\n\t\t\t}\n\n\t\t\tif (!selectedContent || (selectedContentId && selectedContentId === contentId)) {\n\t\t\t\tselectedContent = content;\n\t\t\t\tselectedInfo = valueListInfo;\n\t\t\t}\n\t\t}\n\n\t\tif (!selectedInfo || !selectedContent) {\n\t\t\tthrow new Error(\"selectedInfo or selectedContent undefined\");\n\t\t}\n\n\t\treturn { selectedInfo, selectedContent, conditionContent };\n\t},\n\n\t_addDescriptionInfosToPayload: function (payload: ValueHelpPayload, valueListInfo: ValueListInfo, metaModel: ODataMetaModel): void {\n\t\tif (payload.valueHelpDescriptionPath !== valueListInfo.descriptionPath || payload.externalIdPath) {\n\t\t\tconst convertedMetadata = convertTypes(metaModel);\n\t\t\tconst propertyDescriptionPath = (\n\t\t\t\tconvertedMetadata.resolvePath<Property>(payload.propertyPath).target?.annotations?.Common\n\t\t\t\t\t?.Text as unknown as PathAnnotationExpression<string>\n\t\t\t)?.path;\n\n\t\t\t/* Enrich payload with Text Property Infos */\n\t\t\tpayload.valueHelpDescriptionPath = valueListInfo.descriptionPath;\n\t\t\tpayload.valueHelpKeyPath = valueListInfo.keyPath;\n\t\t\tif (propertyDescriptionPath) {\n\t\t\t\tpayload.maxLength = payload.valueHelpDescriptionPath\n\t\t\t\t\t? convertedMetadata.resolvePath<Property>(\n\t\t\t\t\t\t\t`/${valueListInfo.valueListInfo.CollectionPath}/${payload.valueHelpDescriptionPath}`\n\t\t\t\t\t  )?.target?.maxLength\n\t\t\t\t\t: undefined;\n\t\t\t\tpayload.propertyDescriptionPath = propertyDescriptionPath;\n\t\t\t}\n\n\t\t\t/* EXTERNALID */\n\t\t\t// Add descriptionPath to the payload and valueListInfo\n\t\t\tconst externalIdPath = payload.externalIdPath;\n\t\t\tif (externalIdPath && !payload.valueHelpDescriptionPath) {\n\t\t\t\tconst propertyName = metaModel.getObject(`${payload.propertyPath}@sapui.name`);\n\t\t\t\tconst externalIdFullPath = payload.propertyPath.replace(propertyName, externalIdPath);\n\t\t\t\tconst descriptionPath = (\n\t\t\t\t\tconvertedMetadata.resolvePath<Property>(externalIdFullPath).target?.annotations?.Common\n\t\t\t\t\t\t?.Text as unknown as PathAnnotationExpression<string>\n\t\t\t\t)?.path;\n\t\t\t\tvalueListInfo.descriptionPath = descriptionPath;\n\t\t\t\tpayload.valueHelpDescriptionPath = descriptionPath;\n\t\t\t}\n\t\t}\n\t},\n\n\tshowValueList: async function (payload: ValueHelpPayload, container: Container, selectedContentId: string): Promise<void> {\n\t\tconst valueHelp = container.getParent() as ValueHelp,\n\t\t\tisTypeahead = container.isTypeahead(),\n\t\t\tpropertyPath = payload.propertyPath,\n\t\t\t/* In case of RAP the valueHelp model is different to the control model */\n\t\t\tcontrol = valueHelp.getControl(),\n\t\t\tmetaModel = control\n\t\t\t\t? (valueHelp.getControl()?.getModel() as ODataModel).getMetaModel()\n\t\t\t\t: (valueHelp.getModel() as ODataModel).getMetaModel(),\n\t\t\tvhUIModel =\n\t\t\t\tvalueHelp.getModel(\"_VHUI\") !== undefined\n\t\t\t\t\t? (valueHelp.getModel(\"_VHUI\") as JSONModel)\n\t\t\t\t\t: ValueListHelper.createVHUIModel(valueHelp, propertyPath, metaModel);\n\t\t/* EXTERNALID */\n\t\tpayload.externalIdPath = metaModel?.getObject(`${payload.propertyPath}@com.sap.vocabularies.Common.v1.ExternalID`)?.$Path;\n\n\t\tvhUIModel.setProperty(\"/isSuggestion\", isTypeahead);\n\t\tvhUIModel.setProperty(\"/minScreenWidth\", !isTypeahead ? \"418px\" : undefined);\n\n\t\ttry {\n\t\t\tconst valueListInfos = await ValueListHelper.getValueListInfo(valueHelp, propertyPath, payload, metaModel);\n\t\t\tconst firstTypeAheadContent = valueHelp.getTypeahead().getContent()[0] as MTable,\n\t\t\t\tcaseSensitive = firstTypeAheadContent.getCaseSensitive(); // take caseSensitive from first Typeahead content\n\n\t\t\tif (isTypeahead) {\n\t\t\t\tconst { valueListInfo, content } = ValueListHelper._prepareValueHelpTypeAhead(\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontainer,\n\t\t\t\t\tvalueListInfos,\n\t\t\t\t\tpayload,\n\t\t\t\t\tcaseSensitive,\n\t\t\t\t\tfirstTypeAheadContent\n\t\t\t\t);\n\n\t\t\t\tpayload.valueHelpQualifier = valueListInfo.valueHelpQualifier;\n\t\t\t\tvhUIModel.setProperty(\n\t\t\t\t\t\"/selectedProperties\",\n\t\t\t\t\tvalueListInfo.columnDefs.map((col) => col.path)\n\t\t\t\t);\n\t\t\t\tValueListHelper._addDescriptionInfosToPayload(payload, valueListInfo, metaModel);\n\n\t\t\t\tif (content.getTable() === undefined || content.getTable() === null) {\n\t\t\t\t\tawait ValueListHelper._createValueHelpTypeahead(propertyPath, valueHelp, content, valueListInfo, payload, metaModel);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst { selectedInfo, selectedContent, conditionContent } = ValueListHelper._prepareValueHelpDialog(\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontainer,\n\t\t\t\t\tvalueListInfos,\n\t\t\t\t\tpayload,\n\t\t\t\t\tselectedContentId,\n\t\t\t\t\tcaseSensitive\n\t\t\t\t);\n\n\t\t\t\tpayload.valueHelpQualifier = selectedInfo.valueHelpQualifier;\n\t\t\t\tValueListHelper._addDescriptionInfosToPayload(payload, selectedInfo, metaModel);\n\n\t\t\t\t/* For context depentent value helps the value list label is used for the dialog title */\n\t\t\t\tconst field = valueHelp.getControl();\n\t\t\t\tif (field) {\n\t\t\t\t\tconst title = CommonUtils.getTranslatedTextFromExpBindingString(\n\t\t\t\t\t\tValueListHelper._getDialogTitle(valueHelp, selectedInfo.valueListInfo?.Label),\n\t\t\t\t\t\tfield\n\t\t\t\t\t);\n\t\t\t\t\tcontainer.setTitle(title);\n\t\t\t\t}\n\n\t\t\t\tif (selectedContent.getTable() === undefined || selectedContent.getTable() === null) {\n\t\t\t\t\tawait ValueListHelper._createValueHelpDialog(\n\t\t\t\t\t\tmetaModel,\n\t\t\t\t\t\tpropertyPath,\n\t\t\t\t\t\tvalueHelp,\n\t\t\t\t\t\tselectedContent,\n\t\t\t\t\t\tselectedInfo,\n\t\t\t\t\t\tpayload,\n\t\t\t\t\t\tconditionContent\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthis._logError(propertyPath, err);\n\t\t\tValueListHelper.destroyVHContent(valueHelp);\n\t\t}\n\t},\n\n\tgetInAndOutParametersList(): CommonAnnotationTypes[] {\n\t\treturn [\n\t\t\tCommonAnnotationTypes.ValueListParameterOut,\n\t\t\tCommonAnnotationTypes.ValueListParameterIn,\n\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t];\n\t},\n\n\tgetTechnicalKeys(vhParameters: InOutParameter[], vhKeys: string[] | undefined): string[] {\n\t\tconst inOutParameters = ValueListHelper.getInAndOutParameters(vhParameters).map((parameter) => parameter.helpPath);\n\t\treturn (vhKeys ?? []).filter((vhKey) => !inOutParameters.includes(vhKey));\n\t}\n};\n\nexport default ValueListHelper;\n"],"mappings":"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","ignoreList":[],"file":"ValueListHelper-dbg.js"}