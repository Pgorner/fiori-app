{"version":3,"names":["FieldAPI","_dec","defineUI5Class","returnTypes","_dec2","property","type","_dec3","_dec4","_dec5","expectedAnnotations","expectedTypes","_dec6","_dec7","_dec8","event","_dec9","_dec10","_dec11","_dec12","association","_dec13","_dec14","_dec15","aggregation","_dec16","_dec17","_dec18","_dec19","bindable","isBindingInfo","required","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","xmlEventHandler","_dec27","_dec28","_class","_class2","_MacroAPI","props","others","_this","call","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_descriptor24","focusHandlersAttached","_inheritsLoose","_proto","prototype","getCollaborationBinding","field","binding","getBindingContext","getBinding","isA","oView","CommonUtils","getTargetView","extractChangeEventDetails","changeEvent","source","getSource","controller","getController","bindingContext","isTransient","valueResolved","getParameter","Promise","resolve","valid","fieldValidity","FieldRuntimeHelper","getFieldStateOnChange","state","customValueBinding","handleChange","newValue","valueModel","getModel","model","setProperty","path","updateBindings","feController","getExtensionController","undefined","then","oSource","mParameters","fireEvent","value","getValue","isValid","_sideEffects","handleFieldChange","fetchRecommendations","catch","Log","debug","valueResolvedAndPatchSent","setTimeout","editFlow","syncTask","prepareDeferredSideEffectsForField","bCollaborationEnabled","collaborativeDraft","isConnected","data","getBindingInfo","parts","filter","part","indexOf","map","getPath","retainAsyncMessages","updateCollaboration","hasPendingChanges","attachEventOnce","send","action","Activity","Change","content","releaseAsyncMessages","handleLiveChange","_event","onValidateFieldGroup","sourceField","view","handleFieldGroupChange","onBeforeRendering","isArialLabelledByCompliant","control","oContent","addAriaLabelledBy","aAriaLabelledBy","getAriaLabelledBy","sId","aAriaLabelledBys","onAfterRendering","collaborationEnabled","addEventDelegate","onfocusin","evt","relatedTarget","getControlInFieldWrapper","fieldWrapper","controls","getEditMode","getContentDisplay","getContentEdit","length","oControl","getItems","getSelected","getText","getTitle","Error","getMainPropertyRelativePath","mainPropertyRelativePath","setValue","setSelected","setText","getEnabled","getProperty","editMode","FieldEditMode","Disabled","link","setEnabled","enabled","editModeType","Editable","setEditMode","setLinkEnabled","addMessage","parameters","msgManager","getMessageManager","getResolvedPath","oMessage","Message","target","message","processor","description","persistent","addMessages","getId","removeMessage","id","arr","getMessageModel","getData","result","find","e","removeMessages","Messaging","onMetadataAvailable","createContent","metaContextPath","getMetaPathObject","metaPath","contextPath","owner","_getOwner","odataMetaModel","getMetaModel","getMetaContext","getOwnerContextPath","createBindingContext","inputFieldProperties","getPropertyBag","onLiveChange","hasListeners","preparedProperties","setUpField","preprocessorContext","eventHandlers","change","bind","liveChange","validateFieldGroup","FieldStructure","getFieldStructureTemplate","MessageToast","show","settings","properties","getMetadata","getAllProperties","aggregations","getAllAggregations","propertyName","currentPropertyValue","aggregationName","aggregationContent","getAggregation","Array","isArray","childrenArray","managedObject","push","MacroAPI","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer","Object","getOwnPropertyDescriptor"],"sourceRoot":".","sources":["FieldAPI.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type { CompiledBindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport type { EnhanceWithUI5, PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { aggregation, association, defineUI5Class, event, property, xmlEventHandler } from \"sap/fe/base/ClassSupport\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport type { XMLPreprocessorContext } from \"sap/fe/core/TemplateComponent\";\nimport type { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport { Activity } from \"sap/fe/core/controllerextensions/collaboration/CollaborationCommon\";\nimport type FormElementWrapper from \"sap/fe/core/controls/FormElementWrapper\";\nimport type Contact from \"sap/fe/macros/contact/Contact\";\nimport type BuildingBlockObjectProperty from \"sap/fe/macros/controls/BuildingBlockObjectProperty\";\nimport type FieldWrapper from \"sap/fe/macros/controls/FieldWrapper\";\nimport type TextLink from \"sap/fe/macros/controls/TextLink\";\nimport type DataPoint from \"sap/fe/macros/internal/DataPoint\";\nimport * as FieldStructure from \"sap/fe/macros/internal/field/FieldStructure\";\nimport type { InputFieldBlockProperties } from \"sap/fe/macros/internal/field/FieldStructureHelper\";\nimport { setUpField } from \"sap/fe/macros/internal/field/FieldStructureHelper\";\nimport type Button from \"sap/m/Button\";\nimport type CheckBox from \"sap/m/CheckBox\";\nimport type { CheckBox$SelectEvent } from \"sap/m/CheckBox\";\nimport type ExpandableText from \"sap/m/ExpandableText\";\nimport type HBox from \"sap/m/HBox\";\nimport type InputBase from \"sap/m/InputBase\";\nimport type { InputBase$ChangeEvent } from \"sap/m/InputBase\";\nimport type Label from \"sap/m/Label\";\nimport type Link from \"sap/m/Link\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport type ObjectIdentifier from \"sap/m/ObjectIdentifier\";\nimport type ObjectStatus from \"sap/m/ObjectStatus\";\nimport type Text from \"sap/m/Text\";\nimport type VBox from \"sap/m/VBox\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type { PropertyBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport type Control from \"sap/ui/core/Control\";\nimport type { Control$ValidateFieldGroupEvent } from \"sap/ui/core/Control\";\nimport Messaging from \"sap/ui/core/Messaging\";\nimport Message from \"sap/ui/core/message/Message\";\nimport type MessageType from \"sap/ui/core/message/MessageType\";\nimport type { default as Field, Field$ChangeEvent, default as MDCField } from \"sap/ui/mdc/Field\";\nimport FieldEditMode from \"sap/ui/mdc/enums/FieldEditMode\";\nimport type Context from \"sap/ui/model/Context\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type V4Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataContextBinding from \"sap/ui/model/odata/v4/ODataContextBinding\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type { EventHandler } from \"types/extension_types\";\nimport MacroAPI from \"../MacroAPI\";\nimport type Email from \"../contact/Email\";\nimport type FileWrapper from \"../controls/FileWrapper\";\nimport type FieldFormatOptions from \"./FieldFormatOptions\";\nimport FieldRuntimeHelper from \"./FieldRuntimeHelper\";\n\n/**\n * Building block for creating a field based on the metadata provided by OData V4.\n * <br>\n * Usually, a DataField or DataPoint annotation is expected, but the field can also be used to display a property from the entity type.\n * When creating a Field building block, you must provide an ID to ensure everything works correctly.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macros:Field id=\"MyField\" metaPath=\"MyProperty\" /&gt;\n * </pre>\n * <a href=\"/sapui5-sdk-internal/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/buildingBlockOverview\" target=\"_blank\" >Overview of Building Blocks</a>\n * @alias sap.fe.macros.Field\n * @public\n */\n@defineUI5Class(\"sap.fe.macros.field.FieldAPI\", {\n\treturnTypes: [\n\t\t\"sap.fe.core.controls.FormElementWrapper\" /*, not sure i want to add those yet \"sap.fe.macros.field.FieldAPI\", \"sap.m.HBox\", \"sap.fe.macros.controls.ConditionalWrapper\", \"sap.m.Button\"*/\n\t]\n})\nclass FieldAPI extends MacroAPI {\n\t/**\n\t * An expression that allows you to control the editable state of the field.\n\t *\n\t * If you do not set any expression, SAP Fiori elements hooks into the standard lifecycle to determine if the page is currently editable.\n\t * Please note that you cannot set a field to editable if it has been defined in the annotation as not editable.\n\t * @private\n\t * @deprecated\n\t */\n\t@property({ type: \"boolean\" })\n\tpublic readonly editable!: boolean;\n\n\t/**\n\t * An expression that allows you to control the read-only state of the field.\n\t *\n\t * If you do not set any expression, SAP Fiori elements hooks into the standard lifecycle to determine the current state.\n\t * @public\n\t */\n\t@property({ type: \"boolean\" })\n\tpublic readonly readOnly!: boolean;\n\n\t/**\n\t * The identifier of the Field control.\n\t */\n\t@property({ type: \"string\" })\n\tpublic readonly id!: string;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\texpectedAnnotations: [],\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\", \"Property\"]\n\t})\n\tpublic readonly metaPath!: string;\n\n\t/**\n\t * Wrap field\n\t */\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tpublic readonly wrap?: boolean;\n\n\t/**\n\t * Defines the path of the context used in the current page or block.\n\t * This setting is defined by the framework.\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\"]\n\t})\n\tpublic readonly contextPath!: string;\n\n\t/**\n\t * An event containing details is triggered when the value of the field is changed.\n\t * @public\n\t */\n\t@event()\n\tchange!: EventHandler;\n\n\t/**\n\t * An event containing details is triggered when the field get the focus.\n\t *\n\t */\n\t@event()\n\tfocusin!: EventHandler;\n\n\t/**\n\t * An event containing details is triggered when the value of the field is live changed.\n\t * @public\n\t */\n\t@event()\n\tliveChange!: EventHandler;\n\n\t@property({ type: \"boolean\" })\n\tpublic readonly required!: boolean;\n\n\t@association({\n\t\ttype: \"string\"\n\t})\n\tpublic readonly idPrefix?: string;\n\n\t/**\n\t * Prefix added to the generated ID of the value help used for the field\n\t */\n\t@association({\n\t\ttype: \"string\"\n\t})\n\tpublic readonly vhIdPrefix!: string;\n\n\t/**\n\t * Flag indicating whether action will navigate after execution\n\t */\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tpublic readonly navigateAfterAction: boolean = true;\n\n\t/**\n\t * A set of options that can be configured.\n\t * @public\n\t */\n\t@aggregation({ type: \"sap.fe.macros.field.FieldFormatOptions\" })\n\tpublic readonly formatOptions?: FieldFormatOptions;\n\n\t@association({ type: \"string\" })\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tpublic readonly _flexId?: string;\n\n\t/**\n\t * Edit Mode of the field.\n\t *\n\t * If the editMode is undefined then we compute it based on the metadata\n\t * Otherwise we use the value provided here.\n\t */\n\t@property({\n\t\ttype: \"sap.ui.mdc.enums.FieldEditMode\"\n\t})\n\tpublic readonly editMode?: FieldEditMode | CompiledBindingToolkitExpression;\n\n\t/**\n\t * Option to add semantic objects for a field.\n\t * This parameter overwrites the semantic objects defined through annotations.\n\t * Valid options are either a single semantic object, a stringified array of semantic objects,\n\t * a formatter or a single binding expression returning either a single semantic object or an array of semantic objects.\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\tpublic readonly semanticObject!: string;\n\n\t/**\n\t * This is used to optionally provide an external value that comes from a different model than the oData model.\n\t * It is designed to work with a field with value help, and without support for complex value help (currency / unit).\n\t * @experimental\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\tbindable: true,\n\t\tisBindingInfo: true,\n\t\trequired: false\n\t})\n\tpublic readonly value?: string;\n\n\t/**\n\t * This is used to optionally provide an external description that comes from a different model than the oData model.\n\t * This should be used in conjunction with the value property.\n\t * @experimental\n\t * @public\n\t */\n\t@property({\n\t\ttype: \"string\",\n\t\tbindable: true,\n\t\tisBindingInfo: true,\n\t\trequired: false\n\t})\n\tpublic readonly description?: string;\n\n\t@property({\n\t\ttype: \"sap.ui.core.TextAlign\"\n\t})\n\tpublic readonly textAlign?: string;\n\n\t@property({ type: \"boolean\" })\n\tpublic readonly showErrorObjectStatus?: boolean;\n\n\t@property({ type: \"string\" })\n\tpublic readonly collaborationEnabled?: boolean; // Need to be computed on demand\n\n\t@property({ type: \"string\" })\n\tpublic readonly mainPropertyRelativePath?: string; // Need to be computed on demand\n\n\t@property({ type: \"object\", isBindingInfo: true })\n\tcustomValueBinding?: boolean | string | number | PropertyBindingInfo;\n\n\tprivate focusHandlersAttached = false;\n\n\t/**\n\t * Gets the binding used for collaboration notifications.\n\t * @param field\n\t * @returns The binding\n\t */\n\tgetCollaborationBinding(field: Control): ODataListBinding | ODataContextBinding {\n\t\tlet binding = (field.getBindingContext() as V4Context).getBinding();\n\n\t\tif (!binding.isA(\"sap.ui.model.odata.v4.ODataListBinding\")) {\n\t\t\tconst oView = CommonUtils.getTargetView(field);\n\t\t\tbinding = oView.getBindingContext().getBinding();\n\t\t}\n\n\t\treturn binding;\n\t}\n\n\t/**\n\t * Extracts data from a change event for usage in the handleChange method.\n\t * @param changeEvent The change event object.\n\t * @returns An object containing the extracted details\n\t */\n\tprivate extractChangeEventDetails(changeEvent: Field$ChangeEvent & UI5Event<{ isValid: boolean }>): {\n\t\tsource: Field;\n\t\tcontroller: PageController;\n\t\tisTransient: boolean;\n\t\tvalueResolved: Promise<void>;\n\t\tvalid: boolean | undefined;\n\t\tfieldValidity: boolean;\n\t\tcustomValueBinding: boolean | string | number | PropertyBindingInfo | undefined;\n\t} {\n\t\tconst source = changeEvent.getSource();\n\t\tconst controller = this.getController();\n\t\t// If the field is bound to a JSON model, source.getBindingContext() returns undefined.\n\t\t// In such cases, we cannot call isTransient on it. Defaulting to false.\n\t\tconst bindingContext = source && source.getBindingContext();\n\t\tconst isTransient = bindingContext ? (bindingContext as unknown as { isTransient: Function }).isTransient() : false;\n\t\tconst valueResolved = changeEvent.getParameter(\"promise\") || Promise.resolve();\n\t\tconst valid = changeEvent.getParameter(\"valid\");\n\t\tconst fieldValidity = FieldRuntimeHelper.getFieldStateOnChange(changeEvent).state[\"validity\"];\n\t\tconst customValueBinding = this?.customValueBinding;\n\n\t\treturn { source, controller, isTransient, valueResolved, valid, fieldValidity, customValueBinding };\n\t}\n\n\t@xmlEventHandler()\n\thandleChange(changeEvent: Field$ChangeEvent & UI5Event<{ isValid: boolean }>): void {\n\t\tconst { source, controller, isTransient, valueResolved, valid, fieldValidity, customValueBinding } =\n\t\t\tthis.extractChangeEventDetails(changeEvent);\n\n\t\tif (customValueBinding) {\n\t\t\tlet newValue;\n\t\t\tconst valueModel = source?.getModel(customValueBinding.model) as JSONModel | undefined;\n\t\t\tif (source.isA(\"sap.m.CheckBox\")) {\n\t\t\t\tnewValue = (changeEvent as CheckBox$SelectEvent).getParameter(\"selected\");\n\t\t\t} else {\n\t\t\t\tnewValue = (changeEvent as InputBase$ChangeEvent).getParameter(\"value\");\n\t\t\t}\n\t\t\tvalueModel?.setProperty(customValueBinding.path, newValue);\n\t\t\tvalueModel?.updateBindings(true);\n\t\t}\n\n\t\t// Use the FE Controller instead of the extensionAPI to access internal FE controllers\n\t\tconst feController = controller ? FieldRuntimeHelper.getExtensionController(controller) : undefined;\n\n\t\t// Currently we have undefined and true... and our creation row implementation relies on this.\n\t\t// I would move this logic to this place as it's hard to understand for field consumer\n\t\tvalueResolved\n\t\t\t.then(() => {\n\t\t\t\t// The event is gone. For now we'll just recreate it again\n\t\t\t\t(changeEvent as { oSource?: Field }).oSource = source;\n\t\t\t\t(changeEvent as { mParameters?: { valid?: boolean } }).mParameters = {\n\t\t\t\t\tvalid: valid ?? true\n\t\t\t\t};\n\t\t\t\tthis?.fireEvent(\"change\", { value: this.getValue(), isValid: valid ?? true });\n\t\t\t\tif (!isTransient) {\n\t\t\t\t\t// trigger side effects without registering deferred side effects\n\t\t\t\t\t// deferred side effects are already registered by prepareDeferredSideEffectsForField before valueResolved is resolved.\n\t\t\t\t\tfeController?._sideEffects.handleFieldChange(changeEvent, !!fieldValidity, valueResolved, true);\n\t\t\t\t}\n\t\t\t\t// Recommendations\n\t\t\t\tif (controller) {\n\t\t\t\t\tFieldRuntimeHelper.fetchRecommendations(source, controller);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\t// The event is gone. For now we'll just recreate it again\n\t\t\t\t(changeEvent as { oSource?: Field }).oSource = source;\n\t\t\t\t(changeEvent as { mParameters?: { valid?: boolean } }).mParameters = {\n\t\t\t\t\tvalid: false\n\t\t\t\t};\n\t\t\t\tLog.debug(\"Prerequisites on Field for the SideEffects and Recommendations have been rejected\");\n\t\t\t\t// as the UI might need to react on. We could provide a parameter to inform if validation\n\t\t\t\t// was successful?\n\t\t\t\tthis.fireEvent(\"change\", { value: this.getValue(), isValid: valid ?? false });\n\t\t\t});\n\n\t\t// For the EditFlow synchronization, we need to wait for the corresponding PATCH request to be sent, otherwise there could be e.g. action invoked in parallel with the PATCH request.\n\t\t// This is done with a 0-timeout, to allow for the 'patchSent' event to be sent by the binding (then the internal edit flow synchronization kicks in with EditFlow.handlePatchSent).\n\t\tconst valueResolvedAndPatchSent = valueResolved\n\t\t\t.then(async () => {\n\t\t\t\treturn new Promise<void>((resolve) => {\n\t\t\t\t\tsetTimeout(resolve, 0);\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(() => {});\n\t\tfeController?.editFlow.syncTask(valueResolvedAndPatchSent);\n\n\t\t// if the context is transient, it means the request would fail anyway as the record does not exist in reality\n\t\t// Should the request be made in future if the context is transient?\n\t\tif (isTransient) {\n\t\t\treturn;\n\t\t}\n\n\t\tfeController?._sideEffects.prepareDeferredSideEffectsForField(changeEvent, !!fieldValidity, valueResolved);\n\t\t// Collaboration Draft Activity Sync\n\t\tconst bCollaborationEnabled = controller?.collaborativeDraft.isConnected();\n\n\t\tif (bCollaborationEnabled && fieldValidity) {\n\t\t\tconst binding = this.getCollaborationBinding(source);\n\n\t\t\tconst data = [\n\t\t\t\t...((source.getBindingInfo(\"value\") || source.getBindingInfo(\"selected\"))?.parts || []),\n\t\t\t\t...(source.getBindingInfo(\"additionalValue\")?.parts || [])\n\t\t\t]\n\t\t\t\t.filter((part) => {\n\t\t\t\t\treturn part?.path !== undefined && part.path.indexOf(\"@@\") < 0; // Remove binding parts with @@ that make no sense for collaboration messages\n\t\t\t\t})\n\t\t\t\t.map(function (part: { path: string }) {\n\t\t\t\t\treturn `${source.getBindingContext()?.getPath()}/${part.path}`;\n\t\t\t\t});\n\n\t\t\t// From this point, we will always send a collaboration message (UNLOCK or CHANGE), so we retain\n\t\t\t// a potential UNLOCK that would be sent in handleFocusOut, to make sure it's sent after the CHANGE message\n\t\t\tcontroller?.collaborativeDraft.retainAsyncMessages(data);\n\n\t\t\tconst updateCollaboration = (): void => {\n\t\t\t\tif (binding.hasPendingChanges()) {\n\t\t\t\t\t// The value has been changed by the user --> wait until it's sent to the server before sending a notification to other users\n\t\t\t\t\tbinding.attachEventOnce(\"patchCompleted\", function () {\n\t\t\t\t\t\tcontroller?.collaborativeDraft.send({ action: Activity.Change, content: data });\n\t\t\t\t\t\tcontroller?.collaborativeDraft.releaseAsyncMessages(data);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcontroller?.collaborativeDraft.releaseAsyncMessages(data);\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (source.isA(\"sap.ui.mdc.Field\") || (source as Control).isA(\"sap.ui.mdc.MultiValueField\")) {\n\t\t\t\tvalueResolved\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tupdateCollaboration();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tupdateCollaboration();\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tupdateCollaboration();\n\t\t\t}\n\t\t}\n\t}\n\n\t@xmlEventHandler()\n\thandleLiveChange(_event: UI5Event): void {\n\t\tthis.fireEvent(\"liveChange\");\n\t}\n\n\t@xmlEventHandler()\n\tonValidateFieldGroup(_event: Control$ValidateFieldGroupEvent): void {\n\t\tconst sourceField = _event.getSource(),\n\t\t\tview = CommonUtils.getTargetView(sourceField),\n\t\t\tcontroller = view.getController();\n\n\t\tconst feController = FieldRuntimeHelper.getExtensionController(controller);\n\t\tfeController._sideEffects.handleFieldGroupChange(_event);\n\t}\n\n\tconstructor(props?: PropertiesOf<FieldAPI, \"change\" | \"liveChange\" | \"focusin\">, others?: PropertiesOf<FieldAPI>) {\n\t\tsuper(props, others);\n\t}\n\n\tonBeforeRendering(): void {\n\t\tconst isArialLabelledByCompliant = function (\n\t\t\tcontrol: Control\n\t\t): control is Control & { addAriaLabelledBy: Function; getAriaLabelledBy: Function } {\n\t\t\treturn control.isA<Button | FieldWrapper | MDCField | FileWrapper>([\n\t\t\t\t\"sap.m.Button\",\n\t\t\t\t\"sap.fe.macros.controls.FieldWrapper\",\n\t\t\t\t\"sap.ui.mdc.Field\",\n\t\t\t\t\"sap.fe.macros.controls.FileWrapper\"\n\t\t\t]);\n\t\t};\n\t\tconst oContent = this.content;\n\t\tif (oContent && isArialLabelledByCompliant(oContent) && oContent.addAriaLabelledBy) {\n\t\t\tconst aAriaLabelledBy = (this as unknown as EnhanceWithUI5<FieldAPI>).getAriaLabelledBy();\n\n\t\t\tfor (const sId of aAriaLabelledBy) {\n\t\t\t\tconst aAriaLabelledBys = oContent.getAriaLabelledBy() || [];\n\t\t\t\tif (aAriaLabelledBys.indexOf(sId) === -1) {\n\t\t\t\t\toContent.addAriaLabelledBy(sId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonAfterRendering(): void {\n\t\tif (this.collaborationEnabled && !this.focusHandlersAttached) {\n\t\t\t// The event delegate doesn't work on the FieldAPI, we need to put it on its content (FieldWrapper)\n\t\t\tthis.content?.addEventDelegate(\n\t\t\t\t{\n\t\t\t\t\tonfocusin: (evt: FocusEvent) => {\n\t\t\t\t\t\t(this as unknown as FieldAPI & { fireFocusin: Function }).fireEvent(\"focusin\", {\n\t\t\t\t\t\t\trelatedTarget: evt.relatedTarget\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis\n\t\t\t);\n\n\t\t\tthis.focusHandlersAttached = true; // To avoid attaching events twice\n\t\t}\n\t}\n\n\t/**\n\t * Returns the first visible control in the FieldWrapper.\n\t * @param control FieldWrapper\n\t * @returns The first visible control\n\t */\n\tstatic getControlInFieldWrapper(control: Control): Control | undefined {\n\t\tif (control.isA(\"sap.fe.macros.controls.FieldWrapper\") && !control.isA(\"sap.fe.macros.controls.FileWrapper\")) {\n\t\t\tconst fieldWrapper = control as EnhanceWithUI5<FieldWrapper>;\n\t\t\tconst controls = fieldWrapper.getEditMode() === \"Display\" ? [fieldWrapper.getContentDisplay()] : fieldWrapper.getContentEdit();\n\t\t\tif (controls.length >= 1) {\n\t\t\t\treturn controls[0];\n\t\t\t}\n\t\t} else {\n\t\t\treturn control;\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves the current value of the field.\n\t * @public\n\t * @returns The current value of the field\n\t */\n\tgetValue(): boolean | string | undefined {\n\t\tlet oControl = FieldAPI.getControlInFieldWrapper(this.content);\n\t\tif (this.collaborationEnabled && oControl?.isA(\"sap.m.HBox\")) {\n\t\t\toControl = (oControl as HBox).getItems()[0];\n\t\t}\n\t\tif (oControl?.isA(\"sap.m.CheckBox\")) {\n\t\t\treturn (oControl as CheckBox).getSelected();\n\t\t} else if (oControl?.isA(\"sap.m.InputBase\")) {\n\t\t\treturn (oControl as InputBase).getValue();\n\t\t} else if (oControl?.isA(\"sap.m.Link\")) {\n\t\t\treturn (oControl as Link).getText();\n\t\t} else if (oControl?.isA(\"sap.m.Label\")) {\n\t\t\treturn (oControl as Label).getText();\n\t\t} else if (oControl?.isA(\"sap.m.Text\")) {\n\t\t\treturn (oControl as Text).getText(false);\n\t\t} else if (oControl?.isA(\"sap.m.ObjectStatus\")) {\n\t\t\treturn (oControl as ObjectStatus).getText();\n\t\t} else if (oControl?.isA(\"sap.m.ObjectIdentifier\")) {\n\t\t\treturn (oControl as ObjectIdentifier).getTitle();\n\t\t} else if (oControl?.isA<Field>(\"sap.ui.mdc.Field\")) {\n\t\t\treturn oControl.getValue(); // FieldWrapper\n\t\t} else if (\n\t\t\toControl?.isA<DataPoint>(\"sap.fe.macros.internal.DataPoint\") ||\n\t\t\toControl?.isA<Email>(\"sap.fe.macros.contact.Email\") ||\n\t\t\toControl?.isA<Contact>(\"sap.fe.macros.contact.Contact\")\n\t\t) {\n\t\t\t// this is a BBv4 underneath, call the method on the BBV4\n\t\t\treturn oControl.getValue();\n\t\t} else {\n\t\t\tthrow new Error(\"getting value not yet implemented for this field type\");\n\t\t}\n\t}\n\n\tgetMainPropertyRelativePath(): string | undefined {\n\t\treturn this.mainPropertyRelativePath;\n\t}\n\n\t/**\n\t * Sets the current value of the field.\n\t * @param value\n\t * @public\n\t * @returns The current field reference\n\t */\n\tsetValue(value: boolean | string): Control {\n\t\tif (!this.content) {\n\t\t\treturn this;\n\t\t}\n\t\tlet control = FieldAPI.getControlInFieldWrapper(this.content);\n\t\tif (this.collaborationEnabled && control?.isA(\"sap.m.HBox\")) {\n\t\t\t// for chaining reasons, let´s keep it like that\n\t\t\tcontrol = (control as HBox).getItems()[0];\n\t\t}\n\t\tif (control?.isA<CheckBox>(\"sap.m.CheckBox\")) {\n\t\t\tcontrol.setSelected(value as boolean);\n\t\t} else if (control?.isA<InputBase>(\"sap.m.InputBase\")) {\n\t\t\tcontrol.setValue(value as string);\n\t\t} else if (control?.isA<Text>(\"sap.m.Text\")) {\n\t\t\tcontrol.setText(value as string);\n\t\t} else if (control?.isA<MDCField>(\"sap.ui.mdc.Field\")) {\n\t\t\tcontrol.setValue(value);\n\t\t} else {\n\t\t\tthrow \"setting value not yet implemented for this field type\";\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gets the current enablement state of the field.\n\t * @public\n\t * @returns Boolean value with the enablement state\n\t */\n\tgetEnabled(): boolean {\n\t\tlet control = FieldAPI.getControlInFieldWrapper(this.content);\n\t\tif (control !== null && control !== undefined && !control?.isA(\"sap.m.Text\")) {\n\t\t\t//check needed for file wrapper which does not have a content\n\t\t\tif (this.collaborationEnabled && control.isA<HBox>(\"sap.m.HBox\")) {\n\t\t\t\t// for chaining reasons, let´s keep it like that\n\t\t\t\tcontrol = control.getItems()[0];\n\t\t\t}\n\t\t\tif (control.isA<VBox>(\"sap.m.VBox\")) {\n\t\t\t\t// for chaining reasons, let´s keep it like that\n\t\t\t\tcontrol = control.getItems()[0];\n\t\t\t}\n\n\t\t\t// we need to call the getProperty in the following examples\n\t\t\t// otherwise we end up in a max call stack size\n\t\t\tif (control.isA<CheckBox>(\"sap.m.CheckBox\")) {\n\t\t\t\treturn control.getProperty(\"enabled\");\n\t\t\t} else if (control.isA<InputBase>(\"sap.m.InputBase\")) {\n\t\t\t\treturn control.getProperty(\"enabled\");\n\t\t\t} else if (control.isA<Link>(\"sap.m.Link\")) {\n\t\t\t\treturn control.getProperty(\"enabled\");\n\t\t\t} else if (control.isA<Button>(\"sap.m.Button\")) {\n\t\t\t\treturn control.getProperty(\"enabled\");\n\t\t\t} else if (control.isA<ObjectStatus>(\"sap.m.ObjectStatus\")) {\n\t\t\t\treturn control.getProperty(\"active\");\n\t\t\t} else if (control.isA<ObjectIdentifier>(\"sap.m.ObjectIdentifier\")) {\n\t\t\t\treturn control.getProperty(\"titleActive\");\n\t\t\t} else if (control.isA<FormElementWrapper>(\"sap.fe.core.controls.FormElementWrapper\")) {\n\t\t\t\t// It is for a Draft Indicator\n\t\t\t\treturn true;\n\t\t\t} else if (control.isA<DataPoint>(\"sap.fe.macros.internal.DataPoint\")) {\n\t\t\t\treturn control.getEnabled();\n\t\t\t} else if (control.isA<Email>(\"sap.fe.macros.contact.Email\")) {\n\t\t\t\treturn control.getProperty(\"linkEnabled\");\n\t\t\t} else if (control.isA<Contact>(\"sap.fe.macros.contact.Contact\")) {\n\t\t\t\treturn control.getEnabled();\n\t\t\t} else if (control.isA<ExpandableText>(\"sap.m.ExpandableText\")) {\n\t\t\t\t// otherwise show more would be inactive\n\t\t\t\treturn true;\n\t\t\t} else if (control.isA<MDCField>(\"sap.ui.mdc.Field\")) {\n\t\t\t\tconst editMode = control.getEditMode();\n\t\t\t\t// The mdc field does not have a direct property \"enabled\", therefore we map\n\t\t\t\t// the internal disabled setting of the edit mode in this graceful pattern\n\t\t\t\treturn editMode !== FieldEditMode.Disabled;\n\t\t\t} else if (control.isA<FileWrapper>(\"sap.fe.macros.controls.FileWrapper\")) {\n\t\t\t\t// The file wrapper could contain a link or an avatar with a delete button,\n\t\t\t\t// we must ensure the enablement in both cases\n\t\t\t\treturn control.link ? control.link.getProperty(\"enabled\") : true;\n\t\t\t} else if (\n\t\t\t\tcontrol.isA(\"sap.fe.macros.controls.ConditionalWrapper\") ||\n\t\t\t\t(control as Control).isA<TextLink>(\"sap.fe.macros.controls.TextLink\")\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Sets the current enablement state of the field.\n\t * @param enabled\n\t * @public\n\t * @returns The current field reference\n\t */\n\tsetEnabled(enabled: boolean): Control {\n\t\tlet control = FieldAPI.getControlInFieldWrapper(this.content);\n\t\tif (this.collaborationEnabled && control?.isA<HBox>(\"sap.m.HBox\")) {\n\t\t\t// for chaining reasons, let´s keep it like that\n\t\t\tcontrol = control.getItems()[0];\n\t\t}\n\n\t\t// we need to call the setProperty in the following examples\n\t\t// otherwise we end up in a max call stack size\n\t\tif (control?.isA<CheckBox>(\"sap.m.CheckBox\")) {\n\t\t\treturn control.setProperty(\"enabled\", enabled);\n\t\t} else if (control?.isA<InputBase>(\"sap.m.InputBase\")) {\n\t\t\treturn control.setProperty(\"enabled\", enabled);\n\t\t} else if (control?.isA<Link>(\"sap.m.Link\")) {\n\t\t\treturn control.setProperty(\"enabled\", enabled);\n\t\t} else if (control?.isA<Button>(\"sap.m.Button\")) {\n\t\t\treturn control.setProperty(\"enabled\", enabled);\n\t\t} else if (control?.isA<ObjectStatus>(\"sap.m.ObjectStatus\")) {\n\t\t\treturn control.setProperty(\"active\", enabled);\n\t\t} else if (control?.isA<ObjectIdentifier>(\"sap.m.ObjectIdentifier\")) {\n\t\t\treturn control.setProperty(\"titleActive\", enabled);\n\t\t} else if (control?.isA<MDCField>(\"sap.ui.mdc.Field\")) {\n\t\t\t// The mdc field does not have a direct property \"enabled\", therefore we map\n\t\t\t// the enabled property to the respective disabled setting of the edit mode\n\t\t\t// with this graceful pattern\n\t\t\tlet editModeType;\n\t\t\tif (enabled) {\n\t\t\t\teditModeType = FieldEditMode.Editable;\n\t\t\t} else {\n\t\t\t\teditModeType = FieldEditMode.Disabled;\n\t\t\t}\n\t\t\tcontrol.setEditMode(editModeType);\n\t\t} else if (control?.isA<Email>(\"sap.fe.macros.contact.Email\")) {\n\t\t\tcontrol.setLinkEnabled(enabled);\n\t\t\treturn control;\n\t\t} else if (control?.isA<DataPoint>(\"sap.fe.macros.internal.DataPoint\")) {\n\t\t\tcontrol.setEnabled(enabled);\n\t\t} else {\n\t\t\tthrow \"setEnabled isn't implemented for this field type\";\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Adds a message to the field.\n\t * @param [parameters] The parameters to create message\n\t * @param parameters.type Type of the message\n\t * @param parameters.message Message text\n\t * @param parameters.description Message description\n\t * @param parameters.persistent True if the message is persistent\n\t * @returns The id of the message\n\t * @public\n\t */\n\taddMessage(parameters: { type?: MessageType; message?: string; description?: string; persistent?: boolean }): string {\n\t\tconst msgManager = this.getMessageManager();\n\t\tconst oControl = FieldAPI.getControlInFieldWrapper(this.content);\n\n\t\tlet path; //target for oMessage\n\t\tif (oControl?.isA(\"sap.m.CheckBox\")) {\n\t\t\tpath = (oControl as CheckBox).getBinding(\"selected\")?.getResolvedPath();\n\t\t} else if (oControl?.isA(\"sap.m.InputBase\")) {\n\t\t\tpath = (oControl as InputBase).getBinding(\"value\")?.getResolvedPath();\n\t\t} else if (oControl?.isA<Field>(\"sap.ui.mdc.Field\")) {\n\t\t\tpath = oControl.getBinding(\"value\")!.getResolvedPath();\n\t\t}\n\n\t\tconst oMessage = new Message({\n\t\t\ttarget: path,\n\t\t\ttype: parameters.type,\n\t\t\tmessage: parameters.message,\n\t\t\tprocessor: oControl?.getModel(),\n\t\t\tdescription: parameters.description,\n\t\t\tpersistent: parameters.persistent\n\t\t});\n\n\t\tmsgManager.addMessages(oMessage);\n\t\treturn oMessage.getId();\n\t}\n\n\t/**\n\t * Removes a message from the field.\n\t * @param id The id of the message\n\t * @public\n\t */\n\tremoveMessage(id: string): void {\n\t\tconst msgManager = this.getMessageManager();\n\t\tconst arr = msgManager.getMessageModel().getData();\n\t\tconst result = arr.find((e: Message) => e?.getId?.() === id);\n\t\tif (result) {\n\t\t\tmsgManager.removeMessages(result);\n\t\t}\n\t}\n\n\tgetMessageManager(): Messaging {\n\t\treturn Messaging;\n\t}\n\n\t/**\n\t * Handler for the onMetadataAvailable event.\n\t */\n\tonMetadataAvailable(): void {\n\t\tif (!this.content) {\n\t\t\tthis.content = this.createContent();\n\t\t}\n\t}\n\n\tcreateContent(): Control {\n\t\tconst metaContextPath = this.getMetaPathObject(this.metaPath, this.contextPath);\n\t\tconst owner = this._getOwner();\n\t\tconst odataMetaModel = owner?.getMetaModel();\n\t\tconst contextPath = odataMetaModel?.getMetaContext(this.contextPath ?? (this.getOwnerContextPath() as string));\n\t\tlet metaPath;\n\t\tif (metaContextPath) {\n\t\t\tmetaPath = odataMetaModel?.createBindingContext(metaContextPath.getPath()) as Context | undefined;\n\t\t}\n\n\t\ttry {\n\t\t\tconst inputFieldProperties = this.getPropertyBag() as InputFieldBlockProperties;\n\t\t\tinputFieldProperties.onLiveChange = this.hasListeners(\"liveChange\") ? \"Something\" : undefined;\n\t\t\tconst preparedProperties = setUpField(\n\t\t\t\tinputFieldProperties,\n\t\t\t\t{} as TemplateProcessorSettings,\n\t\t\t\towner?.preprocessorContext as XMLPreprocessorContext,\n\t\t\t\tmetaPath,\n\t\t\t\tcontextPath\n\t\t\t);\n\t\t\tpreparedProperties.eventHandlers.change = this.handleChange.bind(this) as unknown as EventHandler;\n\t\t\tpreparedProperties.eventHandlers.liveChange = this.handleLiveChange.bind(this);\n\t\t\tpreparedProperties.eventHandlers.validateFieldGroup = this.onValidateFieldGroup.bind(this);\n\t\t\tthis.content = FieldStructure.getFieldStructureTemplate(preparedProperties) as unknown as Control;\n\t\t} catch (e) {\n\t\t\tif (e instanceof Error) {\n\t\t\t\tMessageToast.show(e.message + \" in createContent of FieldAPI\");\n\t\t\t} else {\n\t\t\t\tMessageToast.show(\"An unknown error occurred\");\n\t\t\t}\n\t\t}\n\t\treturn this.content;\n\t}\n\n\tgetPropertyBag(): PropertiesOf<this> {\n\t\tconst settings: PropertiesOf<this> = {} as PropertiesOf<this>;\n\t\tconst properties = this.getMetadata().getAllProperties();\n\t\tconst aggregations = this.getMetadata().getAllAggregations();\n\t\tfor (const propertyName in properties) {\n\t\t\tconst currentPropertyValue = this.getProperty(propertyName);\n\t\t\tsettings[propertyName as keyof PropertiesOf<this>] = currentPropertyValue;\n\t\t}\n\t\tfor (const aggregationName in aggregations) {\n\t\t\tconst aggregationContent = this.getAggregation(aggregationName);\n\t\t\tif (Array.isArray(aggregationContent)) {\n\t\t\t\tconst childrenArray = [];\n\t\t\t\tfor (const managedObject of aggregationContent) {\n\t\t\t\t\tif (managedObject.isA<BuildingBlockObjectProperty>(\"sap.fe.macros.controls.BuildingBlockObjectProperty\")) {\n\t\t\t\t\t\tchildrenArray.push(managedObject.getPropertyBag());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsettings[aggregationName as keyof PropertiesOf<this>] = childrenArray;\n\t\t\t} else if (aggregationContent) {\n\t\t\t\tif (aggregationContent.isA<BuildingBlockObjectProperty>(\"sap.fe.macros.controls.BuildingBlockObjectProperty\")) {\n\t\t\t\t\tsettings[aggregationName as keyof PropertiesOf<this>] = aggregationContent.getPropertyBag();\n\t\t\t\t} else {\n\t\t\t\t\tsettings[aggregationName as keyof PropertiesOf<this>] = aggregationContent.getId();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn settings;\n\t}\n}\n\nexport default FieldAPI;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;EAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAdA,IAoBMA,QAAQ,IAAAC,IAAA,GALbC,cAAc,CAAC,8BAA8B,EAAE;IAC/CC,WAAW,EAAE,CACZ,yCAAyC,CAAC;EAE5C,CAAC,CAAC,EAAAC,KAAA,GAUAC,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,EAAAC,KAAA,GAS7BF,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,EAAAE,KAAA,GAM7BH,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,EAAAG,KAAA,GAO5BJ,QAAQ,CAAC;IACTC,IAAI,EAAE,QAAQ;IACdI,mBAAmB,EAAE,EAAE;IACvBC,aAAa,EAAE,CAAC,WAAW,EAAE,YAAY,EAAE,WAAW,EAAE,oBAAoB,EAAE,UAAU;EACzF,CAAC,CAAC,EAAAC,KAAA,GAMDP,QAAQ,CAAC;IACTC,IAAI,EAAE;EACP,CAAC,CAAC,EAAAO,KAAA,GAQDR,QAAQ,CAAC;IACTC,IAAI,EAAE,QAAQ;IACdK,aAAa,EAAE,CAAC,WAAW,EAAE,YAAY,EAAE,WAAW,EAAE,oBAAoB;EAC7E,CAAC,CAAC,EAAAG,KAAA,GAODC,KAAK,CAAC,CAAC,EAAAC,KAAA,GAOPD,KAAK,CAAC,CAAC,EAAAE,MAAA,GAOPF,KAAK,CAAC,CAAC,EAAAG,MAAA,GAGPb,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,EAAAa,MAAA,GAG7BC,WAAW,CAAC;IACZd,IAAI,EAAE;EACP,CAAC,CAAC,EAAAe,MAAA,GAMDD,WAAW,CAAC;IACZd,IAAI,EAAE;EACP,CAAC,CAAC,EAAAgB,MAAA,GAMDjB,QAAQ,CAAC;IACTC,IAAI,EAAE;EACP,CAAC,CAAC,EAAAiB,MAAA,GAODC,WAAW,CAAC;IAAElB,IAAI,EAAE;EAAyC,CAAC,CAAC,EAAAmB,MAAA,GAG/DL,WAAW,CAAC;IAAEd,IAAI,EAAE;EAAS,CAAC,CAAC,EAAAoB,MAAA,GAU/BrB,QAAQ,CAAC;IACTC,IAAI,EAAE;EACP,CAAC,CAAC,EAAAqB,MAAA,GAUDtB,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,EAAAsB,MAAA,GAS5BvB,QAAQ,CAAC;IACTC,IAAI,EAAE,QAAQ;IACduB,QAAQ,EAAE,IAAI;IACdC,aAAa,EAAE,IAAI;IACnBC,QAAQ,EAAE;EACX,CAAC,CAAC,EAAAC,MAAA,GASD3B,QAAQ,CAAC;IACTC,IAAI,EAAE,QAAQ;IACduB,QAAQ,EAAE,IAAI;IACdC,aAAa,EAAE,IAAI;IACnBC,QAAQ,EAAE;EACX,CAAC,CAAC,EAAAE,MAAA,GAGD5B,QAAQ,CAAC;IACTC,IAAI,EAAE;EACP,CAAC,CAAC,EAAA4B,MAAA,GAGD7B,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAU,CAAC,CAAC,EAAA6B,MAAA,GAG7B9B,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,EAAA8B,MAAA,GAG5B/B,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAS,CAAC,CAAC,EAAA+B,MAAA,GAG5BhC,QAAQ,CAAC;IAAEC,IAAI,EAAE,QAAQ;IAAEwB,aAAa,EAAE;EAAK,CAAC,CAAC,EAAAQ,MAAA,GAiDjDC,eAAe,CAAC,CAAC,EAAAC,MAAA,GAsHjBD,eAAe,CAAC,CAAC,EAAAE,MAAA,GAKjBF,eAAe,CAAC,CAAC,EAAAtC,IAAA,CAAAyC,MAAA,IAAAC,OAAA,0BAAAC,SAAA;IAUlB,SAAA5C,SAAY6C,KAAmE,EAAEC,MAA+B,EAAE;MAAA,IAAAC,KAAA;MACjHA,KAAA,GAAAH,SAAA,CAAAI,IAAA,OAAMH,KAAK,EAAEC,MAAM,CAAC;MAtWrB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;MAPCG,0BAAA,CAAAF,KAAA,cAAAG,WAAA,EAAAH,KAAA;MAWA;AACD;AACA;AACA;AACA;AACA;MALCE,0BAAA,CAAAF,KAAA,cAAAI,YAAA,EAAAJ,KAAA;MASA;AACD;AACA;MAFCE,0BAAA,CAAAF,KAAA,QAAAK,YAAA,EAAAL,KAAA;MAMA;AACD;AACA;AACA;MAHCE,0BAAA,CAAAF,KAAA,cAAAM,YAAA,EAAAN,KAAA;MAWA;AACD;AACA;MAFCE,0BAAA,CAAAF,KAAA,UAAAO,YAAA,EAAAP,KAAA;MAQA;AACD;AACA;AACA;AACA;MAJCE,0BAAA,CAAAF,KAAA,iBAAAQ,YAAA,EAAAR,KAAA;MAWA;AACD;AACA;AACA;MAHCE,0BAAA,CAAAF,KAAA,YAAAS,YAAA,EAAAT,KAAA;MAOA;AACD;AACA;AACA;MAHCE,0BAAA,CAAAF,KAAA,aAAAU,YAAA,EAAAV,KAAA;MAOA;AACD;AACA;AACA;MAHCE,0BAAA,CAAAF,KAAA,gBAAAW,YAAA,EAAAX,KAAA;MAAAE,0BAAA,CAAAF,KAAA,cAAAY,aAAA,EAAAZ,KAAA;MAAAE,0BAAA,CAAAF,KAAA,cAAAa,aAAA,EAAAb,KAAA;MAeA;AACD;AACA;MAFCE,0BAAA,CAAAF,KAAA,gBAAAc,aAAA,EAAAd,KAAA;MAQA;AACD;AACA;MAFCE,0BAAA,CAAAF,KAAA,yBAAAe,aAAA,EAAAf,KAAA;MAQA;AACD;AACA;AACA;MAHCE,0BAAA,CAAAF,KAAA,mBAAAgB,aAAA,EAAAhB,KAAA;MAAAE,0BAAA,CAAAF,KAAA,aAAAiB,aAAA,EAAAjB,KAAA;MAWA;AACD;AACA;AACA;AACA;AACA;MALCE,0BAAA,CAAAF,KAAA,cAAAkB,aAAA,EAAAlB,KAAA;MAWA;AACD;AACA;AACA;AACA;AACA;AACA;MANCE,0BAAA,CAAAF,KAAA,oBAAAmB,aAAA,EAAAnB,KAAA;MAUA;AACD;AACA;AACA;AACA;AACA;MALCE,0BAAA,CAAAF,KAAA,WAAAoB,aAAA,EAAApB,KAAA;MAcA;AACD;AACA;AACA;AACA;AACA;MALCE,0BAAA,CAAAF,KAAA,iBAAAqB,aAAA,EAAArB,KAAA;MAAAE,0BAAA,CAAAF,KAAA,eAAAsB,aAAA,EAAAtB,KAAA;MAAAE,0BAAA,CAAAF,KAAA,2BAAAuB,aAAA,EAAAvB,KAAA;MAAAE,0BAAA,CAAAF,KAAA,0BAAAwB,aAAA,EAAAxB,KAAA;MAuBgD;MAAAE,0BAAA,CAAAF,KAAA,8BAAAyB,aAAA,EAAAzB,KAAA;MAGG;MAAAE,0BAAA,CAAAF,KAAA,wBAAA0B,aAAA,EAAA1B,KAAA;MAAAA,KAAA,CAK3C2B,qBAAqB,GAAG,KAAK;MAAA,OAAA3B,KAAA;IAqLrC;IAAC4B,cAAA,CAAA3E,QAAA,EAAA4C,SAAA;IAAA,IAAAgC,MAAA,GAAA5E,QAAA,CAAA6E,SAAA;IAnLD;AACD;AACA;AACA;AACA;IAJCD,MAAA,CAKAE,uBAAuB,GAAvB,SAAAA,uBAAuBA,CAACC,KAAc,EAA0C;MAC/E,IAAIC,OAAO,GAAID,KAAK,CAACE,iBAAiB,CAAC,CAAC,CAAeC,UAAU,CAAC,CAAC;MAEnE,IAAI,CAACF,OAAO,CAACG,GAAG,CAAC,wCAAwC,CAAC,EAAE;QAC3D,MAAMC,KAAK,GAAGC,WAAW,CAACC,aAAa,CAACP,KAAK,CAAC;QAC9CC,OAAO,GAAGI,KAAK,CAACH,iBAAiB,CAAC,CAAC,CAACC,UAAU,CAAC,CAAC;MACjD;MAEA,OAAOF,OAAO;IACf;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAAJ,MAAA,CAKQW,yBAAyB,GAAjC,SAAQA,yBAAyBA,CAACC,WAA+D,EAQ/F;MACD,MAAMC,MAAM,GAAGD,WAAW,CAACE,SAAS,CAAC,CAAC;MACtC,MAAMC,UAAU,GAAG,IAAI,CAACC,aAAa,CAAC,CAAC;MACvC;MACA;MACA,MAAMC,cAAc,GAAGJ,MAAM,IAAIA,MAAM,CAACR,iBAAiB,CAAC,CAAC;MAC3D,MAAMa,WAAW,GAAGD,cAAc,GAAIA,cAAc,CAA0CC,WAAW,CAAC,CAAC,GAAG,KAAK;MACnH,MAAMC,aAAa,GAAGP,WAAW,CAACQ,YAAY,CAAC,SAAS,CAAC,IAAIC,OAAO,CAACC,OAAO,CAAC,CAAC;MAC9E,MAAMC,KAAK,GAAGX,WAAW,CAACQ,YAAY,CAAC,OAAO,CAAC;MAC/C,MAAMI,aAAa,GAAGC,kBAAkB,CAACC,qBAAqB,CAACd,WAAW,CAAC,CAACe,KAAK,CAAC,UAAU,CAAC;MAC7F,MAAMC,kBAAkB,GAAG,IAAI,EAAEA,kBAAkB;MAEnD,OAAO;QAAEf,MAAM;QAAEE,UAAU;QAAEG,WAAW;QAAEC,aAAa;QAAEI,KAAK;QAAEC,aAAa;QAAEI;MAAmB,CAAC;IACpG,CAAC;IAAA5B,MAAA,CAGD6B,YAAY,GADZ,SACAA,YAAYA,CAACjB,WAA+D,EAAQ;MACnF,MAAM;QAAEC,MAAM;QAAEE,UAAU;QAAEG,WAAW;QAAEC,aAAa;QAAEI,KAAK;QAAEC,aAAa;QAAEI;MAAmB,CAAC,GACjG,IAAI,CAACjB,yBAAyB,CAACC,WAAW,CAAC;MAE5C,IAAIgB,kBAAkB,EAAE;QACvB,IAAIE,QAAQ;QACZ,MAAMC,UAAU,GAAGlB,MAAM,EAAEmB,QAAQ,CAACJ,kBAAkB,CAACK,KAAK,CAA0B;QACtF,IAAIpB,MAAM,CAACN,GAAG,CAAC,gBAAgB,CAAC,EAAE;UACjCuB,QAAQ,GAAIlB,WAAW,CAA0BQ,YAAY,CAAC,UAAU,CAAC;QAC1E,CAAC,MAAM;UACNU,QAAQ,GAAIlB,WAAW,CAA2BQ,YAAY,CAAC,OAAO,CAAC;QACxE;QACAW,UAAU,EAAEG,WAAW,CAACN,kBAAkB,CAACO,IAAI,EAAEL,QAAQ,CAAC;QAC1DC,UAAU,EAAEK,cAAc,CAAC,IAAI,CAAC;MACjC;;MAEA;MACA,MAAMC,YAAY,GAAGtB,UAAU,GAAGU,kBAAkB,CAACa,sBAAsB,CAACvB,UAAU,CAAC,GAAGwB,SAAS;;MAEnG;MACA;MACApB,aAAa,CACXqB,IAAI,CAAC,MAAM;QACX;QACC5B,WAAW,CAAyB6B,OAAO,GAAG5B,MAAM;QACpDD,WAAW,CAA2C8B,WAAW,GAAG;UACpEnB,KAAK,EAAEA,KAAK,IAAI;QACjB,CAAC;QACD,IAAI,EAAEoB,SAAS,CAAC,QAAQ,EAAE;UAAEC,KAAK,EAAE,IAAI,CAACC,QAAQ,CAAC,CAAC;UAAEC,OAAO,EAAEvB,KAAK,IAAI;QAAK,CAAC,CAAC;QAC7E,IAAI,CAACL,WAAW,EAAE;UACjB;UACA;UACAmB,YAAY,EAAEU,YAAY,CAACC,iBAAiB,CAACpC,WAAW,EAAE,CAAC,CAACY,aAAa,EAAEL,aAAa,EAAE,IAAI,CAAC;QAChG;QACA;QACA,IAAIJ,UAAU,EAAE;UACfU,kBAAkB,CAACwB,oBAAoB,CAACpC,MAAM,EAAEE,UAAU,CAAC;QAC5D;QACA;MACD,CAAC,CAAC,CACDmC,KAAK,CAAC,MAAM;QACZ;QACCtC,WAAW,CAAyB6B,OAAO,GAAG5B,MAAM;QACpDD,WAAW,CAA2C8B,WAAW,GAAG;UACpEnB,KAAK,EAAE;QACR,CAAC;QACD4B,GAAG,CAACC,KAAK,CAAC,mFAAmF,CAAC;QAC9F;QACA;QACA,IAAI,CAACT,SAAS,CAAC,QAAQ,EAAE;UAAEC,KAAK,EAAE,IAAI,CAACC,QAAQ,CAAC,CAAC;UAAEC,OAAO,EAAEvB,KAAK,IAAI;QAAM,CAAC,CAAC;MAC9E,CAAC,CAAC;;MAEH;MACA;MACA,MAAM8B,yBAAyB,GAAGlC,aAAa,CAC7CqB,IAAI,CAAC,YAAY;QACjB,OAAO,IAAInB,OAAO,CAAQC,OAAO,IAAK;UACrCgC,UAAU,CAAChC,OAAO,EAAE,CAAC,CAAC;QACvB,CAAC,CAAC;MACH,CAAC,CAAC,CACD4B,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;MACjBb,YAAY,EAAEkB,QAAQ,CAACC,QAAQ,CAACH,yBAAyB,CAAC;;MAE1D;MACA;MACA,IAAInC,WAAW,EAAE;QAChB;MACD;MAEAmB,YAAY,EAAEU,YAAY,CAACU,kCAAkC,CAAC7C,WAAW,EAAE,CAAC,CAACY,aAAa,EAAEL,aAAa,CAAC;MAC1G;MACA,MAAMuC,qBAAqB,GAAG3C,UAAU,EAAE4C,kBAAkB,CAACC,WAAW,CAAC,CAAC;MAE1E,IAAIF,qBAAqB,IAAIlC,aAAa,EAAE;QAC3C,MAAMpB,OAAO,GAAG,IAAI,CAACF,uBAAuB,CAACW,MAAM,CAAC;QAEpD,MAAMgD,IAAI,GAAG,CACZ,IAAI,CAAChD,MAAM,CAACiD,cAAc,CAAC,OAAO,CAAC,IAAIjD,MAAM,CAACiD,cAAc,CAAC,UAAU,CAAC,GAAGC,KAAK,IAAI,EAAE,CAAC,EACvF,IAAIlD,MAAM,CAACiD,cAAc,CAAC,iBAAiB,CAAC,EAAEC,KAAK,IAAI,EAAE,CAAC,CAC1D,CACCC,MAAM,CAAEC,IAAI,IAAK;UACjB,OAAOA,IAAI,EAAE9B,IAAI,KAAKI,SAAS,IAAI0B,IAAI,CAAC9B,IAAI,CAAC+B,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QACjE,CAAC,CAAC,CACDC,GAAG,CAAC,UAAUF,IAAsB,EAAE;UACtC,OAAO,GAAGpD,MAAM,CAACR,iBAAiB,CAAC,CAAC,EAAE+D,OAAO,CAAC,CAAC,IAAIH,IAAI,CAAC9B,IAAI,EAAE;QAC/D,CAAC,CAAC;;QAEH;QACA;QACApB,UAAU,EAAE4C,kBAAkB,CAACU,mBAAmB,CAACR,IAAI,CAAC;QAExD,MAAMS,mBAAmB,GAAGA,CAAA,KAAY;UACvC,IAAIlE,OAAO,CAACmE,iBAAiB,CAAC,CAAC,EAAE;YAChC;YACAnE,OAAO,CAACoE,eAAe,CAAC,gBAAgB,EAAE,YAAY;cACrDzD,UAAU,EAAE4C,kBAAkB,CAACc,IAAI,CAAC;gBAAEC,MAAM,EAAEC,QAAQ,CAACC,MAAM;gBAAEC,OAAO,EAAEhB;cAAK,CAAC,CAAC;cAC/E9C,UAAU,EAAE4C,kBAAkB,CAACmB,oBAAoB,CAACjB,IAAI,CAAC;YAC1D,CAAC,CAAC;UACH,CAAC,MAAM;YACN9C,UAAU,EAAE4C,kBAAkB,CAACmB,oBAAoB,CAACjB,IAAI,CAAC;UAC1D;QACD,CAAC;QACD,IAAIhD,MAAM,CAACN,GAAG,CAAC,kBAAkB,CAAC,IAAKM,MAAM,CAAaN,GAAG,CAAC,4BAA4B,CAAC,EAAE;UAC5FY,aAAa,CACXqB,IAAI,CAAC,MAAM;YACX8B,mBAAmB,CAAC,CAAC;YACrB;UACD,CAAC,CAAC,CACDpB,KAAK,CAAC,MAAM;YACZoB,mBAAmB,CAAC,CAAC;UACtB,CAAC,CAAC;QACJ,CAAC,MAAM;UACNA,mBAAmB,CAAC,CAAC;QACtB;MACD;IACD,CAAC;IAAAtE,MAAA,CAGD+E,gBAAgB,GADhB,SACAA,gBAAgBA,CAACC,MAAgB,EAAQ;MACxC,IAAI,CAACrC,SAAS,CAAC,YAAY,CAAC;IAC7B,CAAC;IAAA3C,MAAA,CAGDiF,oBAAoB,GADpB,SACAA,oBAAoBA,CAACD,MAAuC,EAAQ;MACnE,MAAME,WAAW,GAAGF,MAAM,CAAClE,SAAS,CAAC,CAAC;QACrCqE,IAAI,GAAG1E,WAAW,CAACC,aAAa,CAACwE,WAAW,CAAC;QAC7CnE,UAAU,GAAGoE,IAAI,CAACnE,aAAa,CAAC,CAAC;MAElC,MAAMqB,YAAY,GAAGZ,kBAAkB,CAACa,sBAAsB,CAACvB,UAAU,CAAC;MAC1EsB,YAAY,CAACU,YAAY,CAACqC,sBAAsB,CAACJ,MAAM,CAAC;IACzD,CAAC;IAAAhF,MAAA,CAMDqF,iBAAiB,GAAjB,SAAAA,iBAAiBA,CAAA,EAAS;MACzB,MAAMC,0BAA0B,GAAG,SAAAA,CAClCC,OAAgB,EACoE;QACpF,OAAOA,OAAO,CAAChF,GAAG,CAAiD,CAClE,cAAc,EACd,qCAAqC,EACrC,kBAAkB,EAClB,oCAAoC,CACpC,CAAC;MACH,CAAC;MACD,MAAMiF,QAAQ,GAAG,IAAI,CAACX,OAAO;MAC7B,IAAIW,QAAQ,IAAIF,0BAA0B,CAACE,QAAQ,CAAC,IAAIA,QAAQ,CAACC,iBAAiB,EAAE;QACnF,MAAMC,eAAe,GAAI,IAAI,CAAyCC,iBAAiB,CAAC,CAAC;QAEzF,KAAK,MAAMC,GAAG,IAAIF,eAAe,EAAE;UAClC,MAAMG,gBAAgB,GAAGL,QAAQ,CAACG,iBAAiB,CAAC,CAAC,IAAI,EAAE;UAC3D,IAAIE,gBAAgB,CAAC3B,OAAO,CAAC0B,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;YACzCJ,QAAQ,CAACC,iBAAiB,CAACG,GAAG,CAAC;UAChC;QACD;MACD;IACD,CAAC;IAAA5F,MAAA,CAED8F,gBAAgB,GAAhB,SAAAA,gBAAgBA,CAAA,EAAS;MACxB,IAAI,IAAI,CAACC,oBAAoB,IAAI,CAAC,IAAI,CAACjG,qBAAqB,EAAE;QAC7D;QACA,IAAI,CAAC+E,OAAO,EAAEmB,gBAAgB,CAC7B;UACCC,SAAS,EAAGC,GAAe,IAAK;YAC9B,IAAI,CAAqDvD,SAAS,CAAC,SAAS,EAAE;cAC9EwD,aAAa,EAAED,GAAG,CAACC;YACpB,CAAC,CAAC;UACH;QACD,CAAC,EACD,IACD,CAAC;QAED,IAAI,CAACrG,qBAAqB,GAAG,IAAI,CAAC,CAAC;MACpC;IACD;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA1E,QAAA,CAKOgL,wBAAwB,GAA/B,SAAOA,wBAAwBA,CAACb,OAAgB,EAAuB;MACtE,IAAIA,OAAO,CAAChF,GAAG,CAAC,qCAAqC,CAAC,IAAI,CAACgF,OAAO,CAAChF,GAAG,CAAC,oCAAoC,CAAC,EAAE;QAC7G,MAAM8F,YAAY,GAAGd,OAAuC;QAC5D,MAAMe,QAAQ,GAAGD,YAAY,CAACE,WAAW,CAAC,CAAC,KAAK,SAAS,GAAG,CAACF,YAAY,CAACG,iBAAiB,CAAC,CAAC,CAAC,GAAGH,YAAY,CAACI,cAAc,CAAC,CAAC;QAC9H,IAAIH,QAAQ,CAACI,MAAM,IAAI,CAAC,EAAE;UACzB,OAAOJ,QAAQ,CAAC,CAAC,CAAC;QACnB;MACD,CAAC,MAAM;QACN,OAAOf,OAAO;MACf;IACD;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAAvF,MAAA,CAKA6C,QAAQ,GAAR,SAAAA,QAAQA,CAAA,EAAiC;MACxC,IAAI8D,QAAQ,GAAGvL,QAAQ,CAACgL,wBAAwB,CAAC,IAAI,CAACvB,OAAO,CAAC;MAC9D,IAAI,IAAI,CAACkB,oBAAoB,IAAIY,QAAQ,EAAEpG,GAAG,CAAC,YAAY,CAAC,EAAE;QAC7DoG,QAAQ,GAAIA,QAAQ,CAAUC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;MAC5C;MACA,IAAID,QAAQ,EAAEpG,GAAG,CAAC,gBAAgB,CAAC,EAAE;QACpC,OAAQoG,QAAQ,CAAcE,WAAW,CAAC,CAAC;MAC5C,CAAC,MAAM,IAAIF,QAAQ,EAAEpG,GAAG,CAAC,iBAAiB,CAAC,EAAE;QAC5C,OAAQoG,QAAQ,CAAe9D,QAAQ,CAAC,CAAC;MAC1C,CAAC,MAAM,IAAI8D,QAAQ,EAAEpG,GAAG,CAAC,YAAY,CAAC,EAAE;QACvC,OAAQoG,QAAQ,CAAUG,OAAO,CAAC,CAAC;MACpC,CAAC,MAAM,IAAIH,QAAQ,EAAEpG,GAAG,CAAC,aAAa,CAAC,EAAE;QACxC,OAAQoG,QAAQ,CAAWG,OAAO,CAAC,CAAC;MACrC,CAAC,MAAM,IAAIH,QAAQ,EAAEpG,GAAG,CAAC,YAAY,CAAC,EAAE;QACvC,OAAQoG,QAAQ,CAAUG,OAAO,CAAC,KAAK,CAAC;MACzC,CAAC,MAAM,IAAIH,QAAQ,EAAEpG,GAAG,CAAC,oBAAoB,CAAC,EAAE;QAC/C,OAAQoG,QAAQ,CAAkBG,OAAO,CAAC,CAAC;MAC5C,CAAC,MAAM,IAAIH,QAAQ,EAAEpG,GAAG,CAAC,wBAAwB,CAAC,EAAE;QACnD,OAAQoG,QAAQ,CAAsBI,QAAQ,CAAC,CAAC;MACjD,CAAC,MAAM,IAAIJ,QAAQ,EAAEpG,GAAG,CAAQ,kBAAkB,CAAC,EAAE;QACpD,OAAOoG,QAAQ,CAAC9D,QAAQ,CAAC,CAAC,CAAC,CAAC;MAC7B,CAAC,MAAM,IACN8D,QAAQ,EAAEpG,GAAG,CAAY,kCAAkC,CAAC,IAC5DoG,QAAQ,EAAEpG,GAAG,CAAQ,6BAA6B,CAAC,IACnDoG,QAAQ,EAAEpG,GAAG,CAAU,+BAA+B,CAAC,EACtD;QACD;QACA,OAAOoG,QAAQ,CAAC9D,QAAQ,CAAC,CAAC;MAC3B,CAAC,MAAM;QACN,MAAM,IAAImE,KAAK,CAAC,uDAAuD,CAAC;MACzE;IACD,CAAC;IAAAhH,MAAA,CAEDiH,2BAA2B,GAA3B,SAAAA,2BAA2BA,CAAA,EAAuB;MACjD,OAAO,IAAI,CAACC,wBAAwB;IACrC;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAAlH,MAAA,CAMAmH,QAAQ,GAAR,SAAAA,QAAQA,CAACvE,KAAuB,EAAW;MAC1C,IAAI,CAAC,IAAI,CAACiC,OAAO,EAAE;QAClB,OAAO,IAAI;MACZ;MACA,IAAIU,OAAO,GAAGnK,QAAQ,CAACgL,wBAAwB,CAAC,IAAI,CAACvB,OAAO,CAAC;MAC7D,IAAI,IAAI,CAACkB,oBAAoB,IAAIR,OAAO,EAAEhF,GAAG,CAAC,YAAY,CAAC,EAAE;QAC5D;QACAgF,OAAO,GAAIA,OAAO,CAAUqB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;MAC1C;MACA,IAAIrB,OAAO,EAAEhF,GAAG,CAAW,gBAAgB,CAAC,EAAE;QAC7CgF,OAAO,CAAC6B,WAAW,CAACxE,KAAgB,CAAC;MACtC,CAAC,MAAM,IAAI2C,OAAO,EAAEhF,GAAG,CAAY,iBAAiB,CAAC,EAAE;QACtDgF,OAAO,CAAC4B,QAAQ,CAACvE,KAAe,CAAC;MAClC,CAAC,MAAM,IAAI2C,OAAO,EAAEhF,GAAG,CAAO,YAAY,CAAC,EAAE;QAC5CgF,OAAO,CAAC8B,OAAO,CAACzE,KAAe,CAAC;MACjC,CAAC,MAAM,IAAI2C,OAAO,EAAEhF,GAAG,CAAW,kBAAkB,CAAC,EAAE;QACtDgF,OAAO,CAAC4B,QAAQ,CAACvE,KAAK,CAAC;MACxB,CAAC,MAAM;QACN,MAAM,uDAAuD;MAC9D;MACA,OAAO,IAAI;IACZ;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA5C,MAAA,CAKAsH,UAAU,GAAV,SAAAA,UAAUA,CAAA,EAAY;MACrB,IAAI/B,OAAO,GAAGnK,QAAQ,CAACgL,wBAAwB,CAAC,IAAI,CAACvB,OAAO,CAAC;MAC7D,IAAIU,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAKhD,SAAS,IAAI,CAACgD,OAAO,EAAEhF,GAAG,CAAC,YAAY,CAAC,EAAE;QAC7E;QACA,IAAI,IAAI,CAACwF,oBAAoB,IAAIR,OAAO,CAAChF,GAAG,CAAO,YAAY,CAAC,EAAE;UACjE;UACAgF,OAAO,GAAGA,OAAO,CAACqB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QAChC;QACA,IAAIrB,OAAO,CAAChF,GAAG,CAAO,YAAY,CAAC,EAAE;UACpC;UACAgF,OAAO,GAAGA,OAAO,CAACqB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QAChC;;QAEA;QACA;QACA,IAAIrB,OAAO,CAAChF,GAAG,CAAW,gBAAgB,CAAC,EAAE;UAC5C,OAAOgF,OAAO,CAACgC,WAAW,CAAC,SAAS,CAAC;QACtC,CAAC,MAAM,IAAIhC,OAAO,CAAChF,GAAG,CAAY,iBAAiB,CAAC,EAAE;UACrD,OAAOgF,OAAO,CAACgC,WAAW,CAAC,SAAS,CAAC;QACtC,CAAC,MAAM,IAAIhC,OAAO,CAAChF,GAAG,CAAO,YAAY,CAAC,EAAE;UAC3C,OAAOgF,OAAO,CAACgC,WAAW,CAAC,SAAS,CAAC;QACtC,CAAC,MAAM,IAAIhC,OAAO,CAAChF,GAAG,CAAS,cAAc,CAAC,EAAE;UAC/C,OAAOgF,OAAO,CAACgC,WAAW,CAAC,SAAS,CAAC;QACtC,CAAC,MAAM,IAAIhC,OAAO,CAAChF,GAAG,CAAe,oBAAoB,CAAC,EAAE;UAC3D,OAAOgF,OAAO,CAACgC,WAAW,CAAC,QAAQ,CAAC;QACrC,CAAC,MAAM,IAAIhC,OAAO,CAAChF,GAAG,CAAmB,wBAAwB,CAAC,EAAE;UACnE,OAAOgF,OAAO,CAACgC,WAAW,CAAC,aAAa,CAAC;QAC1C,CAAC,MAAM,IAAIhC,OAAO,CAAChF,GAAG,CAAqB,yCAAyC,CAAC,EAAE;UACtF;UACA,OAAO,IAAI;QACZ,CAAC,MAAM,IAAIgF,OAAO,CAAChF,GAAG,CAAY,kCAAkC,CAAC,EAAE;UACtE,OAAOgF,OAAO,CAAC+B,UAAU,CAAC,CAAC;QAC5B,CAAC,MAAM,IAAI/B,OAAO,CAAChF,GAAG,CAAQ,6BAA6B,CAAC,EAAE;UAC7D,OAAOgF,OAAO,CAACgC,WAAW,CAAC,aAAa,CAAC;QAC1C,CAAC,MAAM,IAAIhC,OAAO,CAAChF,GAAG,CAAU,+BAA+B,CAAC,EAAE;UACjE,OAAOgF,OAAO,CAAC+B,UAAU,CAAC,CAAC;QAC5B,CAAC,MAAM,IAAI/B,OAAO,CAAChF,GAAG,CAAiB,sBAAsB,CAAC,EAAE;UAC/D;UACA,OAAO,IAAI;QACZ,CAAC,MAAM,IAAIgF,OAAO,CAAChF,GAAG,CAAW,kBAAkB,CAAC,EAAE;UACrD,MAAMiH,QAAQ,GAAGjC,OAAO,CAACgB,WAAW,CAAC,CAAC;UACtC;UACA;UACA,OAAOiB,QAAQ,KAAKC,aAAa,CAACC,QAAQ;QAC3C,CAAC,MAAM,IAAInC,OAAO,CAAChF,GAAG,CAAc,oCAAoC,CAAC,EAAE;UAC1E;UACA;UACA,OAAOgF,OAAO,CAACoC,IAAI,GAAGpC,OAAO,CAACoC,IAAI,CAACJ,WAAW,CAAC,SAAS,CAAC,GAAG,IAAI;QACjE,CAAC,MAAM,IACNhC,OAAO,CAAChF,GAAG,CAAC,2CAA2C,CAAC,IACvDgF,OAAO,CAAahF,GAAG,CAAW,iCAAiC,CAAC,EACpE;UACD,OAAO,IAAI;QACZ,CAAC,MAAM;UACN,OAAO,KAAK;QACb;MACD,CAAC,MAAM;QACN,OAAO,KAAK;MACb;IACD;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAAP,MAAA,CAMA4H,UAAU,GAAV,SAAAA,UAAUA,CAACC,OAAgB,EAAW;MACrC,IAAItC,OAAO,GAAGnK,QAAQ,CAACgL,wBAAwB,CAAC,IAAI,CAACvB,OAAO,CAAC;MAC7D,IAAI,IAAI,CAACkB,oBAAoB,IAAIR,OAAO,EAAEhF,GAAG,CAAO,YAAY,CAAC,EAAE;QAClE;QACAgF,OAAO,GAAGA,OAAO,CAACqB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;MAChC;;MAEA;MACA;MACA,IAAIrB,OAAO,EAAEhF,GAAG,CAAW,gBAAgB,CAAC,EAAE;QAC7C,OAAOgF,OAAO,CAACrD,WAAW,CAAC,SAAS,EAAE2F,OAAO,CAAC;MAC/C,CAAC,MAAM,IAAItC,OAAO,EAAEhF,GAAG,CAAY,iBAAiB,CAAC,EAAE;QACtD,OAAOgF,OAAO,CAACrD,WAAW,CAAC,SAAS,EAAE2F,OAAO,CAAC;MAC/C,CAAC,MAAM,IAAItC,OAAO,EAAEhF,GAAG,CAAO,YAAY,CAAC,EAAE;QAC5C,OAAOgF,OAAO,CAACrD,WAAW,CAAC,SAAS,EAAE2F,OAAO,CAAC;MAC/C,CAAC,MAAM,IAAItC,OAAO,EAAEhF,GAAG,CAAS,cAAc,CAAC,EAAE;QAChD,OAAOgF,OAAO,CAACrD,WAAW,CAAC,SAAS,EAAE2F,OAAO,CAAC;MAC/C,CAAC,MAAM,IAAItC,OAAO,EAAEhF,GAAG,CAAe,oBAAoB,CAAC,EAAE;QAC5D,OAAOgF,OAAO,CAACrD,WAAW,CAAC,QAAQ,EAAE2F,OAAO,CAAC;MAC9C,CAAC,MAAM,IAAItC,OAAO,EAAEhF,GAAG,CAAmB,wBAAwB,CAAC,EAAE;QACpE,OAAOgF,OAAO,CAACrD,WAAW,CAAC,aAAa,EAAE2F,OAAO,CAAC;MACnD,CAAC,MAAM,IAAItC,OAAO,EAAEhF,GAAG,CAAW,kBAAkB,CAAC,EAAE;QACtD;QACA;QACA;QACA,IAAIuH,YAAY;QAChB,IAAID,OAAO,EAAE;UACZC,YAAY,GAAGL,aAAa,CAACM,QAAQ;QACtC,CAAC,MAAM;UACND,YAAY,GAAGL,aAAa,CAACC,QAAQ;QACtC;QACAnC,OAAO,CAACyC,WAAW,CAACF,YAAY,CAAC;MAClC,CAAC,MAAM,IAAIvC,OAAO,EAAEhF,GAAG,CAAQ,6BAA6B,CAAC,EAAE;QAC9DgF,OAAO,CAAC0C,cAAc,CAACJ,OAAO,CAAC;QAC/B,OAAOtC,OAAO;MACf,CAAC,MAAM,IAAIA,OAAO,EAAEhF,GAAG,CAAY,kCAAkC,CAAC,EAAE;QACvEgF,OAAO,CAACqC,UAAU,CAACC,OAAO,CAAC;MAC5B,CAAC,MAAM;QACN,MAAM,kDAAkD;MACzD;MACA,OAAO,IAAI;IACZ;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OATC;IAAA7H,MAAA,CAUAkI,UAAU,GAAV,SAAAA,UAAUA,CAACC,UAAgG,EAAU;MACpH,MAAMC,UAAU,GAAG,IAAI,CAACC,iBAAiB,CAAC,CAAC;MAC3C,MAAM1B,QAAQ,GAAGvL,QAAQ,CAACgL,wBAAwB,CAAC,IAAI,CAACvB,OAAO,CAAC;MAEhE,IAAI1C,IAAI,CAAC,CAAC;MACV,IAAIwE,QAAQ,EAAEpG,GAAG,CAAC,gBAAgB,CAAC,EAAE;QACpC4B,IAAI,GAAIwE,QAAQ,CAAcrG,UAAU,CAAC,UAAU,CAAC,EAAEgI,eAAe,CAAC,CAAC;MACxE,CAAC,MAAM,IAAI3B,QAAQ,EAAEpG,GAAG,CAAC,iBAAiB,CAAC,EAAE;QAC5C4B,IAAI,GAAIwE,QAAQ,CAAerG,UAAU,CAAC,OAAO,CAAC,EAAEgI,eAAe,CAAC,CAAC;MACtE,CAAC,MAAM,IAAI3B,QAAQ,EAAEpG,GAAG,CAAQ,kBAAkB,CAAC,EAAE;QACpD4B,IAAI,GAAGwE,QAAQ,CAACrG,UAAU,CAAC,OAAO,CAAC,CAAEgI,eAAe,CAAC,CAAC;MACvD;MAEA,MAAMC,QAAQ,GAAG,IAAIC,OAAO,CAAC;QAC5BC,MAAM,EAAEtG,IAAI;QACZzG,IAAI,EAAEyM,UAAU,CAACzM,IAAI;QACrBgN,OAAO,EAAEP,UAAU,CAACO,OAAO;QAC3BC,SAAS,EAAEhC,QAAQ,EAAE3E,QAAQ,CAAC,CAAC;QAC/B4G,WAAW,EAAET,UAAU,CAACS,WAAW;QACnCC,UAAU,EAAEV,UAAU,CAACU;MACxB,CAAC,CAAC;MAEFT,UAAU,CAACU,WAAW,CAACP,QAAQ,CAAC;MAChC,OAAOA,QAAQ,CAACQ,KAAK,CAAC,CAAC;IACxB;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAA/I,MAAA,CAKAgJ,aAAa,GAAb,SAAAA,aAAaA,CAACC,EAAU,EAAQ;MAC/B,MAAMb,UAAU,GAAG,IAAI,CAACC,iBAAiB,CAAC,CAAC;MAC3C,MAAMa,GAAG,GAAGd,UAAU,CAACe,eAAe,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;MAClD,MAAMC,MAAM,GAAGH,GAAG,CAACI,IAAI,CAAEC,CAAU,IAAKA,CAAC,EAAER,KAAK,GAAG,CAAC,KAAKE,EAAE,CAAC;MAC5D,IAAII,MAAM,EAAE;QACXjB,UAAU,CAACoB,cAAc,CAACH,MAAM,CAAC;MAClC;IACD,CAAC;IAAArJ,MAAA,CAEDqI,iBAAiB,GAAjB,SAAAA,iBAAiBA,CAAA,EAAc;MAC9B,OAAOoB,SAAS;IACjB;;IAEA;AACD;AACA,OAFC;IAAAzJ,MAAA,CAGA0J,mBAAmB,GAAnB,SAAAA,mBAAmBA,CAAA,EAAS;MAC3B,IAAI,CAAC,IAAI,CAAC7E,OAAO,EAAE;QAClB,IAAI,CAACA,OAAO,GAAG,IAAI,CAAC8E,aAAa,CAAC,CAAC;MACpC;IACD,CAAC;IAAA3J,MAAA,CAED2J,aAAa,GAAb,SAAAA,aAAaA,CAAA,EAAY;MACxB,MAAMC,eAAe,GAAG,IAAI,CAACC,iBAAiB,CAAC,IAAI,CAACC,QAAQ,EAAE,IAAI,CAACC,WAAW,CAAC;MAC/E,MAAMC,KAAK,GAAG,IAAI,CAACC,SAAS,CAAC,CAAC;MAC9B,MAAMC,cAAc,GAAGF,KAAK,EAAEG,YAAY,CAAC,CAAC;MAC5C,MAAMJ,WAAW,GAAGG,cAAc,EAAEE,cAAc,CAAC,IAAI,CAACL,WAAW,IAAK,IAAI,CAACM,mBAAmB,CAAC,CAAY,CAAC;MAC9G,IAAIP,QAAQ;MACZ,IAAIF,eAAe,EAAE;QACpBE,QAAQ,GAAGI,cAAc,EAAEI,oBAAoB,CAACV,eAAe,CAACxF,OAAO,CAAC,CAAC,CAAwB;MAClG;MAEA,IAAI;QACH,MAAMmG,oBAAoB,GAAG,IAAI,CAACC,cAAc,CAAC,CAA8B;QAC/ED,oBAAoB,CAACE,YAAY,GAAG,IAAI,CAACC,YAAY,CAAC,YAAY,CAAC,GAAG,WAAW,GAAGnI,SAAS;QAC7F,MAAMoI,kBAAkB,GAAGC,UAAU,CACpCL,oBAAoB,EACpB,CAAC,CAAC,EACFP,KAAK,EAAEa,mBAAmB,EAC1Bf,QAAQ,EACRC,WACD,CAAC;QACDY,kBAAkB,CAACG,aAAa,CAACC,MAAM,GAAG,IAAI,CAAClJ,YAAY,CAACmJ,IAAI,CAAC,IAAI,CAA4B;QACjGL,kBAAkB,CAACG,aAAa,CAACG,UAAU,GAAG,IAAI,CAAClG,gBAAgB,CAACiG,IAAI,CAAC,IAAI,CAAC;QAC9EL,kBAAkB,CAACG,aAAa,CAACI,kBAAkB,GAAG,IAAI,CAACjG,oBAAoB,CAAC+F,IAAI,CAAC,IAAI,CAAC;QAC1F,IAAI,CAACnG,OAAO,GAAGsG,cAAc,CAACC,yBAAyB,CAACT,kBAAkB,CAAuB;MAClG,CAAC,CAAC,OAAOpB,CAAC,EAAE;QACX,IAAIA,CAAC,YAAYvC,KAAK,EAAE;UACvBqE,YAAY,CAACC,IAAI,CAAC/B,CAAC,CAACb,OAAO,GAAG,+BAA+B,CAAC;QAC/D,CAAC,MAAM;UACN2C,YAAY,CAACC,IAAI,CAAC,2BAA2B,CAAC;QAC/C;MACD;MACA,OAAO,IAAI,CAACzG,OAAO;IACpB,CAAC;IAAA7E,MAAA,CAEDwK,cAAc,GAAd,SAAAA,cAAcA,CAAA,EAAuB;MACpC,MAAMe,QAA4B,GAAG,CAAC,CAAuB;MAC7D,MAAMC,UAAU,GAAG,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,gBAAgB,CAAC,CAAC;MACxD,MAAMC,YAAY,GAAG,IAAI,CAACF,WAAW,CAAC,CAAC,CAACG,kBAAkB,CAAC,CAAC;MAC5D,KAAK,MAAMC,YAAY,IAAIL,UAAU,EAAE;QACtC,MAAMM,oBAAoB,GAAG,IAAI,CAACvE,WAAW,CAACsE,YAAY,CAAC;QAC3DN,QAAQ,CAACM,YAAY,CAA6B,GAAGC,oBAAoB;MAC1E;MACA,KAAK,MAAMC,eAAe,IAAIJ,YAAY,EAAE;QAC3C,MAAMK,kBAAkB,GAAG,IAAI,CAACC,cAAc,CAACF,eAAe,CAAC;QAC/D,IAAIG,KAAK,CAACC,OAAO,CAACH,kBAAkB,CAAC,EAAE;UACtC,MAAMI,aAAa,GAAG,EAAE;UACxB,KAAK,MAAMC,aAAa,IAAIL,kBAAkB,EAAE;YAC/C,IAAIK,aAAa,CAAC9L,GAAG,CAA8B,oDAAoD,CAAC,EAAE;cACzG6L,aAAa,CAACE,IAAI,CAACD,aAAa,CAAC7B,cAAc,CAAC,CAAC,CAAC;YACnD;UACD;UACAe,QAAQ,CAACQ,eAAe,CAA6B,GAAGK,aAAa;QACtE,CAAC,MAAM,IAAIJ,kBAAkB,EAAE;UAC9B,IAAIA,kBAAkB,CAACzL,GAAG,CAA8B,oDAAoD,CAAC,EAAE;YAC9GgL,QAAQ,CAACQ,eAAe,CAA6B,GAAGC,kBAAkB,CAACxB,cAAc,CAAC,CAAC;UAC5F,CAAC,MAAM;YACNe,QAAQ,CAACQ,eAAe,CAA6B,GAAGC,kBAAkB,CAACjD,KAAK,CAAC,CAAC;UACnF;QACD;MACD;MACA,OAAOwC,QAAQ;IAChB,CAAC;IAAA,OAAAnQ,QAAA;EAAA,EA3tBqBmR,QAAQ,GAAAjO,WAAA,GAAAkO,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,eAAAzE,KAAA;IAAAiR,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAArO,YAAA,GAAAiO,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,eAAAtE,KAAA;IAAA8Q,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAApO,YAAA,GAAAgO,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,SAAArE,KAAA;IAAA6Q,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAnO,YAAA,GAAA+N,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,eAAApE,KAAA;IAAA4Q,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAlO,YAAA,GAAA8N,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,WAAAjE,KAAA;IAAAyQ,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAjO,YAAA,GAAA6N,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,kBAAAhE,KAAA;IAAAwQ,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAhO,YAAA,GAAA4N,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,aAAA/D,KAAA;IAAAuQ,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA/N,YAAA,GAAA2N,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,cAAA7D,KAAA;IAAAqQ,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA9N,YAAA,GAAA0N,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,iBAAA5D,MAAA;IAAAoQ,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA7N,aAAA,GAAAyN,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,eAAA3D,MAAA;IAAAmQ,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA5N,aAAA,GAAAwN,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,eAAA1D,MAAA;IAAAkQ,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA3N,aAAA,GAAAuN,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,iBAAAxD,MAAA;IAAAgQ,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA1N,aAAA,GAAAsN,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,0BAAAvD,MAAA;IAAA+P,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA,WAAAA,CAAA;MAAA,OAoGiB,IAAI;IAAA;EAAA,IAAAzN,aAAA,GAAAqN,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,oBAAAtD,MAAA;IAAA8P,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAxN,aAAA,GAAAoN,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,cAAApD,MAAA;IAAA4P,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAvN,aAAA,GAAAmN,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,eAAAnD,MAAA;IAAA2P,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAtN,aAAA,GAAAkN,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,qBAAAlD,MAAA;IAAA0P,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAArN,aAAA,GAAAiN,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,YAAAjD,MAAA;IAAAyP,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAApN,aAAA,GAAAgN,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,kBAAA7C,MAAA;IAAAqP,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAnN,aAAA,GAAA+M,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,gBAAA5C,MAAA;IAAAoP,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAlN,aAAA,GAAA8M,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,4BAAA3C,MAAA;IAAAmP,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAjN,aAAA,GAAA6M,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,2BAAA1C,MAAA;IAAAkP,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAhN,aAAA,GAAA4M,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,+BAAAzC,MAAA;IAAAiP,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA/M,aAAA,GAAA2M,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,yBAAAxC,MAAA;IAAAgP,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAJ,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,mBAAAvC,MAAA,GAAAmP,MAAA,CAAAC,wBAAA,CAAA/O,OAAA,CAAAkC,SAAA,mBAAAlC,OAAA,CAAAkC,SAAA,GAAAuM,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,uBAAArC,MAAA,GAAAiP,MAAA,CAAAC,wBAAA,CAAA/O,OAAA,CAAAkC,SAAA,uBAAAlC,OAAA,CAAAkC,SAAA,GAAAuM,yBAAA,CAAAzO,OAAA,CAAAkC,SAAA,2BAAApC,MAAA,GAAAgP,MAAA,CAAAC,wBAAA,CAAA/O,OAAA,CAAAkC,SAAA,2BAAAlC,OAAA,CAAAkC,SAAA,GAAAlC,OAAA,MAAAD,MAAA;EAAA,OA0nBrC1C,QAAQ;AAAA","ignoreList":[],"file":"FieldAPI-dbg.js"}