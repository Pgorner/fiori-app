/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/base/BindingToolkit","sap/fe/core/CommonUtils","sap/fe/core/controls/CommandExecution","sap/fe/core/controls/FormElementWrapper","sap/fe/core/converters/ManifestSettings","sap/fe/core/converters/MetaModelConverter","sap/fe/core/converters/annotations/DataField","sap/fe/core/converters/controls/Common/table/StandardActions","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/UIFormatters","sap/fe/macros/ActionCommand","sap/fe/macros/CommonHelper","sap/fe/macros/MultiValueField","sap/fe/macros/TSXUtils","sap/fe/macros/ValueHelp","sap/fe/macros/draftIndicator/DraftIndicator","sap/fe/macros/field/FieldHelper","sap/fe/macros/field/FieldTemplating","sap/fe/macros/fpm/CustomFragment.block","sap/fe/macros/internal/InternalField.block","sap/fe/macros/internal/helpers/ActionHelper","sap/fe/macros/internal/helpers/TableTemplating","sap/fe/macros/microchart/MicroChart.block","sap/fe/macros/situations/SituationsIndicator","sap/fe/macros/table/ActionsTemplating","sap/fe/macros/table/QuickFilterSelector","sap/fe/macros/table/SlotColumn","sap/fe/macros/table/TableHelper","sap/fe/macros/table/uploadTable/UploadTableTemplate","sap/m/FlexItemData","sap/m/HBox","sap/m/Label","sap/m/Menu","sap/m/MenuItem","sap/m/ObjectStatus","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/VBox","sap/m/library","sap/m/plugins/CellSelector","sap/m/plugins/ContextMenuSetting","sap/m/plugins/CopyProvider","sap/m/plugins/DataStateIndicator","sap/ui/core/CustomData","sap/ui/core/Lib","sap/ui/fl/variants/VariantManagement","sap/ui/mdc/Table","sap/ui/mdc/actiontoolbar/ActionToolbarAction","sap/ui/mdc/enums/TableP13nMode","sap/ui/mdc/p13n/PersistenceProvider","sap/ui/mdc/table/Column","sap/ui/mdc/table/CreationRow","sap/ui/mdc/table/DragDropConfig","sap/ui/mdc/table/GridTableType","sap/ui/mdc/table/ResponsiveColumnSettings","sap/ui/mdc/table/ResponsiveTableType","sap/ui/mdc/table/RowActionItem","sap/ui/mdc/table/RowSettings","sap/ui/mdc/table/TreeTableType","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs"],function(e,t,n,a,i,o,r,l,s,d,c,u,p,f,m,b,g,h,v,C,T,y,D,x,P,M,I,A,O,w,S,E,F,k,B,L,R,N,U,H,V,$,j,_,G,q,z,K,W,X,Q,Y,J,Z,ee,te,ne,ae,ie,oe,re,le,se,de,ce,ue){"use strict";var pe={};var fe=_.ObjectMarkerVisibility;var me=k.getUploadPlugin;var be=w.getTableContextMenuTemplate;var ge=w.getTableActionsTemplate;var he=I.buildExpressionForHeaderVisible;var ve=D.getVisibleExpression;var Ce=D.getDraftIndicatorVisibleBinding;var Te=v.createCustomDatas;var ye=v.createCustomData;var De=b.getCommandExecutionForAction;var xe=m.isMultiValueField;var Pe=f.isPathUpdatable;var Me=f.getPathRelativeLocation;var Ie=f.enhanceDataModelPath;var Ae=p.isSingleton;var Oe=p.isMultipleNavigationProperty;var we=p.isAnnotationOfType;var Se=p.isAnnotationOfTerm;var Ee=u.generate;var Fe=d.singletonPathVisitor;var ke=d.UI;var Be=s.StandardActionKeys;var Le=l.isDataFieldTypes;var Re=l.isDataFieldForAnnotation;var Ne=l.isDataField;var Ue=l.hasDataPointTarget;var He=r.getInvolvedDataModelObjects;var Ve=o.CreationMode;var $e=t.pathInModel;var je=t.or;var _e=t.not;var Ge=t.isTruthy;var qe=t.isConstant;var ze=t.ifElse;var Ke=t.equal;var We=t.constant;var Xe=t.compileExpression;var Qe=t.and;function Ye(e,t,n,a){const i=t.getObject();switch(n){case"GridTable":return ce(ie,{rowCountMode:e.control.rowCountMode,rowCount:e.control.rowCount,selectionLimit:a,fixedColumnCount:e.control.frozenColumnCount,scrollThreshold:e.control.scrollThreshold});case"TreeTable":return ce(de,{rowCountMode:e.control.rowCountMode,rowCount:e.control.rowCount,fixedColumnCount:e.control.frozenColumnCount,scrollThreshold:e.control.scrollThreshold});default:return ce(re,{showDetailsButton:true,detailsButtonSetting:"{=['Low', 'Medium', 'None']}",growingMode:i.$kind==="EntitySet"?"Scroll":undefined})}}function Je(e){return ce(K,{filter:e.dataStateIndicatorFilter,enableFiltering:true,dataStateChange:e.dataStateChange})}function Ze(e,t,n){if(t){return ce(C,{idPrefix:Ee([e,"TableValueHelp"]),metaPath:t+"/Value",useMultiValueField:n===true?true:undefined})}return undefined}function et(e,t,n,a){const i=n.resolvePath(t.annotationPath).target;if(Re(i)&&i.Target.$target?.term==="com.sap.vocabularies.UI.v1.Chart"){return[]}else if(Re(i)&&i.Target.$target?.term==="com.sap.vocabularies.UI.v1.FieldGroup"){const n=[];for(const a in i.Target.$target.Data){const i=Ze(e,t.annotationPath+"/Target/$AnnotationPath/Data/"+a);if(i){n.push(i)}}return n}else{if(Le(i)){const n=Ie(a,i.Value.path);const o=Me(a,n.navigationProperties);if(Oe(o[o.length-1])){const n=Ze(e,t.annotationPath,true);return n?[n]:[]}}const n=Ze(e,t.annotationPath);return n?[n]:[]}}function tt(e,t){const n=Pe(e,{ignoreTargetCollection:true,authorizeUnresolvable:true,pathVisitor:(t,n)=>Fe(t,e.convertedTypes,n)});const a=Pe(e,{authorizeUnresolvable:true,pathVisitor:(t,n)=>Fe(t,e.convertedTypes,n)});if(e.startingEntitySet===e.targetEntitySet){if(e.startingEntitySet.annotations.Common?.DraftRoot!==undefined){return Qe(n._type==="Unresolvable"?ze(qe(a),a,We(true)):n,t.control.isHierarchyParentNodeUpdatable)}else{return We(false)}}else{return Qe(n._type==="Unresolvable"?ze(qe(a),a,We(true)):n,ke.IsEditable,t.control.isHierarchyParentNodeUpdatable)}}function nt(e,t,n,i,o,r,l,s,d){const c=[];const u=t.actions.find(e=>e.key===Be.Cut);if(u?.isTemplated==="true"){c.push(ce(a,{execute:l.getCutHandler(false),command:"Cut",enabled:u.enabled}))}const p=t.actions.find(e=>e.key===Be.Paste);if(p?.visible!=="false"&&n==="TreeTable"){c.push(ce(a,{execute:l.getPasteHandler(false),command:"Paste",enabled:p?.enabled}))}if(!i&&t?.columns){for(const n of t.columns){if(n.availability==="Default"&&"annotationPath"in n){c.push(...et(e,n,o.convertedTypes,o))}}}const f=t.actions.find(e=>e.key===Be.Create);const m=t.actions.find(e=>e.key===Be.Delete);if(t.annotation.isInsertUpdateActionsTemplated&&f?.isTemplated==="true"&&t.control.nodeType===undefined&&t.control.enableUploadPlugin===false){c.push(ce(a,{execute:l.getCreateButtonPressHandler(false,false),visible:f.visible,enabled:f.enabled,command:"Create"}))}if(m?.isTemplated==="true"){c.push(ce(a,{execute:l.getDeleteButtonPressHandler(false),visible:m.visible,enabled:m.enabled,command:"DeleteEntry"}))}const b=t.actions.find(e=>e.key===Be.MoveUp);const g=t.actions.find(e=>e.key===Be.MoveDown);if(b&&g&&b.visible!=="false"&&g.visible!=="false"&&n==="TreeTable"){c.push(ce(a,{execute:l.getMoveUpDownHandler(true,false),command:"TableMoveElementUp",enabled:b.enabled}));c.push(ce(a,{execute:l.getMoveUpDownHandler(false,false),command:"TableMoveElementDown",enabled:g.enabled}))}for(const e in t.commandActions){const n=t.commandActions[e];const a=mt(e,n,false,o.convertedTypes,s,d,t,o,l);if(a){c.push(a)}}c.push(ce(a,{execute:l.displayTableSettings,command:"TableSettings"}));if(r==="None"){c.push(ce(ee,{id:Ee([e,"PersistenceProvider"]),for:e}))}c.push(ce(q,{scope:"Selection"}));if(t.control.enableUploadPlugin){c.push(me(t,e))}return c}pe.getDependents=nt;function at(e,t,n,a){const i=[];if(t.segmentedButtonPress){const n=[];if(g.isDesktop()){n.push(ce($,{tooltip:"{sap.fe.i18n>M_COMMON_HYBRID_SEGMENTED_BUTTON_ITEM_TOOLTIP}",icon:"sap-icon://chart-table-view"},"Hybrid"))}n.push(ce($,{tooltip:"{sap.fe.i18n>M_COMMON_CHART_SEGMENTED_BUTTON_ITEM_TOOLTIP}",icon:"sap-icon://bar-chart"},"Chart"));n.push(ce($,{tooltip:"{sap.fe.i18n>M_COMMON_TABLE_SEGMENTED_BUTTON_ITEM_TOOLTIP}",icon:"sap-icon://table-view"},"Table"));i.push(ce(J,{layoutInformation:'{ aggregationName: "end", alignment: "End" }',visible:"{= ${pageInternal>alpContentView} === 'Table' }",children:{action:ce(V,{id:Ee([e.id,"SegmentedButton","TemplateContentView"]),select:t.segmentedButtonPress,selectedKey:"{pageInternal>alpContentView}",children:{items:n}})}}))}i.push(...ge(e,t,n,a));return i.length>0?i:undefined}function it(e,t,n,a){const i=ce(le,{type:t,press:n==="ResponsiveTable"?undefined:a.rowPress,visible:e.annotation.row?.visible});return ce(se,{navigated:e.annotation.row?.rowNavigated,highlight:e.annotation.row?.rowHighlighting,children:{rowActions:t==="Navigation"?i:undefined}})}function ot(e,t,n,a,i,o,r,l,s,d){const c=be(e,o,s,a);if(i==="Navigation"&&!d){c.push(rt(o))}if(c.length>0){return ce(N,{itemSelected:o.contextMenuItemSelected,children:{dependents:lt(n,t,r,o,l,s),items:c}})}return undefined}function rt(e){const t=Qe(_e(Qe($e("/sessionOn","internal"),ke.IsEditable)),_e($e("contextmenu/inactiveContext","internal")));return ce(U,{"core:require":"{API: 'sap/fe/macros/table/TableAPI'}",startsSection:true,text:"{sap.fe.i18n>M_COMMON_TABLE_CONTEXT_MENU_OPEN_IN_NEW_TAB}",press:e.contextMenuOpenInNewTab,enabled:"{= ${internal>contextmenu/numberOfSelectedContexts} > 0}",visible:t})}function lt(e,t,n,i,o,r){const l=[];const s=e.actions.find(e=>e.key===Be.Create);if(s?.isTemplated==="true"&&t==="TreeTable"){l.push(ce(a,{execute:i.getCreateButtonPressHandler(true,false),command:"Create::ContextMenu",visible:s.visible,enabled:s.enabledForContextMenu}))}const d=e.actions.find(e=>e.key===Be.Cut);if(d?.isTemplated==="true"){l.push(ce(a,{execute:i.getCutHandler(true),command:"Cut::ContextMenu",enabled:d.enabledForContextMenu}))}const c=e.actions.find(e=>e.key===Be.Paste);if(c?.visible!=="false"&&t==="TreeTable"){l.push(ce(a,{execute:i.getPasteHandler(true),command:"Paste::ContextMenu",enabled:c?.enabledForContextMenu}))}const u=e.actions.find(e=>e.key===Be.Delete);if(u?.isTemplated==="true"){l.push(ce(a,{execute:i.getDeleteButtonPressHandler(true),visible:u.visible,enabled:u.enabledForContextMenu,command:"DeleteEntry::ContextMenu"}))}const p=e.actions.find(e=>e.key===Be.MoveUp);const f=e.actions.find(e=>e.key===Be.MoveDown);if(p&&f&&p.visible!=="false"&&f.visible!=="false"&&t==="TreeTable"){l.push(ce(a,{execute:i.getMoveUpDownHandler(true,true),command:"TableMoveElementUp::ContextMenu",enabled:p.enabledForContextMenu}));l.push(ce(a,{execute:i.getMoveUpDownHandler(false,true),command:"TableMoveElementDown::ContextMenu",enabled:f.enabledForContextMenu}))}for(const t in e.commandActions){const a=e.commandActions[t];const s=mt(t,a,true,n.convertedTypes,o,r,e,n,i);if(s){l.push(s)}}return l.length>0?l:undefined}function st(e,t,n,a){if(e==="Control"){return ce(Q,{id:Ee([t,"VM"]),showSetAsDefault:true,select:a.variantSelected,headerLevel:n,save:a.variantSaved,for:[t]})}return undefined}function dt(e,t,n,a){if(e.control.filters?.quickFilters){const i=e.control.filters.quickFilters;return ce(S,{id:Ee([t,"QuickFilterContainer"]),metaPath:a,filterConfiguration:i,selectionChange:n.quickFilterSelectionChange})}return undefined}function ct(e,t,n){let a;if(n){a=We(false)}else if(e==="TreeTable"){if(t.startingEntitySet===t.targetEntitySet){a=We(t.startingEntitySet.annotations.Common?.DraftRoot===undefined)}else{a=_e(ke.IsEditable)}}else{a=We(true)}return ce(z,{visible:a})}function ut(e,t,n,a){if(!a&&e&&["ResponsiveTable","GridTable","TreeTable"].includes(e)){return ce(G,{enabled:je(e!=="TreeTable",_e(tt(n,t))),rangeLimit:200})}return undefined}function pt(e,t,n,a,i,o){if(e.name===Ve.CreationRow){const e=t.actions.find(e=>e.key===Be.CreationRow);if(e?.isTemplated){const t=Te([{key:"disableAddRowButtonForEmptyData",value:a},{key:"customValidationFunction",value:o}]);return ce(ne,{id:Ee([n,Ve.CreationRow]),visible:e.visible,apply:i.getCreateButtonPressHandler(false,true),applyEnabled:e.enabled,children:{customData:t}})}}return undefined}function ft(e,t,n,a){if(e==="TreeTable"){return ce(ae,{enabled:Xe(tt(t,n)),dropPosition:n.annotation.allowDropBetweenNodes===true?"OnOrBetween":"On",draggable:true,droppable:true,dragStart:a.dragStartDocument,dragEnter:a.dragEnterDocument,drop:a.dropDocument})}return undefined}function mt(e,t,n,a,i,o,r,l,s){const d=t.annotationPath?a.resolvePath(t.annotationPath).target:undefined;const c=t.annotationPath?g.getActionContext(i.getModel().createBindingContext(t.annotationPath+"/Action")):undefined;const u=i.getModel().createBindingContext(c);const p=u?He(u,o):undefined;const f=d?.ActionTarget?.isBound;const m=d?.ActionTarget?.annotations?.Core?.OperationAvailable?.valueOf()!==false;const b=t.type==="ForAction"?f!==true||m:true;const h=!n?t.enabled:t.enabledForContextMenu;if(b&&(!n||F.isActionShownInContextMenu(t,l))){const a=!n?t.command:t.command+"::ContextMenu";const i={onExecuteAction:s.getDataFieldForActionButtonPressHandler(d,t,undefined,n),onExecuteIBN:s.getDataFieldForIBNPressHandler(t,false),onExecuteManifest:s.getManifestActionPressHandler(t,n),isIBNEnabled:h??F.isDataFieldForIBNEnabled({collection:o,tableDefinition:r},d,!!d.RequiresContext,d.NavigationAvailable,n),isActionEnabled:h??F.isDataFieldForActionEnabled(r,d.Action,!!f,c,t.enableOnSelect,p?.targetEntityType,n),isEnabled:h};return De(a,r.commandActions[e],i)}return undefined}function bt(e){const t=e.control.additionalRequiredModules??[];return`{TableRuntime: 'sap/fe/macros/table/TableRuntime', API: 'sap/fe/macros/table/TableAPI'${t.map((e,t)=>`, customModule${t+1}: '${e}'`).join("")}}`}function gt(e,t,n){return ce(te,{id:Ee([e,"C",t.id]),propertyKey:t.name,width:t.width,header:t.header,hAlign:t.horizontalAlign,tooltip:t.tooltip,required:t.required,children:{extendedSettings:ce(oe,{importance:t.importance}),template:ce(x,{id:t.key,fragmentName:t.template,contextPath:n,children:{childCustomData:ce(W,{value:F.createBindingToLoadProperties(t.properties)},"AssociatedProperties")}})}})}pe.getCustomColumnTemplate=gt;function ht(e,t,n,a){if(t.isDraftIndicator){return ce(te,{id:Ee([e,"C","computedColumns","draftStatus"]),headerVisible:false,propertyKey:t.name,header:t.label,tooltip:t.tooltip,width:"3em",children:ce(T,{draftIndicatorType:fe.IconOnly,contextPath:n.getPath(),usedInTable:true,usedInAnalyticalTable:a})})}else if(t.isSituationsIndicator){return ce(te,{id:Ee([e,"C","computedColumns","situationsIndicator"]),propertyKey:t.name,header:t.label,tooltip:t.tooltip,headerVisible:false,width:"4em",children:ce(O,{contextPath:n.getPath()})})}else{return undefined}}pe.getComputedColumn=ht;function vt(e,t,n){return ce(te,{id:Ee([e,"C",t.id]),propertyKey:t.name,width:t.width,hAlign:t.horizontalAlign,header:t.header,tooltip:t.tooltip,required:n?undefined:t.required,children:{extendedSettings:ce(oe,{importance:t.importance}),template:ce(E,{templateId:t.template?.startsWith("<")?undefined:t.template,children:{content:t.template?.startsWith("<")?t.template:undefined}})}})}pe.getSlotColumn=vt;function Ct(e,t){if(e.getObject("./@com.sap.vocabularies.Common.v1.DraftRoot")&&e.getObject("./@com.sap.vocabularies.Common.v1.SemanticKey")&&t.formatOptions?.fieldGroupDraftIndicatorPropertyPath){return ce(i,{children:ce(T,{draftIndicatorType:fe.IconAndText,contextPath:e.getPath(),visible:Ce(t.formatOptions?.fieldGroupName),ariaLabelledBy:["this>ariaLabelledBy"]})})}return undefined}function Tt(e,t){if(e.getObject("./@com.sap.vocabularies.Common.v1.SemanticKey")&&t.formatOptions?.fieldGroupDraftIndicatorPropertyPath){return ce(H,{visible:t.formatOptions?.showErrorObjectStatus,class:"sapUiSmallMarginBottom",text:"{sap.fe.i18n>Contains_Errors}",state:"Error"})}return undefined}function yt(e){const t=He(e).targetObject;if(Ne(t)&&t.Value?.$target?.type==="Edm.TimeOfDay"){return"short"}if(Re(t)&&Ue(t)&&t.Target.$target?.Value.$target.type==="Edm.TimeOfDay"){return"short"}}function Dt(e,t,n,a,i,o,r,l,s,d){if(a.name==="CreationRow"){let a;switch(i){case true:a="Display";break;case false:a="Editable";break;default:a=undefined;break}const c=r.getObject();return ce(P,{"core:require":"{TableRuntime: 'sap/fe/macros/table/TableRuntime'}",vhIdPrefix:Ee([e,"TableValueHelp"]),editMode:a,contextPath:o,metaPath:r,wrap:n==="ResponsiveTable",change:`TableRuntime.onFieldChangeInCreationRow($event, '${d??""}')`,showErrorObjectStatus:t.formatOptions?.showErrorObjectStatus,formatOptions:{fieldMode:l,textLinesEdit:t.formatOptions?.textLinesEdit,textMaxLines:t.formatOptions?.textMaxLines===undefined?undefined:t.formatOptions?.textMaxLines,textMaxLength:t.formatOptions?.textMaxLength,textMaxCharactersDisplay:t.formatOptions?.textMaxCharactersDisplay,textExpandBehaviorDisplay:t.formatOptions?.textExpandBehaviorDisplay,textAlignMode:"Table",semanticKeyStyle:n==="ResponsiveTable"?"ObjectIdentifier":"Label",hasDraftIndicator:t.formatOptions?.hasDraftIndicator,fieldGroupDraftIndicatorPropertyPath:t.formatOptions?.fieldGroupDraftIndicatorPropertyPath,fieldGroupName:t.formatOptions?.fieldGroupName,showIconUrl:c?.Inline&&c?.IconUrl,ignoreNavigationAvailable:s??false,isCurrencyAligned:true,dateTimeStyle:yt(r)}})}return undefined}function xt(e,t,n,a,i,o,r,l,s,d,c,u,p,f,m,b){const g=a.getObject();let h;switch(l){case true:h="Display";break;case false:h="Editable";break;default:h=undefined}if(t.control.enableUploadPlugin&&n.typeConfig?.className==="Edm.Stream"){h="Display"}return ce(P,{vhIdPrefix:Ee([e,"TableValueHelp"]),editMode:h,contextPath:i,metaPath:a,textAlign:p,wrap:r==="ResponsiveTable",class:b,onLiveChange:s.name==="InlineCreationRows"?"TableAPI.onFieldLiveChange($event)":undefined,change:c,ariaLabelledBy:f?[f]:undefined,navigateAfterAction:n.isNavigable,showErrorObjectStatus:n.formatOptions?.showErrorObjectStatus,formatOptions:{fieldMode:d,textLinesEdit:n.formatOptions?.textLinesEdit,textMaxLines:n.formatOptions?.textMaxLines===undefined?undefined:n.formatOptions?.textMaxLines,textMaxCharactersDisplay:n.formatOptions?.textMaxCharactersDisplay,textMaxLength:n.formatOptions?.textMaxLength,textExpandBehaviorDisplay:n.formatOptions?.textExpandBehaviorDisplay,textAlignMode:"Table",showEmptyIndicator:m,semanticKeyStyle:r==="ResponsiveTable"?"ObjectIdentifier":"Label",hasDraftIndicator:n.formatOptions?.hasDraftIndicator,fieldGroupDraftIndicatorPropertyPath:n.formatOptions?.fieldGroupDraftIndicatorPropertyPath,fieldGroupName:n.formatOptions?.fieldGroupName,showIconUrl:g?.Inline&&g?.IconUrl,ignoreNavigationAvailable:o??false,isAnalytics:o,forInlineCreationRows:s.name==="InlineCreationRows",isCurrencyAligned:true,compactSemanticKey:u===undefined?undefined:`${u}`,dateTimeStyle:yt(a)}})}pe.getMacroFieldTemplate=xt;function Pt(e,t,n,a,i,o,r,l,s,d,c,u,p,f){let m;let b;const v=a.targetObject;if(we(v,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")&&(Se(v.Target.$target,"com.sap.vocabularies.UI.v1.Chart")||Se(v.Target.$target,"com.sap.vocabularies.UI.v1.PresentationVariant"))){const t=(l==="ResponsiveTable"?!n.settings?.showMicroChartLabel:undefined)??true;const a=l==="ResponsiveTable"?n.settings?.microChartSize??"XS":"XS";let s=o.getModel().createBindingContext(o.getPath(i.getObject("Target/$AnnotationPath")));s=o.getModel().createBindingContext(g.getNavigationContext(s));m=ce(A,{id:Ee([e,v]),contextPath:s,metaPath:Se(v.Target.$target,"com.sap.vocabularies.UI.v1.PresentationVariant")?i.getModel().createBindingContext(i.getPath()+"/Target/$AnnotationPath/Visualizations/0/$AnnotationPath"):i.getModel().createBindingContext(i.getPath()+"/Target/$AnnotationPath"),showOnlyChart:t,size:a??"XS",hideOnNoData:true,isAnalytics:r})}else if(we(v,"com.sap.vocabularies.UI.v1.DataField")&&xe(Ie(a,v.Value.path))){const t=Xe(ze(je(s===true,Qe(Ge(ke.IsInactive),d.name==="InlineCreationRows")),We(true),ze(Ke(c,"nowrapper"),We(true),We(undefined))));m=ce(h,{contextPath:o.getPath(),metaPath:i.getPath(),readOnly:t,vhIdPrefix:Ee([e,"TableValueHelp"]),useParentBindingCache:true})}else if(we(v,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")&&Se(v.Target.$target,"com.sap.vocabularies.UI.v1.FieldGroup")){const f=v.Target.$target;const b=i.getModel().createBindingContext(i.getPath()+"/Target/$AnnotationPath/Data");const g=f.Data.length-1;const h=f.Data.map((i,f)=>{const m=b.getModel().createBindingContext(b.getPath()+"/"+f);const h=He(m);const v=y.computeLabelText(m.getObject(),{context:m});if(n.showDataFieldsLabel&&!!v){const i=X.getResourceBundleFor("sap.fe.macros");return ue(L,{visible:ve(h),alignItems:y.buildExpressionForAlignItems(m.getObject("Target/$AnnotationPath/Visualization/$EnumMember")),children:[ce(R,{id:F.getFieldGroupLabelStableId(e,h),text:i.getText("HEADER_FORM_LABEL",[v]),class:"sapUiTinyMarginEnd",visible:ve(h)}),ce(j,{children:{layoutData:ce(B,{growFactor:"1"}),items:xt(e,t,n,m,o,r,l,s,d,undefined,u,p,"Left",`${F.getColumnStableId(e,a)} ${F.getFieldGroupLabelStableId(e,h)}`,true,F.getMarginClass(m.getObject("Target/$AnnotationPath/Visualization/$EnumMember"),f===g))}})]})}else{return xt(e,t,n,m,o,r,l,s,d,c,u,p,undefined,F.getColumnStableId(e,a),undefined,F.getMarginClass(m.getObject("Target/$AnnotationPath/Visualization/$EnumMember"),f===g))}});const C=Ct(o,n);if(C){h.push(C)}const T=Tt(o,n);if(T){h.push(T)}m=ce(j,{visible:F.getVBoxVisibility(b.getObject(),n.FieldGroupHiddenExpressions,i.getObject()),children:{items:h}})}else{m=xt(e,t,n,i,o,r,l,s,d,c,u,p,undefined,undefined,false,undefined);b=Dt(e,n,l,d,s,o,i,c,r,f)}return{template:m,creationTemplate:b}}function Mt(e,t,a,i,o,r,l,s,d,c,u,p,f,m){let b=i.getModel().createBindingContext(a.annotationPath);if(!b){return undefined}b=i.getModel().createBindingContext(y.getDataFieldDefault(b));const g=He(b,i);const h=b?.getObject?.()??{};const v=Pt(e,t,a,g,b,i,s,d,o,c,u,p,f,m);return ce(te,{id:F.getColumnStableId(e,g),width:!n.isSmallDevice()||a.width?F.getColumnWidth({enableAutoColumnWidth:r,widthIncludingColumnHeader:l,tableType:d},a,h,F.getTextOnActionField(h,{context:b}),g,true,{title:b.getObject("Target/$AnnotationPath/Title")||"",description:b.getObject("Target/$AnnotationPath/Title")||""}):undefined,minWidth:n.isSmallDevice()?F.getColumnWidth({enableAutoColumnWidth:r,widthIncludingColumnHeader:l,tableType:d},a,h,F.getTextOnActionField(h,{context:b}),g,false,{title:b.getObject("Target/$AnnotationPath/Title")||"",description:b.getObject("Target/$AnnotationPath/Description")||""}):undefined,header:a.label||a.name,propertyKey:a.name,hAlign:a.horizontalAlign||y.getColumnAlignment(h,{collection:i}),headerVisible:F.setHeaderLabelVisibility(h,b.getObject("Target/$AnnotationPath/Data")),tooltip:a.tooltip,required:o?undefined:a.required,children:{customData:ye("showDataFieldsLabel",a.showDataFieldsLabel),extendedSettings:ce(oe,{importance:a.importance}),template:v.template,creationTemplate:v.creationTemplate}})}pe.getColumnTemplate=Mt;function It(e,t,n,a,i,o,r,l,s,d,c,u,p,f){return n.map(n=>{if(n.availability==="Default"&&n.type==="Default"){return gt(e,n,a)}else if(n.availability==="Default"&&n.type==="Annotation"){return Mt(e,t,n,a,i,o,r,l,s,d,c,u,p,f)}else if(n.availability==="Default"&&n.type==="Slot"){return vt(e,n,i)}else if(n.availability==="Default"&&n.type==="Computed"){return ht(e,n,a,l)}return undefined}).filter(e=>e!==undefined)}function At(){return"sap/fe/macros/table/designtime/Table.designtime"}function Ot(t){switch(t){case"Aggregate":return Z.Aggregate;case"Sort":return Z.Sort;case"Column":return Z.Column;case"Filter":return Z.Filter;case"Group":return Z.Group;default:e.error("Unknown P13n mode: "+t);return Z.Column}}function wt(e,t,n,a,i){e.convertedMetadata=t;const o=He(e.metaPath,e.contextPath);const r=e.tableDefinition.annotation?.row?.navigationInfo;const l=r?.routePath;let s=false;if(l){const e=i.getRoutingService()._getTargetInformation(l);s=e?.options?.settings?.openInEditMode??false}e.contextObjectPath=o;const d=e.tableDefinition.control.type;const u=(d==="TreeTable"||e.tableDefinition.enableAnalytics===true)&&o.startingEntitySet===o.targetEntitySet&&c.isObjectPathDraftSupported(o);const p=F.getDelegate(e.tableDefinition,e.isAlp===true,e.tableDefinition.annotation.entityName,u);const f=e.headerVisible??e.tableDefinition.control.headerVisible;const m=e.header??e.tableDefinition.annotation.title;const b=he(m??"",e.tabTitle??"",!!f);const h=e.tableDefinition.actions.find(e=>e.key===Be.Paste);const v=t.resolvePath(e.tableDefinition.annotation.collection).target;const C=d==="TreeTable"?a.tableContextChange:undefined;const T=F.getUiLineItemObject(e.metaPath,t);const y=e.tableDefinition.annotation.navigationPath;if(e.tableDefinition.annotation.collection.startsWith("/")&&Ae(o.startingEntitySet)){e.tableDefinition.annotation.collection=y}const D=n.createBindingContext(e.tableDefinition.annotation.collection);const x=v.annotations.Common?.DraftRoot;const P=e.isPublic?e.variantManagement??"None":e.tableDefinition.annotation.variantManagement;const I=At();let A;if(e.rowPressHandlerPath){A="Navigation"}A??=e.tableDefinition.annotation.row?.action;const O=e.tableDefinition.actions.find(e=>e.key===Be.Create)?.visible||true;const w=e.tableDefinition.control.disableCopyToClipboard;const S=e.tableDefinition.control.disableAddRowButtonForEmptyData;const E=e.tableDefinition.annotation.updatablePropertyPath;let k;switch(e.personalization){case"false":k=undefined;break;case"true":k=[Z.Sort,Z.Column,Z.Filter];break;case undefined:k=e.tableDefinition.annotation.p13nMode?.map(e=>Ot(e));break;default:k=e.personalization.split(",").map(e=>Ot(e.trim()))}const B=M.getMultiSelectDisabledActions(T);const L=[{key:"kind",value:v._type},{key:"navigationPath",value:y},{key:"enableAnalytics",value:e.tableDefinition.enableAnalytics},{key:"creationMode",value:e.creationMode.name},{key:"inlineCreationRowCount",value:e.tableDefinition.control.inlineCreationRowCount},{key:"showCreate",value:O},{key:"createAtEnd",value:e.creationMode.createAtEnd},{key:"displayModePropertyBinding",value:e.readOnly},{key:"tableType",value:d},{key:"targetCollectionPath",value:D.getPath()},{key:"entityType",value:D.getPath()+"/"},{key:"metaPath",value:D.getPath()},{key:"onChange",value:""},{key:"hiddenFilters",value:e.tableDefinition.control.filters?.hiddenFilters},{key:"requestGroupId",value:"$auto.Workers"},{key:"segmentedButtonId",value:Ee([e.id,"SegmentedButton","TemplateContentView"])},{key:"enablePaste",value:d==="TreeTable"?false:h?.enabled},{key:"disableCopyToClipboard",value:w},{key:"operationAvailableMap",value:g.stringifyCustomData(e.tableDefinition.operationAvailableMap)},{key:"draft",value:x},{key:"navigationAvailableMap",value:F.getNavigationAvailableMap(T)},{key:"actionsMultiselectDisabled",value:B.length>0?B.join(","):undefined},{key:"updatablePropertyPath",value:E||""},{key:"exportRequestSize",value:e.tableDefinition.control.exportRequestSize}];return ce(Y,{"core:require":bt(e.tableDefinition),"fl:flexibility":e["fl:flexibility"],sortConditions:e.tableDefinition.annotation.sortConditions,groupConditions:e.tableDefinition.annotation.groupConditions,aggregateConditions:e.tableDefinition.annotation.aggregateConditions,"dt:designtime":I,id:e.id,busy:e.busy,busyIndicatorDelay:0,enableExport:e.tableDefinition.control.enableExport,delegate:p,rowPress:d==="ResponsiveTable"?a.rowPress:undefined,beforeOpenContextMenu:a.beforeOpenContextMenu,autoBindOnInit:e.useBasicSearch||!e.filterBar,selectionMode:e.tableDefinition.annotation.selectionMode||"None",selectionChange:a.selectionChange,showRowCount:e.tableDefinition.control.showRowCount,header:m,headerVisible:b,headerLevel:e.headerLevel,headerStyle:e.headerStyle,threshold:e.tableDefinition.annotation.threshold,p13nMode:k,paste:a.getPasteHandler(false),beforeExport:a.beforeExport,class:e.tableDefinition.control.useCondensedTableLayout===true?"sapUiSizeCondensed":undefined,multiSelectMode:e.tableDefinition.control.multiSelectMode,showPasteButton:d==="TreeTable"?false:h?.visible,enablePaste:d==="TreeTable"?false:h?.enabled,visible:e.visible,modelContextChange:C,children:{customData:Te(L),dataStateIndicator:Je(a),type:Ye(e.tableDefinition,D,d,e.tableDefinition.control.selectionLimit),dependents:nt(e.id,e.tableDefinition,d,e.readOnly,o,P,a,e.metaPath,D),actions:at(e,a,D,v),rowSettings:it(e.tableDefinition,A,d,a),contextMenu:ot(e,d,e.tableDefinition,v,A,a,o,e.metaPath,D,s),columns:It(e.id,e.tableDefinition,e.tableDefinition.columns,D,e.readOnly,e.enableAutoColumnWidth,e.tableDefinition.control.widthIncludingColumnHeader,e.tableDefinition.enableAnalytics,d,e.creationMode,e.fieldMode,undefined,e.tableDefinition.control.isCompactType,e.tableDefinition.control.customValidationFunction),dragDropConfig:ft(d,o,e.tableDefinition,a),creationRow:pt(e.creationMode,e.tableDefinition,e.id,S,a,e.tableDefinition.control.customValidationFunction),variant:st(P,e.id,e.headerLevel,a),quickFilter:dt(e.tableDefinition,e.id,a,e.metaPath.getPath()),copyProvider:ct(d,o,w),cellSelector:ut(d,e.tableDefinition,o,w)}})}pe.getMDCTableTemplate=wt;return pe},false);
//# sourceMappingURL=MdcTableTemplate.js.map