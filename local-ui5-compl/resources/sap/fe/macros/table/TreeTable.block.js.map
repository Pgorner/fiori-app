{"version":3,"file":"TreeTable.block.js","names":["TreeTableBlock","_dec","defineBuildingBlock","name","namespace","publicNamespace","returnTypes","_dec2","blockAttribute","type","required","isPublic","_dec3","_dec4","_dec5","underlyingType","validate","creationOptionsInput","includes","Error","_dec6","allowedValues","_class","_class2","_TableBlock","props","controlConfiguration","settings","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_exports","_inheritsLoose","_proto","prototype","getTableSettings","tableSettings","TableBlock","addSetting","hierarchyQualifier","isMoveToPositionAllowed","isNodeMovable","creationMode","createInPlace","nodeType","propertyName","values","Object","assign","map","value","key","label","creationFields","isCreateEnabled","entries","length","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./TreeTable.block.tsx"],"sourcesContent":["import type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockSupport\";\nimport type { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport TableBlock from \"./Table.block\";\nimport type TreeTableCreationOptions from \"./TreeTableCreationOptions\";\n\n/**\n * Building block used to create a tree table based on the metadata provided by OData V4.\n * @mixes sap.fe.macros.Table\n * @augments sap.fe.macros.MacroAPI\n * @public\n */\n@defineBuildingBlock({\n\tname: \"TreeTable\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\"sap.fe.macros.table.TableAPI\"]\n})\nexport default class TreeTableBlock extends TableBlock {\n\t/**\n\t * A set of options that can be configured.\n\t * @public\n\t */\n\t@blockAttribute({ type: \"string\", required: true, isPublic: true })\n\thierarchyQualifier!: string;\n\n\t/**\n\t * Defines the extension point to control if a source node can be dropped on a specific parent node.<br/>\n\t * @public\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tisMoveToPositionAllowed?: string;\n\n\t/**\n\t * Defines the extension point to control if a node can be dragged.<br/>\n\t * @public\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tisNodeMovable?: string;\n\n\t/**\n\t * A set of options that can be configured.\n\t * @public\n\t */\n\t@blockAttribute({\n\t\ttype: \"object\",\n\t\tunderlyingType: \"sap.fe.macros.table.TreeTableCreationOptions\",\n\t\tisPublic: true,\n\t\tvalidate: function (creationOptionsInput: TreeTableCreationOptions) {\n\t\t\tif (creationOptionsInput.name && ![\"NewPage\", \"Inline\", \"External\", \"CreationDialog\"].includes(creationOptionsInput.name)) {\n\t\t\t\tthrow new Error(`Allowed value ${creationOptionsInput.name} for creationMode does not match`);\n\t\t\t}\n\n\t\t\treturn creationOptionsInput;\n\t\t}\n\t})\n\tcreationMode: PropertiesOf<TreeTableCreationOptions> = {};\n\n\t/**\n\t * Defines the type of table that will be used by the building block to render the data. This setting is defined by the framework.\n\t *\n\t * Allowed value is `TreeTable`.\n\t * @public\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true, allowedValues: [\"TreeTable\"] })\n\tprotected readonly type?: \"TreeTable\";\n\n\tconstructor(props: PropertiesOf<TreeTableBlock>, controlConfiguration: unknown, settings: TemplateProcessorSettings) {\n\t\tsuper(props, controlConfiguration, settings);\n\t}\n\n\tgetTableSettings(): Record<string, unknown> {\n\t\tconst tableSettings = super.getTableSettings();\n\t\tTableBlock.addSetting(tableSettings, \"type\", \"TreeTable\");\n\t\tTableBlock.addSetting(tableSettings, \"hierarchyQualifier\", this.hierarchyQualifier);\n\t\tTableBlock.addSetting(tableSettings, \"isMoveToPositionAllowed\", this.isMoveToPositionAllowed);\n\t\tTableBlock.addSetting(tableSettings, \"isNodeMovable\", this.isNodeMovable);\n\t\tconst creationMode = (tableSettings[\"creationMode\"] ?? {}) as Record<string, unknown>;\n\t\tTableBlock.addSetting(creationMode, \"createInPlace\", this.creationMode.createInPlace);\n\n\t\tif (this.creationMode.nodeType) {\n\t\t\t//Values is passed as Array into the XML but in the manifest it is a dictionary\n\t\t\t// so we need to transform the array into a dictionary\n\t\t\tTableBlock.addSetting(creationMode, \"nodeType\", {\n\t\t\t\tpropertyName: this.creationMode.nodeType.propertyName,\n\t\t\t\tvalues: Object.assign(\n\t\t\t\t\t{},\n\t\t\t\t\t...(this.creationMode.nodeType.values ?? []).map((value) => ({\n\t\t\t\t\t\t[value.key]: { label: value.label, creationFields: value.creationFields }\n\t\t\t\t\t}))\n\t\t\t\t)\n\t\t\t});\n\t\t}\n\n\t\tTableBlock.addSetting(creationMode, \"isCreateEnabled\", this.creationMode.isCreateEnabled);\n\t\tif (Object.entries(creationMode).length > 0) {\n\t\t\ttableSettings[\"creationMode\"] = creationMode;\n\t\t}\n\t\treturn tableSettings;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}