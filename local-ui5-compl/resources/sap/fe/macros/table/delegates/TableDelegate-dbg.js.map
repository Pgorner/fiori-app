{"version":3,"names":["SEMANTICKEY_HAS_DRAFTINDICATOR","SEARCH_HAS_BEEN_FIRED","COLUMN_HAS_BEEN_ADDED","PREVIOUS_SORTERS","Object","assign","TableDelegateBase","apiVersion","_computeVisualSettingsForFieldGroup","oTable","oProperty","aProperties","name","indexOf","oColumn","getColumns","find","col","getPropertyKey","bShowDataFieldsLabel","data","oMetaModel","getModel","getMetaModel","involvedDataModelObjects","getInvolvedDataModelObjects","getContext","metadataPath","convertedMetaData","convertedTypes","oDataField","targetObject","oFieldGroup","Target","$target","aFieldWidth","Data","forEach","oData","oDataFieldWidth","$Type","TableSizeHelper","getWidthForDataFieldForAnnotation","getWidthForDataField","labelWidth","propertyWidth","SizeHelper","getButtonWidth","Label","toString","push","nWidest","reduce","acc","value","Math","max","visualSettings","deepExtend","widthCalculation","verticalArrangement","minWidth","ceil","_computeVisualSettingsForPropertyWithValueHelp","table","property","tableAPI","getParent","propertyInfos","metaModel","dataField","getObject","gap","getProperty","_computeVisualSettingsForPropertyWithUnit","oUnit","oUnitText","oTimezoneText","oTableAPI","sUnitText","getReadOnly","_computeLabel","labelMap","label","propertiesWithSameLabel","isPropertyUsedAsTextOnlyProperty","some","prop","text","path","mode","length","includes","additionalLabels","join","_updatePropertyInfo","properties","p13nMode","getP13nMode","sortable","filterable","groupable","undefined","concat","typeConfig","groupLabel","group","TypeMap","getTypeConfig","visible","getColumnsFor","getTableDefinition","columns","fetchExportCapabilities","oCapabilities","XLSX","oModel","DelegateUtil","fetchModel","then","model","aSupportedFormats","aLowerFormats","map","element","toLowerCase","oAnnotation","catch","err","Log","error","_isFilterableNavigationProperty","columnInfo","columnDataModelObjectPath","isFilterable","isPathFilterable","relativePath","isPartOfLineItem","isPartOfCustomColumn","isConstant","_fetchPropertyInfo","appComponent","sAbsoluteNavigationPath","annotationPath","oNavigationContext","createBindingContext","oTypeConfig","className","isTypeFilterable","formatOptions","constraints","bFilterable","CommonHelper","isPropertyFilterable","isComplexType","bIsAnalyticalTable","getCustomData","getLocalizedText","tooltip","propertyInfo","baseType","style","availability","exportSettings","_setPropertyInfoExportSettings","unit","template","clipboardSettings","keys","exportDataPointTargetValue","_updateAnalyticalPropertyInfoAttributes","isKey","isGroupable","textArrangement","descriptionColumn","oCol","textProperty","valueProperty","descriptionProperty","caseSensitive","additionalLabel","unitText","timezoneText","exportFormat","_getExportFormat","format","aggregatable","extension","_fetchComputedPropertyInfo","type","_fetchCustomPropertyInfo","header","startsWith","ModelHelper","fetchTextFromMetaModel","_bColumnHasPropertyWithDraftIndicator","oColumnInfo","hasDraftIndicator","fieldGroupDraftIndicatorPropertyPath","_updateDraftIndicatorModel","_oTable","_oColumnInfo","aVisibleColumns","oInternalBindingContext","getBindingContext","sInternalPath","getPath","index","setProperty","_fetchPropertiesForEntity","sEntityTypePath","oAppComponent","sBindingPath","getEntitySetPath","aFetchedProperties","oFR","CommonUtils","getFilterRestrictionsByPath","aNonFilterableProps","NonFilterableProperties","Promise","resolve","aColumns","oPropertyInfo","maxConditions","isMultiValue","Error","_getCachedOrFetchPropertiesForEntity","entityTypePath","fetchedProperties","getCachedProperties","subFetchedProperties","setCachedProperties","setNoDataInformation","illustratedMessageInformation","noDataAggregation","getNoData","isA","currentIllustratedMessage","setTitle","title","setDescription","description","setIllustrationType","illustrationType","setIllustrationSize","illustrationSize","illustratedMessage","IllustratedMessage","setNoData","setTableNoDataIllustratedMessage","bindingInfo","tableFilterInfo","TableUtils","getAllFilterInfo","resourceModel","getResourceModel","suffixResourceKey","substring","illustratedInformation","getNoDataIllustratedMessageWithFilters","getQuickFilter","getText","IllustratedMessageType","NoSearchResults","filterAssociation","getFilter","hasFilterOrSearch","search","filters","test","NoData","getTargetView","getViewData","liveMode","modeForNoDataMessage","currentNoData","handleTableDataReceived","oInternalModelContext","oBinding","getRowBinding","bDataReceivedAttached","attachDataReceived","setTimeout","aSelectedContexts","getSelectedContexts","oActionOperationAvailableMap","ActionRuntime","setActionEnablement","DeleteHelper","updateDeleteInfoForSelectedContexts","setUpEmptyRows","_updateAvailableCards","setOptimisticBatchPromiseForModel","controller","getAppComponent","setOptimisticBatchEnablerPromise","PromiseKeeper","setOptimisticBatchForModel","enableOptimisticBatchMode","filtersPropertiesAsPotentiallySensitiveDataOrDateType","isFilterEligibleForOptimisticBatch","_getFilterBarControl","getOptimisticBatchEnablerPromise","dataModel","isOptimisticBatchHasToBeEnabled","getShellServices","isFlpOptimisticBatchPluginLoaded","getOptimisticBatchEnabler","isOptimisticBatchDisabled","optimisticBatchEnablerPromiseKeeper","setOptimisticBatchEnabler","promise","rebind","oBindingInfo","bIsSuspended","TableRuntime","clearSelection","apply","onTableBound","whenBound","oError","fetchProperties","preInit","fastCreationRow","getCreationRow","setBindingContext","updateBindingInfo","internalBindingContext","_handleSortersOnCurrenciesOrUoM","_internalUpdateBindingInfo","_handleRecommendationOutputFields","_handleFiltersForExternalID","fireEvent","collectionBindingInfo","CollectionBindingInfoAPI","context","TableHelper","enableFastCreationRow","e","sorters","sorter","newSortersToBeApplied","tableProperties","tableProperty","unitProperty","Sorter","isDescending","getFilters","updateFiltersForExternalID","getController","recommendations","isRecommendationEnabled","tableDef","recommendationOutputProperties","getSideEffectsService","getRecommendationOutputFields","annotation","entityTypeName","parameters","$select","cards","collectAvailableCards","collaborationManager","CollaborationManager","cardObject","updateCards","parentAppId","getId","getCollaborationManagerService","addCardsToCollaborationManager","shareAvailableCards","getInResultPropertyKeys","tableDefinition","requestAtLeast","updateBinding","binding","needManualRefresh","view","manualUpdatePropertyKey","pendingManualUpdate","newSorters","JSON","stringify","viewData","oldFilters","previousSorters","filterNotChanged","deepEqual","getQueryOptionsFromParameters","$search","LRMultiViewEnabled","views","setTableBindingInfo","setDownloadUrl","requestRefresh","getGroupId","finally","control","_computeRowBindingInfoFromTemplate","rowBindingInfo","getTableTemplateBindingInfo","$$getKeepAliveContext","collectionPath","internalModel","keptAliveLists","suspended","oFilter","oFilterInfo","Filter","and","bindingPath","oDataStateIndicator","getDataStateIndicator","isFiltering","updateBindingInfoWithSearchQuery","addFilterOnActiveEntities","_templateCustomColumnFragment","modifier","tableId","tableContext","tableCollectionModel","owner","getOwnerComponent","columnModel","JSONModel","oThis","id","preprocessorSettings","bindingContexts","this","column","collection","models","customColumn","DOMParser","parseFromString","jsx","renderAsXML","getCustomColumnTemplate","templateControlFragment","firstElementChild","oItem","destroy","filterInfo","filter","normalizeSearchTerm","payload","getPayload","filterOnActiveEntities","filterOnActive","operator","value1","_templateSlotColumnFragment","slotColumnsXML","getSlotColumn","slotXML","getElementsByTagName","oTemplate","nodeName","replaceWith","remove","resultXML","XMLPreprocessor","process","getPreprocessorContext","targets","Fragment","load","definition","dataType","ExcelFormat","getExcelDatefromJSDate","getExcelDateTimefromJSDateTime","getExcelTimefromJSTime","_getVHRelevantFields","sMetadataPath","aFields","oDataFieldData","$kind","oValue","iIndex","getNavigationPath","_setDraftIndicatorOnVisibleColumn","aColumnsWithDraftIndicator","sAddVisibleColumnName","sVisibleColumnName","bFoundColumnVisibleWithDraft","sColumnNameWithDraftIndicator","i","j","removeItem","oPropertyInfoName","mPropertyBag","doRemoveItem","oModifier","sDataProperty","insertAggregation","_setDraftIndicatorStatus","_getMetaModel","_getGroupId","sRetrievedGroupId","_fnTemplateValueHelp","fnTemplateValueHelp","bValueHelpRequired","bValueHelpExists","_insertAggregation","oValueHelp","addItem","sPropertyInfoName","sTableId","warning","sPath","getCustomDataWithModifier","oTableContext","getCurrentPageView","enableAnalytics","getComputedColumn","sGroupId","oInfo","oPropertyContext","aVHProperties","oParameters","sValueHelpType","oControl","metaPath","sFragmentName","requestGroupId","oPreprocessorSettings","contextPath","message","fnTemplateFragment","oInPropertyInfo","oView","bDisplayMode","sTableTypeCustomData","sOnChangeCustomData","sCreationModeCustomData","all","aCustomData","enableAutoColumnWidth","readOnly","tableType","onChange","navigationPropertyPath","creationMode","widthIncludingColumnHeader","entitySet","computedColumnXML","getColumnTemplate","isCompactType","sPropertyName","mParameters","aResults","isValueHelpRequired","doesValueHelpExist","getFilterDelegate","FilterBarDelegate","oParentControl","replace","getTypeMap","formatGroupHeader","formatInfos","formatInfo","obj","externalFormat","ValueFormatter","formatWithBrackets"],"sourceRoot":".","sources":["TableDelegate.ts"],"sourcesContent":["import type { DataFieldAbstractTypes, DataFieldForAnnotation, FieldGroupType } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport deepEqual from \"sap/base/util/deepEqual\";\nimport deepExtend from \"sap/base/util/deepExtend\";\nimport { isConstant } from \"sap/fe/base/BindingToolkit\";\nimport type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport jsx from \"sap/fe/base/jsx-runtime/jsx\";\nimport ActionRuntime from \"sap/fe/core/ActionRuntime\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport type { FEView } from \"sap/fe/core/BaseController\";\nimport type { BaseTreeModifier } from \"sap/fe/core/CommonUtils\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type TemplateComponent from \"sap/fe/core/TemplateComponent\";\nimport type { ListReportManifestSettings } from \"sap/fe/core/converters/ManifestSettings\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { WrappedCard } from \"sap/fe/core/services/CollaborationManagerServiceFactory\";\n\nimport CollaborationManager from \"sap/fe/core/controllerextensions/cards/CollaborationManager\";\nimport type {\n\tAnnotationTableColumn,\n\tColumnExportSettings,\n\tComputedTableColumn,\n\tCustomBasedTableColumn,\n\tPropertyTypeConfig,\n\tTableColumn,\n\tTableType,\n\tVisualSettings\n} from \"sap/fe/core/converters/controls/Common/Table\";\nimport type { CustomElement } from \"sap/fe/core/converters/helpers/ConfigurableObject\";\nimport ValueFormatter from \"sap/fe/core/formatters/ValueFormatter\";\nimport DeleteHelper from \"sap/fe/core/helpers/DeleteHelper\";\nimport ExcelFormat from \"sap/fe/core/helpers/ExcelFormatHelper\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport PromiseKeeper from \"sap/fe/core/helpers/PromiseKeeper\";\nimport { getLocalizedText, getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport SizeHelper from \"sap/fe/core/helpers/SizeHelper\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { isPathFilterable } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { isTypeFilterable } from \"sap/fe/core/type/EDM\";\nimport type { CollectionBindingInfo } from \"sap/fe/macros/CollectionBindingInfo\";\nimport CollectionBindingInfoAPI from \"sap/fe/macros/CollectionBindingInfo\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport type { PropertyInfo } from \"sap/fe/macros/DelegateUtil\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport type FilterBar from \"sap/fe/macros/controls/FilterBar\";\nimport FilterBarDelegate from \"sap/fe/macros/filterBar/FilterBarDelegate\";\nimport { getColumnTemplate, getComputedColumn, getCustomColumnTemplate, getSlotColumn } from \"sap/fe/macros/table/MdcTableTemplate\";\nimport type TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport TableHelper from \"sap/fe/macros/table/TableHelper\";\nimport TableRuntime from \"sap/fe/macros/table/TableRuntime\";\nimport TableSizeHelper from \"sap/fe/macros/table/TableSizeHelper\";\nimport type { InternalBindingInfo } from \"sap/fe/macros/table/Utils\";\nimport TableUtils from \"sap/fe/macros/table/Utils\";\nimport type ListReportController from \"sap/fe/templates/ListReport/ListReportController.controller\";\nimport type { $IllustratedMessageSettings } from \"sap/m/IllustratedMessage\";\nimport IllustratedMessage from \"sap/m/IllustratedMessage\";\nimport IllustratedMessageType from \"sap/m/IllustratedMessageType\";\nimport type { BaseAggregationBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport type UI5Element from \"sap/ui/core/Element\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport type View from \"sap/ui/core/mvc/View\";\nimport XMLPreprocessor from \"sap/ui/core/util/XMLPreprocessor\";\nimport type { JsControlTreeModifier } from \"sap/ui/core/util/reflection\";\nimport type Control from \"sap/ui/mdc/Control\";\nimport type { default as MDCTable, default as Table } from \"sap/ui/mdc/Table\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\nimport TableDelegateBase from \"sap/ui/mdc/odata/v4/TableDelegate\";\nimport TypeMap from \"sap/ui/mdc/odata/v4/TypeMap\";\nimport type Context from \"sap/ui/model/Context\";\nimport Filter from \"sap/ui/model/Filter\";\nimport type MetaModel from \"sap/ui/model/MetaModel\";\nimport type Model from \"sap/ui/model/Model\";\nimport Sorter from \"sap/ui/model/Sorter\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type { default as ODataV4Context, default as v4Context } from \"sap/ui/model/odata/v4/Context\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\nconst SEMANTICKEY_HAS_DRAFTINDICATOR = \"/semanticKeyHasDraftIndicator\";\nconst SEARCH_HAS_BEEN_FIRED = \"searchFired\";\nconst COLUMN_HAS_BEEN_ADDED = \"columnAdded\";\nconst PREVIOUS_SORTERS = \"previousSorters\";\n\n/**\n * Helper class for sap.ui.mdc.Table.\n * <h3><b>Note:</b></h3>\n * The class is experimental and the API and the behavior are not finalized. This class is not intended for productive usage.\n * @author SAP SE\n * @private\n * @experimental\n * @since 1.69.0\n * @alias sap.fe.macros.TableDelegate\n */\nexport default Object.assign({}, TableDelegateBase, {\n\tapiVersion: 2,\n\t/**\n\t * This function calculates the width of a FieldGroup column.\n\t * The width of the FieldGroup is the width of the widest property contained in the FieldGroup (including the label if showDataFieldsLabel is true)\n\t * The result of this calculation is stored in the visualSettings.widthCalculation.minWidth property, which is used by the MDCtable.\n\t * @param oTable Instance of the MDCtable\n\t * @param oProperty Current property\n\t * @param aProperties Array of properties\n\t * @private\n\t * @alias sap.fe.macros.TableDelegate\n\t */\n\t_computeVisualSettingsForFieldGroup: function (oTable: Table, oProperty: PropertyInfo, aProperties: PropertyInfo[]) {\n\t\tif (oProperty.name.indexOf(\"DataFieldForAnnotation::FieldGroup::\") === 0) {\n\t\t\tconst oColumn = oTable.getColumns().find((col) => {\n\t\t\t\treturn col.getPropertyKey() === oProperty.name;\n\t\t\t});\n\t\t\tconst bShowDataFieldsLabel = oColumn ? oColumn.data(\"showDataFieldsLabel\") === \"true\" : false;\n\t\t\tconst oMetaModel = (oTable.getModel() as ODataModel).getMetaModel();\n\t\t\tconst involvedDataModelObjects = getInvolvedDataModelObjects(oMetaModel.getContext(oProperty.metadataPath!));\n\t\t\tconst convertedMetaData = involvedDataModelObjects.convertedTypes;\n\t\t\tconst oDataField = involvedDataModelObjects.targetObject as DataFieldForAnnotation;\n\t\t\tconst oFieldGroup = oDataField.Target.$target as FieldGroupType;\n\t\t\tconst aFieldWidth: number[] = [];\n\t\t\toFieldGroup.Data.forEach(function (oData: DataFieldAbstractTypes) {\n\t\t\t\tlet oDataFieldWidth: { labelWidth: number; propertyWidth: number };\n\t\t\t\tswitch (oData.$Type) {\n\t\t\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\":\n\t\t\t\t\t\toDataFieldWidth = TableSizeHelper.getWidthForDataFieldForAnnotation(\n\t\t\t\t\t\t\toData,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\taProperties,\n\t\t\t\t\t\t\tconvertedMetaData,\n\t\t\t\t\t\t\tbShowDataFieldsLabel\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"com.sap.vocabularies.UI.v1.DataField\":\n\t\t\t\t\t\toDataFieldWidth = TableSizeHelper.getWidthForDataField(\n\t\t\t\t\t\t\toData,\n\t\t\t\t\t\t\tbShowDataFieldsLabel,\n\t\t\t\t\t\t\taProperties,\n\t\t\t\t\t\t\tconvertedMetaData,\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForAction\":\n\t\t\t\t\t\toDataFieldWidth = {\n\t\t\t\t\t\t\tlabelWidth: 0,\n\t\t\t\t\t\t\tpropertyWidth: SizeHelper.getButtonWidth(oData.Label?.toString())\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t}\n\t\t\t\tif (oDataFieldWidth!) {\n\t\t\t\t\taFieldWidth.push(oDataFieldWidth.labelWidth + oDataFieldWidth.propertyWidth);\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst nWidest = aFieldWidth.reduce(function (acc: number, value: number) {\n\t\t\t\treturn Math.max(acc, value);\n\t\t\t}, 0);\n\t\t\toProperty.visualSettings = deepExtend(oProperty.visualSettings as object, {\n\t\t\t\twidthCalculation: {\n\t\t\t\t\tverticalArrangement: true,\n\t\t\t\t\tminWidth: Math.ceil(nWidest)\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t_computeVisualSettingsForPropertyWithValueHelp: function (table: Table, property: PropertyInfo) {\n\t\tconst tableAPI = table.getParent() as TableAPI;\n\t\tif (!property.propertyInfos) {\n\t\t\tconst metaModel = (table.getModel() as ODataModel).getMetaModel();\n\t\t\tif (property.metadataPath && metaModel) {\n\t\t\t\tconst dataField = metaModel.getObject(`${property.metadataPath}@`);\n\t\t\t\tif (dataField && dataField[\"@com.sap.vocabularies.Common.v1.ValueList\"]) {\n\t\t\t\t\tproperty.visualSettings = deepExtend(property.visualSettings || {}, {\n\t\t\t\t\t\twidthCalculation: {\n\t\t\t\t\t\t\tgap: tableAPI.getProperty(\"readOnly\") ? 0 : 4\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_computeVisualSettingsForPropertyWithUnit: function (\n\t\toTable: Table,\n\t\toProperty: PropertyInfo,\n\t\toUnit?: string,\n\t\toUnitText?: string,\n\t\toTimezoneText?: string\n\t) {\n\t\tconst oTableAPI: EnhanceWithUI5<TableAPI> | null = oTable ? (oTable.getParent() as EnhanceWithUI5<TableAPI>) : null;\n\t\t// update gap for properties with string unit\n\t\tconst sUnitText = oUnitText || oTimezoneText;\n\t\tif (sUnitText) {\n\t\t\toProperty.visualSettings = deepExtend(oProperty.visualSettings as VisualSettings, {\n\t\t\t\twidthCalculation: {\n\t\t\t\t\tgap: Math.ceil(SizeHelper.getButtonWidth(sUnitText))\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (oUnit) {\n\t\t\toProperty.visualSettings = deepExtend(oProperty.visualSettings as VisualSettings, {\n\t\t\t\twidthCalculation: {\n\t\t\t\t\t// For properties with unit, a gap needs to be added to properly render the column width on edit mode\n\t\t\t\t\tgap: oTableAPI && oTableAPI.getReadOnly() ? 0 : 6\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t_computeLabel: function (property: PropertyInfo, labelMap: { [label: string]: PropertyInfo[] }) {\n\t\tif (property.label) {\n\t\t\tconst propertiesWithSameLabel = labelMap[property.label];\n\t\t\t// For navigation properties used a texts, exclude them in case text arrangement is set to TextOnly\n\t\t\tconst isPropertyUsedAsTextOnlyProperty = propertiesWithSameLabel?.some(\n\t\t\t\t(prop) => prop.text === property.path && prop.mode === \"Description\"\n\t\t\t);\n\t\t\tif (\n\t\t\t\tpropertiesWithSameLabel?.length > 1 &&\n\t\t\t\tproperty.path?.includes(\"/\") &&\n\t\t\t\tproperty.additionalLabels &&\n\t\t\t\t!isPropertyUsedAsTextOnlyProperty\n\t\t\t) {\n\t\t\t\tproperty.label = property.label + \" (\" + property.additionalLabels.join(\" / \") + \")\";\n\t\t\t}\n\t\t\tdelete property.additionalLabels;\n\t\t}\n\t},\n\t//Update VisualSetting for columnWidth calculation and labels on navigation properties\n\t_updatePropertyInfo: function (table: Table, properties: PropertyInfo[]) {\n\t\tconst labelMap: { [label: string]: PropertyInfo[] } = {};\n\t\t// Check available p13n modes\n\t\tconst p13nMode = table.getP13nMode();\n\t\tproperties.forEach((property: PropertyInfo) => {\n\t\t\tif (!property.propertyInfos && property.label) {\n\t\t\t\t// Only for non-complex properties\n\t\t\t\tif (\n\t\t\t\t\t(p13nMode?.includes(\"Sort\") && property.sortable) ||\n\t\t\t\t\t(p13nMode?.includes(\"Filter\") && property.filterable) ||\n\t\t\t\t\t(p13nMode?.includes(\"Group\") && property.groupable)\n\t\t\t\t) {\n\t\t\t\t\tlabelMap[property.label] =\n\t\t\t\t\t\tlabelMap[property.label] !== undefined ? labelMap[property.label].concat([property]) : [property];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tproperties.forEach((property: PropertyInfo) => {\n\t\t\tthis._computeVisualSettingsForFieldGroup(table, property, properties);\n\t\t\tthis._computeVisualSettingsForPropertyWithValueHelp(table, property);\n\t\t\t// bcp: 2270003577\n\t\t\t// Some columns (eg: custom columns) have no typeConfig property.\n\t\t\t// initializing it prevents an exception throw\n\t\t\tproperty.typeConfig = deepExtend(property.typeConfig!, {}) as PropertyTypeConfig;\n\t\t\tthis._computeLabel(property, labelMap);\n\t\t});\n\t\t// Add the $editState property\n\t\tproperties.push({\n\t\t\tname: \"$editState\",\n\t\t\tpath: \"$editState\",\n\t\t\tgroupLabel: \"\",\n\t\t\tgroup: \"\",\n\t\t\ttypeConfig: TypeMap.getTypeConfig(\"sap.ui.model.odata.type.String\", {}, {}),\n\t\t\tvisible: false,\n\t\t\tgroupable: false,\n\t\t\tsortable: false,\n\t\t\tfilterable: false\n\t\t});\n\t\treturn properties;\n\t},\n\n\tgetColumnsFor: function (table: Table): TableColumn[] {\n\t\treturn (table.getParent() as TableAPI).getTableDefinition().columns;\n\t},\n\n\t/**\n\t * Returns the export capabilities for the given sap.ui.mdc.Table instance.\n\t * @param oTable Instance of the table\n\t * @returns Promise representing the export capabilities of the table instance\n\t */\n\tfetchExportCapabilities: async function (oTable: Table): Promise<{ XLSX?: unknown; PDF?: unknown }> {\n\t\tconst oCapabilities: { XLSX?: unknown; PDF?: unknown } = { XLSX: {} };\n\t\tlet oModel!: ODataModel;\n\t\treturn DelegateUtil.fetchModel(oTable)\n\t\t\t.then(function (model: Model) {\n\t\t\t\toModel = model as ODataModel;\n\t\t\t\treturn oModel.getMetaModel().getObject(\"/$EntityContainer@Org.OData.Capabilities.V1.SupportedFormats\");\n\t\t\t})\n\t\t\t.then(function (aSupportedFormats: string[] | undefined) {\n\t\t\t\tconst aLowerFormats = (aSupportedFormats || []).map((element) => {\n\t\t\t\t\treturn element.toLowerCase();\n\t\t\t\t});\n\t\t\t\tif (aLowerFormats.includes(\"application/pdf\")) {\n\t\t\t\t\treturn oModel.getMetaModel().getObject(\"/$EntityContainer@com.sap.vocabularies.PDF.v1.Features\");\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t})\n\t\t\t.then(function (oAnnotation: unknown) {\n\t\t\t\tif (oAnnotation) {\n\t\t\t\t\toCapabilities[\"PDF\"] = Object.assign({}, oAnnotation);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\tLog.error(`An error occurs while computing export capabilities: ${err}`);\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\treturn oCapabilities;\n\t\t\t});\n\t},\n\n\t/**\n\t * Filtering on navigation properties that are not part of the LineItem annotation nor of the custom columns is forbidden.\n\t * @param columnInfo\n\t * @param metaModel\n\t * @param table\n\t * @returns Boolean true if filtering is allowed, false otherwise\n\t */\n\t_isFilterableNavigationProperty: function (\n\t\tcolumnInfo: AnnotationTableColumn,\n\t\tcolumnDataModelObjectPath: DataModelObjectPath<unknown>\n\t): boolean {\n\t\tconst isFilterable = isPathFilterable(columnDataModelObjectPath);\n\t\treturn (\n\t\t\t!columnInfo.relativePath.includes(\"/\") ||\n\t\t\t((columnInfo.isPartOfLineItem === true || columnInfo.isPartOfCustomColumn === true) &&\n\t\t\t\t!(isConstant(isFilterable) && isFilterable.value === false))\n\t\t);\n\t},\n\n\t_fetchPropertyInfo: function (metaModel: MetaModel, columnInfo: AnnotationTableColumn, table: Table, appComponent: AppComponent) {\n\t\tconst sAbsoluteNavigationPath = columnInfo.annotationPath,\n\t\t\toDataField = metaModel.getObject(sAbsoluteNavigationPath),\n\t\t\toNavigationContext = metaModel.createBindingContext(sAbsoluteNavigationPath) as Context,\n\t\t\toTypeConfig =\n\t\t\t\tcolumnInfo.typeConfig?.className && isTypeFilterable(columnInfo.typeConfig.className)\n\t\t\t\t\t? TypeMap.getTypeConfig(\n\t\t\t\t\t\t\tcolumnInfo.typeConfig.className,\n\t\t\t\t\t\t\tcolumnInfo.typeConfig.formatOptions,\n\t\t\t\t\t\t\tcolumnInfo.typeConfig.constraints\n\t\t\t\t\t  )\n\t\t\t\t\t: {},\n\t\t\tbFilterable = CommonHelper.isPropertyFilterable(oNavigationContext, oDataField),\n\t\t\tisComplexType =\n\t\t\t\tcolumnInfo.typeConfig && columnInfo.typeConfig.className && columnInfo.typeConfig.className?.indexOf(\"Edm.\") !== 0,\n\t\t\tbIsAnalyticalTable = DelegateUtil.getCustomData(table, \"enableAnalytics\") === \"true\",\n\t\t\tlabel = getLocalizedText(columnInfo.label ?? \"\", appComponent ?? table);\n\t\tconst tooltip = getLocalizedText(columnInfo.tooltip ?? \"\", appComponent ?? table);\n\n\t\tconst propertyInfo: PropertyInfo = {\n\t\t\tname: columnInfo.name,\n\t\t\tmetadataPath: sAbsoluteNavigationPath,\n\t\t\tgroupLabel: columnInfo.groupLabel,\n\t\t\tgroup: columnInfo.group,\n\t\t\tlabel: label,\n\t\t\ttooltip: tooltip,\n\t\t\ttypeConfig: oTypeConfig as PropertyTypeConfig,\n\t\t\tformatOptions:\n\t\t\t\tcolumnInfo.typeConfig?.baseType === \"Edm.DateTimeOffset\" ? { style: \"medium/short\" } : columnInfo.typeConfig?.formatOptions,\n\t\t\tvisible: columnInfo.availability !== \"Hidden\" && !isComplexType,\n\t\t\texportSettings: this._setPropertyInfoExportSettings(columnInfo.exportSettings, columnInfo),\n\t\t\tunit: columnInfo.unit\n\t\t};\n\t\tif (propertyInfo.exportSettings?.template) {\n\t\t\tpropertyInfo.clipboardSettings = { template: propertyInfo.exportSettings.template };\n\t\t\t// if I set this clipBoardSettings the copy provider extract the data according to the template in the html property and it is properly copied in excel\n\t\t\t// but when we copy elsewhere we only get the raw data and not the templated data\n\t\t}\n\n\t\t// Set visualSettings only if it exists\n\t\tif (columnInfo.visualSettings && Object.keys(columnInfo.visualSettings).length > 0) {\n\t\t\tpropertyInfo.visualSettings = columnInfo.visualSettings;\n\t\t}\n\n\t\tif (columnInfo.exportDataPointTargetValue) {\n\t\t\tpropertyInfo.exportDataPointTargetValue = columnInfo.exportDataPointTargetValue;\n\t\t}\n\n\t\t// MDC expects  'propertyInfos' only for complex properties.\n\t\t// An empty array throws validation error and undefined value is unhandled.\n\t\tif (columnInfo.propertyInfos?.length) {\n\t\t\tpropertyInfo.propertyInfos = columnInfo.propertyInfos;\n\t\t} else {\n\t\t\t// Add properties which are supported only by simple PropertyInfos.\n\n\t\t\t//get the DataModelObjectPath for the column\n\t\t\tconst columnDataModelObjectPath = getInvolvedDataModelObjects(\n\t\t\t\tmetaModel.getContext(columnInfo.annotationPath),\n\t\t\t\tmetaModel.getContext(DelegateUtil.getCustomData(table, \"metaPath\")!)\n\t\t\t);\n\t\t\tpropertyInfo.path = columnInfo.relativePath;\n\t\t\t// TODO with the new complex property info, a lot of \"Description\" fields are added as filter/sort fields\n\t\t\tpropertyInfo.sortable = columnInfo.sortable;\n\t\t\tif (bIsAnalyticalTable) {\n\t\t\t\tthis._updateAnalyticalPropertyInfoAttributes(propertyInfo, columnInfo);\n\t\t\t}\n\t\t\tpropertyInfo.filterable =\n\t\t\t\tcolumnInfo.filterable !== false &&\n\t\t\t\t!!bFilterable &&\n\t\t\t\tthis._isFilterableNavigationProperty(columnInfo, columnDataModelObjectPath);\n\t\t\tpropertyInfo.isKey = columnInfo.isKey;\n\t\t\tpropertyInfo.groupable = columnInfo.isGroupable;\n\t\t\tif (columnInfo.textArrangement) {\n\t\t\t\tconst descriptionColumn = (this.getColumnsFor(table) as AnnotationTableColumn[]).find(function (oCol) {\n\t\t\t\t\treturn oCol.name === columnInfo.textArrangement?.textProperty;\n\t\t\t\t});\n\t\t\t\tif (descriptionColumn) {\n\t\t\t\t\tpropertyInfo.mode = columnInfo.textArrangement.mode;\n\t\t\t\t\tpropertyInfo.valueProperty = columnInfo.relativePath;\n\t\t\t\t\tpropertyInfo.descriptionProperty = descriptionColumn.relativePath;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpropertyInfo.text = columnInfo.textArrangement?.textProperty;\n\t\t\tpropertyInfo.caseSensitive = columnInfo.caseSensitive;\n\t\t\tif (columnInfo.additionalLabels) {\n\t\t\t\tpropertyInfo.additionalLabels = columnInfo.additionalLabels.map((additionalLabel: string) => {\n\t\t\t\t\treturn getLocalizedText(additionalLabel, appComponent || table);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis._computeVisualSettingsForPropertyWithUnit(table, propertyInfo, columnInfo.unit, columnInfo.unitText, columnInfo.timezoneText);\n\n\t\treturn propertyInfo;\n\t},\n\n\t/**\n\t * Extend the export settings based on the column info.\n\t * @param exportSettings The export settings to be extended\n\t * @param columnInfo The columnInfo object\n\t * @returns The extended export settings\n\t */\n\t_setPropertyInfoExportSettings: function (\n\t\texportSettings: ColumnExportSettings | undefined | null,\n\t\tcolumnInfo: AnnotationTableColumn\n\t): ColumnExportSettings | undefined | null {\n\t\tconst exportFormat = this._getExportFormat(columnInfo.typeConfig?.className);\n\t\tif (exportFormat && exportSettings) {\n\t\t\texportSettings.format = exportFormat;\n\t\t}\n\t\treturn exportSettings;\n\t},\n\n\t_updateAnalyticalPropertyInfoAttributes(propertyInfo: PropertyInfo, columnInfo: AnnotationTableColumn) {\n\t\tif (columnInfo.aggregatable) {\n\t\t\tpropertyInfo.aggregatable = columnInfo.aggregatable;\n\t\t}\n\t\tif (columnInfo.extension) {\n\t\t\tpropertyInfo.extension = columnInfo.extension;\n\t\t}\n\t},\n\n\t_fetchComputedPropertyInfo: function (columnInfo: ComputedTableColumn, table: Table) {\n\t\tlet label = \"\";\n\t\tlabel = getLocalizedText(columnInfo.label, table); // Todo: To be removed once MDC provides translation support\n\t\tconst propertyInfo: PropertyInfo = {\n\t\t\tname: columnInfo.name,\n\t\t\tlabel: label.toString(),\n\t\t\ttype: \"Edm.String\",\n\t\t\tvisible: columnInfo.availability !== \"Hidden\",\n\t\t\tfilterable: false,\n\t\t\tsortable: false,\n\t\t\tgroupable: false,\n\t\t\texportSettings: null,\n\t\t\tclipboardSettings: null\n\t\t};\n\t\tif (columnInfo.propertyInfos !== undefined && columnInfo.propertyInfos.length > 0) {\n\t\t\tpropertyInfo.propertyInfos = columnInfo.propertyInfos;\n\t\t}\n\t\treturn propertyInfo;\n\t},\n\n\t_fetchCustomPropertyInfo: function (columnInfo: CustomBasedTableColumn, table: Table, appComponent: AppComponent) {\n\t\tlet label;\n\t\tif (columnInfo.header) {\n\t\t\tif (columnInfo.header.startsWith(\"{metaModel>\")) {\n\t\t\t\tlabel = ModelHelper.fetchTextFromMetaModel(columnInfo.header, undefined, (table.getModel() as ODataModel).getMetaModel());\n\t\t\t} else {\n\t\t\t\tlabel = getLocalizedText(columnInfo.header, appComponent); // Todo: To be removed once MDC provides translation support\n\t\t\t}\n\t\t}\n\t\tconst propertyInfo: PropertyInfo = {\n\t\t\tname: columnInfo.name,\n\t\t\tgroupLabel: undefined,\n\t\t\tgroup: undefined,\n\t\t\tlabel: label ?? \"\",\n\t\t\ttype: \"Edm.String\", // TBD\n\t\t\tvisible: columnInfo.availability !== \"Hidden\",\n\t\t\texportSettings: columnInfo.exportSettings,\n\t\t\tvisualSettings: columnInfo.visualSettings\n\t\t};\n\n\t\t// MDC expects 'propertyInfos' only for complex properties.\n\t\t// An empty array throws validation error and undefined value is unhandled.\n\t\tif (columnInfo.propertyInfos && columnInfo.propertyInfos.length) {\n\t\t\tpropertyInfo.propertyInfos = columnInfo.propertyInfos;\n\t\t} else {\n\t\t\t// Add properties which are supported only by simple PropertyInfos.\n\t\t\tpropertyInfo.path = columnInfo.name;\n\t\t\tpropertyInfo.sortable = false;\n\t\t\tpropertyInfo.filterable = false;\n\t\t}\n\t\treturn propertyInfo;\n\t},\n\t_bColumnHasPropertyWithDraftIndicator: function (oColumnInfo: TableColumn): boolean {\n\t\treturn !!(\n\t\t\t(oColumnInfo.formatOptions && oColumnInfo.formatOptions.hasDraftIndicator) ||\n\t\t\t(oColumnInfo.formatOptions && oColumnInfo.formatOptions.fieldGroupDraftIndicatorPropertyPath)\n\t\t);\n\t},\n\t_updateDraftIndicatorModel: function (_oTable: Table, _oColumnInfo: TableColumn): void {\n\t\tconst aVisibleColumns = _oTable.getColumns();\n\t\tconst oInternalBindingContext = _oTable.getBindingContext(\"internal\");\n\t\tconst sInternalPath = oInternalBindingContext && oInternalBindingContext.getPath();\n\t\tif (aVisibleColumns && oInternalBindingContext) {\n\t\t\tfor (const index in aVisibleColumns) {\n\t\t\t\tif (\n\t\t\t\t\tthis._bColumnHasPropertyWithDraftIndicator(_oColumnInfo) &&\n\t\t\t\t\t_oColumnInfo.name === aVisibleColumns[index].getPropertyKey()\n\t\t\t\t) {\n\t\t\t\t\tif (oInternalBindingContext.getProperty(sInternalPath + SEMANTICKEY_HAS_DRAFTINDICATOR) === undefined) {\n\t\t\t\t\t\toInternalBindingContext.setProperty(sInternalPath + SEMANTICKEY_HAS_DRAFTINDICATOR, _oColumnInfo.name);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t_fetchPropertiesForEntity: async function (\n\t\toTable: Table,\n\t\tsEntityTypePath: string,\n\t\toMetaModel: ODataMetaModel,\n\t\toAppComponent: AppComponent\n\t): Promise<PropertyInfo[]> {\n\t\t// when fetching properties, this binding context is needed - so lets create it only once and use if for all properties/data-fields/line-items\n\t\tconst sBindingPath = ModelHelper.getEntitySetPath(sEntityTypePath);\n\t\tlet aFetchedProperties: PropertyInfo[] = [];\n\t\tconst oFR = CommonUtils.getFilterRestrictionsByPath(sBindingPath, oMetaModel);\n\t\tconst aNonFilterableProps = oFR.NonFilterableProperties;\n\t\treturn Promise.resolve(this.getColumnsFor(oTable))\n\t\t\t.then((aColumns: TableColumn[]) => {\n\t\t\t\t// DraftAdministrativeData does not work via 'entitySet/$NavigationPropertyBinding/DraftAdministrativeData'\n\t\t\t\tif (aColumns) {\n\t\t\t\t\tlet oPropertyInfo;\n\t\t\t\t\taColumns.forEach((oColumnInfo) => {\n\t\t\t\t\t\tthis._updateDraftIndicatorModel(oTable, oColumnInfo);\n\t\t\t\t\t\tswitch (oColumnInfo.type) {\n\t\t\t\t\t\t\tcase \"Annotation\":\n\t\t\t\t\t\t\t\toPropertyInfo = this._fetchPropertyInfo(\n\t\t\t\t\t\t\t\t\toMetaModel,\n\t\t\t\t\t\t\t\t\toColumnInfo as AnnotationTableColumn,\n\t\t\t\t\t\t\t\t\toTable,\n\t\t\t\t\t\t\t\t\toAppComponent\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (oPropertyInfo && !aNonFilterableProps.includes(oPropertyInfo.name)) {\n\t\t\t\t\t\t\t\t\toPropertyInfo.maxConditions = DelegateUtil.isMultiValue(oPropertyInfo) ? -1 : 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Computed\":\n\t\t\t\t\t\t\t\toPropertyInfo = this._fetchComputedPropertyInfo(oColumnInfo as ComputedTableColumn, oTable);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Slot\":\n\t\t\t\t\t\t\tcase \"Default\":\n\t\t\t\t\t\t\t\toPropertyInfo = this._fetchCustomPropertyInfo(oColumnInfo as CustomBasedTableColumn, oTable, oAppComponent);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tthrow new Error(`unhandled switch case ${oColumnInfo.type}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\taFetchedProperties.push(oPropertyInfo);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\taFetchedProperties = this._updatePropertyInfo(oTable, aFetchedProperties);\n\t\t\t\treturn;\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\tLog.error(`An error occurs while updating fetched properties: ${err as string}`);\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\treturn aFetchedProperties;\n\t\t\t});\n\t},\n\n\t_getCachedOrFetchPropertiesForEntity: async function (\n\t\ttable: Table,\n\t\tentityTypePath: string,\n\t\tmetaModel: ODataMetaModel,\n\t\tappComponent: AppComponent\n\t): Promise<PropertyInfo[]> {\n\t\tconst fetchedProperties = DelegateUtil.getCachedProperties(table);\n\n\t\tif (fetchedProperties) {\n\t\t\treturn Promise.resolve(fetchedProperties);\n\t\t}\n\t\treturn this._fetchPropertiesForEntity(table, entityTypePath, metaModel, appComponent).then(function (\n\t\t\tsubFetchedProperties: PropertyInfo[]\n\t\t) {\n\t\t\tDelegateUtil.setCachedProperties(table, subFetchedProperties);\n\t\t\treturn subFetchedProperties;\n\t\t});\n\t},\n\tsetNoDataInformation: function (table: Table, illustratedMessageInformation: $IllustratedMessageSettings): void {\n\t\tconst noDataAggregation = table.getNoData();\n\t\tif (typeof noDataAggregation != \"string\" && (noDataAggregation as Control)?.isA(\"sap.m.IllustratedMessage\")) {\n\t\t\tconst currentIllustratedMessage = noDataAggregation as IllustratedMessage;\n\t\t\t// We override the current values of the IllustratedMessage\n\t\t\tcurrentIllustratedMessage.setTitle(illustratedMessageInformation.title);\n\t\t\tcurrentIllustratedMessage.setDescription(illustratedMessageInformation.description);\n\t\t\tcurrentIllustratedMessage.setIllustrationType(illustratedMessageInformation.illustrationType);\n\t\t\tcurrentIllustratedMessage.setIllustrationSize(illustratedMessageInformation.illustrationSize);\n\t\t} else {\n\t\t\tconst illustratedMessage = new IllustratedMessage({\n\t\t\t\t...illustratedMessageInformation\n\t\t\t});\n\t\t\ttable.setNoData(illustratedMessage);\n\t\t}\n\t},\n\n\tsetTableNoDataIllustratedMessage: function (table: Table, bindingInfo: CollectionBindingInfo) {\n\t\tconst tableFilterInfo = TableUtils.getAllFilterInfo(table);\n\t\tconst resourceModel = getResourceModel(table);\n\t\tconst suffixResourceKey = bindingInfo.path?.startsWith(\"/\") ? bindingInfo.path.substring(1) : bindingInfo.path;\n\t\tlet illustratedInformation: $IllustratedMessageSettings;\n\n\t\tconst getNoDataIllustratedMessageWithFilters = function (): $IllustratedMessageSettings {\n\t\t\tif (table.data(\"hiddenFilters\") || table.getQuickFilter()) {\n\t\t\t\treturn {\n\t\t\t\t\ttitle: resourceModel.getText(\"T_ILLUSTRATED_MESSAGE_TITLE_NOSEARCHRESULTS\"),\n\t\t\t\t\tdescription: resourceModel.getText(\"M_TABLE_AND_CHART_NO_DATA_TEXT_MULTI_VIEW\", undefined, suffixResourceKey),\n\t\t\t\t\tillustrationType: IllustratedMessageType.NoSearchResults\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttitle: resourceModel.getText(\"T_ILLUSTRATED_MESSAGE_TITLE_NOSEARCHRESULTS\"),\n\t\t\t\tdescription: resourceModel.getText(\"T_TABLE_AND_CHART_NO_DATA_TEXT_WITH_FILTER\", undefined, suffixResourceKey),\n\t\t\t\tillustrationType: IllustratedMessageType.NoSearchResults\n\t\t\t};\n\t\t};\n\n\t\tconst filterAssociation = table.getFilter();\n\t\tconst hasFilterOrSearch = tableFilterInfo.search || tableFilterInfo.filters?.length;\n\t\tif (filterAssociation && !/BasicSearch$/.test(filterAssociation)) {\n\t\t\t// check if a FilterBar is associated to the Table (basic search on toolBar is excluded)\n\t\t\tif (hasFilterOrSearch) {\n\t\t\t\t// check if table has any Filterbar filters or personalization filters\n\t\t\t\tillustratedInformation = getNoDataIllustratedMessageWithFilters();\n\t\t\t} else {\n\t\t\t\tillustratedInformation = {\n\t\t\t\t\ttitle: resourceModel.getText(\"T_ILLUSTRATED_MESSAGE_TITLE_NOSEARCHRESULTS\"),\n\t\t\t\t\tdescription: resourceModel.getText(\"T_TABLE_AND_CHART_NO_DATA_TEXT\", undefined, suffixResourceKey),\n\t\t\t\t\tillustrationType: IllustratedMessageType.NoSearchResults\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (hasFilterOrSearch) {\n\t\t\t//check if table has any personalization filters\n\t\t\tillustratedInformation = getNoDataIllustratedMessageWithFilters();\n\t\t} else {\n\t\t\tillustratedInformation = {\n\t\t\t\ttitle: resourceModel.getText(\"T_ILLUSTRATED_MESSAGE_TITLE_NODATA\"),\n\t\t\t\tdescription: resourceModel.getText(\"M_TABLE_AND_CHART_NO_FILTERS_NO_DATA_TEXT\", undefined, suffixResourceKey),\n\t\t\t\tillustrationType: IllustratedMessageType.NoData\n\t\t\t};\n\t\t}\n\t\tif (CommonUtils.getTargetView(table).getViewData().liveMode) {\n\t\t\tillustratedInformation = {\n\t\t\t\ttitle: resourceModel.getText(\"T_ILLUSTRATED_MESSAGE_TITLE_NOSEARCHRESULTS\"),\n\t\t\t\tdescription: resourceModel.getText(\"T_TABLE_AND_CHART_NO_DATA_TEXT_WITH_FILTER\"),\n\t\t\t\tillustrationType: IllustratedMessageType.NoSearchResults\n\t\t\t};\n\t\t}\n\t\tillustratedInformation.illustrationSize = (table.getParent() as TableAPI).modeForNoDataMessage;\n\n\t\tif (illustratedInformation.illustrationSize === \"text\") {\n\t\t\tconst currentNoData = table.getNoData();\n\t\t\tif (typeof currentNoData === \"string\" && currentNoData === illustratedInformation.description) {\n\t\t\t\t// We don't change the noData aggregation unnecessary.\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttable.setNoData(illustratedInformation.description);\n\t\t} else {\n\t\t\tthis.setNoDataInformation(table, illustratedInformation);\n\t\t}\n\t},\n\n\thandleTableDataReceived: function (oTable: Table, oInternalModelContext: InternalModelContext): void {\n\t\tconst oBinding = oTable && oTable.getRowBinding(),\n\t\t\tbDataReceivedAttached = oInternalModelContext && oInternalModelContext.getProperty(\"dataReceivedAttached\");\n\n\t\tif (oInternalModelContext && !bDataReceivedAttached) {\n\t\t\toBinding.attachDataReceived(() => {\n\t\t\t\t// as the dataReceived event is fired multiple times, we need to ensure that the event is only handled once\n\t\t\t\tif (!oInternalModelContext.getProperty(\"dataReceivedTimeoutSet\")) {\n\t\t\t\t\toInternalModelContext.setProperty(\"dataReceivedTimeoutSet\", true);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\toInternalModelContext.setProperty(\"dataReceivedTimeoutSet\", false);\n\t\t\t\t\t\t// Refresh the selected contexts to trigger re-calculation of enabled state of actions.\n\t\t\t\t\t\toInternalModelContext.setProperty(\"selectedContexts\", []);\n\t\t\t\t\t\tconst aSelectedContexts = oTable.getSelectedContexts() as ODataV4Context[];\n\t\t\t\t\t\toInternalModelContext.setProperty(\"selectedContexts\", aSelectedContexts);\n\t\t\t\t\t\toInternalModelContext.setProperty(\"numberOfSelectedContexts\", aSelectedContexts.length);\n\t\t\t\t\t\tconst oActionOperationAvailableMap =\n\t\t\t\t\t\t\tDelegateUtil.getCustomData<Record<string, string>>(oTable, \"operationAvailableMap\") ?? {};\n\t\t\t\t\t\tActionRuntime.setActionEnablement(oInternalModelContext, oActionOperationAvailableMap, aSelectedContexts, \"table\");\n\t\t\t\t\t\t// Refresh enablement of delete button\n\t\t\t\t\t\tDeleteHelper.updateDeleteInfoForSelectedContexts(oInternalModelContext, aSelectedContexts);\n\t\t\t\t\t\tconst oTableAPI = oTable ? oTable.getParent() : null;\n\t\t\t\t\t\tif (oTableAPI) {\n\t\t\t\t\t\t\t(oTableAPI as TableAPI).setUpEmptyRows(oTable);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._updateAvailableCards(oTable);\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t});\n\t\t\toInternalModelContext.setProperty(\"dataReceivedAttached\", true);\n\t\t}\n\t},\n\n\t/**\n\t * Set the optimistic batch promise for the enabler callback function.\n\t * @param controller The controller\n\t * @param tableAPI The TableAPI\n\t */\n\tsetOptimisticBatchPromiseForModel: function (controller: ListReportController, tableAPI: TableAPI): void {\n\t\tconst model = controller.getAppComponent().getModel();\n\t\tif (model) {\n\t\t\ttableAPI.setOptimisticBatchEnablerPromise(new PromiseKeeper<boolean>());\n\t\t\tthis.setOptimisticBatchForModel(controller, model, tableAPI);\n\t\t}\n\t},\n\n\t/**\n\t * Enable the optimistic batch mode if available.\n\t * @param controller\n\t * @param table\n\t */\n\tenableOptimisticBatchMode: function (controller: ListReportController, table: Table): void {\n\t\tconst filtersPropertiesAsPotentiallySensitiveDataOrDateType =\n\t\t\ttable && TableUtils.isFilterEligibleForOptimisticBatch(table, controller._getFilterBarControl() as FilterBar);\n\t\t(table.getParent() as TableAPI).getOptimisticBatchEnablerPromise()?.resolve(!filtersPropertiesAsPotentiallySensitiveDataOrDateType);\n\t},\n\n\t/**\n\t * Setter for the optimistic batch enabler callback function.\n\t * @param controller\n\t * @param dataModel The OData Model\n\t * @param tableAPI The TableAPI\n\t * @see {sap.ui.model.odata.v4.ODataModel#setOptimisticBatchEnabler} for further information.\n\t */\n\tsetOptimisticBatchForModel: function (controller: ListReportController, dataModel: ODataModel, tableAPI: TableAPI): void {\n\t\tconst isOptimisticBatchHasToBeEnabled = controller.getAppComponent().getShellServices().isFlpOptimisticBatchPluginLoaded();\n\t\tif (dataModel.getOptimisticBatchEnabler() === null && !tableAPI.isOptimisticBatchDisabled() && isOptimisticBatchHasToBeEnabled) {\n\t\t\tconst optimisticBatchEnablerPromiseKeeper = tableAPI.getOptimisticBatchEnablerPromise();\n\t\t\tdataModel.setOptimisticBatchEnabler(function (): Promise<boolean> | undefined {\n\t\t\t\treturn optimisticBatchEnablerPromiseKeeper?.promise;\n\t\t\t});\n\t\t}\n\t},\n\n\trebind: async function (oTable: Table, oBindingInfo: BaseAggregationBindingInfo): Promise<void> {\n\t\tconst oTableAPI = oTable.getParent() as TableAPI;\n\t\tconst bIsSuspended = oTableAPI?.getProperty(\"bindingSuspended\");\n\t\toTableAPI?.setProperty(\"outDatedBinding\", bIsSuspended);\n\t\tif (!bIsSuspended) {\n\t\t\tTableRuntime.clearSelection(oTable);\n\t\t\tTableDelegateBase.rebind.apply(this, [oTable, oBindingInfo]);\n\t\t\tTableUtils.onTableBound(oTable);\n\t\t\treturn TableUtils.whenBound(oTable)\n\t\t\t\t.then((table: Table): void => {\n\t\t\t\t\tthis.handleTableDataReceived(table, table.getBindingContext(\"internal\") as InternalModelContext);\n\t\t\t\t\treturn;\n\t\t\t\t})\n\t\t\t\t.catch(function (oError) {\n\t\t\t\t\tLog.error(\"Error while waiting for the table to be bound\", oError as string);\n\t\t\t\t});\n\t\t}\n\t\treturn Promise.resolve();\n\t},\n\n\t/**\n\t * Fetches the relevant metadata for the table and returns property info array.\n\t * @param table Instance of the MDCtable\n\t * @returns Array of property info\n\t */\n\tfetchProperties: async function (table: Table): Promise<PropertyInfo[]> {\n\t\treturn DelegateUtil.fetchModel(table)\n\t\t\t.then(async (model): Promise<PropertyInfo[]> => {\n\t\t\t\tconst appComponent = CommonUtils.getAppComponent(table);\n\t\t\t\treturn this._getCachedOrFetchPropertiesForEntity(\n\t\t\t\t\ttable,\n\t\t\t\t\tDelegateUtil.getCustomData<string>(table, \"entityType\") ?? \"\",\n\t\t\t\t\tmodel.getMetaModel() as ODataMetaModel,\n\t\t\t\t\tappComponent\n\t\t\t\t);\n\t\t\t})\n\t\t\t.then((properties) => {\n\t\t\t\t(table.getBindingContext(\"internal\") as Context)?.setProperty(\"tablePropertiesAvailable\", true);\n\t\t\t\treturn properties;\n\t\t\t});\n\t},\n\n\tpreInit: async function (table: Table): Promise<void> {\n\t\treturn (TableDelegateBase.preInit as (table: Table) => Promise<void>).apply(this, [table]).then(() => {\n\t\t\t/**\n\t\t\t * Set the binding context to null for every fast creation row to avoid inheriting\n\t\t\t * the wrong context and requesting the table columns on the parent entity\n\t\t\t * Set the correct binding context in ObjectPageController.enableFastCreationRow()\n\t\t\t */\n\t\t\tconst fastCreationRow = table.getCreationRow();\n\t\t\tif (fastCreationRow) {\n\t\t\t\tfastCreationRow.setBindingContext(null as unknown as Context);\n\t\t\t}\n\t\t\treturn;\n\t\t});\n\t},\n\tupdateBindingInfo: function (table: Table, bindingInfo: CollectionBindingInfo) {\n\t\tconst internalBindingContext = table.getBindingContext(\"internal\") as InternalModelContext | undefined;\n\t\tinternalBindingContext?.setProperty(\"isInsightsEnabled\", true);\n\t\tTableDelegateBase.updateBindingInfo.apply(this, [table, bindingInfo]);\n\t\ttry {\n\t\t\tthis._handleSortersOnCurrenciesOrUoM(table, bindingInfo);\n\t\t\tthis._internalUpdateBindingInfo(table, bindingInfo);\n\t\t\tthis.setTableNoDataIllustratedMessage(table, bindingInfo);\n\t\t\tthis._handleRecommendationOutputFields(table, bindingInfo);\n\t\t\tthis._handleFiltersForExternalID(table, bindingInfo);\n\n\t\t\ttable.getParent()?.fireEvent(\"beforeRebindTable\", { collectionBindingInfo: new CollectionBindingInfoAPI(bindingInfo) });\n\t\t\t/**\n\t\t\t * We have to set the binding context to null for every fast creation row to avoid it inheriting\n\t\t\t * the wrong context and requesting the table columns for the parent entity\n\t\t\t * The correct binding context is set in ObjectPageController.enableFastCreationRow()\n\t\t\t */\n\t\t\tconst context = table.getBindingContext();\n\t\t\t// eslint-disable-next-line deprecation/deprecation\n\t\t\tif (table.getCreationRow()?.getBindingContext() === null && bindingInfo.path && context) {\n\t\t\t\tTableHelper.enableFastCreationRow(\n\t\t\t\t\t// eslint-disable-next-line deprecation/deprecation\n\t\t\t\t\ttable.getCreationRow(),\n\t\t\t\t\tbindingInfo.path,\n\t\t\t\t\tcontext as v4Context,\n\t\t\t\t\ttable.getModel() as ODataModel,\n\t\t\t\t\tPromise.resolve()\n\t\t\t\t);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tLog.error(\"Error while updating the binding info\", e as string);\n\t\t}\n\t},\n\n\t_handleSortersOnCurrenciesOrUoM: function (table: Table, bindingInfo: CollectionBindingInfo) {\n\t\tconst sorters: Sorter[] | undefined = bindingInfo.sorter;\n\t\tconst newSortersToBeApplied: Sorter[] = [];\n\t\tif (sorters?.length) {\n\t\t\tconst tableProperties = DelegateUtil.getCachedProperties(table);\n\t\t\tfor (const sorter of sorters) {\n\t\t\t\tconst tableProperty = tableProperties?.find((property) => property.path === sorter.getPath());\n\t\t\t\tif (tableProperty?.unit) {\n\t\t\t\t\tconst unitProperty = tableProperties?.find((property) => property.name === tableProperty?.unit);\n\t\t\t\t\tif (unitProperty?.sortable !== false && unitProperty?.path) {\n\t\t\t\t\t\tnewSortersToBeApplied.push(new Sorter(unitProperty.path, sorter.isDescending()));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnewSortersToBeApplied.push(sorter);\n\t\t\t}\n\t\t\tbindingInfo.sorter = newSortersToBeApplied;\n\t\t}\n\t},\n\n\t_handleFiltersForExternalID: function (table: Table, bindingInfo: CollectionBindingInfo) {\n\t\tconst metaModel = (table.getModel() as ODataModel)?.getMetaModel();\n\t\tconst entityTypePath = bindingInfo.path + \"/\";\n\t\tconst filters = bindingInfo.filters?.getFilters();\n\t\tif (filters !== undefined) {\n\t\t\tTableUtils.updateFiltersForExternalID(metaModel, filters as unknown as ConditionObject[], entityTypePath);\n\t\t}\n\t},\n\n\t_handleRecommendationOutputFields: function (table: Table, oBindingInfo: CollectionBindingInfo) {\n\t\tconst tableAPI = table.getParent() as TableAPI;\n\t\tconst controller = tableAPI?.getController();\n\t\tif (controller?.recommendations.isRecommendationEnabled()) {\n\t\t\tconst appComponent = controller.getAppComponent();\n\t\t\tconst tableDef = tableAPI.getTableDefinition();\n\t\t\tconst recommendationOutputProperties = appComponent\n\t\t\t\t.getSideEffectsService()\n\t\t\t\t.getRecommendationOutputFields(tableDef.annotation.entityTypeName);\n\t\t\tif (recommendationOutputProperties && recommendationOutputProperties.length > 0 && oBindingInfo.parameters) {\n\t\t\t\toBindingInfo.parameters.$select = oBindingInfo.parameters?.$select?.concat(\",\", recommendationOutputProperties.join());\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Update the cards when the binding is refreshed.\n\t * @param table The mdc table control.\n\t */\n\t_updateAvailableCards: async function (table: Table): Promise<void> {\n\t\tconst tableAPI = table.getParent() as TableAPI;\n\t\tconst appComponent = tableAPI?.getController()?.getAppComponent();\n\t\tconst cards: WrappedCard[] = [];\n\t\tawait tableAPI.collectAvailableCards(cards);\n\t\tconst collaborationManager = new CollaborationManager();\n\t\tconst cardObject = collaborationManager.updateCards(cards);\n\t\tconst parentAppId = appComponent.getId();\n\t\tappComponent.getCollaborationManagerService().addCardsToCollaborationManager(cardObject, parentAppId);\n\t\tappComponent.getCollaborationManagerService().shareAvailableCards();\n\t},\n\n\t/**\n\t * The hook implemented by MDC that we can override.\n\t * This allows us to define properties to be requested in the MDC table (Main case is for the analytical table).\n\t * @param table The mdc table control.\n\t * @returns An array of property name to be requested.\n\t */\n\tgetInResultPropertyKeys: function (table: MDCTable): string[] {\n\t\tconst tableAPI = table.getParent() as TableAPI | null;\n\t\tif (tableAPI?.tableDefinition.requestAtLeast) {\n\t\t\treturn tableAPI.tableDefinition.requestAtLeast;\n\t\t}\n\t\treturn [\"\"];\n\t},\n\n\tupdateBinding: function (table: MDCTable, bindingInfo: CollectionBindingInfo, binding?: ODataListBinding): void {\n\t\tconst tableAPI = table.getParent() as TableAPI;\n\t\tconst bIsSuspended = tableAPI?.getProperty(\"bindingSuspended\");\n\t\tif (!bIsSuspended) {\n\t\t\tlet needManualRefresh = false;\n\t\t\tconst view = CommonUtils.getTargetView(table);\n\t\t\tconst internalBindingContext = table.getBindingContext(\"internal\");\n\t\t\tconst manualUpdatePropertyKey = \"pendingManualBindingUpdate\";\n\t\t\tconst pendingManualUpdate = internalBindingContext?.getProperty(manualUpdatePropertyKey) as boolean;\n\t\t\tconst newSorters = JSON.stringify(bindingInfo.sorter ?? []);\n\n\t\t\tif (binding) {\n\t\t\t\t/**\n\t\t\t\t * Manual refresh if filters are not changed by binding.refresh() since updating the bindingInfo\n\t\t\t\t * is not enough to trigger a batch request.\n\t\t\t\t * Removing columns creates one batch request that was not executed before\n\t\t\t\t */\n\t\t\t\tconst viewData = view?.getViewData() as ListReportManifestSettings;\n\t\t\t\tconst oldFilters = binding.getFilters(\"Application\");\n\t\t\t\tconst previousSorters = internalBindingContext?.getProperty(PREVIOUS_SORTERS) ?? \"[]\";\n\n\t\t\t\tconst filterNotChanged =\n\t\t\t\t\tdeepEqual(bindingInfo.filters, oldFilters[0]) &&\n\t\t\t\t\tnewSorters === previousSorters &&\n\t\t\t\t\tbindingInfo.path === binding.getPath() && // The path can be changed in case of a parametrized entity\n\t\t\t\t\tbinding.getQueryOptionsFromParameters().$search === bindingInfo?.parameters?.$search;\n\t\t\t\tconst LRMultiViewEnabled = !!viewData.views;\n\n\t\t\t\tneedManualRefresh =\n\t\t\t\t\tfilterNotChanged &&\n\t\t\t\t\t(internalBindingContext?.getProperty(SEARCH_HAS_BEEN_FIRED) || // check if the search has been triggered\n\t\t\t\t\t\tinternalBindingContext?.getProperty(COLUMN_HAS_BEEN_ADDED) || // check if a column has been added\n\t\t\t\t\t\tLRMultiViewEnabled) && // if the multi view is enabled the request should be refreshed as we don't known if the content of the table is outdated due to an action on another table\n\t\t\t\t\t!pendingManualUpdate;\n\t\t\t}\n\t\t\tTableDelegateBase.updateBinding.apply(this, [table, bindingInfo, binding]);\n\t\t\t// we store the table binding info that was used to bind the table in the table API\n\t\t\t// this needs to be done after the call to TableDelegateBase.updateBinding other wise we don't get the aggregate parameters\n\t\t\t// otherwise there is no way to retrieve sorters added in the onBeforeRebindTable event\n\t\t\ttableAPI.setTableBindingInfo(bindingInfo);\n\t\t\t// we make the call to update the download url but do not await it\n\t\t\ttableAPI.setDownloadUrl();\n\n\t\t\ttable.fireEvent(\"bindingUpdated\");\n\t\t\tif (needManualRefresh && table.getFilter() && binding) {\n\t\t\t\tbinding\n\t\t\t\t\t.requestRefresh(binding.getGroupId())\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tinternalBindingContext?.setProperty(manualUpdatePropertyKey, false);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function (oError) {\n\t\t\t\t\t\tLog.error(\"Error while refreshing the table\", oError as string);\n\t\t\t\t\t});\n\t\t\t\tinternalBindingContext?.setProperty(manualUpdatePropertyKey, true);\n\t\t\t}\n\t\t\tinternalBindingContext?.setProperty(SEARCH_HAS_BEEN_FIRED, false);\n\t\t\tinternalBindingContext?.setProperty(COLUMN_HAS_BEEN_ADDED, false);\n\t\t\tinternalBindingContext?.setProperty(PREVIOUS_SORTERS, newSorters);\n\n\t\t\t//for Treetable, it's necessary to clear the pastableContexts since the binding destroys previous contexts.\n\t\t\tif (tableAPI.getTableDefinition().control.type === \"TreeTable\") {\n\t\t\t\tinternalBindingContext?.setProperty(\"pastableContexts\", []);\n\t\t\t}\n\t\t}\n\t\ttableAPI?.setProperty(\"outDatedBinding\", bIsSuspended);\n\t},\n\n\t_computeRowBindingInfoFromTemplate: function (oTable: Table): CollectionBindingInfo {\n\t\tconst tableAPI = oTable.getParent() as TableAPI;\n\t\tconst rowBindingInfo = tableAPI.getTableTemplateBindingInfo();\n\t\t// if the rowBindingInfo has a $$getKeepAliveContext parameter we need to check it is the only Table with such a\n\t\t// parameter for the collectionMetaPath\n\t\tif (rowBindingInfo.parameters?.$$getKeepAliveContext === true) {\n\t\t\tconst collectionPath = DelegateUtil.getCustomData<string>(oTable, \"targetCollectionPath\") ?? \"\";\n\t\t\tconst internalModel = oTable.getModel(\"internal\") as JSONModel;\n\t\t\tconst keptAliveLists = internalModel?.getObject(\"/keptAliveLists\") ?? {};\n\t\t\tif (!keptAliveLists[collectionPath]) {\n\t\t\t\tkeptAliveLists[collectionPath] = oTable.getId();\n\t\t\t\tinternalModel?.setProperty(\"/keptAliveLists\", keptAliveLists);\n\t\t\t} else if (keptAliveLists[collectionPath] !== oTable.getId()) {\n\t\t\t\tdelete rowBindingInfo.parameters.$$getKeepAliveContext;\n\t\t\t}\n\t\t}\n\n\t\treturn rowBindingInfo;\n\t},\n\t_internalUpdateBindingInfo: function (oTable: Table, oBindingInfo: CollectionBindingInfo) {\n\t\tconst oInternalModelContext = oTable.getBindingContext(\"internal\") as InternalModelContext | undefined;\n\t\tObject.assign(oBindingInfo, this._computeRowBindingInfoFromTemplate(oTable));\n\t\t/**\n\t\t * Binding info might be suspended at the beginning when the first bindRows is called:\n\t\t * To avoid duplicate requests but still have a binding to create new entries.\t\t\t\t *\n\t\t * After the initial binding step, follow up bindings should no longer be suspended.\n\t\t */\n\t\tif (oTable.getRowBinding()) {\n\t\t\toBindingInfo.suspended = false;\n\t\t}\n\t\t// The previously added handler for the event 'dataReceived' is not anymore there\n\t\t// since the bindingInfo is recreated from scratch so we need to set the flag to false in order\n\t\t// to again add the handler on this event if needed\n\t\tif (oInternalModelContext) {\n\t\t\toInternalModelContext.setProperty(\"dataReceivedAttached\", false);\n\t\t}\n\n\t\tlet oFilter;\n\t\tconst oFilterInfo = TableUtils.getAllFilterInfo(oTable);\n\t\t// Prepare binding info with filter/search parameters\n\t\tif (oFilterInfo.filters.length > 0) {\n\t\t\toFilter = new Filter({ filters: oFilterInfo.filters, and: true });\n\t\t}\n\t\tif (oFilterInfo.bindingPath) {\n\t\t\toBindingInfo.path = oFilterInfo.bindingPath;\n\t\t}\n\n\t\tconst oDataStateIndicator = oTable.getDataStateIndicator();\n\t\tif (oDataStateIndicator && oDataStateIndicator.isFiltering()) {\n\t\t\t// Include filters on messageStrip\n\t\t\tif ((oBindingInfo.filters as unknown as Filter[]).length > 0) {\n\t\t\t\toFilter = new Filter({ filters: (oBindingInfo.filters as unknown as Filter[]).concat(oFilterInfo.filters), and: true });\n\t\t\t\tthis.updateBindingInfoWithSearchQuery(oBindingInfo, oFilterInfo, oFilter);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.updateBindingInfoWithSearchQuery(oBindingInfo, oFilterInfo, oFilter);\n\t\t}\n\n\t\tthis.addFilterOnActiveEntities(oTable, oBindingInfo);\n\t},\n\n\t_templateCustomColumnFragment: async function (\n\t\tcolumnInfo: CustomBasedTableColumn,\n\t\tview: View,\n\t\tmodifier: BaseTreeModifier,\n\t\ttableId: string,\n\t\ttableContext: Context\n\t): Promise<Element | UI5Element | Element[] | UI5Element[]> {\n\t\tconst tableCollectionModel = tableContext.getModel && tableContext.getModel();\n\t\tconst controller = view.getController();\n\t\tconst owner = controller?.getOwnerComponent() as EnhanceWithUI5<TemplateComponent>;\n\t\tconst columnModel = new JSONModel(columnInfo),\n\t\t\toThis = new JSONModel({\n\t\t\t\tid: tableId\n\t\t\t}),\n\t\t\tpreprocessorSettings = {\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\t\t\tcolumn: columnModel.createBindingContext(\"/\"),\n\t\t\t\t\tcollection: tableContext\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tmetaModel: tableCollectionModel,\n\t\t\t\t\tthis: oThis,\n\t\t\t\t\tcolumn: columnModel,\n\t\t\t\t\tcollection: tableCollectionModel\n\t\t\t\t},\n\t\t\t\tappComponent: owner?.getAppComponent()\n\t\t\t};\n\n\t\tconst customColumn = new DOMParser().parseFromString(\n\t\t\tjsx.renderAsXML(() => {\n\t\t\t\treturn getCustomColumnTemplate(tableId, columnInfo, tableContext) as unknown as string;\n\t\t\t}),\n\t\t\t\"text/xml\"\n\t\t);\n\t\treturn DelegateUtil.templateControlFragment(customColumn.firstElementChild, preprocessorSettings, { view: view }, modifier).then(\n\t\t\tfunction (oItem: Element | UI5Element | Element[] | UI5Element[]) {\n\t\t\t\tcolumnModel.destroy();\n\t\t\t\treturn oItem;\n\t\t\t}\n\t\t);\n\t},\n\tupdateBindingInfoWithSearchQuery: function (bindingInfo: CollectionBindingInfo, filterInfo: InternalBindingInfo, filter?: Filter) {\n\t\tbindingInfo.filters = filter;\n\t\tbindingInfo.parameters ??= {};\n\t\tif (filterInfo.search) {\n\t\t\tbindingInfo.parameters.$search = CommonUtils.normalizeSearchTerm(filterInfo.search);\n\t\t} else {\n\t\t\tbindingInfo.parameters.$search = undefined;\n\t\t}\n\t},\n\t/**\n\t * If specified in the payload, adds a filter to display only active entities.\n\t * @param table\n\t * @param bindingInfo\n\t */\n\taddFilterOnActiveEntities: function (table: Table, bindingInfo: CollectionBindingInfo) {\n\t\tconst payload = table.getPayload() as { filterOnActiveEntities?: boolean };\n\n\t\tif (payload?.filterOnActiveEntities === true) {\n\t\t\tconst filterOnActive = new Filter({ path: \"IsActiveEntity\", operator: \"EQ\", value1: true });\n\t\t\tif (bindingInfo.filters) {\n\t\t\t\tbindingInfo.filters = new Filter({ filters: [filterOnActive, bindingInfo.filters], and: true });\n\t\t\t} else {\n\t\t\t\tbindingInfo.filters = filterOnActive;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Creates a template from the fragment of a slot column.\n\t * @param columnInfo The custom table column\n\t * @param view The current view\n\t * @param modifier The control tree modifier\n\t * @param tableId The id of the underlying table\n\t * @returns The loaded fragment\n\t */\n\t_templateSlotColumnFragment: async function (\n\t\tcolumnInfo: CustomElement<CustomBasedTableColumn>,\n\t\tview: View,\n\t\tmodifier: BaseTreeModifier | JsControlTreeModifier,\n\t\ttableId: string\n\t): Promise<null | Control | Control[] | Element> {\n\t\tconst slotColumnsXML = new DOMParser().parseFromString(\n\t\t\tjsx.renderAsXML(() => {\n\t\t\t\treturn getSlotColumn(tableId, columnInfo, false) as unknown as string;\n\t\t\t}),\n\t\t\t\"text/xml\"\n\t\t);\n\t\tif (!slotColumnsXML) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t\tconst slotXML = slotColumnsXML.getElementsByTagName(\"slot\")[0];\n\n\t\tif (columnInfo.template) {\n\t\t\tif (slotXML) {\n\t\t\t\tconst oTemplate = new DOMParser().parseFromString(columnInfo.template, \"text/xml\");\n\t\t\t\tif (oTemplate.firstElementChild && oTemplate.firstElementChild.nodeName !== \"html\") {\n\t\t\t\t\tslotXML.replaceWith(oTemplate.firstElementChild);\n\t\t\t\t} else {\n\t\t\t\t\tslotXML.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tLog.error(`Please provide content inside this Building Block Column: ${columnInfo.header}`);\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t\tconst resultXML = await XMLPreprocessor.process(\n\t\t\tslotColumnsXML.firstElementChild,\n\t\t\t{ models: {} },\n\t\t\t(view.getController().getOwnerComponent() as EnhanceWithUI5<TemplateComponent>).getPreprocessorContext()\n\t\t);\n\t\tif (modifier?.targets !== \"jsControlTree\") {\n\t\t\treturn resultXML.firstElementChild;\n\t\t}\n\t\treturn Fragment.load({\n\t\t\ttype: \"XML\",\n\t\t\tdefinition: resultXML,\n\t\t\tcontroller: view.getController()\n\t\t}) as Promise<Control | Control[]>;\n\t},\n\n\t_getExportFormat: function (dataType?: string) {\n\t\tswitch (dataType) {\n\t\t\tcase \"Edm.Date\":\n\t\t\t\treturn ExcelFormat.getExcelDatefromJSDate();\n\t\t\tcase \"Edm.DateTimeOffset\":\n\t\t\t\treturn ExcelFormat.getExcelDateTimefromJSDateTime();\n\t\t\tcase \"Edm.TimeOfDay\":\n\t\t\t\treturn ExcelFormat.getExcelTimefromJSTime();\n\t\t\tdefault:\n\t\t\t\treturn undefined;\n\t\t}\n\t},\n\n\t_getVHRelevantFields: function (oMetaModel: ODataMetaModel, sMetadataPath: string, sBindingPath?: string): string[] {\n\t\tlet aFields: string[] = [],\n\t\t\toDataFieldData = oMetaModel.getObject(sMetadataPath);\n\n\t\tif (oDataFieldData.$kind && oDataFieldData.$kind === \"Property\") {\n\t\t\toDataFieldData = oMetaModel.getObject(`${sMetadataPath}@com.sap.vocabularies.UI.v1.DataFieldDefault`);\n\t\t\tsMetadataPath = `${sMetadataPath}@com.sap.vocabularies.UI.v1.DataFieldDefault`;\n\t\t}\n\t\tswitch (oDataFieldData.$Type) {\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\":\n\t\t\t\tif (oMetaModel.getObject(`${sMetadataPath}/Target/$AnnotationPath`).includes(\"com.sap.vocabularies.UI.v1.FieldGroup\")) {\n\t\t\t\t\toMetaModel.getObject(`${sMetadataPath}/Target/$AnnotationPath/Data`).forEach((oValue: unknown, iIndex: number) => {\n\t\t\t\t\t\taFields = aFields.concat(\n\t\t\t\t\t\t\tthis._getVHRelevantFields(oMetaModel, `${sMetadataPath}/Target/$AnnotationPath/Data/${iIndex}`)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldWithUrl\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataField\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldWithAction\":\n\t\t\t\taFields.push(oMetaModel.getObject(`${sMetadataPath}/Value/$Path`));\n\t\t\t\tbreak;\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForAction\":\n\t\t\tcase \"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\":\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// property\n\t\t\t\t// temporary workaround to make sure VH relevant field path do not contain the bindingpath\n\t\t\t\tif (sBindingPath && sMetadataPath.indexOf(sBindingPath) === 0) {\n\t\t\t\t\taFields.push(sMetadataPath.substring(sBindingPath.length + 1));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\taFields.push(CommonHelper.getNavigationPath(sMetadataPath, true));\n\t\t\t\tbreak;\n\t\t}\n\t\treturn aFields;\n\t},\n\t_setDraftIndicatorOnVisibleColumn: function (oTable: Table, aColumns: TableColumn[], oColumnInfo?: TableColumn) {\n\t\tconst oInternalBindingContext = oTable.getBindingContext(\"internal\");\n\t\tif (!oInternalBindingContext) {\n\t\t\treturn;\n\t\t}\n\t\tconst sInternalPath = oInternalBindingContext.getPath();\n\t\tconst aColumnsWithDraftIndicator = aColumns.filter((oColumn: TableColumn) => {\n\t\t\treturn this._bColumnHasPropertyWithDraftIndicator(oColumn);\n\t\t});\n\t\tconst aVisibleColumns = oTable.getColumns();\n\t\tlet sAddVisibleColumnName, sVisibleColumnName, bFoundColumnVisibleWithDraft, sColumnNameWithDraftIndicator;\n\t\tfor (const i in aVisibleColumns) {\n\t\t\tsVisibleColumnName = aVisibleColumns[i].getPropertyKey();\n\t\t\tfor (const j in aColumnsWithDraftIndicator) {\n\t\t\t\tsColumnNameWithDraftIndicator = aColumnsWithDraftIndicator[j].name;\n\t\t\t\tif (sVisibleColumnName === sColumnNameWithDraftIndicator) {\n\t\t\t\t\tbFoundColumnVisibleWithDraft = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (oColumnInfo && oColumnInfo.name === sColumnNameWithDraftIndicator) {\n\t\t\t\t\tsAddVisibleColumnName = oColumnInfo.name;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (bFoundColumnVisibleWithDraft) {\n\t\t\t\toInternalBindingContext.setProperty(sInternalPath + SEMANTICKEY_HAS_DRAFTINDICATOR, sVisibleColumnName);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!bFoundColumnVisibleWithDraft && sAddVisibleColumnName) {\n\t\t\toInternalBindingContext.setProperty(sInternalPath + SEMANTICKEY_HAS_DRAFTINDICATOR, sAddVisibleColumnName);\n\t\t}\n\t},\n\tremoveItem: async function (\n\t\toTable: UI5Element | Element,\n\t\toPropertyInfoName: UI5Element | Element,\n\t\tmPropertyBag: { modifier: BaseTreeModifier; appComponent: AppComponent }\n\t): Promise<boolean> {\n\t\tlet doRemoveItem = true;\n\t\tif (!oPropertyInfoName) {\n\t\t\t// 1. Application removed the property from their data model\n\t\t\t// 2. addItem failed before revertData created\n\t\t\treturn Promise.resolve(doRemoveItem);\n\t\t}\n\t\tconst oModifier = mPropertyBag.modifier;\n\t\tconst sDataProperty = await oModifier.getProperty<string>(oPropertyInfoName, \"dataProperty\");\n\t\tif (sDataProperty && sDataProperty.includes && sDataProperty.includes(\"InlineXML\")) {\n\t\t\toModifier.insertAggregation(oTable, \"dependents\", oPropertyInfoName);\n\t\t\tdoRemoveItem = false;\n\t\t}\n\t\tif ((oTable as UI5Element).isA && oModifier.targets === \"jsControlTree\") {\n\t\t\tthis._setDraftIndicatorStatus(oModifier, oTable, this.getColumnsFor(oTable as Table));\n\t\t}\n\t\treturn Promise.resolve(doRemoveItem);\n\t},\n\t_getMetaModel: function (mPropertyBag: { appComponent: AppComponent }) {\n\t\treturn mPropertyBag.appComponent && mPropertyBag.appComponent.getModel().getMetaModel();\n\t},\n\t_setDraftIndicatorStatus: function (\n\t\toModifier: BaseTreeModifier,\n\t\toTable: UI5Element | Element,\n\t\taColumns: TableColumn[],\n\t\toColumnInfo?: TableColumn\n\t) {\n\t\tif (oModifier.targets === \"jsControlTree\") {\n\t\t\tthis._setDraftIndicatorOnVisibleColumn(oTable as Table, aColumns, oColumnInfo);\n\t\t}\n\t},\n\t_getGroupId: function (sRetrievedGroupId: string) {\n\t\treturn sRetrievedGroupId || undefined;\n\t},\n\t_fnTemplateValueHelp: function (fnTemplateValueHelp: Function, bValueHelpRequired: boolean, bValueHelpExists: boolean) {\n\t\tif (bValueHelpRequired && !bValueHelpExists) {\n\t\t\treturn fnTemplateValueHelp(\"sap.fe.macros.table.ValueHelp\");\n\t\t}\n\t\treturn Promise.resolve();\n\t},\n\t_insertAggregation: async function (\n\t\toValueHelp: Element | UI5Element | Element[] | UI5Element[],\n\t\toModifier: BaseTreeModifier,\n\t\toTable: Element | UI5Element\n\t): Promise<void> {\n\t\tif (oValueHelp) {\n\t\t\treturn oModifier.insertAggregation(oTable, \"dependents\", oValueHelp, 0);\n\t\t}\n\t\treturn;\n\t},\n\n\t/**\n\t * Invoked when a column is added using the table personalization dialog.\n\t * @param oTable Instance of table control\n\t * @param sPropertyInfoName Name of the property for which the column is added\n\t * @param mPropertyBag Instance of property bag from the flexibility API\n\t * @param mPropertyBag.modifier Instance of the control tree modifier\n\t * @param mPropertyBag.appComponent Instance of the app component\n\t * @param mPropertyBag.view Instance of the view\n\t * @returns Once resolved, a table column definition is returned\n\t */\n\taddItem: async function (\n\t\toTable: Element | UI5Element,\n\t\tsPropertyInfoName: string,\n\t\tmPropertyBag: { modifier: BaseTreeModifier; appComponent: AppComponent; view?: FEView }\n\t) {\n\t\tconst oMetaModel = this._getMetaModel(mPropertyBag),\n\t\t\toModifier = mPropertyBag.modifier,\n\t\t\tsTableId = oModifier.getId(oTable),\n\t\t\taColumns = (oTable as UI5Element).isA ? this.getColumnsFor(oTable as Table) : null;\n\t\tif (!aColumns) {\n\t\t\t// We return null here because everything should apply at runtime\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\n\t\tconst oColumnInfo = aColumns.find(function (oColumn) {\n\t\t\treturn oColumn.name === sPropertyInfoName;\n\t\t});\n\t\tif (!oColumnInfo) {\n\t\t\tLog.error(`${sPropertyInfoName} not found while adding column`);\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t\tif (oColumnInfo.availability === \"Hidden\") {\n\t\t\tLog.warning(`Column for ${sPropertyInfoName} not added because it's hidden`);\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\t\tconst internalBindingContext = (oTable as Table).getBindingContext(\"internal\");\n\t\tinternalBindingContext?.setProperty(COLUMN_HAS_BEEN_ADDED, true);\n\t\tthis._setDraftIndicatorStatus(oModifier, oTable, aColumns, oColumnInfo);\n\t\tconst sPath = await DelegateUtil.getCustomDataWithModifier<string>(oTable, \"metaPath\", oModifier);\n\t\tconst oTableContext: Context = oMetaModel.createBindingContext(sPath!)!;\n\t\t// If view is not provided try to get it by accessing to the parental hierarchy\n\t\t// If it doesn't work (table into an unattached OP section) get the view via the AppComponent\n\t\tconst view =\n\t\t\tmPropertyBag.view ||\n\t\t\tCommonUtils.getTargetView(oTable as UI5Element) ||\n\t\t\t(mPropertyBag.appComponent ? CommonUtils.getCurrentPageView(mPropertyBag.appComponent) : undefined);\n\t\t// render custom column\n\t\tif (oColumnInfo.type === \"Default\") {\n\t\t\treturn this._templateCustomColumnFragment(oColumnInfo as CustomBasedTableColumn, view, oModifier, sTableId, oTableContext);\n\t\t}\n\n\t\tif (oColumnInfo.type === \"Slot\") {\n\t\t\treturn this._templateSlotColumnFragment(oColumnInfo as CustomElement<CustomBasedTableColumn>, view, oModifier, sTableId);\n\t\t}\n\n\t\tif (oColumnInfo.type === \"Computed\") {\n\t\t\tconst enableAnalytics = ((oTable as MDCTable).getParent() as TableAPI).getTableDefinition().enableAnalytics;\n\t\t\treturn getComputedColumn(sTableId, oColumnInfo as ComputedTableColumn, oTableContext, enableAnalytics);\n\t\t}\n\n\t\t// fall-back\n\t\tif (!oMetaModel) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\n\t\tconst sEntityTypePath = await DelegateUtil.getCustomDataWithModifier<string>(oTable, \"entityType\", oModifier);\n\t\tconst sRetrievedGroupId = await DelegateUtil.getCustomDataWithModifier<string>(oTable, \"requestGroupId\", oModifier);\n\t\tconst sGroupId: string | undefined = this._getGroupId(sRetrievedGroupId!);\n\n\t\tconst aFetchedProperties = await this._getCachedOrFetchPropertiesForEntity(\n\t\t\toTable as Table,\n\t\t\tsEntityTypePath!,\n\t\t\toMetaModel,\n\t\t\tmPropertyBag.appComponent\n\t\t);\n\t\tconst oPropertyInfo = aFetchedProperties.find(function (oInfo: PropertyInfo) {\n\t\t\treturn oInfo.name === sPropertyInfoName;\n\t\t});\n\n\t\tconst oPropertyContext: Context = oMetaModel.createBindingContext(oPropertyInfo!.metadataPath!)!;\n\t\tconst aVHProperties = this._getVHRelevantFields(oMetaModel, oPropertyInfo!.metadataPath!, sPath);\n\t\tconst oParameters = {\n\t\t\tsBindingPath: sPath!,\n\t\t\tsValueHelpType: \"TableValueHelp\",\n\t\t\toControl: oTable,\n\t\t\tmetaPath: oPropertyContext.getPath(),\n\t\t\toMetaModel,\n\t\t\toModifier,\n\t\t\toPropertyInfo\n\t\t};\n\n\t\tconst fnTemplateValueHelp = async (sFragmentName: string): Promise<void> => {\n\t\t\tconst oThis = new JSONModel({\n\t\t\t\t\tid: sTableId,\n\t\t\t\t\trequestGroupId: sGroupId\n\t\t\t\t}),\n\t\t\t\toPreprocessorSettings = {\n\t\t\t\t\tbindingContexts: {\n\t\t\t\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\t\t\t\tdataField: oPropertyContext,\n\t\t\t\t\t\tcontextPath: oTableContext\n\t\t\t\t\t},\n\t\t\t\t\tmodels: {\n\t\t\t\t\t\tthis: oThis,\n\t\t\t\t\t\tdataField: oMetaModel,\n\t\t\t\t\t\tmetaModel: oMetaModel,\n\t\t\t\t\t\tcontextPath: oMetaModel\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\ttry {\n\t\t\t\tconst oValueHelp = await DelegateUtil.templateControlFragment(sFragmentName, oPreprocessorSettings, {}, oModifier);\n\t\t\t\treturn await this._insertAggregation(oValueHelp, oModifier, oTable);\n\t\t\t} catch (oError) {\n\t\t\t\t//We always resolve the promise to ensure that the app does not crash\n\t\t\t\tLog.error(`ValueHelp not loaded : ${(oError as Error).message}`);\n\t\t\t\treturn;\n\t\t\t} finally {\n\t\t\t\toThis.destroy();\n\t\t\t}\n\t\t};\n\n\t\tconst fnTemplateFragment = async (\n\t\t\toInPropertyInfo: unknown,\n\t\t\toView: FEView\n\t\t): Promise<UI5Element | Element | UI5Element[] | Element[]> => {\n\t\t\tlet bDisplayMode: boolean | undefined;\n\t\t\tlet sTableTypeCustomData: string | undefined;\n\t\t\tlet sOnChangeCustomData: string | undefined;\n\t\t\tlet sCreationModeCustomData: string | undefined;\n\n\t\t\treturn Promise.all([\n\t\t\t\tDelegateUtil.getCustomDataWithModifier<string | boolean>(oTable, \"displayModePropertyBinding\", oModifier),\n\t\t\t\tDelegateUtil.getCustomDataWithModifier<string>(oTable, \"tableType\", oModifier),\n\t\t\t\tDelegateUtil.getCustomDataWithModifier<string>(oTable, \"onChange\", oModifier),\n\t\t\t\tDelegateUtil.getCustomDataWithModifier<string>(oTable, \"creationMode\", oModifier)\n\t\t\t]).then(async (aCustomData: (string | boolean | undefined)[]) => {\n\t\t\t\tbDisplayMode = aCustomData[0] as boolean | undefined;\n\t\t\t\tsTableTypeCustomData = aCustomData[1] as string | undefined;\n\t\t\t\tsOnChangeCustomData = aCustomData[2] as string | undefined;\n\t\t\t\tsCreationModeCustomData = aCustomData[3] as string | undefined;\n\t\t\t\t// Read Only and Column Edit Mode can both have three state\n\t\t\t\t// Undefined means that the framework decides what to do\n\t\t\t\t// True / Display means always read only\n\t\t\t\t// False / Editable means editable but while still respecting the low level principle (immutable property will not be editable)\n\t\t\t\tif (bDisplayMode !== undefined && typeof bDisplayMode !== \"boolean\") {\n\t\t\t\t\tbDisplayMode = bDisplayMode === \"true\";\n\t\t\t\t}\n\n\t\t\t\tconst tableAPI = (oTable as Table).getParent() as TableAPI;\n\t\t\t\tconst oThis = new JSONModel({\n\t\t\t\t\t\tenableAutoColumnWidth: tableAPI.enableAutoColumnWidth,\n\t\t\t\t\t\treadOnly: bDisplayMode,\n\t\t\t\t\t\ttableType: sTableTypeCustomData,\n\t\t\t\t\t\tonChange: sOnChangeCustomData as unknown as Function,\n\t\t\t\t\t\tid: sTableId,\n\t\t\t\t\t\tnavigationPropertyPath: sPropertyInfoName,\n\t\t\t\t\t\tcolumnInfo: oColumnInfo,\n\t\t\t\t\t\tcollection: oMetaModel.createBindingContext(sPath!),\n\t\t\t\t\t\tcreationMode: { name: sCreationModeCustomData },\n\t\t\t\t\t\twidthIncludingColumnHeader: tableAPI.widthIncludingColumnHeader\n\t\t\t\t\t}),\n\t\t\t\t\toPreprocessorSettings = {\n\t\t\t\t\t\tbindingContexts: {\n\t\t\t\t\t\t\tentitySet: oTableContext,\n\t\t\t\t\t\t\tcollection: oTableContext,\n\t\t\t\t\t\t\tdataField: oPropertyContext,\n\t\t\t\t\t\t\tthis: oThis.createBindingContext(\"/\"),\n\t\t\t\t\t\t\tcolumn: oThis.createBindingContext(\"/columnInfo\")\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmodels: {\n\t\t\t\t\t\t\tthis: oThis,\n\t\t\t\t\t\t\tentitySet: oMetaModel,\n\t\t\t\t\t\t\tcollection: oMetaModel,\n\t\t\t\t\t\t\tdataField: oMetaModel,\n\t\t\t\t\t\t\tmetaModel: oMetaModel,\n\t\t\t\t\t\t\tcolumn: oThis\n\t\t\t\t\t\t},\n\t\t\t\t\t\tappComponent: mPropertyBag.appComponent\n\t\t\t\t\t};\n\t\t\t\tconst computedColumnXML = new DOMParser().parseFromString(\n\t\t\t\t\tjsx.renderAsXML(() => {\n\t\t\t\t\t\treturn (getColumnTemplate(\n\t\t\t\t\t\t\tsTableId,\n\t\t\t\t\t\t\ttableAPI.getTableDefinition(),\n\t\t\t\t\t\t\toColumnInfo as AnnotationTableColumn,\n\t\t\t\t\t\t\toMetaModel.createBindingContext(sPath!)!,\n\t\t\t\t\t\t\tbDisplayMode,\n\t\t\t\t\t\t\ttableAPI.enableAutoColumnWidth,\n\t\t\t\t\t\t\ttableAPI.widthIncludingColumnHeader,\n\t\t\t\t\t\t\ttableAPI.getTableDefinition().enableAnalytics,\n\t\t\t\t\t\t\tsTableTypeCustomData as TableType,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: sCreationModeCustomData as \"NewPage\" | \"Inline\" | \"InlineCreationRows\" | \"External\" | \"CreationDialog\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\tsOnChangeCustomData,\n\t\t\t\t\t\t\ttableAPI.getTableDefinition().control.isCompactType,\n\t\t\t\t\t\t\t\"\"\n\t\t\t\t\t\t) ?? \"\") as unknown as string;\n\t\t\t\t\t}),\n\t\t\t\t\t\"text/xml\"\n\t\t\t\t);\n\t\t\t\treturn DelegateUtil.templateControlFragment(\n\t\t\t\t\tcomputedColumnXML.firstElementChild,\n\t\t\t\t\toPreprocessorSettings,\n\t\t\t\t\t{ view: oView },\n\t\t\t\t\toModifier\n\t\t\t\t).finally(function () {\n\t\t\t\t\toThis.destroy();\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\tawait Promise.all(\n\t\t\taVHProperties.map(async (sPropertyName: string) => {\n\t\t\t\tconst mParameters = Object.assign({}, oParameters, { sPropertyName: sPropertyName });\n\n\t\t\t\tconst aResults = await Promise.all([\n\t\t\t\t\tDelegateUtil.isValueHelpRequired(mParameters),\n\t\t\t\t\tDelegateUtil.doesValueHelpExist(mParameters)\n\t\t\t\t]);\n\n\t\t\t\tconst bValueHelpRequired = aResults[0],\n\t\t\t\t\tbValueHelpExists = aResults[1];\n\t\t\t\treturn this._fnTemplateValueHelp(fnTemplateValueHelp, bValueHelpRequired, bValueHelpExists);\n\t\t\t})\n\t\t);\n\t\treturn fnTemplateFragment(oPropertyInfo, view);\n\t},\n\n\t/**\n\t * Provide the Table's filter delegate to provide basic filter functionality such as adding FilterFields.\n\t * @returns Object for the Tables filter personalization.\n\t */\n\tgetFilterDelegate: function () {\n\t\treturn Object.assign(\n\t\t\t{\n\t\t\t\tapiVersion: 2\n\t\t\t},\n\t\t\tFilterBarDelegate,\n\t\t\t{\n\t\t\t\taddItem: async function (oParentControl: Control, sPropertyInfoName: string) {\n\t\t\t\t\tif (sPropertyInfoName.indexOf(\"Property::\") === 0) {\n\t\t\t\t\t\t// Correct the name of complex property info references.\n\t\t\t\t\t\tsPropertyInfoName = sPropertyInfoName.replace(\"Property::\", \"\");\n\t\t\t\t\t}\n\t\t\t\t\treturn FilterBarDelegate.addItem(oParentControl as FilterBar, sPropertyInfoName);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t},\n\n\t/**\n\t * Returns the TypeMap attached to this delegate.\n\t * @returns Any instance of TypeMap\n\t */\n\tgetTypeMap: function (/*oPayload: object*/) {\n\t\treturn TypeMap;\n\t},\n\n\t/**\n\t * Format the title of the group header .\n\t * @param table Instance of table control\n\t * @param context Context\n\t * @param property Name of the property\n\t * @returns Formatted title of the group header.\n\t */\n\tformatGroupHeader(table: MDCTable, context: ODataV4Context, property: string) {\n\t\tconst formatInfos = DelegateUtil.getCachedProperties(table),\n\t\t\tformatInfo = formatInfos?.find((obj: PropertyInfo) => {\n\t\t\t\treturn obj.name === property;\n\t\t\t}),\n\t\t\t/*For a Date, DateTime or Boolean property, the value is returned in external format using a UI5 type for the\n\t        given property path that formats corresponding to the property's EDM type and constraints*/\n\t\t\texternalFormat =\n\t\t\t\tformatInfo?.typeConfig?.baseType === \"DateTime\" ||\n\t\t\t\tformatInfo?.typeConfig?.baseType === \"Date\" ||\n\t\t\t\tformatInfo?.typeConfig?.baseType === \"Boolean\";\n\t\tlet value;\n\t\tif (!context) {\n\t\t\tvalue = getResourceModel(CommonUtils.getTargetView(table)).getText(\"M_TABLE_GROUP_HEADER_TITLE_VALUE\");\n\t\t\treturn getResourceModel(table).getText(\"M_TABLE_GROUP_HEADER_TITLE\", [formatInfo?.label, value]);\n\t\t}\n\t\tif (formatInfo?.mode) {\n\t\t\tswitch (formatInfo.mode) {\n\t\t\t\tcase \"Description\":\n\t\t\t\t\tvalue = formatInfo.descriptionProperty ? context.getProperty(formatInfo.descriptionProperty, externalFormat) : null;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"DescriptionValue\":\n\t\t\t\t\tvalue = ValueFormatter.formatWithBrackets(\n\t\t\t\t\t\tformatInfo.descriptionProperty ? context.getProperty(formatInfo.descriptionProperty, externalFormat) : null,\n\t\t\t\t\t\tformatInfo.valueProperty ? context.getProperty(formatInfo.valueProperty, externalFormat) : null\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ValueDescription\":\n\t\t\t\t\tvalue = ValueFormatter.formatWithBrackets(\n\t\t\t\t\t\tformatInfo.valueProperty ? context.getProperty(formatInfo.valueProperty, externalFormat) : null,\n\t\t\t\t\t\tformatInfo.descriptionProperty ? context.getProperty(formatInfo.descriptionProperty, externalFormat) : null\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tvalue = formatInfo?.path ? context.getProperty(formatInfo.path, externalFormat) : null;\n\t\t}\n\t\tif (value === null || value === \"\") {\n\t\t\tvalue = getResourceModel(CommonUtils.getTargetView(table)).getText(\"M_TABLE_GROUP_HEADER_TITLE_VALUE\");\n\t\t}\n\t\treturn getResourceModel(table).getText(\"M_TABLE_GROUP_HEADER_TITLE\", [formatInfo?.label, value]);\n\t}\n});\n"],"mappings":"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","ignoreList":[],"file":"TableDelegate-dbg.js"}