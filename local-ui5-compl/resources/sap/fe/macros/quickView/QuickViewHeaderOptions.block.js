/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/BindingToolkit","sap/fe/base/ClassSupport","sap/fe/core/buildingBlocks/templating/BuildingBlockSupport","sap/fe/core/buildingBlocks/templating/RuntimeBuildingBlock","sap/fe/core/converters/MetaModelConverter","sap/fe/core/converters/annotations/DataField","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/UIFormatters","sap/fe/macros/field/FieldHelper","sap/fe/macros/field/FieldTemplating","sap/m/Avatar","sap/m/AvatarShape","sap/m/Link","sap/m/Text","sap/m/Title","sap/m/VBox","sap/ui/core/library","sap/ui/layout/HorizontalLayout","sap/ui/layout/VerticalLayout","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs"],function(e,t,i,a,n,r,o,s,l,c,u,d,p,h,f,y,m,b,g,v,P){"use strict";var I,k,x,T,F,z,D,M,j,L,O,w,B;var V={};var C=c.getTextBinding;var U=c.getDataModelObjectPathForValue;var H=s.getDisplayMode;var A=o.isEntityType;var E=r.isDataField;var S=n.getInvolvedDataModelObjects;var _=n.convertTypes;var q=i.defineBuildingBlock;var N=i.blockAttribute;var Q=t.defineReference;var R=e.getExpressionFromAnnotation;var G=e.compileExpression;function $(e,t,i,a){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(a):void 0})}function J(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,K(e,t)}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}function W(e,t,i,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce(function(i,a){return a(e,t,i)||i},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer?(Object.defineProperty(e,t,r),null):r}function X(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let Y=(I=q({name:"QuickViewHeaderOptions",namespace:"sap.fe.macros"}),k=N({type:"sap.ui.model.Context",required:true}),x=N({type:"object",required:true}),T=N({type:"string"}),F=N({type:"string"}),z=Q(),I(D=(M=function(e){function t(t,i,a){var r;r=e.call(this,t,i,a)||this;$(r,"contextPath",j,r);$(r,"semanticPayload",L,r);$(r,"id",O,r);$(r,"titleLink",w,r);$(r,"horizontalLayout",B,r);r.visible=true;r.settings=a;const o=_(r.contextPath.getModel());const s=o.resolvePath(r.contextPath.getPath());const l=s.target;if(A(l)){r.entityType=l;r.headerInfo=r.entityType?.annotations.UI?.HeaderInfo}else if(E(l)){const e=S(r.contextPath);r.convertedDataField=n.convertMetaModelContext(r.contextPath);r.dataFieldValue=U(e)}return r}V=t;J(t,e);var i=t.prototype;i.setHeaderDisplayParametersForDataField=function e(){if(this.dataFieldValue&&this.convertedDataField){if(this.convertedDataField?.IconUrl){this.icon=this.convertedDataField.IconUrl;this.fallbackIcon="sap-icon://product"}else{this.icon=undefined;this.fallbackIcon=undefined}this.title=C(this.dataFieldValue,{displayMode:H(this.dataFieldValue)});this.description=this.convertedDataField.Label?G(this.convertedDataField.Label):G(this.convertedDataField.Value?.$target?.annotations?.Common?.Label)}};i.setHeaderDisplayParametersForEntityType=function e(){if(this.entityType){const e=this.headerInfo?.ImageUrl?R(this.headerInfo.ImageUrl):R(this.headerInfo?.TypeImageUrl);const t=G(e);this.icon=t==="undefined"?undefined:t;if(this.headerInfo?.TypeImageUrl){this.fallbackIcon=G(this.headerInfo.TypeImageUrl)}else if(this.entityType?.annotations.Common?.IsNaturalPerson?.valueOf()===true){this.fallbackIcon="sap-icon://person-placeholder"}else{this.fallbackIcon="sap-icon://product"}if(this.headerInfo?.Title?.Value){const e=S(this.contextPath.getModel().createBindingContext("@com.sap.vocabularies.UI.v1.HeaderInfo/Title/Value",this.contextPath));const t=C(e,{displayMode:H(e)});this.title=t!=="{}"?t:undefined}const i=S(this.contextPath.getModel().createBindingContext("@com.sap.vocabularies.UI.v1.HeaderInfo/Description/Value",this.contextPath));const a=i.targetObject&&C(i,{displayMode:H(i)});this.description=i.targetObject===undefined?G({_type:"PathInModel",modelName:"semantic",path:"propertyPathLabel"}):a}};i.getSemanticObjectsPrimaryActions=async function e(){if(await l.checkPrimaryActions(this.semanticPayload,false,this.settings.appComponent)){const e=l.getPrimaryAction(this.semanticPayload);this.titleLink=e}this.setupTitle()};i.getContent=function e(){let t;this.setHeaderDisplayParametersForDataField();this.setHeaderDisplayParametersForEntityType();this.isInitialized=this.getSemanticObjectsPrimaryActions();if(this.icon&&this.fallbackIcon){t=v(u,{class:"sapMQuickViewThumbnail sapUiTinyMarginEnd",src:this.icon,displayShape:this.entityType?.annotations.Common?.IsNaturalPerson?.valueOf()===true?d.Circle:d.Square,fallbackIcon:this.fallbackIcon})}const i=v(b,{class:"sapUiSmallMarginBottom sapMQuickViewPage",ref:this.horizontalLayout,children:t});return v(y,{children:i})};i.setupTitle=function e(){let t;if(this.title){if(this.titleLink){t=v(p,{text:this.title,href:this.titleLink,emphasized:"true"})}else{t=v(f,{text:this.title,level:m.TitleLevel.H3,wrapping:"true"})}}const i=this.description?v(h,{text:this.description}):undefined;const a=P(g,{children:[t,i]});this.horizontalLayout.current?.addContent(a)};return t}(a),j=W(M.prototype,"contextPath",[k],{configurable:true,enumerable:true,writable:true,initializer:null}),L=W(M.prototype,"semanticPayload",[x],{configurable:true,enumerable:true,writable:true,initializer:null}),O=W(M.prototype,"id",[T],{configurable:true,enumerable:true,writable:true,initializer:null}),w=W(M.prototype,"titleLink",[F],{configurable:true,enumerable:true,writable:true,initializer:null}),B=W(M.prototype,"horizontalLayout",[z],{configurable:true,enumerable:true,writable:true,initializer:null}),M))||D);V=Y;return V},false);
//# sourceMappingURL=QuickViewHeaderOptions.block.js.map