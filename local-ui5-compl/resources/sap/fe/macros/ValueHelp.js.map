{"version":3,"file":"ValueHelp.js","names":["ValueHelp","_dec","defineUI5Class","_dec2","association","type","_dec3","property","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_class","_class2","_BuildingBlock","props","others","_this","_flexId","id","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","requestGroupId","collaborationEnabled","_exports","_inheritsLoose","_proto","prototype","onMetadataAvailable","content","_getOwner","runAsOwner","createContent","metaContextPath","getMetaPathObject","metaPath","contextPath","metaModel","getMetaModel","entitySetOrSingleton","getClosestEntitySet","isEntitySet","ModelHelper","isCollaborationDraftSupported","createBindingContext","getPath","filterFieldValueHelp","FieldHelper","valueHelpPropertyForFilterField","valueHelpProperty","idPrefix","getValueHelpTemplate","getContextPath","useSemanticDateRange","opensOnFocus","useMultiValueField","navigationPrefix","requiresValidation","conditionModel","BuildingBlock","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./ValueHelp.tsx"],"sourcesContent":["import type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { association, defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { isEntitySet } from \"sap/fe/core/helpers/TypeGuards\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport { getValueHelpTemplate } from \"sap/fe/macros/internal/valuehelp/ValueHelpTemplating\";\n\nimport type Control from \"sap/ui/core/Control\";\n\n/**\n * Building block for creating a ValueHelp based on the provided OData V4 metadata.\n * @private\n */\n@defineUI5Class(\"sap.fe.macros.ValueHelp\")\nexport default class ValueHelp extends BuildingBlock {\n\t/**\n\t * A prefix that is added to the generated ID of the value help.\n\t */\n\t@association({ type: \"string\" })\n\tidPrefix?: string;\n\n\t/**\n\t * Defines the metadata path to the property.\n\t */\n\t@property({ type: \"string\" })\n\tmetaPath!: string;\n\n\t@property({ type: \"string\" })\n\tcontextPath!: string;\n\n\t/**\n\t * Indicator whether the value help is for a filter field.\n\t */\n\t@property({ type: \"string\" })\n\tconditionModel = \"\";\n\n\t/**\n\t * Indicates that this is a value help of a filter field. Necessary to decide if a\n\t * validation should occur on the back end or already on the client.\n\t */\n\t@property({ type: \"boolean\" })\n\tfilterFieldValueHelp = false;\n\n\t/**\n\t * Specifies the Sematic Date Range option for the filter field.\n\t */\n\t@property({ type: \"boolean\" })\n\tuseSemanticDateRange = true;\n\n\t/**\n\t * Specifies if the ValueHelp is opened on the focus event\n\t */\n\t@property({ type: \"boolean\" })\n\topensOnFocus = true;\n\n\t/**\n\t * Specifies whether the ValueHelp can be used with a MultiValueField\n\t */\n\t@property({ type: \"boolean\" })\n\tuseMultiValueField = false;\n\n\t@property({ type: \"string\" })\n\tnavigationPrefix?: string;\n\n\t@property({ type: \"boolean\" })\n\trequiresValidation = false;\n\n\t@association({ type: \"string\" })\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\t_flexId?: string;\n\n\trequestGroupId: string | undefined = \"$auto.Workers\";\n\n\tcollaborationEnabled = false;\n\n\tconstructor(props: PropertiesOf<ValueHelp>, others?: PropertiesOf<ValueHelp>) {\n\t\tif (props._flexId) {\n\t\t\tprops.id = props._flexId + \"::Block\";\n\t\t}\n\t\tsuper(props, others);\n\t}\n\n\tonMetadataAvailable(): void {\n\t\tif (!this.content) {\n\t\t\tthis._getOwner()?.runAsOwner(() => {\n\t\t\t\tthis.content = this.createContent();\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateContent(): Control | undefined {\n\t\tconst metaContextPath = this.getMetaPathObject(this.metaPath, this.contextPath);\n\t\tconst metaModel = this._getOwner()?.getMetaModel(this.metaModel);\n\t\tif (metaContextPath && metaModel) {\n\t\t\tconst entitySetOrSingleton = metaContextPath.getClosestEntitySet();\n\t\t\tif (isEntitySet(entitySetOrSingleton)) {\n\t\t\t\tthis.collaborationEnabled = ModelHelper.isCollaborationDraftSupported(metaModel);\n\t\t\t}\n\n\t\t\tlet metaPath = metaModel.createBindingContext(metaContextPath.getPath());\n\t\t\tif (metaPath) {\n\t\t\t\tif (this.filterFieldValueHelp) {\n\t\t\t\t\tmetaPath = metaModel.createBindingContext(FieldHelper.valueHelpPropertyForFilterField(metaPath))!;\n\t\t\t\t} else {\n\t\t\t\t\tmetaPath = metaModel.createBindingContext(FieldHelper.valueHelpProperty(metaPath))!;\n\t\t\t\t}\n\t\t\t\tconst idPrefix = this.idPrefix ?? \"ValueHelp\";\n\t\t\t\treturn getValueHelpTemplate(metaPath, {\n\t\t\t\t\tmetaPath: metaModel.createBindingContext(metaContextPath.getPath())!,\n\t\t\t\t\tcontextPath: metaModel.createBindingContext(metaContextPath.getContextPath())!,\n\t\t\t\t\tfilterFieldValueHelp: this.filterFieldValueHelp,\n\t\t\t\t\tuseSemanticDateRange: this.useSemanticDateRange,\n\t\t\t\t\topensOnFocus: this.opensOnFocus,\n\t\t\t\t\tuseMultiValueField: this.useMultiValueField,\n\t\t\t\t\tnavigationPrefix: this.navigationPrefix,\n\t\t\t\t\trequiresValidation: this.requiresValidation,\n\t\t\t\t\t_flexId: this._flexId,\n\t\t\t\t\tidPrefix: idPrefix,\n\t\t\t\t\tconditionModel: this.conditionModel,\n\t\t\t\t\trequestGroupId: this.requestGroupId,\n\t\t\t\t\tcollaborationEnabled: this.collaborationEnabled\n\t\t\t\t}) as Control | undefined;\n\t\t\t}\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}