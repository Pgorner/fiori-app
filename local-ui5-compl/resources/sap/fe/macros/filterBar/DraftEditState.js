/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/core/Lib","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/mdc/enums/ConditionValidated","sap/ui/mdc/enums/OperatorValueType","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel"],function(t,e,a,r,i,n,s,A){"use strict";const E=t.getResourceBundleFor("sap.fe.core");const D={ALL:{id:"ALL",display:E.getText("C_DRAFT_EDIT_STATE_DRAFT_ALL_FILTER")},UNCHANGED:{id:"UNCHANGED",display:E.getText("C_DRAFT_EDIT_STATE_DRAFT_UNCHANGED_FILTER")},OWN_DRAFT:{id:"OWN_DRAFT",display:E.getText("C_DRAFT_EDIT_STATE_DRAFT_OWN_DRAFT_FILTER")},LOCKED:{id:"LOCKED",display:E.getText("C_DRAFT_EDIT_STATE_DRAFT_LOCKED_FILTER")},UNSAVED_CHANGES:{id:"UNSAVED_CHANGES",display:E.getText("C_DRAFT_EDIT_STATE_DRAFT_UNSAVED_CHANGES_FILTER")},ALL_HIDING_DRAFTS:{id:"ALL_HIDING_DRAFTS",display:E.getText("C_DRAFT_EDIT_STATE_DRAFT_ALL_HIDING_DRAFTS_FILTER")},SAVED_ONLY:{id:"SAVED_ONLY",display:E.getText("C_DRAFT_EDIT_STATE_DRAFT_SAVED_ONLY_FILTER")},MY_DRAFTS:{id:"MY_DRAFTS",display:E.getText("C_DRAFT_EDIT_STATE_DRAFT_MY_DRAFTS_FILTER")},getEditStates:function(t){if(t){return[this.ALL,this.MY_DRAFTS,this.SAVED_ONLY]}else{return[this.ALL,this.ALL_HIDING_DRAFTS,this.UNCHANGED,this.OWN_DRAFT,this.LOCKED,this.UNSAVED_CHANGES]}},getEditStatesContext:function(t){let e;if(t.getProperty("isDraftCollaborative")){e=[D.ALL,D.MY_DRAFTS,D.SAVED_ONLY]}else{e=[D.ALL,D.ALL_HIDING_DRAFTS,D.UNCHANGED,D.OWN_DRAFT,D.LOCKED,D.UNSAVED_CHANGES]}return new A(e).bindContext("/").getBoundContext()},getCurrentUserID:function(){const t=sap.ui.require("sap/ushell/Container");return t?.getUser()?.getId()??window.adt?.userID},getFilterForEditState:function(t){switch(t){case D.UNCHANGED.id:return new n({filters:[new n({path:"IsActiveEntity",operator:s.EQ,value1:true}),new n({path:"HasDraftEntity",operator:s.EQ,value1:false})],and:true});case D.OWN_DRAFT.id:return new n({path:"IsActiveEntity",operator:s.EQ,value1:false});case D.LOCKED.id:return new n({filters:[new n({path:"IsActiveEntity",operator:s.EQ,value1:true}),new n({path:"SiblingEntity/IsActiveEntity",operator:s.EQ,value1:null}),new n({path:"DraftAdministrativeData/InProcessByUser",operator:s.NE,value1:""}),new n({path:"DraftAdministrativeData/InProcessByUser",operator:s.NE,value1:null})],and:true});case D.UNSAVED_CHANGES.id:return new n({filters:[new n({path:"IsActiveEntity",operator:s.EQ,value1:true}),new n({path:"SiblingEntity/IsActiveEntity",operator:s.EQ,value1:null}),new n({path:"DraftAdministrativeData/InProcessByUser",operator:s.EQ,value1:""})],and:true});case D.ALL_HIDING_DRAFTS.id:case D.SAVED_ONLY.id:return new n({path:"IsActiveEntity",operator:s.EQ,value1:true});case D.MY_DRAFTS.id:const t=this.getCurrentUserID();return t?new n({filters:[new n({path:"IsActiveEntity",operator:s.EQ,value1:false}),new n({path:"DraftAdministrativeData/DraftAdministrativeUser",operator:s.Any,variable:"user",condition:new n({path:"user/UserID",operator:s.EQ,value1:this.getCurrentUserID()})})],and:true}):new n({path:"IsActiveEntity",operator:s.EQ,value1:false});default:return new n({filters:[new n({path:"IsActiveEntity",operator:s.EQ,value1:false}),new n({path:"SiblingEntity/IsActiveEntity",operator:s.EQ,value1:null})],and:false})}},addDraftEditStateOperator:function(){e.addOperator(new a({name:"DRAFT_EDIT_STATE",filterOperator:"",valueTypes:[i.Self,null],tokenParse:"^(.*)$",format:function(t){return t&&t.values[1]},getModelFilter:function(t){return D.getFilterForEditState(t.values[0])},parse:function(t){return t},validateInput:true,checkValidated:function(t){t.validated=r.Validated}}))}};return D},false);
//# sourceMappingURL=DraftEditState.js.map