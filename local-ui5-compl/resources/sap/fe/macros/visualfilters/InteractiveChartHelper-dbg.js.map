{"version":3,"names":["InteractiveChartHelper","getChartDisplayedValue","value","valueFormat","metaPath","infoPath","generate","ScaleFactor","valueOf","NumberOfFractionalDigits","getChartValue","_getCollectionName","collection","contextPath","parameters","collectionObject","targetObject","isNavigationProperty","getPath","name","isEntitySet","_getBindingPathForParameters","filterConditions","metaModel","collectionName","entitySetPath","params","convertedFilterConditions","VisualFilterUtils","convertFilterCondions","parameterProperties","CommonUtils","getParameterInfo","i","parameter","property","entityPath","split","propertyContext","createBindingContext","typeConfig","TypeMap","getTypeConfig","$Type","JSTokenizer","parseJS","formatOptions","context","constraints","condition","conditionInternal","undefined","internalParameterCondition","ConditionConverter","toType","edmType","encodeURIComponent","ODataUtils","formatLiteral","values","replaceAll","push","parameterEntitySet","slice","lastIndexOf","targetNavigation","substring","toString","_getUOMAggregationExpression","customAggregate","UoMHasCustomAggregate","UOM","aggregation","aggregationExpression","UOMExpression","path","isPathAnnotationExpression","AggregatableProperty","AggregationMethod","getAggregationBinding","chartAnnotations","textAssociation","dimensionType","sortOrder","selectionVariant","filterBarContext","draftSupported","chartMeasure","selectionVariantAnnotation","entityType","dimension","Dimensions","filters","getUoM","getModel","operator","value1","value2","isParameter","getFiltersConditionsFromSelectionVariant","getCustomConditions","bind","conditions","forEach","length","bindingPath","UOMAggregationExpression","textAssociationExpression","filterExpression","JSON","stringify","getSortOrder","getMaxItems","_getOrderExpressionFromMeasure","sortPropertyName","DynamicProperty","$target","Name","Property","Descending","ChartType","getColorBinding","dataPoint","valueCriticality","annotations","UI","ValueCriticality","Criticality","buildExpressionForCriticalityColorMicroChart","CriticalityCalculation","oDirection","ImprovementDirection","oDataPointValue","Value","oDeviationRangeLowValue","DeviationRangeLowValue","oToleranceRangeLowValue","ToleranceRangeLowValue","oAcceptanceRangeLowValue","AcceptanceRangeLowValue","oAcceptanceRangeHighValue","AcceptanceRangeHighValue","oToleranceRangeHighValue","ToleranceRangeHighValue","oDeviationRangeHighValue","DeviationRangeHighValue","CommonHelper","getCriticalityCalculationBinding","getValueCriticality","result","valueCriticalityType","_getCriticalityFromEnum","join","criticality","valueColor","mLibrary","ValueColor","indicator","Error","Good","Critical","Neutral","getScaleUoMTitle","chartAnnotation","seperator","toolTip","scaleFactor","MeasureAttributes","DataPoint","ValueFormat","fixedInteger","NumberFormat","getIntegerInstance","style","showScale","shortRefNumber","scale","getScale","expression","getMeasureDimensionTitle","measureLabel","measurePath","Measures","DynamicMeasures","dimensionPath","dimensionLabel","Common","Label","Library","getResourceBundleFor","getText","getToolTip","renderLineChart","chartType","measureDimensionToolTip","escapeSingleQuotes","scaleUOMTooltip","_getUOM","UOMObjectPath","customData","aggregatablePropertyPath","UOMObject","$Path","entityProperties","isSingleton","targetType","propertyAnnotations","find","measure","ISOCurrency","unit","Unit","getScaleFactor","getUoMVisiblity","showError","getInParameterFiltersBinding","inParameters","parts","paths","inParameter","localDataProperty","getfilterCountBinding","getInteractiveChartProperties","visualFilter","interactiveChartProperties","id","showErrorExpression","errorMessageExpression","errorMessageTitleExpression","dataPointAnnotation","getParameters","getObject","dimensionText","Text","contextObjectPath","getInvolvedDataModelObjects","SortOrder","aggregationBinding","type","aggregateProperties","filterBarEntityType","scalefactor","uom","stringifyCustomData","inParameterFilters","stringifiedParameters","dimensionContext","fullyQualifiedName","dimensionObject","chartLabel","getTextBinding","displayedValue","color"],"sourceRoot":".","sources":["InteractiveChartHelper.ts"],"sourcesContent":["import type {\n\tEntitySet,\n\tEntityType,\n\tNavigationProperty,\n\tPathAnnotationExpression,\n\tProperty,\n\tPropertyAnnotationValue,\n\tPropertyPath\n} from \"@sap-ux/vocabularies-types\";\nimport type { AggregatedProperty, AggregatedPropertyType } from \"@sap-ux/vocabularies-types/vocabularies/Analytics\";\nimport type { Label, SortOrderType } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport type {\n\tChart,\n\tDataPoint,\n\tNumberFormat as NumberFormatType,\n\tPresentationVariant,\n\tSelectionVariant,\n\tValueCriticalityType\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport JSTokenizer from \"sap/base/util/JSTokenizer\";\nimport type { BindingToolkitExpression, CompiledBindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { PageContextPathTarget } from \"sap/fe/core/converters/TemplateConverter\";\nimport type { ParameterType } from \"sap/fe/core/converters/controls/ListReport/VisualFilters\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { isEntitySet, isNavigationProperty, isPathAnnotationExpression, isSingleton } from \"sap/fe/core/helpers/TypeGuards\";\nimport { buildExpressionForCriticalityColorMicroChart } from \"sap/fe/core/templating/CriticalityFormatters\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport VisualFilterUtils from \"sap/fe/macros/controls/filterbar/utils/VisualFilterUtils\";\nimport { constraints, formatOptions } from \"sap/fe/macros/filter/FilterFieldHelper\";\nimport type { FilterConditions } from \"sap/fe/macros/filterBar/FilterHelper\";\nimport { getFiltersConditionsFromSelectionVariant } from \"sap/fe/macros/filterBar/FilterHelper\";\nimport type { ValueColor } from \"sap/m/library\";\nimport mLibrary from \"sap/m/library\";\nimport Library from \"sap/ui/core/Lib\";\nimport NumberFormat from \"sap/ui/core/format/NumberFormat\";\nimport ConditionConverter from \"sap/ui/mdc/condition/ConditionConverter\";\nimport TypeMap from \"sap/ui/mdc/odata/v4/TypeMap\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport ODataUtils from \"sap/ui/model/odata/v4/ODataUtils\";\nimport { getTextBinding } from \"../field/FieldTemplating\";\nimport type VisualFilterBlock from \"./VisualFilter.block\";\ntype MeasureType = {\n\tvalue?: string;\n\tISOCurrency?: PathAnnotationExpression<string>;\n\tUnit?: PathAnnotationExpression<string>;\n};\ntype InteractiveChartType = {\n\tchartLabel?: BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n\taggregationBinding?: string;\n\terrorMessageTitleExpression?: string;\n\terrorMessageExpression?: string;\n\tshowErrorExpression?: string;\n\tinParameters?: string;\n\tdisplayedValue?: string;\n\tmeasure?: string;\n\tstringifiedParameters?: string;\n\tselectionVariantAnnotation?: string;\n\tinParameterFilters?: string;\n\tcolor?: string;\n\tuom?: string | PropertyAnnotationValue<unknown>;\n\tscalefactor?: number | object;\n};\n\nconst InteractiveChartHelper = {\n\tgetChartDisplayedValue: function (value: string, valueFormat?: NumberFormatType, metaPath?: string): string {\n\t\tconst infoPath = generate([metaPath]);\n\t\treturn (\n\t\t\t\"{parts:[{path:'\" +\n\t\t\tvalue +\n\t\t\t\"',type:'sap.ui.model.odata.type.Decimal', constraints:{'nullable':false}}\" +\n\t\t\t(valueFormat && valueFormat.ScaleFactor\n\t\t\t\t? \",{value:'\" + valueFormat.ScaleFactor.valueOf() + \"'}\"\n\t\t\t\t: \",{path:'internal>scalefactorNumber/\" + infoPath + \"'}\") +\n\t\t\t(valueFormat && valueFormat.NumberOfFractionalDigits\n\t\t\t\t? \",{value:'\" + valueFormat.NumberOfFractionalDigits + \"'}\"\n\t\t\t\t: \",{value:'0'}\") +\n\t\t\t\",{path:'internal>currency/\" +\n\t\t\tinfoPath +\n\t\t\t\"'}\" +\n\t\t\t\",{path:'\" +\n\t\t\tvalue +\n\t\t\t\"',type:'sap.ui.model.odata.type.String', constraints:{'nullable':false}}\" +\n\t\t\t\"], formatter:'VisualFilterRuntime.scaleVisualFilterValue'}\"\n\t\t); //+ sType.split('#').length ? sType.split('#')[1] : 'Decimal' + \"}\";\n\t},\n\tgetChartValue: function (value: string): string {\n\t\treturn \"{path:'\" + value + \"',type:'sap.ui.model.odata.type.Decimal', constraints:{'nullable':false}}\";\n\t},\n\t_getCollectionName: function (\n\t\tcollection: DataModelObjectPath<NavigationProperty | EntitySet | EntityType>,\n\t\tcontextPath: Context,\n\t\tparameters?: Array<string>\n\t): string {\n\t\tconst collectionObject = collection.targetObject;\n\t\tif (isNavigationProperty(collectionObject)) {\n\t\t\treturn parameters ? contextPath.getPath() : collectionObject.name;\n\t\t} else if (isEntitySet(collectionObject)) {\n\t\t\treturn \"/\" + collectionObject.name;\n\t\t} else {\n\t\t\treturn collectionObject!.name;\n\t\t}\n\t},\n\t_getBindingPathForParameters: function (\n\t\tfilterConditions: Record<string, FilterConditions[]>,\n\t\tmetaModel: ODataModel,\n\t\tcollectionName: string,\n\t\tparameters: Array<string>,\n\t\tentitySetPath: string\n\t): string {\n\t\tconst params = [];\n\t\tconst convertedFilterConditions = VisualFilterUtils.convertFilterCondions(filterConditions);\n\t\tconst parameterProperties = CommonUtils.getParameterInfo(\n\t\t\tmetaModel as unknown as ODataMetaModel,\n\t\t\tcollectionName\n\t\t).parameterProperties;\n\t\tif (parameterProperties) {\n\t\t\tfor (const i in parameters) {\n\t\t\t\tconst parameter = parameters[i];\n\t\t\t\tconst property = parameterProperties[parameter];\n\t\t\t\tconst entityPath = entitySetPath.split(\"/\")[1];\n\t\t\t\tconst propertyContext = metaModel.createBindingContext(`/${entityPath}/${parameter}`);\n\t\t\t\tconst typeConfig = TypeMap.getTypeConfig(\n\t\t\t\t\tproperty.$Type,\n\t\t\t\t\tJSTokenizer.parseJS(formatOptions(property, { context: propertyContext }) || \"{}\"),\n\t\t\t\t\tJSTokenizer.parseJS(constraints(property, { context: propertyContext }) || \"{}\")\n\t\t\t\t);\n\t\t\t\tconst condition = convertedFilterConditions[parameter];\n\t\t\t\tconst conditionInternal = condition ? condition[0] : undefined;\n\t\t\t\tif (conditionInternal) {\n\t\t\t\t\tconst internalParameterCondition = ConditionConverter.toType(conditionInternal, typeConfig, TypeMap);\n\t\t\t\t\tconst edmType = property.$Type;\n\t\t\t\t\tlet value = encodeURIComponent(ODataUtils.formatLiteral(internalParameterCondition.values[0], edmType));\n\t\t\t\t\tvalue = value.replaceAll(\"'\", \"\\\\'\");\n\t\t\t\t\tparams.push(`${parameter}=${value}`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst parameterEntitySet = collectionName.slice(0, collectionName.lastIndexOf(\"/\"));\n\t\tconst targetNavigation = collectionName.substring(collectionName.lastIndexOf(\"/\") + 1);\n\t\t// create parameter context\n\t\treturn `${parameterEntitySet}(${params.toString()})/${targetNavigation}`;\n\t},\n\t_getUOMAggregationExpression: function (\n\t\tcustomAggregate?: boolean,\n\t\tUoMHasCustomAggregate?: boolean,\n\t\tUOM?: PropertyAnnotationValue<unknown> | string,\n\t\taggregation?: AggregatedPropertyType\n\t): { aggregationExpression?: string; UOMExpression?: string } {\n\t\tlet aggregationExpression, UOMExpression;\n\t\tconst path = UOM && isPathAnnotationExpression(UOM) && UOM.path;\n\t\tif (customAggregate) {\n\t\t\t//custom aggregate for a currency or unit of measure corresponding to this aggregatable property\n\t\t\tif (UoMHasCustomAggregate) {\n\t\t\t\taggregationExpression = path ? `{ 'unit' : '${path}' }` : \"{}\";\n\t\t\t\tUOMExpression = \"\";\n\t\t\t} else {\n\t\t\t\taggregationExpression = \"{}\";\n\t\t\t\tUOMExpression = path ? `, '${path}' : {}` : \"\";\n\t\t\t}\n\t\t} else if (\n\t\t\taggregation &&\n\t\t\taggregation.AggregatableProperty &&\n\t\t\taggregation.AggregatableProperty.value &&\n\t\t\taggregation.AggregationMethod\n\t\t) {\n\t\t\taggregationExpression =\n\t\t\t\t\"{ 'name' : '\" + aggregation.AggregatableProperty.value + \"', 'with' : '\" + aggregation.AggregationMethod + \"'}\";\n\t\t\tUOMExpression = path ? \", '\" + path + \"' : {}\" : \"\";\n\t\t}\n\n\t\treturn {\n\t\t\taggregationExpression: aggregationExpression,\n\t\t\tUOMExpression: UOMExpression\n\t\t};\n\t},\n\tgetAggregationBinding: function (\n\t\tchartAnnotations: Chart,\n\t\tcollection: DataModelObjectPath<EntitySet | NavigationProperty>,\n\t\tcontextPath: Context,\n\t\ttextAssociation?: PathAnnotationExpression<string>,\n\t\tdimensionType?: string,\n\t\tsortOrder?: SortOrderType[],\n\t\tselectionVariant?: DataModelObjectPath<SelectionVariant>,\n\t\tcustomAggregate?: boolean,\n\t\taggregation?: AggregatedPropertyType,\n\t\tUoMHasCustomAggregate?: boolean,\n\t\tparameters?: Array<string>,\n\t\tfilterBarContext?: Context,\n\t\tdraftSupported?: boolean,\n\t\tchartMeasure?: string\n\t): string {\n\t\tconst selectionVariantAnnotation = selectionVariant?.targetObject;\n\t\tconst entityType = filterBarContext ? filterBarContext.getPath() : \"\";\n\t\tconst entitySetPath = contextPath.getPath();\n\t\tconst dimension = chartAnnotations.Dimensions[0].value;\n\t\tconst filters = [];\n\t\tlet filterConditions;\n\t\tlet collectionName = this._getCollectionName(collection, contextPath, parameters);\n\t\tconst UOM: PropertyAnnotationValue<unknown> | string | undefined = InteractiveChartHelper.getUoM(\n\t\t\tchartAnnotations,\n\t\t\tcollection,\n\t\t\tundefined,\n\t\t\tcustomAggregate,\n\t\t\taggregation\n\t\t);\n\t\tconst metaModel = contextPath.getModel();\n\t\tif (draftSupported) {\n\t\t\tfilters.push({\n\t\t\t\toperator: \"EQ\",\n\t\t\t\tvalue1: \"true\",\n\t\t\t\tvalue2: null,\n\t\t\t\tpath: \"IsActiveEntity\",\n\t\t\t\tisParameter: true\n\t\t\t});\n\t\t}\n\t\tif (selectionVariantAnnotation) {\n\t\t\tfilterConditions = getFiltersConditionsFromSelectionVariant(\n\t\t\t\tentitySetPath,\n\t\t\t\tmetaModel as unknown as ODataMetaModel,\n\t\t\t\tselectionVariantAnnotation,\n\t\t\t\tVisualFilterUtils.getCustomConditions.bind(VisualFilterUtils)\n\t\t\t);\n\t\t\tfor (const path in filterConditions) {\n\t\t\t\tconst conditions = filterConditions[path];\n\t\t\t\tconditions.forEach(function (condition: FilterConditions) {\n\t\t\t\t\tif (!condition.isParameter) {\n\t\t\t\t\t\tfilters.push(condition);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (entityType !== `${collectionName}/` && parameters && parameters.length && filterConditions) {\n\t\t\tconst bindingPath = this._getBindingPathForParameters(filterConditions, metaModel, collectionName, parameters, entitySetPath);\n\t\t\tcollectionName = bindingPath;\n\t\t}\n\t\tconst UOMAggregationExpression = this._getUOMAggregationExpression(customAggregate, UoMHasCustomAggregate, UOM, aggregation);\n\t\tconst aggregationExpression = UOMAggregationExpression.aggregationExpression;\n\t\tconst UOMExpression = UOMAggregationExpression.UOMExpression;\n\t\tconst textAssociationExpression = textAssociation ? \"' : { 'additionally' : ['\" + textAssociation.path + \"'] }\" : \"' : { }\";\n\t\tconst filterExpression = JSON.stringify(filters);\n\t\treturn (\n\t\t\t\"{path: '\" +\n\t\t\tcollectionName +\n\t\t\t\"', templateShareable: true, suspended : true, 'filters' : \" +\n\t\t\tfilterExpression +\n\t\t\t\",'parameters' : {\" +\n\t\t\tInteractiveChartHelper.getSortOrder(chartAnnotations, dimensionType, sortOrder, chartMeasure) +\n\t\t\t\", '$$aggregation' : {'aggregate' : {'\" +\n\t\t\tchartMeasure +\n\t\t\t\"' : \" +\n\t\t\taggregationExpression +\n\t\t\t\"},'group' : {'\" +\n\t\t\tdimension +\n\t\t\ttextAssociationExpression +\n\t\t\tUOMExpression +\n\t\t\t\"} } }\" +\n\t\t\tInteractiveChartHelper.getMaxItems(chartAnnotations) +\n\t\t\t\"}\"\n\t\t);\n\t},\n\t_getOrderExpressionFromMeasure: function (sortOrder?: SortOrderType[], chartMeasure?: string): string {\n\t\tlet sortPropertyName;\n\t\tif (sortOrder && sortOrder.length) {\n\t\t\tif (sortOrder[0].DynamicProperty) {\n\t\t\t\tsortPropertyName = (sortOrder[0].DynamicProperty.$target as AggregatedProperty)?.Name;\n\t\t\t} else {\n\t\t\t\tsortPropertyName = sortOrder[0].Property?.value;\n\t\t\t}\n\t\t\tif (sortPropertyName === chartMeasure) {\n\t\t\t\treturn \"'$orderby' : '\" + chartMeasure + (sortOrder[0].Descending ? \" desc'\" : \"'\");\n\t\t\t}\n\t\t\treturn \"'$orderby' : '\" + chartMeasure + \" desc'\";\n\t\t}\n\t\treturn \"'$orderby' : '\" + chartMeasure + \" desc'\";\n\t},\n\tgetSortOrder: function (chartAnnotations: Chart, dimensionType?: string, sortOrder?: SortOrderType[], chartMeasure?: string): string {\n\t\tif (chartAnnotations.ChartType === \"UI.ChartType/Donut\" || chartAnnotations.ChartType === \"UI.ChartType/Bar\") {\n\t\t\treturn this._getOrderExpressionFromMeasure(sortOrder, chartMeasure);\n\t\t} else if (dimensionType === \"Edm.Date\" || dimensionType === \"Edm.Time\" || dimensionType === \"Edm.DateTimeOffset\") {\n\t\t\treturn \"'$orderby' : '\" + chartAnnotations.Dimensions[0].value + \"'\";\n\t\t} else if (\n\t\t\tsortOrder &&\n\t\t\tsortOrder.length &&\n\t\t\t(sortOrder[0].Property?.$target as unknown as PathAnnotationExpression<string>)?.path === chartAnnotations.Dimensions[0].value\n\t\t) {\n\t\t\treturn \"'$orderby' : '\" + sortOrder[0].Property?.$target?.name + (sortOrder[0].Descending ? \" desc'\" : \"'\");\n\t\t} else {\n\t\t\treturn \"'$orderby' : '\" + chartAnnotations.Dimensions[0].$target?.name + \"'\";\n\t\t}\n\t},\n\tgetMaxItems: function (chartAnnotations: Chart): string {\n\t\tif (chartAnnotations.ChartType === \"UI.ChartType/Bar\") {\n\t\t\treturn \",'startIndex' : 0,'length' : 3\";\n\t\t} else if (chartAnnotations.ChartType === \"UI.ChartType/Line\") {\n\t\t\treturn \",'startIndex' : 0,'length' : 6\";\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t},\n\tgetColorBinding: function (dataPoint: DataPoint, dimension: PropertyPath): string | undefined {\n\t\tconst valueCriticality = dimension?.$target?.annotations?.UI?.ValueCriticality;\n\t\tif (dataPoint?.Criticality) {\n\t\t\treturn buildExpressionForCriticalityColorMicroChart(dataPoint);\n\t\t} else if (dataPoint?.CriticalityCalculation) {\n\t\t\tconst oDirection = dataPoint.CriticalityCalculation.ImprovementDirection;\n\t\t\tconst oDataPointValue = dataPoint.Value;\n\t\t\tconst oDeviationRangeLowValue = dataPoint.CriticalityCalculation.DeviationRangeLowValue.valueOf();\n\t\t\tconst oToleranceRangeLowValue = dataPoint.CriticalityCalculation.ToleranceRangeLowValue.valueOf();\n\t\t\tconst oAcceptanceRangeLowValue = dataPoint.CriticalityCalculation.AcceptanceRangeLowValue.valueOf();\n\t\t\tconst oAcceptanceRangeHighValue = dataPoint.CriticalityCalculation.AcceptanceRangeHighValue.valueOf();\n\t\t\tconst oToleranceRangeHighValue = dataPoint.CriticalityCalculation.ToleranceRangeHighValue.valueOf();\n\t\t\tconst oDeviationRangeHighValue = dataPoint.CriticalityCalculation.DeviationRangeHighValue.valueOf();\n\t\t\treturn CommonHelper.getCriticalityCalculationBinding(\n\t\t\t\toDirection,\n\t\t\t\toDataPointValue,\n\t\t\t\toDeviationRangeLowValue,\n\t\t\t\toToleranceRangeLowValue,\n\t\t\t\toAcceptanceRangeLowValue,\n\t\t\t\toAcceptanceRangeHighValue,\n\t\t\t\toToleranceRangeHighValue,\n\t\t\t\toDeviationRangeHighValue\n\t\t\t);\n\t\t} else if (valueCriticality && valueCriticality.length) {\n\t\t\treturn InteractiveChartHelper.getValueCriticality(dimension.value, valueCriticality);\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\tgetValueCriticality: function (dimension: string, valueCriticality: Array<ValueCriticalityType>): string | undefined {\n\t\tlet result;\n\t\tconst values: string[] = [];\n\t\tif (valueCriticality && valueCriticality.length > 0) {\n\t\t\tvalueCriticality.forEach(function (valueCriticalityType: ValueCriticalityType) {\n\t\t\t\tif (valueCriticalityType.Value && valueCriticalityType.Criticality) {\n\t\t\t\t\tconst value =\n\t\t\t\t\t\t\"${\" +\n\t\t\t\t\t\tdimension +\n\t\t\t\t\t\t\"} === '\" +\n\t\t\t\t\t\tvalueCriticalityType.Value +\n\t\t\t\t\t\t\"' ? '\" +\n\t\t\t\t\t\tInteractiveChartHelper._getCriticalityFromEnum(valueCriticalityType.Criticality) +\n\t\t\t\t\t\t\"'\";\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t});\n\t\t\tresult = values.length > 0 && values.join(\" : \") + \" : undefined\";\n\t\t}\n\t\treturn result ? \"{= \" + result + \" }\" : undefined;\n\t},\n\t/**\n\t * This function returns the criticality indicator from annotations if criticality is EnumMember.\n\t * @param criticality Criticality provided in the annotations\n\t * @returns Return the indicator for criticality\n\t * @private\n\t */\n\t_getCriticalityFromEnum: function (criticality: string): ValueColor {\n\t\tconst valueColor = mLibrary.ValueColor;\n\t\tlet indicator;\n\t\tif (criticality === \"UI.CriticalityType/Negative\") {\n\t\t\tindicator = valueColor.Error;\n\t\t} else if (criticality === \"UI.CriticalityType/Positive\") {\n\t\t\tindicator = valueColor.Good;\n\t\t} else if (criticality === \"UI.CriticalityType/Critical\") {\n\t\t\tindicator = valueColor.Critical;\n\t\t} else {\n\t\t\tindicator = valueColor.Neutral;\n\t\t}\n\t\treturn indicator;\n\t},\n\tgetScaleUoMTitle: function (\n\t\tchartAnnotation?: Chart,\n\t\tcollection?: DataModelObjectPath<PageContextPathTarget>,\n\t\tmetaPath?: string,\n\t\tcustomAggregate?: boolean,\n\t\taggregation?: AggregatedPropertyType,\n\t\tseperator?: string,\n\t\ttoolTip?: boolean\n\t): string {\n\t\tconst scaleFactor = chartAnnotation?.MeasureAttributes\n\t\t\t? chartAnnotation.MeasureAttributes[0]?.DataPoint?.$target?.ValueFormat?.ScaleFactor?.valueOf()\n\t\t\t: undefined;\n\t\tconst infoPath = generate([metaPath]);\n\t\tconst fixedInteger = NumberFormat.getIntegerInstance({\n\t\t\tstyle: \"short\",\n\t\t\tshowScale: false,\n\t\t\tshortRefNumber: scaleFactor as number\n\t\t});\n\t\tlet scale = fixedInteger.getScale();\n\t\tlet UOM = InteractiveChartHelper.getUoM(chartAnnotation, collection, undefined, customAggregate, aggregation);\n\t\tUOM = UOM && ((UOM as PathAnnotationExpression<string>).path ? \"${internal>uom/\" + infoPath + \"}\" : \"'\" + UOM + \"'\");\n\t\tscale = scale ? \"'\" + scale + \"'\" : \"${internal>scalefactor/\" + infoPath + \"}\";\n\t\tif (!seperator) {\n\t\t\tseperator = \"|\";\n\t\t}\n\t\tseperator = \"' \" + seperator + \" ' + \";\n\t\tconst expression = scale && UOM ? seperator + scale + \" + ' ' + \" + UOM : seperator + (scale || UOM);\n\t\treturn toolTip ? expression : \"{= \" + expression + \"}\";\n\t},\n\tgetMeasureDimensionTitle: function (chartAnnotation?: Chart, customAggregate?: boolean, aggregation?: AggregatedPropertyType): string {\n\t\tlet measureLabel;\n\t\tlet measurePath;\n\t\tif (customAggregate) {\n\t\t\tmeasurePath = chartAnnotation?.Measures[0]?.$target?.name;\n\t\t}\n\t\tif (chartAnnotation?.DynamicMeasures && chartAnnotation.DynamicMeasures.length > 0) {\n\t\t\tmeasurePath = (chartAnnotation.DynamicMeasures[0]?.$target as AggregatedPropertyType)?.AggregatableProperty?.value;\n\t\t} else if (!customAggregate && chartAnnotation?.Measures && chartAnnotation?.Measures.length > 0) {\n\t\t\tmeasurePath = chartAnnotation.Measures[0]?.$target?.name;\n\t\t}\n\t\tconst dimensionPath = chartAnnotation?.Dimensions[0]?.value as unknown as Label;\n\t\tlet dimensionLabel = chartAnnotation?.Dimensions[0]?.$target?.annotations?.Common?.Label;\n\t\tif (!customAggregate && aggregation) {\n\t\t\t// check if the label is part of aggregated properties (Transformation aggregates)\n\t\t\tmeasureLabel = aggregation.annotations && aggregation.annotations.Common && aggregation.annotations.Common.Label;\n\t\t\tif (measureLabel === undefined) {\n\t\t\t\tmeasureLabel = chartAnnotation?.Measures?.[0]?.$target?.annotations?.Common?.Label;\n\t\t\t}\n\t\t} else {\n\t\t\tmeasureLabel = chartAnnotation?.Measures?.[0]?.$target?.annotations?.Common?.Label;\n\t\t}\n\t\tif (measureLabel === undefined) {\n\t\t\tmeasureLabel = measurePath;\n\t\t}\n\t\tif (dimensionLabel === undefined) {\n\t\t\tdimensionLabel = dimensionPath;\n\t\t}\n\t\treturn Library.getResourceBundleFor(\"sap.fe.macros\")!.getText(\"M_INTERACTIVE_CHART_HELPER_VISUALFILTER_MEASURE_DIMENSION_TITLE\", [\n\t\t\tmeasureLabel,\n\t\t\tdimensionLabel\n\t\t]);\n\t},\n\n\tgetToolTip: function (\n\t\tchartAnnotation?: Chart,\n\t\tcollection?: DataModelObjectPath<PageContextPathTarget>,\n\t\tmetaPath?: string,\n\t\tcustomAggregate?: boolean,\n\t\taggregation?: AggregatedPropertyType,\n\t\trenderLineChart?: boolean | string\n\t): string {\n\t\tconst chartType = chartAnnotation && chartAnnotation[\"ChartType\"];\n\t\tlet measureDimensionToolTip = InteractiveChartHelper.getMeasureDimensionTitle(chartAnnotation, customAggregate, aggregation);\n\t\tmeasureDimensionToolTip = CommonHelper.escapeSingleQuotes(measureDimensionToolTip);\n\t\tif (renderLineChart === \"false\" && chartType === \"UI.ChartType/Line\") {\n\t\t\treturn `{= '${measureDimensionToolTip}'}`;\n\t\t}\n\n\t\tconst seperator = Library.getResourceBundleFor(\"sap.fe.macros\")?.getText(\n\t\t\t\"M_INTERACTIVE_CHART_HELPER_VISUALFILTER_TOOLTIP_SEPERATOR\"\n\t\t);\n\t\tconst infoPath = generate([metaPath]);\n\t\tconst scaleUOMTooltip = InteractiveChartHelper.getScaleUoMTitle(\n\t\t\tchartAnnotation,\n\t\t\tcollection,\n\t\t\tinfoPath,\n\t\t\tcustomAggregate,\n\t\t\taggregation,\n\t\t\tseperator,\n\t\t\ttrue\n\t\t);\n\t\treturn \"{= '\" + measureDimensionToolTip + (scaleUOMTooltip ? \"' + \" + scaleUOMTooltip : \"'\") + \"}\";\n\t},\n\t_getUOM: function (\n\t\tUOMObjectPath?: PropertyAnnotationValue<unknown>,\n\t\tUOM?: \"ISOCurrency\" | \"Unit\",\n\t\tcollection?: DataModelObjectPath<PageContextPathTarget>,\n\t\tcustomData?: boolean,\n\t\taggregatablePropertyPath?: string\n\t): string | PropertyAnnotationValue<unknown> | undefined {\n\t\tconst UOMObject: Record<string, unknown> = {};\n\t\tconst collectionObject = collection?.targetObject;\n\t\tif (UOMObjectPath && UOM && isPathAnnotationExpression(UOMObjectPath)) {\n\t\t\t// check if the UOM is part of Measure annotations(Custom aggregates)\n\t\t\tUOMObject[UOM] = { $Path: UOMObjectPath.path };\n\t\t\treturn customData && UOMObjectPath.path ? JSON.stringify(UOMObject) : UOMObjectPath;\n\t\t} else if (aggregatablePropertyPath) {\n\t\t\t// check if the UOM is part of base property annotations(Transformation aggregates)\n\t\t\tconst entityProperties =\n\t\t\t\tisEntitySet(collectionObject) || isSingleton(collectionObject)\n\t\t\t\t\t? collectionObject.entityType.entityProperties\n\t\t\t\t\t: collectionObject?.targetType?.entityProperties;\n\t\t\tconst propertyAnnotations = entityProperties?.find((property: Property) => property.name == aggregatablePropertyPath);\n\t\t\tif (propertyAnnotations?.annotations?.Measures && UOM) {\n\t\t\t\tUOMObjectPath = propertyAnnotations?.annotations?.Measures[UOM] as PathAnnotationExpression<unknown>;\n\t\t\t\tUOMObject[UOM] = { $Path: UOMObjectPath?.path };\n\t\t\t}\n\t\t\treturn UOMObjectPath && customData && isPathAnnotationExpression(UOMObjectPath) && UOMObjectPath.path\n\t\t\t\t? JSON.stringify(UOMObject)\n\t\t\t\t: UOMObjectPath;\n\t\t}\n\t},\n\tgetUoM: function (\n\t\tchartAnnotation?: Chart,\n\t\tcollection?: DataModelObjectPath<PageContextPathTarget>,\n\t\tcustomData?: boolean,\n\t\tcustomAggregate?: boolean,\n\t\taggregation?: AggregatedPropertyType\n\t): string | PropertyAnnotationValue<unknown> | undefined {\n\t\tlet measure: MeasureType = {};\n\t\tif (customAggregate) {\n\t\t\tmeasure = chartAnnotation?.Measures[0] as MeasureType;\n\t\t}\n\t\tif (chartAnnotation?.DynamicMeasures && chartAnnotation.DynamicMeasures.length > 0) {\n\t\t\tmeasure = (chartAnnotation.DynamicMeasures[0]?.$target as AggregatedPropertyType)?.AggregatableProperty?.$target?.annotations\n\t\t\t\t?.Measures as MeasureType;\n\t\t} else if (!customAggregate && chartAnnotation?.Measures && chartAnnotation.Measures.length > 0) {\n\t\t\tmeasure = chartAnnotation.Measures[0];\n\t\t}\n\t\tconst ISOCurrency = measure?.ISOCurrency;\n\t\tconst unit = measure?.Unit;\n\t\tlet aggregatablePropertyPath: string | undefined;\n\t\tif (!customAggregate && aggregation) {\n\t\t\taggregatablePropertyPath = aggregation.AggregatableProperty && aggregation.AggregatableProperty.value;\n\t\t} else {\n\t\t\taggregatablePropertyPath = measure?.value;\n\t\t}\n\t\treturn (\n\t\t\tthis._getUOM(ISOCurrency, \"ISOCurrency\", collection, customData, aggregatablePropertyPath) ||\n\t\t\tthis._getUOM(unit, \"Unit\", collection, customData, aggregatablePropertyPath)\n\t\t);\n\t},\n\tgetScaleFactor: function (valueFormat?: NumberFormatType): number | undefined {\n\t\tif (valueFormat && valueFormat.ScaleFactor) {\n\t\t\treturn valueFormat.ScaleFactor.valueOf();\n\t\t}\n\t\treturn undefined;\n\t},\n\tgetUoMVisiblity: function (chartAnnotation?: Chart, showError?: boolean): boolean {\n\t\tconst chartType = chartAnnotation && chartAnnotation[\"ChartType\"];\n\t\tif (showError) {\n\t\t\treturn false;\n\t\t} else if (!(chartType === \"UI.ChartType/Bar\" || chartType === \"UI.ChartType/Line\")) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t},\n\tgetInParameterFiltersBinding: function (inParameters: Array<ParameterType>): string | undefined {\n\t\tif (inParameters.length > 0) {\n\t\t\tconst parts: string[] = [];\n\t\t\tlet paths = \"\";\n\t\t\tinParameters.forEach(function (inParameter: ParameterType) {\n\t\t\t\tif (inParameter.localDataProperty) {\n\t\t\t\t\tparts.push(`{path:'$filters>/conditions/${inParameter.localDataProperty}'}`);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (parts.length > 0) {\n\t\t\t\tpaths = parts.join();\n\t\t\t\treturn `{parts:[${paths}], formatter:'sap.fe.macros.visualfilters.VisualFilterRuntime.getFiltersFromConditions'}`;\n\t\t\t} else {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\n\tgetfilterCountBinding: function (chartAnnotation?: Chart): string {\n\t\tconst dimension = chartAnnotation?.Dimensions[0]?.$target?.name;\n\t\treturn (\n\t\t\t\"{path:'$filters>/conditions/\" + dimension + \"', formatter:'sap.fe.macros.visualfilters.VisualFilterRuntime.getFilterCounts'}\"\n\t\t);\n\t},\n\n\tgetInteractiveChartProperties: function (visualFilter: VisualFilterBlock): InteractiveChartType {\n\t\tconst chartAnnotation = visualFilter.chartAnnotation;\n\t\tconst interactiveChartProperties: InteractiveChartType = {};\n\t\tif (visualFilter.chartMeasure && chartAnnotation?.Dimensions && chartAnnotation.Dimensions[0]) {\n\t\t\tconst id = generate([visualFilter.metaPath?.getPath()]);\n\t\t\tinteractiveChartProperties.showErrorExpression = \"${internal>\" + id + \"/showError}\";\n\t\t\tinteractiveChartProperties.errorMessageExpression = \"{internal>\" + id + \"/errorMessage}\";\n\t\t\tinteractiveChartProperties.errorMessageTitleExpression = \"{internal>\" + id + \"/errorMessageTitle}\";\n\t\t\tlet dataPointAnnotation;\n\t\t\tif (chartAnnotation?.MeasureAttributes && chartAnnotation?.MeasureAttributes[0]) {\n\t\t\t\tdataPointAnnotation = chartAnnotation?.MeasureAttributes[0]?.DataPoint\n\t\t\t\t\t? chartAnnotation?.MeasureAttributes[0].DataPoint.$target\n\t\t\t\t\t: chartAnnotation?.MeasureAttributes[0];\n\t\t\t}\n\t\t\tconst dimension = chartAnnotation?.Dimensions[0];\n\t\t\tconst parameters = CommonHelper.getParameters(visualFilter.contextPath.getObject(), { context: visualFilter.contextPath });\n\t\t\tconst dimensionText = dimension?.$target?.annotations?.Common?.Text as unknown as PathAnnotationExpression<string>;\n\t\t\tconst contextObjectPath = getInvolvedDataModelObjects<PresentationVariant>(\n\t\t\t\tvisualFilter.metaPath,\n\t\t\t\tvisualFilter.contextPath\n\t\t\t).targetObject;\n\t\t\tconst collection = getInvolvedDataModelObjects<EntitySet | NavigationProperty>(visualFilter.contextPath);\n\t\t\tconst selectionVariant = visualFilter.selectionVariantAnnotation\n\t\t\t\t? getInvolvedDataModelObjects<SelectionVariant>(visualFilter.selectionVariantAnnotation)\n\t\t\t\t: undefined;\n\t\t\tconst sortOrder = contextObjectPath?.SortOrder;\n\t\t\tinteractiveChartProperties.aggregationBinding = InteractiveChartHelper.getAggregationBinding(\n\t\t\t\tchartAnnotation,\n\t\t\t\tcollection,\n\t\t\t\tvisualFilter.contextPath,\n\t\t\t\tdimensionText,\n\t\t\t\tdimension.$target?.type,\n\t\t\t\tsortOrder,\n\t\t\t\tselectionVariant,\n\t\t\t\tvisualFilter.customAggregate,\n\t\t\t\tvisualFilter.aggregateProperties,\n\t\t\t\tvisualFilter.UoMHasCustomAggregate,\n\t\t\t\tparameters,\n\t\t\t\tvisualFilter.filterBarEntityType,\n\t\t\t\tvisualFilter.draftSupported,\n\t\t\t\tvisualFilter.chartMeasure\n\t\t\t);\n\t\t\tinteractiveChartProperties.scalefactor = InteractiveChartHelper.getScaleFactor((dataPointAnnotation as DataPoint)?.ValueFormat);\n\t\t\tinteractiveChartProperties.uom = InteractiveChartHelper.getUoM(\n\t\t\t\tchartAnnotation,\n\t\t\t\tcollection,\n\t\t\t\ttrue,\n\t\t\t\tvisualFilter.customAggregate,\n\t\t\t\tvisualFilter.aggregateProperties\n\t\t\t);\n\t\t\tinteractiveChartProperties.inParameters = CommonHelper.stringifyCustomData(visualFilter.inParameters as object);\n\t\t\tinteractiveChartProperties.inParameterFilters = visualFilter.inParameters\n\t\t\t\t? InteractiveChartHelper.getInParameterFiltersBinding(visualFilter.inParameters)\n\t\t\t\t: undefined;\n\t\t\tinteractiveChartProperties.selectionVariantAnnotation = visualFilter.selectionVariantAnnotation\n\t\t\t\t? CommonHelper.stringifyCustomData(visualFilter.selectionVariantAnnotation)\n\t\t\t\t: undefined;\n\t\t\tinteractiveChartProperties.stringifiedParameters = CommonHelper.stringifyCustomData(parameters);\n\t\t\tconst dimensionContext = visualFilter.metaPath\n\t\t\t\t?.getModel()\n\t\t\t\t?.createBindingContext(visualFilter.contextPath.getPath() + \"/@\" + dimension.fullyQualifiedName.split(\"@\")[1]);\n\t\t\tif (dimensionContext) {\n\t\t\t\tconst dimensionObject = getInvolvedDataModelObjects<Property>(dimensionContext, visualFilter.contextPath);\n\t\t\t\tinteractiveChartProperties.chartLabel = getTextBinding(dimensionObject, {});\n\t\t\t}\n\t\t\tinteractiveChartProperties.measure = InteractiveChartHelper.getChartValue(visualFilter.chartMeasure);\n\t\t\tinteractiveChartProperties.displayedValue = InteractiveChartHelper.getChartDisplayedValue(\n\t\t\t\tvisualFilter.chartMeasure,\n\t\t\t\t(dataPointAnnotation as DataPoint)?.ValueFormat,\n\t\t\t\tvisualFilter.metaPath?.getPath()\n\t\t\t);\n\t\t\tinteractiveChartProperties.color = InteractiveChartHelper.getColorBinding(dataPointAnnotation as DataPoint, dimension);\n\t\t}\n\t\treturn interactiveChartProperties;\n\t}\n};\n\nexport default InteractiveChartHelper;\n"],"mappings":"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","ignoreList":[],"file":"InteractiveChartHelper-dbg.js"}