{"version":3,"names":["NS_MACRODATA","_retrieveModel","control","detachModelContextChange","sModelName","modelName","oModel","getModel","resolve","attachModelContextChange","DelegateUtil","FETCHED_PROPERTIES_DATA_KEY","setCachedProperties","fetchedProperties","window","Element","key","setCustomData","getCachedProperties","undefined","getCustomData","getCustomDataWithModifier","property","modifier","Promise","customData","retrieveCustomDataNode","length","getProperty","oControl","sProperty","getAttributeNS","data","Function","vValue","setAttributeNS","fetchPropertiesForEntity","sEntitySet","oMetaModel","requestObject","fetchAnnotationsForEntity","fetchModel","getDelegate","payload","oContext","call","templateControlFragment","sFragmentName","oPreprocessorSettings","oOptions","oModifier","CommonUtils","doesValueHelpExist","mParameters","sPropertyName","sValueHelpType","sOriginalProperty","sBindingPath","propertyContext","createBindingContext","valueHelpPropertyPath","FieldHelper","valueHelpProperty","bIsAbsolute","indexOf","includes","getObject","propertyDataModel","getInvolvedDataModelObjects","unitOrCurrencyPropertyPath","getAssociatedCurrencyPropertyPath","targetObject","getAssociatedUnitPropertyPath","unitOrCurrencyDataModel","enhanceDataModelPath","getTargetObjectPath","sGeneratedId","generateID","flexId","generate","getId","getRelativePropertyPath","context","getPath","then","getAggregation","aDependents","oDependent","oTargetDependent","getControlType","targets","getContent","oDependentAsUi5Element","isA","isValueHelpRequired","bInFilterField","oPropertyContext","sValueHelpProperty","bReadOnly","all","aResults","Array","isArray","catch","oError","Log","warning","isMultiValue","oProperty","bIsMultiValue","filterExpression","type","propertyKey","aRetrievedCustomData","bind","oCustomData","push"],"sourceRoot":".","sources":["DelegateUtil.ts"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport type { BaseTreeModifier, PreprocessorSettings } from \"sap/fe/core/CommonUtils\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type ExtensionAPI from \"sap/fe/core/ExtensionAPI\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type {\n\tColumnExportSettings,\n\tCustomBasedTableColumn,\n\tExtensionForAnalytics,\n\tPropertyTypeConfig,\n\tVisualSettings\n} from \"sap/fe/core/converters/controls/Common/Table\";\nimport type { CustomElement } from \"sap/fe/core/converters/helpers/ConfigurableObject\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { enhanceDataModelPath, getTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport type { DisplayMode } from \"sap/fe/core/templating/DisplayModeFormatter\";\nimport { getRelativePropertyPath } from \"sap/fe/core/templating/PropertyFormatters\";\nimport { getAssociatedCurrencyPropertyPath, getAssociatedUnitPropertyPath } from \"sap/fe/core/templating/PropertyHelper\";\nimport type ValueHelp from \"sap/fe/macros/ValueHelp\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport { generateID } from \"sap/fe/macros/internal/valuehelp/ValueHelpTemplating\";\nimport type UI5Element from \"sap/ui/core/Element\";\nimport type View from \"sap/ui/core/mvc/View\";\nimport type Model from \"sap/ui/model/Model\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\nconst NS_MACRODATA = \"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\";\n\nexport type tableDelegateModel = {\n\tenableAutoColumnWidth: boolean;\n\treadOnly: boolean;\n\ttableType: string;\n\tonChange: Function;\n\tid: string;\n\tnavigationPropertyPath: string;\n\tcolumnInfo: CustomElement<CustomBasedTableColumn>;\n\tcollection: {\n\t\tsPath: string;\n\t\toModel: string;\n\t};\n\twidthIncludingColumnHeader: boolean;\n};\n\nexport type PropertyInfo = {\n\tadditionalLabels?: string[];\n\tcaseSensitive?: boolean;\n\tdescription?: string;\n\tdescriptionProperty?: string;\n\texportSettings?: ColumnExportSettings | null;\n\tclipboardSettings?: Object | null;\n\tformatOptions?: Object | null;\n\tfilterable?: boolean;\n\tgroup?: string;\n\tgroupable?: boolean;\n\tfilterExpression?: string;\n\tgroupLabel?: string;\n\tisKey?: boolean;\n\tlabel?: string;\n\tmaxConditions?: number;\n\tmetadataPath?: string;\n\tmode?: DisplayMode;\n\tname: string;\n\tkey?: string;\n\tpath?: string;\n\tpropertyInfos?: string[];\n\trelativePath?: string;\n\tsortable?: boolean;\n\tsortDirection?: string;\n\ttext?: string;\n\ttooltip?: string;\n\ttypeConfig?: PropertyTypeConfig;\n\ttype?: string;\n\tunit?: string;\n\tvalueProperty?: string;\n\tvisible?: boolean;\n\tvisualSettings?: VisualSettings;\n\texportDataPointTargetValue?: string;\n\tisParameter?: boolean;\n\taggregatable?: boolean;\n\trequired?: boolean;\n\textension?: ExtensionForAnalytics;\n};\n\nfunction _retrieveModel(this: {\n\tmodelName: string | undefined;\n\tcontrol: UI5Element & { getDelegate: () => { payload?: { modelName: string } } };\n\tresolve: Function;\n}): void {\n\tthis.control.detachModelContextChange(_retrieveModel, this);\n\tconst sModelName = this.modelName,\n\t\toModel = this.control.getModel(sModelName);\n\n\tif (oModel) {\n\t\tthis.resolve(oModel);\n\t} else {\n\t\tthis.control.attachModelContextChange(_retrieveModel, this);\n\t}\n}\n\nexport type Modifier = {\n\tgetAggregation: Function;\n\tgetProperty: Function;\n\tsetProperty: Function;\n\tinsertAggregation: Function;\n};\n\nconst DelegateUtil = {\n\tFETCHED_PROPERTIES_DATA_KEY: \"sap_fe_ControlDelegate_propertyInfoMap\",\n\tsetCachedProperties(control: Element | UI5Element, fetchedProperties: PropertyInfo[]): void {\n\t\t// do not cache during templating, else it becomes part of the cached view\n\t\tif (control instanceof window.Element) {\n\t\t\treturn;\n\t\t}\n\t\tconst key = DelegateUtil.FETCHED_PROPERTIES_DATA_KEY;\n\t\tDelegateUtil.setCustomData(control, key, fetchedProperties as unknown as string);\n\t},\n\tgetCachedProperties(control: Element | UI5Element): PropertyInfo[] | undefined {\n\t\t// properties are not cached during templating\n\t\tif (control instanceof window.Element) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst key = DelegateUtil.FETCHED_PROPERTIES_DATA_KEY;\n\t\treturn DelegateUtil.getCustomData<PropertyInfo[]>(control, key);\n\t},\n\tasync getCustomDataWithModifier<T = unknown>(\n\t\tcontrol: Element | UI5Element,\n\t\tproperty: string,\n\t\tmodifier?: BaseTreeModifier\n\t): Promise<T | undefined> {\n\t\tif (!modifier) {\n\t\t\treturn Promise.resolve(DelegateUtil.getCustomData<T>(control, property));\n\t\t}\n\t\tconst customData = await DelegateUtil.retrieveCustomDataNode(control, property, modifier);\n\t\tif (customData.length === 1) {\n\t\t\treturn modifier.getProperty(customData[0], \"value\");\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\n\tgetCustomData<T = unknown>(oControl: Element | UI5Element, sProperty: string): T | undefined {\n\t\t// Delegate invoked from a non-flex change - FilterBarDelegate._addP13nItem for OP table filtering, FilterBarDelegate.fetchProperties etc.\n\t\tif (oControl && sProperty) {\n\t\t\tif (oControl instanceof window.Element) {\n\t\t\t\treturn oControl.getAttributeNS(NS_MACRODATA, sProperty) as T;\n\t\t\t}\n\t\t\tif (oControl.data instanceof Function) {\n\t\t\t\treturn oControl.data(sProperty);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t},\n\n\tsetCustomData(oControl: Element | UI5Element, sProperty: string, vValue: unknown): void {\n\t\tif (oControl && sProperty) {\n\t\t\tif (oControl instanceof window.Element) {\n\t\t\t\treturn oControl.setAttributeNS(NS_MACRODATA, `customData:${sProperty}`, vValue as string);\n\t\t\t}\n\t\t\tif (oControl.data instanceof Function) {\n\t\t\t\treturn oControl.data(sProperty, vValue);\n\t\t\t}\n\t\t}\n\t},\n\tfetchPropertiesForEntity(sEntitySet: string, oMetaModel: ODataMetaModel): unknown {\n\t\treturn oMetaModel.requestObject(`${sEntitySet}/`);\n\t},\n\tfetchAnnotationsForEntity(sEntitySet: string, oMetaModel: ODataMetaModel): unknown {\n\t\treturn oMetaModel.requestObject(`${sEntitySet}@`);\n\t},\n\tasync fetchModel(oControl: UI5Element & { getDelegate: () => { payload?: { modelName: string } } }): Promise<Model> {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst sModelName = oControl.getDelegate().payload && oControl.getDelegate().payload?.modelName,\n\t\t\t\toContext = { modelName: sModelName, control: oControl, resolve: resolve };\n\t\t\t_retrieveModel.call(oContext);\n\t\t});\n\t},\n\tasync templateControlFragment(\n\t\tsFragmentName: string | Element | null,\n\t\toPreprocessorSettings: PreprocessorSettings,\n\t\toOptions?: { view?: View; isXML?: boolean; id?: string; controller?: PageController | ExtensionAPI; containingView?: View },\n\t\toModifier?: BaseTreeModifier\n\t): Promise<Element | UI5Element | Element[] | UI5Element[]> {\n\t\treturn CommonUtils.templateControlFragment(sFragmentName, oPreprocessorSettings, oOptions, oModifier);\n\t},\n\n\tasync doesValueHelpExist(mParameters: {\n\t\tsPropertyName: string;\n\t\tsValueHelpType: string;\n\t\toMetaModel: ODataMetaModel;\n\t\toModifier?: BaseTreeModifier;\n\t\tsBindingPath: string;\n\t\tflexId?: string;\n\t\toControl: Element | UI5Element;\n\t}): Promise<boolean> {\n\t\tconst sPropertyName = mParameters.sPropertyName || \"\";\n\t\tconst sValueHelpType = mParameters.sValueHelpType || \"\";\n\t\tconst oMetaModel = mParameters.oMetaModel;\n\t\tconst oModifier = mParameters.oModifier;\n\t\tconst sOriginalProperty = `${mParameters.sBindingPath}/${sPropertyName}`;\n\t\tconst propertyContext = oMetaModel.createBindingContext(sOriginalProperty)!;\n\t\tlet valueHelpPropertyPath = FieldHelper.valueHelpProperty(propertyContext);\n\t\tconst bIsAbsolute = mParameters.sBindingPath && mParameters.sBindingPath.indexOf(\"/\") === 0;\n\n\t\t// unit/currency\n\t\tif (valueHelpPropertyPath.includes(\"$Path\")) {\n\t\t\tvalueHelpPropertyPath = oMetaModel.getObject(valueHelpPropertyPath);\n\t\t}\n\t\tif (bIsAbsolute && valueHelpPropertyPath.indexOf(\"/\") !== 0) {\n\t\t\tconst propertyDataModel = getInvolvedDataModelObjects(propertyContext);\n\t\t\tconst unitOrCurrencyPropertyPath =\n\t\t\t\tgetAssociatedCurrencyPropertyPath(propertyDataModel.targetObject as Property) ||\n\t\t\t\tgetAssociatedUnitPropertyPath(propertyDataModel.targetObject as Property);\n\t\t\tconst unitOrCurrencyDataModel = enhanceDataModelPath(propertyDataModel, unitOrCurrencyPropertyPath);\n\t\t\tvalueHelpPropertyPath = getTargetObjectPath(unitOrCurrencyDataModel);\n\t\t}\n\n\t\tconst sGeneratedId = generateID(\n\t\t\tmParameters.flexId,\n\t\t\tgenerate([oModifier ? oModifier.getId(mParameters.oControl) : (mParameters.oControl as UI5Element).getId(), sValueHelpType]),\n\t\t\tgetRelativePropertyPath(propertyContext.getProperty(sOriginalProperty), {\n\t\t\t\tcontext: {\n\t\t\t\t\tgetModel: () => {\n\t\t\t\t\t\treturn mParameters.oMetaModel;\n\t\t\t\t\t},\n\t\t\t\t\tgetPath: () => {\n\t\t\t\t\t\treturn sOriginalProperty;\n\t\t\t\t\t}\n\t\t\t\t} as unknown as Context\n\t\t\t}),\n\t\t\tgetRelativePropertyPath(propertyContext.getProperty(valueHelpPropertyPath), {\n\t\t\t\tcontext: {\n\t\t\t\t\tgetModel: () => {\n\t\t\t\t\t\treturn mParameters.oMetaModel;\n\t\t\t\t\t},\n\t\t\t\t\tgetPath: () => {\n\t\t\t\t\t\treturn valueHelpPropertyPath;\n\t\t\t\t\t}\n\t\t\t\t} as unknown as Context\n\t\t\t})\n\t\t);\n\n\t\treturn Promise.resolve()\n\t\t\t.then(async function () {\n\t\t\t\tif (oModifier) {\n\t\t\t\t\treturn oModifier.getAggregation(mParameters.oControl, \"dependents\");\n\t\t\t\t}\n\t\t\t\treturn (mParameters.oControl as UI5Element).getAggregation(\"dependents\") as UI5Element[];\n\t\t\t})\n\t\t\t.then(function (aDependents: Element[] | UI5Element[]) {\n\t\t\t\tif (aDependents) {\n\t\t\t\t\tfor (const oDependent of aDependents) {\n\t\t\t\t\t\tlet oTargetDependent: UI5Element | Element | undefined = oDependent;\n\t\t\t\t\t\tif (oModifier) {\n\t\t\t\t\t\t\tif (oModifier.getControlType(oDependent) === \"sap.fe.macros.ValueHelp\" && oModifier.targets !== \"xmlTree\") {\n\t\t\t\t\t\t\t\toTargetDependent = (oDependent as ValueHelp).getContent();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (oTargetDependent && oModifier.getId(oTargetDependent) === sGeneratedId) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst oDependentAsUi5Element = oDependent as UI5Element;\n\t\t\t\t\t\t\tif (oDependentAsUi5Element.isA<ValueHelp>(\"sap.fe.macros.ValueHelp\")) {\n\t\t\t\t\t\t\t\toTargetDependent = oDependentAsUi5Element.getContent();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ((oTargetDependent as UI5Element)?.getId() === sGeneratedId) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t},\n\tasync isValueHelpRequired(\n\t\tmParameters: {\n\t\t\tsPropertyName: string;\n\t\t\toMetaModel: ODataMetaModel;\n\t\t\tsBindingPath: string;\n\t\t\toControl: Element | UI5Element;\n\t\t\toModifier: BaseTreeModifier;\n\t\t},\n\t\tbInFilterField?: boolean\n\t): Promise<boolean> {\n\t\tconst sPropertyName = mParameters.sPropertyName || \"\",\n\t\t\toMetaModel = mParameters.oMetaModel,\n\t\t\tsProperty = `${mParameters.sBindingPath}/${sPropertyName}`,\n\t\t\toPropertyContext = oMetaModel.createBindingContext(sProperty)!,\n\t\t\tsValueHelpProperty = FieldHelper.valueHelpProperty(oPropertyContext, bInFilterField);\n\n\t\treturn this.getCustomDataWithModifier<string | boolean>(mParameters.oControl, \"displayModePropertyBinding\", mParameters.oModifier)\n\t\t\t.then(async function (bReadOnly: string | boolean | undefined) {\n\t\t\t\t// Check whether the control is read-only. If yes, no need of a value help.\n\t\t\t\tbReadOnly = typeof bReadOnly === \"boolean\" ? bReadOnly : bReadOnly === \"true\";\n\t\t\t\tif (bReadOnly) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// Else, check whether Value Help relevant annotation exists for the property.\n\t\t\t\t// TODO use PropertyFormatter.hasValueHelp () => if doing so, QUnit tests fail due to mocked model implementation\n\t\t\t\treturn Promise.all([\n\t\t\t\t\toMetaModel.requestObject(`${sValueHelpProperty}@com.sap.vocabularies.Common.v1.ValueListWithFixedValues`),\n\t\t\t\t\toMetaModel.requestObject(`${sValueHelpProperty}@com.sap.vocabularies.Common.v1.ValueListReferences`),\n\t\t\t\t\toMetaModel.requestObject(`${sValueHelpProperty}@com.sap.vocabularies.Common.v1.ValueListMapping`),\n\t\t\t\t\toMetaModel.requestObject(`${sValueHelpProperty}@com.sap.vocabularies.Common.v1.ValueList`)\n\t\t\t\t]);\n\t\t\t})\n\t\t\t.then(function (aResults: boolean | [object, object, object, object]) {\n\t\t\t\tif (!Array.isArray(aResults)) {\n\t\t\t\t\treturn aResults;\n\t\t\t\t}\n\t\t\t\treturn !!aResults[0] || !!aResults[1] || !!aResults[2] || !!aResults[3];\n\t\t\t})\n\t\t\t.catch(function (oError) {\n\t\t\t\tLog.warning(\"Error while retrieving custom data / value list annotation values\", oError as string);\n\t\t\t\treturn false;\n\t\t\t});\n\t},\n\tisMultiValue(oProperty: PropertyInfo): boolean {\n\t\tlet bIsMultiValue = true;\n\t\t//SingleValue | MultiValue | SingleRange | MultiRange | SearchExpression | MultiRangeOrSearchExpression\n\t\tswitch (oProperty.filterExpression) {\n\t\t\tcase \"SearchExpression\":\n\t\t\tcase \"SingleRange\":\n\t\t\tcase \"SingleValue\":\n\t\t\t\tbIsMultiValue = false;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tif (oProperty.type && oProperty.type.indexOf(\"Boolean\") > 0) {\n\t\t\tbIsMultiValue = false;\n\t\t}\n\t\treturn bIsMultiValue;\n\t},\n\t/**\n\t * Retrieves a custom data node from the control.\n\t * @param control The control from which to retrieve the custom data node\n\t * @param propertyKey The key of the custom data node to retrieve\n\t * @param modifier The modifier for the control\n\t * @returns - The custom data node\n\t */\n\tasync retrieveCustomDataNode(control: Element | UI5Element, propertyKey: string, modifier: BaseTreeModifier): Promise<Element[]> {\n\t\tconst customData: Element[] = [];\n\t\tconst aRetrievedCustomData = await Promise.resolve().then(\n\t\t\tmodifier.getAggregation.bind(modifier, control, \"customData\") as () => Promise<Element[]>\n\t\t);\n\n\t\t// Process each retrieved custom data element\n\t\tfor (const oCustomData of aRetrievedCustomData) {\n\t\t\tconst key = await modifier.getProperty(oCustomData, \"key\");\n\t\t\tif (key === propertyKey) {\n\t\t\t\tcustomData.push(oCustomData);\n\t\t\t}\n\t\t}\n\n\t\treturn customData;\n\t}\n};\nexport default DelegateUtil;\n"],"mappings":"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","ignoreList":[],"file":"DelegateUtil-dbg.js"}