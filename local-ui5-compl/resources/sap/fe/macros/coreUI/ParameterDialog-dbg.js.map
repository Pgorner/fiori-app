{"version":3,"names":["ActionParameterDialog","action","actionContext","parameters","parameterValues","entitySetName","view","messageHandler","strictHandlingUtilities","callbacks","ignoreETag","buttonLock","actionParameterInfos","result","parameterModel","JSONModel","$displayMode","actionName","isBound","fullyQualifiedName","replace","name","metaModel","getModel","dialogPromise","Promise","resolve","reject","_fnResolve","_fnReject","resourceModel","getResourceModel","appComponent","_exports","_proto","prototype","getParameterEditMode","parameter","annotations","fieldControl","Common","FieldControl","immutable","Core","Immutable","valueOf","computed","Computed","constant","FieldEditMode","ReadOnly","ifElse","isReadOnlyExpression","isDisabledExpression","Disabled","Editable","createFormElement","actionMetaPath","getMetaPath","getPath","metaContext","createBindingContext","CommonUtils","getParameterPath","field","isCollection","createMultiField","createField","_jsxs","_Fragment","children","_jsx","Label","id","generate","text","getText","toString","parameterContext","display","FieldHelper","getAPDialogDisplayFormat","getObject","context","MultiValueField","placeholder","UI","Placeholder","items","path","delegate","editMode","width","multipleLines","MultiLineText","required","compileExpression","isActionParameterRequiredExpression","convertTypes","valueHelp","hasValueHelp","undefined","change","e","handleFieldChange","visible","not","equal","getExpressionFromAnnotation","Hidden","ariaLabelledBy","dependents","createParameterDialogValueHelp","MultiValueFieldItem","description","Field","payload","retrieveTextFromValueList","value","AnnotationHelper","format","isMultiLineText","ValueHelp","propertyPath","getTargetNavigationPath","getInvolvedDataModelObjects","substring","lastIndexOf","qualifiers","valueHelpQualifier","validateInput","requiresValidation","typeahead","Popover","MTable","caseSensitive","useCaseSensitiveFilterRequests","entityContainer","Capabilities","FilterFunctions","useAsValueHelp","ValueListWithFixedValues","dialog","createFieldVHDialog","VHDialog","event","fieldPromise","getParameter","getSource","parameterInfo","find","actionParameterInfo","validationPromise","removeMessagesForParameter","defaultParametersValues","hasError","error","ActionRuntime","_addMessageForActionParameter","message","messages","Messaging","getMessageModel","getData","controlId","relevantMessages","filter","msg","getControlIds","some","split","includes","removeMessages","getFormElements","formElements","createDialog","actionParameters","slice","dialogContentsWithParameters","all","map","bind","dialogContents","dialogContent","registerActionParameterInfo","endButton","Button","press","close","Dialog","title","getTitleText","label","escapeHandler","afterClose","beforeOpen","afterOpen","initialFocus","beginButton","isCreateAction","getBeginButtonLabel","onApply","type","content","SimpleForm","binding","actionLabel","key","defaultKey","getOverriddenText","boundActionName","pop","suffixResourceKey","checkIfResourceKeyExists","innerParameters","getObjectBinding","getParameterContext","newValuesDictionary","Object","assign","values","getProperty","Key","isNewValue","BusyLocker","lock","validateProperties","unlock","setProperty","UiModelConstants","DocumentModified","removeTransitionMessages","errorOnFirstIteration","failedContexts","executeActionOnApply","isDialogMessage","manageMessageOnApply","isOpen","updateDialogBindingContextForError","aContexts","afterOnApply","contexts","length","warningContext","infoContext","erroneousCtx","ctx","getMessages","getType","MessageType","Warning","Information","Error","contextToUse","setBindingContext","executeAction","status","is412Executed","strictHandlingTransitionFails","delaySuccessMessages","concat","fail","oAction","getContext","isDialogOpen","addMessages","showMessageDialog","isActionParameterDialogOpen","forceShowUIElement","onBeforeShowMessage","showMessageParametersIn","beforeShowingMessage","bGrouped","strictHandlingPromises","messageHandling","hasTransitionErrorsOrWarnings","aSelectedContexts","sActionName","showGenericErrorMessageForChangeSet","showMessages","messagePageNavigationCallback","aMessages","showMessageParameters","control","getParent","clearStrictWarningMessages","strictHandlingWarningMessages","processedMessageIds","Set","isLocked","after412","results","ODataOperation","execute","modelMessages","failedTransitionsWith412","attachEvent","attachEventOnce","openDialog","owner","setUserDefaults","setModels","addDependent","setOperationDefaultValues","open","setModel","bindElement","model","_event","getParameterDefaultValue","bindingParameter","operationBinding","parameterModelData","paramName","defaultValue","ParameterDefaultValue","isPathAnnotationExpression","pathForContext","startsWith","paramValue","requestSingletonProperty","requestProperty","noPossibleValue","Log","latePropertyError","getManifestFunctionValues","bindingContext","getBindingContext","defaultValuesExtensionFunction","FPMHelper","loadModuleAndCallMethod","getPreDefinedValues","boundFunctionName","DefaultValuesFunction","requestContextObject","functionParams","operations","callBoundFunction","requestObject","contextValues","promises","defaultValues","functionValues","manifestFunctionValues","firstVisibleParameter","getVisible","firstField","focusInfo","getFocusInfo","targetInfo","silent","focus","forEach","push","isMultiValue","setParameter","i","parameterName","parameterProvidedValue","element","hasOwnProperty","setOfFunctionValues","index","size","Array","from","refresh","MessageBox","warning","actions","Action","OK","emphasizedAction","onClose","extensionAPI","getController","getExtensionAPI","contentWidth","origin","getEndButton","FELibrary","Constants","CancelActionDialog","destroy"],"sourceRoot":".","sources":["ParameterDialog.tsx"],"sourcesContent":["import type { PrimitiveType } from \"@sap-ux/vocabularies-types\";\nimport { type Action, type ActionParameter } from \"@sap-ux/vocabularies-types\";\nimport { type PropertyAnnotations_Core } from \"@sap-ux/vocabularies-types/vocabularies/Core_Edm\";\nimport Log from \"sap/base/Log\";\nimport {\n\tcompileExpression,\n\tconstant,\n\tequal,\n\tgetExpressionFromAnnotation,\n\tifElse,\n\tnot,\n\ttype BindingToolkitExpression\n} from \"sap/fe/base/BindingToolkit\";\nimport type { ActionParameterInfo } from \"sap/fe/core/ActionRuntime\";\nimport ActionRuntime from \"sap/fe/core/ActionRuntime\";\nimport type { FEView } from \"sap/fe/core/BaseController\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type ResourceModel from \"sap/fe/core/ResourceModel\";\nimport BusyLocker from \"sap/fe/core/controllerextensions/BusyLocker\";\nimport type MessageHandler from \"sap/fe/core/controllerextensions/MessageHandler\";\nimport type { OperationResult } from \"sap/fe/core/controllerextensions/editFlow/ODataOperation\";\nimport ODataOperation from \"sap/fe/core/controllerextensions/editFlow/ODataOperation\";\nimport UiModelConstants from \"sap/fe/core/controllerextensions/editFlow/editFlowConstants\";\nimport type { ShowActionDialogParameters } from \"sap/fe/core/controllerextensions/editFlow/operations/facade\";\nimport operations from \"sap/fe/core/controllerextensions/editFlow/operations/facade\";\nimport type { ShowMessageParameters } from \"sap/fe/core/controllerextensions/messageHandler/messageHandling\";\nimport messageHandling from \"sap/fe/core/controllerextensions/messageHandler/messageHandling\";\nimport { convertTypes, getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport FPMHelper from \"sap/fe/core/helpers/FPMHelper\";\nimport { getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { isPathAnnotationExpression } from \"sap/fe/core/helpers/TypeGuards\";\nimport FELibrary from \"sap/fe/core/library\";\nimport type { StrictHandlingUtilities } from \"sap/fe/core/operationsHelper\";\nimport { getTargetNavigationPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { isActionParameterRequiredExpression, isDisabledExpression, isReadOnlyExpression } from \"sap/fe/core/templating/FieldControlHelper\";\nimport { hasValueHelp, isMultiLineText } from \"sap/fe/core/templating/PropertyHelper\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport { requiresValidation, useCaseSensitiveFilterRequests } from \"sap/fe/macros/internal/valuehelp/ValueHelpTemplating\";\nimport type ListReportExtensionAPI from \"sap/fe/templates/ListReport/ExtensionAPI\";\nimport type ObjectPageExtensionAPI from \"sap/fe/templates/ObjectPage/ExtensionAPI\";\nimport Button from \"sap/m/Button\";\nimport type { Dialog$AfterCloseEvent, Dialog$BeforeOpenEvent } from \"sap/m/Dialog\";\nimport Dialog from \"sap/m/Dialog\";\nimport Label from \"sap/m/Label\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport type Control from \"sap/ui/core/Control\";\nimport Messaging from \"sap/ui/core/Messaging\";\nimport type Message from \"sap/ui/core/message/Message\";\nimport MessageType from \"sap/ui/core/message/MessageType\";\nimport SimpleForm from \"sap/ui/layout/form/SimpleForm\";\nimport type { Field$ChangeEvent } from \"sap/ui/mdc/Field\";\nimport Field from \"sap/ui/mdc/Field\";\nimport type { MultiValueField$ChangeEvent } from \"sap/ui/mdc/MultiValueField\";\nimport MultiValueField from \"sap/ui/mdc/MultiValueField\";\nimport ValueHelp from \"sap/ui/mdc/ValueHelp\";\nimport FieldEditMode from \"sap/ui/mdc/enums/FieldEditMode\";\nimport MultiValueFieldItem from \"sap/ui/mdc/field/MultiValueFieldItem\";\nimport VHDialog from \"sap/ui/mdc/valuehelp/Dialog\";\nimport Popover from \"sap/ui/mdc/valuehelp/Popover\";\nimport MTable from \"sap/ui/mdc/valuehelp/content/MTable\";\nimport type Context from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport AnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\nimport type { default as ODataV4Context } from \"sap/ui/model/odata/v4/Context\";\nimport type ODataContextBinding from \"sap/ui/model/odata/v4/ODataContextBinding\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\ntype ParameterDefaultValue = { paramName: string; value: unknown; latePropertyError?: boolean; noPossibleValue?: boolean };\n\ntype FormElementType = [Label, Field | MultiValueField];\n\ntype DialogContentTypes = {\n\tformElements: FormElementType;\n\tparameter: ActionParameter;\n};\nexport default class ActionParameterDialog {\n\tprivate readonly dialogPromise: Promise<PromiseSettledResult<OperationResult>[]>;\n\n\tprivate _fnResolve!: (resolveValue: PromiseSettledResult<OperationResult>[]) => void;\n\n\tprivate _fnReject!: (error: unknown) => void;\n\n\tprivate dialog: Dialog | undefined;\n\n\tprivate readonly actionName: string;\n\n\tprivate buttonLock = false;\n\n\tprivate readonly metaModel: ODataMetaModel;\n\n\tprivate actionParameterInfos: (ActionParameterInfo & { parameter: ActionParameter })[] = [];\n\n\tprivate result: PromiseSettledResult<OperationResult>[] = [];\n\n\tprivate parameterModel: JSONModel = new JSONModel({\n\t\t$displayMode: {}\n\t});\n\n\tprivate readonly resourceModel: ResourceModel;\n\n\tconstructor(\n\t\tprivate action: Action,\n\t\tprivate actionContext: Context,\n\t\tprivate parameters: ShowActionDialogParameters,\n\t\tprivate parameterValues: Record<string, unknown>[] | undefined,\n\t\tprivate entitySetName: string | undefined,\n\t\tprivate view: FEView | null,\n\t\tprivate messageHandler: MessageHandler,\n\t\tprivate strictHandlingUtilities: StrictHandlingUtilities,\n\t\tprivate callbacks: {\n\t\t\tbeforeShowingMessage: (\n\t\t\t\tmParameters: ShowActionDialogParameters,\n\t\t\t\taContexts: ODataV4Context[],\n\t\t\t\toDialog: Dialog | undefined,\n\t\t\t\tmessages: Message[],\n\t\t\t\tshowMessageParametersIn: ShowMessageParameters,\n\t\t\t\tshowGenericErrorMessageForChangeSet: boolean,\n\t\t\t\tisActionSuccessful?: boolean\n\t\t\t) => ShowMessageParameters;\n\t\t},\n\n\t\tprivate ignoreETag?: boolean\n\t) {\n\t\tthis.actionName = this.action.isBound\n\t\t\t? this.action.fullyQualifiedName.replace(/\\(.*\\)$/g, \"\") // remove the part related to the overlay\n\t\t\t: this.action.name;\n\t\tthis.metaModel = actionContext.getModel();\n\t\tthis.dialogPromise = new Promise((resolve, reject) => {\n\t\t\tthis._fnResolve = resolve;\n\t\t\tthis._fnReject = reject;\n\t\t});\n\t\tthis.resourceModel = this.view ? getResourceModel(this.view) : getResourceModel(this.parameters.appComponent);\n\t}\n\n\t/**\n\t * Gets binding expression of the edit mode property for a parameter.\n\t * @param parameter The parameter\n\t * @returns The binding expression.\n\t */\n\tprivate getParameterEditMode(parameter: ActionParameter): BindingToolkitExpression<FieldEditMode> {\n\t\tconst annotations = parameter.annotations,\n\t\t\tfieldControl = annotations.Common?.FieldControl,\n\t\t\timmutable = (annotations.Core as unknown as PropertyAnnotations_Core)?.Immutable?.valueOf(),\n\t\t\tcomputed = (annotations.Core as unknown as PropertyAnnotations_Core)?.Computed?.valueOf();\n\n\t\tif (immutable || computed) {\n\t\t\treturn constant(FieldEditMode.ReadOnly);\n\t\t} else if (fieldControl) {\n\t\t\treturn ifElse(\n\t\t\t\tisReadOnlyExpression(parameter),\n\t\t\t\tFieldEditMode.ReadOnly,\n\t\t\t\tifElse(isDisabledExpression(parameter), FieldEditMode.Disabled, FieldEditMode.Editable)\n\t\t\t);\n\t\t}\n\t\treturn constant(FieldEditMode.Editable);\n\t}\n\n\t/**\n\t * Creates the form element control for a parameter.\n\t * @param parameter The parameter\n\t * @returns The form element control.\n\t */\n\tprivate async createFormElement(parameter: ActionParameter): Promise<FormElementType> {\n\t\tconst actionMetaPath = this.metaModel.getMetaPath(this.actionContext.getPath());\n\t\tconst metaContext = this.metaModel.createBindingContext(CommonUtils.getParameterPath(actionMetaPath, parameter.name))!;\n\t\tconst field = await (parameter.isCollection\n\t\t\t? this.createMultiField(parameter, metaContext)\n\t\t\t: this.createField(parameter, metaContext));\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Label\n\t\t\t\t\tid={generate([\"APD_\", parameter.name, \"Label\"])}\n\t\t\t\t\ttext={\n\t\t\t\t\t\tparameter.annotations.Common?.Label\n\t\t\t\t\t\t\t? this.resourceModel.getText(parameter.annotations.Common.Label.toString())\n\t\t\t\t\t\t\t: parameter.name\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{field}\n\t\t\t</>\n\t\t);\n\t}\n\n\t/**\n\t * Creates the multi field control for a parameter.\n\t * @param parameter The parameter\n\t * @param parameterContext The parameter context\n\t * @returns The multi value field control.\n\t */\n\tprivate async createMultiField(parameter: ActionParameter, parameterContext: Context): Promise<MultiValueField> {\n\t\tconst display = await FieldHelper.getAPDialogDisplayFormat(parameterContext.getObject(), { context: parameterContext });\n\t\treturn (\n\t\t\t<MultiValueField\n\t\t\t\tid={generate([\"APD_\", parameter.name])}\n\t\t\t\tplaceholder={parameter.annotations.UI?.Placeholder}\n\t\t\t\titems={{ path: `mvfview>/${parameter.name}` }}\n\t\t\t\tdelegate={{ name: \"sap/fe/core/controls/MultiValueParameterDelegate\" }}\n\t\t\t\tdisplay={display}\n\t\t\t\teditMode={this.getParameterEditMode(parameter)}\n\t\t\t\twidth=\"100%\"\n\t\t\t\tmultipleLines={parameter.annotations.UI?.MultiLineText?.valueOf() === true}\n\t\t\t\trequired={compileExpression(isActionParameterRequiredExpression(parameter, this.action, convertTypes(this.metaModel)))}\n\t\t\t\tvalueHelp={hasValueHelp(parameter) ? generate([this.actionName, parameter.name]) : undefined}\n\t\t\t\tchange={async (e): Promise<void> => this.handleFieldChange(e, parameter)}\n\t\t\t\tvisible={compileExpression(not(equal(getExpressionFromAnnotation(parameter.annotations?.UI?.Hidden), true)))}\n\t\t\t\tariaLabelledBy={[generate([\"APD_\", parameter.name, \"Label\"])]}\n\t\t\t\tdependents={this.createParameterDialogValueHelp(parameter, parameterContext)}\n\t\t\t>\n\t\t\t\t<MultiValueFieldItem key=\"{path: 'mvfview>Key', type:'sap.ui.model.type.String'}\" description=\"{mvfview>Desc}\" />\n\t\t\t</MultiValueField>\n\t\t);\n\t}\n\n\t/**\n\t * Creates the field control for a parameter.\n\t * @param parameter The parameter\n\t * @param parameterContext The parameter context\n\t * @returns The field control.\n\t */\n\tprivate async createField(parameter: ActionParameter, parameterContext: Context): Promise<Field> {\n\t\tconst display = await FieldHelper.getAPDialogDisplayFormat(parameterContext.getObject(), { context: parameterContext });\n\t\treturn (\n\t\t\t<Field\n\t\t\t\tdelegate={{ name: \"sap/fe/macros/field/FieldBaseDelegate\", payload: { retrieveTextFromValueList: true } }}\n\t\t\t\tid={generate([\"APD_\", parameter.name])}\n\t\t\t\tvalue={AnnotationHelper.format(parameterContext.getObject(), { context: parameterContext })}\n\t\t\t\tplaceholder={parameter.annotations.UI?.Placeholder}\n\t\t\t\tdisplay={display}\n\t\t\t\teditMode={this.getParameterEditMode(parameter)}\n\t\t\t\twidth=\"100%\"\n\t\t\t\tmultipleLines={isMultiLineText(parameter)}\n\t\t\t\trequired={compileExpression(isActionParameterRequiredExpression(parameter, this.action, convertTypes(this.metaModel)))}\n\t\t\t\tchange={async (e): Promise<void> => this.handleFieldChange(e, parameter)}\n\t\t\t\tvalueHelp={hasValueHelp(parameter) ? generate([this.actionName, parameter.name]) : undefined}\n\t\t\t\tdependents={this.createParameterDialogValueHelp(parameter, parameterContext)}\n\t\t\t\tvisible={compileExpression(\n\t\t\t\t\tifElse(\n\t\t\t\t\t\tparameter.name === \"ResultIsActiveEntity\",\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tnot(equal(getExpressionFromAnnotation(parameter.annotations?.UI?.Hidden), true))\n\t\t\t\t\t)\n\t\t\t\t)}\n\t\t\t\tariaLabelledBy={[generate([\"APD_\", parameter.name, \"Label\"])]}\n\t\t\t/>\n\t\t);\n\t}\n\n\t/**\n\t * Creates the valueHelp  for a parameter.\n\t * @param parameter The parameter\n\t * @param parameterContext The parameter context\n\t * @returns A valueHelp if the parameter has a VH, undefined otherwise\n\t */\n\tprivate createParameterDialogValueHelp(parameter: ActionParameter, parameterContext: Context): ValueHelp | undefined {\n\t\tif (!hasValueHelp(parameter)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn (\n\t\t\t<ValueHelp\n\t\t\t\tid={generate([this.actionName, parameter.name])}\n\t\t\t\tdelegate={{\n\t\t\t\t\tname: \"sap/fe/macros/valuehelp/ValueHelpDelegate\",\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tpropertyPath: this.action.isBound\n\t\t\t\t\t\t\t? `${getTargetNavigationPath(getInvolvedDataModelObjects<ActionParameter>(parameterContext))}/${\n\t\t\t\t\t\t\t\t\tthis.actionName\n\t\t\t\t\t\t\t  }/${parameter.name}`\n\t\t\t\t\t\t\t: `/${this.action.name.substring(this.action.name.lastIndexOf(\".\") + 1)}/${parameter.name}`,\n\t\t\t\t\t\tqualifiers: {},\n\t\t\t\t\t\tvalueHelpQualifier: \"\"\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tvalidateInput={requiresValidation(parameter)}\n\t\t\t\ttypeahead={\n\t\t\t\t\t<Popover>\n\t\t\t\t\t\t<MTable\n\t\t\t\t\t\t\tid={generate([this.actionName, parameter.name, \"Popover\", \"qualifier\"])}\n\t\t\t\t\t\t\tcaseSensitive={\n\t\t\t\t\t\t\t\tthis.action.isBound\n\t\t\t\t\t\t\t\t\t? useCaseSensitiveFilterRequests(\n\t\t\t\t\t\t\t\t\t\t\tgetInvolvedDataModelObjects<ActionParameter>(parameterContext),\n\t\t\t\t\t\t\t\t\t\t\t(convertTypes(this.metaModel).entityContainer.annotations.Capabilities\n\t\t\t\t\t\t\t\t\t\t\t\t?.FilterFunctions as unknown as string[]) ?? []\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuseAsValueHelp={!!parameter.annotations.Common?.ValueListWithFixedValues}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Popover>\n\t\t\t\t}\n\t\t\t\tdialog={this.createFieldVHDialog(parameter)}\n\t\t\t></ValueHelp>\n\t\t);\n\t}\n\n\t/**\n\t * Creates the ValueHelp dialog for a parameter.\n\t * @param parameter The parameter\n\t * @returns A dialog if the parameter has a VH, undefined otherwise\n\t */\n\tprivate createFieldVHDialog(parameter: ActionParameter): VHDialog | undefined {\n\t\tif (parameter.annotations.Common?.ValueListWithFixedValues?.valueOf() !== true) {\n\t\t\treturn <VHDialog />;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\t/**\n\t * Handles the field change event for a parameter.\n\t * @param event The ui5 event\n\t * @param parameter The parameter\n\t * @returns Promise.\n\t */\n\tprivate async handleFieldChange(event: MultiValueField$ChangeEvent | Field$ChangeEvent, parameter: ActionParameter): Promise<void> {\n\t\tconst fieldPromise = (event as Field$ChangeEvent).getParameter(\"promise\");\n\t\tconst field = (event as Field$ChangeEvent).getSource() as Field | MultiValueField;\n\t\tconst parameterInfo = this.actionParameterInfos.find((actionParameterInfo) => actionParameterInfo.field === field);\n\t\tif (!parameterInfo) {\n\t\t\treturn;\n\t\t}\n\t\tparameterInfo.validationPromise = fieldPromise;\n\t\t// field value is being changed, thus existing messages related to that field are not valid anymore\n\t\tthis.removeMessagesForParameter(parameter);\n\t\ttry {\n\t\t\tparameterInfo.value = await fieldPromise;\n\t\t\tthis.parameters.defaultParametersValues[parameterInfo.parameter.name] = parameterInfo.value;\n\t\t\tparameterInfo.hasError = false;\n\t\t} catch (error) {\n\t\t\tdelete parameterInfo.value;\n\t\t\tparameterInfo.hasError = true;\n\t\t\tActionRuntime._addMessageForActionParameter([\n\t\t\t\t{\n\t\t\t\t\tactionParameterInfo: parameterInfo,\n\t\t\t\t\tmessage: (error as { message: string }).message\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\t}\n\n\t/**\n\t * Removes the messages for a parameter.\n\t * @param parameter The parameter\n\t */\n\tprivate removeMessagesForParameter(parameter: ActionParameter): void {\n\t\tconst messages = Messaging.getMessageModel().getData();\n\t\tconst controlId = generate([\"APD_\", parameter.name]);\n\t\t// also remove messages assigned to inner controls, but avoid removing messages for different parameters (with name being substring of another parameter name)\n\t\tconst relevantMessages = messages.filter((msg: Message) =>\n\t\t\tmsg.getControlIds().some((id: string) => controlId.split(\"-\").includes(id))\n\t\t);\n\t\tMessaging.removeMessages(relevantMessages);\n\t}\n\n\t/**\n\t * gets the FormElements along with the array of parameters.\n\t * @param parameter The parameter\n\t * @returns The parameter information along with the FormElements.\n\t */\n\tprivate async getFormElements(parameter: ActionParameter): Promise<DialogContentTypes> {\n\t\tconst formElements = await this.createFormElement(parameter);\n\t\treturn {\n\t\t\tformElements: formElements,\n\t\t\tparameter: parameter\n\t\t};\n\t}\n\n\t/**\n\t * Creates the action parameter dialog.\n\t * @returns The dialog.\n\t */\n\tasync createDialog(): Promise<Dialog> {\n\t\tconst actionParameters = this.action.isBound ? this.action.parameters.slice(1) : this.action.parameters;\n\t\t// In case of deffered create we have no view, so we need to get the resource model from the app component\n\n\t\tconst dialogContentsWithParameters = await Promise.all(actionParameters.map(this.getFormElements.bind(this)));\n\t\tconst dialogContents = dialogContentsWithParameters.map((dialogContent) => {\n\t\t\treturn dialogContent.formElements;\n\t\t});\n\t\tthis.registerActionParameterInfo(dialogContentsWithParameters);\n\t\tconst endButton = (\n\t\t\t<Button\n\t\t\t\tid={generate([\"fe\", \"APD_\", this.actionName, \"Action\", \"Cancel\"])}\n\t\t\t\ttext={this.resourceModel.getText(\"C_COMMON_ACTION_PARAMETER_DIALOG_CANCEL\")}\n\t\t\t\tpress={this.close.bind(this)}\n\t\t\t/>\n\t\t);\n\t\tconst dialog = (\n\t\t\t<Dialog\n\t\t\t\ttitle={this.getTitleText(this.parameters.label)}\n\t\t\t\tid={generate([\"fe\", \"APD_\", this.actionName])}\n\t\t\t\tescapeHandler={this.close.bind(this)}\n\t\t\t\tafterClose={this.afterClose.bind(this)}\n\t\t\t\tbeforeOpen={this.beforeOpen.bind(this)}\n\t\t\t\tafterOpen={(): void => {\n\t\t\t\t\tthis.afterOpen();\n\t\t\t\t}}\n\t\t\t\tinitialFocus={endButton} // The initial focus is set programmatically in afterOpen, to avoid opening the VH dialog\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\tbeginButton: (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid={generate([\"fe\", \"APD_\", this.actionName, \"Action\", \"Ok\"])}\n\t\t\t\t\t\t\ttext={\n\t\t\t\t\t\t\t\tthis.parameters.isCreateAction\n\t\t\t\t\t\t\t\t\t? this.resourceModel.getText(\"C_TRANSACTION_HELPER_SAPFE_ACTION_CREATE_BUTTON_CONTINUE\")\n\t\t\t\t\t\t\t\t\t: this.getBeginButtonLabel(this.parameters.label)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpress={(): void => {\n\t\t\t\t\t\t\t\tthis.onApply.bind(this)();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttype=\"Emphasized\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\t\tendButton: endButton,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t// @ts-ignore (unknown property binding)\n\t\t\t\t\t\t<SimpleForm binding={\"$Parameter\"}>{{ content: dialogContents }}</SimpleForm>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Dialog>\n\t\t);\n\t\tthis.dialog = dialog;\n\t\treturn dialog;\n\t}\n\n\t/**\n\t * Gets the label for the begin button of the dialog.\n\t * @param actionLabel The label of the action\n\t * @returns The label.\n\t */\n\tprivate getBeginButtonLabel(actionLabel: string | undefined): string {\n\t\tconst key = \"ACTION_PARAMETER_DIALOG_ACTION_NAME\";\n\t\tconst defaultKey = \"C_COMMON_DIALOG_OK\";\n\t\treturn this.getOverriddenText(key, defaultKey, actionLabel);\n\t}\n\n\t/**\n\t * Gets the title of the dialog.\n\t * @param actionLabel The label of the action\n\t * @returns The title.\n\t */\n\tprivate getTitleText(actionLabel: string | undefined): string {\n\t\tconst key = \"ACTION_PARAMETER_DIALOG_ACTION_TITLE\";\n\t\tconst defaultKey = \"C_OPERATIONS_ACTION_PARAMETER_DIALOG_TITLE\";\n\t\treturn this.getOverriddenText(key, defaultKey, actionLabel);\n\t}\n\n\t/**\n\t * Gets an overridden text.\n\t * @param key The key for an overridden text\n\t * @param defaultKey The default key for the text\n\t * @param actionLabel The label of the action\n\t * @returns The overridden text or label.\n\t */\n\tprivate getOverriddenText(key: string, defaultKey: string, actionLabel?: string): string {\n\t\tlet boundActionName = this.actionName;\n\t\tboundActionName = boundActionName.split(\".\").pop() ?? boundActionName;\n\t\tconst suffixResourceKey = boundActionName && this.entitySetName ? `${this.entitySetName}|${boundActionName}` : \"\";\n\t\tif (actionLabel) {\n\t\t\tif (this.resourceModel.checkIfResourceKeyExists(`${key}|${suffixResourceKey}`)) {\n\t\t\t\treturn this.resourceModel.getText(key, undefined, suffixResourceKey);\n\t\t\t} else if (this.resourceModel.checkIfResourceKeyExists(`${key}|${this.entitySetName}`)) {\n\t\t\t\treturn this.resourceModel.getText(key, undefined, `${this.entitySetName}`);\n\t\t\t} else if (this.resourceModel.checkIfResourceKeyExists(`${key}`)) {\n\t\t\t\treturn this.resourceModel.getText(key);\n\t\t\t} else {\n\t\t\t\treturn actionLabel;\n\t\t\t}\n\t\t} else {\n\t\t\treturn this.resourceModel.getText(defaultKey);\n\t\t}\n\t}\n\n\t/**\n\t * Manages the press event of the begin button of the dialog.\n\t * @returns The promise.\n\t */\n\tprivate async onApply(): Promise<void> {\n\t\t// prevent multiple press events. The BusyLocker is not fast enough. (BCP: 2370130210)\n\t\tif (this.buttonLock || !this.dialog) {\n\t\t\treturn;\n\t\t}\n\t\tconst dialog = this.dialog;\n\n\t\tconst innerParameters = { ...this.parameters };\n\t\tconst parameterContext = (dialog.getObjectBinding() as ODataContextBinding | undefined)?.getParameterContext();\n\t\tconst newValuesDictionary = Object.assign(\n\t\t\t{},\n\t\t\t...this.actionParameterInfos.map((actionParameterInfos) => {\n\t\t\t\tconst parameter = actionParameterInfos.parameter;\n\t\t\t\tconst value = parameter.isCollection\n\t\t\t\t\t? Object.values((dialog.getModel(\"mvfview\") as JSONModel).getProperty(`/${parameter.name}`) ?? {}).map(\n\t\t\t\t\t\t\t(value) => (value as { Key?: PrimitiveType })?.Key\n\t\t\t\t\t  )\n\t\t\t\t\t: parameterContext?.getProperty(parameter.name);\n\t\t\t\treturn { [parameter.name]: value };\n\t\t\t})\n\t\t) as Record<string, PrimitiveType>;\n\t\tconst isNewValue = Object.values(newValuesDictionary).some((value) => !!value);\n\n\t\tinnerParameters.label = this.parameters.label;\n\n\t\tthis.buttonLock = true;\n\t\tBusyLocker.lock(dialog);\n\n\t\t// validate the action parameters\n\t\tif (!(await ActionRuntime.validateProperties(this.actionParameterInfos, this.resourceModel))) {\n\t\t\tBusyLocker.unlock(this.dialog);\n\t\t\tthis.buttonLock = false;\n\t\t\treturn;\n\t\t}\n\t\t//Save the values of the parameters\n\t\tinnerParameters.defaultParametersValues = newValuesDictionary;\n\n\t\tthis.parameters.appComponent.getModel(\"ui\").setProperty(UiModelConstants.DocumentModified, isNewValue);\n\t\t// Due to using the search and value helps on the action dialog transient messages could appear\n\t\t// we need an UX design for those to show them to the user - for now remove them before continuing\n\t\tthis.messageHandler.removeTransitionMessages();\n\n\t\tconst { errorOnFirstIteration, failedContexts } = await this.executeActionOnApply(innerParameters);\n\n\t\tif (errorOnFirstIteration) {\n\t\t\tconst isDialogMessage = await this.manageMessageOnApply(failedContexts);\n\t\t\tthis.buttonLock = false; //needed if the action fails with an error popup and this one is canceled (Journey: 412WarningHandling)\n\t\t\t// In case of backend validation error(s?), message shall not be shown in message dialog but next to the field on parameter dialog, which should\n\t\t\t// stay open in this case => in this case, we must not resolve or reject the promise controlling the parameter dialog.\n\t\t\t// In all other cases (e.g. other backend errors or user cancellation), the promise controlling the parameter dialog needs to be rejected to allow\n\t\t\t// callers to react. (Example: If creation in backend after navigation to transient context fails, back navigation needs to be triggered)\n\t\t\tif (isDialogMessage) {\n\t\t\t\tif (dialog.isOpen()) {\n\t\t\t\t\t// do nothing, do not reject promise here\n\t\t\t\t\t// We do not close the APM dialog if user enters a wrong value in of the fields that results in an error from the backend.\n\t\t\t\t\t// The user can close the message dialog and the APM dialog would still be open on which he could enter a new value and trigger the action again.\n\t\t\t\t\t// Earlier we were rejecting the promise on error here, and the call stack was destroyed as the promise was rejected and returned to EditFlow invoke action.\n\t\t\t\t\t// But since the APM dialog was still open, a new promise was resolved in case the user retried the action and the object was created, but the navigation to object page was not taking place.\n\t\t\t\t\tthis.updateDialogBindingContextForError(this.parameters.aContexts);\n\t\t\t\t} else {\n\t\t\t\t\tthis._fnReject(errorOnFirstIteration);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.afterOnApply();\n\t}\n\n\t/**\n\t * Change the binding context of the dialog to one with priority message.\n\t *\n\t * On initial action execution, we might have bound messages with any selected contexts as target apart from the dialog's initial context.\n\t * We change the binding context of dialog for the parameter fields' to get the valid value state from the priority bound message.\n\t * @param contexts Array of selected contexts.\n\t */\n\tupdateDialogBindingContextForError(contexts: ODataV4Context[]): void {\n\t\tif (contexts.length < 2) {\n\t\t\t// We would need to switch the binding context of the dialog only when we have multiple contexts for executing the action.\n\t\t\treturn;\n\t\t}\n\n\t\tlet warningContext: ODataV4Context | undefined, infoContext: ODataV4Context | undefined;\n\t\tconst erroneousCtx = contexts.find((ctx) => {\n\t\t\tconst messages = ctx.getMessages();\n\t\t\treturn messages.some((msg) => {\n\t\t\t\t// We hold first context with warning or info messages.\n\t\t\t\twarningContext = !warningContext && msg.getType() === MessageType.Warning ? ctx : undefined;\n\t\t\t\tinfoContext = !infoContext && msg.getType() === MessageType.Information ? ctx : undefined;\n\t\t\t\t// Error is found!!! We shall exit.\n\t\t\t\treturn msg.getType() === MessageType.Error;\n\t\t\t});\n\t\t});\n\t\tconst contextToUse = erroneousCtx ?? warningContext ?? infoContext;\n\n\t\tif (contextToUse) {\n\t\t\tthis.dialog?.setBindingContext(contextToUse);\n\t\t}\n\t}\n\n\t/**\n\t * Manages the execution(s) of the action.\n\t * @param innerParameters The parameters of the action\n\t * @returns The promise.\n\t */\n\tprivate async executeActionOnApply(\n\t\tinnerParameters: ShowActionDialogParameters\n\t): Promise<{ errorOnFirstIteration: unknown; failedContexts: ODataV4Context[] }> {\n\t\tlet errorOnFirstIteration: unknown;\n\t\tlet failedContexts: ODataV4Context[] = [];\n\t\tconst dialog = this.dialog!;\n\n\t\t//Execute the action\n\t\ttry {\n\t\t\tthis.result = await this.executeAction(innerParameters, this.parameters.aContexts, false);\n\t\t\tif (this.result.find((result) => result.status === \"rejected\")) {\n\t\t\t\tthrow new Error(\"At least one action failed\");\n\t\t\t}\n\t\t\tthis.close();\n\t\t} catch (error: unknown) {\n\t\t\tif (this.strictHandlingUtilities.is412Executed && this.strictHandlingUtilities.strictHandlingTransitionFails.length) {\n\t\t\t\tthis.strictHandlingUtilities.delaySuccessMessages = this.strictHandlingUtilities.delaySuccessMessages.concat(\n\t\t\t\t\tMessaging.getMessageModel().getData()\n\t\t\t\t);\n\t\t\t}\n\t\t\terrorOnFirstIteration = error;\n\t\t}\n\n\t\t//Retry the action execution in case of strict handling and if there is at least one failed context (give it another try to succeed)\n\t\tif (this.strictHandlingUtilities.is412Executed && this.strictHandlingUtilities.strictHandlingTransitionFails.length) {\n\t\t\ttry {\n\t\t\t\tfailedContexts = this.strictHandlingUtilities.strictHandlingTransitionFails.map(\n\t\t\t\t\t(fail) => fail.oAction.getContext() as ODataV4Context\n\t\t\t\t);\n\t\t\t\tinnerParameters.aContexts = failedContexts;\n\t\t\t\tthis.result = await this.executeAction(innerParameters, this.parameters.aContexts, true);\n\t\t\t\tif (this.result.find((result) => result.status === \"rejected\")) {\n\t\t\t\t\tthrow new Error(\"At least one action failed on the second iteration\");\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\tconst isDialogOpen = dialog.isOpen();\n\t\t\t\tif (this.strictHandlingUtilities.is412Executed && this.strictHandlingUtilities.strictHandlingTransitionFails.length) {\n\t\t\t\t\tMessaging.addMessages(this.strictHandlingUtilities.delaySuccessMessages);\n\t\t\t\t}\n\t\t\t\tawait this.messageHandler.showMessageDialog({\n\t\t\t\t\tisActionParameterDialogOpen: isDialogOpen,\n\t\t\t\t\tforceShowUIElement: isDialogOpen,\n\t\t\t\t\tonBeforeShowMessage: (messages: Message[], showMessageParametersIn: ShowMessageParameters) => {\n\t\t\t\t\t\treturn this.callbacks.beforeShowingMessage(\n\t\t\t\t\t\t\tinnerParameters,\n\t\t\t\t\t\t\tthis.parameters.aContexts,\n\t\t\t\t\t\t\tdialog,\n\t\t\t\t\t\t\tmessages,\n\t\t\t\t\t\t\tshowMessageParametersIn,\n\t\t\t\t\t\t\t!!this.parameters.bGrouped &&\n\t\t\t\t\t\t\t\t(!!this.strictHandlingUtilities.strictHandlingPromises.length ||\n\t\t\t\t\t\t\t\t\tmessageHandling.hasTransitionErrorsOrWarnings())\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\taSelectedContexts: undefined, // not used at all\n\t\t\t\t\tsActionName: this.parameters.label\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\terrorOnFirstIteration,\n\t\t\tfailedContexts\n\t\t};\n\t}\n\n\t/**\n\t * Manages the messages of the action.\n\t * @param failedContexts The contexts of the failed action\n\t * @returns The promise.\n\t */\n\tprivate async manageMessageOnApply(failedContexts: ODataV4Context[]): Promise<boolean> {\n\t\tconst dialog = this.dialog!;\n\t\tlet isDialogMessage: boolean | undefined = true;\n\t\tconst showGenericErrorMessageForChangeSet = !!(\n\t\t\tthis.parameters.bGrouped &&\n\t\t\t(this.strictHandlingUtilities.strictHandlingPromises.length || messageHandling.hasTransitionErrorsOrWarnings())\n\t\t);\n\n\t\tawait this.messageHandler.showMessages({\n\t\t\tcontext: failedContexts[0], // only used in case of failed context to reset in messageHandling showMessagesInUI\n\t\t\tisActionParameterDialogOpen: dialog.isOpen(),\n\t\t\tforceShowUIElement: dialog.isOpen(),\n\t\t\tmessagePageNavigationCallback: () => {\n\t\t\t\tthis.close();\n\t\t\t},\n\t\t\tonBeforeShowMessage: (aMessages: Message[], showMessageParametersIn: ShowMessageParameters) => {\n\t\t\t\tconst showMessageParameters = this.callbacks.beforeShowingMessage(\n\t\t\t\t\tthis.parameters,\n\t\t\t\t\tthis.parameters.aContexts,\n\t\t\t\t\tdialog,\n\t\t\t\t\taMessages,\n\t\t\t\t\tshowMessageParametersIn,\n\t\t\t\t\tshowGenericErrorMessageForChangeSet\n\t\t\t\t);\n\t\t\t\tisDialogMessage = showMessageParameters.showMessageDialog;\n\t\t\t\treturn showMessageParameters;\n\t\t\t},\n\t\t\taSelectedContexts: undefined, // not used at all!\n\t\t\tsActionName: this.parameters.label,\n\t\t\tcontrol: dialog.getParent() as Control\n\t\t});\n\t\treturn isDialogMessage;\n\t}\n\n\t/**\n\t * Cleans after the execution of the action.\n\t *\n\t */\n\tprivate afterOnApply(): void {\n\t\tthis.messageHandler.clearStrictWarningMessages();\n\t\tthis.strictHandlingUtilities = {\n\t\t\tis412Executed: false,\n\t\t\tstrictHandlingTransitionFails: [],\n\t\t\tstrictHandlingPromises: [],\n\t\t\tstrictHandlingWarningMessages: [],\n\t\t\tdelaySuccessMessages: [],\n\t\t\tprocessedMessageIds: new Set()\n\t\t};\n\t\tif (this.dialog && BusyLocker.isLocked(this.dialog)) {\n\t\t\tBusyLocker.unlock(this.dialog);\n\t\t}\n\t}\n\n\t/**\n\t * Manages the execution of the action.\n\t * @param parameters The parameters of the action\n\t * @param contexts The contexts of the action\n\t * @param after412 Flag to indicate if the action is executed after a 412 error\n\t * @returns The promise.\n\t */\n\tprivate async executeAction(\n\t\tparameters: ShowActionDialogParameters,\n\t\tcontexts: ODataV4Context[],\n\t\tafter412: boolean\n\t): Promise<PromiseSettledResult<OperationResult>[]> {\n\t\tconst dialog = this.dialog!;\n\t\tconst results = await new ODataOperation(this.action, parameters, this.messageHandler, this.strictHandlingUtilities, {\n\t\t\tignoreETag: this.ignoreETag\n\t\t}).execute();\n\t\tconst modelMessages = Messaging.getMessageModel().getData();\n\t\tconst failedTransitionsWith412 =\n\t\t\tthis.strictHandlingUtilities.is412Executed && this.strictHandlingUtilities.strictHandlingTransitionFails.length;\n\n\t\tconst showGenericErrorMessageForChangeSet =\n\t\t\t!!this.parameters.bGrouped &&\n\t\t\t(this.strictHandlingUtilities.strictHandlingPromises.length > 0 || messageHandling.hasTransitionErrorsOrWarnings());\n\t\tlet attachEvent = modelMessages.length > 0;\n\n\t\tif (failedTransitionsWith412) {\n\t\t\tif (!after412) {\n\t\t\t\tthis.strictHandlingUtilities.delaySuccessMessages = this.strictHandlingUtilities.delaySuccessMessages.concat(modelMessages);\n\t\t\t\tattachEvent = false;\n\t\t\t} else {\n\t\t\t\tMessaging.addMessages(this.strictHandlingUtilities.delaySuccessMessages);\n\t\t\t}\n\t\t}\n\t\tif (attachEvent) {\n\t\t\tdialog.attachEventOnce(\"afterClose\", () => {\n\t\t\t\tconst isDialogOpen = dialog.isOpen();\n\t\t\t\tthis.messageHandler.showMessageDialog({\n\t\t\t\t\tisActionParameterDialogOpen: failedTransitionsWith412 ? undefined : isDialogOpen,\n\t\t\t\t\tforceShowUIElement: failedTransitionsWith412 ? undefined : isDialogOpen,\n\t\t\t\t\tonBeforeShowMessage: (messages: Message[], showMessageParametersIn: ShowMessageParameters) => {\n\t\t\t\t\t\treturn this.callbacks.beforeShowingMessage(\n\t\t\t\t\t\t\tparameters,\n\t\t\t\t\t\t\tcontexts,\n\t\t\t\t\t\t\tdialog,\n\t\t\t\t\t\t\tmessages,\n\t\t\t\t\t\t\tshowMessageParametersIn,\n\t\t\t\t\t\t\tshowGenericErrorMessageForChangeSet,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tcontrol: dialog.getParent() as Control,\n\t\t\t\t\taSelectedContexts: parameters.aContexts,\n\t\t\t\t\tsActionName: parameters.label\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn results;\n\t}\n\n\t/**\n\t * Closes the dialog.\n\t */\n\tprivate close(): void {\n\t\tif (this.dialog) {\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n\n\t/**\n\t * Opens the dialog.\n\t * @param owner The owner of the dialog\n\t * @returns The promise of the action result.\n\t */\n\tasync openDialog(owner: Control): Promise<PromiseSettledResult<OperationResult>[]> {\n\t\tif (!this.dialog) {\n\t\t\tthrow new Error(\"Error on opening the dialog\");\n\t\t}\n\t\tawait CommonUtils.setUserDefaults(\n\t\t\tthis.parameters.appComponent,\n\t\t\tthis.actionParameterInfos.map((actionParameterInfo) => actionParameterInfo.parameter),\n\t\t\tthis.parameterModel,\n\t\t\ttrue\n\t\t);\n\n\t\tthis.setModels(this.dialog);\n\t\towner.addDependent(this.dialog);\n\t\tawait this.setOperationDefaultValues(this.dialog);\n\t\tthis.dialog.open();\n\t\treturn this.dialogPromise;\n\t}\n\n\t/**\n\t * Sets the model configuration for the dialog.\n\t * @param dialog The owner of the dialog\n\t */\n\tprivate setModels(dialog: Dialog): void {\n\t\tdialog.setModel(this.parameterModel, \"paramsModel\");\n\t\tdialog.bindElement({\n\t\t\tpath: \"/\",\n\t\t\tmodel: \"paramsModel\"\n\t\t});\n\t\tdialog.setModel(this.parameters.model);\n\t\tdialog.bindElement({\n\t\t\tpath: `${this.parameters.aContexts.length ? \"\" : \"/\"}${this.actionName}(...)`\n\t\t});\n\n\t\tif (this.parameters.aContexts.length) {\n\t\t\tdialog.setBindingContext(this.parameters.aContexts[0]); // use context of first selected line item\n\t\t}\n\t\t// empty model to add elements dynamically depending on number of MVF fields defined on the dialog\n\t\tdialog.setModel(new JSONModel({}), \"mvfview\");\n\t}\n\n\t/**\n\t * Removes the messages before opening the dialog.\n\t * @param _event\n\t */\n\tprivate beforeOpen(_event: Dialog$BeforeOpenEvent): void {\n\t\tthis.messageHandler.removeTransitionMessages();\n\t}\n\n\t/**\n\t * Gets the default values for a parameter.\n\t * @param parameter The parameter\n\t * @param bindingParameter The binding parameter\n\t * @param dialog The dialog\n\t * @returns The promise of the default values.\n\t */\n\tprivate async getParameterDefaultValue(\n\t\tparameter: ActionParameter,\n\t\tbindingParameter: string,\n\t\tdialog: Dialog\n\t): Promise<ParameterDefaultValue> {\n\t\tconst operationBinding = dialog.getObjectBinding() as ODataContextBinding;\n\t\tconst parameterModelData = this.parameterModel.getData();\n\t\tconst paramName = parameter.name;\n\t\tconst defaultValue = parameter.annotations.UI?.ParameterDefaultValue;\n\t\t// Case 1: There is a ParameterDefaultValue annotation\n\t\tif (defaultValue) {\n\t\t\tif (this.parameters.aContexts.length > 0 && isPathAnnotationExpression(defaultValue)) {\n\t\t\t\ttry {\n\t\t\t\t\tconst pathForContext: string =\n\t\t\t\t\t\tbindingParameter && defaultValue.path.startsWith(`${bindingParameter}/`)\n\t\t\t\t\t\t\t? defaultValue.path.replace(`${bindingParameter}/`, \"\")\n\t\t\t\t\t\t\t: defaultValue.path;\n\t\t\t\t\tlet paramValue = await CommonUtils.requestSingletonProperty(defaultValue.path, operationBinding.getModel());\n\t\t\t\t\tif (paramValue === null) {\n\t\t\t\t\t\tparamValue = await operationBinding.getParameterContext().requestProperty(defaultValue.path);\n\t\t\t\t\t}\n\t\t\t\t\tif (this.parameters.aContexts.length > 1) {\n\t\t\t\t\t\t// For multi select, need to loop over aContexts (as contexts cannot be retrieved via binding parameter of the operation binding)\n\n\t\t\t\t\t\tif (this.parameters.aContexts.some((context) => context.getProperty(pathForContext) !== paramValue)) {\n\t\t\t\t\t\t\t// if the values from the contexts are not all the same, do not prefill\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tparamName,\n\t\t\t\t\t\t\t\tvalue: undefined,\n\t\t\t\t\t\t\t\tnoPossibleValue: true\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn { paramName, value: paramValue };\n\t\t\t\t} catch (error) {\n\t\t\t\t\tLog.error(\"Error while reading default action parameter\", paramName, this.action.name);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tparamName,\n\t\t\t\t\t\tvalue: undefined,\n\t\t\t\t\t\tlatePropertyError: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Case 1.2: ParameterDefaultValue defines a fixed string value (i.e. vParamDefaultValue = 'someString')\n\t\t\t\treturn { paramName, value: defaultValue.valueOf() };\n\t\t\t}\n\t\t}\n\t\treturn { paramName, value: parameterModelData[paramName] };\n\t}\n\n\t/**\n\t * Gets the manifest values.\n\t * @returns The promise of the manifest values.\n\t */\n\tprivate async getManifestFunctionValues(): Promise<Record<string, unknown>> {\n\t\tconst bindingContext = this.dialog?.getBindingContext();\n\t\tif (!this.view || !this.parameters.defaultValuesExtensionFunction || !bindingContext) {\n\t\t\treturn {};\n\t\t}\n\n\t\treturn FPMHelper.loadModuleAndCallMethod(\n\t\t\tthis.parameters.defaultValuesExtensionFunction\n\t\t\t\t.substring(0, this.parameters.defaultValuesExtensionFunction.lastIndexOf(\".\") || -1)\n\t\t\t\t.replace(/\\./gi, \"/\"),\n\t\t\tthis.parameters.defaultValuesExtensionFunction.substring(\n\t\t\t\tthis.parameters.defaultValuesExtensionFunction.lastIndexOf(\".\") + 1,\n\t\t\t\tthis.parameters.defaultValuesExtensionFunction.length\n\t\t\t),\n\t\t\tthis.view,\n\t\t\tbindingContext,\n\t\t\tthis.parameters.aContexts\n\t\t) as Promise<Record<string, unknown>>;\n\t}\n\n\t/**\n\t * Gets the predefined values for the parameters.\n\t * @param bindingParameter The binding parameter\n\t * @param dialog The dialog\n\t * @returns The promise containing all predefined values.\n\t */\n\tprivate async getPreDefinedValues(\n\t\tbindingParameter: string,\n\t\tdialog: Dialog\n\t): Promise<{\n\t\tcontextValues: Record<string, unknown>;\n\t\tdefaultValues: ParameterDefaultValue[];\n\t\tfunctionValues: ODataV4Context[];\n\t\tmanifestFunctionValues: Record<string, unknown>;\n\t}> {\n\t\tconst boundFunctionName = this.action.annotations.Common?.DefaultValuesFunction?.valueOf();\n\t\tlet requestContextObject: Promise<Record<string, unknown>> = Promise.resolve({});\n\t\tlet functionParams: Promise<ODataV4Context>[] = [];\n\t\tif (this.action.isBound) {\n\t\t\tif (typeof boundFunctionName === \"string\") {\n\t\t\t\tfunctionParams = this.parameters.aContexts.map(async (context) =>\n\t\t\t\t\toperations.callBoundFunction(boundFunctionName, context, context.getModel())\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (this.parameters.aContexts.length > 0) {\n\t\t\t\trequestContextObject = this.parameters.aContexts[0].requestObject();\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\tconst contextValues = await requestContextObject;\n\n\t\t\tconst promises = await Promise.all([\n\t\t\t\tPromise.all(\n\t\t\t\t\tthis.actionParameterInfos.map(async (actionParameterInfo) =>\n\t\t\t\t\t\tthis.getParameterDefaultValue(actionParameterInfo.parameter, bindingParameter, dialog)\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tPromise.all(functionParams),\n\t\t\t\tthis.getManifestFunctionValues()\n\t\t\t]);\n\t\t\treturn {\n\t\t\t\tcontextValues,\n\t\t\t\tdefaultValues: promises[0],\n\t\t\t\tfunctionValues: promises[1],\n\t\t\t\tmanifestFunctionValues: promises[2]\n\t\t\t};\n\t\t} catch (error: unknown) {\n\t\t\tLog.error(\"Error while retrieving the parameter\", error as string);\n\t\t\t// Remove messages relating to the function for default values as they aren't helpful for a user\n\t\t\tthis.messageHandler.removeTransitionMessages();\n\t\t\treturn {\n\t\t\t\tcontextValues: {},\n\t\t\t\tdefaultValues: [],\n\t\t\t\tfunctionValues: [],\n\t\t\t\tmanifestFunctionValues: {}\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Callback when the dialog is opened. Sets the focus on the first field without opening the VH dialog.\n\t */\n\tprivate afterOpen(): void {\n\t\tconst firstVisibleParameter = this.actionParameterInfos.find((parameterInfo) => parameterInfo.field.getVisible());\n\t\tif (firstVisibleParameter) {\n\t\t\tconst firstField = firstVisibleParameter?.field;\n\t\t\tconst focusInfo = firstField?.getFocusInfo() as { targetInfo: object };\n\t\t\tfocusInfo.targetInfo = { silent: true };\n\t\t\tfirstField?.focus(focusInfo);\n\t\t}\n\t}\n\n\t/**\n\t * Registers the action parameter info.\n\t * @param actionParameters The action parameters\n\t * @param fields The fields\n\t */\n\tprivate registerActionParameterInfo(dialogContents: DialogContentTypes[]): void {\n\t\t//Register the field\n\t\tdialogContents.forEach((dialogContent) => {\n\t\t\tconst parameter = dialogContent?.parameter;\n\t\t\tconst field = dialogContent?.formElements?.[1];\n\t\t\tthis.actionParameterInfos.push({\n\t\t\t\tparameter,\n\t\t\t\tfield,\n\t\t\t\tisMultiValue: parameter.isCollection,\n\t\t\t\thasError: false\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Sets the default values for the parameters.\n\t * @param dialog The dialog\n\t * @returns The promise.\n\t */\n\tprivate async setOperationDefaultValues(dialog: Dialog): Promise<void> {\n\t\tconst bindingParameter = this.action.isBound ? this.action.parameters[0].name : \"\";\n\t\tconst { contextValues, defaultValues, functionValues, manifestFunctionValues } = await this.getPreDefinedValues(\n\t\t\tbindingParameter,\n\t\t\tdialog\n\t\t);\n\t\tconst operationBinding = dialog.getObjectBinding() as ODataContextBinding;\n\n\t\tif (bindingParameter) {\n\t\t\toperationBinding.setParameter(bindingParameter, contextValues);\n\t\t}\n\n\t\tfor (const i in this.actionParameterInfos) {\n\t\t\tif (this.actionParameterInfos[i].parameter.name !== \"ResultIsActiveEntity\") {\n\t\t\t\tconst parameterName = this.actionParameterInfos[i].parameter.name;\n\t\t\t\t// Parameter values provided in the call of invokeAction overrule other sources\n\t\t\t\tconst parameterProvidedValue = this.parameterValues?.find((element) => element.name === parameterName)?.value;\n\t\t\t\tif (parameterProvidedValue) {\n\t\t\t\t\toperationBinding.setParameter(parameterName, parameterProvidedValue);\n\t\t\t\t} else if (manifestFunctionValues.hasOwnProperty(parameterName)) {\n\t\t\t\t\toperationBinding.setParameter(parameterName, manifestFunctionValues[parameterName]);\n\t\t\t\t} else if (defaultValues[i] && defaultValues[i].value !== undefined) {\n\t\t\t\t\toperationBinding.setParameter(parameterName, defaultValues[i].value);\n\t\t\t\t} else if (this.action.annotations.Common?.DefaultValuesFunction && !defaultValues[i].noPossibleValue) {\n\t\t\t\t\tconst setOfFunctionValues = new Set<string>(\n\t\t\t\t\t\tthis.parameters.aContexts.map((context, index) => functionValues[index].getObject(parameterName))\n\t\t\t\t\t);\n\t\t\t\t\tif (setOfFunctionValues.size === 1) {\n\t\t\t\t\t\t//param values are all the same:\n\t\t\t\t\t\toperationBinding.setParameter(parameterName, Array.from(setOfFunctionValues)[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// If at least one Default Property is a Late Property and an eTag error was raised.\n\t\tif (defaultValues.some((value) => value.latePropertyError)) {\n\t\t\tconst refresh = this.resourceModel.getText(\"C_COMMON_SAPFE_REFRESH\");\n\t\t\tMessageBox.warning(getResourceModel(this.parameters.appComponent).getText(\"C_APP_COMPONENT_SAPFE_ETAG_LATE_PROPERTY\"), {\n\t\t\t\tactions: [refresh, MessageBox.Action.OK],\n\t\t\t\temphasizedAction: refresh,\n\t\t\t\tonClose: (action: string) => {\n\t\t\t\t\tif (action === refresh) {\n\t\t\t\t\t\tconst extensionAPI = this.view?.getController().getExtensionAPI();\n\t\t\t\t\t\t(extensionAPI as ListReportExtensionAPI | ObjectPageExtensionAPI).refresh();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcontentWidth: \"25em\"\n\t\t\t} as object);\n\t\t}\n\t}\n\n\t/**\n\t * Manages the close of the dialog.\n\t * @param event The event\n\t */\n\tprivate afterClose(event: Dialog$AfterCloseEvent): void {\n\t\t// when the dialog is cancelled, messages need to be removed in case the same action should be executed again\n\t\tconst origin = event.getParameter(\"origin\");\n\t\tfor (const i in this.actionParameterInfos) {\n\t\t\tthis.removeMessagesForParameter(this.actionParameterInfos[i].parameter);\n\t\t}\n\t\tif (origin === null || origin === this.dialog?.getEndButton()) {\n\t\t\t// Escape or Cancel button\n\t\t\tthis._fnReject(FELibrary.Constants.CancelActionDialog);\n\t\t} else {\n\t\t\tthis._fnResolve(this.result);\n\t\t}\n\n\t\tthis.dialog?.destroy();\n\t\tthis.buttonLock = false; //needed here, not in the press events finally clause. In case the UI is sluggish, begin button could be pressed again.\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"ParameterDialog-dbg.js"}