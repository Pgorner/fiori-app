/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/ClassSupport","sap/fe/macros/filterBar/SemanticDateOperators","sap/ui/base/ManagedObjectObserver","sap/ui/core/Control","sap/ui/mdc/condition/Condition","sap/ui/mdc/enums/ConditionValidated","sap/ui/mdc/field/ConditionsType","sap/ui/model/json/JSONModel"],function(e,t,i,n,o,r,a,l){"use strict";var s,u,c,d,p,f,h,b,g,y,_,C,m,v,O,F;var w={};var M=e.property;var I=e.implementInterface;var A=e.event;var L=e.defineUI5Class;var S=e.aggregation;function j(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function E(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,z(e,t)}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function V(e,t,i,n,o){var r={};return Object.keys(n).forEach(function(e){r[e]=n[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer?(Object.defineProperty(e,t,r),null):r}function P(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let D=(s=L("sap.fe.macros.controls.CustomFilterFieldContentWrapper"),u=I("sap.ui.core.IFormContent"),c=M({type:"sap.ui.core.CSSSize",defaultValue:null}),d=M({type:"boolean",defaultValue:false}),p=M({type:"object[]",defaultValue:[]}),f=S({type:"sap.ui.core.Control",multiple:false,isDefault:true}),h=A(),s(b=(g=(F=function(e){function n(t,i){var n;n=e.call(this,t,i)||this;j(n,"__implements__sap_ui_core_IFormContent",y,n);j(n,"width",_,n);j(n,"formDoNotAdjustWidth",C,n);j(n,"conditions",m,n);j(n,"content",v,n);j(n,"conditionsChange",O,n);return n}w=n;E(n,e);n.render=function e(t,i){t.openStart("div",i);t.style("min-height","1rem");t.style("width",i.width);t.openEnd();t.renderControl(i.getContent());t.close("div")};n._filterValuesToConditions=function e(i,n){let l={operators:[]},s=[];if(n){l={operators:[n]}}if(i===""){i=[]}else if(i&&typeof i==="object"&&i.hasOwnProperty("operator")&&i.hasOwnProperty("values")){l={operators:[i.operator]};i=i.values}else if(i!==undefined&&typeof i!=="object"&&typeof i!=="string"){throw new Error(`FilterUtils.js#_filterValuesToConditions: Unexpected type of input parameter vValues: ${typeof i}`)}const u=new a(l);const c=Array.isArray(i)?i:[i];if(typeof n==="string"&&t.getSemanticDateOperations().includes(n)){s=[o.createCondition(n,c,null,null,r.NotValidated)]}else{s=c.map(e=>{const t=e?.toString(),i=u.parseValue(t,"any");return i?.[0]}).filter(e=>e!==undefined)}return s};n._conditionsToFilterModelString=function e(t,i){const n=new a(i);return t.map(e=>n.formatValue([e],"any")||"").filter(e=>e!=="").join(",")};var s=n.prototype;s._handleFilterModelChange=function e(t){const i=this.getObjectBinding("filterValues").getPath(),n=t.getSource().getProperty(i);this.updateConditionsByFilterValues(n)};s._handleConditionsChange=function e(t){this.updateFilterModelByConditions(t)};s.init=function t(){e.prototype.init.call(this);this._conditionsObserver=new i(this._observeChanges.bind(this));this._conditionsObserver.observe(this,{properties:["conditions"]});this._filterModel=new l;this._filterModel.attachPropertyChange(this._handleFilterModelChange,this);this.setModel(this._filterModel,n.FILTER_MODEL_ALIAS)};s.clone=function t(i,o){const t=e.prototype.clone.call(this,i,o);t.setModel(t._filterModel,n.FILTER_MODEL_ALIAS);return t};s._observeChanges=function e(t){if(t.name==="conditions"){this._handleConditionsChange(t.current)}};s.getContent=function e(){return this.getAggregation("content")};s.getConditions=function e(){return this.getProperty("conditions")};s.setConditions=function e(t){this.setProperty("conditions",t||[]);return this};s.getFilterModelAlias=function e(){return n.FILTER_MODEL_ALIAS};s.updateConditionsByFilterValues=function e(t,i){const o=n._filterValuesToConditions(t,i);this.setConditions(o)};s.updateFilterModelByConditions=function e(t){const i=t[0]?.operator||"";const o=i!==""?{operators:[i]}:{operators:[]};if(this.getBindingContext(n.FILTER_MODEL_ALIAS)){const e=n._conditionsToFilterModelString(t,o);this._filterModel.setProperty(this.getBindingContext(n.FILTER_MODEL_ALIAS).getPath(),e)}};s.getAccessibilityInfo=function e(){const t=this.getContent();return t?.getAccessibilityInfo?.()||{}};s.getIdForLabel=function e(){const t=this.getContent();return t?.getIdForLabel()};return n}(n),F.FILTER_MODEL_ALIAS="filterValues",F),y=V(g.prototype,"__implements__sap_ui_core_IFormContent",[u],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),_=V(g.prototype,"width",[c],{configurable:true,enumerable:true,writable:true,initializer:null}),C=V(g.prototype,"formDoNotAdjustWidth",[d],{configurable:true,enumerable:true,writable:true,initializer:null}),m=V(g.prototype,"conditions",[p],{configurable:true,enumerable:true,writable:true,initializer:null}),v=V(g.prototype,"content",[f],{configurable:true,enumerable:true,writable:true,initializer:null}),O=V(g.prototype,"conditionsChange",[h],{configurable:true,enumerable:true,writable:true,initializer:null}),g))||b);w=D;return w},false);
//# sourceMappingURL=CustomFilterFieldContentWrapper.js.map