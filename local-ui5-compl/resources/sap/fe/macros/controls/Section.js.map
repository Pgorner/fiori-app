{"version":3,"file":"Section.js","names":["Section","_dec","defineUI5Class","designtime","_dec2","property","type","_dec3","_class","_class2","_ObjectPageSection","properties","others","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","registerDelegate","_inheritsLoose","_proto","prototype","eventDelegates","onAfterRendering","view","CommonUtils","getTargetView","useSingleTextAreaFieldAsNotes","checkAndAdjustSectionContentForTextArea","checkAndAdjustForSingleContent","addEventDelegate","setOnSectionLoaded","onSectionLoaded","loadSplit","split","_sectionLoadMethodName","pop","_sectionLoadModuleName","join","setProperty","applySettings","mSettings","oScope","templateComponent","Component","getOwnerComponentFor","pageController","getRootController","HookSupport","initControllerExtensionHookHandlers","visibleSubSections","getVisibleSubSections","forEach","subsection","content","getSingleContent","adjustForSingleContent","getViewData","sectionLayout","singleContent","isA","checkIfNotesReuseComponent","FPMHelper","loadModuleAndCallMethod","Log","debug","checkAndAdjustTabLayout","getId","includes","length","adjustSectionContentWithTitle","blocks","getBlocks","getAggregation","sectionFromReferenceFacet","SubSection","getMainContent","Function","sectionfromCollectionFacet","Title","subSections","getSubSections","reduce","subSection","getVisible","push","getSectionTitle","title","getTitle","sectionDetails","sectionOnlyContent","contentRole","getSectionContentRole","infoFromProvider","getDataFromProvider","setTitle","setShowTitle","addStyleClass","getText","setVisible","sendDataToConsumer","titleLevel","getTitleLevel","setText","setTitleStyle","setLevel","vBoxItems","getItems","vBoxItem","headerToolbar","getContent","control","notesTitle","ObjectPageSection","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./Section.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport * as HookSupport from \"sap/fe/base/HookSupport\";\nimport type { FEView } from \"sap/fe/core/BaseController\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type TemplateComponent from \"sap/fe/core/TemplateComponent\";\nimport type { ObjectPageManifestSettings } from \"sap/fe/core/converters/ManifestSettings\";\nimport FPMHelper from \"sap/fe/core/helpers/FPMHelper\";\nimport type ISingleSectionContributor from \"sap/fe/macros/controls/section/ISingleSectionContributor\";\nimport type SubSectionBlock from \"sap/fe/templates/ObjectPage/controls/SubSectionBlock\";\nimport type OverflowToolbar from \"sap/m/OverflowToolbar\";\nimport type Title from \"sap/m/Title\";\nimport type VBox from \"sap/m/VBox\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport type { $ManagedObjectSettings } from \"sap/ui/base/ManagedObject\";\nimport Component from \"sap/ui/core/Component\";\nimport type DynamicSideContent from \"sap/ui/layout/DynamicSideContent\";\nimport type { $ObjectPageSectionSettings } from \"sap/uxap/ObjectPageSection\";\n// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nimport ObjectPageSection from \"sap/uxap/ObjectPageSection\";\nimport type ObjectPageSubSection from \"sap/uxap/ObjectPageSubSection\";\n\n@defineUI5Class(\"sap.fe.macros.controls.Section\", { designtime: \"sap/uxap/designtime/ObjectPageSection.designtime\" })\nclass Section extends ObjectPageSection {\n\t// TODO: this probably makes sense to be an event. But we can address this later.\n\t@property({ type: \"string\" })\n\tonSectionLoaded!: string;\n\n\t@property({ type: \"boolean\" })\n\tuseSingleTextAreaFieldAsNotes!: boolean;\n\n\tconstructor(properties: $ObjectPageSectionSettings & PropertiesOf<Section>, others?: $ObjectPageSectionSettings) {\n\t\tsuper(properties as unknown as string, others);\n\t\tthis.registerDelegate();\n\t}\n\n\t_sectionLoadMethodName: string | undefined;\n\n\t_sectionLoadModuleName: string | undefined;\n\n\tprivate registerDelegate(): void {\n\t\tconst eventDelegates = {\n\t\t\tonAfterRendering: (): void => {\n\t\t\t\tconst view = CommonUtils.getTargetView(this);\n\t\t\t\tif (this.useSingleTextAreaFieldAsNotes) {\n\t\t\t\t\tthis.checkAndAdjustSectionContentForTextArea();\n\t\t\t\t}\n\t\t\t\tthis.checkAndAdjustForSingleContent(view);\n\t\t\t}\n\t\t};\n\n\t\tthis.addEventDelegate(eventDelegates);\n\t}\n\n\tsetOnSectionLoaded(onSectionLoaded: string): void {\n\t\tconst loadSplit = onSectionLoaded.split(\".\");\n\t\tthis._sectionLoadMethodName = loadSplit?.pop();\n\t\tthis._sectionLoadModuleName = loadSplit?.join(\"/\");\n\t\tthis.setProperty(\"onSectionLoaded\", onSectionLoaded);\n\t}\n\n\t// TODO: Check if onAfterRendering can be used instead of applySettings.\n\tapplySettings(mSettings: $ManagedObjectSettings, oScope?: object): this {\n\t\tsuper.applySettings(mSettings, oScope);\n\t\tconst templateComponent = Component.getOwnerComponentFor(this) as TemplateComponent;\n\t\tconst pageController = templateComponent.getRootController();\n\t\tif (pageController) {\n\t\t\tHookSupport.initControllerExtensionHookHandlers(this, pageController);\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * This method loops through all the visible subsections and triggers the text area flow if thats the only single control within the section.\n\t */\n\tcheckAndAdjustSectionContentForTextArea(): void {\n\t\tconst visibleSubSections = this.getVisibleSubSections();\n\t\tvisibleSubSections.forEach((subsection: ObjectPageSubSection) => {\n\t\t\tconst content = this.getSingleContent([subsection]);\n\t\t\tif (content) this.adjustForSingleContent(content);\n\t\t});\n\t}\n\n\tcheckAndAdjustForSingleContent(view: FEView): void | Promise<unknown> {\n\t\tif ((view?.getViewData() as ObjectPageManifestSettings)?.sectionLayout === \"Page\") {\n\t\t\tconst singleContent = this.getSingleContent();\n\t\t\tif (\n\t\t\t\tsingleContent &&\n\t\t\t\t(singleContent.isA(\"sap.fe.macros.controls.section.ISingleSectionContributor\") ||\n\t\t\t\t\tthis.checkIfNotesReuseComponent(singleContent))\n\t\t\t) {\n\t\t\t\tthis.adjustForSingleContent(singleContent);\n\t\t\t} else if (this._sectionLoadModuleName && this._sectionLoadMethodName) {\n\t\t\t\treturn FPMHelper.loadModuleAndCallMethod(this._sectionLoadModuleName, this._sectionLoadMethodName, view, this);\n\t\t\t} else {\n\t\t\t\tLog.debug(\"Section cannot be adjusted for single content : Interface 'ISingleSectionContributor' is not implemented\");\n\t\t\t}\n\t\t} else {\n\t\t\tthis.checkAndAdjustTabLayout();\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param singleContent Object of the content present within the section.\n\t * @returns True if the content present is a notes reuse component\n\t */\n\tcheckIfNotesReuseComponent(singleContent: ManagedObject): boolean {\n\t\tif (singleContent.isA(\"sap.m.VBox\") && singleContent.getId().includes(\"NoteSection\")) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * This function checks for the visible subsections and checks for the collection facet label, If present then we merge the title and this function handles the DynamicSideConent as well.\n\t */\n\tcheckAndAdjustTabLayout(): void {\n\t\tconst visibleSubSections = this.getVisibleSubSections();\n\t\tif (visibleSubSections.length === 1) {\n\t\t\tthis.adjustSectionContentWithTitle(visibleSubSections[0]);\n\t\t} else {\n\t\t\tvisibleSubSections.forEach((subsection: ObjectPageSubSection) => {\n\t\t\t\tlet content;\n\t\t\t\tconst blocks = subsection.getBlocks();\n\t\t\t\t// In case of Tab layout, we need to check if the section has only one subsection and that subsection has only one control\n\t\t\t\t// In case of collection Facet, the first block will be Title and the second block will be SubSectionBlock\n\t\t\t\tif (blocks.length === 2 && blocks[1]?.isA<SubSectionBlock>(\"sap.fe.templates.ObjectPage.controls.SubSectionBlock\")) {\n\t\t\t\t\tthis.adjustSectionContentWithTitle(subsection);\n\t\t\t\t}\n\t\t\t\t// In case of Reference Facet, the first block will be SubSectionBlock\n\t\t\t\telse if (blocks.length === 1 && blocks[0]?.isA<SubSectionBlock>(\"sap.fe.templates.ObjectPage.controls.SubSectionBlock\")) {\n\t\t\t\t\tcontent = blocks[0].getAggregation(\"content\") as ManagedObject;\n\t\t\t\t\tif (content.isA(\"sap.fe.macros.controls.section.ISingleSectionContributor\")) {\n\t\t\t\t\t\tthis.adjustForSingleContent(content, { sectionFromReferenceFacet: true, SubSection: subsection });\n\t\t\t\t\t} else if ((content as DynamicSideContent)?.isA(\"sap.ui.layout.DynamicSideContent\")) {\n\t\t\t\t\t\tcontent =\n\t\t\t\t\t\t\t(content as DynamicSideContent).getMainContent instanceof Function &&\n\t\t\t\t\t\t\t(content as DynamicSideContent)?.getMainContent();\n\t\t\t\t\t\tif (content && content.length === 1) {\n\t\t\t\t\t\t\tcontent = content[0];\n\t\t\t\t\t\t\tthis.adjustForSingleContent(content, { sectionFromReferenceFacet: true, SubSection: subsection });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * This function checks for the for the collection facet label,If present then we merge the title.\n\t * @param subsection ObjectPage SubSection\n\t */\n\tadjustSectionContentWithTitle(subsection: ObjectPageSubSection): void {\n\t\tconst blocks = subsection.getBlocks();\n\t\tlet content;\n\t\tif (blocks.length === 2 && blocks[1].isA<SubSectionBlock>(\"sap.fe.templates.ObjectPage.controls.SubSectionBlock\")) {\n\t\t\tcontent = blocks[1].getAggregation(\"content\") as ManagedObject;\n\t\t\tif (content && content.isA(\"sap.fe.macros.controls.section.ISingleSectionContributor\") && blocks[0].isA<Title>(\"sap.m.Title\")) {\n\t\t\t\tthis.adjustForSingleContent(content, { sectionfromCollectionFacet: true, Title: blocks[0], SubSection: subsection });\n\t\t\t} else if (content && content.isA<DynamicSideContent>(\"sap.ui.layout.DynamicSideContent\")) {\n\t\t\t\tcontent = content.getMainContent instanceof Function && content?.getMainContent();\n\t\t\t\tif (content && content.length === 1) {\n\t\t\t\t\tcontent = content[0];\n\t\t\t\t\tthis.adjustForSingleContent(content, {\n\t\t\t\t\t\tsectionfromCollectionFacet: true,\n\t\t\t\t\t\tTitle: blocks[0] as Title,\n\t\t\t\t\t\tSubSection: subsection\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetSingleContent(visibleSubSections?: ObjectPageSubSection[]): ManagedObject | undefined {\n\t\tconst subSections = visibleSubSections ?? this.getVisibleSubSections();\n\t\tif (subSections.length === 1) {\n\t\t\tconst blocks = subSections[0].getBlocks();\n\t\t\tif (blocks.length === 1 && blocks[0].isA<SubSectionBlock>(\"sap.fe.templates.ObjectPage.controls.SubSectionBlock\")) {\n\t\t\t\treturn blocks[0].getAggregation(\"content\") as ManagedObject;\n\t\t\t}\n\t\t\t//If there is an invisible text before a standard building block, then also the merge title logic should be applied as its still a single content\n\t\t\telse if (\n\t\t\t\tblocks.length === 2 &&\n\t\t\t\tblocks[0].isA(\"sap.ui.core.InvisibleText\") &&\n\t\t\t\tblocks[1].isA<SubSectionBlock>(\"sap.fe.templates.ObjectPage.controls.SubSectionBlock\")\n\t\t\t)\n\t\t\t\treturn blocks[1].getAggregation(\"content\") as ManagedObject;\n\t\t}\n\t}\n\n\tgetVisibleSubSections(): ObjectPageSubSection[] {\n\t\tconst subSections = this.getSubSections();\n\t\treturn subSections.reduce((visibleSubSections: ObjectPageSubSection[], subSection) => {\n\t\t\tif (subSection.getVisible()) {\n\t\t\t\tvisibleSubSections.push(subSection);\n\t\t\t}\n\t\t\treturn visibleSubSections;\n\t\t}, [] as ObjectPageSubSection[]);\n\t}\n\n\tgetSectionTitle(): string {\n\t\tlet title = this.getTitle();\n\t\tif (this.getVisibleSubSections().length === 1) {\n\t\t\ttitle = this.getVisibleSubSections()[0].getTitle();\n\t\t}\n\t\treturn title;\n\t}\n\n\tadjustForSingleContent(singleContent: ManagedObject, sectionDetails?: Record<string, ObjectPageSubSection | Title | boolean>): void {\n\t\tconst sectionOnlyContent = singleContent as unknown as ISingleSectionContributor;\n\t\t// This function will also be called from the extensionAPI along with some controls by the application developer, the below check is added to cover the cases where the controls passed like sap.m.Title are not implementing the interface\n\t\tconst contentRole = sectionOnlyContent.getSectionContentRole && sectionOnlyContent.getSectionContentRole();\n\t\tif (contentRole === \"provider\") {\n\t\t\tconst infoFromProvider =\n\t\t\t\tsectionOnlyContent.getDataFromProvider && sectionOnlyContent.getDataFromProvider(this.useSingleTextAreaFieldAsNotes);\n\t\t\tif (infoFromProvider && this.getTitle() === infoFromProvider.title) {\n\t\t\t\tthis.setTitle(infoFromProvider.title);\n\t\t\t\tthis.setShowTitle(true);\n\t\t\t\t// TODO: Check if this is really needed?\n\t\t\t\tthis.addStyleClass(\"sapUiTableOnObjectPageAdjustmentsForSection\");\n\t\t\t}\n\t\t} else if (contentRole === \"consumer\") {\n\t\t\tlet title = this.getSectionTitle();\n\t\t\tif (sectionDetails?.sectionfromCollectionFacet) {\n\t\t\t\ttitle = (sectionDetails?.Title as Title)?.getText();\n\t\t\t\t(sectionDetails?.Title as Title)?.setVisible(false);\n\t\t\t\t(sectionDetails?.SubSection as ObjectPageSubSection)?.setShowTitle(false);\n\t\t\t} else if (sectionDetails?.sectionFromReferenceFacet) {\n\t\t\t\ttitle = (sectionDetails?.SubSection as ObjectPageSubSection)?.getTitle();\n\t\t\t\t(sectionDetails?.SubSection as ObjectPageSubSection)?.setShowTitle(false);\n\t\t\t}\n\t\t\tif (title === \"\" && sectionDetails?.SubSection) {\n\t\t\t\ttitle = (sectionDetails?.SubSection as ObjectPageSubSection).getTitle();\n\t\t\t}\n\t\t\tif (sectionOnlyContent.sendDataToConsumer) {\n\t\t\t\tsectionOnlyContent.sendDataToConsumer({\n\t\t\t\t\ttitleLevel: this.getTitleLevel(),\n\t\t\t\t\ttitle: title\n\t\t\t\t});\n\t\t\t\tthis.setShowTitle(false);\n\t\t\t\tthis.addStyleClass(\"sapUiTableOnObjectPageAdjustmentsForSection\");\n\t\t\t}\n\t\t} else if (singleContent?.isA(\"sap.m.Title\")) {\n\t\t\tconst title = singleContent as Title;\n\t\t\ttitle.setText(this.getTitle());\n\t\t\ttitle.setTitleStyle(\"H4\");\n\t\t\ttitle.setLevel(this.getTitleLevel());\n\t\t\tthis.setShowTitle(false);\n\t\t\tthis.addStyleClass(\"sapUiTableOnObjectPageAdjustmentsForSection\");\n\t\t} else if (this.checkIfNotesReuseComponent(singleContent)) {\n\t\t\t/**\n\t\t\t * Notes Reuse component has the following structure :\n\t\t\t * <VBox id=\"NoteSection\">\n\t\t\t * <MessageStrip id=\"notesDebugProperties\">\n\t\t\t * <List id=\"NotesList\">\n\t\t\t * <headerToolbar>\n\t\t\t * <OverflowToolbar id=\"noteHeaderOverflowToolbar\" style=\"Standard\">\n\t\t\t *       <Title id=\"noteHeaderOverflowToolbarTitle\"/>\n\t\t\t *\t\t......\n\t\t\t *\t</OverflowToolbar>\n\t\t\t *\t</headerToolbar>\n\t\t\t *\t......\n\t\t\t *\t</List>\n\t\t\t *\t</VBox>\n\t\t\t *\t.....\n\t\t\t *\n\t\t\t * We are applying the title merge logic for the title within the overflow toolbar\n\t\t\t * in the following code\n\t\t\t *\n\t\t\t */\n\t\t\tconst vBoxItems = (singleContent as VBox).getItems();\n\t\t\tvBoxItems.forEach((vBoxItem) => {\n\t\t\t\tconst headerToolbar = vBoxItem.getAggregation(\"headerToolbar\");\n\t\t\t\tif (headerToolbar) {\n\t\t\t\t\t(headerToolbar as OverflowToolbar)?.getContent().forEach((control) => {\n\t\t\t\t\t\tif (control.isA(\"sap.m.Title\")) {\n\t\t\t\t\t\t\tconst notesTitle = control as Title;\n\t\t\t\t\t\t\tnotesTitle.setText(this.getTitle());\n\t\t\t\t\t\t\tnotesTitle.setTitleStyle(\"H4\");\n\t\t\t\t\t\t\tnotesTitle.setLevel(this.getTitleLevel());\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.setShowTitle(false);\n\t\t\tthis.addStyleClass(\"sapUiTableOnObjectPageAdjustmentsForSection\");\n\t\t}\n\t}\n}\n\nexport default Section;\n"],"mappings":";;;;suCAmBA,IAKMA,GAAOC,EADZC,EAAe,iCAAkC,CAAEC,WAAY,qDAAqDC,EAGnHC,EAAS,CAAEC,KAAM,WAAWC,EAG5BF,EAAS,CAAEC,KAAM,YAAYL,EAAAO,GAAAC,EAAA,SAAAC,GAG9B,SAAAV,EAAYW,EAAgEC,GAAqC,IAAAC,EAChHA,EAAAH,EAAAI,KAAAC,KAAMJ,EAAiCC,IAAOG,KAR/CC,EAAAH,EAAA,kBAAAI,EAAAJ,GAAAG,EAAAH,EAAA,gCAAAK,EAAAL,GASCA,EAAKM,mBAAmB,OAAAN,CACzB,CAACO,EAAApB,EAAAU,GAAA,IAAAW,EAAArB,EAAAsB,UAAAD,EAMOF,iBAAR,SAAQA,IACP,MAAMI,EAAiB,CACtBC,iBAAkBA,KACjB,MAAMC,EAAOC,EAAYC,cAAcZ,MACvC,GAAIA,KAAKa,8BAA+B,CACvCb,KAAKc,yCACN,CACAd,KAAKe,+BAA+BL,EAAK,GAI3CV,KAAKgB,iBAAiBR,EACvB,EAACF,EAEDW,mBAAA,SAAAA,EAAmBC,GAClB,MAAMC,EAAYD,EAAgBE,MAAM,KACxCpB,KAAKqB,uBAAyBF,GAAWG,MACzCtB,KAAKuB,uBAAyBJ,GAAWK,KAAK,KAC9CxB,KAAKyB,YAAY,kBAAmBP,EACrC,EAEAZ,EACAoB,cAAA,SAAAA,EAAcC,EAAmCC,GAChDjC,EAAAY,UAAMmB,cAAa3B,KAAAC,KAAC2B,EAAWC,GAC/B,MAAMC,EAAoBC,EAAUC,qBAAqB/B,MACzD,MAAMgC,EAAiBH,EAAkBI,oBACzC,GAAID,EAAgB,CACnBE,EAAYC,oCAAoCnC,KAAMgC,EACvD,CACA,OAAOhC,IACR,EAEAM,EAGAQ,wCAAA,SAAAA,IACC,MAAMsB,EAAqBpC,KAAKqC,wBAChCD,EAAmBE,QAASC,IAC3B,MAAMC,EAAUxC,KAAKyC,iBAAiB,CAACF,IACvC,GAAIC,EAASxC,KAAK0C,uBAAuBF,EAAQ,EAEnD,EAAClC,EAEDS,+BAAA,SAAAA,EAA+BL,GAC9B,GAAKA,GAAMiC,eAA8CC,gBAAkB,OAAQ,CAClF,MAAMC,EAAgB7C,KAAKyC,mBAC3B,GACCI,IACCA,EAAcC,IAAI,6DAClB9C,KAAK+C,2BAA2BF,IAChC,CACD7C,KAAK0C,uBAAuBG,EAC7B,MAAO,GAAI7C,KAAKuB,wBAA0BvB,KAAKqB,uBAAwB,CACtE,OAAO2B,EAAUC,wBAAwBjD,KAAKuB,uBAAwBvB,KAAKqB,uBAAwBX,EAAMV,KAC1G,KAAO,CACNkD,EAAIC,MAAM,2GACX,CACD,KAAO,CACNnD,KAAKoD,yBACN,CACD,EAEA9C,EAKAyC,2BAAA,SAAAA,EAA2BF,GAC1B,GAAIA,EAAcC,IAAI,eAAiBD,EAAcQ,QAAQC,SAAS,eAAgB,CACrF,OAAO,IACR,CACA,OAAO,KACR,EAEAhD,EAGA8C,wBAAA,SAAAA,IACC,MAAMhB,EAAqBpC,KAAKqC,wBAChC,GAAID,EAAmBmB,SAAW,EAAG,CACpCvD,KAAKwD,8BAA8BpB,EAAmB,GACvD,KAAO,CACNA,EAAmBE,QAASC,IAC3B,IAAIC,EACJ,MAAMiB,EAASlB,EAAWmB,YAG1B,GAAID,EAAOF,SAAW,GAAKE,EAAO,IAAIX,IAAqB,wDAAyD,CACnH9C,KAAKwD,8BAA8BjB,EACpC,MAEK,GAAIkB,EAAOF,SAAW,GAAKE,EAAO,IAAIX,IAAqB,wDAAyD,CACxHN,EAAUiB,EAAO,GAAGE,eAAe,WACnC,GAAInB,EAAQM,IAAI,4DAA6D,CAC5E9C,KAAK0C,uBAAuBF,EAAS,CAAEoB,0BAA2B,KAAMC,WAAYtB,GACrF,MAAO,GAAKC,GAAgCM,IAAI,oCAAqC,CACpFN,EACEA,EAA+BsB,0BAA0BC,UACzDvB,GAAgCsB,iBAClC,GAAItB,GAAWA,EAAQe,SAAW,EAAG,CACpCf,EAAUA,EAAQ,GAClBxC,KAAK0C,uBAAuBF,EAAS,CAAEoB,0BAA2B,KAAMC,WAAYtB,GACrF,CACD,CACD,GAEF,CACD,EAEAjC,EAIAkD,8BAAA,SAAAA,EAA8BjB,GAC7B,MAAMkB,EAASlB,EAAWmB,YAC1B,IAAIlB,EACJ,GAAIiB,EAAOF,SAAW,GAAKE,EAAO,GAAGX,IAAqB,wDAAyD,CAClHN,EAAUiB,EAAO,GAAGE,eAAe,WACnC,GAAInB,GAAWA,EAAQM,IAAI,6DAA+DW,EAAO,GAAGX,IAAW,eAAgB,CAC9H9C,KAAK0C,uBAAuBF,EAAS,CAAEwB,2BAA4B,KAAMC,MAAOR,EAAO,GAAII,WAAYtB,GACxG,MAAO,GAAIC,GAAWA,EAAQM,IAAwB,oCAAqC,CAC1FN,EAAUA,EAAQsB,0BAA0BC,UAAYvB,GAASsB,iBACjE,GAAItB,GAAWA,EAAQe,SAAW,EAAG,CACpCf,EAAUA,EAAQ,GAClBxC,KAAK0C,uBAAuBF,EAAS,CACpCwB,2BAA4B,KAC5BC,MAAOR,EAAO,GACdI,WAAYtB,GAEd,CACD,CACD,CACD,EAACjC,EAEDmC,iBAAA,SAAAA,EAAiBL,GAChB,MAAM8B,EAAc9B,GAAsBpC,KAAKqC,wBAC/C,GAAI6B,EAAYX,SAAW,EAAG,CAC7B,MAAME,EAASS,EAAY,GAAGR,YAC9B,GAAID,EAAOF,SAAW,GAAKE,EAAO,GAAGX,IAAqB,wDAAyD,CAClH,OAAOW,EAAO,GAAGE,eAAe,UACjC,MAEK,GACJF,EAAOF,SAAW,GAClBE,EAAO,GAAGX,IAAI,8BACdW,EAAO,GAAGX,IAAqB,wDAE/B,OAAOW,EAAO,GAAGE,eAAe,UAClC,CACD,EAACrD,EAED+B,sBAAA,SAAAA,IACC,MAAM6B,EAAclE,KAAKmE,iBACzB,OAAOD,EAAYE,OAAO,CAAChC,EAA4CiC,KACtE,GAAIA,EAAWC,aAAc,CAC5BlC,EAAmBmC,KAAKF,EACzB,CACA,OAAOjC,CAAkB,EACvB,GACJ,EAAC9B,EAEDkE,gBAAA,SAAAA,IACC,IAAIC,EAAQzE,KAAK0E,WACjB,GAAI1E,KAAKqC,wBAAwBkB,SAAW,EAAG,CAC9CkB,EAAQzE,KAAKqC,wBAAwB,GAAGqC,UACzC,CACA,OAAOD,CACR,EAACnE,EAEDoC,uBAAA,SAAAA,EAAuBG,EAA8B8B,GACpD,MAAMC,EAAqB/B,EAE3B,MAAMgC,EAAcD,EAAmBE,uBAAyBF,EAAmBE,wBACnF,GAAID,IAAgB,WAAY,CAC/B,MAAME,EACLH,EAAmBI,qBAAuBJ,EAAmBI,oBAAoBhF,KAAKa,+BACvF,GAAIkE,GAAoB/E,KAAK0E,aAAeK,EAAiBN,MAAO,CACnEzE,KAAKiF,SAASF,EAAiBN,OAC/BzE,KAAKkF,aAAa,MAElBlF,KAAKmF,cAAc,8CACpB,CACD,MAAO,GAAIN,IAAgB,WAAY,CACtC,IAAIJ,EAAQzE,KAAKwE,kBACjB,GAAIG,GAAgBX,2BAA4B,CAC/CS,EAASE,GAAgBV,OAAiBmB,UACzCT,GAAgBV,OAAiBoB,WAAW,OAC5CV,GAAgBd,YAAqCqB,aAAa,MACpE,MAAO,GAAIP,GAAgBf,0BAA2B,CACrDa,EAASE,GAAgBd,YAAqCa,WAC7DC,GAAgBd,YAAqCqB,aAAa,MACpE,CACA,GAAIT,IAAU,IAAME,GAAgBd,WAAY,CAC/CY,GAASE,GAAgBd,YAAoCa,UAC9D,CACA,GAAIE,EAAmBU,mBAAoB,CAC1CV,EAAmBU,mBAAmB,CACrCC,WAAYvF,KAAKwF,gBACjBf,MAAOA,IAERzE,KAAKkF,aAAa,OAClBlF,KAAKmF,cAAc,8CACpB,CACD,MAAO,GAAItC,GAAeC,IAAI,eAAgB,CAC7C,MAAM2B,EAAQ5B,EACd4B,EAAMgB,QAAQzF,KAAK0E,YACnBD,EAAMiB,cAAc,MACpBjB,EAAMkB,SAAS3F,KAAKwF,iBACpBxF,KAAKkF,aAAa,OAClBlF,KAAKmF,cAAc,8CACpB,MAAO,GAAInF,KAAK+C,2BAA2BF,GAAgB,CAqB1D,MAAM+C,EAAa/C,EAAuBgD,WAC1CD,EAAUtD,QAASwD,IAClB,MAAMC,EAAgBD,EAASnC,eAAe,iBAC9C,GAAIoC,EAAe,CACjBA,GAAmCC,aAAa1D,QAAS2D,IACzD,GAAIA,EAAQnD,IAAI,eAAgB,CAC/B,MAAMoD,EAAaD,EACnBC,EAAWT,QAAQzF,KAAK0E,YACxBwB,EAAWR,cAAc,MACzBQ,EAAWP,SAAS3F,KAAKwF,gBAC1B,GAEF,IAEDxF,KAAKkF,aAAa,OAClBlF,KAAKmF,cAAc,8CACpB,CACD,EAAC,OAAAlG,CAAA,CApQ6B,CALTkH,GAAiBjG,EAAAkG,EAAA1G,EAAAa,UAAA,mBAAAlB,GAAA,CAAAgH,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAArG,EAAAiG,EAAA1G,EAAAa,UAAA,iCAAAf,GAAA,CAAA6G,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA9G,KAAAD,GAAA,OA4QxBR,CAAO","ignoreList":[]}