{"version":3,"names":["VisualFilter","_dec","defineUI5Class","_dec2","implementInterface","_dec3","property","type","_dec4","_dec5","event","_class","_class2","_VBox","_this","_len","arguments","length","args","Array","_key","call","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_inheritsLoose","_proto","prototype","onAfterRendering","sLabel","oInteractiveChart","getInteractiveChart","sInternalContextPath","data","oInteractiveChartListBinding","getBinding","oInternalModelContext","getBindingContext","oResourceBundle","Library","getResourceBundleFor","bShowOverLayInitially","oSelectionVariantAnnotation","CommonHelper","parseCustomData","SelectOptions","aRequiredProperties","oMetaModel","getModel","getMetaModel","sEntitySetPath","getPath","oFilterBar","getParent","getMetadata","getElementName","oFilterBarConditions","aPropertyInfoSet","sFilterEntityName","isA","getConditions","FilterUtils","getFilterPropertyInfo","split","aParameters","customData","filterConditions","getFiltersConditionsFromSelectionVariant","VisualFilterUtils","getCustomConditions","bind","oSelectionVariantConditions","convertFilterCondions","mConditions","Object","keys","forEach","sKey","setProperty","showError","errorMessageTitle","getText","errorMessage","getObject","aSelectOptions","aNotMatchedConditions","oSelectOption","push","PropertyName","$PropertyPath","Parameters","oParameter","sPath","includes","errorInfo","getErrorInfoForNoInitialOverlay","_oChartBinding","detachDataReceivedHandler","attachDataRecivedHandler","bShowOverlay","getProperty","sChartEntityName","sBindingPath","getBindingPathForParameters","isSuspended","resume","attachEvent","onInternalDataReceived","detachEvent","undefined","setShowValueHelp","bShowValueHelp","getItems","oVisualFilterControl","getVisualFilterControl","getContent","some","oInnerControl","setVisible","setValueHelpIconSrc","sIconSrc","setIcon","oEvent","sId","getId","oView","CommonUtils","getTargetView","vUOM","updateChartScaleFactorTitle","getParameter","s18nMessageTitle","s18nMessage","applyErrorMessageAndTitle","oData","getSource","getCurrentContexts","setNoDataMessage","setMultiUOMMessage","$Path","oContexts","getContexts","oContextData","applyUOMToTitle","VBox","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["VisualFilter.ts"],"sourcesContent":["import type { Parameter, SelectOptionType, SelectionVariantType } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { defineUI5Class, event, implementInterface, property } from \"sap/fe/base/ClassSupport\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport VisualFilterUtils from \"sap/fe/macros/controls/filterbar/utils/VisualFilterUtils\";\nimport type { IFilterControl } from \"sap/fe/macros/filter/FilterUtils\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport { getFiltersConditionsFromSelectionVariant } from \"sap/fe/macros/filterBar/FilterHelper\";\nimport type { SerializedSelectionVariant } from \"sap/fe/navigation/SelectionVariant\";\nimport type Button from \"sap/m/Button\";\nimport type OverflowToolbar from \"sap/m/OverflowToolbar\";\nimport VBox from \"sap/m/VBox\";\nimport type InteractiveBarChart from \"sap/suite/ui/microchart/InteractiveBarChart\";\nimport type InteractiveDonutChart from \"sap/suite/ui/microchart/InteractiveDonutChart\";\nimport type InteractiveLineChart from \"sap/suite/ui/microchart/InteractiveLineChart\";\nimport type Control from \"sap/ui/core/Control\";\nimport Library from \"sap/ui/core/Lib\";\nimport type { IFormContent } from \"sap/ui/core/library\";\nimport type FilterBar from \"sap/ui/mdc/FilterBar\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\nimport type { PropertyInfo } from \"sap/ui/mdc/util/PropertyHelper\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type { ODataListBinding$DataReceivedEvent } from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type { MetaModelType } from \"types/metamodel_types\";\n/**\n * Constructor for a new filterBar/aligned/FilterItemLayout.\n * @param {string} [sId] ID for the new control, generated automatically if no ID is given\n * @param {object} [mSettings] Initial settings for the new control\n * @since 1.61.0\n */\n@defineUI5Class(\"sap.fe.macros.controls.filterbar.VisualFilter\")\nclass VisualFilter extends VBox implements IFormContent {\n\t@implementInterface(\"sap.ui.core.IFormContent\")\n\t__implements__sap_ui_core_IFormContent = true;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tshowValueHelp!: boolean;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tvalueHelpIconSrc!: string;\n\n\t@event()\n\tvalueHelpRequest!: Function;\n\n\tprivate _oChartBinding?: ODataListBinding;\n\n\tonAfterRendering(): void {\n\t\tlet sLabel;\n\t\tconst oInteractiveChart = this.getInteractiveChart();\n\t\tconst sInternalContextPath = this.data(\"infoPath\");\n\t\tconst oInteractiveChartListBinding = (oInteractiveChart.getBinding(\"segments\") ||\n\t\t\toInteractiveChart.getBinding(\"bars\") ||\n\t\t\toInteractiveChart.getBinding(\"points\")) as ODataListBinding;\n\t\tconst oInternalModelContext = oInteractiveChart.getBindingContext(\"internal\") as InternalModelContext;\n\t\tconst oResourceBundle = Library.getResourceBundleFor(\"sap.fe.macros\")!;\n\t\tconst bShowOverLayInitially = oInteractiveChart.data(\"showOverlayInitially\");\n\t\tconst oSelectionVariantAnnotation: MetaModelType<SelectionVariantType> = (oInteractiveChart.data(\n\t\t\t\"selectionVariantAnnotation\"\n\t\t) as SerializedSelectionVariant)\n\t\t\t? (CommonHelper.parseCustomData(oInteractiveChart.data(\"selectionVariantAnnotation\")) as MetaModelType<SelectionVariantType>)\n\t\t\t: ({ SelectOptions: [] } as unknown as MetaModelType<SelectionVariantType>);\n\t\tconst aRequiredProperties: string[] = oInteractiveChart.data(\"requiredProperties\")\n\t\t\t? (CommonHelper.parseCustomData(oInteractiveChart.data(\"requiredProperties\")) as string[])\n\t\t\t: [];\n\t\tconst oMetaModel = (oInteractiveChart.getModel() as ODataModel).getMetaModel();\n\t\tconst sEntitySetPath = oInteractiveChartListBinding ? oInteractiveChartListBinding.getPath() : \"\";\n\t\tlet oFilterBar = this.getParent()?.getParent() as FilterBar;\n\t\t// TODO: Remove this part once 2170204347 is fixed\n\t\tif (oFilterBar.getMetadata().getElementName() === \"sap.ui.mdc.filterbar.p13n.AdaptationFilterBar\") {\n\t\t\toFilterBar = oFilterBar.getParent()?.getParent() as FilterBar;\n\t\t}\n\t\tlet oFilterBarConditions: Record<string, ConditionObject[]> = {};\n\t\tlet aPropertyInfoSet: PropertyInfo[] = [];\n\t\tlet sFilterEntityName;\n\t\tif (oFilterBar.isA<FilterBar>(\"sap.fe.macros.controls.FilterBar\")) {\n\t\t\toFilterBarConditions = oFilterBar.getConditions();\n\t\t\taPropertyInfoSet = FilterUtils.getFilterPropertyInfo(oFilterBar as IFilterControl) as PropertyInfo[];\n\t\t\tsFilterEntityName = oFilterBar.data(\"entityType\").split(\"/\")[1];\n\t\t}\n\t\tconst aParameters = oInteractiveChart.data(\"parameters\") ? oInteractiveChart.data(\"parameters\").customData : [];\n\t\tconst filterConditions = getFiltersConditionsFromSelectionVariant(\n\t\t\tsEntitySetPath,\n\t\t\toMetaModel,\n\t\t\toSelectionVariantAnnotation,\n\t\t\tVisualFilterUtils.getCustomConditions.bind(VisualFilterUtils)\n\t\t);\n\t\tconst oSelectionVariantConditions = VisualFilterUtils.convertFilterCondions(filterConditions);\n\t\tconst mConditions: Record<string, ConditionObject[]> = {};\n\n\t\tObject.keys(oFilterBarConditions).forEach(function (sKey: string) {\n\t\t\tif (oFilterBarConditions[sKey].length) {\n\t\t\t\tmConditions[sKey] = oFilterBarConditions[sKey];\n\t\t\t}\n\t\t});\n\n\t\tObject.keys(oSelectionVariantConditions).forEach(function (sKey: string) {\n\t\t\tif (!mConditions[sKey]) {\n\t\t\t\tmConditions[sKey] = oSelectionVariantConditions[sKey];\n\t\t\t}\n\t\t});\n\t\tif (bShowOverLayInitially === \"true\") {\n\t\t\tif (!Object.keys(oSelectionVariantAnnotation).length) {\n\t\t\t\tif (aRequiredProperties.length > 1) {\n\t\t\t\t\toInternalModelContext.setProperty(sInternalContextPath, {\n\t\t\t\t\t\tshowError: true,\n\t\t\t\t\t\terrorMessageTitle: oResourceBundle.getText(\"M_VISUAL_FILTERS_ERROR_MESSAGE_TITLE\"),\n\t\t\t\t\t\terrorMessage: oResourceBundle.getText(\"M_VISUAL_FILTERS_PROVIDE_FILTER_VAL_MULTIPLEVF\")\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsLabel =\n\t\t\t\t\t\toMetaModel.getObject(`${sEntitySetPath}/${aRequiredProperties[0]}@com.sap.vocabularies.Common.v1.Label`) ||\n\t\t\t\t\t\taRequiredProperties[0];\n\t\t\t\t\toInternalModelContext.setProperty(sInternalContextPath, {\n\t\t\t\t\t\tshowError: true,\n\t\t\t\t\t\terrorMessageTitle: oResourceBundle.getText(\"M_VISUAL_FILTERS_ERROR_MESSAGE_TITLE\"),\n\t\t\t\t\t\terrorMessage: oResourceBundle.getText(\"M_VISUAL_FILTERS_PROVIDE_FILTER_VAL_SINGLEVF\", sLabel)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst aSelectOptions: string[] = [];\n\t\t\t\tconst aNotMatchedConditions: string[] = [];\n\t\t\t\tif (oSelectionVariantAnnotation.SelectOptions) {\n\t\t\t\t\toSelectionVariantAnnotation.SelectOptions.forEach(function (oSelectOption: MetaModelType<SelectOptionType>) {\n\t\t\t\t\t\taSelectOptions.push(oSelectOption.PropertyName!.$PropertyPath);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (oSelectionVariantAnnotation.Parameters) {\n\t\t\t\t\toSelectionVariantAnnotation.Parameters.forEach(function (oParameter) {\n\t\t\t\t\t\taSelectOptions.push((oParameter as MetaModelType<Parameter>).PropertyName!.$PropertyPath);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\taRequiredProperties.forEach(function (sPath: string) {\n\t\t\t\t\tif (!aSelectOptions.includes(sPath)) {\n\t\t\t\t\t\taNotMatchedConditions.push(sPath);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tconst errorInfo = VisualFilterUtils.getErrorInfoForNoInitialOverlay(\n\t\t\t\t\taNotMatchedConditions,\n\t\t\t\t\toResourceBundle,\n\t\t\t\t\tsEntitySetPath,\n\t\t\t\t\toMetaModel\n\t\t\t\t);\n\t\t\t\toInternalModelContext.setProperty(sInternalContextPath, errorInfo);\n\t\t\t}\n\t\t}\n\n\t\tif (!this._oChartBinding || this._oChartBinding !== oInteractiveChartListBinding) {\n\t\t\tif (this._oChartBinding) {\n\t\t\t\tthis.detachDataReceivedHandler(this._oChartBinding);\n\t\t\t}\n\t\t\tthis.attachDataRecivedHandler(oInteractiveChartListBinding);\n\t\t\tthis._oChartBinding = oInteractiveChartListBinding;\n\t\t}\n\t\tconst bShowOverlay =\n\t\t\toInternalModelContext.getProperty(sInternalContextPath) && oInternalModelContext.getProperty(sInternalContextPath).showError;\n\t\tconst sChartEntityName = sEntitySetPath !== \"\" ? sEntitySetPath.split(\"/\")[1].split(\"(\")[0] : \"\";\n\t\tif (aParameters && aParameters.length && sFilterEntityName === sChartEntityName) {\n\t\t\tconst sBindingPath = FilterUtils.getBindingPathForParameters(\n\t\t\t\toFilterBar as IFilterControl,\n\t\t\t\tmConditions,\n\t\t\t\taPropertyInfoSet,\n\t\t\t\taParameters\n\t\t\t);\n\t\t\tif (sBindingPath) {\n\t\t\t\t(oInteractiveChartListBinding as { sPath?: string }).sPath = sBindingPath;\n\t\t\t}\n\t\t}\n\t\t// resume binding for only those visual filters that do not have a in parameter attached.\n\t\t// Bindings of visual filters with inParameters will be resumed later after considering in parameters.\n\t\tif (oInteractiveChartListBinding && oInteractiveChartListBinding.isSuspended() && !bShowOverlay) {\n\t\t\toInteractiveChartListBinding.resume();\n\t\t}\n\t}\n\n\tattachDataRecivedHandler(oInteractiveChartListBinding: ODataListBinding): void {\n\t\tif (oInteractiveChartListBinding) {\n\t\t\toInteractiveChartListBinding.attachEvent(\"dataReceived\", {}, this.onInternalDataReceived, this);\n\t\t\tthis._oChartBinding = oInteractiveChartListBinding;\n\t\t}\n\t}\n\n\tdetachDataReceivedHandler(oInteractiveChartListBinding: ODataListBinding): void {\n\t\tif (oInteractiveChartListBinding) {\n\t\t\toInteractiveChartListBinding.detachEvent(\"dataReceived\", this.onInternalDataReceived, this);\n\t\t\tthis._oChartBinding = undefined;\n\t\t}\n\t}\n\n\tsetShowValueHelp(bShowValueHelp: boolean): void {\n\t\tif (this.getItems().length > 0) {\n\t\t\tconst oVisualFilterControl = this.getVisualFilterControl();\n\t\t\toVisualFilterControl.getContent().some(function (oInnerControl: Control) {\n\t\t\t\tif (oInnerControl.isA<Button>(\"sap.m.Button\")) {\n\t\t\t\t\toInnerControl.setVisible(bShowValueHelp);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.setProperty(\"showValueHelp\", bShowValueHelp);\n\t\t}\n\t}\n\n\tsetValueHelpIconSrc(sIconSrc: string): void {\n\t\tif (this.getItems().length > 0) {\n\t\t\tconst oVisualFilterControl = this.getVisualFilterControl();\n\t\t\toVisualFilterControl.getContent().some(function (oInnerControl: Control) {\n\t\t\t\tif (oInnerControl.isA<Button>(\"sap.m.Button\")) {\n\t\t\t\t\toInnerControl.setIcon(sIconSrc);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.setProperty(\"valueHelpIconSrc\", sIconSrc);\n\t\t}\n\t}\n\n\tgetVisualFilterControl(): OverflowToolbar {\n\t\treturn (this.getItems()[0] as VBox).getItems()[0] as OverflowToolbar;\n\t}\n\n\tgetInteractiveChart(): InteractiveBarChart | InteractiveDonutChart | InteractiveLineChart {\n\t\treturn (this.getItems()[1] as VBox).getItems()[0] as InteractiveBarChart | InteractiveDonutChart | InteractiveLineChart;\n\t}\n\n\tonInternalDataReceived(oEvent: ODataListBinding$DataReceivedEvent): void {\n\t\tconst sId = this.getId();\n\t\tconst oView = CommonUtils.getTargetView(this);\n\t\tconst oInteractiveChart = this.getInteractiveChart();\n\t\tconst sInternalContextPath = this.data(\"infoPath\");\n\t\tconst oInternalModelContext = oInteractiveChart.getBindingContext(\"internal\") as InternalModelContext;\n\t\tconst oResourceBundle = Library.getResourceBundleFor(\"sap.fe.macros\")!;\n\t\tconst vUOM = oInteractiveChart.data(\"uom\");\n\t\tVisualFilterUtils.updateChartScaleFactorTitle(oInteractiveChart, oView, sId, sInternalContextPath);\n\t\tif (oEvent.getParameter(\"error\")) {\n\t\t\tconst s18nMessageTitle = oResourceBundle.getText(\"M_VISUAL_FILTERS_ERROR_MESSAGE_TITLE\");\n\t\t\tconst s18nMessage = oResourceBundle.getText(\"M_VISUAL_FILTERS_ERROR_DATA_TEXT\");\n\t\t\tVisualFilterUtils.applyErrorMessageAndTitle(s18nMessageTitle, s18nMessage, sInternalContextPath, oView);\n\t\t} else if (oEvent.getParameter(\"data\")) {\n\t\t\tconst oData = oEvent.getSource().getCurrentContexts();\n\t\t\tif (oData && oData.length === 0) {\n\t\t\t\tVisualFilterUtils.setNoDataMessage(sInternalContextPath, oResourceBundle, oView);\n\t\t\t} else {\n\t\t\t\toInternalModelContext.setProperty(sInternalContextPath, {});\n\t\t\t}\n\t\t\tVisualFilterUtils.setMultiUOMMessage(oData, oInteractiveChart, sInternalContextPath, oResourceBundle, oView);\n\t\t}\n\t\tif (vUOM && ((vUOM[\"ISOCurrency\"] && vUOM[\"ISOCurrency\"].$Path) || (vUOM[\"Unit\"] && vUOM[\"Unit\"].$Path))) {\n\t\t\tconst oContexts = oEvent.getSource().getContexts();\n\t\t\tconst oContextData = oContexts && oContexts[0].getObject();\n\t\t\tVisualFilterUtils.applyUOMToTitle(oInteractiveChart, oContextData, oView, sInternalContextPath);\n\t\t}\n\t}\n}\nexport default VisualFilter;\n"],"mappings":";;;;;;;;;;;;;;;;;;EA0BA;AACA;AACA;AACA;AACA;AACA;EALA,IAOMA,YAAY,IAAAC,IAAA,GADjBC,cAAc,CAAC,+CAA+C,CAAC,EAAAC,KAAA,GAE9DC,kBAAkB,CAAC,0BAA0B,CAAC,EAAAC,KAAA,GAG9CC,QAAQ,CAAC;IACTC,IAAI,EAAE;EACP,CAAC,CAAC,EAAAC,KAAA,GAGDF,QAAQ,CAAC;IACTC,IAAI,EAAE;EACP,CAAC,CAAC,EAAAE,KAAA,GAGDC,KAAK,CAAC,CAAC,EAAAT,IAAA,CAAAU,MAAA,IAAAC,OAAA,0BAAAC,KAAA;IAAA,SAAAb,aAAA;MAAA,IAAAc,KAAA;MAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAC,IAAA,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;QAAAF,IAAA,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;MAAA;MAAAN,KAAA,GAAAD,KAAA,CAAAQ,IAAA,UAAAH,IAAA;MAAAI,0BAAA,CAAAR,KAAA,4CAAAS,WAAA,EAAAT,KAAA;MAAAQ,0BAAA,CAAAR,KAAA,mBAAAU,YAAA,EAAAV,KAAA;MAAAQ,0BAAA,CAAAR,KAAA,sBAAAW,YAAA,EAAAX,KAAA;MAAAQ,0BAAA,CAAAR,KAAA,sBAAAY,YAAA,EAAAZ,KAAA;MAAA,OAAAA,KAAA;IAAA;IAAAa,cAAA,CAAA3B,YAAA,EAAAa,KAAA;IAAA,IAAAe,MAAA,GAAA5B,YAAA,CAAA6B,SAAA;IAAAD,MAAA,CAKRE,gBAAgB,GAAhB,SAAAA,gBAAgBA,CAAA,EAAS;MACxB,IAAIC,MAAM;MACV,MAAMC,iBAAiB,GAAG,IAAI,CAACC,mBAAmB,CAAC,CAAC;MACpD,MAAMC,oBAAoB,GAAG,IAAI,CAACC,IAAI,CAAC,UAAU,CAAC;MAClD,MAAMC,4BAA4B,GAAIJ,iBAAiB,CAACK,UAAU,CAAC,UAAU,CAAC,IAC7EL,iBAAiB,CAACK,UAAU,CAAC,MAAM,CAAC,IACpCL,iBAAiB,CAACK,UAAU,CAAC,QAAQ,CAAsB;MAC5D,MAAMC,qBAAqB,GAAGN,iBAAiB,CAACO,iBAAiB,CAAC,UAAU,CAAyB;MACrG,MAAMC,eAAe,GAAGC,OAAO,CAACC,oBAAoB,CAAC,eAAe,CAAE;MACtE,MAAMC,qBAAqB,GAAGX,iBAAiB,CAACG,IAAI,CAAC,sBAAsB,CAAC;MAC5E,MAAMS,2BAAgE,GAAIZ,iBAAiB,CAACG,IAAI,CAC/F,4BACD,CAAC,GACGU,YAAY,CAACC,eAAe,CAACd,iBAAiB,CAACG,IAAI,CAAC,4BAA4B,CAAC,CAAC,GAClF;QAAEY,aAAa,EAAE;MAAG,CAAoD;MAC5E,MAAMC,mBAA6B,GAAGhB,iBAAiB,CAACG,IAAI,CAAC,oBAAoB,CAAC,GAC9EU,YAAY,CAACC,eAAe,CAACd,iBAAiB,CAACG,IAAI,CAAC,oBAAoB,CAAC,CAAC,GAC3E,EAAE;MACL,MAAMc,UAAU,GAAIjB,iBAAiB,CAACkB,QAAQ,CAAC,CAAC,CAAgBC,YAAY,CAAC,CAAC;MAC9E,MAAMC,cAAc,GAAGhB,4BAA4B,GAAGA,4BAA4B,CAACiB,OAAO,CAAC,CAAC,GAAG,EAAE;MACjG,IAAIC,UAAU,GAAG,IAAI,CAACC,SAAS,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAc;MAC3D;MACA,IAAID,UAAU,CAACE,WAAW,CAAC,CAAC,CAACC,cAAc,CAAC,CAAC,KAAK,+CAA+C,EAAE;QAClGH,UAAU,GAAGA,UAAU,CAACC,SAAS,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAc;MAC9D;MACA,IAAIG,oBAAuD,GAAG,CAAC,CAAC;MAChE,IAAIC,gBAAgC,GAAG,EAAE;MACzC,IAAIC,iBAAiB;MACrB,IAAIN,UAAU,CAACO,GAAG,CAAY,kCAAkC,CAAC,EAAE;QAClEH,oBAAoB,GAAGJ,UAAU,CAACQ,aAAa,CAAC,CAAC;QACjDH,gBAAgB,GAAGI,WAAW,CAACC,qBAAqB,CAACV,UAA4B,CAAmB;QACpGM,iBAAiB,GAAGN,UAAU,CAACnB,IAAI,CAAC,YAAY,CAAC,CAAC8B,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAChE;MACA,MAAMC,WAAW,GAAGlC,iBAAiB,CAACG,IAAI,CAAC,YAAY,CAAC,GAAGH,iBAAiB,CAACG,IAAI,CAAC,YAAY,CAAC,CAACgC,UAAU,GAAG,EAAE;MAC/G,MAAMC,gBAAgB,GAAGC,wCAAwC,CAChEjB,cAAc,EACdH,UAAU,EACVL,2BAA2B,EAC3B0B,iBAAiB,CAACC,mBAAmB,CAACC,IAAI,CAACF,iBAAiB,CAC7D,CAAC;MACD,MAAMG,2BAA2B,GAAGH,iBAAiB,CAACI,qBAAqB,CAACN,gBAAgB,CAAC;MAC7F,MAAMO,WAA8C,GAAG,CAAC,CAAC;MAEzDC,MAAM,CAACC,IAAI,CAACnB,oBAAoB,CAAC,CAACoB,OAAO,CAAC,UAAUC,IAAY,EAAE;QACjE,IAAIrB,oBAAoB,CAACqB,IAAI,CAAC,CAAC9D,MAAM,EAAE;UACtC0D,WAAW,CAACI,IAAI,CAAC,GAAGrB,oBAAoB,CAACqB,IAAI,CAAC;QAC/C;MACD,CAAC,CAAC;MAEFH,MAAM,CAACC,IAAI,CAACJ,2BAA2B,CAAC,CAACK,OAAO,CAAC,UAAUC,IAAY,EAAE;QACxE,IAAI,CAACJ,WAAW,CAACI,IAAI,CAAC,EAAE;UACvBJ,WAAW,CAACI,IAAI,CAAC,GAAGN,2BAA2B,CAACM,IAAI,CAAC;QACtD;MACD,CAAC,CAAC;MACF,IAAIpC,qBAAqB,KAAK,MAAM,EAAE;QACrC,IAAI,CAACiC,MAAM,CAACC,IAAI,CAACjC,2BAA2B,CAAC,CAAC3B,MAAM,EAAE;UACrD,IAAI+B,mBAAmB,CAAC/B,MAAM,GAAG,CAAC,EAAE;YACnCqB,qBAAqB,CAAC0C,WAAW,CAAC9C,oBAAoB,EAAE;cACvD+C,SAAS,EAAE,IAAI;cACfC,iBAAiB,EAAE1C,eAAe,CAAC2C,OAAO,CAAC,sCAAsC,CAAC;cAClFC,YAAY,EAAE5C,eAAe,CAAC2C,OAAO,CAAC,gDAAgD;YACvF,CAAC,CAAC;UACH,CAAC,MAAM;YACNpD,MAAM,GACLkB,UAAU,CAACoC,SAAS,CAAC,GAAGjC,cAAc,IAAIJ,mBAAmB,CAAC,CAAC,CAAC,uCAAuC,CAAC,IACxGA,mBAAmB,CAAC,CAAC,CAAC;YACvBV,qBAAqB,CAAC0C,WAAW,CAAC9C,oBAAoB,EAAE;cACvD+C,SAAS,EAAE,IAAI;cACfC,iBAAiB,EAAE1C,eAAe,CAAC2C,OAAO,CAAC,sCAAsC,CAAC;cAClFC,YAAY,EAAE5C,eAAe,CAAC2C,OAAO,CAAC,8CAA8C,EAAEpD,MAAM;YAC7F,CAAC,CAAC;UACH;QACD,CAAC,MAAM;UACN,MAAMuD,cAAwB,GAAG,EAAE;UACnC,MAAMC,qBAA+B,GAAG,EAAE;UAC1C,IAAI3C,2BAA2B,CAACG,aAAa,EAAE;YAC9CH,2BAA2B,CAACG,aAAa,CAAC+B,OAAO,CAAC,UAAUU,aAA8C,EAAE;cAC3GF,cAAc,CAACG,IAAI,CAACD,aAAa,CAACE,YAAY,CAAEC,aAAa,CAAC;YAC/D,CAAC,CAAC;UACH;UACA,IAAI/C,2BAA2B,CAACgD,UAAU,EAAE;YAC3ChD,2BAA2B,CAACgD,UAAU,CAACd,OAAO,CAAC,UAAUe,UAAU,EAAE;cACpEP,cAAc,CAACG,IAAI,CAAEI,UAAU,CAA8BH,YAAY,CAAEC,aAAa,CAAC;YAC1F,CAAC,CAAC;UACH;UACA3C,mBAAmB,CAAC8B,OAAO,CAAC,UAAUgB,KAAa,EAAE;YACpD,IAAI,CAACR,cAAc,CAACS,QAAQ,CAACD,KAAK,CAAC,EAAE;cACpCP,qBAAqB,CAACE,IAAI,CAACK,KAAK,CAAC;YAClC;UACD,CAAC,CAAC;UAEF,MAAME,SAAS,GAAG1B,iBAAiB,CAAC2B,+BAA+B,CAClEV,qBAAqB,EACrB/C,eAAe,EACfY,cAAc,EACdH,UACD,CAAC;UACDX,qBAAqB,CAAC0C,WAAW,CAAC9C,oBAAoB,EAAE8D,SAAS,CAAC;QACnE;MACD;MAEA,IAAI,CAAC,IAAI,CAACE,cAAc,IAAI,IAAI,CAACA,cAAc,KAAK9D,4BAA4B,EAAE;QACjF,IAAI,IAAI,CAAC8D,cAAc,EAAE;UACxB,IAAI,CAACC,yBAAyB,CAAC,IAAI,CAACD,cAAc,CAAC;QACpD;QACA,IAAI,CAACE,wBAAwB,CAAChE,4BAA4B,CAAC;QAC3D,IAAI,CAAC8D,cAAc,GAAG9D,4BAA4B;MACnD;MACA,MAAMiE,YAAY,GACjB/D,qBAAqB,CAACgE,WAAW,CAACpE,oBAAoB,CAAC,IAAII,qBAAqB,CAACgE,WAAW,CAACpE,oBAAoB,CAAC,CAAC+C,SAAS;MAC7H,MAAMsB,gBAAgB,GAAGnD,cAAc,KAAK,EAAE,GAAGA,cAAc,CAACa,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;MAChG,IAAIC,WAAW,IAAIA,WAAW,CAACjD,MAAM,IAAI2C,iBAAiB,KAAK2C,gBAAgB,EAAE;QAChF,MAAMC,YAAY,GAAGzC,WAAW,CAAC0C,2BAA2B,CAC3DnD,UAAU,EACVqB,WAAW,EACXhB,gBAAgB,EAChBO,WACD,CAAC;QACD,IAAIsC,YAAY,EAAE;UAChBpE,4BAA4B,CAAwB0D,KAAK,GAAGU,YAAY;QAC1E;MACD;MACA;MACA;MACA,IAAIpE,4BAA4B,IAAIA,4BAA4B,CAACsE,WAAW,CAAC,CAAC,IAAI,CAACL,YAAY,EAAE;QAChGjE,4BAA4B,CAACuE,MAAM,CAAC,CAAC;MACtC;IACD,CAAC;IAAA/E,MAAA,CAEDwE,wBAAwB,GAAxB,SAAAA,wBAAwBA,CAAChE,4BAA8C,EAAQ;MAC9E,IAAIA,4BAA4B,EAAE;QACjCA,4BAA4B,CAACwE,WAAW,CAAC,cAAc,EAAE,CAAC,CAAC,EAAE,IAAI,CAACC,sBAAsB,EAAE,IAAI,CAAC;QAC/F,IAAI,CAACX,cAAc,GAAG9D,4BAA4B;MACnD;IACD,CAAC;IAAAR,MAAA,CAEDuE,yBAAyB,GAAzB,SAAAA,yBAAyBA,CAAC/D,4BAA8C,EAAQ;MAC/E,IAAIA,4BAA4B,EAAE;QACjCA,4BAA4B,CAAC0E,WAAW,CAAC,cAAc,EAAE,IAAI,CAACD,sBAAsB,EAAE,IAAI,CAAC;QAC3F,IAAI,CAACX,cAAc,GAAGa,SAAS;MAChC;IACD,CAAC;IAAAnF,MAAA,CAEDoF,gBAAgB,GAAhB,SAAAA,gBAAgBA,CAACC,cAAuB,EAAQ;MAC/C,IAAI,IAAI,CAACC,QAAQ,CAAC,CAAC,CAACjG,MAAM,GAAG,CAAC,EAAE;QAC/B,MAAMkG,oBAAoB,GAAG,IAAI,CAACC,sBAAsB,CAAC,CAAC;QAC1DD,oBAAoB,CAACE,UAAU,CAAC,CAAC,CAACC,IAAI,CAAC,UAAUC,aAAsB,EAAE;UACxE,IAAIA,aAAa,CAAC1D,GAAG,CAAS,cAAc,CAAC,EAAE;YAC9C0D,aAAa,CAACC,UAAU,CAACP,cAAc,CAAC;UACzC;QACD,CAAC,CAAC;QACF,IAAI,CAACjC,WAAW,CAAC,eAAe,EAAEiC,cAAc,CAAC;MAClD;IACD,CAAC;IAAArF,MAAA,CAED6F,mBAAmB,GAAnB,SAAAA,mBAAmBA,CAACC,QAAgB,EAAQ;MAC3C,IAAI,IAAI,CAACR,QAAQ,CAAC,CAAC,CAACjG,MAAM,GAAG,CAAC,EAAE;QAC/B,MAAMkG,oBAAoB,GAAG,IAAI,CAACC,sBAAsB,CAAC,CAAC;QAC1DD,oBAAoB,CAACE,UAAU,CAAC,CAAC,CAACC,IAAI,CAAC,UAAUC,aAAsB,EAAE;UACxE,IAAIA,aAAa,CAAC1D,GAAG,CAAS,cAAc,CAAC,EAAE;YAC9C0D,aAAa,CAACI,OAAO,CAACD,QAAQ,CAAC;UAChC;QACD,CAAC,CAAC;QACF,IAAI,CAAC1C,WAAW,CAAC,kBAAkB,EAAE0C,QAAQ,CAAC;MAC/C;IACD,CAAC;IAAA9F,MAAA,CAEDwF,sBAAsB,GAAtB,SAAAA,sBAAsBA,CAAA,EAAoB;MACzC,OAAQ,IAAI,CAACF,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAUA,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;IAClD,CAAC;IAAAtF,MAAA,CAEDK,mBAAmB,GAAnB,SAAAA,mBAAmBA,CAAA,EAAuE;MACzF,OAAQ,IAAI,CAACiF,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAUA,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;IAClD,CAAC;IAAAtF,MAAA,CAEDiF,sBAAsB,GAAtB,SAAAA,sBAAsBA,CAACe,MAA0C,EAAQ;MACxE,MAAMC,GAAG,GAAG,IAAI,CAACC,KAAK,CAAC,CAAC;MACxB,MAAMC,KAAK,GAAGC,WAAW,CAACC,aAAa,CAAC,IAAI,CAAC;MAC7C,MAAMjG,iBAAiB,GAAG,IAAI,CAACC,mBAAmB,CAAC,CAAC;MACpD,MAAMC,oBAAoB,GAAG,IAAI,CAACC,IAAI,CAAC,UAAU,CAAC;MAClD,MAAMG,qBAAqB,GAAGN,iBAAiB,CAACO,iBAAiB,CAAC,UAAU,CAAyB;MACrG,MAAMC,eAAe,GAAGC,OAAO,CAACC,oBAAoB,CAAC,eAAe,CAAE;MACtE,MAAMwF,IAAI,GAAGlG,iBAAiB,CAACG,IAAI,CAAC,KAAK,CAAC;MAC1CmC,iBAAiB,CAAC6D,2BAA2B,CAACnG,iBAAiB,EAAE+F,KAAK,EAAEF,GAAG,EAAE3F,oBAAoB,CAAC;MAClG,IAAI0F,MAAM,CAACQ,YAAY,CAAC,OAAO,CAAC,EAAE;QACjC,MAAMC,gBAAgB,GAAG7F,eAAe,CAAC2C,OAAO,CAAC,sCAAsC,CAAC;QACxF,MAAMmD,WAAW,GAAG9F,eAAe,CAAC2C,OAAO,CAAC,kCAAkC,CAAC;QAC/Eb,iBAAiB,CAACiE,yBAAyB,CAACF,gBAAgB,EAAEC,WAAW,EAAEpG,oBAAoB,EAAE6F,KAAK,CAAC;MACxG,CAAC,MAAM,IAAIH,MAAM,CAACQ,YAAY,CAAC,MAAM,CAAC,EAAE;QACvC,MAAMI,KAAK,GAAGZ,MAAM,CAACa,SAAS,CAAC,CAAC,CAACC,kBAAkB,CAAC,CAAC;QACrD,IAAIF,KAAK,IAAIA,KAAK,CAACvH,MAAM,KAAK,CAAC,EAAE;UAChCqD,iBAAiB,CAACqE,gBAAgB,CAACzG,oBAAoB,EAAEM,eAAe,EAAEuF,KAAK,CAAC;QACjF,CAAC,MAAM;UACNzF,qBAAqB,CAAC0C,WAAW,CAAC9C,oBAAoB,EAAE,CAAC,CAAC,CAAC;QAC5D;QACAoC,iBAAiB,CAACsE,kBAAkB,CAACJ,KAAK,EAAExG,iBAAiB,EAAEE,oBAAoB,EAAEM,eAAe,EAAEuF,KAAK,CAAC;MAC7G;MACA,IAAIG,IAAI,KAAMA,IAAI,CAAC,aAAa,CAAC,IAAIA,IAAI,CAAC,aAAa,CAAC,CAACW,KAAK,IAAMX,IAAI,CAAC,MAAM,CAAC,IAAIA,IAAI,CAAC,MAAM,CAAC,CAACW,KAAM,CAAC,EAAE;QACzG,MAAMC,SAAS,GAAGlB,MAAM,CAACa,SAAS,CAAC,CAAC,CAACM,WAAW,CAAC,CAAC;QAClD,MAAMC,YAAY,GAAGF,SAAS,IAAIA,SAAS,CAAC,CAAC,CAAC,CAACzD,SAAS,CAAC,CAAC;QAC1Df,iBAAiB,CAAC2E,eAAe,CAACjH,iBAAiB,EAAEgH,YAAY,EAAEjB,KAAK,EAAE7F,oBAAoB,CAAC;MAChG;IACD,CAAC;IAAA,OAAAlC,YAAA;EAAA,EA7NyBkJ,IAAI,GAAA3H,WAAA,GAAA4H,yBAAA,CAAAvI,OAAA,CAAAiB,SAAA,6CAAA1B,KAAA;IAAAiJ,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA,WAAAA,CAAA;MAAA,OAEW,IAAI;IAAA;EAAA,IAAA/H,YAAA,GAAA2H,yBAAA,CAAAvI,OAAA,CAAAiB,SAAA,oBAAAxB,KAAA;IAAA+I,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA9H,YAAA,GAAA0H,yBAAA,CAAAvI,OAAA,CAAAiB,SAAA,uBAAArB,KAAA;IAAA4I,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA7H,YAAA,GAAAyH,yBAAA,CAAAvI,OAAA,CAAAiB,SAAA,uBAAApB,KAAA;IAAA2I,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA3I,OAAA,MAAAD,MAAA;EAAA,OA6N/BX,YAAY;AAAA","ignoreList":[],"file":"VisualFilter-dbg.js"}