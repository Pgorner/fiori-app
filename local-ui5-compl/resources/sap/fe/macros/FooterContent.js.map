{"version":3,"file":"FooterContent.js","names":["FooterContent","_dec","defineUI5Class","_dec2","implementInterface","_dec3","_dec4","property","type","required","_dec5","_dec6","_dec7","defineReference","_class","_class2","_BuildingBlock","props","others","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_exports","_inheritsLoose","_proto","prototype","initialize","owner","_getOwner","actions","preprocessorContext","bindingContexts","converterContext","getObject","contextPathToUse","fullContextPath","oDataMetaModel","models","metaModel","dataViewModelPath","getDataModelObjectForMetaPath","metaPath","contextPath","startingEntitySet","isDraftValidation","ModelHelper","getDraftRoot","PreparationAction","entityType","annotations","Common","Messages","content","createContent","onMetadataAvailable","getActionModelPath","action","annotationPath","actionContext","getContext","getInvolvedDataModelObjects","undefined","getDraftIndicator","entitySet","targetEntitySet","commonAnnotation","DraftRoot","DraftNode","_jsx","DraftIndicator","state","visible","getApplyButton","emphasizedExpression","controller","getRootController","viewData","getView","getViewData","isDesktop","fclEnabled","MenuButton","text","defaultAction","async","_applyDocument","getBindingContext","useDefaultActionOnly","buttonMode","UI","IsEditable","children","Menu","MenuItem","press","_validateDocument","Button","id","createId","enabled","getPrimary","getTextSaveButton","saveButtonText","getTranslatedText","createButtonText","ifElse","Session","StickySessionSupported","IsCreateMode","Draft","IsNewObject","getCancelButton","isDraftRoot","ariaHasPopup","pathInModel","constant","layoutData","OverflowToolbarLayoutData","closeOverflowOnInteraction","getDataFieldForActionButton","pressEvent","view","annotationPathContext","dataFieldContextModelPath","dataFieldForAction","targetObject","actionParameters","entitySetName","name","invocationGrouping","InvocationGrouping","library","ChangeSet","Isolated","label","Label","toString","isNavigable","defaultValuesExtensionFunction","command","handlers","onCallAction","Action","contexts","model","getModel","startsWith","isActionWithDialog","CriticalityFormatters","buildExpressionForCriticalityButtonType","getManifestButton","ObjectPageTemplating","isManifestAction","event","FPMHelper","actionWrapper","handlerModule","handlerMethod","catch","error","Log","getActionControls","emphasizedButtonExpression","buildEmphasizedButtonExpression","map","ActionType","DefaultApply","DataFieldForAction","Primary","Secondary","filter","messageButton","MessageButton","messageChange","_getFooterVisibility","ariaLabelledBy","footerBar","_jsxs","OverflowToolbar","asyncMode","InvisibleText","ToolbarSpacer","addDependent","CommandExecution","ref","cmdExecution","execute","firePress","BuildingBlock","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./FooterContent.tsx"],"sourcesContent":["import type { EntitySet } from \"@sap-ux/vocabularies-types\";\nimport type { DataFieldForAction } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport type { BindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport { constant, ifElse, pathInModel } from \"sap/fe/base/BindingToolkit\";\nimport { defineReference, defineUI5Class, implementInterface, property, type PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport type { CommandProperties, Ref } from \"sap/fe/base/jsx-runtime/jsx\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport CommandExecution from \"sap/fe/core/controls/CommandExecution\";\nimport type { BaseManifestSettings } from \"sap/fe/core/converters/ManifestSettings\";\nimport { ActionType } from \"sap/fe/core/converters/ManifestSettings\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { isActionWithDialog } from \"sap/fe/core/converters/annotations/DataField\";\nimport type { BaseAction } from \"sap/fe/core/converters/controls/Common/Action\";\nimport { Draft, UI } from \"sap/fe/core/helpers/BindingHelper\";\nimport FPMHelper from \"sap/fe/core/helpers/FPMHelper\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport type { CoreLib } from \"sap/fe/core/library\";\nimport library from \"sap/fe/core/library\";\nimport * as CriticalityFormatters from \"sap/fe/core/templating/CriticalityFormatters\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport MessageButton from \"sap/fe/macros/messages/MessageButton\";\nimport type ObjectPageController from \"sap/fe/templates/ObjectPage/ObjectPageController.controller\";\nimport Button from \"sap/m/Button\";\nimport DraftIndicator from \"sap/m/DraftIndicator\";\nimport Menu from \"sap/m/Menu\";\nimport MenuButton from \"sap/m/MenuButton\";\nimport MenuItem from \"sap/m/MenuItem\";\nimport OverflowToolbar from \"sap/m/OverflowToolbar\";\nimport ToolbarSpacer from \"sap/m/ToolbarSpacer\";\nimport type Event from \"sap/ui/base/Event\";\nimport type { PropertyBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport InvisibleText from \"sap/ui/core/InvisibleText\";\nimport type Controller from \"sap/ui/core/mvc/Controller\";\nimport type { $ControlSettings } from \"sap/ui/mdc/Control\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nimport * as ObjectPageTemplating from \"sap/fe/templates/ObjectPage/ObjectPageTemplating\";\nimport OverflowToolbarLayoutData from \"sap/m/OverflowToolbarLayoutData\";\n\ntype ControllerWithAction = Controller & {\n\thandlers: {\n\t\tonCallAction: Function;\n\t};\n};\n\n@defineUI5Class(\"sap.fe.macros.FooterContent\")\nexport default class FooterContent extends BuildingBlock<OverflowToolbar> {\n\t@implementInterface(\"sap.ui.core.Toolbar\")\n\t__implements__sap_ui_core_Toolbar = true;\n\n\t@implementInterface(\"sap.m.IBar\")\n\t__implements__sap_m_IBar = true;\n\n\t@property({\n\t\ttype: \"string\",\n\t\trequired: true\n\t})\n\tid!: string;\n\n\t@property({\n\t\ttype: \"string\",\n\t\trequired: true\n\t})\n\tpublic metaPath!: string;\n\n\t@property({ type: \"string\" })\n\tcontextPath?: string;\n\n\t@defineReference()\n\tcmdExecution!: Ref<CommandExecution>;\n\n\tactions?: BaseAction[];\n\n\toDataMetaModel!: ODataMetaModel;\n\n\tdataViewModelPath!: DataModelObjectPath<EntitySet>;\n\n\tisDraftValidation!: boolean;\n\n\tconstructor(props: $ControlSettings & PropertiesOf<FooterContent>, others?: $ControlSettings) {\n\t\tsuper(props, others);\n\t}\n\n\tinitialize(): void {\n\t\tconst owner = this._getOwner();\n\t\tthis.actions = owner?.preprocessorContext?.bindingContexts?.converterContext?.getObject(\"footerActions\");\n\t\tconst contextPathToUse = owner?.preprocessorContext?.fullContextPath;\n\t\tthis.oDataMetaModel = owner?.preprocessorContext?.models.metaModel as ODataMetaModel;\n\t\tthis.dataViewModelPath = this.getDataModelObjectForMetaPath(this.metaPath, contextPathToUse ?? this.contextPath)!;\n\t\tconst startingEntitySet = this.dataViewModelPath.startingEntitySet;\n\t\tthis.isDraftValidation = !!(\n\t\t\tModelHelper.getDraftRoot(startingEntitySet)?.PreparationAction && startingEntitySet?.entityType.annotations.Common?.Messages\n\t\t);\n\t\tthis.content = this.createContent();\n\t}\n\n\t/**\n\t * Handler for the onMetadataAvailable event.\n\t */\n\tonMetadataAvailable(): void {\n\t\tif (!this.content) {\n\t\t\tthis.initialize();\n\t\t}\n\t}\n\n\tprivate getActionModelPath(action: BaseAction): DataModelObjectPath<DataFieldForAction> | undefined {\n\t\tconst annotationPath = action.annotationPath;\n\t\tif (annotationPath) {\n\t\t\tconst actionContext = this.oDataMetaModel.getContext(annotationPath);\n\t\t\treturn getInvolvedDataModelObjects<DataFieldForAction>(actionContext);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tgetDraftIndicator(): DraftIndicator | undefined {\n\t\tconst entitySet = (this.dataViewModelPath.targetEntitySet || this.dataViewModelPath.startingEntitySet) as EntitySet; // startingEntitySet is used on containment scenario\n\t\tconst commonAnnotation = entitySet.annotations?.Common;\n\t\tif (commonAnnotation?.DraftRoot || commonAnnotation?.DraftNode) {\n\t\t\treturn <DraftIndicator state=\"{ui>/draftStatus}\" visible=\"{ui>/isEditable}\" />;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate getApplyButton(emphasizedExpression: PropertyBindingInfo): Button | MenuButton {\n\t\tconst controller = this._getOwner()?.getRootController() as ObjectPageController;\n\t\tconst viewData = controller.getView().getViewData() as BaseManifestSettings;\n\t\tif (this.isDraftValidation && !viewData.isDesktop && !viewData.fclEnabled) {\n\t\t\treturn (\n\t\t\t\t<MenuButton\n\t\t\t\t\ttext=\"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_APPLY_DRAFT}\"\n\t\t\t\t\tdefaultAction={async (): Promise<void> => {\n\t\t\t\t\t\tawait controller._applyDocument(controller.getView().getBindingContext());\n\t\t\t\t\t}}\n\t\t\t\t\tuseDefaultActionOnly=\"true\"\n\t\t\t\t\tbuttonMode=\"Split\"\n\t\t\t\t\ttype={emphasizedExpression}\n\t\t\t\t\tvisible={UI.IsEditable}\n\t\t\t\t\tdt:designtime=\"not-adaptable\"\n\t\t\t\t>\n\t\t\t\t\t<Menu>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\ttext=\"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_VALIDATE_DRAFT}\"\n\t\t\t\t\t\t\tpress={async (): Promise<void> => {\n\t\t\t\t\t\t\t\tawait controller._validateDocument();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Menu>\n\t\t\t\t</MenuButton>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tid={this.createId(\"StandardAction::Apply\")}\n\t\t\t\ttext=\"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_APPLY_DRAFT}\"\n\t\t\t\ttype={emphasizedExpression}\n\t\t\t\tenabled={true}\n\t\t\t\tpress={async (): Promise<void> => {\n\t\t\t\t\tawait controller._applyDocument(controller.getView().getBindingContext());\n\t\t\t\t}}\n\t\t\t\tvisible=\"{ui>/isEditable}\"\n\t\t\t\tdt:designtime=\"not-adaptable\"\n\t\t\t/>\n\t\t);\n\t}\n\n\tprivate getPrimary(emphasizedExpression: PropertyBindingInfo): Button | MenuButton {\n\t\tconst controller = this._getOwner()?.getRootController() as ObjectPageController;\n\t\tconst viewData = controller.getView().getViewData() as BaseManifestSettings;\n\t\tif (this.isDraftValidation && !viewData.isDesktop) {\n\t\t\treturn (\n\t\t\t\t<MenuButton\n\t\t\t\t\ttext={this.getTextSaveButton()}\n\t\t\t\t\tjsx:command=\"cmd:Save|defaultAction\"\n\t\t\t\t\tuseDefaultActionOnly=\"true\"\n\t\t\t\t\tbuttonMode=\"Split\"\n\t\t\t\t\ttype={emphasizedExpression}\n\t\t\t\t\tvisible={UI.IsEditable}\n\t\t\t\t\tdt:designtime=\"not-adaptable\"\n\t\t\t\t>\n\t\t\t\t\t<Menu>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\ttext=\"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_VALIDATE_DRAFT}\"\n\t\t\t\t\t\t\tpress={async (): Promise<void> => {\n\t\t\t\t\t\t\t\tawait controller._validateDocument();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Menu>\n\t\t\t\t</MenuButton>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tid={this.createId(\"StandardAction::Save\")}\n\t\t\t\ttext={this.getTextSaveButton()}\n\t\t\t\ttype={emphasizedExpression}\n\t\t\t\tvisible={UI.IsEditable}\n\t\t\t\tenabled={true}\n\t\t\t\tjsx:command=\"cmd:Save|press\"\n\t\t\t\tdt:designtime=\"not-adaptable\"\n\t\t\t/>\n\t\t);\n\t}\n\n\tprivate getTextSaveButton(): BindingToolkitExpression<string> {\n\t\tconst saveButtonText = this.getTranslatedText(\"T_OP_OBJECT_PAGE_SAVE\");\n\t\tconst createButtonText = this.getTranslatedText(\"T_OP_OBJECT_PAGE_CREATE\");\n\t\t// If we're in sticky mode  -> the ui is in create mode, show Create, else show Save\n\t\t// If not -> we're in draft AND the draft is a new object (!IsActiveEntity && !HasActiveEntity), show create, else show save\n\t\treturn ifElse(\n\t\t\tifElse(\n\t\t\t\t(this.dataViewModelPath.startingEntitySet as EntitySet).annotations.Session?.StickySessionSupported !== undefined,\n\t\t\t\tUI.IsCreateMode,\n\t\t\t\tDraft.IsNewObject\n\t\t\t),\n\t\t\tcreateButtonText,\n\t\t\tsaveButtonText\n\t\t);\n\t}\n\n\tprivate getCancelButton(): Button {\n\t\t// OverflowToolbarLayoutData setting is needed when the discard button is in the overflow\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tid={this.createId(\"StandardAction::Cancel\")}\n\t\t\t\ttext={\n\t\t\t\t\tModelHelper.isDraftRoot(this.dataViewModelPath.targetEntitySet)\n\t\t\t\t\t\t? \"{sap.fe.i18n>C_COMMON_OBJECT_PAGE_DISCARD_DRAFT}\"\n\t\t\t\t\t\t: \"{sap.fe.i18n>C_COMMON_OBJECT_PAGE_CANCEL}\"\n\t\t\t\t}\n\t\t\t\tjsx:command=\"cmd:Cancel|press\"\n\t\t\t\tvisible={UI.IsEditable}\n\t\t\t\tariaHasPopup={ifElse(pathInModel(\"/isDocumentModified\", \"ui\"), constant(\"Dialog\"), constant(\"None\"))}\n\t\t\t\tenabled={true}\n\t\t\t\tdt:designtime=\"not-adaptable\"\n\t\t\t>\n\t\t\t\t{{ layoutData: <OverflowToolbarLayoutData closeOverflowOnInteraction={false}></OverflowToolbarLayoutData> }}\n\t\t\t</Button>\n\t\t);\n\t}\n\n\tprivate getDataFieldForActionButton(action: BaseAction): Button | undefined {\n\t\tif (action.annotationPath) {\n\t\t\tconst controller = this._getOwner()?.getRootController() as ObjectPageController;\n\t\t\tconst annotationPath = action.annotationPath;\n\t\t\tlet pressEvent: { press: (event: Event) => void } | { \"jsx:command\": CommandProperties };\n\t\t\tconst view = controller.getView();\n\t\t\tconst annotationPathContext = this.oDataMetaModel.getContext(annotationPath);\n\t\t\tconst dataFieldContextModelPath = getInvolvedDataModelObjects<DataFieldForAction>(annotationPathContext);\n\t\t\tconst dataFieldForAction = dataFieldContextModelPath.targetObject;\n\t\t\tif (dataFieldForAction) {\n\t\t\t\tconst actionParameters = {\n\t\t\t\t\tentitySetName: this.dataViewModelPath.targetEntitySet?.name,\n\t\t\t\t\tinvocationGrouping:\n\t\t\t\t\t\tdataFieldForAction.InvocationGrouping === \"UI.OperationGroupingType/ChangeSet\"\n\t\t\t\t\t\t\t? (library as CoreLib).InvocationGrouping.ChangeSet\n\t\t\t\t\t\t\t: (library as CoreLib).InvocationGrouping.Isolated,\n\t\t\t\t\tlabel: dataFieldForAction.Label?.toString(),\n\t\t\t\t\tisNavigable: action.isNavigable,\n\t\t\t\t\tdefaultValuesExtensionFunction: action.defaultValuesExtensionFunction\n\t\t\t\t};\n\t\t\t\tif (!action.command) {\n\t\t\t\t\tpressEvent = {\n\t\t\t\t\t\tpress: (): void => {\n\t\t\t\t\t\t\t(controller as ControllerWithAction).handlers.onCallAction(view, dataFieldForAction.Action as string, {\n\t\t\t\t\t\t\t\t...actionParameters,\n\t\t\t\t\t\t\t\t...{\n\t\t\t\t\t\t\t\t\tcontexts: view.getBindingContext(),\n\t\t\t\t\t\t\t\t\tmodel: view.getModel()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\t// command coming from the manifest doesn't get the mandatory prefix \"cmd:\" so we need to add it\n\t\t\t\t\tif (!action.command.startsWith(\"cmd:\")) {\n\t\t\t\t\t\taction.command = `cmd:${action.command}`;\n\t\t\t\t\t}\n\t\t\t\t\tpressEvent = { \"jsx:command\": `${action.command}|press` as CommandProperties };\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tid={this.createId(this.getActionModelPath(action))}\n\t\t\t\t\t\t// This expression considers actions with dynamic visibility.\n\t\t\t\t\t\t// When we have other values than true or false, i.e. an expression, we exclude the actions from adapting the visibility.\n\t\t\t\t\t\tdt:designtime={action.visible === \"true\" || action.visible === \"false\" ? undefined : \"not-adaptable-visibility\"}\n\t\t\t\t\t\ttext={actionParameters.label}\n\t\t\t\t\t\t{...pressEvent}\n\t\t\t\t\t\tariaHasPopup={isActionWithDialog(dataFieldContextModelPath.targetObject)}\n\t\t\t\t\t\tvisible={action.visible}\n\t\t\t\t\t\tenabled={action.enabled}\n\t\t\t\t\t\ttype={CriticalityFormatters.buildExpressionForCriticalityButtonType(dataFieldContextModelPath)}\n\t\t\t\t\t/>\n\t\t\t\t) as Button;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getManifestButton(action: BaseAction): Button | undefined {\n\t\tif (ObjectPageTemplating.isManifestAction(action)) {\n\t\t\tlet pressEvent: { press: (event: Event) => void } | { \"jsx:command\": CommandProperties };\n\t\t\tif (action.command) {\n\t\t\t\tpressEvent = { \"jsx:command\": `cmd:${action.command}|press` };\n\t\t\t} else {\n\t\t\t\tpressEvent = {\n\t\t\t\t\tpress: (event: Event): void => {\n\t\t\t\t\t\tFPMHelper.actionWrapper(event, action.handlerModule, action.handlerMethod, {}).catch((error: unknown) =>\n\t\t\t\t\t\t\tLog.error(error as string)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<Button\n\t\t\t\t\tid={this.createId(action.id)}\n\t\t\t\t\tdt:designtime={action.visible === \"true\" || action.visible === \"false\" ? undefined : \"not-adaptable-visibility\"}\n\t\t\t\t\ttext={action.text ?? \"\"}\n\t\t\t\t\t{...pressEvent}\n\t\t\t\t\ttype=\"Transparent\"\n\t\t\t\t\tvisible={action.visible}\n\t\t\t\t\tenabled={action.enabled}\n\t\t\t\t/>\n\t\t\t) as Button;\n\t\t}\n\t}\n\n\tgetActionControls(): Button[] | undefined {\n\t\tconst emphasizedButtonExpression = ObjectPageTemplating.buildEmphasizedButtonExpression(this.dataViewModelPath);\n\t\treturn this.actions\n\t\t\t?.map((action: BaseAction) => {\n\t\t\t\tswitch (action.type) {\n\t\t\t\t\tcase ActionType.DefaultApply:\n\t\t\t\t\t\treturn this.getApplyButton(emphasizedButtonExpression);\n\t\t\t\t\tcase ActionType.DataFieldForAction:\n\t\t\t\t\t\treturn this.getDataFieldForActionButton(action);\n\t\t\t\t\tcase ActionType.Primary:\n\t\t\t\t\t\treturn this.getPrimary(emphasizedButtonExpression);\n\t\t\t\t\tcase ActionType.Secondary:\n\t\t\t\t\t\treturn this.getCancelButton();\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn this.getManifestButton(action);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.filter((action): action is Button => !!action);\n\t}\n\n\tcreateContent(): OverflowToolbar {\n\t\tconst controller = this._getOwner()?.getRootController() as ObjectPageController;\n\t\tconst messageButton: MessageButton = (\n\t\t\t<MessageButton\n\t\t\t\tid={this.createId(\"MessageButton\")}\n\t\t\t\tmessageChange={(): void => controller._getFooterVisibility()}\n\t\t\t\tariaLabelledBy={[this.createId(\"MessageButton::AriaText\") as string]}\n\t\t\t\ttype=\"Emphasized\"\n\t\t\t\tariaHasPopup=\"Dialog\"\n\t\t\t/>\n\t\t);\n\t\tconst footerBar = (\n\t\t\t<OverflowToolbar id={this.createId(\"_fc\")} asyncMode={true}>\n\t\t\t\t<InvisibleText\n\t\t\t\t\tid={this.createId(\"MessageButton::AriaText\")}\n\t\t\t\t\ttext=\"{sap.fe.i18n>C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_BUTTON_ARIA_TEXT}\"\n\t\t\t\t/>\n\t\t\t\t{messageButton}\n\t\t\t\t<ToolbarSpacer />\n\t\t\t\t{this.getDraftIndicator()}\n\t\t\t\t{this.getActionControls()}\n\t\t\t</OverflowToolbar>\n\t\t);\n\t\tcontroller\n\t\t\t.getView()\n\t\t\t.addDependent(\n\t\t\t\t<CommandExecution\n\t\t\t\t\tref={this.cmdExecution}\n\t\t\t\t\tcommand=\"OpenMessageButtonMenu\"\n\t\t\t\t\texecute={(): MessageButton => messageButton.firePress()}\n\t\t\t\t/>\n\t\t\t);\n\t\treturn footerBar;\n\t}\n}\n"],"mappings":";;;;gnEAoCA,IAWqBA,IAAaC,EADjCC,EAAe,+BAA8BC,EAE5CC,EAAmB,uBAAsBC,EAGzCD,EAAmB,cAAaE,EAGhCC,EAAS,CACTC,KAAM,SACNC,SAAU,OACTC,EAGDH,EAAS,CACTC,KAAM,SACNC,SAAU,OACTE,EAGDJ,EAAS,CAAEC,KAAM,WAAWI,EAG5BC,IAAiBZ,EAAAa,GAAAC,EAAA,SAAAC,GAWlB,SAAAhB,EAAYiB,EAAuDC,GAA2B,IAAAC,EAC7FA,EAAAH,EAAAI,KAAAC,KAAMJ,EAAOC,IAAOG,KAACC,GAAAH,EAAA,oCAAAI,EAAAJ,GAAAG,GAAAH,EAAA,2BAAAK,EAAAL,GAAAG,GAAAH,EAAA,KAAAM,EAAAN,GAAAG,GAAAH,EAAA,WAAAO,EAAAP,GAAAG,GAAAH,EAAA,cAAAQ,EAAAR,GAAAG,GAAAH,EAAA,eAAAS,EAAAT,GAAA,OAAAA,CACtB,CAACU,EAAA7B,EAAA8B,GAAA9B,EAAAgB,GAAA,IAAAe,EAAA/B,EAAAgC,UAAAD,EAEDE,WAAA,SAAAA,IACC,MAAMC,EAAQb,KAAKc,YACnBd,KAAKe,QAAUF,GAAOG,qBAAqBC,iBAAiBC,kBAAkBC,UAAU,iBACxF,MAAMC,EAAmBP,GAAOG,qBAAqBK,gBACrDrB,KAAKsB,eAAiBT,GAAOG,qBAAqBO,OAAOC,UACzDxB,KAAKyB,kBAAoBzB,KAAK0B,8BAA8B1B,KAAK2B,SAAUP,GAAoBpB,KAAK4B,aACpG,MAAMC,EAAoB7B,KAAKyB,kBAAkBI,kBACjD7B,KAAK8B,qBACJC,EAAYC,aAAaH,IAAoBI,mBAAqBJ,GAAmBK,WAAWC,YAAYC,QAAQC,UAErHrC,KAAKsC,QAAUtC,KAAKuC,eACrB,EAEA7B,EAGA8B,oBAAA,SAAAA,IACC,IAAKxC,KAAKsC,QAAS,CAClBtC,KAAKY,YACN,CACD,EAACF,EAEO+B,mBAAR,SAAQA,EAAmBC,GAC1B,MAAMC,EAAiBD,EAAOC,eAC9B,GAAIA,EAAgB,CACnB,MAAMC,EAAgB5C,KAAKsB,eAAeuB,WAAWF,GACrD,OAAOG,EAAgDF,EACxD,CACA,OAAOG,SACR,EAACrC,EAEDsC,kBAAA,SAAAA,IACC,MAAMC,EAAajD,KAAKyB,kBAAkByB,iBAAmBlD,KAAKyB,kBAAkBI,kBACpF,MAAMsB,EAAmBF,EAAUd,aAAaC,OAChD,GAAIe,GAAkBC,WAAaD,GAAkBE,UAAW,CAC/D,OAAOC,EAACC,EAAc,CAACC,MAAM,oBAAoBC,QAAQ,oBAC1D,CACA,OAAOV,SACR,EAACrC,EAEOgD,eAAR,SAAQA,EAAeC,GACtB,MAAMC,EAAa5D,KAAKc,aAAa+C,oBACrC,MAAMC,EAAWF,EAAWG,UAAUC,cACtC,GAAIhE,KAAK8B,oBAAsBgC,EAASG,YAAcH,EAASI,WAAY,CAC1E,OACCZ,EAACa,EAAU,CACVC,KAAK,iDACLC,cAAeC,gBACRV,EAAWW,eAAeX,EAAWG,UAAUS,oBAAoB,EAE1EC,qBAAqB,OACrBC,WAAW,QACXvF,KAAMwE,EACNF,QAASkB,EAAGC,WACZ,gBAAc,gBAAeC,SAE7BvB,EAACwB,EAAI,CAAAD,SACJvB,EAACyB,EAAQ,CACRX,KAAK,oDACLY,MAAOV,gBACAV,EAAWqB,mBAAmB,OAM1C,CACA,OACC3B,EAAC4B,EAAM,CACNC,GAAInF,KAAKoF,SAAS,yBAClBhB,KAAK,iDACLjF,KAAMwE,EACN0B,QAAS,KACTL,MAAOV,gBACAV,EAAWW,eAAeX,EAAWG,UAAUS,oBAAoB,EAE1Ef,QAAQ,mBACR,gBAAc,iBAGjB,EAAC/C,EAEO4E,WAAR,SAAQA,EAAW3B,GAClB,MAAMC,EAAa5D,KAAKc,aAAa+C,oBACrC,MAAMC,EAAWF,EAAWG,UAAUC,cACtC,GAAIhE,KAAK8B,oBAAsBgC,EAASG,UAAW,CAClD,OACCX,EAACa,EAAU,CACVC,KAAMpE,KAAKuF,oBACX,cAAY,yBACZd,qBAAqB,OACrBC,WAAW,QACXvF,KAAMwE,EACNF,QAASkB,EAAGC,WACZ,gBAAc,gBAAeC,SAE7BvB,EAACwB,EAAI,CAAAD,SACJvB,EAACyB,EAAQ,CACRX,KAAK,oDACLY,MAAOV,gBACAV,EAAWqB,mBAAmB,OAM1C,CACA,OACC3B,EAAC4B,EAAM,CACNC,GAAInF,KAAKoF,SAAS,wBAClBhB,KAAMpE,KAAKuF,oBACXpG,KAAMwE,EACNF,QAASkB,EAAGC,WACZS,QAAS,KACT,cAAY,iBACZ,gBAAc,iBAGjB,EAAC3E,EAEO6E,kBAAR,SAAQA,IACP,MAAMC,EAAiBxF,KAAKyF,kBAAkB,yBAC9C,MAAMC,EAAmB1F,KAAKyF,kBAAkB,2BAGhD,OAAOE,EACNA,EACE3F,KAAKyB,kBAAkBI,kBAAgCM,YAAYyD,SAASC,yBAA2B9C,UACxG4B,EAAGmB,aACHC,EAAMC,aAEPN,EACAF,EAEF,EAAC9E,EAEOuF,gBAAR,SAAQA,IAEP,OACC3C,EAAC4B,EAAM,CACNC,GAAInF,KAAKoF,SAAS,0BAClBhB,KACCrC,EAAYmE,YAAYlG,KAAKyB,kBAAkByB,iBAC5C,mDACA,4CAEJ,cAAY,mBACZO,QAASkB,EAAGC,WACZuB,aAAcR,EAAOS,EAAY,sBAAuB,MAAOC,EAAS,UAAWA,EAAS,SAC5FhB,QAAS,KACT,gBAAc,gBAAeR,SAE5B,CAAEyB,WAAYhD,EAACiD,EAAyB,CAACC,2BAA4B,UAGzE,EAAC9F,EAEO+F,4BAAR,SAAQA,EAA4B/D,GACnC,GAAIA,EAAOC,eAAgB,CAC1B,MAAMiB,EAAa5D,KAAKc,aAAa+C,oBACrC,MAAMlB,EAAiBD,EAAOC,eAC9B,IAAI+D,EACJ,MAAMC,EAAO/C,EAAWG,UACxB,MAAM6C,EAAwB5G,KAAKsB,eAAeuB,WAAWF,GAC7D,MAAMkE,EAA4B/D,EAAgD8D,GAClF,MAAME,EAAqBD,EAA0BE,aACrD,GAAID,EAAoB,CACvB,MAAME,EAAmB,CACxBC,cAAejH,KAAKyB,kBAAkByB,iBAAiBgE,KACvDC,mBACCL,EAAmBM,qBAAuB,qCACtCC,EAAoBD,mBAAmBE,UACvCD,EAAoBD,mBAAmBG,SAC5CC,MAAOV,EAAmBW,OAAOC,WACjCC,YAAajF,EAAOiF,YACpBC,+BAAgClF,EAAOkF,gCAExC,IAAKlF,EAAOmF,QAAS,CACpBnB,EAAa,CACZ1B,MAAOA,KACLpB,EAAoCkE,SAASC,aAAapB,EAAMG,EAAmBkB,OAAkB,IAClGhB,KACA,CACFiB,SAAUtB,EAAKnC,oBACf0D,MAAOvB,EAAKwB,aAEZ,EAGL,KAAO,CAEN,IAAKzF,EAAOmF,QAAQO,WAAW,QAAS,CACvC1F,EAAOmF,QAAU,OAAOnF,EAAOmF,SAChC,CACAnB,EAAa,CAAE,cAAe,GAAGhE,EAAOmF,gBACzC,CACA,OACCvE,EAAC4B,EAAM,CACNC,GAAInF,KAAKoF,SAASpF,KAAKyC,mBAAmBC,IAG1C,gBAAeA,EAAOe,UAAY,QAAUf,EAAOe,UAAY,QAAUV,UAAY,2BACrFqB,KAAM4C,EAAiBQ,SACnBd,EACJP,aAAckC,EAAmBxB,EAA0BE,cAC3DtD,QAASf,EAAOe,QAChB4B,QAAS3C,EAAO2C,QAChBlG,KAAMmJ,EAAsBC,wCAAwC1B,IAGvE,CACD,CACD,EAACnG,EAEO8H,kBAAR,SAAQA,EAAkB9F,GACzB,GAAI+F,EAAqBC,iBAAiBhG,GAAS,CAClD,IAAIgE,EACJ,GAAIhE,EAAOmF,QAAS,CACnBnB,EAAa,CAAE,cAAe,OAAOhE,EAAOmF,gBAC7C,KAAO,CACNnB,EAAa,CACZ1B,MAAQ2D,IACPC,EAAUC,cAAcF,EAAOjG,EAAOoG,cAAepG,EAAOqG,cAAe,CAAC,GAAGC,MAAOC,GACrFC,EAAID,MAAMA,GACV,EAGJ,CACA,OACC3F,EAAC4B,EAAM,CACNC,GAAInF,KAAKoF,SAAS1C,EAAOyC,IACzB,gBAAezC,EAAOe,UAAY,QAAUf,EAAOe,UAAY,QAAUV,UAAY,2BACrFqB,KAAM1B,EAAO0B,MAAQ,MACjBsC,EACJvH,KAAK,cACLsE,QAASf,EAAOe,QAChB4B,QAAS3C,EAAO2C,SAGnB,CACD,EAAC3E,EAEDyI,kBAAA,SAAAA,IACC,MAAMC,EAA6BX,EAAqBY,gCAAgCrJ,KAAKyB,mBAC7F,OAAOzB,KAAKe,SACTuI,IAAK5G,IACN,OAAQA,EAAOvD,MACd,KAAKoK,EAAWC,aACf,OAAOxJ,KAAK0D,eAAe0F,GAC5B,KAAKG,EAAWE,mBACf,OAAOzJ,KAAKyG,4BAA4B/D,GACzC,KAAK6G,EAAWG,QACf,OAAO1J,KAAKsF,WAAW8D,GACxB,KAAKG,EAAWI,UACf,OAAO3J,KAAKiG,kBACb,QACC,OAAOjG,KAAKwI,kBAAkB9F,GAChC,GAEAkH,OAAQlH,KAA+BA,EAC1C,EAAChC,EAED6B,cAAA,SAAAA,IACC,MAAMqB,EAAa5D,KAAKc,aAAa+C,oBACrC,MAAMgG,EACLvG,EAACwG,EAAa,CACb3E,GAAInF,KAAKoF,SAAS,iBAClB2E,cAAeA,IAAYnG,EAAWoG,uBACtCC,eAAgB,CAACjK,KAAKoF,SAAS,4BAC/BjG,KAAK,aACLgH,aAAa,WAGf,MAAM+D,EACLC,EAACC,EAAe,CAACjF,GAAInF,KAAKoF,SAAS,OAAQiF,UAAW,KAAKxF,SAAA,CAC1DvB,EAACgH,EAAa,CACbnF,GAAInF,KAAKoF,SAAS,2BAClBhB,KAAK,sEAELyF,EACDvG,EAACiH,EAAa,IACbvK,KAAKgD,oBACLhD,KAAKmJ,uBAGRvF,EACEG,UACAyG,aACAlH,EAACmH,EAAgB,CAChBC,IAAK1K,KAAK2K,aACV9C,QAAQ,wBACR+C,QAASA,IAAqBf,EAAcgB,eAG/C,OAAOX,CACR,EAAC,OAAAvL,CAAA,CAtTiB,CAtBwBmM,GAAa5K,EAAA6K,GAAArL,EAAAiB,UAAA,qCAAA7B,GAAA,CAAAkM,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBAEnB,IAAI,IAAAhL,EAAA4K,GAAArL,EAAAiB,UAAA,4BAAA3B,GAAA,CAAAgM,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBAGb,IAAI,IAAA/K,EAAA2K,GAAArL,EAAAiB,UAAA,MAAA1B,GAAA,CAAA+L,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA9K,EAAA0K,GAAArL,EAAAiB,UAAA,YAAAtB,GAAA,CAAA2L,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA7K,EAAAyK,GAAArL,EAAAiB,UAAA,eAAArB,GAAA,CAAA0L,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA5K,EAAAwK,GAAArL,EAAAiB,UAAA,gBAAApB,GAAA,CAAAyL,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAzL,KAAAD,GAAAe,EAAA7B,GAAA,OAAA6B,CAAA","ignoreList":[]}