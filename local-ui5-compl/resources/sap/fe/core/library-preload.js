//@ui5-bundle sap/fe/core/library-preload.js
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/AnnotationEnum", [],function(){"use strict";var e={};const n={"com.sap.vocabularies.Common.v1.FieldControlType":{Mandatory:7,Optional:3,ReadOnly:0,Inapplicable:0,Disabled:1}};const a=function(e){if(!e){return false}const[a,r]=e.split("/");if(n.hasOwnProperty(a)){return n[a][r]}else{return false}};e.resolveEnumValue=a;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/BindingToolkit", ["sap/fe/base/AnnotationEnum"],function(e){"use strict";var t={};var n=e.resolveEnumValue;function r(e){return e?._type==="Property"}t.isProperty=r;const a={"Edm.Boolean":{type:"sap.ui.model.odata.type.Boolean"},"Edm.Byte":{type:"sap.ui.model.odata.type.Byte"},"Edm.Date":{type:"sap.ui.model.odata.type.Date"},"Edm.DateTimeOffset":{constraints:{$Precision:"precision",$V4:"V4"},type:"sap.ui.model.odata.type.DateTimeOffset"},"Edm.Decimal":{constraints:{"@Org.OData.Validation.V1.Minimum/$Decimal":"minimum","@Org.OData.Validation.V1.Minimum@Org.OData.Validation.V1.Exclusive":"minimumExclusive","@Org.OData.Validation.V1.Maximum/$Decimal":"maximum","@Org.OData.Validation.V1.Maximum@Org.OData.Validation.V1.Exclusive":"maximumExclusive",$Precision:"precision",$Scale:"scale"},type:"sap.ui.model.odata.type.Decimal"},"Edm.Double":{type:"sap.ui.model.odata.type.Double"},"Edm.Guid":{type:"sap.ui.model.odata.type.Guid"},"Edm.Int16":{type:"sap.ui.model.odata.type.Int16"},"Edm.Int32":{type:"sap.ui.model.odata.type.Int32"},"Edm.Int64":{type:"sap.ui.model.odata.type.Int64"},"Edm.SByte":{type:"sap.ui.model.odata.type.SByte"},"Edm.Single":{type:"sap.ui.model.odata.type.Single"},"Edm.Stream":{type:"sap.ui.model.odata.type.Stream"},"Edm.Binary":{type:"sap.ui.model.odata.type.Stream"},"Edm.String":{constraints:{"@com.sap.vocabularies.Common.v1.IsDigitSequence":"isDigitSequence",$MaxLength:"maxLength",$Nullable:"nullable"},type:"sap.ui.model.odata.type.String"},"Edm.TimeOfDay":{constraints:{$Precision:"precision"},type:"sap.ui.model.odata.type.TimeOfDay"}};t.EDM_TYPE_MAPPING=a;const o={_type:"Unresolvable"};t.unresolvableExpression=o;function s(e){return e.replace(/'/g,"\\'")}t.escapeXmlAttribute=s;function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return t.find(e=>e._type==="Unresolvable")!==undefined}t.hasUnresolvableExpression=i;function u(e,t){if(e._type!==t._type){return false}switch(e._type){case"Unresolvable":return false;case"Constant":case"EmbeddedBinding":case"EmbeddedExpressionBinding":return e.value===t.value;case"Not":return u(e.operand,t.operand);case"Truthy":return u(e.operand,t.operand);case"Set":return e.operator===t.operator&&e.operands.length===t.operands.length&&e.operands.every(e=>t.operands.some(t=>u(e,t)));case"IfElse":return u(e.condition,t.condition)&&u(e.onTrue,t.onTrue)&&u(e.onFalse,t.onFalse);case"Comparison":return e.operator===t.operator&&u(e.operand1,t.operand1)&&u(e.operand2,t.operand2);case"Concat":const n=e.expressions;const r=t.expressions;if(n.length!==r.length){return false}return n.every((e,t)=>u(e,r[t]));case"Length":return u(e.pathInModel,t.pathInModel);case"PathInModel":return e.modelName===t.modelName&&e.path===t.path&&e.targetEntitySet===t.targetEntitySet;case"Formatter":return e.fn===t.fn&&e.parameters.length===t.parameters.length&&e.parameters.every((e,n)=>u(t.parameters[n],e));case"ComplexType":return e.type===t.type&&e.bindingParameters.length===t.bindingParameters.length&&e.bindingParameters.every((e,n)=>u(t.bindingParameters[n],e));case"Function":const a=t;if(e.obj===undefined||a.obj===undefined){return e.obj===a}return e.fn===a.fn&&u(e.obj,a.obj)&&e.parameters.length===a.parameters.length&&e.parameters.every((e,t)=>u(a.parameters[t],e));case"Ref":return e.ref===t.ref}return false}t._checkExpressionsAreEqual=u;function l(e){return e.operands.reduce((t,n)=>{const r=n._type==="Set"&&n.operator===e.operator?n.operands:[n];r.forEach(e=>{if(t.operands.every(t=>!u(t,e))){t.operands.push(e)}});return t},{_type:"Set",operator:e.operator,operands:[]})}function p(e){const t=e.map(d);return e.some((e,n)=>{for(let r=n+1;r<t.length;r++){if(u(e,t[r])){return true}}return false})}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}const r=l({_type:"Set",operator:"&&",operands:t.map(E)}).operands;if(i(...r)){return o}let a=false;const s=r.filter(e=>{if(P(e)){a=true}return!I(e)});if(a){return $(false)}else if(s.length===0){const e=r.reduce((e,t)=>e&&_(t),true);return $(e)}else if(s.length===1){return s[0]}else if(p(s)){return $(false)}else{return{_type:"Set",operator:"&&",operands:s}}}t.and=f;function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}const r=l({_type:"Set",operator:"||",operands:t.map(E)}).operands;if(i(...r)){return o}let a=false;const s=r.filter(e=>{if(_(e)){a=true}return!I(e)||e.value});if(a){return $(true)}else if(s.length===0){const e=r.reduce((e,t)=>e&&_(t),true);return $(e)}else if(s.length===1){return s[0]}else if(p(s)){return $(true)}else{return{_type:"Set",operator:"||",operands:s}}}t.or=c;function d(e){e=E(e);if(i(e)){return o}else if(I(e)){return $(!e.value)}else if(typeof e==="object"&&e._type==="Set"&&e.operator==="||"&&e.operands.every(e=>I(e)||T(e))){return f(...e.operands.map(e=>d(e)))}else if(typeof e==="object"&&e._type==="Set"&&e.operator==="&&"&&e.operands.every(e=>I(e)||T(e))){return c(...e.operands.map(e=>d(e)))}else if(T(e)){switch(e.operator){case"!==":return{...e,operator:"==="};case"<":return{...e,operator:">="};case"<=":return{...e,operator:">"};case"===":return{...e,operator:"!=="};case">":return{...e,operator:"<="};case">=":return{...e,operator:"<"}}}else if(e._type==="Not"){return e.operand}return{_type:"Not",operand:e}}t.not=d;function m(e){if(I(e)){return $(!!e.value)}else{return{_type:"Truthy",operand:e}}}t.isTruthy=m;function y(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];let r=arguments.length>3?arguments[3]:undefined;return h(e,t,n,r)}t.bindingExpression=y;function h(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];let r=arguments.length>3?arguments[3]:undefined;if(e===undefined){return o}let a;if(r){a=r(e);if(a===undefined){return o}}else{const t=n.concat();t.push(e);a=t.join("/")}return{_type:"PathInModel",modelName:t,path:a}}t.pathInModel=h;function $(e){let t;if(typeof e==="object"&&e!==null&&e!==undefined){if(Array.isArray(e)){t=e.map(E)}else if(D(e)){t=e.valueOf()}else{t=Object.entries(e).reduce((e,t)=>{let[n,r]=t;const a=E(r);if(a._type!=="Constant"||a.value!==undefined){e[n]=a}return e},{})}}else{t=e}return{_type:"Constant",value:t}}t.constant=$;function g(e,t){if(e!==undefined&&typeof e==="string"&&e.startsWith("{")){const t=/^{(.*)>(.+)}$/;const n=t.exec(e);if(e.startsWith("{=")){return{_type:"EmbeddedExpressionBinding",value:e}}else if(n){return h(n[2]||"",n[1]||undefined)}else{return{_type:"EmbeddedBinding",value:e}}}else if(t==="boolean"&&typeof e==="string"&&(e==="true"||e==="false")){return $(e==="true")}else if(t==="number"&&typeof e==="string"&&(!isNaN(Number(e))||e==="NaN")){return $(Number(e))}else{return $(e)}}t.resolveBindingString=g;function v(e){return{_type:"Ref",ref:e}}t.ref=v;function b(e,t){if(typeof e==="object"&&e.__bindingInfo){return h("/"+t.toString(),e.__bindingInfo.model)}else{return $(e)}}t.bindState=b;function E(e){if(O(e)){return e}return $(e)}t.wrapPrimitive=E;function O(e){return e?._type!==undefined}t.isBindingToolkitExpression=O;function I(e){return typeof e!=="object"||e._type==="Constant"}t.isConstant=I;function _(e){return I(e)&&e.value===true}function P(e){return I(e)&&e.value===false}function C(e){return e?._type==="PathInModel"}t.isPathInModelExpression=C;function S(e){return e?._type==="ComplexType"}t.isComplexTypeExpression=S;function x(e){return e?._type==="Concat"}function F(e){return e?._type==="IfElse"}function T(e){return e._type==="Comparison"}function N(e){const t=e;return t?._type==="Constant"&&t?.value===undefined}t.isUndefinedExpression=N;function D(e){switch(e.constructor.name){case"String":case"Number":case"Boolean":return true;default:return false}}function w(e){return typeof e==="object"&&!D(e)}function M(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let n=arguments.length>2?arguments[2]:undefined;let r=arguments.length>3?arguments[3]:undefined;if(e===undefined){return E(n)}e=e?.valueOf();if(!w(e)){return $(e)}switch(e.type){case"Path":return h(e.path,undefined,t,r);case"If":return A(e.$If,t,r);case"Not":return d(j(e.$Not,t,r));case"Eq":return q(j(e.$Eq[0],t,r),j(e.$Eq[1],t,r));case"Ne":return G(j(e.$Ne[0],t,r),j(e.$Ne[1],t,r));case"Gt":return Y(j(e.$Gt[0],t,r),j(e.$Gt[1],t,r));case"Ge":return U(j(e.$Ge[0],t,r),j(e.$Ge[1],t,r));case"Lt":return R(j(e.$Lt[0],t,r),j(e.$Lt[1],t,r));case"Le":return W(j(e.$Le[0],t,r),j(e.$Le[1],t,r));case"Or":return c(...e.$Or.map(function(e){return j(e,t,r)}));case"And":return f(...e.$And.map(function(e){return j(e,t,r)}));case"Apply":return L(e,t,r);case"Constant":return $(e.value)}return o}t.getExpressionFromAnnotation=M;function j(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let r=arguments.length>2?arguments[2]:undefined;if(e===null||typeof e!=="object"){return $(e)}else if(e.hasOwnProperty("$Or")){return c(...e.$Or.map(function(e){return j(e,t,r)}))}else if(e.hasOwnProperty("$And")){return f(...e.$And.map(function(e){return j(e,t,r)}))}else if(e.hasOwnProperty("$Not")){return d(j(e.$Not,t,r))}else if(e.hasOwnProperty("$Eq")){return q(j(e.$Eq[0],t,r),j(e.$Eq[1],t,r))}else if(e.hasOwnProperty("$Ne")){return G(j(e.$Ne[0],t,r),j(e.$Ne[1],t,r))}else if(e.hasOwnProperty("$Gt")){return Y(j(e.$Gt[0],t,r),j(e.$Gt[1],t,r))}else if(e.hasOwnProperty("$Ge")){return U(j(e.$Ge[0],t,r),j(e.$Ge[1],t,r))}else if(e.hasOwnProperty("$Lt")){return R(j(e.$Lt[0],t,r),j(e.$Lt[1],t,r))}else if(e.hasOwnProperty("$Le")){return W(j(e.$Le[0],t,r),j(e.$Le[1],t,r))}else if(e.hasOwnProperty("$Path")){return h(e.$Path,undefined,t,r)}else if(e.hasOwnProperty("$Apply")){return M({type:"Apply",$Function:e.$Function,$Apply:e.$Apply},t,undefined,r)}else if(e.hasOwnProperty("$If")){return M({type:"If",$If:e.$If},t,undefined,r)}else if(e.hasOwnProperty("$EnumMember")){return $(n(e.$EnumMember))}return $(false)}function A(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let n=arguments.length>2?arguments[2]:undefined;return K(j(e[0],t,n),j(e[1],t,n),j(e[2],t,n))}t.annotationIfExpression=A;function V(e){let t=e;if(e.hasOwnProperty("$Path")){t={type:"Path",path:e.$Path}}else if(e.hasOwnProperty("$If")){t={type:"If",$If:e.$If}}else if(e.hasOwnProperty("$Apply")){t={type:"Apply",$Function:e.$Function,$Apply:e.$Apply}}return t}function L(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let n=arguments.length>2?arguments[2]:undefined;switch(e.$Function){case"odata.concat":return re(...e.$Apply.map(e=>M(V(e),t,undefined,n)));case"odata.uriEncode":const r=M(V(e.$Apply[0]),t,undefined,n);return te("odata.uriEncode",[r,"Edm.String"],undefined,true);case"odata.fillUriTemplate":const a=e.$Apply[0];const o=e.$Apply.slice(1);const s={};o.forEach(e=>{s[e.$Name]=M(V(e.$LabeledElement),t,undefined,n)});return te("odata.fillUriTemplate",[a,s],undefined,true)}return o}t.annotationApplyExpression=L;function k(e,t,n){const r=E(t);const a=E(n);if(i(r,a)){return o}if(I(r)&&I(a)){switch(e){case"!==":return $(r.value!==a.value);case"===":return $(r.value===a.value);case"<":if(r.value===null||r.value===undefined||a.value===null||a.value===undefined){return $(false)}return $(r.value<a.value);case"<=":if(r.value===null||r.value===undefined||a.value===null||a.value===undefined){return $(false)}return $(r.value<=a.value);case">":if(r.value===null||r.value===undefined||a.value===null||a.value===undefined){return $(false)}return $(r.value>a.value);case">=":if(r.value===null||r.value===undefined||a.value===null||a.value===undefined){return $(false)}return $(r.value>=a.value)}}else{return{_type:"Comparison",operator:e,operand1:r,operand2:a}}}function B(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e._type==="Unresolvable"){return e}if(!t){return{_type:"Length",pathInModel:e}}return K(q(e,undefined),-1,B(e))}t.length=B;function q(e,t){const n=E(e);const r=E(t);if(i(n,r)){return o}if(u(n,r)){return $(true)}function a(e,t){if(e._type==="Comparison"&&_(t)){return e}else if(e._type==="Comparison"&&P(t)){return d(e)}else if(e._type==="IfElse"&&u(e.onTrue,t)){return c(e.condition,q(e.onFalse,t))}else if(e._type==="IfElse"&&u(e.onFalse,t)){return c(d(e.condition),q(e.onTrue,t))}else if(e._type==="IfElse"&&I(e.onTrue)&&I(e.onFalse)&&I(t)&&!u(e.onTrue,t)&&!u(e.onFalse,t)){return $(false)}return undefined}const s=a(n,r)??a(r,n);return s??k("===",n,r)}t.equal=q;function G(e,t){return d(q(e,t))}t.notEqual=G;function U(e,t){return k(">=",e,t)}t.greaterOrEqual=U;function Y(e,t){return k(">",e,t)}t.greaterThan=Y;function W(e,t){return k("<=",e,t)}t.lessOrEqual=W;function R(e,t){return k("<",e,t)}t.lessThan=R;function K(e,t,n){let r=E(e);let a=E(t);let s=E(n);if(r._type==="Not"){[a,s]=[s,a];r=d(r)}if(a._type==="IfElse"&&u(r,a.condition)){a=a.onTrue}if(s._type==="IfElse"&&u(r,s.condition)){s=s.onFalse}if(I(r)){return r.value?a:s}if(u(a,s)){return a}if(P(s)){return f(r,a)}if(_(s)){return c(d(r),a)}if(P(a)){return f(d(r),s)}if(_(a)){return c(r,s)}if(i(r,a,s)){return o}if(S(e)||S(t)||S(n)){let r=0;const a=J([e,t,n],"sap.fe.core.formatters.StandardFormatter#ifElse");const o=[];ae(a,"PathInModel",e=>{o.push(e);return h(`$${r++}`,"$")},true);o.unshift($(JSON.stringify(a)));return J(o,"sap.fe.core.formatters.StandardFormatter#evaluateComplexExpression",undefined,true)}return{_type:"IfElse",condition:r,onTrue:a,onFalse:s}}t.ifElse=K;function Q(e){switch(e._type){case"Constant":case"Formatter":case"ComplexType":return false;case"Set":return e.operands.some(Q);case"PathInModel":return e.modelName===undefined;case"Comparison":return Q(e.operand1)||Q(e.operand2);case"IfElse":return Q(e.condition)||Q(e.onTrue)||Q(e.onFalse);case"Not":case"Truthy":return Q(e.operand);default:return false}}function J(e,t,n){let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const a=e.map(E);if(i(...a)){return o}if(n){if(!a.some(Q)){n.keys.forEach(e=>a.push(h(e.name,"")))}}let s="";if(typeof t==="string"){s=t}else{s=t.__functionName}const[u,l]=s.split("#");if(!r&&(a.some(S)||a.some(x)||a.some(F))){let e=0;const t=J(a,s,undefined,true);const n=[];ae(t,"PathInModel",t=>{n.push(t);return h(`$${e++}`,"$")},true);n.unshift($(JSON.stringify(t)));return J(n,"sap.fe.core.formatters.StandardFormatter#evaluateComplexExpression",undefined,true)}else if(!!l&&l.length>0){a.unshift($(l))}return{_type:"Formatter",fn:u,parameters:a}}t.formatResult=J;function X(e,t){const n={};if(e?.constraints?.$Scale&&t.scale!==undefined){n.scale=t.scale}if(e?.constraints?.$Precision&&t.precision!==undefined){n.precision=t.precision}if(e?.constraints?.$MaxLength&&t.maxLength!==undefined){n.maxLength=t.maxLength}if(t.nullable===false){n.nullable=false}if(e?.constraints?.["@Org.OData.Validation.V1.Minimum/$Decimal"]&&!isNaN(t.annotations?.Validation?.Minimum)){n.minimum=`${t.annotations?.Validation?.Minimum}`}if(e?.constraints?.["@Org.OData.Validation.V1.Maximum/$Decimal"]&&!isNaN(t.annotations?.Validation?.Maximum)){n.maximum=`${t.annotations?.Validation?.Maximum}`}if(t.annotations?.Common?.IsDigitSequence&&e.type==="sap.ui.model.odata.type.String"&&e?.constraints?.["@com.sap.vocabularies.Common.v1.IsDigitSequence"]){n.isDigitSequence=true}if(e?.constraints?.$V4){n.V4=true}return n}t.setUpConstraints=X;function Z(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const o=t;if(e._type!=="Property"&&e._type!=="ActionParameter"){return o}const s=a[e.type];if(!s){return o}if(!o.formatOptions){o.formatOptions={}}o.constraints={};o.type=s.type;if(!n){o.constraints=X(s,e)}if(o?.type?.indexOf("sap.ui.model.odata.type.Int")===0&&o?.type!=="sap.ui.model.odata.type.Int64"||o?.type==="sap.ui.model.odata.type.Double"){o.formatOptions=Object.assign(o.formatOptions,{parseAsString:false})}if(o.type==="sap.ui.model.odata.type.String"&&r(e)){if(o.constraints?.isDigitSequence||o.constraints?.nullable!==false&&e.nullable===true){o.formatOptions.parseKeepsEmptyString=false}else{o.formatOptions.parseKeepsEmptyString=true}const t=z(e);if(t){o.formatOptions.fiscalType=t;o.type="sap.fe.core.type.FiscalDate"}}const i=["sap.ui.model.odata.type.Int16","sap.ui.model.odata.type.Int32","sap.ui.model.odata.type.Int64","sap.ui.model.odata.type.Single","sap.ui.model.odata.type.Double","sap.ui.model.odata.type.Decimal","sap.ui.model.odata.type.Byte","sap.ui.model.odata.type.SByte"];if(o.constraints?.nullable===false&&o.type&&i.includes(o.type)){o.formatOptions=Object.assign(o.formatOptions,{parseEmptyValueToZero:true})}if(o.constraints?.nullable!==false&&(o.type==="sap.ui.model.odata.type.Int64"||o.type==="sap.ui.model.odata.type.Decimal")){o.formatOptions=Object.assign(o.formatOptions,{emptyString:""})}return o}t.formatWithTypeInformation=Z;const z=function(e){if(e.annotations?.Common?.IsFiscalYear){return"com.sap.vocabularies.Common.v1.IsFiscalYear"}if(e.annotations?.Common?.IsFiscalPeriod){return"com.sap.vocabularies.Common.v1.IsFiscalPeriod"}if(e.annotations?.Common?.IsFiscalYearPeriod){return"com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"}if(e.annotations?.Common?.IsFiscalQuarter){return"com.sap.vocabularies.Common.v1.IsFiscalQuarter"}if(e.annotations?.Common?.IsFiscalYearQuarter){return"com.sap.vocabularies.Common.v1.IsFiscalYearQuarter"}if(e.annotations?.Common?.IsFiscalWeek){return"com.sap.vocabularies.Common.v1.IsFiscalWeek"}if(e.annotations?.Common?.IsFiscalYearWeek){return"com.sap.vocabularies.Common.v1.IsFiscalYearWeek"}if(e.annotations?.Common?.IsDayOfFiscalYear){return"com.sap.vocabularies.Common.v1.IsDayOfFiscalYear"}};t.getFiscalType=z;function H(e,t,n,r,a){const s=e.map(E);if(i(...s)){return o}if(s.length===1&&I(s[0])&&!n){return s[0]}else if(n){if(!s.some(Q)){n.keys.forEach(e=>s.push(h(e.name,"")))}}r=ee(e[0],r);if(t==="sap.ui.model.odata.type.Unit"){const e=h("/##@@requestUnitsOfMeasure");e.targetType="any";e.mode="OneTime";r??={};r.preserveDecimals=false;s.push(e)}else if(t==="sap.ui.model.odata.type.Currency"){const e=h("/##@@requestCurrencyCodes");e.targetType="any";e.mode="OneTime";r??={};r.preserveDecimals=false;s.push(e)}return{_type:"ComplexType",type:t,formatOptions:r||{},constraints:a||{},parameters:{},bindingParameters:s}}t.addTypeInformation=H;function ee(e,t){if(!(t&&t.showNumber===false)&&(e?.type?.indexOf("sap.ui.model.odata.type.Int")===0||e?.type==="sap.ui.model.odata.type.Decimal"||e?.type==="sap.ui.model.odata.type.Double")){if(e?.type==="sap.ui.model.odata.type.Int64"||e?.type==="sap.ui.model.odata.type.Decimal"){t=t?.showMeasure===false?{showMeasure:false}:{}}else{t=t?.showMeasure===false?{parseAsString:false,showMeasure:false}:{parseAsString:false}}if(e?.constraints?.nullable!==false){t.emptyString=null}else{t.emptyString=""}}return t}function te(e,t,n){let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const a=typeof e==="string"?e:e.__functionName;return{_type:"Function",obj:n!==undefined?E(n):undefined,fn:a,isFormattingFn:r,parameters:t.map(E)}}t.fn=te;function ne(e){const t=[];ae(e,"PathInModel",e=>{const n={...e,alwaysKeepTargetType:true};t.push(c(q(n,""),q(e,undefined),q(e,null)));return e});return f(...t)}t.isEmpty=ne;function re(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}const r=t.map(E);if(i(...r)){return o}if(r.every(I)){return $(r.reduce((e,t)=>{if(t.value!==undefined&&t.value!==null){return e+t.value.toString()}return e},""))}else if(r.some(S)){let e=0;const t=J(r,"sap.fe.core.formatters.StandardFormatter#concat",undefined,true);const n=[];ae(t,"PathInModel",t=>{n.push(t);return h(`$${e++}`,"$")});n.unshift($(JSON.stringify(t)));return J(n,"sap.fe.core.formatters.StandardFormatter#evaluateComplexExpression",undefined,true)}return{_type:"Concat",expressions:r}}t.concat=re;function ae(e,t,n){let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let a=e;switch(a._type){case"Function":case"Formatter":a.parameters=a.parameters.map(e=>ae(e,t,n,r));break;case"Concat":a.expressions=a.expressions.map(e=>ae(e,t,n,r));a=re(...a.expressions);break;case"ComplexType":a.bindingParameters=a.bindingParameters.map(e=>ae(e,t,n,r));break;case"IfElse":const e=ae(a.onTrue,t,n,r);const o=ae(a.onFalse,t,n,r);let s=a.condition;if(r){s=ae(a.condition,t,n,r)}a=K(s,e,o);break;case"Not":if(r){const e=ae(a.operand,t,n,r);a=d(e)}break;case"Truthy":break;case"Set":if(r){const e=a.operands.map(e=>ae(e,t,n,r));a=a.operator==="||"?c(...e):f(...e)}break;case"Comparison":if(r){const e=ae(a.operand1,t,n,r);const o=ae(a.operand2,t,n,r);a=k(a.operator,e,o)}break;case"Constant":const i=a.value;if(typeof i==="object"&&i){Object.keys(i).forEach(e=>{i[e]=ae(i[e],t,n,r)})}break;case"Ref":case"Length":case"PathInModel":case"EmbeddedBinding":case"EmbeddedExpressionBinding":case"Unresolvable":break}if(t===a._type){a=n(e)}return a}t.transformRecursively=ae;const oe=function(e){return!I(e)&&!C(e)&&O(e)&&e._type!=="IfElse"&&e._type!=="Function"};function se(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(t&&Object.keys(e.value).length===0){return""}const n=e.value;const r=[];Object.keys(n).forEach(e=>{const a=n[e];const o=fe(a,true,false,t);if(o&&o.length>0){r.push(`${e}: ${o}`)}});return`{${r.join(", ")}}`}function ie(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(e.value===null){return r?null:"null"}if(e.value===undefined){return r?undefined:"undefined"}if(typeof e.value==="object"){if(Array.isArray(e.value)){const t=e.value.map(e=>fe(e,true));return`[${t.join(", ")}]`}else{return se(e,n)}}if(t){switch(typeof e.value){case"number":case"bigint":case"boolean":return e.value.toString();case"string":return`'${s(e.value.toString())}'`;default:return""}}else{return r?e.value:e.value.toString()}}t.compileConstant=ie;function ue(e,t,n){if(e.type||e.parameters||e.targetType||e.formatOptions||e.constraints){const r={path:he(e),type:e.type,targetType:e.targetType,parameters:e.parameters,formatOptions:e.formatOptions,constraints:e.constraints};const a=fe(r,false,false,true);if(t){const t=e.alwaysKeepTargetType?"$":n;return`${t}${a}`}return a}else if(t){return`${n}{${he(e)}}`}else{return`{${he(e)}}`}}function le(e){if(e.bindingParameters.length===1){return`{${me(e.bindingParameters[0],true)}, type: '${e.type}'}`}let t=`], type: '${e.type}'`;if(ye(e.formatOptions)){t+=`, formatOptions: ${fe(e.formatOptions)}`}if(ye(e.constraints)){t+=`, constraints: ${fe(e.constraints)}`}if(ye(e.parameters)){t+=`, parameters: ${fe(e.parameters)}`}t+="}";return`{mode:'TwoWay', parts:[${e.bindingParameters.map(e=>me(e)).join(",")}${t}`}function pe(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(t){if(n){return`(${e})`}else{return e}}else{return`{= ${e}}`}}t.wrapBindingExpression=pe;function fe(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const a=E(e);const o=n?"$":"%";switch(a._type){case"Unresolvable":return undefined;case"Constant":return ie(a,t,r);case"Ref":return a.ref||"null";case"Function":let e=false;if(a.isFormattingFn){ae(a,"Function",t=>{if(t!==a&&t.obj===undefined){e=true}return t},true);ae(a,"Constant",t=>{if(t!==a&&typeof t.value==="object"){ae(t,"PathInModel",t=>{e=true;return t})}return t},true)}const s=`${a.parameters.map(e=>fe(e,true)).join(", ")}`;let i=a.obj===undefined?`${a.fn}(${s})`:`${fe(a.obj,true)}.${a.fn}(${s})`;if(!t&&e){i=`{= ${i}}`}return i;case"EmbeddedExpressionBinding":return t?`(${a.value.substring(2,a.value.length-1)})`:`${a.value}`;case"EmbeddedBinding":return t?`${o}${a.value}`:`${a.value}`;case"PathInModel":return ue(a,t,o);case"Comparison":const u=ce(a);return pe(u,t);case"IfElse":const l=`${fe(a.condition,true)} ? ${fe(a.onTrue,true,n)} : ${fe(a.onFalse,true,n)}`;return pe(l,t,true);case"Set":const p=a.operands.map(e=>fe(e,true)).join(` ${a.operator} `);return pe(p,t,true);case"Concat":const f=a.expressions.map(e=>fe(e,true,true)).join(" + ");return pe(f,t);case"Length":const c=`${fe(a.pathInModel,true)}.length`;return pe(c,t);case"Not":const d=`!${fe(a.operand,true)}`;return pe(d,t);case"Truthy":const m=`!!${fe(a.operand,true)}`;return pe(m,t);case"Formatter":const y=de(a);return t?`$${y}`:y;case"ComplexType":const h=le(a);return t?`$${h}`:h;default:return""}}t.compileExpression=fe;function ce(e){function t(e){const t=fe(e,true)??"undefined";return pe(t,true,oe(e))}return`${t(e.operand1)} ${e.operator} ${t(e.operand2)}`}function de(e){if(e.parameters.length===1){return`{${me(e.parameters[0],true)}, formatter: '${e.fn}'}`}else{const t=e.parameters.map(e=>{if(e._type==="ComplexType"){return le(e)}else{return me(e)}});return`{parts: [${t.join(", ")}], formatter: '${e.fn}'}`}}function me(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n="";if(e._type==="Constant"){if(e.value===undefined){n=`value: 'undefined'`}else{n=`value: ${ie(e,true)}`}}else if(e._type==="PathInModel"){n=`path: '${he(e)}'`;n+=e.type?`, type: '${e.type}'`:`, targetType: 'any'`;if(e.mode){n+=`, mode: '${fe(e.mode)}'`}if(ye(e.constraints)){n+=`, constraints: ${fe(e.constraints)}`}if(ye(e.formatOptions)){n+=`, formatOptions: ${fe(e.formatOptions)}`}if(ye(e.parameters)){n+=`, parameters: ${fe(e.parameters)}`}}else{return""}return t?n:`{${n}}`}function ye(e){return!!e&&Object.keys(e).length>0}function he(e){return`${e.modelName?e.modelName+">":""}${e.path}`}return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/BuildingBlockBase", ["sap/fe/base/BindingToolkit","sap/fe/base/ClassSupport","sap/ui/core/Control","sap/ui/core/InvisibleRenderer"],function(e,t,i,n){"use strict";var r,o,a,l,s,u,c,f,p;var d=t.defineUI5Class;var b=t.defineState;var y=t.association;var g=t.aggregation;function h(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,v(e,t)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function R(e,t,i,n,r){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function D(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let C=(r=d("sap.fe.base.BuildingBlockBase"),o=g({type:"sap.ui.core.Element",multiple:false,isDefault:true}),a=y({type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}),l=b(),r(s=(u=function(t){function i(e,i){var n;if(typeof e==="string"){i??={};i.id=e}n=t.call(this,e,i)||this;h(n,"content",c,n);h(n,"ariaLabelledBy",f,n);h(n,"state",p,n);n._oldDomRef=null;return n}m(i,t);i.render=function e(t,i){if(!i.content||i.getVisible()===false){n.render(t,i)}else{t.renderControl(i.content)}};var r=i.prototype;r.bindProperty=function e(i,n){const r=this.getMetadata().getProperty(i);if(r?.bindable===false&&r.group==="Data"){this[i]=n}else{t.prototype.bindProperty.call(this,i,n)}return this};r.onAfterRendering=function e(i){const n=this.getDomRef();if(n){this._oldDomRef=new WeakRef(n)}else{this._oldDomRef=null}t.prototype.onAfterRendering.call(this,i)};r.getDomRef=function e(){const i=this.content;let n=i?.getDomRef()??t.prototype.getDomRef.call(this);if(!n){n=this._oldDomRef?.deref()??null;if(n){return document.getElementById(n.id)}}return n};r.getFocusDomRef=function e(){const i=this.content;return i?i.getFocusDomRef():t.prototype.getFocusDomRef.call(this)};r.enhanceAccessibilityState=function e(t,i){const n=this.getParent();if(n&&n.enhanceAccessibilityState){n.enhanceAccessibilityState(t,i)}return i};r.getAccessibilityInfo=function e(){let t={};if(this.content?.isA("sap.ui.core.Control")){t=this.content.getAccessibilityInfo()}return t};r.getIdForLabel=function e(){if(this.content?.isA("sap.ui.core.Control")){return this.content.getIdForLabel()}return""};r.addStyleClass=function e(i){this.content?.addStyleClass(i);t.prototype.addStyleClass.call(this,i);return this};r.removeStyleClass=function e(i){this.content?.removeStyleClass(i);t.prototype.removeStyleClass.call(this,i);return this};r.bindState=function t(i){return e.bindState(this.state,i)};return i}(i),c=R(u.prototype,"content",[o],{configurable:true,enumerable:true,writable:true,initializer:null}),f=R(u.prototype,"ariaLabelledBy",[a],{configurable:true,enumerable:true,writable:true,initializer:null}),p=R(u.prototype,"state",[l],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),u))||s);return C},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/ClassSupport", ["sap/base/util/ObjectPath","sap/base/util/deepClone","sap/base/util/merge","sap/base/util/uid","sap/fe/base/HookSupport","sap/ui/base/Metadata","sap/ui/base/Object","sap/ui/core/mvc/ControllerMetadata","sap/ui/model/json/JSONModel"],function(t,e,n,r,i,o,a,s,c){"use strict";var f={};var u=i.hookable;const p=function(t){t.metadata=n({controllerExtensions:{},properties:{},aggregations:{},references:{},associations:{},methods:{},events:{},interfaces:[]},t.metadata??{});return t.metadata};function d(t){return function(e){let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:t.getMetadata().getName();let r=e.getSource();if(t._getAPIExtension){r=t._getAPIExtension(r)??r}while(r&&!r.isA(n)&&r.getParent){if(this.isDependentBound){const t=r.getDependents();const e=t.find(t=>t.isA(n));if(e){r=e}else{r=r.getParent()}}else{r=r.getParent()}}if(!r||!r.isA(n)){const t=this.instanceMap.get(this);r=t?.[t.length-1]}let i;if(r&&r.isA(n)){i=r}return i}}const l=function(t){if(!t.__apiRegistered){t.__apiRegistered=true;t.instanceMap=new WeakMap;t.registerInstance=function(t){if(!this.instanceMap.get(t.constructor)){this.instanceMap.set(t.constructor,[])}this.instanceMap.get(t.constructor).push(t)};t.getAPI=d(t)}};function g(){return function(t,e,n){const r=p(t);if(r.stateProperty!==undefined){throw new Error("Only one state property per control is allowed")}r.stateProperty=e;delete n.writable;r.statePropertyDefaultValue??=n.initializer?.();delete n.initializer;return n}}f.defineState=g;function h(t){return function(e,n){if(!e.override){e.override={}}if(!e.overrides){e.overrides={}}let r=e.overrides;if(t){if(!r.extension){r.extension={}}if(!r.extension[t]){r.extension[t]={}}r=r.extension[t]}r[n.toString()]=e[n.toString()]}}f.methodOverride=h;function m(t){return function(e,n,r){const i=p(e);if(!i.methods[n.toString()]){i.methods[n.toString()]={}}i.methods[n.toString()].overrideExecution=t;if(t!=="Instead"){u(t)(e,n,r)}}}f.extensible=m;function y(){return function(t,e,n){const r=p(t);n.enumerable=true;if(!r.methods[e.toString()]){r.methods[e.toString()]={}}r.methods[e.toString()].public=true}}f.publicExtension=y;function b(){return function(t,e,n){const r=p(t);n.enumerable=true;if(!r.methods[e.toString()]){r.methods[e.toString()]={}}r.methods[e.toString()].public=false}}f.privateExtension=b;function P(){return function(t,e,n){const r=p(t);n.enumerable=true;if(!r.methods[e.toString()]){r.methods[e.toString()]={}}r.methods[e.toString()].final=true}}f.finalExtension=P;function S(t){return function(e,n,r){const i=p(e);delete r.initializer;i.controllerExtensions[n.toString()]=t;return r}}f.usingExtension=S;function _(){return function(t,e){const n=p(t);if(!n.events[e.toString()]){n.events[e.toString()]={}}}}f.event=_;function v(t){return function(e,n,r){const i=p(e);if(t.bindable===undefined){t.bindable=true}if(t.isBindingInfo===true){t.bindable=false;t.group="Data"}if(!i.properties[n]){i.properties[n]=t}delete r.writable;t.defaultValue??=r.initializer?.();delete r.initializer;return r}}f.property=v;function x(t){return function(e,n,r){const i=p(e);if(t.multiple===undefined){t.multiple=false}if(!i.aggregations[n]){i.aggregations[n]=t}if(t.isDefault){i.defaultAggregation=n}delete r.writable;t.defaultValue??=r.initializer?.();delete r.initializer;return r}}f.aggregation=x;function O(t){return function(e,n,r){const i=p(e);if(!i.associations[n]){i.associations[n]=t}delete r.writable;delete r.initializer;return r}}f.association=O;function A(t){return function(e){const n=p(e);n.interfaces.push(t)}}f.implementInterface=A;function E(){return function(t,e){const n=t.constructor;l(n);n[e.toString()]=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++){r[i]=arguments[i]}if(r?.length){const t=n.getAPI(r[0]);t?.[e.toString()](...r)}}}}f.xmlEventHandler=E;function j(t,e){return function(n){if(!n.prototype.metadata){n.prototype.metadata={}}if(e){for(const t in e){if(n.prototype.metadata[t]){if(Array.isArray(n.prototype.metadata[t])){n.prototype.metadata[t]=n.prototype.metadata[t].concat(e[t])}else{n.prototype.metadata[t]={...n.prototype.metadata[t],...e[t]}}}else{n.prototype.metadata[t]=e[t]}}}return z(n,t,n.prototype)}}f.defineUI5Class=j;function w(t){return function(e){if(e.prototype.extend){throw new Error("The mixinInterface decorator must be placed after `defineUi5Class`")}const n=p(e.prototype);const r=t.prototype.getInterfaceName?.();if(r){n.interfaces.push(r)}Object.getOwnPropertyNames(t.prototype).forEach(n=>{if(n!=="constructor"&&n!=="setupMixin"){Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))}});t.prototype.setupMixin?.(e);return e}}f.mixin=w;function M(){return{current:undefined,setCurrent:function(t){this.current=t}}}f.createReference=M;function I(){return function(t,e,n){const r=p(t);delete n.writable;delete n.initializer;if(a.isObjectA(t,"sap.ui.core.Control")){if(!r.references[e]){r.references[e]=true}}else{n.initializer=M}return n}}f.defineReference=I;function D(t,n){const r=`/${n.toString()}`;const i=e(t.getObject(r));let o;if(n==="__bindingInfo"){return{model:"$componentState"}}if(typeof i==="string"){o=i}else if(typeof i==="number"){o=i}else if(typeof i==="boolean"){o=i}else if(Array.isArray(i)){o=new Proxy(i,{get(t,e,n){const r=Reflect.get(t,e,n);if(typeof r==="function"){return r.bind(t)}else if(r===undefined&&isNaN(Number(e.toString()))){return{__bindingInfo:{model:"$componentState",path:e}}}return r}})}else{o={...i}}if(typeof o==="object"){o.__bindingInfo={model:"$componentState",path:r}}return o}function $(t,e){if(t.metadata?.stateProperty||e?.getModel&&e.getModel("$componentState")){if(t.metadata?.stateProperty){e.setModel(new c,"$componentState")}const n=e.getModel("$componentState");let r=false;const i=[];for(const e in t.metadata?.properties){const n=t.metadata.properties[e];if(n.bindToState){i.push(e)}}const o=n.getProperty("/__boundProperties")??[];n.setProperty("/__boundProperties",[...o,...i]);n.attachPropertyChange(t=>{const n=t.getParameter("path")?.substring(1);if(n&&i.includes(n)){e.setProperty(n,t.getParameter("value"))}});if(t.metadata?.stateProperty){e._updateState=async function(){delete this._updateStateTimer;if(!r){r=true;await(this.onStateChange?.(this._changedProps));this._changedProps=[];r=false}};e._updateStateDebounced=function(t){this._changedProps??=[];if(!this._changedProps.includes(t)){this._changedProps.push(t)}if(!this._updateStateTimer&&!r){this._updateStateTimer=setTimeout(()=>{this._updateState()},200)}};Object.defineProperty(e,t.metadata.stateProperty,{configurable:true,get:()=>new Proxy(n,{get:(t,e)=>D(t,e),set:(t,n,r)=>{const i=t.getProperty("/__boundProperties")??[];if(i.includes(n.toString())){e._ignoreStatePropertyUpdate=true;e.setProperty(n.toString(),r);e._ignoreStatePropertyUpdate=false}const o=t.setProperty(`/${n.toString()}`,r);e._updateStateDebounced(n.toString());return o}}),set:function(t){const e=n.getProperty("/__boundProperties")??[];n.setProperty(`/`,t);n.setProperty("/__boundProperties",e)}});if(t.metadata.statePropertyDefaultValue){e[t.metadata.stateProperty]={...t.metadata.statePropertyDefaultValue}}const i=e.applySettings;e.applySettings=function(t){delete t?.models?.$componentState;return i.call(this,t)}}const a=e.setProperty;if(i.length>0){e.setProperty=function(t,r,o){if(i.includes(t)&&!this._ignoreStatePropertyUpdate){n.setProperty(`/${t}`,r);e._updateStateDebounced(t)}return a.call(this,t,r,o)}}}}function z(e,n,i){if(e.getMetadata?.().isA("sap.ui.core.mvc.ControllerExtension")){Object.getOwnPropertyNames(i).forEach(t=>{const e=Object.getOwnPropertyDescriptor(i,t);if(e&&!e.enumerable){e.enumerable=true}})}const a={};a.metadata=i.metadata||{};a.override=i.override;a.constructor=e;a.metadata.baseType=Object.getPrototypeOf(e.prototype).getMetadata().getName();if(e?.getMetadata()?.getStereotype()==="control"){const t=i.renderer||e.renderer||e.render;a.renderer={apiVersion:2};if(typeof t==="function"){a.renderer.render=t}else if(t!=undefined){a.renderer=t}}a.metadata.interfaces=i.metadata?.interfaces||e.metadata?.interfaces;Object.keys(e.prototype).forEach(t=>{if(t!=="metadata"){try{a[t]=e.prototype[t]}catch(t){}}});if(a.metadata?.controllerExtensions&&Object.keys(a.metadata.controllerExtensions).length>0){for(const t in a.metadata.controllerExtensions){a[t]=a.metadata.controllerExtensions[t]}}const c=e.extend(n,a);const f=c.prototype.init;const u=c.prototype.afterInit;c.prototype.init=function(){var t=this;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}if(f){f.apply(this,r)}if(e.registerInstance){e.registerInstance(this)}this.metadata=a.metadata;if(a.metadata.properties){const t=Object.keys(a.metadata.properties);t.forEach(t=>{const e=a.metadata.properties[t];const n=this[t]??e.defaultValue;if(e.isBindingInfo===true){this._bindingProperties??={};Object.defineProperty(this,t,{configurable:true,set:e=>{this._bindingProperties[t]=e;this.mProperties[t]=e;return this},get(){const e=this.getProperty(t);const n=this._bindingProperties[t];if(e&&e!==n){this._bindingProperties[t]=e}const r=this._bindingProperties[t];if(typeof r==="object"){return{...r}}else{return r}}})}else{Object.defineProperty(this,t,{configurable:true,set:e=>this.setProperty(t,e),get:()=>this.getProperty(t)})}if(n!==undefined&&this[t]!==n){this._applyingSettings=true;this[t]=n;this._applyingSettings=false;delete this._applyingSettings}});const e=Object.keys(a.metadata.aggregations);e.forEach(t=>{const e=a.metadata.aggregations[t];const n=this[t]??e.defaultValue;Object.defineProperty(this,t,{configurable:true,set:e=>this.setAggregation(t,e),get:()=>{const e=this.getAggregation(t);if(a.metadata.aggregations[t].multiple){return e||[]}else{return e}}});if(n&&n?.isA){this._applyingSettings=true;this[t]=n;this._applyingSettings=false;delete this._applyingSettings}});const n=Object.keys(a.metadata.associations);n.forEach(t=>{Object.defineProperty(this,t,{configurable:true,set:e=>this.setAssociation(t,e),get:()=>{const e=this.getAssociation(t);if(a.metadata.associations[t].multiple){return e||[]}else{return e}}})})}if(a.metadata.references){const t=Object.keys(a.metadata.references);t.forEach(t=>{Object.defineProperty(this,t,{configurable:true,value:M()})})}if(a.metadata.methods){for(const e in a.metadata.methods){const n=a.metadata.methods[e];if(n.overrideExecution==="AfterAsync"||n.overrideExecution==="BeforeAsync"){if(!this.methodHolder){this.methodHolder=[]}this.methodHolder[e]=[this[e]];Object.defineProperty(this,e,{configurable:true,set:t=>this.methodHolder[e].push(t),get:()=>async function(){const r=t.methodHolder[e];if(n.overrideExecution==="BeforeAsync"){r.reverse()}for(var i=arguments.length,o=new Array(i),a=0;a<i;a++){o[a]=arguments[a]}for(const e of r){await e.apply(t,o)}}})}}}$(a,this);if(u){u.apply(this,r)}};e.override=function(t){const n={};n.constructor=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}return e.apply(this,n)};const i=o.createClass(e,`anonymousExtension~${r()}`,n,s);i.getMetadata()._staticOverride=t;i.getMetadata()._override=e.getMetadata()._override;return i};t.set(n,c);return c}return f},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/EventDelegateHook", ["sap/fe/base/ClassSupport","sap/ui/core/Element"],function(e,t){"use strict";var r,i,a,n,o,l,u;var p={};var s=e.property;var c=e.event;var f=e.defineUI5Class;function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d(e,t)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function g(e,t,r,i,a){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},n),a&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(a):void 0,n.initializer=void 0),void 0===n.initializer?(Object.defineProperty(e,t,n),null):n}function y(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let h=(r=f("sap.fe.base.EventDelegateHook"),i=s({type:"boolean"}),a=c(),r(n=(o=function(e){function t(t,r){var i;i=e.call(this,t,r)||this;b(i,"stopTapPropagation",l,i);b(i,"tap",u,i);return i}p=t;v(t,e);var r=t.prototype;r.setParent=function t(r){if(this.getParent()){this.getParent().removeEventDelegate(this)}r.addEventDelegate(this);e.prototype.setParent.call(this,r)};r.ontap=function e(t){if(this.stopTapPropagation){t.stopPropagation()}this.fireEvent("tap")};return t}(t),l=g(o.prototype,"stopTapPropagation",[i],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),u=g(o.prototype,"tap",[a],{configurable:true,enumerable:true,writable:true,initializer:null}),o))||n);p=h;return p},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/HookSupport", [],function(){"use strict";var t={};const n=[];const o=[];function e(t){return function(n,o,e){const s=n;s[`attach${o.toString()}`]=function(t){const n=this;if(!n.hookedHandlers){n.hookedHandlers={}}if(!n.hookedHandlers[o.toString()]){n.hookedHandlers[o.toString()]=[]}n.hookedHandlers[o.toString()].push(t)};s[`detach${o.toString()}`]=function(t){const n=this;const e=n.hookedHandlers[o.toString()];const s=e.indexOf(t);if(s!==-1){e.splice(s,1)}};const i=e.value;if(t==="BeforeAsync"||t==="AfterAsync"){e.value=async function(){const n=this;const e=n?.hookedHandlers&&n?.hookedHandlers[o.toString()]||[];let s;if(t==="AfterAsync"){s=await i.bind(this)(...arguments)}for(const t of e){await t.bind(this)(...arguments)}if(t==="BeforeAsync"){s=await i.bind(this)(...arguments)}return s}}else{e.value=function(){const n=this;const e=n?.hookedHandlers&&n?.hookedHandlers[o.toString()]||[];let s;if(t==="After"){s=i.bind(this)(...arguments)}for(const t of e){t.bind(this)(...arguments)}if(t==="Before"){s=i.bind(this)(...arguments)}return s}}}}t.hookable=e;function s(t,n){return!!t.find(t=>t.name===n.name&&t.method===n.method&&t.targetMethod===n.targetMethod)}function i(t,e){return function(i,r){const c={name:t,method:String(e),targetMethod:r};const a=n.indexOf(i.constructor);if(a!==-1&&!s(o[a],c)){o[a].push(c)}else{n.push(i.constructor);o.push([c])}}}t.controllerExtensionHandler=i;function r(t,e){const s=n.indexOf(t.constructor);if(s!==-1){const n=e;const i=t;for(const r of o[s]){const o=i[r.targetMethod].bind(t);n[r.name][`attach${String(r.method)}`](o);e.getView()?.attachBeforeExit(()=>{n[r.name][`detach${String(r.method)}`](o)})}}}t.initControllerExtensionHookHandlers=r;function c(t,n,o){const e=t;const s=e.getController();if(s){const t=e.findAggregatedObjects(true,t=>t.isA("sap.fe.macros.MacroAPI"));for(const n of t){r(n,s)}}}t.xmlViewPreprocessor=c;return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/jsx-runtime", ["sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs"],function(s,e){"use strict";return{jsxs:e,jsx:s}},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/jsx-runtime/Fragment", [],function(){"use strict";var e={};let t=function e(){};t.isFragment=true;e=t;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/jsx-runtime/ViewLoader", ["sap/fe/base/ClassSupport","sap/ui/base/ManagedObject","sap/ui/core/Component","sap/ui/core/mvc/View"],function(e,t,r,n){"use strict";var i,o,a,s,c;var l={};var u=e.property;var p=e.defineUI5Class;function f(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function d(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,b(e,t)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function w(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function v(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let m=(i=p("sap.fe.base.jsx-runtime.MDXViewLoader"),o=u({type:"string"}),i(a=(s=function(e){function n(t){var r;delete t.cache;r=e.call(this,t)||this;f(r,"viewName",c,r);r.sViewName=r.viewName;r._oContainingView=r;return r}l=n;d(n,e);var i=n.prototype;i.loadDependency=async function e(t){return new Promise(e=>{sap.ui.require([t],t=>{e(t)})})};i.initViewSettings=async function e(t){const r=this.getViewData();const n=r.viewContent||await this.loadDependency(r._jsxViewName);delete t.cache;if(n?.getMetadata?.().isA("sap.ui.core.mvc.Controller")){t.controller=new n(r)}else{this.viewContentFn=n}};i.getControllerName=function e(){const t=this.getViewData();return t.controllerName};i.createContent=function e(i){n.preprocessorData=this?.mPreprocessors?.xml;n.controller=i;const o=r.getOwnerComponentFor(this)??{runAsOwner:e=>e()};return o.runAsOwner(()=>t.runWithPreprocessors(()=>{if(i&&i.render){return i.render()}return this.viewContentFn?.()},{id:e=>this.createId(e),settings:function(){this.controller=i}}))};return n}(n),c=w(s.prototype,"viewName",[o],{configurable:true,enumerable:true,writable:true,initializer:null}),s))||a);l=m;return l},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/jsx-runtime/jsx-control", ["sap/base/Log","sap/fe/base/BindingToolkit","sap/m/Text","sap/ui/base/DataType","sap/ui/base/ManagedObject","sap/ui/core/mvc/EventHandlerResolver"],function(e,t,n,s,i,o){"use strict";var a=i.bindingParser;var l=t.isPathInModelExpression;var c=t.isConstant;var f=t.isBindingToolkitExpression;var r=t.compileExpression;var d=t.compileConstant;const p="fl:delegate";const u="core:require";const g="dt:designtime";const m=function(e,t,n){if(n===null||n===undefined||typeof n==="string"){return}if(!e[t]){e[t]=[]}if(y(n)){e[t].push(n)}else if(Array.isArray(n)){n.forEach(n=>{m(e,t,n)})}else if(typeof n==="function"){e[t]=n}else{Object.keys(n).forEach(t=>{m(e,t,n[t])})}};const y=function(e){return e?.isA?.("sap.ui.core.Element")};const h=function(e){return!!e?.getMetadata};function b(e,t){const n=e.getAllAggregations();const s=e.getDefaultAggregationName();const i={};m(i,s,t.children);delete t.children;Object.keys(n).forEach(e=>{if(i[e]!==undefined){if(t.hasOwnProperty(e)){if(typeof t[e]==="string"){t[e]={path:t[e]}}if(typeof i[e]==="function"){t[e].factory=i[e]}else{t[e].template=i[e][0]}}else{t[e]=i[e]}}})}function E(e,t){let n;const i={};const o=e.getAllEvents();const a=e.getAllProperties();for(n in t){const e=t[n];if(f(e)){const s=e;if(c(s)){t[n]=d(s,false,true,true)}else if(!Object.hasOwnProperty.call(a,n)){if(l(s)){t[n]={path:s.path,model:s.modelName}}}else{t[n]=r(s)}}else if(e!==null&&typeof e==="object"&&e.then){i[n]=e;delete t[n]}else if(typeof e==="string"&&!e.startsWith("{")){const i=a[n]?.getType?.();if(i&&i instanceof s&&["boolean","int","float"].includes(i.getName())){t[n]=i.parseValue(e)}}else if(typeof e==="object"&&e.__bindingInfo){t[n]=e.__bindingInfo}else if(e===undefined){if(Object.hasOwnProperty.call(o,n)){delete t[n]}}}return i}function v(e,t){const n=t["jsx:command"];if(n){const[s,i]=n.split("|");const a=e.getAllEvents()[i];if(a&&s.startsWith("cmd:")){t[a.name]=o.resolveEventHandler(s)}}delete t["jsx:command"]}const j=function(t,s,i,o){let l;if(t?.isFragment){l=s.children}else if(t?.isRuntime){const e=new t(s);l=e.getContent?.(o.view,o.appComponent)}else if(h(t)){const n=t.getMetadata();if(i!==undefined){s["key"]=i}const o=E(n,s);v(n,s);b(n,s);const c=s.class;const f=s.ref;const r=s.binding;const d=s[p];const m=s[g];delete s.ref;delete s.class;delete s.binding;delete s[p];delete s[g];delete s[u];const y=new t(s);if(c){y.addStyleClass(c)}if(f){f.setCurrent(y)}const h=y.data("sap-ui-custom-settings")??{};if(d){h["sap.ui.fl"]??={};h["sap.ui.fl"].delegate=d}if(m){h["sap.ui.dt"]??={};h["sap.ui.dt"].designtime=m}if(Object.keys(h).length>0){y.data("sap-ui-custom-settings",h)}if(r){if(typeof r==="string"){const e=a(r);if(e){y.bindElement({model:e.model??undefined,path:e.path})}y.bindElement(r)}else{Object.keys(r).forEach(e=>{y.bindElement({model:e,path:r[e]})})}}for(const n in o){o[n].then(e=>y.setProperty(n,e)).catch(s=>{e.error(`Couldn't set property ${n} on ${t.getMetadata().getName()}`,s,"jsxControl")})}l=y}else if(typeof t==="function"){const e=t;l=e(s)}else{l=new n({text:"Missing component "+t})}return l};return j},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/jsx-runtime/jsx-renderManager", [],function(){"use strict";const e=function(e,t,n,f){return()=>{if(typeof e==="string"){if(t.ref){f.openStart(e,t.ref)}else{f.openStart(e)}for(const e in t){if(e!=="children"&&e!=="ref"&&e!=="class"){f.attr(e,t[e])}}if(t.class){t.class.split(" ").forEach(e=>{f.class(e)})}f.openEnd()}const n=t.children;if(Array.isArray(n)){n.forEach(e=>{if(typeof e==="string"||typeof e==="number"||typeof e==="boolean"){f.text(e.toString())}else if(typeof e==="function"){e()}else if(e!==undefined){f.renderControl(e)}})}else if(typeof n==="string"||typeof n==="number"||typeof n==="boolean"){f.text(n.toString())}else if(typeof n==="function"){n()}else if(n!==undefined){f.renderControl(n)}if(typeof e==="string"){f.close(e)}}};return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/jsx-runtime/jsx-xml", ["sap/fe/base/BindingToolkit"],function(e){"use strict";var t=e.compileExpression;function n(e){return e?._type!==undefined}const s=function(e){if(Array.isArray(e)){return e.join("")}else{return e}};function i(e){return e?.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const o=function(e,t,n){if(n===undefined){return}if(!e[t]){e[t]=[]}if(typeof n==="string"){if(n.trim().length>0){e[t].push(n)}}else if(Array.isArray(n)){n.forEach(n=>{o(e,t,n)})}else{for(const t of Object.keys(n)){o(e,t,n[t])}}};const a=function(e){return!!e?.getMetadata};const r="fl:delegate";const c="dt:designtime";const l="core:require";const f="log:sourcePath";const u="customData:entityType";function p(e,t,n){const s=[];const o=[];Object.keys(e).forEach(n=>{const a=e[n];if(a!==undefined){if(typeof a==="object"){if(Array.isArray(a)){o.push(`<${n}>`);for(const e of a){o.push(p(e,t,n))}o.push(`</${n}>`)}else{o.push(p(a,t,n))}}else{s.push(`${n}='${i(a.toString())}'`)}}});const a=t?`${t}:${n}`:n;return`<${a} ${s.join(" ")}>${o.join("\n")}</${a}>`}function m(e,s,o,a,m,g){Object.keys(s).forEach(h=>{if(e.hasOwnProperty(h)&&e[h]!==undefined){const o=e[h];if(h===l){a.push(`xmlns:core="sap.ui.core"`)}if(h===r){a.push(`xmlns:fl="sap.ui.fl"`)}if(h===c){a.push(`xmlns:dt="sap.ui.dt"`)}if(h===f){a.push(`xmlns:log="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"`)}if(h===u){a.push(`xmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"`)}if(o&&typeof o==="object"){if(s[h].type==="sap.ui.model.Context"){a.push(`${h}='${o.getPath()}'`)}else if(n(o)){a.push(`${h}='${i(t(o))}'`)}else if(Array.isArray(o)){if(o.length===1){const e=typeof o[0]==="string"?o[0]:JSON.stringify(o[0]);a.push(`${h}='${e}'`)}else{const e=s[h].type?.endsWith("[]")?",":" ";const t=o.every(e=>typeof e==="string")?o.join(e):JSON.stringify(o);a.push(`${h}='${t}'`)}}else if(g){const e={ui5object:true,...o};a.push(`${h}='${i(JSON.stringify(e))}'`)}else{m.push(p(o,undefined,h))}}else if(o!==null){const e=o;a.push(`${h}='${i(e.toString())}'`)}}else if(e.children?.hasOwnProperty(h)&&Object.keys(e.children?.[h]??{}).length>0){const t=e.children?.[h];m.push(p(t,o,h))}})}function g(e,t){const n=e["jsx:command"];if(n){const[s,i]=n.split("|");const o=t[i];if(o&&s.startsWith("cmd:")){e[o.name]=s}}delete e["jsx:command"]}function h(e,t,n,a,r,c){const l={};o(l,a??"customData",e.children);const f=Object.keys(l);let u=false;if(f.length===1&&f[0]===a){u=true}Object.keys(t).forEach(t=>{if(l.hasOwnProperty(t)&&l[t].length>0){if(t===a&&u){c.push(`${s(l[t])}`)}else{c.push(`<${n}:${t}>\n\t\t\t\t\t\t${s(l[t])}\n\t\t\t\t\t</${n}:${t}>`)}}if(e.hasOwnProperty(t)&&e[t]!==undefined){if(typeof e[t]==="object"){r.push(`${t}='${JSON.stringify(e[t])}'`)}else{r.push(`${t}='${i(e[t])}'`)}}});return l}const d=function(e,t,n,s,i){let o;let p;let d;let $;let y;let j;let A=false;if(e==="slot"){return`<slot name="${t.name}"/>`}else if(a(e)){o=e.getMetadata();p=o.getAllProperties();p={...p,...o.getAllEvents(),...o.getAllAssociations()};d=o.getAllEvents();$=o.getName();y=o.getAllAggregations();j=o.getDefaultAggregationName();A=true}else{o=e.metadata;p={...o.properties};y={...{dependents:{},customData:{}},...o.aggregations};d={};j=o.defaultAggregation;$=o.namespace+"."+o.name}const x=$.split(".");if(n!==undefined){t["key"]=n}p["class"]={name:"class"};p["id"]={name:"id"};p["binding"]={name:"binding"};p[r]={name:r};p[c]={name:c};p[l]={name:l};p[f]={name:f};p[u]={name:u};p["xmlns:fl"]={name:r};p["xmlns:dt"]={name:c};p["xmlns:core"]={name:l};p["xmlns:log"]={name:f};if($==="sap.ui.core.Fragment"){p["fragmentName"]={name:"fragmentName"}}const O=x.slice(0,-1);const b=x[x.length-1];let k=O[O.length-1];if(s[O.join(".")]){k=s[O.join(".")]}let N=`${k}:${b}`;const D=[];const E=[];g(t,d);m(t,p,k,D,E,A);h(t,y,k,j,D,E);if(i){N=i}return`<${N} xmlns:${k}="${O.join(".")}" ${D.join(" ")}>${E.join("")}</${N}>`};return d},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/jsx-runtime/jsx", ["sap/fe/base/jsx-runtime/jsx-control","sap/fe/base/jsx-runtime/jsx-renderManager","sap/fe/base/jsx-runtime/jsx-xml"],function(e,n,t){"use strict";let r=false;let s;let u={};const i=function(i,f,c){if(!r&&!s){return e(i,f,c,a)}else if(s!==undefined){return n(i,f,c,s)}else{return t(i,f,c,u)}};i.renderUsingRenderManager=function(e,n,t){s=e;const r=t(n);s=undefined;r()};i.defineXMLNamespaceMap=async function(e,n){u=e;const t=await n();u={};return t};i.renderAsXML=function(e){r=true;const n=e();r=false;return n};let a={};i.getContext=function(){return a};i.withContext=function(e,n){a=e;const t=n();a={};return t};return i},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/jsx-runtime/jsxs", ["sap/fe/base/jsx-runtime/jsx"],function(e){"use strict";return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/base/library", ["sap/ui/core/Lib"],function(e){"use strict";var s={};const a="sap.fe.base";s.feBaseNamespace=a;const n=e.init({name:"sap.fe.base",apiVersion:2,dependencies:["sap.ui.core"],types:[],interfaces:[],controls:[],elements:[],version:"1.132.0",noLibraryCSS:true});return n},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/ActionRuntime", ["sap/base/Log","sap/base/util/merge","sap/fe/base/BindingToolkit","sap/fe/core/CommonUtils","sap/fe/core/controls/Any","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/ActionHelper","sap/ui/core/Messaging","sap/ui/core/message/Message","sap/ui/core/message/MessageType","./controls/AnyElement","./converters/ConverterContext","./converters/MetaModelConverter","./converters/objectPage/HeaderAndFooterAction"],function(e,t,n,o,a,i,s,r,l,c,d,g,p,f,u){"use strict";var b=u.getHiddenExpression;var y=u.getEditButtonEnabled;var A=f.convertTypes;var m=r.getIsActionCriticalExpression;var E=s.isEntitySet;var P=n.transformRecursively;var C=n.isConstant;var h=n.equal;var M=n.constant;var x=n.compileExpression;var v=n.compileConstant;const $={_addMessageForActionParameter:function(e){l.addMessages(e.map(e=>{const t=e.actionParameterInfo.field.getBinding(e.actionParameterInfo.isMultiValue?"items":"value");return new c({message:e.message,type:d.Error,processor:t?.getModel()??undefined,persistent:true,target:t?.getResolvedPath()})}))},validateProperties:async function(e,t){await Promise.allSettled(e.map(e=>e.validationPromise));const n=e.filter(e=>e.field.getRequired());const o=l.getMessageModel().getData();const a=n.filter(e=>{const t=e.field.getId();const n=o.filter(e=>e.getControlIds().some(e=>e.includes(t)));if(n.length>0){return false}else if(e.isMultiValue){return e.value===undefined||!e.value.length}else{const t=e.field.getValue();const n=Array.isArray(e.field.getValue());if(n){return t[0]===null||t[0]===""}return t===undefined||t===null||t===""}});if(a.length){this._addMessageForActionParameter(a.map(e=>({actionParameterInfo:e,message:t.getText("C_OPERATIONS_ACTION_PARAMETER_DIALOG_MISSING_MANDATORY_MSG",[(e.field.getParent()?.getAggregation("label")).getText()])})))}const i=e.find(e=>e.field.getVisible()&&(e.hasError||e.field.getValueState()==="Error"||a.includes(e)));if(i){i.field.setVisible(true);i.field.focus();return false}else{return true}},setActionEnablement:async function(e,t,n,a){let i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;const s=[];for(const r in t){let l=[];e.setProperty(r,false);if(a==="table"){e.setProperty(`dynamicActions/${r}/aApplicable`,[]);e.setProperty(`dynamicActions/${r}/aNotApplicable`,[]);if(i){e.setProperty(`dynamicActions/${r}/bEnabledForContextMenu`,false)}else{e.setProperty(`dynamicActions/${r}/bEnabled`,false)}}const c=t[r];for(const t of n){const n=t;if(n){const t=n.getObject();if(a==="chart"){if(c===null&&!!t[`#${r}`]||n.getObject(c)){e.setProperty(r,true);break}}else if(a==="table"){l=this._setActionEnablementForTable(n,e,r,c,l,i)}}}if(a==="table"){if(!n.length){e.setProperty(`dynamicActions/${r}`,{bEnabled:false,aApplicable:[],aNotApplicable:[]});s.push(o.setContextsBasedOnOperationAvailable(e,[],i))}else if(n.length&&typeof c==="string"){s.push(o.setContextsBasedOnOperationAvailable(e,l,i))}}}return Promise.all(s)},setActionEnablementAfterPatch:function(e,t,n){const o=n?.getObject();const a=o?.controls||{};for(const n in a){if(a[n]&&a[n].controlId){const o=e.byId(n);if(o&&o.isA("sap.ui.mdc.Table")){const e=o.getRowBinding();if(e==t){$.setActionEnablement(o.getBindingContext("internal"),JSON.parse(o.data("operationAvailableMap").customData),o.getSelectedContexts(),"table")}}}}},updateEditButtonVisibilityAndEnablement(e){const n=e.getViewData()?.viewLevel,a=o.getIsEditable(e);if(n>1&&a!==true){const n=e.getBindingContext();const a=o.getAppComponent(e);const s=i.getMetaPathForContext(n);const r=i.getRootEntitySetPath(s);const l=n?.getModel().getMetaModel()?.getContext(n?.getPath());const c=p?.createConverterContextForMacro(r,l,a.getDiagnostics(),t);const d=c.getEntitySet();const g=c.getEntityType();let f;const u=E(d)&&d.annotations.UI?.UpdateHidden?.valueOf();if(u!==true){f=i.isUpdateHidden(d,g)}const A=y(c);const m=i.getDraftRootPath(n);const P=i.getStickyRootPath(n);const C=m||P;const M=e.getBindingContext("internal");if(C){const t=e.getModel().bindContext(C).getBoundContext();if(f!==undefined){const n=x(h(b(c,f),false));this.updateEditModelContext(n,e,t,"rootEditVisible",M)}if(A){this.updateEditModelContext(A,e,t,"rootEditEnabled",M)}}}},updateEditModelContext:function(e,t,n,o,a){if(e){const i=new g({anyText:e});i.setBindingContext(null);t.addDependent(i);i.getBinding("anyText");const s=i.getModel()?.bindContext(n.getPath(),n,{$$groupId:"$auto.Heroes"})?.getBoundContext();i.setBindingContext(s);i?.getBinding("anyText")?.attachChange(e=>{const t=e.getSource().getExternalValue();a.setProperty(o,t)})}},_setActionEnablementForTable:function(e,t,n,a,i){let s=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;const r=s?"bEnabledForContextMenu":"bEnabled",l=t.getProperty(`dynamicActions/${n}/aApplicable`)||[],c=t.getProperty(`dynamicActions/${n}/aNotApplicable`)||[];let d=t.getProperty(`dynamicActions/${n}/${r}`)||false;if(!s){t.setProperty(`dynamicActions/${n}`,{bEnabled:false,aApplicable:[],aNotApplicable:[]})}else{t.setProperty(`dynamicActions/${n}`,{bEnabled:t.getProperty(`dynamicActions/${n}/bEnabled`),aApplicable:t.getProperty(`dynamicActions/${n}/aApplicable`),aNotApplicable:t.getProperty(`dynamicActions/${n}/aNotApplicable`),bEnabledForContextMenu:false,aApplicableForContextMenu:[],aNotApplicableForContextMenu:[]})}const g=`${t.getPath()}/dynamicActions/${n}/${r}`;if(typeof a==="object"&&a!==null&&a!==undefined){if(e){const n=e.getObject();const o=P(a,"PathInModel",function(e){return n?M(n[e.path]):M(false)},true);const i=x(o);d=d||i==="true";t.getModel().setProperty(g,d);(i==="true"?l:c).push(e)}o.setDynamicActionContexts(t,n,l,c,s)}else{const s=e?.getObject();if(a===null&&!!s[`#${n}`]){t.getModel().setProperty(g,true)}else if(e!==undefined){i.push(o.requestProperty(e,n,a,g))}}return i},getIsActionCritical:async function(t,n){let o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];let i=true;const s=A(t);const r=s.resolvePath(n);const l=r.target;if(!l){return i}const c=m(l,s);if(C(c)){i=v(c,false,undefined,true)}else if(o.length>0){i=new Promise(t=>{try{const e=new a({anyBoolean:x(c)});e.setModel(o[0].getModel());const n=e.getBinding("anyBoolean");const i=function(){const o=n.getExternalValue();e.destroy();t(o)};n.attachEventOnce("change",i);e.setBindingContext(o[0])}catch(o){const a=o instanceof Error?o.message:String(o);e.error(`FE : Actions : Error while resolving IsActionCritical for ${n} : ${a}`);t(true)}})}return i}};return $},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/AppComponent", ["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/AppStateHandler","sap/fe/core/controllerextensions/routing/RouterProxy","sap/fe/core/helpers/HTTP503Handler","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/PromiseKeeper","sap/fe/core/library","sap/fe/core/manifestMerger/ChangePageConfiguration","sap/fe/core/support/Diagnostics","sap/m/routing/Router","sap/ui/core/Lib","sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","./controllerextensions/BusyLocker","./converters/MetaModelConverter","./helpers/ResourceModelHelper"],function(e,t,i,r,o,n,a,s,c,l,u,f,p,g,d,h,C){"use strict";var v,S,y,R,N,A;var m=C.getResourceModel;var M=h.deleteModelCacheData;var E=c.changeConfiguration;var b=t.implementInterface;var w=t.defineUI5Class;function I(e,t,i,r){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}function V(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_(e,t)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function T(e,t,i,r,o){var n={};return Object.keys(r).forEach(function(e){n[e]=r[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=i.slice().reverse().reduce(function(i,r){return r(e,t,i)||i},n),o&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(o):void 0,n.initializer=void 0),void 0===n.initializer?(Object.defineProperty(e,t,n),null):n}function O(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}const P=s.StartupMode;const k={FCL:{VIEWNAME:"sap.fe.core.rootView.Fcl",VIEWNAME_COMPATIBILITY:"sap.fe.templates.RootContainer.view.Fcl",ROUTERCLASS:"sap.f.routing.Router"},NAVCONTAINER:{VIEWNAME:"sap.fe.core.rootView.NavContainer",VIEWNAME_COMPATIBILITY:"sap.fe.templates.RootContainer.view.NavContainer",ROUTERCLASS:"sap.m.routing.Router"}};const D=u;let L=(v=w("sap.fe.core.AppComponent",{config:{fullWidth:true},manifest:{"sap.ui5":{services:{resourceModel:{factoryName:"sap.fe.core.services.ResourceModelService",startup:"waitFor",settings:{bundles:["sap.fe.core.messagebundle"],modelName:"sap.fe.i18n"}},routingService:{factoryName:"sap.fe.core.services.RoutingService",startup:"waitFor"},shellServices:{factoryName:"sap.fe.core.services.ShellServices",startup:"waitFor"},ShellUIService:{factoryName:"sap.ushell.ui5service.ShellUIService"},navigationService:{factoryName:"sap.fe.core.services.NavigationService",startup:"waitFor"},environmentCapabilities:{factoryName:"sap.fe.core.services.EnvironmentService",startup:"waitFor"},sideEffectsService:{factoryName:"sap.fe.core.services.SideEffectsService",startup:"waitFor"},asyncComponentService:{factoryName:"sap.fe.core.services.AsyncComponentService",startup:"waitFor"},collaborationManagerService:{factoryName:"sap.fe.core.services.CollaborationManagerService",startup:"waitFor"},collaborativeToolsService:{factoryName:"sap.fe.core.services.CollaborativeToolsService",startup:"waitFor"},telemetryService:{factoryName:"sap.fe.core.services.TelemetryService",startup:"waitFor"},valueHelpHistoryService:{factoryName:"sap.fe.core.services.ValueHelpHistoryService",startup:"waitFor"},CollaborativeDraftService:{factoryName:"sap.fe.core.services.CollaborativeDraftService",startup:"waitFor"},ContextSharingService:{factoryName:"sap.fe.core.services.ContextSharingService",startup:"waitFor"}},rootView:{viewName:k.NAVCONTAINER.VIEWNAME,type:"XML",async:true,id:"appRootView"},routing:{config:{controlId:"appContent",routerClass:k.NAVCONTAINER.ROUTERCLASS,viewType:"XML",controlAggregation:"pages",async:true,containerOptions:{propagateModel:true}}}}},designtime:"sap/fe/core/designtime/AppComponent.designtime",library:"sap.fe.core"}),S=b("sap.ui.core.IAsyncContentCreation"),v(y=(R=(A=function(t){function c(){var e;for(var i=arguments.length,r=new Array(i),o=0;o<i;o++){r[o]=arguments[o]}e=t.call(this,...r)||this;I(e,"__implements__sap_ui_core_IAsyncContentCreation",N,e);e.startupMode=P.Normal;e._startedServices=[];e.isAdaptationEnabled=false;e.isExiting=false;e.pageConfigurationChanges={};return e}V(c,t);var u=c.prototype;u._isFclEnabled=function e(){const t=this.getManifestEntry("sap.ui5");return t?.routing?.config?.routerClass===k.FCL.ROUTERCLASS};u.setAdaptationMode=function e(t){this.isAdaptationEnabled=t};u.isAdaptationMode=function e(){return this.isAdaptationEnabled};u.initializeFeatureToggles=async function e(){return Promise.resolve()};u.changePageConfiguration=function e(t,i,r){const o=E(this.getManifest(),t,i,r,true,this);if(i==="app/disableInputAssistance"&&o?.["sap.fe"]?.["app"]?.["disableInputAssistance"]===r){this.getEnvironmentCapabilities().setCapability("DisableInputAssistance",r)}};u.cleanPageConfigurationChanges=function e(){this.pageConfigurationChanges={}};u.getRouterProxy=function e(){return this._oRouterProxy};u.getAppStateHandler=function e(){return this._oAppStateHandler};u.getRootViewController=function e(){return this.getRootControl().getController()};u.getRootContainer=function e(){return this.getRootControl().getContent()[0]};u.getStartupMode=function e(){return this.startupMode};u.setStartupModeCreate=function e(){this.startupMode=P.Create};u.setStartupModeAutoCreate=function e(){this.startupMode=P.AutoCreate};u.setStartupModeDeeplink=function e(){this.startupMode=P.Deeplink};u.init=function e(){this._initializedKeeper=new a;this.initialized=this._initializedKeeper.promise;const o=new g({editMode:s.EditMode.Display,isEditable:false,draftStatus:s.DraftStatus.Clear,busy:false,busyLocal:{},pages:{}});const u=new g({pages:{}});o.setDefaultBindingMode("OneWay");n.enhanceUiJSONModel(o,s);n.enhanceInternalJSONModel(u);this.setModel(o,"ui");this.setModel(u,"internal");this.bInitializeRouting=this.bInitializeRouting!==undefined?this.bInitializeRouting:true;this._oRouterProxy=new r;this._oAppStateHandler=new i(this);this._oDiagnostics=new l;const f=this.getModel();if(f?.isA?.("sap.ui.model.odata.v4.ODataModel")){n.enhanceODataModel(f,this);f.setRetryAfterHandler(this.http503RetryHandler.bind(this));this.entityContainer=f.getMetaModel().requestObject("/$EntityContainer/")}else{this.entityContainer=Promise.resolve()}if(this.getManifestEntry("sap.fe")?.app?.disableCollaborationDraft){n.disableCollaborationDraft=true}const p=this.getManifest()["sap.ui5"];this.checkRoutingConfiguration(p);t.prototype.init.call(this);c.instanceMap[this.getId()]=this};u.http503RetryHandler=async function e(t){return o.handle503Delay(t,this.getRootControl(),m(this))};u.checkRoutingConfiguration=function t(i){if(i?.rootView?.viewName){if(i.rootView.viewName===k.FCL.VIEWNAME_COMPATIBILITY){i.rootView.viewName=k.FCL.VIEWNAME}else if(i.rootView.viewName===k.NAVCONTAINER.VIEWNAME_COMPATIBILITY){i.rootView.viewName=k.NAVCONTAINER.VIEWNAME}if(i.rootView.viewName===k.FCL.VIEWNAME&&i.routing?.config?.routerClass===k.FCL.ROUTERCLASS){e.info(`Rootcontainer: "${k.FCL.VIEWNAME}" - Routerclass: "${k.FCL.ROUTERCLASS}"`)}else if(i.rootView.viewName===k.NAVCONTAINER.VIEWNAME&&i.routing?.config?.routerClass===k.NAVCONTAINER.ROUTERCLASS){e.info(`Rootcontainer: "${k.NAVCONTAINER.VIEWNAME}" - Routerclass: "${k.NAVCONTAINER.ROUTERCLASS}"`)}else if(i.rootView?.viewName?.includes("sap.fe.core.rootView")){throw Error(`\nWrong configuration for the couple (rootView/routerClass) in manifest file.\n`+`Current values are :(${i.rootView.viewName}/${i.routing?.config?.routerClass||"<missing router class>"})\n`+`Expected values are \n`+`\t - (${k.NAVCONTAINER.VIEWNAME}/${k.NAVCONTAINER.ROUTERCLASS})\n`+`\t - (${k.FCL.VIEWNAME}/${k.FCL.ROUTERCLASS})`)}else{e.info(`Rootcontainer: "${i.rootView.viewName}" - Routerclass: "${k.NAVCONTAINER.ROUTERCLASS}"`)}}};u.onServicesStarted=async function t(i){this._startedServices=i;await this.initializeFeatureToggles();await Promise.allSettled(c.instanceDependentProcesses.map(async e=>e.call(null,this)));const r=()=>{this.entityContainer.then(async()=>{if(this.getRootViewController().attachRouteMatchers){this.getRootViewController().attachRouteMatchers()}this.getRouter().initialize();this.getRouterProxy().init(this,this._isFclEnabled());return this.getValueHelpHistoryService().registerShellHook()}).catch(e=>{const t=f.getResourceBundleFor("sap.fe.core");this.getRootViewController().displayErrorPage(t.getText("C_APP_COMPONENT_SAPFE_APPSTART_TECHNICAL_ISSUES"),{title:t.getText("C_COMMON_SAPFE_ERROR"),description:e.message})})};if(this.bInitializeRouting){return this.getRoutingService().initializeRouting().then(()=>{if(this.getRootViewController()){r()}else{this.getRootControl().attachAfterInit(function(){r()})}this._initializedKeeper.resolve();return}).catch(function(t){e.error(`cannot cannot initialize routing: ${t.toString()}`)})}else{this._initializedKeeper.resolve()}};u.exit=function e(){this._startedServices=[];this._oAppStateHandler.destroy();this._oRouterProxy.destroy();delete this._oAppStateHandler;delete this._oRouterProxy;M(this.getMetaModel());this.getModel("ui").destroy();this.cleanPageConfigurationChanges()};u.getMetaModel=function e(){return this.getModel().getMetaModel()};u.getDiagnostics=function e(){return this._oDiagnostics};u.destroy=function i(r){this.isExiting=true;try{this.unregisterStickySessionCallbacks();delete c.instanceMap[this.getId()];delete window._routing}catch(t){e.info(t)}const o=this.oModels[undefined];let n;if(o?.oRequestor){n=Object.assign({},o.oRequestor.mHeaders)}this.getRoutingService()?.beforeExit?.();t.prototype.destroy.call(this,r);if(n&&o.oRequestor){o.oRequestor.mHeaders=n}};u.getRoutingService=function e(){return{}};u.getShellServices=function e(){return{}};u.getNavigationService=function e(){return{}};u.getSideEffectsService=function e(){return{}};u.getEnvironmentCapabilities=function e(){return{}};u.getCollaborationManagerService=function e(){return{}};u.getCollaborativeToolsService=function e(){return{}};u.getCollaborativeDraftService=function e(){return{}};u.getContextSharingService=function e(){return{}};u.getTelemetryService=function e(){return{}};u.getValueHelpHistoryService=function e(){return{}};u.getStartupParameters=async function e(){const t=this.getComponentData();return Promise.resolve(t&&t.startupParameters||{})};u.restore=function e(){for(const e of this._startedServices){e.onRestore?.()}this.getRootViewController().viewState.onRestore();i.resetVersionActivationStatus()};u.suspend=function e(){for(const e of this._startedServices){e.onSuspend?.()}this.getRootViewController().viewState.onSuspend()};u.navigateBasedOnStartupParameter=async function t(i){try{if(!d.isLocked(this.getModel("ui"))){if(!i){i=null}const e=this.getRoutingService();await e._manageDeepLinkStartup(i)}}catch(t){e.error(t);d.unlock(this.getModel("ui"))}};u.isCollaborationManagerServiceEnabled=function e(){return true};c.registerInstanceDependentProcessForStartUp=function e(t){this.instanceDependentProcesses.push(t)};u.registerStickySessionCallbacks=function e(t,i,r){this.stickyDirtyStateProviderCallback=t;this.getShellServices().registerDirtyStateProvider(t);this.stickySessionTimeoutCallback=i;this.getModel().attachSessionTimeout(i);this.stickyDiscardAfterNavigationCallback=r;this.getRoutingService().attachRouteMatched({},r)};u.unregisterStickySessionCallbacks=function e(){if(this.stickyDirtyStateProviderCallback){this.getShellServices().deregisterDirtyStateProvider(this.stickyDirtyStateProviderCallback);this.stickyDirtyStateProviderCallback=undefined}if(this.stickySessionTimeoutCallback&&this.getModel()){this.getModel().detachSessionTimeout(this.stickySessionTimeoutCallback);this.stickySessionTimeoutCallback=undefined}if(this.stickyDiscardAfterNavigationCallback){this.getRoutingService().detachRouteMatched(this.stickyDiscardAfterNavigationCallback);this.stickyDiscardAfterNavigationCallback=undefined}};return c}(p),A.instanceMap={},A.instanceDependentProcesses=[],A),N=T(R.prototype,"__implements__sap_ui_core_IAsyncContentCreation",[S],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),R))||y);return L},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/AppStateHandler", ["sap/base/Log","sap/base/util/deepEqual","sap/fe/base/ClassSupport","sap/fe/core/helpers/ToES6Promise","sap/fe/navigation/library","sap/ui/base/Object","./controllerextensions/BusyLocker","./helpers/ModelHelper"],function(t,e,n,a,o,i,r,s){"use strict";var p,c,u;var l=n.defineUI5Class;function f(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,S(t,e)}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}const h=o.NavType;const A="skipMerge";const g="REPLACE_COMPLETE_APPSTATE";let d=(p=l("sap.fe.core.AppStateHandler"),p(c=(u=function(n){function o(e){var a;a=n.call(this)||this;a._mCurrentAppState={};a.oAppComponent=e;a.sId=`${e.getId()}/AppStateHandler`;a.simultaneousCreateRequest={};a.bNoRouteChange=false;t.info("APPSTATE : Appstate handler initialized");return a}f(o,n);var i=o.prototype;i.getId=function t(){return this.sId};i._getInnerAppStateForView=function t(e,n){if(n===g||!e){return e}return{[n]:e[n]||{}}};i._addAppStateInHash=function e(n,a){const o=this.oAppComponent,i=o.getNavigationService(),r=o.getRouterProxy(),p=r.getHash(),c=s.isStickySessionSupported(o.getMetaModel()),u=i.replaceInnerAppStateKey(r.getHash(),n);if(u&&this.simultaneousCreateRequest[a]===0&&u!==p){r.navToHash(u,undefined,undefined,undefined,!c);this.bNoRouteChange=true}t.info("APPSTATE: navToHash")};i._createAppStateKey=async function e(n,a){const o=this.oAppComponent,i=o.getNavigationService();if(this.simultaneousCreateRequest[a]){this.simultaneousCreateRequest[a]++}else{this.simultaneousCreateRequest[a]=1}const r=await i.storeInnerAppStateAsync(n,true,true);this.simultaneousCreateRequest[a]--;t.info("APPSTATE: Appstate stored");return r};i._getAppStateInfo=async function n(a,o){const i=this.oAppComponent;const{replaceHash:r=true,viewId:s=g}=o??{};let p=null;let c={appState:this._mCurrentAppState};const u=this._getInnerAppStateForView(this._mCurrentAppState,s);if(a&&!e(u,a)){this._mCurrentAppState={...this._mCurrentAppState,...a};c={appState:this._mCurrentAppState};try{p=await this._createAppStateKey(c,s);if(r===true){this._addAppStateInHash(p,s)}}catch(e){t.error(e)}}else{const t=i.getRouterProxy(),e=t.getHash();p=t.findAppStateInHash(e)}return{appStateData:c,appStateKey:p}};i.createAppState=async function t(e){const n=this.oAppComponent;if(!n.getEnvironmentCapabilities().getCapabilities().AppState||r.isLocked(this)){return}const{skipMerge:a=false,viewId:o=g}=e??{},i=n.getRootControl().getController();if(!i.viewState){throw new Error(`viewState controller extension not available for controller: ${i.getMetadata().getName()}`)}await i.routingIsComplete();let s=await i.viewState.retrieveViewState();s=this._getInnerAppStateForView(s,o);if(a){s={...s,...{skipMerge:a}}}return this._getAppStateInfo(s,e)};i._createNavigationParameters=function t(e,n){return Object.assign({},e,{selectionVariantDefaults:e.oDefaultedSelectionVariant,selectionVariant:e.oSelectionVariant,requiresStandardVariant:!e.bNavSelVarHasDefaultsOnly,navigationType:n})};o.setRTAVersionWasActivated=function t(e,n){this.versionActivationStatus[e]=n};o.getRTAVersionWasActivated=function t(e){return this.versionActivationStatus[e]};i._checkIfLastSeenRecord=function t(e){const n=e&&e.getBindingContext("internal");if(n&&n.getProperty("fclColumnClosed")===true){const t=n.getProperty("technicalKeysOfLastSeenRecord");const a=e?.getBindingContext();const o=a&&a.getPath()||"";const i=a?.getModel().getMetaModel();const r=i?.getMetaPath(o);const s=i?.getObject(`${r}/$Type/$Key`);for(const e of s){const o=a.getObject()[e];if(o!==t[e]){n.setProperty("fclColumnClosed",false);return true}}}return false};i._getAppStateData=function t(e,n,a){let o="",i=0;const r=a===h.hybrid?e.iAppState:e;if(r?.appState){for(i;i<Object.keys(r.appState).length;i++){if(Object.keys(r.appState)[i]===n){o=Object.keys(r.appState)[i];break}}}if(r?.appState){return{[Object.keys(r.appState)[i]]:r.appState[o]||{}}}};i.applyAppState=async function e(n,i){if(o.getRTAVersionWasActivated(this.oAppComponent.getId())){o.setRTAVersionWasActivated(this.oAppComponent.getId(),false);return Promise.resolve()}if(!this.oAppComponent.getEnvironmentCapabilities().getCapabilities().AppState||r.isLocked(this)){return Promise.resolve()}const s=this._checkIfLastSeenRecord(i);if(s===true){return Promise.resolve()}r.lock(this);r.lock(this.oAppComponent.getRootControl());const p=this.oAppComponent.getNavigationService();return a(p.parseNavigation()).catch(function(e){if(!e){e=[]}t.warning("APPSTATE: Parse Navigation failed",e[0]);return[{},e[1],e[2]]}).then(async e=>{t.info("APPSTATE: Parse Navigation done");const a=e[0]||{},o=e[2]||h.initial,i=this.oAppComponent.getRootControl().getController();const r=this._getAppStateData(a,n,o);const s=a?.appState?.[A];this._mCurrentAppState=o===h.iAppState||o===h.hybrid?{...this._mCurrentAppState,...r}:{};let p=true;if(!i.viewState){throw new Error(`viewState extension required for controller ${i.getMetadata().getName()}`)}if(i.viewState._isStateEmptyForIAppStateNavType(a,o)){if(!i.viewState._getInitialStateApplied()){i.viewState._setInitialStateApplied()}p=false}const c=await i.viewState.applyViewState(this._mCurrentAppState,this._createNavigationParameters(a,o),s);if(!p){return{}}else{return c}}).catch(function(e){t.error("appState could not be applied",e);throw e}).finally(()=>{r.unlock(this);r.unlock(this.oAppComponent.getRootControl())})};i.checkIfRouteChangedByIApp=function t(){return this.bNoRouteChange};i.resetRouteChangedByIApp=function t(){if(this.bNoRouteChange){this.bNoRouteChange=false}};o.resetVersionActivationStatus=function t(){for(const t in this.versionActivationStatus){if(Object.prototype.hasOwnProperty.call(this.versionActivationStatus,t)){this.versionActivationStatus[t]=false}}};return o}(i),u.versionActivationStatus={},u))||c);return d},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/BaseController", ["sap/fe/base/ClassSupport","sap/fe/core/CommonUtils","sap/ui/core/mvc/Controller"],function(e,t,o){"use strict";var n,i,r,p;var u=e.publicExtension;var c=e.defineUI5Class;function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function a(e,t,o,n,i){var r={};return Object.keys(n).forEach(function(e){r[e]=n[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=o.slice().reverse().reduce(function(o,n){return n(e,t,o)||o},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer?(Object.defineProperty(e,t,r),null):r}let f=(n=c("sap.fe.core.BaseController"),i=u(),n(r=(p=function(e){function o(){return e.apply(this,arguments)||this}l(o,e);var n=o.prototype;n.getAppComponent=function e(){if(!this._oAppComponent){this._oAppComponent=t.getAppComponent(this.getView())}return this._oAppComponent};n.getModel=function e(t){return this.getView().getModel(t)};n.setModel=function e(t,o){return this.getView().setModel(t,o)};n.getResourceBundle=function e(t){if(!t){t="i18n"}return this.getAppComponent().getModel(t).getResourceBundle()};return o}(o),a(p.prototype,"getAppComponent",[i],Object.getOwnPropertyDescriptor(p.prototype,"getAppComponent"),p.prototype),p))||r);return f},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/CommonUtils", ["sap/base/Log","sap/base/util/array/uniqueSort","sap/base/util/merge","sap/fe/core/converters/ConverterContext","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/TypeGuards","sap/ui/Device","sap/ui/core/Component","sap/ui/core/Fragment","sap/ui/core/XMLTemplateProcessor","sap/ui/core/util/XMLPreprocessor","sap/ui/model/Filter","./controls/AnyElement","./converters/helpers/SelectionVariantHelper","./helpers/MetaModelFunction"],function(e,t,n,o,i,r,s,a,c,l,u,p,f,g,d,m,b){"use strict";function P(e){return new Promise((t,n)=>{sap.ui.require([e],n=>{if(!(n&&n.__esModule)){n=n===null||!(typeof n==="object"&&e.endsWith("/library"))?{default:n}:n;Object.defineProperty(n,"__esModule",{value:true})}t(n)},e=>{n(e)})})}var h=m.getRangeDefinition;var y=a.isAnnotationOfType;var v=s.generate;function O(e){if(!e){return undefined}return e.replace(/"/g," ").replace(/\\/g,"\\\\").replace(/\*/g,"").split(/\s+/).reduce(function(e,t){if(t!==""){e=`${e?`${e} `:""}"${t}"`}return e},undefined)}async function C(e){const t=e.getModel();const n=t.getMetaModel();const o=n.getMetaPath(e.getPath());const r=i.getInvolvedDataModelObjects(n.getContext(o));await e.requestProperty(r.targetEntityType.keys[0]?.name)}function A(e){let t=false;if(e){e.getCurrentContexts().forEach(function(e){if(e&&e.isTransient()){t=true}})}return t}async function S(e,t,n,o){return e.getLinks([{semanticObject:n,params:o}])}function j(e){const t=[];const n=Object.keys(e);let o;for(const i of n){o={LocalProperty:{$PropertyPath:i},SemanticObjectProperty:e[i]};t.push(o)}return t}function $(e,t,n,o,i){for(const r of e){for(const e of r){const r=e.intent;const s=r.split("-")[1].split("?")[0];if(i&&i.includes(s)||!i&&t&&!t.includes(s)){o.push({text:e.text,targetSemObject:r.split("#")[1].split("-")[0],targetAction:s.split("~")[0],targetParams:n})}}}}function x(e,t,n,o){if(o&&o.length>0){const i=e.allowedActions||undefined;const r=e.unavailableActions?e.unavailableActions:[];const s=e.mapping?j(e.mapping):[];const a={navigationContexts:t,semanticObjectMapping:s};$(o,r,a,n,i)}}function M(e,t,n,o){if(o.length>0){const i=[e.action];const r=[];const s=[];const a={navigationContexts:t,semanticObjectMapping:s};$(o,r,a,n,i)}}async function E(t,n,o,i,r,s,a){const c=a.getShellServices();const l={};let u="",p="";let f;let g=[];let d=[];let m;async function b(){const e=c.parseShellHash(document.location.hash);u=e.semanticObject;p=e.action;return S(c,o,u,l)}try{if(n){if(i&&i.length>0){for(const e of i){const t=e.$PropertyPath;if(!l[t]){l[t]={value:n[t]}}}}else{const e=r.getObject(`${s}/$Type/$Key`);for(const t in e){const o=e[t];if(!l[o]){l[o]={value:n[o]}}}}}const e=V(o).getViewData();const P=[];let h;if(e.additionalSemanticObjects){m=Object.keys(e.additionalSemanticObjects);for(const n of m){h=await Promise.resolve(S(c,o,n,l));x(e.additionalSemanticObjects[n],t,P,h)}}const y=[];const v=a.getComponentData();if(v.feEnvironment&&v.feEnvironment.getIntent()){const e=v.feEnvironment.getIntent();h=await Promise.resolve(S(c,o,e.semanticObject,l));M(e,t,y,h)}const O=o.getBindingContext("internal");const C=await b();if(C){if(C.length>0){let n=false;const o={};const i=[];const a=`${s}@`;const c=`${s}/@`;const l=r.getObject(a);f=Oe.getSemanticObjectAnnotations(l,u);if(!f.bHasEntitySetSO){const e=r.getObject(c);f=Oe.getSemanticObjectAnnotations(e,u)}d=f.aUnavailableActions;d.push(p);o.navigationContexts=t;o.semanticObjectMapping=f.aMappings;$(C,d,o,i);P.forEach(function(e){let{targetSemObject:t}=e;if(i[0]?.targetSemObject===t){n=true}});if(e.additionalSemanticObjects&&i[0]&&e.additionalSemanticObjects[i[0].targetSemObject]&&!!e.additionalSemanticObjects[i[0].targetSemObject].allowedActions){n=true}const m=P.concat(y);g=n?m:m.concat(i);O.setProperty("relatedApps/visibility",g.length>0);O.setProperty("relatedApps/items",g)}else{O.setProperty("relatedApps/visibility",false)}}else{O.setProperty("relatedApps/visibility",false)}}catch(t){e.error("Cannot read links",t)}return g}function w(e,t){const n={bHasEntitySetSO:false,aAllowedActions:[],aUnavailableActions:[],aMappings:[]};let o,i;let r;for(const s in e){if(s.includes("com.sap.vocabularies.Common.v1.SemanticObject")&&e[s]===t){n.bHasEntitySetSO=true;o=`@${"com.sap.vocabularies.Common.v1.SemanticObjectMapping"}`;i=`@${"com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"}`;if(s.includes("#")){r=s.split("#")[1];o=`${o}#${r}`;i=`${i}#${r}`}if(e[o]){n.aMappings=n.aMappings.concat(e[o])}if(e[i]){n.aUnavailableActions=n.aUnavailableActions.concat(e[i])}break}}return n}async function F(t,n){const o=t.getModel().getMetaModel();const i=t.getBindingContext();const r=i&&i.getPath()||"";const s=o.getMetaPath(r);const a=`${s}/`+`@com.sap.vocabularies.Common.v1.SemanticKey`;const c=o.getObject(a);const l=i?.getObject();if(!l&&i){i.requestObject().then(async function(e){return Oe.updateRelateAppsModel(i,e,t,c,o,s,n)}).catch(function(t){e.error("Cannot update the related app details",t)})}else{return Oe.updateRelateAppsModel(i,l,t,c,o,s,n)}}function R(e){if(e&&e.isA(["sap.m.Button","sap.m.OverflowToolbarButton"])&&e.getVisible()&&e.getEnabled()){e.firePress()}}function T(e){if(e.isA("sap.fe.core.AppComponent")){return e}const t=l.getOwnerComponentFor(e);if(!t){throw new Error("There should be a sap.fe.core.AppComponent as owner of the control")}else{return T(t)}}function N(e){const t=e.getRootViewController();return t.isFclEnabled()?t.getRightmostView():Oe.getTargetView(e.getRootContainer().getCurrentPage())}function V(e){if(e&&e.isA("sap.ui.core.ComponentContainer")){const t=e.getComponentInstance();e=t&&t.getRootControl()}while(e&&!e.isA("sap.ui.core.mvc.View")){e=e.getParent()}return e}function I(e,t){for(const n in t){if(t[n]!==e[n]){return false}}return true}function D(e,t,n){const o=e.getObject(`${t}/`)||{},i={};for(const e in o){if(o.hasOwnProperty(e)&&!/^\$/i.test(e)&&o[e].$kind&&I(o[e],n||{$kind:"Property"})){i[e]=o[e]}}return i}function B(e,t){const n=e&&e.getActions();if(n){n.forEach(function(e){if(e.isA("sap.ui.mdc.actiontoolbar.ActionToolbarAction")){e=e.getAction()}if(e.isA("sap.m.MenuButton")){const n=e.getMenu();const o=n.getItems();o.forEach(e=>{if(e.data("IBNData")){t.push(e)}})}else if(e.data("IBNData")){t.push(e)}})}return t}async function q(t,n){const o={};const i=Oe.getAppComponent(n);const s=r.isStickySessionSupported(n.getModel().getMetaModel());const a=function(n){if(n){const e=Object.keys(n);e.forEach(function(e){if(e.indexOf("_")!==0&&!e.includes("odata.context")){o[e]={value:n[e]}}})}if(t.length){t.forEach(function(t){const n=t.data("IBNData").semanticObject;const r=t.data("IBNData").action;i.getShellServices().getLinks([{semanticObject:n,action:r,params:o}]).then(function(e){if(t.isA("sap.ui.core.Control")||t.isA("sap.m.MenuItem")){t.setVisible(t.getVisible()&&e&&e.length===1&&e[0]&&e[0].length===1)}if(s){t.getBindingContext("internal").setProperty(t.getId().split("--")[1],{shellNavigationNotAvailable:!(e&&e.length===1&&e[0]&&e[0].length===1)})}return}).catch(function(t){e.error("Cannot retrieve the links from the shell service",t)})})}};if(n&&n.getBindingContext()){return n.getBindingContext()?.requestObject().then(function(e){return a(e)}).catch(function(t){e.error("Cannot retrieve the links from the shell service",t)})}else{return a()}}function k(e){const t=[];e.forEach(function(e){if(e.isA("sap.m.MenuItem")){t.push(e.getParent()?.getParent())}});t.forEach(function(e){const t=e.getMenu().getItems();const n=t.filter(function(e){return e.getVisible()});if(n.length===0){e.setVisible(false)}})}function L(e,t,n,o){const i=!n?e.getObject(e.getPath()).toString():n;let r=e.getPath().split("/@")[0];const s=e.getObject(r).$Type;const a=U(e.getModel(),s);if(a){r=`/${a}`}if(o){return e.getObject(`${r}/${i}@Org.OData.Core.V1.OperationAvailable`)}if(t){return`${r}/${i}`}else{return{sContextPath:r,sProperty:e.getObject(`${r}/${i}@Org.OData.Core.V1.OperationAvailable/$Path`),sBindingParameter:e.getObject(`${r}/${i}/@$ui5.overload/0/$Parameter/0/$Name`)}}}function U(e,t){const n=e.getObject("/");for(const e in n){if(typeof n[e]==="object"&&n[e].$Type===t){return e}}}function H(e,t){const n=e["@com.sap.vocabularies.Common.v1.Text"],o=n&&(e&&e["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"]||t&&t["@com.sap.vocabularies.UI.v1.TextArrangement"]);if(o){if(o.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"){return"Description"}else if(o.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast"){return"ValueDescription"}else if(o.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"){return"Value"}return"DescriptionValue"}return n?"DescriptionValue":"Value"}function _(e){const t=e.getModel().getMetaModel();return t.getObject(`${t.getMetaPath(e.getPath())}/$Type`)}async function W(t,n,o){let i=n;const r=t.indexOf("(");if(r>-1){const n=t.slice(r+1,-1);let o=_(i);while(o!==n){i=i.getBinding().getContext();if(i){o=_(i)}else{e.warning("Cannot determine target type to request property value for bound action invocation");return Promise.resolve(undefined)}}}return i.requestObject(o)}async function X(e,t,n,o){const i=n&&n.indexOf("/")===0?ge(n,e.getModel()):W(t,e,n);return i.then(function(n){return{vPropertyValue:n,oSelectedContext:e,sAction:t,sDynamicActionEnabledPath:o}})}async function G(t,n){let o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return Promise.all(n).then(function(e){if(e.length){const n=[],i=[];e.forEach(function(e){if(e){if(e.vPropertyValue){t.getModel().setProperty(e.sDynamicActionEnabledPath,true);n.push(e.oSelectedContext)}else{i.push(e.oSelectedContext)}}});Q(t,e[0].sAction,n,i,o)}return}).catch(function(t){e.trace("Cannot retrieve property value from path",t)})}function Q(e,t,n,o){let i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;const r=`${e.getPath()}/dynamicActions/${t}`,s=e.getModel(),a=!i?"aApplicable":"aApplicableForContextMenu",c=!i?"aNotApplicable":"aNotApplicableForContextMenu";s.setProperty(`${r}/${a}`,n);s.setProperty(`${r}/${c}`,o)}function z(e){const t=Oe.AllowedExpressionsPrio;e.sort(function(e,n){return t.indexOf(e)-t.indexOf(n)});return e[0]}function J(){const e=["EQ","NE"];return e.toString()}function K(e,t){const n=t.substring(0,t.lastIndexOf("/"));const o=e.getObject(`${n}/@com.sap.vocabularies.Common.v1.ResultContext`);const i={};if(o&&n!==t){i.contextPath=n;i.parameterProperties=Oe.getContextPathProperties(e,n)}return i}function Y(e,t,n){const o=Oe.getAppComponent(n);const i=o.getNavigationService();return i.mixAttributesAndSelectionVariant(t,e.toJSONString())}function Z(e){const t=r.isStickySessionSupported(e.getModel().getMetaModel());const n=Oe.getIsEditable(e);return t&&n}async function ee(e,t,n,o,i,r){const s=(await P("sap/ui/mdc/enums/BaseType")).default;const a=(await P("sap/ui/mdc/odata/v4/TypeMap")).default;const c=e.getComponentData(),l=c&&c.startupParameters||{},u=e.getShellServices();const p=await u.getStartupAppState(e);const f=p?.getData()||{},g=f.selectionVariant&&f.selectionVariant.SelectOptions||[];t.forEach(function(e){const t=o?`/${e.name}`:e.getPath?.().slice(e.getPath().lastIndexOf("/")+1);const c=o?t.slice(1):t;if(r&&i){if(r[c]){n.setProperty(t,r[c])}}else if(l[c]){const o=e.type?a.getBaseType(e.type):s.String;const i=a.getDataTypeInstance(o);n.setProperty(t,i.parseValue(l[c][0],"string"))}else if(g.length>0){for(const e of g){if(e.PropertyName===c){const o=e.Ranges.length?e.Ranges[e.Ranges.length-1]:undefined;if(o&&o.Sign==="I"&&o.Option==="EQ"){n.setProperty(t,o.Low)}}}}})}function te(e,t){const n=t,o=n!==undefined?Object.keys(n).filter(function(e){return n[e].useForCreate}):[];let i;for(const t of o){const n=t;const o=e&&e[n];if(o&&o.length===1){i=i||Object.create(null);i[n]=o[0]}}return i}function ne(e){const t=[];if(e.parameters){const n=Object.keys(e.parameters)||[];if(n.length>0){n.forEach(function(n){const o=e.parameters[n];if(o.value&&o.value.value&&o.value.format==="binding"){const e={LocalProperty:{$PropertyPath:o.value.value},SemanticObjectProperty:n};if(t.length>0){for(const n of t){if(n.LocalProperty?.$PropertyPath!==e.LocalProperty.$PropertyPath){t.push(e)}}}else{t.push(e)}}})}}return t}function oe(t,n){const o={};let i;const r=t.controlConfiguration;for(const t in r){if(t.includes("@com.sap.vocabularies.UI.v1.DataPoint")||t.includes("@com.sap.vocabularies.UI.v1.Chart")){const s=r[t].navigation?.targetOutbound?.outbound;if(s!==undefined){const r=n[s];if(r.semanticObject&&r.action){if(t.includes("Chart")){i=v(["fe","MicroChartLink",t])}else{i=v(["fe","HeaderDPLink",t])}const e=Oe.getSemanticObjectMapping(r);o[i]={semanticObject:r.semanticObject,action:r.action,semanticObjectMapping:e}}else{e.error(`Cross navigation outbound is configured without semantic object and action for ${s}`)}}}}return o}function ie(e,t){const n=typeof t==="string"?JSON.parse(t):t;for(const t of n){const n=t["LocalProperty"]&&t["LocalProperty"]["$PropertyPath"]||t["@com.sap.vocabularies.Common.v1.LocalProperty"]&&t["@com.sap.vocabularies.Common.v1.LocalProperty"]["$Path"];const o=t["SemanticObjectProperty"]||t["@com.sap.vocabularies.Common.v1.SemanticObjectProperty"];const i=e.getSelectOption(n);if(i){e.removeSelectOption(n);e.massAddSelectOption(o,i)}}return e}async function re(e,t,n){return new Promise(function(o){let i,r;if(n===""){i=e.getObject(`${t}@${"com.sap.vocabularies.Common.v1.SemanticObject"}`);r=e.getObject(`${t}@${"com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"}`)}else{i=e.getObject(`${t}@${"com.sap.vocabularies.Common.v1.SemanticObject"}#${n}`);r=e.getObject(`${t}@${"com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"}#${n}`)}const s=[{semanticObject:i}];const a={semanticObject:i};o({semanticObjectPath:t,semanticObjectForGetLinks:s,semanticObject:a,unavailableActions:r})})}async function se(e,t,n){return Oe.getSemanticObjectsFromPath(e,t,n)}function ae(e){const t={};if(e&&e.FilterExpressionRestrictions!==undefined){e.FilterExpressionRestrictions.forEach(function(e){if(e.Property&&e.AllowedExpressions!==undefined){if(t[e.Property.$PropertyPath]!==undefined){t[e.Property.$PropertyPath].push(e.AllowedExpressions)}else{t[e.Property.$PropertyPath]=[e.AllowedExpressions]}}})}return t}function ce(e,t){let n=[];if(e&&e[t]){n=e[t].map(function(e){return e.$PropertyPath})}return n}function le(e,t,n){const o=t+"/";return e.reduce((e,t)=>{if(t.startsWith(o)){const n=t.replace(o,"");if(!e.includes(n)){e.push(n)}}return e},n)}function ue(e,o){const i={RequiredProperties:[],NonFilterableProperties:[],FilterAllowedExpressions:{}};let s;const a="$NavigationPropertyBinding";const c="@Org.OData.Capabilities.V1.FilterRestrictions";const l=e.replaceAll("%2F","/").split("/").filter(r.filterOutNavPropBinding);const u=`/${l.join("/")}/`;const p=r.getEntitySetPath(e,o);const f=p.split("/").filter(r.filterOutNavPropBinding);const g=o.getObject(`${u}$ContainsTarget`);const d=!!g&&l[l.length-1];if(!g){s=o.getObject(`${p}${c}`);i.RequiredProperties=ce(s,"RequiredProperties")||[];const e=o.getObject(`${u}@com.sap.vocabularies.Common.v1.ResultContext`);if(!e){i.NonFilterableProperties=ce(s,"NonFilterableProperties")||[]}i.FilterAllowedExpressions=ae(s)||{}}if(l.length>1){const e=g?d:f[f.length-1];const r=g?p:`/${f.slice(0,-1).join(`/${a}/`)}`;const s={RequiredProperties:[],NonFilterableProperties:[],FilterAllowedExpressions:{}};if(!e.includes("%2F")){const t=o.getObject(`${r}${c}`);i.RequiredProperties=le(ce(t,"RequiredProperties")||[],e,i.RequiredProperties||[]);i.NonFilterableProperties=le(ce(t,"NonFilterableProperties")||[],e,i.NonFilterableProperties||[]);const n=ae(t)||{};s.FilterAllowedExpressions=Object.keys(n).reduce((t,o)=>{if(o.startsWith(e+"/")){const i=o.replace(e+"/","");t[i]=n[o]}return t},{})}i.FilterAllowedExpressions=n({},i.FilterAllowedExpressions||{},s.FilterAllowedExpressions||{});const u=b.getNavigationRestrictions(o,r,e.replaceAll("%2F","/"));const m=u&&u["FilterRestrictions"];const P=ce(m,"RequiredProperties")||[];i.RequiredProperties=t(i.RequiredProperties.concat(P));const h=ce(m,"NonFilterableProperties")||[];i.NonFilterableProperties=t(i.NonFilterableProperties.concat(h));i.FilterAllowedExpressions=n({},i.FilterAllowedExpressions||{},ae(m)||{});const y=o.getObject(`/${l.join("/")}${c}`);const v=ce(y,"RequiredProperties")||[];i.RequiredProperties=t(i.RequiredProperties.concat(v));const O=ce(y,"NonFilterableProperties")||[];i.NonFilterableProperties=t(i.NonFilterableProperties.concat(O));i.FilterAllowedExpressions=n({},i.FilterAllowedExpressions,ae(y)||{})}return i}async function pe(e,t,n,o){const i=n||{};if(o&&typeof e==="string"){return o.templateControlFragment(e,t,i.view).then(function(e){return o.targets==="xmlTree"&&e.length>0?e[0]:e})}else{const n=typeof e==="string"?p.loadTemplate(e,"fragment"):e;const o=await f.process(n,{name:e},t);const r=o.firstElementChild;if(!!i.isXML&&r){return r}let s=t.appComponent??{runAsOwner:e=>e()};if(i.containingView){const e=l.getOwnerComponentFor(i.containingView);if(e){s=e}}let a;if(i.view&&!i.controller){a=i.view}return s.runAsOwner(async()=>u.load({id:i.id,definition:o,controller:i.controller,containingView:a}))}}function fe(e,t){const n=e.split("/").filter(Boolean),o=n.pop(),i=n.join("/"),r=i&&t.getObject(`/${i}`);if(r?.$kind==="Singleton"){const e=n[n.length-1];return`/${e}/${o}`}return undefined}async function ge(e,t){if(!e||!t){return Promise.resolve(null)}const n=t.getMetaModel();const o=fe(e,n);if(o){const e=t.bindProperty(o);return e.requestValue()}return Promise.resolve(null)}function de(e,t){let n;if(e.includes("@$ui5.overload")){n=e.split("@$ui5.overload")[0]}else{const t=e.split("/0")[0].split(".");n=`/${t[t.length-1]}/`}return n+t}function me(e,t){const n=new d({anyText:e});t.addDependent(n);const o=n.getAnyText();t.removeDependent(n);n.destroy();return o}function be(){return!c.system.desktop||c.resize.width<=320}function Pe(e,t){const n=Oe.getAppComponent(e).getMetaModel();const o=n.getMetaContext(`${e.data("entityType")}${t}`);const r={};let s=i.getInvolvedDataModelObjects(o).targetObject;if(y(s,"com.sap.vocabularies.UI.v1.SelectionPresentationVariantType")){s=s.SelectionVariant}if(!s||!y(s,"com.sap.vocabularies.UI.v1.SelectionVariantType")){return[]}(s.SelectOptions||[]).forEach(e=>{if(e.PropertyName?.$target&&e.Ranges?.length>0){const t=e.PropertyName.$target.type;const n=e.PropertyName.value;for(const o in e.Ranges){const i=h(e.Ranges[o],t);r[n]=(r[n]??[]).concat(new g(n,i.operator,i.rangeLow,i.rangeHigh))}}});const a=[];for(const e in r){a.push(new g({filters:r[e],and:false}))}return a}function he(e,t,i,r){const s=t.createBindingContext(e);return o?.createConverterContextForMacro(i,s||t,r,n)}async function ye(e,t,n){const o=t.getBindingContext();if(o){const i=e==="Draft"?r.getDraftRootPath(o):r.getStickyRootPath(o);let s;if(i){const e=n.getRootViewController().getInstancedViews().find(e=>e.getBindingContext()?.getPath()===i)?.getBindingContext();if(e){return e}const r=t.getModel("internal");s=r.getProperty("/simpleRootContext");if(s?.getPath()===i){return s}const a=o.getModel();s=a.bindContext(i).getBoundContext();await Oe.waitForContextRequested(s);r.setProperty("/simpleRootContext",s);return s}}}function ve(e){const t=e.isA("sap.fe.core.PageController")?e.getView():e;return t.getBindingContext("ui")?.getProperty("/isEditable")}const Oe={fireButtonPress:R,getTargetView:V,getCurrentPageView:N,hasTransientContext:A,updateRelatedAppsDetails:F,getAppComponent:T,getContextPathProperties:D,getParameterInfo:K,updateDataFieldForIBNButtonsVisibility:q,getEntitySetName:U,getActionPath:L,computeDisplayMode:H,isStickyEditMode:Z,getOperatorsForGuidProperty:J,addPageContextToSelectionVariant:Y,setUserDefaults:ee,getIBNActions:B,getHeaderFacetItemConfigForExternalNavigation:oe,getSemanticObjectMapping:ne,setSemanticObjectMappings:ie,getSemanticObjectPromise:se,getSemanticObjectsFromPath:re,waitForContextRequested:C,getFilterRestrictionsByPath:ue,getSpecificAllowedExpression:z,getAdditionalParamsForCreate:te,requestSingletonProperty:ge,templateControlFragment:pe,FilterRestrictions:{REQUIRED_PROPERTIES:"RequiredProperties",NON_FILTERABLE_PROPERTIES:"NonFilterableProperties",ALLOWED_EXPRESSIONS:"FilterAllowedExpressions"},AllowedExpressionsPrio:["SingleValue","MultiValue","SingleRange","MultiRange","SearchExpression","MultiRangeOrSearchExpression"],normalizeSearchTerm:O,setContextsBasedOnOperationAvailable:G,setDynamicActionContexts:Q,requestProperty:X,getParameterPath:de,getRelatedAppsMenuItems:$,getTranslatedTextFromExpBindingString:me,updateRelateAppsModel:E,getSemanticObjectAnnotations:w,getFiltersFromAnnotation:Pe,createRootContext:ye,updateMenuButtonVisiblity:k,isSmallDevice:be,getConverterContextForPath:he,getIsEditable:ve};return Oe},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/ExtensionAPI", ["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/CommonUtils","sap/ui/base/Object","sap/ui/core/Component","sap/ui/model/json/JSONModel"],function(e,t,n,i,r,o){"use strict";var a,s,l,c,u,p,d,f,g;var v=t.property;var w=t.defineUI5Class;function h(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function b(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,m(e,t)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function y(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function _(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let x=(a=w("sap.fe.core.ExtensionAPI"),s=v({type:"sap.fe.core.controllerextensions.EditFlow"}),l=v({type:"sap.fe.core.controllerextensions.Routing"}),c=v({type:"sap.fe.core.controllerextensions.IntentBasedNavigation"}),a(u=(p=function(t){function i(e,n){var i;i=t.call(this)||this;h(i,"editFlow",d,i);h(i,"routing",f,i);h(i,"intentBasedNavigation",g,i);i._controller=e;i._view=e.getView();i.extension=i._controller.extension;i.editFlow=i._controller.editFlow;i.routing=i._controller.routing;i._routing=i._controller._routing;i.intentBasedNavigation=i._controller.intentBasedNavigation;i._prefix=n;return i}b(i,t);var a=i.prototype;a.getEditFlow=function e(){return this.editFlow};a.getRouting=function e(){return this.routing};a.getIntentBasedNavigation=function e(){return this.intentBasedNavigation};a.byId=function e(t){let n=this._view.byId(t);if(!n&&this._prefix){n=this._view.byId(`${this._prefix}--${t}`)}if(!n){return undefined}if(!n.isA("sap.fe.macros.MacroAPI")){let e=n.getParent();while(e){if(e.isA("sap.fe.macros.form.FormAPI")){break}if(e.isA("sap.fe.macros.MacroAPI")){throw new Error(`You attempted to access an internal control. This is risky and might change later. Instead access its stable API by using ID ${e.getId()}`)}e=e.getParent()}}return n};a.getModel=function e(t){let i;if(t&&t!=="ui"){i=n.getAppComponent(this._view);if(!i.getManifestEntry("sap.ui5").models[t]){return undefined}}return this._view.getModel(t)};a.addDependent=function e(t){this._view.addDependent(t)};a.removeDependent=function e(t){this._view.removeDependent(t)};a.navigateToTarget=function e(t,n){this._controller._routing.navigateToTarget(n,t)};a.loadFragment=async function t(i){var a=this;const s=r.getOwnerComponentFor(this._view);const l=this._view.getModel("_pageModel");const c=this._view.getModel("sap.fe.i18n");const u=this.getModel()?.getMetaModel();const p=s.getViewData();const d=s.getEntitySet()?`/${s.getEntitySet()}`:s.getContextPath();const f=new o(p),g={bindingContexts:{contextPath:u?.createBindingContext(i.contextPath||d),converterContext:l.createBindingContext("/",undefined,{noResolve:true}),viewData:p?f.createBindingContext("/"):null},models:{contextPath:u,converterContext:l,metaModel:u,viewData:f,"sap.fe.i18n":c},appComponent:n.getAppComponent(this._view)};let v;if(i.controller&&!i.controller?.isA?.("sap.fe.core.ExtensionAPI")){const e=this.getMetadata().getClass().extend(i.id+"-controller",{});for(const t in i.controller){const n=i.controller[t];if(n?.bind){const r=n.bind(i.controller);if(s){e.prototype[t]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return s.runAsOwner(()=>r.apply(a,t))}}else{e.prototype[t]=r}}else{Object.defineProperty(e.prototype,t,{get(){return i.controller?.[t]},set(e){if(i.controller){i.controller[t]=e}}})}}v=new e(this._controller);const t=v.isA;v.isA=e=>t.bind(v)(e)||this.isA(e)}else{v=i.controller??this}return s.runAsOwner(async()=>{const t=n.templateControlFragment(i.name,g,{controller:v,isXML:false,id:i.id,containingView:this._view});try{const e=await t;if(i.initialBindingContext!==undefined){e.setBindingContext(i.initialBindingContext)}this.addDependent(e);return e}catch(t){e.error(t)}})};a.updateAppState=async function e(){const t=this._controller.getView();const n=this._controller.getAppComponent();const i=await n.getAppStateHandler().createAppState({viewId:t.getId()});return i?.appStateData};a.runWithFPMContext=function e(t){const n=r.getOwnerComponentFor(this._view);return n.runAsOwner(t)};return i}(i),d=y(p.prototype,"editFlow",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),f=y(p.prototype,"routing",[l],{configurable:true,enumerable:true,writable:true,initializer:null}),g=y(p.prototype,"intentBasedNavigation",[c],{configurable:true,enumerable:true,writable:true,initializer:null}),p))||u);return x},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/IRowBindingInterface", ["sap/fe/base/ClassSupport"],function(e){"use strict";var n,s;var a={};var i=e.defineUI5Class;let r=(n=i("sap.fe.core.IRowBindingInterface"),n(s=function e(){this.__implements__sap_fe_core_IRowBindingInterface=true})||s);a=r;return a},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/InsightsFormattersExtension", ["sap/insights/CardExtension","./formatters/ValueFormatter"],function(t,r){"use strict";function e(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,o(t,r)}function o(t,r){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},o(t,r)}let n=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;n.init=function e(){t.prototype.init.apply(this);this.addFormatters("sapfe",{formatWithBrackets:r.formatWithBrackets,formatTitle:r.formatTitle})};return o}(t);return n},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/PageController", ["sap/fe/base/ClassSupport","sap/fe/core/BaseController","sap/fe/core/ExtensionAPI","sap/fe/core/controllerextensions/CollaborativeDraft","sap/fe/core/controllerextensions/EditFlow","sap/fe/core/controllerextensions/IntentBasedNavigation","sap/fe/core/controllerextensions/InternalIntentBasedNavigation","sap/fe/core/controllerextensions/InternalRouting","sap/fe/core/controllerextensions/MessageHandler","sap/fe/core/controllerextensions/PageReady","sap/fe/core/controllerextensions/Paginator","sap/fe/core/controllerextensions/Placeholder","sap/fe/core/controllerextensions/Recommendations","sap/fe/core/controllerextensions/Routing","sap/fe/core/controllerextensions/Share","sap/fe/core/controllerextensions/SideEffects","sap/fe/core/controllerextensions/Telemetry","sap/fe/core/controllerextensions/ViewState","sap/m/MessageBox","sap/ui/core/Component","sap/ui/core/Lib","./controllerextensions/ContextSharing","./controllerextensions/cards/CollaborationManager"],function(e,t,r,n,o,i,a,l,s,u,p,c,g,f,b,d,y,w,m,h,x,v,P){"use strict";var O,z,I,_,E,A,C,M,B,V,N,R,S,j,T,D,F,H,k,L,G,U,Y,$,q,J,K,Q,W,X,Z,ee,te,re,ne,oe,ie,ae,le,se,ue,pe;var ce=e.usingExtension;var ge=e.publicExtension;var fe=e.extensible;var be=e.defineUI5Class;function de(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ye(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,we(e,t)}function we(e,t){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},we(e,t)}function me(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer?(Object.defineProperty(e,t,i),null):i}function he(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let xe=(O=be("sap.fe.core.PageController"),z=ce(f),I=ce(n),_=ce(l),E=ce(o),A=ce(i),C=ce(a),M=ce(u),B=ce(s),V=ce(b),N=ce(p),R=ce(w),S=ce(c),j=ce(d),T=ce(g),D=ce(y),F=ce(v),H=ce(P),k=ge(),L=ge(),G=ge(),U=ge(),Y=fe("After"),O($=(q=function(e){function t(t){var r;r=e.call(this,t)||this;de(r,"routing",J,r);de(r,"collaborativeDraft",K,r);de(r,"_routing",Q,r);de(r,"editFlow",W,r);de(r,"intentBasedNavigation",X,r);de(r,"_intentBasedNavigation",Z,r);de(r,"pageReady",ee,r);de(r,"messageHandler",te,r);de(r,"share",re,r);de(r,"paginator",ne,r);de(r,"viewState",oe,r);de(r,"placeholder",ie,r);de(r,"_sideEffects",ae,r);de(r,"recommendations",le,r);de(r,"telemetry",se,r);de(r,"contextSharing",ue,r);de(r,"collaborationManager",pe,r);const n=Object.getOwnPropertyNames(r.constructor.prototype);for(const e of n){if(e!=="constructor"&&e!=="getMetadata"&&e!=="extension"){const t=r[e];if(t&&typeof t==="function"&&!t.getMetadata){r[e]=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++){n[o]=arguments[o]}const i=h.getOwnerComponentFor(r.getView());if(i){return i.runAsOwner(()=>t.apply(r,n))}else{return t.apply(r,n)}}}}}Object.defineProperty(r,"oView",{get(){return this._oView},set(e){this._oView=e;this.getOwnerComponent()?.setRootController?.(this)}});return r}ye(t,e);var n=t.prototype;n.onInit=function e(){const t=this.getAppComponent().getModel("ui"),r=this.getAppComponent().getModel("internal"),n=`/pages/${this.getView().getId()}`;t.setProperty(n,{controls:{}});r.setProperty(n,{controls:{},collaboration:{}});this.getView().bindElement({path:"/",model:"ui"});this.getView().bindElement({path:n,model:"internal"});this.getView().bindElement({path:n,model:"pageInternal"});this.getView().setModel(r,"pageInternal");this.getView().setModel(t,"ui");this.getView().setModel(r,"internal")};n.onBeforeRendering=function e(){if(this.placeholder.attachHideCallback){this.placeholder.attachHideCallback()}};n.getExtensionAPI=function e(t){if(!this.extensionAPI){this.extensionAPI=new r(this,t)}return this.extensionAPI};n.onPageReady=function e(t){const r=this.getView();this.getAppComponent().getAppStateHandler().applyAppState(r.getId(),r)};n._getPageTitleInformation=function e(){return{}};n._getPageModel=function e(){const t=h.getOwnerComponentFor(this.getView());return t?.getModel("_pageModel")};n.onOpenInNewTabNavigateOutBound=function e(t,r,n,o){const i=this;if(r.length<=o){r.forEach(function(e){i._intentBasedNavigation.onChevronPressNavigateOutBound(i,t,e,n,"explace")})}else{m.warning(x.getResourceBundleFor("sap.fe.macros").getText("T_TABLE_NAVIGATION_TOO_MANY_ITEMS_SELECTED",[o]))}};return t}(t),J=me(q.prototype,"routing",[z],{configurable:true,enumerable:true,writable:true,initializer:null}),K=me(q.prototype,"collaborativeDraft",[I],{configurable:true,enumerable:true,writable:true,initializer:null}),Q=me(q.prototype,"_routing",[_],{configurable:true,enumerable:true,writable:true,initializer:null}),W=me(q.prototype,"editFlow",[E],{configurable:true,enumerable:true,writable:true,initializer:null}),X=me(q.prototype,"intentBasedNavigation",[A],{configurable:true,enumerable:true,writable:true,initializer:null}),Z=me(q.prototype,"_intentBasedNavigation",[C],{configurable:true,enumerable:true,writable:true,initializer:null}),ee=me(q.prototype,"pageReady",[M],{configurable:true,enumerable:true,writable:true,initializer:null}),te=me(q.prototype,"messageHandler",[B],{configurable:true,enumerable:true,writable:true,initializer:null}),re=me(q.prototype,"share",[V],{configurable:true,enumerable:true,writable:true,initializer:null}),ne=me(q.prototype,"paginator",[N],{configurable:true,enumerable:true,writable:true,initializer:null}),oe=me(q.prototype,"viewState",[R],{configurable:true,enumerable:true,writable:true,initializer:null}),ie=me(q.prototype,"placeholder",[S],{configurable:true,enumerable:true,writable:true,initializer:null}),ae=me(q.prototype,"_sideEffects",[j],{configurable:true,enumerable:true,writable:true,initializer:null}),le=me(q.prototype,"recommendations",[T],{configurable:true,enumerable:true,writable:true,initializer:null}),se=me(q.prototype,"telemetry",[D],{configurable:true,enumerable:true,writable:true,initializer:null}),ue=me(q.prototype,"contextSharing",[F],{configurable:true,enumerable:true,writable:true,initializer:null}),pe=me(q.prototype,"collaborationManager",[H],{configurable:true,enumerable:true,writable:true,initializer:null}),me(q.prototype,"onInit",[k],Object.getOwnPropertyDescriptor(q.prototype,"onInit"),q.prototype),me(q.prototype,"onBeforeRendering",[L],Object.getOwnPropertyDescriptor(q.prototype,"onBeforeRendering"),q.prototype),me(q.prototype,"getExtensionAPI",[G],Object.getOwnPropertyDescriptor(q.prototype,"getExtensionAPI"),q.prototype),me(q.prototype,"onPageReady",[U,Y],Object.getOwnPropertyDescriptor(q.prototype,"onPageReady"),q.prototype),q))||$);return xe},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/ResourceModel", ["sap/fe/base/ClassSupport","sap/ui/model/resource/ResourceModel"],function(e,t){"use strict";var s,o;var r=e.defineUI5Class;function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c(e,t)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}let n=(s=r("sap.fe.core.ResourceModel"),s(o=function(e){function t(){return e.apply(this,arguments)||this}u(t,e);var s=t.prototype;s.getText=function e(t,s,o){let r=t;const u=this._oResourceBundle;if(o){const e=this.checkIfResourceKeyExists(`${r}|${o}`);r=e?`${r}|${o}`:r}return u?.getText(r,s,true)||t};s.checkIfResourceKeyExists=function e(t){return this._checkIfResourceKeyExists(t,this._oResourceBundle.aCustomBundles)};s._checkIfResourceKeyExists=function e(t,s){if(s?.length){for(let e=s.length-1;e>=0;e--){const o=s[e].hasText(t);if(o){return true}this._checkIfResourceKeyExists(t,s[e].aCustomBundles)}}return false};return t}(t))||o);return n},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/ReuseComponent", ["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/CommonUtils","sap/fe/core/fpm/Component","sap/ui/core/Component"],function(e,t,n,i,o){"use strict";var r,a,s,c,l,u,p;var f=t.property;var h=t.event;var g=t.defineUI5Class;function d(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function b(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,m(e,t)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function v(e,t,n,i,o){var r={};return Object.keys(i).forEach(function(e){r[e]=i[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer?(Object.defineProperty(e,t,r),null):r}function w(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let C=(r=g("sap.fe.core.ReuseComponent"),a=f({type:"object"}),s=h(),r(c=(l=function(t){function i(){var e;for(var n=arguments.length,i=new Array(n),o=0;o<n;o++){i[o]=arguments[o]}e=t.call(this,...i)||this;d(e,"override",u,e);d(e,"initialized",p,e);e.hooksApplied=false;return e}b(i,t);var r=i.prototype;r.setContainer=function e(n){t.prototype.setContainer.call(this,n);this.container=n;const i=this.getRouter();if(i){i.initialize()}return this};r.applyHooks=function t(){if(this.hooksApplied||!this.container){return}const n=this.getPageComponent().getRootController();if(!n){return}for(const t in this.override){const i=this.override[t];const o=n[t];if(!o){e.error(`The controller extension ${t} does not exist in the page controller.`);continue}for(const r in i){const a=o[`attach${String(r)}`];if(!a){e.error(`The hook ${r} does not exist in the page controller extension ${t}.`);continue}const s=i[r];a(s);n.getView().attachBeforeExit(()=>{this.hooksApplied=false;o[`detach${String(r)}`](s)})}}this.hooksApplied=true;this.fireEvent("initialized")};r.createContent=async function e(){this.attachModelContextChange(this.applyHooks.bind(this));return new Promise(e=>{this.rootControlCreated=e})};r.setAggregation=function e(n,i,o){if(n==="rootControl"){const e=i;this.rootControlCreated(e)}return t.prototype.setAggregation.call(this,n,i,o)};r.getContextPath=function e(){const t=this.contextPath;if(t?.startsWith("/")){return t}else{const e=n.getCurrentPageView(this.getAppComponent());const i=e.getViewData().contextPath||"/"+e.getViewData().entitySet;if(t){return i+"/"+t}else{return i}}};r.getViewName=function e(){const t=this.getManifestEntry("sap.ui5").rootView?.viewName;if(!t&&!this.viewName){throw new Error("No root view defined in the manifest nor viewName set in the component")}return t||this.viewName};r.getPageComponent=function e(){const t=this.container?.getParent();if(!t){throw new Error("The parent of the reuse component is not yet set. Thus, the page component cannot be retrieved.")}return o.getOwnerComponentFor(t)};r.getExtensionAPI=function e(){return this.getPageComponent().getExtensionAPI()};return i}(i),u=v(l.prototype,"override",[a],{configurable:true,enumerable:true,writable:true,initializer:null}),p=v(l.prototype,"initialized",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),l))||c);return C},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/TemplateComponent", ["sap/fe/base/ClassSupport","sap/fe/core/CommonUtils","sap/fe/core/converters/MetaModelConverter","sap/ui/core/UIComponent"],function(e,t,r,n){"use strict";var i,o,l,a,u,p,c,s,f,g,b,m,y,d,C,h,_,w,v,z,P,I,x,A,M,R,j,B,O,k,E,D,T,N,S,V,L,U,F;var W=r.getMetaModelById;var X=e.property;var q=e.implementInterface;var G=e.event;var H=e.defineUI5Class;function J(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function K(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Q(e,t)}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}function Y(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function Z(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let $=(i=H("sap.fe.core.TemplateComponent"),o=q("sap.ui.core.IAsyncContentCreation"),l=q("sap.fe.core.buildingBlocks.IBuildingBlockOwnerComponent"),a=X({type:"string",defaultValue:null}),u=X({type:"string",defaultValue:null}),p=X({type:"object"}),c=X({type:"string"}),s=X({type:"object"}),f=X({type:"string[]"}),g=X({type:"object"}),b=X({type:"object"}),m=X({type:"boolean"}),y=X({type:"object"}),d=X({type:"string"}),C=X({type:"string"}),h=X({type:"string"}),_=G(),w=G(),v=G(),i(z=(P=function(e){function r(){var t;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}t=e.call(this,...n)||this;J(t,"__implements__sap_ui_core_IAsyncContentCreation",I,t);J(t,"__implements__sap_fe_core_buildingBlocks_IBuildingBlockOwnerComponent",x,t);J(t,"entitySet",A,t);J(t,"contextPath",M,t);J(t,"preprocessorContext",R,t);J(t,"bindingContextPattern",j,t);J(t,"navigation",B,t);J(t,"enhanceI18n",O,t);J(t,"controlConfiguration",k,t);J(t,"content",E,t);J(t,"allowDeepLinking",D,t);J(t,"refreshStrategyOnAppRestore",T,t);J(t,"viewType",N,t);J(t,"viewName",S,t);J(t,"_jsxViewName",V,t);J(t,"containerDefined",L,t);J(t,"heroesBatchReceived",U,t);J(t,"workersBatchReceived",F,t);return t}K(r,e);var n=r.prototype;n.setContainer=function t(r){e.prototype.setContainer.call(this,r);this.fireEvent("containerDefined",{container:r});return this};n.init=function r(){this.oAppComponent=t.getAppComponent(this);e.prototype.init.call(this)};n.getExtensionComponent=function e(){return this.oAppComponent};n.getAppComponent=function e(){return this.oAppComponent};n.setRootController=function e(t){this._rootController=t};n.getRootController=function e(){const t=this.getRootControl();let r;if(t&&t.getController){r=t.getController()}else{r=this._rootController}return r};n.onPageReady=function e(t){const r=this.getRootController();if(r&&r.onPageReady){r.onPageReady(t)}};n.getNavigationConfiguration=function e(t){const r=this.navigation;return r[t]};n.getViewData=function e(){const t=this.getMetadata().getAllProperties();const r=Object.keys(t).reduce((e,r)=>{e[r]=t[r].get(this);return e},{});delete r.preprocessorContext;r.fclEnabled=this.oAppComponent._isFclEnabled();return r};n._getPageTitleInformation=function e(){const t=this.getRootControl();if(t&&t.getController()&&t.getController()._getPageTitleInformation){return t.getController()._getPageTitleInformation()}else{return{}}};n.getExtensionAPI=function e(){return this.getRootControl().getController().getExtensionAPI()};n.getMetaModel=function e(t){if(!t){return this.preprocessorContext?.models.metaModel}else if(t.startsWith("id-")){return W(t)}else if(!this.getModel(t)){return this.getAppComponent().getModel(t)?.getMetaModel()}else{return this.getModel(t)?.getMetaModel()}};n.getFullContextPath=function e(t){if(!t){return this.preprocessorContext?.fullContextPath}};return r}(n),I=Y(P.prototype,"__implements__sap_ui_core_IAsyncContentCreation",[o],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),x=Y(P.prototype,"__implements__sap_fe_core_buildingBlocks_IBuildingBlockOwnerComponent",[l],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),A=Y(P.prototype,"entitySet",[a],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),M=Y(P.prototype,"contextPath",[u],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),R=Y(P.prototype,"preprocessorContext",[p],{configurable:true,enumerable:true,writable:true,initializer:null}),j=Y(P.prototype,"bindingContextPattern",[c],{configurable:true,enumerable:true,writable:true,initializer:null}),B=Y(P.prototype,"navigation",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),O=Y(P.prototype,"enhanceI18n",[f],{configurable:true,enumerable:true,writable:true,initializer:null}),k=Y(P.prototype,"controlConfiguration",[g],{configurable:true,enumerable:true,writable:true,initializer:null}),E=Y(P.prototype,"content",[b],{configurable:true,enumerable:true,writable:true,initializer:null}),D=Y(P.prototype,"allowDeepLinking",[m],{configurable:true,enumerable:true,writable:true,initializer:null}),T=Y(P.prototype,"refreshStrategyOnAppRestore",[y],{configurable:true,enumerable:true,writable:true,initializer:null}),N=Y(P.prototype,"viewType",[d],{configurable:true,enumerable:true,writable:true,initializer:function(){return"XML"}}),S=Y(P.prototype,"viewName",[C],{configurable:true,enumerable:true,writable:true,initializer:null}),V=Y(P.prototype,"_jsxViewName",[h],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),L=Y(P.prototype,"containerDefined",[_],{configurable:true,enumerable:true,writable:true,initializer:null}),U=Y(P.prototype,"heroesBatchReceived",[w],{configurable:true,enumerable:true,writable:true,initializer:null}),F=Y(P.prototype,"workersBatchReceived",[v],{configurable:true,enumerable:true,writable:true,initializer:null}),P))||z);return $},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/TemplateModel", ["sap/fe/base/ClassSupport","sap/ui/base/Object","sap/ui/model/json/JSONModel"],function(e,t,o){"use strict";var n,i;var a=e.defineUI5Class;function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d(e,t)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}let s=(n=a("sap.fe.core.TemplateModel"),n(i=function(e){function t(t,n){var i;i=e.call(this)||this;i.oMetaModel=n;i.oConfigModel=new o;i.oConfigModel.setSizeLimit(Number.MAX_VALUE);i.bConfigLoaded=false;const a=i;if(typeof t==="function"){const e=i.oConfigModel._getObject.bind(i.oConfigModel);i.oConfigModel._getObject=function(o,n){if(!a.bConfigLoaded){this.setData(t())}return e(o,n)}}else{i.oConfigModel.setData(t)}i.fnCreateMetaBindingContext=i.oMetaModel.createBindingContext.bind(i.oMetaModel);i.fnCreateConfigBindingContext=i.oConfigModel.createBindingContext.bind(i.oConfigModel);i.fnSetData=i.oConfigModel.setData.bind(i.oConfigModel);i.oConfigModel.createBindingContext=i.createBindingContext.bind(i);i.oConfigModel.setData=i.setData.bind(i);return i.oConfigModel||r(i)}f(t,e);var n=t.prototype;n.setData=function e(t){this.fnSetData(t);this.bConfigLoaded=true};n.createBindingContext=function e(t,o,n,i){let a;const r=n&&n.noResolve;a=this.fnCreateConfigBindingContext(t,o,n,i);const f=!r&&a?.getObject();if(f&&typeof f==="string"){a=this.fnCreateMetaBindingContext(f,o,n,i)}return a};n.destroy=function e(){this.oConfigModel.destroy();o.prototype.destroy.apply(this)};return t}(t))||i);return s},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/UIProvider", [],function(){"use strict";var e={};let r;function n(){if(r===undefined){throw new Error("sap.fe.core UI provider not defined")}return r}e.getCoreUIFactory=n;function t(e){r=e}e.setCoreUIFactory=t;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/buildingBlocks/BuildingBlock", ["sap/base/Log","sap/fe/base/BuildingBlockBase","sap/fe/base/ClassSupport","sap/fe/base/HookSupport","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/MetaPath","sap/fe/core/helpers/StableIdHelper","sap/ui/core/Component","sap/ui/core/ElementRegistry"],function(e,t,n,r,o,i,a,s,l){"use strict";var c,h,u,f,d,g;var p=a.generate;var b=o.getInvolvedDataModelObjectsForTargetPath;var v=o.convertTypes;var m=r.initControllerExtensionHookHandlers;var w=n.property;var C=n.defineUI5Class;function M(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function y(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,O(e,t)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function _(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer?(Object.defineProperty(e,t,i),null):i}function P(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let x=(c=C("sap.fe.core.buildingBlocks.BuildingBlock"),h=w({type:"string"}),c(u=(f=(g=function(t){function n(e,n){var r;r=t.call(this,e,n)||this;M(r,"metaModel",d,r);r._applyingSettings=false;r.notifyBBObservers();return r}y(n,t);var r=n.prototype;r.applySettings=function e(n,r){this._applyingSettings=true;t.prototype.applySettings.call(this,n,r);this._applyingSettings=false;this._checkIfMetadataReady(true);return this};r.notifyBBObservers=function e(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;const r=n._bbobserverMap.get(this.getId());if(r&&r.length>0){for(const e of r){if(t){if(e.onDestroy){e.onDestroy(this)}}else if(e.onAvailable){e.onAvailable(this)}}}};n.observeBuildingBlock=function e(t,r){const o=l.get(t);if(o){if(r.onAvailable){r.onAvailable(o)}}else{const e=n._bbobserverMap.get(t);if(e){e.push(r)}else{n._bbobserverMap.set(t,[r])}}};r._getOwner=function e(){let t=this;let n=s.getOwnerComponentFor(t);while(!n&&t&&!t.isA("sap.ui.core.mvc.View")){t=t.getParent();if(t){n=s.getOwnerComponentFor(t)}}if(n?.isA("sap.fe.core.TemplateComponent")){return n}if(n?.isA("sap.fe.core.buildingBlocks.IBuildingBlockOwnerComponent")){return n}};r.getPageController=function e(){return this._getOwner()?.getRootController?.()};r.getMetaModel=function e(){return this._getOwner()?.getMetaModel(this.metaModel)};r.destroy=function e(n){if(this.isA("sap.fe.core.controllerextensions.viewState.IViewStateContributor")){this.getPageController()?.viewState?.deregisterStateContributor(this)}this.notifyBBObservers(true);t.prototype.destroy.call(this,n)};r._checkIfMetadataReady=function t(){let n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;const r=this._getOwner();if(r){this.onMetadataAvailable(r);if(this.isA("sap.fe.core.controllerextensions.viewState.IViewStateContributor")){this.getPageController()?.viewState.registerStateContributor(this)}if(this.getPageController()){m(this,this.getPageController())}if(this._modelContextChangeEventHandler){this.detachEvent("modelContextChange",this._modelContextChangeEventHandler)}}else{if(!n&&!this.content){e.warning("The building block was not created within an ExtensionAPI.runWithFPMContext call, for performance reason it's recommended to do so.",this)}if(!this._modelContextChangeEventHandler){this._modelContextChangeEventHandler=function(){this._checkIfMetadataReady()};this.attachEvent("modelContextChange",this._modelContextChangeEventHandler)}}};r.onMetadataAvailable=function e(t){};r.getAppComponent=function e(){const t=this._getOwner();return t?.getAppComponent()};r.getDataModelObjectPath=function e(t){const n=this._getOwner();const r=n.getMetaModel(this.metaModel);const o=t??this.getOwnerContextPath();return b(o,r)};r.getOwnerContextPath=function e(){const t=this._getOwner();return t.getFullContextPath(this.metaModel)};r.getDataModelObjectForMetaPath=function e(t,n){const r=this._getOwner();const i=r.getMetaModel(this.metaModel);let a=n??this.getOwnerContextPath();a=a?.startsWith("/")?a:undefined;if(!i||!(a||t.charAt(0)==="/")){throw new Error("No metamodel or metapath is not reachable with contextPath")}let s=a?i.createBindingContext(a):undefined;s=s?s:undefined;const l=i.createBindingContext(t,s);return l?o.getInvolvedDataModelObjects(l,s):undefined};r.getMetaPathObject=function t(n,r){const o=this._getOwner();const a=o.getMetaModel(this.metaModel);let s=r??this.getOwnerContextPath();s=s?.startsWith("/")?s:undefined;if(!a||!(s||n.charAt(0)==="/")){e.warning(`No metamodel or metaPath is not reachable with ${r}:${n}`);return null}try{return new i(v(a),n,s)}catch(t){e.warning(`No metamodel or metaPath is not reachable with ${r}:${n}`);return null}};r.createId=function e(){if(this.getId()){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}return p([this.getId(),...n])}return undefined};r.getTranslatedText=function e(t,n,r){return(this.getModel("sap.fe.i18n")??this._getOwner()?.getModel("sap.fe.i18n"))?.getText(t,n,r)||t};return n}(t),g._bbobserverMap=new Map,g),d=_(f.prototype,"metaModel",[h],{configurable:true,enumerable:true,writable:true,initializer:null}),f))||u);return x},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/buildingBlocks/IBuildingBlockOwnerComponent", [],function(){"use strict"},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/buildingBlocks/TraceInfo", ["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/core/util/XMLPreprocessor"],function(t,e,n){"use strict";var r=e.bindingParser;const i=[];const a="http://schemas.sap.com/sapui5/extension/sap.fe.info/1",o="http://www.w3.org/2000/xmlns/",s=location.search.includes("sap-ui-xx-feTraceInfo=true"),c=["sap.m","sap.uxap","sap.ui.unified","sap.f","sap.ui.table","sap.suite.ui.microchart","sap.ui.layout.form","sap.ui.mdc","sap.ui.mdc.link","sap.ui.mdc.field","sap.fe.fpm"],u={};function f(t){return JSON.parse(JSON.stringify(t))}async function l(t,e,n,i){let a;const o=[];try{a=r(t,undefined,false,true)||[]}catch(t){a=[]}a=Array.isArray(a)?a:[a];a.filter(function(t){return t.path||t.parts}).forEach(function(t){const r=t.parts||[t];r.filter(function(t){return t.path}).forEach(function(t){const r=e[t.model]=e[t.model]||{};const a=!t.path.includes(">")?(t.model&&`${t.model}>`)+t.path:t.path;let s;let c;if(typeof t.model==="undefined"&&a.includes(">")){c=a.split(">");t.model=c[0];t.path=c[1]}try{s=n.getContext(a);const e=n.getResult(`{${a}}`,i);o.push(e.then(function(e){if(s?.getModel().getMetadata().getName()==="sap.ui.model.json.JSONModel"){if(!e.getModel()){r[t.path]=e}else{r[t.path]=`Context from ${e.getPath()}`}}else{r[t.path]={path:s.getPath(),data:typeof e==="object"?"[ctrl/cmd-click] on path to see data":e}}return}).catch(function(){r[t.path]={bindingFor:"Runtime"}}))}catch(e){r[t.path]={bindingFor:"Runtime"}}})});return Promise.all(o)}async function p(t,e,n,r){return t.then(function(t){e[n]=r!==t?{originalValue:r,resolvedValue:t}:r;return}).catch(function(t){const i=t;e[n]={originalValue:r,error:i.stack&&i.stack.toString()||t}})}async function h(t,e){const n={};const r=[];const i={};let a;for(let o=t.attributes.length>>>0;o--;){const s=t.attributes[o],c=s.nodeName,u=t.getAttribute(c);if(!["core:require"].includes(c)){r.push(l(u,i,e,t));a=e.getResult(u,t);if(a){r.push(p(a,n,c,u))}else{}}}return Promise.all(r).then(function(){return{properties:n,contexts:i}})}async function m(e,n){try{const t=e.nodeName.split(":")[1]||e.nodeName,r=/^[A-Z]/.test(t),s={isError:false,control:`${e.namespaceURI}.${e.nodeName.split(":")[1]||e.nodeName}`,metaDataContexts:[],properties:{}};if(r){const t=[...e.ownerDocument.children].find(t=>!t.nodeName.startsWith("#"));if(t&&!t.getAttribute("xmlns:trace")){t.setAttributeNS(o,"xmlns:trace",a);t.setAttributeNS(a,"trace:is","on")}return await h(e,n).then(async function(t){const r=Object.keys(t.contexts).length>0;if(r){Object.assign(s,t);s.viewInfo=n.getViewInfo();s.macroInfo=n.getSettings()["_macroInfo"];s.traceID=i.length;e.setAttributeNS(a,"trace:traceID",s.traceID.toString());i.push(s)}return n.visitAttributes(e)}).then(async function(){return n.visitChildNodes(e)}).catch(function(t){s.error={exception:t,node:(new XMLSerializer).serializeToString(e)}})}else{await n.visitAttributes(e);await n.visitChildNodes(e)}}catch(r){t.error(`Error while tracing '${e?.nodeName}': ${r.message}`,"TraceInfo");return n.visitAttributes(e).then(async function(){return n.visitChildNodes(e)})}}if(s){c.forEach(function(t){u[t]=n.plugIn(m.bind(t),t)})}function d(t,e,n,r,s){try{let c=e.metadataContexts&&Object.keys(e.metadataContexts)||[];const u=e.properties&&Object.keys(e.properties)||[];const l=f(s.getSettings()["_macroInfo"]||{});const p={isError:false,macro:t,metaDataContexts:[],properties:{}};if(c.length===0){c=Object.keys(n).filter(function(t){return t!=="this"})}if(!r.getAttribute("xmlns:trace")){r.setAttributeNS(o,"xmlns:trace",a)}if(c.length>0){c.forEach(function(t){const e=n[t],r=e&&{name:t,path:e.getPath()};if(r){p.metaDataContexts.push(r)}});u.forEach(function(t){const e=n.this.getObject(t);if(e){p.properties[t]=e}});p.viewInfo=s.getViewInfo();p.traceID=i.length;l.parentMacroID=l.macroID;l.macroID=p.traceID.toString();p.macroInfo=l;r.setAttributeNS(a,"trace:macroID",p.traceID.toString());i.push(p)}return p}catch(e){return{isError:true,error:{exception:e,node:(new XMLSerializer).serializeToString(r)},name:t,contextPath:s?.getContext()?.getPath(),metaDataContexts:[],properties:{}}}}function g(t){if(t){return i[t]}const e=i.filter(function(t){return t.error});return e.length>0&&e||i}function b(){return s}return{isTraceInfoActive:b,traceMacroCalls:d,getTraceInfo:g}},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/buildingBlocks/templating/AttributeModel", ["sap/base/Log","sap/base/util/ObjectPath","sap/ui/model/json/JSONModel"],function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}let i=function(n){function o(t,e,r){var o;o=n.call(this)||this;o.oNode=t;o.oProps=e;o.BuildingBlockClass=r;o.$$valueAsPromise=true;return o}r(o,n);var i=o.prototype;i._getObject=function n(r,o){if(r===undefined||r===""){if(o!==undefined&&o.getPath()!=="/"){return this._getObject(o.getPath(r))}return this.oProps}if(r==="/undefinedValue"||r==="undefinedValue"){return undefined}const i=e.get(r.replace(/\//g,"."),this.oProps);if(i!==undefined){return i}if(this.oProps.hasOwnProperty(r)){return this.oProps[r]}if(!r.includes(":")&&!r.includes("/")){t.error(`Missing property ${r} on building block metadata ${this.BuildingBlockClass.name}`)}return this.oNode.getAttribute(r)};return o}(n);return i},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/buildingBlocks/templating/BuildingBlockFormatter", [],function(){"use strict";return{base64Decode:e=>atob(e)}},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/buildingBlocks/templating/BuildingBlockSupport", ["sap/base/util/merge"],function(e){"use strict";var t={};function i(e){return function(t,i,n){const r=a(t.constructor);e.defaultValue=n.initializer?.();delete n.initializer;if(r.properties[i.toString()]===undefined||r.properties[i.toString()]!==e){r.properties[i.toString()]=e}return n}}t.blockAttribute=i;function n(){return i({type:"function",isPublic:true})}t.blockEvent=n;function r(e){return function(t,i,n){const r=a(t.constructor);delete n.initializer;if(r.aggregations[i]===undefined||r.aggregations[i]!==e){r.aggregations[i]=e}if(e.isDefault===true){r.defaultAggregation=i}return n}}t.blockAggregation=r;function a(t){if(!Object.getOwnPropertyNames(t).includes("metadata")||t.metadata===undefined){t.metadata=e({namespace:"",name:"",properties:{},aggregations:{},stereotype:"xmlmacro"},t.metadata??{})}return t.metadata}function o(e){return function(t){const i=a(t);i.namespace=e.namespace;i.publicNamespace=e.publicNamespace;i.name=e.name;i.xmlTag=e.xmlTag;i.fragment=e.fragment;i.designtime=e.designtime;i.isOpen=e.isOpen;i.libraries=e.libraries}}t.defineBuildingBlock=o;function s(e){const t={controllerExtensions:{},properties:{},aggregations:{},associations:{},references:{},methods:{},events:{},interfaces:[]};const i=a(e);let n=i.defaultAggregation;for(const e in i.properties){const r={...i.properties[e]};if(e==="visible"){r.defaultValue=true}if(r.type==="function"){t.events[e]={}}else if(r.isAssociation===true){t.associations[e]={type:"sap.ui.core.Control"}}else if(r.type==="object"){r.type=r.underlyingType??"sap.fe.macros.controls.BuildingBlockObjectProperty";r.multiple=false;t.aggregations[e]=r;n??=e}else if(r.type==="array"){r.type=r.underlyingType??"sap.fe.macros.controls.BuildingBlockObjectProperty";r.multiple=true;t.aggregations[e]=r;n??=e}else{if(r.type==="sap.ui.model.Context"){r.type="string"}t.properties[e]={...r}}}for(const e in i.aggregations){t.aggregations[e]=i.aggregations[e]}t.defaultAggregation=n;t.buildingBlockMetadata=i;return t}t.convertBuildingBlockMetadata=s;return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor", ["sap/base/Log","sap/base/util/deepClone","sap/base/util/uid","sap/fe/base/BindingToolkit","sap/fe/base/jsx-runtime/jsx","sap/fe/core/buildingBlocks/templating/AttributeModel","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/helpers/TypeGuards","sap/ui/base/BindingParser","sap/ui/core/util/XMLPreprocessor","sap/ui/model/json/JSONModel","../TraceInfo"],function(e,t,n,i,o,s,r,a,l,c,u,d){"use strict";var f={};var p=a.isFunctionArray;var m=a.isContext;var g=r.Placement;var h=i.isUndefinedExpression;var b=i.isBindingToolkitExpression;var y=i.compileExpression;const x="sap.fe.core.buildingBlocks.templating.BuildingBlockTemplateProcessor";const C="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1";const $=new DOMParser;function w(e,t,n,i){const o=t[i];const s=o?.getObject();if(n.required===true&&(!o||s===null)){throw new Error(`${e}: Required metadataContext '${i}' is missing`)}else if(s){if(s.hasOwnProperty("$kind")&&s.$kind!==undefined&&n.expectedTypes!==undefined){if(!n.expectedTypes.includes(s.$kind)){throw new Error(`${e}: '${i}' must be '$kind' '${n.expectedTypes}' but is '${s.$kind}': ${o.getPath()}`)}}else if(s.hasOwnProperty("$Type")&&s.$Type!==undefined&&n.expectedAnnotationTypes){if(!n.expectedAnnotationTypes.includes(s.$Type)){throw new Error(`${e}: '${i}' must be '$Type' '${n.expectedAnnotationTypes}' but is '${s.$Type}': ${o.getPath()}`)}}}}function P(t,n,i,o){const s=n.metadataContexts&&Object.keys(n.metadataContexts)||[],r=n.properties&&Object.keys(n.properties)||[],a={};const l=o.getAttributeNames();for(const e of l){a[e]=true}s.forEach(function(e){const o=n.metadataContexts[e];w(t,i,o,e);delete a[e]});r.forEach(function(e){const i=n.properties[e];if(!o.hasAttribute(e)){if(i.required&&!i.hasOwnProperty("defaultValue")){throw new Error(`${t}: `+`Required property '${e}' is missing`)}}else{delete a[e]}});Object.keys(a).forEach(function(n){if(!n.includes(":")&&!n.startsWith("xmlns")){e.warning(`Unchecked parameter: ${t}: ${n}`,undefined,x)}})}f.validateMacroSignature=P;const A="sap.ui.core.Element";const k="sap.ui.model.Context";f.SAP_UI_MODEL_CONTEXT=k;function T(e){const t={class:{type:"string",isPublic:true}};const n={dependents:{type:A,slot:"dependents",isPublic:true},customData:{type:A,slot:"customData",isPublic:true},layoutData:{type:A,slot:"layoutData",isPublic:true},...e.aggregations};const i={};for(const n of Object.keys(e.properties)){const o=e.properties[n].type;if(o!==k){t[n]=e.properties[n]}if([k,"object","array"].includes(o)){i[n]=e.properties[n]}}return{...e,properties:t,metadataContexts:i,aggregations:n}}function E(e,t){let n;if(t&&t.startsWith("/")){n=t}else{let i=e.currentContextPath.getPath();if(!i.endsWith("/")){i+="/"}n=i+t}return{model:"metaModel",path:n}}function v(e,t,n){let i;if(n.startsWith("/uid--")&&!e.models.converterContext.getProperty(n)){const t=_(n);e.models.converterContext.setProperty(n,t);i={model:"converterContext",path:n}}else if(t==="metaPath"&&e.currentContextPath||t==="contextPath"){i=E(e,n)}else if(n&&n.startsWith("/")){i={model:"metaModel",path:n}}else{i={model:"metaModel",path:e.bindingContexts.entitySet?e.bindingContexts.entitySet.getPath(n):n}}return i}function N(e,t,n,i,o,s){let r;if(!o&&t.hasAttribute(n)){const i=t.getAttribute(n);r=l.complexParser(i);if(!r){r=v(e,n,i)}}else if(e.bindingContexts.hasOwnProperty(n)){r={model:n,path:""}}else if(s){try{if(i.getContext(`${n}>`)){r={model:n,path:""}}}catch(e){return undefined}}return r}async function O(n,i,o,s){const r=n.properties;const a=Object.keys(r);const l={};for(const n of a){if(r[n].type==="object"){l[n]=r[n].defaultValue&&t(r[n].defaultValue)}else{l[n]=r[n].defaultValue}if(i.hasAttribute(n)&&o&&r[n].isPublic!==true){e.error(`Property ${n} was ignored as it is not intended for public usage`)}else if(i.hasAttribute(n)){await s.visitAttribute(i,i.attributes.getNamedItem(n));let e=i.getAttribute(n);if(e!==undefined&&e!==null){if(typeof e==="string"&&!e.startsWith("{")){switch(r[n].type){case"boolean":e=e==="true";break;case"number":e=Number(e);break}}e=e===null?undefined:e;l[n]=e}}}return l}function B(e,t,n,i,o,s,r){t.currentContextPath=t.bindingContexts.contextPath;const a={};const l=e.metadataContexts;const c=Object.keys(l);const u=c.indexOf("contextPath");if(u!==-1){const e=c.splice(u,1);c.splice(0,0,e[0])}for(const u of c){const c=r[u];if(c!==undefined&&typeof c==="object"&&Object.keys(c).length>0){delete e.metadataContexts[u];continue}const d=i&&l[u].isPublic===false&&n.hasAttribute(u);const f=N(t,n,u,o,d,e.isOpen??false);if(f){f.name=u;W(s,o,f);if((u==="entitySet"||u==="contextPath")&&!t.bindingContexts.hasOwnProperty(u)){t.bindingContexts[u]=s[u]}if(u==="contextPath"){t.currentContextPath=s[u]}if(s[u]!==undefined){r[u]=s[u]}else if(typeof r[u]==="string"){delete e.metadataContexts[u]}}else{a[u]=true}}return a}function j(t,n){const i={};if(t&&t.children.length>0){const o=t.children;for(let t=0;t<o.length;t++){const s=o[t];let r=s.getAttribute("key")||s.getAttribute("id");if(r){r=`InlineXML_${r}`;s.setAttribute("key",r);let e={key:r,position:{placement:s.getAttribute("placement")||g.After,anchor:s.getAttribute("anchor")||undefined},type:"Slot"};if(n){e=n(s,e)}i[e.key]=e}else if(s.tagName!=="slot"){e.error(`The aggregation ${s.nodeName} is missing a Key attribute. It is not displayed`)}}}return i}function S(e){const t=e.children;const n=[];const i={};for(const t of e.getAttributeNames()){i[t]=e.getAttribute(t)}if(t.length>0){const e=Object.keys(t).map(e=>t[e].localName);const o=e.length!==new Set(e).size;for(const e of t){if(o){n.push(S(e))}else{i[e.localName]=S(e)}}if(o){return n}}return i}async function M(e,t,n,i,o){const s={};if(e.firstElementChild!==null){let r=e.firstElementChild;while(r!==null){if(r.namespaceURI===C){const e=r.parentNode;if(e){const n=Array.from(e.children).indexOf(r);await t.visitNode(r);r=e.children[n]?e.children[n]:null}else{r=r.nextElementSibling}}else{const e=r.localName;let t=e;if(t[0].toUpperCase()===t[0]){t=n.defaultAggregation||""}const i=n.aggregations[t];if(i!==undefined&&!i.slot){const e=j(r,i.processAggregations);o[t]=e;for(const t in e){n.aggregations[t]=e[t]}}r=r.nextElementSibling}}r=e.firstElementChild;while(r!==null){const a=r.nextElementSibling;const l=r.localName;let c=l;if(c[0].toUpperCase()===c[0]){c=n.defaultAggregation||""}if(Object.keys(n.aggregations).includes(c)&&(!i||n.aggregations[c].isPublic===true)){const i=n.aggregations[c];if(!i.slot&&r!==null&&r.children.length>0){await t.visitNode(r);let n=r.firstElementChild;while(n){const t=n.nextElementSibling;if(!i.hasVirtualNode){const t=document.createElementNS(e.namespaceURI,n.getAttribute("key"));t.appendChild(n);s[n.getAttribute("key")]=t}else{s[n.getAttribute("key")]=n}n.removeAttribute("key");n=t}}else if(i.slot){await t.visitNode(r);if(c!==l){if(!s[c]){const t=document.createElementNS(e.namespaceURI,c);s[c]=t}s[c].appendChild(r.cloneNode(true))}else{s[c]=r.cloneNode(true)}}}else if(Object.keys(n.properties).includes(c)){await t.visitNode(r);if(n.properties[c].type==="object"){const e=S(r);o[c]=e}else if(n.properties[c].type==="array"){if(r!==null&&r.children.length>0){const e=r.children;const t=[];for(let n=0;n<e.length;n++){const i=e[n];const o={};const s=i.getAttributeNames();for(const e of s){o[e]=i.getAttribute(e)}t.push(o)}o[c]=t}}}r=a}}return s}function I(e,t,n){let i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(Object.keys(e).length>0){Object.keys(e).forEach(function(o){const s=e[o];if(n!==null&&n!==undefined&&s){const e=s.firstElementChild;if(!["dependents","customData","layoutData"].includes(o)){const i=t[o]!==undefined&&t[o].slot||o;const s=n.querySelector(`slot[name='${i}']`);if(s!==null){const t=L(n,o,e);s.replaceWith(...t.children)}}else if(i&&e!==null){const i=t[o]!==undefined&&t[o].slot||o;const s=n.querySelector(`slot[name='${i}']`);const r=L(n,o,e);if(s!==null){s.replaceWith(...r.children)}else{n.appendChild(r)}}}})}}function L(e,t,n){const i=document.createElementNS(e.namespaceURI,t.replace(/:/gi,"_"));while(n){const e=n.nextElementSibling;i.appendChild(n);n=e}return i}async function D(t,n,i){let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const a=T(t.metadata);const l=a.fragment??`${a.namespace??a.publicNamespace}.${a.xmlTag??a.name}`;const c={};const f=i.getSettings();f.models.converterContext??=new u;if(!f[l]){f[l]={}}const p=await O(a,n,r,i);const g=Object.keys(p);const h=B(a,f,n,r,i,c,p);try{const u=await M(n,i,a,r,p);let g={};if(f.models.viewData){g=f.models.viewData.getProperty("/controlConfiguration")}let h=p;Object.keys(p).forEach(e=>{let n=p[e];const i=t?.metadata?.properties[e];if(i?.validate){n=i.validate(n)||n}if(n?.isA?.(k)&&!n.getModel().isA("sap.ui.model.odata.v4.ODataMetaModel")){p[e]=n.getObject()}});p.isPublic=r;const b=new t({...p,...u},g,f);h=b.getProperties();Object.keys(a.metadataContexts).forEach(function(e){if(h.hasOwnProperty(e)){const t=h[e];if(m(t)){c[e]=t}else if(typeof t==="object"){const n=F(t);f.models.converterContext.setProperty(n,t);const i=f.models.converterContext.createBindingContext(n);_(n);c[e]=i}}});const y=new s(n,h,t);c["this"]=y.createBindingContext("/");let x;const C=n?.getAttribute("core:require")||undefined;if(d.isTraceInfoActive()){const e=d.traceMacroCalls(l,a,c,n,i);if(e?.macroInfo){x=f["_macroInfo"];f["_macroInfo"]=e.macroInfo}}P(l,a,c,n);const $=i.with(c,a.isOpen!==undefined?!a.isOpen:true);const w=n.parentNode;let A;let T;if(w){A=Array.from(w.children).indexOf(n);if(a.fragment){T=$.insertFragment(l,n)}else{const i=Object.keys(q);let s;if(b.getRuntimeBuildingBlockTemplate){s=await o.renderAsXML(async()=>b.getRuntimeBuildingBlockTemplate(n))}else{s=await o.renderAsXML(async()=>b.getTemplate(n))}if(t.isRuntime){for(const e in q){if(!i.includes(e)){const t=_(e);f.models.converterContext.setProperty(e,t)}}}let r="";if(s){let t=false;let i=G(s,true);for(const e of i){const n=document.createNodeIterator(e,NodeFilter.SHOW_TEXT);let i=n.nextNode();if(e.localName==="parsererror"){t=true}while(i){if(i.textContent&&i.textContent.trim().length>0){r=i.textContent}i=n.nextNode()}}if(t){e.error(`Error while processing building block ${a.xmlTag||a.name}`,r);i=await H(async()=>{let e;if(b.getRuntimeBuildingBlockTemplate){e=await o.renderAsXML(async()=>b.getRuntimeBuildingBlockTemplate(n))}else{e=await o.renderAsXML(async()=>b.getTemplate(n))}return G(e??"",true)})}else if(r.length>0){e.error(`Error while processing building block ${a.xmlTag||a.name}`);const t=X([`Error while processing building block ${a.xmlTag||a.name}`,`Trailing text was found in the XML: ${r}`],i.map(e=>e.outerHTML).join("\n"));i=G(t,true)}n.replaceWith(...i);const l=i.map(async e=>{I(u,a.aggregations,e,false);return $.visitNode(e)});T=Promise.all(l)}else{n.remove();T=Promise.resolve()}}await T;const i=w.children[A];I(u,a.aggregations,i,true);if(i!==undefined){const e=i.querySelectorAll("slot");e.forEach(function(e){e.remove()});if(C){let e=i.getAttributeNS("sap.ui.core","require");if(e){e=e.substring(0,e.length-1)+","+C.substring(1)}else{e=C}i.setAttributeNS("sap.ui.core","core:require",e)}if(p.class&&!t.isRuntime){i.classList.add(p.class)}}}if(x){f["_macroInfo"]=x}else{delete f["_macroInfo"]}}catch(t){const i={initialProperties:{},resolvedProperties:{},missingContexts:h};for(const e of g){const t=p[e];if(m(t)){i.initialProperties[e]={path:t.getPath(),value:t.getObject()}}else{i.initialProperties[e]=t}}for(const e in p){const t=p[e];if(!g.includes(e)){if(m(t)){i.resolvedProperties[e]={path:t.getPath(),value:t.getObject()}}else{i.resolvedProperties[e]=t}}}e.error(t);const o=X([`Error while processing building block ${a.name}`],n.outerHTML,i,t.stack);const s=G(o,true);n.replaceWith(...s)}}function W(e,t,n){const i=n.name||n.model||undefined;if(e[i]){return}try{let o=n.path;if(n.model!==null){o=`${n.model}>${o}`}const s=t.getSettings();if(n.model==="converterContext"&&n.path.length>0){e[i]=s.models[n.model].getContext(n.path)}else if(!s.bindingContexts[n.model]&&s.models[n.model]){e[i]=s.models[n.model].getContext(n.path)}else{e[i]=t.getContext(o)}}catch(e){}}function V(e){if(e.metadata.namespace!==undefined){c.plugIn(async(t,n)=>D(e,t,n),e.metadata.namespace,e.metadata.xmlTag||e.metadata.name)}if(e.metadata.publicNamespace!==undefined){c.plugIn(async(t,n)=>D(e,t,n,true),e.metadata.publicNamespace,e.metadata.xmlTag||e.metadata.name)}}f.registerBuildingBlock=V;function R(e){if(e.metadata.namespace!==undefined){c.plugIn(null,e.metadata.namespace,e.metadata.xmlTag||e.metadata.name)}if(e.metadata.publicNamespace!==undefined){c.plugIn(null,e.metadata.publicNamespace,e.metadata.xmlTag||e.metadata.name)}}f.unregisterBuildingBlock=R;function X(e,t,n,i){const o=e.map(e=>K`<m:Label text="${J(e)}"/>`);let s="";if(i){const e=btoa(`<pre>${i}</pre>`);s=K`<m:FormattedText htmlText="{= BBF.base64Decode('${e}') }" />`}let r="";if(n){r=K`<m:VBox>
						<m:Label text="Trace Info"/>
						<code:CodeEditor type="json"  value="${`{= BBF.base64Decode('${btoa(JSON.stringify(n,null,4))}') }`}" height="300px" />
					</m:VBox>`}return K`<controls:FormElementWrapper xmlns:controls="sap.fe.core.controls">
					<m:VBox xmlns:m="sap.m" xmlns:code="sap.ui.codeeditor" core:require="{BBF:'sap/fe/core/buildingBlocks/templating/BuildingBlockFormatter'}">
					${o}
					${s}
						<grid:CSSGrid gridTemplateRows="fr" gridTemplateColumns="repeat(2,1fr)" gridGap="1rem" xmlns:grid="sap.ui.layout.cssgrid" >
							<m:VBox>
								<m:Label text="How the building block was called"/>
								<code:CodeEditor type="xml" value="${`{= BBF.base64Decode('${btoa(t.replaceAll("&gt;",">"))}') }`}" height="300px" />
							</m:VBox>
							${r}
						</grid:CSSGrid>
					</m:VBox>
				</controls:FormElementWrapper>`}const q={};function F(e){const t=`/uid--${n()}`;q[t]=e;return t}f.storeObjectValue=F;function _(e){const t=q[e];delete q[e];return t}let U=false;const H=async function(e){U=true;let t;try{t=e()}finally{U=false}return t};function G(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(t){e=`<template\n\t\t\t\t\t\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\t\t\t\t\t\txmlns:m="sap.m"\n\t\t\t\t\t\txmlns:macros="sap.fe.macros"\n\t\t\t\t\t\txmlns:core="sap.ui.core"\n\t\t\t\t\t\txmlns:mdc="sap.ui.mdc"\n\t\t\t\t\t\txmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">${e}</template>`}const n=$.parseFromString(e,"text/xml");let i=n.firstElementChild;while(i?.localName==="template"){i=i.firstElementChild}const o=i?.parentElement?i?.parentElement.children:[i];return Array.from(o)}f.parseXMLString=G;function J(e){return e?.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}f.escapeXMLAttributeValue=J;function z(e){const t=G(e,true);if(t?.length>0&&t[0]?.localName==="parsererror"){const n=t[0].innerText||t[0].innerHTML;return X([n.split("\n")[0]],e)}else{return e}}const K=function(e){let t="";let n;for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++){o[s-1]=arguments[s]}for(n=0;n<o.length;n++){t+=e[n];const i=o[n];if(Array.isArray(i)&&i.length>0&&typeof i[0]==="string"){t+=i.flat(5).join("\n").trim()}else if(p(i)){t+=i.map(e=>e()).join("\n")}else if(b(i)){const e=y(i);t+=J(e)}else if(typeof i==="undefined"){t+="{this>undefinedValue}"}else if(typeof i==="function"){t+=i()}else if(typeof i==="object"&&i!==null){if(m(i)){t+=i.getPath()}else{const e=F(i);t+=`${e}`}}else if(i&&typeof i==="string"&&!i.startsWith("<")&&!i.startsWith("&lt;")){t+=J(i)}else{t+=i}}t+=e[n];t=t.trim();if(U){return z(t)}return t};f.xml=K;const Q=function(e,t){if(e){return t}else{return""}};f.addConditionallyToXML=Q;const Y=function(e,t){if(t!==undefined&&!h(t)){return()=>K`${e}="${t}"`}else{return()=>""}};f.addAttributeToXML=Y;return f},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/buildingBlocks/templating/BuildingBlockTemplatingBase", ["sap/base/util/deepClone","sap/base/util/merge","sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor","sap/fe/core/converters/ConverterContext","sap/fe/core/helpers/StableIdHelper","sap/fe/core/templating/DataModelPathHelper"],function(t,e,n,r,o,i){"use strict";var a={};var s=i.getTargetObjectPath;var c=o.generate;var u=n.unregisterBuildingBlock;var l=n.registerBuildingBlock;var f=n.addConditionallyToXML;var d=n.addAttributeToXML;function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function g(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t){var e=m(t,"string");return"symbol"==typeof e?e:e+""}function m(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}let h=function(){function n(n,o,i){this.isPublic=false;this.getConverterContext=function(n,o,i,a){const c=i.appComponent;const u=i.models.viewData?.getData();let l=Object.assign({},u);delete l.resourceModel;delete l.appComponent;l=t(l);let f={};const d=s(n.contextLocation??n);const p=n.contextLocation?.targetEntitySet?.name??n.targetEntitySet?.name;if(d===u?.contextPath||d===`/${u?.entitySet}`||p===u?.entitySet){f=l.controlConfiguration}l.controlConfiguration=e(f,a||{});return r.createConverterContextForMacro(n.startingEntitySet.name,i.models.metaModel,c?.getDiagnostics(),e,n.contextLocation,l)};Object.keys(n).forEach(t=>{this[t]=n[t]});this.resourceModel=i?.models?.["sap.fe.i18n"]}a=n;var o=n.prototype;o.createId=function t(){if(this.id){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++){n[r]=arguments[r]}return c([this.id,...n])}return undefined};o.getContentId=function t(e){return`${e}-content`};o.getTranslatedText=function t(e,n,r){return this.resourceModel?.getText(e,n,r)||e};o.getProperties=function t(){const e={};for(const t in this){if(this.hasOwnProperty(t)){e[t]=this[t]}}return e};n.register=function t(){l(this)};n.unregister=function t(){u(this)};o.addConditionally=function t(e,n){return f(e,n)};o.attr=function t(e,n){return d(e,n)};return g(n,null,[{key:"metadata",get:function(){return this.internalMetadata},set:function(t){this.internalMetadata=t}}])}();h.isRuntime=false;a=h;return a},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/buildingBlocks/templating/RuntimeBuildingBlock", ["sap/base/Log","sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor","sap/fe/core/buildingBlocks/templating/BuildingBlockTemplatingBase","sap/fe/core/buildingBlocks/templating/RuntimeBuildingBlockFragment","sap/fe/core/helpers/TypeGuards","sap/ui/core/Lib"],function(t,e,n,i,o,a){"use strict";var r={};var s=o.isContext;var l=i.storeRuntimeBlock;var u=e.xml;var c=e.registerBuildingBlock;function p(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,f(t,e)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}let B=function(e){function n(){return e.apply(this,arguments)||this}r=n;p(n,e);var i=n.prototype;i.getContent=function t(e,n,i){return i};n.register=function t(){c(this);l(this)};n.load=async function e(){if(this.metadata.libraries){try{await Promise.all(this.metadata.libraries.map(async t=>a.load({name:t})))}catch(e){const n=`Couldn't load building block ${this.metadata.name} please make sure the following libraries are available ${this.metadata.libraries.join(",")}`;t.error(n);throw new Error(n)}}return Promise.resolve(this)};i.getTemplate=function t(e){return""};i.getRuntimeBuildingBlockTemplate=function t(e){const n=this.constructor.metadata;const i=`${n.namespace??n.publicNamespace}.${n.name}`;const o=[];const a=[];const r=[];const l=[];for(const t in n.properties){let e=this[t];if(e!==undefined&&e!==null){if(s(e)){e=e.getPath()}if(n.properties[t].type==="function"){a.push(e);l.push(e);r.push(t)}else{o.push(u`feBB:${t}="${e}"`)}}}if(a.length>0){o.push(u`functionHolder="${a.join(";")}"`);o.push(u`feBB:functionStringInOrder="${l.join(",")}"`);o.push(u`feBB:propertiesAssignedToFunction="${r.join(",")}"`)}const c=this.getTemplate(e);return u`<feBB:RuntimeBuildingBlockFragment
					xmlns:core="sap.ui.core"
					xmlns:feBB="sap.fe.core.buildingBlocks.templating"
					fragmentName="${i}"
					id="${this.id}"
					type="FE_COMPONENTS"
					${o.length>0?o:""}
				>
				${this.addConditionally(c.length>0,`<feBB:fragmentXML>\n\t\t\t\t\t\t${c}\n\t\t\t\t\t</feBB:fragmentXML>`)}
				<feBB:dependents>
					<slot name="dependents"/>
				</feBB:dependents>
				<feBB:customDataHolder>
					<slot name="customData"/>
				</feBB:customDataHolder>
				<feBB:layoutData>
					<slot name="layoutData"/>
				</feBB:layoutData>
				</feBB:RuntimeBuildingBlockFragment>`};return n}(n);B.isRuntime=true;r=B;return r},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/buildingBlocks/templating/RuntimeBuildingBlockFragment", ["sap/fe/base/BindingToolkit","sap/fe/base/ClassSupport","sap/fe/base/HookSupport","sap/fe/base/jsx-runtime/jsx","sap/fe/core/CommonUtils","sap/m/Label","sap/ui/base/ManagedObject","sap/ui/core/Component","sap/ui/core/Fragment","sap/ui/model/json/JSONModel"],function(e,t,n,r,o,i,a,l,s,u){"use strict";var c,f,p,d,g,m,b,y,w,v,C,M,h;var D={};var O=n.initControllerExtensionHookHandlers;var j=t.event;var k=t.defineUI5Class;var z=t.aggregation;var H=e.resolveBindingString;function _(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function x(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,N(e,t)}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}function P(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer?(Object.defineProperty(e,t,i),null):i}function A(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let B=(c=k("sap.fe.core.buildingBlocks.templating.RuntimeBuildingBlockFragment"),f=j(),p=z({type:"sap.ui.core.Control"}),d=z({type:"sap.ui.core.Control[]",multiple:true}),g=z({type:"sap.ui.core.CustomData[]",multiple:true}),m=z({type:"sap.ui.core.LayoutData"}),c(b=(y=function(e){function t(){var t;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=e.call(this,...r)||this;_(t,"functionHolder",w,t);_(t,"fragmentXML",v,t);_(t,"dependents",C,t);_(t,"customDataHolder",M,t);_(t,"layoutData",h,t);return t}D=t;x(t,e);return t}(s),w=P(y.prototype,"functionHolder",[f],{configurable:true,enumerable:true,writable:true,initializer:null}),v=P(y.prototype,"fragmentXML",[p],{configurable:true,enumerable:true,writable:true,initializer:null}),C=P(y.prototype,"dependents",[d],{configurable:true,enumerable:true,writable:true,initializer:null}),M=P(y.prototype,"customDataHolder",[g],{configurable:true,enumerable:true,writable:true,initializer:null}),h=P(y.prototype,"layoutData",[m],{configurable:true,enumerable:true,writable:true,initializer:null}),y))||b);D=B;const E={};function L(e){E[`${e.metadata.namespace??e.metadata.publicNamespace}.${e.metadata.name}`]=e}D.storeRuntimeBlock=L;B.registerType("FE_COMPONENTS",{load:async function(e){let t;try{t=await E[e.fragmentName].load()}catch(t){e.loadErrorMessage=t}return t},init:function(e){if(e.loadErrorMessage){return new i({text:e.loadErrorMessage})}let t=e.fragmentContent;if(t===undefined){t=E[e.fragmentName]}if(t===undefined){throw new Error(`No building block class for runtime building block ${e.fragmentName} found`)}const n={};const s=e.customData?.[0]?.mProperties?.value?.["sap.fe.core.buildingBlocks.templating"]||{};delete e.customData;const c=e.functionHolder??[];delete e.functionHolder;const f=e.containingView.getController?.()?.getView?.()??e.containingView.getController?.()?.["_view"]??e.containingView;const p=l.getOwnerComponentFor(f);const d=o.getAppComponent(f);const g=d.getMetaModel();const m=p.getModel("_pageModel");const b=s.functionStringInOrder?.split(",");const y=s.propertiesAssignedToFunction?.split(",")??[];for(const e in t.metadata.properties){const r=t.metadata.properties[e];const o=m.createBindingContext(s[e]);if(o===null){let t=s[e];if(typeof t==="string"){if(r.bindable!==true){switch(r.type){case"boolean":t=t==="true";break;case"number":t=Number(t);break}}else{t=H(t,r.type)}}else if(r.type==="function"){const n=y.indexOf(e);if(n>-1){const e=b[n];const r=c?.find(t=>t[0]?._sapui_handlerName===e);if(r&&r.length>1){t=r[0].bind(r[1])}}}n[e]=t}else if(o.getObject()!==undefined&&e!=="contextPath"&&e!=="metaPath"){n[e]=o.getObject()}else{n[e]=g.createBindingContext(s[e])}}return a.runWithPreprocessors(()=>{const o=r.withContext({view:f,appComponent:d},()=>{const r={models:{"sap.fe.i18n":f.getModel("sap.fe.i18n"),converterContext:f.getModel("_pageModel")??new u},appComponent:d,isRuntimeInstantiation:true};const o=new t(n,{},r);O(o,f.getController());if(e.fragmentXML){if(e.dependents){for(const t of e.dependents){e.fragmentXML.addDependent(t)}delete e.dependents}if(e.customDataHolder){for(const t of e.customDataHolder){e.fragmentXML.addCustomData(t)}delete e.customDataHolder}if(e.layoutData){e.fragmentXML.setAggregation("layoutData",e.layoutData);delete e.layoutData}}return o.getContent?.(f,d,e.fragmentXML)});if(!this._bAsync){this._aContent=o}return o},{id:function(t){return e.containingView.createId(t)},settings:function(t){const n=this.getMetadata().getAllAssociations();for(const r of Object.keys(n)){if(t[r]!==undefined){if(n[r].multiple){const n=Array.isArray(t[r])?t[r]:[t[r]];t[r]=n.map(t=>typeof t==="string"?e.containingView.createId(t):t)}else{const n=t[r];t[r]=typeof n==="string"?e.containingView.createId(n):n}}}return t}})}});return D},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/BaseControllerExtension", ["sap/fe/base/ClassSupport","sap/ui/core/mvc/ControllerExtension"],function(t,e){"use strict";var r,o;var n={};var c=t.defineUI5Class;function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}let a=(r=c("sap.fe.core.controllerextensions.BaseControllerExtension"),r(o=function(t){function e(){var e;e=t.call(this)||this;e.init();return e}n=e;s(e,t);var r=e.prototype;r.getInterface=function e(){var r=this;const o=t.prototype.getInterface.call(this);const n=this.getMetadata();const c=n.getAllMethods();const s={};for(const t in c){const e=c[t];if(e.overrideExecution&&(e.overrideExecution==="AfterAsync"||e.overrideExecution==="BeforeAsync")){s[t]=[o[t]];Object.defineProperty(o,t,{configurable:true,set:e=>s[t].push(e),get:()=>async function(){const o=s[t];if(e.overrideExecution==="BeforeAsync"){o.reverse()}for(var n=arguments.length,c=new Array(n),i=0;i<n;i++){c[i]=arguments[i]}for(const t of o){await t.apply(r,c)}}})}}return o};return e}(e))||o);n=a;return n},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/BusyLocker", ["sap/base/Log"],function(e){"use strict";const n=30,t={},u={getId:function(){return"BusyLocker.ReferenceDummy"},setBusy:function(n){e.info(`setBusy(${n}) triggered on dummy reference`)}};function o(e,n){return e.getId()+(n||"/busy")}function i(e,n){return o(e,n)in t}function c(n,i){if(!n||!n.getId){e.warning("No reference for BusyLocker, using dummy reference");n=u}i=i||"/busy";const c=o(n,i);if(!(c in t)){t[c]={id:c,path:i,reference:n,count:0}}return t[c]}function r(e){delete t[e.id]}function s(t){const u=t.reference;const o=t.count!==0;if(u.isA&&u.isA("sap.ui.model.Model")){u.setProperty(t.path,o,undefined,true)}else if(u.setBusy){u.setBusy(o)}clearTimeout(t.timeout);if(o){t.timeout=setTimeout(function(){e.error(`busy lock for ${t.id} with value ${t.count} timed out after ${n} seconds!`)},n*1e3)}else{r(t)}return o}function f(n,t){if(t===0){n.count=0;e.info(`busy lock count '${n.id}' was reset to 0`)}else{n.count+=t;e.info(`busy lock count '${n.id}' is ${n.count}`)}}const d={lock:function(e,n){return this._updateLock(e,n,1)},unlock:function(e,n){return this._updateLock(e,n,-1)},isLocked:function(e,n){return i(e,n)},_updateLock:function(e,n,t){const u=c(e,n);f(u,t);return s(u)}};return d},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/CollaborativeDraft", ["sap/fe/base/ClassSupport","sap/ui/core/Element","../templating/UIFormatters","./BaseControllerExtension","./collaboration/CollaborationCommon"],function(t,e,i,n,o){"use strict";var s,a;var r={};var c=o.CollaborationFieldGroupPrefix;var l=o.Activity;var u=i.FieldEditMode;var f=t.defineUI5Class;function d(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,g(t,e)}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}let h=(s=f("sap.fe.core.controllerextensions.CollaborationDraft"),s(a=function(t){function i(){return t.apply(this,arguments)||this}r=i;d(i,t);var n=i.prototype;n.getCollaborativeDraftService=function t(){this.collaborativeDraftService=this.collaborativeDraftService??this.base.getAppComponent().getCollaborativeDraftService();return this.collaborativeDraftService};n.handleContentFocusIn=function t(i){let n=i.getSource();if(n.isA("sap.m.Tokenizer")){n=n.getParent()?.getParent()}let o=false;if(i.getParameter){o=!n.getDomRef()?.contains(i.getParameter("relatedTarget"))}if(n.isA("sap.ui.mdc.MultiValueField")||o){const t=this.getLastFocusId();if(t&&t!==n.getId()&&this.getLastFocusFieldGroups()===n.getFieldGroupIds().join(",")){const i=e.getElementById(t);this?.sendFocusOutMessage(i)}this.setLastFocusInformation(n);this.sendFocusInMessage(n)}};n.handleContentFocusOut=function t(i){let n=i.getSource();if(n.isA("sap.m.Tokenizer")){n=n.getParent()?.getParent()}if(!n.isA("sap.ui.mdc.MultiValueField")){while(n&&!n?.isA("sap.fe.macros.field.FieldAPI")){n=n?.getParent()}if(!n)return}const o=i.getParameter("fieldGroupIds");if(o.some(t=>t.startsWith(c))){const t=i.getSource();let o=e.getActiveElement();while(o&&o!==t){o=o.getParent()}if(o!==t){this.sendFocusOutMessage(n);if(this.getLastFocusId()===n.getId()){this.setLastFocusInformation(undefined)}}}};n.getLastFocusId=function t(){return this.lastFocusId};n.getLastFocusFieldGroups=function t(){return this.lastFocusFieldGroups};n.setLastFocusInformation=function t(e){this.lastFocusId=e?.getId();this.lastFocusFieldGroups=e?.getFieldGroupIds().join(",")};n.sendFocusInMessage=function t(e){const i=this.getCollaborationPath(e);if(i){this.send({action:l.Lock,content:i})}};n.sendFocusOutMessage=function t(e){if(!e){return}const i=this.getCollaborationPath(e);if(i){this.send({action:l.Unlock,content:i})}};n.getCollaborationPath=function t(e){const i=e?.getBindingContext();if(!i){return}if(e.isA("sap.fe.macros.field.FieldAPI")){if(!e.getMainPropertyRelativePath()){return undefined}const t=e.content;if(![u.Editable,u.EditableDisplay,u.EditableReadOnly].includes(t?.getProperty("editMode"))){return undefined}return`${i.getPath()}/${e.getMainPropertyRelativePath()}`}else if(e.isA("sap.ui.mdc.MultiValueField")){const t=e.getBindingInfo("items").template.getBindingPath("key");return`${i.getPath()}/${e.getBindingInfo("items").path}/${t}`}};n.send=function t(e){this.getCollaborativeDraftService().send(this.getView(),e)};n.isConnected=function t(){return this.getCollaborativeDraftService().isConnected(this.getView())};n.connect=async function t(){return this.getCollaborativeDraftService().connect(this.getView())};n.disconnect=function t(){return this.getCollaborativeDraftService().disconnect(this.getView())};n.isCollaborationEnabled=function t(){return this.getCollaborativeDraftService().isCollaborationEnabled(this.getView())};n.retainAsyncMessages=function t(e){return this.getCollaborativeDraftService().retainAsyncMessages(this.getView(),e)};n.releaseAsyncMessages=function t(e){return this.getCollaborativeDraftService().releaseAsyncMessages(this.getView(),e)};n.updateLocksForContextPath=function t(e,i){return this.getCollaborativeDraftService().updateLocksForContextPath(this.getView(),e,i)};return i}(n))||a);r=h;return r},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/ContextSharing", ["sap/fe/base/ClassSupport","sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution"],function(e,t,r){"use strict";var i,n,o,c,a;var u={};var p=e.publicExtension;var l=e.extensible;var s=e.defineUI5Class;function f(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,v(e,t)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function b(e,t,r,i,n){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}let y=(i=s("sap.fe.core.controllerextensions.ContextSharing"),n=p(),o=l(r.After),i(c=(a=function(e){function t(){return e.apply(this,arguments)||this}u=t;f(t,e);var r=t.prototype;r.getContext=function e(t){return t};return t}(t),b(a.prototype,"getContext",[n,o],Object.getOwnPropertyDescriptor(a.prototype,"getContext"),a.prototype),a))||c);u=y;return u},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/EditFlow", ["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/CommonUtils","sap/fe/core/controllerextensions/BaseControllerExtension","sap/fe/core/controllerextensions/BusyLocker","sap/fe/core/controllerextensions/Feedback","sap/fe/core/controllerextensions/collaboration/CollaborationCommon","sap/fe/core/controllerextensions/editFlow/TransactionHelper","sap/fe/core/controllerextensions/editFlow/draft","sap/fe/core/controllerextensions/editFlow/editFlowConstants","sap/fe/core/controllerextensions/editFlow/sticky","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/EditState","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/ResourceModelHelper","sap/fe/core/helpers/SemanticKeyHelper","sap/fe/core/library","sap/m/Button","sap/m/Dialog","sap/m/MessageToast","sap/m/Text","sap/ui/core/Element","sap/ui/core/Lib","sap/ui/core/Messaging","sap/ui/core/message/Message","sap/ui/core/message/MessageType","sap/ui/core/mvc/OverrideExecution","sap/ui/model/Filter","sap/ui/model/Sorter","../ActionRuntime","../controls/Recommendations/ConfirmRecommendationDialog","../converters/ManifestSettings","../helpers/TypeGuards","./routing/NavigationReason"],function(e,t,n,i,o,s,a,r,c,l,g,d,f,u,h,p,y,m,C,w,M,D,b,P,v,E,S,A,x,I,k,T,R,_){"use strict";var O,F,B,H,V,N,j,L,G,$,q,K,U,W,z,J,Q,X,Y,Z,ee,te,ne,ie,oe,se,ae,re,ce,le,ge,de,fe,ue,he,pe,ye,me,Ce,we,Me,De,be,Pe,ve;var Ee=R.isFulfilled;var Se=T.CreationMode;var Ae=k.RecommendationDialogDecision;var xe=k.ConfirmRecommendationDialog;var Ie=h.getResourceModel;var ke=d.getInvolvedDataModelObjects;var Te=d.convertTypes;var Re=a.shareObject;var _e=a.Activity;var Oe=s.triggerConfiguredSurvey;var Fe=s.TriggerType;var Be=s.StandardActions;var He=t.publicExtension;var Ve=t.finalExtension;var Ne=t.extensible;var je=t.defineUI5Class;function Le(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ge(e,t)}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ge(e,t)}function $e(e,t,n,i,o){var s={};return Object.keys(i).forEach(function(e){s[e]=i[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},s),o&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(o):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}const qe=y.ProgrammingModel,Ke=y.Constants,Ue=y.DraftStatus,We=y.EditMode,ze=y.StartupMode;let Je=(O=je("sap.fe.core.controllerextensions.EditFlow"),F=He(),B=Ve(),H=He(),V=Ve(),N=He(),j=Ve(),L=He(),G=Ne(S.After),$=He(),q=Ne("AfterAsync"),K=He(),U=Ne("AfterAsync"),W=He(),z=Ne(S.After),J=He(),Q=Ne(S.After),X=He(),Y=Ne(S.After),Z=He(),ee=Ne(S.After),te=He(),ne=Ne(S.After),ie=He(),oe=Ne(S.After),se=He(),ae=Ne(S.After),re=He(),ce=Ve(),le=He(),ge=Ve(),de=He(),fe=Ve(),ue=He(),he=Ve(),pe=He(),ye=Ve(),me=He(),Ce=Ne(S.After),we=He(),Me=Ne(S.Instead),De=He(),be=Ve(),O(Pe=(ve=function(t){function i(){var i;for(var o=arguments.length,s=new Array(o),a=0;a<o;a++){s[a]=arguments[a]}i=t.call(this,...s)||this;i.syncTasks=Promise.resolve();i.handleSideEffects=async(t,o)=>{try{const e=i.getView().getBindingContext();const s=await o;await s.created();if(!n.hasTransientContext(t)&&e){i.getAppComponent().getSideEffectsService().requestSideEffectsForNavigationProperty(t.getPath(),e)}}catch(t){e.error("Error while creating the document",t)}};i.createCustomValidationMessages=(e,t)=>{const n=t.getCreationRow().data("customValidationFunction");const o=t.getBindingContext("internal")?.getProperty("creationRowCustomValidity");const s=[];let a;let r;const c=P.getMessageModel().getData().filter(e=>e.getCode()===n);P.removeMessages(c);e.forEach(e=>{if(e.messageTarget){a=D.getElementById(o[e.messageTarget].fieldId);r=`${a.getBindingContext()?.getPath()}/${a.getBindingPath("value")}`;if(!P.getMessageModel().getData().filter(e=>e.getTargets().some(e=>e===r)).length){P.addMessages(new v({message:e.messageText,processor:i.getView().getModel(),type:E.Error,code:n,technical:false,persistent:false,target:r}))}const t=P.getMessageModel().getData().filter(e=>e.getTargets().some(e=>e===r));t[0].addControlId(o[e.messageTarget].fieldId)}else{s.push({code:n,text:e.messageText,persistent:true,type:E.Error})}});if(s.length){i.getMessageHandler().showMessageDialog({customMessages:s})}};i.resolveCreationMode=(e,t,n)=>{if(e!==Se.NewPage){return e}else{const e=t.getModel().getMetaModel();const o=i.getProgrammingModel(t);if(!t.isRelative()){const n=ke(e.getMetaContext(t.getPath()));const i=n.targetEntitySet,s=(o===qe.Draft?i?.annotations.Common?.DraftRoot:i?.annotations.Session?.StickySessionSupported)?.NewAction?.toString();if(s&&n.targetEntityType.actions[s].parameters.length>1){return Se.Deferred}}const s=i.getTransactionHelper().getCreationParameters(t,n,i.getAppComponent());if(s.length){return Se.Deferred}return Se.Async}};return i}Le(i,t);var s=i.prototype;s.getInterface=function e(){return t.prototype.getInterface.call(this)};s.getAppComponent=function e(){return this.base.getAppComponent()};s.editDocument=async function t(i){const o=this.getTransactionHelper();const s=this._getRootViewController();const a=i.getModel();const r=this.getView().getViewData();const c=this.getProgrammingModel(i);let l=i;const g=this.base.getView();const d="editGroup";const f=this.getMessageHandler().registerToHoldMessages();try{if(r?.viewLevel>1){if(c===qe.Draft||c===qe.Sticky){l=await n.createRootContext(c,g,this.getAppComponent())}}await this.base.editFlow.onBeforeEdit({context:l});let e=this._isFclEnabled()?s.getRightmostContext():i;if(e===undefined||c===qe.Draft&&this.getProgrammingModel(e)!==qe.Draft){e=i}const t=o.editDocument(l,this.base.getView(),this.getAppComponent(),this.getMessageHandler(),d);const h={rootSiblingPathPromise:t};this._setStickySessionInternalProperties(c,a);let p;const y=e!==l||r?.viewLevel>1;if(y){p=this._computeSiblingInformation(l,e,c,true,h,d)}i.getModel().submitBatch(d);let m=await p;const C=await t;let w=C;if(y&&w){if(m===undefined){m=await this._computeSiblingInformation(l,e,c,true,h,"$auto")}w=this._getNavigationTargetForEdit(i,C,m)}else{this._updatePathsInHistory([])}let M=false;if(C){await this.base.editFlow.onAfterEdit({context:w});await this._handleNewContext(w,{editable:true,recreateContext:false,forceFocus:true});if(c===qe.Sticky){let e;if(this._isFclEnabled()){e=C?.getModel().getKeepAliveContext(C.getPath())}else{e=C}await this.handleStickyOn(e)}else if(u.isCollaborationDraftSupported(a.getMetaModel())){Re(C)}M=true;this.setEditMode(We.Editable,false);this.setDocumentModified(false)}this.getMessageHandler().showMessageDialog({unHoldKey:f,overrideUIDecision:M});return w}catch(t){this.getMessageHandler().showMessageDialog({unHoldKey:f});e.error("Error while editing the document",t);return Promise.reject(t)}};s.requestSideEffectsOnDelete=function e(t,i){if(!t||!i||n.hasTransientContext(t)){return}const o=this.getAppComponent().getSideEffectsService();o.requestSideEffectsForNavigationProperty(t.getPath(),i);const s=u.getMessagesPath(t.getModel().getMetaModel(),i.getPath());if(s&&this.getTransactionHelper().isListBindingHierarchical(t)){o.requestSideEffects([s],i)}};s.deleteMultipleDocuments=async function t(n,i){i.beforeDeleteCallBack=this.base.editFlow.onBeforeDelete;i.requestSideEffects=i.requestSideEffects!==false;const s=this.getGlobalUIModel();const a=this.getView().byId(i.controlId)??D.getElementById(i.controlId);let r=[];if(a?.isA("sap.ui.mdc.Table")){r=n.filter(e=>e.isInactive())}if(!a){throw new Error("parameter controlId missing or incorrect")}else{i.parentControl=a}const c=a.getBinding("items")||a.getRowBinding();i.bFindActiveContexts=true;o.lock(s);try{if(this.getProgrammingModel(i?.selectedContexts?.[0]??n[0])===qe.Sticky){this.setDocumentModified(true)}await this.deleteDocumentTransaction(n,i);let e;if(a.isA("sap.ui.mdc.Table")){a.clearSelection()}const t=this.getView().getBindingContext();if(c.isRoot()){e=this.getTransactionHelper().refreshListBinding(c,this.getAppComponent())}else if(i.requestSideEffects){this.requestSideEffectsOnDelete(c,t)}if(!this.getAppComponent()._isFclEnabled()){f.setEditStateDirty()}const o=this.base.recommendations.isRecommendationEnabled();if(o){this.base.recommendations.ignoreRecommendationForContexts(n)}await this.base.editFlow.onAfterDelete({contexts:n});if(a.isA("sap.ui.mdc.Table")){const e=a.getParent();if(e?.tableDefinition?.control?.creationMode===Se.InlineCreationRows&&r.length>0){e.removeEmptyRowsMessages(r);await e.setUpEmptyRows(a,false)}}this._sendActivity(_e.Delete,n);return await e}catch(t){if(c.isRoot()){await this.getTransactionHelper().refreshListBinding(c,this.getAppComponent())}else if(i.requestSideEffects){const e=this.getView().getBindingContext();this.requestSideEffectsOnDelete(c,e)}e.error("Error while deleting the document(s)",t)}finally{o.unlock(s)}};s.updateDocument=async function t(n,i){const o=this.getView().getBindingContext();const s=this.getProgrammingModel(n)===qe.Draft;this.getMessageHandler().removeTransitionMessages();const a=this.getMessageHandler().registerToHoldMessages();return this.syncTask(async()=>{if(o){this.setDocumentModified(true);if(!this._isFclEnabled()){f.setEditStateDirty()}if(s){this.setDraftStatus(Ue.Saving)}}try{await i;const e=this.getView().getBindingContext();if(!s||!e||e!==o){return}const t=e.getModel().getMetaModel();const n=t.getMetaContext(e.getPath()).getObject("@sapui.name");const a=p.getSemanticKeys(t,n);if(a?.length&&e.getProperty("IsActiveEntity")===false&&e.getProperty("HasActiveEntity")===true){const t=this._getSemanticMapping();const n=t?.semanticPath,i=p.getSemanticPath(e,true);if(n&&n!==i){await this._handleNewContext(e,{editable:true,recreateContext:false})}}this.setDraftStatus(Ue.Saved)}catch(t){e.error("Error while updating the document",t);if(s&&o){this.setDraftStatus(Ue.Clear)}}finally{await this.getMessageHandler().showMessages({unHoldKey:a})}})};s.getParentContextFromSelection=function e(t){if(t&&t.length>1){throw new Error(`Cannot create a new document in a TreeTable with ${t.length} parents`)}return t?.length===1?t[0]:undefined};s.createDocument=async function e(t,n){let i;let o;const s=function(e,t){const n=e.getView().getModel();if(!n){return undefined}return n.bindList(t)};if(typeof t==="object"&&t.isA&&t.isA("sap.fe.core.IRowBindingInterface")){i=t.getRowBinding();t=i}if(n.creationMode!==Se.External){if(typeof t==="string"){const e=s(this,t);if(!e){return}else{i=e}delete n.createAtEnd}else if(typeof t==="object"&&t.isA&&t.isA("sap.ui.model.odata.v4.ODataListBinding")){i=t}else{throw new Error("Binding object or path expected")}if(this.getTransactionHelper().isListBindingHierarchical(i)){o=this.getParentContextFromSelection(n.selectedContexts)}}const a=this.resolveCreationMode(n.creationMode,i,n.data);this.getAppComponent().getRouterProxy().removeIAppStateKey();if((n.singleDraftForCreate!==undefined?n.singleDraftForCreate:this.getAppComponent().getManifest()["sap.fe"]?.app?.singleDraftForCreate)&&i===i.getRootBinding()&&i.getHeaderContext()!==null){const e=i.getModel()?.bindList(i.getPath(),i.getContext(),new x("DraftAdministrativeData/LastChangeDateTime",true),new A({filters:[new A({path:"IsActiveEntity",operator:"EQ",value1:false}),new A({path:"HasActiveEntity",operator:"EQ",value1:false})],and:true}));const s=await(e?.requestContexts(0,1));if(s.length>0){return this._handleNewContext(s[0],{editable:true,recreateContext:false}).then(()=>e?.destroy())}e?.destroy();return this._handleCreationMode(a,t,n,i,o)}return this._handleCreationMode(a,t,n,i,o)};s._handleCreationMode=async function e(t,n,i,o,s){this._updatePathsInHistory([]);switch(t){case Se.External:return this.createExternalDocument(n,i.outbound);case Se.Deferred:return this.createDeferredDocument(o,s,i.data);case Se.CreationRow:return i.creationRow?this.createCreateRowDocument({creationRow:i.creationRow,skipSideEffects:i.skipSideEffects,createAtEnd:i.createAtEnd}):undefined;case Se.Inline:return this.createDialogInlineDocument({creationMode:Se.Inline,tableId:i.tableId,createAtEnd:i.createAtEnd,skipSideEffects:i.skipSideEffects,parentContext:s,data:i.data},o);case Se.CreationDialog:if(o.isRelative()){return this.createDialogInlineDocument({creationMode:Se.CreationDialog,tableId:i.tableId,createAtEnd:i.createAtEnd,skipSideEffects:i.skipSideEffects,parentContext:s,data:i.data,creationDialogFields:i.creationDialogFields},o)}else{return this.createDialogAndSaveDocument({tableId:i.tableId,createAtEnd:i.createAtEnd,skipSideEffects:i.skipSideEffects,parentContext:s,data:i.data,creationDialogFields:i.creationDialogFields},o)}case Se.Sync:case Se.Async:return this.createSyncAsyncDocument({creationMode:t,data:i.data,bFromDeferred:i.bFromDeferred,skipSideEffects:i.skipSideEffects,createAction:i.createAction,parentContext:s},o);default:throw new Error(`Unhandled creationMode ${t}`)}};s.postDocumentCreation=async function e(t,n){const i=this.getProgrammingModel(n);const o=n.getModel();const s=await t;const a=s[0];this._setStickySessionInternalProperties(i,o);await this.base.editFlow.onAfterCreate({context:a});this.setEditMode(We.Editable);if(!n.isRelative()){if(i===qe.Sticky){const e=o.getMetaModel().getMetaContext(n.getPath());const t=ke(e).startingEntitySet;const i=t?.annotations.Session?.StickySessionSupported?.NewAction;this.getInternalModel().setProperty("/lastInvokedAction",i)}else if(this.getTransactionHelper().isListBindingHierarchical(n)||this.getTransactionHelper().isListBindingAnalytical(n)){this.forceDraftSaveOrDiscard(true)}}if(a){this.setDocumentModifiedOnCreate(n);if(!this._isFclEnabled()){f.setEditStateDirty()}this._sendActivity(_e.Create,a);if(u.isCollaborationDraftSupported(o.getMetaModel())&&this.isDraftRoot(a)&&!this.base.collaborativeDraft.isConnected()){this.getInternalModel().setProperty("/executeShareActionForCollaboration",true)}}};s.createCreateRowDocument=async function t(n){let i;const s=this.getAppComponent();const a=n.creationRow;const r=n.creationRow.getParent();let c=Promise.resolve();if(!r){return}const l=r.getModel()?.getMetaModel();const g=r.getRowBinding();if(this.getTransactionHelper().isListBindingHierarchical(g)){throw new Error(`Unhandled creationMode "CreationRow" with a TreeTable`)}const d=a.getBindingContext();const f=this.getCreationRowValidationFunction(r);if(a.data("disableAddRowButtonForEmptyData")==="true"){r.getBindingContext("internal")?.setProperty("creationRowFieldValidity",{})}const u=await this.syncTask(f);if(u.length>0){this.createCustomValidationMessages(u,r);e.error("Custom Validation failed");return}const h=ke(l.getMetaContext(d.getPath())).targetEntityType;const p=d.getObject();await this._checkForValidationErrors();g.attachEventOnce("change",async()=>{await i;r.scrollToIndex(n.createAtEnd?r.getRowBinding().getLength():0)});this.handleCreateEvents(g);try{i=this.getTransactionHelper().createDocument(g,{data:Object.assign({},...Object.keys(p).filter(e=>h.navigationProperties.findIndex(t=>t.name===e)===-1).map(e=>({[e]:p[e]}))),keepTransientContextOnFailed:false,busyMode:"Local",busyId:r?.getParent()?.getTableDefinition()?.annotation.id,parentControl:this.getView(),beforeCreateCallBack:this.base.editFlow.onBeforeCreate,skipParameterDialog:s.getStartupMode()===ze.AutoCreate,createAtEnd:n.createAtEnd,creationMode:Se.CreationRow},s,this._getResourceModel(),this.getMessageHandler(),false);if(!n.skipSideEffects){this.handleSideEffects(g,i)}await i;const t=d.getBinding();const o=t.create();a.setBindingContext(o);o.created()?.catch(()=>{e.trace("transient fast creation context deleted")});c=d.delete("$direct");return await this.postDocumentCreation(Promise.all([i,c]),g)}catch(t){if(o.isLocked(this.base.getView().getModel("ui"))){o.unlock(this.base.getView().getModel("ui"))}e.error("CreationRow navigation error: ",t)}};s.createDialogInlineDocument=async function e(t,n){let i;if(t.tableId){i=this.getView().byId(t.tableId)}if(i?.isA("sap.ui.mdc.Table")){i.getRowBinding().attachEventOnce("createCompleted",async()=>{const e=await o;const t=e.getIndex();const s=n.getAggregation();const a=s?.createInPlace??false;if(t!==undefined&&t>=0){i?.focusRow(t,true)}else if(a){w.show(this._getResourceModel().getText("C_NEW_ELEMENT_NOT_DISPLAYED"))}if(this.getTransactionHelper().isListBindingHierarchical(n)&&!a){const t=e.getParent();const n=t?.getIndex();if(n!==undefined&&n>=0){i?.scrollToIndex(n)}}})}this.handleCreateEvents(n);const o=this.getTransactionHelper().createDocument(n,{keepTransientContextOnFailed:false,busyMode:"Local",busyId:i?.getParent()?.getTableDefinition()?.annotation.id,parentControl:this.getView(),beforeCreateCallBack:this.base.editFlow.onBeforeCreate,skipParameterDialog:this.getAppComponent().getStartupMode()===ze.AutoCreate,createAtEnd:t.createAtEnd,creationMode:t.creationMode,parentContext:t.parentContext,data:t.data,creationDialogFields:t.creationDialogFields},this.getAppComponent(),this._getResourceModel(),this.getMessageHandler(),false);if(!t.skipSideEffects){this.handleSideEffects(n,o)}return this.postDocumentCreation(Promise.all([o,this.syncTask(o)]),n)};s.createDialogAndSaveDocument=async function t(n,i){let o;if(n.tableId){o=this.getView().byId(n.tableId);if(o?.isA("sap.ui.mdc.Table")!==true){o=undefined}}let s;const a=async t=>{try{await this.base.editFlow.onAfterCreate({context:t})}catch(t){e.error("Error after creation: "+t)}await this.base.editFlow.onBeforeSave({context:t});s=await this.getTransactionHelper().saveDocument(t,this.getAppComponent(),this._getResourceModel(),false,[],this.getMessageHandler(),true,true);try{await this.base.editFlow.onAfterSave({context:s})}catch(t){e.error("Error after save: "+t)}if(this.getTransactionHelper().isListBindingHierarchical(i)){const e=o?.getParent();if(e){const t=n.parentContext?.getIndex();e.refresh();if(t!==undefined&&t>=0){o?.scrollToIndex(t)}}}else{const e=s.getIndex();if(e!==undefined&&e>=0){o?.scrollToIndex(e)}}};const r=this.getTransactionHelper().createDocument(i,{keepTransientContextOnFailed:false,busyMode:"Local",busyId:o?.getParent()?.getTableDefinition()?.annotation.id,parentControl:this.getView(),beforeCreateCallBack:this.base.editFlow.onBeforeCreate,afterCreateCallBack:a,skipParameterDialog:this.getAppComponent().getStartupMode()===ze.AutoCreate,createAtEnd:n.createAtEnd,creationMode:Se.CreationDialog,parentContext:n.parentContext,data:n.data,creationDialogFields:n.creationDialogFields},this.getAppComponent(),this._getResourceModel(),this.getMessageHandler(),false);await Promise.all([r,this.syncTask(r)]);if(s&&n.skipSideEffects!==true){this.getAppComponent().getSideEffectsService().requestSideEffectsForNavigationProperty(i.getPath(),s)}};s.createDeferredDocument=async function e(t,n,i){const s=this.getGlobalUIModel();o.lock(s);await this.getInternalRouting().navigateForwardToContext(t,{createOnNavigateParameters:{mode:"Deferred",parentContext:n,listBinding:t,data:i},editable:true,forceFocus:true});o.unlock(s)};s.createSyncAsyncDocument=async function e(t,n){let i;const s=this.getGlobalUIModel();const a=this.getInternalRouting();o.lock(s);const r=this.getTransactionHelper().createDocument(n,{...t,...{parentControl:this.getView(),beforeCreateCallBack:this.base.editFlow.onBeforeCreate,skipParameterDialog:this.getAppComponent().getStartupMode()===ze.AutoCreate}},this.getAppComponent(),this._getResourceModel(),this.getMessageHandler(),false).then(e=>{if(this._isFclEnabled()&&e&&e.getBinding()!==n){n.refresh()}return e});if(t.bFromDeferred!==true&&!t.skipSideEffects){this.handleSideEffects(n,r)}if(t.creationMode===Se.Async){i=a.navigateForwardToContext(n,{createOnNavigateParameters:{mode:"Async",createContextPromise:r},editable:true,forceFocus:true})}else{i=r.then(async e=>{if(!e){const e=b.getResourceBundleFor("sap.fe.core");return a.navigateToMessagePage(e.getText("C_COMMON_SAPFE_DATA_RECEIVED_ERROR"),{title:e.getText("C_COMMON_SAPFE_ERROR"),description:e.getText("C_EDITFLOW_SAPFE_CREATION_FAILED_DESCRIPTION")})}else{const i={editable:true,forceFocus:true,transient:this.getProgrammingModel(n)==qe.Sticky||t.createAction?true:undefined};return t.bFromDeferred?a.navigateToContext(e,i):a.navigateForwardToContext(e,i)}})}try{await this.postDocumentCreation(Promise.all([r,i]),n)}catch(e){if([Ke.CancelActionDialog,Ke.ActionExecutionFailed,Ke.CreationFailed,Ke.OnBeforeCreateFailed].includes(e)){this.getInternalRouting().navigateBackFromTransientState()}throw e}finally{o.unlock(s)}};s.createExternalDocument=async function e(t,n){if(n){if(typeof t!=="string"&&this.getTransactionHelper().isListBindingHierarchical(t)){throw new Error(`Unhandled creationMode "External" with a TreeTable`)}await this.syncTask();const e=this.getView().getController();const i=u.getAbsoluteMetaPathForListBinding(this.base.getView(),t);e._intentBasedNavigation.onChevronPressNavigateOutBound(e,n,undefined,i)}};s.validateDocument=async function e(t,n){return this.getTransactionHelper().validateDocument(t,n,this.getView())};s.getCreationRowValidationFunction=function e(t){const n=t?.getCreationRow();if(n&&t){return async()=>{const e=n.getBindingContext().getObject();delete e["@$ui5.context.isTransient"];return this.validateDocument(t.getBindingContext(),{data:e,customValidationFunction:t.getCreationRow().data("customValidationFunction")})}}return async()=>Promise.resolve([])};s.createMultipleDocuments=async function t(i,s,a,r,c){let l=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;let g=arguments.length>6?arguments[6]:undefined;const d=this.getTransactionHelper();const f=this.getGlobalUIModel();const u=i;g=g!==false;if(!l){o.lock(f)}try{await this.syncTask();if(c){await c({contextPath:u.getPath()})}const e=u.getModel().getMetaModel();let t;if(u.getContext()){t=e.getMetaPath(`${u.getContext().getPath()}/${u.getPath()}`)}else{t=e.getMetaPath(u.getPath())}this.handleCreateEvents(u);const i=s.map(async n=>{const i={data:{},parentControl:this.getView()};i.keepTransientContextOnFailed=false;i.creationMode=Se.CreationRow;i.createAtEnd=a;i.inactive=l;for(const o in n){const s=e.getObject(`${t}/${o}`);if(s&&s.$kind!=="NavigationProperty"&&!o.includes("/")&&n[o]){i.data[o]=n[o]}}return d.createDocument(u,i,this.getAppComponent(),this._getResourceModel(),this.getMessageHandler(),r)});const o=await Promise.all(i);if(!l){this.setDocumentModifiedOnCreate(u)}const f=o.filter(e=>!e.isInactive());await Promise.all(f.map(async e=>e.created()));const h=this.getView().getBindingContext();if(g&&!n.hasTransientContext(u)){this.getAppComponent().getSideEffectsService().requestSideEffectsForNavigationProperty(u.getPath(),h)}if(this.base.collaborativeDraft.isConnected()&&f.length>0){this._sendActivity(_e.Create,f)}return o}catch(t){e.error("Error while creating multiple documents.");throw t}finally{if(!l){o.unlock(f)}}};s.onBeforeCreate=async function e(t){return Promise.resolve()};s.onBeforeEdit=async function e(t){return Promise.resolve()};s.onBeforeSave=async function e(t){return Promise.resolve()};s.onBeforeDiscard=async function e(t){return Promise.resolve()};s.onBeforeDelete=async function e(t){return Promise.resolve()};s.onAfterSave=async function e(t){return Promise.resolve()};s.onAfterCreate=async function e(t){return Promise.resolve()};s.onAfterEdit=async function e(t){return Promise.resolve()};s.onAfterDiscard=async function e(t){return Promise.resolve()};s.onAfterDelete=async function e(t){return Promise.resolve()};s.saveDocument=async function t(n,i){i=i||{};const o=i.bExecuteSideEffectsOnError||undefined;const s=this.getTransactionHelper();const a=i.bindings;const r=this.getMessageHandler().registerToHoldMessages();try{await this.syncTask();this.getMessageHandler().removeTransitionMessages();if(i.mergePatchDraft!==true){await this._submitOpenChanges(n)}await this._checkForValidationErrors();const e=await this.checkRecommendationOption();await this.base.editFlow.onBeforeSave({context:n});const t=this.getProgrammingModel(n);const c=this._getRootViewController();let l;if((t===qe.Sticky||n.getProperty("HasActiveEntity"))&&c.isFclEnabled()){l=await this._computeSiblingInformation(n,c.getRightmostContext(),t,true)}await this.base._sideEffects.handlePageChangeContext(n);if(n.getModel().hasPendingChanges("$auto")&&i.mergePatchDraft){n.getModel().submitBatch("$auto")}const g=await s.saveDocument(n,this.getAppComponent(),this._getResourceModel(),o,a,this.getMessageHandler(),this.getCreationMode());this._removeStickySessionInternalProperties(t);this._sendActivity(_e.Activate,g);this.base.collaborativeDraft.disconnect();this._triggerConfiguredSurvey(Be.save,Fe.standardAction);this.setDocumentModified(false);this.setEditMode(We.Display,false);this.getMessageHandler().showMessageDialog({unHoldKey:r});await this.base.editFlow.onAfterSave({context:g});this.base.recommendations.storeDataForTelemetry(e);if(g!==n){let e=g;l=l??this._createSiblingInfo(n,g);if(t===qe.Draft){const e=p.getSemanticPath(n,true);const t=p.getSemanticPath(g,true);if(e&&t&&e!==t){l.pathMapping.push({oldPath:e,newPath:t})}}this._updatePathsInHistory(l.pathMapping);if(c.isFclEnabled()){if(l.targetContext.getPath()!==g.getPath()){e=l.targetContext}}await this._handleNewContext(e,{editable:false,recreateContext:false,forceFocus:true})}}catch(t){this.getMessageHandler().showMessageDialog({unHoldKey:r});if(!(t&&t.canceled)){e.error("Error while saving the document",t)}throw t}};s.toggleDraftActive=async function e(t){const n=t.getObject();let i;const o=t&&this.getProgrammingModel(t)===qe.Draft;if(!o||!(!n.IsActiveEntity&&n.HasActiveEntity||n.IsActiveEntity&&n.HasDraftEntity)){return}if(!n.IsActiveEntity&&n.HasActiveEntity){i=false}else{i=true}try{const e=this._getRootViewController();const n=e.isFclEnabled()?e.getRightmostContext():t;let o=await this._computeSiblingInformation(t,n,qe.Draft,false);if(!o&&t!==n){o=await this._computeSiblingInformation(t,t,qe.Draft,false)}if(o){this.setEditMode(i?We.Editable:We.Display,false);if(e.isFclEnabled()){const e=this._getSemanticMapping();if(e?.technicalPath===t.getPath()){const t=o.pathMapping[o.pathMapping.length-1].newPath;o.pathMapping.push({oldPath:e.semanticPath,newPath:t})}}this._updatePathsInHistory(o.pathMapping);await this._handleNewContext(o.targetContext,{editable:i,recreateContext:true,forceFocus:true})}else{throw new Error("Error in EditFlow.toggleDraftActive - Cannot find sibling")}}catch(e){throw new Error(`Error in EditFlow.toggleDraftActive:${e}`)}};s.cancelDocument=async function t(n,i){const o=this.getTransactionHelper();let s;let a=false;const r={skipDiscardPopover:i.skipDiscardPopover===true,cancelButton:i.control||i.cancelButton,beforeCancelCallBack:this.base.editFlow.onBeforeDiscard};try{await this.syncTask();const e=this.getProgrammingModel(n);if((e===qe.Sticky||n.getProperty("HasActiveEntity"))&&this._isFclEnabled()){const t=this._getRootViewController();s=await this._computeSiblingInformation(n,t.getRightmostContext(),e,true)}const t=await o.cancelDocument(n,r,this.getAppComponent(),this._getResourceModel(),this.getMessageHandler(),this.getCreationMode(),this.isDocumentModified());this._getRootViewController().getInstancedViews().forEach(e=>{const t=e.getBindingContext();if(t&&t.isKeepAlive()){t.setKeepAlive(false)}});this._removeStickySessionInternalProperties(e);this.setEditMode(We.Display,false);this.setDocumentModified(false);this.setDraftStatus(Ue.Clear);await this.base.editFlow.onAfterDiscard({context:typeof t==="boolean"||t===null?undefined:t});f.setEditStateDirty();if(!t){this._sendActivity(_e.Discard,n);this.base.collaborativeDraft.disconnect();if(!i.skipBackNavigation){await this.getInternalRouting().navigateBackFromContext(n);a=true}}else{const o=t;this._sendActivity(_e.Discard,o);this.base.collaborativeDraft.disconnect();let a=o;s=s??this._createSiblingInfo(n,o);this._updatePathsInHistory(s.pathMapping);if(this._isFclEnabled()){if(s.targetContext.getPath()!==o.getPath()){a=s.targetContext}}if(e===qe.Draft){await this._fetchSemanticKeyValues(o);if(!i.skipBindingToView){await this._handleNewContext(a,{editable:false,recreateContext:true,forceFocus:true})}else{return o}}else{await this._handleNewContext(a,{editable:false,recreateContext:true,forceFocus:true})}}if(e===qe.Draft){this.showDocumentDiscardMessage(a)}}catch(t){e.error("Error while discarding the document",t)}};s.showDocumentDiscardMessage=function e(t){const n=this._getResourceModel();const i=n.getText("C_TRANSACTION_HELPER_DISCARD_DRAFT_TOAST");if(t==true){const e=this.getAppComponent();e.getRoutingService().attachAfterRouteMatched({},this.showMessageWhenNoContext,this)}else{w.show(i)}};s.showMessageWhenNoContext=function e(){const t=this._getResourceModel();const n=t.getText("C_TRANSACTION_HELPER_DISCARD_DRAFT_TOAST");const i=this.getAppComponent();w.show(n);i.getRoutingService().detachAfterRouteMatched(this.showMessageWhenNoContext,this)};s.isDraftRoot=function e(t){const n=t.getModel().getMetaModel();const i=n.getMetaContext(t.getPath());return u.isDraftRoot(ke(i).targetEntitySet)};s.deleteDocument=async function t(n,i){const o=this.getAppComponent();const s={...i,bFindActiveContexts:false,beforeDeleteCallBack:this.base.editFlow.onBeforeDelete},a=this.getMessageHandler().registerToHoldMessages();try{if(this._isFclEnabled()&&this.isDraftRoot(n)&&n.getIndex()===undefined&&n.getProperty("IsActiveEntity")===true&&n.getProperty("HasDraftEntity")===true){s.beforeDeleteCallBack=async t=>{await this.base.editFlow.onBeforeDelete(t);try{const e=n.getModel();const t=e.bindContext(`${n.getPath()}/SiblingEntity`).getBoundContext();const i=await t.requestCanonicalPath();const o=e.getKeepAliveContext(i);o.replaceWith(n)}catch(t){e.error("Error while replacing the draft instance in the LR ODLB",t)}}}if(this.getProgrammingModel(n)===qe.Sticky){this.setDocumentModified(true)}await this.deleteDocumentTransaction(n,s);if(!this._isFclEnabled()){f.setEditStateDirty()}else{const e=n.getBinding();if(e.isA("sap.ui.model.odata.v4.ODataListBinding")){if(e.isRoot()){await this.getTransactionHelper().refreshListBinding(e,o)}else if(s.requestSideEffects!==false){this.requestSideEffectsOnDelete(e,e.getContext())}}}this._sendActivity(_e.Delete,n);await(o?.getShellServices().setBackNavigation());const t=this.base.recommendations.isRecommendationEnabled();if(t){this.base.recommendations.ignoreRecommendationForContexts([n])}await this.base.editFlow.onAfterDelete({contexts:[n]});if(!this._isFclEnabled()){if(o?.getStartupMode()===ze.Deeplink){o.getRouterProxy().exitFromApp()}else{this.getInternalRouting().navigateBackFromContext(n)}}}catch(t){e.error("Error while deleting the document",t)}finally{this.getMessageHandler().showMessages({unHoldKey:a})}};s.applyDocument=async function e(t){const n=this.getGlobalUIModel();const i=this.getMessageHandler().registerToHoldMessages();try{await this.syncTask();if(t.getModel().hasPendingChanges("$auto")){o.lock(n);await this._submitOpenChanges(t)}const e=await this.showConfirmRecommendationsDialog(false);if(e===Ae.Continue){return}await this._checkForValidationErrors();await this.getMessageHandler().showMessageDialog({unHoldKey:i});await this.getInternalRouting().navigateBackFromContext(t)}finally{if(o.isLocked(n)){o.unlock(n)}}};s.invokeAction=async function t(n,i,o){const s=this.getTransactionHelper();let a;let r;let c;const l=this.base.getView();if(i?.isA&&i?.isA("sap.ui.model.odata.v4.Context")||Array.isArray(i)||o!==undefined){const e=i;i=o||{};if(e){i.contexts=e}else{i.model=this.base.getView().getModel()}}const g={...i,parentControl:this.base.getView()}||{parentControl:this.base.getView()};g.isNavigable=g.requiresNavigation||g.isNavigable;const d=Te(this.getView().getModel()?.getMetaModel());if(n.includes(""+d.entityContainer.name)){g.isBound=false}else{g.isBound=true}if(!g.entitySetName&&g.contexts&&g.model){g.entitySetName=g.model.getMetaModel().getMetaContext((Array.isArray(g.contexts)?g.contexts[0]:g.contexts).getPath()).getObject("@sapui.name")}let u;if(g.controlId){u=this.getView().byId(g.controlId);if(u){g.internalModelContext=u.getBindingContext("internal")}}else{g.internalModelContext=l.getBindingContext("internal")}g.ignoreETag=g.internalModelContext?.getProperty("/sessionOn");if(n&&n.includes("(")){a=n.split("(");n=a[0];r=a[a.length-1].replaceAll(")","")}if(g.bStaticAction&&u){if(u.isA("sap.ui.mdc.Table")){const e=u.getParent();g.contexts=(this.getView().getModel()?.bindList(e.getRowBinding().getHeaderContext().getPath())).getHeaderContext()}if(r&&u.getBindingContext()&&u.isA&&u.isA("sap.ui.mdc.Table")){g.contexts=this._getActionOverloadContextFromMetadataPath(u.getBindingContext(),u.getRowBinding(),r)}if(g.enableAutoScroll){c=this.createActionPromise(n,u.getId())}}g.bObjectPage=l.getViewData().converterType==="ObjectPage";try{await this.syncTask();const t=await s.callAction(n,g,this.getView(),this.getAppComponent(),this.getMessageHandler());const o=t.filter(Ee);if(t.length!==o.length){throw t}let a;if(g.contexts&&Array.isArray(g.contexts)&&g.isBound===true){a=await this._refreshListIfRequired(this.getActionResponseDataAndKeys(n,o),g.contexts[0])}if(this.base.collaborativeDraft.isConnected()){this._sendActivity(_e.Action,g.contexts,n,a,Object.keys(o[0].value.boundContext.getObject()))}this._triggerConfiguredSurvey(n,Fe.action);if(c){c.fResolver(o)}if(g.contexts){if(!this._isFclEnabled()&&this.base.getView().getViewData().converterType!=="ListReport"){f.setEditStateDirty()}this.getInternalModel().setProperty("/lastInvokedAction",n)}if(g.isNavigable){if(o.length===1){const t=this._getBoundContext(l,g)?o[0].value.boundContext:o[0].value.returnedContext??o[0].value.boundContext;const n=l.getModel().getMetaModel();const i=n.getMetaPath(t.getPath());const s=(e,t)=>e.filter(e=>{if(t){return t.includes(e)}return true});const a=Array.isArray(g.contexts)?s(g.contexts,g.applicableContexts)[0]:g.contexts;const r=a&&n.getMetaPath(a.getPath());if(i!=undefined&&i===r){if(a?.getPath()!==t.getPath()){this.getInternalRouting().navigateForwardToContext(t,{checkNoHashChange:true});if(this.getProgrammingModel(t)===qe.Draft&&(t.getProperty("IsActiveEntity")===false||this._isFclEnabled())){t.getBinding().destroy()}}else{e.info("Navigation to the same context is not allowed")}}}}this.base.editFlow.onAfterActionExecution(n);if(!Array.isArray(i?.contexts)&&o.length===1){return o[0].value.returnedContext??o[0].value.boundContext}return o.map(e=>({...e,...{value:e.value.returnedContext??e.value.boundContext}}))}catch(e){if(c){c.fRejector()}if(e===Ke.CancelActionDialog){throw new Error("Dialog cancelled")}throw e}};s.onAfterActionExecution=async function e(t){};s.customMassEditSave=async function e(t){return Promise.resolve(false)};s.securedExecution=async function e(t,n){const i=n?.busy?.set??true,s=n?.busy?.check??true,a=n?.updatesDocument??false,r=this.getGlobalUIModel(),c=this.getView().getBindingContext(),l=c&&this.getProgrammingModel(c)===qe.Draft,g=this.getMessageHandler().registerToHoldMessages();if(s&&o.isLocked(r)){return Promise.reject("Application already busy therefore execution rejected")}if(i){o.lock(r)}if(a&&l){this.setDraftStatus(Ue.Saving)}this.getMessageHandler().removeTransitionMessages();return this.syncTask(t).then(()=>{if(a){this.setDocumentModified(true);if(!this._isFclEnabled()){f.setEditStateDirty()}if(l){this.setDraftStatus(Ue.Saved)}}return}).catch(e=>{if(a&&l){this.setDraftStatus(Ue.Clear)}throw e}).finally(()=>{if(i){o.unlock(r)}this.getMessageHandler().showMessageDialog({unHoldKey:g})})};s.handlePatchSent=function e(t){const n=this.getView()?.getBindingContext("internal");const i=this.base.collaborativeDraft.isConnected()||n.getProperty("/sessionOn");if(i){t.getSource().getModel().setIgnoreETag(true)}if(!n?.getProperty("skipPatchHandlers")){const e=t.getSource();const n=new Promise((n,o)=>{t.getSource().attachEventOnce("patchCompleted",s=>{if(i){t.getSource().getModel().setIgnoreETag(false)}if(t.getSource().isA("sap.ui.model.odata.v4.ODataListBinding")){I.setActionEnablementAfterPatch(this.getView(),e,this.getView()?.getBindingContext("internal"))}const a=s.getParameter("success");if(a){n()}else{o()}})});this.updateDocument(e,n)}};s.handleCreateSent=function e(t){const n=t.getParameter("context");this.getMessageHandler().removeTransitionMessages(false,false,n.getPath())};s.syncTask=async function t(n){if(n){if(typeof n==="function"){this.syncTasks=this.syncTasks.then(n).catch(function(t){e.debug(t)})}else{this.syncTasks=this.syncTasks.then(async()=>n).catch(function(t){e.debug(t)})}}return this.syncTasks};s.computeModelsForEditMode=async function t(n){const i=this.getProgrammingModel(n);if(i===qe.Draft){if(this.getInternalModel().getProperty("/executeShareActionForCollaboration")){Re(n);this.getInternalModel().setProperty("/executeShareActionForCollaboration",false)}try{this.setDraftStatus(Ue.Clear);const e=this.getGlobalUIModel();e.setProperty("/isEditablePending",true,undefined,true);const t=await n.requestObject("IsActiveEntity");if(t===false){this.setEditMode(We.Editable);const e=await n.requestObject("HasActiveEntity");this.setEditMode(undefined,!e)}else{this.setEditMode(We.Display,false)}e.setProperty("/isEditablePending",false,undefined,true)}catch(t){e.error("Error while determining the editMode for draft",t)}}else if(i===qe.Sticky){const e=this.getInternalModel().getProperty("/lastInvokedAction");if(e&&this.isNewActionForSticky(e,n)){this.setEditMode(We.Editable,true);if(!this.getAppComponent()._isFclEnabled()){f.setEditStateDirty()}this.handleStickyOn(n);this._setStickySessionInternalProperties(this.getProgrammingModel(n),n.getModel());this.getInternalModel().setProperty("/lastInvokedAction",undefined)}}};s.deleteDocumentTransaction=async function e(t,n){if(n.selectedContexts){n.numberOfSelectedContexts=n.selectedContexts.length}const i=this._getResourceModel();const o=this.getTransactionHelper();if(n.controlId){const e=D.getElementById(n.controlId);if(e&&!e.isA("sap.ui.mdc.MultiValueField")){n.internalModelContext=e.getBindingContext("internal")}}await this.syncTask();await o.deleteDocument(t,n,this.getAppComponent(),i,this.getMessageHandler())};s._getResourceModel=function e(){return Ie(this.getView())};s.getTransactionHelper=function e(){return r};s.getMessageHandler=function e(){if(this.base.messageHandler){return this.base.messageHandler}else{throw new Error("Edit Flow works only with a given message handler")}};s.getInternalModel=function e(){return this.getView().getModel("internal")};s.getGlobalUIModel=function e(){return this.getView().getModel("ui")};s.getPageInternalModel=function e(){return this.getView().getModel("pageInternal")};s.setCreationMode=function e(t){const n=this.getView().getBindingContext("pageInternal");this.getPageInternalModel().setProperty(l.CreateMode,t,n,true)};s.getCreationMode=function e(){const t=this.getView().getBindingContext("pageInternal");return!!t.getProperty(l.CreateMode)};s.isDocumentModified=function e(){return!!this.getGlobalUIModel().getProperty(l.DocumentModified)};s.setDocumentModified=function e(t){this.getGlobalUIModel().setProperty(l.DocumentModified,t)};s.setDocumentModifiedOnCreate=function e(t){if(t.isRelative()){this.setDocumentModified(true)}};s.handleCreateEvents=function e(t){this.setDraftStatus(Ue.Clear);const n=this.getProgrammingModel(t);let i;t.attachEvent("createSent",()=>{if(n===qe.Draft){this.setDraftStatus(Ue.Saving)}i=this.getMessageHandler().registerToHoldMessages()});t.attachEvent("createCompleted",e=>{const t=e.getParameter("success");if(n===qe.Draft){this.setDraftStatus(t?Ue.Saved:Ue.Clear)}this.getMessageHandler().showMessageDialog({unHoldKey:i})})};s.setDraftStatus=function e(t){this.getView().getModel("ui").setProperty("/draftStatus",t,undefined,true)};s.getProgrammingModel=function e(t){return this.getTransactionHelper().getProgrammingModel(t)};s.setEditMode=function e(t,n){const i=this.getGlobalUIModel();if(t){i.setProperty("/isEditable",t==="Editable",undefined,true);if(t!=="Editable"){this.forceDraftSaveOrDiscard(false)}}if(n!==undefined){this.setCreationMode(n)}};s.forceDraftSaveOrDiscard=function e(t){this.getGlobalUIModel().setProperty("/forceDraftSaveOrDiscard",t,undefined,true)};s.shallForceDraftSaveOrDiscard=function e(){return this.getGlobalUIModel().getProperty("/forceDraftSaveOrDiscard")===true};s.isNewActionForSticky=function t(n,i){try{const e=i.getModel().getMetaModel();const t=e.getMetaContext(i.getPath());const o=ke(t).startingEntitySet;const s=o.annotations.Session?.StickySessionSupported;if(s?.NewAction===n){return true}if(s?.AdditionalNewActions&&s?.AdditionalNewActions.includes(n)){return true}return false}catch(t){e.info(t);return false}};s.handleStickyOn=async function t(n){const i=this.getAppComponent();try{if(i===undefined){throw new Error("undefined AppComponent for function handleStickyOn")}if(!i.getRouterProxy().hasNavigationGuard()){const e=i.getRouterProxy().getHash();const t=this.getInternalModel();setTimeout(function(){i.getRouterProxy().setNavigationGuard(n.getPath().substring(1))},0);await i.getShellServices().setBackNavigation(this.onBackNavigationInSession.bind(this,n));const o=this.base.getView().getModel("sap.fe.i18n");i.registerStickySessionCallbacks(this.getDirtyStateProvider(i,t,e),this.getSessionTimeoutFunction(n,o),this.getRouteMatchedFunction(n,i))}}catch(t){e.info(t);return false}return true};s.handleStickyOff=function t(){const n=this.getAppComponent();try{if(n===undefined){throw new Error("undefined AppComponent for function handleStickyOff")}if(n.getRouterProxy){n.getRouterProxy().discardNavigationGuard()}if(n.unregisterStickySessionCallbacks){n.unregisterStickySessionCallbacks()}this.setEditMode(We.Display,false);if(n.getShellServices){n.getShellServices().setBackNavigation()}}catch(t){e.info(t);return false}return true};s._setStickySessionInternalProperties=function e(t,n){if(t===qe.Sticky){const e=this.getInternalModel();e.setProperty("/sessionOn",true);e.setProperty("/stickySessionToken",n.getHttpHeaders(true)["SAP-ContextId"])}};s.getDirtyStateProvider=function t(n,i,o){return t=>{try{if(t===undefined){throw new Error("Invalid input parameters for DirtyStateProvider function")}const e=t.innerAppRoute;const s=n.getRouterProxy();let a="";let r;const c=i.getProperty("/sessionOn");if(!c){return undefined}if(!s.isNavigationFinalized()){r=false;a=e}else if(o===e){r=true}else if(s.checkHashWithGuard(e)||s.isGuardCrossAllowedByUser()){a=e;r=false}else{r=true}if(r){setTimeout(function(){n.getShellServices().setDirtyFlag(false)},0)}else{o=a}return r}catch(t){e.info(t);return undefined}}};s.getSessionTimeoutFunction=function t(n,i){return()=>{try{if(n===undefined){throw new Error("Context missing for SessionTimeout function")}this.getMessageHandler().removeTransitionMessages();const e=new C({title:"{sap.fe.i18n>C_EDITFLOW_OBJECT_PAGE_SESSION_EXPIRED_DIALOG_TITLE}",state:"Warning",content:new M({text:"{sap.fe.i18n>C_EDITFLOW_OBJECT_PAGE_SESSION_EXPIRED_DIALOG_MESSAGE}"}),beginButton:new m({text:"{sap.fe.i18n>C_COMMON_DIALOG_OK}",type:"Emphasized",press:()=>{this.handleStickyOff();this.getInternalRouting().navigateBackFromContext(n)}}),afterClose:function(){e.destroy()}});e.addStyleClass("sapUiContentPadding");e.setModel(i,"sap.fe.i18n");this.getView().addDependent(e);e.open()}catch(t){e.info(t);return undefined}return true}};s.getRouteMatchedFunction=function e(t,n){return()=>{const e=n.getRouterProxy().getHash();if(!e||!n.getRouterProxy().checkHashWithGuard(e)){this.discardStickySession(t);t.getModel().clearSessionContext()}}};s.discardStickySession=async function e(t){const n=await g.discardDocument(t);if(n?.hasPendingChanges()){n.getBinding().resetChanges()}if(!this.getCreationMode()){n?.refresh()}this.handleStickyOff()};s.getInternalRouting=function e(){if(this.base._routing){return this.base._routing}else{throw new Error("Edit Flow works only with a given routing listener")}};s._getRootViewController=function e(){return this.getAppComponent().getRootViewController()};s._getSemanticMapping=function e(){return this.getAppComponent().getRoutingService().getLastSemanticMapping()};s.createActionPromise=function e(t,n){let i,o;this.actionPromise=new Promise((e,t)=>{i=e;o=t}).then(e=>Object.assign({controlId:n},this.getActionResponseDataAndKeys(t,e)));return{fResolver:i,fRejector:o}};s.getActionResponseDataAndKeys=function e(t,n){if(n.length>=1){const e=this.base.getView();const i=e.getModel().getMetaModel().getData()??{};const o=i[t];const s=o?.[0].$ReturnType?o?.[0].$ReturnType.$Type:null;const a=s&&i[s]?i[s].$Key:[];return{oData:n[0].value.boundContext.getObject(),keys:a}}return undefined};s.getCurrentActionPromise=async function e(){return this.actionPromise};s.deleteCurrentActionPromise=function e(){this.actionPromise=undefined};s.showConfirmRecommendationsDialog=async function e(t){if(!this.confirmRecommendationsDialog){this.confirmRecommendationsDialog=new xe({view:this.getView()})}return this.confirmRecommendationsDialog?.open(t)};s._scrollAndFocusOnInactiveRow=function e(t){const n=t.getRowBinding();const i=n.getCount()||0;if(t.data("tableType")!=="ResponsiveTable"){if(i>0){t.scrollToIndex(i-1)}t.focusRow(i,true)}else{const e=n.getContexts();if(!e?.length){t.focusRow(i,true);return}let o=i,s=0;for(const t of e){if(t.isInactive()&&s<o){o=s}s++}if(o>0){t.scrollToIndex(o)}t.focusRow(o,true)}};s.createEmptyRowsAndFocus=async function e(t){const n=t.getParent();if(n?.tableDefinition?.control?.inlineCreationRowsHiddenInEditMode&&!t.getBindingContext("pageInternal")?.getProperty("createMode")){await n.setUpEmptyRows(t,true)}this._scrollAndFocusOnInactiveRow(t)};s._sendActivity=function e(t,n,i,o,s){const a=Array.isArray(n)?n.map(e=>e.getPath()):n?.getPath();this.base.collaborativeDraft.send({action:t,content:a,triggeredActionName:i,refreshListBinding:o,actionRequestedProperties:s})};s._triggerConfiguredSurvey=function e(t,n){Oe(this.base.getView(),t,n)};s._submitOpenChanges=async function e(t){const n=t.getModel(),i=this.getGlobalUIModel();try{await n.submitBatch("$auto");await n.oRequestor.waitForRunningChangeRequests("$auto");if(n.hasPendingChanges("$auto")){throw new Error("submit of open changes failed")}}finally{if(o.isLocked(i)){o.unlock(i)}}};s._removeStickySessionInternalProperties=function e(t){if(t===qe.Sticky){const e=this.getInternalModel();e.setProperty("/sessionOn",false);e.setProperty("/stickySessionToken",undefined);this.handleStickyOff()}};s.onBackNavigationInSession=function e(t){const n=this.base.getView();const i=this.getAppComponent().getRouterProxy();if(i.checkIfBackIsOutOfGuard()){g.processDataLossConfirmation(async()=>{await this.discardStickySession(t);this._removeStickySessionInternalProperties(qe.Sticky);history.back()},n,qe.Sticky);return}history.back()};s._handleNewContext=async function e(t,n){if(!this._isFclEnabled()){f.setEditStateDirty()}await this.getInternalRouting().navigateToContext(t,{checkNoHashChange:true,editable:n.editable,persistOPScroll:true,recreateContext:n.recreateContext,reason:_.EditFlowAction,showPlaceholder:false,forceFocus:n.forceFocus??false,keepCurrentLayout:true})};s._getBoundContext=function e(t,n){const i=t.getViewData().viewLevel;const o=i>1||i===1&&n.controlId;return!n.isNavigable||!!o};s._checkForValidationErrors=async function t(){return this.syncTask().then(()=>{const t=this.getView().getId();const n=P.getMessageModel().getData();let i;if(!n.length){e.info("No validation errors found");return}for(const e of n){if(e.validation){i=D.getElementById(e.getControlId());while(i){if(i.getId()===t){throw"validation errors exist"}i=i.getParent()}}}return})};s._refreshListIfRequired=async function e(t,n){if(!n||!t||!t.oData||!t.keys){return false}const i=n.getBinding();if(i&&i.isA("sap.ui.model.odata.v4.ODataListBinding")){const e=t.oData;const o=t.keys;const s=n.getObject();let a=true;if(Object.keys(e).length){a=o.every(function(t){return s[t]===e[t]});if(!a){await this.getTransactionHelper().refreshListBinding(i,this.getAppComponent());return true}}}return false};s._fetchSemanticKeyValues=async function e(t){const n=t.getModel().getMetaModel(),i=n.getMetaContext(t.getPath()).getObject("@sapui.name"),o=p.getSemanticKeys(n,i);if(o&&o.length){const e=o.map(e=>e.$PropertyPath);await t.requestProperty(e)}};s._getActionOverloadContextFromMetadataPath=function e(t,n,i){const o=t.getModel();const s=o.getMetaModel();let a=n.getPath().split("/");let r=t;a.pop();if(a.length===0){a=[""]}if(a[0]!==""){a.unshift("")}const c=a.map(e=>{if(e!==""){r=o.bindContext(e,r).getBoundContext()}else{r=t}return r}).reverse();const l=c.find(e=>s.getMetaContext(e.getPath()).getObject("$Type")===i);return l||n.getHeaderContext()};s._createSiblingInfo=function e(t,n){return{targetContext:n,pathMapping:[{oldPath:t.getPath(),newPath:n.getPath()}]}};s._updatePathsInHistory=function e(t){const n=this.getAppComponent();n.getRouterProxy().setPathMapping(t);const i=this._getSemanticMapping();if(t.length&&i?.technicalPath===t[t.length-1].oldPath){i.technicalPath=t[t.length-1].newPath}};s._getNavigationTargetForEdit=function e(t,n,i){let o;i=i??this._createSiblingInfo(t,n);this._updatePathsInHistory(i.pathMapping);if(i.targetContext.getPath()!=n.getPath()){o=t.getPath()===i.targetContext.getPath()?t:i.targetContext}return o};s._computeSiblingInformation=async function t(n,i,o,s,a,r){i=i??n;if(!i.getPath().startsWith(n.getPath())){e.error("Cannot compute rightmost sibling context");throw new Error("Cannot compute rightmost sibling context")}let l=i;if(o===qe.Draft&&this.getProgrammingModel(i)!==qe.Draft){l=n}if(s&&l.getPath()===n.getPath()){return Promise.resolve(undefined)}const g=n.getModel();if(o===qe.Draft){return c.computeSiblingInformation(n,l,a,r)}else{return{targetContext:g.bindContext(i.getPath()).getBoundContext(),pathMapping:[]}}};s._isFclEnabled=function e(){return this.getAppComponent()._isFclEnabled()};s.checkRecommendationOption=async function e(){const t=await this.showConfirmRecommendationsDialog(true);if(t===Ae.Continue){return Promise.reject(Ae.Continue)}return t};return i}(i),$e(ve.prototype,"editDocument",[F,B],Object.getOwnPropertyDescriptor(ve.prototype,"editDocument"),ve.prototype),$e(ve.prototype,"updateDocument",[H,V],Object.getOwnPropertyDescriptor(ve.prototype,"updateDocument"),ve.prototype),$e(ve.prototype,"createDocument",[N,j],Object.getOwnPropertyDescriptor(ve.prototype,"createDocument"),ve.prototype),$e(ve.prototype,"onBeforeCreate",[L,G],Object.getOwnPropertyDescriptor(ve.prototype,"onBeforeCreate"),ve.prototype),$e(ve.prototype,"onBeforeEdit",[$,q],Object.getOwnPropertyDescriptor(ve.prototype,"onBeforeEdit"),ve.prototype),$e(ve.prototype,"onBeforeSave",[K,U],Object.getOwnPropertyDescriptor(ve.prototype,"onBeforeSave"),ve.prototype),$e(ve.prototype,"onBeforeDiscard",[W,z],Object.getOwnPropertyDescriptor(ve.prototype,"onBeforeDiscard"),ve.prototype),$e(ve.prototype,"onBeforeDelete",[J,Q],Object.getOwnPropertyDescriptor(ve.prototype,"onBeforeDelete"),ve.prototype),$e(ve.prototype,"onAfterSave",[X,Y],Object.getOwnPropertyDescriptor(ve.prototype,"onAfterSave"),ve.prototype),$e(ve.prototype,"onAfterCreate",[Z,ee],Object.getOwnPropertyDescriptor(ve.prototype,"onAfterCreate"),ve.prototype),$e(ve.prototype,"onAfterEdit",[te,ne],Object.getOwnPropertyDescriptor(ve.prototype,"onAfterEdit"),ve.prototype),$e(ve.prototype,"onAfterDiscard",[ie,oe],Object.getOwnPropertyDescriptor(ve.prototype,"onAfterDiscard"),ve.prototype),$e(ve.prototype,"onAfterDelete",[se,ae],Object.getOwnPropertyDescriptor(ve.prototype,"onAfterDelete"),ve.prototype),$e(ve.prototype,"saveDocument",[re,ce],Object.getOwnPropertyDescriptor(ve.prototype,"saveDocument"),ve.prototype),$e(ve.prototype,"cancelDocument",[le,ge],Object.getOwnPropertyDescriptor(ve.prototype,"cancelDocument"),ve.prototype),$e(ve.prototype,"deleteDocument",[de,fe],Object.getOwnPropertyDescriptor(ve.prototype,"deleteDocument"),ve.prototype),$e(ve.prototype,"applyDocument",[ue,he],Object.getOwnPropertyDescriptor(ve.prototype,"applyDocument"),ve.prototype),$e(ve.prototype,"invokeAction",[pe,ye],Object.getOwnPropertyDescriptor(ve.prototype,"invokeAction"),ve.prototype),$e(ve.prototype,"onAfterActionExecution",[me,Ce],Object.getOwnPropertyDescriptor(ve.prototype,"onAfterActionExecution"),ve.prototype),$e(ve.prototype,"customMassEditSave",[we,Me],Object.getOwnPropertyDescriptor(ve.prototype,"customMassEditSave"),ve.prototype),$e(ve.prototype,"securedExecution",[De,be],Object.getOwnPropertyDescriptor(ve.prototype,"securedExecution"),ve.prototype),ve))||Pe);return Je},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/Feedback", ["sap/ui/core/EventBus"],function(e){"use strict";var t={};let n=function(e){e["action"]="actions";e["standardAction"]="standardActions";return e}({});t.TriggerType=n;let a=function(e){e["save"]="save";return e}({});t.StandardActions=a;const r="sap.feedback";const i="inapp.feature";function c(t,n,a){const c={areaId:t,triggerName:n,payload:a};e.getInstance().publish(r,i,c)}t.triggerSurvey=c;function s(e,t,n){const a=e.getViewData()?.content?.feedback;const r=a?.[n]?.[t];if(r){c(r.areaId,r.triggerName,r.payload)}}t.triggerConfiguredSurvey=s;return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/IntentBasedNavigation", ["sap/fe/base/ClassSupport","sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution"],function(t,e,n){"use strict";var i,o,r,a,p,u,c;var s=t.publicExtension;var l=t.finalExtension;var v=t.extensible;var f=t.defineUI5Class;function b(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,d(t,e)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function g(t,e,n,i,o){var r={};return Object.keys(i).forEach(function(t){r[t]=i[t]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,i){return i(t,e,n)||n},r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer?(Object.defineProperty(t,e,r),null):r}let y=(i=f("sap.fe.core.controllerextensions.IntentBasedNavigation"),o=s(),r=v(n.After),a=l(),p=s(),i(u=(c=function(t){function e(){return t.apply(this,arguments)||this}b(e,t);var n=e.prototype;n.adaptNavigationContext=function t(e,n){};n.navigateOutbound=function t(e,n){const i=this.base?.getView().getBindingContext("internal");i.setProperty("externalNavigationContext",{page:false});this.base?._intentBasedNavigation.navigateOutbound(e,n)};return e}(e),g(c.prototype,"adaptNavigationContext",[o,r],Object.getOwnPropertyDescriptor(c.prototype,"adaptNavigationContext"),c.prototype),g(c.prototype,"navigateOutbound",[a,p],Object.getOwnPropertyDescriptor(c.prototype,"navigateOutbound"),c.prototype),c))||u);return y},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/InternalIntentBasedNavigation", ["sap/base/Log","sap/base/util/merge","sap/fe/base/ClassSupport","sap/fe/core/CommonUtils","sap/fe/core/controllerextensions/editFlow/NotApplicableContextDialog","sap/fe/core/controllerextensions/editFlow/draft","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/FPMHelper","sap/fe/core/helpers/KeepAliveHelper","sap/fe/core/helpers/KeepAliveRefreshTypes","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/ResourceModelHelper","sap/fe/navigation/SelectionVariant","sap/ui/core/Element","sap/ui/core/Lib","sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution","../converters/helpers/Aggregation"],function(t,e,o,n,i,a,r,s,c,p,l,g,u,f,d,v,y,h){"use strict";var b,m,O,P,A,C,S,M,x,N,j,_,w,E,D,F,$,I,V,R,T,B,k,W,H;var L=h.AggregationHelper;var z=g.getResourceModel;var U=p.RefreshStrategyType;var J=r.convertTypes;var q=o.publicExtension;var G=o.privateExtension;var K=o.methodOverride;var Q=o.finalExtension;var X=o.extensible;var Y=o.defineUI5Class;function Z(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,tt(t,e)}function tt(t,e){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tt(t,e)}function et(t,e,o,n,i){var a={};return Object.keys(n).forEach(function(t){a[t]=n[t]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=o.slice().reverse().reduce(function(o,n){return n(t,e,o)||o},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(t,e,a),null):a}let ot=(b=Y("sap.fe.core.controllerextensions.InternalInternalBasedNavigation"),m=K(),O=q(),P=Q(),A=q(),C=Q(),S=q(),M=X(y.Instead),x=q(),N=Q(),j=G(),_=q(),w=Q(),E=q(),D=Q(),F=q(),$=Q(),I=q(),V=Q(),R=q(),T=Q(),B=q(),k=Q(),b(W=(H=function(o){function p(){return o.call(this)||this}Z(p,o);var g=p.prototype;g.onInit=function t(){this._oAppComponent=this.base.getAppComponent();this._oMetaModel=this._oAppComponent.getModel().getMetaModel();this._oNavigationService=this._oAppComponent.getNavigationService();this._oView=this.base.getView()};g.navigate=function t(o,n,i,r){try{if(this.navigationAlreadyStarted!==true){this.navigationAlreadyStarted=true;const t=()=>{const t=i&&i.navigationContexts;const a=t&&!Array.isArray(t)?[t]:t;const r=i&&i.semanticObjectMapping,s=i&&i.additionalNavigationParameters,p={semanticObject:o,action:n},l=this.base.getView(),g=l.getController();if(o&&n){let t=[],f=new u;if(a&&a.length){a.forEach(e=>{const o=e;const n=e;if(o.isA&&o.isA("sap.ui.model.odata.v4.Context")){let e=o.getObject();const n=this._oMetaModel.getMetaPath(o.getPath());const i=this.processSemanticAttributes(o,e);e=this.removeSensitiveData(i,n);const a=this.prepareContextForExternalNavigation(i,o);p["propertiesWithoutConflict"]=a.propertiesWithoutConflict;t.push(a.semanticAttributes)}else if(n&&!(n&&Array.isArray(n.data))&&typeof e==="object"){t.push(this.removeSensitiveData(n.data,n.metaPath))}else if(n&&Array.isArray(n.data)){t=this.removeSensitiveData(n.data,n.metaPath)}})}if(t&&t.length){f=this._oNavigationService.mixAttributesAndSelectionVariant(t,f.toJSONString())}const v=this._oView.getModel(),y=this.getEntitySet(),h=y?this._oNavigationService.constructContextUrl(y,v):undefined;if(h){f.setFilterContextUrl(h)}if(s){this._applyOutboundParams(f,s)}g.intentBasedNavigation.adaptNavigationContext(f,p);if(r){this._applySemanticObjectMappings(f,r)}this._removeTechnicalParameters(f);let b=g._intentBasedNavigation.getNavigationMode();const m=i&&i.refreshStrategies||{},O=l.getModel("internal");if(O){if((l&&l.getViewData()).refreshStrategyOnAppRestore){const t=l.getViewData().refreshStrategyOnAppRestore||{};e(m,t)}const t=c.getRefreshStrategyForIntent(m,o,n);if(t){O.setProperty("/refreshStrategyOnAppRestore",t)}}b=i?.navMode?i?.navMode:b;const P=function(){sap.ui.require(["sap/m/MessageBox"],function(t){const e=d.getResourceBundleFor("sap.fe.core");t.error(e.getText("C_COMMON_HELPER_NAVIGATION_ERROR_MESSAGE"),{title:e.getText("C_COMMON_SAPFE_ERROR")})})};this._oNavigationService.navigate(o,n,f.toJSONString(),undefined,P,undefined,b)}else{throw new Error("Semantic Object/action is not provided")}};if(r?.data("debounce"))return;r?.data("debounce",true);const s=this.base.getView().getBindingContext();const p=s&&s.getModel().getMetaModel();if(this.base.getView().getViewData().converterType==="ObjectPage"&&p&&!l.isStickySessionSupported(p)&&!(i?.navMode==="explace")){a.processDataLossOrDraftDiscardConfirmation(t.bind(this),Function.prototype,this.base.getView().getBindingContext(),this.base.getView().getController(),false,a.NavigationType.ForwardNavigation)}else{t()}r?.data("debounce",false)}}finally{this.navigationAlreadyStarted=false}};g.prepareContextForExternalNavigation=function t(e,o){const n={},i=o.getPath(),a=o.getModel().getMetaModel(),r=a.getMetaPath(i),s=r.split("/").filter(Boolean);function c(t,e){for(const o in t){if(t[o]===null||typeof t[o]!=="object"){if(!n[o]){n[o]=[]}n[o].push(e)}else{const n=t[o];c(n,`${e}/${o}`)}}}c(e,r);const p=s[0],l=a.getObject(`/${p}/@sapui.name`),g={};let u,f,d;for(const t in n){const i=n[t];let s;if(i.length>1){for(let n=0;n<=i.length-1;n++){const s=i[n];let c=s.replace(s===r?r:`${r}/`,"");c=(c===""?c:`${c}/`)+t;const p=a.getObject(`${s}/@sapui.name`);if(p===l){u=c}if(s===r){f=c}d=c;e[`${r}/${c}`.split("/").filter(function(t){return t!=""}).join(".")]=o.getProperty(c)}s=u||f||d;e[t]=o.getProperty(s);u=undefined;f=undefined;d=undefined}else{const n=i[0];let a=n.replace(n===r?r:`${r}/`,"");a=(a===""?a:`${a}/`)+t;e[t]=o.getProperty(a);g[t]=`${r}/${a}`.split("/").filter(function(t){return t!=""}).join(".")}}for(const t in e){if(e[t]!==null&&typeof e[t]==="object"){delete e[t]}}return{semanticAttributes:e,propertiesWithoutConflict:g}};g.getNavigationMode=function t(){return undefined};g.navigateWithConfirmationDialog=async function t(e,o,n,a){let r=true;if(a?.data("debounce"))return;a?.data("debounce",true);if(n?.notApplicableContexts&&n.notApplicableContexts?.length>=1){const t=this.base.getView().getModel().getMetaModel();const e=t.getMetaPath(n.notApplicableContexts[0].getPath());const a=J(t);const s=a.resolvePath(e).target;const c=new i({title:"",entityType:s.entityType,resourceModel:z(this.getView()),notApplicableContexts:n.notApplicableContexts,entitySet:s.name,actionName:o});n.navigationContexts=n.applicableContexts;r=await c.open(this.getView())}if(r){this.navigate(e,o,n)}a?.data("debounce",false)};g._removeTechnicalParameters=function t(e){e.removeSelectOption("@odata.context");e.removeSelectOption("@odata.metadataEtag");e.removeSelectOption("SAP__Messages")};g.getEntitySet=function t(){return this._oView.getViewData().entitySet};g.removeSensitiveData=function t(e,o,n){if(e){const{transAggregations:t,customAggregates:i}=this._getAggregates(o,this.base.getView(),this.base.getAppComponent().getDiagnostics());const a=Object.keys(e);if(!Array.isArray(e)&&a.length){delete e["@odata.context"];delete e["@odata.metadataEtag"];delete e["SAP__Messages"];for(const r of a){if(e[r]&&typeof e[r]==="object"){this.removeSensitiveData(e[r],`${o}/${r}`,n)}if(r.includes("@odata.type")){delete e[r];continue}this._deleteAggregates([...t,...i],r,e);const a=this._getPropertyAnnotations(r,o,e,n||this._oMetaModel);if(a){if(a.PersonalData?.IsPotentiallySensitive||a.UI?.ExcludeFromNavigationContext||a.Analytics?.Measure){delete e[r]}else if(a.Common?.FieldControl){const t=a.Common.FieldControl;if(t["$EnumMember"]&&t["$EnumMember"].split("/")[1]==="Inapplicable"||t["$Path"]&&this._isFieldControlPathInapplicable(t["$Path"],e)){delete e[r]}}}}}}return e};g._deleteAggregates=function t(e,o,n){if(e&&e.includes(o)){delete n[o]}};g._getPropertyAnnotations=function t(e,o,n,i){if(n[e]&&o&&!o.includes("undefined")){const t=i.createBindingContext(`${o}/${e}`);const n=r.getInvolvedDataModelObjects(t);return n?.targetObject?.annotations}return null};g._getAggregates=function t(e,o,n){const i=this._getConverterContext(e,o,n);const a=new L(i.getEntityType(),i);const r=a.isAnalyticsSupported();let s,c;if(r){const t=a.getTransAggregations();if(t?.length){s=t.map(t=>t.Name||t.Value)}c=a.getCustomAggregateDefinitions();if(c?.length){c=c.map(t=>t.qualifier)}}s??=[];c=c?c:[];return{transAggregations:s,customAggregates:c}};g._getConverterContext=function t(e,o,i){const a=o.getViewData();let r=a.entitySet;const s=a.contextPath;if(s&&(!r||r.includes("/"))){r=a?.fullContextPath.split("/")[1]}return n.getConverterContextForPath(e,o.getModel().getMetaModel(),r,i)};g._isFieldControlPathInapplicable=function t(e,o){let n=false;const i=e.split("/");if(i.length>1){n=!!(o[i[0]]&&o[i[0]].hasOwnProperty(i[1])&&o[i[0]][i[1]]===0)}else{n=o[e]===0}return n};g._applySemanticObjectMappings=function t(e,o){const n=typeof o==="string"?JSON.parse(o):o;for(const t of n){const o=t["LocalProperty"]&&t["LocalProperty"]["$PropertyPath"]||t["@com.sap.vocabularies.Common.v1.LocalProperty"]&&t["@com.sap.vocabularies.Common.v1.LocalProperty"]["$Path"];const n=t["SemanticObjectProperty"]||t["@com.sap.vocabularies.Common.v1.SemanticObjectProperty"];const i=e.getSelectOption(o);if(i&&o!==n){e.removeSelectOption(n);e.renameSelectOption(o,n)}}return e};g.storeFocusInfoInHistory=function t(){let e=null;const o=f.getActiveElement();const n=o?.getId();const i=o&&s.getMdcTable(o);if(o?.isA("sap.m.Button")){e={type:"Control",controlId:n}}else if(i){e={type:"Row",tableId:i.getId(),contextPathFocus:o.getBindingContext()?.getPath()}}history.replaceState(Object.assign({},history.state,{focusInfo:e}),"")};g.navigateOutbound=function e(o,n){this.storeFocusInfoInHistory();let i;const a=this.base.getAppComponent().getManifestEntry("sap.app"),r=a.crossNavigation?.outbounds?.[o];if(!r){t.error("Outbound is not defined in manifest!!");return}const s=r.semanticObject,c=r.action,p=r.parameters&&this.getOutboundParams(r.parameters);if(n){i=[];Object.keys(n).forEach(function(t){let e;const o=n[t];if(Array.isArray(o)){for(const n of o){e={};e[t]=n;i?.push(e)}}else{e={};e[t]=o;i?.push(e)}})}if(i||p){n={navigationContexts:{data:i||p}}}this.base._intentBasedNavigation.navigate(s,c,n)};g._applyOutboundParams=function t(e,o){const n=Object.keys(o);const i=e.getSelectOptionsPropertyNames();n.forEach(function(t){if(!i.includes(t)){e.addSelectOption(t,"I","EQ",o[t])}});return e};g.getOutboundParams=function t(e){const o={};if(e){const t=Object.keys(e)||[];if(t.length>0){t.forEach(function(t){const n=e[t];if(n.value&&n.value.value&&n.value.format==="plain"){if(!o[t]){o[t]=n.value.value}}})}}return o};g.onChevronPressNavigateOutBound=async function t(e,o,n,i,a){const r=e.getAppComponent().getRoutingService().getOutbounds();const s=r[o];let c;if(s&&s.semanticObject&&s.action){const t={intents:{}};const o={};let r;let p=[];if(n){if(Array.isArray(n)){p=n;r=l.getMetaPathForContext(n[0])}else if(n.isA&&n.isA("sap.ui.model.odata.v4.Context")){r=l.getMetaPathForContext(n);p=[n]}o[r]=U.Self;t._feDefault=o}if(i){const e=`${s.semanticObject}-${s.action}`;t.intents[e]={};t.intents[e][i]=U.Self}if(s&&s.parameters){const t=s.parameters&&this.getOutboundParams(s.parameters);if(Object.keys(t).length>0){c=t}}e._intentBasedNavigation.navigate(s.semanticObject,s.action,{navigationContexts:p,refreshStrategies:t,additionalNavigationParameters:c,navMode:a});return Promise.resolve()}else{throw new Error(`outbound target ${o} not found in cross navigation definition of manifest`)}};g.processSemanticAttributes=function t(e,o,n){const i=this.keepNavigationPropertiesForNavigation();if(!i){return this.getSemanticAttributesWithoutNavigationProperties(e,n)}else{return o}};g.keepNavigationPropertiesForNavigation=function t(){let e=false;const o=this.base.getAppComponent().getManifestEntry("sap.fe");e=o?.app?.considerNavigationPropertiesForExternalNavigation||false;return e};g.getSemanticAttributesWithoutNavigationProperties=function t(e,o){const n=e.getModel().getMetaModel(),i=e.getPath(),a=n.getMetaPath(i),r=e.getObject();const s=this.getNavigationPropertiesFromEntityType(n,a);if(s&&s.length>0){s.forEach(t=>{const e=t.name;if(Array.isArray(o)&&o.length>0){if(r.hasOwnProperty(e)&&r[e]){Object.keys(r[e]).forEach(function(t){const n=`${e}/${t}`;if(!o?.includes(n)&&r[e].hasOwnProperty(t)){delete r[e][t];if(Object.keys(r[e]).length===0){delete r[e]}}})}else{delete r[e]}}else if(r.hasOwnProperty(e)){delete r[e]}})}return r};g.getNavigationPropertiesFromEntityType=function t(e,o){const n=J(e);const i=n.resolvePath(`${o}/`).target;return i?.navigationProperties};return p}(v),et(H.prototype,"onInit",[m],Object.getOwnPropertyDescriptor(H.prototype,"onInit"),H.prototype),et(H.prototype,"navigate",[O,P],Object.getOwnPropertyDescriptor(H.prototype,"navigate"),H.prototype),et(H.prototype,"prepareContextForExternalNavigation",[A,C],Object.getOwnPropertyDescriptor(H.prototype,"prepareContextForExternalNavigation"),H.prototype),et(H.prototype,"getNavigationMode",[S,M],Object.getOwnPropertyDescriptor(H.prototype,"getNavigationMode"),H.prototype),et(H.prototype,"navigateWithConfirmationDialog",[x,N],Object.getOwnPropertyDescriptor(H.prototype,"navigateWithConfirmationDialog"),H.prototype),et(H.prototype,"getEntitySet",[j],Object.getOwnPropertyDescriptor(H.prototype,"getEntitySet"),H.prototype),et(H.prototype,"removeSensitiveData",[_,w],Object.getOwnPropertyDescriptor(H.prototype,"removeSensitiveData"),H.prototype),et(H.prototype,"navigateOutbound",[E,D],Object.getOwnPropertyDescriptor(H.prototype,"navigateOutbound"),H.prototype),et(H.prototype,"getOutboundParams",[F,$],Object.getOwnPropertyDescriptor(H.prototype,"getOutboundParams"),H.prototype),et(H.prototype,"onChevronPressNavigateOutBound",[I,V],Object.getOwnPropertyDescriptor(H.prototype,"onChevronPressNavigateOutBound"),H.prototype),et(H.prototype,"keepNavigationPropertiesForNavigation",[R,T],Object.getOwnPropertyDescriptor(H.prototype,"keepNavigationPropertiesForNavigation"),H.prototype),et(H.prototype,"getSemanticAttributesWithoutNavigationProperties",[B,k],Object.getOwnPropertyDescriptor(H.prototype,"getSemanticAttributesWithoutNavigationProperties"),H.prototype),H))||W);return ot},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/InternalRouting", ["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/CommonUtils","sap/fe/core/controllerextensions/BusyLocker","sap/fe/core/controllerextensions/editFlow/draft","sap/fe/core/controllerextensions/routing/ContextPathHelper","sap/fe/core/controllerextensions/routing/NavigationReason","sap/fe/core/helpers/EditState","sap/fe/core/helpers/ModelHelper","sap/ui/core/Component","sap/ui/core/Lib","sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution","../converters/MetaModelConverter","./messageHandler/messageHandling"],function(t,e,o,n,i,r,a,s,c,g,l,u,p,h,d){"use strict";var f,C,P,_,v,y,m,x,b,R,B,w,E,O,S,A,T,D,M,F,V,I,N,L;var H=h.getInvolvedDataModelObjects;var j=r.resolvePath;var $=r.isPathOnDraftRoot;var k=r.getDraftOrActiveContext;var K=e.publicExtension;var q=e.methodOverride;var z=e.finalExtension;var U=e.extensible;var W=e.defineUI5Class;function G(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Q(t,e)}function Q(t,e){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Q(t,e)}function J(t,e,o,n,i){var r={};return Object.keys(n).forEach(function(t){r[t]=n[t]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=o.slice().reverse().reduce(function(o,n){return n(t,e,o)||o},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer?(Object.defineProperty(t,e,r),null):r}let X=(f=W("sap.fe.core.controllerextensions.InternalRouting"),C=q(),P=q(),_=K(),v=U(p.After),y=K(),m=U(p.After),x=K(),b=U(p.After),R=K(),B=U(p.After),w=K(),E=K(),O=K(),S=z(),A=K(),T=z(),D=K(),M=K(),F=z(),V=K(),I=U(p.Before),f(N=(L=function(e){function r(){return e.apply(this,arguments)||this}G(r,e);var u=r.prototype;u.onExit=function t(){if(this._oRoutingService){this._oRoutingService.detachRouteMatched(this._fnRouteMatchedBound)}};u.onInit=function t(){this._oView=this.base.getView();this._oAppComponent=o.getAppComponent(this._oView);this._oPageComponent=g.getOwnerComponentFor(this._oView);this._oRouter=this._oAppComponent.getRouter();this._oRouterProxy=this._oAppComponent.getRouterProxy();if(!this._oAppComponent||!this._oPageComponent){throw new Error("Failed to initialize controler extension 'sap.fe.core.controllerextesions.InternalRouting")}if(this._oAppComponent===this._oPageComponent){this._oPageComponent=null}this._oAppComponent.getService("routingService").then(t=>{this._oRoutingService=t;this._fnRouteMatchedBound=this._onRouteMatched.bind(this);this._oRoutingService.attachRouteMatched({},this._fnRouteMatchedBound);this._oTargetInformation=t.getTargetInformationFor(this._oPageComponent||this._oView)??{};return}).catch(function(){throw new Error("This controller extension cannot work without a 'routingService' on the main AppComponent")})};u.onRouteMatched=function t(){};u.onRouteMatchedFinished=function t(){};u.onBeforeBinding=function t(e,o){};u.beforeSetBindingContext=function t(e,o){this.onBeforeBinding(e,o);const n=this.base.getView().getController().routing;if(n&&n.onBeforeBinding){n.onBeforeBinding(e)}};u.onAfterBinding=function t(e,o){this._oAppComponent.getRootViewController().onContextBoundToView(e)};u.afterSetBindingContext=function t(e,o){this.onAfterBinding(e,{...o,deferredCreation:true});const n=this.base.getView().getController().routing;if(n&&n.onAfterBinding){n.onAfterBinding(e)}};u.navigateToTarget=async function t(e,o,n,i){const r=this._oPageComponent&&this._oPageComponent.getNavigationConfiguration&&this._oPageComponent.getNavigationConfiguration(o);if(r){const t=r.detail;const o=t.route;const a=t.parameters;return this._oRoutingService.navigateTo(e,o,a,n,i)}else{return this._oRoutingService.navigateTo(e,null,null,n,i)}};u.getHashForNavigation=async function t(e,o){const n=this?._oPageComponent?.getNavigationConfiguration(o);if(n){const t=n.detail;const o=t.route;const i=t.parameters;return this._oRoutingService.getHashFromRoute(e,o,i)}else{return this._oRoutingService.getHashFromRoute(e,null)}};u.navigateToRoute=async function t(e,o){return this._oRoutingService.navigateToRoute(e,o)};u.navigateToContext=async function e(o){let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(o.isA("sap.ui.model.odata.v4.ODataListBinding")){if(n.createOnNavigateParameters?.mode==="Async"){this._oRouterProxy.activateRouteMatchSynchronization();n.createOnNavigateParameters.createContextPromise.then(async t=>this.navigateToContext(t,{checkNoHashChange:n.checkNoHashChange,editable:n.editable,persistOPScroll:n.persistOPScroll,updateFCLLevel:n.updateFCLLevel,forceFocus:n.forceFocus})).catch(function(e){t.error("Error with the async context",e)})}else if(n.createOnNavigateParameters?.mode!=="Deferred"){throw"navigation to a list binding is not yet supported"}}else if(n.callExtension){const t=this._oView.getModel("internal");t.setProperty("/paginatorCurrentContext",null);const e=await this.base.getView().getController().routing.onBeforeNavigation({bindingContext:o});if(e){t.setProperty("/paginatorCurrentContext",o);return Promise.resolve(true)}}n.FCLLevel=this._getFCLLevel();if(n.reason===a.RowPress&&o.isA("sap.ui.model.odata.v4.Context")){const t=o.getModel();const e=t.getMetaModel();if($(o.getPath(),e)){const t=await this.getContextForNavigationWithCollaboration(o,n)??await this.getContextForNavigationFromTreeOrAnalyticalTable(o);if(t){o=t}}}return this._oRoutingService.navigateToContext(o,n,this._oView.getViewData(),this._oTargetInformation)};u.getContextForNavigationWithCollaboration=async function t(e,o){const n=e.getModel();const i=n.getMetaModel();if(c.isCollaborationDraftSupported(i)&&e.getProperty("IsActiveEntity")===false){const t=await k(e);if(t!==null&&e.getPath()!==t.getPath()){const r=H(i.getMetaContext(e.getPath()));o.redirectedToNonDraft=r.targetEntityType.annotations.UI?.HeaderInfo?.TypeName??r.targetEntityType.name;if(this._oAppComponent.getRootViewController().isFclEnabled()){const o=n.getKeepAliveContext(t.getPath());e.replaceWith(o)}else{s.setEditStateDirty()}return t}}return null};u.getContextForNavigationFromTreeOrAnalyticalTable=async function t(e){const o=e.getBinding();if(!o.isA("sap.ui.model.odata.v4.ODataListBinding")){return null}const n=o.getAggregation();if(!n?.hierarchyQualifier&&!n?.group&&!n?.aggregate){return null}if(e.getProperty("IsActiveEntity")===true&&e.getProperty("HasDraftEntity")===true){const t=await k(e);if(t!==null&&e.getPath()!==t.getPath()){return t}}return null};u.navigateBackFromContext=async function t(e){let o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};o.updateFCLLevel=-1;return this.navigateToContext(e,o)};u.navigateForwardToContext=async function t(e){let o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this._oView.getBindingContext("internal")?.getProperty("messageFooterContainsErrors")===true){return Promise.resolve(true)}o.updateFCLLevel=1;return this.navigateToContext(e,o)};u.navigateBackFromTransientState=function t(){const e=this._oRouterProxy.getHash();if(e.includes("(...)")){this._oRouterProxy.navBack()}};u.navigateToMessagePage=async function t(e,o){o=o||{};if(this._oRouterProxy.getHash().includes("i-action=create")||this._oRouterProxy.getHash().includes("i-action=autoCreate")){return this._oRouterProxy.navToHash(this._oRoutingService.getDefaultCreateHash())}else{return this._oAppComponent.getRootViewController().displayErrorPage(e,o,this._getFCLLevel())}};u.isCurrentStateImpactedBy=function t(e){return this._oRoutingService.isCurrentStateImpactedBy(e)};u._isViewPartOfRoute=function t(e){const o=e?.targets;if(!o||!o.includes(this._oTargetInformation.targetName)){if((this._oTargetInformation.viewLevel??0)>=(e?.routeLevel??0)){setTimeout(()=>{if(e?.routeLevel===0&&this.base.collaborativeDraft.isConnected()){this.base.collaborativeDraft.disconnect()}this._setBindingContext(null)},0)}return false}return true};u._buildBindingPath=function t(e,o,n){let i=o.replace(":?query:","");let r=false;for(const t in e){const a=e[t];if(typeof a!=="string"){continue}if(a==="..."&&o.includes(`{${t}}`)){r=true;n.bTargetEditable=true}i=i.replace(`{${t}}`,a)}if(e["?query"]?.["i-action"]?.includes("create")){n.bActionCreate=true}if(i&&i[0]!=="/"){i=`/${i}`}return{path:i,deferred:r}};u._onRouteMatched=function e(o){if(!this._isViewPartOfRoute(o.getParameter("routeInformation"))){return}let n;if(this._oPageComponent&&this._oPageComponent.getBindingContextPattern){n=this._oPageComponent.getBindingContextPattern()}n=n||this._oTargetInformation.contextPattern;if(n===null||n===undefined){n=o.getParameter("routePattern")}const i=o.getParameters().arguments;const r=o.getParameter("navigationInfo");const{path:s,deferred:c}=this._buildBindingPath(i,n,r);this.onRouteMatched();let g;const l=this._oView.getModel();if(c){g=this._bindDeferred(s,r)}else if(r.reason!==a.EditFlowAction&&(this._oRouterProxy.getHash().includes("i-action=edit")||(this._oPageComponent?.isOpenInEditMode?.()??false))){g=this._bindPageForEdit(s,l,r)}else{g=this._bindPage(s,l,r)}g.finally(()=>{this.onRouteMatchedFinished()}).catch(e=>{t.error("Error during page binding "+e.toString())});this._oAppComponent.getRootViewController().updateUIStateForView(this._oView,this._getFCLLevel())};u._bindDeferred=async function t(e,o){this.beforeSetBindingContext(null,{editable:o.bTargetEditable});if(!o.createOnNavigateParameters||o.createOnNavigateParameters.mode==="Deferred"){if(this._oPageComponent&&this._oPageComponent.createDeferredContext){this._oPageComponent.createDeferredContext(e,o.createOnNavigateParameters?.listBinding,o.createOnNavigateParameters?.parentContext,o.createOnNavigateParameters?.data,!!o.bActionCreate)}}const n=this._getBindingContext();if(n?.hasPendingChanges()){n.getBinding().resetChanges()}this._setBindingContext(null);this.afterSetBindingContext(null);return Promise.resolve()};u._bindPageForEdit=async function t(e,n,i){if(e===""){return Promise.resolve(this._bindPageToContext(null,n,i))}try{const t=await j(e,n,this._oRoutingService,this._oRouter);const r=n.getMetaModel();const a=o.isStickyEditMode(this.base.getView());const s=c.isStickySessionSupported(r);if(t.includes("IsActiveEntity=true")||s&&!a){const e=i.useContext?.getPath()===t?i.useContext:this._createContext(t,n);return await this.base.editFlow.editDocument(e)}else{return this._bindPageToPath(t,n,i)}}catch(t){const e=l.getResourceBundleFor("sap.fe.core");this.navigateToMessagePage(e.getText("C_COMMON_SAPFE_DATA_RECEIVED_ERROR"),{title:e.getText("C_COMMON_SAPFE_ERROR"),description:t.message})}};u._bindPage=async function t(e,o,n){if(e===""){return Promise.resolve(this._bindPageToContext(null,o,n))}return j(e,o,this._oRoutingService,this._oRouter).then(t=>this._bindPageToPath(t,o,n)).catch(t=>{const e=l.getResourceBundleFor("sap.fe.core");this.navigateToMessagePage(e.getText("C_COMMON_SAPFE_DATA_RECEIVED_ERROR"),{title:e.getText("C_COMMON_SAPFE_ERROR"),description:t.message})})};u._bindPageToPath=function e(o,n,i){const r=this._getBindingContext(),g=r&&r.getPath(),l=i.useContext;const u=this._oAppComponent.getRootViewController();if(l&&l.getPath()===o){if(l!==r){let e=false;if(u.isFclEnabled()&&i.reason===a.RowPress){const t=l.getModel().getMetaModel();if(!l.getBinding().hasPendingChanges()&&c.isDraftSupported(t,l.getPath())){e=true}else if(this.base.collaborativeDraft.isConnected()||c.isDraftSupported(t,l.getPath())&&c.isCollaborationDraftSupported(t)){l.getBinding().resetChanges();e=true}}this._bindPageToContext(l,n,i);if(e){this._oAppComponent.getSideEffectsService().requestSideEffects([{$NavigationPropertyPath:""}],l,l.getBinding().getGroupId()).catch(e=>{t.error(`Cannot refresh context: ${e}`)})}}else if(i.reason===a.EditFlowAction){this.beforeSetBindingContext(l,{editable:i.bTargetEditable,listBinding:l.getBinding(),bPersistOPScroll:i.bPersistOPScroll,reason:i.reason,showPlaceholder:i.bShowPlaceholder});this.afterSetBindingContext(l,{redirectedToNonDraft:i?.redirectedToNonDraft})}}else if(g!==o||i.reason===a.EditFlowAction){this._bindPageToContext(this._createContext(o,n),n,i)}else if(i.reason!==a.AppStateChanged&&i.reason!==a.RestoreHistory&&s.isEditStateDirty()&&!u.isFclEnabled()&&r){this._refreshBindingContext(r)}};u._bindPageToContext=function e(o,n,i){if(!o){this.beforeSetBindingContext(null);this.afterSetBindingContext(null);return}const r=o.getBinding();const a=this._oAppComponent.getRootViewController();if(a.isFclEnabled()){if(!r||!r.isA("sap.ui.model.odata.v4.ODataListBinding")){o=this._createContext(o.getPath(),n)}try{this._setKeepAlive(o,true,()=>{if(o&&!this._oAppComponent.isExiting&&a.isContextUsedInPages(o)){this.navigateBackFromContext(o)}},true)}catch(e){t.error(`View for ${o.getPath()} won't be synchronized. Parent listBinding must have binding parameter $$ownRequest=true`)}}else if(!r||r.isA("sap.ui.model.odata.v4.ODataListBinding")){o=this._createContext(o.getPath(),n)}this.beforeSetBindingContext(o,{editable:i.bTargetEditable,listBinding:r,bPersistOPScroll:i.bPersistOPScroll,reason:i.reason,showPlaceholder:i.bShowPlaceholder});this._setBindingContext(o);this.afterSetBindingContext(o,{redirectedToNonDraft:i?.redirectedToNonDraft})};u._createContext=function t(e,o){const i=this._oPageComponent,r=i&&i.getEntitySet&&i.getEntitySet(),a=i&&i.getContextPath&&i.getContextPath()||r&&`/${r}`,s=o.getMetaModel(),g={$$groupId:"$auto.Heroes",$$updateGroupId:"$auto",$$patchWithoutSideEffects:true};const l=s.getObject(`${a}@com.sap.vocabularies.Common.v1.DraftRoot`);const u=s.getObject(`${a}@com.sap.vocabularies.Common.v1.DraftNode`);const p=a?s.getContext(a)&&H(s.getContext(a)):null;const h=c.getAlternateAndSecondaryKeys(p?.targetEntityType,p?.targetEntitySet);const d=l?p?.targetEntityType.annotations.Common?.SemanticKey?.map(t=>t.value)??[]:[];const f=this._oAppComponent.getRootViewController();if(f.isFclEnabled()){const t=this._getKeepAliveContext(o,e,false,g);if(!t){throw new Error(`Cannot create keepAlive context ${e}`)}else if(l||u){const e=["HasActiveEntity","HasDraftEntity","IsActiveEntity"].concat(d);if(t.getProperty("IsActiveEntity")===undefined){t.requestProperty(e);if(l){t.requestObject("DraftAdministrativeData")}}else{t.requestSideEffects(l?e.concat(["DraftAdministrativeData"]):e)}}return t}else{const t=[];if(a){const e=c.getMessagesPath(s,a);if(e){t.push(e)}}if(l||u){t.push("HasActiveEntity","HasDraftEntity","IsActiveEntity");t.push(...d)}t.push(...h);if(t.length){g.$select=t.join(",")}if(this._oView.getBindingContext()){const t=this._oView.getBindingContext()?.getBinding();if(t){o.resetChanges(t.getUpdateGroupId());t.destroy()}}const i=o.bindContext(e,undefined,g);i.attachEventOnce("dataRequested",()=>{n.lock(this._oView)});i.attachEventOnce("dataReceived",this.onDataReceived.bind(this));return i.getBoundContext()}};u.onDataReceived=async function e(o){const i=o?.getParameter("error");if(n.isLocked(this._oView)){n.unlock(this._oView)}if(i){const e=this.base.messageHandler;const o=e.registerToHoldMessages();let n={};const r=i.status??i.cause?.status;try{const t=l.getResourceBundleFor("sap.fe.core");if(r===503){n={isInitialLoad503Error:true,shellBack:true}}else if(r===400){n={title:t.getText("C_COMMON_SAPFE_ERROR"),description:t.getText("C_COMMON_SAPFE_DATA_RECEIVED_ERROR_DESCRIPTION"),isDataReceivedError:true,shellBack:true}}else{n={title:t.getText("C_COMMON_SAPFE_ERROR"),description:i?.message,isDataReceivedError:true,shellBack:true}}}catch(e){t.error("Error while getting the core resource bundle",e)}finally{n.unHoldKey=o;await e.showMessages(n)}}};u._refreshBindingContext=function t(e){const o=this._oPageComponent;const n=this._oAppComponent.getSideEffectsService();const i=e.getPath();const r=o&&o.getEntitySet&&o.getEntitySet();const a=o&&o.getContextPath&&o.getContextPath()||r&&`/${r}`;const s=this._oView.getModel().getMetaModel();let g;const l=[];const u=[];const p={targetProperties:[],targetEntities:[]};function h(t){let e;const o=(t.getContext()?.getPath()??"").replace(i,"");const n=(o?`${o.slice(1)}/`:o)+t.getPath();if(t.isA("sap.ui.model.odata.v4.ODataContextBinding")){e=t.getDependentBindings();if(e){for(const t of e){h(t)}}else if(!l.includes(n)){l.push(n)}}else if(t.isA("sap.ui.model.odata.v4.ODataListBinding")){if(!l.includes(n)){l.push(n)}}else if(t.isA("sap.ui.model.odata.v4.ODataPropertyBinding")){if(!u.includes(n)){u.push(n)}}}if(a){g=c.getMessagesPath(s,a)}h(e.getBinding());let d;for(d=0;d<l.length;d++){p.targetEntities.push({$NavigationPropertyPath:l[d]})}p.targetProperties=u;if(g){p.targetProperties.push(g)}p.targetProperties=p.targetProperties.reduce((t,e)=>{if(e){const o=e.indexOf("/");t.push(o>0?e.slice(0,o):e)}return t},[]);n.requestSideEffects([...p.targetEntities,...p.targetProperties],e)};u._getBindingContext=function t(){if(this._oPageComponent){return this._oPageComponent.getBindingContext()}else{return this._oView.getBindingContext()}};u._setBindingContext=function t(e){let o,n;if(this._oPageComponent){o=this._oPageComponent.getBindingContext();n=this._oPageComponent}else{o=this._oView.getBindingContext();n=this._oView}n.setBindingContext(e);if(o?.isKeepAlive()&&o!==e){this._setKeepAlive(o,false)}};u._getFCLLevel=function t(){return this._oTargetInformation.FCLLevel};u._setKeepAlive=function t(e,o,n,i){if(e.getPath().endsWith(")")){const t=e.getModel().getMetaModel();const r=t.getMetaPath(e.getPath());const a=c.getMessagesPath(t,r);e.setKeepAlive(o,n,!!a&&i)}};u._getKeepAliveContext=function t(e,o,n,i){const r=o.split("/");const a=[];while(r.length&&!r[r.length-1].endsWith(")")){a.push(r.pop())}if(r.length===0){return undefined}const s=r.join("/");const c=e.getKeepAliveContext(s,n,i);if(a.length===0){return c}else{a.reverse();const t=a.join("/");return e.bindContext(t,c).getBoundContext()}};u.switchFullScreen=function e(){const o=this.base.getView();const n=o.getModel("fclhelper"),i=n.getProperty("/actionButtonsInfo/isFullScreen"),r=n.getProperty(i?"/actionButtonsInfo/exitFullScreen":"/actionButtonsInfo/fullScreen"),a=this._oAppComponent.getRootViewController();const s=a.getRightmostContext?a.getRightmostContext():o.getBindingContext();this.base._routing.navigateToContext(s,{layout:r}).catch(function(){t.warning("cannot switch between column and fullscreen")})};u.closeColumn=function t(){const e=this._oView.getViewData();const o=this._oView.getBindingContext();const n=o.getModel().getMetaModel();const r={noPreservationCache:true,sLayout:this._oView.getModel("fclhelper").getProperty("/actionButtonsInfo/closeColumn")};if(e?.viewLevel===1&&c.isDraftSupported(n,o.getPath())){i.processDataLossOrDraftDiscardConfirmation(()=>{this.navigateBackFromContext(o,r)},Function.prototype,o,this._oView.getController(),false,i.NavigationType.BackNavigation)}else{this.navigateBackFromContext(o,r)}d.removeTransistionMessageForContext(o)};return r}(u),J(L.prototype,"onExit",[C],Object.getOwnPropertyDescriptor(L.prototype,"onExit"),L.prototype),J(L.prototype,"onInit",[P],Object.getOwnPropertyDescriptor(L.prototype,"onInit"),L.prototype),J(L.prototype,"onRouteMatched",[_,v],Object.getOwnPropertyDescriptor(L.prototype,"onRouteMatched"),L.prototype),J(L.prototype,"onRouteMatchedFinished",[y,m],Object.getOwnPropertyDescriptor(L.prototype,"onRouteMatchedFinished"),L.prototype),J(L.prototype,"onBeforeBinding",[x,b],Object.getOwnPropertyDescriptor(L.prototype,"onBeforeBinding"),L.prototype),J(L.prototype,"onAfterBinding",[R,B],Object.getOwnPropertyDescriptor(L.prototype,"onAfterBinding"),L.prototype),J(L.prototype,"navigateToTarget",[w],Object.getOwnPropertyDescriptor(L.prototype,"navigateToTarget"),L.prototype),J(L.prototype,"navigateToRoute",[E],Object.getOwnPropertyDescriptor(L.prototype,"navigateToRoute"),L.prototype),J(L.prototype,"navigateBackFromTransientState",[O,S],Object.getOwnPropertyDescriptor(L.prototype,"navigateBackFromTransientState"),L.prototype),J(L.prototype,"isCurrentStateImpactedBy",[A,T],Object.getOwnPropertyDescriptor(L.prototype,"isCurrentStateImpactedBy"),L.prototype),J(L.prototype,"onDataReceived",[D],Object.getOwnPropertyDescriptor(L.prototype,"onDataReceived"),L.prototype),J(L.prototype,"switchFullScreen",[M,F],Object.getOwnPropertyDescriptor(L.prototype,"switchFullScreen"),L.prototype),J(L.prototype,"closeColumn",[V,I],Object.getOwnPropertyDescriptor(L.prototype,"closeColumn"),L.prototype),L))||N);return X},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/KPIManagement", ["sap/base/Log","sap/base/i18n/Localization","sap/fe/base/ClassSupport","sap/fe/core/formatters/ValueFormatter","sap/m/Popover","sap/ui/core/Lib","sap/ui/core/Locale","sap/ui/core/format/DateFormat","sap/ui/core/format/NumberFormat","sap/ui/core/message/MessageType","sap/ui/core/mvc/ControllerExtension","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/model/json/JSONModel"],function(e,t,a,n,i,r,o,s,l,c,d,u,p,f){"use strict";var m,g,h,y,P;var b=a.methodOverride;var v=a.defineUI5Class;function D(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,C(e,t)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function I(e,t,a,n,i){var r={};return Object.keys(n).forEach(function(e){r[e]=n[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=a.slice().reverse().reduce(function(a,n){return n(e,t,a)||a},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer?(Object.defineProperty(e,t,r),null):r}const N={1:c.Error,2:c.Warning,3:c.Success,5:c.Information};const x={Error:"Error",Warning:"Critical",Success:"Good",Information:"None",None:"None"};function $(e,t){let a;if(t[0]!==undefined&&t[0]!==null&&e<t[0]){a=c.Error}else if(t[1]!==undefined&&t[1]!==null&&e<t[1]){a=c.Warning}else if(t[2]!==undefined&&t[2]!==null&&e<t[2]){a=c.None}else if(t[5]!==undefined&&t[5]!==null&&e>t[5]){a=c.Error}else if(t[4]!==undefined&&t[4]!==null&&e>t[4]){a=c.Warning}else if(t[3]!==undefined&&t[3]!==null&&e>t[3]){a=c.None}else{a=c.Success}return a}function T(e,t){let a;if(t[2]!==undefined&&t[2]!==null&&e>t[2]){a=c.Error}else if(t[1]!==undefined&&t[1]!==null&&e>t[1]){a=c.Warning}else if(t[0]!==undefined&&t[0]!==null&&e>t[0]){a=c.None}else{a=c.Success}return a}function w(e,t){let a;if(t[0]!==undefined&&t[0]!==null&&e<t[0]){a=c.Error}else if(t[1]!==undefined&&t[1]!==null&&e<t[1]){a=c.Warning}else if(t[2]!==undefined&&t[2]!==null&&e<t[2]){a=c.None}else{a=c.Success}return a}function F(e){let t;switch(e){case 1:case"1":case 2:case"2":t="Up";break;case 4:case"4":case 5:case"5":t="Down";break;default:t="None"}return t}function A(e,t,a,n){let i;if(!n||a&&!t){return"None"}const r=a?(e-t)/t:e-t;if(n[0]!==undefined&&n[0]!==null&&r<=n[0]){i="Down"}else if(n[1]!==undefined&&n[1]!==null&&r<=n[1]){i="Down"}else if(n[3]!==undefined&&n[3]!==null&&r>=n[3]){i="Up"}else if(n[2]!==undefined&&n[2]!==null&&r>=n[2]){i="Up"}else{i="None"}return i}function S(e){if(e.ranges.length===0){return undefined}else if(e.ranges.length===1){return new u(e.propertyPath,e.ranges[0].operator,e.ranges[0].rangeLow,e.ranges[0].rangeHigh)}else{const t=e.ranges.map(t=>new u(e.propertyPath,t.operator,t.rangeLow,t.rangeHigh));return new u({filters:t,and:false})}}function j(e){const a=new o(t.getLanguage());const n=r.getResourceBundleFor("sap.fe.core");const i=s.getDateInstance({style:"medium"},a);function l(t){const a=e.propertyType.indexOf("Edm.Date")===0?i.format(new Date(t.rangeLow)):t.rangeLow;const r=e.propertyType.indexOf("Edm.Date")===0&&t.rangeHigh!==undefined?i.format(new Date(t.rangeHigh)):t.rangeHigh;switch(t.operator){case"BT":return`[${a} - ${r}]`;case"Contains":return`*${a}*`;case"GE":return`≥${a}`;case"GT":return`>${a}`;case"LE":return`≤${a}`;case"LT":return`<${a}`;case"NB":return n.getText("C_KPICARD_FILTERSTRING_NOT",[`[${a} - ${r}]`]);case"NE":return`≠${a}`;case"NotContains":return n.getText("C_KPICARD_FILTERSTRING_NOT",[`*${a}*`]);case"EQ":default:return a}}if(e.ranges.length===0){return""}else if(e.ranges.length===1){return l(e.ranges[0])}else{return`(${e.ranges.map(l).join(",")})`}}function O(e){const t=r.getResourceBundleFor("sap.fe.core");function a(e){if(e.length===0){return""}else if(e.length===1){return e[0].label}else{let a=e[0].label;for(let t=1;t<e.length-1;t++){a+=`, ${e[t].label}`}return t.getText("C_KPICARD_ITEMSLIST",[a,e[e.length-1].label])}}return e.chart.title??t.getText("C_KPICARD_CHARTTITLE",[a(e.chart.measures),a(e.chart.dimensions)])}function V(e,t){switch(e.chartType){case"Donut":t.categoryAxis={title:{visible:false}};t.valueAxis={title:{visible:false},label:{formatString:"ShortFloat"}};t.plotArea.dataLabel={visible:true,type:"value",formatString:"ShortFloat_MFD2"};break;case"bubble":t.valueAxis={title:{visible:true},label:{formatString:"ShortFloat"}};t.valueAxis2={title:{visible:true},label:{formatString:"ShortFloat"}};t.legendGroup={layout:{position:"bottom",alignment:"topLeft"}};t.sizeLegend={visible:true};t.plotArea.dataLabel={visible:false};break;case"scatter":t.valueAxis={title:{visible:false},label:{formatString:"ShortFloat"}};t.valueAxis2={title:{visible:false},label:{formatString:"ShortFloat"}};t.plotArea.dataLabel={visible:false};break;default:t.categoryAxis={title:{visible:false}};t.valueAxis={title:{visible:false},label:{formatString:"ShortFloat"}};t.plotArea.dataLabel={visible:false}}}function M(e,t){if(t&&t.length){return e.filter(e=>t.includes(e.role)).map(e=>e.label)}else{return e.map(e=>e.label)}}function E(e){const t=M(e.measures,["Axis1"]);const a=M(e.measures,["Axis2"]);const n=M(e.measures,["Axis3"]);const i=M(e.measures,[undefined]);const r=M(e.dimensions,["Series"]);const o=e.dimensions.find(e=>e.role==="Category");const s=t.shift()||a.shift()||n.shift()||i.shift()||"";const l=a.shift()||t.shift()||n.shift()||i.shift()||"";const c=[{uid:"valueAxis",type:"Measure",values:[s]},{uid:"valueAxis2",type:"Measure",values:[l]}];if(e.chartType==="bubble"){const e=n.shift()||t.shift()||a.shift()||i.shift()||"";c.push({uid:"bubbleWidth",type:"Measure",values:[e]})}if(r.length){c.push({uid:"color",type:"Dimension",values:r})}if(o){c.push({uid:"shape",type:"Dimension",values:[o.label]})}return c}function L(e){let t;switch(e.chartType){case"Donut":t=[{uid:"size",type:"Measure",values:M(e.measures)},{uid:"color",type:"Dimension",values:M(e.dimensions)}];break;case"bubble":case"scatter":t=E(e);break;case"vertical_bullet":t=[{uid:"actualValues",type:"Measure",values:M(e.measures,[undefined,"Axis1"])},{uid:"targetValues",type:"Measure",values:M(e.measures,["Axis2"])},{uid:"categoryAxis",type:"Dimension",values:M(e.dimensions,[undefined,"Category"])},{uid:"color",type:"Dimension",values:M(e.dimensions,["Series"])}];break;default:t=[{uid:"valueAxis",type:"Measure",values:M(e.measures)},{uid:"categoryAxis",type:"Dimension",values:M(e.dimensions,[undefined,"Category"])},{uid:"color",type:"Dimension",values:M(e.dimensions,["Series"])}]}return t}async function R(e,t){if(e.semanticObject){if(e.action){return t.getLinks([{semanticObject:e.semanticObject,action:e.action}]).then(t=>t.length&&t[0].length?{semanticObject:e.semanticObject,action:e.action}:undefined)}else{return t.getPrimaryIntent(e.semanticObject).then(a=>{if(!a){return undefined}const n=t.parseShellHash(a.intent);return e.unavailableActions&&e.unavailableActions.includes(n.action)?undefined:{semanticObject:n.semanticObject,action:n.action}})}}else{return e.outboundNavigation?Promise.resolve({outbound:e.outboundNavigation}):Promise.resolve(undefined)}}let k=(m=v("sap.fe.core.controllerextensions.KPIManagement"),g=b(),h=b(),m(y=(P=function(a){function s(){return a.call(this)||this}D(s,a);var d=s.prototype;d.initCardManifest=function e(t,a){const n={"sap.app":{id:"sap.fe.KPICard",type:"card"},"sap.ui":{technology:"UI5"},"sap.card":{type:"Analytical",data:{json:{}},header:{type:"Numeric",title:t.datapoint.title,subTitle:t.datapoint.description,unitOfMeasurement:"{mainUnit}",mainIndicator:{number:"{mainValueNoScale}",unit:"{mainValueScale}",state:"{mainState}",trend:"{trend}"}},content:{minHeight:"25rem",chartProperties:{plotArea:{},title:{visible:true,alignment:"left"}},data:{path:"/chartData"}}}};if(t.datapoint.targetPath||t.datapoint.targetValue!==undefined){const e=r.getResourceBundleFor("sap.fe.core");n["sap.card"].header.sideIndicators=[{title:e.getText("C_KPICARD_INDICATOR_TARGET"),number:"{targetNumber}",unit:"{targetUnit}"},{title:e.getText("C_KPICARD_INDICATOR_DEVIATION"),number:"{deviationNumber}",unit:"%"}]}if(t.selectionVariantFilterDefinitions?.length){const e=[];t.selectionVariantFilterDefinitions.forEach(t=>{const a=j(t);if(a){e.push(a)}});if(e.length){n["sap.card"].header.details=e.join(", ")}}n["sap.card"].content.chartType=t.chart.chartType;V(t.chart,n["sap.card"].content.chartProperties);n["sap.card"].content.chartProperties.title.text=O(t);n["sap.card"].content.dimensions=t.chart.dimensions.map(e=>({label:e.label,value:`{${e.name}}`}));n["sap.card"].content.measures=t.chart.measures.map(e=>({label:e.label,value:`{${e.name}}`}));n["sap.card"].content.feeds=L(t.chart);a.setProperty(`/${t.id}`,{manifest:n})};d.initNavigationInfo=async function e(t,a,n){if(t.navigation){return R(t.navigation,n).then(e=>{if(e){a.setProperty(`/${t.id}/manifest/sap.card/header/actions`,[{type:"Navigation",parameters:e}])}return})}else{return Promise.resolve()}};d.onInit=function t(){this.aKPIDefinitions=this.getView().getController()._getPageModel()?.getProperty("/kpiDefinitions");if(this.aKPIDefinitions&&this.aKPIDefinitions.length){const t=this.getView();const a=t.getController().getAppComponent();const n=new f;t.setModel(n,"kpiModel");this.aKPIDefinitions.forEach(t=>{if(t.type==="Analytical"){this.initCardManifest(t,n);this.initNavigationInfo(t,n,a.getShellServices()).catch(function(t){e.error(t)});this.loadKPITagData(t,a.getModel(),n).catch(function(t){e.error(t)})}})}};d.onExit=function e(){const t=this.getView().getModel("kpiModel");if(t){t.destroy()}};d.updateDatapointValueAndCurrency=function e(a,n,i){const r=new o(t.getLanguage());const s=a.datapoint.unit?.isPath?n.getProperty(a.datapoint.unit.value):a.datapoint.unit?.value;const c=a.datapoint.unit?.isCurrency===false&&s==="%";const d=Number.parseFloat(n.getProperty(a.datapoint.propertyPath));const u=l.getFloatInstance({style:c?undefined:"short",minFractionDigits:0,maxFractionDigits:a.datapoint.numberOfFractionalDigits??1,showScale:!c},r).format(d);i.setProperty(`/${a.id}/manifest/sap.card/data/json/mainValue`,u);const p=l.getFloatInstance({maxFractionDigits:a.datapoint.numberOfFractionalDigits??2,showScale:false,groupingEnabled:true},r).format(d);i.setProperty(`/${a.id}/manifest/sap.card/data/json/mainValueUnscaled`,p);const f=l.getFloatInstance({style:c?undefined:"short",minFractionDigits:0,maxFractionDigits:a.datapoint.numberOfFractionalDigits??1,showScale:false},r).format(d);i.setProperty(`/${a.id}/manifest/sap.card/data/json/mainValueNoScale`,f);const m=l.getFloatInstance({style:c?undefined:"short",decimals:0,maxIntegerDigits:0,showScale:true},r).format(d);i.setProperty(`/${a.id}/manifest/sap.card/data/json/mainValueScale`,m);if(a.datapoint.unit&&s){if(a.datapoint.unit.isCurrency){i.setProperty(`/${a.id}/manifest/sap.card/data/json/mainUnit`,s)}else{const e=l.getUnitInstance({showNumber:false},r).format(d,s);i.setProperty(`/${a.id}/manifest/sap.card/data/json/mainUnit`,e)}}};d.updateDatapointCriticality=function e(t,a,n){const i=Number.parseFloat(a.getProperty(t.datapoint.propertyPath));let r=c.None;if(t.datapoint.criticalityValue!=null){r=t.datapoint.criticalityValue}else if(t.datapoint.criticalityPath){r=N[a.getProperty(t.datapoint.criticalityPath)]||c.None}else if(t.datapoint.criticalityCalculationThresholds&&t.datapoint.criticalityCalculationMode!=null){switch(t.datapoint.criticalityCalculationMode){case"UI.ImprovementDirectionType/Target":r=$(i,t.datapoint.criticalityCalculationThresholds);break;case"UI.ImprovementDirectionType/Minimize":r=T(i,t.datapoint.criticalityCalculationThresholds);break;case"UI.ImprovementDirectionType/Maximize":default:r=w(i,t.datapoint.criticalityCalculationThresholds);break}}n.setProperty(`/${t.id}/manifest/sap.card/data/json/mainCriticality`,r);n.setProperty(`/${t.id}/manifest/sap.card/data/json/mainState`,x[r]||"None")};d.updateDatapointTrend=function e(t,a,n){const i=Number.parseFloat(a.getProperty(t.datapoint.propertyPath));let r="None";if(t.datapoint.trendValue){r=t.datapoint.trendValue}else if(t.datapoint.trendPath){r=F(a.getProperty(t.datapoint.trendPath))}else if(t.datapoint.trendCalculationReferenceValue!==undefined||t.datapoint.trendCalculationReferencePath){let e;if(t.datapoint.trendCalculationReferenceValue!==undefined){e=t.datapoint.trendCalculationReferenceValue}else{e=Number.parseFloat(a.getProperty(t.datapoint.trendCalculationReferencePath||""))}r=A(i,e,!!t.datapoint.trendCalculationIsRelative,t.datapoint.trendCalculationTresholds)}n.setProperty(`/${t.id}/manifest/sap.card/data/json/trend`,r)};d.updateTargetValue=function e(a,n,i){if(a.datapoint.targetValue===undefined&&a.datapoint.targetPath===undefined){return}const r=Number.parseFloat(n.getProperty(a.datapoint.propertyPath));const s=new o(t.getLanguage());let c;if(a.datapoint.targetValue!==undefined){c=a.datapoint.targetValue}else{c=Number.parseFloat(n.getProperty(a.datapoint.targetPath||""))}const d=c!==0?(r-c)/c*100:undefined;const u=l.getFloatInstance({style:"short",minFractionDigits:0,maxFractionDigits:a.datapoint.numberOfFractionalDigits??1,showScale:false},s).format(c);const p=l.getFloatInstance({style:"short",decimals:0,maxIntegerDigits:0,showScale:true},s).format(c);i.setProperty(`/${a.id}/manifest/sap.card/data/json/targetNumber`,u);i.setProperty(`/${a.id}/manifest/sap.card/data/json/targetUnit`,p);if(d!==undefined){const e=l.getFloatInstance({minFractionDigits:0,maxFractionDigits:1,showScale:false},s).format(d);i.setProperty(`/${a.id}/manifest/sap.card/data/json/deviationNumber`,e)}else{i.setProperty(`/${a.id}/manifest/sap.card/data/json/deviationNumber`,"N/A")}};d.loadKPITagData=async function e(t,a,n,i){const r=i?a.bindList(t.contextPath,undefined,undefined,undefined,{$$groupId:"$auto.Workers"}):a.bindList(t.contextPath,undefined,undefined,undefined,{$$groupId:"$auto.LongRunners"});const o={};if(t.datapoint.unit?.isPath){o[t.datapoint.propertyPath]={unit:t.datapoint.unit.value}}else{o[t.datapoint.propertyPath]={}}if(t.datapoint.criticalityPath){o[t.datapoint.criticalityPath]={}}if(i){if(t.datapoint.trendPath){o[t.datapoint.trendPath]={}}if(t.datapoint.trendCalculationReferencePath){o[t.datapoint.trendCalculationReferencePath]={}}if(t.datapoint.targetPath){o[t.datapoint.targetPath]={}}}r.setAggregation({aggregate:o});if(t.selectionVariantFilterDefinitions?.length){const e=t.selectionVariantFilterDefinitions.map(S).filter(e=>e!==undefined);r.filter(e)}return r.requestContexts(0,1).then(e=>{if(e.length){const a=t.datapoint.unit?.isPath?e[0].getProperty(t.datapoint.unit.value):t.datapoint.unit?.value;if(t.datapoint.unit&&!a){n.setProperty(`/${t.id}/manifest/sap.card/data/json/mainValue`,"*");n.setProperty(`/${t.id}/manifest/sap.card/data/json/mainValueUnscaled`,"*");n.setProperty(`/${t.id}/manifest/sap.card/data/json/mainValueNoScale`,"*");n.setProperty(`/${t.id}/manifest/sap.card/data/json/mainValueScale`,"");n.setProperty(`/${t.id}/manifest/sap.card/data/json/mainUnit`,undefined);n.setProperty(`/${t.id}/manifest/sap.card/data/json/mainCriticality`,c.None);n.setProperty(`/${t.id}/manifest/sap.card/data/json/mainState`,"None");n.setProperty(`/${t.id}/manifest/sap.card/data/json/trend`,"None");n.setProperty(`/${t.id}/manifest/sap.card/data/json/targetNumber`,undefined);n.setProperty(`/${t.id}/manifest/sap.card/data/json/targetUnit`,undefined);n.setProperty(`/${t.id}/manifest/sap.card/data/json/deviationNumber`,undefined)}else{this.updateDatapointValueAndCurrency(t,e[0],n);this.updateDatapointCriticality(t,e[0],n);if(i){this.updateDatapointTrend(t,e[0],n);this.updateTargetValue(t,e[0],n)}}}return})};d.loadKPICardData=async function e(t,a,i){const r=a.bindList(t.contextPath,undefined,undefined,undefined,{$$groupId:"$auto.Workers"});const o={};const s={};t.chart.dimensions.forEach(e=>{o[e.name]={};if(e.text){o[e.name].additionally=[e.text]}});t.chart.measures.forEach(e=>{s[e.name]={}});r.setAggregation({group:o,aggregate:s});if(t.selectionVariantFilterDefinitions?.length){const e=t.selectionVariantFilterDefinitions.map(S).filter(e=>e!==undefined);r.filter(e)}if(t.chart.sortOrder){r.sort(t.chart.sortOrder.map(e=>new p(e.name,e.descending)))}const l=await r.requestContexts(0,t.chart.maxItems);const c=l.map(e=>{const a={};t.chart.dimensions.forEach(t=>{switch(t.textArrangement){case"TextOnly":a[t.name]=e.getProperty(t.text);break;case"TextLast":a[t.name]=n.formatWithBrackets(e.getProperty(t.name),e.getProperty(t.text));break;case undefined:a[t.name]=e.getProperty(t.name);break;default:a[t.name]=n.formatWithBrackets(e.getProperty(t.text),e.getProperty(t.name))}});t.chart.measures.forEach(t=>{a[t.name]=e.getProperty(t.name)});return a});i.setProperty(`/${t.id}/manifest/sap.card/data/json/chartData`,c)};d.getPopover=async function e(t){var a=this;if(!this.oPopover){return new Promise((e,n)=>{r.load({name:"sap/ui/integration"}).then(()=>{sap.ui.require(["sap/ui/integration/widgets/Card","sap/ui/integration/Host"],function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}const s=r[0];const l=r[1];const c=new l;c.attachAction(e=>{const t=e.getParameter("type");const n=e.getParameter("parameters");if(t==="Navigation"){if(n.semanticObject){a.base._intentBasedNavigation.navigate(n.semanticObject,n.action)}else{a.base._intentBasedNavigation.navigateOutbound(n.outbound)}}});a.oCard=new s({width:"25rem",height:"auto"});a.oCard.setHost(c);a.oPopover=new i("kpi-Popover",{showHeader:false,placement:"Auto",content:[a.oCard]});t.addDependent(a.oPopover);e(a.oPopover)});return}).catch(function(){n()})})}else{return Promise.resolve(this.oPopover)}};d.onKPIPressed=async function t(a,n){const i=a.getModel("kpiModel");if(this.aKPIDefinitions&&this.aKPIDefinitions.length){const t=this.aKPIDefinitions.find(function(e){return e.id===n});if(t){try{const e=a.getModel();const r=await this.getPopover(a);r.setModal(true);this.oCard.setManifest(i.getProperty(`/${n}/manifest`));this.oCard.setPreviewMode("Abstract");r.openBy(a,false);const o=[this.loadKPITagData(t,e,i,true),this.loadKPICardData(t,e,i)];await Promise.all(o);this.oCard.attachEventOnce("stateChanged",()=>{this.oCard.getFocusDomRef()?.focus();r.setModal(false)});this.oCard.setManifest(i.getProperty(`/${n}/manifest`));this.oCard.refresh();this.oCard.setPreviewMode("Off")}catch(t){e.error(t)}}}};return s}(d),I(P.prototype,"onInit",[g],Object.getOwnPropertyDescriptor(P.prototype,"onInit"),P.prototype),I(P.prototype,"onExit",[h],Object.getOwnPropertyDescriptor(P.prototype,"onExit"),P.prototype),P))||y);return k},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/MessageHandler", ["sap/base/Log","sap/base/util/deepEqual","sap/base/util/uid","sap/fe/base/ClassSupport","sap/fe/core/CommonUtils","sap/fe/core/controllerextensions/messageHandler/messageHandling","sap/ui/core/Lib","sap/ui/core/Messaging","sap/ui/core/message/MessageType","sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution"],function(e,s,t,o,n,i,r,a,g,c,l){"use strict";var u,h,d,f,p,M,T,y,m,w;var S=o.publicExtension;var v=o.privateExtension;var E=o.finalExtension;var D=o.extensible;var b=o.defineUI5Class;function C(e,s){e.prototype=Object.create(s.prototype),e.prototype.constructor=e,O(e,s)}function O(e,s){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e},O(e,s)}function P(e,s,t,o,n){var i={};return Object.keys(o).forEach(function(e){i[e]=o[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=t.slice().reverse().reduce(function(t,o){return o(e,s,t)||t},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer?(Object.defineProperty(e,s,i),null):i}let _=(u=b("sap.fe.core.controllerextensions.MessageHandler"),h=v(),d=D(l.Instead),f=S(),p=E(),M=S(),T=S(),y=E(),u(m=(w=function(o){function c(){var e;e=o.call(this)||this;e.strictWarningMessages=[];e.holdKeys=[];e.holdMsgsToShow=false;return e}C(c,o);var l=c.prototype;l.addWarningMessagesToMessageHandler=function e(s){this.strictWarningMessages=this.strictWarningMessages.concat(s)};l.isStrictWarningMessage=function e(t){return this.strictWarningMessages.find(e=>e.getCode()===t.getCode()&&e.getMessage()===t.getMessage()&&e.getType()===t.getType()&&e.getDescriptionUrl()===t.getDescriptionUrl()&&s(e.getTargets(),t.getTargets())&&e.getPersistent()===t.getPersistent())!==undefined};l.clearStrictWarningMessages=function e(){this.strictWarningMessages=[]};l.filterErrorMessages=function e(s){return s.filter(e=>e.getType()===g.Error)};l.getShowBoundMessagesInMessageDialog=function e(){return true};l.registerToHoldMessages=function e(s){const o=s??t();if(!this.holdKeys.includes(o)){this.holdKeys.push(o)}return o};l.resetHoldKeys=function e(){this.holdKeys=[]};l.showMessageDialog=async function e(s){const t=a.getMessageModel().getData();const o=t.filter(e=>this.isStrictWarningMessage(e));a.removeMessages(o);const n=s&&s.customMessages?s.customMessages:undefined,i=this.base.getView().getBindingContext("internal");const r=this.base.getView().getViewData().converterType;if(s&&s.isActionParameterDialogOpen&&i){i.setProperty("isActionParameterDialogOpen",true)}const g=this.getShowBoundMessagesInMessageDialog();const c=s&&s.context?s.context:this.getView().getBindingContext();if(i){i.setProperty("isActionParameterDialogOpen",false)}return new Promise(function(e,t){setTimeout(function(){this.processAndShowMessages(s??{},c,g,n??[],e,t,r)}.bind(this),0)}.bind(this))};l.processAndShowMessages=function e(s,t,o,n,r,a,g){const{concurrentEditFlag:c,control:l,sActionName:u,onBeforeShowMessage:h,unHoldKey:d,forceShowUIElement:f=false,overrideUIDecision:p,showBoundStateMessages:M}=s;this.holdMsgsToShow=true;const T=i.getUIDecisions(n,t,o,c,l,u,h,g,M,s);this.updateUIDecisions(T,p);this.removeHoldKey(d??l?.getId());this.showMessagesWithCondtions(f,r,a)};l.showMessagesWithCondtions=function s(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let o=arguments.length>1?arguments[1]:undefined;let n=arguments.length>2?arguments[2]:undefined;const r=t||this.checkToShowUIElement();if(r&&this.uiDecisions){i.showMessagesInUI(this.uiDecisions).then(o).catch(n);this.uiDecisions=undefined;this.clearStrictWarningMessages();this.holdMsgsToShow=false}else{e.info("FE : V4 : MessageHandler : Holding messages until a registered process ");o?.()}};l.removeTransitionMessages=function e(s,t,o){if(!s){i.removeBoundTransitionMessages(o)}if(!t){i.removeUnboundTransitionMessages()}};l._checkNavigationToErrorPage=function e(s){const t=i.getMessages();const o=this.getShowBoundMessagesInMessageDialog();const r=o?i.getMessages(true,true):[];const a=s&&s.customMessages?s.customMessages:[];const g=n.isStickyEditMode(this.base.getView());let c;if(s?.isDataReceivedError===true){c={title:s.title,description:s.description,navigateBackToOrigin:true,errorType:"PageNotFound"}}else if(!g&&!r.length&&!a.length&&(t.length===1||s?.isInitialLoad503Error===true)){const e=t[0];const s=e.getTechnicalDetails();if(s?.httpStatus===503){c=this._getHTTP503MessageParameters(e,s)}}return c};l._getHTTP503MessageParameters=function e(s,t){let o;const n=t.retryAfter!==undefined?this._getSecondsBeforeRetryAfter(t.retryAfter):undefined;if(n===undefined||n>120){const e=i.getRetryAfterMessage(s);o={description:e?`${e} ${s.getMessage()}`:s.getMessage(),navigateBackToOrigin:true,errorType:"UnableToLoad"}}return o};l._getSecondsBeforeRetryAfter=function e(s){const t=new Date,o=t.getTime(),n=s.getTime(),i=(n-o)/1e3;return i};l.updateUIDecisions=function e(s){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const o=this.uiDecisions;let n=[];let i;if(o&&t===false){if(o.messagesToShow.length===1&&s.messagesToShow.length===1&&o.messagesToShow[0].getCode()==="C_COMMON_SUCCESS_MESSAGE"&&s.messagesToShow[0].getCode()==="C_COMMON_SUCCESS_MESSAGE"){n=o.messagesToShow}else{n=Array.from(new Set([...o.messagesToShow,...s.messagesToShow]))}const e=[o.uiElementToUse,s.uiElementToUse];let t=n.length>0?"Dialog":"None";if(n.length===1){if(e.includes("Toast")){t="Toast"}else if(e.includes("Box")){t="Box"}}i={messagesToShow:n,uiElementToUse:t,contextNeedsEtagRefresh:o.contextNeedsEtagRefresh||s.contextNeedsEtagRefresh,containsBoundTransition:o.containsBoundTransition||s.containsBoundTransition}}else{i=s}this.uiDecisions=i};l.removeHoldKey=function e(s){if(s&&this.holdKeys.includes(s)){this.holdKeys.splice(this.holdKeys.indexOf(s),1)}};l.checkToShowUIElement=function e(){return this.holdMsgsToShow&&(this.holdKeys.length>0?false:true)};l.holdMessagesForControl=function e(s){const t=s.getId();this.registerToHoldMessages(t)};l.releaseHoldByControl=function e(s){const t=s?.getId();this.removeHoldKey(t);this.showMessagesWithCondtions()};l.showMessages=async function e(s){const t=this._checkNavigationToErrorPage(s);if(t){if(s?.messagePageNavigationCallback){s.messagePageNavigationCallback()}t.handleShellBack=!s?.shellBack;this.removeTransitionMessages();const e=r.getResourceBundleFor("sap.fe.core");this.resetHoldKeys();return new Promise((o,n)=>{setTimeout(()=>{this.base._routing.navigateToMessagePage(s?.isDataReceivedError===true?e.getText("C_COMMON_SAPFE_DATA_RECEIVED_ERROR"):e.getText("C_MESSAGE_HANDLING_SAPFE_503_TITLE"),t).then(o).catch(n)},0)})}else{return this.showMessageDialog(s)}};return c}(c),P(w.prototype,"getShowBoundMessagesInMessageDialog",[h,d],Object.getOwnPropertyDescriptor(w.prototype,"getShowBoundMessagesInMessageDialog"),w.prototype),P(w.prototype,"showMessageDialog",[f,p],Object.getOwnPropertyDescriptor(w.prototype,"showMessageDialog"),w.prototype),P(w.prototype,"removeTransitionMessages",[M],Object.getOwnPropertyDescriptor(w.prototype,"removeTransitionMessages"),w.prototype),P(w.prototype,"showMessages",[T,y],Object.getOwnPropertyDescriptor(w.prototype,"showMessages"),w.prototype),w))||m);return _},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/PageReady", ["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/controllerextensions/pageReady/DataQueryWatcher","sap/fe/core/services/TemplatedViewServiceFactory","sap/ui/base/EventProvider","sap/ui/core/Component","sap/ui/core/Rendering","sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution","../CommonUtils"],function(e,t,i,o,n,r,a,s,c,h){"use strict";var p,d,g,u,l,y,f,b,v,P,R,m,E,C,O,_,w,D,T,x,A,B,W;var j=t.publicExtension;var I=t.privateExtension;var F=t.methodOverride;var k=t.finalExtension;var S=t.extensible;var q=t.defineUI5Class;function U(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,M(e,t)}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function z(e,t,i,o,n){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce(function(i,o){return o(e,t,i)||i},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer?(Object.defineProperty(e,t,r),null):r}let H=(p=q("sap.fe.core.controllerextensions.PageReady"),d=F(),g=F(),u=j(),l=k(),y=F("_routing"),f=F("_routing"),b=F("_routing"),v=j(),P=k(),R=j(),m=k(),E=j(),C=k(),O=j(),_=k(),w=j(),D=k(),T=I(),x=S(c.Instead),A=j(),p(B=(W=function(t){function s(){var e;e=t.call(this)||this;e.pageReadyTimeoutDefault=7e3;return e}U(s,t);var c=s.prototype;c.onInit=function e(){this._nbWaits=0;this._oEventProvider=this._oEventProvider?this._oEventProvider:new n;this.view=this.getView();this.appComponent=h.getAppComponent(this.view);this.pageComponent=r.getOwnerComponentFor(this.view);const t=this.appComponent.getManifest();this.pageReadyTimeout=t["sap.ui5"]?.pageReadyTimeout??this.pageReadyTimeoutDefault;if(this.pageComponent?.attachContainerDefined){this.pageComponent.attachContainerDefined(e=>this.registerContainer(e.getParameter("container")))}else{this.registerContainer(this.view)}const o=this.appComponent.getRootControl().getController();const a=o?.getPlaceholder?.();if(a?.isPlaceholderDebugEnabled()){this.attachEvent("pageReady",null,()=>{a.getPlaceholderDebugStats().iPageReadyEventTimestamp=Date.now()},this);this.attachEvent("heroesBatchReceived",null,()=>{a.getPlaceholderDebugStats().iHeroesBatchReceivedEventTimestamp=Date.now()},this)}this.queryWatcher=new i(this._oEventProvider,this.checkPageReadyDebounced.bind(this))};c.onExit=function e(){delete this._oAppComponent;if(this._oContainer&&this._fnContainerDelegate){this._oContainer.removeEventDelegate(this._fnContainerDelegate)}};c.waitFor=function e(t){this._nbWaits++;t.finally(()=>{setTimeout(()=>{this._nbWaits--},0)}).catch(null)};c.onRouteMatched=function e(){this._bIsPageReady=false};c.onRouteMatchedFinished=async function e(){await this.onAfterBindingPromise;this.checkPageReadyDebounced()};c.registerAggregatedControls=function e(t){if(t){const e=t.getBinding();this.queryWatcher.registerBinding(e)}const i=[];const o=this.getView().findAggregatedObjects(true);o.forEach(e=>{const t=e.getObjectBinding();if(t){this.queryWatcher.registerBinding(t)}else{const t=Object.keys(e?.mBindingInfos??{});t.forEach(t=>{const i=e?.mBindingInfos?.[t].binding;if(i&&i.isA("sap.ui.model.odata.v4.ODataListBinding")){this.queryWatcher.registerBinding(i)}})}if(e.isA("sap.fe.macros.table.TableAPI")||e.isA("sap.fe.macros.Chart")){const t=e.getContent?.()??e.getChartControl();this.bTablesChartsLoaded=false;i.push(this.queryWatcher.registerTableOrChart(t))}else if(e.isA("sap.fe.macros.controls.FilterBar")){this.queryWatcher.registerFilterBar(e)}});return i};c.onAfterBinding=function t(i,o){if(this.pageReadyTimeoutTimer){clearTimeout(this.pageReadyTimeoutTimer)}if(!o?.deferredCreation||!this.isContextExpected()||i){this.pageReadyTimeoutTimer=setTimeout(()=>{e.error(`The PageReady Event was not fired within the ${this.pageReadyTimeout} ms timeout . It has been forced. Please contact your application developer for further analysis`);this._oEventProvider.fireEvent("pageReady")},this.pageReadyTimeout)}else{const e=this.appComponent.getRootControl().getController();const t=e?.getPlaceholder?.();t?.disableAnimation()}if(this.isContextExpected()&&!i){this.bHasContext=false;return}else{this.bHasContext=true}if(this._bAfterBindingAlreadyApplied){return}this._bAfterBindingAlreadyApplied=true;this.attachEventOnce("pageReady",null,()=>{clearTimeout(this.pageReadyTimeoutTimer);this.pageReadyTimeoutTimer=undefined;this._bAfterBindingAlreadyApplied=false;this.queryWatcher.reset()});this.onAfterBindingPromise=new Promise(async e=>{const t=this.registerAggregatedControls(i);if(t.length>0){await Promise.all(t);this.bTablesChartsLoaded=true;this.checkPageReadyDebounced();e()}else{this.checkPageReadyDebounced();e()}})};c.isPageReady=function e(){return this._bIsPageReady};c.waitPageReady=async function e(){return new Promise(e=>{if(this.isPageReady()){e()}else{this.attachEventOnce("pageReady",null,()=>{e()},this)}})};c.attachEventOnce=function e(t,i,o,n){return this._oEventProvider.attachEventOnce(t,i,o,n)};c.attachEvent=function e(t,i,o,n){return this._oEventProvider.attachEvent(t,i,o,n)};c.detachEvent=function e(t,i){return this._oEventProvider.detachEvent(t,i)};c.registerContainer=function e(t){this._oContainer=t;this._fnContainerDelegate={onBeforeShow:()=>{this.bShown=false;this._bIsPageReady=false},onBeforeHide:()=>{this.bShown=false;this._bIsPageReady=false},onAfterShow:()=>{this.bShown=true;this.onAfterBindingPromise?.then(()=>this.checkPageReadyDebounced(true))}};this._oContainer?.addEventDelegate(this._fnContainerDelegate,this)};c.isContextExpected=function e(){return false};c.checkPageReadyDebounced=function e(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.pageReadyTimer){clearTimeout(this.pageReadyTimer)}const i=this.getView().getModel();let o;if(i&&i.getOptimisticBatchEnabler()===null||this.isContextExpected()){o=200}else{o=20}this.pageReadyTimer=setTimeout(()=>{this._checkPageReady(t)},o)};c._checkPageReady=function e(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;const i=()=>{if(!a.isPending()){a.detachUIUpdated(i);this._bWaitingForRefresh=false;this.checkPageReadyDebounced()}};const n=()=>{if(a.isPending()){setTimeout(n,500)}else if(this._bWaitingForRefresh){this._bWaitingForRefresh=false;a.detachUIUpdated(i);this.checkPageReadyDebounced()}};if(this.bShown&&this.queryWatcher.isDataReceived()!==false&&this.bTablesChartsLoaded!==false&&(!this.isContextExpected()||this.bHasContext)){if(this.queryWatcher.isDataReceived()===true&&!t&&!this._bWaitingForRefresh&&a.isPending()){this.queryWatcher.resetDataReceived();this._bWaitingForRefresh=true;a.attachUIUpdated(i);setTimeout(n,500)}else if(!this._bWaitingForRefresh&&a.isPending()||this._nbWaits!==0||o.getNumberOfViewsInCreationState()>0||this.queryWatcher.isSearchPending()){this._bWaitingForRefresh=true;a.attachUIUpdated(i);setTimeout(n,500)}else if(!this._bWaitingForRefresh){this._bIsPageReady=true;this._oEventProvider.fireEvent("pageReady")}}};c.forcePageReady=function e(){this._oEventProvider.fireEvent("pageReady")};return s}(s),z(W.prototype,"onInit",[d],Object.getOwnPropertyDescriptor(W.prototype,"onInit"),W.prototype),z(W.prototype,"onExit",[g],Object.getOwnPropertyDescriptor(W.prototype,"onExit"),W.prototype),z(W.prototype,"waitFor",[u,l],Object.getOwnPropertyDescriptor(W.prototype,"waitFor"),W.prototype),z(W.prototype,"onRouteMatched",[y],Object.getOwnPropertyDescriptor(W.prototype,"onRouteMatched"),W.prototype),z(W.prototype,"onRouteMatchedFinished",[f],Object.getOwnPropertyDescriptor(W.prototype,"onRouteMatchedFinished"),W.prototype),z(W.prototype,"onAfterBinding",[b],Object.getOwnPropertyDescriptor(W.prototype,"onAfterBinding"),W.prototype),z(W.prototype,"isPageReady",[v,P],Object.getOwnPropertyDescriptor(W.prototype,"isPageReady"),W.prototype),z(W.prototype,"waitPageReady",[R,m],Object.getOwnPropertyDescriptor(W.prototype,"waitPageReady"),W.prototype),z(W.prototype,"attachEventOnce",[E,C],Object.getOwnPropertyDescriptor(W.prototype,"attachEventOnce"),W.prototype),z(W.prototype,"attachEvent",[O,_],Object.getOwnPropertyDescriptor(W.prototype,"attachEvent"),W.prototype),z(W.prototype,"detachEvent",[w,D],Object.getOwnPropertyDescriptor(W.prototype,"detachEvent"),W.prototype),z(W.prototype,"isContextExpected",[T,x],Object.getOwnPropertyDescriptor(W.prototype,"isContextExpected"),W.prototype),z(W.prototype,"checkPageReadyDebounced",[A],Object.getOwnPropertyDescriptor(W.prototype,"checkPageReadyDebounced"),W.prototype),W))||B);return H},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/Paginator", ["sap/fe/base/ClassSupport","sap/fe/base/HookSupport","sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution"],function(e,t,o,r){"use strict";var i,n,p,a,c,u,l,s,f;var y=t.hookable;var b=e.publicExtension;var v=e.extensible;var d=e.defineUI5Class;function O(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,x(e,t)}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function z(e,t,o,r,i){var n={};return Object.keys(r).forEach(function(e){n[e]=r[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer?(Object.defineProperty(e,t,n),null):n}let C=(i=d("sap.fe.core.controllerextensions.Paginator"),n=b(),p=y("Before"),a=b(),c=v(r.After),u=b(),l=v(r.After),i(s=(f=function(e){function t(){return e.apply(this,arguments)||this}O(t,e);var o=t.prototype;o.initialize=function e(t,o){};o.onBeforeContextUpdate=function e(t,o,r){return false};o.onContextUpdate=function e(t){};return t}(o),z(f.prototype,"initialize",[n,p],Object.getOwnPropertyDescriptor(f.prototype,"initialize"),f.prototype),z(f.prototype,"onBeforeContextUpdate",[a,c],Object.getOwnPropertyDescriptor(f.prototype,"onBeforeContextUpdate"),f.prototype),z(f.prototype,"onContextUpdate",[u,l],Object.getOwnPropertyDescriptor(f.prototype,"onContextUpdate"),f.prototype),f))||s);return C},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/Placeholder", ["sap/base/util/ObjectPath","sap/fe/base/ClassSupport","sap/fe/placeholder/library","sap/ui/core/Placeholder","sap/ui/core/mvc/ControllerExtension"],function(e,t,o,r,a){"use strict";var i,n,l,s,c,p,h,d,u,b,g,f;var P=t.publicExtension;var y=t.defineUI5Class;function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,C(e,t)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function O(e,t,o,r,a){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer?(Object.defineProperty(e,t,i),null):i}let D=(i=y("sap.fe.core.controllerextensions.Placeholder"),n=P(),l=P(),s=P(),c=P(),p=P(),h=P(),d=P(),u=P(),b=P(),i(g=(f=function(t){function o(){return t.call(this)||this}m(o,t);var a=o.prototype;a.attachHideCallback=function e(){if(this.isPlaceholderEnabled()){const e=this.base.getView();const t=e.getParent()&&e.getParent().oContainer;const o=t&&t.getParent();if(!o||!t){return}const r={onAfterShow:function(e){if(e.isBackToPage||new URLSearchParams(window.location.hash.replace(/#.*\?/,"")).get("restoreHistory")==="true"){o.hidePlaceholder()}}};t.addEventDelegate(r);const a=e.getController().pageReady;const i=["pageReady"];if(e.getControllerName()==="sap.fe.templates.ObjectPage.ObjectPageController"){i.push("heroesBatchReceived")}i.forEach(e=>{a.attachEvent(e,null,function(){o.hidePlaceholder()},this)})}};a.attachRouteMatchers=function e(){this._init()};a.hideRootPlaceholder=function e(){this.oRootContainer=this.oAppComponent.getRootContainer();this.oRootContainer.hidePlaceholder()};a._init=function e(){this.oAppComponent=this.base.getAppComponent();this.oRootContainer=this.oAppComponent.getRootContainer();if(this.isPlaceholderEnabled()){r.registerProvider(function(e){switch(e.name){case"sap.fe.templates.ListReport":return{html:"sap/fe/placeholder/view/PlaceholderLR.fragment.html",autoClose:false};case"sap.fe.templates.ObjectPage":return{html:"sap/fe/placeholder/view/PlaceholderOP.fragment.html",autoClose:false};default:}})}if(this.isPlaceholderDebugEnabled()){this.initPlaceholderDebug()}};a.initPlaceholderDebug=function e(){this.resetPlaceholderDebugStats();const t={apply:e=>{if(this.oRootContainer._placeholder&&this.oRootContainer._placeholder.placeholder){this.debugStats.iHidePlaceholderTimestamp=Date.now()}return e.bind(this.oRootContainer)()}};const o=new Proxy(this.oRootContainer.hidePlaceholder,t);this.oRootContainer.hidePlaceholder=o};a.isPlaceholderDebugEnabled=function e(){if(new URLSearchParams(window.location.search).get("sap-ui-xx-placeholder-debug")==="true"){return true}return false};a.resetPlaceholderDebugStats=function e(){this.debugStats={iHidePlaceholderTimestamp:0,iPageReadyEventTimestamp:0,iHeroesBatchReceivedEventTimestamp:0}};a.getPlaceholderDebugStats=function e(){return this.debugStats};a.isPlaceholderEnabled=function t(){const o=e.get("sap-ushell-config.apps.placeholder.enabled");if(o===false){return false}return r.isEnabled()};a.disableAnimation=function e(){this.base.getAppComponent().getRootControl().addStyleClass("sapFeNoAnimation")};a.enableAnimation=function e(){this.base.getAppComponent().getRootControl().removeStyleClass("sapFeNoAnimation")};return o}(a),O(f.prototype,"attachHideCallback",[n],Object.getOwnPropertyDescriptor(f.prototype,"attachHideCallback"),f.prototype),O(f.prototype,"attachRouteMatchers",[l],Object.getOwnPropertyDescriptor(f.prototype,"attachRouteMatchers"),f.prototype),O(f.prototype,"initPlaceholderDebug",[s],Object.getOwnPropertyDescriptor(f.prototype,"initPlaceholderDebug"),f.prototype),O(f.prototype,"isPlaceholderDebugEnabled",[c],Object.getOwnPropertyDescriptor(f.prototype,"isPlaceholderDebugEnabled"),f.prototype),O(f.prototype,"resetPlaceholderDebugStats",[p],Object.getOwnPropertyDescriptor(f.prototype,"resetPlaceholderDebugStats"),f.prototype),O(f.prototype,"getPlaceholderDebugStats",[h],Object.getOwnPropertyDescriptor(f.prototype,"getPlaceholderDebugStats"),f.prototype),O(f.prototype,"isPlaceholderEnabled",[d],Object.getOwnPropertyDescriptor(f.prototype,"isPlaceholderEnabled"),f.prototype),O(f.prototype,"disableAnimation",[u],Object.getOwnPropertyDescriptor(f.prototype,"disableAnimation"),f.prototype),O(f.prototype,"enableAnimation",[b],Object.getOwnPropertyDescriptor(f.prototype,"enableAnimation"),f.prototype),f))||g);return D},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/Recommendations", ["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/helpers/RecommendationHelper","sap/fe/core/helpers/StandardRecommendationHelper","sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution","../CommonUtils","./editFlow/TransactionHelper","../controls/Recommendations/ConfirmRecommendationDialog","./recommendations/Telemetry"],function(e,t,n,o,i,r,s,c,a,l){"use strict";var d,m,p,h,f,u,g,y,R,x,b,C,P,A,O,w,v,D;var F={};var E=a.RecommendationDialogDecision;var I=o.standardRecommendationHelper;var B=n.recommendationHelper;var j=t.publicExtension;var T=t.methodOverride;var V=t.finalExtension;var M=t.extensible;var S=t.defineUI5Class;function _(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,k(e,t)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function H(e,t,n,o,i){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer?(Object.defineProperty(e,t,r),null):r}let z=(d=S("sap.fe.core.controllerextensions.Recommendations"),m=T(),p=T("_routing"),h=j(),f=j(),u=M(r.Instead),g=j(),y=V(),R=j(),x=M(r.Instead),b=j(),C=j(),P=j(),A=M("AfterAsync"),O=j(),w=M(r.Instead),d(v=(D=function(t){function n(){var e;e=t.call(this)||this;e.dataToBeAccepted=[];return e}F=n;_(n,t);var o=n.prototype;o.onInit=function e(){this.telemetry=new l;this.allRecommendedFields=[];this.internalModel=this.base.getView().getModel("internal");this.previousContext=undefined};o.onAfterBinding=async function e(t){if(t){const e=t.getPath().split("/")[1];const n=this.previousContext?.getPath().split("/")[1];this.rootContext=undefined;let o=this.internalModel.getProperty("/isRecommendationEnabled");this.previousContext=t;const i=await this._getRootContext(t);if(i){if(o===undefined){o=this.base.recommendations.isEnabled(i);this.internalModel.setProperty("/isRecommendationEnabled",o)}const t=this.base.getAppComponent()._isFclEnabled();const r=t?this.base.getAppComponent().getRootViewController().getHelper().getCurrentUIState().isFullScreen:true;if(e!==n){this.tryResetRecommendations(i);this.telemetry.resetData()}if(t&&!r){return}}}};o._getRootContext=async function e(t){const n=c.getProgrammingModel(t);return s.createRootContext(n,this.base.getView(),this.base.getAppComponent())};o.clearRecommendations=function e(){const t=this.getView().getBindingContext();if(t){B.clearRecommendations(this.base.getView(),t)}};o.isEnabled=function e(t){return false};o.isRecommendationEnabled=function e(){return!!this.internalModel?.getProperty("/isRecommendationEnabled")};o.fetchRecommendations=async function e(t,n){return Promise.resolve([])};o.fetchAndApplyRecommendations=async function t(n,o){let i=false;const r=this.base.getAppComponent().getSideEffectsService();const s=r.getRecommendationsMapping();const c=n.filter(e=>I.checkIfRecommendationRoleExistsForContext(e,s));if(this.isRecommendationEnabled()){const t=o?I.getContextsWithNoRecommendations(c,this.internalModel):c;const n=t.map(e=>e.context);if(n&&n.length>0){try{const e=await this._getRootContext(n[0]);const t=performance.now();const o=await this.base.recommendations.fetchRecommendations(n,e);const r=performance.now();this.telemetry.updateResponseTimeInfo(r-t);if(o?.length){this.updateAllRecommendedFields(o);this.telemetry.updateDataFromRecommendationResponse(o)}else{this.telemetry.increaseCount("numberOfTimesEmptyRecommendations")}i=this.applyRecommendation(o,n)}catch(t){e.error("There was an error fetching the recommendations",t)}}this.storeRecommendationContexts(c)}return i};o.fetchAndApplyRecommendationsOnFieldChange=async function e(t,n){const o=this.base.getAppComponent();const i=o.getSideEffectsService().checkIfFieldIsRecommendationRelevant(t);if(i){const e=this.fetchTargets(true);const t=this.fetchFilteredRecommendationContexts(e);const o=t.filter(function(e){if(e.context.getPath()?.includes((n?.context).getPath())){return e}});I.clearIgnoredContexts(this.internalModel,(n?.context).getPath());return this.fetchAndApplyRecommendations(o)}else{return false}};o.onBeforeAcceptRecommendations=async function e(t){return Promise.resolve()};o.acceptRecommendations=async function e(t){const n=[];if(t.recommendationData){for(const e of t.recommendationData){if(e.context&&e.propertyPath){n.push(e.context.setProperty(e.propertyPath,e.value,"$auto.abc"))}}await Promise.all(n)}return true};o.applyRecommendation=function e(t,n){I.storeRecommendations(t,this.getView().getModel("internal"),n);return true};o.storeRecommendationContexts=function e(t){const n=[];let o=this.internalModel.getProperty("/recommendationContexts")||[];t.forEach(e=>{n.push(e.context.getPath())});o=o?.filter(e=>{const o=e?.context;if(o){const i=o.getPath();const r=n.indexOf(i);if(r<0){return true}else if(e.contextIdentifier){t[r].contextIdentifier=e.contextIdentifier}}return false});this.internalModel.setProperty("/recommendationContexts",[...o,...t])};o.fetchFilteredRecommendationContexts=function e(t){const n=[];const o=[];for(const e of t){const t=e.substring(0,e.lastIndexOf(")")+1);const i=this.getView().getModel("internal").getProperty("/recommendationContexts");i.forEach(e=>{const i=e.context;if(i.getPath()==t&&!n.includes(t)){n.push(t);o.push(e)}})}return o};o.fetchFilteredRecommendationData=function e(t){const n={};const o=this.getView().getModel("internal")?.getProperty("/recommendationsData");Object.keys(o).forEach(e=>{if(t.includes(e)){n[e]=Object.assign(o[e],{})}});return n};o.fetchTargets=function e(t){const n=this.getView().getModel("internal")?.getProperty("/recommendationsData");if(n.version===null){return[]}const o=this.base.getAppComponent()._isFclEnabled();const i=o?this.base.getAppComponent().getRootViewController().getHelper().getCurrentUIState().isFullScreen:true;const r=(e,t)=>{const n=e=>{const n=t.split(e);const o=n[1];let i=o.split("/");if(i.length<=3){return true}else{i=i.slice(2);return!i.some(e=>e.includes("("))}};if(o&&!i){const o=this.base.getAppComponent().getRootViewController().getRightmostContext();if(t.includes(o?.getPath())){return n(o?.getPath())}else{return n(e)}}else{return n(e)}};const s=this.fetchDataToBeFiltered(n,t);return s.filter(e=>e.includes(this.getView().getBindingContext()?.getPath())&&r(this.getView().getBindingContext()?.getPath(),e))||[]};o.fetchDataToBeFiltered=function e(t,n){let o=[];if(n){const e=this.getView().getModel("internal")?.getProperty("/recommendationContexts");e.forEach(e=>{o.push(e.context.getPath())})}else{o=Object.keys(t).filter(e=>e!=="version"&&e!=="keys")}return o};o.adjustAcceptAllParams=function e(t,n,o){o.recommendationData=[];for(const e in t){if(t[e].value||t[e].text){const i=e.substring(0,e.lastIndexOf(")")+1);const r=e.substring(e.lastIndexOf(")")+2);const s=n.filter(function(e){if((e?.context).getPath()===i){return true}});if(s?.length>0&&I.isRecommendationFieldNull(s[0].context,e,r)){o.recommendationData.push({context:s[0].context,contextIdentifier:s[0].contextIdentifier,propertyPath:r,value:t[e].value,text:t[e].text})}}}};o.fetchAcceptAllParams=async function e(){const t=this.fetchTargets();const n=this.fetchFilteredRecommendationData(t);const o=this.fetchFilteredRecommendationContexts(t);const i={};this.adjustAcceptAllParams(n,o,i);await this.getView().getController().recommendations.onBeforeAcceptRecommendations(i);I.addContextIdentifierText(i,this.getView()?.getBindingContext()?.getPath());this.dataToBeAccepted=i.recommendationData||[];return i};o.checkIfRecommendationsExist=function e(){const t=this.internalModel.getProperty("/recommendationsData")||{};return Object.keys(t).length!==0};o.ignoreRecommendationForContexts=function e(t){if(!t||!t.length){const e=this.getView();const n=e.getBindingContext();t=[n]}I.ignoreRecommendationForContexts(t,this.internalModel)};o.tryResetRecommendations=function e(t){I.setCurrentRootContext(t);this.internalModel.setProperty("/recommendationContexts",[]);I.resetRecommendations(this.internalModel)};o.storeDataForTelemetry=async function e(t){const n=await this._getRootContext(this.getView().getBindingContext());if(n&&this.base.recommendations.isEnabled(n)){if(t===E.Accept){this.telemetry.updateData("numberOfFieldsAcceptedThroughAcceptButton",this.dataToBeAccepted.length)}else if(t===E.Ignore){this.telemetry.updateData("numberOfFieldsIgnoredThroughIgnoreButton",this.dataToBeAccepted.length)}this.telemetry.storeData(this.getView())}};o.increaseTelemetryDataCount=function e(t){this.telemetry.increaseCount(t)};o.updateTelemetryDataBasedOnUserSelection=function e(t,n){this.telemetry.updateTelemetryDataBasedOnUserSelection(this.getView(),t,n)};o.updateAllRecommendedFields=function e(t){const n=this.getView().getBindingContext().getPath();const o=t.filter(e=>e["AIRecommendedFieldPath"]?.includes(n));if(!this.allRecommendedFields){this.allRecommendedFields=[]}o.forEach(e=>{const t=e["AIRecommendedFieldPath"];if(t){if(!this.allRecommendedFields.includes(t)){this.allRecommendedFields.push(t);this.telemetry.increaseCount("numberOfRecommendedFields")}}})};return n}(i),H(D.prototype,"onInit",[m],Object.getOwnPropertyDescriptor(D.prototype,"onInit"),D.prototype),H(D.prototype,"onAfterBinding",[p],Object.getOwnPropertyDescriptor(D.prototype,"onAfterBinding"),D.prototype),H(D.prototype,"clearRecommendations",[h],Object.getOwnPropertyDescriptor(D.prototype,"clearRecommendations"),D.prototype),H(D.prototype,"isEnabled",[f,u],Object.getOwnPropertyDescriptor(D.prototype,"isEnabled"),D.prototype),H(D.prototype,"isRecommendationEnabled",[g,y],Object.getOwnPropertyDescriptor(D.prototype,"isRecommendationEnabled"),D.prototype),H(D.prototype,"fetchRecommendations",[R,x],Object.getOwnPropertyDescriptor(D.prototype,"fetchRecommendations"),D.prototype),H(D.prototype,"fetchAndApplyRecommendations",[b],Object.getOwnPropertyDescriptor(D.prototype,"fetchAndApplyRecommendations"),D.prototype),H(D.prototype,"fetchAndApplyRecommendationsOnFieldChange",[C],Object.getOwnPropertyDescriptor(D.prototype,"fetchAndApplyRecommendationsOnFieldChange"),D.prototype),H(D.prototype,"onBeforeAcceptRecommendations",[P,A],Object.getOwnPropertyDescriptor(D.prototype,"onBeforeAcceptRecommendations"),D.prototype),H(D.prototype,"acceptRecommendations",[O,w],Object.getOwnPropertyDescriptor(D.prototype,"acceptRecommendations"),D.prototype),D))||v);F=z;return F},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/Routing", ["sap/fe/base/ClassSupport","sap/fe/core/helpers/ModelHelper","sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution"],function(e,t,o,r){"use strict";var n,i,p,a,c,s,u,f,l,y,g,v,b;var d=e.publicExtension;var O=e.finalExtension;var B=e.extensible;var j=e.defineUI5Class;function P(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,h(e,t)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function x(e,t,o,r,n){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer?(Object.defineProperty(e,t,i),null):i}let A=(n=j("sap.fe.core.controllerextensions.Routing"),i=d(),p=B("AfterAsync"),a=d(),c=O(),s=d(),u=B(r.After),f=d(),l=B(r.After),y=d(),g=O(),n(v=(b=function(e){function o(){return e.apply(this,arguments)||this}P(o,e);var r=o.prototype;r.onBeforeNavigation=async function e(t){return Promise.resolve(false)};r.navigate=function e(t,o){const r=this.base.getModel("internal");r.setProperty("/paginatorCurrentContext",null);this.base._routing.navigateToContext(t,o)};r.onBeforeBinding=function e(t){};r.onAfterBinding=function e(t){};r.navigateToRoute=async function e(o,r){const n=this.base.getModel().getMetaModel();const i=t.isStickySessionSupported(n);if(!r){r={}}r.bIsStickyMode=i;return this.base._routing.navigateToRoute(o,r)};return o}(o),x(b.prototype,"onBeforeNavigation",[i,p],Object.getOwnPropertyDescriptor(b.prototype,"onBeforeNavigation"),b.prototype),x(b.prototype,"navigate",[a,c],Object.getOwnPropertyDescriptor(b.prototype,"navigate"),b.prototype),x(b.prototype,"onBeforeBinding",[s,u],Object.getOwnPropertyDescriptor(b.prototype,"onBeforeBinding"),b.prototype),x(b.prototype,"onAfterBinding",[f,l],Object.getOwnPropertyDescriptor(b.prototype,"onAfterBinding"),b.prototype),x(b.prototype,"navigateToRoute",[y,g],Object.getOwnPropertyDescriptor(b.prototype,"navigateToRoute"),b.prototype),b))||v);return A},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/RoutingListener", ["sap/fe/core/controllerextensions/InternalRouting"],function(e){"use strict";return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/Share", ["sap/base/Log","sap/base/util/ObjectPath","sap/base/util/extend","sap/fe/base/ClassSupport","sap/m/library","sap/ui/core/Component","sap/ui/core/Element","sap/ui/core/Fragment","sap/ui/core/Lib","sap/ui/core/XMLTemplateProcessor","sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution","sap/ui/core/routing/HashChanger","sap/ui/core/util/XMLPreprocessor","sap/ui/model/json/JSONModel"],function(e,t,o,a,r,i,n,s,l,c,p,u,h,d,g){"use strict";var f,m,y,S,b,w,_,T,O,P,E,M,D,A,C,v,I,j,x;var U=a.publicExtension;var H=a.methodOverride;var F=a.finalExtension;var R=a.extensible;var L=a.defineUI5Class;function B(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,J(e,t)}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}function V(e,t,o,a,r){var i={};return Object.keys(a).forEach(function(e){i[e]=a[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=o.slice().reverse().reduce(function(o,a){return a(e,t,o)||o},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer?(Object.defineProperty(e,t,i),null):i}let z;let k=(f=L("sap.fe.core.controllerextensions.Share"),m=H(),y=H(),S=U(),b=F(),w=U(),_=R("AfterAsync"),T=U(),O=R(u.After),P=U(),E=F(),M=U(),D=F(),A=U(),C=F(),v=U(),I=F(),f(j=(x=function(a){function p(){return a.call(this)||this}B(p,a);var u=p.prototype;u.onInit=function e(){const t=new g({saveAsTileClicked:false,collaborationInfo:{url:"",appTitle:"",subTitle:"",minifyUrlForChat:true,appId:""}});this.base.getView().setModel(t,"shareInfo")};u.onExit=function e(){const t=this.base?.getView()?.getModel("shareInfo");if(t){t.destroy()}};u.openShareSheet=function e(t){this._openShareSheetImpl(t)};u.getCardDefinition=async function e(){return Promise.resolve(undefined)};u.adaptShareMetadata=function e(t){const o=this.base?.getView()?.getModel("shareInfo");const a=this.base.getAppComponent().getManifest();const r=a?.["sap.app"]?.id;const i=a?.["sap.app"]?.title||document.title;if(o){o.setProperty("/collaborationInfo/appId",r);o.setProperty("/collaborationInfo/url",t.url);o.setProperty("/collaborationInfo/appTitle",i)}return t};u._openShareSheetImpl=async function t(a){let i;const p=h.getInstance();const u=p.getHash();const f=p.hrefForAppSpecificHash?p.hrefForAppSpecificHash(""):"";const m={url:window.location.origin+window.location.pathname+window.location.search+(u?f+u:window.location.hash),title:await(this.base.getAppComponent()?.getShellServices()?.getTitle()),email:{url:"",title:""},jam:{url:"",title:""},tile:{url:"",title:"",subtitle:"",icon:"",queryUrl:""}};z=a;const y=function(e,t){const a=e.getModel("shareData");const r=o(a.getData(),t);a.setData(r)};try{const t=await(this.base.getView().getController()?.share?.adaptShareMetadata(m));const p={shareEmailPressed:function(){const e=i.getModel("shareData");const t=e.getData();const o=l.getResourceBundleFor("sap.fe.core");const a=t.email.title?t.email.title:o.getText("T_SHARE_UTIL_HELPER_SAPFE_EMAIL_SUBJECT",[t.title]);r.URLHelper.triggerEmail(undefined,a,t.email.url?t.email.url:t.url)},shareMSTeamsPressed:function(){const e=i.getModel("shareData");const t=e.getData();const o=t.email.title?t.email.title:t.title;const a=t.email.url?t.email.url:t.url;const r=window.open("","ms-teams-share-popup","width=700,height=600");r.opener=null;r.location=`https://teams.microsoft.com/share?msgText=${encodeURIComponent(o)}&href=${encodeURIComponent(a)}`},onSaveTilePress:function(){setTimeout(function(){n.getElementById("bookmarkDialog")?.attachAfterClose(function(){z.focus()})},0)},shareJamPressed:async()=>{await this._doOpenJamShareDialog(t?.jam?.title?t.jam.title:t.title,t?.jam?.url?t.jam.url:t.url)}};p.onCancelPressed=function(){i.close()};p.setShareSheet=function(e){a.shareSheet=e};const u=new g({});const h={bindingContexts:{this:u.createBindingContext("/")},models:{this:u}};const f={title:t?.tile?.title?t.tile.title:t.title,subtitle:t?.tile?.subtitle,icon:t?.tile?.icon,url:t?.tile?.url?t.tile.url:t.url.substring(t.url.indexOf("#")),queryUrl:t?.tile?.queryUrl};if(a.shareSheet){i=a.shareSheet;const e=i.getModel("share");this._setStaticShareData(e);const r=o(e.getData(),f);e.setData(r);y(i,t);i.openBy(a)}else{const r="sap.fe.macros.share.ShareSheet";const n=c.loadTemplate(r,"fragment");try{const e=await d.process(n,{name:r},h);i=await s.load({definition:e,controller:p});i.setModel(new g(f||{}),"share");const l=i.getModel("share");this._setStaticShareData(l);const c=o(l.getData(),f);l.setData(c);i.setModel(new g(t||{}),"shareData");y(i,t);a.addDependent(i);i.openBy(a);p.setShareSheet(i)}catch(t){e.error("Error while opening the share fragment",t)}}}catch(t){e.error("Error while fetching the share model data",t)}};u.getTeamsUrl=async function e(t){const o=await(this.base.getAppComponent()?.getShellServices().getInframeUrl());return o?o:t};u._setStaticShareData=function e(o){const a=l.getResourceBundleFor("sap.fe.core");o.setProperty("/jamButtonText",a.getText("T_COMMON_SAPFE_SHARE_JAM"));o.setProperty("/emailButtonText",a.getText("T_SEMANTIC_CONTROL_SEND_EMAIL"));o.setProperty("/msTeamsShareButtonText",a.getText("T_COMMON_SAPFE_SHARE_MSTEAMS"));if(t.get("sap-ushell-config.renderers.fiori2.componentData.config.sapHorizonEnabled")===true){o.setProperty("/msTeamsVisible",true)}else{o.setProperty("/msTeamsVisible",false)}const r=t.get("sap.ushell.Container.getUser");o.setProperty("/jamVisible",!!r&&r().isJamActive());o.setProperty("/saveAsTileVisible",!!sap.ui.require("sap/ushell/Container"))};u._doOpenJamShareDialog=async function e(t,o){const a=await i.create({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:o,share:t}}});a.open()};u._triggerEmail=async function e(){const t=await this._adaptShareMetadata();const o=l.getResourceBundleFor("sap.fe.core");const a=t.email.title?t.email.title:o.getText("T_SHARE_UTIL_HELPER_SAPFE_EMAIL_SUBJECT",[t.title]);r.URLHelper.triggerEmail(undefined,a,t.email.url?t.email.url:t.url)};u._triggerShareToJam=async function e(){const t=await this._adaptShareMetadata();await this._doOpenJamShareDialog(t.jam.title?t.jam.title:t.title,t.jam.url?t.jam.url:window.location.origin+window.location.pathname+t.url)};u._saveAsTile=async function e(t){const o=this.base?.getView()?.getModel("shareInfo");if(o){o.setProperty("/saveAsTileClicked",true)}const a=await this._adaptShareMetadata(),r=t.getDependents()[0],i=h.getInstance(),n=i.getHash(),s=i.hrefForAppSpecificHash?i.hrefForAppSpecificHash(""):"";a.url=n?s+n:window.location.hash;r.setTitle(a.tile.title?a.tile.title:a.title);r.setSubtitle(a.tile.subtitle);r.setTileIcon(a.tile.icon);r.setCustomUrl(a.tile.url?a.tile.url:a.url);r.setServiceUrl(a.tile.queryUrl);r.setDataSource({type:"OData",settings:{odataVersion:"4.0"}});if(o){o.setProperty("/saveAsTileClicked",false)}r.firePress()};u._adaptShareMetadata=async function e(){const t=h.getInstance();const o=encodeURIComponent(t.getHash());const a=t.hrefForAppSpecificHash?t.hrefForAppSpecificHash(""):"";const r={url:window.location.origin+window.location.pathname+window.location.search+(o?a+o:window.location.hash),title:await(this.base.getAppComponent()?.getShellServices()?.getTitle()),email:{url:"",title:""},jam:{url:"",title:""},tile:{url:"",title:"",subtitle:"",icon:"",queryUrl:""}};return this.base.getView().getController().share.adaptShareMetadata(r)};return p}(p),V(x.prototype,"onInit",[m],Object.getOwnPropertyDescriptor(x.prototype,"onInit"),x.prototype),V(x.prototype,"onExit",[y],Object.getOwnPropertyDescriptor(x.prototype,"onExit"),x.prototype),V(x.prototype,"openShareSheet",[S,b],Object.getOwnPropertyDescriptor(x.prototype,"openShareSheet"),x.prototype),V(x.prototype,"getCardDefinition",[w,_],Object.getOwnPropertyDescriptor(x.prototype,"getCardDefinition"),x.prototype),V(x.prototype,"adaptShareMetadata",[T,O],Object.getOwnPropertyDescriptor(x.prototype,"adaptShareMetadata"),x.prototype),V(x.prototype,"_triggerEmail",[P,E],Object.getOwnPropertyDescriptor(x.prototype,"_triggerEmail"),x.prototype),V(x.prototype,"_triggerShareToJam",[M,D],Object.getOwnPropertyDescriptor(x.prototype,"_triggerShareToJam"),x.prototype),V(x.prototype,"_saveAsTile",[A,C],Object.getOwnPropertyDescriptor(x.prototype,"_saveAsTile"),x.prototype),V(x.prototype,"_adaptShareMetadata",[v,I],Object.getOwnPropertyDescriptor(x.prototype,"_adaptShareMetadata"),x.prototype),x))||j);return k},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/SideEffects", ["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/ResourceModelHelper","sap/m/Button","sap/m/Dialog","sap/m/MessageToast","sap/m/Text","sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution","../CommonUtils","sap/ui/core/Component"],function(e,t,i,r,o,s,n,c,f,d,a,p){"use strict";var l,u,g,h,E,y,F,S,m,_,C,v,x,P,O,b,w,G,D,M,j,R,I,q,T,A,B,$,N,V,k,z,W,Q,U,L,H,J,K,X,Y,Z,ee,te,ie,re,oe,se,ne,ce,fe,de;var ae=r.getResourceModel;var pe=i.getInvolvedDataModelObjectsForTargetPath;var le=t.publicExtension;var ue=t.privateExtension;var ge=t.methodOverride;var he=t.finalExtension;var Ee=t.extensible;var ye=t.defineUI5Class;function Fe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Se(e,t)}function Se(e,t){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Se(e,t)}function me(e,t,i,r,o){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=i.slice().reverse().reduce(function(i,r){return r(e,t,i)||i},s),o&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(o):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}const _e="$$ImmediateRequest";let Ce=(l=ye("sap.fe.core.controllerextensions.SideEffects"),u=ge(),g=le(),h=he(),E=le(),y=he(),F=le(),S=he(),m=le(),_=he(),C=le(),v=he(),x=le(),P=he(),O=le(),b=he(),w=le(),G=he(),D=le(),M=he(),j=le(),R=he(),I=le(),q=he(),T=le(),A=he(),B=le(),$=he(),N=le(),V=he(),k=le(),z=Ee(d.Instead),W=le(),Q=Ee(d.Instead),U=le(),L=he(),H=ue(),J=he(),K=le(),X=he(),Y=le(),Z=he(),ee=ue(),te=he(),ie=ue(),re=he(),oe=le(),se=he(),ne=le(),ce=he(),l(fe=(de=function(t){function i(){var e;e=t.call(this)||this;e.requestExecutions=[];return e}Fe(i,t);var r=i.prototype;r.onInit=function e(){this._view=this.base.getView();this._pageComponent=p.getOwnerComponentFor(this._view);this._sideEffectsService=a.getAppComponent(this._view).getSideEffectsService();this._registeredFieldGroupMap={};this._fieldGroupInvalidity={};this._registeredFailedSideEffects={}};r.addControlSideEffects=function e(t,i){this._sideEffectsService.addControlSideEffects(t,i)};r.removeControlSideEffects=function e(t){const i=t.isA?.("sap.ui.base.ManagedObject")&&t.getId();if(i){this._sideEffectsService.removeControlSideEffects(i)}};r.getContextForSideEffects=function e(t,i){let r=t,o=this._sideEffectsService.getEntityTypeFromContext(t);if(i!==o){r=t.getBinding().getContext();if(r){o=this._sideEffectsService.getEntityTypeFromContext(r);if(i!==o){r=r.getBinding().getContext();if(r){o=this._sideEffectsService.getEntityTypeFromContext(r);if(i!==o){return undefined}}}}}return r||undefined};r.waitForSideEffectExecutions=async function e(){await Promise.allSettled(this.requestExecutions)};r.getFieldSideEffectsMap=function e(t){let i={};if(this._pageComponent){const e=this._pageComponent.getEntitySet?.();const r=this._pageComponent.getContextPath?.()||e&&`/${e}`;if(r){const e=t.getFieldGroupIds(),o=pe(r,this._view.getModel().getMetaModel());i=this.getSideEffectsMapForFieldGroups(e,t.getBindingContext());if(o){const e=o.targetEntityType.fullyQualifiedName,r=this.getTargetProperty(t),s=this.getContextForSideEffects(t.getBindingContext(),e);if(r&&s){const t=this._sideEffectsService.getControlEntitySideEffects(e);Object.keys(t).forEach(o=>{const n=t[o];if(n.sourceProperties.includes(r)){const t=`${o}::${e}`;i[t]={name:t,immediate:true,sideEffects:n,context:s}}})}}}}return i};r.getSideEffectsMapForFieldGroups=function e(t,i){const r={};t.forEach(e=>{const{name:t,immediate:o,sideEffects:s,sideEffectEntityType:n}=this._getSideEffectsPropertyForFieldGroup(e);const c=i?this.getContextForSideEffects(i,n):undefined;if(s&&(!i||i&&c)){r[t]={name:t,immediate:o,sideEffects:s};if(i){r[t].context=c}}});return r};r.clearFieldGroupsValidity=function e(){this._fieldGroupInvalidity={}};r.isFieldGroupValid=function e(t,i){const r=this._getFieldGroupIndex(t,i);return Object.keys(this._fieldGroupInvalidity[r]??{}).length===0};r.getTargetProperty=function e(t){const i=t.data("sourcePath");const r=this._view.getModel().getMetaModel();const o=this._view.getBindingContext()?.getPath();const s=o?`${r.getMetaPath(o)}/`:"";return i?.replace(s,"")};r.prepareDeferredSideEffectsForField=function e(t,i,r){const o=t.getSource();this._saveFieldPropertiesStatus(o,i);if(!i){return}const s=this.getFieldSideEffectsMap(o);Object.keys(s).filter(e=>s[e].immediate!==true).forEach(e=>{const t=s[e];this.registerFieldGroupSideEffects(t,r)})};r.handleFieldChange=async function e(t,i,r){let o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const s=t.getSource();if(!o){this.prepareDeferredSideEffectsForField(t,i,r)}else{this._saveFieldPropertiesStatus(s,i);if(!i){return}}return this._manageSideEffectsFromField(s)};r.handleFieldGroupChange=async function t(i){const r=i.getSource(),o=i.getParameter("fieldGroupIds")??[],s=o.some(e=>e.startsWith("fe_sideEffectHandling_"));let n=[];if(s){const e=this.handleCustomFieldFieldGroupChange(i);if(e){n.push(e.then(()=>{}))}}const c=o.reduce((e,t)=>e.concat(this.getRegisteredSideEffectsForFieldGroup(t)),[]);n=n.concat(c.map(async e=>this._requestFieldGroupSideEffects(e)));return Promise.all(n).catch(t=>{const i=r.getBindingContext()?.getPath();e.debug(`Error while processing FieldGroup SideEffects on context ${i}`,t)})};r.handleCustomFieldFieldGroupChange=function e(t){const i=t.getSource();const r=Object.values(this.getFieldSideEffectsMap(i));r.filter(e=>e.immediate!==true).forEach(e=>{this.registerFieldGroupSideEffects(e,Promise.resolve())});const o=r.filter(e=>e.immediate===true).map(e=>e.sideEffects);const s=i.getBindingContext();if(o.length&&s){return this.requestMultipleSideEffects(o,s)}return null};r.handlePageChangeContext=async function t(i){await this.waitForSideEffectExecutions();const r=this.getRegisteredSideEffectsForContext(i);return Promise.all(r.map(async e=>this._requestFieldGroupSideEffects(e))).catch(t=>{e.debug(`Error while processing on page context ${i.getPath()}`,t)})};r.requestSideEffects=async function e(t,i,r,o){let s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;const n=this.triggerCallbacks.bind(this);const{targets:c,triggerAction:f}=o?o(t):{targets:[...t.targetEntities??[],...t.targetProperties??[]],triggerAction:!this._sideEffectsService.isControlSideEffects(t)?t.triggerAction:undefined};if(f&&!s){this.requestExecutions.push(this._sideEffectsService.executeAction(f,i,r))}if(c.length){const e=this._sideEffectsService.requestSideEffects(c,i,r).then(async function e(){return n(t.targetEntities?.map(e=>e.$NavigationPropertyPath)||[])}).catch(e=>{this.registerFailedSideEffects([t],i);throw e});this.requestExecutions.push(e);return e}};r.requestSideEffectsForEvent=async function e(t,i){if(this.isDataPathRelevant(i,t)){const e=this._findRelevantContext(i,this.getView().getBindingContext());if(e){return this._sideEffectsService.requestSideEffectsForEvent(t,e)}}};r.isDataPathRelevant=function e(t,i){const r=this.getView().getBindingContext();if(this._contextIsRelevant(t,r)){return true}return!!this._findRelevantContext(t,r)};r._contextIsRelevant=function e(t,i){if(i?.getPath()===t||i?.getCanonicalPath()===t){return true}const r=i.getModel();const o=r.getMetaModel();const s=r.getDependentBindings(i);for(const e of s){const r=e.getPath()??"";if(r.startsWith("@$ui5")){continue}const s=o.fetchUpdateData(r,i).getResult();if(s?.entityPath===t||"/"+s?.editUrl===t){return true}}return false};r._findRelevantContext=function e(t,i){if(this._contextIsRelevant(t,i)){return i}const r=i.getModel().getDependentBindings(i);for(const e of r){if(e.isA("sap.ui.model.odata.v4.ODataContextBinding")){if(this._contextIsRelevant(t,e.getBoundContext())){return e.getBoundContext()}}else if(e.isA("sap.ui.model.odata.v4.ODataListBinding")){const i=e.getAllCurrentContexts();for(const e of i){if(this._contextIsRelevant(t,e)){return e}}}}};r.getDataRefreshText=function e(){const t=ae(this.getView());return t.getText("C_SERVER_EVENTS_NEW_DATA_ITEM")};r.notifyDataRefresh=function e(){n.show(this.base.getView().getController()._sideEffects.getDataRefreshText())};r.confirmDataRefresh=async function e(){if(!this.isConfirmationDialogOpen){return new Promise((e,t)=>{const i=this.getDataRefreshText();const r=ae(this.getView());const n=new s({title:r.getText("WARNING"),state:"Warning",content:new c({text:i}),beginButton:new o({text:r.getText("C_COMMON_SAPFE_REFRESH"),press:()=>{n.close();e()}}),endButton:new o({text:r.getText("C_COMMON_DIALOG_CANCEL"),press:()=>{n.close();t()}}),afterClose:()=>{n.destroy();this.isConfirmationDialogOpen=false}});n.addStyleClass("sapUiContentPadding");this.isConfirmationDialogOpen=true;n.open()})}return Promise.reject()};r.requestMultipleSideEffects=async function e(t,i,r){let o=new Set;let s=new Set;const n=t.reduce((e,t)=>{const i=t.triggerAction;if(i){e.push(i)}return e},[]);const c=this.triggerCallbacks.bind(this);for(const e of n){this._sideEffectsService.executeAction(e,i,r)}for(const e of t){o=(e.targetProperties??[]).reduce((e,t)=>e.add(t),o);s=(e.targetEntities??[]).reduce((e,t)=>e.add(t.$NavigationPropertyPath),s)}return this._sideEffectsService.requestSideEffects([...Array.from(o),...Array.from(s).map(e=>({$NavigationPropertyPath:e}))],i,r).then(async function e(){return c(Array.from(s))}).catch(e=>{this.registerFailedSideEffects(t,i);throw e})};r.getRegisteredFailedRequests=function e(){return this._registeredFailedSideEffects};r.registerFailedSideEffects=function e(t,i){const r=i.getPath();this._registeredFailedSideEffects[r]=this._registeredFailedSideEffects[r]??[];for(const e of t){const t=this._registeredFailedSideEffects[r].every(t=>e.fullyQualifiedName!==t.fullyQualifiedName);if(t){this._registeredFailedSideEffects[r].push(e)}}};r.unregisterFailedSideEffectsForAContext=function e(t){delete this._registeredFailedSideEffects[t]};r.unregisterFailedSideEffects=function e(t,i){const r=i.getPath();if(this._registeredFailedSideEffects[r]?.length){this._registeredFailedSideEffects[r]=this._registeredFailedSideEffects[r].filter(e=>e.fullyQualifiedName!==t)}};r.registerFieldGroupSideEffects=function e(t,i){const r=this._getFieldGroupIndex(t.name,t.context);if(!this._registeredFieldGroupMap[r]){this._registeredFieldGroupMap[r]={promise:i??Promise.resolve(),sideEffectProperty:t}}};r.unregisterFieldGroupSideEffects=function e(t){const{context:i,name:r}=t;const o=this._getFieldGroupIndex(r,i);delete this._registeredFieldGroupMap[o]};r.getRegisteredSideEffectsForFieldGroup=function e(t){const i=[];for(const e of Object.keys(this._registeredFieldGroupMap)){if(e.startsWith(`${t}_`)){i.push(this._registeredFieldGroupMap[e])}}return i};r.getRegisteredSideEffectsForContext=function e(t){const i=[];for(const e of Object.keys(this._registeredFieldGroupMap)){if(this._registeredFieldGroupMap)if(e.includes(`_${t.getPath()}`)){i.push(this._registeredFieldGroupMap[e])}}return i};r._getFieldGroupIndex=function e(t,i){return`${t}_${i.getPath()}`};r._getSideEffectsPropertyForFieldGroup=function e(t){const i=t.includes(_e),r=t.replace(_e,""),o=r.split("#"),s=o[0],n=`${s}@com.sap.vocabularies.Common.v1.SideEffects${o.length===2?`#${o[1]}`:""}`,c=this._sideEffectsService.getODataEntitySideEffects(s)?.[n];return{name:r,immediate:i,sideEffects:c,sideEffectEntityType:s}};r._manageSideEffectsFromField=async function t(i){const r=this.getFieldSideEffectsMap(i);try{const e={};const t=(t,i)=>{const r=t.getPath();if(e[r]){e[r].sideEffects.push(i)}else{e[r]={context:t,sideEffects:[i]}}};for(const e of Object.values(r).filter(e=>e.immediate===true)){this.unregisterFailedSideEffects(e.sideEffects.fullyQualifiedName,e.context);t(e.context,e.sideEffects)}for(const e of[i.getBindingContext(),this._view.getBindingContext()].filter(e=>!!e)){const i=e.getPath();const r=this._registeredFailedSideEffects[i]??[];this.unregisterFailedSideEffectsForAContext(i);for(const i of r){t(e,i)}}await Promise.all(Object.values(e).map(async e=>e.sideEffects.length===1?this.requestSideEffects(e.sideEffects[0],e.context):this.requestMultipleSideEffects(e.sideEffects,e.context)))}catch(t){e.debug(`Error while managing Field SideEffects`,t)}};r.triggerCallbacks=async function e(t){await Promise.all(t.map(e=>{const t=this._sideEffectsService.getRegisteredCallback(e);if(t){return t()}return Promise.resolve()}))};r._requestFieldGroupSideEffects=async function t(i){this.unregisterFieldGroupSideEffects(i.sideEffectProperty);try{await i.promise}catch(t){e.debug(`Error while processing FieldGroup SideEffects`,t);return}try{const{sideEffects:e,context:t,name:r}=i.sideEffectProperty;if(this.isFieldGroupValid(r,t)){await this.requestSideEffects(e,t)}}catch(t){e.debug(`Error while executing FieldGroup SideEffects`,t)}};r._saveFieldPropertiesStatus=function e(t,i){const r=this.getFieldSideEffectsMap(t);Object.keys(r).forEach(e=>{const{name:o,immediate:s,context:n}=r[e];if(!s){const e=this._getFieldGroupIndex(o,n);if(i){delete this._fieldGroupInvalidity[e]?.[t.getId()]}else{this._fieldGroupInvalidity[e]={...this._fieldGroupInvalidity[e],...{[t.getId()]:true}}}}})};return i}(f),me(de.prototype,"onInit",[u],Object.getOwnPropertyDescriptor(de.prototype,"onInit"),de.prototype),me(de.prototype,"addControlSideEffects",[g,h],Object.getOwnPropertyDescriptor(de.prototype,"addControlSideEffects"),de.prototype),me(de.prototype,"removeControlSideEffects",[E,y],Object.getOwnPropertyDescriptor(de.prototype,"removeControlSideEffects"),de.prototype),me(de.prototype,"getContextForSideEffects",[F,S],Object.getOwnPropertyDescriptor(de.prototype,"getContextForSideEffects"),de.prototype),me(de.prototype,"waitForSideEffectExecutions",[m,_],Object.getOwnPropertyDescriptor(de.prototype,"waitForSideEffectExecutions"),de.prototype),me(de.prototype,"getFieldSideEffectsMap",[C,v],Object.getOwnPropertyDescriptor(de.prototype,"getFieldSideEffectsMap"),de.prototype),me(de.prototype,"getSideEffectsMapForFieldGroups",[x,P],Object.getOwnPropertyDescriptor(de.prototype,"getSideEffectsMapForFieldGroups"),de.prototype),me(de.prototype,"clearFieldGroupsValidity",[O,b],Object.getOwnPropertyDescriptor(de.prototype,"clearFieldGroupsValidity"),de.prototype),me(de.prototype,"isFieldGroupValid",[w,G],Object.getOwnPropertyDescriptor(de.prototype,"isFieldGroupValid"),de.prototype),me(de.prototype,"getTargetProperty",[D,M],Object.getOwnPropertyDescriptor(de.prototype,"getTargetProperty"),de.prototype),me(de.prototype,"prepareDeferredSideEffectsForField",[j,R],Object.getOwnPropertyDescriptor(de.prototype,"prepareDeferredSideEffectsForField"),de.prototype),me(de.prototype,"handleFieldChange",[I,q],Object.getOwnPropertyDescriptor(de.prototype,"handleFieldChange"),de.prototype),me(de.prototype,"handleFieldGroupChange",[T,A],Object.getOwnPropertyDescriptor(de.prototype,"handleFieldGroupChange"),de.prototype),me(de.prototype,"handlePageChangeContext",[B,$],Object.getOwnPropertyDescriptor(de.prototype,"handlePageChangeContext"),de.prototype),me(de.prototype,"requestSideEffects",[N,V],Object.getOwnPropertyDescriptor(de.prototype,"requestSideEffects"),de.prototype),me(de.prototype,"requestSideEffectsForEvent",[k,z],Object.getOwnPropertyDescriptor(de.prototype,"requestSideEffectsForEvent"),de.prototype),me(de.prototype,"getDataRefreshText",[W,Q],Object.getOwnPropertyDescriptor(de.prototype,"getDataRefreshText"),de.prototype),me(de.prototype,"getRegisteredFailedRequests",[U,L],Object.getOwnPropertyDescriptor(de.prototype,"getRegisteredFailedRequests"),de.prototype),me(de.prototype,"registerFailedSideEffects",[H,J],Object.getOwnPropertyDescriptor(de.prototype,"registerFailedSideEffects"),de.prototype),me(de.prototype,"unregisterFailedSideEffectsForAContext",[K,X],Object.getOwnPropertyDescriptor(de.prototype,"unregisterFailedSideEffectsForAContext"),de.prototype),me(de.prototype,"unregisterFailedSideEffects",[Y,Z],Object.getOwnPropertyDescriptor(de.prototype,"unregisterFailedSideEffects"),de.prototype),me(de.prototype,"registerFieldGroupSideEffects",[ee,te],Object.getOwnPropertyDescriptor(de.prototype,"registerFieldGroupSideEffects"),de.prototype),me(de.prototype,"unregisterFieldGroupSideEffects",[ie,re],Object.getOwnPropertyDescriptor(de.prototype,"unregisterFieldGroupSideEffects"),de.prototype),me(de.prototype,"getRegisteredSideEffectsForFieldGroup",[oe,se],Object.getOwnPropertyDescriptor(de.prototype,"getRegisteredSideEffectsForFieldGroup"),de.prototype),me(de.prototype,"getRegisteredSideEffectsForContext",[ne,ce],Object.getOwnPropertyDescriptor(de.prototype,"getRegisteredSideEffectsForContext"),de.prototype),de))||fe);return Ce},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/Telemetry", ["sap/fe/base/ClassSupport","sap/fe/core/controllerextensions/BaseControllerExtension"],function(e,t){"use strict";var r,i,o,n;var c={};var a=e.publicExtension;var s=e.defineUI5Class;function p(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l(e,t)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e,t,r,i,o){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},n),o&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(o):void 0,n.initializer=void 0),void 0===n.initializer?(Object.defineProperty(e,t,n),null):n}let f=(r=s("sap.fe.core.controllerextensions.Telemetry"),i=a(),r(o=(n=function(e){function t(){return e.apply(this,arguments)||this}c=t;p(t,e);var r=t.prototype;r.storeAction=function e(t){this.base.getAppComponent().getTelemetryService().storeAction(t,(this.base.getView()?.getViewData()).converterType)};return t}(t),u(n.prototype,"storeAction",[i],Object.getOwnPropertyDescriptor(n.prototype,"storeAction"),n.prototype),n))||o);c=f;return c},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/ViewState", ["sap/base/Log","sap/base/util/merge","sap/fe/base/ClassSupport","sap/fe/navigation/library","sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution"],function(t,e,i,r,n,a){"use strict";var o,s,p,l,c,d,u,y,f,g,S,h,v,b,w,A,C,I,O,m,_,P,V,R,j,B,D,K,T,E,M,F,H,N,k,x,L,U,z,$,q,G,Q,W,J,X,Y,Z,tt,et;function it(t){return new Promise((e,i)=>{sap.ui.require([t],i=>{if(!(i&&i.__esModule)){i=i===null||!(typeof i==="object"&&t.endsWith("/library"))?{default:i}:i;Object.defineProperty(i,"__esModule",{value:true})}e(i)},t=>{i(t)})})}var rt=i.publicExtension;var nt=i.privateExtension;var at=i.finalExtension;var ot=i.extensible;var st=i.defineUI5Class;function pt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,lt(t,e)}function lt(t,e){return lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lt(t,e)}function ct(t,e,i,r,n){var a={};return Object.keys(r).forEach(function(t){a[t]=r[t]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,r){return r(t,e,i)||i},a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(t,e,a),null):a}const dt=r.NavType;const ut="#additionalStates";const yt=async function(){return(await it("sap/ui/mdc/p13n/StateUtil")).default};const ft={"sap.ui.fl.variants.VariantManagement":{retrieve:function(t){return{variantId:t.getCurrentVariantKey()}},apply:async function(e,i){try{if(i&&i.variantId!==undefined&&i.variantId!==e.getCurrentVariantKey()){const r=this._checkIfVariantIdIsAvailable(e,i.variantId);let n;if(r){n=i.variantId}else{n=e.getStandardVariantKey();this.controlsVariantIdUnavailable.push(...e.getFor())}try{const t=(await it("sap/ui/fl/apply/api/ControlVariantApplyAPI")).default;await t.activateVariant({element:e,variantReference:n});await this._setInitialStatesForDeltaCompute(e)}catch(i){t.error(i);this.invalidateInitialStateForApply.push(...e.getFor());await this._setInitialStatesForDeltaCompute(e)}}else{this._setInitialStatesForDeltaCompute(e)}}catch(e){t.error(e)}}},"sap.fe.templates.ListReport.controls.MultipleModeControl":{retrieve:function(t){return{selectedKey:t.content.getSelectedKey()}},apply:function(t,e){if(e?.selectedKey){const i=t.content;if(i.getItems().find(t=>t.getKey()===e.selectedKey)){i.setSelectedKey(e.selectedKey)}}}},"sap.ui.mdc.Table":{refreshBinding:function(e){const i=e.getRowBinding();if(i){const t=i.getRootBinding();const e=i.getAggregation();if(t===i&&e?.hierarchyQualifier===undefined){i.refresh()}else{const t=i.getHeaderContext();const e=i.getGroupId();if(t){t.requestSideEffects([{$NavigationPropertyPath:""}],e)}}}else{t.info(`Table: ${e.getId()} was not refreshed. No binding found!`)}}},"sap.m.SegmentedButton":{retrieve:function(t){return{selectedKey:t.getSelectedKey()}},apply:function(t,e){if(e?.selectedKey&&e.selectedKey!==t.getSelectedKey()){t.setSelectedKey(e.selectedKey);if(t.getParent()?.isA("sap.ui.mdc.ActionToolbar")){t.fireEvent("selectionChange")}}}},"sap.m.Select":{retrieve:function(t){return{selectedKey:t.getSelectedKey()}},apply:function(t,e){if(e?.selectedKey&&e.selectedKey!==t.getSelectedKey()){t.setSelectedKey(e.selectedKey);if(t.getParent()?.isA("sap.ui.mdc.ActionToolbar")){t.fireEvent("change")}}}},"sap.f.DynamicPage":{retrieve:function(t){return{headerExpanded:t.getHeaderExpanded()}},apply:function(t,e){if(e){t.setHeaderExpanded(e.headerExpanded)}}},"sap.ui.core.mvc.View":{retrieve:function(t){const e=t.getController();if(e&&e.viewState){return e.viewState.retrieveViewState()}return{}},apply:async function(t,e,i,r){const n=t.getController();if(n&&n.viewState&&i){return n.viewState.applyViewState(e,i,r)}},refreshBinding:async function(t){const e=t.getController();if(e&&e.viewState){return e.viewState.refreshViewBindings()}}},"sap.ui.core.ComponentContainer":{retrieve:async function(t){const e=t.getComponentInstance();if(e){return this.retrieveControlState(e.getRootControl())}return{}},apply:async function(t,e,i){const r=t.getComponentInstance();if(r){return this.applyControlState(r.getRootControl(),e,i)}}}};let gt=(o=st("sap.fe.core.controllerextensions.ViewState"),s=rt(),p=at(),l=rt(),c=ot(a.After),d=nt(),u=at(),y=nt(),f=at(),g=rt(),S=ot(a.After),h=rt(),v=ot(a.After),b=rt(),w=ot(a.After),A=nt(),C=at(),I=rt(),O=ot(a.After),m=nt(),_=at(),P=rt(),V=ot(a.After),R=rt(),j=at(),B=rt(),D=at(),K=rt(),T=ot(a.After),E=nt(),M=at(),F=rt(),H=ot(a.Instead),N=rt(),k=at(),x=nt(),L=rt(),U=ot(a.After),z=rt(),$=ot(a.After),q=rt(),G=ot(a.After),Q=nt(),W=rt(),J=ot(a.After),X=nt(),Y=at(),Z=rt(),o(tt=(et=function(i){function r(){var e;e=i.call(this)||this;e.initialControlStatesMapper={};e.controlsVariantIdUnavailable=[];e.invalidateInitialStateForApply=[];e.viewStateControls=[];e.stateContributors=[];e._setInitialStatesForDeltaCompute=async i=>{try{const t=e.viewStateControls;const r=[];const n=[];let a=[];const o=i?.getFor()??[];e.updateInitialState(o);await Promise.all(t.filter(function(t){return t&&(!i||o.includes(t.getId()))&&(t.isA("sap.ui.mdc.Table")||t.isA("sap.ui.mdc.FilterBar")||t.isA("sap.ui.mdc.Chart"))}).map(async t=>{if(i){e._addEventListenersToVariantManagement(i,o)}const a=(await yt()).retrieveExternalState(t);r.push(a);n.push(e.getStateKey(t))}));a=await Promise.all(r);a.forEach((t,i)=>{e.initialControlStatesMapper[n[i]]=t})}catch(e){t.error(e)}};e._iRetrievingStateCounter=0;e._pInitialStateApplied=new Promise(t=>{e._pInitialStateAppliedResolve=t});return e}pt(r,i);var n=r.prototype;n.refreshViewBindings=async function t(){const e=await this.collectResults(this.base.viewState.adaptBindingRefreshControls);let i=Promise.resolve();e.filter(t=>t&&t.isA&&t.isA("sap.ui.base.ManagedObject")).forEach(t=>{i=i.then(this.refreshControlBinding.bind(this,t))});return i};n.adaptBindingRefreshControls=function t(e){};n.refreshControlBinding=async function e(i){const r=this.getControlRefreshBindingHandler(i);let n=Promise.resolve();if(typeof r.refreshBinding!=="function"){t.info(`refreshBinding handler for control: ${i.getMetadata().getName()} is not provided`)}else{n=n.then(r.refreshBinding.bind(this,i))}return n};n.getControlRefreshBindingHandler=function t(e){const i={};if(e){for(const t in ft){if(e.isA(t)){i["refreshBinding"]=ft[t].refreshBinding||{};break}}}this.base.viewState.adaptBindingRefreshHandler(e,i);return i};n.adaptBindingRefreshHandler=function t(e,i){};n.onSuspend=function t(){};n.onRestore=function t(){};n.destroy=function t(){delete this._pInitialStateAppliedResolve;i.prototype.destroy.call(this)};n.collectResults=async function t(e){const i=[];for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++){n[a-1]=arguments[a]}n.push(i);e.apply(this,n);return Promise.all(i)};n.adaptControlStateHandler=function t(e,i){};n.getControlStateHandler=function t(e){const i=[],r=[];if(e){if(e.isA("sap.fe.core.controllerextensions.viewState.IViewStateContributor")&&e.retrieveState&&e.applyState){i.push({retrieve:async t=>e.retrieveState.bind(e)(),apply:async(t,i,r,n)=>{const a=!this.invalidateInitialStateForApply.includes(e.getId())&&!this.controlsVariantIdUnavailable.includes(e.getId())&&r?.navigationType!==dt.hybrid&&n!==true;if(!i){if(e.applyLegacyState){await e.applyLegacyState.bind(e)(this.getControlState.bind(this),r,a,n)}}else{await e.applyState.bind(e)(i,r,a,n)}}})}else{for(const t in ft){if(e.isA(t)){i.push(Object.assign({},ft[t]));break}}}}this.base.viewState.adaptControlStateHandler(e,r);return i.concat(r)};n.adaptStateControls=function t(e){e.push(...this.stateContributors)};n.getStateKey=function t(e){return this.getView().getLocalId(e.getId())||e.getId()};n.retrieveViewState=async function t(){++this._iRetrievingStateCounter;let i;try{await this._pInitialStateApplied;const t=await this.collectResults(this.base.viewState.adaptStateControls);const r=await Promise.all(t.filter(function(t){return t&&t.isA&&t.isA("sap.ui.base.ManagedObject")}).map(async t=>this.retrieveControlState(t).then(e=>({key:this.getStateKey(t),value:e}))));i=r.reduce(function(t,i){const r={};r[i.key]=i.value;return e(t,r)},{});const n=this._currentViewState;if(n&&Object.keys(n).length>0){this._addMissingState(i,n)}const a=await Promise.resolve(this._retrieveAdditionalStates());if(a&&Object.keys(a).length){i[ut]=a}}finally{--this._iRetrievingStateCounter}this._currentViewState=i;return this._iRetrievingStateCounter===0?i:undefined};n._addMissingState=function t(e,i){for(const t in i){if(!(t in e)){e[t]=i[t]}}};n.retrieveAdditionalStates=function t(e){};n._retrieveAdditionalStates=function t(){const e={};this.base.viewState.retrieveAdditionalStates(e);return e};n.retrieveControlState=async function t(i){const r=this.getControlStateHandler(i);return Promise.all(r.map(async t=>{if(typeof t.retrieve!=="function"){throw new Error(`controlStateHandler.retrieve is not a function for control: ${i.getMetadata().getName()}`)}return t.retrieve.call(this,i)})).then(t=>t.reduce(function(t,i){return e(t,i)},{}))};n.applyInitialStateOnly=function t(){return true};n.getControlState=function t(e){const i=this._currentViewState;let r={};if(i){const t=this.getStateKey(e);r=i[t]}return r};n.applyViewState=async function e(i,r,n){if(this.base.viewState.applyInitialStateOnly()&&this._getInitialStateApplied()){return}try{if(this._isStateEmptyForIAppStateNavType(i,r.navigationType)&&!this.__isRootViewController()){return}await this.collectResults(this.base.viewState.onBeforeStateApplied,[],r.navigationType);const t=await this.collectResults(this.base.viewState.adaptStateControls);this.viewStateControls=t;let e=Promise.resolve();let a=false;this._currentViewState=i;this.configOfStateApply=this.configOfStateApply??{};this.configOfStateApply.skipMerge=n;this.configOfStateApply.navTypeParameters=r;this.configOfStateApply.state=i;const o=t.reduce((t,e)=>{if(!e){return t}const i=e.isA("sap.ui.fl.variants.VariantManagement");if(!a){a=i}t=i?[e,...t]:[...t,e];return t},[]);if(!a){this._setInitialStatesForDeltaCompute()}o.filter(function(t){return t.isA("sap.ui.base.ManagedObject")}).forEach(t=>{const a=this.getStateKey(t);e=e.then(this.applyControlState.bind(this,t,i?i[a]:undefined,r,n??false))});await e;if(r.navigationType===dt.iAppState||r.navigationType===dt.hybrid){await this.collectResults(this.base.viewState.applyAdditionalStates,i?i[ut]:undefined)}else{await this.collectResults(this.base.viewState.applyNavigationParameters,r);await this.collectResults(this.base.viewState._applyNavigationParametersToFilterbar,r)}}finally{try{if(!this._isStateEmptyForIAppStateNavType(i,r.navigationType)){await this.collectResults(this.base.viewState.onAfterStateApplied)}this._setInitialStateApplied()}catch(e){t.error(e)}}};n._checkIfVariantIdIsAvailable=function t(e,i){const r=e.getVariants();let n=false;r.forEach(function(t){if(t.getKey()===i){n=true}});return n};n._setInitialStateApplied=function t(){if(this._pInitialStateAppliedResolve){const t=this._pInitialStateAppliedResolve;delete this._pInitialStateAppliedResolve;t()}};n._getInitialStateApplied=function t(){return!this._pInitialStateAppliedResolve};n._isStateEmptyForIAppStateNavType=function t(e,i){return(!e||Object.keys(e).length===0)&&i==dt.iAppState};n.__isRootViewController=function t(){const e=this.base.getView().getController();return e.isA("sap.fe.core.rootView.NavContainer")||e.isA("sap.fe.core.rootView.Fcl")};n.onBeforeStateApplied=function t(e,i){};n.onAfterStateApplied=function t(e){};n.applyAdditionalStates=function t(e,i){};n._applyNavigationParametersToFilterbar=function t(e,i){};n.applyNavigationParameters=function t(e,i){};n.applyControlState=async function t(e,i,r,n){const a=this.getControlStateHandler(e);let o=Promise.resolve();a.forEach(t=>{if(typeof t.apply!=="function"){throw new Error(`controlStateHandler.apply is not a function for control: ${e.getMetadata().getName()}`)}o=o.then(t.apply.bind(this,e,i,r,n))});return o};n.updateAppStateDebounced=function t(){if(this.updateAppStateTimer){clearTimeout(this.updateAppStateTimer)}this.updateAppStateTimer=setTimeout(()=>{this.base.getExtensionAPI().updateAppState()},200)};n.registerStateContributor=function t(e){if(this.stateContributors.includes(e)){return}this.stateContributors.push(e);if(this._currentViewState){const t=this.getStateKey(e);const i=this._currentViewState[t];const r=this.configOfStateApply?.navTypeParameters?.navigationType;const n=this.configOfStateApply?.skipMerge;if(i&&i===this.configOfStateApply?.state?.[t]){const t=!this.invalidateInitialStateForApply.includes(e.getId())&&!this.controlsVariantIdUnavailable.includes(e.getId())&&r!==dt.hybrid&&n!==true;e.applyState(i,undefined,t)}else{this.updateAppStateDebounced()}}};n.deregisterStateContributor=function t(e){const i=this.stateContributors.findIndex(t=>t==e);if(i!==-1){this.stateContributors.splice(i,1)}};n.getInterface=function t(){return this};n._getControlState=function t(e,i){const r=this.initialControlStatesMapper;if(Object.keys(r).length>0&&r[e]){if(Object.keys(r[e]).length===0){r[e]={...i}}return{fullState:i,initialState:r[e]}}return i};n._addEventListenersToVariantManagement=function t(e,i){const r={variantManagedControls:i};const n=()=>{this._updateInitialStatesOnVariantChange(i)};e.attachSave(r,n,{});e.attachSelect(r,n,{})};n._updateInitialStatesOnVariantChange=function t(e){const i=this.initialControlStatesMapper;Object.keys(i).forEach(t=>{for(const r of e){if(r.includes(t)){i[t]={}}}});this.updateInitialState(e)};n.updateInitialState=async function t(e){const i=this.stateContributors;await Promise.all(i.map(async t=>{const i=t?.getId();if(e.includes(i)&&t?.isA("sap.fe.core.controllerextensions.viewState.IViewStateContributor")&&t.setInitialState){await t.setInitialState()}}))};n._isInitialStatesApplicable=function t(e,i,r,n){return!!e&&!this.invalidateInitialStateForApply.includes(i.getId())&&!this.controlsVariantIdUnavailable.includes(i.getId())&&(n??true)&&r!==true};return r}(n),ct(et.prototype,"refreshViewBindings",[s,p],Object.getOwnPropertyDescriptor(et.prototype,"refreshViewBindings"),et.prototype),ct(et.prototype,"adaptBindingRefreshControls",[l,c],Object.getOwnPropertyDescriptor(et.prototype,"adaptBindingRefreshControls"),et.prototype),ct(et.prototype,"refreshControlBinding",[d,u],Object.getOwnPropertyDescriptor(et.prototype,"refreshControlBinding"),et.prototype),ct(et.prototype,"getControlRefreshBindingHandler",[y,f],Object.getOwnPropertyDescriptor(et.prototype,"getControlRefreshBindingHandler"),et.prototype),ct(et.prototype,"adaptBindingRefreshHandler",[g,S],Object.getOwnPropertyDescriptor(et.prototype,"adaptBindingRefreshHandler"),et.prototype),ct(et.prototype,"onSuspend",[h,v],Object.getOwnPropertyDescriptor(et.prototype,"onSuspend"),et.prototype),ct(et.prototype,"onRestore",[b,w],Object.getOwnPropertyDescriptor(et.prototype,"onRestore"),et.prototype),ct(et.prototype,"collectResults",[A,C],Object.getOwnPropertyDescriptor(et.prototype,"collectResults"),et.prototype),ct(et.prototype,"adaptControlStateHandler",[I,O],Object.getOwnPropertyDescriptor(et.prototype,"adaptControlStateHandler"),et.prototype),ct(et.prototype,"getControlStateHandler",[m,_],Object.getOwnPropertyDescriptor(et.prototype,"getControlStateHandler"),et.prototype),ct(et.prototype,"adaptStateControls",[P,V],Object.getOwnPropertyDescriptor(et.prototype,"adaptStateControls"),et.prototype),ct(et.prototype,"getStateKey",[R,j],Object.getOwnPropertyDescriptor(et.prototype,"getStateKey"),et.prototype),ct(et.prototype,"retrieveViewState",[B,D],Object.getOwnPropertyDescriptor(et.prototype,"retrieveViewState"),et.prototype),ct(et.prototype,"retrieveAdditionalStates",[K,T],Object.getOwnPropertyDescriptor(et.prototype,"retrieveAdditionalStates"),et.prototype),ct(et.prototype,"retrieveControlState",[E,M],Object.getOwnPropertyDescriptor(et.prototype,"retrieveControlState"),et.prototype),ct(et.prototype,"applyInitialStateOnly",[F,H],Object.getOwnPropertyDescriptor(et.prototype,"applyInitialStateOnly"),et.prototype),ct(et.prototype,"applyViewState",[N,k],Object.getOwnPropertyDescriptor(et.prototype,"applyViewState"),et.prototype),ct(et.prototype,"_checkIfVariantIdIsAvailable",[x],Object.getOwnPropertyDescriptor(et.prototype,"_checkIfVariantIdIsAvailable"),et.prototype),ct(et.prototype,"onBeforeStateApplied",[L,U],Object.getOwnPropertyDescriptor(et.prototype,"onBeforeStateApplied"),et.prototype),ct(et.prototype,"onAfterStateApplied",[z,$],Object.getOwnPropertyDescriptor(et.prototype,"onAfterStateApplied"),et.prototype),ct(et.prototype,"applyAdditionalStates",[q,G],Object.getOwnPropertyDescriptor(et.prototype,"applyAdditionalStates"),et.prototype),ct(et.prototype,"_applyNavigationParametersToFilterbar",[Q],Object.getOwnPropertyDescriptor(et.prototype,"_applyNavigationParametersToFilterbar"),et.prototype),ct(et.prototype,"applyNavigationParameters",[W,J],Object.getOwnPropertyDescriptor(et.prototype,"applyNavigationParameters"),et.prototype),ct(et.prototype,"applyControlState",[X,Y],Object.getOwnPropertyDescriptor(et.prototype,"applyControlState"),et.prototype),ct(et.prototype,"updateAppStateDebounced",[Z],Object.getOwnPropertyDescriptor(et.prototype,"updateAppStateDebounced"),et.prototype),et))||tt);return gt},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/cards/CollaborationManager", ["sap/fe/base/ClassSupport","sap/fe/core/CommonUtils","sap/ui/core/mvc/ControllerExtension"],function(e,t,i){"use strict";var r,n,o,a,p,s,c,l;var u={};var d=e.publicExtension;var f=e.methodOverride;var v=e.extensible;var b=e.defineUI5Class;function y(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,g(e,t)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function C(e,t,i,r,n){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce(function(i,r){return r(e,t,i)||i},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}let h=(r=b("sap.fe.core.controllerextensions.cards.CollaborationManager"),n=f(),o=f("_routing"),a=f(),p=d(),s=v("AfterAsync"),r(c=(l=function(e){function i(){var t;t=e.call(this)||this;t.init();return t}u=i;y(i,e);var r=i.prototype;r.onInit=async function e(){this.feView=this.base.getView();this.appComponent=t.getAppComponent(this.feView);const i=await this.appComponent.getService("environmentCapabilities");this.serviceEnabled=true;if(!this.appComponent["isCollaborationManagerServiceEnabled"]()||!i.getCapabilities().InsightsSupported||!await i.isInsightsEnabled()){this.serviceEnabled=false}};r.onAfterBinding=async function e(){if(this.serviceEnabled===false){return}await this.getService().connect(this.appComponent.getId(),async()=>{const e=[];await this.collectAvailableCards(e);const t=this.updateCards(e);const i=this.appComponent.getId();this.getService().addCardsToCollaborationManager(t,i)})};r.updateCards=function e(t){return t.reduce((e,t)=>{if(t?.card["sap.app"]?.id){e[t?.card["sap.app"]?.id]=t}return e},{})};r.onExit=function e(){this.getService().unregisterProvider()};r.getService=function e(){return this.appComponent.getCollaborationManagerService()};r.collectAvailableCards=async function e(t){return Promise.resolve()};return i}(i),C(l.prototype,"onInit",[n],Object.getOwnPropertyDescriptor(l.prototype,"onInit"),l.prototype),C(l.prototype,"onAfterBinding",[o],Object.getOwnPropertyDescriptor(l.prototype,"onAfterBinding"),l.prototype),C(l.prototype,"onExit",[a],Object.getOwnPropertyDescriptor(l.prototype,"onExit"),l.prototype),C(l.prototype,"collectAvailableCards",[p,s],Object.getOwnPropertyDescriptor(l.prototype,"collectAvailableCards"),l.prototype),l))||c);u=h;return u},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/collaboration/ActivityBase", ["sap/fe/core/controllerextensions/collaboration/CollaborationCommon","sap/fe/core/helpers/ResourceModelHelper","sap/fe/core/helpers/WebSocket","sap/m/MessageBox"],function(e,t,o,r){"use strict";var n={};var a=o.createWebSocket;var i=o.ChannelType;var s=t.getResourceModel;var c=e.Activity;const l="/collaboration";const C="/collaboration/connection";const N="/collaboration/DraftID";const f="/collaboration/websocket_status";let p=function(e){e[e["CLOSED"]=0]="CLOSED";e[e["CLOSING"]=1]="CLOSING";e[e["CONNECTING"]=2]="CONNECTING";e[e["CONNECTED"]=3]="CONNECTED";e[e["ERROR"]=4]="ERROR";return e}({});n.WEBSOCKET_STATUS=p;function u(e){return e.getProperty(f)===p.CONNECTED}n.isCollaborationConnected=u;function O(e,t,o,n,c){let u=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;if(o.getProperty(C)){if(o.getProperty(N)===t){return false}else{d(o)}}const O=[e];o.setProperty(l,{activeUsers:O,activities:{}});const E={draft:t};if(u||new URLSearchParams(window.location.search).get("useFLPUser")==="true"){E["userID"]=e.id;E["userName"]=e.initialName??""}const g=a(i.CollaborationDraft,c.getModel(),E);o.setProperty(f,p.CONNECTING);o.setProperty(C,g);o.setProperty(N,t);g.attachMessage(function(e){const t=e.getParameter("pcpFields");if(t){n(t)}});g.attachOpen(function(){o.setProperty(f,p.CONNECTED)});g.attachError(function(){if([p.CONNECTING,p.CONNECTED].includes(o.getProperty(f))){const e=s(c);const t=e.getText("C_COLLABORATIONDRAFT_CONNECTION_LOST");r.warning(t,{actions:[r.Action.OK],emphasizedAction:r.Action.OK})}o.setProperty(f,p.ERROR)});g.attachClose(function(){o.setProperty(f,p.CLOSED)});return true}n.initializeCollaboration=O;function E(e,t,o,r,n,a){if(u(o)){const i=o.getProperty(C);i.send("",{clientAction:e,clientContent:t,clientTriggeredActionName:r,clientRefreshListBinding:n,clientRequestedProperties:a});if(e===c.Activate||e===c.Discard){d(o)}}}n.broadcastCollaborationMessage=E;function d(e){const t=e.getProperty(C);e.setProperty(l,{});e.setProperty(f,p.CLOSING);t?.close()}n.endCollaboration=d;return n},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/collaboration/CollaborationCommon", ["sap/ui/core/Component","sap/ui/core/Lib"],function(e,t){"use strict";var n={};let r=function(e){e[e["NotYetInvited"]=0]="NotYetInvited";e[e["NoChangesMade"]=1]="NoChangesMade";e[e["ChangesMade"]=2]="ChangesMade";e[e["CurrentlyEditing"]=3]="CurrentlyEditing";return e}({});n.UserStatus=r;let o=function(e){e["NoChanges"]="N";e["InProgress"]="P";return e}({});n.UserEditingState=o;let i=function(e){e["Join"]="JOIN";e["JoinEcho"]="JOINECHO";e["Leave"]="LEAVE";e["Change"]="CHANGE";e["Create"]="CREATE";e["Delete"]="DELETE";e["Action"]="ACTION";e["Lock"]="LOCK";e["Activate"]="ACTIVATE";e["Discard"]="DISCARD";e["Unlock"]="UNLOCK";return e}({});n.Activity=i;function a(e){const t=["Dr.","Prof.","Prof. Dr.","B.A.","MBA","Ph.D."];t.forEach(function(t){e=e.replace(t,"")});let n;const r=e.trimStart().split(" ");if(r.length>1){n=(r?.shift()?.charAt(0)||"")+r.pop()?.charAt(0)}else{n=e.substring(0,2)}return n.toUpperCase()}function s(e,t,n){const r=t.find(t=>t.id===e);if(r){return r.color}else{for(let e=1;e<=10;e++){if(t.findIndex(t=>t.color===`Accent${e}`)===-1&&n.findIndex(t=>t.color===`Accent${e}`)===-1){return`Accent${e}`}}return"Accent10"}}function c(t){if(t.isA("sap.fe.core.AppComponent")){return t}const n=e.getOwnerComponentFor(t);if(!n){return t}else{return c(n)}}function l(e){const t=e.getShellServices();let n,o,i;if(t?.hasUShell()){n=t.getUserInitials();o=t.getUser().getId();i=t.getUser().getFullName()}else if(window.adt){o=window.adt.userID;i=window.adt.userName;n=a(i)}else{throw"No Shell... No User"}return{initials:n,id:o,name:u("C_COLLABORATIONDRAFT_ME",i),initialName:i,color:"Accent6",me:true,status:r.CurrentlyEditing}}function u(e){const n=t.getResourceBundleFor("sap.fe.core");for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++){o[i-1]=arguments[i]}return n.getText(e,o)}n.getText=u;const f={formatInitials:a,getUserColor:s,getMe:l,getAppComponent:c,getText:u};n.CollaborationUtils=f;async function g(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];const n=e.getModel();const r=n.getMetaModel();const o=r.getMetaPath(e.getPath());const i=r.getObject(`${o}@com.sap.vocabularies.Common.v1.DraftRoot/ShareAction`);const a=n.bindContext(`${i}(...)`,e);a.setParameter("Users",t);a.setParameter("ShareAll",true);return a.execute("$auto.Workers")}n.shareObject=g;function d(e){return e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(")"))}n.getActivityKeyFromPath=d;const C="_CollaborationDraft_";n.CollaborationFieldGroupPrefix=C;return n},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/dialog/OperationsDialog", ["sap/fe/base/ClassSupport","sap/fe/core/buildingBlocks/BuildingBlock","sap/m/Bar","sap/m/Button","sap/m/Dialog","sap/m/Title","sap/ui/core/Lib","sap/fe/base/jsx-runtime/jsx"],function(e,t,i,r,n,l,a,o){"use strict";var s,u,c,p,g,f,b,d,m,h,y,w,z,v,H,B,j,x,M,q,D,E,O,U,S,T,I,P,C,N,W,_,k,G,R,F,L;var A={};var V=e.property;var J=e.defineUI5Class;var K=e.defineReference;function Q(e,t,i,r){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}function X(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Y(e,t)}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function Z(e,t,i,r,n){var l={};return Object.keys(r).forEach(function(e){l[e]=r[e]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=i.slice().reverse().reduce(function(i,r){return r(e,t,i)||i},l),n&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(n):void 0,l.initializer=void 0),void 0===l.initializer?(Object.defineProperty(e,t,l),null):l}function $(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}const ee=a.getResourceBundleFor("sap.fe.macros");let te=(s=J("sap.fe.core.controllerextensions.dialog.OperationsDialog"),u=V({type:"string",required:true}),c=V({type:"string"}),p=V({type:"object",required:true}),g=K(),f=V({type:"boolean",required:true}),b=V({type:"function"}),d=V({type:"function"}),m=V({type:"object",required:true}),h=V({type:"string",required:true}),y=V({type:"string",required:true}),w=V({type:"string",required:true}),z=V({type:"object",required:true}),v=V({type:"object"}),H=V({type:"object"}),B=V({type:"object",required:true}),j=V({type:"boolean"}),x=V({type:"function"}),s(M=(q=function(e){function t(t){var i;i=e.call(this,t)||this;Q(i,"id",D,i);Q(i,"title",E,i);Q(i,"messageObject",O,i);Q(i,"operationsDialog",U,i);Q(i,"isMultiContext412",S,i);Q(i,"requestSideEffects",T,i);Q(i,"resolve",I,i);Q(i,"model",P,i);Q(i,"groupId",C,i);Q(i,"actionName",N,i);Q(i,"cancelButtonTxt",W,i);Q(i,"strictHandlingPromises",_,i);Q(i,"strictHandlingUtilities",k,i);Q(i,"messageHandler",G,i);Q(i,"messageDialogModel",R,i);Q(i,"isGrouped",F,i);Q(i,"showMessageInfo",L,i);i.model=t.model;return i}A=t;X(t,e);var a=t.prototype;a.open=function e(){this.createContent();this.operationsDialog.current?.open()};a.getBeginButton=function e(){return new r({press:()=>{if(!(this.isMultiContext412??false)){this.resolve?.(true);this.model.submitBatch(this.groupId);if(this.requestSideEffects){this.requestSideEffects()}}else{this.strictHandlingPromises.forEach(e=>{e.resolve(true);this.model.submitBatch(e.groupId);if(e.requestSideEffects){e.requestSideEffects()}});const e=this.strictHandlingUtilities?.strictHandlingTransitionFails;if(e&&e.length>0){this.messageHandler?.removeTransitionMessages()}if(this.strictHandlingUtilities){this.strictHandlingUtilities.strictHandlingWarningMessages=[]}}if(this.strictHandlingUtilities){this.strictHandlingUtilities.is412Executed=true}this.messageDialogModel.setData({});this.close()},type:"Emphasized",text:this.actionName})};a.close=function e(){this.operationsDialog.current?.close()};a.getTitle=function e(){const t=ee.getText("M_WARNINGS");return new l({text:t})};a.getEndButton=function e(){return new r({press:()=>{if(this.strictHandlingUtilities){this.strictHandlingUtilities.strictHandlingWarningMessages=[];this.strictHandlingUtilities.is412Executed=false}if(!(this.isMultiContext412??false)){this.resolve(false)}else{this.strictHandlingPromises.forEach(function(e){e.resolve(false)})}this.messageDialogModel.setData({});this.close();if(this.isGrouped??false){this.showMessageInfo()}},text:this.cancelButtonTxt})};a.createContent=function e(){return o(n,{id:this.id,ref:this.operationsDialog,resizable:true,content:this.messageObject.messageView,state:"Warning",customHeader:new i({contentLeft:[this.messageObject.oBackButton],contentMiddle:[this.getTitle()]}),contentHeight:"50%",contentWidth:"50%",verticalScrolling:false,beginButton:this.getBeginButton(),endButton:this.getEndButton()})};return t}(t),D=Z(q.prototype,"id",[u],{configurable:true,enumerable:true,writable:true,initializer:null}),E=Z(q.prototype,"title",[c],{configurable:true,enumerable:true,writable:true,initializer:function(){return"Dialog Standard Title"}}),O=Z(q.prototype,"messageObject",[p],{configurable:true,enumerable:true,writable:true,initializer:null}),U=Z(q.prototype,"operationsDialog",[g],{configurable:true,enumerable:true,writable:true,initializer:null}),S=Z(q.prototype,"isMultiContext412",[f],{configurable:true,enumerable:true,writable:true,initializer:null}),T=Z(q.prototype,"requestSideEffects",[b],{configurable:true,enumerable:true,writable:true,initializer:null}),I=Z(q.prototype,"resolve",[d],{configurable:true,enumerable:true,writable:true,initializer:null}),P=Z(q.prototype,"model",[m],{configurable:true,enumerable:true,writable:true,initializer:null}),C=Z(q.prototype,"groupId",[h],{configurable:true,enumerable:true,writable:true,initializer:null}),N=Z(q.prototype,"actionName",[y],{configurable:true,enumerable:true,writable:true,initializer:null}),W=Z(q.prototype,"cancelButtonTxt",[w],{configurable:true,enumerable:true,writable:true,initializer:null}),_=Z(q.prototype,"strictHandlingPromises",[z],{configurable:true,enumerable:true,writable:true,initializer:null}),k=Z(q.prototype,"strictHandlingUtilities",[v],{configurable:true,enumerable:true,writable:true,initializer:null}),G=Z(q.prototype,"messageHandler",[H],{configurable:true,enumerable:true,writable:true,initializer:null}),R=Z(q.prototype,"messageDialogModel",[B],{configurable:true,enumerable:true,writable:true,initializer:null}),F=Z(q.prototype,"isGrouped",[j],{configurable:true,enumerable:true,writable:true,initializer:null}),L=Z(q.prototype,"showMessageInfo",[x],{configurable:true,enumerable:true,writable:true,initializer:null}),q))||M);A=te;return A},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/editFlow/InlineEditHelper", ["sap/ui/core/Element"],function(e){"use strict";var t={};const n="inlineEdit";function i(e,t){const n=e.getModel("ui");const i=n.getProperty("/registeredBindingContexts")??[];const o=e.getId();if(t){const t=`/${o}`;n.setProperty(t,{isEditable:true});e.bindElement({path:t,model:"ui"});i.push(o);n.setProperty("/registeredBindingContexts",i)}else{e.unbindElement("ui");n.setProperty("/registeredBindingContexts",i.filter(e=>e!==o))}}t.toggleControlLocalEdit=i;function o(t){t.getModel().resetChanges(n);const i=t.getModel("ui");const o=i.getProperty("/registeredBindingContexts")??[];for(const t of o){const n=e.getElementById(t);if(n){n.unbindElement("ui")}}i.setProperty("/registeredBindingContexts",[])}t.leaveInlineEdit=o;return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/editFlow/NotApplicableContextDialog", ["sap/fe/core/templating/EntityTypeHelper","sap/m/Button","sap/m/CustomListItem","sap/m/Dialog","sap/m/HBox","sap/m/List","sap/m/Text","sap/m/VBox","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/Fragment","sap/fe/base/jsx-runtime/jsxs"],function(t,e,i,n,s,o,a,r,l,h,p){"use strict";var c={};var u=t.getTitleExpression;let d=function(){function t(t){this.title=t.title;this.resourceModel=t.resourceModel;this.entityType=t.entityType;this.notApplicableContexts=t.notApplicableContexts;this._shouldContinue=false;this.actionName=t.actionName;this.entitySetName=t.entitySet;this._dialog=this.createDialog();this._processingPromise=new Promise(t=>{this._fnResolve=t})}c=t;var d=t.prototype;d.onAfterClose=function t(){this._fnResolve(this._shouldContinue);this._dialog.destroy()};d.onContinue=function t(){this._shouldContinue=true;this._dialog.close()};d.open=async function t(e){e.addDependent(this._dialog);this._dialog.open();return this._processingPromise};d.getDialog=function t(){return this._dialog};d.createDialog=function t(){let c=this.actionName;c=c?.includes(".")?c?.split(".")[c?.split(".").length-1]:c;const d=c&&this.entitySetName?`${this.entitySetName}|${c}`:"";return l(n,{state:"Warning",showHeader:true,resizable:true,verticalScrolling:true,horizontalScrolling:true,class:"sapUiContentPadding",title:this.title,afterClose:this.onAfterClose.bind(this),children:{beginButton:l(e,{text:this.resourceModel.getText("C_ACTION_PARTIAL_FRAGMENT_SAPFE_CONTINUE_ANYWAY",undefined,d),press:this.onContinue.bind(this),type:"Emphasized"}),endButton:l(e,{text:this.resourceModel.getText("C_COMMON_SAPFE_CLOSE"),press:()=>this._dialog.close()}),content:p(h,{children:[l(r,{children:l(a,{text:this.notApplicableContexts.length===1?this.resourceModel.getText("C_ACTION_PARTIAL_FRAGMENT_SAPFE_BOUND_ACTION",undefined,d):this.resourceModel.getText("C_ACTION_PARTIAL_FRAGMENT_SAPFE_BOUND_ACTION_PLURAL",[this.notApplicableContexts.length],d),class:"sapUiTinyMarginBegin sapUiTinyMarginTopBottom"})}),l(o,{headerText:this.entityType.annotations.UI?.HeaderInfo?.TypeNamePlural,showSeparators:"None",children:{items:this.notApplicableContexts.map(t=>{const e=u(this.entityType);const n=l(i,{children:l(s,{justifyContent:"Start",children:l(a,{text:e,class:"sapUiTinyMarginBegin sapUiTinyMarginTopBottom"})})});n.setBindingContext(t);return n})}})]})}})};return t}();c=d;return c},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/editFlow/ODataOperation", ["sap/base/Log","sap/fe/core/library","sap/ui/core/Messaging","sap/ui/core/message/MessageType","sap/ui/model/odata/v4/SubmitMode","../../ActionRuntime","../../operationsHelper","../messageHandler/messageHandling"],function(t,e,i,s,a,r,n,o){"use strict";var c={};const l=e.Constants;let d=function(){function e(t,e,i,s){let a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};this.enableStrictHandling=true;this.firstIterationOperations=[];this.operationParameters=[];this.neverSubmitted=true;this.apiGroupIdsToSubmit=new Set;this.operation=t;this.parameters=e;this.messageHandler=i;this.strictHandlingUtilities=s;this.operationProperties=a;this.enableStrictHandling=this.parameters.disableStrictHandling!==true&&!this.operation.isFunction;this.defineOperationParameters()}c=e;var d=e.prototype;d.defineOperationParameters=function t(){if(this.operation._type==="ActionImport"){this.operationParameters=this.operation.action.parameters}else{this.operationParameters=this.operation.isBound?this.operation.parameters.slice(1):this.operation.parameters}};d.execute=async function e(){let i;try{if(this.parameters.aContexts.length){i=await(this.parameters.bGrouped===true?this.executeChangeset():this.executeSequentially())}else{i=await Promise.allSettled([this.executeImport()])}}catch(e){t.error("Error while executing operation "+this.parameters.actionName,e);throw e}finally{this.parameters.fnOnResponse?.()}return i};d.executeImport=async function t(){const e=this.parameters.model.bindContext(`/${this.parameters.actionName}(...)`);this.setParametersValue(e);const i=this.parameters.groupId??"actionImport";const s=[this.invoke(e,i,null)];if(this.parameters.additionalSideEffect){const t=this.parameters.model.bindContext("/unBoundAction").getBoundContext();const e={context:t,pathExpressions:this.parameters.additionalSideEffect.pathExpressions,triggerActions:this.parameters.additionalSideEffect.triggerActions};this.requestSideEffects(e,i,s);t.destroy()}this.defaultSubmit(i);const a=await Promise.all(s);return a[0]};d.executeChangeset=async function t(){const e=this.parameters.aContexts.map(async t=>this.executeBoundOperation(t,this.parameters.groupId));await Promise.allSettled(this.firstIterationOperations);await this.manageStrictHandlingFails();return Promise.allSettled(e)};d.executeSequentially=async function t(){const e=[];await this.parameters.aContexts.reduce(async(t,i,s)=>{await t;e.push(this.executeBoundOperation(i,this.parameters.groupId??`apiMode${s+1}`));await Promise.allSettled(this.firstIterationOperations)},Promise.resolve());await this.manageStrictHandlingFails(true);return Promise.allSettled(e)};d.executeBoundOperation=async function t(e,i){const s=this.parameters.model.bindContext(`${this.parameters.actionName}(...)`,e,this.parameters.mBindingParameters);const a=[];this.setParametersValue(s);const r=i??s.getUpdateGroupId();const n=this.parameters.control?.getRowBinding?.()?.getHeaderContext();const o={context:n?.getPath()===e.getPath()?n:e,pathExpressions:this.parameters.additionalSideEffect?.pathExpressions,triggerActions:this.parameters.additionalSideEffect?.triggerActions};this.parameters.requestSideEffects=this.requestSideEffects.bind(this,o,r,a);const c=this.invoke(s,r,this.parameters.aContexts.findIndex(t=>t===e)+1);a.push(c);this.requestSideEffects(o,r,a);this.defaultSubmit(r);Promise.allSettled(a);return c};d.invoke=async function t(e,i,s){let a;let r;let o;const c=new Promise(function(t,e){r=t;o=e});this.firstIterationOperations.push(c);if(i&&this.isAPIMode(i)){this.apiGroupIdsToSubmit.add(i)}try{const t=this.parameters.aContexts.length?this.parameters.aContexts.length:null;const o=e.invoke(i,this.operationProperties.ignoreETag,this.enableStrictHandling?n.fnOnStrictHandlingFailed.bind(this,i,this.parameters,s,e.getContext(),t,this.messageHandler,this.strictHandlingUtilities,r):undefined,this.operationProperties.replaceWithRVC);await Promise.race([o,c]);a=await o;r();if(!this.parameters.bGrouped){this.update412TransitionMessages(e,i,true)}}catch(t){if(!this.parameters.bGrouped){this.update412TransitionMessages(e,i)}o(t);throw l.ActionExecutionFailed}return{returnedContext:a,boundContext:e.getBoundContext()}};d.submit=function t(){if(!this.neverSubmitted||this.apiGroupIdsToSubmit.size===0){return}for(const t of Array.from(this.apiGroupIdsToSubmit.values())){this.submitOnModel(t)}this.parameters.fnOnSubmitted?.()};d.submitOnModel=function t(e){this.parameters.model.submitBatch(e);this.apiGroupIdsToSubmit.delete(e)};d.isAPIMode=function t(e){if(!e){return false}if(e.startsWith("$auto")||e.startsWith("$direct")||e.startsWith("$single")){return false}const i=this.parameters.appComponent.getManifestEntry("sap.ui5")?.models[""]?.settings?.groupProperties?.[e]?.submit;if(i===undefined||[a.Auto,a.Direct].includes(i)){return true}return true};d.defaultSubmit=function t(e){const i=this.neverSubmitted;const s=this.isAPIMode(e);if(!s){this.neverSubmitted=false}else if(this.operationProperties.deferredSubmit!==true&&e){this.neverSubmitted=false;this.submitOnModel(e)}if(i&&!this.neverSubmitted){this.parameters.fnOnSubmitted?.()}};d.manageStrictHandlingFails=async function e(){let s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.strictHandlingUtilities&&this.strictHandlingUtilities.strictHandlingPromises.length){try{if((!o.hasTransitionErrorsOrWarnings()||s)&&this.strictHandlingUtilities.strictHandlingWarningMessages.length){await n.renderMessageView(this.parameters,this.messageHandler,this.strictHandlingUtilities.strictHandlingWarningMessages,this.strictHandlingUtilities,this.parameters.aContexts.length>1)}else{for(const t of this.strictHandlingUtilities.strictHandlingPromises){t.resolve(false)}const t=i.getMessageModel();const e=t.getData();t.setData(e.concat(this.strictHandlingUtilities.strictHandlingWarningMessages))}}catch{t.error("Re-triggering of strict handling operations failed")}}};d.update412TransitionMessages=function t(e,a){let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(this.enableStrictHandling&&this.strictHandlingUtilities){const t=i.getMessageModel().getData();const{processedMessageIds:n,delaySuccessMessages:o,strictHandlingTransitionFails:c}=this.strictHandlingUtilities;const l=t.reduce((t,e)=>{if(!n.has(e.getId())){t.push(e)}return t},[]);const d=l.filter(t=>t.getPersistent()===true&&t.getType()!==s.Success&&!n.has(t.getId())).map(t=>t.getId());if(d.length){this.strictHandlingUtilities.processedMessageIds=new Set([...Array.from(n),...d]);o.push(...Object.values(l).filter(t=>t.getType()===s.Success));if(!r&&this.parameters.internalModelContext){c.push({oAction:e,groupId:a})}}}};d.setParametersValue=function t(e){if(this.operationParameters.length){const t=this.parameters.defaultParametersValues??{};for(const i of this.operationParameters){const s=i.name;if(!t[s]){switch(i.type){case"Edm.String":t[s]="";break;case"Edm.Boolean":t[s]=false;break;case"Edm.Byte":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":t[s]=0;break;default:break}}e.setParameter(s,t[s])}}};d.requestSideEffects=async function e(i,s,a){const n=this.parameters.appComponent.getSideEffectsService();let o=a??[];if(i){o=o.concat((i.triggerActions??[]).map(async t=>n.executeAction(t,i.context,s)),i.pathExpressions?n.requestSideEffects(i.pathExpressions,i.context,s):[]);if(i.pathExpressions){try{await Promise.all(o);if(this.parameters.operationAvailableMap&&this.parameters.internalModelContext){r.setActionEnablement(this.parameters.internalModelContext,JSON.parse(this.parameters.operationAvailableMap),this.parameters.selectedItems,"table")}return}catch(e){t.error("Error while requesting side effects",e)}}}};return e}();c=d;return c},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/editFlow/TransactionHelper", ["sap/base/Log","sap/base/util/deepClone","sap/fe/core/CommonUtils","sap/fe/core/UIProvider","sap/fe/core/controllerextensions/BusyLocker","sap/fe/core/controllerextensions/editFlow/draft","sap/fe/core/controllerextensions/editFlow/editFlowConstants","sap/fe/core/controllerextensions/editFlow/operations","sap/fe/core/controllerextensions/editFlow/sticky","sap/fe/core/controllerextensions/messageHandler/messageHandling","sap/fe/core/converters/MetaModelConverter","sap/fe/core/converters/annotations/DataField","sap/fe/core/helpers/DeleteHelper","sap/fe/core/helpers/FPMHelper","sap/fe/core/helpers/MetaModelFunction","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/PromiseKeeper","sap/fe/core/helpers/ToES6Promise","sap/fe/core/helpers/TypeGuards","sap/fe/core/library","sap/m/Button","sap/m/Dialog","sap/m/MessageBox","sap/m/MessageToast","sap/m/Popover","sap/m/Text","sap/m/VBox","sap/ui/core/Lib","sap/ui/core/Messaging","sap/ui/core/message/MessageType"],function(e,t,n,a,o,i,r,s,c,l,d,g,u,f,p,h,C,m,y,w,E,D,b,M,A,P,x,T,v,O){"use strict";var I=y.isNavigationProperty;var S=p.getCreatePopupFields;var _=g.isDataFieldForAction;var N=a.getCoreUIFactory;const B=w.CreationMode;const L=w.ProgrammingModel;const R=u.DeleteOptionTypes;const k=u.DeleteDialogContentControl;function F(e){if(e&&e.getMetadata&&e.getMetadata().getName()==="sap.ui.base.Event"){e={}}return e||{}}let H=function(){function a(){}var g=a.prototype;g.busyLock=function e(t,n){o.lock(t.getModel("ui"),n)};g.busyUnlock=function e(t,n){o.unlock(t.getModel("ui"),n)};g.getProgrammingModel=function e(t){let n;if(t.isA("sap.ui.model.odata.v4.Context")){n=t.getPath()}else{n=(t.isRelative()?t.getResolvedPath():t.getPath())??""}const a=t.getModel()?.getMetaModel();if(a&&h.isDraftSupported(a,n)){return L.Draft}else if(a&&h.isStickySessionSupported(a)){return L.Sticky}else{return L.NonDraft}};g.validateDocument=async function e(t,n,a){const o=n&&n.customValidationFunction;if(o){const e=o.substring(0,o.lastIndexOf(".")||-1).replace(/\./gi,"/"),i=o.substring(o.lastIndexOf(".")+1,o.length),r=n.data;delete r["@$ui5.context.isTransient"];return f.validationWrapper(e,i,r,a,t)}return Promise.resolve([])};g.getDataFromDefaultValueFunction=async function e(t){const n=t.getModel();const a=n.getMetaModel();const o=a.getMetaContext(t.getResolvedPath());const i=d.getInvolvedDataModelObjects(o);const r=i.targetObject.annotations.Common?.DefaultValuesFunction;const c=i.targetEntitySet?.annotations.Common?.DefaultValuesFunction;const l=r??c;if(!l){return undefined}const g=I(i.targetObject)&&r!==undefined;const u=g?t.getContext():t.getHeaderContext();if(!u){return undefined}const f=`${a.getMetaPath(u.getPath())}/${l}`;const p=d.getInvolvedDataModelObjects(a.getMetaContext(f));const h=p.targetObject?.isBound?await s.callBoundFunction(l.toString(),u,n):await s.callFunctionImport(l.toString(),n);return h.getObject()};g.isListBindingHierarchical=function e(t){return t.getAggregation()?.hierarchyQualifier?true:false};g.isListBindingAnalytical=function e(t){const n=t.getAggregation();return n!==undefined&&!n.hierarchyQualifier};g.createContext=async function e(t,n,a){const o=n??{};if(this.isListBindingHierarchical(t)){let e;if(a.parentContext?.isExpanded()===false){await t.expand(a.parentContext)}if(t.isRelative()){Object.assign(o,{"@$ui5.node.parent":a.parentContext});e=t}else{const n=t.getModel();const i=n.getMetaModel();e=n.bindList(t.getPath(),undefined,undefined,undefined,{$$groupId:t.getGroupId(),$$updateGroupId:t.getUpdateGroupId()});if(a.parentContext){const e=d.getInvolvedDataModelObjects(i.getMetaContext(t.getPath()));const n=t.getAggregation().hierarchyQualifier;const r=e.targetEntityType.annotations.Aggregation?.[`RecursiveHierarchy#${n}`]?.ParentNavigationProperty.value;if(!r){throw new Error(`Cannot find parent navigation property for ${t.getPath()}`)}const s={};s[`${r}@odata.bind`]=a.parentContext.getPath().replace(/^\//,"");Object.assign(o,s)}}return e.create(o,true)}else if(this.isListBindingAnalytical(t)){if(t.isRelative()){throw new Error("Creating a new document in a analytical table is supported only in a ListReport")}else{const e=t.getModel();const n=e.bindList(t.getPath(),undefined,undefined,undefined,{$$groupId:t.getGroupId(),$$updateGroupId:t.getUpdateGroupId()});return n.create(o,true)}}else{return t.create(o,true,a.createAtEnd,a.createInactive)}};g.getCreationParameters=function e(t,n,a){const o=t.getModel().getMetaModel();const i=o.getMetaPath(t.getHeaderContext().getPath());const r=S(o,i,a);return r.filter(e=>!(e in(n??{})))};g.createDocument=async function e(t,n,a,o,i,r){let s;const c=F(n);if(!t){throw new Error("Binding required for new document creation")}const l=this.getProgrammingModel(t);if(l!==L.Draft&&l!==L.Sticky){throw new Error("Create document only allowed for draft or sticky session supported services")}const d=this.getBusyPath(c);c.beforeCreateCallBack=r?undefined:c.beforeCreateCallBack;if(!n?.inactive){this.busyLock(a,d)}const g=i.registerToHoldMessages();try{s=await this.performCreation(t,c,a,i,o,r);await i.showMessageDialog({control:c.parentControl,unHoldKey:g});return s}catch(e){await i.showMessageDialog({control:c.parentControl,unHoldKey:g});if((e===w.Constants.ActionExecutionFailed||e===w.Constants.CancelActionDialog)&&s?.isTransient()){s.delete("$direct")}throw e}finally{if(!n?.inactive){this.busyUnlock(a,d)}}};g.getBusyPath=function e(t){return t.busyMode==="Local"?`/busyLocal/${t.busyId}`:"/busy"};g.createDocumentContext=async function t(n,a){if(a.beforeCreateCallBack){const t=a.data?Object.entries(a.data).map(e=>{let[t,n]=e;return{[t]:n}}):[];try{await m(a.beforeCreateCallBack({contextPath:n&&n.getPath(),createParameters:t}))}catch(t){e.error(t);throw w.Constants.OnBeforeCreateFailed}a.data=t.reduce((e,t)=>({...e,...t}),{})}return this.createContext(n,a.data,{createAtEnd:!!a.createAtEnd,createInactive:!!a.inactive,parentContext:a.parentContext})};g.performCreation=async function e(t,n,a,o,i,r){const s=t.getModel().getMetaModel();const c=s.getMetaPath(t.getHeaderContext().getPath());const l=a.getRouterProxy().getHash();const d=a.getComponentData();const g=d?.startupParameters??{};const u=!t.isRelative()?this._getNewAction(g,l,s,c):undefined;if(u){const e=await this.performCreationWithAction(u,t,n,a,i,o);if(e.status==="rejected"){throw e.reason}return e.value.returnedContext}else{return this.performCreationWithPOST(t,n,a,i,o,r)}};g.performCreationWithAction=async function e(t,n,a,o,i,r){const s=n.getHeaderContext().getPath();const c=n.getModel().getMetaModel();const l=c.getMetaPath(s);const d=h.getMessagesPath(c,l);const g={$$patchWithoutSideEffects:true};if(d){g["$select"]=d}const u=await this.callAction(t,{contexts:n.getModel().bindList(s).getHeaderContext(),showActionParameterDialog:true,label:this._getSpecificCreateActionDialogLabel(c,l,t,i),bindingParameters:g,parentControl:a.parentControl,bIsCreateAction:true,skipParameterDialog:a.skipParameterDialog},null,o,r);return u[0]};g.performCreationWithPOST=async function t(n,a,o,i,r,s){try{let e;const t=a.data;if(!s){const e=await this.getDataFromDefaultValueFunction(n);a.data=Object.assign({},e,a.data)}if(a.data){delete a.data["@odata.context"]}const c=a.creationMode!==B.CreationRow&&a.creationMode!==B.Inline;const l=c?this.getCreationParameters(n,t,o):[];if(a.creationMode===B.CreationDialog){a.creationDialogFields?.forEach(e=>{if(!l.includes(e)){l.push(e)}});if(l.length===0){throw new Error("No fields available for the creation dialog")}}if(l.length>0){e=await this.createWithDialog(n,l,a,o,i,r)}else{e=await this.createDocumentContext(n,a);if(!a.inactive){await this.waitForCreateCompletion(e,a.keepTransientContextOnFailed===true)}}return e}catch(t){const n=t.message??t;e.error("Error while creating the new document",n);throw n}};g._isDraftEnabled=function e(t){const n=t[0];const a=this.getProgrammingModel(n);return a===L.Draft};g.deleteDocument=async function e(t,n,a,o,i){this.busyLock(a);const r=Array.isArray(t)?[...t]:[t];return new Promise((e,t)=>{try{const s=this._isDraftEnabled(n.selectedContexts||r);const c=[];let d=[];let g;if(n){if(!n.numberOfSelectedContexts){if(s){const e=r.find(e=>{const t=e.getObject();return t.IsActiveEntity===true&&t.HasDraftEntity===true&&t.DraftAdministrativeData&&t.DraftAdministrativeData.InProcessByUser&&!t.DraftAdministrativeData.DraftIsCreatedByMe});if(e){const n=e.getObject().DraftAdministrativeData.InProcessByUser;b.show(o.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_SINGLE_OBJECT_LOCKED",[n]),{title:o.getText("C_COMMON_DELETE"),onClose:t});return}else{g=r.find(e=>{const{IsActiveEntity:t,HasDraftEntity:n,DraftAdministrativeData:a}=e.getObject()||{};return t===true&&n===true&&!!a?.InProcessByUser})}}n=F(n);let e="";if(g){const t=g.getObject().DraftAdministrativeData.InProcessByUser;e=o.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_UNSAVED_CHANGES",[t],n.entitySetName)}else if(n.title){if(n.description){e=o.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTINFO",[n.title,n.description],n.entitySetName)}else{e=o.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTTITLE_ONLY",[n.title],n.entitySetName)}}else{e=o.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR",undefined,n.entitySetName)}d.push({type:R.deletableContexts,contexts:r,text:e,selected:true,control:k.TEXT})}else{let e=r.length;if(s){e+=(n.draftsWithNonDeletableActive?.length??0)+(n.draftsWithDeletableActive?.length??0)+(n.unSavedContexts?.length??0);u.updateDraftOptionsForDeletableTexts(n,r,e,o,c,d)}else{const t=u.getNonDeletableText(n,e,o);if(t){c.push(t)}}const t=u.getOptionsForDeletableTexts(n,r,o);d=[...d,...t]}}const f=(n.selectedContexts??r)[0].getBinding();let p;if(f.isA("sap.ui.model.odata.v4.ODataListBinding")){if(this.isListBindingHierarchical(f)){p="Tree"}else if(this.isListBindingAnalytical(f)){p="Analytical"}}u.updateContentForDeleteDialog(d,c);const h=async()=>{l.removeBoundTransitionMessages();this.busyLock(a);try{await u.deleteConfirmHandler(d,n,i,o,a,s,p);e()}catch(e){t()}finally{this.busyUnlock(a)}};const C=this.createDeleteDialog(c,n,o,h,t);if(n.noDialog===true||n.silentMode===true){h()}else{C.addStyleClass("sapUiContentPadding");C.open()}}finally{this.busyUnlock(a)}})};g.createDeleteDialog=function e(t,n,a,o,i){let r=false;const s=new x({items:t});const c=T.getResourceBundleFor("sap.fe.core");let l;if(n.parentControl?.isA("sap.ui.mdc.Table")){l=a.getText("M_COMMON_TABLE_DELETE",undefined,n.entitySetName)}else{l=c.getText("C_COMMON_DELETE")}const d=new D({title:l,state:"Warning",content:[s],ariaLabelledBy:t,beginButton:new E({text:l,type:"Emphasized",press:function(){r=true;d.close();o()}}),endButton:new E({text:a.getText("C_COMMON_DIALOG_CANCEL"),press:function(){d.close()}}),afterClose:function(){d.destroy();if(!r){i()}}});return d};g.editDocument=async function e(t,n,a,o,r){const s=this.getProgrammingModel(t);if(!t){throw new Error("Binding context to active document is required")}if(s!==L.Draft&&s!==L.Sticky){throw new Error("Edit is only allowed for draft or sticky session supported services")}this.busyLock(a);o.removeTransitionMessages();const l=o.registerToHoldMessages();try{const e=s===L.Draft?await i.createDraftFromActiveDocument(t,a,{bPreserveChanges:true,oView:n},r,o):await c.editDocumentInStickySession(t,a,o);await o.showMessageDialog({unHoldKey:l});return e}catch(e){await o.showMessages({concurrentEditFlag:true,unHoldKey:l});throw e}finally{this.busyUnlock(a)}};g.cancelDocument=async function e(t,n,a,o,r,s,l){if(!t){throw new Error("No context exists. Pass a meaningful context")}this.busyLock(a);const d=F(n);const g=t.getModel();const u=this.getProgrammingModel(t);if(u!==L.Draft&&u!==L.Sticky){throw new Error("Cancel document only allowed for draft or sticky session supported services")}try{let e;if(u===L.Draft&&!l){const e=g.bindContext(`${t.getPath()}/DraftAdministrativeData`).getBoundContext();const n=await e.requestObject();if(n){l=n.CreationDateTime!==n.LastChangeDateTime}}if(!d.skipDiscardPopover){await this._confirmDiscard(d.cancelButton,l,o)}if(t.isKeepAlive()){t.setKeepAlive(true,undefined)}if(d.beforeCancelCallBack){await d.beforeCancelCallBack({context:t})}if(u===L.Draft){if(s){if(t.hasPendingChanges()){t.getBinding().resetChanges()}await i.deleteDraft(t,r,a)}else{const n=g.bindContext(`${t.getPath()}/SiblingEntity`).getBoundContext();try{const a=await n.requestCanonicalPath();if(t.hasPendingChanges()){t.getBinding().resetChanges()}e=g.bindContext(a).getBoundContext()}finally{await i.deleteDraft(t,r,a)}}}else{const n=await c.discardDocument(t);if(n){if(n.hasPendingChanges()){n.getBinding().resetChanges()}if(!s){n.refresh();e=n}}}r.removeTransitionMessages();await r.showMessages();return e}catch(e){await r.showMessages();throw e}finally{this.busyUnlock(a)}};g.saveDocument=async function e(t,a,o,r,s,g,u){let f=arguments.length>7&&arguments[7]!==undefined?arguments[7]:false;const p=this.getProgrammingModel(t);if(p!==L.Sticky&&p!==L.Draft){throw new Error("Save is only allowed for draft or sticky session supported services")}try{this.busyLock(a);const e=t.getModel().getMetaModel();const n=e.getMetaContext(t.getPath());const r=d.getInvolvedDataModelObjects(n).targetObject;const s=p===L.Draft?await i.activateDocument(t,a,{},g):await c.activateDocument(t,a,g);const h=l.getMessages().concat(l.getMessages(true,true));if(!f&&!(h.length===1&&h[0].getType()===O.Success)){M.show(u?o.getText("C_TRANSACTION_HELPER_OBJECT_CREATED",undefined,r.name):o.getText("C_TRANSACTION_HELPER_OBJECT_SAVED",undefined,r.name))}return s}catch(e){if(r&&s?.length>0){s.forEach(e=>{if(!n.hasTransientContext(e)){a.getSideEffectsService().requestSideEffectsForNavigationProperty(e.getPath(),t)}})}await g.showMessages();throw e}finally{this.busyUnlock(a)}};g.callAction=async function e(n,a,o,i,r,c){a=F(a);let l;let d;const g=a.bindingParameters;if(!n){throw new Error("Provide name of action to be executed")}const u=n.split("/")[1];l=u?undefined:a.contexts;if(l&&(Array.isArray(l)&&l.length||!Array.isArray(l))){l=Array.isArray(l)?l[0]:l;d=l.getModel()}if(a.model){d=a.model}if(!d){throw new Error("Pass a context for a bound action or pass the model for an unbound action")}const f=t(i.getSideEffectsService().getODataActionSideEffects(u||n,l))||{};const p=r?r.registerToHoldMessages():undefined;try{let e;if(l&&a.contexts){e=await s.callBoundAction(n,a.contexts,d,i,{parameterValues:a.parameterValues,invocationGrouping:a.invocationGrouping,label:a.label,skipParameterDialog:a.skipParameterDialog,mBindingParameters:g,entitySetName:a.entitySetName,additionalSideEffect:f,onSubmitted:()=>{r?.removeTransitionMessages();this.busyLock(i)},onResponse:()=>{this.busyUnlock(i)},parentControl:a.parentControl,controlId:a.controlId,internalModelContext:a.internalModelContext,operationAvailableMap:a.operationAvailableMap,bIsCreateAction:a.bIsCreateAction,bObjectPage:a.bObjectPage,messageHandler:r,defaultValuesExtensionFunction:a.defaultValuesExtensionFunction,selectedItems:Array.isArray(a.contexts)?a.contexts:[a.contexts],disableStrictHandling:c,groupId:a.groupId,ignoreETag:a.ignoreETag,view:o})}else{e=await s.callActionImport(n,d,i,{parameterValues:a.parameterValues,label:a.label,skipParameterDialog:a.skipParameterDialog,bindingParameters:g,entitySetName:a.entitySetName,additionalSideEffect:f,onSubmitted:()=>{this.busyLock(i)},onResponse:()=>{this.busyUnlock(i)},parentControl:a.parentControl,internalModelContext:a.internalModelContext,operationAvailableMap:a.operationAvailableMap,messageHandler:r,bObjectPage:a.bObjectPage,ignoreETag:a.ignoreETag,view:o})}if(r){await this._handleActionResponse(r,a,n,p)}return e}catch(e){if(r){await this._handleActionResponse(r,a,n,p)}throw e}};g._handleActionResponse=async function e(t,n,a,o){const i=l.getMessages(true,true);const r=n.label?n.label:a;if(i.length>0&&n&&n.internalModelContext){n.internalModelContext.setProperty("sActionName",n.label?n.label:a)}let s;if(n.controlId&&n.parentControl&&n.parentControl.isA("sap.ui.core.mvc.View")){s=n.parentControl.byId(n.controlId)}else{s=n.parentControl}return t.showMessages({sActionName:r,control:s,unHoldKey:o,aSelectedContexts:n?.contexts})};g.handleValidationError=function e(){const t=v.getMessageModel().getData().filter(e=>e.validation);v.removeMessages(t)};g._createPopover=function e(t){return new A(t)};g._confirmDiscard=async function e(t,n,a){if(!n){this.handleValidationError();return Promise.resolve()}t.setEnabled(false);return new Promise((e,n)=>{const o=this._createPopover({showHeader:false,placement:"Top"});o.addStyleClass("sapUiContentPadding");const i=new P({text:a.getText("C_TRANSACTION_HELPER_DRAFT_DISCARD_MESSAGE")});const r=new E({text:a.getText("C_TRANSACTION_HELPER_DRAFT_DISCARD_BUTTON"),width:"100%",press:()=>{this.handleValidationError();o.data("continueDiscard",true);o.close()}});o.addContent(new x({items:[i,r]}));o.attachBeforeOpen(()=>{o.setInitialFocus(r)});o.attachAfterClose(()=>{t.setEnabled(true);if(o.data("continueDiscard")){e()}else{n()}});o.openBy(t,false)})};g.refreshListBinding=async function t(n,a){try{if(n.isRoot()){if(this.isListBindingHierarchical(n)){await a.getSideEffectsService().requestSideEffects([{$NavigationPropertyPath:""}],n.getHeaderContext())}else{await n.requestRefresh()}}else{await a.getSideEffectsService().requestSideEffects([{$NavigationPropertyPath:n.getPath()}],n.getContext())}}catch(t){e.error(`Error while refreshing list binding ${n.getPath()}`,t)}};g.createWithDialog=async function t(a,o,i,s,c,l){const d=a.getModel();const g=d.getMetaModel();const u=g.getMetaPath(a.getResolvedPath());const f=d.bindList(a.getPath(),a.getContext(),undefined,undefined,{$$updateGroupId:"submitLater"});f.refreshInternal=function(){};const p=f.create(i.data,true);const h=o.map(e=>g.createBindingContext(`${u}/${e}`));const y=N().newCreateDialog(p,o,s,i.creationMode===B.CreationDialog?"Standalone":"WithNavigation",i.parentControl);try{await n.setUserDefaults(s,h,p,false,i.createAction,i.data);y.openDialog()}catch(e){await l.showMessages();throw e}const E=new C;const D=async t=>{if(!t.getParameter("accept")){f.destroy();y.closeDialog();E.reject(w.Constants.CancelActionDialog);return}y.setBusy(true);i.bIsCreateDialog=true;try{const t=p.getObject();let n={};Object.keys(t).forEach(e=>{const a=g.getObject(`${u}/${e}`);if(a&&a.$kind!=="NavigationProperty"&&!e?.startsWith("@$ui5")){n[e]=t[e]}});if(i.beforeCreateCallBack){const t=Object.entries(n).map(e=>{let[t,n]=e;return{[t]:n}});try{await m(i.beforeCreateCallBack({contextPath:a.getPath(),createParameters:t}))}catch(t){e.error("Error while creating the new document",t);throw w.Constants.OnBeforeCreateFailed}n=t.reduce((e,t)=>({...e,...t}),{})}if(Object.keys(n).length>0){s.getModel("ui").setProperty(r.DocumentModified,true)}const o=await this.createContext(a,n,{createAtEnd:i.createAtEnd,createInactive:i.inactive,parentContext:i.parentContext});const d=await this.waitForCreateCompletion(o,i.keepTransientContextOnFailed===true);if(d){try{await(i.afterCreateCallBack?.(o))}catch(t){y.displayErrorMessages(v.getMessageModel().getData());await l.showMessageDialog({showBoundStateMessages:true});await this.deleteDocument(o,{silentMode:true},s,c,l);await this.refreshListBinding(a,s);e.error("Error while creating/saving the new document",t);throw w.Constants.CreationFailed}f.destroy();y.closeDialog();E.resolve(o)}}catch(e){if(![w.Constants.OnBeforeCreateFailed,w.Constants.CreationFailed].includes(e)){f.destroy();y.closeDialog();E.reject(e)}}finally{y.setBusy(false);l.showMessages({forceShowUIElement:y.isOpen()})}};y.attachExitDialog({},D);return E.promise};g.waitForCreateCompletion=async function t(n,a){const o=new C;const i=n.getBinding();const r=e=>{const t=e.getParameter("context");const a=e.getParameter("success");if(t===n){i.detachCreateCompleted(r);o.resolve(a===true)}};i.attachCreateCompleted(r);const s=await o.promise;if(!s){if(!a){(n.created()??Promise.resolve()).catch(function(t){e.trace("transient creation context deletion error",t)});i.resetChanges();i.getModel().resetChanges(i.getUpdateGroupId());throw w.Constants.CreationFailed}return false}else{await n.created();return true}};g._getNewAction=function e(t,n,a,o){let i;if(t&&t.preferredMode&&n.toUpperCase().includes("I-ACTION=CREATEWITH")){const e=t.preferredMode[0];i=e.toUpperCase().includes("CREATEWITH:")?e.substring(e.lastIndexOf(":")+1):undefined}else if(t&&t.preferredMode&&n.toUpperCase().includes("I-ACTION=AUTOCREATEWITH")){const e=t.preferredMode[0];i=e.toUpperCase().includes("AUTOCREATEWITH:")?e.substring(e.lastIndexOf(":")+1):undefined}else{i=a&&a.getObject!==undefined?a.getObject(`${o}@com.sap.vocabularies.Session.v1.StickySessionSupported/NewAction`)||a.getObject(`${o}@com.sap.vocabularies.Common.v1.DraftRoot/NewAction`):undefined}return i};g._getSpecificCreateActionDialogLabel=function e(t,n,a,o){const i=t?.getObject(`${n}/@com.sap.vocabularies.UI.v1.LineItem`);const r=i?.find(e=>_(e)&&e.Action.split("(",1)[0]===a)?.Label;return r||t?.getObject(`${n}/${a}@com.sap.vocabularies.Common.v1.Label`)||o?.getText("C_TRANSACTION_HELPER_SAPFE_ACTION_CREATE")};return a}();const $=new H;return $},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/editFlow/draft", ["sap/base/Log","sap/fe/core/CommonUtils","sap/fe/core/controllerextensions/editFlow/draftDataLossPopup","sap/fe/core/controllerextensions/messageHandler/messageHandling","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/ResourceModelHelper","sap/fe/core/helpers/TypeGuards","sap/m/Button","sap/m/Dialog","sap/m/MessageBox","sap/m/Text","sap/ui/core/Lib","../../helpers/ModelHelper","../../operationsHelper"],function(e,t,n,o,i,r,a,s,c,u,d,f,g,l){"use strict";var h=a.isPathAnnotationExpression;var p=r.getResourceModel;var E=i.getInvolvedDataModelObjects;const A={EDIT:"EditAction",ACTIVATION:"ActivationAction",DISCARD:"DiscardAction",PREPARE:"PreparationAction"};function P(e,t){const n=e.getModel(),o=n.getMetaModel(),i=o.getMetaPath(e.getPath());return o.getObject(`${i}@com.sap.vocabularies.Common.v1.DraftRoot/${t}`)}function m(e,t,n){const o=P(e,t);return e.getModel().bindContext(`${o}(...)`,e,n)}function C(e,t){const n=e.getModel(),o=n.getMetaModel(),i=o.getMetaPath(e.getPath());return o.getObject(`${i}@com.sap.vocabularies.Common.v1.DraftRoot/${t}/$ReturnType`)}function w(e){return!!P(e,A.PREPARE)}async function D(e,n,o,i,r,a){if(e.getObject()===undefined||e.getProperty("IsActiveEntity")){const s={$$inheritExpandSelect:true};const c=$.createOperation(e,A.EDIT,s);c.setParameter("PreserveChanges",n);const u=e.getObject()===undefined?true:undefined;const d=p(o);const f=d.getText("C_COMMON_OBJECT_PAGE_EDIT");const g=c.execute(i,u,l.fnOnStrictHandlingFailed.bind($,i,{appComponent:t.getAppComponent(o),label:f,model:e.getModel()},null,null,null,r,undefined,undefined),e.getBinding().isA("sap.ui.model.odata.v4.ODataListBinding"));if(a){c.getModel().submitBatch(i)}return g}else{throw new Error("You cannot edit this draft document")}}async function x(t,n,o){if(g.getMessagesPath(t.getModel().getMetaModel(),t.getPath())&&$.hasPrepareAction(t)){try{if(!o&&!t.isKeepAlive()){await t.getBinding().requestObject("")}const e=$.executeDraftPreparationAction(t,t.getUpdateGroupId(),true,o);if(!C(t,A.PREPARE)){T(t,n.getSideEffectsService())}return await e}catch(t){e.error("Error while requesting messages",t)}}return undefined}async function y(t,n,o,i){const r=w(t);const a=r;if(!t.getProperty("IsActiveEntity")){const s=m(t,A.ACTIVATION,{$$inheritExpandSelect:true});const c=p(n);const u=c.getText("C_OP_OBJECT_PAGE_SAVE");try{return await s.execute(i,a,i?l.fnOnStrictHandlingFailed.bind($,i,{appComponent:n,label:u,model:t.getModel()},null,null,null,o,undefined,undefined):undefined,t.getBinding().isA("sap.ui.model.odata.v4.ODataListBinding"))}catch(o){if(r){const o=P(t,A.PREPARE),i=n.getSideEffectsService(),r=i.getODataActionSideEffects(o,t),a=r&&r.pathExpressions;if(a&&a.length>0){try{await i.requestSideEffects(a,t)}catch(t){e.error("Error while requesting side effects",t)}}else{try{await T(t,i)}catch(t){e.error("Error while requesting messages",t)}}}throw o}}else{throw new Error("The activation action cannot be executed on an active document")}}function M(e){return C(e,A.PREPARE)?v(e):undefined}function v(e){const t=e.getModel().getMetaModel().getMetaContext(e.getPath());const n=E(t);const o=n.targetEntityType.annotations.Common?.Messages;return h(o)?o.path:undefined}async function b(t,n,o,i){if(!t.getProperty("IsActiveEntity")){const r=o?M(t):undefined;const a=m(t,A.PREPARE,r?{$select:r}:undefined);a.setParameter("SideEffectsQualifier","");const s=n||a.getGroupId();return a.execute(s,i).then(function(){return a}).catch(function(t){e.error("Error while executing the operation",t)})}else{throw new Error("The preparation action cannot be executed on an active document")}}async function T(e,t){const n=g.getMessagesPath(e.getModel().getMetaModel(),e.getPath());if(n){return t.requestSideEffects([n],e)}return}async function O(e,t,n,o){if(!e.getProperty("IsActiveEntity")){const i=$.createOperation(e,A.DISCARD);const r=p(n);const a="direct";const s=r?.getText("C_TRANSACTION_HELPER_DRAFT_DISCARD_BUTTON")||"";const c=!o?i.execute(a):i.execute(a,undefined,l.fnOnStrictHandlingFailed.bind($,a,{AppComponent:n,label:s,model:e.getModel()},null,null,null,t,undefined,undefined),false);e.getModel().submitBatch(a);await c}else{throw new Error("The discard action cannot be executed on an active document")}}async function S(t,n,o,i){if(!n.getPath().startsWith(t.getPath())){e.error("Cannot compute rightmost sibling context");throw new Error("Cannot compute rightmost sibling context")}if(n.getProperty("IsActiveEntity")===false&&n.getProperty("HasActiveEntity")===false){return undefined}const r=t.getModel();try{const e=n.getPath().replace(t.getPath(),"");const a=e?e.substring(1).split("/"):[];a.unshift(t.getPath().substring(1));const s=[];const c=[];let u="";const d=[...a];if(o?.rootSiblingPathPromise){d.shift();u="/"+t?.getPath()?.substring(1)}const f=d.map(async e=>{u+=`/${e}`;s.unshift(u);if(u.endsWith(")")){const e=r.bindContext(`${u}/SiblingEntity`,undefined,i?{$$groupId:i}:undefined).getBoundContext();return e.requestCanonicalPath()}else{return Promise.resolve(undefined)}});const g=await Promise.all(f);if(o?.rootSiblingPathPromise){const e=(await o.rootSiblingPathPromise)?.getPath();g.unshift(e);s.push(t.getPath())}let l="";g.forEach((e,t)=>{if(t!==0){if(a[t].endsWith(")")){const n=a[t].replace(/\(.*$/,"");const o=e.replace(/.*\(/,"(");l+=`/${n}${o}`}else{l+=`/${a[t]}`}}else{l=e}c.unshift(l)});return{targetContext:r.bindContext(l,undefined,{$select:v(n),$$groupId:"$auto.Heroes"}).getBoundContext(),pathMapping:s.map((e,t)=>({oldPath:e,newPath:c[t]}))}}catch(e){return undefined}}async function _(e,n,i,r,a){const s=i||{},c=typeof s.bPreserveChanges==="undefined"||typeof s.bPreserveChanges==="boolean"&&s.bPreserveChanges;async function d(t){const n=e.getModel();const s=n.bindContext(`${e.getPath()}/DraftAdministrativeData`).getBoundContext();const c=p(i.oView);const d=await s.requestObject();if(d){o.removeUnboundTransitionMessages();let t=d.InProcessByUserDescription||d.InProcessByUser;const n=i.oView.getViewData().entitySet;if(t){const e=c.getText("C_DRAFT_OBJECT_PAGE_DRAFT_LOCKED_BY_USER",t,n);u.error(e);throw new Error(e)}else{t=d.CreatedByUserDescription||d.CreatedByUser;const o=c.getText("C_DRAFT_OBJECT_PAGE_DRAFT_UNSAVED_CHANGES",t,n);await $.showEditConfirmationMessageBox(o,e);return $.executeDraftEditAction(e,false,i.oView,r,a,true)}}else if(t?.message){u.error(t.message)}throw new Error(`Draft creation aborted for document: ${e.getPath()}`)}if(!e){throw new Error("Binding context to active document is required")}let f;try{f=await $.executeDraftEditAction(e,c,i.oView,r,a)}catch(n){if(n.status===409||n.status===423){o.removeBoundTransitionMessages();o.removeUnboundTransitionMessages();const i=await $.computeSiblingInformation(e,e);if(i?.targetContext){await t.waitForContextRequested(i.targetContext);return i.targetContext}else{f=await d(n)}}else if(!(n&&n.canceled)){throw new Error(n)}}if(f){const e=$.getActionName(f,A.EDIT);const t=n.getSideEffectsService().getODataActionSideEffects(e,f);if(t?.triggerActions?.length){await n.getSideEffectsService().requestSideEffectsForODataAction(t,f);return f}else{return f}}else{return undefined}}async function B(e,t,n,o){const i=n||{};if(!e){throw new Error("Binding context to draft document is required")}const r=i.fnBeforeActivateDocument?await i.fnBeforeActivateDocument(e):true;if(!r){throw new Error(`Activation of the document was aborted by extension for document: ${e.getPath()}`)}let a;if(!w(e)){a=await y(e,t,o)}else{const n="$auto";const i=e.getModel().hasPendingChanges("$auto")?true:false;let r=$.executeDraftPreparationAction(e,n,undefined,i);e.getModel().submitBatch(n);const s=$.executeDraftActivationAction(e,t,o,n);try{const e=await Promise.all([r,s]);a=e[1]}catch(t){const i=M(e);if(i){r=$.executeDraftPreparationAction(e,n,true);e.getModel().submitBatch(n);await r;const t=await e.requestObject();if(t[i].length>0){o?.removeTransitionMessages(false,false,e.getPath())}}throw t}}return i.fnAfterActivateDocument?i.fnAfterActivateDocument(e,a):a}async function R(e,t){const n=f.getResourceBundleFor("sap.fe.core");return new Promise(function(o,i){const r=new c({title:n.getText("C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_TITLE_WARNING"),state:"Warning",content:new d({text:e}),beginButton:new s({text:n.getText("C_COMMON_OBJECT_PAGE_EDIT"),type:"Emphasized",press:function(){r.close();o(true)}}),endButton:new s({text:n.getText("C_COMMON_OBJECT_PAGE_CANCEL"),press:function(){r.close();i(`Draft creation aborted for document: ${t.getPath()}`)}}),afterClose:function(){r.destroy()}});r.addStyleClass("sapUiContentPadding");r.open()})}async function I(e,t,n,o){const i=P(e,A.DISCARD),r=e.getObject().IsActiveEntity;if(r||!r&&!i){if(e.hasPendingChanges()&&!e.isInactive()){return e.getBinding().resetChanges().then(async function(){return e.delete()}).catch(function(e){throw e})}else{return!e.getProperty("IsActiveEntity")&&g.isDraftRoot(E(e.getModel().getMetaModel().getMetaContext(e.getPath()))?.targetEntitySet)&&e.getProperty("HasActiveEntity")?e.getModel().delete(e):e.delete()}}else{await O(e,t,n,o)}}const $={createDraftFromActiveDocument:_,activateDocument:B,deleteDraft:I,executeDraftEditAction:D,executeDraftValidation:x,executeDraftPreparationAction:b,executeDraftActivationAction:y,hasPrepareAction:w,computeSiblingInformation:S,processDataLossOrDraftDiscardConfirmation:n.processDataLossOrDraftDiscardConfirmation,silentlyKeepDraftOnForwardNavigation:n.silentlyKeepDraftOnForwardNavigation,createOperation:m,executeDraftDiscardAction:O,NavigationType:n.NavigationType,getActionName:P,showEditConfirmationMessageBox:R};return $},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/editFlow/draftDataLossPopup", ["sap/base/Log","sap/fe/core/CommonUtils","sap/fe/core/helpers/EditState","sap/fe/core/helpers/ModelHelper","../../controls/DataLossOrDraftDiscard/DraftDataLossDialog","../../controls/Recommendations/ConfirmRecommendationDialog"],function(e,t,a,n,i,o){"use strict";var r=o.RecommendationDialogDecision;var s=function(e){e["BackNavigation"]="BackNavigation";e["ForwardNavigation"]="ForwardNavigation";return e}(s||{});var c=function(e){e["Save"]="draftDataLossOptionSave";e["Keep"]="draftDataLossOptionKeep";e["Discard"]="draftDataLossOptionDiscard";return e}(c||{});const l=new i("fe::DraftDataLossPopup");function d(e){const t=e.getAppComponent().getManifestEntry("sap.fe");return t?.app?.silentlyKeepDraftOnForwardNavigation||false}async function f(e,t,a,n,i,o){if(e.CreationDateTime!==e.LastChangeDateTime){return l.open(a).then(e=>y.handleDialogSelection(e,n,t,a,i,o))}else{n()}}async function g(t,n,i,o,r,c,d,f){if(a.isEditStateDirty()){if(t.CreationDateTime===t.LastChangeDateTime&&r===s.BackNavigation){try{await y.discardDraft(i,d,f);o()}catch(t){e.error("Error while canceling the document",t)}}else if(r===s.ForwardNavigation&&c){o()}else{return l.open(i).then(e=>y.handleDialogSelection(e,o,n,i,d,f))}}else{o()}}async function D(t,a,n,i){if(i===s.BackNavigation){const i={skipDiscardPopover:true,skipBindingToView:true};try{await t.editFlow.cancelDocument(a,i);n()}catch(t){e.error("Error while canceling the document",t)}}else{n()}}async function u(e,t,a,n,i,o,r){if(n===s.ForwardNavigation&&i){a()}else{return l.open(e).then(n=>y.handleDialogSelection(n,a,t,e,o,r))}}async function p(e,t,n,i,o,r){let c=arguments.length>6&&arguments[6]!==undefined?arguments[6]:s.BackNavigation;const l=o.collaborativeDraft.isConnected();const p=!l?t:function(){o.collaborativeDraft.disconnect();for(var e=arguments.length,a=new Array(e),n=0;n<e;n++){a[n]=arguments[n]}t.apply(null,...a)};const v=d(o);if(e){if(o.getAppComponent().getRootViewController().isFclEnabled()){await f(e,n,o,p,r,i)}else if(!i.getObject().HasActiveEntity){g(e,n,o,p,c,v,r)}else if(e.CreationDateTime===e.LastChangeDateTime){D(o,i,p,c)}else if(a.isEditStateDirty()){u(o,n,p,c,v,r,i)}else{p()}}else{t()}}async function v(a,i,o,r,c){let l=arguments.length>5&&arguments[5]!==undefined?arguments[5]:s.BackNavigation;const d=r.getView();const f=d.getBindingContext().getModel();const g=f.getMetaModel();const D=d.getViewData();const u=D.contextPath||(D.entitySet?`/${D.entitySet}`:undefined);const v=u?!!g.getObject(`${u}@com.sap.vocabularies.Common.v1.DraftRoot`):false;const m=t.getIsEditable(d);const h=o;let w=o.getPath();if(!v){w=n.getDraftRootPath(o)??w;o=f.bindContext(w,undefined,{$expand:"DraftAdministrativeData"}).getBoundContext()}const y=v||r.getAppComponent().getRouterProxy().checkIfBackExitsApp();if(h.isDeleted()||!y&&l===s.BackNavigation||!m){a()}else{try{await o.requestProperty(["DraftAdministrativeData/CreationDateTime","DraftAdministrativeData/LastChangeDateTime","HasActiveEntity"]);const e=o.getObject("DraftAdministrativeData");await p(e,a,i,o,r,c,l)}catch(t){e.error("Cannot retrieve draftDataContext information",t);a()}}}async function m(e,t){const a=t!==undefined;t=t??e.getView().getBindingContext();if(!a&&e.isA("sap.fe.templates.ObjectPage.ObjectPageController")){return e._saveDocument()}else{return e.editFlow.saveDocument(t,{})}}async function h(e,t,a){a=a??e.getView().getBindingContext();const n={skipBackNavigation:true,skipDiscardPopover:true,skipBindingToView:t!==undefined?t:true};return e.editFlow.cancelDocument(a,n)}function w(t,a,n,i,o,s){switch(t){case c.Save:y.saveDocument(i,s).then(e=>a(e)).catch(function(t){if(t===r.Continue){return n()}e.error("Error while saving document",t)});l.close();break;case c.Keep:a();l.close();break;case c.Discard:y.discardDraft(i,o,s).then(e=>a(e)).catch(function(t){e.error("Error while discarding draft",t)});l.close();break;default:n();l.close()}}const y={processDataLossOrDraftDiscardConfirmation:v,silentlyKeepDraftOnForwardNavigation:d,NavigationType:s,processFclMode:f,processNoActiveEntityMode:g,processEditingDraftForExistingEntity:D,processEditStateDirty:u,handleDialogSelection:w,saveDocument:m,discardDraft:h};return y},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/editFlow/editFlowConstants", [],function(){"use strict";var e=function(e){e["DocumentModified"]="/isDocumentModified";e["CreateMode"]="createMode";return e}(e||{});return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/editFlow/operations", ["./operations/facade"],function(e){"use strict";return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/editFlow/operations/facade", ["sap/fe/core/ActionRuntime","sap/fe/core/CommonUtils","sap/fe/core/UIProvider","sap/fe/core/controllerextensions/messageHandler/messageHandling","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/DeleteHelper","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/ResourceModelHelper","sap/fe/core/library","sap/m/MessageBox","sap/ui/core/Lib","sap/ui/core/Messaging","sap/ui/core/message/Message","sap/ui/core/message/MessageType","../ODataOperation"],function(e,t,n,a,s,o,i,r,c,l,g,u,d,f,m){"use strict";function p(e){return new Promise((t,n)=>{sap.ui.require([e],n=>{if(!(n&&n.__esModule)){n=n===null||!(typeof n==="object"&&e.endsWith("/library"))?{default:n}:n;Object.defineProperty(n,"__esModule",{value:true})}t(n)},e=>{n(e)})})}var E=r.getResourceModel;var M=s.convertTypes;var C=n.getCoreUIFactory;const h=c.Constants,y=c.InvocationGrouping;const A=l.Action;async function S(t,n,a,s,o){if(!n||n.length===0){throw new Error("Bound actions always requires at least one context")}o.aContexts=Array.isArray(n)?n:[n];const i=a.getMetaModel(),r=`${i.getMetaPath(o.aContexts[0].getPath())}/${t}`,c=i.createBindingContext(`${r}/@$ui5.overload/0`);o.isCriticalAction=await e.getIsActionCritical(i,r,o.aContexts);const l=M(a.getMetaModel());const g=l.resolvePath(c.getPath()).target;if(!g){throw new Error("Unknown bound action")}return w(g,a,c,s,o)}async function T(t,n,a,s){const o=n.getMetaModel();const i=`/${t}`;const r=M(o);const c=r.resolvePath(i).target,l=c?.action;if(!l){throw new Error("Unknown action import")}const g=r.actions.filter(e=>e.name===l.name).findIndex(e=>!e.isBound),u=c.actionName,d=o.createBindingContext(`/${u}/${g}`);s.isCriticalAction=await e.getIsActionCritical(o,`${i}/@$ui5.overload`);return w(c.action,n,d,a,s)}async function x(e,t,n){if(!t){return Promise.reject("Bound functions always requires a context")}const a=n.getMetaModel(),s=`${a.getMetaPath(t.getPath())}/${e}`,o=a.createBindingContext(s);return I(e,n,o,t)}async function P(e,t){const n=t.getMetaModel(),a=t.bindContext(`/${e}`).getPath(),s=n.createBindingContext(`/${n.createBindingContext(a).getObject("$Function")}/0`);return I(e,t,s)}async function I(e,t,n,a){if(!n?.getObject()){return Promise.reject(new Error(`Function ${e} not found`))}const s=t.bindContext(`${a?.getPath()??""}/${e}(...)`);const o=a?"functionGroup":"functionImport";const i=s.execute(o);t.submitBatch(o);await i;return s.getBoundContext()}async function b(e,t){if(t===undefined||t===null){return t}const n=(await p("sap/ui/mdc/enums/BaseType")).default;const a=(await p("sap/ui/mdc/odata/v4/TypeMap")).default;const s=e.type?a.getBaseType(e.type):n.String;const o=a.getDataTypeInstance(s);return o.parseValue(t,"string")}async function w(e,t,n,s,o){let r={is412Executed:false,strictHandlingTransitionFails:[],strictHandlingPromises:[],strictHandlingWarningMessages:[],delaySuccessMessages:[],processedMessageIds:new Set};const c=e.isBound?e.fullyQualifiedName.replace(/\(.*\)$/g,""):e.name;o.bGrouped=o.invocationGrouping===y.ChangeSet;return new Promise(async function(l,g){const d=o.label;let f=o.skipParameterDialog;const p=o.aContexts;const E=o.bIsCreateAction;const h=o.isCriticalAction;let A;let S;let T;let x;let P;const I=n.getObject();const w=e.isBound?e.parameters.slice(1):e.parameters;const _=w.length>0&&!(w.length===1&&w[0].name==="ResultIsActiveEntity");const B=o.parameterValues;const H=s.getComponentData();const N=H&&H.startupParameters||{};f=w.length&&w.filter(e=>e.name!=="ResultIsActiveEntity").every(e=>e.annotations.UI?.Hidden?.valueOf()===true)?true:f;if(_&&f){P=$(!!E,w,B,N)}const R={defaultParametersValues:{},appComponent:s,fnOnSubmitted:o.onSubmitted,fnOnResponse:o.onResponse,actionName:c,aContexts:[],model:t,aActionParameters:w,defaultValuesExtensionFunction:o.defaultValuesExtensionFunction,label:o.label,selectedItems:o.selectedItems};if(e.isBound){A=t.getMetaModel();const n=M(A);const a=n.entitySets.filter(t=>t.entityType===e.returnEntityType);const s=a.length>0?a[0]:undefined;x=!e.returnCollection&&e.returnEntityType&&e.sourceEntityType===e.returnEntityType;if(x&&i.isDraftRoot(s)){o.mBindingParameters??={};o.mBindingParameters.$select=o.mBindingParameters.$select?`${o.mBindingParameters.$select},HasActiveEntity`:"HasActiveEntity"}if(o.additionalSideEffect?.pathExpressions){S=i.getMessagesPath(A,p[0].getPath());if(S){T=o.additionalSideEffect.pathExpressions.findIndex(e=>typeof e==="string"&&(e===S||e==="*"));if(T>-1||x){o.mBindingParameters??={};if(e.returnEntityType?.entityProperties.find(e=>e.name===S)&&!(o.mBindingParameters.$select??"").split(",").includes(S)){o.mBindingParameters.$select=o.mBindingParameters.$select?`${o.mBindingParameters.$select},${S}`:S;if(T===-1){o.additionalSideEffect.pathExpressions.push("*")}if(o.additionalSideEffect.triggerActions?.length===0&&T>-1){o.additionalSideEffect.pathExpressions.splice(T,1)}}}}}R.aContexts=p??[];R.mBindingParameters=o.mBindingParameters;R.additionalSideEffect=o.additionalSideEffect;R.bGrouped=o.invocationGrouping===y.ChangeSet;R.internalModelContext=o.internalModelContext;R.operationAvailableMap=o.operationAvailableMap;R.isCreateAction=E;R.bObjectPage=o.bObjectPage;R.disableStrictHandling=o.disableStrictHandling;R.groupId=o.groupId;if(o.controlId){R.control=o.parentControl.byId(o.controlId);o.control=R.control}else{R.control=o.parentControl;o.control=o.parentControl}}R.additionalSideEffect=o.additionalSideEffect;if(E){R.bIsCreateAction=E}R.isStatic=e.isBound&&!!e.parameters[0]?.isCollection;let F=[];let G=false;try{if(_){if(!(f&&P)){G=true;const t=C().newParameterDialog(e,n,R,B,o.entitySetName,o.view,o.messageHandler,r,{beforeShowingMessage:D},o.ignoreETag);await t.createDialog();F=await t.openDialog(o.parentControl)}}else if(h){G=true;F=await O(e,c,R,o.parentControl,o.entitySetName,o.messageHandler,r,o.ignoreETag)}}catch(e){g(e)}if(G){v(o,R,I);l(F);return}if(B){for(const e in R.aActionParameters){R.defaultParametersValues[R.aActionParameters[e].name]=B?.find(t=>t.name===R.aActionParameters[e].name)?.value}}else{let e,t;for(const n in R.aActionParameters){e=R.aActionParameters[n];t=N[e.name]?.[0]||e.annotations?.UI?.ParameterDefaultValue?.valueOf();R.defaultParametersValues[e.name]=t===undefined?t:await b(e,t)}}let L=[];try{L=await new m(e,R,o.messageHandler,r,{ignoreETag:o.ignoreETag}).execute();const t=u.getMessageModel().getData();if(r&&r.is412Executed&&r.strictHandlingTransitionFails.length){r.delaySuccessMessages=r.delaySuccessMessages.concat(t)}v(o,R,I);l(L)}catch(e){g(e)}finally{if(r&&r.is412Executed&&r.strictHandlingTransitionFails.length&&o.aContexts.length>1){try{const t=r.strictHandlingTransitionFails;const n=[];t.forEach(function(e){n.push(e.oAction.getContext())});R.aContexts=n;const a=await new m(e,R,o.messageHandler,r,{ignoreETag:o.ignoreETag}).execute();r.strictHandlingTransitionFails=[];u.addMessages(r.delaySuccessMessages);v(o,R,I);l(a)}catch(e){g(e)}}let t=false;if(o.bGrouped&&r&&r.strictHandlingPromises.length||o.bGrouped&&a.hasTransitionErrorsOrWarnings()){t=true}o?.messageHandler?.showMessageDialog({control:R?.control,onBeforeShowMessage:function(e,n){return D(R,p,undefined,e,n,t,L.length>0&&L.every(e=>e.status==="fulfilled"))},aSelectedContexts:o.aContexts,sActionName:d,entitySet:o.entitySetName,boundActionName:c}).then(()=>{o.messageHandler.clearStrictWarningMessages();return});if(r){r={is412Executed:false,strictHandlingTransitionFails:[],strictHandlingPromises:[],strictHandlingWarningMessages:[],delaySuccessMessages:[],processedMessageIds:new Set}}}})}function _(e,t){const n="C_OPERATIONS_ACTION_CONFIRM_TITLE";const a=E(e);const s=a.checkIfResourceKeyExists(`${n}|${t}`);if(s){return a.getText(n,undefined,t)}}async function O(e,t,n,a,s,o,i,r){return new Promise((c,g)=>{let u=t;u=u.includes(".")?u.split(".")[u.split(".").length-1]:u;const d=u&&s?`${s}|${u}`:"";const f=E(a);const p=f.getText("C_OPERATIONS_ACTION_CONFIRM_MESSAGE",undefined,d);l.confirm(p,{title:_(a,d),onClose:async function(t){if(t===A.OK){try{const t=await new m(e,n,o,i,{ignoreETag:r}).execute();c(t)}catch(e){try{await o.showMessageDialog();g(e)}catch(t){g(e)}}}else{g(h.CancelActionDialog)}}})})}function v(t,n,a){if(n.internalModelContext&&n.operationAvailableMap&&n.aContexts&&n.aContexts.length&&a.$IsBound){let t=[];const a=n.isStatic;if(!a){t=n.internalModelContext.getProperty("selectedContexts")||[];e.setActionEnablement(n.internalModelContext,JSON.parse(n.operationAvailableMap),t,"table")}else if(n.control){const a=n.control;if(a.isA("sap.ui.mdc.Table")){t=a.getSelectedContexts();e.setActionEnablement(n.internalModelContext,JSON.parse(n.operationAvailableMap),t,"table")}}o.updateDeleteInfoForSelectedContexts(n.internalModelContext,t)}}function B(e,n,s,o,i,r,c){if(r&&n){a.removeContextMessagesfromModel(e,s)}let l;if(!(i&&t.getIsEditable(i))){if(r&&n){if(o?.length===0){l=false;c=false}e=a.removeMessagesForActionParameterDialog(e)}}else{if(o?.length===0){l=false}e=a.removeMessagesForActionParameterDialog(e)}return{messagesToShow:e,containsBoundTransistion:l,showMessageInDialog:c}}function D(e,n,s,o,i,r,c){let l=i.showMessageBox,m=i.showMessageDialog;const p=e.control;const E=g.getResourceBundleFor("sap.fe.core");const M=o.filter(function(e){return e.getTargets()?.[0]===""});const C=o.filter(function(t){return t.getTargets&&t.getTargets()?.[0].includes(e.actionName)&&e?.aActionParameters?.some(function(e){return t.getTargets()?.[0].includes(e.name)})});C?.forEach(function(e){e.isAPDTarget=true});const h=C.length?true:false;if(r&&!h&&!c){const n=u.getMessageModel();const s=n.getData();const i=a.getMessages(true);let r;const c=(p&&t.getIsEditable(p))??false;const g=o.findIndex(function(e){return e.getType()==="Error"||e.getType()==="Warning"});const M=s.findIndex(function(e){return e.getType()==="Error"||e.getType()==="Warning"});if(g!==1&&M!==-1&&e.aContexts&&e.aContexts.length>1){if(s.length===1&&i.length===1){r=H(c,E);o.unshift(r);l=true;m=false}else{const e=E.getText("C_COMMON_DIALOG_CANCEL_ERROR_MESSAGES_TEXT");const t=E.getText("C_COMMON_DIALOG_CANCEL_ERROR_MESSAGES_DETAIL_TEXT");r=new d({message:e,type:f.Error,target:"",persistent:true,description:t,code:"FE_CUSTOM_MESSAGE_CHANGESET_ALL_FAILED"});o.unshift(r);if(o.length===1){l=true;m=false}else{m=true;l=false}}}}if(s&&s.isOpen()&&n.length!==0&&!e.isStatic){if(!e.bGrouped){if(n.length>1||!h){s.close();s.destroy()}}else if(!h){s.close();s.destroy()}}const y=[];const A=s&&s.isOpen();const{messagesToShow:S,containsBoundTransistion:T,showMessageInDialog:x}=B(o,h,n,M,p,A);o=S;m=x??m;if(!A&&h&&!e.bGrouped){m=true;o=o.concat(C)}let P;if(p&&p.isA("sap.ui.mdc.Table")){P=a.setMessageSubtitle.bind({},p,n)}return{showMessageBox:l,showMessageDialog:m,filteredMessages:y.length?y:o,fnGetMessageSubtitle:P,showChangeSetErrorDialog:e.bGrouped,containsBoundTransistion:T}}function $(e,t,n,a){const s=t.every(e=>e?.annotations?.UI?.Hidden?.valueOf()===true);if(n?.length&&!s){for(const e of t){if(e.name!=="ResultIsActiveEntity"&&!n?.find(t=>t.name===e.name)){return false}}}if(e&&a?.length&&!s){for(const e of t){if(a&&!a[e.name]){return false}}}if(t.length&&s){return t.every(function(e){const t=e.annotations?.Common?.FieldControl;const s=t?.toString()==="Common.FieldControlType/Mandatory";return!s||a&&a[e.name]||n?.find(t=>t.name===e.name)||e?.annotations?.UI?.ParameterDefaultValue?.valueOf()})}return true}function H(e,t){const n=e?t.getText("C_COMMON_DIALOG_CANCEL_SINGLE_ERROR_MESSAGE_TEXT_EDIT"):t.getText("C_COMMON_DIALOG_CANCEL_SINGLE_ERROR_MESSAGE_TEXT");return new d({message:n,type:f.Error,target:"",persistent:true,code:"FE_CUSTOM_MESSAGE_CHANGESET_ALL_FAILED",technicalDetails:{fe:{changeSetPreTextForSingleError:n}}})}const N={callBoundAction:S,callActionImport:T,callBoundFunction:x,callFunctionImport:P,valuesProvidedForAllMandatoryParameters:$,actionParameterShowMessageCallback:D,afterActionResolution:v,checkParameterTypeAndReturnConvertedValue:b,getConfirmTitle:_};return N},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/editFlow/sticky", ["sap/base/Log","sap/fe/core/CommonUtils","sap/fe/core/helpers/ResourceModelHelper","sap/fe/core/library","sap/m/MessageBox","sap/ui/core/Lib","../../operationsHelper"],function(e,t,n,o,i,s,c){"use strict";var a=n.getResourceModel;const r=o.ProgrammingModel;async function d(e,t,n){const o=e.getModel(),i=o.getMetaModel(),s=i.getMetaPath(e.getPath()),r=i.getObject(`${s}@com.sap.vocabularies.Session.v1.StickySessionSupported/EditAction`);if(!r){throw new Error(`Edit Action for Sticky Session not found for ${s}`)}const d=a(t);const u=d.getText("C_COMMON_OBJECT_PAGE_EDIT");const f=o.bindContext(`${r}(...)`,e,{$$inheritExpandSelect:true});const l="direct";const S=e.getObject()===undefined?true:undefined;const p=f.execute(l,S,c.fnOnStrictHandlingFailed.bind(g,l,{appComponent:t,label:u,model:o},null,null,null,n,undefined,undefined),e.getBinding().isA("sap.ui.model.odata.v4.ODataListBinding"));o.submitBatch(l);const A=await p;const O=t.getSideEffectsService().getODataActionSideEffects(r,A);if(O?.triggerActions&&O.triggerActions.length){await t.getSideEffectsService().requestSideEffectsForODataAction(O,A)}return A}async function u(t,n,o){const i=t.getModel(),s=i.getMetaModel(),r=s.getMetaPath(t.getPath()),d=s.getObject(`${r}@com.sap.vocabularies.Session.v1.StickySessionSupported/SaveAction`);if(!d){throw new Error(`Save Action for Sticky Session not found for ${r}`)}const u=a(n);const f=u.getText("C_OP_OBJECT_PAGE_SAVE");const l=i.bindContext(`${d}(...)`,t,{$$inheritExpandSelect:true});const S="direct";const p=l.execute(S,true,c.fnOnStrictHandlingFailed.bind(g,S,{appComponent:n,label:f,model:i},null,null,null,o,undefined,undefined),t.getBinding().isA("sap.ui.model.odata.v4.ODataListBinding"));i.submitBatch(S);try{return await p}catch(o){const i=s.getObject(`${r}/@${"com.sap.vocabularies.Common.v1.Messages"}/$Path`);if(i){try{await n.getSideEffectsService().requestSideEffects([i],t)}catch(t){e.error("Error while requesting side effects",t)}}throw o}}async function f(e){const t=e.getModel(),n=t.getMetaModel(),o=n.getMetaPath(e.getPath()),i=n.getObject(`${o}@com.sap.vocabularies.Session.v1.StickySessionSupported/DiscardAction`);if(!i){throw new Error(`Discard Action for Sticky Session not found for ${o}`)}const s=t.bindContext(`/${i}(...)`);return s.execute("$single").then(function(){return e})}function l(n,o,c){const a=t.getIsEditable(o),d=s.getResourceBundleFor("sap.fe.templates"),u=d.getText("T_COMMON_UTILS_NAVIGATION_AWAY_MSG"),f=d.getText("T_COMMON_UTILS_NAVIGATION_AWAY_CONFIRM_BUTTON"),l=d.getText("T_COMMON_UTILS_NAVIGATION_AWAY_CANCEL_BUTTON");if(c===r.Sticky&&a){return i.warning(u,{actions:[f,l],emphasizedAction:f,onClose:function(t){if(t===f){e.info("Navigation confirmed.");n()}else{e.info("Navigation rejected.")}}})}return n()}const g={editDocumentInStickySession:d,activateDocument:u,discardDocument:f,processDataLossConfirmation:l};return g},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/messageHandler/messageHandling", ["sap/fe/core/helpers/ResourceModelHelper","sap/m/Bar","sap/m/Button","sap/m/Dialog","sap/m/FormattedText","sap/m/MessageBox","sap/m/MessageItem","sap/m/MessageToast","sap/m/MessageView","sap/m/Text","sap/m/library","sap/ui/base/ManagedObject","sap/ui/core/Element","sap/ui/core/IconPool","sap/ui/core/Lib","sap/ui/core/Messaging","sap/ui/core/format/DateFormat","sap/ui/core/message/Message","sap/ui/core/message/MessageType","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/Sorter","sap/ui/model/json/JSONModel"],function(e,t,n,s,o,r,a,i,l,g,c,u,f,d,T,p,E,m,_,S,h,A,M){"use strict";var C=e.getResourceModel;const I=c.ButtonType;let N=[];let b;let P;let R;function O(){let e;function t(e){return e.property?"( ${"+e.property+'} ? ("<p>'+e.property.substring(Math.max(e.property.lastIndexOf("/"),e.property.lastIndexOf("."))+1)+' : " + '+"${"+e.property+'} + "</p>") : "" )':""}function n(t){let n="";if(t.groupName&&t.property&&t.groupName!==e){n+="( ${"+t.property+'} ? "<br><h3>'+t.groupName+'</h3>" : "" ) + ';e=t.groupName}return n}function s(){const e="technicalDetails";return[{groupName:"",property:`${e}/status`},{groupName:"",property:`${e}/statusText`},{groupName:"Application",property:`${e}/error/@SAP__common.Application/ComponentId`},{groupName:"Application",property:`${e}/error/@SAP__common.Application/ServiceId`},{groupName:"Application",property:`${e}/error/@SAP__common.Application/ServiceRepository`},{groupName:"Application",property:`${e}/error/@SAP__common.Application/ServiceVersion`},{groupName:"ErrorResolution",property:`${e}/error/@SAP__common.ErrorResolution/Analysis`},{groupName:"ErrorResolution",property:`${e}/error/@SAP__common.ErrorResolution/Note`},{groupName:"ErrorResolution",property:`${e}/error/@SAP__common.ErrorResolution/DetailedNote`},{groupName:"ErrorResolution",property:`${e}/error/@SAP__common.ExceptionCategory`},{groupName:"ErrorResolution",property:`${e}/error/@SAP__common.TimeStamp`},{groupName:"ErrorResolution",property:`${e}/error/@SAP__common.TransactionId`},{groupName:"Messages",property:`${e}/error/code`},{groupName:"Messages",property:`${e}/error/message`}]}let o="Object.keys("+"${technicalDetails}"+').length > 0 ? "<h2>Technical Details</h2>" : "" ';s().forEach(function(e){o=`${o+n(e)}${t(e)} + `});return o}function x(){return"(${"+"description} ? (${"+'description}) : "")'}function y(e){let t=_.None;const n=e.length;const s={Error:0,Warning:0,Success:0,Information:0};for(let t=0;t<n;t++){++s[e[t].getType()]}if(s[_.Error]>0){t=_.Error}else if(s[_.Warning]>0){t=_.Warning}else if(s[_.Success]>0){t=_.Success}else if(s[_.Information]>0){t=_.Information}return t}function G(e,t){const n=p.getMessageModel().getObject("/");let s=false;let o="";n.forEach(function(r,a){const i=r.getTechnicalDetails&&r.getTechnicalDetails();if(i&&i.httpStatus===412&&i.isConcurrentModification){if(t){o=o||e.getText("C_APP_COMPONENT_SAPFE_ETAG_TECHNICAL_ISSUES_CONCURRENT_MODIFICATION")}else{o=o||e.getText("C_APP_COMPONENT_SAPFE_ETAG_TECHNICAL_ISSUES")}p.removeMessages(n[a]);r.setMessage(o);r.setTargets([""]);p.addMessages(r);s=true}});return s}function D(){b.close();P.setVisible(false);const e=b.getContent()[0];const t=e.getModel();if(t){t.setData({})}_e()}function w(e,t){const n=new Date;const s=e.getTechnicalDetails();const o=T.getResourceBundleFor("sap.fe.core");let r;if(s&&s.httpStatus===503&&s.retryAfter){const e=s.retryAfter;let a;if(n.getFullYear()!==e.getFullYear()){a=E.getDateTimeInstance({pattern:"MMMM dd, yyyy 'at' hh:mm a"});r=o.getText("C_MESSAGE_HANDLING_SAPFE_503_ERROR",[a.format(e)])}else if(n.getFullYear()==e.getFullYear()){if(t){r=`${o.getText("C_MESSAGE_HANDLING_SAPFE_503_TITLE")} ${o.getText("C_MESSAGE_HANDLING_SAPFE_503_DESC")}`}else if(n.getMonth()!==e.getMonth()||n.getDate()!==e.getDate()){a=E.getDateTimeInstance({pattern:"MMMM dd 'at' hh:mm a"});r=o.getText("C_MESSAGE_HANDLING_SAPFE_503_ERROR",[a.format(e)])}else{a=E.getDateTimeInstance({pattern:"hh:mm a"});r=o.getText("C_MESSAGE_HANDLING_SAPFE_503_ERROR_DAY",[a.format(e)])}}}if(s&&s.httpStatus===503&&!s.retryAfter){r=o.getText("C_MESSAGE_HANDLING_SAPFE_503_ERROR_NO_RETRY_AFTER")}return r}function F(){return[...Ae(undefined,true),...Ae(true,true)].some(function(e){return e.getType()==="Error"||e.getType()==="Warning"})}function B(e,t,s){let o;if(!t){const e='{= ${description} ? "<html><body>" + '+x()+' + "</html></body>" : "" }';const t='{= ${technicalDetails} ? "<html><body>" + '+O()+' + "</html></body>" : "" }';o=new a(undefined,{counter:{path:"counter"},title:"{message}",subtitle:"{additionalText}",longtextUrl:"{descriptionUrl}",type:{path:"type"},groupName:"{headerName}",description:e+t,markupDescription:true})}else if(s){o=new a(undefined,{counter:{path:"counter"},title:"{message}",subtitle:"{additionalText}",longtextUrl:"{descriptionUrl}",type:{path:"type"},description:"{description}",markupDescription:true})}else{o=new a({title:"{message}",type:{path:"type"},longtextUrl:"{descriptionUrl}"})}R=new l({showDetailsPageHeader:false,itemSelect:function(){P.setVisible(true)},items:{path:"/",template:o,length:9999}});R.setGroupItems(true);P=P||new n({icon:d.getIconURI("nav-back"),visible:false,press:function(){R.navigateBack();this.setVisible(false)}});R.setModel(e);return{messageView:R,oBackButton:P}}function $(e){const t=e.getTechnicalDetails();if(t&&(t.originalMessage!==undefined&&t.originalMessage!==null||t.httpStatus!==undefined&&t.httpStatus!==null)||e.getCode()){return true}return false}function L(e,t){let n=this.getMessages();if(e){n=n.concat(this.getMessages(true,true))}return n}function U(e,t){let n=[...e];let s=e.length===1&&e[0].getCode()==="503"?"Box":"Dialog";let o;let r;if(t){const a={showMessageDialog:s==="Dialog",showMessageBox:s==="Box"};const{showMessageBox:i,showMessageDialog:l,showChangeSetErrorDialog:g,filteredMessages:c,fnGetMessageSubtitle:u,containsBoundTransistion:f}=t(e,a);if(i===true){s="Box"}else if(l===true){s="Dialog"}else{s="None"}r=f;o=u;if(g||f===false){n=c??[]}}return{uiElementToUse:s,messagesToShow:n,fnGetMessageSubtitle:o,containsBoundTransition:r}}function H(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let s=arguments.length>3?arguments[3]:undefined;let o=arguments.length>4?arguments[4]:undefined;let r=arguments.length>5?arguments[5]:undefined;let a=arguments.length>6?arguments[6]:undefined;let i=arguments.length>7?arguments[7]:undefined;let l=arguments.length>8&&arguments[8]!==undefined?arguments[8]:false;let g=arguments.length>9?arguments[9]:undefined;if(e&&e.length){Y(e)}const c=L.call(this,n,t);const u=U.call(this,c,a);let{messagesToShow:f,uiElementToUse:d="Dialog"}=u;n=u.containsBoundTransition??n;const p=k(n,l);f=z(p,f??[]);f=ee(f,t);({messagesToShow:f,uiElementToUse:d}=W({messagesToShow:f,uiElementToUse:d}));const E=this.modifyETagMessagesOnly(T.getResourceBundleFor("sap.fe.core"),s);if(f.length>0&&d!=="None"){if(f.length>1&&V(f)){const e=v(C(o),g);f=e?[e]:[f[0]]}if(f.length===1){const e=f[0];if(e.getType()===_.Success){d="Toast"}else if(E||e.getDescription()?.length||e.getDescriptionUrl()?.length){d="Dialog"}else{d="Box"}}$e.updateMessageObjectGroupName(f,o,r,i);const e=u.fnGetMessageSubtitle;if(e){f.forEach(function(t){e(t)})}}return{messagesToShow:f,uiElementToUse:d,contextNeedsEtagRefresh:E?t:undefined,containsBoundTransition:n}}function v(e,t){const n=t?.aSelectedContexts;if(n&&Array.isArray(n)&&n?.length>1&&e){let s=t?.boundActionName;const o=t?.entitySet;s=s?.includes(".")?s?.split(".")[s?.split(".").length-1]:s;const r=s&&o?`${o}|${s}`:"";return new m({message:e.getText("C_COMMON_SUCCESS_MESSAGE",[n?.length],r),type:_.Success,target:"",persistent:true,code:"C_COMMON_SUCCESS_MESSAGE"})}}function V(e){let t;const n=e.some((e,n)=>{if(e.getType()!==_.Success){return true}if(n===0){t=e;return false}else if(t.getCode()===e.getCode()&&t.getMessage()===e.getMessage()&&t.getDescription()===e.getDescription()&&t.getDescriptionUrl()===e.getDescriptionUrl()&&t.getAdditionalText()===e.getAdditionalText()){return false}return true});return!n}async function j(e){const{messagesToShow:t,uiElementToUse:n}=e;if(t.length===0){return Promise.resolve(undefined)}else if(n==="Toast"){return $e.showMessageToast(t[0])}else if(n==="Dialog"){await $e.showMessageDialogControl(e);return Promise.resolve(undefined)}else if(n==="Box"){return $e.showMessageBoxControl(e)}else{return Promise.resolve(undefined)}}function k(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const n=t?[]:[new S({path:"persistent",operator:h.NE,value1:false})];const s=new S({path:"",test:$});if(t||e){const o=function(e){return $e.isMessageOutOfParameterDialog(e)};n.push(new S({path:"controlIds",test:o,caseSensitive:true}));if(e&&!t){n.push(new S({path:"persistent",operator:h.EQ,value1:true}));n.push(s)}}else{n.push(new S({filters:[new S({path:"",test:e=>e.getTargets().length===0||e.getTargets()[0]===""}),s],and:true}))}return n}function W(e){let{messagesToShow:t,uiElementToUse:n}=e;let s=[...t];if(t.length===2){const e=[];const n=[];t.forEach(t=>{if(t.getCode()==="FE_CUSTOM_MESSAGE_CHANGESET_ALL_FAILED"){e.push(t)}else{n.push(t)}});if(e.length===1){const{fe:t}=e[0].getTechnicalDetails()||{};if(t?.changeSetPreTextForSingleError){const o=t?.changeSetPreTextForSingleError;if(o){const t={fe:{singleErrorPreText:o,singleGenericMessageId:e[0].getId()}};const r=n[0].getTechnicalDetails()??{};n[0].setTechnicalDetails({...r,...t});s=n}}}}return{messagesToShow:s,uiElementToUse:s.length===1&&n!=="None"?"Box":n}}function Y(e){e.forEach(function(e){const t=e.code?e.code:"";p.addMessages(new m({message:e.text,type:e.type,target:"",persistent:true,code:t}))})}function K(){return new A("",undefined,undefined,(e,t)=>{const n=le(e);const s=le(t);if(n<s){return-1}if(n>s){return 1}return 0})}function z(e,t){let n=[...t];const s=p.getMessageModel().bindList("/",undefined,undefined,e),o=s.getCurrentContexts();if(o.length>0){const e=o.map(e=>e.getObject());const t={};n=e.concat(n).filter(function(e){return!t[e.getId()]&&(t[e.getId()]=true)})}return n}async function X(e){return new Promise(t=>{i.show(e.getMessage());p.removeMessages(e);t(undefined)})}async function J(e){let o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let r;let a;return new Promise(function(i){N.push(i);const l=T.getResourceBundleFor("sap.fe.core");const c=false;const{messagesToShow:u,contextNeedsEtagRefresh:f}=e;const d=new M(u);const E=B(d,c);const m=K();E.messageView.getBinding("items").sort(m);if(!b||!b.isOpen()){b=new s({resizable:true,endButton:new n({press:function(){D();p.removeMessages(u)},text:l.getText("C_COMMON_SAPFE_CLOSE")}),escapeHandler:function(e){D();p.removeMessages(u);e.resolve()},customHeader:new t({contentMiddle:[new g({text:l.getText("C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_TITLE")})],contentLeft:[P]}),contentWidth:"37.5em",contentHeight:"21.5em",verticalScrolling:false,closeOnNavigation:false,afterClose:function(){for(const e of N){e()}N=[]}})}b.removeAllContent();b.addContent(R);if(f){b.setBeginButton(new n({press:function(){D();if(f.hasPendingChanges()){f.getBinding().resetChanges()}f.refresh()},text:l.getText("C_COMMON_SAPFE_REFRESH"),type:I.Emphasized}))}else{b.destroyBeginButton()}r=y(R.getItems());a=me(r);b.setState(r);b.getCustomHeader().getContentMiddle()[0].setText(a);R.navigateBack();b.open();if(o){i(b)}})}async function Q(e){return new Promise(function(t){const{messagesToShow:n}=e;const s=n[0];const r=s.getTechnicalDetails();const{singleGenericMessageId:a,singleErrorPreText:i}=r?.fe??{};const l=$e.getRetryAfterMessage(s,true);const g=l?r:true;if(g){const e="<html><body><span style='white-space:pre-wrap'>",n="</span></body></html>";let r=e;if(l){r=`${r}<h6>${l}</h6><br></br>`}else{if(i){const e=s?.["headerName"]?`${s?.["headerName"]}:`:"";r=`${r}${i}<br/><br/>${e} `}}if(s.getCode()!=="503"&&s.getAdditionalText()!==undefined){r=`${r+s.getAdditionalText()}: ${s.getMessage()}${n}`}else{r=`${r+s.getMessage()}${n}`}const g=new o({htmlText:u.escapeSettingsValue(r)});Z(g,{onClose:q.bind(null,s,t,a)},s)}})}function q(e,t,n){const s=[e];if(n){const e=p.getMessageModel().getData();const t=e.find(e=>e.getId()===n);if(t){s.push(t)}}p.removeMessages(s);t(undefined)}function Z(e,t,n){switch(n.getType()){case _.Error:r.error(e,t);break;case _.Warning:r.warning(e,t);break;case _.Success:r.success(e,t);break;case _.Information:r.information(e,t);break;default:r.show(e,t)}}function ee(e,t){const n=[];e?.forEach(e=>{if(e.getTargets().length===1&&e.getTargets()[0]===t?.getPath()&&e.getPersistent()===true){n.push(e)}});if(n.length===1){e=e?.filter(function(e){return e!==n[0]})}return e}function te(e,t,n,s){e.forEach(e=>{e["headerName"]="";if(!e.target?.length&&e.getCode?.()!=="FE_CUSTOM_MESSAGE_CHANGESET_ALL_FAILED"){const t=T.getResourceBundleFor("sap.fe.core").getText("T_MESSAGE_BUTTON_SAPFE_MESSAGE_GROUP_GENERAL");e["headerName"]=t}else if(e.target?.length){if(s==="ListReport"&&t?.isA("sap.ui.mdc.Table")){$e.setGroupNameLRTable(t,e,n)}else if(s==="ObjectPage"){$e.setGroupNameOPDisplayMode(e,n,t)}else{e["headerName"]=$e.getLastActionTextAndActionName(n)}}})}function ne(e,t,n){const s=e&&e.getRowBinding();if(s){const o=`${e.getRowBinding().getPath()}`;if(t.target?.indexOf(o)===0){const o=s.getCurrentContexts();o.forEach(s=>{if(t.target?.includes(s.getPath())){const o=`${s.getPath()}/`;const r=e.getParent().getIdentifierColumn();const a=r&&s.getObject()[r];const i=$e.getTableColProperty(e,t,o);const{sTableTargetColName:l}=$e.getTableColInfo(e,i);if(i&&l){t["headerName"]=a?` ${a}`:e.getHeader()}else{t["headerName"]=$e.getLastActionTextAndActionName(n)}}})}}}function se(e,t,n){const s=e.getParent().getIdentifierColumn();if(s){const o=e.getRowBinding().getContexts();o.forEach(e=>{if(t.target?.includes(e.getPath())){const o=s?e.getObject()[s]:undefined;const r=n.sTableTargetColName?`, ${n.sTableTargetColName}`:"";t["additionalText"]=`${o}${r}`}})}else{t["additionalText"]=`${n.sTableTargetColName}`}}function oe(e,t,n,s){let o=t.getHeaderVisible()&&s.tableHeader;if(!o){o=e.getTitle()}else{const e=T.getResourceBundleFor("sap.fe.core");o=`${e.getText("T_MESSAGE_GROUP_TITLE_TABLE_DENOMINATOR")}: ${o}`}n["headerName"]=o}function re(e,t,n,s,o,r){const a=t.getRowBinding(),i=true;let l;t.findElements(true).forEach(e=>{if(e.isA("sap.m.Table")||e.isA("sap.ui.table.Table")){l=e}});if(a){const g=`${s?.getPath()}/${t.getRowBinding()?.getPath()}`;if(n.target?.indexOf(g)===0){const s=$e.getTableColumnDataAndSetSubtile(n,t,l,a,r,i,ge);const{oTargetTableInfo:g}=s;$e.updateAddtionalTextForMessageInOPTable(t,n,g);$e.updateHeaderNameForMessageInOPTable(e,t,n,g);o=false}}return o}function ae(e,t,n){const s=n?.getBindingContext();const o=n?.getContent&&n?.getContent()[0];let r=true;if(o){$e.getVisibleSectionsFromObjectPageLayout(o).forEach(function(n){const o=n.getSubSections();o.forEach(function(n){n.findElements(true).forEach(function(o){if(o.isA("sap.ui.mdc.Table")){r=re(n,o,e,s,r,t)}})})})}if(r){const n=`${s?.getPath()}`;if(e.target?.indexOf(n)===0){e["headerName"]=$e.getLastActionTextAndActionName(t)}else{e["headerName"]=T.getResourceBundleFor("sap.fe.core").getText("T_MESSAGE_BUTTON_SAPFE_MESSAGE_GROUP_GENERAL")}}}function ie(e){const t=T.getResourceBundleFor("sap.fe.core").getText("T_MESSAGE_BUTTON_SAPFE_MESSAGE_GROUP_LAST_ACTION");return e?`${t}: ${e}`:""}function le(e){if(e.getCode()==="FE_CUSTOM_MESSAGE_CHANGESET_ALL_FAILED"){return 1}else if(e.headerName?.toString().includes("Last Action")){return 2}else if(e.headerName?.toString().includes("General")){return 4}else{return 3}}const ge=(e,t,n)=>{if(n){e["headerName"]=T.getResourceBundleFor("sap.fe.core").getText("T_MESSAGE_BUTTON_SAPFE_MESSAGE_GROUP_GENERAL")}else{e["headerName"]=$e.getLastActionTextAndActionName(t)}};function ce(e,t,n,s,o,r,a){const i=$e.getTableAndTargetInfo(t,e,n,s);i.tableHeader=t.getHeader();let l,g;if(!i.oTableRowContext){l=e.getControlIds().find(function(e){return $e.isControlInTable(t,e)})}if(l){const e=f.getElementById(l);g=$e.isControlPartOfCreationRow(e)}if(!i.sTableTargetColName){if(e.getPersistent()&&o){a(e,o);r=false}}const c=$e.getMessageSubtitle(e,i.oTableRowBindingContexts,i.oTableRowContext,i.sTableTargetColName,t,g);return{oTargetTableInfo:i,subTitle:c}}function ue(e,t,n,s,o,r,a){let i;let l;const g=C(o);const c=o.getParent()?.getTableColumnVisibilityInfo(n);const u=$e.fetchColumnInfo(e,o);if(r||n?.isInactive()){i=g.getText("T_MESSAGE_ITEM_SUBTITLE",[g.getText("T_MESSAGE_ITEM_SUBTITLE_CREATION_ROW_INDICATOR"),s?s:u.label])}else{const e=$e.getTableColBindingContextForTextAnnotation(o,n,c);const r=e?e.getObject("$Path"):undefined;const f=r&&e?e.getObject("@com.sap.vocabularies.UI.v1.TextArrangement/$EnumMember"):undefined;if(t.length>0){if(a){l=a.getValue()}else if(n&&c&&c.length===1){l=o.getParent()?.getTableColValue(n,r,f,c)}else if(n&&c&&c.length>1){l=g.getText("T_MESSAGE_ITEM_SUBTITLE_DETAILED_ROW_INFO")}else{l=undefined}const e=$e.determineColumnInfo(u,g);if(l&&s){i=g.getText("T_MESSAGE_ITEM_SUBTITLE",[l,s])}else if(l&&e.sColumnIndicator==="Hidden"){i=`${g.getText("T_MESSAGE_GROUP_DESCRIPTION_TABLE_ROW_WITH_IDENTIFIER",[l])}, ${e.sColumnValue}`}else if(l&&e.sColumnIndicator==="Unknown"){i=g.getText("T_MESSAGE_GROUP_DESCRIPTION_TABLE_ROW_WITH_IDENTIFIER",[l])}else if(l&&e.sColumnIndicator==="undefined"){i=g.getText("T_MESSAGE_GROUP_DESCRIPTION_TABLE_ROW_WITH_IDENTIFIER",[l])}else if(!l&&s){i=g.getText("T_MESSAGE_GROUP_DESCRIPTION_TABLE_COLUMN")+": "+s}else if(!l&&e.sColumnIndicator==="Hidden"){i=e.sColumnValue}else{i=null}}else{i=null}}return i}function fe(e,t,n){let s;if(t&&n&&n.length===1){const{key:o}=n[0];const r=e?.getModel();const a=r?.getMetaModel();const i=a?.getMetaPath(t.getPath());if(a?.getObject(`${i}/${o}@com.sap.vocabularies.Common.v1.Text/$Path`)){s=a.createBindingContext(`${i}/${o}@com.sap.vocabularies.Common.v1.Text`)}}return s}function de(e,t){const n=e?.getTargets()[0].split("/").pop();return t.getParent()?.getKeyColumnInfo(n)}function Te(e,t){const n={sColumnIndicator:"",sColumnValue:""};if(e){if(e.availability==="Hidden"){n.sColumnValue=undefined;n.sColumnIndicator="undefined"}else{n.sColumnValue=`${t.getText("T_MESSAGE_GROUP_DESCRIPTION_TABLE_COLUMN")} (${t.getText("T_COLUMN_INDICATOR_IN_TABLE_DEFINITION")}): ${e.label}`;n.sColumnIndicator="Hidden"}}else{n.sColumnIndicator="Unknown"}return n}function pe(e,t){const n=f.getElementById(t);if(n&&!n.isA("sap.ui.table.Table")&&!n.isA("sap.m.Table")){return e.findElements(true,function(e){return e.getId()===n.getId()})}return false}function Ee(e){let t=e?.getParent();while(t&&!t?.isA("sap.ui.table.Row")&&!t?.isA("sap.ui.table.CreationRow")&&!t?.isA("sap.m.ColumnListItem")){t=t.getParent()}return!!t&&t.isA("sap.ui.table.CreationRow")}function me(e){const t=T.getResourceBundleFor("sap.fe.core");switch(e){case"Error":return t.getText("C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_TITLE_ERROR");case"Information":return t.getText("C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_TITLE_INFO");case"Success":return t.getText("C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_TITLE_SUCCESS");case"Warning":return t.getText("C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_TITLE_WARNING");default:return t.getText("C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_TITLE")}}function _e(){Me(false)}function Se(e){Me(true,e)}function he(e,t){if(t===undefined){return e.getObject("/")}const n=e.bindList("/");n.filter(new S({path:"",test:e=>e.getTargets().some(e=>e.startsWith(t))}));return n.getCurrentContexts().map(function(e){return e.getObject()})}function Ae(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n=arguments.length>2?arguments[2]:undefined;let s;const o=p.getMessageModel(),r=T.getResourceBundleFor("sap.fe.core"),a=[];let i=[];if(e&&t&&n){i=he(o,n)}else{i=o.getObject("/")}for(s=0;s<i.length;s++){if((!t||i[s].getPersistent())&&(e&&i[s].getTargets()[0]!==""||!e&&(!i[s].getTargets()[0]||i[s].getTargets()[0]===""))){a.push(i[s])}}for(s=0;s<a.length;s++){if(a[s].getCode()==="503"&&a[s].getMessage()!==""&&!a[s].getMessage().includes(r.getText("C_MESSAGE_HANDLING_SAPFE_503_BACKEND_PREFIX"))){a[s].setMessage(`\n${r.getText("C_MESSAGE_HANDLING_SAPFE_503_BACKEND_PREFIX")}${a[s].getMessage()}`)}}const l=a.filter($);return l}function Me(e,t){const n=Ae(e,true,t);if(n.length>0){p.removeMessages(n)}}function Ce(e,t,n){if(n.additionalText===undefined){const s=e.getParent().getIdentifierColumn();const o=t.find(function(e){return n.getTargets()[0].includes(e.getPath())});n.additionalText=o?o.getObject()[s]:undefined}}function Ie(e){return e.getSections().filter(function(e){return e.getVisible()})}function Ne(e,t){return e.findElements(true,e=>Oe(t.getControlIds(),e)).sort(function(e,t){if(e.isA("sap.ui.mdc.Table")&&!t.isA("sap.ui.mdc.Table")){return-1}return 1})}function be(e,t,n){const s=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")};if(!n){const t=`${e.getBindingContext()?.getPath()}/${e.getRowBinding().getPath()}`;n=new RegExp(`${s(t)}\\(.*\\)/`)}return t.getTargets()[0].replace(n,"")}function Pe(e,t){let n;const s=e.getColumns().find(function(e){return e.getPropertyKey()==t});if(!s){const s=e.getControlDelegate().getColumnsFor(e).find(function(e){if(!!e.template&&e.propertyInfos){return e.propertyInfos[0]===t||e.propertyInfos[0].replace("Property::","")===t}else{return false}});if(s){t=s?.name;n=e.getColumns().find(function(e){return t===e.getPropertyKey()})?.getHeader()}else{const s=e.getControlDelegate().getColumnsFor(e);const o=s.find(function(e){if(e.key.includes("::FieldGroup::")){return e.propertyInfos?.find(function(e){return e===t||e.replace("Property::","")===t})}});let r=false;if(o&&o.label){r=e.getColumns().some(function(e){return e.getHeader()===o.label})}n=r?o?.label:undefined;t=r?o?.key:undefined}}else{n=s.getHeader()}return{sTableTargetColName:n,sTableTargetColProperty:t}}function Re(e,t,n,s){const o=be(e,t);const r=Pe(e,o);const a=n?.isA("sap.ui.table.Table")?s.getContexts():s.getCurrentContexts();const i={oTableRowBindingContexts:a,sTableTargetColName:r.sTableTargetColName,sTableTargetColProperty:r.sTableTargetColProperty,oTableRowContext:a.find(function(e){return e&&t.getTargets()[0].indexOf(e.getPath())===0})};return i}function Oe(e,t){return e.some(function(e){if(e===t.getId()){return true}return false})}function xe(e,t,n,s,o){let r=arguments.length>5&&arguments[5]!==undefined?arguments[5]:true;return e.getTitle()+(t.getTitle()&&n?`, ${t.getTitle()}`:"")+(s&&s.tableHeader&&r?`, ${o.getText("T_MESSAGE_GROUP_TITLE_TABLE_DENOMINATOR")}: ${s.tableHeader}`:"")}function ye(e,t){return!t.some(function(t){let n=e.getParent();while(n&&n!==t){n=n.getParent()}return n?true:false})}function Ge(e){const t=p.getMessageModel();const n=t.bindList("/");n.filter(new S({path:"",test:t=>t.getTargets().length>0&&t.getTargets()[0].startsWith(e.getPath())}));const s=n.getCurrentContexts();return s.map(e=>e.getObject())}function De(e){let t,n;const o=Infinity;if(e.length===1){t=f.getElementById(e[0]);n=f.getElementById(e[0])}else{let n;e.forEach(e=>{const s=f.getElementById(e);if(s?.isA("sap.ui.mdc.Field")){n=e;t=f.getElementById(n)}})}while(t){const e=Infinity;if(t instanceof s){if(o>e){n?.focus()}return false}t=t.getParent()}return true}function we(e){const t=p.getMessageModel().getData();const n=[];t?.forEach(t=>{const s=t.getTargets().length===1;const o=t.getTargets()[0]===e?.getPath();const r=t.getPersistent()===true;if(s&&o&&r){n.push(t)}});if(n.length===1){p.removeMessages(n)}}function Fe(e,t){const n=[];if(t?.length===1){e?.forEach(e=>{if(e.getTargets().length===1&&e.getTargets()[0]===t?.[0]?.getPath()&&e.getPersistent()===true){n.push(e)}})}if(n.length>0){p.removeMessages(n)}}function Be(e){const t=e?.filter(e=>e.getPersistent()===true&&e.getTargets()[0]!=="");e=e?.filter(e=>!t?.includes(e));return e}const $e={getMessages:Ae,getUIDecisions:H,removeUnboundTransitionMessages:_e,removeBoundTransitionMessages:Se,modifyETagMessagesOnly:G,getRetryAfterMessage:w,prepareMessageViewForDialog:B,setMessageSubtitle:Ce,getVisibleSectionsFromObjectPageLayout:Ie,getControlFromMessageRelatingToSubSection:Ne,fnFilterUponIds:Oe,getTableAndTargetInfo:Re,createSectionGroupName:xe,bIsOrphanElement:ye,getLastActionTextAndActionName:ie,getTableColumnDataAndSetSubtile:ce,getTableColInfo:Pe,getTableColProperty:be,getMessageSubtitle:ue,determineColumnInfo:Te,fetchColumnInfo:de,getTableColBindingContextForTextAnnotation:fe,getMessageRank:le,hasTransitionErrorsOrWarnings:F,fnCallbackSetGroupName:ge,setGroupNameOPDisplayMode:ae,updateMessageObjectGroupName:te,setGroupNameLRTable:ne,isControlInTable:pe,isControlPartOfCreationRow:Ee,removeMessageShownInMessageStrip:ee,getFiltersForMessages:k,showMessagesInUI:j,showMessageDialogControl:J,showMessageToast:X,showMessageBoxControl:Q,getMessagesForContext:Ge,isMessageOutOfParameterDialog:De,removeContextMessagesfromModel:Fe,removeMessagesForActionParameterDialog:Be,setGroupNameOPTableDisplayMode:re,updateAddtionalTextForMessageInOPTable:se,updateHeaderNameForMessageInOPTable:oe,closeMessageBox:q,removeTransistionMessageForContext:we,checkIfAllAreSameSuccessMessages:V,addGenericSuccessMessage:v};return $e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/pageReady/DataQueryWatcher", ["sap/base/Log","sap/fe/macros/table/Utils"],function(e,t){"use strict";let i=function(){function i(e,t){this._aBindingRegistrations=[];this._aOtherEventSources=[];this._isSearchPending=false;this._aMDCTables=[];this._aMDCCharts=[];this._oEventProvider=e;this._fnOnFinished=t}var n=i.prototype;n.isSearchPending=function e(){return this._isSearchPending};n.isDataReceived=function e(){return this._isDataReceived};n.resetDataReceived=function e(){this._isDataReceived=undefined};n.reset=function e(){this._aBindingRegistrations.forEach(e=>{e.binding.detachEvent("dataRequested",this.onDataRequested,this);e.binding.detachEvent("dataReceived",this.onDataReceived,this)});this._aOtherEventSources.forEach(e=>{e.detachEvent("search",this.onSearch,this);e.detachEvent("bindingUpdated",this.register,this)});this._aBindingRegistrations=[];this._aOtherEventSources=[];this._aMDCTables=[];this._aMDCCharts=[];this._isSearchPending=false;this._isDataReceived=undefined};n.onDataReceived=function t(i,n){const r=i.getSource();const a=this._aBindingRegistrations.find(e=>e.binding===r);if(!a){e.error("PageReady - data received on an unregistered binding");return}switch(r.getGroupId()){case"$auto.Workers":this._oEventProvider.fireEvent("workersBatchReceived");break;case"$auto.Heroes":this._oEventProvider.fireEvent("heroesBatchReceived");break;default:}a.receivedCount++;if(a.receivedCount<a.requestedCount){r.attachEventOnce("dataReceived",{triggeredBySearch:n.triggeredBySearch},this.onDataReceived,this);return}const s=this._aBindingRegistrations.some(e=>e.requestedCount!==0)&&this._aBindingRegistrations.every(e=>e.requestedCount===0||e.receivedCount>=e.requestedCount);if(n.triggeredBySearch||a.receivedCount>=a.requestedCount){this._isSearchPending=false}if(s){this._isDataReceived=true;this._fnOnFinished()}};n.onDataRequested=function t(i,n){const r=i.getSource();const a=this._aBindingRegistrations.find(e=>e.binding===r);if(!a){e.error("PageReady - data requested on an unregistered binding");return}a.requestedCount++;this._isDataReceived=false;if(a.requestedCount-a.receivedCount===1){r.attachEventOnce("dataReceived",{triggeredBySearch:n.triggeredBySearch},this.onDataReceived,this)}};n.onSearch=function t(i){const n=this._aMDCTables.filter(e=>i.getSource().getId()===e.getFilter()&&e.getVisible()&&!e.getParent()?.getProperty("bindingSuspended"));const r=this._aMDCCharts.filter(e=>i.getSource().getId()===e.getFilter()&&e.getVisible());if(n.length>0||r.length>0){this._isSearchPending=true}n.forEach(e=>{this.registerTable(e,true)});r.forEach(async t=>{try{if(t.innerChartBoundPromise){await t.innerChartBoundPromise}this.registerChart(t,true)}catch(t){e.error("Cannot find a inner bound chart",t)}})};n.register=function e(t,i){const n=i.binding||i.table?.getRowBinding()||(i.chart?.getControlDelegate()).getInnerChart(i.chart).getBinding("data");const r=i.table||i.chart;if(!n){return}let a=this._aBindingRegistrations.find(e=>e.binding===n);if(a){if(r){a.boundControl=r}if(a.requestedCount>0){n.detachEvent("dataRequested",this.onDataRequested,this);n.attachEventOnce("dataRequested",{triggeredBySearch:i.triggeredBySearch},this.onDataRequested,this)}return}if(r){a=this._aBindingRegistrations.find(e=>e.boundControl===r);if(a&&a.binding!==n){a.binding=n;a.requestedCount=0;a.receivedCount=0}}if(!a){a={binding:n,boundControl:r,requestedCount:0,receivedCount:0};this._aBindingRegistrations.push(a)}n.detachEvent("dataRequested",this.onDataRequested,this);n.attachEventOnce("dataRequested",{triggeredBySearch:i.triggeredBySearch},this.onDataRequested,this)};n.registerBinding=function e(t){this.register(null,{binding:t,triggeredBySearch:false})};n.registerTable=function e(t){let i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!this._aMDCTables.includes(t)){this._aMDCTables.push(t)}const n=t.getRowBinding();if(n){this.register(null,{table:t,triggeredBySearch:i})}if(!this._aOtherEventSources.includes(t)){t.attachEvent("bindingUpdated",{table:t,triggeredBySearch:i},this.register,this);this._aOtherEventSources.push(t)}};n.registerChart=function e(t){let i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!this._aMDCCharts.includes(t)){this._aMDCCharts.push(t)}const n=t.getControlDelegate().getInnerChart(t);const r=n?.getBinding("data");if(r){this.register(null,{chart:t,triggeredBySearch:i})}if(!this._aOtherEventSources.includes(t)){t.attachEvent("bindingUpdated",{chart:t,triggeredBySearch:i},this.register,this);this._aOtherEventSources.push(t)}};n.registerTableOrChart=async function i(n){if(!n.isA("sap.ui.mdc.Table")&&!n.isA("sap.ui.mdc.Chart")){return}try{await n.initialized();if(n.isA("sap.ui.mdc.Table")){this.registerTable(n);if(n.getAutoBindOnInit()&&n.getDomRef()){await t.whenBound(n)}}else{this.registerChart(n)}}catch(t){e.error("PageReady - Cannot register a table or a chart",t)}};n.registerFilterBar=function e(t){t.attachEvent("search",this.onSearch,this);this._aOtherEventSources.push(t)};return i}();return i},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/recommendations/Telemetry", [],function(){"use strict";let e=function(){function e(){this.resetData()}var t=e.prototype;t.updateData=function e(t,n){this.telemetryData[t]=n};t.increaseCount=function e(t){return++this.telemetryData[t]};t.updateResponseTimeInfo=function e(t){const n=this.increaseCount("numberOfTimesRecommendationsFetched");if(t>this.telemetryData.maxTimeTakenToReceiveRecommendations){this.updateData("maxTimeTakenToReceiveRecommendations",t)}if(this.telemetryData.minTimeTakenToReceiveRecommendations===0||t<this.telemetryData.minTimeTakenToReceiveRecommendations){this.updateData("minTimeTakenToReceiveRecommendations",t)}const a=this.telemetryData.totalTimeTaken+t;const o=a/n;this.updateData("averageTimeTakenToReceiveRecommendations",o);this.updateData("totalTimeTaken",a)};t.resetData=function e(){this.telemetryData={numberOfTimesRecommendationsFetched:0,maxTimeTakenToReceiveRecommendations:0,minTimeTakenToReceiveRecommendations:0,averageTimeTakenToReceiveRecommendations:0,numberOfTimesNoPlaceholderIsShownOnUI:0,numberOfRecommendedFields:0,numberOfTimesTopRecommendationsSelected:0,numberOfTimesNonTopRecommendationsSelected:0,numberOfTimesNonRecommendedValueWasSelected:0,numberOfFieldsAcceptedThroughAcceptButton:0,numberOfFieldsIgnoredThroughIgnoreButton:0,numberOfTimesEmptyRecommendations:0,numberofTimesFormatterCalled:0,totalNumberOfRecommendationsReceived:0,numberOfTimesFormatterNotCalled:0,totalTimeTaken:0}};t.storeData=function e(t){if(Object.keys(this.telemetryData).length){this.telemetryData["numberOfTimesFormatterNotCalled"]=this.telemetryData["totalNumberOfRecommendationsReceived"]-this.telemetryData["numberofTimesFormatterCalled"]}t.getController().telemetry.storeAction({type:"FE.Recommendations",parameters:this.telemetryData})};t.getData=function e(){return this.telemetryData};t.updateDataFromRecommendationResponse=function e(t){for(let e=0;e<t.length;e++){const n=t[e];const a=n.AIRecommendedFieldPath;if(!(n.AIRecommendedFieldValue&&n.AIRecommendedFieldDescription)){this.increaseCount("numberOfTimesNoPlaceholderIsShownOnUI")}if(a){if(n._AIAltvRecmddFldVals?.length){this.increaseCount("totalNumberOfRecommendationsReceived")}}}};t.updateTelemetryDataBasedOnUserSelection=function e(t,n,a){const o=(t?.getModel("internal")).getProperty("/recommendationsData");if(o?.[n]){const e=o[n];const t=e.additionalValues?.findIndex(e=>e.value===a);if(a==e.value){this.increaseCount("numberOfTimesTopRecommendationsSelected")}else if(t!==-1){this.increaseCount("numberOfTimesNonTopRecommendationsSelected")}else{this.increaseCount("numberOfTimesNonRecommendedValueWasSelected")}}};return e}();return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/routing/ContextPathHelper", ["sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/SemanticKeyHelper","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(t,e,n,s,i){"use strict";var r={};var a=t.getInvolvedDataModelObjects;function o(t,e){const n=/^[/]?(\w+)\([^/]+\)$/.exec(t);if(!n){return false}const s=`/${n[1]}`;return e.getObject(`${s}@com.sap.vocabularies.Common.v1.DraftRoot`)?true:false}r.isPathOnDraftRoot=o;function l(t,n,r){const a=function(t){if(t.indexOf("'")===0&&t.lastIndexOf("'")===t.length-1){t=decodeURIComponent(t.substring(1,t.length-1))}return t};const o=t.substring(t.indexOf("(")+1,t.length-1).split(",");let l=n;let c=o;if(n.includes("IsActiveEntity")){l=n.filter(t=>!t.includes("IsActiveEntity"));c=o.filter(t=>!t.startsWith("IsActiveEntity"))}if(l.length!=c.length){return null}const u=e.isFilteringCaseSensitive(r);let f;if(l.length===1){if(c[0].indexOf("=")>0){const t=c[0].split("=");c[0]=t[1]}const t=a(c[0]);f=[new s({path:l[0],operator:i.EQ,value1:t,caseSensitive:u})]}else{const t={};c.forEach(function(e){const n=e.split("="),s=a(n[1]);t[n[0]]=s});let e=false;f=l.map(function(n){const r=n,a=t[r];if(a!==undefined){return new s({path:r,operator:i.EQ,value1:a,caseSensitive:u})}else{e=true;return new s({path:"XX"})}});if(e){return null}}const g=new s({filters:[new s("IsActiveEntity","EQ",false),new s("SiblingEntity/IsActiveEntity","EQ",null)],and:false});f.push(g);return new s(f,true)}r.createFilterFromPath=l;async function c(t,e,n){const s=n.getMetaModel();if(!t||t.length===0){return null}const i=l(e,t,s);if(i===null){return null}const r=e.startsWith("/")?e:`/${e}`;const o=s.getMetaContext(r);const c=a(o);const u=c.targetEntityType.keys.map(t=>t.name);const f=n.bindList(o.getPath(),undefined,undefined,i,{$select:u.join(","),$$groupId:"$auto.Heroes"});const g=await f.requestContexts(0,2);if(g.length){return g[0]}else{return null}}async function u(t){const e=t.getModel();const n=e.getMetaModel();const s=a(n.getMetaContext(t.getPath()));const i=s.targetEntityType.keys.map(t=>t.name);return c(i,t.getPath(),e)}r.getDraftOrActiveContext=u;async function f(t,e,s,i){const r=e.getMetaModel();let a=i.getHashChanger().getHash().split("?")[0];if(a?.lastIndexOf("/")===a?.length-1){a=a.substring(0,a.length-1)}if(!o(a,r)){return t}let l=a?.substring(0,a.indexOf("("));if(l[0]==="/"){l=l.substring(1)}const u=n.getSemanticKeys(r,l)?.map(t=>t.$PropertyPath);if(u===undefined){return t}const f=s.getLastSemanticMapping();if(f?.semanticPath===t){return f.technicalPath}const g=await c(u,a,e);const h=g?.getPath();if(h&&h!==t){s.setLastSemanticMapping({technicalPath:h,semanticPath:t});return h}return t}r.resolvePath=f;return r},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/routing/NavigationReason", [],function(){"use strict";var t=function(t){t["RowPress"]="RowPress";t["AppStateChanged"]="AppStateChanged";t["RestoreHistory"]="RestoreHistory";t["EditFlowAction"]="EditFlowAction";return t}(t||{});return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/routing/RouterProxy", ["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/helpers/Synchronization","sap/ui/base/Object","sap/ui/core/Element","sap/ui/core/Lib"],function(t,e,s,i,n,o){"use strict";var a,r;var h=e.defineUI5Class;function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,u(t,e)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}const l={EQUAL:0,COMPATIBLE:1,ANCESTOR:2,DIFFERENT:3};const f={LAYOUTPARAM:"layout",IAPPSTATEPARAM:"sap-iapp-state"};function d(t){return{_guardHash:t.replace(/\?[^?]*$/,""),check:function(t){return t.indexOf(this._guardHash)===0}}}function p(t){return t.replace(new RegExp(`[&?]*${f.IAPPSTATEPARAM}=[^&]*`),"")}let g=(a=h("sap.fe.core.RouterProxy"),a(r=function(e){function i(){var t;for(var s=arguments.length,i=new Array(s),n=0;n<s;n++){i[n]=arguments[n]}t=e.call(this,...i)||this;t.bIsRebuildHistoryRunning=false;t.bIsComputingTitleHierachy=false;t.bIsGuardCrossAllowed=false;t.sIAppStateKey=null;t._bActivateRouteMatchSynchro=false;t._bApplyRestore=false;t._pathMappings=[];t.restoreHistoryTriggered=false;return t}c(i,e);var a=i.prototype;a.init=function e(s,i){s.getService("shellServices").then(()=>this.asyncInit(s,i)).catch(function(e){t.error("Cannot retrieve the shell services",e)});this._fnHashGuard=this.hashGuard.bind(this);window.addEventListener("popstate",this._fnHashGuard);this._bDisableOnHashChange=false;this._bIgnoreRestore=false;this._bForceFocus=true};a.asyncInit=function t(e,s){this._oShellServices=e.getShellServices();this.initRaw(e.getRouter());this.waitForRouteMatchBeforeNavigation();history.replaceState(Object.assign({feLevel:0},history.state),"",window.location);this.fclEnabled=s;this._fnBlockingNavFilter=this._blockingNavigationFilter.bind(this);this._oShellServices.registerNavigationFilter(this._fnBlockingNavFilter)};a.destroy=function t(){if(this._oShellServices){this._oShellServices.unregisterNavigationFilter(this._fnBlockingNavFilter)}window.removeEventListener("popstate",this._fnHashGuard)};a.setAppStateInHash=function t(e,s){let i;if(e.includes(f.IAPPSTATEPARAM)){i=e.replace(new RegExp(`${f.IAPPSTATEPARAM}=[^&]*`),`${f.IAPPSTATEPARAM}=${s}`)}else{if(!e.includes("?")){i=`${e}?`}else{i=`${e}&`}i+=`${f.IAPPSTATEPARAM}=${s}`}return i};a.findAppStateInHash=function t(e){const s=e.match(new RegExp(`\\?.*${f.IAPPSTATEPARAM}=([^&]*)`));return s&&s.length>1?s[1]:null};a.getDecodedWindowHash=function t(){return decodeURI(window.location.hash)};a.initRaw=function t(e){this._oRouter=e;this._oManagedHistory=[];this._oNavigationGuard=null;const s=this.getHash();this._oManagedHistory.push(this._extractStateFromHash(s));this.appName=this.getAppNameFromHash(this.getDecodedWindowHash());this.sIAppStateKey=this.findAppStateInHash(s)};a.getFullHash=function t(){const e=this._oShellServices.splitHash(this.getDecodedWindowHash());if("appSpecificRoute"in e){return e.appSpecificRoute?.replace(/^&\//,"")??""}return""};a.getHash=function t(){return this._oRouter.getHashChanger().getHash()??""};a.getAppNameFromHash=function t(e){const s=this._oShellServices?.splitHash(e);return s?.shellPart??""};a.isFocusForced=function t(){return this._bForceFocus};a.setFocusForced=function t(e){this._bForceFocus=e};a.removeIAppStateKey=function t(){this.sIAppStateKey=null};a.navToHash=async function t(e,s,i,n,o){if(o!==false){await this._oShellServices.setBackNavigation()}if(this._oRouteMatchSynchronization){return this._oRouteMatchSynchronization.waitFor().then(async()=>{this._oRouteMatchSynchronization=undefined;return this._internalNavToHash(e,s,i,n)})}else{if(this._bActivateRouteMatchSynchro){this.waitForRouteMatchBeforeNavigation()}return this._internalNavToHash(e,s,i,n)}};a._internalNavToHash=async function t(e,s,i,n){if(this.fclEnabled&&this.sIAppStateKey&&!this.findAppStateInHash(e)){e=this.setAppStateInHash(e,this.sIAppStateKey)}if(!this.checkHashWithGuard(e)){if(!this.oResourceBundle){this.oResourceBundle=o.getResourceBundleFor("sap.fe.core")}if(!confirm(this.oResourceBundle.getText("C_ROUTER_PROXY_SAPFE_EXIT_NOTSAVED_MESSAGE"))){return Promise.resolve(false)}this.bIsGuardCrossAllowed=true}const a=this._extractStateFromHash(e);if(!this._bForceFocus){const t=this._extractEntitySetsFromHash(this.getHash());this._bForceFocus=n||t.length<a.keys.length&&t.every(function(t,e){return t===a.keys[e]})}const r=this._pushNewState(a,false,s,i);this.storeFocusInfoForCurrentHash();return this._rebuildBrowserHistory(r,false)};a.restoreHistory=async function t(){if(this._bApplyRestore){this._bApplyRestore=false;let t=this.getHash();t=t.replace(/(\?|&)restoreHistory=true/,"");const e=this._extractStateFromHash(t);const s=this._pushNewState(e,true,false,true);this.restoreHistoryTriggered=true;return this._rebuildBrowserHistory(s,true)}else{return Promise.resolve()}};a.checkRestoreHistoryWasTriggered=function t(){return this.restoreHistoryTriggered};a.resetRestoreHistoryFlag=function t(){this.restoreHistoryTriggered=false};a.navBack=async function t(){const e=this.getHash();let s;for(let t=this._oManagedHistory.length-1;t>0;t--){if(this._oManagedHistory[t].hash===e){s=this._oManagedHistory[t-1].hash;break}}if(s){return this.navToHash(s)}else{window.history.back();return Promise.resolve()}};a.navTo=async function t(e,s){const i=this._oRouter.getURL(e,s);return this.navToHash(i,false,s?.noPreservationCache,false,!s?.bIsStickyMode)};a.exitFromApp=function t(){return this._oShellServices.backToPreviousApp()};a.isCurrentStateImpactedBy=function t(e){if(e[0]==="/"){e=e.substring(1)}const s=d(e);return s.check(this.getHash())};a.isNavigationFinalized=function t(){return!this.bIsRebuildHistoryRunning};a.setNavigationGuard=function t(e){this._oNavigationGuard=d(e);this.bIsGuardCrossAllowed=false};a.discardNavigationGuard=function t(){this._oNavigationGuard=null};a.hasNavigationGuard=function t(){return this._oNavigationGuard!==null};a.checkHashWithGuard=function t(e){return this._oNavigationGuard===null||this._oNavigationGuard.check(e)};a.isGuardCrossAllowedByUser=function t(){return this.bIsGuardCrossAllowed};a.activateRouteMatchSynchronization=function t(){this._bActivateRouteMatchSynchro=true};a.resolveRouteMatch=function t(){if(this._oRouteMatchSynchronization){this._oRouteMatchSynchronization.resolve()}};a.waitForRouteMatchBeforeNavigation=function t(){this._oRouteMatchSynchronization=new s;this._bActivateRouteMatchSynchro=false};a._extractEntitySetsFromHash=function t(e){if(e===undefined){e=""}const s=e.split("?")[0];const i=s.split("/");const n=[];i.forEach(t=>{if(t.length){n.push(t.split("(")[0])}});return n};a._extractStateFromHash=function t(e){if(e===undefined){e=""}const s={keys:this._extractEntitySetsFromHash(e),hash:e,screenMode:0};const i=e.match(new RegExp(`\\?.*${f.LAYOUTPARAM}=([^&]*)`));s.sLayout=i&&i.length>1?i[1]:undefined;if(s.sLayout==="MidColumnFullScreen"){s.screenMode=1}else if(s.sLayout==="EndColumnFullScreen"){s.screenMode=2}else{s.screenMode=0}return s};a._pushNewState=function t(e,s,i,n){const o=this.getHash();let a=this._oManagedHistory.length-1;let r=s?1:0;if(!s){while(a>=0&&this._oManagedHistory[a].hash!==o){this._oManagedHistory.pop();a--}if(this._oManagedHistory.length===0){this._oManagedHistory.push(this._extractStateFromHash(o));history.replaceState(Object.assign({feLevel:0},history.state),"")}}if(i&&!n){this._oManagedHistory[this._oManagedHistory.length-1].preserved=true}let h;while(this._oManagedHistory.length>0){const t=this._oManagedHistory[this._oManagedHistory.length-1];if((n||!t.preserved)&&this._compareCacheStates(t,e)!==l.ANCESTOR){h=this._oManagedHistory.pop();r++}else if(t.preserved&&p(t.hash)===p(e.hash)){h=this._oManagedHistory.pop();r++;e.preserved=true;break}else{break}}this.sIAppStateKey=this.findAppStateInHash(e.hash);if(!this.fclEnabled&&h){const t=this.findAppStateInHash(h.hash);const s=this._compareCacheStates(h,e);if(!this.sIAppStateKey&&t&&(s===l.EQUAL||s===l.COMPATIBLE)){e.hash=this.setAppStateInHash(e.hash,t)}}const c=h&&e.hash===h.hash;if(this._oManagedHistory.length===0||this._oManagedHistory[this._oManagedHistory.length-1].hash!==e.hash){this._oManagedHistory.push(e);if(h&&p(h.hash)===p(e.hash)){e.focusControlId=h.focusControlId;e.secondaryFocusControlId=h.secondaryFocusControlId;e.focusInfo=h.focusInfo;e.secondaryFocusInfo=h.secondaryFocusInfo}}if(r===0){return{type:"append"}}else if(r===1){return c?{type:"none"}:{type:"replace"}}else{return c?{type:"back",steps:r-1}:{type:"back-replace",steps:r-1}}};a._blockingNavigationFilter=function t(){return this._bDisableOnHashChange?"Custom":"Continue"};a._disableEventOnHashChange=function t(){this._bDisableOnHashChange=true;this._oRouter.stop()};a._enableEventOnHashChange=function t(e){this._bDisableOnHashChange=false;this._oRouter.initialize(e)};a._rebuildBrowserHistory=async function t(e,s){const i=this;return new Promise(t=>{this.bIsRebuildHistoryRunning=true;const n=this._oManagedHistory[this._oManagedHistory.length-1],o=this._oManagedHistory.length-1;function a(){if(!s){i._enableEventOnHashChange(true)}i._oRouter.getHashChanger().replaceHash(n.hash);history.replaceState(Object.assign({feLevel:o},history.state),"");if(s){setTimeout(function(){i._enableEventOnHashChange(true)},0)}i.bIsRebuildHistoryRunning=false;t(true)}function r(){window.removeEventListener("popstate",r);setTimeout(function(){a()},0)}function h(){window.removeEventListener("popstate",h);i.bIsRebuildHistoryRunning=false;t(true)}i._bIgnoreRestore=true;switch(e.type){case"replace":const s=history.state?.focusInfo;i._oRouter.getHashChanger().replaceHash(n.hash);history.replaceState(Object.assign({feLevel:o,focusInfo:s},history.state),"");i.bIsRebuildHistoryRunning=false;t(true);break;case"append":i._oRouter.getHashChanger().setHash(n.hash);history.replaceState(Object.assign({feLevel:o},history.state),"");i.bIsRebuildHistoryRunning=false;t(true);break;case"back":window.addEventListener("popstate",h);history.go(-e.steps);break;case"back-replace":this._disableEventOnHashChange();window.addEventListener("popstate",r);history.go(-e.steps);break;default:this.bIsRebuildHistoryRunning=false;t(false)}})};a.getLastHistoryEntry=function t(){return this._oManagedHistory[this._oManagedHistory.length-1]};a.setPathMapping=function t(e){this._pathMappings=e.filter(t=>t.oldPath!==t.newPath)};a.hashGuard=function t(){let e=this.getDecodedWindowHash();const s=this.getAppNameFromHash(e);if(s!=this.appName){return}if(e.includes("restoreHistory=true")){this._bApplyRestore=true}else if(!this.bIsRebuildHistoryRunning){const t=this._pathMappings.find(t=>e.includes(t.oldPath));if(t){e=e.replace(t.oldPath,t.newPath);history.replaceState(Object.assign({},history.state),"",encodeURI(e))}const s=e.split("&/");const i=s[1]?s[1]:"";if(this.checkHashWithGuard(i)){const t=this._extractStateFromHash(i);this._pushNewState(t,false,false,true)}}};a._compareCacheStates=function t(e,s){if(e.keys.length>s.keys.length){return l.DIFFERENT}let i=true;let n;for(n=0;i&&n<e.keys.length;n++){if(e.keys[n]!==s.keys[n]){i=false}}if(!i){return l.DIFFERENT}if(e.keys.length<s.keys.length||e.screenMode<s.screenMode){return l.ANCESTOR}if(e.screenMode>s.screenMode){return l.DIFFERENT}return e.sLayout===s.sLayout?l.EQUAL:l.COMPATIBLE};i.splitAppSpecificRoute=function t(e){const s=e?.split("&/")??[];if(!s[0]){s.shift()}return s};a.checkIfBackIsOutOfGuard=function t(){const e=this.getFullHash();const s=i.splitAppSpecificRoute(e);if(s.length>1){return false}const n=s[0]??"";let o;if(this._oNavigationGuard){for(let t=this._oManagedHistory.length-1;t>0;t--){if(this._oManagedHistory[t].hash===n){o=this._oManagedHistory[t-1].hash;break}}return!o||!this.checkHashWithGuard(o)}return false};a.checkIfBackExitsApp=function t(){const e=this.getFullHash();const s=i.splitAppSpecificRoute(e);if(s.length>1){return false}const n=s[0]??"";return this._oManagedHistory.length>0&&this._oManagedHistory[0].hash===n};a.checkIfBackHasSameContext=function t(){if(this._oManagedHistory.length<2){return false}const e=this._oManagedHistory[this._oManagedHistory.length-1];const s=this._oManagedHistory[this._oManagedHistory.length-2];return e.hash.split("?")[0]===s.hash.split("?")[0]};a.restoreFocusForCurrentHash=function t(){const e=p(this.getHash());const s=this._oManagedHistory.find(t=>p(t.hash)===e);let i=false;if(s?.focusControlId){let t=n.getElementById(s.focusControlId);let e=s.focusInfo;if((!t||!t.getFocusDomRef())&&s.secondaryFocusControlId){t=n.getElementById(s.secondaryFocusControlId);e=s.secondaryFocusInfo}if(t?.getParent()?.isA("sap.ui.mdc.Table")&&t.getBusy()){return false}t?.focus(e);i=t!==undefined}return i};a.storeFocusInfoForCurrentHash=function t(){const e=p(this.getHash());const s=this._oManagedHistory.find(t=>p(t.hash)===e);if(s){const t=n.getActiveElement();s.focusControlId=t?.getId();if(t){let e=t.getParent();while(e&&!e.isA("sap.ui.table.Table")&&!e.isA("sap.m.Table")){e=e.getParent()}s.secondaryFocusControlId=e?.getId();s.secondaryFocusInfo={preventScroll:true}}s.focusInfo=t?.getFocusInfo()}};a.findLayoutForHash=function t(e){if(!this.fclEnabled){return undefined}const s=e.split("?")[0];let i;for(let t=this._oManagedHistory.length-1;t>=0&&i===undefined;t--){if(this._oManagedHistory[t].hash.split("?")[0]===s){i=this._oManagedHistory[t]}}return i?.sLayout};return i}(i))||r);return g},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/viewState/IViewStateContributor", [],function(){"use strict";var e={};let n=function e(){};e=n;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controllerextensions/viewState/IViewStateContributorMixin", ["sap/fe/core/controllerextensions/viewState/IViewStateContributor","sap/ui/core/Component"],function(t,e){"use strict";var o={};function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)}function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}let i=function(t){function r(){return t.apply(this,arguments)||this}o=r;n(r,t);var i=r.prototype;i.getInterfaceName=function t(){return r.interfaceName};i.setupMixin=function t(o){function n(t){let o=e.getOwnerComponentFor(t);let n=t;while(!o&&n&&!n.isA("sap.ui.core.mvc.View")){n=n.getParent();if(n){o=e.getOwnerComponentFor(n)}}if(o?.isA("sap.fe.core.TemplateComponent")){return o}}function r(t){return n(t)?.getRootController()}function i(t){const e=r(t.getSource());if(e){e.viewState.registerStateContributor(t.getSource());t.getSource().detachEvent("modelContextChange",i)}}const c=o.prototype.init;o.prototype.init=function(){c?.call(this);const t=r(this);if(!t){this.attachEvent("modelContextChange",i)}else{t.viewState.registerStateContributor(this)}};const s=o.prototype.destroy;o.prototype.destroy=function(){r(this)?.viewState?.deregisterStateContributor(this);s?.call(this)}};return r}(t);i.interfaceName="sap.fe.core.controllerextensions.viewState.IViewStateContributor";o=i;return o},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controls/Any", ["sap/ui/core/Element"],function(t){"use strict";const e=t.extend("sap.fe.core.controls.Any",{metadata:{properties:{any:"any",bindBackProperty:"string",anyText:"string",anyBoolean:"boolean"}},updateProperty:function(t){const e=this.getBindingInfo(t).binding.getExternalValue();if(t==="any"){this.setAny(e);const t=this.getBindingContext();if(this.getBindBackProperty()&&t){const n=this.getModel().getLocalAnnotationModel();const i=t.getPath(this.getBindBackProperty());if(n.getProperty(i)!==e){n.setProperty(i,e)}}}else{this.setAnyText(e)}}});return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controls/AnyElement", ["sap/ui/core/Element"],function(e){"use strict";const t=e.extend("sap.fe.core.controls.AnyElement",{metadata:{properties:{anyText:"string"}},updateProperty:function(e){if(e==="anyText"){this.setAnyText(this.getBindingInfo(e).binding.getExternalValue())}}});return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controls/CommandExecution", ["sap/base/Log","sap/fe/base/ClassSupport","sap/ui/core/CommandExecution","sap/ui/core/Component","sap/ui/core/Element","sap/ui/core/Shortcut"],function(t,e,o,r,n,i){"use strict";var s,a;var c={};var p=e.defineUI5Class;function u(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,f(t,e)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}let h=(s=p("sap.fe.core.controls.CommandExecution"),s(a=function(e){function o(t,o){return e.call(this,t,o)||this}c=o;u(o,e);var s=o.prototype;s.setParent=function t(o){e.prototype.setParent.call(this,o);const r=o.data("sap.ui.core.Shortcut");if(Array.isArray(r)&&r.length>0){const t=o.data("sap.ui.core.Shortcut")[r.length-1],e=t.shortcutSpec;if(e){for(const t in e){if(e[t]&&t!=="key"){return}}}return}};s.destroy=function t(e){const o=this.getParent();if(o){const t=this._getCommandInfo();if(t){i.unregister(this.getParent(),t.shortcut)}this._cleanupContext(o)}n.prototype.destroy.apply(this,[e])};s.setVisible=function o(n){let i,s=this.getParent(),a;if(!s){e.prototype.setVisible.call(this,n)}while(!a&&s){a=r.getOwnerComponentFor(s);s=s.getParent()}if(a){i=a.getCommand(this.getCommand());if(i){e.prototype.setVisible.call(this,n)}else{t.info("There is no shortcut definition registered in the manifest for the command : "+this.getCommand())}}return this};return o}(o))||a);c=h;return c},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controls/ComponentLoader", ["sap/fe/base/ClassSupport","sap/ui/core/Component","sap/ui/core/Control"],function(e,t,r){"use strict";var n,i,o,a,u,s,l,p,c,f,g;var d={};var b=e.property;var m=e.defineUI5Class;var h=e.aggregation;function y(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,w(e,t)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function z(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function C(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let O=(n=m("sap.fe.core.controls.ComponentLoader"),i=b({type:"string",required:true}),o=b({type:"string"}),a=b({type:"object"}),u=h({type:"sap.ui.core.ComponentContainer",multiple:false,isDefault:true}),n(s=(l=function(e){function r(){var t;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}t=e.call(this,...n)||this;y(t,"name",p,t);y(t,"prefix",c,t);y(t,"settings",f,t);y(t,"component",g,t);return t}d=r;v(r,e);var n=r.prototype;n.init=function e(){this.targets=this.getTargets()};n.getTargets=function e(){let r=t.getOwnerComponentFor(this);let n;while(r&&!n){if(r.isA("sap.ui.core.UIComponent")){n=r.getTargets()}r=t.getOwnerComponentFor(r)}if(!n){throw new Error("Could not determine the instance of sap.ui.core.routing.Targets")}return n};n.addTarget=function e(){const t=this.targets.getTarget(this.getId(),true);if(!t){const e={type:"Component",name:this.name,id:this.getId(),controlId:this.getId(),controlAggregation:"component"};if(this.settings){e.options={settings:this.settings}}this.targets.addTarget(this.getId(),e)}};n.applySettings=function t(r,n){e.prototype.applySettings.call(this,r,n);this.addTarget();return this};n.onBeforeRendering=function e(){this.targets.display({name:this.getId(),prefix:this.prefix,routeRelevant:true})};r.render=function e(t,r){if(r.component){r.component.getRenderer().render(t,r.component)}};return r}(r),p=z(l.prototype,"name",[i],{configurable:true,enumerable:true,writable:true,initializer:null}),c=z(l.prototype,"prefix",[o],{configurable:true,enumerable:true,writable:true,initializer:null}),f=z(l.prototype,"settings",[a],{configurable:true,enumerable:true,writable:true,initializer:null}),g=z(l.prototype,"component",[u],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),l))||s);d=O;return d},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controls/DataLossOrDraftDiscard/DraftDataLossDialog", ["sap/fe/base/ClassSupport","sap/fe/core/helpers/ResourceModelHelper","sap/fe/core/helpers/StableIdHelper","sap/m/Button","sap/m/CustomListItem","sap/m/Dialog","sap/m/Label","sap/m/List","sap/m/Text","sap/m/VBox","sap/ui/base/ManagedObject","sap/ui/core/CustomData","sap/ui/core/library","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs","sap/fe/base/jsx-runtime/Fragment"],function(e,t,s,a,i,o,r,n,c,l,u,d,p,h,D,f){"use strict";var T,g,L,_,S,A,m;var R={};var O=p.ValueState;var b=s.generate;var v=t.getResourceModel;var y=e.defineUI5Class;var x=e.defineReference;function M(e,t,s,a){s&&Object.defineProperty(e,t,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(a):void 0})}function E(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,F(e,t)}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function C(e,t,s,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function w(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let B=(T=y("sap.fe.core.controls.DataLossOrDraftDiscard.DraftDataLossDialog"),g=x(),L=x(),T(_=(S=function(e){function t(){var t;for(var s=arguments.length,a=new Array(s),i=0;i<s;i++){a[i]=arguments[i]}t=e.call(this,...a)||this;M(t,"dataLossDialog",A,t);M(t,"optionsList",m,t);t.shallForceDraftSaveOrDiscard=false;return t}R=t;E(t,e);var s=t.prototype;s.open=async function e(t){this.view=t.getView();this.shallForceDraftSaveOrDiscard=t.editFlow.shallForceDraftSaveOrDiscard();this.dataLossResourceModel=v(this.view);this.createContent();const s=()=>this.handleDataLossOk();this.optionsList.current?.addEventDelegate({onkeyup:function(e){if(e.key==="Enter"){s()}}});this.view.addDependent(this.dataLossDialog.current);this.dataLossDialog.current?.open();this.selectAndFocusFirstEntry();return new Promise(e=>{this.promiseResolve=e})};s.close=function e(){this.dataLossDialog.current?.close();this.dataLossDialog.current?.destroy()};s.handleDataLossOk=function e(){this.promiseResolve(this.getSelectedKey())};s.handleDataLossCancel=function e(){this.promiseResolve("cancel")};s.selectAndFocusFirstEntry=function e(){const t=this.optionsList.current?.getItems()[0];this.optionsList.current?.setSelectedItem(t);t?.focus()};s.getSelectedKey=function e(){const t=this.optionsList.current;return t.getSelectedItem().data("itemKey")};s.getConfirmButton=function e(){return h(a,{text:this.dataLossResourceModel.getText("C_COMMON_DIALOG_OK"),type:"Emphasized",press:()=>this.handleDataLossOk()})};s.getCancelButton=function e(){return h(a,{text:this.dataLossResourceModel.getText("C_COMMON_DIALOG_CANCEL"),press:()=>this.handleDataLossCancel()})};s.getItems=function e(t){const s=t?this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_SAVE_DRAFT_RBL"):this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_CREATE_ENTITY_RBL");const a=t?this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_SAVE_DRAFT_TOL"):this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_CREATE_ENTITY_TOL");const o=[];o.push(h(i,{customData:[new d({key:"itemKey",value:"draftDataLossOptionSave"})],children:D(l,{class:"sapUiTinyMargin",children:[h(r,{text:s,design:"Bold"}),h(c,{text:a})]})}));if(t||!this.shallForceDraftSaveOrDiscard){o.push(h(i,{customData:[new d({key:"itemKey",value:"draftDataLossOptionKeep"})],children:D(l,{class:"sapUiTinyMargin",children:[h(r,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_KEEP_DRAFT_RBL"),design:"Bold"}),h(c,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_KEEP_DRAFT_TOL")})]})}))}o.push(h(i,{customData:[new d({key:"itemKey",value:"draftDataLossOptionDiscard"})],children:D(l,{class:"sapUiTinyMargin",children:[h(r,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_DISCARD_DRAFT_RBL"),design:"Bold"}),h(c,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_DISCARD_DRAFT_TOL")})]})}));return o};s.createContent=function e(){const t=this.view.getBindingContext()?.getObject().HasActiveEntity===true;const s=t?this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_POPUP_MESSAGE_SAVE"):this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_POPUP_MESSAGE_CREATE");return h(o,{id:b([this.getId(),"draftDataLossDialog"]),title:this.dataLossResourceModel.getText("WARNING"),state:O.Warning,type:"Message",contentWidth:"22rem",ref:this.dataLossDialog,children:{content:D(f,{children:[h(c,{text:s,class:"sapUiTinyMarginBegin sapUiTinyMarginTopBottom"}),h(n,{mode:"SingleSelectLeft",showSeparators:"None",includeItemInSelection:"true",backgroundDesign:"Transparent",class:"sapUiNoContentPadding",ref:this.optionsList,items:this.getItems(t)})]}),buttons:D(f,{children:["confirmButton = ",this.getConfirmButton(),"cancelButton = ",this.getCancelButton()]})}})};return t}(u),A=C(S.prototype,"dataLossDialog",[g],{configurable:true,enumerable:true,writable:true,initializer:null}),m=C(S.prototype,"optionsList",[L],{configurable:true,enumerable:true,writable:true,initializer:null}),S))||_);R=B;return R},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controls/FormElementWrapper", ["sap/fe/base/ClassSupport","sap/ui/core/Control"],function(e,t){"use strict";var r,i,n,a,o,l,s,u,c,f,d,p,b;var y=e.property;var m=e.implementInterface;var g=e.defineUI5Class;var v=e.association;var h=e.aggregation;function A(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function B(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_(e,t)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function w(e,t,r,i,n){var a={};return Object.keys(i).forEach(function(e){a[e]=i[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}function z(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let I=(r=g("sap.fe.core.controls.FormElementWrapper"),i=m("sap.ui.core.IFormContent"),n=y({type:"sap.ui.core.CSSSize",defaultValue:null}),a=y({type:"boolean",defaultValue:false}),o=v({type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}),l=h({type:"sap.ui.core.Control",multiple:false,isDefault:true}),r(s=(u=function(e){function t(t,r){var i;i=e.call(this,t,r)||this;A(i,"__implements__sap_ui_core_IFormContent",c,i);A(i,"width",f,i);A(i,"formDoNotAdjustWidth",d,i);A(i,"ariaLabelledBy",p,i);A(i,"content",b,i);return i}B(t,e);var r=t.prototype;r.getAccessibilityInfo=function e(){const t=this.content;return t&&t.getAccessibilityInfo?t.getAccessibilityInfo():{}};r.onBeforeRendering=function e(){const t=e=>{if(e.isA("sap.m.VBox")||e.isA("sap.m.HBox")){const r=e.getItems().filter(e=>!e.isA("sap.m.Avatar"));for(const e of r){t(e)}}else if(e.isA("sap.fe.macros.draftIndicator.DraftIndicator")){this.setAriaLabelledByForDraftIndicator(e)}else{this.setAriaLabelledBy(e)}};t(this.getContent())};r.setAriaLabelledBy=function e(t){if(t?.addAriaLabelledBy){const e=this.ariaLabelledBy;for(const r of e){const e=t.getAriaLabelledBy?.()||[];if(e.indexOf(r)===-1){t.addAriaLabelledBy(r)}}}};r.setAriaLabelledByForDraftIndicator=function e(t){if(t?.addAriaLabelledByForDraftIndicator){const e=this.ariaLabelledBy;for(const r of e){const e=t.getAriaLabelledBy();if(!e.includes(r)){t.addAriaLabelledByForDraftIndicator(r)}}}};t.render=function e(t,r){t.openStart("div",r);t.style("min-height","1rem");t.style("width",r.width);t.openEnd();t.openStart("div");t.style("display","flex");t.style("box-sizing","border-box");t.style("justify-content","space-between");t.style("align-items","center");t.style("flex-wrap","wrap");t.style("align-content","stretch");t.style("width","100%");t.openEnd();t.renderControl(r.content);t.close("div");t.close("div")};return t}(t),c=w(u.prototype,"__implements__sap_ui_core_IFormContent",[i],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),f=w(u.prototype,"width",[n],{configurable:true,enumerable:true,writable:true,initializer:null}),d=w(u.prototype,"formDoNotAdjustWidth",[a],{configurable:true,enumerable:true,writable:true,initializer:null}),p=w(u.prototype,"ariaLabelledBy",[o],{configurable:true,enumerable:true,writable:true,initializer:null}),b=w(u.prototype,"content",[l],{configurable:true,enumerable:true,writable:true,initializer:null}),u))||s);return I},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controls/MultiValueParameterDelegate", ["sap/ui/mdc/field/MultiValueFieldDelegate"],function(t){"use strict";const n=Object.assign({},t,{_transformConditions:function(t,n,s){const e=[];for(const o of t){const t={};t[n]=o.values[0];if(s){t[s]=o.values[1]}e.push(t)}return e},updateItems:function(t,n,s){const e=s.getBinding("items");const o=s.getBindingInfo("items");const i=o.path;const c=o.template;const a=c.getBindingInfo("key");const r=a&&a.parts[0].path;const f=c.getBindingInfo("description");const u=f&&f.parts[0].path;const d=e.getModel();d.setProperty(i,this._transformConditions(n,r,u))}});return n},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/controls/Recommendations/ConfirmRecommendationDialog", ["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/ResourceModelHelper","sap/m/Button","sap/m/CustomListItem","sap/m/Dialog","sap/m/FlexItemData","sap/m/HBox","sap/m/List","sap/m/Text","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/ui/base/ManagedObject","sap/ui/core/library","sap/ui/model/Sorter","sap/ui/model/json/JSONModel","../../formatters/ValueFormatter","../../helpers/StandardRecommendationHelper","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/Fragment","sap/fe/base/jsx-runtime/jsxs"],function(e,t,n,o,i,r,a,s,c,l,d,m,u,g,f,p,h,C,x,D,R,A){"use strict";var v,M,O,_,b;var E={};var T=x.standardRecommendationHelper;var I=f.ValueState;var y=o.getResourceModel;var N=t.defineUI5Class;var P=t.defineReference;function w(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function j(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,S(e,t)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function F(e,t,n,o,i){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer?(Object.defineProperty(e,t,r),null):r}function L(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let G=function(e){e["Accept"]="Accept_Recommendations";e["Ignore"]="Ignore_Recommendations";e["Continue"]="Continue_Editing";e["Skipped"]="Skipped";return e}({});E.RecommendationDialogDecision=G;let B=(v=N("sap.fe.core.controls.Recommendations.ConfirmRecommendationDialog"),M=P(),v(O=(_=function(t){function o(e){var n;n=t.call(this,e)||this;w(n,"confirmRecommendationDialog",b,n);n.view=e.view;n.confirmRecommendationDialogResourceModel=y(n.view);return n}E.ConfirmRecommendationDialog=o;j(o,t);var g=o.prototype;g.getOpenRecommendations=function e(){const t=this.getVisiblePageContextPaths();const n=this.getOpenRecommendationsForVisibleContextPaths(t);const o=[];if(n.length>0){n.forEach(e=>{const t=this.view.getBindingContext();const n=e.propertyPath?e.propertyPath:"";if(t?.getProperty(n)===null||t?.getProperty(n)===undefined||t?.getProperty(n)==""){o.push(e)}})}return o};g.getVisiblePageContextPaths=function e(){const t=[this.view.getBindingContext()?.getPath()];const n=this.view.getController();const o=n.getAppComponent().getRootViewController();const i=n.getAppComponent()._isFclEnabled();const r=i?o.getHelper().getCurrentUIState().isFullScreen:true;if(i&&!r){const e=o.getRightmostContext();t.push(e?.getPath())}return t};g.getOpenRecommendationsForVisibleContextPaths=function e(t){const n=[];if(t.length>0){const e=this.view.getModel().getLocalAnnotationModel();t.forEach(t=>{if(t!==undefined){const o=e.getObject(t);if(o){const e=o;this.fetchLocalAnnotationObject(e,n)}}})}return n};g.fetchLocalAnnotationObject=function e(t,o){if(t["recommendationContext"]){const e={};e["recommendationContext"]=t["recommendationContext"];for(const n in t){const i=t[n];if(i){if(i["recommendationContext"]){this.fetchLocalAnnotationObject(t[n],o)}else if(n.includes("@$ui5.fe.recommendations.placeholderValue")||n.includes("@$ui5.fe.recommendations.placeholderDescription")||n.includes("@$ui5.fe.recommendations.typeAheadValues")){e[n]=i}}}const i=n.getInvolvedDataModelObjectEntityKeys(e["recommendationContext"]);e["recommendationContext"].contextIdentifier=i["semanticKeys"]?i["semanticKeys"]:i["technicalKeys"];this.getOpenRecommendationsForContext(e,e["recommendationContext"],o)}};g.getOpenRecommendationsForContext=function e(t,n,o){let i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";for(const e in t){const r=t[e];if(r){const a=r.isA&&r.isA("sap.ui.model.odata.v4.Context");if(e.includes("@$ui5.fe.recommendations.placeholderValue")){const a=e.split("@$ui5.fe.recommendations.placeholderValue")[0];const s={context:n,propertyPath:i?`${i}/${a}`:a,value:r,contextIdentifier:n.contextIdentifier,contextIdentifierText:[]};const c=t[`${a}@$ui5.fe.recommendations.placeholderDescription`];if(c){s.text=c}o.push(s)}else if(typeof r==="object"&&!Array.isArray(r)&&!a){this.getOpenRecommendationsForContext(r,n,o,e)}}}};g.open=async function e(t){const n=this.getOpenRecommendations();if(n.length>0){T.addContextIdentifierText({recommendationData:n},this.view.getBindingContext()?.getPath());this.acceptAllParams={recommendationData:n}}else{const e=(this.view?.getController()).recommendations.checkIfRecommendationsExist();if(e){this.acceptAllParams=await(this.view?.getController()).recommendations.fetchAcceptAllParams()}else{return undefined}}const o=this.getAcceptAllModel();this.view.setModel(o,"_acceptDialogModel");if(!o.getData().items?.length){return G.Skipped}this.isSave=t;const i=this.getContent();i?.setEscapeHandler(this.onContinueEditing.bind(this));this.view.addDependent(i);i?.open();return new Promise((e,t)=>{this.promiseResolve=e;this.promiseReject=t})};g.close=function e(){this.confirmRecommendationDialog.current?.close();this.confirmRecommendationDialog.current?.destroy()};g.onAcceptAndSave=async function t(){try{const e=await(this.view?.getController()).recommendations.acceptRecommendations(this.acceptAllParams);if(!e){this.promiseReject("Accept Failed")}this.promiseResolve(G.Accept)}catch{e.error("Accept Recommendations Failed");this.promiseReject("Accept Failed")}finally{this.close()}};g.onIgnoreAndSave=function e(){(this.view?.getController()).recommendations.ignoreRecommendationForContexts();this.promiseResolve(G.Ignore);this.close()};g.onContinueEditing=function e(){this.promiseResolve(G.Continue);this.close()};g.getFieldName=function e(t){const o=n.getInvolvedDataModelObjectsForTargetPath(t,this.view?.getBindingContext()?.getModel()?.getMetaModel());return o?.targetObject?.annotations?.Common?.Label?.toString()||t.split("/")[t.split("/").length-1]};g.getText=function e(t,n){if(t.text||t.value){switch(n){case"Description":return t.text;case"DescriptionValue":return C.formatWithBrackets(t.text,t.value);case"ValueDescription":return C.formatWithBrackets(t.value,t.text);case"Value":return t.value}}return t.value||""};g.getButton=function e(t,n,o){return D(i,{text:t,type:n,width:"auto",press:o,children:{layoutData:D(R,{children:D(s,{minWidth:"100%"})})}})};g.getFooter=function e(){return D(m,{children:{content:A(R,{children:[D(u,{}),this.getButton(this._getDialogButtonText(this.isSave,G.Accept),"Emphasized",this.onAcceptAndSave.bind(this)),this.getButton(this._getDialogButtonText(this.isSave,G.Ignore),"Ghost",this.onIgnoreAndSave.bind(this)),this.getButton(this.confirmRecommendationDialogResourceModel.getText("C_RECOMMENDATION_DIALOG_CONTINUE_EDITING"),"Ghost",this.onContinueEditing.bind(this))]})}})};g._getDialogButtonText=function e(t,n){const o=n===G.Accept;if(t){if(!this.view.getBindingContext()?.getObject().HasActiveEntity){return o?this.confirmRecommendationDialogResourceModel.getText("C_RECOMMENDATION_DIALOG_ACCEPT_AND_CREATE"):this.confirmRecommendationDialogResourceModel.getText("C_RECOMMENDATION_DIALOG_IGNORE_AND_CREATE")}return o?this.confirmRecommendationDialogResourceModel.getText("C_RECOMMENDATION_DIALOG_ACCEPT_AND_SAVE"):this.confirmRecommendationDialogResourceModel.getText("C_RECOMMENDATION_DIALOG_IGNORE_AND_SAVE")}else{return o?this.confirmRecommendationDialogResourceModel.getText("C_RECOMMENDATION_DIALOG_ACCEPT"):this.confirmRecommendationDialogResourceModel.getText("C_RECOMMENDATION_DIALOG_IGNORE")}};g.getAcceptAllModel=function e(){const t=new h;const n=[];for(const e of this.acceptAllParams?.recommendationData||[]){const t=T.getEntityName(e.context)||"";const o=e.contextIdentifierText&&e.contextIdentifierText.length>0?`${t} (${e.contextIdentifierText})`:t;if(e.value||e.text){const t=e.context?.getPath()+"/"+e.propertyPath;const i=T.getDisplayModeForTargetPath(t,this.view?.getBindingContext()?.getModel()?.getMetaModel());const r={fieldName:this.getFieldName(t).valueOf(),fieldValue:this.getText(e,i),identifierTexts:o};n.push(r)}}t.setData({items:n});return t};g.getGroup=function e(t){return t.getProperty("identifierTexts")};g.getMessage=function e(){const t=this.view.getModel("_acceptDialogModel")?.getData()?.items;const n=t.length>1?this.confirmRecommendationDialogResourceModel.getText("C_RECOMMENDATION_DIALOG_TEXT",[t.length]):this.confirmRecommendationDialogResourceModel.getText("C_RECOMMENDATION_DIALOG_TEXT_SINGULAR");return D(d,{text:n})};g.getDialogContent=function e(){return D(l,{items:{model:"_acceptDialogModel",path:"/items",sorter:new p("identifierTexts",false,this.getGroup)},children:D(r,{children:D(c,{class:"sapUiSmallMarginBegin sapUiTinyMargin",children:D(d,{text:"{_acceptDialogModel>fieldName}: {_acceptDialogModel>fieldValue}"})})})})};g.getContent=function e(){return D(a,{title:this.confirmRecommendationDialogResourceModel.getText("C_RECOMMENDATION_DIALOG_TITLE"),state:I.Information,type:"Message",ref:this.confirmRecommendationDialog,resizable:"true",contentWidth:"35rem",children:{content:A(R,{children:[this.getMessage(),this.getDialogContent()]}),footer:D(R,{children:this.getFooter()})}})};return o}(g),b=F(_.prototype,"confirmRecommendationDialog",[M],{configurable:true,enumerable:true,writable:true,initializer:null}),_))||O);E.ConfirmRecommendationDialog=B;return E},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/ConverterContext", ["sap/fe/core/converters/ManifestWrapper","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper"],function(t,e,n,i,a,r){"use strict";var o=r.getTargetObjectPath;var s=r.getContextRelativeTargetObjectPath;var h=r.enhanceDataModelPath;var f=a.isServiceObject;var c=n.singletonPathVisitor;var u=e.getInvolvedDataModelObjectFromPath;var l=e.convertTypes;const g=function(t){return typeof t==="object"};const p=function(t,e){let n;let i;let a;let r;let o=[];const s=[];t.objectPath.forEach(t=>{if(f(t)){switch(t._type){case"NavigationProperty":o.push(t.name);s.push(t);r=t.targetType;if(a&&a.navigationPropertyBinding.hasOwnProperty(o.join("/"))){i=a.navigationPropertyBinding[o.join("/")];a=i;o=[]}else{i=undefined}break;case"EntitySet":if(n===undefined){n=t}i=t;a=i;r=i?.entityType;break;default:break}}});const h={startingEntitySet:n,targetEntityType:r,targetEntitySet:i,navigationProperties:s,contextLocation:undefined,targetObject:t.target,convertedTypes:e};h.contextLocation=h;return h};let y=function(){function e(e,n,i,a,r){this.convertedTypes=e;this.manifestSettings=n;this.diagnostics=i;this.mergeFn=a;this.targetDataModelPath=r;this.manifestWrapper=new t(this.manifestSettings,a);this.baseContextPath=o(this.targetDataModelPath)}var n=e.prototype;n._getEntityTypeFromFullyQualifiedName=function t(e){return this.convertedTypes.entityTypes.find(t=>{if(e.startsWith(t.fullyQualifiedName)){const n=e.replace(t.fullyQualifiedName,"");return n.startsWith("/")||n.startsWith("@")}return false})};n.getAnnotationEntityType=function t(e){if(e&&typeof e==="object"){const t=e.fullyQualifiedName;const n=this._getEntityTypeFromFullyQualifiedName(t);if(!n){throw new Error(`Cannot find Entity Type for ${e.fullyQualifiedName}`)}return n}else{return this.targetDataModelPath.targetEntityType}};n.getManifestControlConfiguration=function t(e){if(g(e)){return this.manifestWrapper.getControlConfiguration(e.fullyQualifiedName.replace(this.targetDataModelPath.targetEntityType.fullyQualifiedName,""))}const n=typeof this.manifestWrapper.getEntitySet()==="string"&&this.manifestWrapper.getEntitySet().length>0;const i=typeof this.manifestWrapper.getContextPath()==="string"&&this.manifestWrapper.getContextPath().length>0;const a=e.startsWith("/");if(!this.manifestWrapper.hasMultipleEntitySets()){return this.manifestWrapper.getControlConfiguration(e)}else if(!a&&(n&&this.baseContextPath!==`/${this.manifestWrapper.getEntitySet()}`||i&&this.baseContextPath!==this.manifestWrapper.getContextPath())){return this.manifestWrapper.getControlConfiguration(`${this.baseContextPath}/${e}`)}else if(Object.keys(this.manifestWrapper.getControlConfiguration(e)).length>0){return this.manifestWrapper.getControlConfiguration(e)}return this.manifestWrapper.getControlConfiguration(`${this.baseContextPath}/${e}`)};n.getAbsoluteAnnotationPath=function t(e){if(!e){return e}if(e[0]==="/"){return e}return`${this.baseContextPath}/${e}`};n.getEntitySet=function t(){return this.targetDataModelPath.targetEntitySet};n.getContextPath=function t(){return this.baseContextPath};n.getDataModelObjectPath=function t(){return this.targetDataModelPath};n.getEntityContainer=function t(){return this.convertedTypes.entityContainer};n.getEntityType=function t(){return this.targetDataModelPath.targetEntityType};n.getParameterEntityType=function t(){const e=this.targetDataModelPath.startingEntitySet.entityType;const n=!!e.annotations?.Common?.ResultContext;return n&&e};n.getEntityTypeAnnotation=function t(n){if(!n.includes("@")){throw new Error(`Not an annotation path: '${n}'`)}const i=n.startsWith("/");let a;if(i){a=n}else{const t=this.getContextPath().split("@",1)[0];a=t.endsWith("/")?t+n:`${t}/${n}`}const r=this.resolveAbsolutePath(a);const o=u({target:r.target,visitedObjects:r.objectPath},this.convertedTypes,i?undefined:this.targetDataModelPath.contextLocation,true);return{annotation:r.target,converterContext:new e(this.convertedTypes,this.manifestSettings,this.diagnostics,this.mergeFn,o)}};n.getTemplateType=function t(){return this.manifestWrapper.getTemplateType()};n.getConvertedTypes=function t(){return this.convertedTypes};n.getRelativeAnnotationPath=function t(e,n){return e.replace(n.fullyQualifiedName,"")};n.getEntitySetBasedAnnotationPath=function t(e){if(!e){return e}const n=this.targetDataModelPath.targetEntityType.fullyQualifiedName;if(this.targetDataModelPath.targetEntitySet||(this.baseContextPath.startsWith("/")&&this.baseContextPath.match(/\//g)||[]).length>1){let t=e.replace(n,"/");if(t.length>2&&t[0]==="/"&&t[1]==="/"){t=t.substring(1)}return this.baseContextPath+(t.startsWith("/")?t:`/${t}`)}else{return`/${e}`}};n.getManifestWrapper=function t(){return this.manifestWrapper};n.getDiagnostics=function t(){return this.diagnostics};n.resolveAbsolutePath=function t(e){return this.convertedTypes.resolvePath(e)};n.getConverterContextFor=function t(n){const i=this.convertedTypes.resolvePath(n);const a=p(i,this.convertedTypes);return new e(this.convertedTypes,this.manifestSettings,this.diagnostics,this.mergeFn,a)};n.getAnnotationsByTerm=function t(e,n){let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[this.getEntityType()];let a=[];i.forEach(t=>{if(t){const i=t?.annotations[e]||{};if(i){a=Object.keys(i).filter(t=>i[t].term===n).reduce((t,e)=>{t.push(i[e]);return t},a)}}});return a};n.getRelativeModelPathFunction=function t(){const e=this.targetDataModelPath;const n=this.convertedTypes;return function(t){const i=c(t,n,[]);const a=h(e,t);const r=s(a,true);if(r){return r}return i}};e.createConverterContextForMacro=function t(n,i,a,r,o){let s=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{};const h=i.isA("sap.ui.model.odata.v4.ODataMetaModel")?i:i.getModel();const f=l(h);let c=f.entitySets.find(t=>t.name===n);if(!c){c=f.singletons.find(t=>t.name===n)}if(!o||c!==o.startingEntitySet){o={startingEntitySet:c,navigationProperties:[],targetEntitySet:c,targetEntityType:c?.entityType||f.entityTypes.find(t=>t.name===n),targetObject:c,convertedTypes:f}}return new e(f,s,a,r,o)};n.fetchTextFromMetaModel=function t(e){return i.fetchTextFromMetaModel(e,this)};return e}();return y},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/ManifestSettings", [],function(){"use strict";var e={};let t=function(e){e["ListReport"]="ListReport";e["ObjectPage"]="ObjectPage";e["AnalyticalListPage"]="AnalyticalListPage";e["FreeStylePage"]="None";return e}({});e.TemplateType=t;let n=function(e){e["DataFieldForAction"]="ForAction";e["DataFieldForIntentBasedNavigation"]="ForNavigation";e["Default"]="Default";e["Primary"]="Primary";e["Secondary"]="Secondary";e["SwitchToActiveObject"]="SwitchToActiveObject";e["SwitchToDraftObject"]="SwitchToDraftObject";e["DraftActions"]="DraftActions";e["CollaborationAvatars"]="CollaborationAvatars";e["DefaultApply"]="DefaultApply";e["Menu"]="Menu";e["ShowFormDetails"]="ShowFormDetails";e["Copy"]="Copy";e["Cut"]="Cut";e["Standard"]="Standard";return e}({});e.ActionType=n;let o=function(e){e["Auto"]="Auto";e["None"]="None";e["Multi"]="Multi";e["Single"]="Single";e["ForceMulti"]="ForceMulti";e["ForceSingle"]="ForceSingle";return e}({});e.SelectionMode=o;let a=function(e){e["Page"]="Page";e["Control"]="Control";e["None"]="None";return e}({});e.VariantManagementType=a;let i=function(e){e["NewPage"]="NewPage";e["Sync"]="Sync";e["Async"]="Async";e["Deferred"]="Deferred";e["Inline"]="Inline";e["CreationRow"]="CreationRow";e["InlineCreationRows"]="InlineCreationRows";e["External"]="External";e["CreationDialog"]="CreationDialog";return e}({});e.CreationMode=i;let r=function(e){e["Table"]="Table";e["Chart"]="Chart";return e}({});e.VisualizationType=r;let l=function(e){e["ChangeSet"]="ChangeSet";e["Isolated"]="Isolated";return e}({});e.OperationGroupingMode=l;let c=function(e){e["High"]="High";e["Medium"]="Medium";e["Low"]="Low";e["None"]="None";return e}({});e.Importance=c;let u=function(e){e["End"]="End";e["Begin"]="Begin";e["Center"]="Center";return e}({});e.HorizontalAlign=u;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/ManifestWrapper", ["sap/fe/core/converters/ManifestSettings","sap/ui/Device"],function(t,n){"use strict";var e=t.VariantManagementType;function i(t,n){const e=t?.[n];if(Array.isArray(e)){e.forEach(t=>i(t,"annotationPath"))}else if(e&&typeof e==="string"&&!e.includes("@")){t[n]="@"+e}}let s=function(){function t(t,n){this.oManifestSettings=t;this.mergeFn=n;i(this.oManifestSettings,"defaultTemplateAnnotationPath");this.oManifestSettings.views?.paths.forEach(t=>{i(t,"annotationPath");i(t,"primary");i(t,"secondary")});if(this.oManifestSettings.controlConfiguration){for(const t of Object.values(this.oManifestSettings.controlConfiguration)){const n=t.tableSettings?.quickVariantSelection;i(n,"paths")}}}var s=t.prototype;s.getSapFeManifestConfiguration=function t(){return this.oManifestSettings.sapFeManifestConfiguration};s.getTemplateType=function t(){return this.oManifestSettings.converterType};s.isFilterBarHidden=function t(){return!!this.oManifestSettings?.hideFilterBar};s.useHiddenFilterBar=function t(){return!!this.oManifestSettings?.useHiddenFilterBar};s.isDesktop=function t(){return!!this.oManifestSettings.isDesktop};s.isPhone=function t(){return!!this.oManifestSettings.isPhone};s.getFormContainer=function t(n){return this.oManifestSettings.controlConfiguration?.[n]};s.getHeaderFacets=function t(){return this.mergeFn({},this.oManifestSettings.controlConfiguration?.["@com.sap.vocabularies.UI.v1.HeaderFacets"]?.facets,this.oManifestSettings.content?.header?.facets)};s.getHeaderActions=function t(){return this.oManifestSettings.content?.header?.actions||{}};s.getFooterActions=function t(){return this.oManifestSettings.content?.footer?.actions||{}};s.getVariantManagement=function t(){return this.oManifestSettings.variantManagement||e.None};s.getDefaultTemplateAnnotationPath=function t(){return this.oManifestSettings.defaultTemplateAnnotationPath};s.getControlConfiguration=function t(n){return this.oManifestSettings?.controlConfiguration?.[n]||{}};s.getNavigationConfiguration=function t(n){return this.oManifestSettings?.navigation?.[n]||{}};s.getViewLevel=function t(){return this.oManifestSettings?.viewLevel||-1};s.getContentDensities=function t(){return this.oManifestSettings?.contentDensities||{cozy:false,compact:false}};s.isFclEnabled=function t(){return!!this.oManifestSettings?.fclEnabled};s.isCondensedLayoutCompliant=function t(){const e=this.oManifestSettings?.contentDensities||{cozy:false,compact:false};const i=this.oManifestSettings?.shellContentDensity||"compact";let t=true;const s=!n.system.desktop||n.resize.width<=320;if(e?.cozy===true&&e?.compact!==true||i==="cozy"||s){t=false}return t};s.isCompactType=function t(){const n=this.getContentDensities();const e=this.oManifestSettings?.shellContentDensity||"compact";return n.compact!==false||e==="compact"?true:false};s.getSectionLayout=function t(){return this.oManifestSettings.sectionLayout??"Tabs"};s.getSections=function t(){return this.mergeFn({},this.oManifestSettings.controlConfiguration?.["@com.sap.vocabularies.UI.v1.Facets"]?.sections,this.oManifestSettings.content?.body?.sections)};s.isHeaderEditable=function t(){return this.getShowObjectPageHeader()&&!!this.oManifestSettings.editableHeaderContent};s.getUseTextForNoDataMessages=function t(){return this.oManifestSettings.useTextForNoDataMessages??false};s.getShowAnchorBar=function t(){return this.oManifestSettings.content?.header?.anchorBarVisible!==undefined?!!this.oManifestSettings.content?.header?.anchorBarVisible:true};s.useIconTabBar=function t(){return this.getShowAnchorBar()&&this.oManifestSettings.sectionLayout==="Tabs"};s.getShowObjectPageHeader=function t(){return this.oManifestSettings.content?.header?.visible!==undefined?!!this.oManifestSettings.content?.header?.visible:true};s.getEnableLazyLoading=function t(){return this.oManifestSettings.enableLazyLoading??false};s.getTransportSelection=function t(){return this.oManifestSettings.content?.transportSelection};s.getViewConfiguration=function t(){return this.oManifestSettings.views};s.getStickyMultiTabHeaderConfiguration=function t(){const n=this.oManifestSettings.stickyMultiTabHeader;return n!==undefined?n:true};s.getKPIConfiguration=function t(){return this.oManifestSettings.keyPerformanceIndicators||{}};s.getFilterConfiguration=function t(){let n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"@com.sap.vocabularies.UI.v1.SelectionFields";return this.getControlConfiguration(n)};s.hasMultipleEntitySets=function t(){const n=this.getViewConfiguration()||{paths:[]};const e=this.oManifestSettings.entitySet;return n.paths.find(t=>{if(t?.template){return undefined}else if(this.hasMultipleVisualizations(t)){const{primary:n,secondary:i}=t;return n.some(t=>t.entitySet&&t.entitySet!==e)||i.some(t=>t.entitySet&&t.entitySet!==e)}else{t=t;return t.entitySet&&t.entitySet!==e}})!==undefined};s.getContextPath=function t(){return this.oManifestSettings?.contextPath};s.isViewPathConfiguration=function t(n){return"annotationPath"in n&&!("primary"in n)&&!("secondary"in n)};s.isCombinedViewConfiguration=function t(n){return!this.isCustomViewConfiguration(n)&&!this.isViewPathConfiguration(n)?n.primary?.length>0&&n.secondary?.length>0:false};s.isCustomViewConfiguration=function t(n){return"template"in n};s.hasMultipleVisualizations=function t(n){if(!n){const t=this.getViewConfiguration()||{paths:[]};return t.paths.some(t=>this.isCombinedViewConfiguration(t))}return this.isCombinedViewConfiguration(n)};s.getEntitySet=function t(){return this.oManifestSettings.entitySet};return t}();return s},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/MetaModelConverter", ["sap/fe/base/BindingToolkit","sap/fe/core/converters/common/AnnotationConverter","sap/fe/core/helpers/TypeGuards","sap/fe/core/services/EnvironmentServiceFactory","../helpers/StableIdHelper"],function(e,t,n,i,o){"use strict";var a={};var r=o.prepareId;var l=i.DefaultEnvironmentCapabilities;var s=n.isSingleton;var p=n.isServiceObject;var c=n.isNavigationProperty;var y=n.isEntityType;var f=n.isEntitySet;var u=n.isEntityContainer;var $=e.getExpressionFromAnnotation;var d=e.formatResult;var h=e.constant;function P(e,t,n,i,o){let a;if(e===null){a={type:"Null"}}else if(typeof e==="string"){a={type:"String",String:e}}else if(typeof e==="boolean"){a={type:"Bool",Bool:e}}else if(typeof e==="number"){a={type:"Int",Int:e}}else if(Array.isArray(e)){const r={type:"Collection",Collection:e.map((e,a)=>m(e,`${n}/${t}/${a}`,i,o))};if(e.length>0){if(e[0].hasOwnProperty("$PropertyPath")){r.Collection.type="PropertyPath"}else if(e[0].hasOwnProperty("$Path")){r.Collection.type="Path"}else if(e[0].hasOwnProperty("$NavigationPropertyPath")){r.Collection.type="NavigationPropertyPath"}else if(e[0].hasOwnProperty("$AnnotationPath")){r.Collection.type="AnnotationPath"}else if(e[0].hasOwnProperty("$Type")){r.Collection.type="Record"}else if(e[0].hasOwnProperty("$If")){r.Collection.type="If"}else if(e[0].hasOwnProperty("$Or")){r.Collection.type="Or"}else if(e[0].hasOwnProperty("$And")){r.Collection.type="And"}else if(e[0].hasOwnProperty("$Eq")){r.Collection.type="Eq"}else if(e[0].hasOwnProperty("$Ne")){r.Collection.type="Ne"}else if(e[0].hasOwnProperty("$Not")){r.Collection.type="Not"}else if(e[0].hasOwnProperty("$Gt")){r.Collection.type="Gt"}else if(e[0].hasOwnProperty("$Ge")){r.Collection.type="Ge"}else if(e[0].hasOwnProperty("$Lt")){r.Collection.type="Lt"}else if(e[0].hasOwnProperty("$Le")){r.Collection.type="Le"}else if(e[0].hasOwnProperty("$Apply")){r.Collection.type="Apply"}else if(typeof e[0]==="object"){r.Collection.type="Record"}else{r.Collection.type="String"}}a=r}else if(typeof e==="object"){if(e.$Path!==undefined){a={type:"Path",Path:e.$Path}}else if(e.$Decimal!==undefined){a={type:"Decimal",Decimal:parseFloat(e.$Decimal)}}else if(e.$PropertyPath!==undefined){a={type:"PropertyPath",PropertyPath:e.$PropertyPath}}else if(e.$NavigationPropertyPath!==undefined){a={type:"NavigationPropertyPath",NavigationPropertyPath:e.$NavigationPropertyPath}}else if(e.$If!==undefined){a={type:"If",$If:e.$If}}else if(e.$And!==undefined){a={type:"And",$And:e.$And}}else if(e.$Or!==undefined){a={type:"Or",$Or:e.$Or}}else if(e.$Not!==undefined){a={type:"Not",$Not:e.$Not}}else if(e.$Eq!==undefined){a={type:"Eq",$Eq:e.$Eq}}else if(e.$Ne!==undefined){a={type:"Ne",$Ne:e.$Ne}}else if(e.$Gt!==undefined){a={type:"Gt",$Gt:e.$Gt}}else if(e.$Ge!==undefined){a={type:"Ge",$Ge:e.$Ge}}else if(e.$Lt!==undefined){a={type:"Lt",$Lt:e.$Lt}}else if(e.$Le!==undefined){a={type:"Le",$Le:e.$Le}}else if(e.$Apply!==undefined){a={type:"Apply",$Apply:e.$Apply,$Function:e.$Function}}else if(e.$AnnotationPath!==undefined){a={type:"AnnotationPath",AnnotationPath:e.$AnnotationPath}}else if(e.$EnumMember!==undefined){a={type:"EnumMember",EnumMember:e.$EnumMember}}else{a={type:"Record",Record:m(e,n,i,o)}}}return{name:t,value:a}}function m(e,t,n,i){let o;if(e===null){o={type:"Null"}}else if(typeof e==="string"){o={type:"String",String:e}}else if(typeof e==="boolean"){o={type:"Bool",Bool:e}}else if(typeof e==="number"){o={type:"Int",Int:e}}else if(Array.isArray(e)){const o={collection:e.map((e,o)=>m(e,`${t}/${o}`,n,i))};if(e.length>0){if(e[0].hasOwnProperty("$PropertyPath")){o.collection.type="PropertyPath"}else if(e[0].hasOwnProperty("$Path")){o.collection.type="Path"}else if(e[0].hasOwnProperty("$NavigationPropertyPath")){o.collection.type="NavigationPropertyPath"}else if(e[0].hasOwnProperty("$AnnotationPath")){o.collection.type="AnnotationPath"}else if(e[0].hasOwnProperty("$Type")){o.collection.type="Record"}else if(e[0].hasOwnProperty("$If")){o.collection.type="If"}else if(e[0].hasOwnProperty("$And")){o.collection.type="And"}else if(e[0].hasOwnProperty("$Or")){o.collection.type="Or"}else if(e[0].hasOwnProperty("$Eq")){o.collection.type="Eq"}else if(e[0].hasOwnProperty("$Ne")){o.collection.type="Ne"}else if(e[0].hasOwnProperty("$Not")){o.collection.type="Not"}else if(e[0].hasOwnProperty("$Gt")){o.collection.type="Gt"}else if(e[0].hasOwnProperty("$Ge")){o.collection.type="Ge"}else if(e[0].hasOwnProperty("$Lt")){o.collection.type="Lt"}else if(e[0].hasOwnProperty("$Le")){o.collection.type="Le"}else if(e[0].hasOwnProperty("$Apply")){o.collection.type="Apply"}else if(typeof e[0]==="object"){o.collection.type="Record"}else{o.collection.type="String"}}}else if(typeof e==="object"){if(e.$AnnotationPath!==undefined){o={type:"AnnotationPath",AnnotationPath:e.$AnnotationPath}}else if(e.$Path!==undefined){o={type:"Path",Path:e.$Path}}else if(e.$Decimal!==undefined){o={type:"Decimal",Decimal:parseFloat(e.$Decimal)}}else if(e.$PropertyPath!==undefined){o={type:"PropertyPath",PropertyPath:e.$PropertyPath}}else if(e.$If!==undefined){o={type:"If",$If:e.$If}}else if(e.$And!==undefined){o={type:"And",$And:e.$And}}else if(e.$Or!==undefined){o={type:"Or",$Or:e.$Or}}else if(e.$Not!==undefined){o={type:"Not",$Not:e.$Not}}else if(e.$Eq!==undefined){o={type:"Eq",$Eq:e.$Eq}}else if(e.$Ne!==undefined){o={type:"Ne",$Ne:e.$Ne}}else if(e.$Gt!==undefined){o={type:"Gt",$Gt:e.$Gt}}else if(e.$Ge!==undefined){o={type:"Ge",$Ge:e.$Ge}}else if(e.$Lt!==undefined){o={type:"Lt",$Lt:e.$Lt}}else if(e.$Le!==undefined){o={type:"Le",$Le:e.$Le}}else if(e.$Apply!==undefined){o={type:"Apply",$Apply:e.$Apply,$Function:e.$Function}}else if(e.$NavigationPropertyPath!==undefined){o={type:"NavigationPropertyPath",NavigationPropertyPath:e.$NavigationPropertyPath}}else if(e.$EnumMember!==undefined){o={type:"EnumMember",EnumMember:e.$EnumMember}}else{const a={type:"Record",propertyValues:[]};if(e.$Type){a.type=e.$Type}const r=[];Object.keys(e).forEach(o=>{if(o!=="$Type"&&o!=="$If"&&o!=="$Apply"&&o!=="$And"&&o!=="$Or"&&o!=="$Ne"&&o!=="$Gt"&&o!=="$Ge"&&o!=="$Lt"&&o!=="$Le"&&o!=="$Not"&&o!=="$Eq"&&!o.startsWith("@")){r.push(P(e[o],o,t,n,i))}else if(o.startsWith("@")){A({[o]:e[o]},t,n,i)}});a.propertyValues=r;o=a}}return o}function g(e,t){if(!t.hasOwnProperty(e)){t[e]={target:e,annotations:[]}}return t[e]}function v(e){const t=e.ID??e.Target?.$AnnotationPath;return t?r(t):t}function N(e){return e.filter(e=>{const t=e;if(t.Target&&t.Target.$AnnotationPath){return!t.Target.$AnnotationPath.includes(`@${"com.sap.vocabularies.UI.v1.Chart"}`)}else{return true}})}function b(e){return e.filter(e=>e.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")}function O(e){return e.filter(e=>e.$AnnotationPath!==`@${"com.sap.vocabularies.UI.v1.Chart"}`)}function A(e,t,n,i){if(Object.keys(e).length===0){return}const o=g(t,n);if(!i.MicroChart){delete e[`@${"com.sap.vocabularies.UI.v1.Chart"}`]}for(const a in e){let r=e[a];switch(a){case`@${"com.sap.vocabularies.UI.v1.HeaderFacets"}`:if(!i.MicroChart){r=N(r);e[a]=r}break;case`@${"com.sap.vocabularies.UI.v1.Identification"}`:if(!i.IntentBasedNavigation){r=b(r);e[a]=r}break;case`@${"com.sap.vocabularies.UI.v1.LineItem"}`:if(!i.IntentBasedNavigation){r=b(r);e[a]=r}if(!i.MicroChart){r=N(r);e[a]=r}break;case`@${"com.sap.vocabularies.UI.v1.FieldGroup"}`:const t=r;if(!i.IntentBasedNavigation&&t.Data){t.Data=b(t.Data);e[a]=r}if(!i.MicroChart&&t.Data){t.Data=N(t.Data);e[a]=r}break;case`@${"com.sap.vocabularies.UI.v1.PresentationVariant"}`:const n=r;if(!i.Chart&&n.Visualizations){n.Visualizations=O(n.Visualizations);e[a]=r}break;case`@com.sap.vocabularies.Common.v1.DraftRoot`:const o=e[`@Org.OData.Capabilities.V1.FilterRestrictions`];if(o?.FilterExpressionRestrictions?.length){if(!o.FilterExpressionRestrictions.some(e=>e?.Property?.$PropertyPath.includes("DraftAdministrativeData"))){o.FilterExpressionRestrictions.push({$Type:"Org.OData.Capabilities.V1.FilterExpressionRestrictionType",AllowedExpressions:"SingleRange",Property:{$PropertyPath:"DraftAdministrativeData/CreationDateTime"},fullyQualifiedName:undefined},{$Type:"Org.OData.Capabilities.V1.FilterExpressionRestrictionType",AllowedExpressions:"SingleRange",Property:{$PropertyPath:"DraftAdministrativeData/LastChangeDateTime"},fullyQualifiedName:undefined})}}break;default:break}let l=o;let s=a;const p=a.split("@");if(p.length>2){l=g(`${t}@${p[1]}`,n);s=p[2]}else{s=p[1]}const c=s.split("#");const y=c[1];s=c[0];const f={term:s,qualifier:y};let u=`${t}@${f.term}`;if(y){u+=`#${y}`}const $=r;if($===null){f.value={type:"Null"}}else if(typeof $==="string"){f.value={type:"String",String:$}}else if(typeof $==="boolean"){f.value={type:"Bool",Bool:$}}else if(typeof $==="number"){f.value={type:"Int",Int:$}}else if(Array.isArray($)){f.collection=$.map((e,t)=>m(e,`${u}/${t}`,n,i));if($.length>0){if($[0].hasOwnProperty("$PropertyPath")){f.collection.type="PropertyPath"}else if($[0].hasOwnProperty("$Path")){f.collection.type="Path"}else if($[0].hasOwnProperty("$NavigationPropertyPath")){f.collection.type="NavigationPropertyPath"}else if($[0].hasOwnProperty("$AnnotationPath")){f.collection.type="AnnotationPath"}else if($[0].hasOwnProperty("$Type")){f.collection.type="Record"}else if($[0].hasOwnProperty("$If")){f.collection.type="If"}else if($[0].hasOwnProperty("$Or")){f.collection.type="Or"}else if($[0].hasOwnProperty("$Eq")){f.collection.type="Eq"}else if($[0].hasOwnProperty("$Ne")){f.collection.type="Ne"}else if($[0].hasOwnProperty("$Not")){f.collection.type="Not"}else if($[0].hasOwnProperty("$Gt")){f.collection.type="Gt"}else if($[0].hasOwnProperty("$Ge")){f.collection.type="Ge"}else if($[0].hasOwnProperty("$Lt")){f.collection.type="Lt"}else if($[0].hasOwnProperty("$Le")){f.collection.type="Le"}else if($[0].hasOwnProperty("$And")){f.collection.type="And"}else if($[0].hasOwnProperty("$Apply")){f.collection.type="Apply"}else if(typeof $[0]==="object"){f.collection.type="Record"}else{f.collection.type="String"}}}else if(typeof $==="object"){if($.$If!==undefined){f.value={type:"If",$If:$.$If}}else if($.$And!==undefined){f.value={type:"And",$And:$.$And}}else if($.$Or!==undefined){f.value={type:"Or",$Or:$.$Or}}else if($.$Not!==undefined){f.value={type:"Not",$Not:$.$Not}}else if($.$Eq!==undefined){f.value={type:"Eq",$Eq:$.$Eq}}else if($.$Ne!==undefined){f.value={type:"Ne",$Ne:$.$Ne}}else if($.$Gt!==undefined){f.value={type:"Gt",$Gt:$.$Gt}}else if($.$Ge!==undefined){f.value={type:"Ge",$Ge:$.$Ge}}else if($.$Lt!==undefined){f.value={type:"Lt",$Lt:$.$Lt}}else if($.$Le!==undefined){f.value={type:"Le",$Le:$.$Le}}else if($.$Apply!==undefined){f.value={type:"Apply",$Apply:$.$Apply,$Function:$.$Function}}else if($.$Path!==undefined){f.value={type:"Path",Path:$.$Path}}else if($.$AnnotationPath!==undefined){f.value={type:"AnnotationPath",AnnotationPath:$.$AnnotationPath}}else if($.$Decimal!==undefined){f.value={type:"Decimal",Decimal:parseFloat($.$Decimal)}}else if($.$EnumMember!==undefined){f.value={type:"EnumMember",EnumMember:$.$EnumMember}}else{const e={propertyValues:[]};if($.$Type){const t=$.$Type;e.type=`${t}`}const t=[];for(const e in $){if(e!=="$Type"&&!e.startsWith("@")){t.push(P($[e],e,u,n,i))}else if(e.startsWith("@")){A({[e]:$[e]},u,n,i)}}e.propertyValues=t;f.record=e}}l.annotations.push(f)}}function T(e,t,n){return{_type:"Property",name:n,fullyQualifiedName:`${t.fullyQualifiedName}/${n}`,type:e.$Type,maxLength:e.$MaxLength,precision:e.$Precision,scale:e.$Scale,nullable:e.$Nullable??true}}function C(e,t,n){let i=[];if(e.$ReferentialConstraint){i=Object.keys(e.$ReferentialConstraint).map(n=>({sourceTypeName:t.name,sourceProperty:n,targetTypeName:e.$Type,targetProperty:e.$ReferentialConstraint[n]}))}const o={_type:"NavigationProperty",name:n,fullyQualifiedName:`${t.fullyQualifiedName}/${n}`,partner:e.$Partner,isCollection:e.$isCollection?e.$isCollection:false,containsTarget:!!e.$ContainsTarget,targetTypeName:e.$Type,referentialConstraint:i};return o}function I(e,t){if(e){return Object.fromEntries(Object.entries(e).map(e=>{let[n,i]=e;return[n,`${t}/${i}`]}))}return{}}function E(e,t,n){return{_type:"EntitySet",name:t,navigationPropertyBinding:I(e.$NavigationPropertyBinding,n),entityTypeName:e.$Type,fullyQualifiedName:`${n}/${t}`}}function w(e,t,n){return{_type:"Singleton",name:t,navigationPropertyBinding:I(e.$NavigationPropertyBinding,n),entityTypeName:e.$Type,fullyQualifiedName:`${n}/${t}`,nullable:true}}function D(e,t,n){return{_type:"ActionImport",name:t,fullyQualifiedName:`${n}/${t}`,actionName:e.$Action}}function L(e,t,n){const i={_type:"TypeDefinition",name:t.substring(n.length),fullyQualifiedName:t,underlyingType:e.$UnderlyingType};return i}function M(e,t,n){const i={_type:"ComplexType",name:t.substring(n.length),fullyQualifiedName:t,properties:[],navigationProperties:[]};const o=Object.keys(e).filter(t=>{if(t!="$Key"&&t!="$kind"){return e[t].$kind==="Property"}}).sort((e,t)=>e>t?1:-1).map(t=>T(e[t],i,t));i.properties=o;const a=Object.keys(e).filter(t=>{if(t!="$Key"&&t!="$kind"){return e[t].$kind==="NavigationProperty"}}).sort((e,t)=>e>t?1:-1).map(t=>C(e[t],i,t));i.navigationProperties=a;return i}function k(e,t){if(!e.$Key&&e.$BaseType){return k(t[e.$BaseType],t)}return e.$Key??[]}function G(e,t,n,i,o){const a={_type:"EntityType",name:t.substring(n.length),fullyQualifiedName:t,keys:[],entityProperties:[],navigationProperties:[],actions:{}};for(const t in e){const n=e[t];switch(n.$kind){case"Property":const e=T(n,a,t);a.entityProperties.push(e);break;case"NavigationProperty":const i=C(n,a,t);a.navigationProperties.push(i);break}}a.keys=k(e,i).map(e=>a.entityProperties.find(t=>t.name===e)).filter(e=>e!==undefined);const r=i.$Annotations[a.fullyQualifiedName];const l=r?.[`@${"com.sap.vocabularies.UI.v1.FilterFacets"}`];l?.forEach(e=>{e.ID=v(e)});if(!!a?.keys.length&&i.$Annotations[a.fullyQualifiedName]&&!r?.[`@${"com.sap.vocabularies.UI.v1.HeaderInfo"}`]){const e={$Type:`${"com.sap.vocabularies.UI.v1.HeaderInfoType"}`,TypeName:`${a.name}`,TypeNamePlural:"",Title:{$Type:`${"com.sap.vocabularies.UI.v1.DataField"}`,Value:{$Path:`${a.keys[0].name}`}},term:"com.sap.vocabularies.UI.v1.HeaderInfo"};i.$Annotations[a.fullyQualifiedName][`@${"com.sap.vocabularies.UI.v1.HeaderInfo"}`]=e}for(const e of a.entityProperties){if(!i.$Annotations[e.fullyQualifiedName]){i.$Annotations[e.fullyQualifiedName]={}}if(!o&&!i.$Annotations[e.fullyQualifiedName][`@${"com.sap.vocabularies.UI.v1.DataFieldDefault"}`]){i.$Annotations[e.fullyQualifiedName][`@${"com.sap.vocabularies.UI.v1.DataFieldDefault"}`]={$Type:"com.sap.vocabularies.UI.v1.DataField",Value:{$Path:e.name}}}}return a}function j(e,t,n){let i;if(e.$kind==="Function"){i=e.$Parameter??[]}else{i=e.$IsBound?[e.$Parameter[0]]:[]}const o=i.map(e=>e.$isCollection?`Collection(${e.$Type})`:e.$Type).join(",");const a=`${t}(${o})`;const r=e.$Parameter??[];return{_type:"Action",name:t.substring(n.length),fullyQualifiedName:a,isBound:e.$IsBound??false,isFunction:e.$kind==="Function",sourceType:i[0]?.$Type??"",returnType:e.$ReturnType?.$Type??"",returnCollection:e.$ReturnType?.$isCollection??false,parameters:r.map(e=>({_type:"ActionParameter",fullyQualifiedName:`${a}/${e.$Name}`,isCollection:e.$isCollection??false,name:e.$Name,type:e.$Type,nullable:e.$Nullable??false,maxLength:e.$MaxLength,precision:e.$Precision,scale:e.$Scale}))}}function S(e,t,n,i){i.entityContainer={_type:"EntityContainer",name:t.substring(e.length),fullyQualifiedName:t};for(const e in n){const o=n[e];switch(o.$kind){case"EntitySet":i.entitySets.push(E(o,e,t));break;case"Singleton":i.singletons.push(w(o,e,t));break;case"ActionImport":i.actionImports.push(D(o,e,t));break}}}function F(e,t){const n={};for(const i in e){A(e[i],i,n,t)}return Object.values(n)}function B(e,t){const n=Object.keys(e).find(t=>{const n=e[t];return!Array.isArray(n)&&n.$kind==="Schema"})??"";const i={namespace:n.slice(0,-1),entityContainer:{_type:"EntityContainer",name:"",fullyQualifiedName:""},entitySets:[],entityTypes:[],complexTypes:[],typeDefinitions:[],singletons:[],associations:[],associationSets:[],actions:[],actionImports:[],annotations:{}};const o=(o,a)=>{switch(a.$kind){case"EntityContainer":S(n,o,a,i);break;case"Action":case"Function":i.actions.push(j(a,o,n));break;case"EntityType":i.entityTypes.push(G(a,o,n,e,t));break;case"ComplexType":i.complexTypes.push(M(a,o,n));break;case"TypeDefinition":i.typeDefinitions.push(L(a,o,n));break;case"EntitySet":case"Schema":break}};for(const t in e){const n=e[t];if(Array.isArray(n)){for(const e of n){o(t,e)}}else{o(t,n)}}return i}function x(e){let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:l;let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const o={identification:"metamodelResult",version:"4.0",references:[]};t.lazy(o,"schema",()=>{const o=e.getObject("/$");const a=B(o,i);t.lazy(a.annotations,"metamodelResult",()=>F(o.$Annotations,n));return a});return o}a.parseMetaModel=x;const R={};const Q={};const q=new WeakMap;const U={};function V(e,n){const i=e.id;if(!R.hasOwnProperty(i)){const o=x(e,n);try{R[i]=t.convert(o);U[i]={criticality:te};const n=new String(i);Q[i]=n;q.set(n,e)}catch(e){throw new Error(e)}}return R[i]}a.convertTypes=V;function _(e){const t=Q[e];return q.get(t)}a.getMetaModelById=_;function K(e){const t=e.getModel();if(!t.isA("sap.ui.model.odata.v4.ODataMetaModel")){throw new Error("This should only be called on a ODataMetaModel")}return V(t)}a.getConvertedTypes=K;function W(e){if(e){delete R[e.id]}}a.deleteModelCacheData=W;function H(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const n=V(e.getModel());const i=e.getPath();const o=i.split("/");let a=o[1];let r=2;if(n.entityContainer.fullyQualifiedName===a){a=o[2];r++}let l=n.entitySets.find(e=>e.name===a);if(!l){l=n.singletons.find(e=>e.name===a)}let s=o.slice(r).join("/");const p=[l];while(s&&s.length>0&&s.startsWith("$NavigationPropertyBinding")){let e=s.split("/");let t=0;let n,i;e=e.slice(1);while(!n&&e.length>t){if(e[t]!=="$NavigationPropertyBinding"){i=e.slice(0,t+1).join("/").replace("/$NavigationPropertyBinding","");n=l&&l.navigationPropertyBinding[i]}t++}if(!n){i=e[0]}const o=i?.split("/")||[];let a=l&&l.entityType;for(const e of o){const t=a&&a.navigationProperties.find(t=>t.name===e);if(t){p.push(t);a=t.targetType}else{break}}l=l&&n||l&&l.navigationPropertyBinding[e[0]];if(l){p.push(l)}e=e.slice(o.length||1);if(e.length&&e[0]==="$"){e.shift()}s=e.join("/")}if(s.startsWith("$Type")){if(s.startsWith("$Type@")){s=s.replace("$Type","")}else{s=o.slice(3).join("/")}}if(l&&s.length){const e=l.entityType.resolvePath(s,t);if(e){if(t){e.visitedObjects=p.concat(e.visitedObjects)}}else if(l.entityType&&l.entityType.actions){const e=l.entityType&&l.entityType.actions;const t=s.split("/");if(e[t[0]]){const n=e[t[0]];if(t[1]&&n.parameters){const e=t[1];return n.parameters.find(t=>t.fullyQualifiedName.endsWith(`/${e}`))}else if(s.length===1){return n}}}return e}else{if(t){return{target:l,visitedObjects:p}}return l}}a.convertMetaModelContext=H;function z(e,t){const n=V(e.getModel());const i=H(e,true);let o;if(t&&t.getPath()!=="/"){o=z(t)}return J(i,n,o)}a.getInvolvedDataModelObjects=z;function J(e,t,n){let i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const o=e.visitedObjects.filter(e=>p(e)&&!y(e)&&!u(e));if(p(e.target)&&!y(e.target)&&o[o.length-1]!==e.target&&!i){o.push(e.target)}const a=[];const r=o[0];let l=r;let $=r.entityType;let d;let h=[];for(let e=1;e<o.length;e++){d=o[e];if(c(d)){h.push(d.name);a.push(d);$=d.targetType;const e=l?.navigationPropertyBinding[h.join("/")];if(e!==undefined){l=e;h=[]}}if(f(d)||s(d)){l=d;$=l.entityType}}if(h.length>0){l=undefined}if(n&&n.startingEntitySet!==r){const e=o.indexOf(n.startingEntitySet);if(e!==-1){const t=o.slice(0,e);n.startingEntitySet=r;n.navigationProperties=t.filter(c).concat(n.navigationProperties)}}const P={startingEntitySet:r,targetEntitySet:l,targetEntityType:$,targetObject:e.target,navigationProperties:a,contextLocation:n,convertedTypes:t};if(!p(P.targetObject)&&i){P.targetObject=p(d)?d:undefined}if(!P.contextLocation){P.contextLocation=P}return P}a.getInvolvedDataModelObjectFromPath=J;function X(e){const t=e?.getModel()?.getMetaModel();if(t){const n=t.getMetaPath(e?.getPath());const i=z(t.getMetaContext(n));const o=i.targetEntityType.annotations.Common?.SemanticKey;let a=[];if(o){a=o.map(e=>e.value)}const r=i.targetEntityType.keys;let l=[];if(r){l=r.map(e=>e.name)}return{semanticKeys:a,technicalKeys:l}}return{technicalKeys:[],semanticKeys:[]}}a.getInvolvedDataModelObjectEntityKeys=X;function Y(e){if(e?.includes(">")){const[t,...n]=e.split(">");const i=n.join(">");return{id:t,path:i}}else{return{id:undefined,path:e}}}a.extractModelAndPath=Y;function Z(e,t){const n=t?.getMetaPath(e);const i=n?t?.getContext(n):undefined;return i&&z(i)}a.getInvolvedDataModelObjectsForTargetPath=Z;function ee(e,t){const n="@$ui5.fe.virtual.";if(e.includes(n)){const i=Object.keys(R).find(e=>R[e]===t);if(i&&U[i]){const o=e.substring(0,e.indexOf(t.namespace));const a=e.split(n);if(a.length===2){const e=a[1];const n=a[0].replace(o,"");if(U[i][e]){return U[i][e](n,t,o)}}}return h(undefined)}return h(undefined)}a.getVirtualBindingExpression=ee;function te(e,t,n){const i=t.resolvePath(e)?.target?.Criticality;const o=i?$(i,[],undefined,e=>n?`${n}${e}`:e):undefined;if(!o){return h(undefined)}return d([o],"sap.fe.core.formatters.CriticalityFormatter#getCriticality")}return a},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/TemplateConverter", ["sap/base/util/merge","sap/fe/core/converters/helpers/IssueManager","./ConverterContext","./ManifestSettings","./MetaModelConverter","./templates/ListReportConverter","./templates/ObjectPageConverter"],function(e,t,a,s,n,o,c){"use strict";var i={};var r=n.getInvolvedDataModelObjects;var l=n.convertTypes;var v=s.TemplateType;var u=t.IssueSeverity;var f=t.IssueCategoryType;var g=t.IssueCategory;function p(e,t,a,s){e.forEach(e=>{let n=`For entity set ${a}`;if(e?.$Type==="com.sap.vocabularies.UI.v1.CollectionFacet"&&!e?.ID){n=`${n}, `+`level ${s}, the collection facet does not have an ID.`;t.addIssue(g.Facets,u.High,n,f,f?.Facets?.MissingID)}if(e?.$Type==="com.sap.vocabularies.UI.v1.CollectionFacet"&&s>=3){n=`${n}, collection facet ${e.Label} is not supported at `+`level ${s}`;t.addIssue(g.Facets,u.Medium,n,f,f?.Facets?.UnSupportedLevel)}if(e?.$Type==="com.sap.vocabularies.UI.v1.CollectionFacet"&&e?.Facets){p(e?.Facets,t,a,++s);s=s-1}})}function d(t,s,n,i,f,d,I){const y=l(s,d);y.diagnostics.forEach(e=>{const t=i.checkIfIssueExists(g.Annotation,u.High,e.message);if(!t){i.addIssue(g.Annotation,u.High,e.message)}});y?.entityTypes?.forEach(e=>{if(e?.annotations?.UI?.Facets){p(e?.annotations?.UI?.Facets,i,e?.name,1)}});const F=n.entitySet;const h=n?.contextPath||(f==="/"?f+F:f);const b=s.createBindingContext(h);const m=r(b);if(m){let s={};const r=new a(y,n,i,e,m);switch(t){case v.ListReport:case v.AnalyticalListPage:s=o.convertPage(r,d);break;case v.ObjectPage:s=c.convertPage(r);break;case v.FreeStylePage:break}if(I?.extendPageDefinition){s=I.extendPageDefinition(s,r)}return s}return undefined}i.convertPage=d;return i},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/annotations/DataField", ["sap/fe/base/BindingToolkit","sap/fe/core/converters/helpers/Aggregation","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DisplayModeFormatter","sap/fe/core/templating/PropertyHelper","../../templating/DataModelPathHelper","../helpers/DataFieldHelper"],function(t,e,a,n,i,o,r){"use strict";var s={};var c=r.isReferencePropertyStaticallyHidden;var l=o.getContextRelativeTargetObjectPath;var u=o.enhanceDataModelPath;var p=i.hasStaticPercentUnit;var g=i.getAssociatedUnitPropertyPath;var d=i.getAssociatedUnitProperty;var f=i.getAssociatedTimezoneProperty;var v=i.getAssociatedTextPropertyPath;var y=i.getAssociatedTextProperty;var m=i.getAssociatedExternalIdPropertyPath;var $=i.getAssociatedExternalIdProperty;var D=i.getAssociatedCurrencyPropertyPath;var T=i.getAssociatedCurrencyProperty;var b=n.getDisplayMode;var F=a.isProperty;var h=a.isPathAnnotationExpression;var P=a.isAnnotationOfType;var I=a.isAnnotationOfTerm;var U=e.AggregationHelper;var A=t.not;var x=t.getExpressionFromAnnotation;var V=t.equal;function S(t){return t.hasOwnProperty("Action")}s.isDataFieldForActionAbstract=S;function C(t){return t.$Type==="com.sap.vocabularies.UI.v1.DataFieldForActionGroup"}s.isDataFieldForActionGroup=C;function O(t){return t?.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"}s.isDataFieldForAnnotation=O;function k(t){return t?.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"}s.isDataFieldForAction=k;function N(t){return t.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"}s.isDataFieldForIntentBasedNavigation=N;function z(t){return t.hasOwnProperty("Value")}s.isDataFieldTypes=z;function M(t){return t?.hasOwnProperty("Value")}s.isDataField=M;function j(t){const e=t.Target.$target;return P(e,"com.sap.vocabularies.UI.v1.FieldGroupType")}s.hasFieldGroupTarget=j;function W(t){const e=t.Target.$target;return I(e,"com.sap.vocabularies.UI.v1.Identification")}s.hasIdentificationTarget=W;function w(t){const e=t.Target.$target;return P(e,"com.sap.vocabularies.UI.v1.DataPointType")}s.hasDataPointTarget=w;function B(t,e){return A(V(x(t?.annotations?.UI?.Hidden,[],undefined,e.getRelativeModelPathFunction()),true))}s.visibleExpression=B;function E(t){const e=t.targetObject;return G(k(e)?e:undefined)}s.isDataModelObjectPathForActionWithDialog=E;function G(t){const e=t?.ActionTarget;if(e){const t=e.annotations?.Common?.IsActionCritical;if(e.parameters.length>1||t){return"Dialog"}else{return"None"}}else{return"None"}}s.isActionWithDialog=G;function R(t){let e;if(F(t)){const a=t.annotations?.UI?.DataFieldDefault?.Target?.$target;e=a?.TargetValue??a?.MaximumValue}else{e=t.TargetValue??t.MaximumValue}if(typeof e==="number"){return e.toString()}return h(e)?e:"100"}s.getTargetValueOnDataPoint=R;const H=function(t){return t.annotations?.UI?.DataFieldDefault?.Target?.$target?.$Type==="com.sap.vocabularies.UI.v1.DataPointType"};s.isDataPointFromDataFieldDefault=H;const Q=function(t){return H(t)&&t.annotations?.UI?.DataFieldDefault?.Target?.$target?.Visualization==="UI.VisualizationType/Rating"};s.isRatingVisualizationFromDataFieldDefault=Q;const q=function(t){if(F(t)&&H(t)){t=t.annotations.UI?.DataFieldDefault}return t.Target?.$target?.Visualization==="UI.VisualizationType/Progress"};s.isAProgressTypeFromDataPoint=q;function J(t,e){if(typeof e==="object"){if(z(e)&&e.Value?.$target){const a=e.Value?.$target;if(a?.annotations?.Common?.SemanticObject!==undefined){return t.getEntitySetBasedAnnotationPath(a?.fullyQualifiedName)}}else if(F(e)){if(e?.annotations?.Common?.SemanticObject!==undefined){return t.getEntitySetBasedAnnotationPath(e?.fullyQualifiedName)}}}return undefined}s.getSemanticObjectPath=J;function K(t){if(t){return t.includes("/")?t.substring(0,t.lastIndexOf("/")+1):""}return""}function L(t,e,a,n){if(a==="AnalyticalTable"){const a=t.annotations?.UI?.Hidden;if(a?.path&&F(a.$target)){const t=e+a.path;n.additionalProperties[t]=a.$target}const i=t.Criticality;if(i?.path&&F(i?.$target)){const t=e+i.path;n.additionalProperties[t]=i?.$target}}return n}function X(t,e,a,n){if(!t.properties.hasOwnProperty(e)){t.properties[e]={annotationProperty:a};if(n){t.properties[e].displayModeOfPropertyUsedAsDescription=n}}return Object.keys(t.properties).indexOf(e)}function Y(t,e){t.exportSettings.template=t.exportSettings?.template?`${t.exportSettings.template}${e}`:`${e}`}function Z(t,e,a,n,i){let o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{properties:{},additionalProperties:{},exportSettings:{}};let r=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;let s=arguments.length>7&&arguments[7]!==undefined?arguments[7]:false;if(t&&e){let c;const p=m(e);const g=$(e);if(s){c=X(o,t,e);Y(o,`{${c}}`);return o}const D=K(t);const F=a.getEntityType();const h=new U(F,a);const P=y(g||e);const I=v(g||e);const A=a.getConverterContextFor(a.getContextPath()).getDataModelObjectPath();const x=u(A,p||t);const V=l(x);const S=u(x,I);const C=l(S);if(o.exportSettings?.template){Y(o,"\n");o.exportSettings.wrap=true}const O=i==="AnalyticalTable"&&!!h.isPropertyGroupable(e)?!!P&&!!h.isPropertyGroupable(P):true;if(P&&C){if(O){const a=p?p:t;const n=g?g:e;const i=b(n,x);let r;switch(i){case"Description":r=X(o,C,P,"Description");Y(o,`{${r}}`);break;case"ValueDescription":c=X(o,a,n);r=X(o,C,P,"ValueDescription");Y(o,`{${c}} ({${r}})`);break;case"DescriptionValue":c=X(o,a,n);r=X(o,C,P,"DescriptionValue");Y(o,`{${r}} ({${c}})`);break;default:c=X(o,a,n);Y(o,`{${c}}`);break}}else{c=X(o,t,e);Y(o,`{${c}}`)}}else{const a=T(e);const i=d(e);const s=a??i;const l=e?.annotations?.Measures?.ISOCurrency||e?.annotations?.Measures?.Unit;const u=f(e);const p=e?.annotations?.Common?.Timezone;if(s){at(o,V??t,r,x,s,a)}else if(u&&p?.$target){et(e,o,t,r)}else if(e.Target?.$target?.$Type==="com.sap.vocabularies.UI.v1.DataPointType"&&!e.Target?.$target?.ValueFormat||e.annotations?.UI?.DataFieldDefault?.Target?.$target?.$Type==="com.sap.vocabularies.UI.v1.DataPointType"){tt(e,o,V)}else if(e.$Type==="com.sap.vocabularies.Communication.v1.ContactType"){const t=e.fn?.$target;const a=e.fn?.path;c=X(o,D?D+a:a,t);Y(o,`{${c}}`)}else if(!n){c=X(o,t,e);Y(o,`{${c}}`);if(l){o.exportSettings.unit=`${l}`;if(e?.annotations?.Measures?.ISOCurrency){o.exportSettings.isCurrency=true}}else if(p){o.exportSettings.timezone=`${p}`}}}o=L(e,D,i,o);if(Object.keys(o.additionalProperties).length>0&&Object.keys(o.properties).length===0){c=X(o,t,e);Y(o,`{${c}}`)}}return o}s.collectRelatedProperties=Z;function _(t){let e;if(F(t)){e=t.annotations?.UI?.DataFieldDefault?.Target?.$target}else{e=t}return e.Visualization??"UI.VisualizationType/Number"}function tt(t,e,a){if(a===undefined){return}const n=t.Target?.$target?.Value.$target;const i=t.Target?.$target;const o=K(a);const r=t.annotations?.UI?.DataFieldDefault;const s=X(e,a,r?t:n);if(_(r?t:i)==="UI.VisualizationType/Number"){return}const c=R(r?t:i);if(h(c)){if(c.$target){const t=X(e,o?o+c.$target.name:c.$target.name,c.$target);e.exportSettings.dataPointTargetValue=c.path;Y(e,`{${s}}/{${t}}`)}}else if(p(r?t:n)&&q(t)){e.exportSettings.unit="%"}else{e.exportSettings.dataPointTargetValue=c;Y(e,`{${s}}/${c}`)}}function et(t,e,a,n){const i=t.annotations.Common.Timezone;const o=K(a);const r=X(e,a,t);const s=X(e,o+i.path,i.$target);if(n){Y(e,`{${r}}  {${s}}`)}else{e.exportSettings.timezoneProperty=o+i.path}}function at(t,e,a,n,i,o){const r=n.targetObject;if(r){const s=D(r)||g(r);const c=u(n,s);const p=l(c);const d=X(t,e,r);const f=X(t,p,i);if(a){Y(t,`{${d}}  {${f}}`)}else{t.exportSettings.unitProperty=p}if(o){t.exportSettings.isCurrency=true}t.exportSettings.scale=r.scale}}function nt(t,e,a){let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{properties:{},additionalProperties:{},exportSettings:{}};let i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;let o=false;switch(t?.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":if(t.Value){const r=t.Value;o=c(t);n=Z(r.path,r.$target,e,false,a,n,i,o);const s=K(r.path);n=L(t,s,a,n)}break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":switch(t.Target?.$target?.$Type){case"com.sap.vocabularies.UI.v1.FieldGroupType":t.Target.$target.Data?.forEach(t=>{n=nt(t,e,a,n,true)});break;case"com.sap.vocabularies.UI.v1.DataPointType":o=c(t);n=Z(t.Target.$target.Value.path,t,e,false,a,n,i,o);break;case"com.sap.vocabularies.Communication.v1.ContactType":const r=t.Target.$target;o=c(t);n=Z(t.Target.value,r,e,o,a,n,i,o);break;default:break}break;default:break}return n}s.collectRelatedPropertiesRecursively=nt;const it=function(t){if(F(t)){return t.type}let e;switch(t.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldWithActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":e=undefined;break;case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":e=t?.Value?.$target?.type;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":default:if(t.Target?.$target?.$Type){const a=t.Target.$target;if(a.$Type==="com.sap.vocabularies.Communication.v1.ContactType"&&h(a.fn)){e=a.fn.$target?.type}else if(a.$Type==="com.sap.vocabularies.UI.v1.DataPointType"){e=a.Value?.$Path?.$Type||a.Value?.$target?.type}else{e=t.Target.$target.$Type==="com.sap.vocabularies.UI.v1.ChartDefinitionType"?undefined:"Edm.Boolean"}}else{e=undefined}break}return e};s.getDataFieldDataType=it;return s},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/common/AnnotationConverter", [],function(){var a;(function(){"use strict";var e={880:function(a,e,t){Object.defineProperty(e,"__esModule",{value:true});e.convert=void 0;const o=t(921);const r=t(989);const i=Symbol("Annotation Target");function n(a,e){if(a[a.length-1]!==e){a.push(e)}return a}function s(a,e,t,o){var c,l,u,p,m;if(t===undefined){return{target:undefined,objectPath:[],messages:[]}}if(t.startsWith("/")){t=t.substring(1);e=undefined}const v=t.split("/").reduce((a,e)=>{if(e.includes("@")){const[t,o]=(0,r.splitAtFirst)(e,"@");a.push(t);a.push(`@${o}`)}else{a.push(e)}return a},[]);if(e===undefined){if(v[0].startsWith(`${a.rawSchema.namespace}.`)&&v[0]!==((c=a.getConvertedEntityContainer())===null||c===void 0?void 0:c.fullyQualifiedName)){e=(p=(u=(l=a.getConvertedEntityType(v[0]))!==null&&l!==void 0?l:a.getConvertedComplexType(v[0]))!==null&&u!==void 0?u:a.getConvertedAction(v[0]))!==null&&p!==void 0?p:a.getConvertedAction(`${v[0]}()`);v.shift()}else{e=a.getConvertedEntityContainer()}}else if(e[i]!==undefined){e=e[i]}else if(e._type==="Property"){const t=(0,r.substringBeforeFirst)(e.fullyQualifiedName,"/");e=(m=a.getConvertedEntityType(t))!==null&&m!==void 0?m:a.getConvertedComplexType(t)}const y=v.reduce((e,t)=>{var o,c,l,u,p;const m=a=>{e.messages.push({message:a});e.target=undefined;return e};if(e.target===undefined){return e}e.objectPath=n(e.objectPath,e.target);if(t.startsWith("@")&&t!=="@$ui5.overload"){const[r,i]=a.splitTerm(t);const n=(o=e.target.annotations[r.substring(1)])===null||o===void 0?void 0:o[i];if(n!==undefined){e.target=n;return e}return m(`Annotation '${t.substring(1)}' not found on ${e.target._type} '${e.target.fullyQualifiedName}'`)}if(e.target.$target){let o;if(t==="$AnnotationPath"){o=e.target.value}else if(t==="$Path"){o=e.target.path}if(o!==undefined){const t=s(a,e.target[i],o);t.objectPath.forEach(a=>{if(!e.objectPath.includes(a)){e.objectPath=n(e.objectPath,a)}});e.target=t.target;e.objectPath=n(e.objectPath,e.target);return e}}switch((c=e.target)===null||c===void 0?void 0:c._type){case"Schema":break;case"EntityContainer":{const o=e.target;if(t===""||a.unalias(t)===o.fullyQualifiedName){return e}const r=(u=(l=o.entitySets.by_name(t))!==null&&l!==void 0?l:o.singletons.by_name(t))!==null&&u!==void 0?u:o.actionImports.by_name(t);if(r){e.target=r;return e}}break;case"EntitySet":case"Singleton":{const o=e.target;if(t===""||t==="$Type"){e.target=o.entityType;return e}if(t==="$"){return e}if(t==="$NavigationPropertyBinding"){const a=o.navigationPropertyBinding;e.target=a;return e}const r=s(a,o.entityType,t);e.target=r.target;e.objectPath=r.objectPath.reduce(n,e.objectPath);return e}case"EntityType":{const o=e.target;if(t===""||t==="$Type"){return e}const i=o.entityProperties.by_name(t);if(i){e.target=i;return e}const n=o.navigationProperties.by_name(t);if(n){e.target=n;return e}const s=(0,r.substringBeforeFirst)(a.unalias(t),"(");const c=o.actions[s];if(c){e.target=c;return e}}break;case"ActionImport":{const o=s(a,e.target.action,t);e.target=o.target;e.objectPath=o.objectPath.reduce(n,e.objectPath);return e}case"Action":{const a=e.target;if(t===""){return e}if(t==="@$ui5.overload"||t==="0"){return e}if(t==="$Parameter"&&a.isBound){e.target=a.parameters;return e}const o=(p=a.parameters[t])!==null&&p!==void 0?p:a.parameters.find(a=>a.name===t);if(o){e.target=o;return e}break}case"Property":{const a=e.target;const o=a.targetType;if(o!==undefined){const a=o.properties.by_name(t);if(a){e.target=a;return e}const r=o.navigationProperties.by_name(t);if(r){e.target=r;return e}}}break;case"ActionParameter":const o=e.target.typeReference;if(o!==undefined){const r=s(a,o,t);e.target=r.target;e.objectPath=r.objectPath.reduce(n,e.objectPath);return e}break;case"NavigationProperty":const i=s(a,e.target.targetType,t);e.target=i.target;e.objectPath=i.objectPath.reduce(n,e.objectPath);return e;default:if(t===""){return e}if(e.target[t]){e.target=e.target[t];e.objectPath=n(e.objectPath,e.target);return e}}return m(`Element '${t}' not found at ${e.target._type} '${e.target.fullyQualifiedName}'`)},{target:e,objectPath:[],messages:[]});y.messages.forEach(e=>a.logError(e.message));if(!y.target){if(o){const r=g(a,o,e.fullyQualifiedName);a.logError("Unable to resolve the path expression: "+"\n"+t+"\n"+"\n"+"Hint: Check and correct the path values under the following structure in the metadata (annotation.xml file or CDS annotations for the application): \n\n"+"<Annotation Term = "+o+">"+"\n"+"<Record Type = "+r+">"+"\n"+"<AnnotationPath = "+t+">")}else{a.logError("Unable to resolve the path expression: "+t+"\n"+"\n"+"Hint: Check and correct the path values under the following structure in the metadata (annotation.xml file or CDS annotations for the application): \n\n"+"<Annotation Term = "+v[0]+">"+"\n"+"<PropertyValue  Path= "+v[1]+">")}}return y}function c(a){return a.includes("@")}function l(a,e,t,o,n){const c={type:"PropertyPath",value:e.PropertyPath,fullyQualifiedName:t,[i]:o};(0,r.lazy)(c,"$target",()=>s(a,o,e.PropertyPath,n).target);return c}function u(a,e,t,o,n){const c={type:"AnnotationPath",value:a.unalias(e.AnnotationPath),fullyQualifiedName:t,[i]:o};(0,r.lazy)(c,"$target",()=>s(a,o,c.value,n).target);return c}function p(a,e,t,o,n){var c;const l={type:"NavigationPropertyPath",value:(c=e.NavigationPropertyPath)!==null&&c!==void 0?c:"",fullyQualifiedName:t,[i]:o};(0,r.lazy)(l,"$target",()=>s(a,o,e.NavigationPropertyPath,n).target);return l}function m(a,e,t,o,n){const c={type:"Path",path:e.Path,fullyQualifiedName:t,getValue(){return undefined},[i]:o};(0,r.lazy)(c,"$target",()=>s(a,o,e.Path,n).target);return c}function v(a,e,t,i,n,v,g){if(v===undefined){return undefined}switch(v.type){case"String":return v.String;case"Int":return v.Int;case"Bool":return v.Bool;case"Decimal":return(0,r.Decimal)(v.Decimal);case"Date":return v.Date;case"EnumMember":const y=v.EnumMember.split(" ").map(e=>{var t;const i=(t=a.unalias(e))!==null&&t!==void 0?t:"";return(0,r.alias)(o.VocabularyReferences,i)});if(y[0]!==undefined&&r.EnumIsFlag[(0,r.substringBeforeFirst)(y[0],"/")]){return y}return y[0];case"PropertyPath":return l(a,v,g,e,t);case"NavigationPropertyPath":return p(a,v,g,e,t);case"AnnotationPath":return u(a,v,g,e,t);case"Path":{if(c(v.Path)){return s(a,e,v.Path,t).target}else{return m(a,v,g,e,t)}}case"Record":return d(a,t,e,i,n,v.Record,g);case"Collection":return b(a,e,t,i,n,v.Collection,g);case"Apply":case"Null":case"Not":case"Eq":case"Ne":case"Gt":case"Ge":case"Lt":case"Le":case"If":case"And":case"Or":default:return v}}function g(a,e,t,o){let i=r.TermToTypes[e];if(o){e=`${(0,r.substringBeforeLast)(e,".")}.${o}`;i=r.TermToTypes[e]}a.logError(`The type of the record used within the term ${e} was not defined and was inferred as ${i}.\nHint: If possible, try to maintain the Type property for each Record.\n<Annotations Target="${t}">\n\t<Annotation Term="${e}">\n\t\t<Record>...</Record>\n\t</Annotation>\n</Annotations>`);return i}function y(a){return a.hasOwnProperty("Action")&&(a.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||a.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithAction")}function O(a,e,t,o,r){let i;if(!r.type&&e){i=g(a,e,t.fullyQualifiedName,o)}else{i=a.unalias(r.type)}return i}function d(a,e,t,o,n,s,c){const l={$Type:O(a,e,t,o,s),fullyQualifiedName:c,[i]:t,__source:n};for(const o of s.propertyValues){(0,r.lazy)(l,o.name,()=>v(a,t,e,o.name,n,o.value,`${c}/${o.name}`))}(0,r.lazy)(l,"annotations",I(a,s,l));if(y(l)){(0,r.lazy)(l,"ActionTarget",()=>{var e,o;const r=a.unalias((e=l.Action)===null||e===void 0?void 0:e.toString());let i=t.actions[r];if(!i){i=(o=a.getConvertedActionImport(r))===null||o===void 0?void 0:o.action}if(!i){i=a.getConvertedAction(r);if(!(i===null||i===void 0?void 0:i.isBound)){i=undefined}}if(!i){a.logError(`${l.fullyQualifiedName}: Unable to resolve '${l.Action}' ('${r}')`)}return i})}return l}function f(a){let e=a.type;if(e===undefined&&a.length>0){const t=a[0];if(t.hasOwnProperty("PropertyPath")){e="PropertyPath"}else if(t.hasOwnProperty("Path")){e="Path"}else if(t.hasOwnProperty("AnnotationPath")){e="AnnotationPath"}else if(t.hasOwnProperty("NavigationPropertyPath")){e="NavigationPropertyPath"}else if(typeof t==="object"&&(t.hasOwnProperty("type")||t.hasOwnProperty("propertyValues"))){e="Record"}else if(typeof t==="string"){e="String"}}else if(e===undefined){e="EmptyCollection"}return e}function b(a,e,t,o,r,i,n){const c=f(i);switch(c){case"PropertyPath":return i.map((o,r)=>l(a,o,`${n}/${r}`,e,t));case"Path":return i.map(o=>s(a,e,o.Path,t).target);case"AnnotationPath":return i.map((o,r)=>u(a,o,`${n}/${r}`,e,t));case"NavigationPropertyPath":return i.map((o,r)=>p(a,o,`${n}/${r}`,e,t));case"Record":return i.map((i,s)=>d(a,t,e,o,r,i,`${n}/${s}`));case"Apply":case"Null":case"If":case"Eq":case"Ne":case"Lt":case"Gt":case"Le":case"Ge":case"Not":case"And":case"Or":return i.map(a=>a);case"String":return i.map(a=>{if(typeof a==="string"||a===undefined){return a}else{return a.String}});default:if(i.length===0){return[]}throw new Error("Unsupported case")}}function C(a){return!!a.targetTypeName}function D(a,e,t){var n;let s;if(t.record){s=d(a,t.term,e,"",t.__source,t.record,t.fullyQualifiedName)}else if(t.collection===undefined){s=v(a,e,t.term,"",t.__source,(n=t.value)!==null&&n!==void 0?n:{type:"Bool",Bool:true},t.fullyQualifiedName)}else if(t.collection){s=b(a,e,t.term,"",t.__source,t.collection,t.fullyQualifiedName)}else{throw new Error("Unsupported case")}switch(typeof s){case"string":s=new String(s);break;case"boolean":s=new Boolean(s);break;case"number":s=new Number(s);break;default:break}s.fullyQualifiedName=t.fullyQualifiedName;s[i]=e;const[c,l]=a.splitTerm(t.term);s.term=a.unalias(`${c}.${l}`,o.VocabularyReferences);s.qualifier=t.qualifier;s.__source=t.__source;try{(0,r.lazy)(s,"annotations",I(a,t,s))}catch(a){}return s}class T{getAnnotations(a){var e;if(this.annotationsByTarget===undefined){const a=Object.keys(this.rawSchema.annotations).map(a=>({name:a,annotationList:this.rawSchema.annotations[a]}));this.annotationsByTarget=(0,r.mergeAnnotations)(this.rawMetadata.references,...a)}return(e=this.annotationsByTarget[a])!==null&&e!==void 0?e:[]}getConvertedEntityContainer(){return this.getConvertedElement(this.rawMetadata.schema.entityContainer.fullyQualifiedName,this.rawMetadata.schema.entityContainer,S)}getConvertedEntitySet(a){return this.convertedOutput.entitySets.by_fullyQualifiedName(a)}getConvertedSingleton(a){return this.convertedOutput.singletons.by_fullyQualifiedName(a)}getConvertedEntityType(a){return this.convertedOutput.entityTypes.by_fullyQualifiedName(a)}getConvertedComplexType(a){return this.convertedOutput.complexTypes.by_fullyQualifiedName(a)}getConvertedTypeDefinition(a){return this.convertedOutput.typeDefinitions.by_fullyQualifiedName(a)}getConvertedActionImport(a){let e=this.convertedOutput.actionImports.by_fullyQualifiedName(a);if(!e){e=this.convertedOutput.actionImports.by_name(a)}return e}getConvertedAction(a){return this.convertedOutput.actions.by_fullyQualifiedName(a)}convert(a,e){if(Array.isArray(a)){return()=>{const t=a.reduce((a,t)=>{const o=this.getConvertedElement(t.fullyQualifiedName,t,e);if(o){a.push(o)}return a},[]);(0,r.addGetByValue)(t,"name");(0,r.addGetByValue)(t,"fullyQualifiedName");return t}}else{return()=>this.getConvertedElement(a.fullyQualifiedName,a,e)}}constructor(a,e){this.convertedElements=new Map;this.rawMetadata=a;this.rawSchema=a.schema;this.convertedOutput=e}getConvertedElement(a,e,t){let o=this.convertedElements.get(a);if(o===undefined){const r=typeof e==="function"?e.apply(undefined,[a]):e;if(r!==undefined){o=t.apply(undefined,[this,r]);this.convertedElements.set(a,o)}}return o}logError(a){this.convertedOutput.diagnostics.push({message:a})}splitTerm(a){const e=(0,r.alias)(o.VocabularyReferences,a);return(0,r.splitAtLast)(e,".")}unalias(a,e=this.rawMetadata.references){var t;return(t=(0,r.unalias)(e,a,this.rawSchema.namespace))!==null&&t!==void 0?t:""}}function h(a,e){return()=>{let t=a.getConvertedEntityType(e);if(!t){a.logError(`EntityType '${e}' not found`);t={}}return t}}function V(a,e){return()=>Object.keys(e).reduce((t,o)=>{const i=e[o];(0,r.lazy)(t,o,()=>{var e;return(e=a.getConvertedEntitySet(i))!==null&&e!==void 0?e:a.getConvertedSingleton(i)});return t},{})}function P(a,e){const t=e.annotations;return()=>A(a,e,t!==null&&t!==void 0?t:a.getAnnotations(e.fullyQualifiedName))}function I(a,e,t){return()=>{const o=t.fullyQualifiedName;let r;if(e.annotations&&e.annotations.length>0){r=e.annotations}else{r=a.getAnnotations(o)}r===null||r===void 0?void 0:r.forEach(a=>{a.target=o;a.__source=t.__source;a[i]=t[i];a.fullyQualifiedName=`${o}@${a.term}`});return A(a,t,r!==null&&r!==void 0?r:[])}}function A(a,e,t){return t.reduce((t,o)=>{const[i,n]=a.splitTerm(o.term);const s=`${n}${o.qualifier?"#"+o.qualifier:""}`;if(t[i]===undefined){t[i]={}}if(!t[i].hasOwnProperty(s)){(0,r.lazy)(t[i],s,()=>a.getConvertedElement(o.fullyQualifiedName,o,(a,t)=>D(a,e,t)))}return t},{})}function S(a,e){const t=e;(0,r.lazy)(t,"annotations",P(a,e));(0,r.lazy)(t,"entitySets",a.convert(a.rawSchema.entitySets,U));(0,r.lazy)(t,"singletons",a.convert(a.rawSchema.singletons,E));(0,r.lazy)(t,"actionImports",a.convert(a.rawSchema.actionImports,M));return t}function E(a,e){const t=e;(0,r.lazy)(t,"entityType",h(a,e.entityTypeName));(0,r.lazy)(t,"annotations",P(a,t));const o=e.navigationPropertyBinding;(0,r.lazy)(t,"navigationPropertyBinding",V(a,o));return t}function U(a,e){const t=e;(0,r.lazy)(t,"entityType",h(a,e.entityTypeName));(0,r.lazy)(t,"annotations",P(a,t));const o=e.navigationPropertyBinding;(0,r.lazy)(t,"navigationPropertyBinding",V(a,o));return t}function N(a,e){const t=e;e.keys.forEach(a=>{a.isKey=true});(0,r.lazy)(t,"annotations",P(a,e));(0,r.lazy)(t,"keys",a.convert(e.keys,R));(0,r.lazy)(t,"entityProperties",a.convert(e.entityProperties,R));(0,r.lazy)(t,"navigationProperties",a.convert(e.navigationProperties,x));(0,r.lazy)(t,"actions",()=>a.rawSchema.actions.filter(a=>a.isBound&&(a.sourceType===e.fullyQualifiedName||a.sourceType===`Collection(${e.fullyQualifiedName})`)).reduce((e,t)=>{const o=`${a.rawSchema.namespace}.${t.name}`;e[o]=a.getConvertedAction(t.fullyQualifiedName);return e},{}));t.resolvePath=(t,o)=>{const r=s(a,e,t);if(o){return{target:r.target,visitedObjects:r.objectPath,messages:r.messages}}else{return r.target}};return t}function R(a,e){const t=e;(0,r.lazy)(t,"annotations",P(a,e));(0,r.lazy)(t,"targetType",()=>{var t;const o=e.type;const r=o.startsWith("Collection")?o.substring(11,o.length-1):o;return(t=a.getConvertedComplexType(r))!==null&&t!==void 0?t:a.getConvertedTypeDefinition(r)});return t}function x(a,e){var t,o,i;const n=e;n.referentialConstraint=(t=n.referentialConstraint)!==null&&t!==void 0?t:[];if(!C(e)){const t=(o=a.rawSchema.associations.find(a=>a.fullyQualifiedName===e.relationship))===null||o===void 0?void 0:o.associationEnd.find(a=>a.role===e.toRole);n.isCollection=(t===null||t===void 0?void 0:t.multiplicity)==="*";n.targetTypeName=(i=t===null||t===void 0?void 0:t.type)!==null&&i!==void 0?i:""}(0,r.lazy)(n,"targetType",h(a,e.targetTypeName));(0,r.lazy)(n,"annotations",P(a,e));return n}function M(a,e){const t=e;(0,r.lazy)(t,"annotations",P(a,e));(0,r.lazy)(t,"action",()=>{const t=a.rawSchema.actions.filter(a=>!a.isBound&&a.fullyQualifiedName.startsWith(e.actionName));if(t.length>1){a.logError(`Ambiguous reference in action import: ${e.fullyQualifiedName}`)}return a.getConvertedAction(t[0].fullyQualifiedName)});return t}function $(a,e){const t=e;if(t.sourceType){(0,r.lazy)(t,"sourceEntityType",h(a,e.sourceType))}if(t.returnType){(0,r.lazy)(t,"returnEntityType",h(a,e.returnType))}(0,r.lazy)(t,"parameters",a.convert(e.parameters,F));(0,r.lazy)(t,"annotations",()=>{const t=(0,r.substringBeforeFirst)(e.fullyQualifiedName,"(");const o=e.fullyQualifiedName;const i=a.getAnnotations(o);const n=a.getAnnotations(t);for(const a of n){if(!i.some(e=>e.term===a.term&&e.qualifier===a.qualifier)){i.push(a)}}return A(a,e,i)});return t}function F(a,e){const t=e;(0,r.lazy)(t,"typeReference",()=>{var t,o;return(o=(t=a.getConvertedEntityType(e.type))!==null&&t!==void 0?t:a.getConvertedComplexType(e.type))!==null&&o!==void 0?o:a.getConvertedTypeDefinition(e.type)});(0,r.lazy)(t,"annotations",()=>{const t=e.fullyQualifiedName.substring(0,e.fullyQualifiedName.indexOf("("))+e.fullyQualifiedName.substring(e.fullyQualifiedName.indexOf(")")+1);const o=e.fullyQualifiedName;const r=a.getAnnotations(o);const i=a.getAnnotations(t);for(const a of i){if(!r.some(e=>e.term===a.term&&e.qualifier===a.qualifier)){r.push(a)}}return A(a,e,r)});return t}function w(a,e){const t=e;(0,r.lazy)(t,"properties",a.convert(e.properties,R));(0,r.lazy)(t,"navigationProperties",a.convert(e.navigationProperties,x));(0,r.lazy)(t,"annotations",P(a,e));return t}function Q(a,e){const t=e;(0,r.lazy)(t,"annotations",P(a,e));return t}function L(a){const e={version:a.version,namespace:a.schema.namespace,annotations:a.schema.annotations,references:o.VocabularyReferences,diagnostics:[]};if(a.references.length===0){a.references=o.VocabularyReferences}const t=new T(a,e);(0,r.lazy)(e,"entityContainer",t.convert(t.rawSchema.entityContainer,S));(0,r.lazy)(e,"entitySets",t.convert(t.rawSchema.entitySets,U));(0,r.lazy)(e,"singletons",t.convert(t.rawSchema.singletons,E));(0,r.lazy)(e,"entityTypes",t.convert(t.rawSchema.entityTypes,N));(0,r.lazy)(e,"actions",t.convert(t.rawSchema.actions,$));(0,r.lazy)(e,"complexTypes",t.convert(t.rawSchema.complexTypes,w));(0,r.lazy)(e,"actionImports",t.convert(t.rawSchema.actionImports,M));(0,r.lazy)(e,"typeDefinitions",t.convert(t.rawSchema.typeDefinitions,Q));e.resolvePath=function a(e){const o=s(t,undefined,e);if(o.target){n(o.objectPath,o.target)}return o};return e}e.convert=L},348:function(a,e,t){var o=this&&this.__createBinding||(Object.create?function(a,e,t,o){if(o===undefined)o=t;var r=Object.getOwnPropertyDescriptor(e,t);if(!r||("get"in r?!e.__esModule:r.writable||r.configurable)){r={enumerable:true,get:function(){return e[t]}}}Object.defineProperty(a,o,r)}:function(a,e,t,o){if(o===undefined)o=t;a[o]=e[t]});var r=this&&this.__exportStar||function(a,e){for(var t in a)if(t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t))o(e,a,t)};Object.defineProperty(e,"__esModule",{value:true});r(t(880),e);r(t(989),e);r(t(496),e)},989:function(a,e,t){Object.defineProperty(e,"__esModule",{value:true});e.mergeAnnotations=e.addGetByValue=e.createIndexedFind=e.lazy=e.Decimal=e.isComplexTypeDefinition=e.unalias=e.alias=e.substringBeforeLast=e.substringBeforeFirst=e.splitAtLast=e.splitAtFirst=e.defaultReferences=e.TermToTypes=e.EnumIsFlag=void 0;var o=t(684);Object.defineProperty(e,"EnumIsFlag",{enumerable:true,get:function(){return o.EnumIsFlag}});var r=t(171);Object.defineProperty(e,"TermToTypes",{enumerable:true,get:function(){return r.TermToTypes}});var i=t(921);Object.defineProperty(e,"defaultReferences",{enumerable:true,get:function(){return i.VocabularyReferences}});function n(a,e){return e<0?[a,""]:[a.substring(0,e),a.substring(e+1)]}function s(a,e){return e<0?a:a.substring(0,e)}function c(a,e){return n(a,a.indexOf(e))}e.splitAtFirst=c;function l(a,e){return n(a,a.lastIndexOf(e))}e.splitAtLast=l;function u(a,e){return s(a,a.indexOf(e))}e.substringBeforeFirst=u;function p(a,e){return s(a,a.lastIndexOf(e))}e.substringBeforeLast=p;function m(a,e){if(!a.reverseReferenceMap){a.reverseReferenceMap=a.reduce((a,e)=>{a[e.namespace]=e;return a},{})}if(!e){return e}const[t,o]=l(e,".");const r=a.reverseReferenceMap[t];if(r){return`${r.alias}.${o}`}else if(e.includes("@")){const[t,o]=c(e,"@");return`${t}@${m(a,o)}`}else{return e}}e.alias=m;function v(a,e,t){var o;const r=e=>{if(!a.referenceMap){a.referenceMap=Object.fromEntries(a.map(a=>[a.alias,a]))}const[o,r]=c(e,".");if(!r||r.includes(".")){return e}const i=o.startsWith("@");const n=i?o.substring(1):o;const s=a.referenceMap[n];if(s){return i?`@${s.namespace}.${r}`:`${s.namespace}.${r}`}return t&&!i?`${t}.${r}`:e};return(o=e===null||e===void 0?void 0:e.split("/").reduce((a,e)=>{const[t,o]=c(e,"(");const i=[r(t)];if(o){const a=o.slice(0,-1);i.push(`(${r(a)})`)}a.push(i.join(""));return a},[]))===null||o===void 0?void 0:o.join("/")}e.unalias=v;function g(a){return!!a&&a._type==="ComplexType"&&!!a.properties}e.isComplexTypeDefinition=g;function y(a){return{isDecimal(){return true},valueOf(){return a},toString(){return a.toString()}}}e.Decimal=y;function O(a,e,t){const o=Symbol("initial");let r=o;Object.defineProperty(a,e,{enumerable:true,get(){if(r===o){r=t()}return r},set(a){r=a}})}e.lazy=O;function d(a,e){const t=new Map;return function o(r){const i=t.get(r);if((i===null||i===void 0?void 0:i[e])===r){return i}return a.find(a=>{if(!(a===null||a===void 0?void 0:a.hasOwnProperty(e))){return false}const o=a[e];t.set(o,a);return o===r})}}e.createIndexedFind=d;function f(a,e){const t=`by_${e}`;if(!a.hasOwnProperty(t)){Object.defineProperty(a,t,{writable:false,value:d(a,e)})}else{throw new Error(`Property '${t}' already exists`)}return a}e.addGetByValue=f;function b(a,...e){return e.reduceRight((e,{name:t,annotationList:o})=>{var r;for(const{target:i,annotations:n}of o){const o=(r=v(a,i))!==null&&r!==void 0?r:i;if(!e[o]){e[o]=[]}const s=n.map(e=>{var r;e.term=(r=v(a,e.term))!==null&&r!==void 0?r:e.term;e.fullyQualifiedName=e.qualifier?`${o}@${e.term}#${e.qualifier}`:`${o}@${e.term}`;e.__source=t;return e}).filter(a=>!e[o].some(e=>e.term===a.term&&e.qualifier===a.qualifier));e[o].push(...s)}return e},{})}e.mergeAnnotations=b},496:function(a,e,t){Object.defineProperty(e,"__esModule",{value:true});e.revertTermToGenericType=void 0;const o=t(989);function r(a,e){var t,o,r,i,n,s;let l;if(Array.isArray(e)){l={type:"Collection",Collection:e.map(e=>c(a,e))}}else if((t=e.isDecimal)===null||t===void 0?void 0:t.call(e)){l={type:"Decimal",Decimal:e.valueOf()}}else if((o=e.isString)===null||o===void 0?void 0:o.call(e)){const t=e.valueOf().split(".");if(t.length>1&&a.find(a=>a.alias===t[0])){l={type:"EnumMember",EnumMember:e.valueOf()}}else{l={type:"String",String:e.valueOf()}}}else if((r=e.isInt)===null||r===void 0?void 0:r.call(e)){l={type:"Int",Int:e.valueOf()}}else if((i=e.isFloat)===null||i===void 0?void 0:i.call(e)){l={type:"Float",Float:e.valueOf()}}else if((n=e.isDate)===null||n===void 0?void 0:n.call(e)){l={type:"Date",Date:e.valueOf()}}else if((s=e.isBoolean)===null||s===void 0?void 0:s.call(e)){l={type:"Bool",Bool:e.valueOf()}}else if(e.type==="Path"){l={type:"Path",Path:e.path}}else if(e.type==="AnnotationPath"){l={type:"AnnotationPath",AnnotationPath:e.value}}else if(e.type==="Apply"){l={type:"Apply",$Apply:e.$Apply,$Function:e.$Function}}else if(e.type==="Null"){l={type:"Null"}}else if(e.type==="PropertyPath"){l={type:"PropertyPath",PropertyPath:e.value}}else if(e.type==="NavigationPropertyPath"){l={type:"NavigationPropertyPath",NavigationPropertyPath:e.value}}else if(Object.prototype.hasOwnProperty.call(e,"$Type")){l={type:"Record",Record:c(a,e)}}return l}function i(a,e){let t;const o=e===null||e===void 0?void 0:e.constructor.name;switch(o){case"String":case"string":const o=e.toString().split(".");if(o.length>1&&a.find(a=>a.alias===o[0])){t={type:"EnumMember",EnumMember:e.toString()}}else{t={type:"String",String:e.toString()}}break;case"Boolean":case"boolean":t={type:"Bool",Bool:e.valueOf()};break;case"Number":case"number":if(e.toString()===e.toFixed()){t={type:"Int",Int:e.valueOf()}}else{t={type:"Decimal",Decimal:e.valueOf()}}break;case"object":default:t=r(a,e);break}return t}const n=["$Type","term","__source","qualifier","ActionTarget","fullyQualifiedName","annotations"];function s(a,e,t){Object.keys(e).filter(a=>a!=="_annotations").forEach(r=>{Object.keys(e[r]).forEach(i=>{const n=l(a,e[r][i]);if(!n.term){const e=(0,o.unalias)(a,`${r}.${i}`);if(e){const a=e.split("#");n.term=a[0];if(a.length>1){n.qualifier=a[1]}}}t.push(n)})})}function c(a,e){if(typeof e==="string"){return e}else if(typeof e==="object"){if(e.hasOwnProperty("$Type")){const t={type:e.$Type,propertyValues:[]};Object.keys(e).forEach(o=>{if(n.indexOf(o)===-1){const r=e[o];t.propertyValues.push({name:o,value:i(a,r)})}else if(o==="annotations"&&Object.keys(e[o]).length>0){t.annotations=[];s(a,e[o],t.annotations)}});return t}else if(e.type==="PropertyPath"){return{type:"PropertyPath",PropertyPath:e.value}}else if(e.type==="AnnotationPath"){return{type:"AnnotationPath",AnnotationPath:e.value}}else if(e.type==="NavigationPropertyPath"){return{type:"NavigationPropertyPath",NavigationPropertyPath:e.value}}}return undefined}function l(a,e){const t={term:e.term,qualifier:e.qualifier};if(Array.isArray(e)){if(e.hasOwnProperty("annotations")&&Object.keys(e.annotations).length>0){t.annotations=[];s(a,e.annotations,t.annotations)}return{...t,collection:e.map(e=>c(a,e))}}else if(e.hasOwnProperty("$Type")){return{...t,record:c(a,e)}}else{return{...t,value:i(a,e)}}}e.revertTermToGenericType=l},684:function(a,e){Object.defineProperty(e,"__esModule",{value:true});e.EnumIsFlag=void 0;e.EnumIsFlag={"Authorization.KeyLocation":false,"Core.RevisionKind":false,"Core.DataModificationOperationKind":false,"Core.Permission":true,"Capabilities.ConformanceLevelType":false,"Capabilities.IsolationLevel":true,"Capabilities.NavigationType":false,"Capabilities.SearchExpressions":true,"Capabilities.HttpMethod":true,"Aggregation.RollupType":false,"Common.TextFormatType":false,"Common.FilterExpressionType":false,"Common.FieldControlType":false,"Common.EffectType":true,"Communication.KindType":false,"Communication.ContactInformationType":true,"Communication.PhoneType":true,"Communication.GenderType":false,"UI.VisualizationType":false,"UI.CriticalityType":false,"UI.ImprovementDirectionType":false,"UI.TrendType":false,"UI.ChartType":false,"UI.ChartAxisScaleBehaviorType":false,"UI.ChartAxisAutoScaleDataScopeType":false,"UI.ChartDimensionRoleType":false,"UI.ChartMeasureRoleType":false,"UI.SelectionRangeSignType":false,"UI.SelectionRangeOptionType":false,"UI.TextArrangementType":false,"UI.ImportanceType":false,"UI.CriticalityRepresentationType":false,"UI.OperationGroupingType":false}},171:function(a,e){Object.defineProperty(e,"__esModule",{value:true});e.TermToTypes=void 0;var t;(function(a){a["Org.OData.Authorization.V1.SecuritySchemes"]="Org.OData.Authorization.V1.SecurityScheme";a["Org.OData.Authorization.V1.Authorizations"]="Org.OData.Authorization.V1.Authorization";a["Org.OData.Core.V1.Revisions"]="Org.OData.Core.V1.RevisionType";a["Org.OData.Core.V1.Links"]="Org.OData.Core.V1.Link";a["Org.OData.Core.V1.Example"]="Org.OData.Core.V1.ExampleValue";a["Org.OData.Core.V1.Messages"]="Org.OData.Core.V1.MessageType";a["Org.OData.Core.V1.ValueException"]="Org.OData.Core.V1.ValueExceptionType";a["Org.OData.Core.V1.ResourceException"]="Org.OData.Core.V1.ResourceExceptionType";a["Org.OData.Core.V1.DataModificationException"]="Org.OData.Core.V1.DataModificationExceptionType";a["Org.OData.Core.V1.IsLanguageDependent"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.AppliesViaContainer"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.DereferenceableIDs"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.ConventionalIDs"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.Permissions"]="Org.OData.Core.V1.Permission";a["Org.OData.Core.V1.DefaultNamespace"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.Immutable"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.Computed"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.ComputedDefaultValue"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.IsURL"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.IsMediaType"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.ContentDisposition"]="Org.OData.Core.V1.ContentDispositionType";a["Org.OData.Core.V1.OptimisticConcurrency"]="Edm.PropertyPath";a["Org.OData.Core.V1.AdditionalProperties"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.AutoExpand"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.AutoExpandReferences"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.MayImplement"]="Org.OData.Core.V1.QualifiedTypeName";a["Org.OData.Core.V1.Ordered"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.PositionalInsert"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.AlternateKeys"]="Org.OData.Core.V1.AlternateKey";a["Org.OData.Core.V1.OptionalParameter"]="Org.OData.Core.V1.OptionalParameterType";a["Org.OData.Core.V1.OperationAvailable"]="Edm.Boolean";a["Org.OData.Core.V1.RequiresExplicitBinding"]="Org.OData.Core.V1.Tag";a["Org.OData.Core.V1.ExplicitOperationBindings"]="Org.OData.Core.V1.QualifiedBoundOperationName";a["Org.OData.Core.V1.SymbolicName"]="Org.OData.Core.V1.SimpleIdentifier";a["Org.OData.Core.V1.GeometryFeature"]="Org.OData.Core.V1.GeometryFeatureType";a["Org.OData.Core.V1.AnyStructure"]="Org.OData.Core.V1.Tag";a["Org.OData.Capabilities.V1.ConformanceLevel"]="Org.OData.Capabilities.V1.ConformanceLevelType";a["Org.OData.Capabilities.V1.AsynchronousRequestsSupported"]="Org.OData.Core.V1.Tag";a["Org.OData.Capabilities.V1.BatchContinueOnErrorSupported"]="Org.OData.Core.V1.Tag";a["Org.OData.Capabilities.V1.IsolationSupported"]="Org.OData.Capabilities.V1.IsolationLevel";a["Org.OData.Capabilities.V1.CrossJoinSupported"]="Org.OData.Core.V1.Tag";a["Org.OData.Capabilities.V1.CallbackSupported"]="Org.OData.Capabilities.V1.CallbackType";a["Org.OData.Capabilities.V1.ChangeTracking"]="Org.OData.Capabilities.V1.ChangeTrackingType";a["Org.OData.Capabilities.V1.CountRestrictions"]="Org.OData.Capabilities.V1.CountRestrictionsType";a["Org.OData.Capabilities.V1.NavigationRestrictions"]="Org.OData.Capabilities.V1.NavigationRestrictionsType";a["Org.OData.Capabilities.V1.IndexableByKey"]="Org.OData.Core.V1.Tag";a["Org.OData.Capabilities.V1.TopSupported"]="Org.OData.Core.V1.Tag";a["Org.OData.Capabilities.V1.SkipSupported"]="Org.OData.Core.V1.Tag";a["Org.OData.Capabilities.V1.ComputeSupported"]="Org.OData.Core.V1.Tag";a["Org.OData.Capabilities.V1.SelectSupport"]="Org.OData.Capabilities.V1.SelectSupportType";a["Org.OData.Capabilities.V1.BatchSupported"]="Org.OData.Core.V1.Tag";a["Org.OData.Capabilities.V1.BatchSupport"]="Org.OData.Capabilities.V1.BatchSupportType";a["Org.OData.Capabilities.V1.FilterRestrictions"]="Org.OData.Capabilities.V1.FilterRestrictionsType";a["Org.OData.Capabilities.V1.SortRestrictions"]="Org.OData.Capabilities.V1.SortRestrictionsType";a["Org.OData.Capabilities.V1.ExpandRestrictions"]="Org.OData.Capabilities.V1.ExpandRestrictionsType";a["Org.OData.Capabilities.V1.SearchRestrictions"]="Org.OData.Capabilities.V1.SearchRestrictionsType";a["Org.OData.Capabilities.V1.KeyAsSegmentSupported"]="Org.OData.Core.V1.Tag";a["Org.OData.Capabilities.V1.QuerySegmentSupported"]="Org.OData.Core.V1.Tag";a["Org.OData.Capabilities.V1.InsertRestrictions"]="Org.OData.Capabilities.V1.InsertRestrictionsType";a["Org.OData.Capabilities.V1.DeepInsertSupport"]="Org.OData.Capabilities.V1.DeepInsertSupportType";a["Org.OData.Capabilities.V1.UpdateRestrictions"]="Org.OData.Capabilities.V1.UpdateRestrictionsType";a["Org.OData.Capabilities.V1.DeepUpdateSupport"]="Org.OData.Capabilities.V1.DeepUpdateSupportType";a["Org.OData.Capabilities.V1.DeleteRestrictions"]="Org.OData.Capabilities.V1.DeleteRestrictionsType";a["Org.OData.Capabilities.V1.CollectionPropertyRestrictions"]="Org.OData.Capabilities.V1.CollectionPropertyRestrictionsType";a["Org.OData.Capabilities.V1.OperationRestrictions"]="Org.OData.Capabilities.V1.OperationRestrictionsType";a["Org.OData.Capabilities.V1.AnnotationValuesInQuerySupported"]="Org.OData.Core.V1.Tag";a["Org.OData.Capabilities.V1.ModificationQueryOptions"]="Org.OData.Capabilities.V1.ModificationQueryOptionsType";a["Org.OData.Capabilities.V1.ReadRestrictions"]="Org.OData.Capabilities.V1.ReadRestrictionsType";a["Org.OData.Capabilities.V1.CustomHeaders"]="Org.OData.Capabilities.V1.CustomParameter";a["Org.OData.Capabilities.V1.CustomQueryOptions"]="Org.OData.Capabilities.V1.CustomParameter";a["Org.OData.Capabilities.V1.MediaLocationUpdateSupported"]="Org.OData.Core.V1.Tag";a["Org.OData.Capabilities.V1.DefaultCapabilities"]="Org.OData.Capabilities.V1.DefaultCapabilitiesType";a["Org.OData.Aggregation.V1.ApplySupported"]="Org.OData.Aggregation.V1.ApplySupportedType";a["Org.OData.Aggregation.V1.ApplySupportedDefaults"]="Org.OData.Aggregation.V1.ApplySupportedBase";a["Org.OData.Aggregation.V1.Groupable"]="Org.OData.Core.V1.Tag";a["Org.OData.Aggregation.V1.Aggregatable"]="Org.OData.Core.V1.Tag";a["Org.OData.Aggregation.V1.ContextDefiningProperties"]="Edm.PropertyPath";a["Org.OData.Aggregation.V1.LeveledHierarchy"]="Edm.PropertyPath";a["Org.OData.Aggregation.V1.RecursiveHierarchy"]="Org.OData.Aggregation.V1.RecursiveHierarchyType";a["Org.OData.Aggregation.V1.AvailableOnAggregates"]="Org.OData.Aggregation.V1.AvailableOnAggregatesType";a["Org.OData.Validation.V1.Minimum"]="Edm.PrimitiveType";a["Org.OData.Validation.V1.Maximum"]="Edm.PrimitiveType";a["Org.OData.Validation.V1.Exclusive"]="Org.OData.Core.V1.Tag";a["Org.OData.Validation.V1.AllowedValues"]="Org.OData.Validation.V1.AllowedValue";a["Org.OData.Validation.V1.MultipleOf"]="Edm.Decimal";a["Org.OData.Validation.V1.Constraint"]="Org.OData.Validation.V1.ConstraintType";a["Org.OData.Validation.V1.ItemsOf"]="Org.OData.Validation.V1.ItemsOfType";a["Org.OData.Validation.V1.OpenPropertyTypeConstraint"]="Org.OData.Validation.V1.SingleOrCollectionType";a["Org.OData.Validation.V1.DerivedTypeConstraint"]="Org.OData.Validation.V1.SingleOrCollectionType";a["Org.OData.Validation.V1.AllowedTerms"]="Org.OData.Core.V1.QualifiedTermName";a["Org.OData.Validation.V1.ApplicableTerms"]="Org.OData.Core.V1.QualifiedTermName";a["Org.OData.Validation.V1.MaxItems"]="Edm.Int64";a["Org.OData.Validation.V1.MinItems"]="Edm.Int64";a["Org.OData.Measures.V1.Scale"]="Edm.Byte";a["Org.OData.Measures.V1.DurationGranularity"]="Org.OData.Measures.V1.DurationGranularityType";a["com.sap.vocabularies.Analytics.v1.Dimension"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Analytics.v1.Measure"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Analytics.v1.AccumulativeMeasure"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Analytics.v1.RolledUpPropertyCount"]="Edm.Int16";a["com.sap.vocabularies.Analytics.v1.PlanningAction"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Analytics.v1.AggregatedProperties"]="com.sap.vocabularies.Analytics.v1.AggregatedPropertyType";a["com.sap.vocabularies.Analytics.v1.AggregatedProperty"]="com.sap.vocabularies.Analytics.v1.AggregatedPropertyType";a["com.sap.vocabularies.Analytics.v1.AnalyticalContext"]="com.sap.vocabularies.Analytics.v1.AnalyticalContextType";a["com.sap.vocabularies.Common.v1.ServiceVersion"]="Edm.Int32";a["com.sap.vocabularies.Common.v1.ServiceSchemaVersion"]="Edm.Int32";a["com.sap.vocabularies.Common.v1.TextFor"]="Edm.PropertyPath";a["com.sap.vocabularies.Common.v1.IsLanguageIdentifier"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.TextFormat"]="com.sap.vocabularies.Common.v1.TextFormatType";a["com.sap.vocabularies.Common.v1.IsTimezone"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsDigitSequence"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsUpperCase"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsCurrency"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsUnit"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.UnitSpecificScale"]="Edm.PrimitiveType";a["com.sap.vocabularies.Common.v1.UnitSpecificPrecision"]="Edm.PrimitiveType";a["com.sap.vocabularies.Common.v1.SecondaryKey"]="Edm.PropertyPath";a["com.sap.vocabularies.Common.v1.MinOccurs"]="Edm.Int64";a["com.sap.vocabularies.Common.v1.MaxOccurs"]="Edm.Int64";a["com.sap.vocabularies.Common.v1.AssociationEntity"]="Edm.NavigationPropertyPath";a["com.sap.vocabularies.Common.v1.DerivedNavigation"]="Edm.NavigationPropertyPath";a["com.sap.vocabularies.Common.v1.Masked"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.RevealOnDemand"]="Edm.Boolean";a["com.sap.vocabularies.Common.v1.SemanticObjectMapping"]="com.sap.vocabularies.Common.v1.SemanticObjectMappingType";a["com.sap.vocabularies.Common.v1.IsInstanceAnnotation"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.FilterExpressionRestrictions"]="com.sap.vocabularies.Common.v1.FilterExpressionRestrictionType";a["com.sap.vocabularies.Common.v1.FieldControl"]="com.sap.vocabularies.Common.v1.FieldControlType";a["com.sap.vocabularies.Common.v1.Application"]="com.sap.vocabularies.Common.v1.ApplicationType";a["com.sap.vocabularies.Common.v1.Timestamp"]="Edm.DateTimeOffset";a["com.sap.vocabularies.Common.v1.ErrorResolution"]="com.sap.vocabularies.Common.v1.ErrorResolutionType";a["com.sap.vocabularies.Common.v1.Messages"]="Edm.ComplexType";a["com.sap.vocabularies.Common.v1.numericSeverity"]="com.sap.vocabularies.Common.v1.NumericMessageSeverityType";a["com.sap.vocabularies.Common.v1.MaximumNumericMessageSeverity"]="com.sap.vocabularies.Common.v1.NumericMessageSeverityType";a["com.sap.vocabularies.Common.v1.IsActionCritical"]="Edm.Boolean";a["com.sap.vocabularies.Common.v1.Attributes"]="Edm.PropertyPath";a["com.sap.vocabularies.Common.v1.RelatedRecursiveHierarchy"]="Edm.AnnotationPath";a["com.sap.vocabularies.Common.v1.Interval"]="com.sap.vocabularies.Common.v1.IntervalType";a["com.sap.vocabularies.Common.v1.ResultContext"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.SAPObjectNodeType"]="com.sap.vocabularies.Common.v1.SAPObjectNodeTypeType";a["com.sap.vocabularies.Common.v1.Composition"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsNaturalPerson"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.ValueList"]="com.sap.vocabularies.Common.v1.ValueListType";a["com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers"]="Org.OData.Core.V1.SimpleIdentifier";a["com.sap.vocabularies.Common.v1.ValueListWithFixedValues"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.ValueListShowValuesImmediately"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.ValueListMapping"]="com.sap.vocabularies.Common.v1.ValueListMappingType";a["com.sap.vocabularies.Common.v1.IsCalendarYear"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsCalendarHalfyear"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsCalendarQuarter"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsCalendarMonth"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsCalendarWeek"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsDayOfCalendarMonth"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsDayOfCalendarYear"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsCalendarYearHalfyear"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsCalendarDate"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsFiscalYear"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsFiscalPeriod"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsFiscalQuarter"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsFiscalYearQuarter"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsFiscalWeek"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsFiscalYearWeek"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsDayOfFiscalYear"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.IsFiscalYearVariant"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.MutuallyExclusiveTerm"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.DraftRoot"]="com.sap.vocabularies.Common.v1.DraftRootType";a["com.sap.vocabularies.Common.v1.DraftNode"]="com.sap.vocabularies.Common.v1.DraftNodeType";a["com.sap.vocabularies.Common.v1.DraftActivationVia"]="Org.OData.Core.V1.SimpleIdentifier";a["com.sap.vocabularies.Common.v1.EditableFieldFor"]="Edm.PropertyPath";a["com.sap.vocabularies.Common.v1.SemanticKey"]="Edm.PropertyPath";a["com.sap.vocabularies.Common.v1.SideEffects"]="com.sap.vocabularies.Common.v1.SideEffectsType";a["com.sap.vocabularies.Common.v1.DefaultValuesFunction"]="com.sap.vocabularies.Common.v1.QualifiedName";a["com.sap.vocabularies.Common.v1.FilterDefaultValue"]="Edm.PrimitiveType";a["com.sap.vocabularies.Common.v1.FilterDefaultValueHigh"]="Edm.PrimitiveType";a["com.sap.vocabularies.Common.v1.SortOrder"]="com.sap.vocabularies.Common.v1.SortOrderType";a["com.sap.vocabularies.Common.v1.RecursiveHierarchy"]="com.sap.vocabularies.Common.v1.RecursiveHierarchyType";a["com.sap.vocabularies.Common.v1.CreatedAt"]="Edm.DateTimeOffset";a["com.sap.vocabularies.Common.v1.CreatedBy"]="com.sap.vocabularies.Common.v1.UserID";a["com.sap.vocabularies.Common.v1.ChangedAt"]="Edm.DateTimeOffset";a["com.sap.vocabularies.Common.v1.ChangedBy"]="com.sap.vocabularies.Common.v1.UserID";a["com.sap.vocabularies.Common.v1.ApplyMultiUnitBehaviorForSortingAndFiltering"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Common.v1.PrimitivePropertyPath"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.CodeList.v1.CurrencyCodes"]="com.sap.vocabularies.CodeList.v1.CodeListSource";a["com.sap.vocabularies.CodeList.v1.UnitsOfMeasure"]="com.sap.vocabularies.CodeList.v1.CodeListSource";a["com.sap.vocabularies.CodeList.v1.StandardCode"]="Edm.PropertyPath";a["com.sap.vocabularies.CodeList.v1.ExternalCode"]="Edm.PropertyPath";a["com.sap.vocabularies.CodeList.v1.IsConfigurationDeprecationCode"]="Edm.Boolean";a["com.sap.vocabularies.Communication.v1.Contact"]="com.sap.vocabularies.Communication.v1.ContactType";a["com.sap.vocabularies.Communication.v1.Address"]="com.sap.vocabularies.Communication.v1.AddressType";a["com.sap.vocabularies.Communication.v1.IsEmailAddress"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Communication.v1.IsPhoneNumber"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Communication.v1.Event"]="com.sap.vocabularies.Communication.v1.EventData";a["com.sap.vocabularies.Communication.v1.Task"]="com.sap.vocabularies.Communication.v1.TaskData";a["com.sap.vocabularies.Communication.v1.Message"]="com.sap.vocabularies.Communication.v1.MessageData";a["com.sap.vocabularies.Hierarchy.v1.RecursiveHierarchy"]="com.sap.vocabularies.Hierarchy.v1.RecursiveHierarchyType";a["com.sap.vocabularies.Hierarchy.v1.RecursiveHierarchyActions"]="com.sap.vocabularies.Hierarchy.v1.RecursiveHierarchyActionsType";a["com.sap.vocabularies.Hierarchy.v1.MatchCount"]="Edm.Int64";a["com.sap.vocabularies.Hierarchy.v1.RecursiveHierarchySupported"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.PersonalData.v1.EntitySemantics"]="com.sap.vocabularies.PersonalData.v1.EntitySemanticsType";a["com.sap.vocabularies.PersonalData.v1.FieldSemantics"]="com.sap.vocabularies.PersonalData.v1.FieldSemanticsType";a["com.sap.vocabularies.PersonalData.v1.IsPotentiallyPersonal"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.Session.v1.StickySessionSupported"]="com.sap.vocabularies.Session.v1.StickySessionSupportedType";a["com.sap.vocabularies.UI.v1.HeaderInfo"]="com.sap.vocabularies.UI.v1.HeaderInfoType";a["com.sap.vocabularies.UI.v1.Identification"]="com.sap.vocabularies.UI.v1.DataFieldAbstract";a["com.sap.vocabularies.UI.v1.Badge"]="com.sap.vocabularies.UI.v1.BadgeType";a["com.sap.vocabularies.UI.v1.LineItem"]="com.sap.vocabularies.UI.v1.DataFieldAbstract";a["com.sap.vocabularies.UI.v1.StatusInfo"]="com.sap.vocabularies.UI.v1.DataFieldAbstract";a["com.sap.vocabularies.UI.v1.FieldGroup"]="com.sap.vocabularies.UI.v1.FieldGroupType";a["com.sap.vocabularies.UI.v1.ConnectedFields"]="com.sap.vocabularies.UI.v1.ConnectedFieldsType";a["com.sap.vocabularies.UI.v1.GeoLocations"]="com.sap.vocabularies.UI.v1.GeoLocationType";a["com.sap.vocabularies.UI.v1.GeoLocation"]="com.sap.vocabularies.UI.v1.GeoLocationType";a["com.sap.vocabularies.UI.v1.Contacts"]="Edm.AnnotationPath";a["com.sap.vocabularies.UI.v1.MediaResource"]="com.sap.vocabularies.UI.v1.MediaResourceType";a["com.sap.vocabularies.UI.v1.DataPoint"]="com.sap.vocabularies.UI.v1.DataPointType";a["com.sap.vocabularies.UI.v1.KPI"]="com.sap.vocabularies.UI.v1.KPIType";a["com.sap.vocabularies.UI.v1.Chart"]="com.sap.vocabularies.UI.v1.ChartDefinitionType";a["com.sap.vocabularies.UI.v1.ValueCriticality"]="com.sap.vocabularies.UI.v1.ValueCriticalityType";a["com.sap.vocabularies.UI.v1.CriticalityLabels"]="com.sap.vocabularies.UI.v1.CriticalityLabelType";a["com.sap.vocabularies.UI.v1.SelectionFields"]="Edm.PropertyPath";a["com.sap.vocabularies.UI.v1.Facets"]="com.sap.vocabularies.UI.v1.Facet";a["com.sap.vocabularies.UI.v1.HeaderFacets"]="com.sap.vocabularies.UI.v1.Facet";a["com.sap.vocabularies.UI.v1.QuickViewFacets"]="com.sap.vocabularies.UI.v1.Facet";a["com.sap.vocabularies.UI.v1.QuickCreateFacets"]="com.sap.vocabularies.UI.v1.Facet";a["com.sap.vocabularies.UI.v1.FilterFacets"]="com.sap.vocabularies.UI.v1.ReferenceFacet";a["com.sap.vocabularies.UI.v1.SelectionPresentationVariant"]="com.sap.vocabularies.UI.v1.SelectionPresentationVariantType";a["com.sap.vocabularies.UI.v1.PresentationVariant"]="com.sap.vocabularies.UI.v1.PresentationVariantType";a["com.sap.vocabularies.UI.v1.SelectionVariant"]="com.sap.vocabularies.UI.v1.SelectionVariantType";a["com.sap.vocabularies.UI.v1.ThingPerspective"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.IsSummary"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.PartOfPreview"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.Map"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.Gallery"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.IsImageURL"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.IsImage"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.MultiLineText"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.InputMask"]="com.sap.vocabularies.UI.v1.InputMaskType";a["com.sap.vocabularies.UI.v1.TextArrangement"]="com.sap.vocabularies.UI.v1.TextArrangementType";a["com.sap.vocabularies.UI.v1.Note"]="com.sap.vocabularies.UI.v1.NoteType";a["com.sap.vocabularies.UI.v1.Importance"]="com.sap.vocabularies.UI.v1.ImportanceType";a["com.sap.vocabularies.UI.v1.Hidden"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.IsCopyAction"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.IsAIOperation"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.CreateHidden"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.UpdateHidden"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.DeleteHidden"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.HiddenFilter"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.AdaptationHidden"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.DataFieldDefault"]="com.sap.vocabularies.UI.v1.DataFieldAbstract";a["com.sap.vocabularies.UI.v1.Criticality"]="com.sap.vocabularies.UI.v1.CriticalityType";a["com.sap.vocabularies.UI.v1.CriticalityCalculation"]="com.sap.vocabularies.UI.v1.CriticalityCalculationType";a["com.sap.vocabularies.UI.v1.Emphasized"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.OrderBy"]="Edm.PropertyPath";a["com.sap.vocabularies.UI.v1.ParameterDefaultValue"]="Edm.PrimitiveType";a["com.sap.vocabularies.UI.v1.RecommendationState"]="com.sap.vocabularies.UI.v1.RecommendationStateType";a["com.sap.vocabularies.UI.v1.RecommendationList"]="com.sap.vocabularies.UI.v1.RecommendationListType";a["com.sap.vocabularies.UI.v1.Recommendations"]="Edm.ComplexType";a["com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext"]="Org.OData.Core.V1.Tag";a["com.sap.vocabularies.UI.v1.DoNotCheckScaleOfMeasuredQuantity"]="Edm.Boolean";a["com.sap.vocabularies.HTML5.v1.CssDefaults"]="com.sap.vocabularies.HTML5.v1.CssDefaultsType";a["com.sap.vocabularies.HTML5.v1.LinkTarget"]="com.sap.vocabularies.HTML5.v1.LinkTargetType";a["com.sap.vocabularies.HTML5.v1.RowSpanForDuplicateValues"]="Org.OData.Core.V1.Tag"})(t=e.TermToTypes||(e.TermToTypes={}))},921:function(a,e){Object.defineProperty(e,"__esModule",{value:true});e.VocabularyReferences=void 0;e.VocabularyReferences=[{alias:"Authorization",namespace:"Org.OData.Authorization.V1",uri:"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Authorization.V1.xml"},{alias:"Core",namespace:"Org.OData.Core.V1",uri:"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Core.V1.xml"},{alias:"Capabilities",namespace:"Org.OData.Capabilities.V1",uri:"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Capabilities.V1.xml"},{alias:"Aggregation",namespace:"Org.OData.Aggregation.V1",uri:"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Aggregation.V1.xml"},{alias:"Validation",namespace:"Org.OData.Validation.V1",uri:"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Validation.V1.xml"},{alias:"Measures",namespace:"Org.OData.Measures.V1",uri:"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Measures.V1.xml"},{alias:"Analytics",namespace:"com.sap.vocabularies.Analytics.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/Analytics.xml"},{alias:"Common",namespace:"com.sap.vocabularies.Common.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/Common.xml"},{alias:"CodeList",namespace:"com.sap.vocabularies.CodeList.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/CodeList.xml"},{alias:"Communication",namespace:"com.sap.vocabularies.Communication.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/Communication.xml"},{alias:"Hierarchy",namespace:"com.sap.vocabularies.Hierarchy.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/Hierarchy.xml"},{alias:"PersonalData",namespace:"com.sap.vocabularies.PersonalData.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/PersonalData.xml"},{alias:"Session",namespace:"com.sap.vocabularies.Session.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/Session.xml"},{alias:"UI",namespace:"com.sap.vocabularies.UI.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/UI.xml"},{alias:"HTML5",namespace:"com.sap.vocabularies.HTML5.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/HTML5.xml"}]}};var t={};function o(a){var r=t[a];if(r!==undefined){return r.exports}var i=t[a]={exports:{}};e[a].call(i.exports,i,i.exports,o);return i.exports}var r=o(348);a=r})();return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/controls/Common/Action", ["sap/base/Log","sap/fe/base/BindingToolkit","sap/fe/core/converters/ManifestSettings","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/ID","sap/fe/core/formatters/FPMFormatter","sap/fe/core/helpers/StableIdHelper","sap/fe/core/templating/UIFormatters"],function(e,t,n,i,o,a,r,s){"use strict";var l={};var c=s.getActionEnabledExpression;var u=r.replaceSpecialChars;var f=o.getCustomActionID;var d=i.Placement;var p=n.ActionType;var b=t.resolveBindingString;var v=t.pathInModel;var m=t.or;var h=t.isConstant;var g=t.ifElse;var y=t.greaterOrEqual;var A=t.formatResult;var M=t.equal;var S=t.constant;var E=t.compileExpression;var C=t.and;let x=function(e){e["Accept"]="Accept";e["Attention"]="Attention";e["Back"]="Back";e["Critical"]="Critical";e["Default"]="Default";e["Emphasized"]="Emphasized";e["Ghost"]="Ghost";e["Negative"]="Negative";e["Neutral"]="Neutral";e["Reject"]="Reject";e["Success"]="Success";e["Transparent"]="Transparent";e["Unstyled"]="Unstyled";e["Up"]="Up";return e}({});l.ButtonType=x;const O=e=>{let t,n,i,o;e.forEach(e=>{t=e.visible?.valueOf()==="false";i=false;o=[];n=[];if(e.visible&&!(e.visible.valueOf()==="true"||e.visible.valueOf()==="false")){n.push(e.visible)}if(e?.menu?.length){e?.menu?.forEach(e=>{const t=e.visible;if(t&&(typeof t==="boolean"||t.valueOf()==="true")){i=true}else if(t&&t.valueOf()!=="false"){o.push(t.valueOf())}});if(t){e.visible=false.toString()}else if(!i&&!o.length){e.visible=false.toString()}else if(i&&!n.length){e.visible=true.toString()}else if(n.length||o.length){const t=o.map(e=>b(e,"boolean"));e.visible=E(C(b(e.visible||true,"boolean"),m(...t)))}else{e.visible=(!t).toString()}}});return e};l.getVisibilityEnablementMenuActions=O;function k(e,t,n){const i=t.find(e=>e.key===n);const o=e[n];let a={...i??o};if(Object.keys(a).length===0){t.filter(e=>e.type===p.Menu).forEach(e=>{e.menu?.forEach(e=>{if(e.key===n){a=e}})})}if(i){a.enabled=o?.enabled??i.enabled;a.visible=o?.visible??i.visible;for(const e in o||{}){const t=e;if(!i[t]&&t!=="menu"){a[t]=o[t]}}}const r=a?.visible||a?.type===p.DataFieldForAction||a?.type===p.DataFieldForIntentBasedNavigation;return{action:a,canBeMenuItem:r}}function F(e,t,n,i){const{action:o,canBeMenuItem:a}=k(t,n,e.defaultAction);if(a){e.defaultAction=o}if(o.command){i[o.key]=o}}function I(e,t,n,i){const o=[];const a=n.find(t=>t.key===e.key);if(e.menu?.length!==0){for(const a of e.menu??[]){const{action:e,canBeMenuItem:r}=k(t,n,a);if(r){o.push(e)}if(e.command){i[a]=e}}}else if(a){a.menu?.forEach(e=>o.push(e))}const r=e;r.menu=o;const s=o.map(e=>b(e.visible,"boolean"));r.visible=E(C(b(e.visible,"boolean"),m(...s)))}function P(e,t){const n={};const i=[];const o={};for(const a in e){const r=e[a];if(r.defaultAction!==undefined){F(r,e,t,o)}if(r.type===p.Menu){I(r,e,t,o);if(!r.menu?.length){i.push(r.key)}}if(r.command){o[a]=r}n[a]=r}i.forEach(e=>delete n[e]);return{actions:n,commandActions:o}}const D=function(e,t,n){let i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(t&&e.enabled===undefined){return undefined}const o=j(e.enabled,n);const a=!i?"numberOfSelectedContexts":"contextmenu/numberOfSelectedContexts";return E(g(e.requiresSelection===true,g(e.enableOnSelect==="single",C(M(v(a,"internal"),1),o),C(y(v(a,"internal"),1),o)),o))};const T=function(e,t,n){let i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(t&&e.visible===undefined){return undefined}let o=j(e.visible,n);o=i?C(o,M(v("contextmenu/inactiveContext","internal"),false)):o;return E(o)};function B(e,t){if(!t){return}e.type=t.type;e.annotationPath=t.annotationPath;e.press=t.press;e.enabled=e.enabled??t.enabled;e.visible=e.visible??t.visible;e.visibleForContextMenu=e.visibleForContextMenu??t.visibleForContextMenu}function N(e,t,n,i,o,a,r){const s={};for(const a in e){const l=e[a];const c=l.press?.lastIndexOf(".")||-1;let b;if(n){for(const e of n){if(e.id?.startsWith("CustomAction::")){continue}if(e.key===a){b=e;break}else if(e.type==="Menu"){b=e.menu?.find(e=>e.key===a);if(b){break}}}}const v=!!b;if(l.facetName){r=l.facetName}s[a]={id:b?a:f(a),type:l.menu?p.Menu:p.Default,visible:T(l,v,t),visibleForContextMenu:T(l,v,t,true),enabled:D(l,v,t),enabledForContextMenu:D(l,v,t,true),handlerModule:l.press&&l.press.substring(0,c).replace(/\./gi,"/"),handlerMethod:l.press&&l.press.substring(c+1),press:l.press,text:l.text,noWrap:l.__noWrap,key:u(a),enableOnSelect:l.enableOnSelect,defaultValuesExtensionFunction:l.defaultValuesFunction,position:{anchor:l.position?.anchor,placement:l.position===undefined?d.After:l.position.placement},isNavigable:L(l,i,o),command:l.command,requiresSelection:l.requiresSelection===undefined?false:l.requiresSelection,enableAutoScroll:R(l),menu:l.menu??(b?.type===p.Menu?[]:undefined),facetName:l.inline?r:undefined,defaultAction:l.defaultAction};B(s[a],b)}return P(s,n??[])}l.getActionsFromManifest=N;function j(e,t){const n=b(e,"boolean");let i;if(h(n)&&n.value===undefined){i=S(true)}else if(h(n)&&typeof n.value==="string"){const e=n.value;i=A([v("/","$view"),e,v("selectedContexts","internal")],a.customBooleanPropertyCheck,t.getDataModelObjectPath().contextLocation?.targetEntityType||t.getEntityType())}else{i=n}return i}const U=e=>{let t={};e.forEach(e=>{if(e?.menu?.length){const n=e.menu;t=n.reduce((e,t)=>{let{key:n}=t;if(n&&!e[n]){e[n]=true}return e},t)}});return e.filter(e=>!t[e.key])};l.removeDuplicateActions=U;function q(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(t?.annotations.Core?.OperationAvailable){const i=e.getDataModelObjectPath();const o=c(t,e.getConvertedTypes(),i,n);return E(o)}return"true"}l.getEnabledForAnnotationAction=q;function W(e){return e?e.map(e=>({LocalProperty:{$PropertyPath:e.LocalProperty.value},SemanticObjectProperty:e.SemanticObjectProperty.toString()})):[]}l.getSemanticObjectMapping=W;function L(e,t,n){let i=true;if(n){const e=t&&(t.detail||t.display);i=e?.route?true:false}if(e&&e.afterExecution&&(e.afterExecution?.navigateToInstance===false||e.afterExecution?.enableAutoScroll===true)||!i){return false}return true}l.isActionNavigable=L;function R(e){return e?.afterExecution?.enableAutoScroll===true}l.enableAutoScroll=R;function V(e){return e.annotations?.UI?.IsCopyAction?.valueOf()===true&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"}l.dataFieldIsCopyAction=V;function $(t){if(t.length===1){return t[0]}if(t.length>1){e.error("Multiple actions are annotated with isCopyAction. There can be only one standard copy action.")}return undefined}l.getCopyAction=$;function w(e){const t=[];e.forEach(e=>{if(e.type==="Menu"&&!e.id?.startsWith("CustomAction::")&&e.menu){t.push(...e.menu)}});return t}l.getAnnotationMenuActionItems=w;function z(e,t){const n={};for(const i in t){if(i.startsWith("DataFieldForAction::")&&e.find(e=>e.key===i)){n[i]=t[i]}}return n}l.getMatchingManifestAction=z;function G(e,t){let n;e.forEach(e=>{if(e.type===p.Menu){e.menu?.forEach((i,o)=>{n=t.find(e=>e.key===i.key);if(n){e.menu?.splice(o,1,n)}})}})}l.prepareMenuActions=G;return l},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/controls/Common/Chart", ["sap/base/Log","sap/fe/base/BindingToolkit","sap/fe/core/converters/annotations/DataField","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/Key","sap/fe/core/helpers/StableIdHelper","sap/fe/core/templating/DataModelPathHelper","sap/ui/core/Lib","../../ManifestSettings","../../helpers/Aggregation","../../helpers/ID","../../helpers/InsightsHelpers"],function(t,e,a,n,o,i,r,s,l,g,p,c,u){"use strict";var d={};var f=u.getInsightsVisibility;var y=u.getInsightsEnablement;var m=c.getFilterBarID;var h=c.getChartID;var b=p.AggregationHelper;var P=g.VisualizationType;var A=g.VariantManagementType;var v=g.TemplateType;var T=g.ActionType;var C=s.getTargetObjectPath;var S=r.generate;var D=i.KeyHelper;var F=o.insertCustomElements;var E=o.OverrideType;var I=n.getActionsFromManifest;var M=a.isDataFieldForActionAbstract;var O=e.not;var N=e.getExpressionFromAnnotation;var w=e.equal;var V=e.compileExpression;var B=e.and;function z(t,e,a){const n=[];if(t?.Actions){t.Actions.forEach(t=>{const e=D.generateKeyFromDataField(t);if(M(t)&&!t.Inline&&!t.Determining){switch(t.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":if(t.ActionTarget&&!t.ActionTarget.isBound){n.push({type:T.DataFieldForAction,annotationPath:a.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),key:e,visible:R(t,a)})}break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":n.push({type:T.DataFieldForIntentBasedNavigation,annotationPath:a.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),key:e,visible:R(t,a),isNavigable:true});break}}if($(t)){n.push({type:T.Menu,text:t.Label?.toString(),visible:R(t,a),menu:t.Actions.map(t=>L(t,a)),key:D.generateKeyFromDataField(t)})}})}return n}function $(t){return t.$Type==="com.sap.vocabularies.UI.v1.DataFieldForActionGroup"}function L(t,e){return{type:T.DataFieldForAction,annotationPath:e.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),key:D.generateKeyFromDataField(t),visible:R(t,e)}}function j(t,e,a){const n=z(t,e,a);const o=I(a.getManifestControlConfiguration(e).actions,a,n);const i={enabled:E.overwrite,enableOnSelect:E.overwrite,visible:E.overwrite,command:E.overwrite,position:E.overwrite};const r=F(n,o.actions,i);return{actions:r,commandActions:o.commandActions}}d.getChartActions=j;function G(t,e){const a=e.getManifestWrapper();const n=e.getManifestControlConfiguration(t);const o=a.getVariantManagement();const i=[];const r=n?.chartSettings?.personalization;const s=o===A.Control?true:false;if(r!==undefined&&!r||r=="false"){return undefined}if(typeof r==="object"){if(r.type){i.push("Type")}if(r.item){i.push("Item")}if(r.sort){i.push("Sort")}if(r.filter){i.push("Filter")}return i.join(",")}else if(s||!!r){return"Sort,Type,Item,Filter"}else{return"Sort,Type,Item"}}d.getP13nMode=G;function k(t){let e;if(t?.Property){e={Property:{$PropertyPath:t?.Property?.value}}}else{e={Property:{$PropertyPath:t?.name}}}return e}function x(e,a,n,o,i){const r=new b(n.getEntityType(),n,true);if(!o&&!r.isAnalyticsSupported()){throw new Error("ApplySupported is not added to the annotations")}const s=r.getTransAggregations();const g=r.getCustomAggregateDefinitions();const p=n.getManifestWrapper();const c=p.getVariantManagement();const u=G(a,n);if(u===undefined&&c==="Control"){t.warning("Variant Management cannot be enabled when personalization is disabled")}const d={};if(g){const t=r.getEntityType();for(const e of g){const a=e?.annotations?.Aggregation?.ContextDefiningProperties;const n=e?.qualifier;const o=n&&t.entityProperties.find(t=>t.name===n);const i=o&&o?.annotations?.Common?.Label?.toString();d[n]={name:n,label:i||`Custom Aggregate (${n})`,sortable:true,sortOrder:"both",contextDefiningProperty:a?a.map(t=>t.value):[]}}}const A={};const T=l.getResourceBundleFor("sap.fe.core");if(s){for(const t of s){A[t.Name]={name:t.Name,propertyPath:t.AggregatableProperty.value,aggregationMethod:t.AggregationMethod,label:t?.annotations?.Common?.Label?t?.annotations?.Common?.Label?.toString():`${T.getText("AGGREGATABLE_PROPERTY")} (${t.Name})`,sortable:true,sortOrder:"both",custom:false}}}const D=r.getAggregatableProperties();const F=r.getGroupableProperties();const E={};E.$Type="Org.OData.Aggregation.V1.ApplySupportedType";E.AggregatableProperties=[];E.GroupableProperties=[];if(D){E.AggregatableProperties=D.map(t=>k(t))}if(F){E.GroupableProperties=F.map(t=>({["$PropertyPath"]:t.value}))}const I=j(e,a,n);let[M]=a.split("@");if(M.lastIndexOf("/")===M.length-1){M=M.substring(0,M.length-1)}const O=e.Title?.toString()||"";const N=n.getDataModelObjectPath();const w=M.length===0;const V=N.targetEntitySet?N.targetEntitySet.name:N.startingEntitySet.name;const z=w?m(n.getContextPath()):undefined;const $={plotArea:{window:{start:"firstDataPoint",end:"lastDataPoint"}},legendGroup:{layout:{position:"bottom"}}};let L;if(n.getTemplateType()===v.ObjectPage){L=true}else if(n.getTemplateType()===v.ListReport||n.getTemplateType()===v.AnalyticalListPage){L=false}const x=n.getManifestWrapper().hasMultipleVisualizations()||n.getTemplateType()===v.AnalyticalListPage;const H=x?".handlers.onSegmentedButtonPressed":"";const R=x?"{= ${pageInternal>alpContentView} !== 'Table'}":"true";const K=r.getAllowedTransformations();E.enableSearch=K?K.includes("search"):true;let U="";if(e.fullyQualifiedName.split("#").length>1){U=e.fullyQualifiedName.split("#")[1]}const W=f("Analytical",n,a);const q=n.getParameterEntityType()?true:false;const J=B(y(),W);return{type:P.Chart,id:U?h(w?V:M,U,P.Chart):h(w?V:M,P.Chart),collection:C(n.getDataModelObjectPath()),apiId:S([U?h(w?V:M,U,P.Chart):h(w?V:M,P.Chart),"Chart"]),entityName:V,personalization:G(a,n),navigationPath:M,annotationPath:n.getAbsoluteAnnotationPath(a),filterId:z,vizProperties:JSON.stringify($),actions:I.actions,commandActions:I.commandActions,title:O,autoBindOnInit:L,onSegmentedButtonPressed:H,visible:R,customAgg:d,transAgg:A,applySupported:E,selectionPresentationVariantPath:i,variantManagement:Q(u,c),isInsightsEnabled:J,isInsightsVisible:W,isParameterizedEntitySet:q}}d.createChartVisualization=x;function Q(t,e){return e==="Control"&&!t?A.None:e}function H(t,e,a){const n=a.fullyQualifiedName.split("#").length>1?a.fullyQualifiedName.split("#")[1]:"";const[o]=e.split("@");const i=t.getDataModelObjectPath();const r=o.length===0;const s=i.targetEntitySet?.name??i.startingEntitySet.name;const l=new b(t.getEntityType(),t,true);const g=l.getAllowedTransformations();const p=!!t.getParameterEntityType();return{annotationPath:t.getAbsoluteAnnotationPath(e),isParameterizedEntitySet:p,collection:C(t.getDataModelObjectPath()),type:P.Chart,entityName:s,id:n?h(r?s:o,n,P.Chart):h(r?s:o,P.Chart),apiId:S([n?h(r?s:o,n,P.Chart):h(r?s:o,P.Chart),"Chart"]),applySupported:{$Type:"Org.OData.Aggregation.V1.ApplySupportedType",enableSearch:g?.includes("search")??true}}}d.createChartVisualizationForTemplating=H;function R(t,e){return V(O(w(N(t.annotations?.UI?.Hidden,[],undefined,e.getRelativeModelPathFunction()),true)))}function K(t){const e=t.getManifestWrapper().hasMultipleVisualizations()||t.getTemplateType()===v.AnalyticalListPage;const a=t.getDataModelObjectPath();const n=a.targetEntitySet?a.targetEntitySet.name:a.startingEntitySet.name;const o={type:P.Chart,id:h(n,P.Chart),apiId:S([h(n,P.Chart),"Chart"]),entityName:n,title:"",collection:"",personalization:undefined,navigationPath:"",annotationPath:"",vizProperties:JSON.stringify({legendGroup:{layout:{position:"bottom"}}}),actions:[],commandActions:{},autoBindOnInit:false,onSegmentedButtonPressed:"",visible:e?"{= ${pageInternal>alpContentView} !== 'Table'}":"true",customAgg:{},transAgg:{},applySupported:{$Type:"Org.OData.Aggregation.V1.ApplySupportedType",AggregatableProperties:[],GroupableProperties:[],enableSearch:false},multiViews:false,variantManagement:A.None};return o}d.createBlankChartVisualization=K;return d},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/controls/Common/Criticality", ["sap/ui/core/message/MessageType"],function(e){"use strict";var i={};function a(i){let a;switch(i){case"UI.CriticalityType/Negative":case"UI.CriticalityType/VeryNegative":a=e.Error;break;case"UI.CriticalityType/Critical":a=e.Warning;break;case"UI.CriticalityType/Positive":case"UI.CriticalityType/VeryPositive":a=e.Success;break;case"UI.CriticalityType/Information":a=e.Information;break;case"UI.CriticalityType/Neutral":default:a=e.None}return a}i.getMessageTypeFromCriticalityType=a;return i},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/controls/Common/DataVisualization", ["sap/fe/core/converters/MetaModelConverter","sap/fe/core/converters/helpers/IssueManager","sap/fe/core/helpers/TypeGuards","../../ManifestSettings","./Chart","./Table"],function(t,e,n,a,i,o){"use strict";var r={};var s=i.createChartVisualizationForTemplating;var c=i.createChartVisualization;var l=i.createBlankChartVisualization;var u=a.VisualizationType;var f=a.TemplateType;var v=n.isAnnotationOfType;var p=e.IssueType;var m=e.IssueSeverity;var d=e.IssueCategory;const V=function(t,e,n,a){const{presentation:i,selectionVariant:o}=v(t,"com.sap.vocabularies.UI.v1.PresentationVariantType")?{presentation:t,selectionVariant:undefined}:{presentation:t.PresentationVariant,selectionVariant:t.SelectionVariant};const r=[];const s=E(n);const c=!s&&!(n.getTemplateType()===f.ListReport&&!a)?o:undefined;const l=e.split("@")[0];if((a===true||s)&&!P(i,s)){if(!L(i,"com.sap.vocabularies.UI.v1.LineItem")){const t=$("com.sap.vocabularies.UI.v1.LineItem",l,n);if(t){r.push({...t,...{selectionVariant:c}})}}if(!L(i,"com.sap.vocabularies.UI.v1.Chart")){const t=$("com.sap.vocabularies.UI.v1.Chart",l,n);if(t){r.push(t)}}}const u=i.Visualizations;const p=function(t){const e=u?.find(e=>e.$target!==undefined&&t.includes(e.$target.term));if(e){r.push({visualization:e.$target,annotationPath:`${l}${e.value}`,converterContext:n,selectionVariant:c})}};if(s){p(["com.sap.vocabularies.UI.v1.LineItem"]);p(["com.sap.vocabularies.UI.v1.Chart"])}else{p(["com.sap.vocabularies.UI.v1.LineItem","com.sap.vocabularies.UI.v1.Chart"])}return r};r.getVisualizationsFromAnnotation=V;function I(t,e,n){if(e){const t=n.getEntityTypeAnnotation(e);const a=t.annotation;if(a){if(a.term==="com.sap.vocabularies.UI.v1.SelectionPresentationVariant"){return a}}else{throw new Error("Annotation Path for the SPV mentioned in the manifest is not found, Please add the SPV in the annotation")}}else{return t.annotations?.UI?.SelectionPresentationVariant}}r.getSelectionPresentationVariant=I;function h(t,e){const n=t&&t.PresentationVariant;if(n){return P(n,e)}else{throw new Error("Presentation Variant is not present in the SPV annotation")}}r.isSelectionPresentationCompliant=h;function P(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n=false,a=false;if(e){if(t?.Visualizations){const e=t.Visualizations;e.forEach(t=>{if(t.$target?.term==="com.sap.vocabularies.UI.v1.LineItem"){n=true}if(t.$target?.term==="com.sap.vocabularies.UI.v1.Chart"){a=true}})}return a&&n}else{return t?.Visualizations&&!!t.Visualizations.find(t=>t.$target?.term==="com.sap.vocabularies.UI.v1.LineItem"||t.$target?.term==="com.sap.vocabularies.UI.v1.Chart")}}r.isPresentationCompliant=P;function g(t){return t.annotations.UI?.LineItem}r.getDefaultLineItem=g;function b(t){return t.annotations.UI?.Chart}r.getDefaultChart=b;function C(t){return t.annotations?.UI?.SelectionVariant}r.getDefaultSelectionVariant=C;function y(t,e){const n=e.getManifestWrapper().getDefaultTemplateAnnotationPath();const a=I(t,n,e);let i;if(a){i=a.SelectionVariant;if(i){return i}}else{i=C(t);return i}}r.getSelectionVariant=y;function U(t,e,n){const{annotation:a,converterContext:i}=t;const o=a?.term;let r=[];if(o){switch(o){case"com.sap.vocabularies.UI.v1.LineItem":case"com.sap.vocabularies.UI.v1.Chart":r.push({visualization:a,annotationPath:e,converterContext:i});break;case"com.sap.vocabularies.UI.v1.PresentationVariant":case"com.sap.vocabularies.UI.v1.SelectionPresentationVariant":r=r.concat(V(a,e,i,n));break;default:break}}return r}function T(t,e){if(t===""){return undefined}const n=e.getEntityTypeAnnotation(t).annotation;if(v(n,"com.sap.vocabularies.UI.v1.SelectionPresentationVariantType")){return n.PresentationVariant}else if(n.term==="com.sap.vocabularies.UI.v1.PresentationVariant"){return n}return undefined}function S(t,e,n){const{isCondensedTableLayoutCompliant:a,doNotCheckApplySupported:i,associatedSelectionVariant:r,isMacroOrMultipleView:u,shouldCreateTemplateChartVisualization:f}=n;const V=t!==""?e.getEntityTypeAnnotation(t):{annotation:undefined,converterContext:e};const I=V.annotation;let h,P;const g=I?.term;for(const n of U(V,t,u)){const{visualization:l,annotationPath:u,converterContext:p,selectionVariant:m}=n;switch(l.term){case"com.sap.vocabularies.UI.v1.Chart":h=f?s(p,u,l):c(l,u,p,i,v(I,"com.sap.vocabularies.UI.v1.SelectionPresentationVariantType")?t:undefined);break;case"com.sap.vocabularies.UI.v1.LineItem":default:P=o.createTableVisualization(l,u,p,{presentationVariantAnnotation:T(t,e),selectionVariantAnnotation:r??m,isCondensedTableLayoutCompliant:a});break}}e=V.converterContext;const b=E(e);if(!g||b&&P===undefined){P=o.createDefaultTableVisualization(e,u!==true);e.getDiagnostics().addIssue(d.Annotation,m.Medium,p.MISSING_LINEITEM)}if(b&&h===undefined){h=l(e);e.getDiagnostics().addIssue(d.Annotation,m.Medium,p.MISSING_CHART)}return{visualizations:[h,P].filter(z),annotationPath:e.getEntitySetBasedAnnotationPath(I?.fullyQualifiedName??"/"),associatedSelectionVariantPath:n.associatedSelectionVariant?e.getEntitySetBasedAnnotationPath(n.associatedSelectionVariant.fullyQualifiedName):undefined}}r.getDataVisualizationConfiguration=S;function z(t){return[u.Table,u.Chart].includes(t?.type)}function A(t,e){if(t.includes(e.slice(0,e.lastIndexOf(".")))){const n=["com.sap.vocabularies.UI.v1.PresentationVariant","com.sap.vocabularies.UI.v1.SelectionPresentationVariant",e];if(!n.some(e=>t.search(new RegExp(`${e}(#|/|$)`))>-1)){throw new Error(`Annotation Path ${t} mentioned in the manifest is not valid for ${e}`)}}}r.validatePresentationMetaPath=A;function M(e,n){A(e.getPath(),n);const a=t.convertMetaModelContext(e),i=e.getModel();if(a){if(v(a,"com.sap.vocabularies.UI.v1.SelectionPresentationVariantType")||v(a,"com.sap.vocabularies.UI.v1.PresentationVariantType")){let t;if(v(a,"com.sap.vocabularies.UI.v1.SelectionPresentationVariantType")&&a.PresentationVariant){t=a.PresentationVariant.Visualizations}else if(v(a,"com.sap.vocabularies.UI.v1.PresentationVariantType")){t=a.Visualizations}if(Array.isArray(t)){for(const a of t){if(a.type=="AnnotationPath"&&a.value.includes(n)&&!!i.getMetaContext(e.getPath().split("@")[0]+a.value).getObject()){n=a.value;break}}}}else{return e}}return i.getMetaContext(e.getPath().split("@")[0]+n)}r.getUiControl=M;const L=function(t,e){return t.Visualizations?.some(t=>t.value.includes(e))??false};r.annotationExistsInPresentationVariant=L;const $=function(t,e,n){const a=n.getEntityType();const i=t==="com.sap.vocabularies.UI.v1.LineItem"?g(a):b(a);if(i){return{visualization:i,annotationPath:`${e}${n.getRelativeAnnotationPath(i.fullyQualifiedName,a)}`,converterContext:n}}return undefined};const E=function(t){return t.getManifestWrapper().hasMultipleVisualizations()||t.getTemplateType()===f.AnalyticalListPage};r.isAlpAnnotation=E;return r},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/controls/Common/Form", ["sap/fe/base/BindingToolkit","sap/fe/core/converters/annotations/DataField","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","../../../helpers/StableIdHelper","../../ManifestSettings","../../helpers/ConfigurableObject","../../helpers/DataFieldHelper","../../helpers/ID","../../helpers/Key"],function(e,t,a,n,o,i,r,s,l,c){"use strict";var f={};var u=c.KeyHelper;var p=l.getFormStandardActionButtonID;var v=l.getFormID;var d=s.isReferencePropertyStaticallyHidden;var m=r.insertCustomElements;var y=r.Placement;var P=r.OverrideType;var h=i.ActionType;var g=o.createIdForAnnotation;var F=n.getTargetObjectPath;var O=n.getTargetEntitySetPath;var b=a.isSingleton;var T=a.isNavigationProperty;var A=t.getSemanticObjectPath;var I=e.pathInModel;var E=e.not;var D=e.ifElse;var C=e.getExpressionFromAnnotation;var S=e.equal;var N=e.compileExpression;let U=function(e){e["Default"]="Default";e["Slot"]="Slot";e["Annotation"]="Annotation";return e}({});f.FormElementType=U;function w(){return{textLinesEdit:4}}function M(e,t){return t?.valueOf()===false||e.annotations?.UI?.PartOfPreview===undefined||e.annotations?.UI?.PartOfPreview.valueOf()===true}function $(e,t){const a=[];const n=t.getEntityTypeAnnotation(e.Target.value);const o=n.annotation;t=n.converterContext;function i(e,n){const o=A(t,e);if(e.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForAction"&&e.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&e.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForActionGroup"&&!d(e)){const i={key:u.generateKeyFromDataField(e),type:U.Annotation,annotationPath:`${t.getEntitySetBasedAnnotationPath(e.fullyQualifiedName)}/`,semanticObjectPath:o,formatOptions:w(),isPartOfPreview:M(e,n)};if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target.$target?.$Type==="com.sap.vocabularies.UI.v1.ConnectedFieldsType"){const a=Object.values(e.Target.$target.Data).filter(e=>e?.hasOwnProperty("Value"));i.connectedFields=a.map(e=>({semanticObjectPath:A(t,e)}))}a.push(i)}}switch(o?.term){case"com.sap.vocabularies.UI.v1.FieldGroup":o.Data.forEach(t=>i(t,e.annotations?.UI?.PartOfPreview));break;case"com.sap.vocabularies.UI.v1.Identification":o.forEach(t=>i(t,e.annotations?.UI?.PartOfPreview));break;case"com.sap.vocabularies.UI.v1.DataPoint":a.push({key:`DataPoint::${o.qualifier?o.qualifier:""}`,type:U.Annotation,annotationPath:`${t.getEntitySetBasedAnnotationPath(o.fullyQualifiedName)}/`});break;case"com.sap.vocabularies.UI.v1.InputMask":a.push({key:`MaskedInput::${o.qualifier?o.qualifier:""}`,type:U.Annotation,annotationPath:`${t.getEntitySetBasedAnnotationPath(o.fullyQualifiedName)}/`});break;case"com.sap.vocabularies.Communication.v1.Contact":a.push({key:`Contact::${o.qualifier?o.qualifier:""}`,type:U.Annotation,annotationPath:`${t.getEntitySetBasedAnnotationPath(o.fullyQualifiedName)}/`});break;default:break}return a}function k(e,t){const a=t.getManifestWrapper();const n=a.getFormContainer(e.Target.value);const o={};if(n?.fields){Object.keys(n?.fields).forEach(e=>{o[e]={key:e,id:`CustomFormElement::${e}`,type:n.fields[e].type||U.Default,template:n.fields[e].template,propertyPath:n.fields[e]?.property,label:t.fetchTextFromMetaModel(n.fields[e].label),position:n.fields[e].position||{placement:y.After},formatOptions:{...w(),...n.fields[e].formatOptions}}})}return o}f.getFormElementsFromManifest=k;function x(e,t,a,n){const o=g(e);const i=t.getEntitySetBasedAnnotationPath(e.fullyQualifiedName);const r=t.getEntityTypeAnnotation(e.Target.value);const s=N(E(S(true,C(e.annotations?.UI?.Hidden))));let l;const c=r.converterContext.getEntitySet();const f=r.converterContext.getDataModelObjectPath().targetObject;if(c&&c!==t.getEntitySet()){l=O(r.converterContext.getDataModelObjectPath())}else if(T(f)&&f?.containsTarget===true){l=F(r.converterContext.getDataModelObjectPath(),false)}else if(c&&!l&&b(c)){l=c.fullyQualifiedName}const u=m($(e,t),k(e,t),{formatOptions:P.overwrite});a=a!==undefined?a.filter(t=>t.facetName==e.fullyQualifiedName):[];if(a.length===0){a=undefined}const v={id:p(o,"ShowHideDetails"),key:"StandardAction::ShowHideDetails",text:N(D(S(I("showDetails","internal"),true),I("T_COMMON_OBJECT_PAGE_HIDE_FORM_CONTAINER_DETAILS","sap.fe.i18n"),I("T_COMMON_OBJECT_PAGE_SHOW_FORM_CONTAINER_DETAILS","sap.fe.i18n"))),type:h.ShowFormDetails,press:"FormContainerRuntime.toggleDetails"};if(e.annotations?.UI?.PartOfPreview?.valueOf()!==false&&u.some(e=>e.isPartOfPreview===false)){if(a!==undefined){a.push(v)}else{a=[v]}}return{id:o,formElements:u,annotationPath:i,isVisible:s,entitySet:l,actions:a,useSingleTextAreaFieldAsNotes:n?.useSingleTextAreaFieldAsNotes}}f.getFormContainer=x;function _(e,t,a,n){const o=[];const i={useSingleTextAreaFieldAsNotes:n?.useSingleTextAreaFieldAsNotes};e.Facets?.forEach(e=>{if(e.$Type==="com.sap.vocabularies.UI.v1.CollectionFacet"){return}o.push(x(e,t,a,i))});return o}function j(e){return e.$Type==="com.sap.vocabularies.UI.v1.ReferenceFacet"}f.isReferenceFacet=j;function R(e,t,a,n,o){switch(e?.$Type){case"com.sap.vocabularies.UI.v1.CollectionFacet":return{id:v(e),useFormContainerLabels:true,hasFacetsNotPartOfPreview:e.Facets.some(e=>e.annotations?.UI?.PartOfPreview?.valueOf()===false),formContainers:_(e,a,n,o),isVisible:t};case"com.sap.vocabularies.UI.v1.ReferenceFacet":return{id:v(e),useFormContainerLabels:false,hasFacetsNotPartOfPreview:e.annotations?.UI?.PartOfPreview?.valueOf()===false,formContainers:[x(e,a,n,o)],isVisible:t};default:throw new Error("Cannot create form based on ReferenceURLFacet")}}f.createFormDefinition=R;return f},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/controls/Common/KPI", ["sap/fe/core/converters/helpers/IssueManager","sap/fe/core/converters/helpers/SelectionVariantHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/PropertyHelper","sap/ui/core/message/MessageType","../../helpers/Aggregation","../../helpers/ID","./Criticality"],function(e,t,a,i,n,r,o,l,c){"use strict";var s={};var u=c.getMessageTypeFromCriticalityType;var d=l.getKPIID;var p=o.AggregationHelper;var f=n.getAssociatedTextPropertyPath;var g=i.enhanceDataModelPath;var y=a.isPathAnnotationExpression;var C=a.isAnnotationOfType;var h=a.isAnnotationOfTerm;var T=t.getFilterDefinitionsFromSelectionVariant;var m=e.IssueType;var v=e.IssueSeverity;var I=e.IssueCategory;const D={"UI.TrendType/StrongUp":"Up","UI.TrendType/Up":"Up","UI.TrendType/StrongDown":"Down","UI.TrendType/Down":"Down","UI.TrendType/Sideways":"None"};const S={"UI.ChartType/ColumnStacked":"StackedColumn","UI.ChartType/BarStacked":"StackedBar","UI.ChartType/Donut":"Donut","UI.ChartType/Line":"Line","UI.ChartType/Bubble":"bubble","UI.ChartType/Column":"column","UI.ChartType/Bar":"bar","UI.ChartType/VerticalBullet":"vertical_bullet","UI.ChartType/Combination":"combination","UI.ChartType/Scatter":"scatter"};function b(e,t,a){if(e.Measures===undefined){return undefined}const i=e.Dimensions?e.Dimensions.map(t=>{const i=e.DimensionAttributes?.find(e=>e.Dimension?.value===t.value);const n={name:t.value,label:t.$target?.annotations.Common?.Label?.toString()||t.value,role:i?.Role?.replace("UI.ChartDimensionRoleType/","")};const r=g(a.getDataModelObjectPath(),t.value).targetObject;if(r?.annotations.Common?.Text){n.text=f(r);n.textArrangement=r.annotations.Common.Text.annotations?.UI?.TextArrangement?.toString().replace("UI.TextArrangementType/","")??"TextFirst"}return n}):[];const n=e.Measures.map(t=>{const a=e.MeasureAttributes?.find(e=>e.Measure?.value===t.value);return{name:t.value,label:t.$target?.annotations.Common?.Label?.toString()||t.value,role:a?.Role?.replace("UI.ChartMeasureRoleType/","")}});const r={chartType:S[e.ChartType]||"Line",dimensions:i,measures:n,sortOrder:t?.SortOrder?.map(e=>({name:e.Property?.value||"",descending:!!e.Descending})),maxItems:t?.MaxItems?.valueOf()};const o=e.Title?.valueOf();if(o!==undefined){r.title=o}return r}function V(e,t){const a=e.Value.$target;if(a.annotations.Measures?.ISOCurrency){const e=a.annotations.Measures?.ISOCurrency;if(y(e)){t.datapoint.unit={value:e.$target.name,isCurrency:true,isPath:true}}else{t.datapoint.unit={value:e.toString(),isCurrency:true,isPath:false}}}else if(a.annotations.Measures?.Unit){const e=a.annotations.Measures?.Unit;if(y(e)){t.datapoint.unit={value:e.$target.name,isCurrency:false,isPath:true}}else{t.datapoint.unit={value:e.toString(),isCurrency:false,isPath:false}}}}function P(e,t,a){if(e.Criticality){if(y(e.Criticality)){const i=e.Criticality.$target;if(i&&t.isPropertyAggregatable(i)){a.datapoint.criticalityPath=e.Criticality.path}else{a.datapoint.criticalityValue=r.None}}else{a.datapoint.criticalityValue=u(e.Criticality)}}else if(e.CriticalityCalculation){a.datapoint.criticalityCalculationMode=e.CriticalityCalculation.ImprovementDirection;a.datapoint.criticalityCalculationThresholds=[];switch(a.datapoint.criticalityCalculationMode){case"UI.ImprovementDirectionType/Target":a.datapoint.criticalityCalculationThresholds.push(e.CriticalityCalculation.DeviationRangeLowValue);a.datapoint.criticalityCalculationThresholds.push(e.CriticalityCalculation.ToleranceRangeLowValue);a.datapoint.criticalityCalculationThresholds.push(e.CriticalityCalculation.AcceptanceRangeLowValue);a.datapoint.criticalityCalculationThresholds.push(e.CriticalityCalculation.AcceptanceRangeHighValue);a.datapoint.criticalityCalculationThresholds.push(e.CriticalityCalculation.ToleranceRangeHighValue);a.datapoint.criticalityCalculationThresholds.push(e.CriticalityCalculation.DeviationRangeHighValue);break;case"UI.ImprovementDirectionType/Minimize":a.datapoint.criticalityCalculationThresholds.push(e.CriticalityCalculation.AcceptanceRangeHighValue);a.datapoint.criticalityCalculationThresholds.push(e.CriticalityCalculation.ToleranceRangeHighValue);a.datapoint.criticalityCalculationThresholds.push(e.CriticalityCalculation.DeviationRangeHighValue);break;case"UI.ImprovementDirectionType/Maximize":default:a.datapoint.criticalityCalculationThresholds.push(e.CriticalityCalculation.DeviationRangeLowValue);a.datapoint.criticalityCalculationThresholds.push(e.CriticalityCalculation.ToleranceRangeLowValue);a.datapoint.criticalityCalculationThresholds.push(e.CriticalityCalculation.AcceptanceRangeLowValue)}}else{a.datapoint.criticalityValue=r.None}}function U(e,t,a){if(e.Trend){if(y(e.Trend)){const i=e.Trend.$target;if(i&&t.isPropertyAggregatable(i)){a.datapoint.trendPath=e.Trend.path}else{a.datapoint.trendValue="None"}}else{a.datapoint.trendValue=D[e.Trend]||"None"}}else if(e.TrendCalculation){a.datapoint.trendCalculationIsRelative=e.TrendCalculation.IsRelativeDifference?true:false;if(e.TrendCalculation.ReferenceValue.$target){const i=e.TrendCalculation.ReferenceValue.$target;if(t.isPropertyAggregatable(i)){a.datapoint.trendCalculationReferencePath=e.TrendCalculation.ReferenceValue.path}else{a.datapoint.trendValue="None"}}else{a.datapoint.trendCalculationReferenceValue=e.TrendCalculation.ReferenceValue}if(a.datapoint.trendCalculationReferencePath!==undefined||a.datapoint.trendCalculationReferenceValue!==undefined){a.datapoint.trendCalculationTresholds=[e.TrendCalculation.StrongDownDifference.valueOf(),e.TrendCalculation.DownDifference.valueOf(),e.TrendCalculation.UpDifference.valueOf(),e.TrendCalculation.StrongUpDifference.valueOf()]}}else{a.datapoint.trendValue="None"}}function A(e,t,a){if(e.TargetValue){if(e.TargetValue.$target){const i=e.TargetValue.$target;if(t.isPropertyAggregatable(i)){a.datapoint.targetPath=e.TargetValue.path}}else{a.datapoint.targetValue=e.TargetValue}}}function O(e){const t=e.annotations["Common"]||{};let a;Object.keys(t).forEach(e=>{const i=t[e];if(h(i,"com.sap.vocabularies.Common.v1.SemanticObject")){if(!i.qualifier||!a){a=i}}});if(a){const e={semanticObject:a.toString(),unavailableActions:[]};const i=Object.keys(t).find(e=>{const i=t[e];return h(i,"com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions")&&i.qualifier===a?.qualifier});if(i){e.unavailableActions=t[i]}return e}else{return undefined}}function R(e){return!!e.template}function M(e,t,a){let i="";if(t.contextPath){i=t.contextPath}else if(t.entitySet){i=`/${t.entitySet}`}const n=e.getConverterContextFor(i);const r=new p(n.getEntityType(),n);if(!r.isAnalyticsSupported()){e.getDiagnostics().addIssue(I.Annotation,v.Medium,m.KPI_ISSUES.NO_ANALYTICS+i);return undefined}let o;let l;let c;let s;let u;const f=n.getAnnotationsByTerm("UI","com.sap.vocabularies.UI.v1.KPI");const g=f.find(e=>e.qualifier===t.qualifier);if(g){l=g.DataPoint;o=g.SelectionVariant;c=g.Detail?.DefaultPresentationVariant;s=c?.Visualizations?.find(e=>C(e.$target,"com.sap.vocabularies.UI.v1.ChartDefinitionType"))?.$target;if(g.Detail?.SemanticObject){u={semanticObject:g.Detail.SemanticObject.toString(),action:g.Detail.Action?.toString(),unavailableActions:[]}}}else{const a=n.getAnnotationsByTerm("UI","com.sap.vocabularies.UI.v1.SelectionPresentationVariant");const i=a.find(e=>e.qualifier===t.qualifier);if(i){o=i.SelectionVariant;c=i.PresentationVariant;l=c?.Visualizations?.find(e=>C(e.$target,"com.sap.vocabularies.UI.v1.DataPointType"))?.$target;s=c?.Visualizations?.find(e=>C(e.$target,"com.sap.vocabularies.UI.v1.ChartDefinitionType"))?.$target}else{e.getDiagnostics().addIssue(I.Annotation,v.Medium,m.KPI_ISSUES.KPI_NOT_FOUND+t.qualifier);return undefined}}if(!c||!l||!s){e.getDiagnostics().addIssue(I.Annotation,v.Medium,m.KPI_ISSUES.KPI_DETAIL_NOT_FOUND+t.qualifier);return undefined}const y=l.Value.$target;if(!r.isPropertyAggregatable(y)){e.getDiagnostics().addIssue(I.Annotation,v.Medium,m.KPI_ISSUES.MAIN_PROPERTY_NOT_AGGREGATABLE+t.qualifier);return undefined}const h=b(s,c,e);if(!h){return undefined}const D={type:"Analytical",id:"kpiTag-"+d(a),contextPath:i,datapoint:{propertyPath:l.Value.path,annotationPath:n.getEntitySetBasedAnnotationPath(l.fullyQualifiedName),title:l.Title?.toString(),description:l.Description?.toString()},selectionVariantFilterDefinitions:o?T(o):undefined,chart:h};if(l.ValueFormat?.NumberOfFractionalDigits!==undefined){D.datapoint.numberOfFractionalDigits=l.ValueFormat.NumberOfFractionalDigits.valueOf()}if(!u){if(t.detailNavigation){u={outboundNavigation:t.detailNavigation}}else{u=O(y)}}if(u){D.navigation=u}V(l,D);P(l,r,D);U(l,r,D);A(l,r,D);return D}function N(e,t,a){if(R(t)){return{type:"Custom",key:e,template:t.template}}else{return M(a,t,e)}}function $(e){const t=e.getManifestWrapper().getKPIConfiguration(),a=[];Object.keys(t).forEach(i=>{const n=N(i,t[i],e);if(n){a.push(n)}});return a}s.getKPIDefinitions=$;return s},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/controls/Common/Table", ["sap/base/Log","sap/fe/base/BindingToolkit","sap/fe/core/converters/annotations/DataField","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/IssueManager","sap/fe/core/converters/helpers/Key","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/DisplayModeFormatter","sap/fe/core/templating/EntitySetHelper","sap/fe/core/templating/FieldControlHelper","sap/fe/core/templating/PropertyHelper","sap/fe/core/templating/UIFormatters","sap/fe/core/templating/CriticalityFormatters","sap/fe/macros/formatters/TableFormatter","sap/fe/macros/internal/helpers/ActionHelper","sap/ui/core/Lib","sap/ui/core/message/MessageType","../../ManifestSettings","../../helpers/Aggregation","../../helpers/DataFieldHelper","../../helpers/ID","./Criticality","./table/StandardActions"],function(e,t,n,a,i,o,r,s,l,c,u,d,p,f,g,m,y,b,v,h,T,I,P,C,A,D,S,F){"use strict";var M={};var E=F.isInDisplayMode;var O=F.isDraftOrStickySupported;var x=F.getStandardActionPaste;var N=F.getStandardActionMoveUpDown;var w=F.getStandardActionMassEdit;var U=F.getStandardActionInsights;var $=F.getStandardActionDelete;var V=F.getStandardActionCut;var R=F.getStandardActionCreate;var L=F.getRestrictions;var j=F.getMassEditVisibility;var H=F.getInsertUpdateActionsTemplating;var k=F.getDeleteVisibility;var B=F.getCutVisibility;var G=F.getCreationRow;var q=F.generateStandardActionsContext;var K=F.StandardActionKeys;var z=S.getMessageTypeFromCriticalityType;var W=D.getTableID;var _=A.isReferencePropertyStaticallyHidden;var Q=C.AggregationHelper;var Y=P.VisualizationType;var J=P.VariantManagementType;var X=P.TemplateType;var Z=P.SelectionMode;var ee=P.OperationGroupingMode;var te=P.Importance;var ne=P.HorizontalAlign;var ae=P.CreationMode;var ie=P.ActionType;var oe=b.criticalityExpressionForIntegrationCards;var re=y.isMultiValueField;var se=m.isTimezone;var le=m.getStaticUnitOrCurrency;var ce=m.getStaticTimezone;var ue=m.getAssociatedUnitPropertyPath;var de=m.getAssociatedUnitProperty;var pe=m.getAssociatedTimezoneProperty;var fe=m.getAssociatedTextProperty;var ge=m.getAssociatedCurrencyPropertyPath;var me=m.getAssociatedCurrencyProperty;var ye=g.isStaticallyMandatory;var be=g.hasFieldControlNotMandatory;var ve=f.getRestrictionsOnProperties;var he=p.getDisplayMode;var Te=d.isPathUpdatable;var Ie=d.isPathSearchable;var Pe=d.isPathDeletable;var Ce=d.getTargetObjectPath;var Ae=d.getNonUpdatableNavigationProperties;var De=d.getHierarchyParentNavigationPropertyPath;var Se=d.getContextRelativeTargetObjectPath;var Fe=d.getContextPropertyRestriction;var Me=d.enhanceDataModelPath;var Ee=u.isTypeDefinition;var Oe=u.isProperty;var xe=u.isPathAnnotationExpression;var Ne=u.isNavigationProperty;var we=u.isAnnotationOfType;var Ue=c.replaceSpecialChars;var $e=c.generate;var Ve=s.UI;var Re=s.Entity;var Le=r.KeyHelper;var je=o.IssueType;var He=o.IssueSeverity;var ke=o.IssueCategoryType;var Be=o.IssueCategory;var Ge=i.insertCustomElements;var qe=i.Placement;var Ke=i.OverrideType;var ze=a.removeDuplicateActions;var We=a.prepareMenuActions;var _e=a.isActionNavigable;var Qe=a.getVisibilityEnablementMenuActions;var Ye=a.getMatchingManifestAction;var Je=a.getEnabledForAnnotationAction;var Xe=a.getCopyAction;var Ze=a.getAnnotationMenuActionItems;var et=a.getActionsFromManifest;var tt=a.dataFieldIsCopyAction;var nt=n.visibleExpression;var at=n.isRatingVisualizationFromDataFieldDefault;var it=n.isDataPointFromDataFieldDefault;var ot=n.isDataFieldTypes;var rt=n.isDataFieldForAnnotation;var st=n.isDataFieldForActionGroup;var lt=n.isDataFieldForActionAbstract;var ct=n.isDataField;var ut=n.hasFieldGroupTarget;var dt=n.hasDataPointTarget;var pt=n.getTargetValueOnDataPoint;var ft=n.getSemanticObjectPath;var gt=n.getDataFieldDataType;var mt=n.collectRelatedPropertiesRecursively;var yt=n.collectRelatedProperties;var bt=t.resolveBindingString;var vt=t.pathInModel;var ht=t.or;var Tt=t.not;var It=t.isConstant;var Pt=t.ifElse;var Ct=t.getExpressionFromAnnotation;var At=t.formatResult;var Dt=t.equal;var St=t.constant;var Ft=t.compileExpression;var Mt=t.and;var Et=t.EDM_TYPE_MAPPING;var Ot=function(e){e["Default"]="Default";e["Annotation"]="Annotation";e["Slot"]="Slot";e["Computed"]="Computed";return e}(Ot||{});function xt(e,t,n,a,i){const o=an(e,t,n);const r=et(n.getManifestControlConfiguration(t).actions,n,o.tableActions,i,true);const s=o.tableActions.filter(e=>e.type===ie.Copy);const l=o.tableActions.filter(e=>e.type!==ie.Copy);const c=[...l,a.create,...s,a.delete,a.massEdit,a.insights,a.creationRow,a.cut,a.paste,a.moveUp,a.moveDown].filter(e=>e!==undefined);for(const e of Object.values(r.actions)){if((e.type===ie.Default||e.type===ie.Menu)&&!e.position?.anchor){e.position={anchor:K.Create,placement:qe.Before}}}const u=Object.entries(r.actions);const d=Object.fromEntries(u.filter(e=>{let[t]=e;return t.startsWith("StandardAction::")}));const p=Object.fromEntries(u.filter(e=>{let[t]=e;return!d[t]}));const f={isNavigable:Ke.overwrite,enableOnSelect:Ke.overwrite,enableAutoScroll:Ke.overwrite,enabled:Ke.overwrite,visible:Ke.overwrite,visibleForContextMenu:Ke.overwrite,defaultValuesExtensionFunction:Ke.overwrite,command:Ke.overwrite,position:Ke.overwrite,menu:Ke.overwrite};const g=Ze(l);const m=Ye(g,r.actions);const y=Ge(g,m,f);let b=Ge(c,p,f);b=Ge(b,d,{position:Ke.overwrite});We(b,y);b=ze(b);b=Qe(b);return{actions:b,commandActions:r.commandActions}}M.getTableActions=xt;function Nt(e,t,n,a){const i=qn(e,t,n);const o=Xn(n.getManifestControlConfiguration(t).columns??{},i,n,n.getAnnotationEntityType(e),a);const r=Ge(i,o,{width:Ke.overwrite,widthIncludingColumnHeader:Ke.overwrite,importance:Ke.overwrite,horizontalAlign:Ke.overwrite,availability:Ke.overwrite,isNavigable:Ke.overwrite,settings:Ke.overwrite,formatOptions:Ke.overwrite,exportSettings:Ke.overwrite});return Zn(r,t,n)}M.getTableColumns=Nt;function wt(e){const t=e.getCustomAggregateDefinitions();const n={};t.forEach(t=>{const a=e._entityType.entityProperties.find(e=>e.name===t.qualifier);if(a){const e=t.annotations?.Aggregation?.ContextDefiningProperties??a.annotations.Aggregation?.ContextDefiningProperties;n[a.name]=e?.map(e=>e.value)??[]}});return n}const Ut=function(e,t,n){const a=new Q(e,n);if(!a.isAnalyticsSupported()){return undefined}const i=new Set;t.forEach(e=>{const n=e;if(n.unit){const e=t.find(e=>e.name===n.unit);i.add(e.relativePath)}});const o=wt(a);const r={};t.forEach(n=>{const s=n;const l=e.entityProperties.find(e=>e.name===s.relativePath);if(s.propertyInfos===undefined&&s.relativePath){let e=o[s.relativePath];let n=false;if(!e&&l&&!!a.isPropertyGroupable(l)){n=true;e=l.annotations.Aggregation?.ContextDefiningProperties?.map(e=>e.value)}if(e&&!i.has(s.relativePath)){r[s.name]={fromGroupableProperty:n,relativePath:s.relativePath};const a=[];e.forEach(e=>{if(i.has(e)){return}const n=jt(e,t);if(n){a.push(n.name)}});if(a.length){r[s.name].additionalProperties=a}}}});return r};M.getExtensionInfoFromEntityType=Ut;function $t(t,n,a,i){if(t.control.type==="AnalyticalTable"){const o=Ut(n,t.columns,a),r=new Q(n,a);if(o){t.enableAnalytics=true;t.enable$select=false;t.enable$$getKeepAliveContext=false;t.analyticsExtensions=o;ra(t);const e=r.getAllowedTransformations();t.enableBasicSearch=e?e.includes("search"):true;t.annotation.groupConditions=oa(i,t.columns,t.control.type);t.annotation.aggregateConditions=ca(i,t.columns,o);if(l.isObjectPathDraftSupported(a.getDataModelObjectPath())){if(t.requestAtLeast){t.requestAtLeast.push("HasActiveEntity")}else{t.requestAtLeast=["HasActiveEntity"]}if(l.isDraftRoot(a.getEntitySet())){t.requestAtLeast.push("HasDraftEntity")}}}else{e.error(`Aggregation not supported for this entity type: ${n.name}`)}t.control.type="GridTable"}else if(t.control.type==="ResponsiveTable"){t.annotation.groupConditions=oa(i,t.columns,t.control.type)}else if(t.control.type==="TreeTable"){const e=new Q(n,a);const i=e.getAllowedTransformations();t.enableBasicSearch=i?i.includes("search"):true;t.enable$$getKeepAliveContext=true;t.annotation.changeSiblingForRootsSupported=n?.annotations.Hierarchy?.[`RecursiveHierarchyActions#${t.control.hierarchyQualifier??""}`]?.ChangeSiblingForRootsSupported??true;t.annotation.allowDropBetweenNodes=!!n.annotations.Hierarchy?.[`RecursiveHierarchyActions#${t.control.hierarchyQualifier??""}`]?.ChangeNextSiblingAction;if(l.isDraftRoot(a.getEntitySet())){if(t.requestAtLeast){t.requestAtLeast.push("HasDraftEntity")}else{t.requestAtLeast=["HasDraftEntity"]}}}if(t.control.enableUploadPlugin){const e=a.getAnnotationEntityType().annotations?.UI?.MediaResource?.Stream?.$target;if(!e){throw"UI.MediaResource annotation with Stream property missing"}const n=t.actions.find(e=>e.key===K.Create);t.annotation.uploadTable={stream:e.name,fileName:e.annotations.Core?.ContentDisposition?.Filename?.path,fileNameMaxLength:e.annotations.Core?.ContentDisposition?.Filename?.$target?.maxLength,acceptableMediaTypes:e.annotations.Core?.AcceptableMediaTypes,maxLength:e.maxLength,uploadAction:n}}}M.updateTableVisualizationForType=$t;function Vt(e,t,n,a){const i=t.getAnnotationEntityType(e);const o=[];function r(e){if(e&&!o.includes(e)&&e.indexOf("/")!==0){o.push(e)}}function s(e){if(e?.length){e.forEach(r)}}const c=(n||"").split(",");const u=c.filter(function(e){return i.resolvePath(e)});const d=(i.annotations.Common?.SemanticKey||[]).map(e=>e.value);const p=t.getEntitySet()?.annotations?.Capabilities;const f=l.getAlternateAndSecondaryKeys(i,t.getEntitySet());if(a){s(a.RequestAtLeast?.map(e=>e.value))}s(Rt(e,i));s(u);s(d);s(f);if(p){r(p.DeleteRestrictions?.Deletable?.path);r(p.UpdateRestrictions?.Updatable?.path)}return o}M.createRequestedProperties=Vt;function Rt(e,t){const n=[];e.forEach(function(e){if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&!e.Inline&&!e.Determining&&xe(e.NavigationAvailable)){const a=e.NavigationAvailable.path;if(t.resolvePath(a)){n.push(a)}}});return n}function Lt(e,t){const n=e.getManifestWrapper();if(t&&n.getNavigationConfiguration(t)){const e=n.getNavigationConfiguration(t);if(Object.keys(e).length>0){return t}}const a=e.getDataModelObjectPath();const i=e.getContextPath();const o=n.getNavigationConfiguration(i);if(o&&Object.keys(o).length>0){return i}return a.targetEntitySet?a.targetEntitySet.name:a.startingEntitySet.name}M.getNavigationTargetPath=Lt;function jt(e,t){return t.find(t=>{const n=t;return n.propertyInfos===undefined&&n.relativePath===e})}function Ht(e,t){const n=e.getConverterContextFor(e.getContextPath()).getDataModelObjectPath();t.forEach(e=>{const a=e;if(a.propertyInfos===undefined&&a.relativePath){const e=Me(n,a.relativePath);const i=e.targetObject;if(i){kt(i,e,t,a);const n=pe(i);const o=i?.annotations?.Common?.Timezone;if(n){const e=jt(n.name,t);a.timezone=e?.name}else if(o){a.timezoneText=o.toString()}const r=he(i),s=i.annotations.Common?.Text;if(xe(s)&&r!=="Value"){const e=jt(s.path,t);if(e&&e.name!==a.name){a.textArrangement={textProperty:e.name,mode:r};if(!e.exportSettings){e.exportSettings={type:"String"}}}}}}})}M.updateLinkedProperties=Ht;function kt(e,t,n,a){const i=ge(e)||ue(e);if(i){const e=Me(t,i);const o=Se(e);if(o){const e=jt(o,n);a.unit=e?.name}}else{const t=e?.annotations?.Measures?.ISOCurrency||e?.annotations?.Measures?.Unit;if(t){a.unitText=`${t}`}}}function Bt(e){const t=e.getAnnotationEntityType()?.annotations?.UI?.HeaderInfo?.Title?.Value?.path;const n=e.getAnnotationEntityType()?.annotations?.Common?.SemanticKey;const a=e?.getAnnotationEntityType()?.annotations?.UI?.HeaderInfo?.TypeName;const i=[];if(n){n.forEach(function(e){i.push(e.value)})}return{headerInfoTitlePath:t,semanticKeyColumns:i,headerInfoTypeName:a}}function Gt(e,t,n,a){const{presentationVariantAnnotation:i,isCondensedTableLayoutCompliant:o,selectionVariantAnnotation:r}=a??{};const s=wa(e,t,n,o,r);const{navigationPropertyPath:l}=fa(t);const c=Lt(n,l);const u=n.getManifestWrapper().getNavigationConfiguration(c);const d=Nt(e,t,n,u);const p=Kt(e,n);const f=Bt(n);const g=ua(e,t,n,s,u);const m=da(e,t,n,s,d,u,g,i);const y=xt(e,t,n,g.standardActions,u);const b=Wt(p,n);let v=s.header;v??=m.title===""?undefined:m.title;const h={type:Y.Table,annotation:m,control:s,actions:y.actions,commandActions:y.commandActions,columns:d,operationAvailableMap:JSON.stringify(p),operationAvailableProperties:b,headerInfoTitle:f.headerInfoTitlePath,semanticKeys:f.semanticKeyColumns,headerInfoTypeName:f.headerInfoTypeName,enable$select:true,enable$$getKeepAliveContext:true,header:v,headerVisible:s.headerVisible,requestAtLeast:Vt(e,n,b,i),handlePatchSent:n.getManifestWrapper().getTemplateType()!==X.ListReport};Ht(n,d);$t(h,n.getAnnotationEntityType(e),n,i);return h}M.createTableVisualization=Gt;function qt(e,t){const n=wa(undefined,"",e,false);const a=un({},e.getEntityType(),[],e,n.type,n.creationMode,{});const i=Kt(undefined,e);const o=Bt(e);const r=Lt(e,"");const s=e.getManifestWrapper().getNavigationConfiguration(r);const l=ua(undefined,"",e,n,s);const c={type:Y.Table,annotation:da(undefined,"",e,n,t?[]:a,s,l),control:n,actions:[],columns:a,operationAvailableMap:JSON.stringify(i),operationAvailableProperties:Wt(i,e),headerInfoTitle:o.headerInfoTitlePath,semanticKeys:o.semanticKeyColumns,headerInfoTypeName:o.headerInfoTypeName,enable$select:true,enable$$getKeepAliveContext:true,header:n.header,headerVisible:n.headerVisible,handlePatchSent:e.getManifestWrapper().getTemplateType()!==X.ListReport};Ht(e,a);$t(c,e.getEntityType(),e);return c}M.createDefaultTableVisualization=qt;function Kt(e,t){return h.getOperationAvailableMap(e,"table",t)}function zt(e){const t=L(e);const n=e.getEntitySet();const a=t.isUpdatable;const i=!It(a.expression)&&a.navigationExpression._type==="Unresolvable";const o=n?.annotations.Capabilities?.UpdateRestrictions?.Updatable;const r=xe(o)&&o.path;return i?r:""}function Wt(e,t){const n=new Set;for(const t in e){const a=e[t];if(a===null){n.add(t)}else if(typeof a==="string"){n.add(a)}}if(n.size){const e=t.getEntityType();const a=e.annotations?.UI?.HeaderInfo?.Title?.Value?.path;if(a){n.add(a)}}return Array.from(n).join(",")}function _t(e,t,n){const a=[];e.forEach(e=>{if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&e?.ActionTarget?.isBound&&t===e?.ActionTarget.sourceEntityType||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&e.RequiresContext&&e?.Inline?.valueOf()!==true){if(typeof e.annotations?.UI?.Hidden?.valueOf()==="object"){a.push(Dt(Yt(e,n),false))}}});return a}function Qt(e){let t;if(xe(e)){t=e.path}else{t=e}return t}function Yt(e,t){const n=e.annotations?.UI?.Hidden;let a=Qt(n);if(typeof a==="object"){return St(false)}else if(typeof a==="string"){if("visible"in e){a=a.substring(1,a.length-1)}if(a.indexOf("/")>0){const e=a.split("/");const n=e[0];if(Ne(t?.targetObject)&&t.targetObject.partner===n){return vt(e.slice(1).join("/"))}else{return St(true)}}else{return St(false)}}return St(true)}function Jt(e,t,n){return Object.keys(n).some(a=>{if(a===e){if(t?.ActionTarget?.isBound||t?.RequiresContext){n[e].requiresSelection=true}return true}return false})}function Xt(e,t,n){return e.some(e=>{if((e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&e?.Inline?.valueOf()!==true&&(e.annotations?.UI?.Hidden?.valueOf()===false||e.annotations?.UI?.Hidden?.valueOf()===undefined)){if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){const a=$e(["DataFieldForAction",e.Action]);if(Jt(a,e,t)){return false}return e?.ActionTarget?.isBound&&n===e?.ActionTarget.sourceEntityType}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(Jt(`DataFieldForIntentBasedNavigation::${e.SemanticObject}::${e.Action}`,e,t)){return false}return e.RequiresContext}}return false})}function Zt(e){const t=Object.keys(e).reduce((t,n)=>{const a=e[n];if(!a.menu){t.push(a)}else{t=[...t,...a.menu.filter(e=>typeof e!=="string")]}return t},[]);return!!t.find(e=>e.requiresSelection&&(e.visible===undefined||e.visible?.toString()==="true"))}function en(e){const t=[];if(e){Object.keys(e).forEach(n=>{const a=e[n];if(a.requiresSelection===true&&a.visible!==undefined){if(typeof a.visible==="string"){t.push(bt(a?.visible?.valueOf()))}}})}return t}function tn(e){const t=Pe(e.getDataModelObjectPath());const n=Te(e.getDataModelObjectPath());return{isDeletable:!(It(t)&&t.value===false),isUpdatable:!(It(n)&&n.value===false)}}M.getCapabilityRestriction=tn;function nn(e,t,n,a,i,o){let r=arguments.length>6&&arguments[6]!==undefined?arguments[6]:St(false);let s=arguments.length>7&&arguments[7]!==undefined?arguments[7]:St(false);const l=n.getManifestControlConfiguration(t);const c=l.tableSettings?.type;let u=l.tableSettings?.selectionMode;if(c==="TreeTable"&&!u){return Z.Multi}if(!e||u===Z.None){if(i.isDeletable&&o){return Ft(Pt(o,St(Z.Multi),St(Z.None)))}return Z.None}if(u===Z.ForceMulti){return Z.Multi}else if(u===Z.ForceSingle){return Z.Single}let d=[],p=[];const f=et(n.getManifestControlConfiguration(t).actions,n,[],undefined,false);let g,m;if(n.getTemplateType()===X.ObjectPage){g=Pe(n.getDataModelObjectPath());m=g?Ft(g,true):g}const y=!It(r)||r.value!==false;if(!u||u===Z.Auto){u=Z.Multi}if(y){u=u===Z.Single?Z.Single:Z.Multi}if(Xt(e,f.actions,n.getEntityType())||Zt(f.actions)){return u}d=_t(e,n.getEntityType(),n.getDataModelObjectPath());p=en(f.actions);if(d.length===0&&p.length===0&&(s||o||y)){if(!a){if(i.isDeletable||m!=="false"||y){const e=ht(s||true,o||true,r);return Ft(Pt(Mt(Ve.IsEditable,e),St(u),St(Z.None)))}else{return Ft(Pt(s,St(Z.Single),St(Z.None)))}}else if(y){return u}else if(i.isDeletable&&o){return Ft(Pt(o,St(u),St(Z.None)))}else{return Z.None}}else if(!a){if(i.isDeletable||m!=="false"||y){const e=Pt(y&&!i.isDeletable,r,St(true));return Ft(Pt(Mt(Ve.IsEditable,e),St(u),Pt(ht(...d.concat(p)),St(u),St(Z.None))))}else{return Ft(Pt(ht(...d.concat(p)),St(u),St(Z.None)))}}else if(i.isDeletable||y){return u}else{return Ft(Pt(ht(...d.concat(p),r),St(u),St(Z.None)))}}M.getSelectionMode=nn;function an(e,t,n){const a=[];const i=Xe(e.filter(e=>tt(e)));if(i){a.push({type:ie.Copy,annotationPath:n.getEntitySetBasedAnnotationPath(i.fullyQualifiedName),key:Le.generateKeyFromDataField(i),visible:Ft(nt(i,n)),visibleForContextMenu:Ft(on(i,n)),text:i.Label?.toString()??T.getResourceBundleFor("sap.fe.core").getText("C_COMMON_COPY"),isNavigable:true})}e.filter(e=>!tt(e)).forEach(e=>{if(lt(e)&&e.Inline?.valueOf()!==true&&e.Determining?.valueOf()!==true){const t=rn(e,n);if(t){a.push(t)}}else if(st(e)){const t=rn(e,n);if(t){a.push(t)}}});return{tableActions:a}}function on(e,t){return Mt(nt(e,t),Dt(vt("contextmenu/inactiveContext","internal"),false))}function rn(e,t){switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":const n={type:ie.DataFieldForAction,annotationPath:t.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:Le.generateKeyFromDataField(e),visible:Ft(nt(e,t)),visibleForContextMenu:Ft(on(e,t)),isNavigable:true};const a=t.getEntityType().fullyQualifiedName;if(Fa(e,a)){n.enabled=Je(t,e.ActionTarget,true)}return n;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":return{type:ie.DataFieldForIntentBasedNavigation,annotationPath:t.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:Le.generateKeyFromDataField(e),visible:Ft(nt(e,t)),visibleForContextMenu:Ft(on(e,t))};case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":return{type:ie.Menu,key:Le.generateKeyFromDataField(e),id:Le.generateKeyFromDataField(e),text:e.Label?.toString(),visible:Ft(nt(e,t)),visibleForContextMenu:Ft(on(e,t)),menu:e.Actions.map(e=>rn(e,t))};default:return}}function sn(e,t,n){let a=I.None;if(e){if(typeof e==="object"){a=Ct(e)}else{a=z(e)}}return At([a,vt(`filteredMessages`,"internal"),t&&Re.HasActive,t&&Re.IsActive,`${t}`,vt("@$ui5.fe.contextPath"),Ve.IsInactive],v.rowHighlighting,n)}function ln(t,n,a,i,o){const r=i?.create||i?.detail;const s=a.getManifestControlConfiguration(o);const l=s&&s.tableSettings||{};if(r?.outbound&&r.outboundDetail&&i?.create){return{mode:"External",outbound:r.outbound,outboundDetail:r.outboundDetail,navigationSettings:i}}if(a.getTemplateType()===X.ListReport&&![ae.NewPage,ae.External,ae.CreationDialog].includes(n.creationMode)){e.warning(`Creation mode '${n.creationMode}' can not be used within the List Report. Instead, the default mode "NewPage" is used.`);n.creationMode=ae.NewPage}else if(a.getTemplateType()!==X.ListReport&&n.type==="TreeTable"&&![ae.NewPage,ae.Inline,ae.CreationDialog].includes(n.creationMode)){e.warning(`Creation mode '${n.creationMode}' can not be used with a Tree Table. Instead, the default mode "NewPage" is used.`);n.creationMode=ae.NewPage}let c;if(t){const e=a.getEntitySet()?.annotations;const t=e?.Common,i=e?.Session;c=t?.DraftRoot?.NewAction||i?.StickySessionSupported?.NewAction;if(n.creationMode===ae.CreationRow&&c){throw Error(`Creation mode '${ae.CreationRow}' can not be used with a custom 'new' action (${c})`)}if(r?.route){return{mode:n.creationMode,append:n.createAtEnd,newAction:c?.toString(),navigateToTarget:n.creationMode===ae.NewPage?r.route:undefined}}}if(n.creationMode===ae.NewPage){if(a.getTemplateType()===X.ListReport){e.error("The creation mode 'NewPage' is used but the navigation configuration to the sub page is missing.")}else{n.creationMode=ae.Inline;if(l.creationMode?.createAtEnd===undefined){n.createAtEnd=false}e.info("The creation mode was changed from 'NewPage' to 'Inline' due to missing navigation configuration to the sub page.")}}return{mode:n.creationMode,append:n.createAtEnd,newAction:c?.toString()}}const cn=function(e,t,n,a,i){let o;let r=St(I.None);const s=t.getEntityType();const c=e?.annotations?.UI?.Criticality;if(n&&e){const e=n.display?.target||n.detail?.outbound;const u=t.getEntitySet();r=sn(c,!!l.getDraftRoot(u)||!!l.getDraftNode(u),s);if(e){o={type:"Outbound",navigationTarget:e}}if(!e&&n.detail?.route){const e=l.getDraftRoot(u)!==undefined||l.getDraftNode(u)!==undefined;o={type:"Navigation",routePath:n.detail.route,targetPath:a,checkEditable:e,recreateContext:i==="AnalyticalTable"}}}const u=At([vt("/deepestPath","internal")],v.navigatedRow,s);return{navigationInfo:o,action:o?"Navigation":undefined,rowHighlighting:Ft(r),rowNavigated:Ft(u),rowCriticalityForInsights:c?oe(c):undefined,visible:Ft(Tt(Ve.IsInactive))}};const un=function(e,t,n,a,i,o,r,s){if(n===undefined){n=[]}let l=[];const c=n;const u=new Q(t,a);const d=u.getGroupableProperties();if(i==="AnalyticalTable"&&u.isAnalyticsSupported()&&d){l=d.map(e=>e.$target).filter(e=>e!==undefined).map(e=>fe(e)).filter(e=>e&&!u.isPropertyGroupable(e)).map(e=>e?.name).filter(e=>e!==undefined)}t.entityProperties.forEach(t=>{const d=n.some(e=>e.name===t.name);if(!t.targetType&&!d&&!l.includes(t.name)){const l=yt(t.name,t,a,true,i);const d=Object.keys(l.properties);const p=Object.keys(l.additionalProperties);d.forEach(e=>{Ra(r,l,e)});const f=dn(t,a.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),t.name,true,true,u,a,r,s,o,l);if(d.length>0){f.propertyInfos=d;if(l.exportSettings.dataPointTargetValue){f.exportDataPointTargetValue=l.exportSettings.dataPointTargetValue}d.forEach(t=>{e[t]=l.properties[t].annotationProperty})}yn(n,e,f);if(p.length>0){f.additionalPropertyInfos=p;p.forEach(t=>{e[t]=l.additionalProperties[t]})}c.push(f)}if(he(t)==="Description"){s?.nonSortableProperties.push(t.name);if(xe(t?.annotations?.Common?.Text)){c.push(dn(t,a.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),t.name,false,false,u,a,r,s,o))}}});const p=An(e,c,a,t,r,o,s);return c.concat(p)};M.getColumnsFromEntityType=un;const dn=function(e,t,n,a,i,o,r,s,c,u,d,p){let f,g;const m=ft(r,e);const y=_(e);const b=e.name?En(e.name,true,false):undefined;const v=b!=e.name;const h=In(e,v);const T=gt(e);const I=Va(e,T);const P=s[n]==="Description";const C=(!y||P)&&!c?.nonSortableProperties.includes(n);const A=!P&&!c?.nonFilterableProperties.includes(n);const D={className:e.type||T,formatOptions:I.formatOptions,constraints:I.constraints};let S=null;if(bn(e)){S=pn(e,d)}const F=!i||y||s[n]?"Hidden":"Adaptation";const M=Sa(n,r);if(p){f=p;g="DataField::"+Ue(p);n=p}else{f=a?n:`Property::${n}`;g=(a?"DataField::":"Property::")+Ue(n)}const E={key:g,type:Ot.Annotation,label:h,groupLabel:v?In(e):undefined,group:v?b:undefined,annotationPath:t,semanticObjectPath:m,availability:F,name:f,relativePath:n,sortable:C,filterable:A,isGroupable:o.isAnalyticsSupported()?!!o.isPropertyGroupable(e):C,isKey:e.isKey,exportSettings:S,caseSensitive:Nn(r),typeConfig:D,importance:Gn(r,e.annotations?.UI?.DataFieldDefault),required:Yn(r,e,u),additionalLabels:M};Da(e,E);kn(e,E);if(o.isAnalyticsSupported()&&l.isObjectPathDraftSupported(r.getDataModelObjectPath())&&(n==="HasActiveEntity"||n==="HasDraftEntity")){const e=E;e.extension={technicallyAggregatable:false,technicallyGroupable:true};return e}else{return E}};const pn=function(e,t){let n,a,i,o,r,s,l,c;const u=t?Object.keys(t.properties):[];if(t&&u?.length===1){e=t.properties[u[0]].annotationProperty}const d=gt(e);if(Oe(e)){n=de(e);l=me(e);a=pe(e);i=le(e);o=ce(e);s=se(e);c=e.scale}n=t?.exportSettings?.unitProperty??n?.name??l?.name;a=t?.exportSettings?.timezoneProperty??a?.name;c=t?.exportSettings?.scale??c;const p=pa(d,s,!!l,t?.exportSettings);if(a||p==="DateTime"&&!o){r=false}const f={type:p,inputFormat:fn(d),delimiter:gn(d),scale:c,unitProperty:n,unit:t?.exportSettings.unit??i,timezoneProperty:a,timezone:t?.exportSettings.timezone??o?.toString(),template:t?.exportSettings.template,wrap:t?.exportSettings.wrap,utc:r};if(f.unitProperty||f.unit){f.autoScale=true}return mn(f)};const fn=function(e){return e==="Edm.Date"?"YYYY-MM-DD":undefined};const gn=function(e){return e==="Edm.Int64"?true:undefined};const mn=function(e){for(const t in e){if(e[t]===undefined){delete e[t]}}return e};function yn(e,t,n,a){const i=e.filter(e=>e.propertyInfos?.includes(n.relativePath)||a&&e.propertyInfos?.includes(a));if(i?.length===1&&(t[n.relativePath]||a&&t[a])&&i[0].propertyInfos?.length===1){n.label=i[0].label;n.tooltip=i[0].tooltip}}function bn(e){let t,n;const a=e.annotations.UI?.DataFieldDefault;if(Oe(e)){if(_(e)){return false}t=a?.$Type}else if(_(e)){return false}else{n=e;t=n.$Type;if(t==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&n.Target?.$target?.$Type){t=n.Target?.$target?.$Type;return t!==undefined&&!"com.sap.vocabularies.UI.v1.ChartDefinitionType".includes(t)}else if(n.Value?.$target?.annotations?.Core?.MediaType?.term==="Org.OData.Core.V1.MediaType"&&n.Value?.$target?.annotations?.Core?.isURL!==true){return false}}return t?!["com.sap.vocabularies.UI.v1.DataFieldForAction","com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation","com.sap.vocabularies.UI.v1.DataFieldForActionGroup"].includes(t):true}const vn=function(e){switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":return!!e.Inline;case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":return true;default:return false}};const hn=function(e){const t=e.targetObject;let n;if(t){switch(t.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataPointType":n=t.Value.$target;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":if(t?.Target?.$target?.$Type==="com.sap.vocabularies.UI.v1.DataPointType"){n=t.Target.$target?.Value.$target}break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForAction":default:n=undefined}}const a=St(false);const i=St(false);return Mt(...[Tt(Dt(Ct(t?.annotations?.UI?.Hidden),true)),Pt(!!n,n&&Tt(Dt(Ct(n.annotations?.UI?.Hidden),true)),true),ht(Tt(a),i)])};M._getVisibleExpression=hn;const Tn=function(e){const t=[];if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target?.$target?.$Type==="com.sap.vocabularies.UI.v1.FieldGroupType"){if(e?.annotations?.UI?.Hidden){return Ft(Tt(Dt(Ct(e.annotations.UI.Hidden),true)))}else{e.Target.$target.Data?.forEach(e=>{t.push(hn({targetObject:e}))});return Ft(Pt(ht(...t),St(true),St(false)))}}else{return undefined}};const In=function(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!e){return undefined}if(Oe(e)||Ne(e)){const t=e.annotations?.UI?.DataFieldDefault;if(t&&!t.qualifier&&t.Label){return t.Label?.toString()}return e.annotations.Common?.Label?.toString()??e.name}else if(ot(e)){if(!!t&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"){return e?.Label?.toString()}return e?.Label?.toString()??Ft(Ct(e.Value?.$target?.annotations?.Common?.Label,[],e.Value?.$target?.name))}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){return e.Label?.toString()??Ft(Ct(e.Target?.$target?.Value?.$target?.annotations?.Common?.Label?.valueOf()))}else{return e.Label?.toString()}};const Pn=function(e){if(!e){return undefined}if(Oe(e)||e.annotations?.Common?.QuickInfo){return e.annotations?.Common?.QuickInfo?Ft(Ct(e.annotations.Common.QuickInfo)):undefined}else if(ot(e)){return e.Value?.$target?.annotations?.Common?.QuickInfo?Ft(Ct(e.Value.$target.annotations.Common.QuickInfo)):undefined}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){const t=e.Target?.$target;return t?.Value?.$target?.annotations?.Common?.QuickInfo?Ft(Ct(t.Value.$target.annotations.Common.QuickInfo)):undefined}else{return undefined}};function Cn(e,t){return At([vt(`semanticKeyHasDraftIndicator`,"internal"),vt(`filteredMessages`,"internal"),e,t],v.getErrorStatusTextVisibilityFormatter)}M.getRowStatusVisibility=Cn;const An=function(e,t,n,a,i,o,r){const s=[];const l={};const c=new Q(a,n);Object.keys(e).forEach(a=>{const u=e[a],d=n.getAbsoluteAnnotationPath(a),p=t.find(e=>e.name===a);const f=n.getConverterContextFor(n.getContextPath()).getDataModelObjectPath();const g=Me(f,a);if(re(g)){const p=Se(g,false,true);const f=dn(u,d,a,true,false,c,n,i,r,o,undefined,p);La(t,a,f);yn(t,e,f,a);s.push(f);l[a]=p??a}else if(p===undefined){const l=dn(u,d,a,true,false,c,n,i,r,o);La(t,a,l);yn(t,e,l);s.push(l)}else if(p.annotationPath!==d||p.propertyInfos){const p=`Property::${a}`;if(!t.some(e=>e.name===p)){const f=dn(u,d,a,false,false,c,n,i,r,o);La(t,a,f);yn(t,e,f);s.push(f);l[a]=p}else if(t.some(e=>e.name===p)&&t.some(e=>e.propertyInfos?.includes(a))){l[a]=p}}else if(i[a]==="Description"&&!p.filterable&&!r?.nonFilterableProperties.includes(a)){r?.nonSortableProperties.push(a);const e=dn(u,d,a,false,false,c,n,{},r,o);e.isGroupable=false;s.push(e)}});t.forEach(e=>{e.propertyInfos=e.propertyInfos?.map(e=>l[e]??e);e.additionalPropertyInfos=e.additionalPropertyInfos?.map(e=>l[e]??e)});return s};const Dn=function(e){if(ot(e)&&e.Value?.path){return e.Value?.path}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target?.$target?.Value?.path){return e.Target?.$target?.Value.path}else{return Le.generateKeyFromDataField(e)}};const Sn=function(e,t,n){const a=`Property_Technical::${e}`;const i=t.find(e=>e.key===a);const o=!i&&t.find(t=>t.name===e&&!t.propertyInfos);if(o){const i={key:a,type:Ot.Annotation,label:o.label,annotationPath:o.annotationPath,availability:"Hidden",name:a,relativePath:o.relativePath,sortable:false,isGroupable:false,isKey:false,exportSettings:null,caseSensitive:false,aggregatable:false,filterable:false,extension:{technicallyGroupable:true,technicallyAggregatable:true}};t.push(i);n[e]=i.name}};const Fn=function(e,t,n){const a=n.getManifestControlConfiguration(t)?.columns;const i=a&&Object.keys(a);return i&&!!i.find(function(t){return t===e&&a[t].showDataFieldsLabel})};const Mn=function(e){let t="";switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":t=e?.Value?.path;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":t=e?.Target?.value;break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldWithActionGroup":t=Le.generateKeyFromDataField(e);break}return t};const En=function(e,t,n){const a=t?e.lastIndexOf("/"):e.indexOf("/");if(a===-1){return e}return n?e.substring(a+1,e.length):e.substring(0,a)};const On=function(e,t){if(ot(e)&&xe(e.Value)){const n=Me(t.getDataModelObjectPath(),e.Value.path);return re(n)}else{return false}};const xn=function(e,t,n,a){return!n.includes(t)&&((e.$Type==="com.sap.vocabularies.UI.v1.DataField"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation")&&Object.keys(a.properties).some(e=>{const t=_(a.properties[e].annotationProperty);return!t&&!n.includes(e)})||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithAction")};const Nn=function(e){const t=wn(e);return Array.isArray(t)?!t.includes("tolower"):true};M.isFilteringCaseSensitive=Nn;function wn(e){const t=e.getEntitySet();if(u.isEntitySet(t)){return t.annotations.Capabilities?.FilterFunctions??e.getEntityContainer().annotations.Capabilities?.FilterFunctions}return undefined}function Un(e){return e===undefined?undefined:{textLinesEdit:4,...e}}function $n(e,t){const n=[];let a=false;for(let i=0;i<e.length;i++){n.push(e[i].value);if(e[i].value===t){a=true}}return{values:n,semanticKeyFound:a}}function Vn(e,t){let n=false;let a;if(e&&e.length>=1&&t&&t.length>=1){for(let i=0;i<e.length;i++){if([e[i]].some(e=>t.includes(e))){n=true;a=e[i];break}}}return{semanticKeyHasPropertyInFieldGroup:n,fieldGroupPropertyPath:a}}function Rn(e,t){const n=[];let a={semanticKeyHasPropertyInFieldGroup:false,fieldGroupPropertyPath:undefined};if(e&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target?.$target?.$Type==="com.sap.vocabularies.UI.v1.FieldGroupType"){e.Target.$target.Data?.forEach(e=>{if((e.$Type==="com.sap.vocabularies.UI.v1.DataField"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")&&e.Value){n.push(e.Value.path)}a=Vn(t,n)})}return{semanticKeyHasPropertyInFieldGroup:a.semanticKeyHasPropertyInFieldGroup,propertyPath:a.fieldGroupPropertyPath}}function Ln(e,t,n){if(!t){return{}}const a=$n(t,e);const i=Rn(n,a.values);if(i.semanticKeyHasPropertyInFieldGroup){return{fieldGroupDraftIndicatorPropertyPath:i.propertyPath,fieldGroupName:e,showErrorObjectStatus:Ft(Cn(e,true))}}else if(a.semanticKeyFound){return{hasDraftIndicator:true,showErrorObjectStatus:Ft(Cn(e,false))}}return{}}function jn(e){const t=e?.annotations?.UI?.Importance;if(t&&t.includes("UI.ImportanceType/High")){return 3}if(t&&t.includes("UI.ImportanceType/Medium")){return 2}if(t&&t.includes("UI.ImportanceType/Low")){return 1}return 0}function Hn(e){const t=e?.annotations?.UI?.Importance;return t?t.split("/")[1]:te.None}function kn(e,t){const n=pt(e);if(it(e)&&typeof n==="string"&&t.exportSettings&&t.exportSettings?.unit!=="%"){t.exportDataPointTargetValue=n;t.exportSettings.template="{0}/"+n}}function Bn(e){if(e&&e.length>0){let t=-1;let n=-1;let a;for(const i of e){n=jn(i);if(n>t){t=n;a=i}}return Hn(a)}return te.None}function Gn(e,t){if(!t){return undefined}const n=e.getDataModelObjectPath().targetEntityType.annotations.Common?.SemanticKey??[];const a=sa(e);const i=[...n,...a].map(e=>e.$target?.fullyQualifiedName);let o;if(we(t,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")){const e=t.Target.$target;if(we(e,"com.sap.vocabularies.UI.v1.FieldGroupType")){const n=e.Data;if(n.some(function(e){return ot(e)&&i.includes(e.Value?.$target?.fullyQualifiedName)})){return te.High}else{if(t?.annotations?.UI?.Importance){return Hn(t)}o=n.filter(function(e){return e?.annotations?.UI?.Importance});return Bn(o)}}}return i.includes(t.Value?.$target?.fullyQualifiedName)?te.High:Hn(t)}M.getImportance=Gn;const qn=function(e,t,n){const a=n.getAnnotationEntityType(e),i=[],o={},r={},s=ve(n.getEntitySet()),l=n.getManifestControlConfiguration(t),c=Ua(n,l),u=n.getManifestWrapper().getSapFeManifestConfiguration()?.macros?.table?.defaultCreationMode==="InlineCreationRows"?ae.InlineCreationRows:undefined,d=l?.tableSettings?.creationMode?.name??u??ae.Inline;const p=n.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[n.getEntityType()])[0];if(e){const a=n.getConverterContextFor(Ce(n.getDataModelObjectPath()));e.forEach(e=>{if(!vn(e)){return}let l=null;const u=ot(e)&&e.Value?.$target?.fullyQualifiedName?ft(n,e):undefined;const f=Mn(e);const g=mt(e,n,c);const m=Object.keys(g.properties);const y=Object.keys(g.additionalProperties);const b=f?En(f,true,false):undefined;const v=b!=f;const h=In(e,v);const T=Dn(e);const I=b?b.includes(`@${"com.sap.vocabularies.UI.v1.FieldGroup"}`):false;const P=I?Fn(T,t,n):false;const C=gt(e);const A=Un(Ln(T,p,e));const D=Me(n.getDataModelObjectPath(),f);const S=D.targetEntityType.navigationProperties;const F=S.filter(e=>!e.isCollection&&e.targetType.annotations.Common?.SAPObjectNodeType?.Name==="BusinessSituation");const M=F.length>=1?F[0]:undefined;if(M&&A){A.hasSituationsIndicator=true}let E;if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target?.$target?.$Type==="com.sap.vocabularies.UI.v1.FieldGroupType"){E=Tn(e)}const O=On(e,a);if(!O&&bn(e)){l=pn(e,g)}let x;if(C){x=Va(e,C)}const N={className:C,formatOptions:{...A,...x?.formatOptions},constraints:{...x?.constraints}};const w={};if(!C||!N){w.widthCalculation=null}const U=!O&&xn(e,f,s.nonSortableProperties,g);const $=_(e)?"Hidden":"Default";const V={key:Le.generateKeyFromDataField(e),type:Ot.Annotation,label:h,groupLabel:v?In(e):undefined,group:v?b:undefined,FieldGroupHiddenExpressions:E,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),semanticObjectPath:u,availability:$,name:T,showDataFieldsLabel:P,required:Yn(n,e,d),relativePath:f,sortable:U,propertyInfos:m.length?m:undefined,additionalPropertyInfos:y.length>0?y:undefined,exportSettings:l,width:e.annotations?.HTML5?.CssDefaults?.width?.valueOf()||undefined,importance:Gn(n,e),isNavigable:true,formatOptions:A,caseSensitive:Nn(n),typeConfig:N,visualSettings:w,timezoneText:l?.timezone,isPartOfLineItem:true,isMultiValue:O};const R=Pn(e)??h;if(R){V.tooltip=R}if(g.exportSettings.dataPointTargetValue){V.exportDataPointTargetValue=g.exportSettings.dataPointTargetValue}i.push(V);m.forEach(t=>{o[t]=g.properties[t].annotationProperty;if(O){s.nonSortableProperties.push(t)}Ra(r,g,t);if(g.properties[t].displayModeOfPropertyUsedAsDescription==="Description"){$a(n,D,e,o,f,s)}});y.forEach(e=>{o[e]=g.additionalProperties[e]})})}return un(o,a,i,n,c,d,r,s)};const Kn=function(e,t,n,a){let i;if(e){i=e.map(function(e){const i=t.find(function(t){return t.relativePath===e&&t.propertyInfos===undefined});if(i){return i.name}else{const i=An({[e]:a.resolvePath(e)},t,n,a,{});t.push(i[0]);return i[0].name}})}return i};const zn=function(e,t,n){const a=t.Data;return a.some(function(t){if(ct(t)&&t?.Value?.$target.type!=="Edm.Boolean"){return ye(t)||n===ae.InlineCreationRows&&la(t.Value.$target.fullyQualifiedName,e)}})};const Wn=function(e,t,n){const a=t.Target.$target;const i=be(t);if(ut(t)){if(zn(e,a,n)){return true}const t=a.Data;return t.some(t=>Yn(e,t,n))}if(dt(t)&&a.Visualization!=="UI.VisualizationType/Rating"){if(i){return false}if(ye(t)){return true}return Qn(e,a,n)}return false};const _n=function(e,t,n){return t.type!=="Edm.Boolean"&&!at(t)&&(ye(t)||n===ae.InlineCreationRows&&la(t.fullyQualifiedName,e))};const Qn=function(e,t,n){return ye(t)||n===ae.InlineCreationRows&&la(t.Value.$target.fullyQualifiedName,e)};const Yn=function(e,t,n){const a=n||ae.Inline;if(e.getTemplateType()===X.ListReport||e.getTemplateType()===X.AnalyticalListPage){return undefined}if(Oe(t)){return _n(e,t,a)?Ft(Ve.IsEditable):undefined}if(rt(t)){return Wn(e,t,a)?Ft(Ve.IsEditable):undefined}if(ct(t)&&t.Value?.$target?.type!=="Edm.Boolean"){return ye(t)||a===ae.InlineCreationRows&&la(t.Value.$target.fullyQualifiedName,e)?Ft(Ve.IsEditable):undefined}return undefined};const Jn=function(e,t){if(t?.length){e=t}if(e){return e.map(t=>`{${e.indexOf(t)}}`).join(`${"\n"}`)}return undefined};const Xn=function(e,t,n,a,i){const o={};function r(e,n){return t.some(e=>e.key===n)}function s(e){return e.type===Ot.Slot}function l(e){return e.type===undefined&&!!e.template}function c(e,t){const a=ve(n.getEntitySet());e.forEach(e=>{t.forEach(t=>{if(t.name===e){t.sortable=!a.nonSortableProperties.includes(e.replace("Property::",""));t.isGroupable=t.sortable;t.filterable=!a.nonFilterableProperties.includes(e.replace("Property::",""));t.isPartOfCustomColumn=true}})})}for(const u in e){const d=e[u];Le.validateKey(u);const p={key:u,widthIncludingColumnHeader:d.widthIncludingColumnHeader,width:d.width||undefined,position:{anchor:d.position?.anchor,placement:d.position===undefined?qe.After:d.position.placement},caseSensitive:Nn(n)};if(r(d,u)){const e={...p,importance:d?.importance,horizontalAlign:d?.horizontalAlign,availability:d?.availability,type:Ot.Annotation,isNavigable:r(d,u)?undefined:_e(d,i,true),settings:d.settings,formatOptions:Un(d.formatOptions),exportSettings:ja(d?.exportSettings,t,n,a,undefined,u)};o[u]=e}else{const e=Kn(d.properties,t,n,a);const i=n.fetchTextFromMetaModel(d.tooltip),r=n.fetchTextFromMetaModel(d.header);const f=e?ja(d?.exportSettings,t,n,a,e):null;const g={...p,header:r,importance:d?.importance||te.None,horizontalAlign:d?.horizontalAlign||ne.Begin,availability:d?.availability||"Default",template:d.template,propertyInfos:e,exportSettings:f,id:`CustomColumn::${u}`,name:`CustomColumn::${u}`,formatOptions:{textLinesEdit:4},isGroupable:false,isNavigable:false,sortable:false,visualSettings:{widthCalculation:null},tooltip:i?i:r,properties:d.properties,required:d.required&&n.getTemplateType()!==X.ListReport&&n.getTemplateType()!==X.AnalyticalListPage?Ft(Ve.IsEditable):undefined};if(e){c(e,t)}if(s(d)){const e={...g,type:Ot.Slot};o[u]=e}else if(l(d)){const e={...g,type:Ot.Default};o[u]=e}else{const e=`The annotation column '${u}' referenced in the manifest is not found`;n.getDiagnostics().addIssue(Be.Manifest,He.Low,e,ke,ke?.AnnotationColumns?.InvalidKey)}}}return o};function Zn(e,t,n){const a=n.getManifestControlConfiguration(t);const i=Ua(n,a);if(!["GridTable","TreeTable","AnalyticalTable"].includes(i)){return e}const o=e.find(e=>e.formatOptions?.hasSituationsIndicator!==undefined&&e.formatOptions?.hasSituationsIndicator===true);if(o?.formatOptions){o.formatOptions.hasSituationsIndicator=false;const t={key:"situationsIndicator",name:"situationsIndicator",propertyKey:o.name,isSituationsIndicator:true,availability:"Default",label:"{sap.fe.i18n>C_SITUATIONS_STATUS_COLUMN_LABEL_TOOLTIP}",tooltip:"{sap.fe.i18n>C_SITUATIONS_STATUS_COLUMN_LABEL_TOOLTIP}",type:Ot.Computed,formatOptions:null,exportSettings:null,clipboardSettings:null,propertyInfos:undefined,caseSensitive:false};const n=e.findIndex(e=>e.availability!=="Hidden");e.splice(n+1,0,t)}const r=e.filter(e=>e.formatOptions?.hasDraftIndicator===true);if(r.length&&n.getTemplateType()===X.ListReport&&(l.isDraftNode(n.getEntitySet())||l.isDraftRoot(n.getEntitySet()))){r.forEach(e=>{if(e?.formatOptions){e.formatOptions.hasDraftIndicator=false}});const t={key:"draftStatus",name:"draftStatus",propertyKey:r[0].name,isDraftIndicator:true,availability:"Default",label:"{sap.fe.i18n>C_DRAFT_STATUS_COLUMN_LABEL_TOOLTIP}",tooltip:"{sap.fe.i18n>C_DRAFT_STATUS_COLUMN_LABEL_TOOLTIP}",type:Ot.Computed,formatOptions:null,exportSettings:null,caseSensitive:false};let n=0;if(o){n=e.findIndex(e=>e.isSituationsIndicator===true)-1}else{n=e.findIndex(e=>e.availability!=="Hidden")}e.splice(n+1,0,t)}return e}M.addComputedColumns=Zn;function ea(e,t,n){const a=t.getManifestWrapper();const i=t.getManifestControlConfiguration(e);const o=a.getVariantManagement();const r=[];const s=n.type==="AnalyticalTable";const l=n.type==="ResponsiveTable";if(i?.tableSettings?.personalization!==undefined){const e=i.tableSettings.personalization;if(e===true){switch(n.type){case"AnalyticalTable":return["Sort","Column","Filter","Group","Aggregate"];case"ResponsiveTable":return["Sort","Column","Filter","Group"];default:return["Sort","Column","Filter"]}}else if(typeof e==="object"){if(e.sort){r.push("Sort")}if(e.column){r.push("Column")}if(e.filter){r.push("Filter")}if(e.group&&(s||l)){r.push("Group")}if(e.aggregate&&s){r.push("Aggregate")}return r.length>0?r:undefined}}else{r.push("Sort");r.push("Column");if(t.getTemplateType()===X.ListReport){if(o===J.Control||ta(a,t)){r.push("Filter")}}else{r.push("Filter")}if(s){r.push("Group");r.push("Aggregate")}if(l){r.push("Group")}return r}}M.getP13nMode=ea;function ta(e,t){return e.isFilterBarHidden()&&!t.getManifestWrapper().hasMultipleVisualizations()&&t.getTemplateType()!==X.AnalyticalListPage}function na(e,t,n){const a=ve(e.getEntitySet()).nonSortableProperties;const i={sorters:[]};if(t?.SortOrder){t.SortOrder.forEach(e=>{const t=e.Property;if(t?.$target!==undefined&&!a.includes(t.$target.name)){const a=ia([t],n)[0];if(a){i.sorters.push({name:a,descending:!!e.Descending})}}})}return i.sorters.length?i:undefined}function aa(e){if(!e){return undefined}const t=e.InitialExpansionLevel?.valueOf();return typeof t==="number"?t+1:undefined}function ia(e,t){const n=[];let a,i;e.forEach(e=>{if(e?.value){a=t.find(t=>{i=t;return!i.propertyInfos&&i.relativePath===e?.value});if(a){n.push(a.name)}}});return n}function oa(e,t,n){const a={groupLevels:[]};if(e?.GroupBy){let i=e.GroupBy;if(n==="ResponsiveTable"){i=i.slice(0,1)}a.groupLevels=ia(i,t).map(e=>({name:e}))}return a.groupLevels.length?a:undefined}function ra(e){const t={};e.columns.forEach(n=>{n=n;const a=Object.keys(e.analyticsExtensions).find(e=>e===n.name);if(a){const t=e.analyticsExtensions[a];n.aggregatable=!t.fromGroupableProperty;n.extension=t??{}}if(n.additionalPropertyInfos?.length){n.additionalPropertyInfos.forEach(n=>{Sn(n,e.columns,t)})}});e.columns.forEach(e=>{e=e;if(e.additionalPropertyInfos){e.additionalPropertyInfos=e.additionalPropertyInfos.map(e=>t[e]??e);e.propertyInfos=e.propertyInfos?.concat(e.additionalPropertyInfos)}})}function sa(e){return Fe(e.getDataModelObjectPath(),e=>e?.InsertRestrictions?.RequiredProperties,false)}function la(e,t){return sa(t).map(e=>e.$target?.fullyQualifiedName).includes(e)}function ca(e,t,n){const a={};if(e?.Total){const n=e.Total;ia(n,t).forEach(e=>{a[e]={}})}else{for(const e in n){if(!n[e].fromGroupableProperty){a[e]={}}}}return Object.keys(a).length?a:undefined}function ua(e,t,n,a,i){const o=ln(e,a,n,i,t);const r=q(n,o.mode,a);const s=B(n,r);const l=k(n,r);const c=j(n,r);const u=H(r,O(n));const d={cut:V(n,r),create:R(n,r),delete:$(n,r),paste:x(n,r,u),massEdit:w(n,r),insights:U(n,r,t),creationRow:G(n,r)};const p={creationBehaviour:o,cutButtonVisibilityExpression:s,deleteButtonVisibilityExpression:l,massEditButtonVisibilityExpression:c,isInsertUpdateActionsTemplated:u,standardActions:d};if(r.tableManifestConfiguration.type==="TreeTable"){p.standardActions.moveUp=N(n,r,true);p.standardActions.moveDown=N(n,r,false)}return p}M.getStandardActionsConfiguration=ua;function da(e,t,n,a,i,o,r,s){const{navigationPropertyPath:l}=fa(t);const c=n.getDataModelObjectPath().targetEntityType.annotations?.UI?.HeaderInfo?.TypeNamePlural;const u=c&&Ft(Ct(c));const d=n.getDataModelObjectPath().targetEntitySet;const p=n.getManifestWrapper();const f=l.length===0;const g=ea(t,n,a);const m=l?W(t):W(n.getContextPath(),"LineItem");const y=tn(n);const b=Lt(n,l);const v=nn(e,t,n,f,y,r.deleteButtonVisibilityExpression,r.massEditButtonVisibilityExpression,r.cutButtonVisibilityExpression);let h=l?10:30;if(s?.MaxItems){h=s.MaxItems.valueOf()}else if(a.type==="TreeTable"){h=200}else if(a.type==="GridTable"||a.type==="AnalyticalTable"){h=100}const T=p.getVariantManagement();const I=Ie(n.getDataModelObjectPath());return{id:m,apiId:$e([m,"Table"]),entityName:d?d.name:"",entityTypeName:d&&d.entityType?d.entityType.name:"",collection:Ce(n.getDataModelObjectPath()),navigationPath:l,row:cn(e,n,o,b,a.type),p13nMode:g,isInsertUpdateActionsTemplated:r.isInsertUpdateActionsTemplated,updatablePropertyPath:zt(n),displayMode:E(n,true),create:r.creationBehaviour,selectionMode:v,variantManagement:T==="Control"&&!g?J.None:T,threshold:h,sortConditions:na(n,s,i),title:u,searchable:a.type!=="AnalyticalTable"&&!(It(I)&&I.value===false),initialExpansionLevel:aa(s),requiredProperties:sa(n).filter(e=>e?.$target?.type!=="Edm.Boolean").map(e=>e.value)}}M.getTableAnnotationConfiguration=da;function pa(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let a=arguments.length>3?arguments[3]:undefined;let i="String";if(!e||a?.dataPointTargetValue){return i}if(a?.isCurrency||n){return"Currency"}if(t){return"Timezone"}if(a?.wrap){return i}switch(e){case"Edm.Decimal":case"Edm.Int32":case"Edm.Int64":case"Edm.Double":case"Edm.Byte":i="Number";break;case"Edm.DateOfTime":case"Edm.Date":i="Date";break;case"Edm.DateTimeOffset":i="DateTime";break;case"Edm.TimeOfDay":i="Time";break;case"Edm.Boolean":i="Boolean";break;default:i="String"}return i}function fa(e){const[t,n]=e.split("@");let a=t;if(a.lastIndexOf("/")===a.length-1){a=a.substring(0,a.length-1)}return{navigationPropertyPath:a,annotationPath:n}}M.splitPath=fa;function ga(e,t){const n=t.getEntityTypeAnnotation(e);const a=n.annotation;if(a){const e=[];a.SelectOptions?.forEach(t=>{const n=t.PropertyName;const a=n?.value??"";if(!e.includes(a)){e.push(a)}});return{text:a?.Text?.toString(),propertyNames:e}}return undefined}M.getSelectionVariantConfiguration=ga;function ma(e,t,n){let a=e.enableFullScreen??n;if(!n&&a&&t.getTemplateType()===X.ListReport){a=false;t.getDiagnostics().addIssue(Be.Manifest,He.Low,je.FULLSCREENMODE_NOT_ON_LISTREPORT)}return a}function ya(e,t,n){let a;if(t!=="ResponsiveTable"){return undefined}switch(n.getTemplateType()){case X.ListReport:case X.ObjectPage:a=e.selectAll===false?"ClearAll":"Default";if(n.getTemplateType()===X.ObjectPage&&n.getManifestWrapper().useIconTabBar()){a=!e.selectAll?"ClearAll":"Default"}break;case X.AnalyticalListPage:a=!e.selectAll?"ClearAll":"Default";break;default:}return a}function ba(e,t,n){if(e!=="ResponsiveTable"){if(n){return{rowCountMode:"Auto",rowCount:3}}else{return{rowCountMode:t.rowCountMode??"Fixed",rowCount:t.rowCount??(e==="GridTable"?5:10)}}}else{return{}}}function va(e,t){return t.condensedTableLayout!==undefined&&e!=="ResponsiveTable"?t.condensedTableLayout:false}function ha(e){return e.selectAll===true||e.selectionLimit===0?0:e.selectionLimit||200}function Ta(e){return e.creationMode?.inlineCreationRowCount?e.creationMode?.inlineCreationRowCount:1}function Ia(e,t,n){return e.enableExport!==undefined?e.enableExport:t.getTemplateType()!=="ObjectPage"||n}function Pa(e){return e.frozenColumnCount}function Ca(e){return e.widthIncludingColumnHeader??false}function Aa(e,t,n,a){let i=false;const o={};const r=n.getAnnotationEntityType(t);if(e.quickVariantSelection){const t=(e.quickVariantSelection.paths??[]).reduce((e,t)=>{if(r.resolvePath(t.annotationPath)){e.push({annotationPath:t.annotationPath})}return e},[]);if(t.length){o.quickFilters={showCounts:e.quickVariantSelection.showCounts,paths:t}}}if(a){o.hiddenFilters={paths:[{annotationPath:`@${a.fullyQualifiedName.split("@")[1]}`}]}}i=!!e.quickVariantSelection?.hideTableTitle;return{filters:o,headerVisible:!(o?.quickFilters&&i)}}function Da(e,t){const n=Pn(e)??t.label;if(n){t.tooltip=n}}function Sa(e,t){const n=Me(t.getDataModelObjectPath(),e).navigationProperties;if(n?.length>0){const e=[];n.forEach(t=>{e.push(In(t)||t.name)});return e}}function Fa(e,t){let n=false;if(e.ActionTarget?.annotations?.Core?.OperationAvailable!==undefined){const a=e.ActionTarget?.isBound;const i=a&&e.ActionTarget?.sourceType!==t;const o=e.ActionTarget?.parameters[0]?.isCollection;if(!a||i||o){n=true}}return n}function Ma(e,t,n){const a=n.getDataModelObjectPath();e.hierarchyQualifier=t.hierarchyQualifier;const i=De(a,e.hierarchyQualifier);const o=Ae(a);e.isHierarchyParentNodeUpdatable=!o?.includes(i);e.isNodeMovable=Ea(t.isNodeMovable,e);e.isMoveToPositionAllowed=Ea(t.isMoveToPositionAllowed,e);e.createEnablement=Ea(t.creationMode?.isCreateEnabled,e);if(t.creationMode?.nodeType?.propertyName&&t.creationMode?.nodeType?.values){const a=t.creationMode.nodeType.values;e.nodeType={propertyName:t.creationMode.nodeType.propertyName,values:Object.keys(a).map(t=>{const i=a[t];if(typeof i==="string"){return{value:t,text:i}}else{return{value:t,text:i.label,creationDialogFields:e.creationMode===ae.CreationDialog?Na(i.creationFields,n):undefined}}})}}if(t.creationMode?.createInPlace){e.createInPlace=true}}function Ea(e,t){if(!e){return undefined}const n=e.lastIndexOf(".")||-1;const a=e.substring(0,n).replace(/\./gi,"/");const i=e.substring(n+1);if(!a.startsWith("/extension/")){if(!t.additionalRequiredModules){t.additionalRequiredModules=[a]}else if(!t.additionalRequiredModules.includes(a)){t.additionalRequiredModules.push(a)}}return{moduleName:a,methodName:i}}M.getCustomFunctionInfo=Ea;function Oa(e){return e?.tableSettings?.disableRequestCache||false}function xa(e,t){const n={visibleFields:[],ignoredFields:[],operationGroupingMode:t.getTemplateType()===X.ListReport?ee.Isolated:ee.ChangeSet};if(!e.enableMassEdit){return{enabled:false,...n}}if(e.enableMassEdit===true){return{enabled:e.enableMassEdit,...n}}else if(typeof e.enableMassEdit==="object"){return{enabled:true,visibleFields:Na(e.enableMassEdit.visibleFields,t),ignoredFields:Na(e.enableMassEdit.ignoredFields,t),operationGroupingMode:e.enableMassEdit.operationGroupingMode&&Object.values(ee).includes(e.enableMassEdit.operationGroupingMode)?e.enableMassEdit.operationGroupingMode:n.operationGroupingMode,customFragment:e.enableMassEdit.customFragment}}return{enabled:false,...n}}M.getMassEditSettings=xa;function Na(e,t){if(!e){return[]}if(e.startsWith("com.sap.vocabularies.UI.v1.FieldGroup")){const n=t.getEntityTypeAnnotation(`@${e}`);if(we(n.annotation,"com.sap.vocabularies.UI.v1.FieldGroupType")){return n.annotation.Data.reduce((e,t)=>{if(ct(t)&&xe(t.Value)){e.push(t.Value.path)}return e},[])}return[]}return e.replace(/\s/g,"").split(",").map(e=>e.trim())}function wa(e,t,n){let a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;let i=arguments.length>4?arguments[4]:undefined;const o=n.getManifestWrapper();const r=n.getManifestControlConfiguration(t);const s=r?.tableSettings??{};const l=o.getSapFeManifestConfiguration();const c=l?.macros?.table?.defaultCreationMode==="InlineCreationRows"?ae.InlineCreationRows:undefined;const u=s.creationMode?.name??c??ae.NewPage;const d=!o.isPhone();const p=s.disableCopyToClipboard;const f=n.getTemplateType();const g=a&&o.isCondensedLayoutCompliant();const m=e?Aa(s,e,n,i):{};const y=s.creationMode?.customValidationFunction;const b=s.exportRequestSize;const v=Ua(n,r);const h=s.enablePaste??(n.getTemplateType()==="ObjectPage"||v==="TreeTable"&&n.getEntitySet()?.annotations.Common?.DraftRoot!==undefined);const T=ba(v,s,f===X.ListReport);const I=v!=="ResponsiveTable"?300:undefined;const P=va(v,s);let C=false;if(s.creationMode?.inlineCreationRowsHiddenInEditMode){C=typeof s.creationMode?.inlineCreationRowsHiddenInEditMode==="string"?s.creationMode?.inlineCreationRowsHiddenInEditMode==="true":s.creationMode?.inlineCreationRowsHiddenInEditMode}let A;if(n.getTemplateType()==="ListReport"){A="illustratedMessage-Auto"}else{A=o.getUseTextForNoDataMessages()?"text":"illustratedMessage-Dot"}const D={createAtEnd:s.creationMode?.createAtEnd!==undefined?s.creationMode?.createAtEnd:![ae.Inline,ae.CreationDialog].includes(u),creationMode:u,creationDialogFields:u===ae.CreationDialog?Na(s.creationMode?.creationFields,n):undefined,customValidationFunction:y,hasDataStateIndicatorFilter:f===X.ListReport,disableAddRowButtonForEmptyData:!y?!!s.creationMode?.disableAddRowButtonForEmptyData:false,enableAutoColumnWidth:d,enablePastingOfComputedProperties:s.enablePastingOfComputedProperties,enableExport:Ia(s,n,h),frozenColumnCount:Pa(s),widthIncludingColumnHeader:Ca(s),enableFullScreen:ma(s,n,o.isPhone()),massEdit:xa(s,n),enableAddCardToInsights:s?.enableAddCardToInsights,enablePaste:h,disableCopyToClipboard:p,headerVisible:true,header:s.header,multiSelectMode:ya(s,v,n),selectionLimit:ha(s),inlineCreationRowCount:Ta(s),inlineCreationRowsHiddenInEditMode:C,showRowCount:s?.quickVariantSelection?.paths?false:!o.getViewConfiguration()?.showCounts,type:v,disableRequestCache:Oa(r),useCondensedTableLayout:P&&g,isCompactType:o.isCompactType(),beforeRebindTable:s.beforeRebindTable,exportRequestSize:b,enableUploadPlugin:!!n.getAnnotationEntityType().annotations?.UI?.MediaResource?.Stream,selectionChange:s.selectionChange,modeForNoDataMessage:A,scrollThreshold:s.scrollThreshold??I};const S={...D,...T,...m};if(v==="TreeTable"){Ma(S,s,n)}if(s.headerVisible!==undefined){S.headerVisible=s.headerVisible}return S}M.getTableManifestConfiguration=wa;function Ua(e,t){if(t?.tableSettings?.type){return t.tableSettings.type}return"ResponsiveTable"}function $a(e,t,n,a,i,o){const r=t.navigationProperties.length!==e.getDataModelObjectPath().navigationProperties.length;if(r&&ct(n)){a[i]=n.Value.$target;o.nonSortableProperties.push(i)}else if(rt(n)&&ut(n)){n.Target.$target.Data.forEach(t=>{if(ct(t)&&he(t.Value.$target)==="Description"){const n=Me(e.getDataModelObjectPath(),t.Value.path);const i=n.navigationProperties.length!==e.getDataModelObjectPath().navigationProperties.length;if(i){a[t.Value.path]=t.Value.$target;o.nonSortableProperties.push(t.Value.path)}}})}}function Va(e,t){let n;if(Oe(e)){n=Ee(e.targetType)?Et[e.targetType.underlyingType]:Et[e.type]}if(n===undefined&&t!==undefined){n=Et[t]}const a={type:n?.type,constraints:{},formatOptions:{}};if(Oe(e)&&n!==undefined){a.constraints={scale:n.constraints?.$Scale?e.scale:undefined,precision:n.constraints?.$Precision?e.precision:undefined,maxLength:n.constraints?.$MaxLength?e.maxLength:undefined,nullable:n.constraints?.$Nullable?e.nullable:undefined,minimum:n.constraints?.["@Org.OData.Validation.V1.Minimum/$Decimal"]&&!isNaN(e.annotations?.Validation?.Minimum)?`${e.annotations?.Validation?.Minimum}`:undefined,maximum:n.constraints?.["@Org.OData.Validation.V1.Maximum/$Decimal"]&&!isNaN(e.annotations?.Validation?.Maximum)?`${e.annotations?.Validation?.Maximum}`:undefined,isDigitSequence:a.type==="sap.ui.model.odata.type.String"&&n.constraints?.[`@${"com.sap.vocabularies.Common.v1.IsDigitSequence"}`]&&e.annotations?.Common?.IsDigitSequence?true:undefined}}a.formatOptions={parseAsString:a?.type?.indexOf("sap.ui.model.odata.type.Int")===0||a?.type?.indexOf("sap.ui.model.odata.type.Double")===0?false:undefined,emptyString:a?.type?.indexOf("sap.ui.model.odata.type.Int")===0||a?.type?.indexOf("sap.ui.model.odata.type.Double")===0?"":undefined,parseKeepsEmptyString:a.type==="sap.ui.model.odata.type.String"&&a.constraints.nullable===false?true:undefined};return a}M.getTypeConfig=Va;function Ra(e,t,n){if(t.properties[n].displayModeOfPropertyUsedAsDescription&&!e[n]){e[n]=t.properties[n].displayModeOfPropertyUsedAsDescription}}function La(e,t,n){const a=e.filter(e=>e.propertyInfos?.includes(t)&&e.isPartOfLineItem);n.isPartOfLineItem=!!a.length;if(a.length&&!a?.some(e=>e.availability!=="Hidden")){n.sortable=false;n.isGroupable=false;n.filterable=false}}function ja(e,t,n,a,i,o){let r;if(o){r=t.find(e=>e.key===o);if(r?.exportSettings===null){return r?.exportSettings}}const s=e?.wrap??(!!(e?.property&&e.property?.length>1)||!!(i&&i.length>1));const l={...r?.exportSettings,type:e?.type??r?.exportSettings?.type,template:e?.template??Jn(i,e?.property)??r?.exportSettings?.template,property:e?.property?Kn(e?.property,t,n,a):undefined,width:e?.width,wrap:s};return mn(l)}return{getTableActions:xt,getTableColumns:Nt,getColumnsFromEntityType:un,updateLinkedProperties:Ht,createTableVisualization:Gt,createDefaultTableVisualization:qt,getCapabilityRestriction:tn,getImportance:Gn,getSelectionMode:nn,getRowStatusVisibility:Cn,getP13nMode:ea,getStandardActionsConfiguration:ua,getTableAnnotationConfiguration:da,isFilteringCaseSensitive:Nn,splitPath:fa,getSelectionVariantConfiguration:ga,getTableManifestConfiguration:wa,getTypeConfig:Va,updateTableVisualizationForType:$t,createRequestedProperties:Vt,getNavigationTargetPath:Lt,getCustomFunctionInfo:Ea}},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/controls/Common/table/StandardActions", ["sap/fe/base/BindingToolkit","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/macros/formatters/TableFormatter","../../../../helpers/BindingHelper","../../../ManifestSettings","../../../helpers/InsightsHelpers"],function(e,t,n,a,i,o,s,r){"use strict";var l={};var c=r.getInsightsVisibility;var d=r.getInsightsEnablement;var u=s.TemplateType;var p=s.CreationMode;var f=s.ActionType;var b=o.singletonPathVisitor;var g=o.UI;var v=a.isPathUpdatable;var y=a.isPathInsertable;var C=a.isPathDeletable;var h=a.getTargetObjectPath;var x=n.isSingleton;var M=n.isNavigationProperty;var m=n.isEntitySet;var T=e.pathInModel;var S=e.or;var E=e.notEqual;var A=e.not;var D=e.lessOrEqual;var P=e.length;var U=e.isPathInModelExpression;var I=e.isConstant;var O=e.ifElse;var R=e.greaterThan;var w=e.greaterOrEqual;var k=e.getExpressionFromAnnotation;var j=e.formatResult;var H=e.equal;var V=e.constant;var F=e.compileExpression;var L=e.and;const _={Cut:"StandardAction::Cut",Create:"StandardAction::Create",Delete:"StandardAction::Delete",CreationRow:"StandardAction::CreationRow",Paste:"StandardAction::Paste",MassEdit:"StandardAction::MassEdit",Insights:"StandardAction::Insights",MoveUp:"StandardAction::MoveUp",MoveDown:"StandardAction::MoveDown"};l.StandardActionKeys=_;function N(e,t,n){return{collectionPath:h(e.getDataModelObjectPath()),hiddenAnnotation:{create:B(e,"CreateHidden"),delete:B(e,"DeleteHidden"),update:B(e,"UpdateHidden")},creationMode:t,isDraftOrStickySupported:q(e),newAction:z(e),tableManifestConfiguration:n,restrictions:W(e)}}l.generateStandardActionsContext=N;function q(e){const n=e.getDataModelObjectPath();const a=t.isObjectPathDraftSupported(n);const i=n.startingEntitySet?.annotations?.Session?.StickySessionSupported?true:false;return a||i}l.isDraftOrStickySupported=q;function z(e){const t=e.getEntitySet();const n=m(t)?t.annotations.Common?.DraftRoot?.NewAction??t.annotations.Session?.StickySessionSupported?.NewAction:undefined;const a=n?.toString();if(a){const t=e?.getEntityType().actions[a]?.annotations?.Core?.OperationAvailable;return{name:a,available:k(t,[],true)}}return undefined}l.getNewAction=z;function B(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;const a=e.getEntitySet();const i=!x(a)&&a?.annotations.UI?.[t]||e.getEntityType().annotations.UI?.[t];if(!i){return V(false)}const o=e.getDataModelObjectPath();const s=o.navigationProperties.length>0&&n?o.navigationProperties.map(e=>e.name):[];return k(i,s,undefined,t=>b(t,e.getConvertedTypes(),s))}l.isActionAnnotatedHidden=B;function W(e){const t=e.getDataModelObjectPath();const n=[{key:"isInsertable",function:y},{key:"isUpdatable",function:v},{key:"isDeletable",function:C}];const a={};n.forEach(function(n){const i=n["function"];a[n.key]={expression:i.apply(null,[t,{pathVisitor:(t,n)=>b(t,e.getConvertedTypes(),n)}]),navigationExpression:i.apply(null,[t,{ignoreTargetCollection:true,authorizeUnresolvable:true,pathVisitor:(t,n)=>b(t,e.getConvertedTypes(),n)}])}});return a}l.getRestrictions=W;function $(e,t){return t||e.creationMode===p.External}l.getInsertUpdateActionsTemplating=$;function G(e,t){const n=ie(e,t);return{isTemplated:F(ne(t,n)),visible:F(n),visibleExpression:n,enabled:F(ce(e,t,n)),enabledForContextMenu:F(ce(e,t,n,true)),key:_.Create,type:f.Standard}}l.getStandardActionCreate=G;function K(e,t){const n=Y(e,t);return{isTemplated:F(ae(n)),visible:F(n),enabled:F(fe(n,t,false)),enabledForContextMenu:F(fe(n,t,true)),key:_.Cut,type:f.Standard}}l.getStandardActionCut=K;function Q(e,t,n){const a=e.getEntityType().annotations.Hierarchy?.[`RecursiveHierarchyActions#${t.tableManifestConfiguration.hierarchyQualifier??""}`]?.ChangeNextSiblingAction!==undefined;const i=L(Y(e,t),a);return{isTemplated:F(ae(i)),visible:F(i),enabled:F(be(i,t,n)),enabledForContextMenu:F(be(i,t,n,true)),key:n?_.MoveUp:_.MoveDown,type:f.Standard}}l.getStandardActionMoveUpDown=Q;function J(e,t){const n=oe(e,t);return{isTemplated:F(ae(n)),visible:F(n),enabled:F(de(e,t,n,false)),enabledForContextMenu:F(de(e,t,n,true)),key:_.Delete,type:f.Standard}}l.getStandardActionDelete=J;function X(e,t){const n=ie(e,t,true);return{isTemplated:F(ne(t,n,true)),visible:F(n),enabled:F(le(e,t,n)),key:_.CreationRow,type:f.Standard}}l.getCreationRow=X;function Y(e,t){const n=t.restrictions?.isUpdatable?.expression;const a=e.getTemplateType()!==u.ListReport?g.IsEditable:e.getEntitySet()?.annotations.Common?.DraftRoot!==undefined;return O(H(t.tableManifestConfiguration?.type,"TreeTable"),L(t.tableManifestConfiguration.isHierarchyParentNodeUpdatable,A(L(I(n),H(n,false))),a),false)}l.getCutVisibility=Y;function Z(e,t,n){const a=Y(e,t);const i=ie(e,t,false,true);const o=se(e,t,i,a,n);const s=ue(o,t,false);const r=ue(o,t,true);return{visible:F(o),enabled:F(s),enabledForContextMenu:F(r),key:_.Paste,type:f.Standard}}l.getStandardActionPaste=Z;function ee(e,t){const n=re(e,t);return{isTemplated:F(ae(n)),visible:F(n),visibleForContextMenu:F(L(n,H(T("contextmenu/inactiveContext","internal"),false))),enabled:F(pe(e,t,n)),enabledForContextMenu:F(pe(e,t,n,true)),key:_.MassEdit,type:f.Standard}}l.getStandardActionMassEdit=ee;function te(e,t,n){const a=c("Table",e,n,t);const i=L(a,d());return{isTemplated:F(ae(a)),visible:F(a),enabled:F(i),key:_.Insights,type:f.Standard}}l.getStandardActionInsights=te;function ne(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return L(S(L(n,e.creationMode===p.CreationRow),L(!n,e.creationMode!==p.CreationRow)),S(A(I(t)),t))}l.getCreateTemplating=ne;function ae(e){return S(A(I(e)),e)}l.getDefaultTemplating=ae;function ie(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const i=t.restrictions.isInsertable.expression;const o=n?B(e,"CreateHidden",false):t.hiddenAnnotation.create;const s=t.newAction;return O(t.creationMode===p.External,L(A(o),S(e.getTemplateType()===u.ListReport,g.IsEditable)),O(S(L(I(s?.available),H(s?.available,false)),L(I(i),H(i,false),!s),L(I(o),H(o,true)),L(t.creationMode===p.InlineCreationRows,t.tableManifestConfiguration?.type==="ResponsiveTable",O(L(t?.tableManifestConfiguration?.inlineCreationRowsHiddenInEditMode===false,A(a)),true,g.IsCreateMode))),false,O(e.getTemplateType()===u.ListReport,S(A(U(o)),A(o)),L(A(o),g.IsEditable))))}l.getCreateVisibility=ie;function oe(e,t){const n=t.hiddenAnnotation.delete;const a=t.restrictions.isDeletable.expression;return O(e.getTemplateType()===u.AnalyticalListPage,false,O(L(I(a),H(a,false)),false,O(L(I(n),H(n,V(true))),false,O(e.getTemplateType()!==u.ListReport,L(A(n),g.IsEditable),A(L(U(n),n))))))}l.getDeleteVisibility=oe;function se(e,t,n,a,i){let o=t.restrictions?.isUpdatable?.navigationExpression;if(o?._type==="Unresolvable"){o=V(true)}return L(t.tableManifestConfiguration.type==="TreeTable"?a:L(S(L(n,t.restrictions.isInsertable.expression),L(g.IsEditable,o)),E(t.tableManifestConfiguration.enablePaste,false),![u.ListReport,u.AnalyticalListPage].includes(e.getTemplateType())),i)}l.getPasteVisibility=se;function re(e,t){const n=t.hiddenAnnotation.update,a=t.restrictions.isUpdatable.expression,i=t.tableManifestConfiguration?.massEdit.enabled||false;const o=e.getTemplateType()===u.ObjectPage?g.IsEditable:e.getTemplateType()===u.ListReport;return L(A(L(I(a),H(a,false))),i,o,A(n))}l.getMassEditVisibility=re;function le(e,t,n){const a=y(e.getDataModelObjectPath(),{ignoreTargetCollection:true,authorizeUnresolvable:true,pathVisitor:(t,n)=>{if(t.indexOf("/")===0){t=b(t,e.getConvertedTypes(),n);return t}const a=e.getDataModelObjectPath().navigationProperties;if(a){const e=a[a.length-1];const n=M(e)&&e.partner;if(n){t=`${n}/${t}`}}return t}});const o=a._type==="Unresolvable"?y(e.getDataModelObjectPath(),{pathVisitor:t=>b(t,e.getConvertedTypes(),[])}):a;return L(n,o,S(!t.tableManifestConfiguration.disableAddRowButtonForEmptyData,j([T("creationRowFieldValidity","internal")],i.validateCreationRowFields)))}l.getCreationRowEnablement=le;function ce(e,t,n){let a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const i=[];const o=!a?"":"contextmenu/";if(t.creationMode===p.InlineCreationRows){i.push(L(A(t.hiddenAnnotation.create),g.IsEditable))}else{i.push(n)}const s=t.restrictions.isInsertable.expression;const r=e.resolveAbsolutePath(t.collectionPath).target;i.push(S(m(r),L(s,S(e.getTemplateType()!==u.ObjectPage,g.IsEditable))));if(t.tableManifestConfiguration.type==="TreeTable"){i.push(D(T(o+"numberOfSelectedContexts","internal"),1));if(t.tableManifestConfiguration.createEnablement){i.push(E(T(o+"createEnablement/Create","internal"),false))}}return L(...i)}l.getCreateEnablement=ce;function de(e,t,n){let a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const i=!a?"":"contextmenu/";const o=T(i+"deletableContexts","internal");const s=T(i+"unSavedContexts","internal");const r=T(i+"draftsWithDeletableActive","internal");const l=T(i+"draftsWithNonDeletableActive","internal");return L(n,S(t.restrictions.isDeletable.navigationExpression._type==="Unresolvable",t.restrictions.isDeletable.expression),S(R(P(o,true),0),R(P(r,true),0),R(P(l,true),0),R(P(s,true),0)))}l.getDeleteEnablement=de;function ue(e,t,n){if(t.tableManifestConfiguration.type==="TreeTable"){const a=!n?"numberOfSelectedContexts":"contextmenu/numberOfSelectedContexts";return L(e,S(t.restrictions.isUpdatable.navigationExpression._type==="Unresolvable",t.restrictions.isUpdatable.expression),L(H(P(T("pastableContexts","internal"),true),1),t.tableManifestConfiguration.type==="TreeTable"?D(T(a,"internal"),1):true,H(T("pasteAuthorized","internal"),true)))}let a=t.restrictions?.isUpdatable?.navigationExpression;if(a?._type==="Unresolvable"){a=V(true)}return L(a,e)}l.getPasteEnablement=ue;function pe(e,n,a){let i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const o=n.restrictions.isUpdatable.expression;const s=!I(o)&&n.restrictions.isUpdatable.navigationExpression._type==="Unresolvable";const r=!i?"numberOfSelectedContexts":"contextmenu/numberOfSelectedContexts";const l=!i?"updatableContexts":"contextmenu/updatableContexts";const c=w(T(r,"internal"),1);const d=w(P(T(l,"internal")),1);const u=t.isObjectPathDraftSupported(e.getDataModelObjectPath());const p=ge(e);const f=O(S(L(p,u),s),L(c,d),L(c));return L(a,O(s,f,L(f,o)))}l.getMassEditEnablement=pe;function fe(e,t,n){const a=!n?"numberOfSelectedContexts":"contextmenu/numberOfSelectedContexts";const i=H(T(a,"internal"),1);const o=!n?"cutableContexts":"contextmenu/cutableContexts";const s=L(i,H(P(T(o,"internal"),true),1));return L(e,S(t.restrictions.isUpdatable.navigationExpression._type==="Unresolvable",t.restrictions.isUpdatable.expression),s)}l.getCutEnablement=fe;function be(e,t,n){let a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const i=!a?"singleContextMovableUp":"contextmenu/singleContextMovableUp";const o=!a?"singleContextMovableDown":"contextmenu/singleContextMovableDown";const s=n?H(T(i,"internal"),true):H(T(o,"internal"),true);return L(e,S(t.restrictions.isUpdatable.navigationExpression._type==="Unresolvable",t.restrictions.isUpdatable.expression),s)}function ge(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const n=e.getTemplateType();if(n===u.ListReport||n===u.AnalyticalListPage||t&&e.getManifestWrapper().hasMultipleVisualizations()){return true}return false}l.isInDisplayMode=ge;return l},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/controls/ListReport/FilterBar", ["sap/fe/core/converters/controls/Common/DataVisualization","sap/fe/core/converters/controls/Common/Table","sap/fe/core/converters/controls/ListReport/VisualFilters","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/IssueManager","sap/fe/core/converters/helpers/Key","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/PropertyHelper","sap/m/library"],function(t,e,n,i,o,a,r,s,l,c,u){"use strict";var p={};var f=u.StandardDynamicDateRangeKeys;var d=c.getAssociatedUnitPropertyPath;var g=c.getAssociatedTimezonePropertyPath;var y=c.getAssociatedTextPropertyPath;var h=c.getAssociatedCurrencyPropertyPath;var v=l.getTargetNavigationPath;var m=l.getRelativePaths;var P=l.enhanceDataModelPath;var b=s.isNavigationProperty;var F=s.isMultipleNavigationProperty;var S=s.isEntitySet;var T=s.isComplexType;var D=a.KeyHelper;var E=o.IssueType;var C=o.IssueSeverity;var x=o.IssueCategory;var O=i.insertCustomElements;var I=i.Placement;var A=i.OverrideType;var R=n.getVisualFilters;var N=e.isFilteringCaseSensitive;var M=e.getTypeConfig;var U=e.getSelectionVariantConfiguration;var w=t.getSelectionVariant;var $=function(t){t["Default"]="Default";t["Slot"]="Slot";return t}($||{});const L="Edm.String";const j="sap.ui.model.odata.type.String";function k(t){const e={};t.Data.forEach(n=>{if(n.$Type==="com.sap.vocabularies.UI.v1.DataField"){e[n.Value.path]={group:t.fullyQualifiedName,groupLabel:t.Label?.toString()??t.annotations?.Common?.Label?.toString()??t.qualifier}}});return e}function V(t,e){const n=new Set;const i=e.getManifestWrapper().getFilterConfiguration().filterFields??{};const o=new Set([...(e.getDataModelObjectPath().targetEntityType?.annotations?.UI?.SelectionFields??[]).map(t=>t.value),...Object.keys(i).filter(t=>!!i[t].template)]);return new Set(t.map(t=>{const i=t.control.filters;if(!i){return[]}return[...i.hiddenFilters?.paths??[],...i.quickFilters?.paths??[]].map(t=>{const i=t.annotationPath;if(!n.has(i)){n.add(i);const t=U(i,e);if(t){t.propertyNames=t.propertyNames.filter(t=>!o.has(t));return t.propertyNames}}return[]})}).flat(2))}const q=function(t,e){const n=e.split("/");let i;let o="";while(n.length){let e=n.shift();i=i?`${i}/${e}`:e;const a=t.resolvePath(i);if(F(a)){e+="*"}o=o?`${o}/${e}`:e}return o};const H=function(t,e,n,i,o){if(e&&e.targetType===undefined&&(i||e.annotations?.UI?.Hidden?.valueOf()!==true)){const i=o.getAnnotationEntityType(e),a={key:D.getSelectionFieldKeyFromPath(n),annotationPath:o.getAbsoluteAnnotationPath(n),conditionPath:q(t,n),availability:e.annotations?.UI?.HiddenFilter?.valueOf()===true?"Hidden":"Adaptation",label:e.annotations.Common?.Label?.toString()??e.name,group:i.name,groupLabel:i?.annotations?.Common?.Label?.toString()??i.name};W(a);return a}return undefined};const W=function(t){if(t.key==="DraftAdministrativeData::CreationDateTime"||t.key==="DraftAdministrativeData::LastChangeDateTime"){const e=[f.TO,f.TOMORROW,f.NEXTWEEK,f.NEXTMONTH,f.NEXTQUARTER,f.NEXTYEAR];t.settings={operatorConfiguration:[{path:"key",equals:e.join(","),exclude:true}]}}};const B=function(t,e,n,i,o){const a={};if(n){n.forEach(n=>{const r=n.name;const s=(e?`${e}/`:"")+r;const l=H(t,n,s,i,o);if(l){a[s]=l}})}return a};const K=function(t,e,n,i){let o={};if(e){e.forEach(e=>{let a={};const r=P(i.getDataModelObjectPath(),e);const s=r.targetObject;if(s===undefined||!n&&r.navigationProperties.find(t=>t.annotations?.UI?.Hidden?.valueOf()===true)){return}if(b(s)){a=B(t,e,s.targetType.entityProperties,n,i)}else if(T(s.targetType)){a=B(t,e,s.targetType.properties,n,i)}else{a=B(t,v(r,true),[s],n,i)}o={...o,...a}})}return o};const G=function(t,e,n,i){let o=t[e];if(o){delete t[e]}else{o=H(i,i.resolvePath(e),e,true,n)}if(!o){n.getDiagnostics()?.addIssue(x.Annotation,C.High,E.MISSING_SELECTIONFIELD)}if(o){o.availability=o.availability==="Hidden"?"Hidden":"Default";o.isParameter=!!i.annotations?.Common?.ResultContext}return o};const X=function(t,e,n,i,o){const a=[];const r={};const s=e.entityProperties;o?.forEach(t=>{r[t.value]=true});if(t&&t.length>0){t?.forEach(t=>{const r=t.PropertyName;const s=r?.value;const l={};o?.forEach(t=>{l[t.value]=true});if(s&&!i.has(s)){if(!(s in l)){const t=_(s,n,e);if(t){a.push(t)}}}})}else if(s){s.forEach(t=>{const o=t.annotations?.Common?.FilterDefaultValue;const s=t.name;if(!(s in i)){if(o&&!(s in r)){const t=_(s,n,e);if(t){a.push(t)}}}})}return a};function J(t){const e=t.getDataModelObjectPath();const n=e.startingEntitySet.entityType;const i=!!n.annotations?.Common?.ResultContext&&!e.targetEntitySet;const o=i&&t.getConverterContextFor(`/${e.startingEntitySet.name}`);return o?n.entityProperties.map(function(t){return G({},t.name,o,n)}):[]}const z=function(t,e,n){const i=e.length===0||e.every(t=>!t.applySupported.enableSearch);const o=t.length===0||t.every(t=>(t.enableAnalytics||t.control.type==="TreeTable")&&!t.enableBasicSearch);const a=n.getContextPath();if(a&&i&&o){return true}else{return false}};p.getFilterBarHideBasicSearch=z;const Q=function(t,e,n){const i=e.getManifestWrapper();const o=i.getContextPath()||(i.getEntitySet()?`/${i.getEntitySet()}`:undefined);const a=Y(e,o,n);let r={};r=i.getFilterConfiguration(a);const s=r?.filterFields||{};const l=K(t,Object.keys(s).map(t=>s[t].property??D.getPathFromSelectionFieldKey(t)),true,e);const c={};for(const n in s){const i=s[n];const o=i.property??D.getPathFromSelectionFieldKey(n);const a=l[o];const r=i.type==="Slot"?$.Slot:$.Default;const u=i&&i?.visualFilter?R(t,e,n,s):undefined;if(i.template||i.type===$.Slot){if(i.settings){i.settings.isCustomFilter=true}else{i.settings={isCustomFilter:true}}}c[n]={key:n,type:r,slotName:i?.slotName||n,annotationPath:a?.annotationPath,conditionPath:i.property?D.getPathFromSelectionFieldKey(n):a?.conditionPath||o,documentRefText:i.property&&e.fetchTextFromMetaModel("{metaModel>"+i.property+"@com.sap.vocabularies.Common.v1.DocumentationRef}"),template:i.template,label:e.fetchTextFromMetaModel(i.label),position:i.position||{placement:I.After},availability:i.availability||"Default",settings:i.settings,visualFilter:u,required:i.required}}return c};p.getManifestFilterFields=Q;const Y=function(t,e,n){let i;const o=t.getContextPath();const a=`${o}/${n}`;if(e&&a?.startsWith(e)&&n){i=a.replace(`${e}/`,"")}else{i=n}return i?i:undefined};const _=function(t,e,n){return G({},t,e,n)};p.getFilterField=_;const Z=function(t,e){let n=[];if(t&&t[e]){n=t[e].map(function(t){return t.value})}return n};p.getFilterRestrictions=Z;const tt=function(t){const e={};if(t&&t.FilterExpressionRestrictions){t.FilterExpressionRestrictions.forEach(function(t){if(t.Property?.value&&t.AllowedExpressions){if(e[t.Property?.value]){e[t.Property?.value].push(t.AllowedExpressions.toString())}else{e[t.Property?.value]=[t.AllowedExpressions.toString()]}}})}return e};p.getFilterAllowedExpression=tt;const et=function(){return{name:"$search",path:"$search",dataType:j,maxConditions:1}};const nt=function(){return{name:"$editState",path:"$editState",groupLabel:"",group:"",dataType:j,hiddenFilter:false}};const it=function(t){const e=t.getEntitySet();return S(e)?e.annotations.Capabilities?.SearchRestrictions:undefined};const ot=function(t,e){const n=t.getEntitySet()?.annotations?.Capabilities?.NavigationRestrictions;const i=n&&n.RestrictedProperties;return i&&i.find(function(t){return t&&t.NavigationProperty&&t.NavigationProperty.value===e})};p.getNavigationRestrictions=ot;const at=function(t){return{key:t.key,annotationPath:t.annotationPath,conditionPath:t.conditionPath,name:t.conditionPath,label:t.label,hiddenFilter:t.availability==="Hidden",display:"Value",isParameter:t.isParameter,caseSensitive:t.caseSensitive,availability:t.availability,position:t.position,type:t.type,template:t.template,menu:t.menu,required:t.required,isCustomFilter:t.settings?.isCustomFilter}};const rt=function(t,e){t.forEach(t=>{if(e.hasOwnProperty(t.key)&&!e[t.key].label){e[t.key].label=t.label}})};const st=function(t){const e=["SingleValue","MultiValue","SingleRange","MultiRange","SearchExpression","MultiRangeOrSearchExpression"];t.sort(function(t,n){return e.indexOf(t)-e.indexOf(n)});return t[0]};p.getSpecificAllowedExpression=st;const lt=function(t,e){const n=t?.Common?.Text,i=n&&(t&&t?.Common?.Text?.annotations?.UI?.TextArrangement||e&&e?.UI?.TextArrangement);if(i){if(i.valueOf()==="UI.TextArrangementType/TextOnly"){return"Description"}else if(i.valueOf()==="UI.TextArrangementType/TextLast"){return"ValueDescription"}return"DescriptionValue"}return n?"DescriptionValue":"Value"};p.displayMode=lt;const ct=function(t,e,n){let i=at(e);const o=e.annotationPath;if(!o){return i}const a=t.getConverterContextFor(o).getDataModelObjectPath().targetObject;const r=a?.annotations;const s=t?.getDataModelObjectPath().targetObject?.annotations;const l=n.formatOptions;const c=n.constraints;i=Object.assign(i,{formatOptions:l,constraints:c,display:lt(r,s)});return i};p.fetchPropertyInfo=ct;const ut=function(t){let e=true;switch(t.filterExpression){case"SearchExpression":case"SingleRange":case"SingleValue":e=false;break;default:break}if(t.type&&t.type.indexOf("Boolean")>0){e=false}return e};p.isMultiValue=ut;const pt=function(t){return(t.$Type==="com.sap.vocabularies.UI.v1.DataField"||t.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"||t.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath")&&t.Value.path?.includes("/")};const ft=function(t,e,n){const i=t.Value?.$target;if(i){const t=y(i)||h(i)||d(i)||g(i);const o=t?P(e.getDataModelObjectPath(),t).navigationProperties:undefined;if(o?.length){const t=o[0].name;if(!n.includes(t)){n.push(t)}}}};const dt=function(t,e,n){switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":if(e.Target?.$target?.$Type==="com.sap.vocabularies.UI.v1.FieldGroupType"){e.Target.$target.Data?.forEach(e=>{dt(t,e,n)})}break;case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":if(pt(e)){const i=m(P(n.getDataModelObjectPath(),e.Value.path),true).join("/");if(!t.includes(i)){t.push(i)}}ft(e,n,t);break;default:break}return t};const gt=function(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";let i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let o=arguments.length>4?arguments[4]:undefined;const a=V(e,t);const s=t.getEntityType();const l=n&&t.getEntityTypeAnnotation(n)?.annotation||s.annotations?.UI?.SelectionFields||[];let c=[];if(e.length===0&&!!o){t.getEntityTypeAnnotation(o).annotation?.forEach(e=>{c=dt(c,e,t)})}if(r.isDraftRoot(t.getEntitySet())){c.push("DraftAdministrativeData/CreationDateTime","DraftAdministrativeData/CreatedByUser","DraftAdministrativeData/LastChangeDateTime","DraftAdministrativeData/LastChangedByUser")}const u={...B(s,"",s.entityProperties,i,t),...K(s,c,false,t),...K(s,t.getManifestWrapper().getFilterConfiguration().navigationProperties,i,t)};let p=[];const f=w(s,t);if(f){p=f.SelectOptions}const d=l?.reduce((e,i)=>{const o=i.value;if(!a.has(o)){let i;if(n?.startsWith("@com.sap.vocabularies.UI.v1.SelectionFields")){i=""}else{i=n?.split("/@com.sap.vocabularies.UI.v1.SelectionFields")[0]}const a=i?i+"/"+o:o;const r=G(u,a,t,s);if(r){r.group="";r.groupLabel="";e.push(r)}}return e},[])||[];const g=X(p,s,t,a,l);return{excludedFilterProperties:a,entityType:s,annotatedSelectionFields:l,filterFields:u,propertyInfoFields:d,defaultFilterFields:g}};const yt=function(t){const e=M(t,t?.type);if(t?.type===L&&(e.constraints.nullable===undefined||e.constraints.nullable===true)){e.formatOptions.parseKeepsEmptyString=false}return e};p.fetchTypeConfig=yt;const ht=function(t,e,n,i){let o=ct(e,t,i[t.key]),a="";if(t.conditionPath){a=t.conditionPath.replace(/\+|\*/g,"")}if(o){o=Object.assign(o,{maxConditions:!o.isParameter&&ut(o)?-1:1,required:t.required??(o.isParameter||n.includes(a)),caseSensitive:N(e),dataType:i[t.key].type})}return o};p.assignDataTypeToPropertyInfo=ht;const vt=function(t,e,n){const i={};if(n){t=t.concat(n)}t.forEach(function(t){if(t.annotationPath){const n=e.getConverterContextFor(t.annotationPath);const o=n.getDataModelObjectPath().targetObject;const a=yt(o);i[t.key]=a}else{i[t.key]={type:j}}});const o=e.getEntitySet();const a=S(o)?o.annotations.Capabilities?.FilterRestrictions:undefined;const s={};s.RequiredProperties=Z(a,"RequiredProperties")||[];s.NonFilterableProperties=Z(a,"NonFilterableProperties")||[];s.FilterAllowedExpressions=tt(a);const l=e.getContextPath();const c=l.split("/");if(c.length>2){const t=c[c.length-1];c.splice(-1,1);const n=ot(e,t);const i=n&&n.FilterRestrictions;s.RequiredProperties=s.RequiredProperties.concat(Z(i,"RequiredProperties")||[]);s.NonFilterableProperties=s.NonFilterableProperties.concat(Z(i,"NonFilterableProperties")||[]);s.FilterAllowedExpressions={...tt(i)||{},...s.FilterAllowedExpressions}}const u=s.RequiredProperties;const p=s.NonFilterableProperties;const f=[];t.forEach(function(t){const n=t.conditionPath.replace(/[+*]/g,"");if(!p.includes(n)){const n=ht(t,e,u,i);f.push(n)}});const d=e.getDataModelObjectPath();if(r.isObjectPathDraftSupported(d)){f.push(nt())}const g=it(e);const y=Boolean(g&&!g.Searchable);if(l&&y!==true){if(!g||g?.Searchable){f.push(et())}}return f};p.processSelectionFields=vt;const mt=function(t,e,n,i){const o=Q(e,n,i);rt(t,o);return O(t,o,{availability:A.overwrite,label:A.overwrite,type:A.overwrite,position:A.overwrite,slotName:A.overwrite,documentRefText:A.overwrite,template:A.overwrite,settings:A.overwrite,visualFilter:A.overwrite,required:A.overwrite})};p.insertCustomManifestElements=mt;const Pt=t=>{t.sort(function(t,e){const n=t.groupLabel!==undefined&&t.groupLabel!==null;const i=e.groupLabel!==undefined&&e.groupLabel!==null;if(!n&&!i){return 0}if(n&&!i){return-1}if(!n&&i){return 1}return t.groupLabel.localeCompare(e.groupLabel)})};p.sortPropertyInfosByGroupLabel=Pt;const bt=function(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";let i=arguments.length>3?arguments[3]:undefined;let o=arguments.length>4?arguments[4]:undefined;const a=gt(t,e,n,i,o);const r=J(t);let s=a.propertyInfoFields;const l=a.entityType;s=r.concat(s);s=mt(s,l,t,n);const c=vt(s,t,a.defaultFilterFields);Pt(c);let u=JSON.stringify(c);u=u.replace(/\{/g,"\\{");u=u.replace(/\}/g,"\\}");const p=u;let f=JSON.parse(JSON.stringify(a.propertyInfoFields));f=r.concat(f);const d=a.excludedFilterProperties;const g=l?.annotations?.UI?.FilterFacets;let y={};const h=t.getAnnotationsByTerm("UI","com.sap.vocabularies.UI.v1.FieldGroup");if(g===undefined||g.length<0){for(const t in h){y={...y,...k(h[t])}}}else{y=g.reduce((t,e)=>{for(let n=0;n<e?.Target?.$target?.Data?.length;n++){t[e?.Target?.$target?.Data[n]?.Value?.path]={group:e?.ID?.toString(),groupLabel:e?.Label?.toString()}}return t},{})}const v=a.filterFields;const m=f.concat(Object.keys(v).filter(t=>!d.has(t)).map(t=>Object.assign(v[t],y[t])));const P=mt(m,l,t,n);const b=N(t);P.forEach(t=>{t.caseSensitive=b});return{selectionFields:P,sPropertyInfo:p}};p.getSelectionFields=bt;const Ft=function(t,e,n){const i=Z(e,"RequiredProperties");const o=it(t);const a=Boolean(o&&!o.Searchable);if(i.length>0||a||n?.FetchValues===2){return true}return false};p.getExpandFilterFields=Ft;return p},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/controls/ListReport/VisualFilters", ["sap/fe/base/BindingToolkit","sap/fe/core/converters/helpers/Aggregation","sap/fe/core/converters/helpers/IssueManager","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/FilterTemplating"],function(t,e,a,n,i,o){"use strict";var r={};var s=o.isPropertyFilterable;var l=o.getIsRequired;var u=i.checkFilterExpressionRestrictions;var g=n.isEntitySet;var c=a.IssueType;var f=a.IssueSeverity;var p=a.IssueCategory;var P=e.AggregationHelper;var y=t.not;var v=t.compileExpression;const m=function(t,e,a){let n,i,o;let r;const s=a.getCustomAggregateDefinitions();let l=a.getTransAggregations();let u=[];if(e?.$target?.Measures){u=s.filter(function(t){return t.qualifier===e?.$target?.Measures?.[0]?.value});r=u.length>0?u[0].qualifier:e?.$target?.Measures?.[0]?.value}if(!u[0]&&e?.$target?.DynamicMeasures){r=t.getConverterContextFor(t.getAbsoluteAnnotationPath(e.$target.DynamicMeasures?.[0]?.value)).getDataModelObjectPath().targetObject?.Name.toString();l=a.getAggregatedProperty()}else{l=a.getAggregatedProperties()[0]}const g=e?.$target?.Dimensions[0]?.value;if(s.some(function(t){return t.qualifier===r})){n=r;o=true}else if(l&&l[0]){l.some(function(t){if(t.Name===r){n=t?.AggregatableProperty.value}})}if(!o){const t=a.getAggregatableProperties();if(t&&t.length){for(const e of t){if(e?.Property?.value===n){o=true}}}}const c=a.getGroupableProperties();if(c&&c.length){for(const t of c){if(t?.value===g){i=true}}}return o&&i};function h(t,e,a,n){let i;const o=n[a];if(o?.visualFilter?.valueList){const n=o?.visualFilter?.valueList;const r=n.split("#");const h=r.length>1?`ValueList#${r[1]}`:r[0];const A=t.resolvePath(a);const L=A?.annotations?.Common?.[h];const I=A?.annotations?.Common?.ValueListWithFixedValues?.valueOf()||false;if(L){const t=L?.CollectionPath.toString();const n=e.getConverterContextFor(`/${t||e.getEntitySet()?.name}`);const o=L?.Parameters;let r;const h=[];let A=[];const E=n.getParameterEntityType();A=E?E.keys.map(function(t){return t.name}):[];if(e.getContextPath()===n.getContextPath()){d(h,A,true)}if(o){for(const t of o){const e=t.LocalDataProperty?.value;const i=t.ValueListProperty;if((t?.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||t?.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterOut")&&a===e){r=t}if((t?.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||t?.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterIn")&&a!==e){const t=s(n,i);if(!t){h.push({localDataProperty:e,valueListProperty:i})}}}}if(h&&h.length){h.forEach(function(t){const i=v(u(e.getConverterContextFor(e.getAbsoluteAnnotationPath(t?.localDataProperty)).getDataModelObjectPath(),["SingleValue"]));const o=v(u(n.getConverterContextFor(n.getAbsoluteAnnotationPath(t?.valueListProperty)).getDataModelObjectPath(),["SingleValue"]));if(o==="true"&&i==="false"){throw new Error(`FilterRestrictions of ${a} in MainEntitySet and ValueListEntitySet are different`)}})}const C=L?.PresentationVariantQualifier;const S=L?.SelectionVariantQualifier;const D=n?.getEntityType().annotations.UI?.[`PresentationVariant#${C}`];const V=new P(n.getEntityType(),n);if(!V.isAnalyticsSupported()){return undefined}if(D){const o=D?.Visualizations;const s=`/${L?.CollectionPath}`||`/${n?.getEntitySet()?.name}`;i={};i.contextPath=s;i.isValueListWithFixedValues=I;let P;for(const t of o){if(t.$target?.term==="com.sap.vocabularies.UI.v1.Chart"){P=t;break}}if(P){const s=m(n,P,V);if(!s){return}const L=P?.$target?.Dimensions[0]?.$target?.annotations?.UI?.Hidden?.valueOf();const I=P?.$target?.Dimensions[0]?.$target?.annotations?.UI?.HiddenFilter?.valueOf();if(L===true||I===true){return}else if(o&&o.length){i.chartAnnotation=P.$target?n?.getAbsoluteAnnotationPath(`${P.$target.fullyQualifiedName}/$AnnotationPath/`):undefined;const o=n.getEntitySet()?.name;let s;const m=n?.getRelativeAnnotationPath(`${D.fullyQualifiedName}/`,n.getEntityType());if(E){s=n.getContextPath()+"/"+m}else{s="/"+o+"/"+m}i.presentationAnnotation=D?s:undefined;i.outParameter=r?.LocalDataProperty?.value;i.inParameters=h;i.valuelistProperty=r?.ValueListProperty;const L=u(e.getConverterContextFor(e.getAbsoluteAnnotationPath(a)).getDataModelObjectPath(),["SingleRange","MultiRange"]);if(v(L)==="true"){e.getDiagnostics().addIssue(p.Annotation,f.High,c.MALFORMED_VISUALFILTERS.VALUELIST);return undefined}const I=u(e.getConverterContextFor(e.getAbsoluteAnnotationPath(a)).getDataModelObjectPath(),["SingleValue"]);i.multipleSelectionAllowed=v(y(I));i.required=l(e,a);let C;if(S){C=n?.getEntityTypeAnnotation(`@UI.SelectionVariant#${S}`)?.annotation;let t;const e=n?.getRelativeAnnotationPath(`${C?.fullyQualifiedName}/`,n.getEntityType());if(E){t=n.getContextPath()+"/"+e}else{t="/"+o+"/"+e}i.selectionVariantAnnotation=C?t:undefined}let V=[];if(E){const a=t.split("/")[0];const n=t.split("/")[1];const i=e.getConverterContextFor(`/${a}`);const o=i?.getDataModelObjectPath().startingEntitySet?.annotations?.Capabilities?.NavigationRestrictions?.RestrictedProperties;const r=o?.find(t=>{if(t.NavigationProperty?.type==="NavigationPropertyPath"){return t.NavigationProperty.value===n}});V=r?.FilterRestrictions?.RequiredProperties??[]}else{const t=n?.getEntitySet();if(g(t)){V=t.annotations.Capabilities?.FilterRestrictions?.RequiredProperties??[]}}let $=[];if(V?.length){V.forEach(function(t){$.push(t.value)})}$=$.concat(A);i.requiredProperties=$;if(e.getContextPath()===n.getContextPath()){d(h,V,false)}if(i.requiredProperties?.length){if(!i.inParameters||!i.inParameters.length){if(!i.selectionVariantAnnotation){i.showOverlayInitially=true}else{let t=C?.SelectOptions?.map(t=>t.PropertyName?.value)||[];const e=C?.Parameters?.map(t=>t.PropertyName?.value)||[];t=t.concat(e);$=$.sort();t=t.sort();i.showOverlayInitially=$.some(function(e){return!t.includes(e)})}}else{i.showOverlayInitially=false}}else{i.showOverlayInitially=false}const T=P?.$target?.Dimensions[0]?.$target?.type;i.renderLineChart=T==="Edm.DateTimeOffset"||T==="Edm.Date"||T==="Edm.TimeOfDay"||P.$target?.ChartType!=="UI.ChartType/Line"}}else{e.getDiagnostics().addIssue(p.Annotation,f.High,c.MALFORMED_VISUALFILTERS.CHART);return}}else{e.getDiagnostics().addIssue(p.Annotation,f.High,c.MALFORMED_VISUALFILTERS.PRESENTATIONVARIANT)}}else{e.getDiagnostics().addIssue(p.Annotation,f.High,c.MALFORMED_VISUALFILTERS.VALUELIST)}}else{e.getDiagnostics().addIssue(p.Manifest,f.High,c.MALFORMED_VISUALFILTERS.VALUELIST)}return i}r.getVisualFilters=h;function d(t,e,a){e.forEach(function(e){const n=a?e:e.value;t.push({localDataProperty:n,valueListProperty:n})})}r._addInParameters=d;return r},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/controls/ObjectPage/Avatar", ["sap/fe/base/BindingToolkit","sap/m/AvatarShape"],function(e,n){"use strict";var t={};var a=e.ifElse;var r=e.getExpressionFromAnnotation;var o=e.compileExpression;const i=e=>r(e.getEntityType().annotations.Common?.IsNaturalPerson);const s=e=>o(a(e,n.Circle,n.Square));const l=e=>o(a(e,"sap-icon://person-placeholder","sap-icon://product"));const p=e=>{const n=e.getEntityType().annotations?.UI?.HeaderInfo;if(!n||n&&!n.ImageUrl&&!n.TypeImageUrl){return undefined}if(n.ImageUrl&&n.TypeImageUrl){return o(r(n.TypeImageUrl))}return l(i(e))};const c=e=>{const n=e.getEntityType().annotations?.UI?.HeaderInfo;if(!n||!(n.ImageUrl||n.TypeImageUrl)){return undefined}return o(r(n.ImageUrl||n.TypeImageUrl))};const I=e=>{const n=e.getEntityType().annotations?.UI?.HeaderInfo;const t=n&&(n.ImageUrl||n.TypeImageUrl||n.Initials);if(!t){return undefined}return{src:c(e),initials:o(r(n?.Initials,[],"")),fallbackIcon:p(e),displayShape:s(i(e))}};t.getAvatar=I;return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/controls/ObjectPage/HeaderFacet", ["sap/fe/base/BindingToolkit","sap/fe/core/converters/annotations/DataField","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/ID","sap/fe/core/converters/helpers/Key","sap/fe/core/templating/PropertyHelper","sap/fe/core/templating/UIFormatters","../../../helpers/StableIdHelper","../../helpers/DataFieldHelper","../Common/Form"],function(e,t,a,n,i,o,r,s,c,l){"use strict";var u={};var d=l.getFormElementsFromManifest;var p=l.FormElementType;var f=c.isReferencePropertyStaticallyHidden;var v=c.isAnnotationFieldStaticallyHidden;var m=s.createIdForAnnotation;var g=r.isVisible;var b=o.isMultiLineText;var y=i.KeyHelper;var F=n.getHeaderFacetID;var I=n.getHeaderFacetFormID;var T=n.getHeaderFacetContainerID;var h=n.getCustomHeaderFacetID;var $=a.insertCustomElements;var U=a.Placement;var C=t.getSemanticObjectPath;var D=e.compileExpression;let P=function(e){e["Annotation"]="Annotation";e["XMLFragment"]="XMLFragment";return e}({});u.HeaderFacetType=P;let A=function(e){e["Reference"]="Reference";e["Collection"]="Collection";return e}({});u.FacetType=A;let S=function(e){e["Default"]="Default";e["NotAdaptable"]="not-adaptable";e["NotAdaptableTree"]="not-adaptable-tree";e["NotAdaptableVisibility"]="not-adaptable-visibility";return e}({});u.FlexDesignTimeType=S;var H=function(e){e["ProgressIndicator"]="ProgressIndicator";e["RatingIndicator"]="RatingIndicator";e["Content"]="Content";return e}(H||{});var E=function(e){e["None"]="None";e["DataPoint"]="DataPoint";e["Chart"]="Chart";e["Identification"]="Identification";e["Contact"]="Contact";e["Address"]="Address";e["FieldGroup"]="FieldGroup";e["PresentationVariant"]="PresentationVariant";return e}(E||{});function N(e){const t=[];e.getEntityType().annotations?.UI?.HeaderFacets?.forEach(a=>{const n=G(a,e);if(n){t.push(n)}});return t}u.getHeaderFacetsFromAnnotations=N;function R(e){const t={};Object.keys(e).forEach(a=>{const n=e[a];t[a]=w(n,a)});return t}u.getHeaderFacetsFromManifest=R;function V(e,t,a){if(e.$Type==="com.sap.vocabularies.UI.v1.ReferenceFacet"&&t.$Type==="com.sap.vocabularies.UI.v1.CollectionFacet"){return false}const n=m(e)??"";const i=a.getManifestWrapper().getHeaderFacets();const o=i[n]?.stashed;return o===true}u.getStashedSettingsForHeaderFacet=V;function k(e,t,a){let n=S.Default;const i=m(e);if(e.$Type==="com.sap.vocabularies.UI.v1.ReferenceFacet"&&t.$Type==="com.sap.vocabularies.UI.v1.CollectionFacet"){n=S.NotAdaptableTree}else{const e=a.getManifestWrapper().getHeaderFacets();if(i){const t=e[i]?.flexSettings?.designtime;switch(t){case S.NotAdaptable:case S.NotAdaptableTree:case S.NotAdaptableVisibility:n=t;break;default:break}}}return n}u.getDesignTimeMetadataSettingsForHeaderFacet=k;function x(e,t,a){if(e.$Type==="com.sap.vocabularies.UI.v1.ReferenceFacet"&&e.annotations?.UI?.Hidden?.valueOf()!==true){const n=F(e),i=(e,t)=>e.ID?.toString()||e.Label?.toString()||t,o=e.Target.value,r=M(e);let s;let c;switch(r){case E.FieldGroup:s=O(e,a);break;case E.DataPoint:c=B(e,a);break;default:break}if(e.Target?.$target?.term==="com.sap.vocabularies.UI.v1.Chart"&&v(e)){return undefined}else{return{type:P.Annotation,facetType:A.Reference,id:n,containerId:T(e),key:i(e,n),flexSettings:{designtime:k(e,t,a)},stashed:V(e,t,a),visible:D(g(e)),annotationPath:`${a.getEntitySetBasedAnnotationPath(e.fullyQualifiedName)}/`,targetAnnotationValue:o,targetAnnotationType:r,headerFormData:s,headerDataPointData:c}}}return undefined}function L(e,t){if(e.$Type==="com.sap.vocabularies.UI.v1.CollectionFacet"){const a=[],n=F(e),i=(e,t)=>e.ID?.toString()||e.Label?.toString()||t;e.Facets.forEach(n=>{const i=x(n,e,t);if(i){a.push(i)}});return{type:P.Annotation,facetType:A.Collection,id:n,containerId:T(e),key:i(e,n),flexSettings:{designtime:k(e,e,t)},stashed:V(e,e,t),visible:D(g(e)),annotationPath:`${t.getEntitySetBasedAnnotationPath(e.fullyQualifiedName)}/`,facets:a}}return undefined}function M(e){let t=E.None;const a={"com.sap.vocabularies.UI.v1.DataPoint":E.DataPoint,"com.sap.vocabularies.UI.v1.Chart":E.Chart,"com.sap.vocabularies.UI.v1.Identification":E.Identification,"com.sap.vocabularies.Communication.v1.Contact":E.Contact,"com.sap.vocabularies.Communication.v1.Address":E.Address,"com.sap.vocabularies.UI.v1.FieldGroup":E.FieldGroup,"com.sap.vocabularies.UI.v1.PresentationVariant":E.PresentationVariant};if(e.$Type!=="com.sap.vocabularies.UI.v1.ReferenceURLFacet"&&e.$Type!=="com.sap.vocabularies.UI.v1.CollectionFacet"&&e.Target.$target){t=a[e.Target.$target.term]??E.None}return t}function O(e,t){if(!e){throw new Error("Cannot get FieldGroup form data without facet definition")}const a=$(j(e,t),d(e,t));return{id:I(e),label:e.Label?.toString(),formElements:a}}function j(e,t){const a=[];if(e.$Type!=="com.sap.vocabularies.UI.v1.ReferenceURLFacet"&&e.$Type!=="com.sap.vocabularies.UI.v1.CollectionFacet"){const n=t.getEntityTypeAnnotation(e.Target.value);t=n.converterContext;e.Target?.$target?.Data.forEach(n=>{if(n.annotations?.UI?.Hidden?.valueOf()!==true){const i=C(t,n);if((n.$Type==="com.sap.vocabularies.UI.v1.DataField"||n.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"||n.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"||n.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||n.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithAction")&&!f(n)){a.push({isValueMultilineText:b(n.Value?.$target),type:p.Annotation,key:y.generateKeyFromDataField(n),visible:D(g(n)),label:n.Value?.$target?.annotations?.Common?.Label||n.Label,idPrefix:I(e,n),annotationPath:`${t.getEntitySetBasedAnnotationPath(n.fullyQualifiedName)}/`,semanticObjectPath:i})}else if(n.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&!f(n)){a.push({isValueMultilineText:false,type:p.Annotation,key:y.generateKeyFromDataField(n),visible:D(g(n)),label:n.Target?.$target?.annotations?.Common?.Label?.toString()||n.Label?.toString(),idPrefix:I(e,n),annotationPath:`${t.getEntitySetBasedAnnotationPath(n.fullyQualifiedName)}/`,semanticObjectPath:i})}}})}return a}function B(e,t){let a=H.Content;let n;if(e.$Type==="com.sap.vocabularies.UI.v1.ReferenceFacet"&&!v(e)){if(e.Target?.$target?.Visualization==="UI.VisualizationType/Progress"){a=H.ProgressIndicator}else if(e.Target?.$target?.Visualization==="UI.VisualizationType/Rating"){a=H.RatingIndicator}const i=e.Target?.$target;if(typeof i==="object"){if(i?.Value?.$target){const e=i.Value.$target;if(e?.annotations?.Common?.SemanticObject!==undefined){n=t.getEntitySetBasedAnnotationPath(e?.fullyQualifiedName)}}}}return{type:a,semanticObjectPath:n}}function G(e,t){let a;switch(e.$Type){case"com.sap.vocabularies.UI.v1.ReferenceFacet":a=x(e,e,t);break;case"com.sap.vocabularies.UI.v1.CollectionFacet":a=L(e,t);break;default:break}return a}function W(e){if(!e){return undefined}const t=["Heroes","Decoration","Workers","LongRunners"].includes(e)?`$auto.${e}`:e;return`{ path : '', parameters : { $$groupId : '${t}' } }`}function w(e,t){const a=h(t);let n=e.position;if(!n){n={placement:U.After}}return{facetType:A.Reference,type:e.type,id:a,containerId:a,key:t,position:n,visible:e.visible,fragmentName:e.template||e.name,title:e.title,subTitle:e.subTitle,stashed:e.stashed||false,flexSettings:{...{designtime:S.Default},...e.flexSettings},binding:W(e.requestGroupId),templateEdit:e.templateEdit}}return u},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/controls/ObjectPage/SubSection", ["sap/base/Log","sap/fe/base/BindingToolkit","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/controls/ObjectPage/HeaderFacet","sap/fe/core/converters/helpers/IssueManager","sap/fe/core/converters/helpers/Key","sap/fe/core/helpers/TypeGuards","../../ManifestSettings","../../annotations/DataField","../../helpers/ConfigurableObject","../../helpers/ID","../../objectPage/FormMenuActions","../Common/DataVisualization","../Common/Form"],function(e,t,a,n,i,o,s,r,c,l,u,d,f,v){"use strict";var m={};var p=v.isReferenceFacet;var g=v.createFormDefinition;var b=f.getDataVisualizationConfiguration;var I=d.getFormHiddenActions;var F=d.getFormActions;var h=u.getSubSectionID;var y=u.getSideContentID;var A=u.getFormID;var U=u.getCustomSubSectionID;var C=l.insertCustomElements;var S=l.Placement;var D=l.OverrideType;var T=c.isActionWithDialog;var L=r.ActionType;var k=s.isPathAnnotationExpression;var M=o.KeyHelper;var E=i.IssueType;var N=i.IssueSeverity;var P=i.IssueCategory;var O=n.getStashedSettingsForHeaderFacet;var w=n.getHeaderFacetsFromManifest;var $=n.getDesignTimeMetadataSettingsForHeaderFacet;var x=a.removeDuplicateActions;var R=a.prepareMenuActions;var V=a.isActionNavigable;var z=a.getVisibilityEnablementMenuActions;var H=a.getSemanticObjectMapping;var j=a.getMatchingManifestAction;var B=a.getEnabledForAnnotationAction;var _=a.getAnnotationMenuActionItems;var G=a.getActionsFromManifest;var W=a.ButtonType;var q=t.resolveBindingString;var K=t.ref;var X=t.pathInModel;var Q=t.or;var J=t.notEqual;var Y=t.not;var Z=t.isConstant;var ee=t.ifElse;var te=t.getExpressionFromAnnotation;var ae=t.fn;var ne=t.equal;var ie=t.compileExpression;var oe=t.and;let se=function(e){e["Unknown"]="Unknown";e["Form"]="Form";e["Notes"]="Notes";e["DataVisualization"]="DataVisualization";e["XMLFragment"]="XMLFragment";e["Placeholder"]="Placeholder";e["Mixed"]="Mixed";e["EmbeddedComponent"]="EmbeddedComponent";return e}({});m.SubSectionType=se;const re=["com.sap.vocabularies.UI.v1.LineItem","com.sap.vocabularies.UI.v1.Chart","com.sap.vocabularies.UI.v1.PresentationVariant","com.sap.vocabularies.UI.v1.SelectionPresentationVariant"];function ce(e,t,a,n){const i=e.reduce((e,t)=>{switch(t.$Type){case"com.sap.vocabularies.UI.v1.ReferenceFacet":e.push(t);break;case"com.sap.vocabularies.UI.v1.CollectionFacet":if(t.Facets.find(e=>e.$Type==="com.sap.vocabularies.UI.v1.CollectionFacet")){e.splice(e.length,0,...t.Facets)}else{e.push(t)}break;case"com.sap.vocabularies.UI.v1.ReferenceURLFacet":break}return e},[]);return i.map(e=>pe(e,i,t,0,!e?.Facets?.length,a,n))}m.createSubSections=ce;function le(e){const t=w(e.getManifestWrapper().getHeaderFacets());const a=[];Object.keys(t).forEach(function(e){a.push(t[e]);return a});const n=a.reduce((e,t)=>{if(t.templateEdit){e.push(t)}return e},[]);return n.map(e=>ue(e))}m.createCustomHeaderFacetSubSections=le;function ue(e){const t=U(e.key);const a={id:t,key:e.key,title:e.title,type:se.XMLFragment,template:e.templateEdit||"",visible:e.visible,level:1,sideContent:undefined,stashed:e.stashed,flexSettings:e.flexSettings,actions:{},objectPageLazyLoaderEnabled:false};return a}const de=(e,t)=>e.ID?.toString()||e.Label?.toString()||t;function fe(e,t,a){for(let t=e.length-1;t>=0;t--){if(e[t].id?.startsWith("CustomAction::")&&(e[t].key.startsWith("DataFieldForAction::")||e[t].key.startsWith("DataFieldForIntentBasedNavigation::"))){e.splice(t,1)}}const n=I(t,a)||[],i={enabled:D.overwrite,visible:D.overwrite,command:D.overwrite,position:D.overwrite,menu:D.overwrite},o=F(t,a),s=G(o,a,e,undefined,undefined,n),r=_(e),c=j(r,s.actions),l=C(r,c,i);for(let t=e.length-1;t>=0;t--){if(e[t].id?.startsWith("CustomAction::")){for(const a in s.actions){if(a===e[t].key){e.splice(t,1);break}}}}let u=C(e,s.actions,i);R(u,l);u=x(u);u=z(u);u.forEach(e=>{if(e.type===L.Menu&&!!e.defaultAction){e.defaultAction.type=L.Default}});return{actions:u??e,commandActions:s.commandActions}}function ve(e,t){let a=[];switch(e.$Type){case"com.sap.vocabularies.UI.v1.CollectionFacet":a=e.Facets.filter(e=>p(e)).reduce((e,a)=>be(e,a,t),[]);break;case"com.sap.vocabularies.UI.v1.ReferenceFacet":a=be([],e,t);break;default:break}return fe(a,e,t)}function me(e){const t=ne(te(e),true);return ie(ee(t,W.Ghost,W.Transparent))}function pe(t,a,n,i,o,s,r){const c=h(t);const l=t.annotations?.UI?.Hidden;const u=Y(ne(true,te(l)));const d=!Z(u)&&!k(l);const f=t.Label!==undefined?ie(te(t.Label)):undefined;const v={id:c,key:de(t,c),title:f,type:se.Unknown,annotationPath:n.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),visible:ie(u),isVisibilityDynamic:d,level:i,sideContent:undefined,objectPageLazyLoaderEnabled:n.getManifestWrapper().getEnableLazyLoading()};if(s){v.stashed=O(t,t,n);v.flexSettings={designtime:$(t,t,n)}}let m="";i++;switch(t.$Type){case"com.sap.vocabularies.UI.v1.CollectionFacet":const c=t.Facets;const l=c.map((e,t)=>({index:t,facet:e})).filter(e=>{let{facet:t}=e;return p(t)&&t.Target.$target&&re.includes(t.Target.$target.term)});const I=c.filter(e=>!l.find(t=>t.facet===e));if(l.length>0){const a=[];const r=[];const c=[];for(const{facet:e}of l){a.push(pe(e,[],n,i,true,s))}if(I.length>0){e.warning(`Warning: CollectionFacet '${t.ID}' includes a combination of either a chart or a table and other content. This can lead to rendering issues. Consider moving the chart or table into a separate CollectionFacet.`);const a={...t};a.Facets=I;r.push(pe(a,[],n,i,o,s))}if(l.find(e=>{let{index:t}=e;return t===0})){c.push(...a);c.push(...r)}else{c.push(...r);c.push(...a)}const u={...v,type:se.Mixed,level:i,content:c};return u}else{const e=ve(t,n),a={...v,type:se.Form,formDefinition:g(t,ie(u),n,e.actions,{useSingleTextAreaFieldAsNotes:r}),level:i,actions:e.actions.filter(e=>e.facetName===undefined),commandActions:e.commandActions};return a}case"com.sap.vocabularies.UI.v1.ReferenceFacet":if(!t.Target.$target){m=`Unable to find annotationPath ${t.Target.value}`}else{switch(t.Target.$target.term){case"com.sap.vocabularies.UI.v1.LineItem":case"com.sap.vocabularies.UI.v1.Chart":case"com.sap.vocabularies.UI.v1.PresentationVariant":case"com.sap.vocabularies.UI.v1.SelectionPresentationVariant":const e=b(t.Target.value,n,{isCondensedTableLayoutCompliant:Ae(t,a,n),doNotCheckApplySupported:s,shouldCreateTemplateChartVisualization:true});const c=v.title?v.title:"";const l=e.visualizations[0]?.annotation?.title||e.visualizations[0]?.title;const p=t.annotations?.UI?.PartOfPreview?.valueOf()!==false;const I=ge(l??"",c,o);const F=ee(d,oe(u,Y(ne(f,"undefined")),I),oe(ie(u)!==undefined,f!=="undefined",f!==undefined,u,I));const h={...v,type:se.DataVisualization,level:i,presentation:e,isPartOfPreview:p,showSubSectionTitle:ie(I),dataVisualizationTitleVisible:ie(F)};return h;case"com.sap.vocabularies.UI.v1.FieldGroup":case"com.sap.vocabularies.UI.v1.Identification":case"com.sap.vocabularies.UI.v1.DataPoint":case"com.sap.vocabularies.UI.v1.StatusInfo":case"com.sap.vocabularies.Communication.v1.Contact":const y=ve(t,n),A={...v,type:se.Form,level:i,formDefinition:g(t,ie(u),n,y.actions,{useSingleTextAreaFieldAsNotes:r}),actions:y.actions.filter(e=>e.facetName===undefined),commandActions:y.commandActions};return A;case"com.sap.vocabularies.UI.v1.Note":return{...v,type:se.Notes};default:m=`For ${t.Target.$target.term} Fragment`;break}}break;case"com.sap.vocabularies.UI.v1.ReferenceURLFacet":m="For Reference URL Facet";break;default:break}const I={...v,type:se.Unknown,text:m};return I}m.createSubSection=pe;function ge(e,t,a){return Q(Y(a),J(q(e),q(t)))}m.getShowSubSectionTitle=ge;function be(e,t,a){const n=t.Target.$target;const i=t.Target.value;let o={};let s=[];let r;[r]=i.split("@");if(r.length>0){if(r.lastIndexOf("/")===r.length-1){r=r.substring(0,r.length-1)}}else{r=undefined}if(n){switch(n.term){case"com.sap.vocabularies.UI.v1.FieldGroup":s=n.Data;o=G(a.getManifestControlConfiguration(n).actions,a,[],undefined,undefined,undefined,t.fullyQualifiedName).actions;break;case"com.sap.vocabularies.UI.v1.Identification":case"com.sap.vocabularies.UI.v1.StatusInfo":if(n.qualifier){s=n}break;default:break}e=s.reduce((e,i)=>{switch(i.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":if(i.RequiresContext?.valueOf()===true){a.getDiagnostics().addIssue(P.Annotation,N.Low,E.MALFORMED_DATAFIELD_FOR_IBN.REQUIRESCONTEXT)}if(i.Inline?.valueOf()===true){a.getDiagnostics().addIssue(P.Annotation,N.Low,E.MALFORMED_DATAFIELD_FOR_IBN.INLINE)}if(i.Determining?.valueOf()===true){a.getDiagnostics().addIssue(P.Annotation,N.Low,E.MALFORMED_DATAFIELD_FOR_IBN.DETERMINING)}const o={};if(i.Mapping){o.semanticObjectMapping=H(i.Mapping)}e.push({type:L.DataFieldForIntentBasedNavigation,id:A(t,i),key:M.generateKeyFromDataField(i),text:i.Label?.toString(),annotationPath:"",enabled:i.NavigationAvailable!==undefined?ie(ne(te(i.NavigationAvailable),true)):"true",visible:ie(Y(ne(te(i.annotations?.UI?.Hidden),true))),buttonType:me(i.annotations?.UI?.Emphasized),press:ie(ae("._intentBasedNavigation.navigate",[te(i.SemanticObject),te(i.Action),o])),customData:ie({semanticObject:te(i.SemanticObject),action:te(i.Action)})});break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":const s=a.getManifestControlConfiguration(n).actions;e.push(Ie(i,t,a,s,r));break;case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":e.push({type:L.Menu,text:i.Label?.toString(),key:M.generateKeyFromDataField(i),id:A(t,i),visible:ie(Y(ne(te(i.annotations?.UI?.Hidden),true))),menu:i.Actions.map(e=>{const i=a.getManifestControlConfiguration(n).actions;return Ie(e,t,a,i,r)})});break;default:break}return e},e)}return C(e,o)}function Ie(e,t,a,n,i){const o=M.generateKeyFromDataField(e);return{type:L.DataFieldForAction,id:A(t,e),key:M.generateKeyFromDataField(e),text:e.Label?.toString(),annotationPath:"",enabled:B(a,e.ActionTarget),binding:i?`{ 'path' : '${i}'}`:undefined,visible:ie(Y(ne(te(e.annotations?.UI?.Hidden),true))),requiresDialog:T(e),buttonType:me(e.annotations?.UI?.Emphasized),press:ie(ae("invokeAction",[e.Action,{contexts:ae("getBindingContext",[],X("","$source")),invocationGrouping:e.InvocationGrouping==="UI.OperationGroupingType/ChangeSet"?"ChangeSet":"Isolated",label:e.Label?.toString(),model:ae("getModel",[],X("/","$source")),isNavigable:V(n&&n[o])}],K(".editFlow"))),facetName:e.Inline?t.fullyQualifiedName:undefined}}function Fe(e){if(e){const t=e.annotations?.Common?.IsActionCritical;if(e.parameters.length>1||t){return"Dialog"}else{return"None"}}else{return"None"}}m.isDialog=Fe;function he(e,t){const a={};Object.keys(e).forEach(n=>a[n]=ye(e[n],n,t));return a}m.createCustomSubSections=he;function ye(e,t,a){const n=e.sideContent?{template:e.sideContent.template,id:y(t),visible:false,equalSplit:e.sideContent.equalSplit}:undefined;let i=e.position;if(!i){i={placement:S.After}}const o=e.visible!==undefined?e.visible:true;const s=o&&typeof o==="string"&&o.indexOf("{=")===0;const r=G(e.actions,a);const c={type:se.Unknown,id:e.id||U(t),actions:r.actions,key:t,title:e.title,level:1,position:i,visible:e.visible!==undefined?e.visible:"true",sideContent:n,isVisibilityDynamic:s,objectPageLazyLoaderEnabled:e.enableLazyLoading??false,componentName:"",settings:""};if(e.template||e.name){c.type=se.XMLFragment;c.template=e.template||e.name||""}else if(e.embeddedComponent!==undefined){c.type=se.EmbeddedComponent;c.componentName=e.embeddedComponent.name;if(e.embeddedComponent.settings!==undefined){c.settings=JSON.stringify(e.embeddedComponent.settings)}}else{c.type=se.Placeholder}return c}m.createCustomSubSection=ye;function Ae(e,t,a){const n=a.getManifestWrapper();if(n.useIconTabBar()){return Ue(e,t)}else{const n=a.getEntityType();if(n.annotations?.UI?.Facets?.length&&n.annotations?.UI?.Facets?.length>1){return Ue(e,t)}else{return true}}}function Ue(e,t){return t.every(function(t){if(t!==e){if(t.$Type==="com.sap.vocabularies.UI.v1.ReferenceFacet"){const e=t;if(e.Target?.$target?.term==="com.sap.vocabularies.UI.v1.LineItem"||e.Target?.$target?.term==="com.sap.vocabularies.UI.v1.PresentationVariant"||e.Target.$target?.term==="com.sap.vocabularies.UI.v1.SelectionPresentationVariant"){return e.annotations?.UI?.Hidden!==undefined?e.annotations?.UI?.Hidden:false}return true}else{const e=t;return e.Facets.every(function(e){const t=e;if(t.Target?.$target?.term==="com.sap.vocabularies.UI.v1.LineItem"||t.Target?.$target?.term==="com.sap.vocabularies.UI.v1.PresentationVariant"||t.Target?.$target?.term==="com.sap.vocabularies.UI.v1.SelectionPresentationVariant"){return t.annotations?.UI?.Hidden!==undefined?t.annotations?.UI?.Hidden:false}return true})}}return true})}return m},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/helpers/Aggregation", ["sap/fe/core/helpers/TypeGuards"],function(t){"use strict";var e={};var n=t.isProperty;var r=t.isNavigationProperty;var o=t.isEntityType;var i=t.isEntitySet;let g=function(){function t(t,e){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;this._entityType=t;this._converterContext=e;this._oAggregationAnnotationTarget=this._determineAggregationAnnotationTarget();if(r(this._oAggregationAnnotationTarget)||o(this._oAggregationAnnotationTarget)||i(this._oAggregationAnnotationTarget)){this.oTargetAggregationAnnotations=this._oAggregationAnnotationTarget.annotations.Aggregation}this._bApplySupported=this.oTargetAggregationAnnotations?.ApplySupported?true:false;if(this._bApplySupported){this._aGroupableProperties=this.oTargetAggregationAnnotations?.ApplySupported?.GroupableProperties;this._aAggregatableProperties=this.oTargetAggregationAnnotations?.ApplySupported?.AggregatableProperties;this.oContainerAggregationAnnotation=e.getEntityContainer().annotations.Aggregation}if(!this._aAggregatableProperties&&n){const t=this._getEntityProperties();this._aAggregatableProperties=t?.filter(t=>t.annotations?.Aggregation?.Aggregatable)}}e.AggregationHelper=t;var g=t.prototype;g._determineAggregationAnnotationTarget=function t(){const e=this._converterContext.getDataModelObjectPath()?.startingEntitySet?.entityType?.annotations?.Common?.ResultContext?true:false;let n;if(e){const t=this._converterContext.getDataModelObjectPath();const e=t?.targetObject;const r=t?.targetEntityType;if(e?.annotations?.Aggregation?.hasOwnProperty("ApplySupported")){n=e}else if(r?.annotations?.Aggregation?.ApplySupported){n=r}}else{const t=this._converterContext.getEntitySet();if(i(t)&&t.annotations.Aggregation?.ApplySupported){n=t}else{n=this._converterContext.getEntityType()}}return n};g.isAnalyticsSupported=function t(){return this._bApplySupported};g.isPropertyGroupable=function t(e){if(!this._bApplySupported){return undefined}else if(!this._aGroupableProperties||this._aGroupableProperties.length===0){return true}else{return this._aGroupableProperties.some(t=>t.$target===e)}};g.isPropertyAggregatable=function t(e){if(!this._bApplySupported){return undefined}else{const t=this._converterContext.getAnnotationsByTerm("Aggregation","Org.OData.Aggregation.V1.CustomAggregate",[this._oAggregationAnnotationTarget]);return t.some(t=>e.name===t.qualifier)}};g.getGroupableProperties=function t(){return this._aGroupableProperties};g.getAggregatableProperties=function t(){return this._aAggregatableProperties};g.getEntityType=function t(){return this._entityType};g.getAggregatedProperties=function t(){return this._converterContext.getAnnotationsByTerm("Analytics","com.sap.vocabularies.Analytics.v1.AggregatedProperties",[this._converterContext.getEntityContainer(),this._converterContext.getEntityType()])};g.getAggregatedProperty=function t(){return this._converterContext.getAnnotationsByTerm("Analytics","com.sap.vocabularies.Analytics.v1.AggregatedProperty",[this._converterContext.getEntityContainer(),this._converterContext.getEntityType()])};g.getTransAggregations=function t(){let e=this.getAggregatedProperty();if(!e||e.length===0){e=this.getAggregatedProperties()[0]}return e?.filter(t=>{if(this._getAggregatableAggregates(t.AggregatableProperty)){return t}})};g._getAggregatableAggregates=function t(e){const r=this.getAggregatableProperties()||[];return r.find(function(t){const r=e.qualifier?e.qualifier:e.$target?.name;if(n(t)){return t?.name===r}else if(t?.Property?.value){return t.Property.value===r}})};g._getEntityProperties=function t(){let e;if(i(this._oAggregationAnnotationTarget)){e=this._oAggregationAnnotationTarget?.entityType?.entityProperties}else if(o(this._oAggregationAnnotationTarget)){e=this._oAggregationAnnotationTarget?.entityProperties}return e};g.getCustomAggregateDefinitions=function t(){const e=this._converterContext.getAnnotationsByTerm("Aggregation","Org.OData.Aggregation.V1.CustomAggregate",[this._oAggregationAnnotationTarget]);return e};g.getAllowedTransformations=function t(){return this.oTargetAggregationAnnotations?.ApplySupported?.Transformations||this.oContainerAggregationAnnotation?.ApplySupportedDefaults?.Transformations};return t}();e.AggregationHelper=g;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/helpers/ConfigurableObject", ["sap/base/Log"],function(e){"use strict";var n={};let t=function(e){e["After"]="After";e["Before"]="Before";e["End"]="End";return e}({});n.Placement=t;const o=function(e,n){let o;const s=Object.keys(n).filter(e=>n[e].placement===t.Before);if(s.length>1){const e=s.find(e=>!s.includes(n[e].anchor));o=e||s[0]}else if(s.length){o=s[0]}else{o=Object.keys(n)[0]}e.push(o);return o};const s=(e,n)=>n.includes(e);const i=(e,n,t)=>{if(e===-1){return false}return!s(n,t)};const c=(e,n,t,o)=>!!(Object.keys(e).length&&Object.keys(e).map(n=>e[n].anchor).some(e=>n.includes(e)))||Object.keys(t).length===o.length&&o.length-n.length===Object.keys(e).length&&Object.keys(e).every(n=>Object.keys(e).includes(e[n].anchor));const r=(e,n,t,o)=>{const s=[];const i={first:undefined,last:undefined};i.first=e.length?e[0].key:undefined;i.last=e.length?e[e.length-1].key:undefined;const c={};Object.keys(t).forEach(e=>{f(t,e,s,i,c,[])});const r=s.map(e=>n[e]);r.forEach((e,t)=>{if(e.position&&!n[e.key]?.position){delete r[t].position}});if(o){r.push(o)}return r};const l=(e,n,s,i,c,r)=>{let l=e.indexOf(n);if(Object.keys(i).includes(n)){delete i[n]}if(s&&s.anchor&&n!==s.anchor&&!e.includes(s.anchor)){i[n]=c[n];if(Object.keys(i).length&&!Object.keys(i).some(n=>e.includes(i[n].anchor))&&r.length-e.length===Object.keys(i).length){const n=o(e,i);delete i[n]}else{return-1}}else if(n===s.anchor){l=e.length}else{l=e.indexOf(s.anchor);if(s.placement===t.After){l++}}return l};const f=(n,r,a,h,u,d)=>{if(s(r,a)){return}const p=n[r];d=d.length?d:Object.keys(n);if(p.anchor&&!Object.keys(n).includes(p.anchor)&&!d.includes(p.anchor)){e.warning(`Position anchor '${p.anchor}' not found for item '${r}'. Please check settings. Defaulting as if no Anchor was set.`);n[r].anchor=r;p.anchor=r}if(!p.anchor){p.anchor=p.placement===t.After?h.last:h.first;if(p.anchor===undefined){o(a,{[r]:p})}}const y=l(a,r,p,u,n,d);if(i(y,r,a)){a.splice(y,0,r)}h.last=a[a.length-1];if(Object.keys(u).length&&c(u,a,n,d)){Object.keys(u).forEach(e=>{f({...u},e,a,h,u,d)})}};let a=function(e){e["merge"]="merge";e["overwrite"]="overwrite";e["ignore"]="ignore";return e}({});n.OverrideType=a;function h(e){return typeof e==="object"}function u(e,n,t){const o=n||t;for(const s in e){if(Object.hasOwnProperty.call(e,s)){const i=e[s];if(n!==null){switch(i){case"overwrite":if(t.hasOwnProperty(s)&&t[s]!==undefined){n[s]=t[s]}break;case"merge":default:const e=n[s]||[];let o={};if(h(i)){o=i}if(Array.isArray(e)){n[s]=d(e,t&&t[s]||{},o)}break}}else{switch(i){case"overwrite":if(t.hasOwnProperty(s)&&t[s]!==undefined){o[s]=t[s]}break;case"merge":default:let e={};if(h(i)){e=i}o[s]=d([],t&&t[s]||{},e);break}}}}return o}function d(e,n){let o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};let s;const i={};const c={};e.forEach(e=>{if(e.position?.placement===t.End&&!s){s=e}else{i[e.key]={anchor:e.position?.anchor||e.key,placement:e.position?.placement||t.After}}c[e.key]=e});Object.keys(n).forEach(e=>{const s=n[e];const r=s.position.anchor;if(!s.position.placement){s.position.placement=t.After}const l=s.key;if(c[l]){c[l]=u(o,c[l],s);if(r&&s.position&&o.position&&o.position==="overwrite"){i[l]=c[l].position}}else{c[l]=u(o,null,s);i[l]=s.position}});return r(e,c,i,s)}n.insertCustomElements=d;return n},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/helpers/DataFieldHelper", ["sap/base/Log","../../helpers/TypeGuards"],function(e,t){"use strict";var a={};var r=t.isProperty;function n(e){if(!e){return false}function t(e){const t=e.annotations.UI?.DataFieldDefault||false;return l("Hidden",e)||t&&s(t)}function a(e){return s(e)||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i(e)}function n(e){return l("HiddenFilter",e)&&e.name}function o(e){return c(e)&&l("HiddenFilter",e.Value.$target)&&e.Value.path}const d=r(e)?t(e):a(e);const f=r(e)?n(e):o(e);if(d&&f){u(f)}return d}a.isReferencePropertyStaticallyHidden=n;function i(t){if(s(t)){return true}switch(t.Target.$target?.term){case"com.sap.vocabularies.UI.v1.Chart":const a=t.Target.$target.Measures.every(e=>{if(e.$target&&l("Hidden",e.$target)){if(l("HiddenFilter",e.$target)){u(e.$target.name)}return true}});if(a){e.warning("Warning: All measures attribute for Chart are statically hidden hence chart can't be rendered")}return a;case"com.sap.vocabularies.UI.v1.FieldGroup":return t.Target.$target.Data.every(n);case"com.sap.vocabularies.UI.v1.DataPoint":const r=t.Target.$target.Value.$target;return n(r);default:return false}}a.isAnnotationFieldStaticallyHidden=i;function o(e){if(e?.targetObject){const t=e.targetObject;return n(t)}return false}a.isHeaderStaticallyHidden=o;function s(e){return e.annotations?.UI?.Hidden?.valueOf()===true||c(e)&&l("Hidden",e?.Value?.$target)}function u(t){e.warning("Warning: Property "+t+" is set with both UI.Hidden and UI.HiddenFilter - please set only one of these! UI.HiddenFilter is ignored currently!")}function c(e){return e.hasOwnProperty("Value")}function l(e,t){return t?.annotations?.UI?.[e]?.valueOf()===true}function d(e){let t;switch(e?.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":t=e?.Value?.$target;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":const a=e.Target.$target;if(a?.term==="com.sap.vocabularies.UI.v1.DataPoint"){t=a?.Value?.$target}if(a?.term==="com.sap.vocabularies.Communication.v1.Contact"){t=a?.fn?.$target}break;case"com.sap.vocabularies.UI.v1.DataPointType":t=e?.Value?.$target;break;default:break}return t?.annotations?.PersonalData?.IsPotentiallySensitive?.valueOf()===true}a.isPotentiallySensitive=d;return a},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/helpers/ID", ["../../helpers/StableIdHelper"],function(t){"use strict";var e={};var n=t.generate;const o=["fe"];function r(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++){e[r]=arguments[r]}return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++){r[a]=arguments[a]}return n(o.concat(...e,...r))}}e.createIDGenerator=r;const a=r("HeaderFacet");e.getHeaderFacetID=a;const c=r("HeaderFacetContainer");e.getHeaderFacetContainerID=c;const i=r("HeaderFacet","Form");e.getHeaderFacetFormID=i;const s=r("HeaderFacetCustomContainer");e.getCustomHeaderFacetID=s;const u=r("EditableHeaderSection");e.getEditableHeaderSectionID=u;const g=r("FacetSection");e.getSectionID=g;const I=r("CustomSection");e.getCustomSectionID=I;const D=r("FacetSubSection");e.getSubSectionID=D;const d=r("CustomSubSection");e.getCustomSubSectionID=d;const C=r("SideContent");e.getSideContentID=C;const m=function(t){return n(["fe",t,"SideContentLayout"])};e.getSideContentLayoutID=m;const F=r("Form");e.getFormID=F;const S=r("FormContainer");e.getFormContainerID=S;const f=function(t,e){return n(["fe","FormContainer",t,"StandardAction",e])};e.getFormStandardActionButtonID=f;const l=r("table");e.getTableID=l;const b=r("CustomTab");e.getCustomTabID=b;const H=r("FilterBar");e.getFilterBarID=H;const p=function(){return"fe::ListReport"};e.getDynamicListReportID=p;const A=r("TabMultipleMode");e.getIconTabBarID=A;const h=function(t){return n([t,"VariantManagement"])};e.getFilterVariantManagementID=h;const y=r("Chart");e.getChartID=y;const T=function(t){return n(["CustomAction",t])};e.getCustomActionID=T;const v=r("KPI");e.getKPIID=v;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/helpers/InsightsHelpers", ["sap/fe/base/BindingToolkit","../ManifestSettings"],function(t,e){"use strict";var n={};var a=e.TemplateType;var i=t.pathInModel;var s=t.equal;var r=t.constant;var l=t.and;function o(t,e,n,o){let u,g;const p=e.getManifestWrapper().hasMultipleEntitySets();const f=e.getManifestWrapper().hasMultipleVisualizations();const d=e.getManifestWrapper().getViewConfiguration();const c=d!==undefined&&d.paths.length>1?true:false;const b=e.getTemplateType()===a.ListReport;const h=e.getManifestControlConfiguration(n);const T=t==="Analytical"?h?.enableAddCardToInsights??true:h?.tableSettings?.enableAddCardToInsights??true;if(t==="Table"){u=o?.tableManifestConfiguration;g=u?.type==="ResponsiveTable"}return l(r(T),r(b),r(!p),r(!c),r(t==="Table"?(g??false)&&!f:true),s(i("isInsightsSupported","pageInternal"),true))}n.getInsightsVisibility=o;function u(){return s(i("isInsightsEnabled","internal"),true)}n.getInsightsEnablement=u;return n},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/helpers/IssueManager", [],function(){"use strict";var e={};let n=function(e){e[e["High"]=0]="High";e[e["Low"]=1]="Low";e[e["Medium"]=2]="Medium";return e}({});e.IssueSeverity=n;const t={Facets:{MissingID:"MissingID",UnSupportedLevel:"UnsupportedLevel"},AnnotationColumns:{InvalidKey:"InvalidKey"},Annotations:{IgnoredAnnotation:"IgnoredAnnotation"}};e.IssueCategoryType=t;let i=function(e){e["Annotation"]="Annotation";e["Annotations"]="Annotations";e["Template"]="Template";e["Manifest"]="Manifest";e["Facets"]="Facets";return e}({});e.IssueCategory=i;const o={MISSING_CHART:"We couldn't find a chart annotation for the current entitySet, you should consider adding one.",MISSING_LINEITEM:"We couldn't find a line item annotation for the current entitySet, you should consider adding one.",MISSING_SELECTIONFIELD:"We couldn't find the defined selection field.",MALFORMED_DATAFIELD_FOR_IBN:{REQUIRESCONTEXT:"DataFieldForIntentBasedNavigation cannot use RequiresContext in the form or header.",INLINE:"DataFieldForIntentBasedNavigation cannot use Inline in the form or header.",DETERMINING:"DataFieldForIntentBasedNavigation cannot use Determining in the form or header."},MALFORMED_VISUALFILTERS:{VALUELIST:"We couldn't find the ValueList path provided in the manifest",PRESENTATIONVARIANT:"PresentationVariant is missing for the VisualFilters",CHART:"Chart is missing from the PV configured for the VisualFilters",VALUELISTCONFIG:"ValueList has not been configured inside the Visual Filter Settings",FilterRestrictions:"For VisualFilters, range expressions are not allowed"},FULLSCREENMODE_NOT_ON_LISTREPORT:"enableFullScreenMode is not supported on list report pages.",KPI_ISSUES:{KPI_NOT_FOUND:"Couldn't find KPI or SPV with qualifier ",KPI_DETAIL_NOT_FOUND:"Can't find proper datapoint or chart definition for KPI ",NO_ANALYTICS:"The following entitySet used in a KPI definition doesn't support $apply queries:",MAIN_PROPERTY_NOT_AGGREGATABLE:"Main property used in KPI cannot be aggregated "}};e.IssueType=o;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/helpers/Key", ["../../helpers/StableIdHelper"],function(e){"use strict";var t={};var r=e.getStableIdPartFromDataField;let n=function(){function e(){}t.KeyHelper=e;e.generateKeyFromDataField=function e(t){return r(t,true)};e.validateKey=function e(t){const r=/[^A-Za-z0-9_\-:]/;if(r.exec(t)){throw new Error(`Invalid key: ${t} - only 'A-Za-z0-9_-:' are allowed`)}};e.getSelectionFieldKeyFromPath=function e(t){return t.replace(/([*+])?\//g,"::")};e.getPathFromSelectionFieldKey=function e(t){return t.replace(/::/g,"/")};return e}();t.KeyHelper=n;return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/helpers/SelectionVariantHelper", [],function(){"use strict";var e={};function n(e,n){let t;const a=e.Sign!=="UI.SelectionRangeSignType/E"?true:false;switch(e.Option){case"UI.SelectionRangeOptionType/BT":t=a?"BT":"NB";break;case"UI.SelectionRangeOptionType/CP":t=a?"Contains":"NotContains";break;case"UI.SelectionRangeOptionType/EQ":t=a?"EQ":"NE";break;case"UI.SelectionRangeOptionType/GE":t=a?"GE":"LT";break;case"UI.SelectionRangeOptionType/GT":t=a?"GT":"LE";break;case"UI.SelectionRangeOptionType/LE":t=a?"LE":"GT";break;case"UI.SelectionRangeOptionType/LT":t=a?"LT":"GE";break;case"UI.SelectionRangeOptionType/NB":t=a?"NB":"BT";break;case"UI.SelectionRangeOptionType/NE":t=a?"NE":"EQ";break;case"UI.SelectionRangeOptionType/NP":t=a?"NotContains":"Contains";break;default:t="EQ"}return{operator:t,rangeLow:n&&n.indexOf("Edm.Date")===0?new Date(e.Low):e.Low,rangeHigh:e.High&&n&&n.indexOf("Edm.Date")===0?new Date(e.High):e.High}}e.getRangeDefinition=n;function t(e){const t=[];if(e.SelectOptions){e.SelectOptions.forEach(e=>{if(e.PropertyName?.$target&&e.Ranges.length>0){const a=e.PropertyName.$target.type;t.push({propertyPath:e.PropertyName.value,propertyType:a,ranges:e.Ranges.map(e=>n(e,a))})}})}return t}e.getFilterDefinitionsFromSelectionVariant=t;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/objectPage/FormMenuActions", ["sap/fe/core/converters/helpers/Key","sap/fe/core/helpers/TypeGuards"],function(e,a){"use strict";var t={};var o=a.isAnnotationOfType;var n=a.isAnnotationOfTerm;var i=e.KeyHelper;var r=function(e){e["Default"]="Default";return e}(r||{});const s=(e,a)=>{for(const t in e){if(e.hasOwnProperty(t)){a[t]=e[t]}}return e};t.mergeFormActions=s;const c=(e,a)=>{const t=f(e,a)||[],s=a?.getEntityType()?.annotations?.UI;const c=[];for(const e in s){const a=s[e];if(o(a,"com.sap.vocabularies.UI.v1.FieldGroupType")){a?.Data.forEach(e=>{if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&t.hasOwnProperty(`DataFieldForAction::${e.Action}`)||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&t.hasOwnProperty(`DataFieldForIntentBasedNavigation::${e.Action}`)){if(e?.annotations?.UI?.Hidden?.valueOf()===true){c.push({type:r.Default,key:i.generateKeyFromDataField(e)})}}})}else if(n(a,"com.sap.vocabularies.UI.v1.Identification")||n(a,"com.sap.vocabularies.UI.v1.StatusInfo")){a?.forEach(e=>{if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&t.hasOwnProperty(`DataFieldForAction::${e.Action}`)||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&t.hasOwnProperty(`DataFieldForIntentBasedNavigation::${e.Action}`)){if(e?.annotations?.UI?.Hidden?.valueOf()===true){c.push({type:r.Default,key:i.generateKeyFromDataField(e)})}}})}}return c};t.getFormHiddenActions=c;const f=(e,a)=>{const t=a.getManifestWrapper();let n,i;let r={};if(e?.$Type==="com.sap.vocabularies.UI.v1.CollectionFacet"){if(e?.Facets){e?.Facets.forEach(e=>{if(o(e,"com.sap.vocabularies.UI.v1.ReferenceFacet")){n=e?.Target?.value;i=t.getFormContainer(n);if(i?.actions){for(const a in i.actions){i.actions[a].facetName=e.fullyQualifiedName}r=s(i?.actions,r)}}})}}else if(e?.$Type==="com.sap.vocabularies.UI.v1.ReferenceFacet"){n=e?.Target?.value;i=t.getFormContainer(n);if(i?.actions){for(const a in i.actions){i.actions[a].facetName=e.fullyQualifiedName}r=i.actions}}return r};t.getFormActions=f;return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/objectPage/HeaderAndFooterAction", ["sap/fe/base/BindingToolkit","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/Key","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/UIFormatters","sap/ui/core/Lib","../../helpers/BindingHelper","../ManifestSettings"],function(e,t,n,i,a,o,r,s,l,c,u){"use strict";var f={};var p=u.ActionType;var d=c.singletonPathVisitor;var y=c.UI;var v=c.Draft;var g=s.isVisible;var b=r.isPathDeletable;var A=o.isEntitySet;var m=i.KeyHelper;var D=n.Placement;var E=t.getSemanticObjectMapping;var h=t.getEnabledForAnnotationAction;var I=t.getCopyAction;var F=t.dataFieldIsCopyAction;var C=t.ButtonType;var T=e.pathInModel;var S=e.not;var O=e.ifElse;var U=e.getExpressionFromAnnotation;var B=e.fn;var P=e.equal;var N=e.constant;var M=e.compileExpression;var k=e.and;function R(e,t){return e.annotations?.UI?.Identification?.filter(e=>e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&Boolean(e.Determining?.valueOf())===t&&(e.ActionTarget?.isBound?.valueOf()!==true||e?.ActionTarget?.annotations?.Core?.OperationAvailable?.valueOf()!==false)?true:false)||[]}f.getIdentificationDataFieldForActions=R;function H(e,t){return e.annotations?.UI?.Identification?.filter(e=>e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&Boolean(e.Determining?.valueOf())===t&&(e.ActionTarget?.isBound?.valueOf()!==true||e?.ActionTarget?.annotations?.Core?.OperationAvailable?.valueOf()!==false)||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForActionGroup"?true:false)||[]}f.getIdentificationDataFieldForActionsOrGroups=H;function V(e,t){return e.annotations?.UI?.Identification?.filter(e=>e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&Boolean(e.Determining?.valueOf())===t?true:false)||[]}const x=["UI.CriticalityType/VeryPositive","UI.CriticalityType/Positive","UI.CriticalityType/Negative","UI.CriticalityType/VeryNegative"];f.IMPORTANT_CRITICALITIES=x;function L(e,t){const n=e.getDataModelObjectPath(),i=n.navigationProperties.map(e=>e.name),a=U(t,i,false,t=>d(t,e.getConvertedTypes(),[])),o=e.getManifestWrapper(),r=o.getViewLevel(),s=r>1?y.IsEditable:S(y.IsEditable);return O(t===undefined||t.valueOf()===false,s,k(s,P(a,false)))}f.getDeleteButtonVisibility=L;function j(e,t,n){const i=n.getEntitySet(),o=a.isDraftRoot(i);let r=O(t!==undefined,t,O(e!==undefined,P(U(e),true),N(true)));r=o?k(r,S(T("DraftAdministrativeData/InProcessByUser"))):r;return r}f.getDeleteButtonEnabled=j;function w(e,t,n,i,o){const r=n?.getEntitySet(),s=e.getEntitySet(),l=e.getManifestWrapper().isFclEnabled();let c;const u=$(n,t);if(o&&o>1){c=a.isDraftNode(s)}else{c=a.isDraftRoot(r)}const f=$(n,i);const p=S(y.IsEditable);const d=O(o>1,O(i===undefined||i.valueOf()===false,k(p,P(T("rootEditVisible","internal"),true),O(l,P(T("/showEditButton","fclhelper"),true),true)),k(p,P(f,false),P(T("rootEditVisible","internal"),true),O(l,P(T("/showEditButton","fclhelper"),true),true))),O(t===undefined||t.valueOf()===false,p,k(p,P(u,false))));return O(c,k(d,v.HasNoDraftForCurrentUser),d)}f.getEditButtonVisibility=w;function $(e,t){const n=e.getDataModelObjectPath(),i=n.navigationProperties.map(e=>e.name),a=U(t,i,false,t=>d(t,e.getConvertedTypes(),i));return a}f.getHiddenExpression=$;function K(e,t,n){const i=e.getEntitySet(),o=a.isDraftRoot(i),r=a.isSticky(i);let s;if(o&&A(i)){s=i.annotations.Common?.DraftRoot?.EditAction}else if(r&&A(i)){s=i.annotations.Session?.StickySessionSupported?.EditAction}if(s){const i=e.getAbsoluteAnnotationPath(s);const a=e.resolveAbsolutePath(i).target;if(a?.annotations?.Core?.OperationAvailable===null){}else if(n>1){if(t!==undefined){return M(k(P(U(t),true),P(T("rootEditEnabled","internal"),true)))}else{return M(P(T("rootEditEnabled","internal"),true))}}else{return h(e,a??undefined)}}return"true"}f.getEditButtonEnabled=K;function G(e){const t=e.getContextPath();const n=a.getRootEntitySetPath(t);const i=e.getConverterContextFor("/"+n);const o=e.getEntitySet(),r=e.getEntityType(),s=i.getEntitySet(),c=i.getEntityType(),u=a.getStickySession(s),f=a.getDraftRoot(s),y=a.getDraftNode(s),v=o&&o.annotations?.Capabilities?.DeleteRestrictions,g=a.isUpdateHidden(s,c),D=s&&A(s)&&g?.valueOf(),h=e.getDataModelObjectPath(),O=b(h,{pathVisitor:(t,n)=>d(t,e.getConvertedTypes(),n)}),N=O?M(O):O,R=H(e.getEntityType(),false);const $=e.getManifestWrapper().getViewLevel()===1?I(R.filter(e=>{if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){return F(e)}})):undefined;const G=R.filter(e=>!F(e));const W=[];if(A(o)&&f?.EditAction&&D!==true){W.push({type:p.DraftActions,key:"DraftActions"})}const _=e.getManifestWrapper().getViewLevel();const Y=_>1?o?.annotations.Capabilities?.UpdateRestrictions?.Updatable:undefined;if(f||y){W.push({type:p.CollaborationAvatars,key:"CollaborationAvatars"})}Q(W,true,G,e);if((f?.EditAction||u?.EditAction)&&D!==true){W.push({type:p.Primary,key:"EditAction",visible:M(w(e,g,i,a.isUpdateHidden(o,r),_)),enabled:K(i,Y,_)})}if(N&&N!=="false"||v?.Deletable?.valueOf()!==false&&N!=="false"){const t=a.getDeleteHidden(o,r);W.push({type:p.Secondary,key:"DeleteAction",visible:M(L(e,t)),enabled:M(j(v?.Deletable,O,e)),parentEntityDeleteEnabled:N})}if($){W.push({...q($,e),type:p.Copy,text:$.Label?.toString()??l.getResourceBundleFor("sap.fe.core").getText("C_COMMON_COPY")})}const z=V(e.getEntityType(),false);z.filter(e=>{const t=M(U(e?.Criticality));return!x.includes(t)}).forEach(t=>{if(t.RequiresContext?.valueOf()===true){throw new Error(`RequiresContext property should not be true for header IBN action : ${t.Label}`)}if(t.Inline?.valueOf()===true){throw new Error(`Inline property should not be true for header IBN action : ${t.Label}`)}const n={semanticObjectMapping:E(t.Mapping)};W.push({type:p.DataFieldForIntentBasedNavigation,text:t.Label?.toString(),annotationPath:e.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),buttonType:C.Ghost,visible:M(k(S(P(U(t.annotations?.UI?.Hidden),true)),S(P(T("shellNavigationNotAvailable","internal"),true)))),enabled:t.NavigationAvailable!==undefined?M(P(U(t.NavigationAvailable),true)):true,key:m.generateKeyFromDataField(t),isNavigable:true,press:M(B("._intentBasedNavigation.navigate",[U(t.SemanticObject),U(t.Action),n])),customData:M({semanticObject:U(t.SemanticObject),action:U(t.Action)})})});Q(W,false,G,e);return W}f.getHeaderDefaultActions=G;function W(e){const t=e.getEntityType();const n=t.annotations?.UI?.Identification?.filter(e=>e?.annotations?.UI?.Hidden?.valueOf()===true)||[];return n.map(e=>({type:p.Default,key:m.generateKeyFromDataField(e)}))}f.getHiddenHeaderActions=W;function _(e,t){const n=t.getEntitySet();const i=t.getEntityType();const o=a.getStickySession(n),r=A(n)&&(n.annotations.Common?.DraftRoot?.term??n.annotations.Session?.StickySessionSupported?.term),s=Boolean(r==="com.sap.vocabularies.Common.v1.DraftRoot"||o&&o?.SaveAction),l=e>1,c=Boolean(r==="com.sap.vocabularies.Common.v1.DraftRoot"||o&&o?.DiscardAction);const u=R(t.getEntityType(),true);const f=u.filter(e=>{const t=M(U(e?.Criticality));return t&&x.includes(t)}).map(e=>q(e,t));if(n?.entityTypeName===i?.fullyQualifiedName&&s){f.push({type:p.Primary,key:"SaveAction"})}if(l){f.push({type:p.DefaultApply,key:"ApplyAction"})}u.filter(e=>{const t=M(U(e?.Criticality));return t&&!x.includes(t)}).forEach(e=>{f.push(q(e,t))});if(c){f.push({type:p.Secondary,key:"CancelAction",position:{placement:D.End}})}return f}f.getFooterDefaultActions=_;function q(e,t){const n=g(e);return{type:p.DataFieldForAction,annotationPath:t.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:m.generateKeyFromDataField(e),visible:M(n),enabled:h(t,e.ActionTarget),isNavigable:true}}function Q(e,t,n,i){n.filter(e=>{const n=M(U(e?.Criticality));return t?x.includes(n):!x.includes(n)}).forEach(t=>{if(t.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){e.push(q(t,i))}else if(t.$Type==="com.sap.vocabularies.UI.v1.DataFieldForActionGroup"){e.push({type:p.Menu,text:t.Label,key:m.generateKeyFromDataField(t),id:m.generateKeyFromDataField(t),visible:M(S(P(U(t.annotations?.UI?.Hidden),true))),menu:t.Actions.map(e=>q(e,i))})}})}return f},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/templates/ListReportConverter", ["sap/fe/base/BindingToolkit","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/controls/ListReport/FilterBar","sap/fe/core/converters/helpers/ConfigurableObject","../../helpers/TypeGuards","../ManifestSettings","../controls/Common/DataVisualization","../controls/Common/KPI","../helpers/ID"],function(t,e,n,i,a,o,r,s,l){"use strict";var c={};var u=l.getTableID;var f=l.getIconTabBarID;var d=l.getFilterVariantManagementID;var p=l.getFilterBarID;var y=l.getDynamicListReportID;var h=l.getCustomTabID;var m=l.getChartID;var g=s.getKPIDefinitions;var v=r.isSelectionPresentationCompliant;var C=r.isPresentationCompliant;var b=r.getSelectionVariant;var T=r.getSelectionPresentationVariant;var P=r.getDefaultLineItem;var w=r.getDefaultChart;var I=r.getDataVisualizationConfiguration;var V=o.VisualizationType;var S=o.VariantManagementType;var E=o.TemplateType;var M=a.isAnnotationOfType;var z=i.insertCustomElements;var D=n.getSelectionFields;var A=n.getManifestFilterFields;var F=n.getFilterBarHideBasicSearch;var L=e.getActionsFromManifest;var k=t.getExpressionFromAnnotation;var x=t.compileExpression;var B=function(t){t["Multi"]="Multi";t["Combined"]="Combined";t["Custom"]="Custom";t["Default"]="Default";return t}(B||{});var R=function(t){t["SingleTable"]="SingleTable";t["SingleChart"]="SingleChart";t["Combined"]="Combined";t["Custom"]="Custom";return t}(R||{});const H=function(t,e){return t.type===e};const W=function(t,e){return t.viewType===e};function $(t){const e=[];t.forEach(function(t){if(!W(t,R.Custom)){const n=W(t,R.Combined)?t.secondaryVisualization.visualizations:t.presentation.visualizations;n.forEach(function(t){if(t.type===V.Table){e.push(t)}})}});return e}function O(t){const e=[];t.forEach(function(t){if(!W(t,R.Custom)){const n=W(t,R.Combined)?t.primaryVisualization.visualizations:t.presentation.visualizations;n.forEach(function(t){if(t.type===V.Chart){e.push(t)}})}});return e}const j=function(t){const e={};for(const n in t){if(t[n]?.settings?.defaultValues?.length){e[n]=t[n]?.settings?.defaultValues}}return e};function U(t,e,n){const i=e.getManifestWrapper().getDefaultTemplateAnnotationPath();const a=T(t,i,e);const o="ALP flavor needs both chart and table to load the application";if(a){if(i){const t=a.PresentationVariant;if(!t){throw new Error("Presentation Variant is not configured in the SPV mentioned in the manifest")}if(!C(t,n)){if(n){throw new Error(o)}return undefined}}if(v(a,n)===true){return a}else if(n){throw new Error(o)}}const r=t.annotations?.UI?.PresentationVariant;if(r){if(C(r,n)){return r}else if(n){throw new Error(o)}}if(!n){return P(t)}return undefined}const N=function(t,e,n){const i=K(t[0],true);const a=K(t[1]?t[1]:t[0],false);if(i&&a){const t={primaryVisualization:i,secondaryVisualization:a,tableControlId:a.visualizations[0]?.type===V.Table?a.visualizations[0].annotation?.id:"",chartControlId:i.visualizations[0]?.type===V.Chart?i.visualizations[0].id:"",defaultPath:e,viewType:R.Combined,visible:H(n,B.Multi)?n.visible:undefined};return t}};const Q=function(t,e,n){const i=X(e,V.Table)?.annotation.id;const a={presentation:e,title:Y(t,n),selectionVariantPath:Z(n),visible:H(n,B.Multi)?n.visible:undefined};if(i){return{...a,...{tableControlId:i,viewType:R.SingleTable}}}return{...a,...{chartControlId:X(e,V.Chart)?.id,viewType:R.SingleChart}}};const K=function(t,e){const n=Object.assign({},t);const i=t.visualizations.find(t=>!!e&&t.type===V.Chart||!e&&t.type===V.Table);if(i){n.visualizations=[i]}else{const t=e?{visualization:"Primary",type:"chart"}:{visualization:"Secondary",type:"table"};throw new Error(`${t.visualization} visualization needs valid ${t.type}`)}return n};const q=function(t,e,n){const i=t.getEntityTypeAnnotation(e.annotationPath);const a=i.annotation;t=i.converterContext;const o=a;if(o||t.getTemplateType()===E.AnalyticalListPage){return I(o?t.getRelativeAnnotationPath(o.fullyQualifiedName,t.getEntityType()):"",t,{isCondensedTableLayoutCompliant:true,shouldCreateTemplateChartVisualization:true})}else{throw new Error(`Annotation Path for the ${n?"primary":"secondary"} visualization mentioned in the manifest is not found`)}};const G=function(t,e){for(const n of t.visualizations){switch(n.type){case V.Table:const t=n.control.filters||{};t.hiddenFilters=t.hiddenFilters||{paths:[]};if(!e.keepPreviousPersonalization){n.annotation.id=u(e.key??"","LineItem")}break;case V.Chart:n.id=m(e.key||"","Chart");n.multiViews=true;break;default:break}}};const J=function(t){return{title:t.label,fragment:t.template,type:t.type,customTabId:h(t.key??""),visible:t.visible,viewType:R.Custom}};const X=function(t,e){return t.visualizations.find(t=>t.type===e)};const Y=function(t,e){if(H(e,B.Multi)){const n=t.getEntityTypeAnnotation(e.annotationPath).annotation;return x(k(n.Text))}return""};const Z=function(t){if(H(t,B.Multi)){return t.annotation&&M(t.annotation,"com.sap.vocabularies.UI.v1.SelectionPresentationVariantType")?`@${t.annotation.SelectionVariant?.fullyQualifiedName.split("@")[1]}`:t.annotationPath}return undefined};const _=function(t){if(!H(t,B.Custom)){return!H(t,B.Combined)&&t.annotation?t.converterContext.getRelativeAnnotationPath(t.annotation.fullyQualifiedName,t.converterContext.getEntityType()):""}return""};const tt=function(t){if(!H(t,B.Custom)){const e=t.converterContext;const n=H(t,B.Multi)?{associatedSelectionVariant:t.selectionVariant,isMacroOrMultipleView:true}:{};const i=I(_(t),e,{...{isCondensedTableLayoutCompliant:true},...n});if(!H(t,B.Combined)&&i.visualizations.length===2&&e.getTemplateType()===E.AnalyticalListPage){const e=N([i],"both",t);if(e){return e}}else if(H(t,B.Combined)){const{primary:n,secondary:i}=t;if(n?.length&&i?.length){const a=N([q(e,n[0],true),q(e,i[0],false)],t.defaultPath,t);if(a){return a}}else if(e.getTemplateType()===E.AnalyticalListPage){throw new Error("SecondaryItems in the Views is not present")}}else if(H(t,B.Multi)){G(i,t)}const a=Q(e,i,t);a.presentation.inMultiView=!!n.isMacroOrMultipleView;return a}else{return J(t)}};const et=function(t,e){let n=[];const i=t.getManifestWrapper();if(e){e.paths.forEach(a=>{if(i.isCombinedViewConfiguration(a)){if(e.paths.length>1){throw new Error("ALP flavor cannot have multiple views")}else{n.push({converterContext:t,primary:a.primary,secondary:a.secondary,defaultPath:a.defaultPath,type:B.Combined})}}else if(i.isCustomViewConfiguration(a)){n.push({key:a.key,label:a.label,template:a.template,type:B.Custom,visible:a.visible})}else{const e=t.getConverterContextFor(a.contextPath||a.entitySet&&`/${a.entitySet}`||t.getContextPath()),i=e.getEntityType();if(i&&e){let t;const o=e.getEntityTypeAnnotation(a.annotationPath);const r=o.annotation;if(r){t=r.term==="com.sap.vocabularies.UI.v1.SelectionVariant"?U(i,e,false):r;n.push({selectionVariant:r.term==="com.sap.vocabularies.UI.v1.SelectionVariant"?r:undefined,converterContext:e,annotation:t,annotationPath:a.annotationPath,keepPreviousPersonalization:a.keepPreviousPersonalization,key:a.key,visible:a.visible,type:B.Multi})}}else{}}})}else{const e=t.getEntityType();if(t.getTemplateType()===E.AnalyticalListPage){n=it(t,n)}else{n.push({annotation:U(e,t,false),converterContext:t,type:B.Default})}}return n.map(t=>tt(t))};const nt=function(t,e){const n=t.getManifestWrapper();const i=n.getViewConfiguration();if(e.length>1&&!at(t)){return{showTabCounts:i?i.showCounts??n.hasMultipleEntitySets():undefined,id:f()}}return undefined};function it(t,e){const n=t.getEntityType();const i=U(n,t,true);let a,o;if(i){e.push({annotation:i,converterContext:t,type:B.Default})}else{a=w(n);o=P(n);if(a&&o){const n=[{annotationPath:"@"+a.term}];const i=[{annotationPath:"@"+o.term}];e.push({converterContext:t,primary:n,secondary:i,defaultPath:"both",type:B.Combined})}else{throw new Error("ALP flavor needs both chart and table to load the application")}}return e}function at(t){return t.getManifestWrapper().hasMultipleVisualizations()||t.getTemplateType()===E.AnalyticalListPage}const ot=function(t){const e=t.getManifestWrapper();return z([],L(e.getHeaderActions(),t).actions)};c.getHeaderActions=ot;const rt=function(t,e){t.forEach(t=>{if(!W(t,R.Custom)&&!W(t,R.Combined)){t.presentation.visualizations.forEach(t=>{if(t.type===V.Chart&&t.filterId!==e){t.filterId=e}})}})};const st=function(t,e){const n=t.getEntityType();const i=t.getContextPath();if(!i){throw new Error("An EntitySet is required to be able to display a ListReport, please adjust your `entitySet` property to point to one.")}const a=t.getManifestWrapper();const o=a.getViewConfiguration();const r=a.hasMultipleEntitySets();const s=et(t,o);const l=$(s);const c=O(s);const u=l.some(t=>t.control.type==="ResponsiveTable");let f="";let h="";const m=y();const v=p(i);const C=d(v);const T=a.getFilterConfiguration();const P=T?.initialLayout!==undefined?T?.initialLayout.toLowerCase():"compact";const w=T?.layout!==undefined?T?.layout.toLowerCase():"compact";const I=T.useSemanticDateRange!==undefined?T.useSemanticDateRange:true;const V=T.showClearButton!==undefined?T.showClearButton:false;const E=lt(s);if(E){h=E.chartId;f=E.tableId}const M=a.useHiddenFilterBar();const z=(a.isFilterBarHidden()||M)&&h==="";const L=D(t,l);const k=L.selectionFields;const x=L.sPropertyInfo;const B=F(l,c,t);const R=nt(t,s);const H=R?undefined:b(n,t);const W=I?j(A(n,t)):{};const U=ot(t);if(r){rt(s,v)}const N=l.map(t=>t.annotation.apiId).concat(c.map(t=>t.apiId));const Q=[...z&&!M?[]:[v],...a.getVariantManagement()!==S.Control?N:[],...R?[R.id]:[]];const K=R&&a.getStickyMultiTabHeaderConfiguration()?R.id:undefined;const q=l.every(t=>t.control.type==="TreeTable"||t.enableAnalytics||t.annotation.collection!==i);return{mainEntitySet:i,mainEntityType:`${i}/`,multiViewsControl:R,stickySubheaderProvider:K,singleTableId:f,singleChartId:h,dynamicListReportId:m,headerActions:U,easyFilterEnabled:!z&&e?.MagicFiltering,showPinnableToggle:u,filterBar:{propertyInfo:x,selectionFields:k,hideBasicSearch:B,showClearButton:V,disableDraftEditStateFilter:q},views:s,filterBarId:z&&!M?"":v,filterConditions:{selectionVariant:H,defaultSemanticDates:W},variantManagement:{id:C,targetControlIds:Q.join(",")},hasMultiVisualizations:at(t),templateType:a.getTemplateType(),useSemanticDateRange:I,filterInitialLayout:P,filterLayout:w,kpiDefinitions:g(t),hideFilterBar:z,useHiddenFilterBar:M}};c.convertPage=st;function lt(t){const e=t.find(t=>(W(t,R.Combined)||W(t,R.SingleTable))&&!!t.tableControlId)?.tableControlId??"",n=t.find(t=>(W(t,R.Combined)||W(t,R.SingleChart))&&!!t.chartControlId)?.chartControlId??"";if(e||n){return{chartId:n,tableId:e}}return undefined}return c},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/converters/templates/ObjectPageConverter", ["sap/fe/base/BindingToolkit","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/objectPage/HeaderAndFooterAction","../../helpers/BindingHelper","../ManifestSettings","../controls/ObjectPage/Avatar","../controls/ObjectPage/HeaderFacet","../controls/ObjectPage/SubSection","../helpers/ConfigurableObject","../helpers/ID"],function(e,t,n,o,i,a,s,r,c,l){"use strict";var u={};var d=l.getSectionID;var f=l.getEditableHeaderSectionID;var v=l.getCustomSectionID;var b=c.insertCustomElements;var p=c.Placement;var g=c.OverrideType;var y=r.createSubSections;var m=r.createCustomSubSections;var A=r.createCustomHeaderFacetSubSections;var h=r.SubSectionType;var S=s.getHeaderFacetsFromManifest;var E=s.getHeaderFacetsFromAnnotations;var T=a.getAvatar;var C=i.VisualizationType;var w=i.TemplateType;var H=o.singletonPathVisitor;var M=o.UI;var F=n.getHiddenHeaderActions;var I=n.getHeaderDefaultActions;var O=n.getFooterDefaultActions;var L=t.removeDuplicateActions;var z=t.prepareMenuActions;var k=t.getVisibilityEnablementMenuActions;var V=t.getMatchingManifestAction;var P=t.getAnnotationMenuActionItems;var x=t.getActionsFromManifest;var j=e.not;var D=e.ifElse;var B=e.getExpressionFromAnnotation;var U=e.equal;var W=e.constant;var N=e.compileExpression;const _=(e,t)=>e.ID?.toString()||e.Label?.toString()||t;function R(e,t){const n=f();const o=e.getEntityType().annotations?.UI?.HeaderFacets;const i=o?y(o,e,true):[];const a=A(e);let s=[];if(a.length>0){let e=0;t.forEach(function(t){while(i.length>e&&i[e].visible==="false"){s.push(i[e]);e++}if(i.length>e&&(t.key===i[e].key||t.key.slice(t.key.lastIndexOf("::")+2)===i[e].key.slice(i[e].key.lastIndexOf("::")+2))){s.push(i[e]);e++}else{a.forEach(function(e){if(t.key===e.key){s.push(e)}})}})}else{s=i}const r={id:n,key:"EditableHeaderContent",title:"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_HEADER_SECTION}",visible:N(M.IsEditable),subSections:s};return r}u.createEditableHeaderSection=R;function q(e){const t=e.getEntityType();const n=t.annotations?.UI?.Facets?.map(t=>J(t,e))||[];return n}function G(e,t){const n=e.getSections();const o=n?.[t];return o?.useSingleTextAreaFieldAsNotes??false}function J(e,t){const n=d(e);const o=_(e,n);const i=B(e.annotations?.UI?.Hidden,[],false,e=>H(e,t.getConvertedTypes(),[]));const a=G(t.getManifestWrapper(),o);const s={id:n,key:o,title:e.Label?N(B(e.Label)):undefined,showTitle:!!e.Label,visible:N(j(U(i,true))),subSections:y([e],t,undefined,a),useSingleTextAreaFieldAsNotes:a};return s}function K(e,t){const n={};Object.keys(e).forEach(o=>{n[o]=Q(e[o],o,t)});return n}function Q(e,t,n){const o=e.id||v(t);let i=e.position;if(!i){i={placement:p.After}}let a;if(!e.subSections){a={[t]:{...e,position:undefined,visible:"true"}}}else{a=e.subSections}const s=m(a,n);const r={id:o,key:t,title:e.title,showTitle:!!e.title,visible:e.visible!==undefined?e.visible:"true",position:i,subSections:s,onSectionLoaded:e.onSectionLoaded};return r}const X=function(e){const t=I(e);const n=e.getManifestWrapper();const o={isNavigable:g.overwrite,enabled:g.overwrite,visible:g.overwrite,defaultValuesExtensionFunction:g.overwrite,command:g.overwrite,position:g.overwrite,menu:g.overwrite};const i=x(n.getHeaderActions(),e,t,undefined,undefined,F(e));const a=P(t);const s=V(a,i.actions);const r=b(a,s,o);let c=b(t,i.actions,o);z(c,r);c=L(c);c=k(c);return{actions:c,commandActions:i.commandActions}};u.getHeaderActions=X;const Y=function(e){const t=e.getManifestWrapper();const n=O(t.getViewLevel(),e);const o=x(t.getFooterActions(),e,n);const i={isNavigable:g.overwrite,enabled:g.overwrite,visible:g.overwrite,defaultValuesExtensionFunction:g.overwrite,command:g.overwrite,position:g.overwrite};const a=b(n,o.actions,i);return{actions:a,commandActions:o.commandActions}};u.getFooterActions=Y;function Z(e){return e?.presentation?.visualizations[0]?e.presentation.visualizations[0]:undefined}function $(e,t){return e.visible==="true"&&e?.presentation?.visualizations&&t?.type==="Table"&&t?.control?.type!=="ResponsiveTable"}function ee(e,t,n,o){if($(t,n)){const i=n.control;t.dataVisualizationOptions??={};if(!(o==="Page"&&e.length>1)){t.dataVisualizationOptions["rowCountMode"]="Auto";i.rowCountMode="Auto"}if(o!=="Tabs"){t.dataVisualizationOptions["useCondensedTableLayout"]=false;i.useCondensedTableLayout=false}}}function te(e,t){const n=e?.content?.length===1?e.content[0]:undefined;if(n?.type===h.DataVisualization){const e=(n.presentation?.visualizations[0]).control;if(e.type!=="ResponsiveTable"){n.dataVisualizationOptions??={};n.dataVisualizationOptions["rowCountMode"]="Auto";e.rowCountMode="Auto";if(t!=="Tabs"){n.dataVisualizationOptions["useCondensedTableLayout"]=false;e.useCondensedTableLayout=false}}}}function ne(e,t,n){let o;const i=t.subSections;if(i.length===1){const t=i[0];switch(t.type){case"DataVisualization":o=Z(t);ee(e,t,o,n);break;case"Mixed":te(t,n);break;default:break}return}oe(i)}function oe(e){let t;e.forEach(e=>{t=e;if(t?.presentation?.visualizations){t?.presentation?.visualizations.forEach(e=>{if(e.type===C.Table){e.control.useCondensedTableLayout=false}})}if(t?.content){t.content.forEach(e=>{e.presentation?.visualizations.forEach(e=>{if(e.type===C.Table){e.control.useCondensedTableLayout=false}})})}})}const ie=function(e){const t=e.getManifestWrapper();const n=b(q(e),K(t.getSections(),e),{title:g.overwrite,visible:g.overwrite,subSections:{actions:g.merge,title:g.overwrite,sideContent:g.overwrite,objectPageLazyLoaderEnabled:g.overwrite}});n.forEach(function(e){ne(n,e,t.getSectionLayout());e.subSections?.forEach(function(e){e.title=e.title==="undefined"?undefined:e.title;if(e.type==="Mixed"){e.content?.forEach(t=>{t.objectPageLazyLoaderEnabled=e.objectPageLazyLoaderEnabled})}if(e.type==="Mixed"&&e.content?.length){const t=e.content.find(e=>e.type===h.Form);if(e.sideContent){if(t){t.sideContent=e.sideContent}else{e.content[0].sideContent=e.sideContent}e.sideContent=undefined}if(t&&e.actions?.length){t.actions=e.actions;e.actions=[]}}})});return n};u.getSections=ie;function ae(e){const t=e.getManifestWrapper();return(e.getEntityType().annotations?.UI?.HeaderFacets||[]).length>0||Object.keys(t.getHeaderFacets()).length>0}function se(e){const t=e.getManifestWrapper();return D(!ae(e),W(false),D(U(t.isHeaderEditable(),false),W(true),j(M.IsEditable)))}const re=function(e){return N(se(e))};u.getShowHeaderContent=re;const ce=function(e){return N(j(se(e)))};u.getExpandedImageVisible=ce;const le=function(e){const t=e.getManifestWrapper();let n;const o=e.getEntityType();const i=b(E(e),S(t.getHeaderFacets()));const a=X(e);const s=Y(e);if(t.isHeaderEditable()&&(o.annotations.UI?.HeaderFacets||o.annotations.UI?.HeaderInfo)){n=R(e,i)}const r=ie(e);return{template:w.ObjectPage,header:{visible:t.getShowObjectPageHeader(),section:n,facets:i,actions:a.actions,showContent:re(e),hasContent:ae(e),avatar:T(e),title:{expandedImageVisible:ce(e)}},sections:r,footerActions:s.actions,headerCommandActions:a.commandActions,footerCommandActions:s.commandActions,showAnchorBar:t.getShowAnchorBar(),useIconTabBar:t.useIconTabBar(),transportSelection:t.getTransportSelection()}};u.convertPage=le;return u},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/definition/FEDefinition", [],function(){var e;(function(){"use strict";var t={42:function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.Placement=t.BaseDefinition=void 0;t.annotation=o;t.configurable=i;let n=t.Placement=function(e){e["After"]="After";e["Before"]="Before";e["End"]="End";return e}({});class r{constructor(e,t){this.annotationPath=e?.getPath();for(const e in this.__configurableProperties){const n=this.__configurableProperties[e];if(n){const r=t[n.aliasFor];if(r!==undefined){this[e]=n.validator(r)}else if(n.defaultValue!==undefined){this[e]=n.defaultValue}}}const n=e?.getTarget();if(n){for(const e in this.__annotationProperties){const t=this.__annotationProperties[e];if(t){const r=n.annotations._annotations?.[t.term];if(r!==undefined&&r!==null){this[e]=r.valueOf()}else if(t.defaultValue!==undefined){this[e]=t.defaultValue}}}}}getConfiguration(){const e={};for(const t in this.__configurableProperties){const n=this.__configurableProperties[t];if(n){e[n.aliasFor]=this[t]}}return e}}t.BaseDefinition=r;function a(e){return e}function i(e={}){return function(t,n,r){const i={name:n,validator:e.validator||a,aliasFor:e.aliasFor||n,defaultValue:r.initializer?.()};const o=t.constructor.prototype;if(!o.__configurableProperties){o.__configurableProperties={}}delete r?.initializer;o.__configurableProperties[n]=i}}function o(e){return function(t,n,r){const a={name:n,term:e.term,defaultValue:r.initializer?.()};const i=t.constructor.prototype;if(!i.__annotationProperties){i.__annotationProperties={}}i.__annotationProperties[n]=a;delete r.initializer;return r}}},156:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=n(890);function a(e,t){if(t){if(t.startsWith("/")){return t}else if(t.startsWith("@")){return e+t}else if(!e.endsWith("/")){return e+"/"+t}else{return e+t}}return e}class i{constructor(e,t,n){this.convertedMetadata=e;this.metaPath=t;this.contextPath=n;this.navigationProperties=[];this.contextNavigationProperties=[];this.absolutePath=a(n,t);this.relativePath=this.absolutePath.replace(n,"");if(this.relativePath.startsWith("/")){this.relativePath=this.relativePath.substring(1)}const i=this.convertedMetadata.resolvePath(this.absolutePath);const o=this.convertedMetadata.resolvePath(n);if(i.target===undefined||i.target===null){throw new Error(`No annotation target found for ${t}`)}this.targetObject=i.target;let s;let u;let l;let c=[];i.objectPath.forEach(e=>{if((0,r.isServiceObject)(e)){switch(e._type){case"NavigationProperty":c.push(e.name);this.navigationProperties.push(e);l=e.targetType;if(u?.navigationPropertyBinding.hasOwnProperty(c.join("/"))){u=u.navigationPropertyBinding[c.join("/")];c=[]}break;case"EntitySet":if(s===undefined){s=e}u=e;l=u.entityType;break;case"EntityType":if(l===undefined){l=e}break;default:break}}});o.objectPath.forEach(e=>{s=this.getResolvedContextPath(e,l,s)});if(s===undefined||l===undefined){throw new Error("MetaPath doesn't contain an entitySet -> Should never happen")}this.serviceObjectPath="/"+s.name;if(this.navigationProperties.length){this.serviceObjectPath+="/"+this.navigationProperties.map(e=>e.name).join("/")}this.rootEntitySet=s;this.currentEntitySet=u;this.currentEntityType=l}getResolvedContextPath(e,t,n){if((0,r.isServiceObject)(e)){switch(e._type){case"NavigationProperty":this.contextNavigationProperties.push(e);break;case"EntitySet":if(this.contextRootEntitySet===undefined){this.contextRootEntitySet=e}if(n===undefined&&e.entityType===t){n=e}break;default:break}}return n}getContextPath(){return this.contextPath}getPath(e){return a(this.absolutePath,e)}getRelativePath(e){return a(this.relativePath,e)}getTarget(){return this.targetObject}getClosestEntitySet(){let e=this.rootEntitySet;for(const t of this.navigationProperties){const n=e.navigationPropertyBinding[t.name];if(n){e=n}}return e}getClosestEntityType(){let e=this.rootEntitySet.entityType;for(const t of this.navigationProperties){e=t.targetType}return e}getContextClosestEntitySet(){let e=this.contextRootEntitySet;if(e===undefined){return e}const t=e;for(const n of this.contextNavigationProperties){if(t.navigationPropertyBinding[n.name]){e=t.navigationPropertyBinding[n.name]}}return e}getNavigationProperties(){return this.navigationProperties}getMetaPathForClosestEntitySet(){return new i(this.convertedMetadata,"",this.getClosestEntitySet().fullyQualifiedName)}getMetaPathForPath(e){try{return new i(this.convertedMetadata,a(this.serviceObjectPath,e),this.contextPath)}catch(e){return undefined}}getMetaPathForObject(e){if((0,r.isAnnotationPath)(e)){return this.getMetaPathForPath(e.value)}else if((0,r.isPathAnnotationExpression)(e)){return this.getMetaPathForPath(e.path)}else{const t=e.fullyQualifiedName.replace(this.rootEntitySet.entityType.fullyQualifiedName,this.contextPath);return new i(this.convertedMetadata,t,this.contextPath)}}getConvertedMetadata(){return this.convertedMetadata}}t["default"]=i},227:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t["default"]=t.FilterField=void 0;var r=n(42);var a=y(n(779));var i=n(890);var o,s,u,l,c,f,p,d,h,m;function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function v(e,t,n){return(t=P(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){var t=b(e,"string");return"symbol"==typeof t?t:t+""}function b(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function F(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer?(Object.defineProperty(e,t,i),null):i}function _(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let I=t.FilterField=(o=(0,r.configurable)(),s=(0,r.configurable)(),u=(0,r.configurable)(),l=(0,r.configurable)(),c=(0,r.configurable)(),f=class e extends r.BaseDefinition{get name(){return this.filterFieldProperty.getTarget().name}get isParameter(){return!!this.filterFieldProperty.getClosestEntityType().annotations.Common?.ResultContext}get label(){return this.filterFieldProperty.getTarget().annotations.Common?.Label?.toString()??this.filterFieldProperty.getTarget().name}constructor(e,t){super(e,t);g(this,"group",p,this);g(this,"groupLabel",d,this);g(this,"visible",h,this);g(this,"required",m,this);this.filterFieldProperty=e}getTarget(){return this.filterFieldProperty.getTarget()}},p=F(f.prototype,"group",[o],{configurable:true,enumerable:true,writable:true,initializer:null}),d=F(f.prototype,"groupLabel",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),h=F(f.prototype,"visible",[u],{configurable:true,enumerable:true,writable:true,initializer:null}),m=F(f.prototype,"required",[l],{configurable:true,enumerable:true,writable:true,initializer:null}),F(f.prototype,"name",[c],Object.getOwnPropertyDescriptor(f.prototype,"name"),f.prototype),f);class T{constructor(e,t,n){this.selectionFields=e;this.filterBarConfiguration=t;this.metaPath=n}isParameterizedEntitySet(){const e=this.metaPath.getTarget();if(e._type==="NavigationProperty"&&e.containsTarget){return this.metaPath.getClosestEntitySet().entityType.annotations.Common?.ResultContext!==undefined}return false}getFilterGroups(){const e=this.metaPath.getClosestEntityType().annotations.UI?.FilterFacets;const t={};if(!e){const e=Object.keys(this.metaPath.getClosestEntityType().annotations.UI??{}).filter(e=>e.startsWith("FieldGroup")).map(e=>this.metaPath.getClosestEntityType().annotations.UI?.[e]);for(const n of e){n.Data.forEach(e=>{switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataField":{const r=e.Value;if((0,i.isPathAnnotationExpression)(r)&&r.$target){t[r.$target.fullyQualifiedName]={group:n.fullyQualifiedName,groupLabel:n.Label?.toString()??n.annotations?.Common?.Label?.toString()??n.qualifier}}break}default:break}})}}else{e.forEach(e=>{const n=e.Target.$target;if((0,i.isAnnotationOfType)(n,"com.sap.vocabularies.UI.v1.FieldGroupType")){n.Data.forEach(n=>{switch(n.$Type){case"com.sap.vocabularies.UI.v1.DataField":{const r=n.Value;if((0,i.isPathAnnotationExpression)(r)&&r.$target){t[r.$target.fullyQualifiedName]={group:e.ID?.toString(),groupLabel:e.Label?.toString()}}break}default:break}})}})}return t}getFilterFields(){const e=this.getFilterGroups();const t={};let n=[];if(this.isParameterizedEntitySet()){const r=this.metaPath.getMetaPathForClosestEntitySet();n=r.getClosestEntityType().entityProperties.map(n=>{const a=r.getMetaPathForPath(n.name);if(a){t[a.getTarget().fullyQualifiedName]=true;return new I(a,{group:e[a.getTarget().fullyQualifiedName]?.group,groupLabel:e[a.getTarget().fullyQualifiedName]?.groupLabel,visible:true,required:true,isParameter:true})}}).filter(e=>!!e)}const r=new a.default(this.metaPath).getRequiredProperties();const o=this.selectionFields.filter(i.isValidPropertyPathExpression).map(n=>{const a=this.metaPath.getMetaPathForPath(n.value);if(a&&!t[a.getTarget().fullyQualifiedName]){t[a.getTarget().fullyQualifiedName]=true;return new I(a,{group:e[a.getTarget().fullyQualifiedName]?.group,groupLabel:e[a.getTarget().fullyQualifiedName]?.groupLabel,visible:true,required:r.includes(a.getTarget())})}}).filter(e=>!!e);const s=new a.default(this.metaPath).getNonFilterableProperties();this.metaPath.getClosestEntityType().entityProperties.forEach(n=>{if(!t[n.fullyQualifiedName]&&!s.includes(n)&&n.targetType===undefined&&n.annotations.UI?.Hidden?.valueOf()!==true){t[n.fullyQualifiedName]=true;o.push(new I(this.metaPath.getMetaPathForPath(n.name),{group:e[n.fullyQualifiedName]?.group,groupLabel:e[n.fullyQualifiedName]?.groupLabel,visible:false}))}});return[...n,...o]}isSearchSupported(){return new a.default(this.metaPath).isSearchAllowed()}}t["default"]=T},465:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t.DefinitionPage=void 0;var r=s(n(227));var a=n(674);var i=n(893);var o=n(526);function s(e){return e&&e.__esModule?e:{default:e}}class u{constructor(e){this.metaPath=e}getMetaPath(){return this.metaPath}getIdentification(){const e=this.metaPath.getClosestEntityType();const t=e.annotations.UI?.Identification;if(t){return new i._Identification(t,this.metaPath)}else{return undefined}}getHeaderInfo(){const e=this.metaPath.getClosestEntityType();const t=e.annotations.UI?.HeaderInfo;if(t){return new a._HeaderInfo(t,this.metaPath)}else{return undefined}}getTableVisualization(){return o._LineItem.fromSPV(this._getTableVisualizationAnnotation(),this.metaPath)}getFilterBarDefinition(e){const t=this.metaPath.getClosestEntityType();let n=t.annotations.UI?.SelectionFields;if(!n){n=Object.assign([],{term:"com.sap.vocabularies.UI.v1.SelectionFields"})}return new r.default(n,e,this.metaPath)}createDefaultTableVisualization(){return o._LineItem.createDefault(this.metaPath)}_getTableVisualizationAnnotation(){const e=this.metaPath.getClosestEntityType();const t=e.annotations.UI?.SelectionPresentationVariant;if(t){if(t.PresentationVariant.Visualizations.find(e=>e.$target?.term==="com.sap.vocabularies.UI.v1.LineItem")){return t}}const n=e.annotations.UI?.PresentationVariant;if(n?.Visualizations){if(n.Visualizations.find(e=>e.$target?.term==="com.sap.vocabularies.UI.v1.LineItem")){return n}}return e.annotations.UI?.LineItem}}t.DefinitionPage=u},16:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});var r={FilterField:true,DefinitionPage:true,_DataField:true,_LineItem:true,DefinitionContext:true,QueryBuilder:true,FORMATTERS_PATH:true,formatters:true};Object.defineProperty(t,"DefinitionContext",{enumerable:true,get:function(){return u.DefinitionContext}});Object.defineProperty(t,"DefinitionPage",{enumerable:true,get:function(){return i.DefinitionPage}});Object.defineProperty(t,"FORMATTERS_PATH",{enumerable:true,get:function(){return c.FORMATTERS_PATH}});Object.defineProperty(t,"FilterField",{enumerable:true,get:function(){return a.FilterField}});Object.defineProperty(t,"QueryBuilder",{enumerable:true,get:function(){return l.QueryBuilder}});Object.defineProperty(t,"_DataField",{enumerable:true,get:function(){return o._DataField}});Object.defineProperty(t,"_LineItem",{enumerable:true,get:function(){return s._LineItem}});Object.defineProperty(t,"formatters",{enumerable:true,get:function(){return c.formatters}});var a=n(227);var i=n(465);var o=n(703);var s=n(526);var u=n(666);var l=n(139);var c=n(507);var f=n(890);Object.keys(f).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(r,e))return;if(e in t&&t[e]===f[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return f[e]}})})},666:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t.DefinitionContext=void 0;var r=i(n(156));var a=n(465);function i(e){return e&&e.__esModule?e:{default:e}}class o{constructor(e){this.convertedMetadata=e}addApplicationManifest(e){this.manifest=e}getEntitySets(){return this.convertedMetadata.entitySets}getEntitySet(e){return this.convertedMetadata.entitySets.by_name(e)}getRootEntitySet(){if(this.manifest){const e=":?query:";const t=(this.manifest["sap.ui5"]?.routing?.routes).find(t=>t.pattern===e);if(t?.target&&this.manifest["sap.ui5"]?.routing?.targets){const e=this.manifest["sap.ui5"].routing.targets[t.target];if(e?.name){const t=e.options;const n=t?.settings;const r=this.convertedMetadata.resolvePath(n?.contextPath??`${n?.entitySet}`);return r.target}}}}getMetaPath(e,t){return new r.default(this.convertedMetadata,e,t)}getPageFor(e){return new a.DefinitionPage(new r.default(this.convertedMetadata,e,e))}getVersion(){const e=this.convertedMetadata.version.match(/^(\d+)\.(\d+)$/);if(!e){throw new Error("Invalid version format")}return{major:parseInt(e[1],10),minor:parseInt(e[2],10)}}}t.DefinitionContext=o},779:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=n(42);class a extends r.BaseDefinition{constructor(e,t={}){super(e,t);this.entitySet=e;this.entitySetConfiguration=t}getRequiredProperties(){const e=this.entitySet.getTarget().annotations.Capabilities?.FilterRestrictions?.RequiredProperties??[];return e.map(e=>e.$target).filter(e=>!!e)}getNonFilterableProperties(){const e=this.entitySet.getTarget().annotations.Capabilities?.FilterRestrictions?.NonFilterableProperties??[];return e.map(e=>e.$target).filter(e=>!!e)}getAllowedFilterExpression(e){const t=this.entitySet.getTarget().annotations.Capabilities?.FilterRestrictions?.FilterExpressionRestrictions??[];const n=t.filter(t=>t.Property?.$target===e);return n.map(e=>e.AllowedExpressions).filter(e=>!!e)}isSearchAllowed(){return!!this.entitySet.getTarget().annotations.Capabilities?.SearchRestrictions?.Searchable}}t["default"]=a},139:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t.QueryBuilder=void 0;var r=n(678);function a(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=o(e,"string");return"symbol"==typeof t?t:t+""}function o(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}class s{constructor(e,t){a(this,"paths",new Set);this.contextMetaPath=e;this.definitionContext=t}addPathsFromExpression(e){(0,r.transformRecursively)(e,"PathInModel",e=>{this.addPath(e.path);return e},true)}addPath(e){this.paths.add(e)}buildQuery(){let e;if(this.definitionContext.getVersion().major>=4){e=this.createQueryV4(this.paths)}else{e=this.createQueryV2(this.paths)}return e}createQueryV2(e){const t=[];const n=new Set;e.forEach(e=>{const r=e.split("/");const a=this.contextMetaPath.getMetaPathForPath(e);const i=r[0];if(i&&this.isNavigationProperty(i,a?.getNavigationProperties()??[])){n.add(i)}else{t.push(e)}});const r={$format:"json",$select:t.join(",")};if(n.size>0){r.$expand=Array.from(n).join(",")}return r}createQueryV4(e){const t={name:"",$select:new Set,$expand:new Map};e.forEach(e=>{const n=e.split("/");const r=this.contextMetaPath.getMetaPathForPath(e);const a=r?.getNavigationProperties()??[];this.processPathRecursiveV4(n,t,a)});const n={$format:"json",$select:Array.from(t.$select).join(",")};if(t.$expand.size>0){n.$expand=Array.from(t.$expand.values()).map(u).join(",")}return n}processPathRecursiveV4(e,t,n){let r;const a=e[0];if(a&&this.isNavigationProperty(a,n)){r=t.$expand.get(a);if(!r){r={name:a,$select:new Set,$expand:new Map}}t.$expand.set(a,r);if(e.length===2){r.$select.add(e[1]??"")}else{this.processPathRecursiveV4(e.slice(1),r,n.slice(1))}}else{t.$select.add(e.join("/"))}}isNavigationProperty(e,t){const n=this.contextMetaPath.getNavigationProperties().length;return t.length>n&&e===t[n]?.name}}t.QueryBuilder=s;function u(e){const t=l(e.$select);const n=Array.from(e.$expand.values()).map(u).join(",");const r=n.length>0?`$expand=${n}`:"";const a=t.length>0&&r.length>0?";":"";return`${e.name}(${t}${a}${r})`}function l(e){return e.size>0?`$select=${Array.from(e).join(",")}`:""}},703:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t._DataField=void 0;var r=n(678);var a=o(n(507));var i=n(890);function o(e){return e&&e.__esModule?e:{default:e}}class s{constructor(e,t){this.dataField=e;this.scopedContextMetaPath=t}getValue(){if(!(0,i.isAnnotationOfType)(this.dataField,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")){return(0,r.getExpressionFromAnnotation)(this.dataField.Value)}return r.unresolvableExpression}getFormattedValue(){if(!(0,i.isAnnotationOfType)(this.dataField,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")){const e=(0,r.getExpressionFromAnnotation)(this.dataField.Value,this.scopedContextMetaPath.getNavigationProperties().map(e=>e.name));return(0,r.transformRecursively)(e,"PathInModel",e=>{const t=this.scopedContextMetaPath.getMetaPathForPath(e.ownPath);if(!t){return r.unresolvableExpression}const n=this.getMeasure(t);if(n){return(0,r.concat)(e," ",n)}const i=this.getDisplayMode(t);if(i!=="Value"){const n=(0,r.getExpressionFromAnnotation)(t.getTarget().annotations.Common?.Text,t.getNavigationProperties().map(e=>e.name));if(i==="Description"){return n}else if(i==="DescriptionValue"){return(0,r.formatResult)([n,e],a.default.formatWithBrackets)}else if(i==="ValueDescription"){return(0,r.formatResult)([e,n],a.default.formatWithBrackets)}}return e})}return r.unresolvableExpression}getMeasure(e){const t=e.getTarget().annotations.Measures;if(t){const e=t.Unit??t.ISOCurrency;if(e){return(0,r.getExpressionFromAnnotation)(e)}}return undefined}getDisplayMode(e){const t=e.getClosestEntityType();const n=e.getTarget().annotations.Common?.Text;const r=n?.annotations?.UI?.TextArrangement??t.annotations.UI?.TextArrangement;let a=n?"DescriptionValue":"Value";if(n&&r!=null){if(r==="UI.TextArrangementType/TextOnly"){a="Description"}else if(r==="UI.TextArrangementType/TextLast"){a="ValueDescription"}else if(r==="UI.TextArrangementType/TextSeparate"){a="Value"}else{a="DescriptionValue"}}return a}getLabel(){let e=this.dataField.Label?.toString()??this.dataField.annotations?.Common?.Label?.toString();if(!e){e=this.dataField.fullyQualifiedName;if((0,i.isAnnotationOfType)(this.dataField,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")){const t=this.dataField.Target.$target;if((0,i.isAnnotationOfType)(t,"com.sap.vocabularies.UI.v1.FieldGroupType")&&t.Label){e=t.Label.toString()}}else{const t=this.dataField.Value;if((0,i.isPathAnnotationExpression)(t)){e=t.$target?.annotations.Common?.Label?.toString()??t.$target?.name??t.path}}}return e}getProperty(){if(!(0,i.isAnnotationOfType)(this.dataField,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")){const e=this.dataField.Value;if(e&&(0,i.isPathAnnotationExpression)(e)){return e.$target}}return undefined}getFullyQualifiedName(){return this.dataField.fullyQualifiedName}}t._DataField=s},674:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t._HeaderInfo=void 0;var r=n(703);class a{constructor(e,t){this.info=e;this.pageMetaPath=t}getFullyQualifiedName(){return this.info.fullyQualifiedName}getTitle(){return this.info.Title?new r._DataField(this.info.Title,this.pageMetaPath):undefined}getDescription(){return this.info.Description?new r._DataField(this.info.Description,this.pageMetaPath):undefined}getTypeName(){return this.info.TypeName.toString()}}t._HeaderInfo=a},893:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t._Identification=void 0;var r=n(703);class a{constructor(e,t){this.id=e;this.pageMetaPath=t}getDataFields(e){return this.id.filter(t=>{if(e?.restrictTypes&&!e.restrictTypes.includes(t.$Type)){return false}switch(t.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataFieldWithActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":return e?.importance===undefined||e.importance.includes(t.annotations?.UI?.Importance?.toString());default:return false}}).map(e=>new r._DataField(e,this.pageMetaPath))}}t._Identification=a},526:function(e,t,n){Object.defineProperty(t,"__esModule",{value:true});t._LineItem=void 0;var r=n(703);class a{constructor(e,t){this.lineItem=e;this.pageMetaPath=t}static createDefault(e){const t=e.getClosestEntityType().entityProperties.map(e=>{if(e.annotations.UI?.DataFieldDefault){return e.annotations.UI.DataFieldDefault}else{return{$Type:"com.sap.vocabularies.UI.v1.DataField",Value:{type:"Path",path:e.name,$target:e}}}});t.term="com.sap.vocabularies.UI.v1.LineItem";return new a(t,e)}static fromSPV(e,t){switch(e?.term){case"com.sap.vocabularies.UI.v1.LineItem":return new a(e,t);case"com.sap.vocabularies.UI.v1.PresentationVariant":return new a(e.Visualizations[0].$target,t);case"com.sap.vocabularies.UI.v1.SelectionPresentationVariant":return new a(e.PresentationVariant.Visualizations[0].$target,t);case undefined:return undefined}}getActions(){return this.lineItem.filter(e=>e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction")}getHeaderActions(){return this.getActions().filter(e=>e.Determining===true)}getDataFields(e){return this.lineItem.filter(t=>{if(e?.restrictTypes&&!e.restrictTypes.includes(t.$Type)){return false}switch(t.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataFieldWithActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":return e?.importance===undefined||e.importance.includes(t.annotations?.UI?.Importance?.toString());default:return false}}).map(e=>new r._DataField(e,this.pageMetaPath))}}t._LineItem=a},678:function(e,t){Object.defineProperty(t,"__esModule",{value:true});t._checkExpressionsAreEqual=a;t.and=s;t.annotationApplyExpression=A;t.annotationIfExpression=w;t.concat=H;t.constant=d;t.equal=j;t.fn=G;t.formatResult=z;t.getExpressionFromAnnotation=O;t.getFiscalType=void 0;t.greaterOrEqual=V;t.greaterThan=L;t.hasUnresolvableExpression=r;t.ifElse=k;t.isComplexTypeExpression=_;t.isConstant=v;t.isEmpty=q;t.isExpression=g;t.isPathInModelExpression=F;t.isTruthy=c;t.isUndefinedExpression=$;t.length=D;t.lessOrEqual=R;t.lessThan=B;t.not=l;t.notEqual=U;t.objectPath=f;t.or=u;t.pathInModel=p;t.ref=m;t.resolveBindingString=h;t.transformRecursively=Y;t.unresolvableExpression=void 0;t.wrapPrimitive=y;const n=t.unresolvableExpression={_type:"Unresolvable"};function r(...e){return e.find(e=>e._type==="Unresolvable")!==undefined}function a(e,t){if(!e||!t){return false}if(e._type!==t._type){return false}switch(e._type){case"Unresolvable":return false;case"Constant":case"EmbeddedBinding":case"EmbeddedExpressionBinding":return e.value===t.value;case"Not":return a(e.operand,t.operand);case"Truthy":return a(e.operand,t.operand);case"Set":return e.operator===t.operator&&e.operands.length===t.operands.length&&e.operands.every(e=>t.operands.some(t=>a(e,t)));case"IfElse":return a(e.condition,t.condition)&&a(e.onTrue,t.onTrue)&&a(e.onFalse,t.onFalse);case"Comparison":return e.operator===t.operator&&a(e.operand1,t.operand1)&&a(e.operand2,t.operand2);case"Concat":{const n=e.expressions;const r=t.expressions;if(n.length!==r.length){return false}return n.every((e,t)=>a(e,r[t]))}case"Length":return a(e.pathInModel,t.pathInModel);case"PathInModel":return e.modelName===t.modelName&&e.path===t.path&&e.targetEntitySet===t.targetEntitySet;case"Formatter":return e.fn===t.fn&&e.parameters.length===t.parameters.length&&e.parameters.every((e,n)=>a(t.parameters[n],e));case"ComplexType":return e.type===t.type&&e.bindingParameters.length===t.bindingParameters.length&&e.bindingParameters.every((e,n)=>a(t.bindingParameters[n],e));case"Function":const n=t;if(e.obj===undefined||n.obj===undefined){return e.obj===n}return e.fn===n.fn&&a(e.obj,n.obj)&&e.parameters.length===n.parameters.length&&e.parameters.every((e,t)=>a(n.parameters[t],e));case"Ref":return e.ref===t.ref}return false}function i(e){return e.operands.reduce((t,n)=>{const r=n._type==="Set"&&n.operator===e.operator?n.operands:[n];r.forEach(e=>{if(t.operands.every(t=>!a(t,e))){t.operands.push(e)}});return t},{_type:"Set",operator:e.operator,operands:[]})}function o(e){const t=e.map(l);return e.some((e,n)=>{for(let r=n+1;r<t.length;r++){if(a(e,t[r])){return true}}return false})}function s(...e){const t=i({_type:"Set",operator:"&&",operands:e.map(y)}).operands;if(r(...t)){return n}let a=false;const s=t.filter(e=>{if(b(e)){a=true}return!v(e)});if(a){return d(false)}else if(s.length===0){const e=t.reduce((e,t)=>e&&P(t),true);return d(e)}else if(s.length===1){return s[0]}else if(o(s)){return d(false)}else{return{_type:"Set",operator:"&&",operands:s}}}function u(...e){const t=i({_type:"Set",operator:"||",operands:e.map(y)}).operands;if(r(...t)){return n}let a=false;const s=t.filter(e=>{if(P(e)){a=true}return!v(e)||e.value});if(a){return d(true)}else if(s.length===0){const e=t.reduce((e,t)=>e&&P(t),true);return d(e)}else if(s.length===1){return s[0]}else if(o(s)){return d(true)}else{return{_type:"Set",operator:"||",operands:s}}}function l(e){e=y(e);if(r(e)){return n}else if(v(e)){return d(!e.value)}else if(typeof e==="object"&&e._type==="Set"&&e.operator==="||"&&e.operands.every(e=>v(e)||E(e))){return s(...e.operands.map(e=>l(e)))}else if(typeof e==="object"&&e._type==="Set"&&e.operator==="&&"&&e.operands.every(e=>v(e)||E(e))){return u(...e.operands.map(e=>l(e)))}else if(E(e)){switch(e.operator){case"!==":return{...e,operator:"==="};case"<":return{...e,operator:">="};case"<=":return{...e,operator:">"};case"===":return{...e,operator:"!=="};case">":return{...e,operator:"<="};case">=":return{...e,operator:"<"}}}else if(e._type==="Not"){return e.operand}return{_type:"Not",operand:e}}function c(e){if(v(e)){return d(!!e.value)}else{return{_type:"Truthy",operand:e}}}function f(e,t,n=[],r){return p(e,t,n,r)}function p(e,t,r=[],a){if(e===undefined){return n}let i;if(a){i=a(e);if(i===undefined){return n}}else{const t=r.concat();t.push(e);i=t.join("/")}return{_type:"PathInModel",modelName:t,path:i,ownPath:e}}function d(e){let t;if(typeof e==="object"&&e!==null&&e!==undefined){if(Array.isArray(e)){t=e.map(y)}else if(x(e)){t=e.valueOf()}else{t=Object.entries(e).reduce((e,[t,n])=>{const r=y(n);if(r._type!=="Constant"||r.value!==undefined){e[t]=r}return e},{})}}else{t=e}return{_type:"Constant",value:t}}function h(e,t){if(e!==undefined&&typeof e==="string"&&e.startsWith("{")){const t=/^{(.*)>(.+)}$/;const n=t.exec(e);if(e.startsWith("{=")){return{_type:"EmbeddedExpressionBinding",value:e}}else if(n){return p(n[2]||"",n[1]||undefined)}else{return{_type:"EmbeddedBinding",value:e}}}else if(t==="boolean"&&typeof e==="string"&&(e==="true"||e==="false")){return d(e==="true")}else if(t==="number"&&typeof e==="string"&&(!isNaN(Number(e))||e==="NaN")){return d(Number(e))}else{return d(e)}}function m(e){return{_type:"Ref",ref:e}}function y(e){if(g(e)){return e}return d(e)}function g(e){return e?._type!==undefined}function v(e){return typeof e!=="object"||e._type==="Constant"}function P(e){return v(e)&&e.value===true}function b(e){return v(e)&&e.value===false}function F(e){return e._type==="PathInModel"}function _(e){return e._type==="ComplexType"}function I(e){return e._type==="Concat"}function T(e){return e._type==="IfElse"}function E(e){return e._type==="Comparison"}function $(e){const t=e;return t._type==="Constant"&&t.value===undefined}function x(e){switch(e.constructor.name){case"String":case"Number":case"Boolean":return true;default:return false}}function S(e){return typeof e==="object"&&!x(e)}function O(e,t=[],r,a){if(e===undefined){return y(r)}e=e.valueOf();if(!S(e)){return d(e)}switch(e.type){case"Path":return p(e.path,undefined,t,a);case"If":return w(e.$If,t,a);case"Not":return l(C(e.$Not,t,a));case"Eq":return j(C(e.$Eq[0],t,a),C(e.$Eq[1],t,a));case"Ne":return U(C(e.$Ne[0],t,a),C(e.$Ne[1],t,a));case"Gt":return L(C(e.$Gt[0],t,a),C(e.$Gt[1],t,a));case"Ge":return V(C(e.$Ge[0],t,a),C(e.$Ge[1],t,a));case"Lt":return B(C(e.$Lt[0],t,a),C(e.$Lt[1],t,a));case"Le":return R(C(e.$Le[0],t,a),C(e.$Le[1],t,a));case"Or":return u(...e.$Or.map(function(e){return C(e,t,a)}));case"And":return s(...e.$And.map(function(e){return C(e,t,a)}));case"Apply":return A(e,t,a);case"Constant":return d(e.value)}return n}function C(e,t=[],n){if(e===null||typeof e!=="object"){return d(e)}else if(e.hasOwnProperty("$Or")){return u(...e.$Or.map(function(e){return C(e,t,n)}))}else if(e.hasOwnProperty("$And")){return s(...e.$And.map(function(e){return C(e,t,n)}))}else if(e.hasOwnProperty("$Not")){return l(C(e.$Not,t,n))}else if(e.hasOwnProperty("$Eq")){return j(C(e.$Eq[0],t,n),C(e.$Eq[1],t,n))}else if(e.hasOwnProperty("$Ne")){return U(C(e.$Ne[0],t,n),C(e.$Ne[1],t,n))}else if(e.hasOwnProperty("$Gt")){return L(C(e.$Gt[0],t,n),C(e.$Gt[1],t,n))}else if(e.hasOwnProperty("$Ge")){return V(C(e.$Ge[0],t,n),C(e.$Ge[1],t,n))}else if(e.hasOwnProperty("$Lt")){return B(C(e.$Lt[0],t,n),C(e.$Lt[1],t,n))}else if(e.hasOwnProperty("$Le")){return R(C(e.$Le[0],t,n),C(e.$Le[1],t,n))}else if(e.hasOwnProperty("$Path")){return p(e.$Path,undefined,t,n)}else if(e.hasOwnProperty("Path")){return p(e.Path,undefined,t,n)}else if(e.hasOwnProperty("$Apply")){return O({type:"Apply",$Function:e.$Function,$Apply:e.$Apply},t,undefined,n)}else if(e.hasOwnProperty("$If")){return O({type:"If",$If:e.$If},t,undefined,n)}else if(e.hasOwnProperty("$EnumMember")){return d(e.$EnumMember)}else if(e.hasOwnProperty("String")){return d(e.String)}else if(e.hasOwnProperty("Bool")){return d(e.Bool)}else if(e.hasOwnProperty("Int")){return d(e.Int)}else if(e.hasOwnProperty("Decimal")){return d(e.Decimal)}else if(e.hasOwnProperty("type")&&e.type==="Null"){return d(null)}return d(false)}function w(e,t=[],n){return k(C(e[0],t,n),C(e[1],t,n),C(e[2],t,n))}function M(e){let t=e;if(e.hasOwnProperty("$Path")){t={type:"Path",path:e.$Path}}else if(e.hasOwnProperty("$If")){t={type:"If",$If:e.$If}}else if(e.hasOwnProperty("$Apply")){t={type:"Apply",$Function:e.$Function,$Apply:e.$Apply}}return t}function A(e,t=[],r){switch(e.$Function){case"odata.concat":return H(...e.$Apply.map(e=>O(M(e),t,undefined,r)));case"odata.uriEncode":const n=O(M(e.$Apply[0]),t,undefined,r);return G("odata.uriEncode",[n,"Edm.String"],undefined,true);case"odata.fillUriTemplate":const a=e.$Apply[0];const i=e.$Apply.slice(1);const o={};i.forEach(e=>{o[e.$Name]=O(M(e.$LabeledElement),t,undefined,r)});return G("odata.fillUriTemplate",[a,o],undefined,true)}return n}function N(e,t,a){const i=y(t);const o=y(a);if(r(i,o)){return n}if(v(i)&&v(o)){switch(e){case"!==":return d(i.value!==o.value);case"===":return d(i.value===o.value);case"<":if(i.value===null||i.value===undefined||o.value===null||o.value===undefined){return d(false)}return d(i.value<o.value);case"<=":if(i.value===null||i.value===undefined||o.value===null||o.value===undefined){return d(false)}return d(i.value<=o.value);case">":if(i.value===null||i.value===undefined||o.value===null||o.value===undefined){return d(false)}return d(i.value>o.value);case">=":if(i.value===null||i.value===undefined||o.value===null||o.value===undefined){return d(false)}return d(i.value>=o.value)}}else{return{_type:"Comparison",operator:e,operand1:i,operand2:o}}}function D(e,t=false){if(e._type==="Unresolvable"){return e}if(!t){return{_type:"Length",pathInModel:e}}return k(j(e,undefined),-1,D(e))}function j(e,t){const i=y(e);const o=y(t);if(r(i,o)){return n}if(a(i,o)){return d(true)}function s(e,t){if(e._type==="Comparison"&&P(t)){return e}else if(e._type==="Comparison"&&b(t)){return l(e)}else if(e._type==="IfElse"&&a(e.onTrue,t)){return u(e.condition,j(e.onFalse,t))}else if(e._type==="IfElse"&&a(e.onFalse,t)){return u(l(e.condition),j(e.onTrue,t))}else if(e._type==="IfElse"&&v(e.onTrue)&&v(e.onFalse)&&v(t)&&!a(e.onTrue,t)&&!a(e.onFalse,t)){return d(false)}return undefined}const c=s(i,o)??s(o,i);return c??N("===",i,o)}function U(e,t){return l(j(e,t))}function V(e,t){return N(">=",e,t)}function L(e,t){return N(">",e,t)}function R(e,t){return N("<=",e,t)}function B(e,t){return N("<",e,t)}function k(e,t,i){let o=y(e);let c=y(t);let f=y(i);if(o._type==="Not"){[c,f]=[f,c];o=l(o)}if(c._type==="IfElse"&&a(o,c.condition)){c=c.onTrue}if(f._type==="IfElse"&&a(o,f.condition)){f=f.onFalse}if(v(o)){return o.value?c:f}if(a(c,f)){return c}if(b(f)){return s(o,c)}if(P(f)){return u(l(o),c)}if(b(c)){return s(l(o),f)}if(P(c)){return u(o,f)}if(r(o,c,f)){return n}if(_(e)||_(t)||_(i)){let n=0;const r=z([e,t,i],"sap.fe.core.formatters.StandardFormatter#ifElse");const a=[];Y(r,"PathInModel",e=>{a.push(e);return p(`$${n++}`,"$")},true);a.unshift(d(JSON.stringify(r)));return z(a,"sap.fe.core.formatters.StandardFormatter#evaluateComplexExpression",undefined,true)}return{_type:"IfElse",condition:o,onTrue:c,onFalse:f}}function Q(e){switch(e._type){case"Constant":case"Formatter":case"ComplexType":return false;case"Set":return e.operands.some(Q);case"PathInModel":return e.modelName===undefined;case"Comparison":return Q(e.operand1)||Q(e.operand2);case"IfElse":return Q(e.condition)||Q(e.onTrue)||Q(e.onFalse);case"Not":case"Truthy":return Q(e.operand);default:return false}}function z(e,t,a,i=false){const o=e.map(y);if(r(...o)){return n}if(a){if(!o.some(Q)){a.keys.forEach(e=>o.push(p(e.name,"")))}}let s="";if(typeof t==="string"){s=t}else{s=t.__functionName}const[u,l]=s.split("#");if(!i&&(o.some(_)||o.some(I)||o.some(T))){let e=0;const t=z(o,s,undefined,true);const n=[];Y(t,"PathInModel",t=>{n.push(t);return p(`$${e++}`,"$")},true);n.unshift(d(JSON.stringify(t)));return z(n,"sap.fe.core.formatters.StandardFormatter#evaluateComplexExpression",undefined,true)}else if(!!l&&l.length>0){o.unshift(d(l))}return{_type:"Formatter",fn:u,parameters:o}}const W=function(e){if(e.annotations.Common?.IsFiscalYear){return"com.sap.vocabularies.Common.v1.IsFiscalYear"}if(e.annotations.Common?.IsFiscalPeriod){return"com.sap.vocabularies.Common.v1.IsFiscalPeriod"}if(e.annotations.Common?.IsFiscalYearPeriod){return"com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"}if(e.annotations.Common?.IsFiscalQuarter){return"com.sap.vocabularies.Common.v1.IsFiscalQuarter"}if(e.annotations.Common?.IsFiscalYearQuarter){return"com.sap.vocabularies.Common.v1.IsFiscalYearQuarter"}if(e.annotations.Common?.IsFiscalWeek){return"com.sap.vocabularies.Common.v1.IsFiscalWeek"}if(e.annotations.Common?.IsFiscalYearWeek){return"com.sap.vocabularies.Common.v1.IsFiscalYearWeek"}if(e.annotations.Common?.IsDayOfFiscalYear){return"com.sap.vocabularies.Common.v1.IsDayOfFiscalYear"}};t.getFiscalType=W;function G(e,t,n,r=false){const a=typeof e==="string"?e:e.__functionName;return{_type:"Function",obj:n!==undefined?y(n):undefined,fn:a,isFormattingFn:r,parameters:t.map(y)}}function q(e){const t=[];Y(e,"PathInModel",e=>{t.push(u(j(e,""),j(e,undefined),j(e,null)));return e});return s(...t)}function H(...e){const t=e.map(y);if(r(...t)){return n}if(t.every(v)){return d(t.reduce((e,t)=>{if(t.value!==undefined&&t.value!==null){return e+t.value.toString()}return e},""))}else if(t.some(_)){let e=0;const n=z(t,"sap.fe.core.formatters.StandardFormatter#concat",undefined,true);const r=[];Y(n,"PathInModel",t=>{r.push(t);return p(`$${e++}`,"$")});r.unshift(d(JSON.stringify(n)));return z(r,"sap.fe.core.formatters.StandardFormatter#evaluateComplexExpression",undefined,true)}return{_type:"Concat",expressions:t}}function Y(e,t,n,r=false){let a=e;switch(a._type){case"Function":case"Formatter":a.parameters=a.parameters.map(e=>Y(e,t,n,r));break;case"Concat":a.expressions=a.expressions.map(e=>Y(e,t,n,r));a=H(...a.expressions);break;case"ComplexType":a.bindingParameters=a.bindingParameters.map(e=>Y(e,t,n,r));break;case"IfElse":{const e=Y(a.onTrue,t,n,r);const i=Y(a.onFalse,t,n,r);let o=a.condition;if(r){o=Y(a.condition,t,n,r)}a=k(o,e,i);break}case"Not":if(r){const e=Y(a.operand,t,n,r);a=l(e)}break;case"Truthy":break;case"Set":if(r){const e=a.operands.map(e=>Y(e,t,n,r));a=a.operator==="||"?u(...e):s(...e)}break;case"Comparison":if(r){const e=Y(a.operand1,t,n,r);const i=Y(a.operand2,t,n,r);a=N(a.operator,e,i)}break;case"Constant":{const e=a.value;if(typeof e==="object"&&e){Object.keys(e).forEach(a=>{e[a]=Y(e[a],t,n,r)})}break}case"Ref":case"Length":case"PathInModel":case"EmbeddedBinding":case"EmbeddedExpressionBinding":case"Unresolvable":break}if(t===a._type){a=n(e)}return a}},507:function(e,t){Object.defineProperty(t,"__esModule",{value:true});t["default"]=t.FORMATTERS_PATH=void 0;t.formatWithBrackets=a;t.formatters=void 0;const n=function(e,...t){if(n.hasOwnProperty(e)){return n[e].apply(this,t)}else{return""}};t.formatters=n;const r=t.FORMATTERS_PATH="sap.fe.definition.formatters";function a(e,t){if(e&&t){return`${e} (${t})`}else{return e||t||""}}a.__functionName=`${r}#formatWithBrackets`;n.formatWithBrackets=a;var i=t["default"]=n},890:function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.isAnnotationOfTerm=r;t.isAnnotationOfType=n;t.isAnnotationPath=g;t.isAnnotationTerm=a;t.isComplexType=o;t.isEntityContainer=u;t.isEntitySet=l;t.isEntityType=f;t.isMultipleNavigationProperty=m;t.isNavigationProperty=d;t.isPathAnnotationExpression=y;t.isProperty=p;t.isPropertyPathExpression=v;t.isServiceObject=i;t.isSingleNavigationProperty=h;t.isSingleton=c;t.isTypeDefinition=s;t.isValidPropertyPathExpression=P;function n(e,t){if(Array.isArray(t)){return t.includes(e?.$Type)}return e?.$Type===t}function r(e,t){return e.term===t}function a(e){return e.hasOwnProperty("term")}function i(e){return e?.hasOwnProperty("_type")??false}function o(e){return e._type==="ComplexType"}function s(e){return e._type==="TypeDefinition"}function u(e){return e._type==="EntityContainer"}function l(e){return e._type==="EntitySet"}function c(e){return e._type==="Singleton"}function f(e){return e._type==="EntityType"}function p(e){return e._type==="Property"}function d(e){return e._type==="NavigationProperty"}function h(e){return d(e)&&!e.isCollection}function m(e){return d(e)&&e.isCollection}function y(e){return e.type==="Path"}function g(e){return e.type=="AnnotationPath"}function v(e){return e?.type==="PropertyPath"}function P(e){return e.type==="PropertyPath"&&!!e.$target}}};var n={};function r(e){var a=n[e];if(a!==undefined){return a.exports}var i=n[e]={exports:{}};t[e](i,i.exports,r);return i.exports}var a=r(16);e=a})();return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/formatters/CollaborationFormatter", ["sap/base/util/ObjectPath","sap/fe/core/controllerextensions/collaboration/CollaborationCommon","sap/ui/core/Lib"],function(t,o,e){"use strict";var n={};var r=o.getActivityKeyFromPath;const a=function(t){if(a.hasOwnProperty(t)){for(var o=arguments.length,e=new Array(o>1?o-1:0),n=1;n<o;n++){e[n-1]=arguments[n]}return a[t].apply(this,e)}else{return""}};const i=function(t){return!!c(t,this)};i.__functionName="sap.fe.core.formatters.CollaborationFormatter#hasCollaborationActivity";n.hasCollaborationActivity=i;const l=function(t){const o=c(t,this);return o?.initials};l.__functionName="sap.fe.core.formatters.CollaborationFormatter#getCollaborationActivityInitials";n.getCollaborationActivityInitials=l;const s=function(t){const o=c(t,this);return o?.color};s.__functionName="sap.fe.core.formatters.CollaborationFormatter#getCollaborationActivityColor";n.getCollaborationActivityColor=s;function c(t,o){const e=o?.getBindingContext()?.getPath();if(!e){return undefined}const n=r(e);if(t&&t.length>0){return t.find(t=>t.key===n)}else{return undefined}}const f=function(){const t=arguments.length<=0?undefined:arguments[0];const o=e.getResourceBundleFor("sap.fe.core");const n=[];for(let t=1;t<arguments.length;t++){n.push(t<0||arguments.length<=t?undefined:arguments[t])}return o.getText(t,n)};f.__functionName="sap.fe.core.formatters.CollaborationFormatter#getFormattedText";n.getFormattedText=f;a.hasCollaborationActivity=i;a.getCollaborationActivityInitials=l;a.getCollaborationActivityColor=s;a.getFormattedText=f;t.set("sap.fe.core.formatters.CollaborationFormatter",a);return a},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/formatters/CriticalityFormatter", ["sap/base/util/ObjectPath"],function(e){"use strict";const t=e=>{if(e){switch(e){case"UI.CriticalityType/VeryNegative":case-1:case"-1":return"UI.CriticalityType/VeryNegative";case"UI.CriticalityType/Neutral":case 0:case"0":return"UI.CriticalityType/Neutral";case"UI.CriticalityType/Negative":case 1:case"1":return"UI.CriticalityType/Negative";case"UI.CriticalityType/Critical":case 2:case"2":return"UI.CriticalityType/Critical";case"UI.CriticalityType/Positive":case 3:case"3":return"UI.CriticalityType/Positive";case"UI.CriticalityType/VeryPositive":case 4:case"4":return"UI.CriticalityType/VeryPositive";case"UI.CriticalityType/Information":case 5:case"5":return"UI.CriticalityType/Information";default:return undefined}}return undefined};t.__functionName="sap.fe.core.formatters.CriticalityFormatter#getCriticality";const i=function(e){if(i.hasOwnProperty(e)){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++){r[a-1]=arguments[a]}return i[e].apply(this,r)}else{return""}};i.getCriticality=t;e.set("sap.fe.core.formatters.CriticalityFormatter",i);return i},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/formatters/FPMFormatter", ["sap/base/util/ObjectPath","sap/fe/core/helpers/FPMHelper"],function(e,t){"use strict";const o=async function(e,o,r){const n=o.split(".");const s=n.pop();const a=n.join("/");return t.loadModuleAndCallMethod(a,s,e,this.getBindingContext(),r||[])};o.__functionName="sap.fe.core.formatters.FPMFormatter#customBooleanPropertyCheck";const r=function(e){if(r.hasOwnProperty(e)){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++){o[n-1]=arguments[n]}return r[e].apply(this,o)}else{return""}};r.customBooleanPropertyCheck=o;e.set("sap.fe.core.formatters.FPMFormatter",r);return r},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/formatters/FiscalFormat", ["sap/base/i18n/Localization","sap/ui/core/Locale","sap/ui/core/LocaleData"],function(e,t,r){"use strict";var a;var s={};let n=function(){function a(a){const s=new t(e.getLanguage());const n=new r(s);let o=a.format;if(a.format.length>4){o="yM"}else if(a.format==="PPP"){o="M"}let i=n.getCustomDateTimePattern(o,a.calendarType);i=i.replace(/([\u4e00-\u9faf\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uffef])+/gi,"");if(a.format.length>4){i=i.replace(/y+/i,a.format.slice(0,a.format.lastIndexOf("Y")+1));i=i.replace(/m+/i,a.format.slice(a.format.lastIndexOf("Y")+1))}else if(a.format==="PPP"){i="PPP"}const f=this.parseCalendarDatePattern(i);this.pattern=f.length>1?i:undefined;this._setFormatRegex(f);this._setParseRegex(f);this._setValidationRegex(f)}s=a;a.getDateInstance=function e(t){return new a(t)};var n=a.prototype;n.getPattern=function e(){return this.pattern};n.format=function e(t){if(t==null){return""}if(typeof t!=="string"){return t}return t.replace(this.formatRegExPattern,this.formatRegExGroups)};n.parse=function e(t){if(!t){return""}return t.replace(this.parseRegExPattern,this.parseRegExReplacer)};n.validate=function e(t){return this.validationRegExPattern.test(t)};n.parseCalendarDatePattern=function e(t){const r=[];let s,n={digits:0,value:"",symbol:""};for(const e of t){if(s!==e){n={digits:0,value:"",symbol:""}}else{n.digits+=1;continue}if(typeof a.symbols[e]==="undefined"){n.value=e}else{n.symbol=e;n.digits=1}s=e;r.push(n)}return r};n._setFormatRegex=function e(t){const r=[],s=[];let n,o,i,f;for(let e=0;e<t.length;e++){n=t[e];o=n.symbol;i=a.symbols[o].format;if(o===""){s[e]=n.value}else if(o.toLocaleLowerCase()==="y"){r.unshift("("+i.source+")");s[e]="$"+1}else{r.push("("+i.source+")");f=t.some(function(e){return e.symbol.toLowerCase()==="y"});s[e]=f?"$"+2:"$"+1}}this.formatRegExPattern=new RegExp(r.join(""));this.formatRegExGroups=s.join("")};n._setParseRegex=function e(t){const r=[],s={};let n,o,i,f=0;for(const e of t){n=e.symbol;if(n===""){r.push("\\D+?")}else{o=a.symbols[n].parse;r.push("("+o.source+")");i=++f;s[i]=e}}this.parseRegExPattern=new RegExp("^"+r.join("")+"$");this.parseRegExReplacer=this.getRegExReplacer(s)};n.getRegExReplacer=function e(t){return function(){const e=[];let r,a;for(var s=arguments.length,n=new Array(s),i=0;i<s;i++){n[i]=arguments[i]}for(const s in t){r=t[s];a=n[parseInt(s,10)];if(a.length<r.digits){if(r.symbol.toLowerCase()==="y"){a=o(a)}else{a=a.padStart(r.digits,"0")}}if(r.symbol.toLowerCase()==="y"){e.unshift(a)}else{e.push(a)}}return e.join("")}};n._setValidationRegex=function e(t){const r=[];let s,n;for(const e of t){s=e.symbol;n=a.symbols[s].format;if(s===""){continue}else if(s.toLowerCase()==="y"){r.unshift(n.source)}else{r.push(n.source)}}this.validationRegExPattern=new RegExp("^("+r.join(")(")+")$")};return a}();a=n;s=n;n.regexFormatPatterns={year:/[1-9]\d{3}/,period:/\d{3}/,quarter:/[1-4]/,week:/0[1-9]|[1-4]\d|5[0-3]/,day:/371|370|3[0-6]\d|[1-2]\d{2}|[1-9]\d|[1-9]/};n.regexParsePatterns={year:/\d{1,4}/,period:/\d{1,3}/,quarter:/[1-4]/,week:/\d{1,2}/,day:/[1-9]/};n.symbols={"":{format:/ /,parse:/ /},y:{format:a.regexFormatPatterns.year,parse:a.regexParsePatterns.year},Y:{format:a.regexFormatPatterns.year,parse:a.regexParsePatterns.year},P:{format:a.regexFormatPatterns.period,parse:a.regexParsePatterns.period},W:{format:a.regexFormatPatterns.week,parse:a.regexParsePatterns.week},d:{format:a.regexFormatPatterns.day,parse:a.regexParsePatterns.day},Q:{format:a.regexFormatPatterns.quarter,parse:a.regexParsePatterns.quarter},q:{format:a.regexFormatPatterns.quarter,parse:a.regexParsePatterns.quarter}};function o(e){let t=Number.parseInt(e,10);const r=(new Date).getUTCFullYear(),a=Math.floor(r/100),s=a*100+t-r;if(e.length===3){t+=Math.floor((a-1)/10)*1e3}else if(s<-70){t+=(a+1)*100}else if(s<30){t+=a*100}else{t+=(a-1)*100}return t}return s},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/formatters/KPIFormatter", ["sap/base/util/ObjectPath","sap/ui/core/Lib"],function(e,t){"use strict";const r=function(e){if(e){const t=e.split(" ");let r;if(t.length===1){r=t[0].substring(0,3).toUpperCase()}else if(t.length===2){r=(t[0].substring(0,1)+t[1].substring(0,1)).toUpperCase()}else{r=(t[0].substring(0,1)+t[1].substring(0,1)+t[2].substring(0,1)).toUpperCase()}return r}else{return""}};r.__functionName="sap.fe.core.formatters.KPIFormatter#labelFormat";const s=function(e,r,s,o,n){const a=t.getResourceBundleFor("sap.fe.core");const i=o?`C_KPI_TOOLTIP_${o.toUpperCase()}`:"C_KPI_TOOLTIP_NONE";let u;if(n==="true"){if(!s){u=a.getText("C_KPI_TOOLTIP_AMOUNT_MULTIUNIT")}else{u=`${r} ${s}`}}else{u=r}return a.getText(i,[e,u])};s.__functionName="sap.fe.core.formatters.KPIFormatter#tooltipFormat";const o=function(e){if(o.hasOwnProperty(e)){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++){r[s-1]=arguments[s]}return o[e].apply(this,r)}else{return""}};o.labelFormat=r;o.tooltipFormat=s;e.set("sap.fe.core.formatters.KPIFormatter",o);return o},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/formatters/StandardFormatter", ["sap/base/strings/formatMessage","sap/base/util/ObjectPath","sap/fe/base/BindingToolkit","sap/fe/core/controls/Any"],function(t,e,r,n){"use strict";var a=r.transformRecursively;var o=r.constant;var s=r.compileExpression;const i=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++){r[n-1]=arguments[n]}const i=JSON.parse(t);a(i,"PathInModel",t=>{if(t.modelName==="$"){return o(r[parseInt(t.path.substring(1),10)])}return t},true);a(i,"ComplexType",t=>{const e=s(t);if(e){return o(f(e,this))}return o(e)});const c=s(i);return f(c,this)};const f=function(t,e){const r=new n({anyText:t});r.setModel(e.getModel());r.setBindingContext(e.getBindingContext());return r.getAnyText()};i.__functionName="sap.fe.core.formatters.StandardFormatter#evaluateComplexExpression";const c=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++){e[r]=arguments[r]}return e.join("")};c.__functionName="sap.fe.core.formatters.StandardFormatter#concat";const u=function(t,e,r){return t?e:r};u.__functionName="sap.fe.core.formatters.StandardFormatter#ifElse";const l=function(t){if(t===undefined||t===null||t==="undefined"||t==="null"){return[]}return[t]};l.__functionName="sap.fe.core.formatters.StandardFormatter#asArray";const d=function(t){if(d.hasOwnProperty(t)){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++){r[n-1]=arguments[n]}return d[t].apply(this,r)}else{return""}};const m=function(){return null};m.__functionName="sap.fe.core.formatters.StandardFormatter#loadProperties";const p=function(e,r,n){return n===1?e:t(r,[n])};p.__functionName="sap.fe.core.formatters.StandardFormatter#formatPluralMessageConditionally";d.evaluateComplexExpression=i;d.concat=c;d.ifElse=u;d.asArray=l;d.loadProperties=m;d.formatPluralMessageConditionally=p;e.set("sap.fe.core.formatters.StandardFormatter",d);return d},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/formatters/ValueFormatter", ["sap/base/Log","sap/base/strings/whitespaceReplacer","sap/base/util/ObjectPath","sap/fe/core/templating/SemanticObjectHelper","sap/ui/core/Lib","sap/ui/core/date/UI5Date","sap/ui/core/format/DateFormat","sap/ui/core/format/NumberFormat"],function(e,t,a,r,i,o,s,n){"use strict";var c={};var f=r.getReachableSemanticObjectsSettings;const l=function(e){if(l.hasOwnProperty(e)){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++){a[r-1]=arguments[r]}return l[e].apply(this,a)}else{return""}};const m=(e,t)=>{if(e&&t){const a=i.getResourceBundleFor("sap.fe.core");return a.getText("C_FORMAT_FOR_TEXT_ARRANGEMENT",[e,t])}else{return e||t||""}};m.__functionName="sap.fe.core.formatters.ValueFormatter#formatWithBrackets";const u=(e,a)=>a?m(t(e),t(a)):t(e);u.__functionName="sap.fe.core.formatters.ValueFormatter#formatTitle";const p=e=>e!==null&&e!==undefined?`${e} %`:"";p.__functionName="sap.fe.core.formatters.ValueFormatter#formatWithPercentage";const y=(e,t,a)=>{let r;if(e===undefined){return"0"}const i=typeof e==="string"?parseFloat(e):e;const o=typeof t==="string"?parseFloat(t):t;if(a==="%"){if(i>100){r="100"}else if(i<=0){r="0"}else{r=typeof e==="string"?e:e?.toString()}}else if(i>o){r="100"}else if(i<=0){r="0"}else{r=i&&o?(i/o*100).toString():"0"}return r};y.__functionName="sap.fe.core.formatters.ValueFormatter#computePercentage";const g=e=>{let t;if(e==="UI.CriticalityType/Negative"||e==="1"||e===1){t="Error"}else if(e==="UI.CriticalityType/Critical"||e==="2"||e===2){t="Warning"}else if(e==="UI.CriticalityType/Positive"||e==="3"||e===3){t="Success"}else if(e==="UI.CriticalityType/Information"||e==="5"||e===5){t="Information"}else{t="None"}return t};g.__functionName="sap.fe.core.formatters.ValueFormatter#formatCriticalityValueState";c.formatCriticalityValueState=g;const _=e=>{let t;if(e==="UI.CriticalityType/Negative"||e==="1"||e===1){t="Reject"}else if(e==="UI.CriticalityType/Positive"||e==="3"||e===3){t="Accept"}else{t="Default"}return t};_.__functionName="sap.fe.core.formatters.ValueFormatter#formatCriticalityButtonType";c.formatCriticalityButtonType=_;const C=e=>{let t;if(e==="UI.CriticalityType/Negative"||e==="1"||e===1){t="Error"}else if(e==="UI.CriticalityType/Critical"||e==="2"||e===2){t="Critical"}else if(e==="UI.CriticalityType/Positive"||e==="3"||e===3){t="Good"}else{t="Neutral"}return t};C.__functionName="sap.fe.core.formatters.ValueFormatter#formatCriticalityColorMicroChart";c.formatCriticalityColorMicroChart=C;const d=(e,t,a,r,o)=>{if(e&&t&&a){const c=a.split("-");const f=`${c[1]===undefined?a:c[1]}-narrow`;const l=s.getDateInstance();const m=l.oLocaleData.mData;const u=i.getResourceBundleFor("sap.fe.macros");let p=a;if(m?.dateFields[f]?.displayName){p=m.dateFields[f].displayName}else if(m?.units?.short[a]?.displayName){p=m.units.short[a].displayName}let y;if(r){y=n.getCurrencyInstance({customCurrencies:o,showMeasure:false})}else{y=n.getUnitInstance({customUnits:o,showMeasure:false})}const g=y.format(+e,p);const _=y.format(+t,p);return u.getText("T_COMMON_PROGRESS_INDICATOR_DISPLAY_VALUE_WITH_UOM",[g,_,p])}};d.__functionName="sap.fe.core.formatters.ValueFormatter#formatProgressIndicatorText";c.formatProgressIndicatorText=d;const h=e=>e===null||e===undefined?"":t(e+"");h.__functionName="sap.fe.core.formatters.ValueFormatter#formatToKeepWhitespace";c.formatToKeepWhitespace=h;function T(t){if(t){const a=new Date(t);if(!isNaN(Date.parse(a))){return o.getInstance(t)}else{e.warning("Warning: Valid date format has to be sent to retrieve UI5 date instance")}}return null}T.__functionName="sap.fe.core.formatters.ValueFormatter#provideDateInstance";const N=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++){t[a]=arguments[a]}const r=t[0];const i=[];for(let e=1;e<t.length;e++){if(t[e]){i.push(t[e])}}if(i.length>0){return f(r,{semanticObjectsList:i,semanticObjectsExpressionList:[],qualifierMap:{}}).hasReachableStaticSemanticObject}return undefined};N.__functionName="sap.fe.core.formatters.ValueFormatter#hasSemanticObjects";c.hasSemanticObjects=N;l.hasSemanticObjects=N;l.formatWithBrackets=m;l.formatTitle=u;l.provideDateInstance=T;l.formatWithPercentage=p;l.computePercentage=y;l.formatCriticalityValueState=g;l.formatCriticalityButtonType=_;l.formatCriticalityColorMicroChart=C;l.formatProgressIndicatorText=d;l.formatToKeepWhitespace=h;a.set("sap.fe.core.formatters.ValueFormatter",l);return l},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/fpm/Component", ["sap/fe/base/ClassSupport","sap/fe/core/TemplateComponent"],function(e,t){"use strict";var r,i,n,a,o,l,u,p,c,s,f;var b=e.property;var m=e.defineUI5Class;function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function y(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,w(e,t)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function d(e,t,r,i,n){var a={};return Object.keys(i).forEach(function(e){a[e]=i[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}function g(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let z=(r=m("sap.fe.core.fpm.Component",{manifest:"json"}),i=b({type:"string"}),n=b({type:"string"}),a=b({type:"string"}),o=b({type:"any"}),r(l=(u=function(e){function t(t){var r;if(t.viewType==="JSX"){t._jsxViewName=t.viewName;t.viewName="module:sap/fe/base/jsx-runtime/ViewLoader";delete t.cache}r=e.call(this,t)||this;v(r,"viewName",p,r);v(r,"controllerName",c,r);v(r,"_jsxViewName",s,r);v(r,"viewContent",f,r);return r}y(t,e);var r=t.prototype;r.getAppComponent=function e(){return this.oAppComponent};return t}(t),p=d(u.prototype,"viewName",[i],{configurable:true,enumerable:true,writable:true,initializer:null}),c=d(u.prototype,"controllerName",[n],{configurable:true,enumerable:true,writable:true,initializer:null}),s=d(u.prototype,"_jsxViewName",[a],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),f=d(u.prototype,"viewContent",[o],{configurable:true,enumerable:true,writable:true,initializer:null}),u))||l);return z},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/AdaptiveCardExpressionCompiler", ["sap/base/Log","sap/fe/base/BindingToolkit"],function(e,t){"use strict";var r={};var n=t.wrapPrimitive;var o=t.isPathInModelExpression;var s=t.isConstant;var a=t.isBindingToolkitExpression;var i=t.escapeXmlAttribute;const c="$";const p={"||":"or","&&":"and"};const u=function(e){return!s(e)&&!o(e)&&a(e)&&e._type!=="IfElse"&&e._type!=="Comparison"&&e._type!=="Not"};function l(e,t){let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(t){if(r){return`(${e})`}else{return e}}else{return`${c}{${e}}`}}function d(t,r){function n(e){const t=m(e,r,true)??"undefined";return l(t,true,u(e))}const{operand1:o,operand2:s,operator:a}=t;let i;switch(a){case"===":i=`equals(${n(o)},${n(s)})`;break;case"!==":i=`not(equals(${n(o)},${n(s)}))`;break;case">=":i=`greaterOrEquals(${n(t.operand1)},${n(s)})`;break;case">":i=`greater(${n(o)},${n(s)})`;break;case"<=":i=`lessOrEquals(${n(o)},${n(s)})`;break;case"<":i=`less(${n(o)},${n(s)})`;break;default:e.warning(`Adaptive card expression compiler: ${a} not supported.`)}return`${i}`}function f(e,t){if(e.value===null||e.value===undefined){return e.value}if(typeof e.value==="object"){throw Error(`${e.toString()} : object as value not supported.`)}if(t){switch(typeof e.value){case"number":case"bigint":case"boolean":return e.value.toString();case"string":return`'${i(e.value.toString())}'`;default:return""}}else{return e.value.toString()}}r.compileConstant=f;function $(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";const r=m(e,t);let n=h(e);if(t&&n.length>0){n=n.map(e=>`${t.replaceAll("/",".")}.${e}`)}return{pathsToQuery:n,compiledExpression:r}}r.getAdaptiveCompilerResult=$;function m(t){let r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";let o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let s;try{const e=n(t);switch(e._type){case"Unresolvable":s=undefined;break;case"Constant":s=f(e,o);break;case"PathInModel":s=g(e,r,o);break;case"Comparison":{const t=d(e,r);s=l(t,o);break}case"IfElse":{const t=m(e.condition,r,true);const n=m(e.onTrue,r,true);const a=m(e.onFalse,r,true);const i=`if(${t},${n},${a})`;s=l(i,o);break}case"Set":{const t=e.operands.map(e=>m(e,r,true));const n=p[e.operator];const a=`${n}(${t.join(",")})`;s=l(a,o);break}case"Not":{const t=`not(${m(e.operand,r,true)})`;s=l(t,o);break}case"Truthy":{const t=`not(not(${m(e.operand,r,true)}))`;s=l(t,o);break}case"Ref":case"Function":case"EmbeddedExpressionBinding":case"EmbeddedBinding":case"Concat":case"Length":case"Formatter":case"ComplexType":default:throw Error(`${e._type} : expression type is not supported.`)}}catch(t){const r=t instanceof Error?t.message:String(t);e.error(`Adaptive card expression compiler : ${r}`)}return s}r.compileToAdaptiveExpression=m;function b(e,t){const{modelName:r,path:n}=e;if(r){throw Error(`${r}>${n} : path in model not supported.`)}const o=t?`${t}.`:t;const s=`${o}${n}`;return s.replace("/",".")}function g(e,t,r){if(e.type||e.parameters||e.targetType||e.formatOptions||e.constraints){throw Error(`${e.toString()} : complex binding not supported.`)}else if(r){return`${b(e,t)}`}else{return`${c}{${b(e,t)}}`}}function h(t){let r=[];try{const e=n(t);switch(e._type){case"Unresolvable":throw Error(`${e._type} : expression type is not supported.`);case"Constant":break;case"PathInModel":r=[...r,y(e)];break;case"Comparison":{r=[...r,...E(e)];break}case"IfElse":{const t=h(e.condition);const n=h(e.onTrue);const o=h(e.onFalse);r=[...r,...t,...n,...o];break}case"Set":{const t=e.operands.reduce((e,t)=>[...e,...h(t)],[]);r=[...r,...t];break}case"Not":{const t=h(e.operand);r=[...r,...t];break}case"Truthy":{const t=h(e.operand);r=[...r,...t];break}case"Ref":case"Function":case"EmbeddedExpressionBinding":case"EmbeddedBinding":case"Concat":case"Length":case"Formatter":case"ComplexType":default:throw Error(`${e._type} : expression type is not supported.`)}}catch(t){const r=t instanceof Error?t.message:String(t);e.error(`Adaptive card expression compiler : paths in expression : ${r}`)}r=Array.from(new Set(r));return r}r.getPropertyPathsInExpression=h;function y(e){if(e.type||e.parameters||e.targetType||e.formatOptions||e.constraints){throw Error(`${e.toString()} : complex binding not supported.`)}const{modelName:t,path:r}=e;if(t){throw Error(`${t}>${r} : path in model not supported.`)}return r.replaceAll("/",".")}function E(e){const{operand1:t,operand2:r}=e;return[...h(t),...h(r)]}return r},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/AppStartupHelper", ["sap/ui/model/Filter","sap/ui/model/FilterOperator","../converters/MetaModelConverter","./ModelHelper","./SemanticKeyHelper"],function(e,t,n,a,s){"use strict";var r=n.getInvolvedDataModelObjects;const o={_getKeysFromStartupParams:function(e,t){let n=true;const a=e.map(e=>{if(t?.[e]&&t[e].length===1){return{name:e,value:t[e][0]}}else{n=false;return{name:e,value:""}}});return n?a:undefined},_createFilterFromKeys:function(n,s,r){const o=a.isFilteringCaseSensitive(r);let i=false;const c=n.map(n=>{if(n.name==="IsActiveEntity"){i=true}return new e({path:n.name,operator:t.EQ,value1:n.value,caseSensitive:o})});if(s&&!i){const t=new e({filters:[new e("IsActiveEntity","EQ",false),new e("SiblingEntity/IsActiveEntity","EQ",null)],and:false});c.push(t)}return new e(c,true)},_sanitizeKeys:function(e,t){e.forEach(e=>{const n=t[e.name].$Type;switch(n){case"Edm.Boolean":if(e.value!=="true"&&e.value!=="false"){e.value=e.value.trim().length?"true":"false"}break;case"Edm.Guid":{const t=/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}/.exec(e.value);e.value=t?t[0]:e.value;break}default:}})},_requestObjectsFromParameters:async function(e,t){const n=e.map(async e=>{const n=t.getMetaModel().getObject(`${e.contextPath}/`);if(e.technicalKeys){this._sanitizeKeys(e.technicalKeys,n);const a=`${e.contextPath}(${s.getPathContent(e.technicalKeys,n)})`;const r=t.bindContext(a).getBoundContext();return Promise.resolve([r])}else{const a=e.semanticKeys??[];this._sanitizeKeys(a,n);const s=this._createFilterFromKeys(a,e.draftMode,t.getMetaModel());const r=t.bindList(e.contextPath,undefined,undefined,s,{$select:a.map(e=>e.name).join(",")});return r.requestContexts(0,2)}});return Promise.all(n)},_getReachablePageInfoFromRoute:function(e,t,n,a){let s=e.pattern.replace(":?query:","");s=s.replace(/\/$/,"");if(!s||!s.endsWith(")")){return undefined}s=s.replace(/\(\{[^}]*\}\)/g,"(#)");const o=Array.isArray(e.target)?e.target[e.target.length-1]:e.target;const i=t?.targets?.[o];const c=s.split("/");const l=c.length-1;if(l!==0&&i?.options?.settings?.allowDeepLinking!==true){return undefined}let u="";if(i?.options?.settings?.entitySet){u=`/${i.options.settings.entitySet}`}else if(i?.options?.settings?.contextPath){const e=a.createBindingContext(i.options.settings.contextPath);const t=r(e);if(t.targetEntitySet){u=`/${t.targetEntitySet.name}`}}if(!u){return undefined}const f=u&&a.getObject(`/$EntityContainer${u}/`);if(!f){return undefined}let g=a.getObject(`/$EntityContainer${u}/@com.sap.vocabularies.Common.v1.SemanticKey`)?.map(e=>e.$PropertyPath);const p=f["$Key"];if(l===0&&g&&g.length===p.length&&g.every(e=>p.includes(e))){g=undefined}const d=g?this._getKeysFromStartupParams(g,n):undefined;const h=!d&&l===0?this._getKeysFromStartupParams(p,n):undefined;if(d===undefined&&h===undefined){return undefined}const m=a.getObject(`/$EntityContainer${u}@com.sap.vocabularies.Common.v1.DraftRoot`)||a.getObject(`/$EntityContainer${u}@com.sap.vocabularies.Common.v1.DraftNode`)?true:false;return{pattern:s,contextPath:u,draftMode:m,technicalKeys:h,semanticKeys:d,target:o,pageLevel:l}},_getReachablePages:function(e,t,n){const a=e?.routes??[];const s={};a.forEach(a=>{const r=this._getReachablePageInfoFromRoute(a,e,t,n);if(r){if(!s[r.pageLevel]){s[r.pageLevel]=[]}s[r.pageLevel].push(r)}});const r=[];let o=0;while(s[o]){r.push(s[o]);o++}return r},_getStartupPagesFromStartupParams:function(e,t,n){const a=this._getReachablePages(e,t,n);if(a.length===0){return[]}let s=[];const r=[];function o(e){const t=a[e];const n=r.length?r[r.length-1]:undefined;if(t){t.forEach(function(t){if(!n||t.pattern.indexOf(n.pattern)===0){r.push(t);o(e+1);r.pop()}})}if(r.length>s.length){s=r.slice()}}o(0);return s},_getDeepLinkObject:function(e,t){if(t.length===1){return{context:t[0]}}else if(t.length>1){let n=e[e.length-1].pattern;t.forEach(function(e){n=n.replace("(#)",`(${e.getPath().split("(")[1]}`)});return{hash:n}}else{return{}}},getDeepLinkStartupHash:async function(e,t,n){await n.getMetaModel().requestObject("/$EntityContainer/");const a=this._getStartupPagesFromStartupParams(e,t,n.getMetaModel());const s=await this._requestObjectsFromParameters(a,n);if(s.length){const e=[];s.forEach(function(t){if(t.length===1){e.push(t[0])}});return e.length===s.length?this._getDeepLinkObject(a,e):{}}else{return{}}},getCreateStartupHash:async function(e,t,n,a){return a.requestObject(`${t}@`).then(s=>{let r="";let o=true;if(s["@com.sap.vocabularies.Common.v1.DraftRoot"]&&s["@com.sap.vocabularies.Common.v1.DraftRoot"]["NewAction"]){r=`${t}@com.sap.vocabularies.Common.v1.DraftRoot/NewAction@Org.OData.Core.V1.OperationAvailable`}else if(s["@com.sap.vocabularies.Session.v1.StickySessionSupported"]&&s["@com.sap.vocabularies.Session.v1.StickySessionSupported"]["NewAction"]){r=`${t}@com.sap.vocabularies.Session.v1.StickySessionSupported/NewAction@Org.OData.Core.V1.OperationAvailable`}if(r){const e=a.getObject(r);if(e===false){o=false}}else{const e=s["@Org.OData.Capabilities.V1.InsertRestrictions"];if(e&&e.Insertable===false){o=false}}if(o){return this.getDefaultCreateHash(e,t,n)}else{return""}})},getDefaultCreateHash:function(e,t,n){let a=e&&e.preferredMode?e.preferredMode[0]:"create";let s="";a=a.includes(":")&&a.length>a.indexOf(":")+1?a.substring(0,a.indexOf(":")):"create";s=`${t.substring(1)}(...)?i-action=${a}`;if(n.getRouteInfoByHash(s)){return s}else{throw new Error(`No route match for creating a new ${t.substring(1)}`)}},verifyEditAnnotations:async function(e,t){const n=await t.requestObject(`${e}@`);const a=n?.["@com.sap.vocabularies.UI.v1.UpdateHidden"];let s=true;if(n?.["@com.sap.vocabularies.Common.v1.DraftRoot"]?.["EditAction"]){s=t.getObject(`${e}@com.sap.vocabularies.Common.v1.DraftRoot/EditAction@Org.OData.Core.V1.OperationAvailable`)}return s!==false&&a!==true}};return o},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/BindingHelper", ["sap/fe/base/BindingToolkit"],function(t){"use strict";var e={};var n=t.pathInModel;var i=t.or;var a=t.not;var s=t.equal;var r=t.and;const o={IsCreateMode:n("createMode","pageInternal"),IsEditable:n("isEditable","ui"),IsTransientBinding:s(n("@$ui5.context.isTransient"),true),IsTotal:s(n("@$ui5.node.isTotal"),true),IsExpanded:s(n("@$ui5.node.isExpanded"),true),NodeLevel:n("@$ui5.node.level"),IsInactive:n("@$ui5.context.isInactive")};e.UI=o;const u={HasDraft:n("HasDraftEntity"),HasActive:n("HasActiveEntity"),IsActive:n("IsActiveEntity")};e.Entity=u;const c={IsNewObject:r(a(u.HasActive),a(u.IsActive)),HasNoDraftForCurrentUser:i(a(u.HasDraft),r(u.HasDraft,a(n("DraftAdministrativeData/DraftIsCreatedByMe"))))};e.Draft=c;function f(t,e){return t.singletons.find(t=>t.fullyQualifiedName===e)}const d=function(t,e,n){if(t.indexOf("/")===0){const n=t.split("/").filter(Boolean),i=n.pop(),a=n.join("/"),s=f(e,a);if(s){t=`/${s.name}/${i}`}}else{const e=n.concat();e.push(t);t=e.join("/")}return t};e.singletonPathVisitor=d;function l(t,e,n){if(n){const e=`${n?.substring(n.lastIndexOf("/")+1)}/`;if(t.startsWith(e)){return t.substring(e.length)}}return d(t,e,[])}e.bindingContextPathVisitor=l;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/BindingToolkitEvaluator", ["sap/base/util/ObjectPath","sap/fe/base/BindingToolkit"],function(e,n){"use strict";var t={};var r=n.unresolvableExpression;var s=n.transformRecursively;var a=n.isConstant;var o=n.constant;function i(n,t){const i=new Set;const l=s(n,"PathInModel",n=>{const s=n.modelName??"";const a=t[s];if(a===undefined){i.add(s);return r}return o(e.get(n.path.replace(/\//g,"."),a))},true);if(a(l)){return l.value}else{throw new Error(`Expression cannot be resolved not constant as data from the following models: ${Array.from(i).join(",")} is missing`)}}t.evaluateExpression=i;return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/DeleteHelper", ["sap/base/Log","sap/fe/core/controllerextensions/editFlow/draft","sap/m/CheckBox","sap/m/MessageToast","sap/m/Text","sap/ui/core/message/Message","sap/ui/core/message/MessageType","sap/ui/core/Messaging"],function(e,t,n,o,s,i,l,a){"use strict";var E=function(e){e["deletableContexts"]="deletableContexts";e["draftsWithDeletableActive"]="draftsWithDeletableActive";e["unSavedContexts"]="unSavedContexts";e["draftsWithNonDeletableActive"]="draftsWithNonDeletableActive";e["draftsToDeleteBeforeActive"]="draftsToDeleteBeforeActive";return e}(E||{});var r=function(e){e["CHECKBOX"]="checkBox";e["TEXT"]="text";return e}(r||{});function c(e,t,n,o){const s=[...n];o.forEach(e=>{const t=s.indexOf(e);if(t!==-1){s.splice(t,1)}});e.setProperty(t,[]);return s}function _(e,t){let n=e.getProperty("selectedContexts")||[];if(t.type===E.deletableContexts){n=c(e,E.deletableContexts,n,e.getProperty(E.deletableContexts)||[]);const t=e.getProperty(E.draftsWithDeletableActive)||[];const o=t.map(e=>e.draft);n=c(e,E.draftsWithDeletableActive,n,o)}else{const o=e.getProperty(t.type)||[];n=c(e,t.type,n,o)}e.setProperty("selectedContexts",n);e.setProperty("numberOfSelectedContexts",n.length)}function T(e,t,n,s,i){const{internalModelContext:l,entitySetName:a}=e;if(l){if(l.getProperty("deleteEnabled")!=undefined){t.forEach(e=>{if(e.selected){_(l,e)}})}l.setProperty("deleteEnabled",t.some(e=>!e.selected))}if(e.silentMode!==true){if(n.length===1){o.show(s.getText("C_TRANSACTION_HELPER_DELETE_TOAST_SINGULAR",undefined,a))}else{o.show(s.getText("C_TRANSACTION_HELPER_DELETE_TOAST_PLURAL",undefined,a))}}if(e.parentControl!==undefined&&e.parentControl.getMetadata().getName()!=="sap.ui.mdc.MultiValueField"){y.setFocusAfterDelete(e.parentControl,n.length,i)}}async function f(e,t,n){const o=e.getRowBinding?.()?.getCount();const s=(o??0)+t;let i;if(n!==-1&&o!==undefined&&o>0){if(n===s-1){i=o-1}else{i=n-t+1}await e.focusRow(i,false)}else{e.focus()}}function C(e){const t=e.getObject()["DraftAdministrativeData"];return t&&t["InProcessByUser"]||""}function d(e,t,n){let o="";if(t===1&&n.length===1){const t=C(n[0]);o=e.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_SINGLE_OBJECT_LOCKED",[t])}else if(n.length==1){const s=C(n[0]);o=e.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTINFO_AND_ONE_OBJECT_LOCKED",[t,s])}else if(n.length>1){o=e.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTINFO_AND_FEW_OBJECTS_LOCKED",[n.length,t])}return o}function N(e,t,n){let o="";if(n===t){if(t===1){o=e.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_ONLY_DRAFT_OF_NON_DELETABLE_ACTIVE")}else{o=e.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_ONLY_DRAFTS_OF_NON_DELETABLE_ACTIVE")}}else if(t===1){o=e.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_DRAFT_OF_NON_DELETABLE_ACTIVE")}else{o=e.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_DRAFTS_OF_NON_DELETABLE_ACTIVE")}return o}function A(e){const t=e.getObject()["DraftAdministrativeData"];let n="";if(t){n=t["LastChangedByUserDescription"]||t["LastChangedByUser"]||""}return n}function g(e,t,n,o){let s="",i="",l=false;if(t===1&&n.length===1){const t=A(n[0]);s=e.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_UNSAVED_CHANGES",[t]);l=true}else if(t===n.length){s=e.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_UNSAVED_CHANGES_MULTIPLE_OBJECTS");l=true}else if(o===n.length){if(n.length===1){const t=A(n[0]);s=e.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_UNSAVED_AND_FEW_OBJECTS_LOCKED_SINGULAR",[t])}else{s=e.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_UNSAVED_AND_FEW_OBJECTS_LOCKED_PLURAL")}l=true}else if(o>n.length){if(n.length===1){const t=A(n[0]);i=e.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTINFO_AND_FEW_OBJECTS_UNSAVED_SINGULAR",[t])}else{i=e.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTINFO_AND_FEW_OBJECTS_UNSAVED_PLURAL")}}return{infoTxt:s,optionTxt:i,optionWithoutTxt:l}}function D(e,t,n){const{numberOfSelectedContexts:o,entitySetName:i,lockedContexts:l=[],draftsWithNonDeletableActive:a=[]}=e;const E=o-(l.length+t-a.length);let r="";if(E>0&&(t===0||a.length===t)){if(l.length>0){if(E===1){r=n.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_ALL_REMAINING_NON_DELETABLE_SINGULAR")}else{r=n.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_ALL_REMAINING_NON_DELETABLE_PLURAL")}}else if(E===1){r=n.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_SINGLE_AND_ONE_OBJECT_NON_DELETABLE",undefined,i)}else{r=n.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_MULTIPLE_AND_ALL_OBJECT_NON_DELETABLE",undefined,i)}}else if(E===1){r=n.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTINFO_AND_ONE_OBJECT_NON_DELETABLE",[o],i)}else if(E>1){r=n.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTINFO_AND_FEW_OBJECTS_NON_DELETABLE",[E,o],i)}return r?new s({text:r}):undefined}function O(e,t){return t.reduce((e,t)=>t.selected&&t.type!==E.draftsToDeleteBeforeActive?e.concat(t.contexts):e,e)}function u(e){const t=[];return e.reduce((e,t)=>t.selected&&t.type===E.draftsToDeleteBeforeActive?e.concat(t.contexts):e,t)}function L(e,t,n,o,i,l){let{numberOfSelectedContexts:a,draftsWithDeletableActive:c,unSavedContexts:_,lockedContexts:T,draftsWithNonDeletableActive:f}=e;c??=[];_??=[];T??=[];f??=[];a??=0;let C="";if(c.length>0){const e=[];c.forEach(n=>{e.push(n.draft);t.push(n.siblingInfo.targetContext)});if(e.length>0){l.push({type:E.draftsToDeleteBeforeActive,contexts:e,selected:true})}}if(T.length>0){C=y.getLockedObjectsText(o,a,T)||"";i.push(new s({text:C}))}const d=a!=n-f.length+T.length;const N=d&&y.getNonDeletableText(e,n,o);if(N){i.push(N)}if(_.length>0){const e=y.getUnsavedContextsText(o,a,_,n)||{};if(e.infoTxt){i.push(new s({text:e.infoTxt}))}if(e.optionTxt||e.optionWithoutTxt){l.push({type:E.unSavedContexts,contexts:_,text:e.optionTxt,selected:true,control:r.CHECKBOX})}}if(f.length>0){const e=y.getNonDeletableActivesOfDraftsText(o,f.length,n)||"";if(e){l.push({type:E.draftsWithNonDeletableActive,contexts:f,text:e,selected:true,control:n>0?r.CHECKBOX:r.TEXT})}}}function I(e,t){if(e.length===1){const n=e[0];if(n.text){const e=new s;e.setText(n.text);t.push(e)}}else if(e.length>1){e.forEach(e=>{if(e.control==="text"&&e.text){const n=new s;n.setText(e.text);t.push(n)}});e.forEach(e=>{if(e.control==="checkBox"&&e.text){t.push(new n({text:e.text,selected:true,select:function(t){const n=t.getSource();const o=n.getSelected();e.selected=o}}))}})}}function x(e,t){const{draftsWithDeletableActive:n}=e;const o=n?.find(e=>e.siblingInfo.targetContext===t);return o?.draft?o.draft:t}function R(e,t,n){let{numberOfSelectedContexts:o,lockedContexts:s,draftsWithNonDeletableActive:i,unSavedContexts:l}=e;const{entitySetName:a,parentControl:c,description:_}=e;i??=[];l??=[];s??=[];i??=[];o??=0;const T=t.length+i.length+l.length;const f=o-(s.length+T-i.length);const C=[];if(o===1&&o===t.length){const o=c;const s=o&&o.getParent().getIdentifierColumn();let i;if(s){const o=_&&_.path;let l=t[0];let E=l.getObject();if(!E||Object.keys(E).length===0){l=x(e,l);E=l.getObject()}const r=s?E[s]:undefined;const c=o&&E[o];if(r){if(c&&_&&s!==_.path){i=n.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTINFO",[r,c],a)}else{i=n.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTTITLE_ONLY",[r],a)}}else{i=n.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR",undefined,a)}}else{i=n.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR",undefined,a)}C.push({type:E.deletableContexts,contexts:t,text:i,selected:true,control:r.TEXT})}else if(l.length!==T&&o>0&&(t.length>0||l.length>0&&i.length>0)){if(o>t.length&&f+s.length>0){let e="";if(T===1){e=n.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR_NON_DELETABLE",undefined,a)}else{e=n.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTTITLE_PLURAL_NON_DELETABLE",undefined,a)}C.unshift({type:E.deletableContexts,contexts:t,text:e,selected:true,control:r.TEXT})}else{const e=T===1?n.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR",undefined,a):n.getText("C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTTITLE_PLURAL",undefined,a);C.push({type:E.deletableContexts,contexts:t,text:e,selected:true,control:r.TEXT})}}return C}async function h(n,o,s,i){const l=[];await Promise.allSettled(n.map(async function(n){try{return await t.deleteDraft(n,o,s,i)}catch(t){e.error(`FE : core : DeleteHelper : Error while discarding draft with path : ${n.getPath()}`);l.push(t)}}));return l}function p(e){const t=[...e];t.forEach((e,n)=>{if(e===undefined){return}for(let o=n+1;o<t.length;o++){const n=t[o];if(n&&e.isAncestorOf(n)){t[o]=undefined}}});return t.filter(e=>e!==undefined)}async function S(e,n,o,s,i,l,a){const E=o.registerToHoldMessages();let r=[];try{r=y.getConfirmedDeletableContext([],e);const c=r[r.length-1].getIndex()??-1;const _=u(e);const{beforeDeleteCallBack:T,parentControl:f}=n;if(T){await T({contexts:r})}if(r.length){const E=r.length===1?true:false;const T=await h(_,o,i,E);let f=r;if(a==="Tree"){f=p(r)}await Promise.all(f.map(async function(e){if(!l||n.draftsWithDeletableActive?.find(t=>t.siblingInfo.targetContext===e)||a==="Analytical"){e.resetChanges();return e.getModel().delete(e.getCanonicalPath())}else{return t.deleteDraft(e,o,i,E)}}));y.afterDeleteProcess(n,e,r,s,c);if(T.length>0){throw Error(`FE : core : DeleteHelper : Errors on draft delete : ${T}`)}}o.removeHoldKey(E)}catch(e){if(r.length>1){y.addGenericDeleteFailureMessage(s)}await o.showMessages({unHoldKey:E});throw e}}function b(e){a.addMessages(new i({message:e.getText("C_COMMON_DELETE_CHANGESET_FAILURE_MULTIPLE_ERRORS_TEXT"),type:l.Error,target:undefined,persistent:true,code:"FE_CUSTOM_MESSAGE_CHANGESET_ALL_FAILED",description:e.getText("C_COMMON_DELETE_CHANGESET_FAILURE_MULTIPLE_ERRORS_DETAILS_TEXT"),technicalDetails:{fe:{changeSetPreTextForSingleError:e.getText("C_COMMON_DELETE_CHANGESET_FAILURE_SINGLE_ERROR_TEXT")}}}))}async function v(e,n,o){try{if(!e.isActive&&e.hasActive){const s=await t.computeSiblingInformation(e.context,e.context);e.siblingInfo=s;e.siblingDeletable=n?await(s?.targetContext?.requestProperty(n)):o}else if(e.isActive&&e.hasDraft){const s=await t.computeSiblingInformation(e.context,e.context);if(s?.targetContext){const t=["IsActiveEntity","HasActiveEntity"];if(n){t.push(n)}await s.targetContext.requestProperty(t);e.locked=false;e.hasDraft=false;e.isActive=false;e.hasActive=true;e.siblingInfo={targetContext:e.context,pathMapping:[]};e.context=s.targetContext;e.siblingDeletable=e.deletable;e.deletable=n?s.targetContext.getProperty(n):o}}}catch(e){}}async function P(e){const t=!!e?.getObject()["@$ui5.context.isTransient"];const n=e?.isInactive();const o=n||!n&&t?undefined:e.getModel().getMetaModel().getMetaContext(e.getCanonicalPath());const s=o?.getProperty("@Org.OData.Capabilities.V1.DeleteRestrictions/Deletable/$Path");const i=!s&&o?.getProperty("@Org.OData.Capabilities.V1.DeleteRestrictions/Deletable")!==false;const l=s?e.getProperty(s):i;const a={context:e,isDraftRoot:!!o?.getProperty("@com.sap.vocabularies.Common.v1.DraftRoot"),isDraftNode:!!o?.getProperty("@com.sap.vocabularies.Common.v1.DraftNode"),isActive:true,hasActive:false,hasDraft:false,locked:false,deletable:l,siblingInfo:undefined,siblingDeletable:false,isInactiveContext:!!e.isInactive()};if(!e.isInactive()&&a.isDraftRoot){a.locked=!!e.getObject("DraftAdministrativeData")?.InProcessByUser;a.hasDraft=e.getProperty("HasDraftEntity");a.isActive=e.getProperty("IsActiveEntity");a.hasActive=e.getProperty("HasActiveEntity");await v(a,s,i)}return a}async function H(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const o=await Promise.all(t.map(P));const s=[{key:"draftsWithDeletableActive",value:o.filter(e=>!e.isInactiveContext&&e.isDraftRoot&&!e.isActive&&e.hasActive&&e.siblingDeletable)},{key:"draftsWithNonDeletableActive",value:o.filter(e=>!e.isInactiveContext&&e.isDraftRoot&&!e.isActive&&e.hasActive&&!e.siblingDeletable)},{key:"lockedContexts",value:o.filter(e=>!e.isInactiveContext&&e.isDraftRoot&&e.isActive&&e.hasDraft&&e.locked)},{key:"unSavedContexts",value:o.filter(e=>!e.isInactiveContext&&e.isDraftRoot&&e.isActive&&e.hasDraft&&!e.locked)},{key:"deletableContexts",value:o.filter(e=>e.isInactiveContext||!e.isDraftRoot&&!e.isDraftNode&&e.deletable||e.isDraftRoot&&e.isActive&&!e.hasDraft&&e.deletable||e.isDraftRoot&&!e.isActive&&!e.hasActive||e.isDraftNode&&e.deletable)}];const i=!n?"":"contextmenu/";for(const{key:t,value:n}of s){e.setProperty(i+t,n.map(e=>t==="draftsWithDeletableActive"?{draft:e.context,siblingInfo:e.siblingInfo}:e.context))}}const y={getNonDeletableText:D,deleteConfirmHandler:S,getOptionsForDeletableTexts:R,updateContentForDeleteDialog:I,updateDraftOptionsForDeletableTexts:L,getConfirmedDeletableContext:O,getLockedObjectsText:d,getUnsavedContextsText:g,getNonDeletableActivesOfDraftsText:N,afterDeleteProcess:T,updateDeleteInfoForSelectedContexts:H,DeleteOptionTypes:E,DeleteDialogContentControl:r,setFocusAfterDelete:f,getContextInfos:P,addGenericDeleteFailureMessage:b,removeDescendantContexts:p};return y},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/DynamicAnnotationPathHelper", ["sap/ui/base/BindingParser"],function(s){"use strict";var t={};function r(s,t){if(!s){return null}const e=t.split("/");if(e.length===1){return s[t]}else{return r(s[e[0]],e.splice(1).join("/"))}}function e(t,n){if(t.includes("[")){const i=t.indexOf("[");const u=t.substring(0,i);const l=t.substring(i+1);const a=l.indexOf("]");const o=n.getObject(u);const c=s.parseExpression(l.substring(0,a));if(Array.isArray(o)&&c&&c.result&&c.result.parts&&c.result.parts[0]&&c.result.parts[0].path){let s;let i=false;for(s=0;s<o.length&&!i;s++){const t=r(o[s],c.result.parts[0].path);const e=c.result.formatter(t);if(e){i=true}}if(i){t=e(u+(s-1)+l.substring(a+1),n)}}}return t}t.resolveDynamicExpression=e;return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/EditState", [],function(){"use strict";const t={CLEAN:0,PROCESSED:1,DIRTY:2};let e=t.CLEAN;return{setEditStateDirty:function(){e=t.DIRTY},setEditStateProcessed:function(){e=t.PROCESSED},resetEditState:function(){e=t.CLEAN},isEditStateDirty:function(){return e!==t.CLEAN},cleanProcessedEditState:function(){if(e===t.PROCESSED){e=t.CLEAN}}}},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/ExcelFormatHelper", ["sap/ui/core/format/DateFormat"],function(e){"use strict";const t={getExcelDatefromJSDate:function(){let t=e.getDateInstance().oFormatOptions?.pattern?.toLowerCase();if(t){const e=/^[^y]*y[^y]*$/m;if(e.exec(t)){t=t.replace("y","yyyy")}}return t},getExcelDateTimefromJSDateTime:function(){let t=e.getDateTimeInstance().oFormatOptions?.pattern?.toLowerCase();if(t){const e=/^[^y]*y[^y]*$/m;if(e.exec(t)){t=t.replace("y","yyyy")}if(t.includes("a")){t=t.replace("a","AM/PM")}}return t},getExcelTimefromJSTime:function(){let t=e.getTimeInstance().oFormatOptions?.pattern;if(t&&t.includes("a")){t=t.replace("a","AM/PM")}return t}};return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/FPMHelper", ["sap/base/Log","sap/base/util/ObjectPath","sap/fe/core/CommonUtils"],function(e,t,n){"use strict";const o={loadModuleAndCallMethod:async function(e,n,o){for(var i=arguments.length,r=new Array(i>3?i-3:0),s=3;s<i;s++){r[s-3]=arguments[s]}return new Promise(function(i){let s;if(o.getControllerName()==="sap.fe.templates.ObjectPage.ObjectPageController"||o.getControllerName()==="sap.fe.templates.ListReport.ListReportController"){s=o.getController().getExtensionAPI()}if(e.startsWith("/extension/")){const o=t.get(e.replace(/\//g,".").substring(1),s);i(o[n](...r))}else{sap.ui.require([e],function(e){i(e[n].bind(s)(...r))})}})},actionWrapper:async function(t,i,r,s){if(!i||!r){e.debug("Both the module and the method must be defined to execute a custom action");return}const a=t.getSource?t.getSource():t.oSource,l=n.getTargetView(a),u=a.getBindingContext();let c;let d;if(s!==undefined){d=s.contexts||[]}else if(u!==undefined){d=[u]}else{d=[]}if(a.getParent()?.isA("sap.ui.mdc.actiontoolbar.ActionToolbarAction")||a.getParent()?.isA("sap.m.Menu")){c=o.getMdcTable(a)?.getRowBinding()}return o.loadModuleAndCallMethod(i,r,l,u,d,c)},getMdcTable:function(e){const t=e.getParent();if(!t||t.isA("sap.ui.mdc.Table")){return t}return o.getMdcTable(t)},validationWrapper:async function(e,t,n,i,r){return o.loadModuleAndCallMethod(e,t,i,r,n)},getCustomFunction(o,i,r){let s;if(r.isA("sap.ui.base.Event")){s=r.getSource()}else{s=r}const a=n.getTargetView(s);const l=a.getController().getExtensionAPI();let u;if(o.startsWith("/extension/")){const e=t.get(o.replace(/\//g,".").substring(1),l);u=e?e[i]:undefined}else{const e=sap.ui.require(o);u=e?e[i]?.bind(l):undefined}if(!u){e.error(`Couldn't find method ${i} in ${o}`)}return u}};return o},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/HTTP503Handler", ["sap/fe/core/controllerextensions/BusyLocker","sap/fe/core/helpers/PromiseKeeper","sap/m/Button","sap/m/Dialog","sap/m/ProgressIndicator","sap/m/Text","sap/m/VBox"],function(e,t,n,s,r,a,o){"use strict";const l={createDialog(e){return new s(e)},async _handleDelayBusy(t,n){e.lock(n);return new Promise(s=>{setTimeout(()=>{e.unlock(n);s(undefined)},t)})},async _handleDelayProgressBar(e,s,l){const c=new t;const i=new a;const u=new r({displayOnly:true,percentValue:0,showValue:false});const f=new o({items:[new a({text:l.getText("C_MESSAGE_HANDLING_SAPFE_503_TITLE")})]});if(s.message){f.addItem(new a({text:s.message.replaceAll(/[\n\r]/g," ")}))}f.addItem(i);f.addItem(u);function d(){const t=s.retryAfter.getTime()-Date.now();if(t<=0){return false}else{const n=100-t/e*100;u.setPercentValue(n);const s=Math.ceil(t/1e3);const r=Math.floor(s/60);const a=s%60;if(r>0){i.setText(l.getText("C_UNAVAILABLE_SERVER_MESSAGE_MINUTES_SECONDS",[r,a]))}else{i.setText(l.getText("C_UNAVAILABLE_SERVER_MESSAGE_SECONDS",[a]))}return true}}const _=setInterval(()=>{if(!d()){clearInterval(_);g.close();c.resolve(undefined)}},100);const m=()=>{clearInterval(_);g.close();c.reject(s)};const g=this.createDialog({type:"Message",title:l.getText("WARNING"),content:[f],endButton:new n({text:l.getText("C_COMMON_DIALOG_CANCEL"),press:m}),state:"Warning"});d();g.open();return c.promise},async handle503Delay(e,t,n){if(e.retryAfter===undefined){return Promise.reject(e)}const s=e.retryAfter.getTime()-Date.now();if(s<5e3){return this._handleDelayBusy(s,t)}else if(s<6e5){return this._handleDelayProgressBar(s,e,n)}else{return Promise.reject(e)}}};return l},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/KeepAliveHelper", ["sap/base/Log","sap/fe/core/helpers/KeepAliveRefreshTypes","./ModelHelper"],function(t,e,n){"use strict";var o=e.RefreshStrategyType;var r=e.PATH_TO_STORE;const s=function(t,e){const o=n.getEntitySetPath(e);const r=o.includes("$NavigationPropertyBinding")&&t.getObject(o);return r?`/${r}`:e};const i=function(t,e,n){return t===e||n===o.IncludingDependents&&t.startsWith(e)};const c=function(t,e,n,o){let r=e.startsWith("/")?e:`/${e}`,c=n.startsWith("/")?n:`/${n}`;if(!i(r,c,o)){r=s(t,r);if(!i(r,c,o)){c=s(t,c)}else{return true}}return i(r,c,o)};const a=function(t,e){const n=[];const o=t.getModel().getMetaModel();const s=t.getModel("internal");const i=s.getProperty(r)||{};if(e){e.forEach(function(t){const e=t.data("targetCollectionPath");for(const r in i){const s=i[r];if(!n.includes(t)&&c(o,e,r,s)){n.push(t)}}})}return n};const f=function(t,e){const n=t.getModel().getMetaModel();const o=t.getModel("internal");const s=o.getProperty(r)||{};let i;if(e){for(const t in s){const o=s[t];if(c(n,e,t,o)){i=o;if(i==="includingDependents"){break}}}}return i};const g=function(t){const e=t.getViewData(),n=e&&(e?.contextPath||`/${e?.entitySet}`);return h.getControlRefreshStrategyForContextPath(t,n)};const u=function(t,e,n){const o=e&&n&&`${e}-${n}`;const r=t.intents;const s=r&&o&&r[o];const i=!s&&r&&e&&r[e];return s||i||t?.defaultBehavior||t?._feDefault};const l=function(t,e){if(t&&t.getModel("viewData")&&t.getModel("internal")){const n=t.getModel("viewData");const o=n.getProperty(r);if(o){const n=t.getModel("internal");const s=h.getRefreshStrategyForIntent(o,e?.semanticObject,e?.action);n.setProperty(r,s)}}};const d=async function(e){const n=e.getBindingContext("internal");const o=e.getController();const r=o?.viewState;let s=Promise.resolve();if(n&&n.getProperty("restoreStatus")==="pending"){if(r.refreshViewBindings){s=r.refreshViewBindings();s.then(function(){t.info(`FE V4: Refresh was triggered successfull: ${e.getId()}`);return}).catch(function(n){t.warning(`FE V4: Refresh was unsuccessfull: ${e.getId()}`,n)})}s=s.then(function(){r.onRestore();n.setProperty("restoreStatus","done");return}).catch(function(n){t.warning(`FE V4: Restore was unsuccessfull: ${e.getId()}`,n)})}return s};const h={getControlsForRefresh:a,getControlRefreshStrategyForContextPath:f,getViewRefreshInfo:g,getRefreshStrategyForIntent:u,storeControlRefreshStrategyForHash:l,restoreView:d};return h},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/KeepAliveRefreshTypes", [],function(){"use strict";var e={};let n=function(e){e["Self"]="self";e["IncludingDependents"]="includingDependents";return e}({});e.RefreshStrategyType=n;const t="/refreshStrategyOnAppRestore";e.PATH_TO_STORE=t;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/LoaderUtils", [],function(){"use strict";var e={};async function n(e){let n;const r=new Promise(e=>{n=e});if(e.length>0){sap.ui.require(e,function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++){r[i]=arguments[i]}n(r)})}else{n([])}return r}e.requireDependencies=n;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/ManifestHelper", [],function(){"use strict";var e={};function t(e){return(Array.isArray(e)?e:[e]).map(r)}e.getRouteTargetNames=t;function r(e){return typeof e==="object"?e.name:e}e.getRouteTargetName=r;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/MessageStrip", ["sap/fe/core/CommonUtils","sap/fe/core/helpers/ResourceModelHelper","sap/ui/core/Lib","sap/ui/Device"],function(e,t,n,o){"use strict";var r=t.getLocalizedText;function s(e,t,n,o){const s=n.getModel().getMetaModel(),_=e.map(function(e){if(e==="$search"){return o.getText("M_FILTERBAR_SEARCH")||""}if(e==="$editState"){return o.getText("FILTERBAR_EDITING_STATUS")||""}const _=s.getObject(`${t}${e}@com.sap.vocabularies.Common.v1.Label`)??e;return r(_,n)});return _}function _(t,o,r){let s="";let _=[];const c=R();if(!c){return""}const i=e.getTargetView(o);const a=i.getController().getChartControl?.();const l=a?.data("draftSupported")==="true";const L=n.getResourceBundleFor("sap.fe.macros");r=r&&t.includes(L.getText("M_FILTERBAR_SEARCH"));const g=`C_LR_MULTIVIZ_CHART_${T(t)}_IGNORED_FILTER_${u()}`;if(l&&(t.length===2&&r||t.length===1)){s=t.length===1?"C_MULTIVIZ_CHART_IGNORED_FILTER_DRAFT_DATA":"C_LR_MULTIVIZ_CHART_IGNORED_FILTER_DRAFT_DATA_AND_SEARCH"}else{s=g;_=[t.join(", ")]}return c.getText(s,_)}function c(e,t,n){const o=R();return o?o.getText(`C_LR_MULTITABLES_${T(e)}_IGNORED_FILTER_${u()}`,[e.join(", "),r(n,t)]):""}function u(){return o.system.desktop?"LARGE":"SMALL"}function T(e){return e.length===1?"SINGLE":"MULTI"}function R(){return n.getResourceBundleFor("sap.fe.templates")}const i={getALPText:_,getText:c,getLabels:s};return i},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/MetaModelFunction", ["sap/fe/base/BindingToolkit","sap/fe/core/converters/helpers/IssueManager","sap/fe/core/helpers/ModelHelper","sap/fe/core/type/EDM","../converters/MetaModelConverter"],function(e,t,r,i,n){"use strict";var o={};var s=n.getInvolvedDataModelObjects;var a=i.isTypeFilterable;var l=t.IssueSeverity;var c=t.IssueCategoryType;var u=t.IssueCategory;var p=e.pathInModel;var f=e.or;var g=e.not;var d=e.compileExpression;function P(e,t){let i;let n;const o="$NavigationPropertyBinding";const s="@Org.OData.Capabilities.V1.SearchRestrictions";const a=e.replaceAll("%2F","/").split("/").filter(r.filterOutNavPropBinding);const l=r.getEntitySetPath(e,t);const c=l.split("/").filter(r.filterOutNavPropBinding);const u=t.getObject(`/${a.join("/")}/$ContainsTarget`)?true:false;const p=u?a[a.length-1]:"";if(!u){i=t.getObject(`${l}${s}`)}if(a.length>1){const e=u?p:c[c.length-1];const r=`/${o}/`;const i=u?l:`/${c.slice(0,-1).join(r)}`;const s=V.getNavigationRestrictions(t,i,e.replaceAll("%2F","/"));n=s?.SearchRestrictions}return n??i}o.getSearchRestrictions=P;function h(e,t,r){const i=e.getObject(`${t}@Org.OData.Capabilities.V1.NavigationRestrictions`);const n=i?.RestrictedProperties;return n?.find(function(e){return e.NavigationProperty?.$NavigationPropertyPath===r})}o.getNavigationRestrictions=h;function v(e,t,r){let i=false;const n=e.getObject(`${t}@Org.OData.Capabilities.V1.FilterRestrictions`);if(n?.NonFilterableProperties){i=n.NonFilterableProperties.some(function(e){return e.$NavigationPropertyPath===r||e.$PropertyPath===r})}return i}function b(e,t,r){let i=false;const n=e.getObject(t+"@Org.OData.Aggregation.V1.ApplySupported")?true:false;if(n){const n=e.getObject(`${t}@`);const o=V.getAllCustomAggregates(n);const s=o?Object.keys(o):undefined;if(s?.includes(r)){i=true}}return i}o.isCustomAggregate=b;function y(e,t,r,i){let n=e.split("/").length===2&&!r.includes("/")?!v(t,e,r):!R(t,e,r);if(n&&i){const e=m(i);if(e){n=e?a(e):false}else{n=false}}return n}function R(e,t,r){const i=`${t}/${r}`,n=i.split("/").splice(0,2),o=i.split("/").splice(2);let s=false,a="";t=n.join("/");s=o.some(function(r,i,n){if(a.length>0){a+=`/${r}`}else{a=r}if(i===n.length-2){const i=V.getNavigationRestrictions(e,t,r);const o=i?.FilterRestrictions;const s=o?.NonFilterableProperties;const a=n[n.length-1];if(s?.find(function(e){return e.$PropertyPath===a})){return true}}if(i===n.length-1){s=v(e,t,a)}else if(e.getObject(`${t}/$NavigationPropertyBinding/${r}`)){s=v(e,t,a);a="";t="/"+e.getObject(`${t}/$NavigationPropertyBinding/${r}`)}return s});return s}function m(e){let t=e.getProperty("$Type");if(!e.getProperty("$kind")){switch(t){case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":t=undefined;break;case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":t=e.getProperty("Value/$Path/$Type");break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":default:const r=e.getProperty("Target/$AnnotationPath");if(r){if(r.includes("com.sap.vocabularies.Communication.v1.Contact")){t=e.getProperty("Target/$AnnotationPath/fn/$Path/$Type")}else if(r.includes("com.sap.vocabularies.UI.v1.DataPoint")){t=e.getProperty("Value/$Path/$Type")}else{t=undefined}}else{t=undefined}break}}return t}function $(e,t,r,i){if(typeof r!=="string"){throw new Error("sProperty parameter must be a string")}if(e.getObject(`${t}/@com.sap.vocabularies.Common.v1.ResultContext`)===true){return true}const n=e.createBindingContext(`${t}/${r}`);if(n&&!i){if(n.getProperty("@com.sap.vocabularies.UI.v1.Hidden")===true||n.getProperty("@com.sap.vocabularies.UI.v1.HiddenFilter")===true){return false}const e=n.getProperty("@com.sap.vocabularies.UI.v1.Hidden/$Path");const t=n.getProperty("@com.sap.vocabularies.UI.v1.HiddenFilter/$Path");if(e&&t){return d(g(f(p(e),p(t))))}else if(e){return d(g(p(e)))}else if(t){return d(g(p(t)))}}return y(t,e,r,n)}o.isPropertyFilterable=$;function O(e,t,r){const i=s(e.getContext(t));const n=[];const o=[];const a=[];const p=V.getRequiredPropertiesFromInsertRestrictions(t,e);const f=i.targetEntityType.entityProperties;for(const e of f){const t=e.annotations,i=e.isKey,s=e.name,f=t.Core?.Immutable?.valueOf()===true,g=!(t.Core?.Computed?.valueOf()===true),d=!(t.UI?.Hidden?.valueOf()===true),P=t.Core?.ComputedDefaultValue?.valueOf()===true,h=i&&e.type==="Edm.Guid"?P&&t.Common?.Text:false;if((h||i&&e.type!=="Edm.Guid")&&g&&d){n.push(s)}else if(p.includes(s)&&d&&!(i&&!n.includes(s))){a.push(s)}else if(f&&g&&d){o.push(s)}if(!g&&P&&r){const e=r.getDiagnostics();const t="Core.ComputedDefaultValue is ignored as Core.Computed is already set to true";e.addIssue(u.Annotation,l.Medium,t,c,c.Annotations.IgnoredAnnotation)}}return n.concat(a).concat(o)}o.getCreatePopupFields=O;function F(e,t){let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const n=[];let o=[];const s="$NavigationPropertyBinding";let a=null;if(e.endsWith("$")){e=e.replace("/$","")}const l=e.replaceAll("%2F","/").split("/").filter(r.filterOutNavPropBinding);const c=r.getEntitySetPath(e,t);const u=c.split("/").filter(r.filterOutNavPropBinding);const p=t.getObject(`/${l.join("/")}/$ContainsTarget`)?true:false;const f=p?l[l.length-1]:"";if(!p){a=t.getObject(`${c}@`)}if(l.length>1){const e=p?f:u[u.length-1];const r=`/${s}/`;const n=p?c:`/${u.slice(0,-1).join(r)}`;const l=V.getNavigationRestrictions(t,n,e.replaceAll("%2F","/"));if(l!==undefined&&V.hasRestrictedPropertiesInAnnotations(l,true,i)){o=i?l.UpdateRestrictions?.RequiredProperties??[]:l.InsertRestrictions?.RequiredProperties??[]}if(!o.length&&V.hasRestrictedPropertiesInAnnotations(a,false,i)){o=V.getRequiredPropertiesFromAnnotations(a,i)}}else if(V.hasRestrictedPropertiesInAnnotations(a,false,i)){o=V.getRequiredPropertiesFromAnnotations(a,i)}o.forEach(function(e){const t=e.$PropertyPath;n.push(t)});return n}function I(e,t){return V.getRequiredProperties(e,t)}o.getRequiredPropertiesFromInsertRestrictions=I;function C(e,t){return V.getRequiredProperties(e,t,true)}o.getRequiredPropertiesFromUpdateRestrictions=C;function A(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(t){return e?.["@Org.OData.Capabilities.V1.UpdateRestrictions"]?.RequiredProperties??[]}return e?.["@Org.OData.Capabilities.V1.InsertRestrictions"]?.RequiredProperties??[]}function D(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(t){const t=e;if(r){return t?.UpdateRestrictions?.RequiredProperties?true:false}return t?.InsertRestrictions?.RequiredProperties?true:false}else if(r){const t=e;return t?.["@Org.OData.Capabilities.V1.UpdateRestrictions"]?.RequiredProperties?true:false}const i=e;return i?.["@Org.OData.Capabilities.V1.InsertRestrictions"]?.RequiredProperties?true:false}function N(e){const t={};let r;for(const i in e){if(i.startsWith("@Org.OData.Aggregation.V1.CustomAggregate")){r=i.replace("@Org.OData.Aggregation.V1.CustomAggregate#","");const n=r.split("@");if(n.length==2){const r={};if(n[1]=="Org.OData.Aggregation.V1.ContextDefiningProperties"){r.contextDefiningProperties=e[i]}if(n[1]=="com.sap.vocabularies.Common.v1.Label"){r.label=e[i]}t[n[0]]=r}else if(n.length==1){t[n[0]]={name:n[0],propertyPath:n[0],label:`Custom Aggregate (${r})`,sortable:true,sortOrder:"both",custom:true}}}}return t}o.getAllCustomAggregates=N;function q(e){const t={sortable:true,propertyInfo:{}};const r=e["@Org.OData.Capabilities.V1.SortRestrictions"];if(!r){return t}if(r.Sortable===false){t.sortable=false}for(const e of r.NonSortableProperties||[]){const r=e.$PropertyPath;t.propertyInfo[r]={sortable:false}}for(const e of r.AscendingOnlyProperties||[]){const r=e.$PropertyPath;t.propertyInfo[r]={sortable:true,sortDirection:"asc"}}for(const e of r.DescendingOnlyProperties||[]){const r=e.$PropertyPath;t.propertyInfo[r]={sortable:true,sortDirection:"desc"}}return t}o.getSortRestrictionsInfo=q;function U(e){let t,r;const i={filterable:true,requiresFilter:e?.RequiresFilter||false,propertyInfo:{},requiredProperties:[]};if(!e){return i}if(e.Filterable===false){i.filterable=false}if(e.RequiredProperties){for(t=0;t<e.RequiredProperties.length;t++){r=e.RequiredProperties[t].$PropertyPath;i.requiredProperties.push(r)}}const n=e.NonFilterableProperties?.map(e=>e.$PropertyPath)||[];const o=e.FilterExpressionRestrictions?.map(e=>e.Property?.$PropertyPath)||[];E(i.propertyInfo,n,o);if(e.FilterExpressionRestrictions){for(t=0;t<e.FilterExpressionRestrictions.length;t++){r=e.FilterExpressionRestrictions[t].Property?.$PropertyPath;if(r){i.propertyInfo[r]["allowedExpressions"]=e.FilterExpressionRestrictions[t].AllowedExpressions}}}return i}o.getFilterRestrictionsInfo=U;function E(e,t,r){for(let r=0;r<t.length;r++){e[t[r]]={filterable:false}}for(let t=0;t<r.length;t++){const i=r[t];if(i){e[i]={filterable:true}}}}o.getFilterableData=E;function j(e){let t=true;switch(e){case"SearchExpression":case"SingleRange":case"SingleValue":t=false;break;default:break}return t}o.isMultiValueFilterExpression=j;const V={getRequiredProperties:F,getRequiredPropertiesFromAnnotations:A,hasRestrictedPropertiesInAnnotations:D,getRequiredPropertiesFromInsertRestrictions:I,getNavigationRestrictions:h,getAllCustomAggregates:N,getFilterableData:E};o.METAMODEL_FUNCTIONS=V;return o},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/MetaPath", ["sap/fe/core/helpers/TypeGuards"],function(t){"use strict";var e={};var i=t.isPathAnnotationExpression;var n=t.isAnnotationPath;function a(t){return t&&t.hasOwnProperty("_type")}function r(t,e){if(e){if(e.startsWith("/")){return e}else if(e.startsWith("@")){return t+e}else if(!t.endsWith("/")){return t+"/"+e}else{return t+e}}return t}let o=function(){function t(t,e,i){this.convertedMetadata=t;this.metaPath=e;this.contextPath=i;this.navigationProperties=[];this.contextNavigationProperties=[];this.absolutePath=r(i,e);this.relativePath=this.absolutePath.replace(i,"");if(this.relativePath.startsWith("/")){this.relativePath=this.relativePath.substring(1)}const n=this.convertedMetadata.resolvePath(this.absolutePath);const o=this.convertedMetadata.resolvePath(i);if(n.target===undefined||n.target===null){throw new Error(`No annotation target found for ${e}`)}this.targetObject=n.target;let s;let h;let u;let c=[];n.objectPath.forEach(t=>{if(a(t)){switch(t._type){case"NavigationProperty":c.push(t.name);this.navigationProperties.push(t);u=t.targetType;if(h&&h.navigationPropertyBinding.hasOwnProperty(c.join("/"))){h=h.navigationPropertyBinding[c.join("/")];c=[]}break;case"Singleton":case"EntitySet":if(s===undefined){s=t}h=t;u=h.entityType;break;case"EntityType":if(u===undefined){u=t}break;default:break}}});o.objectPath.forEach(t=>{s=this.getResolvedContextPath(t,u,s)});if(s===undefined||u===undefined){throw new Error("MetaPath doesn't contain an entitySet -> Should never happen")}this.serviceObjectPath=this.contextPath;if(this.navigationProperties.length){this.serviceObjectPath+="/"+this.navigationProperties.map(t=>t.name).join("/")}this.rootEntitySet=s;this.currentEntitySet=h;this.currentEntityType=u}e=t;var o=t.prototype;o.getResolvedContextPath=function t(e,i,n){if(a(e)){switch(e._type){case"NavigationProperty":this.contextNavigationProperties.push(e);break;case"EntitySet":if(this.contextRootEntitySet===undefined){this.contextRootEntitySet=e}if(n===undefined&&e.entityType===i){n=e}break;default:break}}return n};o.getContextPath=function t(){return this.contextPath};o.getPath=function t(e){return r(this.absolutePath,e)};o.getRelativePath=function t(e){return r(this.relativePath,e)};o.getTarget=function t(){return this.targetObject};o.getClosestEntitySet=function t(){let e=this.rootEntitySet;for(const t of this.navigationProperties){if(e.navigationPropertyBinding[t.name]){e=e.navigationPropertyBinding[t.name]}}return e};o.getClosestEntityType=function t(){let e=this.rootEntitySet.entityType;for(const t of this.navigationProperties){e=t.targetType}return e};o.getContextClosestEntitySet=function t(){let e=this.contextRootEntitySet;if(e){for(const t of this.contextNavigationProperties){if(e.navigationPropertyBinding[t.name]){e=e.navigationPropertyBinding[t.name]}}}return e};o.getNavigationProperties=function t(){return this.navigationProperties};o.getMetaPathForPath=function e(i){return new t(this.convertedMetadata,r(this.serviceObjectPath,i),this.contextPath)};o.getMetaPathForObject=function e(a){if(n(a)){return this.getMetaPathForPath(a.value)}else if(i(a)){return this.getMetaPathForPath(a.path)}else{let e=a?.fullyQualifiedName?.replace(this.rootEntitySet?.entityType.fullyQualifiedName,this.contextPath);if(e===a?.fullyQualifiedName){e=a.fullyQualifiedName?.replace(this.targetObject?.fullyQualifiedName,this.relativePath)}return new t(this.convertedMetadata,e,this.contextPath)}};o.getConvertedMetadata=function t(){return this.convertedMetadata};o.getDataModelObjectPath=function t(){return{targetObject:this.targetObject,startingEntitySet:this.rootEntitySet,targetEntitySet:this.getClosestEntitySet(),targetEntityType:this.getClosestEntityType(),navigationProperties:this.getNavigationProperties(),convertedTypes:this.convertedMetadata}};return t}();e=o;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/ModelHelper", ["sap/base/Log","sap/fe/base/BindingToolkit","sap/fe/core/controls/Any","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/MetaPath","sap/fe/core/helpers/TypeGuards","sap/ui/model/BindingMode","sap/ui/model/json/JSONModel","sap/ui/model/odata/type/Raw"],function(t,e,n,o,i,a,s,r,c){"use strict";var d=a.isPathAnnotationExpression;var g=a.isNavigationProperty;var l=a.isEntitySet;var u=o.getInvolvedDataModelObjects;var f=o.convertTypes;var p=e.compileExpression;const h={disableCollaborationDraft:false,isStickySessionSupported:function(t){const e=t.getObject("/");for(const n in e){if(e[n].$kind==="EntitySet"&&t.getObject(`/${n}@com.sap.vocabularies.Session.v1.StickySessionSupported`)){return true}}return false},isDraftSupported:function(t,e){const n=t.getMetaContext(e);const o=u(n);return this.isObjectPathDraftSupported(o)},isObjectPathDraftSupported:function(t){const e=t.targetEntitySet;const n=h.isDraftRoot(e);const o=h.isDraftNode(e);const i=g(t.targetObject)&&t.targetObject?.containsTarget&&(t.startingEntitySet?.annotations?.Common?.DraftRoot||t.startingEntitySet?.annotations?.Common?.DraftNode)?true:false;return n||o||!e&&i},isMetaPathDraftSupported:function(t){const e=t.getClosestEntitySet();const n=h.isDraftRoot(e);const o=h.isDraftNode(e);return n||o},isCollaborationDraftSupported:function(t,e){if(!h.disableCollaborationDraft){const n=e?.context?.getModel()||t;const o=n.getObject("/");for(const t in o){if(o[t].$kind==="EntitySet"&&n.getObject(`/${t}@com.sap.vocabularies.Common.v1.DraftRoot/ShareAction`)){return true}}}return false},getDraftRootPath:function(t){const e=t.getModel().getMetaModel();const n=function(t,i){let a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;const s=a?t:new RegExp(/.*(?=\/)/).exec(t)?.[0];if(s&&s!=="/"){const t=e.getMetaPath(s);const a=o.getInvolvedDataModelObjects(e.getContext(t));if(a.targetEntitySet?.annotations.Common?.DraftRoot){return s}return n(s,i,false)}return undefined};return n(t.getPath(),t.getModel())},getStickyRootPath:function(t){const e=t.getModel().getMetaModel();const n=function(t,i){let a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;const s=a?t:new RegExp(/.*(?=\/)/).exec(t)?.[0];if(s&&s!=="/"){const t=e.getMetaPath(s);const a=o.getInvolvedDataModelObjects(e.getContext(t));if(a.startingEntitySet===a.targetEntitySet&&a.targetEntitySet?.annotations?.Session?.StickySessionSupported){return s}return n(s,i,false)}return undefined};return n(t.getPath(),t.getModel())},getTargetEntitySet:function(t){const e=t.getPath();if(t.getObject("$kind")==="EntitySet"||t.getObject("$kind")==="Action"||t.getObject("0/$kind")==="Action"){return e}const n=h.getEntitySetPath(e);return`/${t.getObject(n)}`},getEntitySetPath:function(t,e){let n="";if(!e){n=`/${t.split("/").filter(h.filterOutNavPropBinding).join("/$NavigationPropertyBinding/")}`}else{const o=t.split("/").filter(h.filterOutNavPropBinding);if(o.length>1){const t={growingPath:"/",pendingNavPropBinding:""};const i=o.reduce((t,n,o)=>{const i=!!o&&"/$NavigationPropertyBinding/"||"";let{growingPath:a,pendingNavPropBinding:s}=t;const r=a+i;const c=e.getObject(r);const d=s?`${s}/${n}`:n;if(c&&Object.keys(c).length>0&&c.hasOwnProperty(d)){a=r+d.replace("/","%2F");s=""}else{s+=s?`/${n}`:n}return{growingPath:a,pendingNavPropBinding:s}},t);n=i.growingPath}else{n=`/${o[0]}`}}return n},getActionParameterItemsModelPath:function(t){return t&&t.$Name?`{path: 'mvfview>/${t.$Name}'}`:undefined},filterOutNavPropBinding:function(t){return t!==""&&t!=="$NavigationPropertyBinding"},enhanceInternalJSONModel:function(t){const e=t.bindContext;t.bindContext=function(t,n,o,i){const a=e.apply(this,[t,n,o,i]);const s=a.getBoundContext;a.getBoundContext=function(){const t=s.apply(this);if(t){t.setProperty=function(t,e){if(this.getObject()===undefined){this.getModel().setProperty(this.getPath(),{})}const n=t.split("/");let o=this.getPath().replace(/\/$/,"");for(let t=0;t<n.length-1;t++){o=`${o}/${n[t]}`;if(this.getModel().getProperty(o)===undefined){this.getModel().setProperty(o,{})}}this.getModel().setProperty(t,e,this)}}return t};return a}},enhanceUiJSONModel:function(t,e){const n=t.setProperty;t.setProperty=function(o,i,a,s){if(o==="/isEditable"){t.setProperty("/editMode",i?e.EditMode.Editable:e.EditMode.Display,a,s)}return n.apply(this,[o,i,a,s])}},enhanceViewJSONModel:function(t){const e=t._getObject;t._getObject=function(t,n){if(t===undefined||t===""){t="/"}return e.apply(this,[t,n])}},isFilteringCaseSensitive:function(t){if(!t){return undefined}const e=t.getObject("/@Org.OData.Capabilities.V1.FilterFunctions");return e?e.indexOf("tolower")===-1:true},getMetaPathForContext:function(t){const e=t.getModel(),n=e.getMetaModel(),o=t.getPath();return n&&o&&n.getMetaPath(o)},getRootEntitySetPath:function(t){let e="";const n=t?t.split("/"):[];if(n.length>1){e=n[1]}return e},getAbsoluteMetaPathForListBinding:function(t,e){const n=t.getModel().getMetaModel();let o;if(typeof e==="string"){if(e.startsWith("/")){o=n.getMetaPath(e)}else{const i=t.getBindingContext();const a=i.getPath();o=n.getMetaPath(`${a}/${e}`)}}else{const t=e;const i=t.getRootBinding();if(t===i){o=n.getMetaPath(t.getPath())}else{const e=i.getPath();const a=t.getPath();o=n.getMetaPath(`${e}/${a}`)}}return o},isDraftRoot:function(t){return this.getDraftRoot(t)!==undefined},isDraftNode:function(t){return this.getDraftNode(t)!==undefined},isSticky:function(t){return this.getStickySession(t)!==undefined},isUpdateHidden:function(t,e){if(l(t)){return t.annotations.UI?.UpdateHidden??e?.annotations.UI?.UpdateHidden}},getDraftRoot:function(t){return l(t)?t.annotations.Common?.DraftRoot:undefined},getDraftNode:function(t){return l(t)?t.annotations.Common?.DraftNode:undefined},getStickySession:function(t){return l(t)?t.annotations.Session?.StickySessionSupported:undefined},getDeleteHidden:function(t,e){if(l(t)){return t.annotations.UI?.DeleteHidden??e.annotations.UI?.DeleteHidden}},getAbsolutePathFromListBinding(t){const e=t.getModel().getMetaModel();let n;const o=t.getRootBinding();if(t===o){n=e.getMetaPath(t.getPath())}else{const i=o?.getPath();const a=t.getPath();n=e.getMetaPath(`${i}/${a}`)}return n},enhanceODataModel(e,a){e.virtualPropertyBindingRegistry=new Array;const c=e.setMessages;const g=new r({});g.setDefaultBindingMode(s.OneWay);const l=g.setProperty;const u=g.getProperty;g.getProperty=function(t,n){const[o,a]=t.split("@$ui5.fe.");if(n&&n.isTransient()!==true&&a==="@Common/ExternalID"){const t=n.getObject();if(t){const t=new i(f(e.getMetaModel()),e.getMetaModel().getMetaPath(n.getPath()),e.getMetaModel().getMetaPath(n.getPath()));const a=t.getMetaPathForPath(o).getTarget().annotations.Common?.ExternalID;if(d(a)){return n.getObject(a.path)}else{return n.getObject(o)}}else{return undefined}}else if(n&&a==="contextPath"){return n.getPath()}return u.apply(this,[t,n])};g.setProperty=function(n,o,a,s){let r=n;if(a){r=a.getPath(n)}const c=()=>{this.refresh()};const[g,u]=n.split("@$ui5.fe.");if(a&&u==="@Common/ExternalID"){a.setProperty(g,o);const n=new i(f(e.getMetaModel()),e.getMetaModel().getMetaPath(a.getPath()),e.getMetaModel().getMetaPath(a.getPath()));const s=n.getMetaPathForPath(g).getTarget().annotations.Common?.ExternalID;if(d(s)){const e=s.path;const o=[e.substring(0,e.lastIndexOf("/"))];const i=n.getMetaPathForPath(e).getTarget().annotations.Common?.Text;if(d(i)){const t=i.path;if(t.includes("/")){o.push(t)}}a.requestSideEffects(o).then(c).catch(e=>{t.error(e)})}}const p=r.split("/");let h="";for(let t=0;t<p.length-1;t++){if(t>0){h+="/"}h+=p[t];if(this.getObject(h)===undefined){this.setProperty(h,{})}}return l.apply(this,[n,o,a,s])};function y(t,e){for(const n in e){const o=e?.[n];const i=o?.isA?.("sap.ui.model.odata.v4.Context");if(typeof o==="object"&&!i){e[n]=y(t,e[n]);if(Object.keys(e[n]).length===0){delete e[n]}}for(const o of t){if(n.endsWith(o)){delete e[n]}}}return e}e._localAnnotationModel=g;e.getLocalAnnotationModel=function(){return this._localAnnotationModel};e.setMessages=function(t){const e=y(["@$ui5.fe.messageType","@$ui5.fe.messageText"],this._localAnnotationModel.getData());this._localAnnotationModel.setData(e);for(const e in t){this._localAnnotationModel.setProperty(`${e}@$ui5.fe.messageType`,t[e][0].getType());this._localAnnotationModel.setProperty(`${e}@$ui5.fe.messageText`,t[e][0].getMessage())}c.apply(this,[t])};const P=e.bindProperty.bind(e);e.bindProperty=function(i,s,r){const c=a.getEnvironmentCapabilities()?.getCapabilities().DisableInputAssistance;const d=h.setUpRecommendationLocalModelBinding(this,P,i,s,c);if(d){return d}if(i.endsWith("@$ui5.fe.@Common/ExternalID")&&s){const n=P(i,s);e.virtualPropertyBindingRegistry.push(n);const o=this._localAnnotationModel.bindProperty(i,s);n.attachChange(()=>{o.refresh()});n.requestValue().then(()=>{o.refresh();return}).catch(e=>{t.error(e)});return o}if(i.includes("@$ui5.fe.")){const t=this._localAnnotationModel.bindProperty(i,s);if(i.endsWith("@$ui5.fe.@Common/ExternalID")){return t}t.updateRequired=function(t){return t&&t===e};if(i.includes("@$ui5.fe.virtual.")){const e=o.getVirtualBindingExpression(i,o.convertTypes(this.getMetaModel()));const a=new n({any:p(e),bindBackProperty:i});const r=t.destroy.bind(t);t.destroy=()=>{a?.destroy();return r()};const c=t.setContext;if(c){t.setContext=e=>{a?.setBindingContext(e);return c.bind(t)(e)}}a.setModel(this);const d=a.getBindingInfo("any")?.binding;const g=d?.checkUpdate;if(g){a.getBindingInfo("any").binding.checkUpdate=()=>g.bind(d)(true)}a.setBindingContext(s)}return t}return P(i,s,r)};const m=e.destroy.bind(e);e.destroy=function(){for(const t of e.virtualPropertyBindingRegistry){t.destroy()}this._localAnnotationModel.destroy();return m.apply(this)}},fetchTextFromMetaModel(e,n,o){let i=e!==undefined?e:"";if(e?.startsWith("{metaModel>")){const a=e.substring(11,e.length-1);try{if(n){i=n.getEntityTypeAnnotation(a).annotation?.toString()??""}else{i=o?.getObject(a)}}catch(e){t.info(`Unable to retrieve text from meta model using path ${a}`)}}return i},getMessagesPath:function(t,e){const n=t.getMetaContext(e);const o=u(n);const i=o.targetEntityType.annotations.Common?.Messages;return d(i)?i.path:undefined},setUpRecommendationLocalModelBinding:function(e,n,o,i,a){if(o.includes("ui5.fe.recommendations")){const r=e.getLocalAnnotationModel().bindProperty(o,i);const d=t=>{const e=r.setContext;if(e){r.setContext=n=>{t?.setContext(n);return e.bind(t)(n)}}};if(i){const{recommendationComplexProperty:g,isRecommendedProperty:l}=h.validateRecommendationBindingPath(i,o);if(g&&l&&!a){const o=e.virtualPropertyBindingRegistry.some(t=>i.getPath()===t.getContext()?.getPath()&&g===t.getPath());if(!o){const o=n(g,i);o.setType(new c,"any");o.setBindingMode(s.OneWay);e.virtualPropertyBindingRegistry.push(o);o.attachChange(t=>{const e=t.getSource();const n=t.getSource().getContext();if(n){const t=e.getValue();h.setRecommendationsOnLocalAnnotationModel(t,n);r.refresh()}});o.requestValue().catch(e=>{t.error("Recommendations could not be resolved",e)});d(o)}}}r.updateRequired=function(t){return this.getContext()?t&&t===e:t&&this.getModel()===t};return r}},validateRecommendationBindingPath:function(t,e){const n=t.getModel().getMetaModel();const o=n.getMetaPath(t.getPath());const i=n.getMetaContext(o);const a=u(i).targetEntityType;const s=a?.annotations?.UI?.Recommendations?.path;const r=e.split("@$ui5.fe.recommendations")[0];const c=a.entityProperties.some(t=>{if(t.name===s){return t?.targetType?.properties.some(t=>r===t.name)}});return{recommendationComplexProperty:s,isRecommendedProperty:c}},setRecommendationsOnLocalAnnotationModel:function(t,e){if(t){for(const n in t){const o=t[n];const i=n;const a=e.getModel().getLocalAnnotationModel();const s=[];for(const t of o){if(t.RecommendedFieldIsSuggestion){const n=e.getPath(i+"@$ui5.fe.recommendations.placeholderValue");const o=e.getPath(i+"@$ui5.fe.recommendations.placeholderDescription");a.setProperty(n,t.RecommendedFieldValue,e,false);a.setProperty(o,t.RecommendedFieldDescription,e,false)}if(t.RecommendedFieldValue){s.push(t.RecommendedFieldValue)}}if(!o||!o.length){const t=e.getPath(i+"@$ui5.fe.recommendations.placeholderValue");const n=e.getPath(i+"@$ui5.fe.recommendations.placeholderDescription");a.setProperty(t,null,e,false);a.setProperty(n,"",e,false)}a.setProperty(e.getPath(i+"@$ui5.fe.recommendations.typeAheadValues"),s,e,false);a.setProperty(e.getPath("recommendationContext"),e)}}},getAlternateAndSecondaryKeys:(t,e)=>{const n=[];const o=t=>{t?.annotations?.Core?.AlternateKeys?.forEach(t=>{t.Key.forEach(t=>{n.push(t.Name.value)})})};const i=t=>{t?.annotations?.Common?.SecondaryKey?.forEach(t=>{if(!n.includes(t.value)){n.push(t.value)}})};o(e);if(!n.length){o(t)}i(t);return n}};return h},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/PasteHelper", ["sap/base/Log","sap/fe/core/converters/MetaModelConverter","sap/m/MessageBox","sap/ui/core/Lib","sap/ui/core/Messaging","sap/ui/core/util/PasteHelper","../converters/ManifestSettings","../templating/UIFormatters"],function(e,t,n,o,r,s,a,i){"use strict";var l=i.FieldEditMode;var u=a.CreationMode;const g=function(e,t,n,o){let r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;let s=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;const a=n.getProperty(e),i={parseKeepsEmptyString:true},l=o.getUI5Type(`${t}/${e}`,i);let u,g;if(r===true){u=!a;g=n.getProperty(`${e}@Org.OData.Core.V1.Computed`)}else{u=!a||n.getProperty(`${e}@Org.OData.Core.V1.Computed`)}return{property:e,ignore:s||u,computed:g,type:l}};const c=function(e){const t=[...e];const r=o.getResourceBundleFor("sap.fe.core"),s=r.getText("C_PASTE_HELPER_SAPFE_PASTE_ERROR_CORRECTION_MESSAGE"),a=r.getText("C_PASTE_HELPER_SAPFE_PASTE_ERROR_CORRECTION_NOTE");let i;if(t.length>1){i=r.getText("C_PASTE_HELPER_SAPFE_PASTE_ERROR_MESSAGE_PLURAL",[t.length])}else{i=r.getText("C_PASTE_HELPER_SAPFE_PASTE_ERROR_MESSAGE_SINGULAR")}t.unshift("");t.unshift(a);t.unshift(s);n.error(i,{title:r.getText("C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_TITLE_ERROR"),details:t.join("<br>")})};const f={displayErrorMessages:c,formatCustomMessage:function(e,t){let n="";const r=e.length;const s=o.getResourceBundleFor("sap.fe.core"),a=s.getText("T_MESSAGE_GROUP_DESCRIPTION_TABLE_ROW");if(r>0){n+=`${a} ${t}: `;e.forEach((e,t)=>{if(e.messageText){n+=e.messageText+(t+1!==r?" ":"")}})}return n},getColumnInfo:async function(e,n){let o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;const r=e.getRowBinding().getModel(),s=r.getMetaModel(),a=r.resolve(e.getRowBinding().getPath(),e.getRowBinding().getContext()),i=s.getMetaContext(a),l=t.getInvolvedDataModelObjects(i).targetEntityType.entityProperties,u=[],g=e.getParent().getTableDefinition();function c(e,t,n){if(e.text&&t){u.push(e.text)}if(e.exportSettings!==null){if(o&&n.includes("/")){return{property:e.path,ignore:true}}else{let t=false;if(e.path){t=u.includes(e.path)}return f.getInfoForEntityProperty(e.path,a,i,s,g.control.enablePastingOfComputedProperties,t)}}}return e.getControlDelegate().fetchProperties(e).then(t=>{const o=Object.assign({},...t.map(e=>({[e.name]:e})));const r=[];(n??e.getColumns()).forEach(e=>{const t=o[e.getPropertyKey()];if(t.propertyInfos){t.propertyInfos.forEach(e=>{const t=o[e],n=this.hasValueHelpProperty(l,t),s=c(t,n,e);if(s){r.push(s)}});if(t.exportDataPointTargetValue){r.push({property:"targetValueFromDataPoint",ignore:true})}}else if(t.exportSettings!==null){if(t.path){r.push(f.getInfoForEntityProperty(t.path,a,i,s,g.control.enablePastingOfComputedProperties))}else{r.push({property:"unused",type:null,ignore:true})}}});return r})},getInfoForEntityProperty:g,hasValueHelpProperty:function(e,t){const n=e.find(e=>e.name===t.path);if(n){return!!n.annotations?.Common?.ValueList}return false},parsePastedData:async function(e,t,n){let o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;const r=await this.getColumnInfo(t,n,o);const a=t.getParent().getTableDefinition();const i=e.length?e[0].length:0;let l=-1;for(let e=0;e<r.length&&l<0;e++){if(!r[e].ignore&&!r[e].computed){l=e}}if(a.control.enablePastingOfComputedProperties){const t=r.filter(function(e){return e.computed});t.forEach(function(t){const n=r.indexOf(t);const o=e.every(e=>e[n]==="");if(o){t.ignore=true}})}const u=await(l<0||l>i-1?{parsedData:[],errors:null}:s.parse(e,r));if(u.errors){const e=u.errors.map(function(e){return e.message});this.displayErrorMessages(e);return[]}else{return u.parsedData}},_updateContexts:async function(t,n,o){let r=0;const s=[];for(const a of o){const o=n[r++];if(o){for(const n in a){if(t.getParent().getPropertyEditMode(n,o)===l.Editable){s.push(o.setProperty(n,a[n]))}else{e.warning(`Property ${n} is not editable for row ${o.getIndex()}`)}}}}await Promise.allSettled(s)},getPasteInformationForReponsiveTable:function(e,t,n,o){let r=0;const s=o.getRowBinding().getCurrentContexts().findIndex(e=>e.isTransient());const a=t.rows;let i=0;const l=t.columns.length>1?t.columns:o.getColumns().slice(o.getColumns().indexOf(t.columns[0]));if(t.columns.length===1&&t.rows.length===1){if(n<=s&&n+e.length>s){r=e.length-(s-n)-1;i=e.length}else{r=0;i=e.length}}else{const n=a.filter(e=>e.isTransient())?.pop();const o=n?a.indexOf(n):-1;i=Math.min(e.length,t.rows.length);if(o>-1){i=o===t.rows.length-1?e.length:i;r=o===t.rows.length-1?e.length-o-1:0}}return{rows:a,columns:l,updatedRowCount:i,numberOfNewCreationRows:r}},getPasteInformationForGridTable:function(e,t,n,o){let r=0;const s=t.rows;let a=0;const i=o.getRowBinding().getLength();let l=t.columns.length>1?t.columns:o.getColumns().slice(o.getColumns().indexOf(t.columns[0]));if(t.columns.length===1&&t.rows.length===1){r=n+e.length>i?n+e.length-i:0;l=o.getColumns().slice(o.getColumns().indexOf(t.columns[0]));a=e.length}else{r=n+s.length>=i?n+e.length-i:0;a=r===0?Math.min(e.length,t.rows.length):e.length}return{rows:s,columns:l,updatedRowCount:a,numberOfNewCreationRows:r}},getPasteInformation:function(t,n,o,r){let s=null;switch(r.data("tableType")){case"GridTable":s=this.getPasteInformationForGridTable(t,n,o,r);break;case"ResponsiveTable":s=this.getPasteInformationForReponsiveTable(t,n,o,r);break;default:e.warning(`Paste operation is not supported for table type ${r.data("tableType")}`)}if(s&&s?.numberOfNewCreationRows>0&&r.getParent().getCreationMode().getName()!==u.InlineCreationRows){s.updatedRowCount-=s.numberOfNewCreationRows;s.numberOfNewCreationRows=0}return s},pasteRangeData:async function(e,t,n){const o=t.rows[0].getIndex();const r=this.getPasteInformation(e,t,o,n);if(!r)return;const s=await this.parsePastedData(e,n,r.columns,false);if(s.length>0){if(r.numberOfNewCreationRows>0){await n.getParent().createEmptyRows(n.getRowBinding(),n,false,r.numberOfNewCreationRows,true)}r.rows=await n.getRowBinding().requestContexts(o,r.updatedRowCount);await this._updateContexts(n,r.rows,s);const e=r.rows.find(e=>e.isTransient())?.getIndex();if(e){n.focusRow(e)}return{updatedRowCount:r.updatedRowCount,updatedColCount:Object.keys(s[0]).length,numberOfNewCreationRows:r.numberOfNewCreationRows<0?0:r.numberOfNewCreationRows,posFirstInlineCreationRow:e}}},pasteData:async function(t,n,o){const s=o.editFlow;const a=n.getParent().getTableDefinition();let i=[];return this.parsePastedData(t,n).then(async e=>{i=e||[];return Promise.all(i.map(async e=>s.validateDocument(n.getBindingContext(),{data:e,customValidationFunction:a?.control?.customValidationFunction})))}).then(e=>{const t=e.reduce(function(e,t,n){if(t.length>0){e.push({messages:t,row:n+1})}return e},[]);if(t.length>0){const e=t.map(e=>this.formatCustomMessage(e.messages,e.row));this.displayErrorMessages(e);return[]}return i}).then(async e=>{const t=n.getRowBinding().getCurrentContexts().filter(e=>e.isTransient());const i=t.pop();const l=!!r.getMessageModel().getData().find(e=>i&&e.getTargets()[0].includes(i.getPath()));const u=e.length>0?await s.createMultipleDocuments(n.getRowBinding(),e,a?.control?.createAtEnd,true,o.editFlow.onBeforeCreate):undefined;if(i&&!l){i?.delete();await n.getParent().createEmptyRows(n.getRowBinding(),n,false,1)}return u}).catch(t=>{e.error("Error while pasting data",t);return undefined})}};return f},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/PromiseKeeper", [],function(){"use strict";var e={};let r=function(){function r(){this.promise=new Promise((e,r)=>{this.resolver=e;this.rejector=r})}e=r;var t=r.prototype;t.resolve=function e(r){if(this.resolver){this.resolver(r)}};t.reject=function e(r){if(this.rejector){if(r===undefined||typeof r==="string"){this.rejector(new Error(r))}else{this.rejector(r)}}};return r}();e=r;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/RecommendationHelper", [],function(){"use strict";var e={};const t={sortRecommendationsData(e){const t=e.recommendations;t.sort((e,t)=>{if(e.probability&&t.probability){if(e.probability<t.probability){return 1}else if(e.probability>t.probability){return-1}}return 0});const r=e;delete r.recommendations;r.additionalValues=t},transformRecommendationsForInternalStorage(e){if(e.hasOwnProperty("recommendations")){this.sortRecommendationsData(e);return}else if(Array.isArray(e)){e.forEach(e=>{Object.values(e).forEach(e=>{if(typeof e==="object"){this.transformRecommendationsForInternalStorage(e)}})})}else{Object.values(e).forEach(e=>{if(typeof e==="object"){this.transformRecommendationsForInternalStorage(e)}})}},clearRecommendations:(e,t)=>{const r=e.getModel("internal");const o=r.getProperty("/currentCtxt");const n=e.getBindingContext("pageInternal")?.getProperty("createMode");if(o?.getPath()!==t?.getPath()||n===true){r.setProperty("/recommendationsData",{})}}};e.recommendationHelper=t;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/ResourceModelHelper", ["sap/base/Log","sap/ui/core/Component"],function(e,t){"use strict";var o={};function n(e){if(e.isA("sap.ui.core.mvc.Controller")||e.isA("sap.ui.core.mvc.ControllerExtension")){return e.getView()?.getModel("sap.fe.i18n")}else{let o=e.getModel("sap.fe.i18n");if(!o){o=t.getOwnerComponentFor(e)?.getModel("sap.fe.i18n")}return o}}o.getResourceModel=n;function r(t,o){const r=/{([A-Za-z0-9_.|@]+)>([A-Za-z0-9_.|]+)}/.exec(t);if(r){try{if(r[1]==="sap.fe.i18n"){return n(o).getText(r[2])}else{const e=o.getModel(r[1]).getResourceBundle();return e.getText(r[2])}}catch(o){e.info(`Unable to retrieve localized text ${t}`)}}return t}o.getLocalizedText=r;return{getResourceModel:n,getLocalizedText:r}},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/SemanticKeyHelper", ["sap/base/Log"],function(t){"use strict";const e={getSemanticKeys:function(t,e){return t.getObject(`/${e}/@com.sap.vocabularies.Common.v1.SemanticKey`)},getSemanticObjectInformation:function(t,e){const n=t.getObject(`/${e}/@com.sap.vocabularies.Common.v1.SemanticObject`);const a=this.getSemanticKeys(t,e);return{semanticObject:n,semanticKeys:a}},getPathContent(t,e){const n=t.length===1;return t.map(t=>{const a=t.value;const o=e[t.name].$Type==="Edm.String"?`'${encodeURIComponent(a)}'`:a;return n?o:`${t.name}=${o}`}).join(",")},getSemanticPath:function(e){let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const a=e.getModel().getMetaModel(),o=a.getMetaContext(e.getPath()).getObject("@sapui.name"),c=this.getSemanticObjectInformation(a,o);let s,i;if(e.isA("sap.ui.model.odata.v4.ODataListBinding")&&e.isRelative()){s=e.getHeaderContext().getPath()}else{s=e.getPath()}if(this._isPathForSemantic(s)&&c.semanticKeys&&c.semanticKeys.length!==0){const n=c.semanticKeys;const s=a.getObject("/"+a.getObject(`/${o}`).$Type);try{const t=n.map(t=>{const n=t.$PropertyPath;const a=e.getProperty(n);if(a===undefined||a===null){throw new Error(`Couldn't resolve semantic key value for ${n}`)}return{name:n,value:a}});const a=this.getPathContent(t,s);i=`/${o}(${a})`}catch(e){t.info(e)}}return n?i:i||s},_isPathForSemantic:function(t){return/^[^()]+\([^()]+\)$/.test(t)}};return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/SizeHelper", ["sap/m/Button","sap/ui/core/StaticArea","sap/ui/core/UIArea","sap/ui/dom/units/Rem"],function(t,i,e,n){"use strict";const s={calls:0,hiddenButton:undefined,init:function(){this.calls++;this.hiddenButton=this.hiddenButton?this.hiddenButton:(new t).placeAt(i.getDomRef());this.hiddenButton.setVisible(false)},getButtonWidth:function(t){if(!t||!this.hiddenButton){return 0}this.hiddenButton.setVisible(true);this.hiddenButton.setText(t);e.rerenderControl(this.hiddenButton);const i=n.fromPx(this.hiddenButton.getDomRef()?.scrollWidth);this.hiddenButton.setVisible(false);return Math.round(i*100)/100},exit:function(){this.calls--;if(this.calls===0){this.hiddenButton?.destroy();this.hiddenButton=undefined}}};return s},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/StableIdHelper", ["sap/fe/core/helpers/TypeGuards"],function(a){"use strict";var e={};var t=a.isPathAnnotationExpression;const r=a=>{const e=[a.SemanticObject.valueOf(),a.Action?.valueOf()];if(a.RequiresContext){e.push("RequiresContext")}return e.filter(a=>a).join("::")};const i=a=>{const e=a.Value;if(e.path){return e.path}else if(e.$Apply&&e.$Function==="odata.concat"){return e.$Apply.map(a=>a.$Path).join("::")}return p(e.replace(/ /g,"_"))};const n=a=>{const e=a.Value;if(e?.path){return e.path}else if(e?.$Apply&&e.$Function==="odata.concat"){return e.$Apply.map(a=>a.$Path).join("::")}const r=a.Url;if(t(r)&&r?.path){return r.path}else if(r?.$Apply&&r.$Function==="odata.concat"){return r.$Apply.map(a=>a.$Path).join("::")}return p(e?.replace(/ /g,"_"))};const o=a=>/^([A-Za-z_][-A-Za-z0-9_.:]*)$/.test(a);const c=a=>{a=a.replace("com.sap.vocabularies.UI.v1.","");a=a.replace("com.sap.vocabularies.Communication.v1.","");return a};const l=function(a){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;let t;switch(a.$Type){case"com.sap.vocabularies.UI.v1.ReferenceFacet":t=a.ID??a.Target.value;break;case"com.sap.vocabularies.UI.v1.CollectionFacet":t=a.ID??"undefined";break;case"com.sap.vocabularies.UI.v1.FieldGroupType":t=a.Label;break;default:t=u(a);break}t=t?.toString();return t&&e?d(t):t};e.createIdForAnnotation=l;const s=a=>{const e=a.map(a=>{if(typeof a==="string"||!a){return a}return l(a.targetObject||a,false)});const t=e.filter(a=>a).join("::");return d(t)};e.generate=s;const u=function(a){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let t="";switch(a.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":t=`DataFieldForAction::${a.Action}`;break;case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":t=`DataFieldForActionGroup::${a.ID}`;break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":t=`DataFieldForIntentBasedNavigation::${r(a)}`;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":t=`DataFieldForAnnotation::${a.Target.value}`;break;case"com.sap.vocabularies.UI.v1.DataFieldWithAction":t=`DataFieldWithAction::${i(a)}::${a.Action}`;break;case"com.sap.vocabularies.UI.v1.DataField":t=`DataField::${i(a)}`;break;case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":t=`DataFieldWithIntentBasedNavigation::${i(a)}::${r(a)}`;break;case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":t=`DataFieldWithNavigationPath::${i(a)}`;if(a.Target.type==="NavigationPropertyPath"&&!e){t=`${t}::${a.Target.value}`}break;case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":t=`DataFieldWithUrl::${n(a)}`;break;default:break}return t?d(t):undefined};e.getStableIdPartFromDataField=u;const p=a=>{if(a.includes(" ")){throw Error(`${a} - Spaces are not allowed in ID parts.`)}a=a.replace(/^\/|^@|^#|^\*/,"").replace(/\/$|@$|#$|\*$/,"").replace(/[/|@()#]/g,"::");while(a.includes("::::")){a=a.replace("::::","::")}if(a.slice(-2)=="::"){a=a.slice(0,-2)}return a};e.replaceSpecialChars=p;const d=function(a){a=p(c(a));if(o(a)){return a}else{throw Error(`${a} - Stable Id could not be generated due to insufficient information.`)}};e.prepareId=d;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/StandardRecommendationHelper", ["sap/fe/base/BindingToolkit","sap/fe/core/converters/MetaModelConverter","../templating/UIFormatters","./BindingToolkitEvaluator","./TypeGuards"],function(e,t,o,n,r){"use strict";var a={};var s=r.isPropertyPathExpression;var c=r.isPathAnnotationExpression;var i=n.evaluateExpression;var d=o.getDisplayMode;var l=e.getExpressionFromAnnotation;var g=e.compileExpression;let m;const h={storeRecommendations:(e,t,o)=>{const n=t.getProperty("/recommendationsData")||{};h.clearRecommendationsDataFromModelForGivenContexts(n,o);h.enhanceRecommendationModel(e,n);h.updateFetchedContextPaths(o,t);h.updateContextsKeysInModel(n,o);n["version"]=2;t.setProperty("/recommendationsData",n);t.refresh(true)},ignoreRecommendationForContexts:(e,t)=>{let o=t.getProperty("/recommendationContexts")||[];const n=t.getProperty("/recommendationsData");const r=t.getProperty("/ignoredContextPaths")||[];e.forEach(e=>{const t=e.getPath();r.push(t);o=o.filter(e=>!(e?.context).getPath().startsWith(t));Object.keys(n).forEach(e=>{if(e.startsWith(t)){delete n[e]}})});t.setProperty("/recommendationsData",n);t.setProperty("/recommendationContexts",o);t.setProperty("/ignoredContextPaths",r)},clearIgnoredContexts:(e,t)=>{let o=e.getProperty("/ignoredContextPaths")||[];o=o.filter(e=>!e.startsWith(t));e.setProperty("/ignoredContextPaths",o)},checkIfRecommendationRoleExistsForContext:(e,o)=>{const n=t.getInvolvedDataModelObjectsForTargetPath((e?.context).getPath(),(e?.context).getModel()?.getMetaModel());const r=n?.targetEntityType.name;return Object.keys(o.roles).includes(r)},updateContextsKeysInModel:(e,o)=>{if(!e.hasOwnProperty("keys")){e["keys"]={}}const n=e["keys"];o.forEach(e=>{const o=e.getModel()?.getMetaModel();const r=o.getMetaPath(e?.getPath());const a=t.getInvolvedDataModelObjects(o.getMetaContext(r));const s=a.targetEntityType.annotations.Common?.SemanticKey;if(s){if(n&&!n.hasOwnProperty(r)&&s){n[r]=s.map(e=>e.value)}}})},clearRecommendationsDataFromModelForGivenContexts:(e,t)=>{if(t){Object.keys(e).forEach(o=>{const n=o.lastIndexOf(")");if(t.find(e=>e.getPath()===o.substring(0,n+1))){delete e[o]}})}},enhanceRecommendationModel:(e,t)=>{e?.forEach(e=>{const o=e.AIRecommendedFieldPath;if(o){const n=[];let r=false;e._AIAltvRecmddFldVals?.forEach(t=>{const o={value:t.AIRecommendedFieldValue,probability:t.AIRecommendedFieldScoreValue};if(e.AIRecommendedFieldValue===t.AIRecommendedFieldValue){r=true}n.push(o)});t[o]={value:r?e.AIRecommendedFieldValue:undefined,text:r?e.AIRecommendedFieldDescription:undefined,additionalValues:n}}})},getStandardRecommendations:function(e,t,o){if(e&&t){const n=e.getPath()+"/"+t;return o[n]||undefined}},getDisplayModeForTargetPath(e,o){const n=t.getInvolvedDataModelObjectsForTargetPath(e,o);const r=n&&d(n);return r?r:"DescriptionValue"},isRecommendationFieldNull(e,o,n){const r=t.getInvolvedDataModelObjectsForTargetPath(o,e.getModel()?.getMetaModel());if(!e?.getProperty(n)){const t=h.getDisplayModeForTargetPath(o,e?.getModel()?.getMetaModel());if(t&&t!=="Value"){const t=c(r?.targetObject?.annotations?.Common?.Text)&&r?.targetObject?.annotations?.Common?.Text?.path;return t?!e?.getProperty(t):true}return true}return false},updateFetchedContextPaths:function(e,t){const o=[];e?.forEach(e=>{const t=e?.getPath();if(t&&!o.includes(t)){o.push(t)}});t?.setProperty("/fetchedContextPaths",o);t.refresh()},getContextsWithNoRecommendations:function(e,t){const o=t.getProperty("/fetchedContextPaths")||[];const n=t.getProperty("/ignoredContextPaths")||[];return e.filter(e=>{const t=(e?.context).getPath();return!o.includes(t)&&!n.includes(t)})},resetRecommendations:function(e){const t=e.getProperty("/recommendationsData");if(t&&t.hasOwnProperty("version")){e.setProperty("/recommendationsData",{});e?.setProperty("/fetchedContextPaths",[]);e?.setProperty("/ignoredContextPaths",[]);e.refresh(true)}},getCurrentRootContext:function(){return m},setCurrentRootContext:function(e){m=e},addContextIdentifierText(e,t){for(const o of e?.recommendationData||[]){let e=0;const n=[];if(o.context?.getPath()!==t){if(o.contextIdentifier&&o.context){o.contextIdentifier.forEach(t=>{const r=`${o.context?.getPath()})/${t}`;const a=this.getTextForKey(o.context,r,t);if(a){n.push(e===0?`${a}`:` ${a}`);e=e+1}})}}o.contextIdentifierText=n}},getEntityName(e){const o=t.getInvolvedDataModelObjectsForTargetPath(e.getPath(),e.getModel()?.getMetaModel());const n=o?.targetEntityType?.annotations?.UI?.HeaderInfo?.TypeName;return n&&g(l(n))},getTextForKey(e,o,n){let r="";const a=t.getInvolvedDataModelObjectsForTargetPath(o,e?.getModel()?.getMetaModel());const d=a?.targetObject;const g=(c(d)||s(d))&&d.$target||d;const m=l(g?.annotations?.Common?.Text);if(m){try{r=i(m,{"":e.getObject()});r=r?r:e.getProperty(n)}catch{r=e.getProperty(n)}}return r??e.getProperty(n)}};a.standardRecommendationHelper=h;return a},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/Synchronization", [],function(){"use strict";let e=function(){function e(){this._fnResolve=null;this._isResolved=false}var s=e.prototype;s.waitFor=async function e(){if(this._isResolved){return Promise.resolve()}else{return new Promise(e=>{this._fnResolve=e})}};s.resolve=function e(){if(!this._isResolved){this._isResolved=true;if(this._fnResolve){this._fnResolve()}}};return e}();return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/TitleHelper", ["sap/fe/base/BindingToolkit","sap/fe/core/formatters/ValueFormatter","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataFieldFormatters","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/UIFormatters","../converters/annotations/DataField"],function(t,e,a,n,o,r,i,s){"use strict";var l={};var c=s.isDataField;var u=r.getRelativePaths;var f=r.getContextRelativeTargetObjectPath;var T=r.enhanceDataModelPath;var p=o.getLabelForConnectedFields;var d=n.isPropertyPathExpression;var m=n.isPathAnnotationExpression;var v=a.UI;var g=a.Draft;var E=t.transformRecursively;var I=t.pathInModel;var D=t.or;var _=t.not;var h=t.isUndefinedExpression;var O=t.isEmpty;var y=t.isConstant;var A=t.ifElse;var C=t.getExpressionFromAnnotation;var F=t.formatWithTypeInformation;var N=t.formatResult;var x=t.constant;var $=t.compileExpression;const V=function(t,e){return E(t,"PathInModel",t=>{let a=t;if(t.modelName===undefined){const n=T(e,t.path);a=F(n.targetObject,t)}return a})};l.formatValueRecursively=V;const b=t=>{const e=t.targetObject;return d(e)?e.$target:e};const P=t=>{const e=t.targetEntitySet?.annotations?.Common?.DraftRoot;const a=t.targetEntitySet?.annotations?.Common?.DraftNode;if(!!e||!!a){return _(g.IsNewObject)}return true};const R=t=>t._type==="Constant"?x(!t.value):O(t);const U=function(t,e,a){const n=a?.displayMode;const o=b(t);const r=n||i.getDisplayMode(t);const s=o?.annotations?.Common?.Text;const l=u(t);if(o){e=F(o,e)}let c=[e];if(r!=="Value"&&s){switch(r){case"Description":c=[C(s,l)];break;case"DescriptionValue":const t=a?.splitTitleOnTwoLines===undefined?A(!!s.annotations?.UI?.TextArrangement,e,x("")):A(!!a?.splitTitleOnTwoLines,x(""),e);c=[C(s,l),t];break;case"ValueDescription":c=[e,A(!!a?.splitTitleOnTwoLines,x(""),C(s,l))];break}}return c};const L=function(t,e){return E(t,"PathInModel",t=>{if(t.modelName!==undefined)return t;const a=T(e,t.path);return U(a,t)})};const M=function(){const t=I("T_NEW_OBJECT","sap.fe.i18n");return N([t],e.formatTitle)};const H=t=>{const e=b(t);if(e&&e.annotations?.Core?.Computed){return v.IsInactive}else{return x(false)}};const j=function(t,e,a){let n;if(e.$Type==="com.sap.vocabularies.UI.v1.DataField"){n=C(e.Value);if(e.Value?.$target?.annotations.Common?.Text?.annotations?.UI?.TextArrangement){n=L(n,t)}n=V(n,t)}if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target.$target?.$Type==="com.sap.vocabularies.UI.v1.ConnectedFieldsType"){const e=T(t,"$Type/@UI.HeaderInfo/Title/Target/$AnnotationPath");n=p(e,a,false)}return n};const B=function(t,a,n,o,r,i){const s=i||e.formatTitle;let l=I("T_NEW_OBJECT","sap.fe.i18n");let u;let p=false;let d;if(c(o?.Title)&&o?.Title.Value?.$target?.annotations?.Common?.ExternalID){d={...o.Title,Value:{...o.Title.Value,$target:{...o.Title.Value.$target}}};d.Value.path=o.Title.Value.$target?.annotations?.Common?.ExternalID.path;d.Value.$target=o.Title.Value.$target?.annotations?.Common?.ExternalID.$target}if(o?.Title?.$Type&&r){if(d===undefined){u=j(t,o.Title,a)}else{u=j(t,d,a)}l=M();if(y(u)&&u.value===""){p=true}}else if(o&&(o.Title===undefined||o.Title.toString()==="")){p=true;if(!r){u=x("")}}if(u&&y(u)){return $(u)}if(m(t.targetObject)){t=T(t,t.targetObject.path)}const g=I(f(t));let E;if(u){E=Array.isArray(u)?u:[u]}else{E=U(t,g,n)}const O=R(E[0]);const C=H(t);const F=N(E,s);u=A(O,A(D(p&&P(t),C),"",A(h(x(i)),A(D(v.IsCreateMode,_(P(t))),l,I("T_ANNOTATION_HELPER_DEFAULT_HEADER_TITLE_NO_HEADER_INFO","sap.fe.i18n")),A(_(P(t)),r?.resourceModel.getText("T_NEW_OBJECT"),r?.resourceModel.getText("T_ANNOTATION_HELPER_DEFAULT_HEADER_TITLE_NO_HEADER_INFO")))),F);return $(u)};l.getTitleBindingExpression=B;return l},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/ToES6Promise", [],function(){"use strict";async function r(r){return new Promise((n,e)=>{r.then(function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++){e[t]=arguments[t]}n(Array.prototype.slice.call(e));return}).catch(function(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++){n[t]=arguments[t]}e(Array.prototype.slice.call(n))})})}return r},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/TypeGuards", [],function(){"use strict";var t={};function n(t){return t.status==="fulfilled"}t.isFulfilled=n;function e(t){return t.status==="rejected"}t.isRejected=e;function i(t){return t?.isA?.("sap.ui.model.Context")}t.isContext=i;function r(t){return Array.isArray(t)&&t.length>0&&t.every(t=>typeof t==="function")}t.isFunctionArray=r;function o(t,n){if(Array.isArray(n)){return n.includes(t?.$Type)}return t?.$Type===n}t.isAnnotationOfType=o;function u(t,n){return t?.term===n}t.isAnnotationOfTerm=u;function y(t){return t.hasOwnProperty("term")}t.isAnnotationTerm=y;function s(t){return t?.hasOwnProperty("_type")??false}t.isServiceObject=s;function p(t){return t?._type==="ComplexType"}t.isComplexType=p;function a(t){return t?._type==="TypeDefinition"}t.isTypeDefinition=a;function f(t){return t?._type==="EntityContainer"}t.isEntityContainer=f;function c(t){return t?._type==="EntitySet"}t.isEntitySet=c;function l(t){return t?._type==="Singleton"}t.isSingleton=l;function P(t){return t?._type==="EntityType"}t.isEntityType=P;function A(t){return t?._type==="Property"}t.isProperty=A;function T(t){return t?._type==="NavigationProperty"}t.isNavigationProperty=T;function h(t){return T(t)&&!t.isCollection}t.isSingleNavigationProperty=h;function _(t){return T(t)&&t.isCollection}t.isMultipleNavigationProperty=_;function g(t){return t?.type==="Path"}t.isPathAnnotationExpression=g;function C(t){return t?.type==="AnnotationPath"}t.isAnnotationPath=C;function E(t){return t?.type==="PropertyPath"}t.isPropertyPathExpression=E;return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/helpers/WebSocket", ["sap/ui/core/ws/SapPcpWebSocket"],function(e){"use strict";var t={};var o=e.SUPPORTED_PROTOCOLS;let n=function(e){e["CollaborationDraft"]="CollaborationDraft";e["SideEffectsEvents"]="SideEffectsEvents";return e}({});t.ChannelType=n;function c(t,n,c){const a=window.location;const i=n.getServiceUrl();const f=s(n);if(!f){throw Error("WebSocket Base URL annotation not found")}const l=r(t,n);let u;const S=new URLSearchParams(window.location.search).get("useBackendUrl");if(S){u=S.replace("https","wss")}else{u=a.protocol==="https:"?"wss:":"ws:";u+=`//${a.host}`}u+=`${(f.startsWith("/")?"":"/")+f}?${l}relatedService=${i}`;if(c){for(const e in c){u+=`&${e}=${encodeURI(c[e])}`}}return new e(u,[o.v10])}t.createWebSocket=c;function s(e){return e.getMetaModel().getObject("/@com.sap.vocabularies.Common.v1.WebSocketBaseURL")}t.getWebSocketBaseUrl=s;function r(e,t){if(!s(t)){return""}switch(e){case n.CollaborationDraft:return"";case n.SideEffectsEvents:const e=t.getMetaModel().getObject("/@com.sap.vocabularies.Common.v1.WebSocketChannel#sideEffects");return`sideEffects=${e}&`}}t.getWebSocketChannelUrl=r;return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/library", ["sap/base/Log","sap/fe/core/formatters/CriticalityFormatter","sap/fe/core/formatters/FPMFormatter","sap/fe/core/formatters/StandardFormatter","sap/fe/core/formatters/ValueFormatter","sap/fe/core/services/AsyncComponentServiceFactory","sap/fe/core/services/CacheHandlerServiceFactory","sap/fe/core/services/CollaborativeToolsServiceFactory","sap/fe/core/services/EnvironmentServiceFactory","sap/fe/core/services/NavigationServiceFactory","sap/fe/core/services/ResourceModelServiceFactory","sap/fe/core/services/RoutingServiceFactory","sap/fe/core/services/ShellServicesFactory","sap/fe/core/services/SideEffectsServiceFactory","sap/fe/core/services/TemplatedViewServiceFactory","./services/CollaborationManagerServiceFactory","./services/ValueHelpHistoryServiceFactory","sap/fe/base/HookSupport","sap/fe/base/library","sap/fe/core/services/TelemetryServiceFactory","sap/fe/core/type/DateTimeWithTimezone","sap/fe/core/type/Email","sap/fe/core/type/FiscalDate","sap/fe/navigation/library","sap/fe/placeholder/library","sap/ui/base/DataType","sap/ui/core/Lib","sap/ui/core/library","sap/ui/core/mvc/View","sap/ui/core/service/ServiceFactoryRegistry","./services/ContextSharingServiceFactory","./services/collaborativeDraftServiceFactory"],function(e,r,a,o,i,s,t,c,n,l,p,f,v,d,u,S,g,y,C,m,b,F,w,D,M,E,N,V,h,I,T,A){"use strict";var L={};var R=y.xmlViewPreprocessor;var x=n.EnvironmentServiceFactory;const P="sap.fe";L.feNamespace=P;const H="sap.fe.core";L.feCoreNamespace=H;const k="sap.fe.core.controllerextensions";L.feCextNamespace=k;const z="sap.fe.core.fpm";L.feFpmNamespace=z;const B=N.init({name:"sap.fe.core",apiVersion:2,dependencies:["sap.ui.core","sap.fe.base","sap.fe.navigation","sap.fe.placeholder","sap.f"],types:["sap.fe.core.CreationMode","sap.fe.core.VariantManagement"],interfaces:[],controls:[],elements:[],version:"1.132.0",noLibraryCSS:true,extensions:{"sap.ui.support":{publicRules:true,internalRules:true}}});B.InvocationGrouping={Isolated:"Isolated",ChangeSet:"ChangeSet"};B.CreationMode={NewPage:"NewPage",Sync:"Sync",Async:"Async",Deferred:"Deferred",Inline:"Inline",CreationRow:"CreationRow",InlineCreationRows:"InlineCreationRows",External:"External",CreationDialog:"CreationDialog"};E.registerEnum("sap.fe.core.CreationMode",B.CreationMode);B.VariantManagement={None:"None",Page:"Page",Control:"Control"};E.registerEnum("sap.fe.core.VariantManagement",B.VariantManagement);B.Constants={CancelActionDialog:"cancel",ActionExecutionFailed:"actionExecutionFailed",CreationFailed:"creationFailed",OnBeforeCreateFailed:"onBeforeCreateFailed"};B.ProgrammingModel={Draft:"Draft",Sticky:"Sticky",NonDraft:"NonDraft"};B.DraftStatus={Saving:"Saving",Saved:"Saved",Clear:"Clear"};B.EditMode={Display:"Display",Editable:"Editable"};B.TemplateContentView={Hybrid:"Hybrid",Chart:"Chart",Table:"Table"};let O=function(e){e["Enabled"]="Enabled";e["Disabled"]="Disabled";e["Auto"]="Auto";return e}({});B.InitialLoadMode=O;L.InitialLoadMode=O;B.StartupMode={Normal:"Normal",Deeplink:"Deeplink",Create:"Create",AutoCreate:"AutoCreate"};const G=E.createType("sap.fe.core.InitialLoadMode",{defaultValue:B.InitialLoadMode.Auto,isValid:function(r){if(typeof r==="boolean"){e.warning("DEPRECATED: boolean value not allowed for 'initialLoad' manifest setting - supported values are: Disabled|Enabled|Auto")}return r===undefined||r===null||typeof r==="boolean"||B.InitialLoadMode.hasOwnProperty(r)}});G.setNormalizer(function(e){if(!e){return B.InitialLoadMode.Disabled}return e===true?B.InitialLoadMode.Enabled:e});I.register("sap.fe.core.services.TemplatedViewService",new u);I.register("sap.fe.core.services.ResourceModelService",new p);I.register("sap.fe.core.services.CacheHandlerService",new t);I.register("sap.fe.core.services.CollaborationManagerService",new S);I.register("sap.fe.core.services.NavigationService",new l);I.register("sap.fe.core.services.RoutingService",new f);I.register("sap.fe.core.services.SideEffectsService",new d);I.register("sap.fe.core.services.ShellServices",new v);I.register("sap.fe.core.services.EnvironmentService",new x);I.register("sap.fe.core.services.AsyncComponentService",new s);I.register("sap.fe.core.services.CollaborativeToolsService",new c);I.register("sap.fe.core.services.TelemetryService",new m);I.register("sap.fe.core.services.ValueHelpHistoryService",new g);I.register("sap.fe.core.services.CollaborativeDraftService",new A);I.register("sap.fe.core.services.ContextSharingService",new T);h.registerPreprocessor("controls",R,"XML",false,true);return B},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/library.support", ["sap/ui/support/library", "./support/AnnotationIssue.support", "./support/CollectionFacetMissingID.support", "./support/CollectionFacetUnsupportedLevel.support", "./support/InvalidAnnotationColumnKey.support"], function (supportLib, AnnotationIssue, CollectionFacetMissingID, CollectionFacetUnsupportedLevel, InvalidAnnotationColumnKey) {
  "use strict";

  // eslint-disable-next-line @typescript-eslint/ban-ts-comment
  //@ts-ignore
  supportLib.SystemPresets.FeV4 = {
    id: "FioriElementsV4",
    title: "Fiori Elements V4",
    description: "Fiori Elements V4 rules",
    selections: [{
      ruleId: "annotationIssue",
      libName: "sap.fe.core"
    }]
  };
  /**
   * Adds support rules of the sap.fe.core library to the support infrastructure.
   */
  return {
    name: "sap.fe.core",
    niceName: "SAP.FE V4 - Core library",
    ruleset: [AnnotationIssue.getRules(), CollectionFacetMissingID.getRules(), CollectionFacetUnsupportedLevel.getRules(), InvalidAnnotationColumnKey.getRules()]
  };
}, false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/manifestMerger/AddNewPage", ["sap/base/Log","sap/base/util/ObjectPath"],function(e,t){"use strict";var n={};function i(t,n){const i=n.getContent();const s=i?.sourcePage;const r=i?.targetPage;if(!s?.id||!r?.id){e.error("Change content is not valid, missing source or target page ID.");return t}return a(t,s,r)}n.applyChange=i;function a(e,n,i){if(!s(e,n,i)){return e}const a=e["sap.ui5"]?.routing?.targets??{};a[i.id]={type:i.type,name:i.name,options:{settings:i.settings},id:i.id};const r=e["sap.ui5"]?.routing?.routes??[];r.push({pattern:i.routePattern,name:i.id,target:i.id});const o=a[n.id];const u=o.options?.settings?.navigation??{};o.options.settings.navigation={...u,[n.navigationSource]:{detail:{route:i.id}}};t.set(["sap.ui5","routing","targets"],a,e);t.set(["sap.ui5","routing","routes"],r,e);return e}function s(t,n,i){const a=t["sap.ui5"]?.routing?.targets??{};if(a[i.id]){e.error("Target page or route Id already exists in the manifest please check the target page Id in the manifest.");return false}if(!a[n.id]){e.error("Source page does not exist in the manifest targets please check the source page Id in the manifest.");return false}if(!a[n.id].name.startsWith("sap.fe")){e.error("Source page is not a Fiori elements application please check the source page name in the manifest.");return false}if(a[n.id].options.settings.navigation&&a[n.id].options.settings.navigation[n.navigationSource]){e.error("Source page already has target navigation please check the source page navigation in the manifest.");return false}const s=t["sap.ui5"]?.routing?.routes??[];const r=s.some(e=>e.name===n.id);if(!r){e.error("Source page does not exist in the manifest routes please check the source page name in the manifest.");return false}return true}return n},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/manifestMerger/ChangePageConfiguration", ["sap/base/Log","sap/base/util/ObjectPath"],function(t,e){"use strict";var n={};function o(e,n){const o=n.getContent();const r=o?.page;const a=o?.entityPropertyChange;if(a?.operation!=="UPSERT"||!a?.propertyPath||a?.propertyValue===undefined||a?.propertyPath.startsWith("/")){t.error("Change content is not a valid");return e}return i(e,r,a.propertyPath,a.propertyValue)}n.applyChange=o;function i(n,o,i,f,g,u){const p="sap.fe";let c=a(i);let l;if(o===p){c=[p,...c];l=n}else{l=s(n,o)}if(l){r(c,l);e.set(c,f,l);if(g&&u){u.pageConfigurationChanges[o]=u.pageConfigurationChanges[o]||[];u.pageConfigurationChanges[o].push(i)}}else{t.error(`No Fiori elements page with ID ${o} found in routing targets.`)}return n}n.changeConfiguration=i;function r(t,n){if(t.length>1){for(let o=0;o<t.length-1;o++){if(typeof e.get(t.slice(0,o+1),n)!=="object"){e.set(t.slice(0,o+1),{},n)}}}}function a(t){let e=t.split("/");if(e[0]==="controlConfiguration"){let t="";for(let n=1;n<e.length;n++){t+=(n>1?"/":"")+e[n];if(t.includes("@")){e=["controlConfiguration",t].concat(e.slice(n+1));break}}}return e}function s(t,e){let n;const o=t["sap.ui5"]?.routing?.targets??{};for(const t in o){if(o[t].id===e&&o[t].name.startsWith("sap.fe.templates.")){n=o[t].options?.settings??{};break}}return n}function f(t,n,o,i){n=n??{};const r=o.pageConfigurationChanges[i]||[];for(const o of r){const i=a(o);const r=e.get(i,t);e.set(i,r,n)}return n}n.applyPageConfigurationChanges=f;return n},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/operationsHelper", ["sap/base/Log","sap/m/MessageBox","sap/ui/core/message/Message","sap/ui/core/message/MessageType","sap/ui/model/json/JSONModel","./controllerextensions/dialog/OperationsDialog","./controllerextensions/messageHandler/messageHandling","./helpers/ResourceModelHelper"],function(e,t,s,n,i,o,r,a){"use strict";function l(e,l,g,d,c,f,u,_){if(!g.length){return}const M=a.getResourceModel(e.appComponent);const E=a.getLocalizedText(e.label,e.appComponent);const C=e.model;const p=d?.strictHandlingPromises??[];let S;let O=M.getText("C_COMMON_DIALOG_CANCEL");let A="";let G="";A=e.bGrouped?M.getText("C_COMMON_DIALOG_CANCEL_MESSAGE_TEXT",[E]):M.getText("C_COMMON_DIALOG_SKIP_SINGLE_MESSAGE_TEXT");if(g.length===1){const s=g[0].getMessage();const n=g[0].getAdditionalText();G=M.getText("C_COMMON_DIALOG_CANCEL_SINGLE_MESSAGE_TEXT");if(!c){S=`${s}\n${M.getText("PROCEED")}`}else if(n!==undefined&&n!==""){O=e.bGrouped?O:M.getText("C_COMMON_DIALOG_SKIP");const t=e.control?.getParent()?.getTableDefinition().headerInfoTypeName;if(t){S=`${t.toString()} ${n}: ${s}\n\n${A}`}else{S=`${n}: ${s}\n\n${A}`}}else{O=e.bGrouped?O:M.getText("C_COMMON_DIALOG_SKIP");S=`${s}\n\n${A}`}if(c&&e.bGrouped){S=`${G}\n\n${S}`}t.warning(S,{title:M.getText("WARNING"),actions:[E,O],emphasizedAction:E,onClose:s=>{if(s===E){if(_){f?.(true);C.submitBatch(u);e.requestSideEffects?.()}else if(!c){const e=p[0];e.resolve(true);C.submitBatch(e.groupId);e.requestSideEffects?.()}else{for(const e of p){e.resolve(true);C.submitBatch(e.groupId);e.requestSideEffects?.()}if(d?.strictHandlingTransitionFails?.length){l?.removeTransitionMessages()}}if(d){d.is412Executed=true}}else{if(d){d.is412Executed=false}if(_){f?.(false)}else if(!c){p[0].resolve(false)}else{for(const e of p){e.resolve(false)}}if(e.bGrouped){t.information(M.getText("M_CHANGESET_CANCEL_MESSAGES"),{contentWidth:"150px"})}}if(d){d.strictHandlingWarningMessages=[]}}});return}const T=new i;let N="";let I="";if(c){O=e.bGrouped?O:M.getText("C_COMMON_DIALOG_SKIP");N=e.bGrouped?M.getText("C_COMMON_DIALOG_CANCEL_MESSAGES_WARNING"):M.getText("C_COMMON_DIALOG_SKIP_MESSAGES_WARNING");I=e.bGrouped?M.getText("C_COMMON_DIALOG_CANCEL_MESSAGES_TEXT",[E]):M.getText("C_COMMON_DIALOG_SKIP_MESSAGES_TEXT",[E])}else{N=M.getText("C_COMMON_DIALOG_CANCEL_MESSAGES_GENERIC_ACTION_WARNING",[E])}const m=new s({message:N,type:n.Information,target:undefined,persistent:true,description:I.length?I:undefined});g=[m].concat(g);T.setData(g);new o({messageObject:r.prepareMessageViewForDialog(T,true,c),isMultiContext412:c,isGrouped:e.bGrouped,requestSideEffects:e.requestSideEffects,resolve:f,model:C,groupId:u,actionName:E,strictHandlingUtilities:d,strictHandlingPromises:p,messageHandler:l,messageDialogModel:T,cancelButtonTxt:O,showMessageInfo:()=>{t.information(M.getText("M_CHANGESET_CANCEL_MESSAGES"),{contentWidth:"150px"})}}).open()}async function g(t,s,n,i,o,r,a,l){let g=arguments.length>8&&arguments[8]!==undefined?arguments[8]:[];const c=r.filterErrorMessages(g);g.forEach(t=>{if(c.includes(t)){e.warning("Warning: 412 ('Pre-condition Check Failed due to strict-handling') returns messages of type error but only warning messages are appropriate!")}});r.addWarningMessagesToMessageHandler(g);let f;if(n===null&&o===null||n===1&&o===1){return new Promise(e=>{d.renderMessageView(s,r,g,a,false,e,t,true)})}const u=new Promise(function(e){f={requestSideEffects:s.requestSideEffects,resolve:e,groupId:t}});a?.strictHandlingPromises.push(f);if(g.length&&a){const e=a.strictHandlingWarningMessages;let t="";if(o&&o>1){const e=s.control?.getParent();const n=e&&e.isA("sap.fe.macros.table.TableAPI")&&e.getIdentifierColumn();if(n){t=i?.getObject(n)}}for(const s of g){s.setAdditionalText(t);e.push(s)}a.strictHandlingWarningMessages=e}l?.();return u}const d={renderMessageView:l,fnOnStrictHandlingFailed:g};return d},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/rootView/Fcl.controller", ["sap/base/Log","sap/f/FlexibleColumnLayoutSemanticHelper","sap/f/library","sap/fe/base/ClassSupport","sap/fe/core/controllerextensions/ViewState","sap/fe/core/helpers/KeepAliveHelper","sap/fe/core/helpers/ManifestHelper","sap/m/Button","sap/m/FlexBox","sap/m/IllustratedMessage","sap/m/Page","../CommonUtils","./RootViewBaseController"],function(e,t,n,o,i,a,s,r,l,u,c,g,d){"use strict";var C,h,f,m,p;var y=s.getRouteTargetName;var w=o.usingExtension;var F=o.defineUI5Class;function b(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function P(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,E(e,t)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function T(e,t,n,o,i){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}function S(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}const L=n.LayoutType;let _=(C=F("sap.fe.core.rootView.Fcl"),h=w(i.override({applyInitialStateOnly:function(){return false},adaptBindingRefreshControls:function(e){this.getView().getController()._getAllVisibleViews().forEach(function(t){const n=Promise.resolve(t);e.push(n)})},adaptStateControls:function(e){this.getView().getController()._getAllVisibleViews().forEach(function(t){const n=Promise.resolve(t);e.push(n)})},onRestore:function(){const e=this.getView().getController();const t=e.getAppContentContainer();const n=t.getModel("internal");const o=n.getProperty("/pages");for(const e in o){n.setProperty(`/pages/${e}/restoreStatus`,"pending")}e.onContainerReady()},onSuspend:function(){const e=this.getView().getController();const t=e.getFclControl();const n=t.getBeginColumnPages();const o=t.getMidColumnPages();const i=t.getEndColumnPages();const a=[].concat(n,o,i);e.getViewsFromPages(a).forEach(e=>{const t=e.getController();if(t?.viewState?.onSuspend){t.viewState.onSuspend()}})}})),C(f=(m=function(n){function o(){var e;for(var t=arguments.length,o=new Array(t),i=0;i<t;i++){o[i]=arguments[i]}e=n.call(this,...o)||this;b(e,"viewState",p,e);e._oTargetsAggregation={};e._oTargetsFromRoutePattern={};e.messagePages=[undefined,undefined,undefined];return e}P(o,n);var i=o.prototype;i.onInit=function e(){n.prototype.onInit.call(this);this._internalInit();this.setColumnDistributionModel()};i.manageDataReceived=function e(t){if(t.getParameter("error")){const e=t.getParameter("path");const n=this._getAllVisibleViews().find(t=>t.getBindingContext()?.getPath()===e);if(e&&n?.getBindingContext()?.isKeepAlive()){n.getController()._routing.onDataReceived(t)}}};i.attachRouteMatchers=function e(){this.getRouter().attachBeforeRouteMatched(this._updateViewForNavigatedRowsComputation,this);n.prototype.attachRouteMatchers.call(this);this._internalInit();this.getRouter().attachBeforeRouteMatched(this.onBeforeRouteMatched,this);this.getRouter().attachRouteMatched(this.onRouteMatched,this);this.getFclControl().attachStateChange(this._saveLayout,this)};i._internalInit=function e(){if(this._oRouterProxy){return}this.sCurrentRouteName="";this.sCurrentArguments={};const t=this.getAppComponent();const n=this.getAppComponent().getModel();n?.attachEvent("dataReceived",this.manageDataReceived.bind(this));this._oRouterProxy=t.getRouterProxy();this._oFCLConfig={maxColumnsCount:3};const o=t.getManifest()["sap.ui5"].routing;if(o?.config?.flexibleColumnLayout){const e=o.config.flexibleColumnLayout;if(e.defaultTwoColumnLayoutType){this._oFCLConfig.defaultTwoColumnLayoutType=e.defaultTwoColumnLayoutType}if(e.defaultThreeColumnLayoutType){this._oFCLConfig.defaultThreeColumnLayoutType=e.defaultThreeColumnLayoutType}if(e.limitFCLToTwoColumns===true){this._oFCLConfig.maxColumnsCount=2}}if(o?.config?.controlAggregation){this._oFCLConfig.defaultControlAggregation=o.config.controlAggregation}this._initializeTargetAggregation(t);this._initializeRoutesInformation(t);this.getFclControl().attachStateChange(this.onStateChanged,this);this.getFclControl().attachAfterEndColumnNavigate(this.onStateChanged,this)};i.getFclControl=function e(){return this.getAppContentContainer()};i._saveLayout=function e(t){this.sPreviousLayout=t.getParameters().layout};i._updateViewForNavigatedRowsComputation=function e(){const t=this._getAllVisibleViews(this.sPreviousLayout);const n=t.length?t[t.length-1]:undefined;this.getRouter().attachEventOnce("routeMatched",e=>{const t=e.getParameter("views");const o=this.getViewFromContainer(t[t.length-1]);if(n&&o){const e=n.getViewData()?.viewLevel;const t=o.getViewData()?.viewLevel;if(t===this._oFCLConfig.maxColumnsCount){this.oAdditionalViewForNavRowsComputation=o}if(e!==undefined&&t!==undefined&&e<this._oFCLConfig.maxColumnsCount&&e>t&&o!==n){this.oAdditionalViewForNavRowsComputation=n}}})};i.getViewForNavigatedRowsComputation=function e(){return this.oAdditionalViewForNavRowsComputation};i.onExit=function e(){this.getRouter().detachRouteMatched(this.onRouteMatched,this);this.getRouter().detachBeforeRouteMatched(this.onBeforeRouteMatched,this);this.getFclControl().detachStateChange(this.onStateChanged,this);this.getFclControl().detachAfterEndColumnNavigate(this.onStateChanged,this);d.prototype.onExit.bind(this)()};i.isFclEnabled=function e(){return true};i.displayErrorPage=async function t(n,o){let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return new Promise(async(t,a)=>{try{const e=this.getFclControl();const a=o;if(a.FCLLevel!==undefined&&i===0){i=a.FCLLevel}if(this._oFCLConfig&&i>=this._oFCLConfig.maxColumnsCount){i=this._oFCLConfig.maxColumnsCount-1}if(i<0||i>2){i=0}let s=this.messagePages[i];if(!s){s=new c({showHeader:false});this.messagePages[i]=s;switch(i){case 0:e.addBeginColumnPage(s);break;case 1:e.addMidColumnPage(s);break;default:e.addEndColumnPage(s)}}let d;const C=new l({alignItems:"Start",justifyContent:"End",items:[new r({type:"Transparent",icon:"sap-icon://decline",tooltip:"{sap.fe.i18n>C_COMMON_SAPFE_CLOSE}",press:()=>{if(o.handleShellBack===true){e.to(d.getId(),{},{})}else{window.history.back()}}}).addStyleClass("sapUiLargeMarginEnd")]});const h=new u({title:n,description:o.description??"",illustrationType:o.errorType?`sapIllus-${o.errorType}`:"sapIllus-ErrorScreen"});s.removeAllContent();s.addContent(C);s.addContent(h);let f;switch(i){case 0:d=e.getCurrentBeginColumnPage();f="afterBeginColumnNavigate";break;case 1:d=e.getCurrentMidColumnPage();f="afterMidColumnNavigate";break;default:d=e.getCurrentEndColumnPage();f="afterEndColumnNavigate"}if(o.handleShellBack===true){const t=g.getAppComponent(d);await t.getShellServices().setBackNavigation(async function(){e.to(d.getId(),{},{});await t.getShellServices().setBackNavigation()})}const m=this.getViewFromContainer(d);e.attachEventOnce(f,e=>{if(m&&m.isA("sap.ui.core.mvc.View")){m.getController().pageReady?.forcePageReady()}t(true)});e.to(s.getId(),{},{})}catch(t){a(false);e.info(`${t}`)}})};i._initializeTargetAggregation=function e(t){const n=t.getManifest(),o=n["sap.ui5"].routing?n["sap.ui5"].routing.targets:null;this._oTargetsAggregation={};if(o){Object.keys(o).forEach(e=>{const t=o[e];if(t.controlAggregation){this._oTargetsAggregation[e]={aggregation:t.controlAggregation,pattern:t.contextPattern}}else{this._oTargetsAggregation[e]={aggregation:"page",pattern:null}}})}};i._initializeRoutesInformation=function e(t){const n=t.getManifest(),o=n["sap.ui5"].routing?n["sap.ui5"].routing.routes:null;this._oTargetsFromRoutePattern={};if(o){o.forEach(e=>{if(e.pattern){this._oTargetsFromRoutePattern[e.pattern]=e.target}})}};i.getCurrentArgument=function e(){return this.sCurrentArguments};i.getCurrentRouteName=function e(){return this.sCurrentRouteName};i.getTargetAggregation=function e(){return this._oTargetsAggregation};i.onRouteMatched=function e(t){const n=t.getParameter("name");this.sCurrentRouteName=n;this.sCurrentArguments=t.getParameter("arguments")};i._scrollTablesToLastNavigatedItems=function e(){const t=this._getAllVisibleViews();if(t.length>1||t.length&&t[0].getViewData().viewLevel<this._oFCLConfig.maxColumnsCount){const e=this.getViewForNavigatedRowsComputation();if(e&&!t.includes(e)){t.push(e)}for(let e=t.length-1;e>0;e--){const n=t[e],o=t[e-1];const i=n.getBindingContext();const a=o.getController();if(i&&a._scrollTablesToRow){a._scrollTablesToRow(i.getPath())}}}};i.onStateChanged=function e(t){const n=t.getParameter("isNavigationArrow");if(this.sCurrentArguments!==undefined){if(!this.sCurrentArguments["?query"]){this.sCurrentArguments["?query"]={}}this.sCurrentArguments["?query"].layout=t.getParameter("layout")}this._forceModelContextChangeOnBreadCrumbs(t);if(n&&this.sCurrentRouteName){this._oRouterProxy.navTo(this.sCurrentRouteName,this.sCurrentArguments)}const o=this.getRightmostView();if(o){this.computeTitleHierarchy(o)}};i._forceModelContextChangeOnBreadCrumbs=function e(t){const n=t.getSource();let o=[];o=o.concat(n.getBeginColumnPages()).concat(n.getMidColumnPages()).concat(n.getEndColumnPages());o.forEach(e=>{const t=this.getViewFromContainer(e);const n=t?.byId&&t.byId("breadcrumbs");if(n){n.fireModelContextChange()}})};i._updateShareButtonVisibility=function e(t,n){let o;switch(n){case"OneColumn":o=t==="beginColumn";break;case"MidColumnFullScreen":case"ThreeColumnsBeginExpandedEndHidden":case"ThreeColumnsMidExpandedEndHidden":case"TwoColumnsBeginExpanded":case"TwoColumnsMidExpanded":o=t==="midColumn";break;case"EndColumnFullScreen":case"ThreeColumnsEndExpanded":case"ThreeColumnsMidExpanded":o=t==="endColumn";break;default:o=false}return o};i._updateEditButtonVisiblity=function e(t,n){let o=true;switch(t){case"midColumn":switch(n){case"TwoColumnsMidExpanded":case"ThreeColumnsMidExpandedEndHidden":case"ThreeColumnsBeginExpandedEndHidden":case"TwoColumnsBeginExpanded":case"ThreeColumnsMidExpanded":case"ThreeColumnsEndExpanded":o=false;break}break;case"endColumn":switch(n){case"ThreeColumnsMidExpanded":case"ThreeColumnsEndExpanded":o=false}break}return o};i.updateUIStateForView=function e(t,n){const o=this.getHelper().getCurrentUIState(),i=["beginColumn","midColumn","endColumn"],a=this.getFclControl().getLayout();let s;if(!t.getModel("fclhelper")){t.setModel(this._createHelperModel(),"fclhelper")}if(!o.actionButtonsInfo){o.actionButtonsInfo={}}if(!o.actionButtonsInfo.midColumn){o.actionButtonsInfo.midColumn={}}if(!o.actionButtonsInfo.endColumn){o.actionButtonsInfo.endColumn={}}if(n>=this._oFCLConfig.maxColumnsCount){s=i[this._oFCLConfig.maxColumnsCount-1];o.actionButtonsInfo.midColumn.fullScreen=null;o.actionButtonsInfo.midColumn.exitFullScreen=null;o.actionButtonsInfo.midColumn.closeColumn=null;o.actionButtonsInfo.endColumn.exitFullScreen=null;o.actionButtonsInfo.endColumn.fullScreen=null;o.actionButtonsInfo.endColumn.closeColumn=null}else{s=i[n]}if(n>=this._oFCLConfig.maxColumnsCount||a==="EndColumnFullScreen"||a==="MidColumnFullScreen"||a==="OneColumn"){t.getModel("fclhelper").setProperty("/breadCrumbIsVisible",true)}else{t.getModel("fclhelper").setProperty("/breadCrumbIsVisible",false)}o.actionButtonsInfo.beginColumn={fullScreen:null,exitFullScreen:null,closeColumn:null};const r=Object.assign({},o.actionButtonsInfo[s]);r.switchVisible=r.fullScreen!==null||r.exitFullScreen!==null;r.switchIcon=r.fullScreen!==null?"sap-icon://full-screen":"sap-icon://exit-full-screen";r.isFullScreen=r.fullScreen===null;r.closeVisible=r.closeColumn!==null;t.getModel("fclhelper").setProperty("/actionButtonsInfo",r);t.getModel("fclhelper").setProperty("/showEditButton",this._updateEditButtonVisiblity(s,a));t.getModel("fclhelper").setProperty("/showShareIcon",this._updateShareButtonVisibility(s,a))};i.onBeforeRouteMatched=async function e(t){if(t){const e=t.getParameters().arguments["?query"];let n=e?e.layout:undefined;if(!n){const e=this.getHelper().getNextUIState(0);n=e.layout}const o=t.getParameter("config")?.target;n=this._correctLayoutForTargets(n,o);await this.isWritingFCLState;n=await this.getStoredLayout(n);if(n){this.getFclControl().setLayout(n)}}};i.getHelper=function e(){return t.getInstanceFor(this.getFclControl(),this._oFCLConfig)};i.calculateLayout=function e(t,n,o){let i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(!o){o=i?this.getFclControl().getLayout():this.getHelper().getNextUIState(t).layout}const a=this.getRouter().getRouteByHash?.(`${n}?layout=${o}`);const s=this._oTargetsFromRoutePattern[a.getPattern()];return this._correctLayoutForTargets(o,s)};i._correctLayoutForTargets=function e(t,n){const o={2:["TwoColumnsMidExpanded","TwoColumnsBeginExpanded","MidColumnFullScreen"],3:["ThreeColumnsMidExpanded","ThreeColumnsEndExpanded","ThreeColumnsMidExpandedEndHidden","ThreeColumnsBeginExpandedEndHidden","MidColumnFullScreen","EndColumnFullScreen"]};if(n&&!Array.isArray(n)){n=[n]}if(!n){return t}else if(n.length>1){const e=o[n.length.toString()];if(!e.includes(t)){const o=this._getDefaultLayout(n.length);t=o&&e.includes(o)?o:e[0]}}else{const e=this.getTargetAggregation()[y(n[0])].aggregation||this._oFCLConfig.defaultControlAggregation;switch(e){case"beginColumnPages":t=L.OneColumn;break;case"midColumnPages":t=L.MidColumnFullScreen;break;case"endColumnPages":t=L.EndColumnFullScreen;break;default:break}}return t};i._getDefaultLayout=function e(t){switch(t){case 3:return this._oFCLConfig.defaultTwoColumnLayoutType;case 2:return this._oFCLConfig.defaultTwoColumnLayoutType;default:return undefined}};i.getInstancedViews=function e(){const t=this.getFclControl();const n=[...t.getBeginColumnPages(),...t.getMidColumnPages(),...t.getEndColumnPages()];return this.getViewsFromPages(n)};i.getVisibleViews=function e(){return this._getAllVisibleViews()};i._getAllVisibleViews=function t(n){const o=[];const i=n?n:this.getFclControl().getLayout();const a=e=>{if(e){const t=this.getViewFromContainer(e);if(t){o.push(t)}}};switch(i){case L.EndColumnFullScreen:a(this.getFclControl().getCurrentEndColumnPage());break;case L.MidColumnFullScreen:a(this.getFclControl().getCurrentMidColumnPage());break;case L.OneColumn:a(this.getFclControl().getCurrentBeginColumnPage());break;case L.ThreeColumnsEndExpanded:case L.ThreeColumnsMidExpanded:a(this.getFclControl().getCurrentBeginColumnPage());a(this.getFclControl().getCurrentMidColumnPage());a(this.getFclControl().getCurrentEndColumnPage());break;case L.TwoColumnsBeginExpanded:case L.TwoColumnsMidExpanded:case L.ThreeColumnsMidExpandedEndHidden:case L.ThreeColumnsBeginExpandedEndHidden:a(this.getFclControl().getCurrentBeginColumnPage());a(this.getFclControl().getCurrentMidColumnPage());break;default:e.error(`Unhandled switch case for ${this.getFclControl().getLayout()}`)}return o};i._getAllViews=function t(n){const o=[];const i=n?n:this.getFclControl().getLayout();const a=e=>{if(e){const t=this.getViewFromContainer(e);if(t){o.push(t)}}};switch(i){case L.OneColumn:a(this.getFclControl().getCurrentBeginColumnPage());break;case L.ThreeColumnsEndExpanded:case L.ThreeColumnsMidExpanded:case L.ThreeColumnsMidExpandedEndHidden:case L.ThreeColumnsBeginExpandedEndHidden:case L.EndColumnFullScreen:a(this.getFclControl().getCurrentBeginColumnPage());a(this.getFclControl().getCurrentMidColumnPage());a(this.getFclControl().getCurrentEndColumnPage());break;case L.TwoColumnsBeginExpanded:case L.TwoColumnsMidExpanded:a(this.getFclControl().getCurrentBeginColumnPage());a(this.getFclControl().getCurrentMidColumnPage());break;case L.MidColumnFullScreen:{const e=this.getHelper().getCurrentUIState().actionButtonsInfo?.midColumn?.exitFullScreen??"";a(this.getFclControl().getCurrentBeginColumnPage());a(this.getFclControl().getCurrentMidColumnPage());if(e.startsWith("ThreeColumn")){a(this.getFclControl().getCurrentEndColumnPage())}}break;default:e.error(`Unhandled switch case for ${this.getFclControl().getLayout()}`)}return o};i.onContainerReady=async function e(){const t=this._getAllVisibleViews();const n=t.reduce(function(e,t){if(t.isA&&t.isA("sap.ui.core.mvc.View")){e.push(a.restoreView(t))}return e},[]);return Promise.all(n)};i.getRightmostContext=function e(){return this.getRightmostView()?.getBindingContext()??undefined};i.getRightmostView=function e(){return this._getAllViews().pop()};i.isContextUsedInPages=function e(t){if(!this.getFclControl()){return false}const n=this._getAllViews();for(const e of n){if(e){if(e.getBindingContext()===t){return true}}else{return false}}return false};i._setShellMenuTitle=async function e(t,n,o){if(this.getHelper().getCurrentUIState().isFullScreen!==true){await t.getShellServices().setTitle(o)}else{await t.getShellServices().setTitle(n)}};i.getFCLPersonalizationData=async function e(){const t=this.getAppComponent()?.getShellServices();const n={defaultLayouts:{},columnsDistribution:{desktop:{},tablet:{}}};return await t.getApplicationPersonalizationData("FCL-Personalization")??n};i.setFCLPersonalizationData=function e(t){const n=this.getAppComponent()?.getShellServices();n.setApplicationPersonalizationData("FCL-Personalization",t)};i.setColumnDistributionModel=async function e(){const t=(await this.getFCLPersonalizationData()).columnsDistribution;if(t){const e=this.getView().getModel("internal");e.setProperty("/FCLColumnsDistribution",t)}};i.onColumnsDistributionChange=async function e(t){const{media:n,layout:o,columnsSizes:i}=t.getParameters();const a=this.getView().getModel("internal");a.setProperty(`/FCLColumnsDistribution/${n}/${o}`,i);this.isWritingFCLState=this.getFCLPersonalizationData();const s=await this.isWritingFCLState;const r=this.getNumberOfColumnsFromLayout(o);if(r){s.defaultLayouts[r]=o;s.columnsDistribution[n][o]=i;this.setFCLPersonalizationData(s)}this.isWritingFCLState=undefined;return};i.getNumberOfColumnsFromLayout=function e(t){const n=/^(One|Two|Three)Column/.exec(t)?.[1];switch(n){case"One":return 1;case"Two":return 2;case"Three":return 3;default:return null}};i.getStoredLayout=async function e(t){const n=t??this.getFclControl().getLayout();const o=this.getNumberOfColumnsFromLayout(n);if(o){const e=(await this.getFCLPersonalizationData()).defaultLayouts;return e?.[o]??n}return n};return o}(d),p=T(m.prototype,"viewState",[h],{configurable:true,enumerable:true,writable:true,initializer:null}),m))||f);return _},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/rootView/NavContainer.controller", ["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/CommonUtils","sap/fe/core/controllerextensions/ViewState","sap/fe/core/helpers/KeepAliveHelper","sap/m/IllustratedMessage","sap/m/Page","./RootViewBaseController"],function(e,t,n,r,i,o,a,s){"use strict";var c,l,g,u,f;var p=t.usingExtension;var d=t.defineUI5Class;function h(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function C(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,v(e,t)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function w(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function P(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let y=(c=d("sap.fe.core.rootView.NavContainer"),l=p(r.override({applyInitialStateOnly:function(){return false},adaptBindingRefreshControls:function(e){const t=this.getView(),n=t.getController();e.push(n._getCurrentPage(t))},adaptStateControls:function(e){const t=this.getView(),n=t.getController();e.push(n._getCurrentPage(t))},onRestore:function(){const e=this.getView(),t=e.getController(),n=t.getAppContentContainer();const r=n.getModel("internal");const i=r.getProperty("/pages");for(const e in i){r.setProperty(`/pages/${e}/restoreStatus`,"pending")}t.onContainerReady()},onSuspend:function(){const e=this.getView(),t=e.getController(),r=t.getAppContentContainer();const i=r.getPages();i.forEach(function(e){const t=n.getTargetView(e);const r=t&&t.getController();if(r&&r.viewState&&r.viewState.onSuspend){r.viewState.onSuspend()}})}})),c(g=(u=function(t){function r(){var e;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}e=t.call(this,...r)||this;h(e,"viewState",f,e);return e}C(r,t);var s=r.prototype;s.onContainerReady=async function e(){const t=this.getView(),r=this._getCurrentPage(t);return r.then(async function(e){if(e){const t=n.getTargetView(e);return i.restoreView(t)}return})};s._getCurrentPage=async function e(t){const r=this.getAppContentContainer();return new Promise(function(e){const i=r.getCurrentPage();if(i?.getController?.()?.isPlaceholder?.()){i.getController().attachEventOnce("targetPageInsertedInContainer",function(r){const i=r.getParameter("targetpage");const o=n.getTargetView(i);e(o!==t?o:undefined)})}else{const r=n.getTargetView(i);e(r!==t?r:undefined)}})};s._getNavContainer=function e(){return this.getAppContentContainer()};s.getInstancedViews=function e(){const t=this._getNavContainer();const n=t.getPages();return this.getViewsFromPages(n)};s.getVisibleViews=function e(){const t=this._getNavContainer();const n=[t.getCurrentPage()];return this.getViewsFromPages(n)};s.isFclEnabled=function e(){return false};s._scrollTablesToLastNavigatedItems=function e(){};s.displayErrorPage=async function t(r,i){let s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return new Promise(async(t,s)=>{try{const e=this._getNavContainer();if(!this.messagePage){this.messagePage=new a({showHeader:false});e.addPage(this.messagePage)}const s=new o({title:r,description:i.description??"",illustrationType:i.errorType?`sapIllus-${i.errorType}`:"sapIllus-ErrorScreen"});this.messagePage.removeAllContent();this.messagePage.addContent(s);const c=e.getCurrentPage();if(i.handleShellBack===true){const t=n.getAppComponent(c);await t.getShellServices().setBackNavigation(async function(){e.to(c.getId());await t.getShellServices().setBackNavigation()})}const l=this.getViewFromContainer(c);e.attachEventOnce("afterNavigate",()=>{if(l&&l.isA("sap.ui.core.mvc.View")){l.getController().pageReady?.forcePageReady()}t(true)});e.to(this.messagePage.getId())}catch(t){s(false);e.info(t)}})};return r}(s),f=w(u.prototype,"viewState",[l],{configurable:true,enumerable:true,writable:true,initializer:null}),u))||g);return y},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/rootView/RootViewBaseController", ["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/BaseController","sap/fe/core/CommonUtils","sap/fe/core/controllerextensions/Placeholder","sap/fe/core/controllerextensions/ViewState","sap/fe/core/helpers/ManifestHelper","sap/fe/core/helpers/SizeHelper","sap/ui/base/BindingParser","sap/ui/core/Element","sap/ui/core/routing/HashChanger","sap/ui/model/json/JSONModel","sap/ui/model/odata/v4/AnnotationHelper","sap/ui/thirdparty/URI","../controls/Any"],function(e,t,o,n,i,r,a,s,c,u,l,h,f,g,p){"use strict";var d,m,y,C,P,b,R;var w=a.getRouteTargetNames;var I=t.usingExtension;var v=t.defineUI5Class;function H(e,t,o,n){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(n):void 0})}function T(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_(e,t)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function M(e,t,o,n,i){var r={};return Object.keys(n).forEach(function(e){r[e]=n[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=o.slice().reverse().reduce(function(o,n){return n(e,t,o)||o},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer?(Object.defineProperty(e,t,r),null):r}function A(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let V=(d=v("sap.fe.core.rootView.RootViewBaseController"),m=I(i),y=I(r),d(C=(P=function(t){function o(){var e;for(var o=arguments.length,n=new Array(o),i=0;i<o;i++){n[i]=arguments[i]}e=t.call(this,...n)||this;H(e,"oPlaceholder",b,e);H(e,"viewState",R,e);e.bIsComputingTitleHierachy=false;return e}T(o,t);var i=o.prototype;i.onInit=function e(){s.init();this._aHelperModels=[]};i.getPlaceholder=function e(){return this.oPlaceholder};i.attachRouteMatchers=function e(){this.oPlaceholder.attachRouteMatchers();this.getAppComponent().getRoutingService().attachAfterRouteMatched({},this._onAfterRouteMatched,this)};i.onExit=function e(){this.getAppComponent().getRoutingService().detachAfterRouteMatched(this._onAfterRouteMatched,this);this.oRouter=undefined;s.exit();this._aHelperModels.forEach(function(e){e.destroy()})};i.getViewFromContainer=function e(t){const o=t.isA("sap.ui.core.ComponentContainer")?t.getComponentInstance().getRootControl():t;return o?.isA("sap.ui.core.mvc.View")?o:undefined};i.getViewsFromPages=function e(t){const o=[];t.forEach(e=>{const t=this.getViewFromContainer(e);if(t!==undefined){o.push(t)}});return o};i.getResourceBundle=function e(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()};i.getRouter=function e(){if(!this.oRouter){this.oRouter=this.getAppComponent().getRouter()}return this.oRouter};i._createHelperModel=function e(){const t=new h;this._aHelperModels.push(t);return t};i.routingIsComplete=async function e(){await(this._oRouteMatchedPromise||Promise.resolve())};i.waitForRightMostViewReady=async function e(t){return new Promise(function(e){const o=t.getParameter("views")??[],n=[];o.forEach(function(e){let t=e;if(e&&e.getComponentInstance){const o=e.getComponentInstance();t=o.getRootControl()}if(t&&t.getController()&&t.getController().pageReady){n.push(t)}});const i=n[n.length-1];if(i&&i.getController().pageReady.isPageReady()){e(i)}else if(i){i.getController().pageReady.attachEventOnce("pageReady",function(){e(i)})}})};i.restoreFocusFromHistory=function e(){switch(history.state.focusInfo.type){case"Row":const e=u.getElementById(history.state.focusInfo.tableId);const t=e.getRowBinding().getCurrentContexts().findIndex(e=>e.getPath()===history.state.focusInfo.contextPathFocus);if(t!==-1){e.focusRow(t)}break;default:u.getElementById(history.state.focusInfo.controlId)?.focus()}history.replaceState(Object.assign(history.state,{focusInfo:null}),"")};i._onAfterRouteMatched=function t(o){if(!this._oRouteMatchedPromise){this._oRouteMatchedPromise=this.waitForRightMostViewReady(o).then(e=>{const t=this.getView().getContent()[0];if(t&&t.getAutoFocus&&!t.getAutoFocus()){t.setProperty("autoFocus",true,true)}const o=this.getAppComponent();this._scrollTablesToLastNavigatedItems();if(o.getEnvironmentCapabilities().getCapabilities().UShell){this.computeTitleHierarchy(e)}const n=o.getRouterProxy().isFocusForced();o.getRouterProxy().setFocusForced(false);if(e.getController()&&e.getController().onPageReady&&e.getParent().onPageReady){e.getParent().onPageReady({forceFocus:n})}if(history.state.focusInfo){this.restoreFocusFromHistory()}else if(!n){o.getRouterProxy().restoreFocusForCurrentHash()}if(this.onContainerReady){this.onContainerReady()}return}).catch(function(t){e.error("An error occurs while computing the title hierarchy and calling focus method",t)}).finally(()=>{this._oRouteMatchedPromise=undefined})}};i._getTitleHierarchyCache=function e(){if(!this.oTitleHierarchyCache){this.oTitleHierarchyCache={}}return this.oTitleHierarchyCache};i.clearTitleHierarchyCache=function e(t){delete this._getTitleHierarchyCache()[t]};i._computeTitleInfo=function e(t,o,n){let i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";const r=n.split("/");if(!r[r.length-1].includes("?")){n+="?restoreHistory=true"}else{n+="&restoreHistory=true"}return{title:t,subtitle:o,intent:n,icon:i}};i._formatTitle=function e(t,o,n){let i="";switch(t){case"Value":i=`${o}`;break;case"ValueDescription":i=`${o} (${n})`;break;case"DescriptionValue":i=`${n} (${o})`;break;case"Description":i=`${n}`;break;default:}return i};i._fetchTitleValue=async function t(o){const i=this.getAppComponent(),r=this.getView().getModel(),a=i.getMetaModel(),s=a.getMetaPath(o),u=r.createBindingContext(o),l=a.getObject(`${s}/@com.sap.vocabularies.UI.v1.HeaderInfo/Title/Value`),h=f.format(l,{context:a.createBindingContext("/")});if(!h){return Promise.resolve("")}if(l.$Function==="odata.concat"){const e=new p({any:h});e.setModel(r);e.setBindingContext(u);const t=e.getBinding("any");if(t?.isA("sap.ui.model.CompositeBinding")){await Promise.all(t.getBindings().map(e=>e.requestValue?.()))}const o=e.getAny();e.destroy();return Promise.resolve(o)}const g=f.format(a.getObject(`${s}/@com.sap.vocabularies.UI.v1.HeaderInfo/Title/Value/$Path@com.sap.vocabularies.Common.v1.Text`),{context:a.createBindingContext("/")}),d=a.getObject(`${s}/@com.sap.vocabularies.UI.v1.HeaderInfo/Title/Value/$Path@`),m=[],y=c.complexParser(h),C=new Promise(function(e){const t=n.computeDisplayMode(d);e(t)});m.push(C);const P=y.parts?y.parts[0].path:y.path,b=y.formatter,R=r.bindProperty(P,u,{$$groupId:"$auto.Heroes"});R.initialize();const w=new Promise(function(e){const t=function(o){const n=b?b(o.getSource().getValue()):o.getSource().getValue();R.detachChange(t);e(n)};R.attachChange(t)});m.push(w);if(g){const e=c.complexParser(g);let t=e.parts?e.parts[0].path:e.path;t=P.lastIndexOf("/")>-1?`${P.slice(0,P.lastIndexOf("/"))}/${t}`:t;const o=e.formatter,n=r.bindProperty(t,u,{$$groupId:"$auto.Heroes"});n.initialize();const i=new Promise(function(e){const t=function(i){const r=o?o(i.getSource().getValue()):i.getSource().getValue();n.detachChange(t);e(r)};n.attachChange(t)});m.push(i)}try{const e=await Promise.all(m);let t="";if(typeof e!=="string"){t=this._formatTitle(e[0],e[1],e[2])}return t}catch(t){e.error("Error while fetching the title from the header info :"+t)}return""};i.getAppSpecificHash=function e(){const t=l.getInstance();return t.hrefForAppSpecificHash?g.decode(t.hrefForAppSpecificHash("")):"#/"};i._getHash=function e(){return l.getInstance().getHash()};i.getTitleInfoFromPath=async function e(t){const o=this._getTitleHierarchyCache();if(o[t]){return Promise.resolve(o[t])}const n=this.getAppComponent().getMetaModel();const i=n.getMetaPath(t);const r=n.getObject(`${i}/@com.sap.vocabularies.UI.v1.HeaderInfo/TypeName`);const a=this.getAppSpecificHash();const s=a+t.slice(1);return this._fetchTitleValue(t).then(e=>{const n=this._computeTitleInfo(r,e,s);o[t]=n;return n})};i._ensureHierarchyElementsAreStrings=function e(t){const o=[];for(const e in t){const n=t[e];const i={};for(const e in n){i[e]=typeof n[e]!=="string"?String(n[e]):n[e]}o.push(i)}return o};i._getTargetTypeFromHash=function e(t){const o=this.getAppComponent();let n="";const i=o.getManifestEntry("sap.ui5").routing?.routes??[];for(const e of i){const i=o.getRouter().getRoute(e.name);if(i?.match(t)){const t=w(e.target)[0];n=o.getRouter().getTarget(t)._oOptions.name;break}}return n};i.computeTitleHierarchy=async function t(o){const n=this.getAppComponent(),i=o.getBindingContext(),r=o.getParent(),a=[],s=this.getAppSpecificHash(),c=n.getManifestEntry("sap.app"),u=c.title||"",l=c.subTitle||"",h=c.icon||"";let f,g;if(r&&r._getPageTitleInformation){if(i){if(this._getTargetTypeFromHash("")==="sap.fe.templates.ListReport"){a.push(Promise.resolve(this._computeTitleInfo(u,l,s,h)))}g=i.getPath();const e=g.split("/");let t="";e.shift();e.pop();e.forEach(e=>{t+=`/${e}`;if(!n.getRouter().getRouteInfoByHash(t)){return}const o=n.getMetaModel(),i=o.getMetaPath(t),r=o.getObject(`${i}/@com.sap.vocabularies.Common.v1.ResultContext`);if(!r){a.push(this.getTitleInfoFromPath(t))}})}f=r._getPageTitleInformation();f=this._computeTitleInfo(f.title??"",f.subtitle??"",s+this._getHash());if(i&&g){this._getTitleHierarchyCache()[g]=f}else{this._getTitleHierarchyCache()[s]=f}}else{a.push(Promise.reject("Title information missing in HeaderInfo"))}return Promise.all(a).then(async e=>{const t=this._ensureHierarchyElementsAreStrings(e),o=f.title??"";t.reverse();await n.getShellServices().setHierarchy(t);await this._setShellMenuTitle(n,o,u);return}).catch(function(t){e.error(t)}).finally(()=>{this.bIsComputingTitleHierachy=false}).catch(function(t){e.error(t)})};i.calculateLayout=function e(t,o,n){let i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;return""};i.onContextBoundToView=function e(t){if(t){const e=this.getView().getModel("internal").getProperty("/deepestPath"),o=t.getPath();if(!e||e.indexOf(o)!==0){this.getView().getModel("internal").setProperty("/deepestPath",o,undefined,true)}}};i.displayErrorPage=async function e(t,o){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return Promise.resolve(true)};i.updateUIStateForView=function e(t,o){};i.getInstancedViews=function e(){return[]};i.getVisibleViews=function e(){return[]};i._scrollTablesToLastNavigatedItems=function e(){};i.isFclEnabled=function e(){return false};i._setShellMenuTitle=async function e(t,o,n){await t.getShellServices().setTitle(o)};i.getAppContentContainer=function e(){const t=this.getAppComponent();const o=t.getManifestEntry("sap.ui5").routing?.config?.controlId??"appContent";return this.getView().byId(o)};return o}(o),b=M(P.prototype,"oPlaceholder",[m],{configurable:true,enumerable:true,writable:true,initializer:null}),R=M(P.prototype,"viewState",[y],{configurable:true,enumerable:true,writable:true,initializer:null}),P))||C);return V},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/AsyncComponentServiceFactory", ["sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory"],function(t,e){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}function n(t,e){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},n(t,e)}let o=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;n.init=function t(){this.initPromise=new Promise((t,e)=>{this.resolveFn=t;this.rejectFn=e});const e=this.getContext();const r=e.scopeObject;const n=r._getManifestEntry("sap.ui5",true).services;Promise.all(Object.keys(n).filter(t=>n[t].startup==="waitFor"&&n[t].factoryName!=="sap.fe.core.services.AsyncComponentService").map(async t=>r.getService(t).then(e=>{const n=`get${t[0].toUpperCase()}${t.substring(1)}`;if(!r.hasOwnProperty(n)){r[n]=function(){return e}}return e}))).then(async t=>{await r.pRootControlLoaded;return t}).then(t=>{if(r.onServicesStarted){r.onServicesStarted(t)}this.resolveFn(this);return}).catch(this.rejectFn)};return e}(t);let i=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;n.createInstance=async function t(e){const r=new o(e);return r.initPromise};return e}(e);return i},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/CacheHandlerServiceFactory", ["sap/base/strings/hash","sap/ui/core/cache/CacheManager","sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory","sap/ui/thirdparty/jquery"],function(e,t,n,s,jQuery){"use strict";var i={};function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}async function r(e,t,n){return new Promise(function(s){jQuery.ajax(e,{method:"GET"}).done(function(i,o,a){n[e]=a.getResponseHeader("ETag")||a.getResponseHeader("Last-Modified");s(t===n[e])}).fail(function(){n[e]="";s(false)})})}let c=function(n){function s(){return n.apply(this,arguments)||this}i.CacheHandlerService=s;o(s,n);var a=s.prototype;a.init=function e(){const t=this.getContext();this.oFactory=t.factory;const n=t.settings;if(!n.metaModel){throw new Error("a `metaModel` property is expected when instantiating the CacheHandlerService")}this.oMetaModel=n.metaModel;this.oAppComponent=n.appComponent;this.oComponent=n.component;this.initPromise=this.oMetaModel.fetchEntityContainer().then(()=>this);this.mCacheNeedsInvalidate={}};a.exit=function e(){this.oFactory.removeGlobalInstance(this.oMetaModel)};a.validateCacheKey=async function e(n,s,i){let o=true;let a;try{const e=await t.get(n);const c=this.getETags(s,i);a=JSON.stringify(c);if(e){const t={};const n=JSON.parse(e.cachedETags);const s=await Promise.all(Object.keys(n).map(async function(e){if(n[e]){if(c[e]){t[e]=c[e];return n[e]===c[e]}else{return r(e,n[e],t)}}else{t[e]=c[e];return n[e]===c[e]}}));o=s.includes(false);if(Object.keys(t).some(function(e){return!t[e]})){a=null}else{a=o?JSON.stringify(t):e.viewCacheKey}}else if(Object.keys(c).some(function(e){return!c[e]})){a=null}}catch(e){o=true;a=null}this.mCacheNeedsInvalidate[n]=o;return a};a.invalidateIfNeeded=async function e(n,s,i,o){const a=JSON.stringify(this.getETags(i,o));if(this.mCacheNeedsInvalidate[s]||n&&n!==a){const e={};e.cachedETags=a;e.viewCacheKey=n;return t.set(s,e)}else{return Promise.resolve()}};a.getETags=function t(n,s){const i=this.oMetaModel.getETags();Object.keys(i).forEach(function(e){const t=i[e];if(t!==null&&t instanceof Date){i[e]=i[e].toISOString()}});const o=this.oAppComponent.getManifest();const a=e(JSON.stringify({sapApp:o["sap.app"],viewData:n.getViewData()}));i["manifest"]=a;const r=s.getCapabilities();if(r){i["toggles"]=e(JSON.stringify(r))}return i};a.getInterface=function e(){return this};return s}(n);i.CacheHandlerService=c;let u=function(e){function t(){var t;for(var n=arguments.length,s=new Array(n),i=0;i<n;i++){s[i]=arguments[i]}t=e.call(this,...s)||this;t._oInstanceRegistry={};return t}o(t,e);var n=t.prototype;n.createInstance=async function e(t){const n=t.settings.metaModel.getId();let s=this._oInstanceRegistry[n];if(!s){this._oInstanceRegistry[n]=s=new c(Object.assign({factory:this,scopeObject:null,scopeType:"service"},t))}return s.initPromise.then(()=>this._oInstanceRegistry[n]).catch(e=>{this._oInstanceRegistry[n]=null;throw e})};n.getInstance=function e(t){return this._oInstanceRegistry[t.getId()]};n.removeGlobalInstance=function e(t){this._oInstanceRegistry[t.getId()]=null};return t}(s);return u},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/CollaborationManagerServiceFactory", ["sap/base/Log","sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory"],function(e,t,i){"use strict";function s(e){return new Promise((t,i)=>{sap.ui.require([e],i=>{if(!(i&&i.__esModule)){i=i===null||!(typeof i==="object"&&e.endsWith("/library"))?{default:i}:i;Object.defineProperty(i,"__esModule",{value:true})}t(i)},e=>{i(e)})})}var r={};function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}let o=function(t){function i(){var e;for(var i=arguments.length,s=new Array(i),r=0;r<i;r++){s[r]=arguments[r]}e=t.call(this,...s)||this;e.__implements__sap_insights_ICardProvider=true;e.registered=false;return e}r.CollaborationManagerService=i;n(i,t);var a=i.prototype;a.init=function e(){this.initPromise=new Promise(e=>{this.appComponent=this.getContext().scopeObject;e(this)})};a.getCardsChannel=async function e(){const{default:t}=await s("sap/insights/CardHelper");const i=await t.getServiceAsync("UIService");return i.getCardsChannel()};a.connect=async function t(i,s){try{const e=await this.getCardsChannel();if(e.isEnabled()){this.onRetrieveAvailableCards=s;this.channel=e;this.id=i;this.consumers={};this.sharedCards=[];if(this.registered!==true){await this.registerProvider()}this.updateConsumers()}}catch(t){e.debug("Collaboration Manager connection failed",t)}return this};a.onConsumerConnected=async function e(t){if(!this.consumers[t]){this.consumers[t]=true;await(this.onRetrieveAvailableCards?.());this.shareAvailableCards(t)}return Promise.resolve(Object.keys(this.consumers).length)};a.onConsumerDisconnected=async function e(t){if(this.consumers[t]){delete this.consumers[t]}return Promise.resolve(Object.keys(this.consumers).length)};a.onCardRequested=function e(t,i){const s=this.sharedCards.find(e=>e?.id===i);s?.callback?.(s.card);return s};a.onViewUpdate=async function e(t){if(this.registered!==t){if(t){await this.registerProvider();this.updateConsumers()}else{await this.unregisterProvider()}}else if(this.registered){this.updateConsumers()}};a.registerProvider=async function e(){if(this.channel){await this.channel.registerProvider(this.id,this);this.registered=true}};a.unregisterProvider=async function e(){if(this.channel){await this.channel.unregister(this.id);this.registered=false;this.consumers={};this.sharedCards=[];this.onRetrieveAvailableCards=undefined}};a.updateConsumers=function e(){this.shareAvailableCards()};a.shareAvailableCards=function e(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"*";this?.channel?.publishAvailableCards(this.id,this.sharedCards,t)};a.addCardsToCollaborationManager=function e(t,i){this.sharedCards=[];for(const[e,s]of Object.entries(t)){this.sharedCards.push({id:e,title:s.title,parentAppId:i,callback:s.callback,card:s.card})}};a.getDesignTimeCard=async function t(i){const r=await s("sap/cards/ap/common/services/RetrieveCard");let n;const a=this.appComponent;try{n=await r.getObjectPageCardManifestForPreview(a,{cardType:i})}catch(t){e.error(t)}return n};a.publishCard=function e(t){this.channel.publishCard(this.id,{id:t["sap.app"].id,descriptorContent:t},"*")};return i}(t);r.CollaborationManagerService=o;let c=function(e){function t(){return e.apply(this,arguments)||this}r=t;n(t,e);var i=t.prototype;i.createInstance=async function e(t){this.instance=new o(t);return this.instance.initPromise};i.getInstance=function e(){return this.instance};i.shareAvailableCards=function e(){this.instance.shareAvailableCards()};return t}(i);c.serviceClass=o;r=c;return r},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/CollaborativeToolsServiceFactory", ["sap/base/Log","sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory"],function(t,e,i){"use strict";function o(t){return new Promise((e,i)=>{sap.ui.require([t],i=>{if(!(i&&i.__esModule)){i=i===null||!(typeof i==="object"&&t.endsWith("/library"))?{default:i}:i;Object.defineProperty(i,"__esModule",{value:true})}e(i)},t=>{i(t)})})}var a={};function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)}function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}let c=function(e){function i(){return e.apply(this,arguments)||this}a.CollaborativeToolsService=i;n(i,e);var r=i.prototype;r.init=function t(){this.collaborationService={isInitialized:false};this.initPromise=Promise.resolve(this)};r.getInterface=function t(){return this};r.initializeMSTeams=async function e(){try{const t=await this.getCollaborationServices();this.collaborationService.isInitialized=true;this.collaborationService.teamsHelperService=t.oTeamsHelperService;this.collaborationService.isContactsCollaborationSupported=typeof t.oTeamsHelperService.isContactsCollaborationSupported==="function"&&t.oTeamsHelperService.isContactsCollaborationSupported();this.collaborationService.cmHelperService=t.oCMHelperService}catch(e){t.info("Couldn't evaluate the support for contacts collaboration in MS Teams")}};r.getMailPopoverFromMsTeamsIntegration=async function t(e){if(!this.collaborationService.isInitialized){await this.initializeMSTeams()}try{return await(this.collaborationService.teamsHelperService?.enableContactsCollaboration(e))}catch{return undefined}};r.isContactsCollaborationSupported=async function t(){if(!this.collaborationService.isInitialized){await this.initializeMSTeams()}return this.collaborationService.isContactsCollaborationSupported===true};r.getTeamContactStatus=async function t(e){if(!this.collaborationService.isInitialized){await this.initializeMSTeams()}if(!this.collaborationService.isContactsCollaborationSupported){return undefined}try{return await(this.collaborationService.teamsHelperService?.getTeamsContactStatus(e))}catch{return undefined}};r.getTeamContactOptions=async function t(){if(!this.collaborationService.isInitialized){await this.initializeMSTeams()}if(!this.collaborationService.isContactsCollaborationSupported){return undefined}if(!this.collaborationService.contactOptions){try{this.collaborationService.contactOptions=await(this.collaborationService.teamsHelperService?.getTeamsContactCollabOptions())}catch{return undefined}}return this.collaborationService.contactOptions};r.getTeamContactOption=async function t(e){const i=await this.getTeamContactOptions();let o;if(i){for(let t=0;t<i.length;t++){if(i[t].key===e){o=i[t];break}}}return o};r.getTeamsCollabOptionsViaShare=async function t(e){if(!this.collaborationService.isInitialized){await this.initializeMSTeams()}return this.collaborationService.teamsHelperService?.getOptions(e)};r.getCollaborationManagerOption=async function t(){if(!this.collaborationService.isInitialized){await this.initializeMSTeams()}return this.collaborationService.cmHelperService?.getOptions()};r.getCollaborationServices=async function t(){const{default:e}=await o("sap/suite/ui/commons/collaboration/ServiceContainer");return e.getCollaborationServices()};return i}(e);a.CollaborativeToolsService=c;let s=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var i=e.prototype;i.createInstance=async function t(e){const i=new c(e);return i.initPromise};return e}(i);s.CollaborativeToolsServiceClass=c;return s},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/ContextSharingServiceFactory", ["sap/base/Log","sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory","../CommonUtils"],function(t,e,n,i){"use strict";function o(t){return new Promise((e,n)=>{sap.ui.require([t],n=>{if(!(n&&n.__esModule)){n=n===null||!(typeof n==="object"&&t.endsWith("/library"))?{default:n}:n;Object.defineProperty(n,"__esModule",{value:true})}e(n)},t=>{n(t)})})}var r={};function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}let c=function(e){function n(){return e.apply(this,arguments)||this}r.ContextSharingService=n;s(n,e);var a=n.prototype;a.init=function t(){this.initPromise=new Promise(async t=>{this.appComponent=e.prototype.getContext.bind(this)().scopeObject;await this.registerProvider();t(this)})};a.onExit=function t(){this.contextChannel?.unregisterProvider(this)};a.isContextChannelSupported=async function t(){const e=await this.appComponent.getService("environmentCapabilities");return e.getCapabilities().ContextSharingSupported&&await e.isContextSharingEnabled()};a.registerProvider=async function e(){if(!await this.isContextChannelSupported()){return}const{default:n}=await o("sap/insights/channels/ContextChannel");try{this.contextChannel=await n.getInstance();this.contextChannel.registerProvider(this)}catch(e){t.error(e)}};a.getId=function t(){return this.appComponent.getId()};a.buildContext=function t(){const e=this.appComponent.getShellServices();const n=i.getCurrentPageView(this.appComponent);const o=this.appComponent.getManifestEntry("sap.app");const r={app_title:o.title,[o.id]:{app:{view:n.getViewName()},flp:{hash:`${e.getHash()}&/${e.getContext().scopeObject.getRouterProxy().getHash()}`},entity:{servicePath:n.getModel().getServiceUrl(),entityPath:n.getBindingContext()?.getPath()??n.getViewData()?.fullContextPath}}};return n.getController().contextSharing.getContext(r)};a.getContext=async function t(){return Promise.resolve(this.buildContext())};return n}(e);r.ContextSharingService=c;let p=function(t){function e(){return t.apply(this,arguments)||this}r=e;s(e,t);var n=e.prototype;n.createInstance=async function t(e){const n=new c(e);return n.initPromise};return e}(n);r=p;return r},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/EnvironmentServiceFactory", ["sap/base/Log","sap/ui/VersionInfo","sap/ui/core/Lib","sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory"],function(e,i,t,n,a){"use strict";function r(e){return new Promise((i,t)=>{sap.ui.require([e],t=>{if(!(t&&t.__esModule)){t=t===null||!(typeof t==="object"&&e.endsWith("/library"))?{default:t}:t;Object.defineProperty(t,"__esModule",{value:true})}i(t)},e=>{t(e)})})}var s={};function o(e,i){e.prototype=Object.create(i.prototype),e.prototype.constructor=e,l(e,i)}function l(e,i){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},l(e,i)}const u={SmartSummarize:{intent:"IntelligentPrompt-summarize",library:"ux.eng.fioriai.reuse"},MagicFiltering:{intent:"IntelligentPrompt-filter",library:"ux.eng.fioriai.reuse",imports:"ux/eng/fioriai/reuse/easyfilter/EasyFilter"},ErrorExplanation:{intent:"IntelligentPrompt-explain",library:"ux.eng.fioriai.reuse",imports:"ux/eng/fioriai/reuse/errorexplanation/ErrorExplanation"}};const c={Chart:true,MicroChart:true,Collaboration:false,UShell:true,IntentBasedNavigation:true,AppState:true,InsightsSupported:false,ContextSharingSupported:false,SmartSummarize:false,MagicFiltering:false,ErrorExplanation:false,DisableInputAssistance:false};s.DefaultEnvironmentCapabilities=c;let p=function(n){function a(){var e;for(var i=arguments.length,t=new Array(i),a=0;a<i;a++){t[a]=arguments[a]}e=n.call(this,...t)||this;e.optionalFeatureLibraries={};return e}s.EnvironmentCapabilitiesService=a;o(a,n);var l=a.prototype;l.prepareFeature=async function e(i){const n=this.optionalFeatureLibraries[i];if(!n){throw new Error(`Feature '${i}' is unavailable`)}await t.load(n)};l.initialize=async function n(){const a=this.getContext();this.environmentCapabilities=Object.assign({},c);const s=sap.ui.require("sap/ushell/Container");const o=await i.load();this.environmentCapabilities.Chart=o.libraries.some(e=>e.name==="sap.viz");this.environmentCapabilities.MicroChart=o.libraries.some(e=>e.name==="sap.suite.ui.microchart");this.environmentCapabilities.Collaboration=o.libraries.some(e=>e.name==="sap.suite.ui.commons");this.environmentCapabilities.UShell=!!s;this.environmentCapabilities.IntentBasedNavigation=!!s;this.environmentCapabilities.InsightsSupported=o.libraries.some(e=>e.name==="sap.insights");this.environmentCapabilities.ContextSharingSupported=o.libraries.some(e=>e.name==="sap.insights");const l=await(s?.getServiceAsync("Navigation"));for(const[i,n]of Object.entries(u)){this.environmentCapabilities[i]=false;if(l){try{const{url:e}=await l.resolveIntent(`#${n.intent}`);this.optionalFeatureLibraries[i]={name:n.library,url:e,imports:n.imports};if(n.imports){try{await t.load(this.optionalFeatureLibraries[i]);await r(n.imports);this.environmentCapabilities[i]=true}catch(e){this.environmentCapabilities[i]=false}}else{this.environmentCapabilities[i]=true}}catch(t){e.info(`Feature unavailable ${i}: ${t?.message}`)}}}this.environmentCapabilities=Object.assign(this.environmentCapabilities,a.settings)};a.resolveLibrary=async function e(i){return new Promise(function(e){t.load({name:`${i}`}).then(function(){e(true);return}).catch(function(){e(false)})})};l.setCapabilities=function e(i){this.environmentCapabilities=i};l.setCapability=function e(i,t){this.environmentCapabilities[i]=t};l.getCapabilities=function e(){return this.environmentCapabilities};l.isInsightsEnabled=async function e(){return new Promise(async e=>{try{const i=await a.resolveLibrary("sap.insights");if(i){sap.ui.require(["sap/insights/CardHelper"],async i=>{try{await i.getServiceAsync("UIService");e(!await m())}catch{e(false)}})}else{e(false)}}catch{e(false)}})};l.isContextSharingEnabled=async function e(){const i=await a.resolveLibrary("sap.insights");if(i){try{await r("sap/insights/channels/ContextChannel")}catch(e){return false}return true}else{return false}};l.getInterface=function e(){return this};return a}(n);s.EnvironmentCapabilitiesService=p;let f=function(e){function i(){return e.apply(this,arguments)||this}s.EnvironmentServiceFactory=i;o(i,e);var t=i.prototype;t.createInstance=async function e(i){const t=new p(i);await t.initialize();return t};return i}(a);s.EnvironmentServiceFactory=f;async function m(){let e=false;try{const{default:i}=await r("sap/suite/ui/commons/collaboration/CollaborationHelper");e=await i.isTeamsModeActive()}catch{return false}return e}s.getMSTeamsActive=m;return s},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/NavigationServiceFactory", ["sap/fe/navigation/NavigationHandler","sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory","sap/ui/thirdparty/jquery"],function(t,e,n,jQuery){"use strict";var r={};function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}let o=function(e){function n(){return e.apply(this,arguments)||this}r.NavigationService=n;i(n,e);var a=n.prototype;a.init=function e(){const n=this.getContext(),r=n&&n.scopeObject;this.oNavHandler=new t(r);this.oNavHandler.setModel(r.getModel());this.initPromise=Promise.resolve(this)};a.exit=function t(){this.oNavHandler.destroy()};a.navigate=function t(e,n,r,i,a,o,s){this.oNavHandler.navigate(e,n,r,i,a,o,s)};a.parseNavigation=function t(){return this.oNavHandler.parseNavigation()};a.getAppSpecificHash=async function t(e){return this.oNavHandler._getAppSpecificHash(e)};a.getAppStateKeyAndUrlParameters=function t(e){return this.oNavHandler._getAppStateKeyAndUrlParameters(e)};a.getTechnicalParameters=function t(){return this.oNavHandler.getTechnicalParameters()};a.setTechnicalParameters=function t(e){this.oNavHandler.setTechnicalParameters(e)};a.setModel=function t(e){this.oNavHandler.setModel(e)};a.storeInnerAppStateAsync=async function t(e,n,r){return new Promise((t,i)=>this.oNavHandler.storeInnerAppStateAsync(e,n,r).then(t,i))};a.replaceHash=function t(e){this.oNavHandler.replaceHash(e)};a.replaceInnerAppStateKey=function t(e,n){return this.oNavHandler._replaceInnerAppStateKey(e,n)};a.getUrlParametersFromSelectionVariant=function t(e){return this.oNavHandler._getURLParametersFromSelectionVariant(e)};a.saveAppStateWithImmediateReturn=function t(e){if(e){const t=e.toJSONString(),n=JSON.parse(t),r={selectionVariant:n},i=this.oNavHandler._saveAppStateWithImmediateReturn(r);return i?.appStateKey?i.appStateKey:""}else{return undefined}};a.mixAttributesAndSelectionVariant=function t(e,n,r){return this.oNavHandler.mixAttributesAndSelectionVariant(e,n,r)};a.constructContextUrl=function t(e,n){return this.oNavHandler.constructContextUrl(e,n)};a.getInterface=function t(){return this};a.getIAppStateKey=function t(){return this.oNavHandler.getIAppStateKey()};a.checkIsPotentiallySensitive=function t(e){return this.oNavHandler._checkIsPotentiallySensitive(e)};return n}(e);r.NavigationService=o;function s(){return{}}async function c(){return Promise.resolve({})}function u(){const t=jQuery.Deferred();t.resolve({},{},"initial");return t.promise()}function p(){return""}let l=function(t){function e(){var e;e=t.call(this)||this;e.createEmptyAppState=s;e.mixAttributesAndSelectionVariant=s;e.getAppState=c;e.getStartupAppState=c;e.parseNavigation=u;e.constructContextUrl=p;e.getIAppStateKey=p;e.initPromise=Promise.resolve(e);return e}r.NavigationServicesMock=e;i(e,t);var n=e.prototype;n.getInterface=function t(){return this};n.replaceInnerAppStateKey=function t(e){return e?e:""};n.navigate=function t(){};return e}(n);r.NavigationServicesMock=l;let v=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var n=e.prototype;n.createInstance=async function t(e){const n=sap.ui.require("sap/ushell/Container")?new o(e):new l;return n.initPromise.then(function(t){return t})};return e}(n);return v},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/ResourceModelServiceFactory", ["sap/fe/core/ResourceModel","sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory"],function(e,t,n){"use strict";var o={};function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c(e,t)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}let r=function(t){function n(){return t.apply(this,arguments)||this}o.ResourceModelService=n;s(n,t);var c=n.prototype;c.init=function t(){const n=this.getContext();const o=n.settings;this.oFactory=n.factory;const s=o.bundles.concat(o.enhanceI18n||[]).map(function(e){return typeof e.isA==="function"&&e.isA("sap.ui.model.resource.ResourceModel")?e.getResourceBundle():{bundleName:e.replace(/\//g,".")}});this.oResourceModel=new e({bundleName:s[0].bundleName,enhanceWith:s.slice(1),async:true});if(n.scopeType==="component"){const e=n.scopeObject;e.setModel(this.oResourceModel,o.modelName)}this.initPromise=Promise.all([this.oResourceModel.getResourceBundle(),this.oResourceModel._pEnhanced||Promise.resolve()]).then(e=>{this.oResourceModel.__bundle=e[0];return this})};c.getResourceModel=function e(){return this.oResourceModel};c.getInterface=function e(){return this};c.exit=function e(){this.oFactory.removeGlobalInstance()};return n}(t);o.ResourceModelService=r;let i=function(e){function t(){var t;for(var n=arguments.length,o=new Array(n),s=0;s<n;s++){o[s]=arguments[s]}t=e.call(this,...o)||this;t._oInstances={};return t}s(t,e);var n=t.prototype;n.createInstance=async function e(t){const n=`${t.scopeObject.getId()}_${t.settings.bundles.join(",")}`+(t.settings.enhanceI18n?`,${t.settings.enhanceI18n.join(",")}`:"");if(!this._oInstances[n]){this._oInstances[n]=new r(Object.assign({factory:this},t))}return this._oInstances[n].initPromise};n.removeGlobalInstance=function e(){this._oInstances={}};return t}(n);return i},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/RoutingServiceFactory", ["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/controllerextensions/BusyLocker","sap/fe/core/controllerextensions/Placeholder","sap/fe/core/controllerextensions/messageHandler/messageHandling","sap/fe/core/controllerextensions/routing/NavigationReason","sap/fe/core/helpers/AppStartupHelper","sap/fe/core/helpers/EditState","sap/fe/core/helpers/ManifestHelper","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/SemanticKeyHelper","sap/ui/base/BindingParser","sap/ui/base/EventProvider","sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory","sap/ui/model/odata/v4/ODataUtils","sap/ui/util/openWindow","../converters/MetaModelConverter"],function(e,t,n,o,i,a,r,s,u,c,h,l,f,g,p,d,m,v){"use strict";var P,C,R,y,M,_,b;function L(e){return new Promise((t,n)=>{sap.ui.require([e],n=>{if(!(n&&n.__esModule)){n=n===null||!(typeof n==="object"&&e.endsWith("/library"))?{default:n}:n;Object.defineProperty(n,"__esModule",{value:true})}t(n)},e=>{n(e)})})}var x={};var T=u.getRouteTargetNames;var S=t.event;var w=t.defineUI5Class;function E(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,A(e,t)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function H(e,t,n,o,i){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}function O(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let F=(P=w("sap.fe.core.services.RoutingServiceEventing"),C=S(),R=S(),P(y=(M=function(e){function t(){var t;for(var n=arguments.length,o=new Array(n),i=0;i<n;i++){o[i]=arguments[i]}t=e.call(this,...o)||this;E(t,"routeMatched",_,t);E(t,"afterRouteMatched",b,t);return t}I(t,e);return t}(f),_=H(M.prototype,"routeMatched",[C],{configurable:true,enumerable:true,writable:true,initializer:null}),b=H(M.prototype,"afterRouteMatched",[R],{configurable:true,enumerable:true,writable:true,initializer:null}),M))||y);let k=function(t){function u(){var e;for(var n=arguments.length,o=new Array(n),i=0;i<n;i++){o[i]=arguments[i]}e=t.call(this,...o)||this;e.navigationInfoQueue=[];e.enabled=false;return e}x.RoutingService=u;I(u,t);var f=u.prototype;f.init=function e(){const t=this.getContext();if(t.scopeType==="component"){this.oAppComponent=t.scopeObject;this.oModel=this.oAppComponent.getModel();this.oMetaModel=this.oModel?.getMetaModel();this.oRouter=this.oAppComponent.getRouter();this.oRouterProxy=this.oAppComponent.getRouterProxy();this.eventProvider=new F;const e=this.oAppComponent.getManifestEntry("sap.ui5").routing;this._parseRoutingConfiguration(e);const n=this.oAppComponent.getManifestEntry("sap.app");this.outbounds=n.crossNavigation?.outbounds??{}}this.initPromise=Promise.resolve(this)};f.beforeExit=function e(){this.enabled=false;this.oRouter.detachRouteMatched(this._fnOnRouteMatched,this);this.eventProvider.fireEvent("routeMatched",{})};f.exit=function e(){this.eventProvider.destroy()};f._parseRoutingConfiguration=function t(n){const o=n?.config?.routerClass==="sap.f.routing.Router";this._mTargets={};if(n?.targets){for(const e of Object.keys(n.targets)){this._mTargets[e]=Object.assign({targetName:e},n.targets[e]);const t=this._mTargets[e].contextPattern;if(t!==undefined){this._mTargets[e].viewLevel=this._getViewLevelFromPattern(t,0)}}}this._mRoutes={};if(n?.routes){for(const t of n.routes){const n=T(t.target),i=t.name,a=t.pattern;if(!a){continue}if(a.length<8||a.indexOf(":?query:")!==a.length-8){e.warning(`Pattern for route ${i} doesn't end with ':?query:' : ${a}`)}const r=this._getViewLevelFromPattern(a,0);this._mRoutes[i]={name:i,pattern:a,targets:n,routeLevel:r};for(const e of n){const t=this._mTargets[e].parent;if(t){n.push(t)}}if(!o){const e=this._mTargets[n[0]].viewLevel;if(e===undefined||e<r){this._mTargets[n[0]].viewLevel=r}this._mTargets[n[0]].FCLLevel=-1}else if(n.length===1&&this._mTargets[n[0]].controlAggregation!=="beginColumnPages"){this._mTargets[n[0]].FCLLevel=3}else{n.forEach(e=>{switch(this._mTargets[e].controlAggregation){case"beginColumnPages":this._mTargets[e].FCLLevel=0;break;case"midColumnPages":this._mTargets[e].FCLLevel=1;break;default:this._mTargets[e].FCLLevel=2}})}}}Object.keys(this._mTargets).forEach(e=>{let t=this._mTargets[e].parent;while(t){this._mTargets[t].viewLevel=this._mTargets[t].viewLevel||this._mTargets[e].viewLevel;this._mTargets[t].contextPattern=this._mTargets[t].contextPattern||this._mTargets[e].contextPattern;this._mTargets[t].FCLLevel=this._mTargets[t].FCLLevel||this._mTargets[e].FCLLevel;this._mTargets[t].controlAggregation=this._mTargets[t].controlAggregation||this._mTargets[e].controlAggregation;e=t;t=this._mTargets[e].parent}});const i=[];const a=[];let r;for(const e in this._mRoutes){const t=this._mRoutes[e].routeLevel;if(t===0){i.push(e)}else if(t===1){a.push(e)}}if(i.length===1){r=i[0]}else if(a.length===1){r=a[0]}if(r){const t=this._mRoutes[r].targets.slice(-1)[0];this.sContextPath="";const n=this._mTargets[t].options?.settings;if(n){this.sContextPath=n.contextPath||`/${n.entitySet}`}if(!this.sContextPath){e.warning(`Cannot determine default contextPath: contextPath or entitySet missing in default target: ${t}`)}}else{e.warning("Cannot determine default contextPath: no default route found.")}Object.keys(this._mTargets).map(e=>this._mTargets[e]).sort((e,t)=>e.viewLevel!==undefined&&t.viewLevel!==undefined&&e.viewLevel<t.viewLevel?-1:1).forEach(e=>{if(e.options){const t=e.options.settings;const n=t.contextPath||(t.entitySet?`/${t.entitySet}`:"");if(!t.fullContextPath&&n){t.fullContextPath=`${n}/`}Object.keys(t.navigation||{}).forEach(n=>{const o=this._mRoutes[t.navigation[n].detail?.route];if(o&&o.targets){o.targets.forEach(o=>{if(this._mTargets[o].options?.settings&&!this._mTargets[o].options?.settings?.fullContextPath){if(this._mTargets[o].options.settings.contextPath){this._mTargets[o].options.settings.fullContextPath=this._mTargets[o].options.settings.contextPath+"/"}else if(e.viewLevel===0){this._mTargets[o].options.settings.fullContextPath=`${(n.startsWith("/")?"":"/")+n}/`}else{this._mTargets[o].options.settings.fullContextPath=`${t.fullContextPath+n}/`}}})}})}})};f._getViewLevelFromPattern=function e(t,n){t=t.replace(":?query:","");const o=new RegExp("/[^/]*$");if(t&&t[0]!=="/"&&t[0]!=="?"){t=`/${t}`}if(t.length){t=t.replace(o,"");if(this.oRouter.match(t)||t===""){return this._getViewLevelFromPattern(t,++n)}else{return this._getViewLevelFromPattern(t,n)}}else{return n}};f._getRouteInformation=function e(t){if(t===undefined){return undefined}return this._mRoutes[t]};f._getTargetInformation=function e(t){if(t===undefined){return undefined}return this._mTargets[t]};f._getComponentId=function e(t,n){if(n.indexOf(`${t}---`)===0){return n.substring(t.length+3)}return n};f.getTargetInformationFor=function e(t){const n=this._getComponentId(t._sOwnerId,t.getId());let o;Object.keys(this._mTargets).forEach(e=>{if(this._mTargets[e].id===n||this._mTargets[e].viewId===n){o=e}});return this._getTargetInformation(o)};f.getLastSemanticMapping=function e(){return this.oLastSemanticMapping};f.setLastSemanticMapping=function e(t){this.oLastSemanticMapping=t};f.getHashFromRoute=async function e(t,n,o){if(!this.enabled){return Promise.resolve("")}let i;if(!o){i=Promise.resolve(h.getSemanticPath(t))}else{i=this.prepareParameters(o,n,t).then(e=>this.oRouter.getURL(n,e))}return await i};f.navigateTo=async function e(t,n,o,i,a){if(!this.enabled){return Promise.resolve()}let r,s;if(t.getModel()&&t.getModel().getMetaModel&&t.getModel().getMetaModel()){s=c.isStickySessionSupported(t.getModel().getMetaModel())}if(!o){r=Promise.resolve(h.getSemanticPath(t))}else{r=this.prepareParameters(o,n,t).then(e=>this.oRouter.getURL(n,e))}const u=await r;const l=()=>{this.oRouterProxy.navToHash(u,i,false,false,!s)};if(a===true){return l}else{return l()}};f.prepareParameters=async function t(n,o,i){let a;try{const e=i.getPath();const t=i.getModel().getMetaModel();const o=e.split("/");const r=Object.keys(n).map(async e=>{const a=n[e];const r=l.complexParser(a);const s=r.parts||[r];const u=s.map(async function(e){const n=e.path.split("../");const a=o.slice(0,o.length-n.length+1);const r=a.join("/");const s=r===i.getPath()?i:i.getModel().bindContext(r).getBoundContext();const u=t.getMetaContext(r+"/"+n[n.length-1]);return s.requestProperty(n[n.length-1]).then(function(e){const t=u.getObject();const n=t.$Type;return d.formatLiteral(e,n)})});return Promise.all(u).then(t=>{const n=r.formatter?r.formatter.apply(this,t):t.join("");return{key:e,value:n}})});a=Promise.all(r).then(function(e){const t={};e.forEach(function(e){t[e.key]=e.value});return t})}catch(t){e.error(`Could not parse the parameters for the navigation to route ${o}`);a=Promise.resolve({})}return a};f._fireRouteMatchEvents=function e(t){this.eventProvider.fireEvent("routeMatched",t);this.eventProvider.fireEvent("afterRouteMatched",t);s.cleanProcessedEditState()};f.navigateToContext=async function e(t){let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};let o=arguments.length>2?arguments[2]:undefined;let a=arguments.length>3?arguments[3]:undefined;if(!this.enabled){return Promise.resolve(false)}let r="";let s;const u=c.isStickySessionSupported(this.oMetaModel);if(n?.targetPath&&o?.navigation){const e=o.navigation;const i=e[n.targetPath].detail;r=i.route;if(i.parameters&&t.isA("sap.ui.model.odata.v4.Context")){s=this.prepareParameters(i.parameters,r,t)}}let h=this._getPathFromContext(t,n);if(h.length===0&&this.bExitOnNavigateBackToRoot){this.oRouterProxy.exitFromApp();return Promise.resolve(true)}if(n?.createOnNavigateParameters){h+="(...)"}const l=this._calculateLayout(h,n);if(l){h+=`?layout=${l}`}const f={createOnNavigateParameters:n.createOnNavigateParameters,bTargetEditable:n?.editable,bPersistOPScroll:n?.persistOPScroll,bShowPlaceholder:n?.showPlaceholder!==undefined?n?.showPlaceholder:true,reason:n?.reason,redirectedToNonDraft:n.redirectedToNonDraft};if(n?.updateFCLLevel!==-1&&n?.recreateContext!==true){if(t.isA("sap.ui.model.odata.v4.Context")){f.useContext=t}}if(n?.checkNoHashChange){const e=this.oRouterProxy.getHash().replace(/[&?]{1}sap-iapp-state=[A-Z0-9]+/,"");if(h===e){const e=this.oRouter.getRouteInfoByHash(this.oRouterProxy.getHash());let t={config:{}};if(e){t={...e,config:{}};t.navigationInfo=f;t.routeInformation=this._getRouteInformation(this.sCurrentRouteName);t.routePattern=this.sCurrentRoutePattern;t.views=this.aCurrentViews}this.oRouterProxy.setFocusForced(!!n.forceFocus);this._fireRouteMatchEvents(t);return Promise.resolve(true)}}if(n?.transient&&!!n.editable&&!h.includes("(...)")){if(h.includes("?")){h+="&i-action=create"}else{h+="?i-action=create"}}if(n.navMode==="openInNewTab"){sap.ui.require(["sap/ushell/Container"],async e=>{const t=this.oAppComponent.getShellServices();const n=t.parseShellHash(document.location.hash);const o=await e.getServiceAsync("Navigation");const i=await o.getHref({target:{semanticObject:n.semanticObject,action:n.action}});const a=await t.getInframeUrl();let r,s;if(a){r=new URL(a);s=a.replace(r.hash,`${i}&/${encodeURI(h)}`)}else{r=new URL(window.location.href);s=`${r.origin}${r.pathname}${i}&/${encodeURI(h)}`}m(s)});return Promise.resolve(true)}else{if(a?.name==="sap.fe.templates.ListReport"){const e=this.oRouter.getRouteInfoByHash(h);if(e){const t=this._getRouteInformation(e.name);if(t&&t.targets&&t.targets.length>0){const e=t.targets[t.targets.length-1];const n=this._getTargetInformation(e);if(n&&n.name==="sap.fe.templates.ObjectPage"){i.removeUnboundTransitionMessages()}}}}this.navigationInfoQueue.push(f);if(r&&s){return s.then(e=>{Object.assign(e,{bIsStickyMode:u});this.oRouter.navTo(r,e);return true})}return this.oRouterProxy.navToHash(h,!!n.preserveHistory,n?.noPreservationCache,n?.forceFocus,!u).then(e=>{if(!e){this.navigationInfoQueue.pop()}return e})}};f.navigateToRoute=async function e(t,n){if(!this.enabled){return Promise.resolve(false)}this.setLastSemanticMapping(undefined);const o=this.oRouter.getURL(t,n);return this.oRouterProxy.navToHash(o,undefined,undefined,undefined,!n?.bIsStickyMode)};f.isCurrentStateImpactedBy=function e(t){const n=t.getPath();if(this.oRouterProxy.isCurrentStateImpactedBy(n)){return true}else if(/^[^()]+\([^()]+\)$/.test(n)){let e;if(this.oLastSemanticMapping&&this.oLastSemanticMapping.technicalPath===n){e=this.oLastSemanticMapping.semanticPath}else{e=h.getSemanticPath(t)}return e!=n?this.oRouterProxy.isCurrentStateImpactedBy(e):false}else{return false}};f._findPathToNavigate=function e(t){const n=new RegExp("/[^/]*$");t=t.replace(n,"");if(this.oRouter.match(t)||t===""){return t}else{return this._findPathToNavigate(t)}};f._checkIfContextSupportsSemanticPath=function e(t){if(!/^\/[^(]+\([^)]+\)$/.test(t.getPath())){return false}const n=t.getModel().getMetaModel();const o=v.getInvolvedDataModelObjects(n.getMetaContext(t.getPath())).targetObject;if(!c.isDraftRoot(o)){return false}if(t.getProperty("IsActiveEntity")===false&&t.getProperty("HasActiveEntity")===false){return false}const i=o.name;return h.getSemanticKeys(n,i)!==undefined};f._getPathFromContext=function e(t,n){let o="";if(t.isA("sap.ui.model.odata.v4.ODataListBinding")){o=t.getHeaderContext()?.getPath()??""}else{o=t.getPath();if(n.updateFCLLevel===-1){o=this._findPathToNavigate(o);if(this.oLastSemanticMapping?.technicalPath===o){o=this.oLastSemanticMapping.semanticPath}}else if(this._checkIfContextSupportsSemanticPath(t)){const e=h.getSemanticPath(t,true);if(!e){this.setLastSemanticMapping(undefined)}else if(e!==o){this.setLastSemanticMapping({technicalPath:o,semanticPath:e});o=e}}}if(o[0]==="/"){o=o.substring(1)}return o};f._calculateLayout=function e(t,n){if(n.navMode==="openInNewTab"&&n.FCLLevel!==-1){return n.FCLLevel===0?"MidColumnFullScreen":"EndColumnFullScreen"}let o=n.FCLLevel??0;if(n.updateFCLLevel){o+=n.updateFCLLevel;if(o<0){o=0}}if(n.updateFCLLevel!==undefined&&n.updateFCLLevel<0&&!n.layout){n.layout=this.oRouterProxy.findLayoutForHash(t)}return this.oAppComponent.getRootViewController().calculateLayout(o,t,n.layout,n.keepCurrentLayout)};f._beforeRouteMatched=function e(){const t=(new o).isPlaceholderEnabled();if(!t){const e=this.oAppComponent.getRootControl();n.lock(e)}};f._isNavigationTriggeredByRouterProxy=function e(){return history.state?.feLevel!==undefined};f._onRouteMatched=function t(i){const r=this.oAppComponent.getAppStateHandler(),s=this.oAppComponent.getRootControl();const u=(new o).isPlaceholderEnabled();if(n.isLocked(s)&&!u){n.unlock(s)}const c=i.getParameters();if(this.navigationInfoQueue.length){c.navigationInfo=this.navigationInfoQueue[0];this.navigationInfoQueue=this.navigationInfoQueue.slice(1)}else{c.navigationInfo={}}if(r.checkIfRouteChangedByIApp()){c.navigationInfo.reason=a.AppStateChanged;r.resetRouteChangedByIApp()}else if(this.oRouterProxy.checkRestoreHistoryWasTriggered()){c.navigationInfo.reason=a.RestoreHistory;this.oRouterProxy.resetRestoreHistoryFlag()}this.sCurrentRouteName=i.getParameter("name");this.sCurrentRoutePattern=c.config.pattern;this.aCurrentViews=i.getParameter("views");c.routeInformation=this._getRouteInformation(this.sCurrentRouteName);c.routePattern=this.sCurrentRoutePattern;this._fireRouteMatchEvents(c);if(!this._isNavigationTriggeredByRouterProxy()){this.oRouterProxy.restoreHistory().then(()=>{this.oRouterProxy.resolveRouteMatch();return}).catch(function(t){e.error("Error while restoring history",t)})}else{this.oRouterProxy.resolveRouteMatch()}};f.attachRouteMatched=function e(t,n,o){this.eventProvider.attachEvent("routeMatched",t,n,o)};f.detachRouteMatched=function e(t,n){this.eventProvider.detachEvent("routeMatched",t,n)};f.attachAfterRouteMatched=function e(t,n,o){this.eventProvider.attachEvent("afterRouteMatched",t,n,o)};f.detachAfterRouteMatched=function e(t,n){this.eventProvider.detachEvent("afterRouteMatched",t,n)};f.initializeRouting=async function e(){this.enabled=true;if(this.oAppComponent.getEnvironmentCapabilities().getCapabilities().Collaboration){const{default:e}=await L("sap/suite/ui/commons/collaboration/CollaborationHelper");await e.processAndExpandHash()}this._fnOnRouteMatched=this._onRouteMatched.bind(this);this.oRouter.attachRouteMatched(this._fnOnRouteMatched,this);const t=(new o).isPlaceholderEnabled();if(!t){this.oRouter.attachBeforeRouteMatched(this._beforeRouteMatched.bind(this))}this.navigationInfoQueue=[];s.resetEditState();this.bExitOnNavigateBackToRoot=!this.oRouter.match("");await this.manageStartupMode()};f.onRestore=function e(){this.manageStartupMode()};f.manageStartupMode=async function t(){const n=this.oRouter.getHashChanger().getHash().includes("sap-iapp-state");try{const e=await this.oAppComponent.getStartupParameters();const t=e!==undefined&&Object.keys(e).length!==0;const o=this.oRouter.getHashChanger().getHash();if(!n&&t&&!o){if(e.preferredMode&&e.preferredMode[0].toUpperCase().includes("CREATE")){await this._manageCreateStartup(e)}else{await this._manageDeepLinkStartup(e)}}await this._managedPreferredModeEdit(e)}catch(t){e.error("Error during routing initialization",t)}};f.getDefaultCreateHash=function e(t){return r.getDefaultCreateHash(t,this.getContextPath(),this.oRouter)};f._manageCreateStartup=async function e(t){return r.getCreateStartupHash(t,this.getContextPath(),this.oRouter,this.oMetaModel).then(e=>{if(e){this.oRouter.getHashChanger().replaceHash(e);if(t?.preferredMode&&t.preferredMode[0].toUpperCase().includes("AUTOCREATE")){this.oAppComponent.setStartupModeAutoCreate()}else{this.oAppComponent.setStartupModeCreate()}this.bExitOnNavigateBackToRoot=true}return})};f._manageDeepLinkStartup=async function e(t){return r.getDeepLinkStartupHash(this.oAppComponent.getManifestEntry("sap.ui5").routing,t,this.oModel).then(e=>{let t;if(e.context){const n=e.context.getPath();const o=this._checkIfContextSupportsSemanticPath(e.context)?h.getSemanticPath(e.context,false):n;if(o!==n){this.setLastSemanticMapping({technicalPath:n,semanticPath:o})}t=o.substring(1)}else if(e.hash){t=e.hash}if(t){this.oRouter.getHashChanger().replaceHash(t);this.oAppComponent.setStartupModeDeeplink()}return})};f._managedPreferredModeEdit=async function e(t){const n=this.oRouter.getHashChanger().getHash();const o=!!t.preferredMode?.[0]?.toUpperCase()?.includes("EDIT");const i=await r.verifyEditAnnotations(this.getContextPath(),this.oMetaModel);if(n&&o&&i){const e=(n.includes("?")?"&":"?")+"i-action=edit";this.oRouter.getHashChanger().replaceHash(n+e)}};f.getOutbounds=function e(){return this.outbounds};f.getContextPath=function e(){return this.sContextPath};f.getInterface=function e(){return this};return u}(g);x.RoutingService=k;let j=function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var n=t.prototype;n.createInstance=async function e(t){const n=new k(t);return n.initPromise};return t}(p);return j},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/ShellServicesFactory", ["sap/base/Log","sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory"],function(e,t,n){"use strict";var i={};function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}let a=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;n.init=function e(){this.initPromise=Promise.resolve(this);this.instanceType="mock"};n.getLinks=async function e(){return Promise.resolve([])};n.__fetchSemanticObject=async function e(){return Promise.resolve([])};n.getLinksWithCache=async function e(){return Promise.resolve([])};n.toExternal=function e(){};n.getStartupAppState=async function e(){return Promise.resolve(undefined)};n.isJamActive=function e(){return false};n.backToPreviousApp=function e(){};n.hrefForExternal=async function e(){return Promise.resolve("")};n.getHref=async function e(){return Promise.resolve("")};n.getHash=function e(){return window.location.href};n.getAppState=async function e(){return Promise.resolve({})};n.createEmptyAppState=async function e(){return Promise.resolve({})};n.createEmptyAppStateAsync=async function e(){return Promise.resolve({})};n.navigate=async function e(){return Promise.resolve(undefined)};n.isNavigationSupported=async function e(){return Promise.resolve([])};n.isInitialNavigation=async function e(){return Promise.resolve(false)};n.expandCompactHash=async function e(){return Promise.resolve("")};n.parseShellHash=function e(){return{}};n.splitHash=function e(t){const n=/#[^/]*\/(.*)/.exec(t);return{shellPart:"",appSpecificRoute:n?.length===2?n[1]:""}};n.constructShellHash=function e(){return""};n.setDirtyFlag=function e(){};n.registerDirtyStateProvider=function e(){};n.deregisterDirtyStateProvider=function e(){};n.getUser=function e(){return{}};n.getUserInitials=function e(){return""};n.hasUShell=function e(){return false};n.registerNavigationFilter=function e(){};n.unregisterNavigationFilter=function e(){};n.setBackNavigation=async function e(){return Promise.resolve()};n.setHierarchy=async function e(){return Promise.resolve()};n.setTitle=async function e(){return Promise.resolve()};n.getContentDensity=function e(){if(document.body.classList.contains("sapUiSizeCozy")){return"cozy"}else if(document.body.classList.contains("sapUiSizeCompact")){return"compact"}else{return""}};n.getPrimaryIntent=async function e(){return Promise.resolve(undefined)};n.waitForPluginsLoad=async function e(){return Promise.resolve(true)};n.getTitle=async function e(){return Promise.resolve("")};n.getPersonalizer=async function e(t,n,i){return Promise.resolve({getPersData:async()=>Promise.resolve({historyEnabled:false,suggestionsEnabled:false,apps:{}}),setPersData:()=>{}})};n.getApplicationPersonalizer=async function e(t){return Promise.resolve({getPersData:async()=>Promise.resolve({}),setPersData:()=>{}})};n.getApplicationPersonalizationData=async function e(t){return Promise.resolve({})};n.setApplicationPersonalizationData=async function e(t,n){return Promise.resolve()};n.deletePersonalizationContainer=async function e(t,n){return Promise.resolve()};n.getShellConfig=function e(){return{}};n.getRegisteredPlugins=function e(){return{AppWarmup:{},RendererExtensions:{},UserDefaults:{},UserImage:{}}};n.isFlpOptimisticBatchPluginLoaded=function e(){return false};n.parseParameters=function e(){return{}};n.getExtensionService=function e(){return{}};n.getInframeUrl=async function e(){return Promise.resolve("")};return t}(t);let o=function(t){function n(){var e;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++){i[r]=arguments[r]}e=t.call(this,...i)||this;e.applicationPersonnalizers={};return e}i.ShellServices=n;r(n,t);var s=n.prototype;s.init=function e(){const t=this.getContext();this.appComponent=t.scopeObject;this.oShellContainer=t.settings.shellContainer;this.instanceType="real";this.linksCache={};this.fnFindSemanticObjectsInCache=function(e){const t=[];const n=[];for(const i of e){if(!!i&&!!i.semanticObject){if(this.linksCache[i.semanticObject]){t.push(this.linksCache[i.semanticObject].links);Object.defineProperty(i,"links",{value:this.linksCache[i.semanticObject].links})}else{n.push(i)}}}return{oldArgs:e,newArgs:n,cachedLinks:t}};this.initPromise=new Promise((e,t)=>{this.resolveFn=e;this.rejectFn=t});const n=this.oShellContainer.getServiceAsync("Navigation");const i=this.oShellContainer.getServiceAsync("UserInfo");const r=this.oShellContainer.getServiceAsync("URLParsing");const s=this.oShellContainer.getServiceAsync("ShellNavigationInternal");const a=this.oShellContainer.getServiceAsync("PluginManager");const o=this.oShellContainer.getServiceAsync("PersonalizationV2");const c=this.oShellContainer.getServiceAsync("Extension");Promise.all([n,i,r,s,o,a,c]).then(e=>{let[t,n,i,r,s,a,o]=e;this.applicationNavigation=t;this.userInfoService=n;this.urlParsingService=i;this.shellNavigation=r;this.shellPersonalizationService=s;this.shellPluginManager=a;this.extensionService=o;this.resolveFn();return}).catch(this.rejectFn)};s.getLinks=async function e(t){return this.applicationNavigation.getLinks(t)};s.__fetchSemanticObject=async function e(){return this.applicationNavigation.getSemanticObjects()};s.getLinksWithCache=async function e(t){if(t.length===0){return[]}else{const e=this.fnFindSemanticObjectsInCache(t);if(e.newArgs.length===0){return e.cachedLinks}else{const t=await this.applicationNavigation.getLinks(e.newArgs);if(t.length!==0){const n={};for(let i=0;i<t.length;i++){if(t[i].length>0&&e.newArgs[i][0].links===undefined){n[e.newArgs[i][0].semanticObject]={links:t[i]};this.linksCache=Object.assign(this.linksCache,n)}}}if(e.cachedLinks.length===0){return t}else{const n=[];let i=0;for(const r of e.oldArgs){if(i<t.length){if(t[i].length>0&&r[0].semanticObject===e.newArgs[i][0].semanticObject){n.push(t[i]);i++}else{n.push(r[0].links)}}else{n.push(r[0].links)}}return n}}}};s.getShellUIService=async function e(){return this.appComponent.getService("ShellUIService")};s.getShellContainer=function e(){return this.oShellContainer};s.getInframeUrl=async function t(){const n=this.getShellContainer();let i;if(n?.inAppRuntime()){try{i=await n.getFLPUrlAsync(true)}catch(t){e.error("Error while getting the FLP URL",t)}}return i};s.toExternal=function e(t,n){this.navigate(t,n)};s.getStartupAppState=async function e(t){return this.applicationNavigation.getStartupAppState(t)};s.backToPreviousApp=async function e(){return this.applicationNavigation.backToPreviousApp()};s.hrefForExternal=async function e(t,n){return this.applicationNavigation.getHref(t,n)};s.getHref=async function e(t,n){return this.applicationNavigation.getHref(t,n)};s.getAppState=async function e(t,n){return this.applicationNavigation.getAppState(t,n)};s.createEmptyAppState=async function e(t){return this.applicationNavigation.createEmptyAppState(t)};s.isNavigationSupported=async function e(t,n){return this.applicationNavigation.isNavigationSupported(t,n)};s.navigate=async function e(t,n){return await this.applicationNavigation.navigate(t,n)};s.isInitialNavigation=async function e(){return this.applicationNavigation.isInitialNavigation()};s.expandCompactHash=async function e(t){return Promise.resolve(t)};s.getHash=function e(){return`#${this.urlParsingService.getShellHash(window.location.href)}`};s.getRegisteredPlugins=function e(){return this.shellPluginManager.getRegisteredPlugins()};s.isFlpOptimisticBatchPluginLoaded=function e(){const t=this.getRegisteredPlugins().RendererExtensions;if(t?.hasOwnProperty("MANAGE_FE_CACHES")&&!!t.MANAGE_FE_CACHES.enabled){return true}else{return false}};s.parseShellHash=function e(t){return this.urlParsingService.parseShellHash(t)};s.splitHash=function e(t){return this.urlParsingService.splitHash(t)};s.constructShellHash=function e(t){return this.urlParsingService.constructShellHash(t)};s.setDirtyFlag=function e(t){this.oShellContainer.setDirtyFlag(t)};s.registerDirtyStateProvider=function e(t){this.oShellContainer.registerDirtyStateProvider(t)};s.deregisterDirtyStateProvider=function e(t){this.oShellContainer.deregisterDirtyStateProvider(t)};s.getUser=function e(){return this.userInfoService};s.isJamActive=function e(){return this.oShellContainer.getUser().isJamActive()};s.getUserInitials=function e(){return this.oShellContainer.getUser().getInitials()};s.hasUShell=function e(){return true};s.registerNavigationFilter=function e(t){this.shellNavigation.registerNavigationFilter(t)};s.unregisterNavigationFilter=function e(t){this.shellNavigation.unregisterNavigationFilter(t)};s.setBackNavigation=async function e(t){(await this.getShellUIService()).setBackNavigation(t)};s.setHierarchy=async function e(t){(await this.getShellUIService()).setHierarchy(t)};s.setTitle=async function e(t){(await this.getShellUIService()).setTitle(t)};s.getTitle=async function e(){return(await this.getShellUIService()).getTitle()};s.getContentDensity=function e(){return this.oShellContainer.getUser().getContentDensity()};s.getPrimaryIntent=async function e(t,n){const i=await this.applicationNavigation.getPrimaryIntent(t,n);if(Array.isArray(i)){return i[0]}else{return i}};s.waitForPluginsLoad=async function t(){return new Promise(t=>{if(!this.shellPluginManager?.getPluginLoadingPromise){t(false)}else{this.shellPluginManager.getPluginLoadingPromise("RendererExtensions").fail(n=>{e.error(n,"sap.fe.core.services.ShellServicesFactory.waitForPluginsLoad");t(false)}).then(()=>t(true))}})};s.getPersonalizer=async function e(t,n,i){n={keyCategory:this.shellPersonalizationService.constants.keyCategory.FIXED_KEY,writeFrequency:this.shellPersonalizationService.constants.writeFrequency.LOW,clientStorageAllowed:false,validity:Infinity,...n};return await this.shellPersonalizationService.getPersonalizer(t,n,i)};s.deletePersonalizationContainer=async function e(t,n){return this.shellPersonalizationService.deleteContainer(t,n)};s.getApplicationPersonalizer=async function e(t){if(!this.applicationPersonnalizers[t]){this.applicationPersonnalizers[t]=this.getPersonalizer({container:`Application#${this.appComponent.getManifest()["sap.app"].id}`,item:t},{},this.appComponent)}return this.applicationPersonnalizers[t]};s.getApplicationPersonalizationData=async function e(t){return await((await this.getApplicationPersonalizer(t))?.getPersData())};s.setApplicationPersonalizationData=async function e(t,n){(await this.getApplicationPersonalizer(t)).setPersData(n)};s.getShellConfig=function e(){return window["sap-ushell-config"]};s.parseParameters=function e(t){return this.urlParsingService.parseParameters(t)};s.getExtensionService=function e(){return this.extensionService};return n}(t);i.ShellServices=o;let c=function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var i=n.prototype;i.createInstance=async function t(n){n.settings.shellContainer=sap.ui.require("sap/ushell/Container");const i=n.settings.shellContainer?new o(n):new a(n);await i.initPromise;const r=n.scopeObject;r.getShellServices=()=>i;const s=r.getModel("internal");if(s){let t=[];try{t=await i.__fetchSemanticObject()}catch(t){e.error("Error while calling getSemanticObjects",t)}finally{s.setProperty("/semanticObjects",t)}}return i};return n}(n);return c},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/SideEffectsServiceFactory", ["sap/base/Log","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/TypeGuards","sap/fe/core/helpers/WebSocket","sap/fe/core/templating/PropertyHelper","sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory","../templating/DataModelPathHelper"],function(t,e,i,n,r,o,s,a){"use strict";var c={};var f=a.getTargetObjectPath;var u=a.getTargetNavigationPath;var l=a.enhanceDataModelPath;var d=r.getAssociatedTextPropertyPath;var g=n.getWebSocketChannelUrl;var p=n.getWebSocketBaseUrl;var E=n.createWebSocket;var h=n.ChannelType;var y=i.isPropertyPathExpression;var m=i.isProperty;var S=i.isNavigationProperty;var v=i.isEntityType;var P=i.isEntitySet;var T=i.isComplexType;var C=e.getInvolvedDataModelObjects;var b=e.convertTypes;function $(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,M(t,e)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}let R=function(i){function n(){return i.apply(this,arguments)||this}c.SideEffectsService=n;$(n,i);var r=n.prototype;r.init=function t(){const e=this.getContext();this.appComponent=e?.scopeObject;this.sideEffectsRegistry={oData:{entities:{},actions:{boundActions:{},unBoundActions:{}}},control:{}};this.recommendationRegistry={roles:{}};this.targetCallbacks={}};r.initializeWebSocketConnection=function t(){const e=this.appComponent.getModel();const i=p(e);const n=g(h.SideEffectsEvents,e);if(i&&n){this.webSocket=E(h.SideEffectsEvents,e);this.webSocket.attachMessage(this.onSideEffectsEventReceived.bind(this))}return};r.onSideEffectsEventReceived=async function t(i){const n=i.getParameter("pcpFields");if(n?.serverAction!=="RaiseSideEffect"||!n.sideEffectEventName||!n.sideEffectSource){return}const r=this.getMetaModel().getMetaContext(n.sideEffectSource);const o=e.getInvolvedDataModelObjects(r);const s=this.getSideEffectWhereEventIsSource(o.targetEntityType.fullyQualifiedName,n.sideEffectEventName);if(s.length===0){return}const a=[];const c=this.appComponent.getRootViewController().getVisibleViews();for(const t of c){const e=t.getController();if(e.isA("sap.fe.core.PageController")&&e._sideEffects.isDataPathRelevant(n.sideEffectSource,n.sideEffectEventName)){a.push(e)}}if(a.length===0){return}const f=a[a.length-1]._sideEffects;const u=this.isOnlyRecommendations(o,s);const l=this.getSideEffectsInteractionType(n.sideEffectEventName,u);switch(l){case"Confirmation":try{await f.confirmDataRefresh()}catch(t){return}break;case"Notification":f.notifyDataRefresh();break;case"None":break}for(const t of a){await t._sideEffects.requestSideEffectsForEvent(n.sideEffectEventName,n.sideEffectSource)}};r.isOnlyRecommendations=function t(e,i){const n=e.targetEntityType.annotations.UI?.Recommendations?.path;for(const t of i){const i=this.sideEffectsRegistry.oData.entities[e.targetEntityType.fullyQualifiedName]?.[`${t.entity}@com.sap.vocabularies.Common.v1.SideEffects#${t.qualifier}`];if(i?.targetProperties.length===1&&i?.targetEntities.length===0&&i?.targetProperties[0]===n){return true}}return false};r.getSideEffectsInteractionType=function t(e){let i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!this.interactionTypeDefinition){this.interactionTypeDefinition=this.appComponent.getManifestEntry("sap.fe")?.app?.sideEffectsEventsInteractionType}if(i){return"None"}if(typeof this.interactionTypeDefinition==="string"){return this.interactionTypeDefinition}if(e&&this.interactionTypeDefinition?.events?.[e]){return this.interactionTypeDefinition.events[e]}if(this.interactionTypeDefinition?.default){return this.interactionTypeDefinition.default}return"Notification"};r.addControlSideEffects=function t(e,i){if(i.sourceControlId){const t={...i,fullyQualifiedName:`${e}/SideEffectsForControl/${i.sourceControlId}`};const n=this.sideEffectsRegistry.control[e]||{};n[t.sourceControlId]=t;this.sideEffectsRegistry.control[e]=n}};r.executeAction=async function t(e,i,n){const r=i.getModel().bindContext(`${e}(...)`,i);n=n||i.getBinding().getUpdateGroupId();i.getModel().submitBatch(n);await r.execute(n,true)};r.getConvertedMetaModel=function t(){return b(this.getMetaModel(),this.capabilities)};r.getEntityTypeFromContext=function t(e){const i=e.getModel().getMetaModel(),n=i.getMetaPath(e.getPath()),r=i.getObject(n)["$Type"];return r};r.getODataEntitySideEffects=function t(e){return this.sideEffectsRegistry.oData.entities[e]||{}};r.isControlSideEffects=function t(e){return!!e.sourceControlId};r.getGlobalODataEntitySideEffects=function t(e){const i=this.getODataEntitySideEffects(e);const n=[];for(const t in i){const e=i[t];if(!e.sourceEntities&&!e.sourceProperties&&!e.sourceEvents){n.push(e)}}return n};r.getODataActionSideEffects=function t(e,i){if(i){const t=this.getEntityTypeFromContext(i);if(t){return this.sideEffectsRegistry.oData.actions.boundActions[t]?.[e]}}else{return this.sideEffectsRegistry.oData.actions.unBoundActions?.[e]}return undefined};r.getODataSideEffectsFromContextEvent=function t(e,i){const n=e.getModel().getMetaModel().getMetaContext(e.getPath());const r=C(n);const o=this.getSideEffectWhereEventIsSource(r.targetEntityType.fullyQualifiedName,i);return o.map(t=>this.sideEffectsRegistry.oData.entities[r.targetEntityType.fullyQualifiedName]?.[`${t.entity}@com.sap.vocabularies.Common.v1.SideEffects#${t.qualifier}`])};r.initialize=async function t(){const e={entities:{},properties:{},events:{}};const i=await this.appComponent.getService("environmentCapabilities");const n=this.appComponent.getModel();if(n?.isA?.("sap.ui.model.odata.v4.ODataModel")){await n.getMetaModel().requestObject("/$EntityContainer/");this.capabilities=i.getCapabilities();const t=this.getConvertedMetaModel();t.entityTypes.forEach(t=>{this.mapFieldAnnotations(t);this.sideEffectsRegistry.oData.entities[t.fullyQualifiedName]=this.retrieveODataEntitySideEffects(t);this.mapSideEffectSources(t,e)});t.actions.forEach(t=>{if(t.isBound){this.sideEffectsRegistry.oData.actions.boundActions[t.sourceEntityType.fullyQualifiedName]={...this.sideEffectsRegistry.oData.actions.boundActions[t.sourceEntityType.fullyQualifiedName],...this.retrieveODataActionsSideEffects(t)}}else{this.sideEffectsRegistry.oData.actions.unBoundActions={...this.sideEffectsRegistry.oData.actions.unBoundActions,...this.retrieveODataActionsSideEffects(t)}}});if(Object.keys(e.events).length>0){this.initializeWebSocketConnection()}}this.sourcesToSideEffectMappings=e;return this};r.mapFieldAnnotations=function t(e){const i=t=>{if(!this.recommendationRegistry.roles.hasOwnProperty(`${t}`)){this.recommendationRegistry.roles[`${t}`]={input:[],output:[]}}};e.entityProperties.forEach(t=>{const n=t.annotations.Common;if(n?.RecommendationRole){const r=n.RecommendationRole;if(r.valueOf().includes("Input")){i(`${e.name}`);this.recommendationRegistry.roles[`${e.name}`].input.push(t.name)}if(r.valueOf().includes("Output")){i(`${e.name}`);this.recommendationRegistry.roles[`${e.name}`].output.push(t.name)}}})};r.getRecommendationsMapping=function t(){return this.recommendationRegistry};r.checkIfFieldIsRecommendationRelevant=function t(i){const n=i.getBindingContext();const r=i.data().sourcePath.split("/").pop();if(n){const t=n?.getModel().getMetaModel();const i=t?.getMetaContext(n.getPath());const o=e.getInvolvedDataModelObjects(i).targetObject;let s;if(P(o)){s=o.entityType?.name}else if(S(o)){s=o.targetType?.name}const a=s&&this.recommendationRegistry.roles[s];if(a&&a?.input?.includes(r)){return true}}return false};r.getRecommendationOutputFields=function t(e){const i=this.recommendationRegistry.roles[e];if(i?.output?.length>0){return i.output}return[]};r.removeControlSideEffects=function t(e){Object.keys(this.sideEffectsRegistry.control).forEach(t=>{if(this.sideEffectsRegistry.control[t][e]){delete this.sideEffectsRegistry.control[t][e]}})};r.requestSideEffects=async function t(e,i,n){if(e.length){this.logRequest(e,i);await i.requestSideEffects(e,n)}};r.requestSideEffectsForODataAction=async function t(e,i){let n;if(e.triggerActions?.length){n=e.triggerActions.map(async t=>this.executeAction(t,i))}else{n=[]}if(e.pathExpressions?.length){n.push(this.requestSideEffects(e.pathExpressions,i))}return n.length?Promise.all(n):Promise.resolve([])};r.requestSideEffectsForNavigationProperty=async function e(i,n,r){let o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const s=this.getEntityTypeFromContext(n);if(s){const e=`${i}/`;const a=this.getODataEntitySideEffects(s);let c=[];let f=[];let u=[];Object.keys(a).filter(t=>{const n=a[t];return(n.sourceEntities||[]).some(t=>t.$NavigationPropertyPath===i)||n.sourceProperties?.length===1&&n.sourceProperties.some(t=>t.startsWith(e)&&!t.replace(e,"").includes("/"))}).forEach(t=>{const e=a[t];if(e.triggerAction&&!o){this.executeAction(e.triggerAction,n,r)}c=c.concat(e.targetProperties);f=f.concat(e.targetEntities)});const l=this.removeDuplicateTargets({targetProperties:c,targetEntities:f});u=[...l.targetProperties,...l.targetEntities];if(u.length){return this.requestSideEffects(u,n,r).catch(e=>t.error(`SideEffects - Error while processing SideEffects for Navigation Property ${i}`,e))}}return Promise.resolve()};r.getControlEntitySideEffects=function t(e){return this.sideEffectsRegistry.control[e]||{}};r.getSideEffectWhereEntityIsSource=function t(e){return this.sourcesToSideEffectMappings.entities[e]||[]};r.getSideEffectWhereEventIsSource=function t(e,i){return this.sourcesToSideEffectMappings.events[i]?.filter(t=>t.entity===e)||[]};r.requestSideEffectsForEvent=async function e(i,n,r){const o=this.getODataSideEffectsFromContextEvent(n,i);let s=[];let a=[];o.forEach(t=>{s=s.concat(t.targetProperties);a=a.concat(t.targetEntities)});const c=this.removeDuplicateTargets({targetProperties:s,targetEntities:a});const f=[...c.targetProperties,...c.targetEntities];if(f.length){try{await this.requestSideEffects(f,n,r)}catch(e){t.error(`SideEffects - Error while processing SideEffects for Event ${i}`,e)}}};r.computeFieldGroupIds=function t(e,i){const n=this.getSideEffectWhereEntityIsSource(e).map(t=>this.getFieldGroupIdForSideEffect(t,true));return n.concat(this.getSideEffectWherePropertyIsSource(i).map(t=>this.getFieldGroupIdForSideEffect(t)))};r.getSideEffectWherePropertyIsSource=function t(e){return this.sourcesToSideEffectMappings.properties[e]||[]};r.registerTargetCallback=function t(e,i){this.targetCallbacks[e]=i};r.deregisterTargetCallback=function t(e){delete this.targetCallbacks[e]};r.getRegisteredCallback=function t(e){return this.targetCallbacks[e]};r.addTextProperties=function t(e,i){const n=new Set(e.targetProperties);const r=new Set(e.targetEntities.map(t=>t.$NavigationPropertyPath));for(const t of e.targetProperties){for(const e of this.getDataModelPropertiesFromAPath(t,i)){const i=d(e.targetObject);if(i){this.addTextProperty(e,t,i,n,r)}}}return{targetProperties:Array.from(n),targetEntities:Array.from(r).map(t=>({$NavigationPropertyPath:t}))}};r.addTextProperty=function t(e,i,n,r,o){const s=l(e,n);const a=i.startsWith("/")&&s.targetEntitySet&&s.targetEntitySet.name!==e.targetEntitySet?.name?`/${s.targetEntitySet?.fullyQualifiedName}`:u(s,true);const c=i.startsWith("/")?`/${s.targetEntitySet?.fullyQualifiedName}/${s.targetObject.name}`:f(s,true);if(this.isAssociatedTextListedInSideEffectTargets(s,a,c,r,o)){if(this.isPropertyAssociatedTextOnDifferentEntitySet(e,s)){o.add(a)}else{r.add(c)}}};r.isAssociatedTextListedInSideEffectTargets=function t(e,i,n,r,o){return m(e.targetObject)&&!r.has(n)&&!r.has(`${i}${e.navigationProperties.length?"/":""}*`)&&!o.has(`${i}`)};r.isPropertyAssociatedTextOnDifferentEntitySet=function t(e,i){return e.targetEntitySet!==i.targetEntitySet&&!!i.navigationProperties&&!!i.targetEntityType};r.convertSideEffects=function t(e,i,n){const r=e.TriggerAction;const o=this.convertSideEffectsFormat(e);let s={targetProperties:o.targetProperties,targetEntities:o.targetEntities};s=this.removeBindingParameter(s,n);s=this.addTextProperties(s,i);s=this.removeDuplicateTargets(s);return{...o,...{targetEntities:s.targetEntities,targetProperties:s.targetProperties,triggerAction:r}}};r.convertSideEffectsFormat=function e(i){const n=e=>e?e.reduce((e,n)=>{let r="";if(y(n)){r=n.value}else if(typeof n==="string"){r=n}if(r){e.push(r)}else{t.error(`SideEffects - Error while processing TargetProperties for SideEffects ${i.fullyQualifiedName}`)}return e},[]):e;const r=t=>t?t.map(t=>({$NavigationPropertyPath:t.value})):t;return{fullyQualifiedName:i.fullyQualifiedName,sourceProperties:n(i.SourceProperties),sourceEntities:r(i.SourceEntities),sourceEvents:i.SourceEvents,targetProperties:n(i.TargetProperties)??[],targetEntities:r(i.TargetEntities)??[]}};r.getDataModelPropertiesFromAPath=function t(e,i){let n=[];const r=this.getConvertedMetaModel();const o=r.entityContainer.fullyQualifiedName;let s,a,c,f;if(e.startsWith(`/${o}/`)){c=new RegExp(`^\\/${o}\\/[^/]+\\/(.+)?$`);f=e.match(c);s=f?f[1]:undefined}if(!i){c=new RegExp(`^/${o}/([^/]+)`);f=e.match(c);a=f?f[1]:undefined}const u=i??(a?r.resolvePath(`/${a}/`).target:undefined);const d=r.entitySets.find(t=>t.entityType===u)??r.singletons.find(t=>t.entityType===u);if(d){const t=this.getMetaModel(),i=t.createBindingContext(`/${d.name}`);if(i){const t=C(i);const r=l(t,(s||e).replace("*","")||"/"),o=r.targetObject;if(m(o)){if(T(o.targetType)){n=n.concat(o.targetType.properties.map(t=>l(r,t.name)))}else{n.push(r)}}else if(v(o)){n=n.concat(r.targetEntityType.entityProperties.map(t=>l(r,t.name)))}i.destroy()}}return n.filter(t=>t.targetObject)};r.getMetaModel=function t(){return this.appComponent.getModel().getMetaModel()};r.getSideEffectsFromSource=function t(e){let i="";const n=v(e);const r=n?e:e.sourceEntityType;const o=e.annotations?.Common;if(o){if(r&&!n){const t=e.parameters?.find(t=>t.type===r.fullyQualifiedName);i=t?.fullyQualifiedName.split("/")[1]??""}return this.getSideEffectsAnnotationFromSource(e).map(t=>this.convertSideEffects(t,r,i))}return[]};r.getSideEffectsAnnotationFromSource=function t(e){const i=[];const n=e.annotations?.Common;for(const t in n){const e=n[t];if(this.isSideEffectsAnnotation(e)){i.push(e)}}return i};r.isSideEffectsAnnotation=function t(e){return e?.$Type==="com.sap.vocabularies.Common.v1.SideEffectsType"};r.logRequest=function e(i,n){const r=i.reduce(function(t,e){return`${t}\n\t\t${e.$NavigationPropertyPath||e||""}`},"");t.debug(`SideEffects - Request:\n\tContext path : ${n.getPath()}\n\tProperty paths :${r}`)};r.removeBindingParameter=function t(e,i){if(i){const t=function(t){return t.replace(new RegExp(`^${i}/?`),"")};return{targetProperties:e.targetProperties.map(e=>t(e)),targetEntities:e.targetEntities.map(e=>({$NavigationPropertyPath:t(e.$NavigationPropertyPath)}))}}return{targetProperties:e.targetProperties,targetEntities:e.targetEntities}};r.removeDuplicateTargets=function t(e){const i=e.targetEntities.map(t=>t.$NavigationPropertyPath);const n=new Set(i);const r=new Set(e.targetProperties);const o=Array.from(n).map(t=>({$NavigationPropertyPath:t}));return{targetProperties:Array.from(r),targetEntities:o}};r.retrieveODataActionsSideEffects=function t(e){const i={};const n=new Set;let r=[];let o=[];this.getSideEffectsFromSource(e).forEach(t=>{const e=t.triggerAction;r=r.concat(t.targetProperties);o=o.concat(t.targetEntities);if(e){n.add(e)}});const s=this.removeDuplicateTargets({targetProperties:r,targetEntities:o});const a=e.isBound?e.fullyQualifiedName.match(/^[^(]+/)?.[0]:e.name;i[a]={pathExpressions:[...s.targetProperties,...s.targetEntities],triggerActions:Array.from(n)};return i};r.retrieveODataEntitySideEffects=function t(e){const i={};this.getSideEffectsFromSource(e).forEach(t=>{i[t.fullyQualifiedName]=t});return i};r.mapSideEffectSources=function t(e,i){for(const t of this.getSideEffectsAnnotationFromSource(e)){this.mapSideEffectSourceEntities(e,i,t);this.mapSideEffectSourceProperties(e,i,t);this.mapSideEffectSourceEvents(e,i,t)}};r.mapSideEffectSourceEntities=function t(e,i,n){for(const t of n.SourceEntities??[]){const r=t.value?t.$target?.targetType:e;if(r){if(!i.entities[r.fullyQualifiedName]){i.entities[r.fullyQualifiedName]=[]}i.entities[r.fullyQualifiedName].push({entity:e.fullyQualifiedName,qualifier:n.qualifier})}}};r.mapSideEffectSourceProperties=function t(e,i,n){const r=n.SourceProperties?.length===1;for(const t of n.SourceProperties??[]){if(t.$target){if(!i.properties[t.$target.fullyQualifiedName]){i.properties[t.$target.fullyQualifiedName]=[]}i.properties[t.$target.fullyQualifiedName].push({entity:e.fullyQualifiedName,qualifier:n.qualifier,hasUniqueSourceProperty:r})}}};r.mapSideEffectSourceEvents=function t(e,i,n){for(const t of n.SourceEvents??[]){if(!i.events[t.toString()]){i.events[t.toString()]=[]}i.events[t.toString()].push({entity:e.fullyQualifiedName,qualifier:n.qualifier})}};r.getFieldGroupIdForSideEffect=function t(e){let i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const n=e.qualifier?`${e.entity}#${e.qualifier}`:e.entity;return i||e.hasUniqueSourceProperty===true?`${n}$$ImmediateRequest`:n};r.getInterface=function t(){return this};return n}(o);c.SideEffectsService=R;let D=function(t){function e(){return t.apply(this,arguments)||this}$(e,t);var i=e.prototype;i.createInstance=async function t(e){const i=new R(e);return i.initialize()};return e}(s);return D},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/TelemetryServiceFactory", ["sap/base/Log","sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory"],function(e,t,n){"use strict";var o={};function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}const a={"FE.FilterBarSearch":[{name:"countFilterActions",type:"number"},{name:"countFilters",type:"number"},{name:"countVariantFilters",type:"number"},{name:"variantLayer",type:"string"},{name:"autoLoad",type:"boolean"}],"FE.Recommendations":[{name:"numberOfTimesRecommendationsFetched",type:"number"},{name:"maxTimeTakenToReceiveRecommendations",type:"number"},{name:"minTimeTakenToReceiveRecommendations",type:"number"},{name:"averageTimeTakenToReceiveRecommendations",type:"number"},{name:"numberOfFieldsAcceptedThroughAcceptButton",type:"number"},{name:"numberOfFieldsIgnoredThroughIgnoreButton",type:"number"},{name:"numberOfTimesNoPlaceholderIsShownOnUI",type:"number"},{name:"numberOfRecommendedFields",type:"number"},{name:"numberOfTimesTopRecommendationsSelected",type:"number"},{name:"numberOfTimesNonTopRecommendationsSelected",type:"number"},{name:"numberOfTimesNonRecommendedValueWasSelected",type:"number"},{name:"numberOfTimesEmptyRecommendations",type:"number"},{name:"numberofTimesFormatterCalled",type:"number"},{name:"totalNumberOfRecommendationsReceived",type:"number"},{name:"numberOfTimesFormatterNotCalled",type:"number"},{name:"totalTimeTaken",type:"number"}]};let s=function(t){function n(){var e;for(var n=arguments.length,o=new Array(n),r=0;r<n;r++){o[r]=arguments[r]}e=t.call(this,...o)||this;e.isEnabled=false;return e}o.TelemetryService=n;r(n,t);var i=n.prototype;i.init=function e(){const t=this.getContext();this.appComponent=t?.scopeObject;const n=this.appComponent.getManifestEntry("sap.fiori");this.appId=n?.registrationIds?.join("-")};i.initialize=async function e(){const t=new URLSearchParams(window.location.search);if(t.get("sap-ui-xx-feEnableGSM")?.toLowerCase()==="true"){this.isEnabled=true}return Promise.resolve(this)};i.storeAction=async function t(n,o){if(this.isEnabled){const t={...n,template:o};try{await this.storeAndFlush(t)}catch(t){e.debug(t)}}};i.storeAndFlush=async function e(t){if(!this.validateEventCountPolicy()){return}if(!this.validateEndpointPolicy()){return}const o=window.localStorage.getItem(n.EventStoreKey);let r;if(!o){r=[]}else{r=JSON.parse(o)}r.push(t);if(r.length>=n.CountBeforeFlush){try{await this.flush(r);this.incrementEventCountStore(r.length);this.clearEndpointStore()}catch{this.updateEndpointStore()}r=[]}const i=JSON.stringify(r);window.localStorage.setItem(n.EventStoreKey,i)};i.flush=async function e(t){const o=this.buildRequestBody(t);return fetch(n.targetUrl,{method:"POST",body:o})};i.buildRequestBody=function e(t){return t.map(e=>{const t=a[e.type];const n=t.map(t=>{let{name:n,type:o}=t;switch(o){case"number":case"boolean":return`${n}=${e.parameters[n]}`;case"string":default:return`${n}="${e.parameters[n]}`}});return`ui5_action{ type="${e.type}", ${n.join(", ")} } 1\n`}).join("")};i.updateEventCountStore=function e(t){window.localStorage.setItem(n.EventCountStoreKey,`${t}`)};i.incrementEventCountStore=function e(t){const o=window.localStorage.getItem(n.EventCountStoreKey);if(!o){this.updateEventCountStore(t);return}const r=parseInt(o,10);this.updateEventCountStore(r+t)};i.validateEventCountPolicy=function e(){const t=window.localStorage.getItem(n.EventCountStoreKey);if(!t){return true}const o=parseInt(t,10);if(isNaN(o)){this.updateEventCountStore(0);return true}else{return o<n.MaxTelemetry}};i.updateEndpointStore=function e(){window.localStorage.setItem(n.EndpointStoreKey,`${Date.now()}`)};i.clearEndpointStore=function e(){window.localStorage.removeItem(n.EndpointStoreKey)};i.validateEndpointPolicy=function e(){const t=window.localStorage.getItem(n.EndpointStoreKey);if(!t){return true}const o=Date.now();const r=parseInt(t,10);if(isNaN(r)){this.updateEndpointStore();return false}else{return o-r>n.EndpointRetryPeriod}};return n}(t);s.MaxTelemetry=500;o.TelemetryService=s;s.CountBeforeFlush=50;s.EndpointRetryPeriod=1e3*60*60*24;s.targetUrl="/sap/bc/ui2/flp;sap-metrics-only";s.EventStoreKey="EventStore";s.EndpointStoreKey="EndpointStore";s.EventCountStoreKey="EventCountStore";let u=function(e){function t(){return e.apply(this,arguments)||this}o=t;r(t,e);var n=t.prototype;n.createInstance=async function e(t){const n=new s(t);return n.initialize()};return t}(n);o=u;return o},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/TemplatedViewServiceFactory", ["sap/base/Log","sap/base/i18n/Localization","sap/fe/core/CommonUtils","sap/fe/core/TemplateModel","sap/fe/core/converters/ManifestSettings","sap/fe/core/definition/FEDefinition","sap/fe/core/helpers/LoaderUtils","sap/fe/core/helpers/ModelHelper","sap/fe/core/manifestMerger/ChangePageConfiguration","sap/ui/Device","sap/ui/VersionInfo","sap/ui/core/Core","sap/ui/core/mvc/View","sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory","sap/ui/core/service/ServiceFactoryRegistry","sap/ui/model/json/JSONModel","../helpers/DynamicAnnotationPathHelper"],function(e,t,n,o,i,r,s,a,c,l,u,g,p,f,d,h,v,m){"use strict";var C=m.resolveDynamicExpression;var y=c.applyPageConfigurationChanges;var w=s.requireDependencies;var b=r.DefinitionContext;var M=i.TemplateType;function V(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,I(e,t)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}let P=function(i){function r(){return i.apply(this,arguments)||this}V(r,i);var s=r.prototype;s.init=function e(){const o=[];const i=this.getContext();const r=i.scopeObject;const s=n.getAppComponent(r);const a=s.getMetaModel();this.pageId=s.getLocalId(r.getId());const c=`${s.getMetadata().getComponentName()}::${this.pageId}`;const l=r.getEnhanceI18n()||[];let p;this.oFactory=i.factory;if(l){p=s.getMetadata().getComponentName();for(let e=0;e<l.length;e++){const t=s.getModel(l[e]);if(t&&t.isA("sap.ui.model.resource.ResourceModel")){l[e]=t}else{l[e]=`${p}.${l[e].replace(".properties","")}`}}}const f=`${s.getMetadata().getName()}_${c}_${t.getLanguageTag()}`;o.push(h.get("sap.fe.core.services.ResourceModelService").createInstance({scopeType:"component",scopeObject:r,settings:{bundles:["sap.fe.core.messagebundle","sap.fe.macros.messagebundle","sap.fe.templates.messagebundle"],enhanceI18n:l,modelName:"sap.fe.i18n"}}).then(e=>{this.oResourceModelService=e;return e.getResourceModel()}));o.push(h.get("sap.fe.core.services.CacheHandlerService").createInstance({settings:{metaModel:a,appComponent:s,component:r}}).then(async e=>{this.oCacheHandlerService=e;return e.validateCacheKey(f,r,s.getEnvironmentCapabilities())}));o.push(u.load().then(function(e){let t="";if(!e.libraries){t=g?.buildinfo?.buildtime??"<NOVALUE>"}else{e.libraries.forEach(function(e){t+=e.buildTimestamp})}return t}).catch(function(){return"<NOVALUE>"}));this.initPromise=Promise.all(o).then(async e=>{const t=e[0];const n=e[1];const[o,i]=await w(["sap/fe/core/converters/TemplateConverter","sap/fe/core/converters/MetaModelConverter"]);return this.createView(t,c,n,o,i)}).then(function(e){const t=h.get("sap.fe.core.services.CacheHandlerService").getInstance(a);t.invalidateIfNeeded(e,f,r,s.getEnvironmentCapabilities());return})};s.refreshView=async function t(n){const o=n.getRootControl();if(o){o.destroy()}else if(this.oView){this.oView.destroy()}return this.createView(this.resourceModel,this.stableId,"",this.TemplateConverter,this.MetaModelConverter).then(function(){n.getUIArea().invalidate();return}).catch(function(t){n.getUIArea().invalidate();e.error(t)})};s._getViewSettings=function e(t,n,o,i,r,s,a){let c=n.viewType||o.getViewType()||"XML";if(c!=="XML"){c=undefined}return{type:c,preprocessors:{xml:t,controls:{}},id:i.stableId,viewName:n.viewName||o.getViewName?.(),viewData:i,cache:{keys:[r],additionalData:{getAdditionalCacheData:()=>s.getData(),setAdditionalCacheData:e=>{s.setData(e)}}},models:{"sap.fe.i18n":a},height:"100%"}};s._createErrorPage=async function t(n,o,i,r,s){e.error(n.message,n);o.viewName=i;if(o.preprocessors){o.preprocessors.xml.models["error"]=new v(n)}return r.runAsOwner(async()=>p.create(o).then(e=>{this.oView=e;this.oView.setModel(new v(this.oView),"$view");r.setAggregation("rootControl",this.oView);r.getAppComponent().getRootControl().getController().getPlaceholder().hideRootPlaceholder();return s}))};s.createView=async function t(i,r,s,c,u){this.resourceModel=i;this.stableId=r;this.TemplateConverter=c;this.MetaModelConverter=u;const g=this.getContext();const f=g.settings;const d=f.converterType;const h=g.scopeObject;const m=n.getAppComponent(h);let y=m.getRoutingService().getTargetInformationFor(h)?.options?.settings?.fullContextPath??"";if(!y){y=h.getContextPath()??""}const w=m.getMetaModel();const V=m.getManifest();const I=new v(l).setDefaultBindingMode("OneWay");const P=new v(V);let x,D,O;try{const t=await m.getService("routingService");const n=t.getTargetInformationFor(h);const g=V["sap.app"]&&V["sap.app"].crossNavigation&&V["sap.app"].crossNavigation.outbounds||{};const N=h.getNavigation()||{};this._enhanceNavigationConfig(N,g);const T=u.convertTypes(w,m.getEnvironmentCapabilities().getCapabilities());const E=new b(T);E.addApplicationManifest(V);O={appComponent:m,navigation:N,viewLevel:n?.viewLevel,stableId:r,contentDensities:V["sap.ui5"]?.contentDensities,resourceModel:i,fullContextPath:y,isDesktop:l.system.desktop,isPhone:l.system.phone,converterType:M.FreeStylePage};if(h.getViewData){Object.assign(O,h.getViewData());O=S.setPageConfigurationChanges(V,O,m,this.pageId)}O.isShareButtonVisibleForMyInbox=S.getShareButtonVisibilityForMyInbox(m);const F=m.getShellServices();O.converterType=d;O.shellContentDensity=F.getContentDensity();const j=V["sap.fe"];O.sapFeManifestConfiguration=V["sap.fe"];O.retrieveTextFromValueList=j?.form?j?.form?.retrieveTextFromValueList:undefined;D=new v(O);if(O.controlConfiguration){for(const e in O.controlConfiguration){if(e.includes("[")){const t=C(e,w);O.controlConfiguration[t]=O.controlConfiguration[e]}}}x=new o(()=>{try{const t=m.getDiagnostics();const n=t.getIssues().length;const o=c.convertPage(d,w,O,t,y,m.getEnvironmentCapabilities().getCapabilities(),h);const i=t.getIssues();const r=i.slice(n);if(r.length>0){e.warning("Some issues have been detected in your project, please check the UI5 support assistant rule for sap.fe.core")}return o}catch(t){e.error(t,t);return{}}},w);const A=y.split("/");const _=this._getFullPathToEntitySet(A,w);const $={bindingContexts:{entitySet:_?w.createBindingContext(_):null,fullContextPath:y?w.createBindingContext(y):null,contextPath:y?w.createBindingContext(y):null,converterContext:x.createBindingContext("/",undefined,{noResolve:true}),viewData:O?D.createBindingContext("/"):null},models:{entitySet:w,fullContextPath:w,contextPath:w,"sap.fe.i18n":i,metaModel:w,device:I,manifest:P,converterContext:x,viewData:D},fullContextPath:y,getConvertedMetadata:()=>T,getDefinitionContext(){return E},getDefinitionForPage(){let e=y;if(e.endsWith("/")){e=e.substring(0,e.length-1)}return E.getPageFor(e)},appComponent:m,viewId:r},R=this._getViewSettings($,f,h,O,s,x,i);h.setModel(x,"_pageModel");h.setPreprocessorContext($);return h.runAsOwner(async()=>p.create(R).then(e=>{this.oView=e;const t=new v(this.oView);a.enhanceViewJSONModel(t);this.oView.setModel(t,"$view");this.oView.setModel(D,"viewData");h.setAggregation("rootControl",this.oView);return s}).catch(async e=>this._createErrorPage(e,R,f.errorViewName||"sap.fe.core.services.view.TemplatingErrorPage",h,s)).catch(t=>e.error(t.message,t)))}catch(t){e.error(t.message,t);throw new Error(`Error while creating view : ${t}`)}};s._enhanceNavigationConfig=function e(t,n){Object.keys(t).forEach(function(e){const o=t[e];let i;if(o.detail&&o.detail.outbound&&n[o.detail.outbound]){i=n[o.detail.outbound];o.detail.outboundDetail={semanticObject:i.semanticObject,action:i.action,parameters:i.parameters}}if(o.create&&o.create.outbound&&n[o.create.outbound]){i=n[o.create.outbound];o.create.outboundDetail={semanticObject:i.semanticObject,action:i.action,parameters:i.parameters}}})};s._getFullPathToEntitySet=function e(t,n){return t.reduce(function(e,t){if(t===""){return e}if(e===""){e=`/${t}`}else{const o=n.getObject(`${e}/$NavigationPropertyBinding/${t}`);if(o&&Object.keys(o).length>0){e+="/$NavigationPropertyBinding"}e+=`/${t}`}return e},"")};s.getView=function e(){return this.oView};s.getInterface=function e(){return this};s.exit=function e(){if(this.oResourceModelService){this.oResourceModelService.destroy()}if(this.oCacheHandlerService){this.oCacheHandlerService.destroy()}this.oFactory.removeGlobalInstance()};return r}(f);let S=function(e){function t(){var t;for(var n=arguments.length,o=new Array(n),i=0;i<n;i++){o[i]=arguments[i]}t=e.call(this,...o)||this;t._oInstanceRegistry={};return t}V(t,e);var n=t.prototype;n.createInstance=async function e(n){t.iCreatingViews++;const o=new P(Object.assign({factory:this},n));return o.initPromise.then(function(){t.iCreatingViews--;return o})};n.removeGlobalInstance=function e(){this._oInstanceRegistry={}};t.getShareButtonVisibilityForMyInbox=function e(t){const n=t.getComponentData();if(n!==undefined&&n.feEnvironment){return n.feEnvironment.getShareControlVisibility()}return undefined};t.getNumberOfViewsInCreationState=function e(){return t.iCreatingViews};t.setPageConfigurationChanges=function e(t,n,o,i){const r=t?.["sap.ui5"]?.routing?.targets??{};let s="";for(const e in r){if(r[e].id===i){s=e;break}}if(s===""){s=i}const a=t?.["sap.ui5"]?.routing?.targets?.[s]?.options?.settings||{};return y(a,n,o,i)};return t}(d);return S},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/ValueHelpHistoryServiceFactory", ["sap/base/Log","sap/base/i18n/Localization","sap/fe/core/services/valueHelpService/HistoryOptOutProvider","sap/ui/core/EventBus","sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory"],function(t,e,i,a,s,n){"use strict";var r={};function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,c(t,e)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}const l="@AppLanguage";let p=function(s){function n(){return s.apply(this,arguments)||this}r.ValueHelpHistoryService=n;o(n,s);var c=n.prototype;c.init=function t(){};c.initialize=async function e(){const a=this.getContext(),s=a.scopeObject;try{const[t,e]=await Promise.all([s.getService("environmentCapabilities"),s.getService("shellServices")]);this.shellServices=e;this.appId=s.getManifestEntry("sap.app").id||"unknownAppId";const a=t.getCapabilities().UShell,n=e.getShellConfig()?.apps?.inputFieldHistory?.enabled;if(a&&n){this.historyOptOutProvider=new i(this)}}catch(e){t.error("Cannot retrieve EnvironmentCapabilities or ShellServices",e instanceof Error?e.message:String(e))}return this};c.registerShellHook=async function t(){if(this.historyOptOutProvider){await this.historyOptOutProvider.createOptOutUserProfileEntry();a.getInstance().subscribeOnce("shell","userActionsMenuCompLoaded",async()=>{await this.historyOptOutProvider.createOptOutUserProfileEntry()})}};c.getShellExtensionService=function t(){return this.shellServices.getExtensionService()};c.getPersonalizer=async function t(e,i){const a={container:e,item:i},s={};return this.shellServices.getPersonalizer(a,s,undefined)};c.getGlobalPersonalizer=async function t(){if(!this.globalPersonalizer){const t="sapui5.history.";const e=t+"HistorySettings";const i=t+"settings";this.globalPersonalizer=await this.getPersonalizer(e,i)}return this.globalPersonalizer};c.getGlobalDefaultData=function t(){return{historyEnabled:true,suggestionsEnabled:false,apps:{}}};c.getGlobalHistoryData=async function t(){if(!this.globalHistoryData){const t=await this.getGlobalPersonalizer();const e=await t.getPersData();this.globalHistoryData=e?{...e}:this.getGlobalDefaultData()}return this.globalHistoryData};c.getHistoryEnabled=async function t(){const e=await this.getGlobalHistoryData();return e.historyEnabled};c.setHistoryEnabled=async function t(e){const i=await this.getGlobalHistoryData();i.historyEnabled=e;const a=await this.getGlobalPersonalizer();a.setPersData(i)};n.createAppContainerId=function t(){const e="xxxxxxxx.xxxx.4xxx.yxxx.xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=Math.random()*16|0;if(t==="y"){e=e&3|8}return e.toString(16)});return"ui5."+e};c.addAppToGlobalHistory=async function t(e,i){const a=n.createAppContainerId();e.apps[i]=a;const s=await this.getGlobalPersonalizer();s.setPersData(e);return a};c.getAppPersonalizer=async function t(){if(!this.appPersonalizer){const t=await this.getGlobalHistoryData(),e=t.apps,i=e[this.appId]||await this.addAppToGlobalHistory(t,this.appId),a="sapui5.history.appData";this.appPersonalizer=await this.getPersonalizer(i,a)}return this.appPersonalizer};c.getAppDefaultData=function t(){const e={};e[n.appDataKey]={};return e};c.getAppHistoryData=async function t(){if(!this.appHistoryData){const t=await this.getAppPersonalizer(),e=await(t.getPersData?.());this.appHistoryData=e?{...e}:this.getAppDefaultData()}return this.appHistoryData};c.getFieldDataFromService=async function t(i){const a=await this.getAppHistoryData(),s=a[n.appDataKey],r=s[i];const o=e.getLanguage();return r?.filter(t=>t[l]===o)||[]};c.setFieldDataWithService=async function t(e,i){const a=await this.getAppHistoryData(),s=a[n.appDataKey],r=await this.getAppPersonalizer();s[e]=i;return r.setPersData(a)};n.getDistinct=function t(e){const i={},a=[];for(const t of e){const e=Object.values(t).join();if(!i[e]){a.push(t);i[e]=true}}return a};c.deleteHistoryForAllApps=async function t(){const e=this.shellServices,i=await this.getGlobalHistoryData(),a=[],s=i.apps;for(const t of Object.keys(s)){a.push(e.deletePersonalizationContainer(s[t],undefined))}this.appHistoryData=undefined;await Promise.all(a)};c.getFieldData=async function t(e){const i=Boolean(this.historyOptOutProvider),a=await this.getHistoryEnabled();if(i&&a){const t=await this.getFieldDataFromService(e);return t.map(t=>Object.entries(t).filter(t=>{let[e,i]=t;return!e.startsWith("@")}).reduce((t,e)=>{let[i,a]=e;return{...t,[i]:a}},{}))}return[]};c.setFieldData=async function t(i,a){const s=Boolean(this.historyOptOutProvider),r=await this.getHistoryEnabled();if(s&&r){const t=e.getLanguage();for(const e of a){e[l]=t}const s=await this.getFieldDataFromService(i),r=n.getDistinct(a.reverse().concat(s)).slice(0,n.maxHistoryItems);return this.setFieldDataWithService(i,r)}};return n}(s);p.appDataKey="sapui5.history";r.ValueHelpHistoryService=p;p.maxHistoryItems=5;let u=function(t){function e(){return t.apply(this,arguments)||this}r=e;o(e,t);var i=e.prototype;i.createInstance=async function t(e){this.instance=new p(e);return this.instance.initialize()};i.getInstance=function t(){return this.instance};return e}(n);r=u;return r},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/collaborativeDraftServiceFactory", ["sap/base/Log","sap/fe/core/CommonUtils","sap/fe/core/controllerextensions/collaboration/ActivityBase","sap/fe/core/controllerextensions/collaboration/CollaborationCommon","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/ModelHelper","sap/m/MessageBox","sap/ui/core/service/Service","sap/ui/core/service/ServiceFactory"],function(t,e,n,o,i,s,r,c,a){"use strict";var l={};var u=o.getActivityKeyFromPath;var d=o.CollaborationUtils;var g=o.Activity;var f=n.isCollaborationConnected;var p=n.initializeCollaboration;var h=n.endCollaboration;var C=n.broadcastCollaborationMessage;function y(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,P(t,e)}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}const A="/collaboration/myActivities";const v="/collaboration/activeUsers";const m="/collaboration/activities";const M="/collaboration/asyncMsgQueue";const b="/collaboration/retainedMessages";const x="/collaboration/asyncMsgTimerId";const O="$auto.sync";const F=500;let D=function(n){function o(){return n.apply(this,arguments)||this}l.CollaborativeDraftService=o;y(o,n);var c=o.prototype;c.checkPathForLock=function t(e,n){const o=e.getProperty(A);if(!o){return false}else{return o.includes(n)}};c.setLock=function t(e,n){const o=e.getProperty(A)??[];if(!o.includes(n)){o.push(n)}e.setProperty(A,o)};c.removeLock=function t(e,n){const o=e.getProperty(A);if(!o||n===undefined){return false}const i=Array.isArray(n)?n:[n];const s=o.filter(t=>!i.includes(t));e.setProperty(A,s);return s.length!==o.length};c.getLockedProperties=function t(e){const n=e.getProperty(A);if(!n){return undefined}else{return n.join("|")}};c.updateLocksForContextPath=function t(e,n,o){if(!this.isConnected(e)){return}const i=e.getModel("internal");const s=i.getProperty(M);s.forEach(t=>{if(t.path.startsWith(n)){t.path=t.path.replace(n,o)}});const r=i.getProperty(A);if(r){const t=[];const s=[];r.forEach(e=>{if(e.startsWith(n)){const i=e.replace(n,o);t.push(i)}else{s.push(e)}});i.setProperty(A,s);if(t.length!==0){this.send(e,{action:g.Lock,content:t})}}};c.resetAsyncMessagesTimer=function t(e){let n=e.getProperty(x);if(n!==undefined){clearTimeout(n)}n=setTimeout(()=>{const t=e.getProperty(M);const n=[];const o=e.getProperty(b)??[];if(!t){return}t.forEach(t=>{if(o.includes(t.path)){n.push(t)}else{this.doSend(e,t.action,t.path)}});e.setProperty(M,n);e.setProperty(x,undefined);if(n.length){this.resetAsyncMessagesTimer(e)}},F);e.setProperty(x,n)};c.retainAsyncMessages=function t(e,n){const o=e.getModel("internal");const i=Array.isArray(n)?n:[n];const s=o.getProperty(b);i.forEach(t=>{if(!s.includes(t)){s.push(t)}})};c.releaseAsyncMessages=function t(e,n){const o=e.getModel("internal");const i=o.getProperty(b);const s=Array.isArray(n)?n:[n];o.setProperty(b,i.filter(t=>!s.includes(t)))};c.isConnected=function t(e){const n=e.getModel("internal");return f(n)};c.send=function t(e,n){if(this.isConnected(e)){const t=e.getModel("internal");if(n.action===g.Lock||n.action===g.Unlock){this.doSendAsync(t,n.action,n.content)}else{this.doSend(t,n.action,n.content,n.triggeredActionName,n.refreshListBinding,n.actionRequestedProperties)}}};c.doSend=function t(e,n,o,i,s,r){const c=(Array.isArray(o)?o.join("|"):o)??"";const a=r?.join("|");if(n===g.Lock){const t=(Array.isArray(o)?o[0]:o)??"";if(this.checkPathForLock(e,t)){return}else{this.setLock(e,t)}}else if(n===g.Unlock){const t=this.removeLock(e,o);if(!t){return}}C(n,c,e,i,s,a)};c.doSendAsync=function t(e,n,o){if(o===undefined){return}const i=e.getProperty(M);const s=Array.isArray(o)?o:[o];const r=i.filter(t=>!s.includes(t.path));s.forEach(t=>{r.push({path:t,action:n})});e.setProperty(M,r);this.resetAsyncMessagesTimer(e)};c.isCollaborationEnabled=function t(e){const n=e?.getBindingContext&&e.getBindingContext();return!!(n&&s.isCollaborationDraftSupported(n.getModel().getMetaModel()))};c.connect=async function t(n){const o=n.getModel("internal");const i=d.getMe(e.getAppComponent(n));if(!i){return}const s=n.getBindingContext();const r=await s.requestProperty("DraftAdministrativeData/DraftUUID");if(!r){return}const c=p(i,r,o,t=>{this.messageReceive(t,n)},n);if(c){o.setProperty(A,[]);o.setProperty(M,[]);o.setProperty(b,[])}};c.disconnect=function t(e){const n=e.getModel("internal");h(n)};c.userJoinDraft=function t(e,n,o,i,s){if(e.findIndex(t=>t.id===o.id)===-1){e.unshift(o);n.setProperty(v,e)}if(i.userAction===g.Join){C(g.JoinEcho,this.getLockedProperties(n),n)}if(i.userAction===g.JoinEcho){if(i.clientContent){i.userAction=g.Lock;this.messageReceive(i,s)}}};c.userLeaveDraft=function t(e,n,o){e=e.filter(t=>t.id!==o.id||t.me);n.setProperty(v,e);const i=n.getProperty(m)||{};const s=function(t){if(Array.isArray(t)){return t.filter(t=>t.id!==o.id)}else{for(const e in t){t[e]=s(t[e])}return t}};s(i);n.setProperty(m,i)};c.messageReceive=function t(e,n){const o=n.getModel("internal");const i=o.getProperty(v);let s;let r;const c=this.calculateMetaPath(n,e.clientContent);e.userAction=e.userAction||e.clientAction;const a={id:e.userID,name:e.userDescription,initials:d.formatInitials(e.userDescription),color:d.getUserColor(e.userID,i,[])};let l=a;switch(e.userAction){case g.Join:case g.JoinEcho:this.userJoinDraft(i,o,a,e,n);break;case g.Leave:this.userLeaveDraft(i,o,a);break;case g.Change:this.updateOnChange(n,e);break;case g.Create:this.updateOnCreate(n,e);break;case g.Delete:this.updateOnDelete(n,e);break;case g.Activate:this.draftClosedByOtherUser(n,e.clientContent,d.getText("C_COLLABORATIONDRAFT_ACTIVATE",a.name));break;case g.Discard:this.draftClosedByOtherUser(n,e.clientContent,d.getText("C_COLLABORATIONDRAFT_DISCARD",a.name));break;case g.Action:this.updateOnAction(n,e);break;case g.Lock:l=a;l.key=u(e.clientContent);let t="";const f=c.split("/");for(let e=1;e<f.length-1;e++){t+=`/${f[e]}`;if(!o.getProperty(m+t)){o.setProperty(m+t,{})}}s=o.getProperty(m+c);s=s?.slice?s.slice():[];s.push(l);o.setProperty(m+c,s);break;case g.Unlock:s=o.getProperty(m+c);r=u(e.clientContent);o.setProperty(m+c,s?.filter(t=>t.key!==r));break}};c.draftClosedByOtherUser=function e(n,o,i){this.disconnect(n);r.information(i,{onClose:async()=>{try{await n.getBindingContext().getBinding().resetChanges();this.navigate(o,n);return}catch(e){t.error("Pending Changes could not be reset - still navigating to active instance");this.navigate(o,n)}}})};c.updateOnChange=function t(e,n){const o=n.clientContent.split("|");const i=this.getCurrentPage(e);const s=i.getBindingContext();const r=o.map(async t=>this.applyUpdatesForChange(e,t));i.getController().editFlow.updateDocument(s,Promise.all(r))};c.applyUpdatesForChange=async function e(n,o){const s=n.getModel().getMetaModel();const r=s.getMetaContext(o);const c=i.getInvolvedDataModelObjects(r);const a=o.substring(0,o.lastIndexOf("/"));const l=this.findContextForUpdate(n,a);const u=a.substring(0,a.lastIndexOf("("));const g=u.substring(0,u.lastIndexOf("/"));const f=g?this.findContextForUpdate(n,g):undefined;if(!l&&!f){return}try{const t=[];const e=d.getAppComponent(n).getSideEffectsService();if(l){const n=s.getMetaPath(l.getPath());const i=s.getMetaPath(o).replace(n,"").slice(1);t.push(e.requestSideEffects([i],l,O))}const i=e.computeFieldGroupIds(c.targetEntityType.fullyQualifiedName,c.targetObject.fullyQualifiedName);if(i.length){const e=n.getController();const o=e._sideEffects.getSideEffectsMapForFieldGroups(i,l||f);Object.keys(o).forEach(n=>{const i=o[n];t.push(e._sideEffects.requestSideEffects(i.sideEffects,i.context,O,undefined,true))})}await Promise.all(t)}catch(e){t.error("Failed to update data after change:"+e);throw e}};c.updateOnDelete=function t(e,n){const o=this.getCurrentPage(e);const i=o.getBindingContext();const s=i.getPath();const c=n.clientContent.split("|");const a=c.find(t=>s.startsWith(t));if(a){r.information(d.getText("C_COLLABORATIONDRAFT_DELETE",n.userDescription),{onClose:()=>{const t=i.getModel().getKeepAliveContext(a);t.setKeepAlive(false);const n=this.applyUpdatesForCollection(e,c[0]);o.getController().editFlow.updateDocument(o.getBindingContext(),n);o.getController()._routing.navigateBackFromContext(t)}})}else{const t=this.applyUpdatesForCollection(e,c[0]);o.getController().editFlow.updateDocument(o.getBindingContext(),t)}};c.updateOnCreate=function t(e,n){const o=this.getCurrentPage(e);const i=n.clientContent.split("|");const s=this.applyUpdatesForCollection(e,i[0]);o.getController().editFlow.updateDocument(o.getBindingContext(),s)};c.applyUpdatesForCollection=async function e(n,o){const i=d.getAppComponent(n);const s=o.substring(0,o.lastIndexOf("/"));const r=this.findContextForUpdate(n,s);if(r){try{const t=[];const e=r.getModel().getMetaModel();const n=e.getMetaPath(o);const s=e.getMetaPath(r.getPath());const c=n.replace(`${s}/`,"");const a=i.getSideEffectsService();t.push(a.requestSideEffects([c],r,O));t.push(a.requestSideEffectsForNavigationProperty(c,r,O,true));await Promise.all(t)}catch(e){t.error("Failed to update data after collection update:"+e)}}};c.updateOnAction=function t(e,n){const o=this.getCurrentPage(e);const i=n.clientContent.split("|");const s=n.clientTriggeredActionName||"";const r=n.clientRequestedProperties?.split("|");const c=n.clientRefreshListBinding==="true";let a=[];if(c){a.push(this.applyUpdatesForCollection(e,i[0]))}else{a=i.map(async t=>this.requestUpdateForAction(e,t,s,r))}o.getController().editFlow.updateDocument(o.getBindingContext(),Promise.all(a))};c.requestUpdateForAction=async function t(e,n,o,s){const r=this.findContextForUpdate(e,n);if(!r){return}const c=d.getAppComponent(e);const a=c.getSideEffectsService();const l=a.getODataActionSideEffects(o,r);const u=[];if(l){if(l.pathExpressions?.length){u.push(a.requestSideEffects(l.pathExpressions,r,O))}}if(s&&s.length>0){const t=e.getModel().getMetaModel();const o=this.calculateMetaPath(e,n);const c=i.getInvolvedDataModelObjects(t.getContext(o));const l=c.targetEntityType.entityProperties.map(t=>t.name).filter(t=>s.includes(t));if(l.length>0){u.push(a.requestSideEffects(l,r,O))}}await Promise.all(u)};c.findContextForUpdate=function t(e,n){if(!n){return undefined}const o=[];while(!n.endsWith(")")){o.unshift(n);n=n.substring(0,n.lastIndexOf("/"))}o.unshift(n);const i=n.substring(0,n.lastIndexOf("("));let s;let r=this.getCurrentPage(e).getBindingContext();while(r&&!s){if(o.includes(r.getPath())){s=r}r=r.getBinding()?.getContext()}if(s){return s}const c=this.getCurrentPage(e).getBindingContext().getModel();const a=c.getAllBindings().find(t=>{const e=t.isRelative()?t.getResolvedPath():t.getPath();return t.isA("sap.ui.model.odata.v4.ODataListBinding")&&e===i});s=a?.getAllCurrentContexts().find(t=>o.includes(t.getPath()));return s};c.navigate=function t(e,n){const o=this.getCurrentPage(n);const i=n.getModel().bindContext(e).getBoundContext();if(o.getController().editFlow.getCreationMode()){o.getController()._routing.navigateBackFromContext(i)}else{o.getController().routing.navigate(i)}};c.getCurrentPage=function t(n){const o=d.getAppComponent(n);return e.getCurrentPageView(o)};c.calculateMetaPath=function t(e,n){let o="";if(n){const t=n.split("|")[0];o=e.getModel().getMetaModel().getMetaPath(t)}return o};c.init=function t(){this.initPromise=Promise.resolve(this)};return o}(c);l.CollaborativeDraftService=D;let k=function(t){function e(){return t.apply(this,arguments)||this}l=e;y(e,t);var n=e.prototype;n.createInstance=async function t(e){const n=new D(e);return n.initPromise};return e}(a);l=k;return l},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/valueHelpService/HistoryOptOutProvider", ["sap/base/Log","sap/m/Button","sap/m/Dialog","sap/m/FlexBox","sap/m/HBox","sap/m/Label","sap/m/MessageBox","sap/m/Switch","sap/m/VBox","sap/ui/core/IconPool","sap/ui/core/Lib"],function(e,t,s,i,o,n,r,a,l,c,u){"use strict";var h={};let S=function(){function S(e){this.resourceBundle=u.getResourceBundleFor("sap.fe.core");this.valueHelpHistoryService=e}h=S;var T=S.prototype;T.getDialog=function e(){return this.dialog};T.createOptOutUserProfileEntry=async function t(){const s=this.valueHelpHistoryService.getShellExtensionService();let i;try{i=await s.createUserAction({id:"sapui5.history.optOut.trigger",text:this.resourceBundle.getText("C_HISTORY_SETTING_TITLE"),icon:c.getIconURI("history"),press:async()=>{this.historyEnabledSwitch=new a;this.dialog=this.createDialog();const e=await this.valueHelpHistoryService.getHistoryEnabled();this.historyEnabledSwitch.setState(e);this.dialog.open()}},{controlType:"sap.m.Button"});i.showForCurrentApp()}catch(t){e.error("Cannot add user action",t instanceof Error?t.message:String(t))}return i};T.createDialogLayout=function e(){const s=new n({text:this.resourceBundle.getText("C_HISTORY_SETTING_ENABLE_TRACKING_DESCRIPTION"),labelFor:this.historyEnabledSwitch}).addStyleClass("sapUiSmallMarginEnd");const r=new o({alignItems:"Center",items:[s,this.historyEnabledSwitch]});const a=new t({busyIndicatorDelay:0,text:this.resourceBundle.getText("C_HISTORY_SETTING_DELETE_BUTTON"),press:this.onDeleteHistoryPress.bind(this)});const c=new n({text:this.resourceBundle.getText("C_HISTORY_SETTING_DELETE_DESCRIPTION"),labelFor:a}).addStyleClass("sapUiSmallMarginEnd");const u=new i({alignItems:"Center",items:[c,a]});return new l({items:[r,u]}).addStyleClass("sapUiSmallMargin")};T.createDialog=function e(){const i=this.createDialogLayout();const o=new t({text:this.resourceBundle.getText("C_HISTORY_SETTING_SAVE"),press:this.onSavePress.bind(this)});const n=new t({text:this.resourceBundle.getText("C_HISTORY_SETTING_CANCEL"),press:()=>this.closeDialog()});return new s("sapui5.history.optOutDialog",{title:this.resourceBundle.getText("C_HISTORY_SETTING_TITLE"),content:[i],buttons:[o,n],afterClose:()=>{this.dialog?.destroy();this.dialog=undefined;this.historyEnabledSwitch=undefined}})};T.onDeleteHistoryPress=function e(t){const s=t.getSource();s.setBusy(true);r.confirm(this.resourceBundle.getText("C_HISTORY_SETTING_DELETE_CONFIRM_MESSAGE"),{onClose:async e=>{if(e==="CANCEL"){return}await this.valueHelpHistoryService.deleteHistoryForAllApps().then(function(){return window.location.reload()});this.closeDialog()}});s.setBusy(false)};T.onSavePress=function e(){r.confirm(this.resourceBundle.getText("C_HISTORY_SETTING_SAVE_CONFIRM_MESSAGE"),{onClose:async e=>{if(e==="CANCEL"){return}const t=this.historyEnabledSwitch?.getState()??false;await this.valueHelpHistoryService.setHistoryEnabled(t);this.closeDialog()}})};T.closeDialog=function e(){this.dialog?.close()};return S}();h=S;return h},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/services/view/TemplatingErrorPage.controller", ["sap/fe/base/ClassSupport","sap/fe/core/controllerextensions/InternalRouting","sap/ui/core/mvc/Controller"],function(e,r,t){"use strict";var i,n,o,a,l;var u=e.usingExtension;var c=e.defineUI5Class;function s(e,r,t,i){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function f(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,p(e,r)}function p(e,r){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},p(e,r)}function b(e,r,t,i,n){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,i){return i(e,r,t)||t},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,r,o),null):o}function v(e,r){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let d=(i=c("sap.fe.core.services.view.TemplatingErrorPage"),n=u(r),i(o=(a=function(e){function r(){var r;for(var t=arguments.length,i=new Array(t),n=0;n<t;n++){i[n]=arguments[n]}r=e.call(this,...i)||this;s(r,"_routing",l,r);return r}f(r,e);return r}(t),l=b(a.prototype,"_routing",[n],{configurable:true,enumerable:true,writable:true,initializer:null}),a))||o);return d},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/support/AnnotationIssue.support", ["sap/fe/core/converters/helpers/IssueManager", "sap/fe/core/support/CommonHelper"], function (IssueManager, CommonHelper) {
  "use strict";

  var _exports = {};
  var getIssueByCategory = CommonHelper.getIssueByCategory;
  var Categories = CommonHelper.Categories;
  var Audiences = CommonHelper.Audiences;
  var IssueCategory = IssueManager.IssueCategory;
  const oIncorrectPathAnnotationIssue = {
    id: "annotationIssue",
    title: "Annotations: Incorrect path or target",
    minversion: "1.85",
    audiences: [Audiences.Application],
    categories: [Categories.Usage],
    description: "This rule identifies the incorrect path or targets defined in the metadata of the annotation.xml file or CDS annotations.",
    resolution: "Please review the message details for more information.",
    resolutionurls: [{
      text: "CDS Annotations reference",
      href: "https://cap.cloud.sap/docs/cds/common"
    }],
    check: function (oIssueManager, oCoreFacade) {
      getIssueByCategory(oIssueManager, oCoreFacade, IssueCategory.Annotation);
    }
  };
  const oIgnoredComputedDVAnnotationIssue = {
    id: "ignoredAnnotationIssue",
    title: "Annotations: Ignore Annotation",
    minversion: "1.99",
    audiences: [Audiences.Application],
    categories: [Categories.Usage],
    description: "This rule identifies the ignored annotations",
    resolution: "Only one annotation from either Core.Computed or ComputedDefaultValue must be used",
    check: function (oIssueManager, oCoreFacade) {
      getIssueByCategory(oIssueManager, oCoreFacade, IssueCategory.Annotation, "IgnoredAnnotation");
    }
  };
  function getRules() {
    return [oIncorrectPathAnnotationIssue, oIgnoredComputedDVAnnotationIssue];
  }
  _exports.getRules = getRules;
  return _exports;
}, false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/support/CollectionFacetMissingID.support", ["sap/fe/core/converters/helpers/IssueManager", "sap/fe/core/support/CommonHelper"], function (IssueManager, CommonHelper) {
  "use strict";

  var _exports = {};
  var getIssueByCategory = CommonHelper.getIssueByCategory;
  var Categories = CommonHelper.Categories;
  var Audiences = CommonHelper.Audiences;
  var IssueCategory = IssueManager.IssueCategory;
  const oCollectionFacetMissingIDIssue = {
    id: "collectionFacetMissingId",
    title: "CollectionFacet: Missing IDs",
    minversion: "1.85",
    audiences: [Audiences.Application],
    categories: [Categories.Usage],
    description: "A collection facet requires an ID in the annotation file to derive a control ID from it.",
    resolution: "Always provide a unique ID to a collection facet.",
    resolutionurls: [{
      text: "CollectionFacets",
      href: "https://ui5.sap.com/#/topic/facfea09018d4376acaceddb7e3f03b6"
    }],
    check: function (oIssueManager, oCoreFacade) {
      getIssueByCategory(oIssueManager, oCoreFacade, IssueCategory.Facets, "MissingID");
    }
  };
  function getRules() {
    return [oCollectionFacetMissingIDIssue];
  }
  _exports.getRules = getRules;
  return _exports;
}, false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/support/CollectionFacetUnsupportedLevel.support", ["sap/fe/core/converters/helpers/IssueManager", "sap/fe/core/support/CommonHelper"], function (IssueManager, CommonHelper) {
  "use strict";

  var _exports = {};
  var getIssueByCategory = CommonHelper.getIssueByCategory;
  var Categories = CommonHelper.Categories;
  var Audiences = CommonHelper.Audiences;
  var IssueCategory = IssueManager.IssueCategory;
  const oCollectionFacetUnsupportedLevelIssue = {
    id: "collectionFacetUnsupportedLevel",
    title: "CollectionFacet: Unsupported Levels",
    minversion: "1.80",
    audiences: [Audiences.Application],
    categories: [Categories.Usage],
    description: "Collection facets at level 3 or lower (level 4, 5…) are not supported and will not be visible on the UI.",
    resolution: "At level 3 you can only use reference facets, but not collection facets.",
    resolutionurls: [{
      text: "CollectionFacets",
      href: "https://ui5.sap.com/#/topic/facfea09018d4376acaceddb7e3f03b6"
    }],
    check: function (oIssueManager, oCoreFacade) {
      getIssueByCategory(oIssueManager, oCoreFacade, IssueCategory.Facets, "UnsupportedLevel");
    }
  };
  function getRules() {
    return [oCollectionFacetUnsupportedLevelIssue];
  }
  _exports.getRules = getRules;
  return _exports;
}, false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/support/CommonHelper", ["sap/fe/core/converters/helpers/IssueManager","sap/ui/support/library"],function(e,t){"use strict";var s={};var r=e.IssueSeverity;var a=e.IssueCategory;const i=t.Categories,n=t.Severity,o=t.Audiences;s.Categories=i;s.Audiences=o;s.Severity=n;const c=function(e){switch(e){case r.Low:return n.Low;case r.High:return n.High;case r.Medium:return n.Medium}};s.getSeverity=c;const u=function(e,t,s,r){const i=t.getComponents();let n;Object.keys(i).forEach(e=>{const t=i[e];if(t?.getMetadata()?.getParent()?.getName()==="sap.fe.core.AppComponent"){n=t}});if(n){const t=n.getDiagnostics().getIssuesByCategory(a[s],r);t.forEach(function(t){e.addIssue({severity:c(t.severity),details:t.details,context:{id:t.category}})})}};s.getIssueByCategory=u;return s},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/support/Diagnostics", [],function(){"use strict";let s=function(){function s(){this._issues=[]}var e=s.prototype;e.addIssue=function s(e,t,i,r,u){const n=this.checkIfIssueExists(e,t,i,r,u);if(!n){this._issues.push({category:e,severity:t,details:i,subCategory:u})}};e.getIssues=function s(){return this._issues};e.getIssuesByCategory=function s(e,t){if(t){return this._issues.filter(s=>s.category===e&&s.subCategory===t)}else{return this._issues.filter(s=>s.category===e)}};e.checkIfIssueExists=function s(e,t,i,r,u){if(r&&r[e]&&u){return this._issues.some(s=>s.category===e&&s.severity===t&&s.details.replace(/\n/g,"")===i.replace(/\n/g,"")&&s.subCategory===u)}return this._issues.some(s=>s.category===e&&s.severity===t&&s.details.replace(/\n/g,"")===i.replace(/\n/g,""))};return s}();return s},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/support/InvalidAnnotationColumnKey.support", ["sap/fe/core/converters/helpers/IssueManager", "sap/fe/core/support/CommonHelper"], function (IssueManager, CommonHelper) {
  "use strict";

  var _exports = {};
  var getIssueByCategory = CommonHelper.getIssueByCategory;
  var Categories = CommonHelper.Categories;
  var Audiences = CommonHelper.Audiences;
  var IssueCategory = IssueManager.IssueCategory;
  const oInvalidAnnotationColumnKey = {
    id: "invalidAnnotationColumnKey",
    title: "AnnotationColumnKey: Invalid Key",
    minversion: "1.98",
    audiences: [Audiences.Application],
    categories: [Categories.Usage],
    description: "The key of the annotation column is needed as a valid identifier in the application manifest.",
    resolution: "A column key set in the application manifest must correspond to an existing annotation column.",
    resolutionurls: [{
      text: "InvalidAnnotationColumnKey",
      href: "https://ui5.sap.com/#/topic/d525522c1bf54672ae4e02d66b38e60c"
    }],
    check: function (oIssueManager, oCoreFacade) {
      getIssueByCategory(oIssueManager, oCoreFacade, IssueCategory.Manifest, "InvalidKey");
    }
  };
  function getRules() {
    return [oInvalidAnnotationColumnKey];
  }
  _exports.getRules = getRules;
  return _exports;
}, false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/templating/ActionHelper", ["sap/fe/base/BindingToolkit","../converters/MetaModelConverter","../helpers/BindingHelper","./FieldControlHelper"],function(e,t,n,r){"use strict";var o={};var i=r.isActionParameterRequiredExpression;var s=n.bindingContextPathVisitor;var a=t.convertTypes;var c=e.getExpressionFromAnnotation;var u=e.equal;var l=e.compileExpression;function d(e,t){const n=e.isBound?e.parameters[0]?.fullyQualifiedName:undefined;const r=c(e.annotations.Common?.IsActionCritical,[],undefined,e=>s(e,t,n));return u(r,true)}o.getIsActionCriticalExpression=d;const f=function(e){const t=e.getInterface(0).getPath();const n=e.getInterface(1).getPath();const r=e.getInterface(0).getModel();if(t&&n&&r){const e=a(r);const o=e.resolvePath(t);const s=o.target;const c=e.resolvePath(n);const u=c.target;if(s&&u){return l(i(s,u,e))}}};f.requiresIContext=true;o.isActionParameterRequired=f;return o},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/templating/CommonFormatters", ["sap/fe/base/BindingToolkit","sap/fe/core/formatters/ValueFormatter","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/UIFormatters","../converters/helpers/DataFieldHelper"],function(t,e,a,n,r,o){"use strict";var s={};var i=o.isReferencePropertyStaticallyHidden;var c=n.getRelativePaths;var l=n.getContextRelativeTargetObjectPath;var p=n.enhanceDataModelPath;var g=a.isPropertyPathExpression;var f=a.isPathAnnotationExpression;var u=t.pathInModel;var d=t.getExpressionFromAnnotation;var h=t.formatWithTypeInformation;var v=t.formatResult;var m=t.compileExpression;const b=function(t){return m(t)};s.getExpressionBinding=b;const x=function(t,a,n,o){const s=n?.displayMode;let i=a;const l=g(t.targetObject)?t.targetObject.$target:t.targetObject;const p=s||r.getDisplayMode(t);const f=l?.annotations?.Common?.Text;const u=c(t);const m=o||e.formatWithBrackets;a=l&&h(l,a);if(p!=="Value"&&f){switch(p){case"Description":i=d(f,u);break;case"DescriptionValue":i=v([d(f,u),a],m);break;case"ValueDescription":i=v([a,d(f,u)],m);break}}return i};s.getBindingWithTextArrangement=x;const D=function(t,e){let a;if(f(t?.targetObject)){a=p(t,t.targetObject?.path)}else{a=t}const n=a.targetObject;let r=u(l(a));r=h(n,r,true);const o=x(a,r,{},e);return n.annotations.UI&&!i(n.annotations.UI.DataFieldDefault)&&m(o)||undefined};s.getBindingWithText=D;return s},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/templating/CriticalityFormatters", ["sap/fe/base/BindingToolkit","sap/fe/core/formatters/CriticalityFormatter","sap/fe/core/templating/DataModelPathHelper"],function(i,t,r){"use strict";var e={};var n=r.getRelativePaths;var o=i.pathInModel;var a=i.or;var c=i.ifElse;var s=i.getExpressionFromAnnotation;var l=i.equal;var y=i.constant;var p=i.compileExpression;const C=(i,r)=>{const e=r?n(r):undefined;const a=i.targetObject??i;if(a.Criticality){const i=t.getCriticality(a.Criticality);if(i){return y(i)}return o(`${a.fullyQualifiedName}@$ui5.fe.virtual.criticality`,undefined,e)}return y(undefined)};const u=(i,t)=>{const r=t?y("sap-icon://error"):y("attention");const e=t?y("sap-icon://warning"):y("warning");const n=t?y("sap-icon://status-positive"):y("good");const o=t?c(a(l(i,y("UI.CriticalityType/Information")),l(i,y(5)),l(i,y("5"))),y("sap-icon://information"),y("")):y("default");return c(a(l(i,y("UI.CriticalityType/Negative")),l(i,y(1)),l(i,y("1"))),r,c(a(l(i,y("UI.CriticalityType/Critical")),l(i,y(2)),l(i,y("2"))),e,c(a(l(i,y("UI.CriticalityType/Positive")),l(i,y(3)),l(i,y("3"))),n,o)))};e.getCriticalityExpressionForCards=u;const I=i=>{if(i){const t=s(i);return p(c(a(l(t,y("UI.CriticalityType/Negative")),l(t,y(1)),l(t,y("1"))),y("Error"),c(a(l(t,y("UI.CriticalityType/Critical")),l(t,y(2)),l(t,y("2"))),y("Warning"),c(a(l(t,y("UI.CriticalityType/Positive")),l(t,y(3)),l(t,y("3"))),y("Success"),c(a(l(t,y("UI.CriticalityType/Information")),l(t,y(5)),l(t,y("5"))),y("Information"),y("None"))))))}};e.criticalityExpressionForIntegrationCards=I;const f=i=>{const t=i?.Criticality;const r=s(t);const e=i.CriticalityRepresentation&&i.CriticalityRepresentation==="UI.CriticalityRepresentationType/WithoutIcon";let n;if(!e){if(t){n=u(r,true)}else{n=y("")}}else{n=y("")}return p(n)};e.criticalityIconExpressionForIntegrationCards=f;const d=(i,t)=>{const r=C(i,t);return p(c(l(r,y("UI.CriticalityType/Negative")),y("Error"),c(l(r,y("UI.CriticalityType/Critical")),y("Warning"),c(l(r,y("UI.CriticalityType/Positive")),y("Success"),c(l(r,y("UI.CriticalityType/Information")),y("Information"),y("None"))))))};e.buildExpressionForCriticalityColor=d;const g=(i,t)=>{const r=i.targetObject??i;const e=C(r,t);const n=r.CriticalityRepresentation==="UI.CriticalityRepresentationType/WithoutIcon";let o;if(!n){o=c(l(e,y("UI.CriticalityType/Negative")),y("sap-icon://error"),c(l(e,y("UI.CriticalityType/Critical")),y("sap-icon://warning"),c(l(e,y("UI.CriticalityType/Positive")),y("sap-icon://status-positive"),c(l(e,y("UI.CriticalityType/Information")),y("sap-icon://information"),y("")))))}else{o=y("")}return p(o)};e.buildExpressionForCriticalityIcon=g;const v=i=>{const t=C(i);return p(c(l(t,y(undefined)),y("Ghost"),c(l(t,y("UI.CriticalityType/Negative")),y("Reject"),c(l(t,y("UI.CriticalityType/Positive")),y("Accept"),y("Default")))))};e.buildExpressionForCriticalityButtonType=v;const T=i=>{const t=i?.targetObject??i;const r=U(t);return p(r)};e.buildExpressionForCriticalityColorMicroChart=T;const U=function(i){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{error:"Error",critical:"Critical",good:"Good",neutral:"Neutral"};const r=C(i);return c(l(r,y("UI.CriticalityType/Negative")),y(t.error),c(l(r,y("UI.CriticalityType/Critical")),y(t.critical),c(l(r,y("UI.CriticalityType/Positive")),y(t.good),y(t.neutral))))};e.buildExpressionForCriticality=U;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/templating/DataFieldFormatters", ["sap/fe/base/BindingToolkit","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/UIFormatters"],function(t,e,a,o,n,r){"use strict";var i={};var s=r.isVisible;var c=r.getConverterContext;var l=n.getRelativePaths;var v=n.enhanceDataModelPath;var u=o.isProperty;var p=o.isPathAnnotationExpression;var d=o.isAnnotationPath;var f=a.UI;var g=e.getInvolvedDataModelObjects;var h=t.or;var b=t.not;var y=t.ifElse;var m=t.equal;var $=t.constant;var F=t.concat;var P=t.compileExpression;var I=t.and;const j=function(t,e){const a=e.context.getPath();if(!t){throw new Error(`Unresolved context path ${a}`)}if(typeof t==="object"&&t.hasOwnProperty("$kind")&&t.$kind!=="Property"){throw new Error(`Context does not resolve to a DataField object but to a ${t.$kind}`)}let o=c(t,e);if(d(o)||p(o)){o=o.$target}return o};i.getDataField=j;const D=function(t,e){const a=e.context.getPath();if(!t){throw new Error(`Unresolved context path ${a}`)}if(typeof t==="object"&&t.hasOwnProperty("$kind")&&t.$kind!=="Property"){throw new Error(`Context does not resolve to a Property object but to a ${t.$kind}`)}let o=g(e.context);if(o.targetObject&&p(o.targetObject)){o=v(o,o.targetObject.path)}if(o.targetObject&&d(o.targetObject)){o=v(o,o.targetObject.value)}if(a.endsWith("$Path")||a.endsWith("$AnnotationPath")){o=v(o,t)}return o};i.getDataFieldObjectPath=D;const U=function(t,e){const a=j(t,e);return a.$Type==="com.sap.vocabularies.UI.v1.ConnectedFieldsType"};i.isSemanticallyConnectedFields=U;const O=function(t,e){const a=j(t,e);return a.annotations?.UI?.MultiLineText?.valueOf()===true};i.isMultiLineText=O;const T=/(?:({[^}]+})[^{]*)/g;const x=/{([^}]+)}(.*)/;const w=function(t,e){let a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;const o=t.targetObject;const n=o.Template.toString().match(T);if(!n){return""}const r=n.reduce((a,n)=>{const r=n.match(x);if(r&&r.length>1){const n=r[1];const i=o.Data[n];if(i){const o=v(t,i.fullyQualifiedName.replace(t.targetEntityType.fullyQualifiedName,""));o.targetObject=o.targetObject.Value;a.push(e(o,{}));if(r.length>2){a.push($(r[2]))}}}return a},[]);return a?P(F(...r)):F(...r)};i.getLabelForConnectedFields=w;const E=function(t,e){let a;let o;const n=t.targetObject;if(n&&!u(n)){switch(n.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataPointType":a=n.Value.$target;o=v(t,n.Value.path);break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":if(n?.Target?.$target?.$Type==="com.sap.vocabularies.UI.v1.DataPointType"){a=n.Target.$target?.Value.$target;o=v(t,n.Target.value);o=v(o,n.Target.$target?.Value.path);break}case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForAction":default:a=undefined}}else if(n&&u(n)){o=v(t,n)}const r=e?.isAnalytics?f.IsExpanded:$(false);const i=e?.isAnalytics?m(f.NodeLevel,0):$(false);return I(...[s(t.targetObject,l(t)),y(!!a,a&&s(a,l(o)),true),h(b(r),i)])};i.generateVisibleExpression=E;return i},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/templating/DataModelPathHelper", ["sap/fe/base/BindingToolkit","sap/fe/core/helpers/TypeGuards"],function(t,e){"use strict";var n={};var i=e.isServiceObject;var r=e.isPropertyPathExpression;var a=e.isProperty;var o=e.isPathAnnotationExpression;var s=e.isNavigationProperty;var c=e.isMultipleNavigationProperty;var l=e.isEntityType;var g=e.isEntitySet;var f=e.isComplexType;var u=e.isAnnotationTerm;var p=t.unresolvableExpression;var y=t.isConstant;var d=t.getExpressionFromAnnotation;var h=t.equal;var v=t.constant;const P=function(t,e){return b(t?.contextLocation,t?.navigationProperties,e).map(t=>t.name)};n.getRelativePaths=P;const b=function(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const i=t=>{let e=0;while(t.length>1&&e!=t.length-1){const n=t[e];const i=t[e+1];if(s(n)&&n.partner===i.name){t.splice(0,2)}else{e++}}return t};const r=(t,e,n)=>{const i=[];t.forEach((t,r)=>{if(e[r]!==t){i.push(n?t:e[r])}});return i};if(!t){return e}if(e.length>=t.navigationProperties.length){let a=r(t.navigationProperties,e,false);a=a.concat(e.slice(t.navigationProperties.length));return n?a:i(a)}let a=r(e,t.navigationProperties,true);a=a.concat(t.navigationProperties.slice(e.length));if(!n){i(a)}a=a.map(t=>s(t)?t.targetType.navigationProperties.find(e=>e.name===t.partner):t);return a};n.getPathRelativeLocation=b;const O=function(t,e){let n="";if(o(e)){n=e.path}else if(typeof e==="string"){n=e}let i;if(o(e)){i=e.$target}else if(E(t)){i=t.convertedTypes.resolvePath(`${S(t)}/${n}`)?.target}else{if(n.startsWith("/")){n=n.substring(1)}i=t.targetEntityType.resolvePath(n)}const r=n.split("/");let a=t;for(const t of r){a=j(a,t)}a.targetObject=i;return a};n.enhanceDataModelPath=O;const j=function(t,e){let n;let i;const r=t.navigationProperties.concat();const a=r.length;const o=a?r[a-1].targetType:t.targetEntityType;if(!o){return t}else if(l(o)||f(o)){const a=t.targetEntitySet;const s=o.navigationProperties.find(t=>t.name===e);if(s){r.push(s);i=s.targetType;const t=m(r);if(t&&a?.navigationPropertyBinding.hasOwnProperty(t)){n=a.navigationPropertyBinding[t]}}else{const t=(o.entityProperties||o.properties).find(t=>t.name===e);if(t?.targetType?._type==="ComplexType"){r.push(t)}}}return{startingEntitySet:t.startingEntitySet,navigationProperties:r,contextLocation:t.contextLocation,targetEntitySet:n??t.targetEntitySet,targetEntityType:i??t.targetEntityType,targetObject:t.targetObject,convertedTypes:t.convertedTypes}};const E=function(t){return t.navigationProperties.find(t=>f(t?.targetType))!==undefined};const m=function(t){const e=t.length;if(e){const n=t[e-1];const i=f(n.targetType);let r="";if(e>1&&!i){for(let n=0;n<e-1;n++){const e=t[n];if(f(e.targetType)){r+=`${e.name}/`}else{r=""}}}return i?"":`${r}${n.name}`}return""};const T=function(t){const e=`/${t.startingEntitySet.name}`;let n=e;let i=t.startingEntitySet;const r=t.navigationProperties;let a;for(let t=0;t<r.length;t++){a=m(r.slice(0,t+1));if(i&&i.navigationPropertyBinding.hasOwnProperty(a)){n+=`/$NavigationPropertyBinding/${a.replace("/","%2F")}`;i=i.navigationPropertyBinding[a]}}n+="/$";return n};n.getTargetEntitySetPath=T;const S=function(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n="";if(!t.startingEntitySet){return"/"}if(!e){n+=`/${t.startingEntitySet.name}`}if(t.navigationProperties.length>0){n=Q(n);n+=t.navigationProperties.map(t=>t.name).join("/")}return n};n.getTargetNavigationPath=S;const $=function(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n=S(t,e);if(i(t.targetObject)&&!s(t.targetObject)&&!l(t.targetObject)&&!g(t.targetObject)&&(!a(t.targetObject)||!f(t.targetObject?.targetType))&&t.targetObject!==t.startingEntitySet){n=Q(n);n+=`${t.targetObject.name}`}else if(t.targetObject&&u(t.targetObject)){n=Q(n);n+=`@${t.targetObject.term}`;if(t.targetObject.hasOwnProperty("qualifier")&&!!t.targetObject.qualifier){n+=`#${t.targetObject.qualifier}`}}return n};n.getTargetObjectPath=$;const x=function(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(t.contextLocation?.startingEntitySet!==t.startingEntitySet){return $(t)}return N(t,e,n)};n.getContextRelativeTargetObjectPath=x;const N=function(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!t.targetObject){return undefined}const o=b(t.contextLocation,t.navigationProperties);if(e){if(o.some(c)){return undefined}}let p=n?o.map(t=>{const e=c(t);return e?`${t.name}*`:t.name}).join("/"):o.map(t=>t.name).join("/");if((i(t.targetObject)&&t.targetObject.name||r(t.targetObject)&&t.targetObject.value)&&!s(t.targetObject)&&!l(t.targetObject)&&!g(t.targetObject)&&(!a(t.targetObject)||!f(t.targetObject?.targetType))&&t.targetObject!==t.startingEntitySet){p=Q(p);p+=r(t.targetObject)?`${t.targetObject.value}`:`${t.targetObject.name}`}else if(u(t.targetObject)){p=Q(p);p+=`@${t.targetObject.term}`;if(t.targetObject.hasOwnProperty("qualifier")&&!!t.targetObject.qualifier){p+=`#${t.targetObject.qualifier}`}}return p};const R=function(t,e){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;const i=n?t.contextLocation:t;const r=i?.navigationProperties?.slice(-1)[0];const a=e(r?.annotations?.Capabilities);return a?.length?a:e(i?.targetEntitySet?.annotations?.Capabilities)||[]};n.getContextPropertyRestriction=R;const C=function(t,e){return k(t,t=>t?.UpdateRestrictions?.Updatable,e)};n.isPathUpdatable=C;const L=function(t,e){return t.targetEntityType.annotations.Aggregation?.[`RecursiveHierarchy#${e}`]?.ParentNavigationProperty.$target?.fullyQualifiedName};n.getHierarchyParentNavigationPropertyPath=L;const F=function(t){const e=t.targetObject?.annotations?.Capabilities?.UpdateRestrictions?.NonUpdatableNavigationProperties;if(e&&e?.length>0){return e.map(e=>t.contextLocation&&O(t.contextLocation,e.value).targetObject.fullyQualifiedName)}return t.targetEntitySet?.annotations.Capabilities?.UpdateRestrictions?.NonUpdatableNavigationProperties?.map(t=>t.$target?.fullyQualifiedName)};n.getNonUpdatableNavigationProperties=F;const U=function(t,e){return k(t,t=>t?.SearchRestrictions?.Searchable,e)};n.isPathSearchable=U;const B=function(t,e){return k(t,t=>t?.DeleteRestrictions?.Deletable,e)};n.isPathDeletable=B;const q=function(t,e){return k(t,t=>t?.InsertRestrictions?.Insertable,e)};n.isPathInsertable=q;const w=function(t,e){return k(t,t=>t?.FilterRestrictions?.Filterable,e)};n.isPathFilterable=w;const A=function(t,e){return k(t,n=>{if(n&&"FilterRestrictions"in n){const i=n?.FilterRestrictions?.FilterExpressionRestrictions||[];const r=i.find(e=>e.Property.$target===t.targetObject);if(r){return e.includes(r?.AllowedExpressions?.toString())}else{return false}}else{return false}})};n.checkFilterExpressionRestrictions=A;const D=t=>{let e=false;let n=[];let i=t.startingEntitySet;let r=null;let o=i;let s="";for(const c of t.navigationProperties){if(e){n=[]}n.push(c.name);s=n.join("/");if(a(c)||!c.containsTarget){if(i&&i.navigationPropertyBinding.hasOwnProperty(s)){r=i;i=i.navigationPropertyBinding[s];o=i;e=true}else{r=i;i=null;e=true}}else{r=i;o=null}}return{parentEntitySet:r,targetEntitySet:o,parentNavigationPath:s}};n.getTargetEntitySetInfo=D;const I=(t,e,n)=>{const i=t.navigationProperties;const{parentEntitySet:r,parentNavigationPath:a}=D(t);let o,s;for(const c of r?.annotations?.Capabilities?.NavigationRestrictions?.RestrictedProperties??[]){if(a===c.NavigationProperty.value){const r=e(c)?.valueOf();if(r!==undefined){if(y(d(r))){o=v(r)}else{const e=i.slice(0,-1);s=e;if(t.contextLocation&&s.length<t.contextLocation?.navigationProperties.length&&!i[i.length-1].partner){o=undefined}else{const e=b(t.contextLocation,s).map(t=>t.name);const i=n?.pathVisitor?H(n.pathVisitor,e):undefined;o=h(d(r,e,undefined,i),true)}}}}}return o};const V=(t,e,n)=>{const i=t.targetEntityType;let r;const{targetEntitySet:a}=D(t);let o=e(a?.annotations?.Capabilities);if(a===null&&o===undefined){o=e(i?.annotations?.Capabilities)}if(o!==undefined){const e=P(t);const i=n?.pathVisitor?H(n.pathVisitor,e):undefined;r=h(d(o,e,undefined,i),true)}return r};const k=function(t,e,n){if(!t||!t.startingEntitySet){return v(true)}t=O(t,n?.propertyPath);const i=I(t,e,n);const r=n?.ignoreTargetCollection?undefined:V(t,e,n);return i||r||(n?.authorizeUnresolvable?p:v(true))};n.checkOnPath=k;const Q=function(t){if(t.length&&!t.endsWith("/")){return`${t}/`}return t};const H=function(t,e){return function(n){return t(n,e)}};return n},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/templating/DisplayModeFormatter", ["sap/fe/core/helpers/TypeGuards"],function(e){"use strict";var t={};var a=e.isPropertyPathExpression;var o=e.isPathAnnotationExpression;const n={"sap.ui.model.odata.type.Boolean":"Edm.Boolean","sap.ui.model.odata.type.Byte":"Edm.Byte","sap.ui.model.odata.type.Date":"Edm.Date","sap.ui.model.odata.type.DateTimeOffset":"Edm.DateTimeOffset","sap.ui.model.odata.type.Decimal":"Edm.Decimal","sap.ui.model.odata.type.Double":"Edm.Double","sap.ui.model.odata.type.Guid":"Edm.Guid","sap.ui.model.odata.type.Int16":"Edm.Int16","sap.ui.model.odata.type.Int32":"Edm.Int32","sap.ui.model.odata.type.Int64":"Edm.Int64","sap.ui.model.odata.type.SByte":"Edm.SByte","sap.ui.model.odata.type.Single":"Edm.Single","sap.ui.model.odata.type.Stream":"Edm.Stream","sap.ui.model.odata.type.TimeOfDay":"Edm.TimeOfDay","sap.ui.model.odata.type.String":"Edm.String"};t.ODATA_TYPE_MAPPING=n;const i=function(e,t){if(!e||typeof e==="string"){return"Value"}const n=(o(e)||a(e))&&e.$target||e;const i=t&&t.targetEntityType;const s=n.annotations?.Common?.Text;const d=typeof s!=="string"&&s?.annotations?.UI?.TextArrangement?.toString()||i?.annotations?.UI?.TextArrangement?.toString();let p=s?"DescriptionValue":"Value";if(s&&d||i?.annotations?.UI?.TextArrangement?.toString()){if(d==="UI.TextArrangementType/TextOnly"){p="Description"}else if(d==="UI.TextArrangementType/TextLast"){p="ValueDescription"}else if(d==="UI.TextArrangementType/TextSeparate"){p="Value"}else{p="DescriptionValue"}}return p};t.getDisplayMode=i;return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/templating/EntitySetHelper", ["sap/fe/core/helpers/TypeGuards"],function(e){"use strict";var t={};var i=e.isEntitySet;const r=function(e){let t=[];if(e.annotations.Capabilities?.FilterRestrictions?.Filterable===false){t.push(...e.entityType.entityProperties.map(e=>e.name))}else{t=e.annotations.Capabilities?.FilterRestrictions?.NonFilterableProperties?.map(e=>e.value)||[]}e.annotations.Capabilities?.NavigationRestrictions?.RestrictedProperties?.forEach(e=>{const i=e?.FilterRestrictions?.NonFilterableProperties?.map(e=>e.value);if(i){t.push(...i)}});return t};t.getNonFilterablePropertiesRestrictions=r;const n=function(e){let t=[];if(e.annotations.Capabilities?.SortRestrictions?.Sortable===false){t.push(...e.entityType.entityProperties.map(e=>e.name))}else{t=e.annotations.Capabilities?.SortRestrictions?.NonSortableProperties?.map(e=>e.value)||[]}e.annotations.Capabilities?.NavigationRestrictions?.RestrictedProperties?.forEach(i=>{if(i?.SortRestrictions?.Sortable===false){const r=e.entityType.navigationProperties.by_name(i?.NavigationProperty?.value);if(r){t.push(...r.targetType.entityProperties.map(e=>`${r.name}/${e.name}`))}}else{const e=i?.SortRestrictions?.NonSortableProperties?.map(e=>e.value);if(e){t.push(...e)}}});return t};t.getNonSortablePropertiesRestrictions=n;const s=function(e){let t={nonSortableProperties:[],nonFilterableProperties:[]};if(!i(e)){return t}else{t={nonSortableProperties:n(e),nonFilterableProperties:r(e)};return t}};t.getRestrictionsOnProperties=s;return t},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/templating/EntityTypeHelper", ["sap/base/Log","sap/fe/base/BindingToolkit"],function(e,a){"use strict";var n={};var o=a.pathInModel;var t=a.getExpressionFromAnnotation;var i=a.concat;const r=a=>{const n=a.annotations?.UI?.HeaderInfo?.Title;if(n){switch(n.$Type){case"com.sap.vocabularies.UI.v1.DataField":return t(n.Value);case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":e.error("DataFieldForAnnotation with connected fields not supported for HeaderInfo.Title");return t(a.annotations?.UI?.HeaderInfo?.TypeName)}}const r=a.annotations?.Common?.SemanticKey;if(r){return i(...r.map(e=>o(e.value)))}};n.getTitleExpression=r;return n},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/templating/FieldControlHelper", ["sap/fe/base/BindingToolkit","../converters/annotations/DataField","../helpers/BindingHelper","../helpers/TypeGuards"],function(n,o,t,e){"use strict";var r={};var i=e.isProperty;var a=t.bindingContextPathVisitor;var s=o.isDataFieldForAnnotation;var l=o.isDataField;var d=n.or;var m=n.isConstant;var u=n.getExpressionFromAnnotation;var C=n.equal;const c=function(n,o){const t=u(n?.annotations?.Common?.FieldControl,o);if(!m(t)){return d(C(t,1),C(t,"1"))}else{return d(C(t,"Common.FieldControlType/ReadOnly"),C(t,1),C(t,"1"))}};r.isReadOnlyExpression=c;const p=function(n,o){const t=u(n?.annotations?.Common?.FieldControl,o);if(!m(t)){return d(C(t,0),C(t,"0"))}else{return d(C(t,"Common.FieldControlType/Hidden"),C(t,"Common.FieldControlType/Inapplicable"),C(t,0),C(t,"0"))}};r.isDisabledExpression=p;const f=function(n,o){return d(c(n,o),p(n,o))};r.isNonEditableExpression=f;const y=function(n){const o=n.annotations?.Common?.FieldControl;return o&&o.toString()!=="Common.FieldControlType/Mandatory"?true:false};r.hasFieldControlNotMandatory=y;function F(n){const o=n?.annotations?.Common?.FieldControl;if(i(n)||s(n)){return o?.toString()==="Common.FieldControlType/Mandatory"}if(l(n)){if(o?.toString()==="Common.FieldControlType/Mandatory"){return true}if(o?.toString()!==undefined){return false}else{return n?.Value?.$target?.annotations?.Common?.FieldControl?.toString()==="Common.FieldControlType/Mandatory"}}return n?.Value?.$target?.annotations?.Common?.FieldControl?.toString()==="Common.FieldControlType/Mandatory"}r.isStaticallyMandatory=F;const g=function(n,o){const t=n?.annotations?.Common?.FieldControl;const e=u(t,o);return v(e)};r.isRequiredExpression=g;const T=function(n,o,t){const e=o.isBound?o.parameters[0]?.fullyQualifiedName:undefined;const r=n.annotations?.Common?.FieldControl;const i=u(r,[],undefined,n=>a(n,t,e));return v(i)};r.isActionParameterRequiredExpression=T;const v=n=>d(m(n)&&C(n,"Common.FieldControlType/Mandatory"),C(n,7),C(n,"7"));return r},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/templating/FilterTemplating", ["sap/fe/core/helpers/TypeGuards"],function(t){"use strict";var e={};var i=t.isEntitySet;function n(t,e){const n=t.getEntitySet();let r;if(i(n)){r=n.annotations.Capabilities}const s=r?.FilterRestrictions?.RequiredProperties;let o=false;if(s){s.forEach(function(t){if(e===t?.value){o=true}})}return o}e.getIsRequired=n;function r(t,e){let n,r;const s=t.getEntityType();const o=t.getEntitySet();let a;if(i(o)){a=o.annotations.Capabilities}const f=a?.FilterRestrictions?.NonFilterableProperties;const c=s.entityProperties;c.forEach(t=>{const i=t.name;if(i===e){r=t.annotations?.UI?.Hidden?.valueOf()}});if(f&&f.length>0){for(const t of f){const i=t?.value;if(i===e){n=true}}}return n||r}e.isPropertyFilterable=r;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/templating/PropertyFormatters", ["sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","./PropertyHelper","./UIFormatters"],function(t,e,r,o,n){"use strict";var a={};var s=n.getConverterContext;var c=r.getTargetObjectPath;var i=r.enhanceDataModelPath;var u=e.isPathAnnotationExpression;var p=t.getInvolvedDataModelObjects;const l=function(t,e){const r=e.context.getPath();if(!t){throw new Error(`Unresolved context path ${r}`)}if(typeof t==="object"&&t.hasOwnProperty("$kind")&&t.$kind!=="Property"){throw new Error(`Context does not resolve to a Property object but to a ${t.$kind}`)}let o=s(t,e);if(u(o)){o=o.$target}return o};a.getProperty=l;const h=function(t,e){const r=e.context.getPath();if(!t){throw new Error(`Unresolved context path ${r}`)}if(typeof t==="object"&&t.hasOwnProperty("$kind")&&t.$kind!=="Property"){throw new Error(`Context does not resolve to a Property object but to a ${t.$kind}`)}let o=p(e.context);if(u(o.targetObject)){o=i(o,o.targetObject.path)}return o};a.getPropertyObjectPath=h;const f=function(t,e){const r=l(t,e);return o.isKey(r)};a.isKey=f;const P=function(t,e){const r=l(t,e);return o.hasValueHelp(r)};a.hasValueHelp=P;const d=function(t,e){const r=l(t,e);return o.hasDateType(r)};a.hasDateType=d;const y=function(t,e){const r=l(t,e);return o.hasValueHelpWithFixedValues(r)};a.hasValueHelpWithFixedValues=y;const g=function(t,e){const r=l(t,e);return r.name};a.getName=g;const v=function(t,e){const r=l(t,e);return o.getLabel(r)};a.getLabel=v;const b=function(t,e){const r=h(t,e);return c(r)};a.getPropertyPath=b;const x=function(t,e){const r=h(t,e);return c(r,true)};a.getRelativePropertyPath=x;return a},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/templating/PropertyHelper", ["sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/SemanticObjectHelper"],function(n,t){"use strict";var e={};var o=n.isPathAnnotationExpression;const a=function(n){return!!n.annotations?.Core?.Computed?.valueOf()};e.isComputed=a;const i=function(n){return!!n.annotations?.Core?.Immutable?.valueOf()};e.isImmutable=i;const s=function(n){return!!n.isKey};e.isKey=s;const r=function(n,t){const e=t.contextLocation?.targetEntityType?.annotations?.Common?.SemanticKey;return e?.some(function(t){return t?.$target?.fullyQualifiedName===n?.fullyQualifiedName})??false};e.isSemanticKey=r;const u=function(n){return["Edm.Date","Edm.DateTime","Edm.DateTimeOffset"].includes(n.type)};e.hasDateType=u;const c=function(n){return n.annotations?.Common?.Label?.toString()||""};e.getLabel=c;const m=function(n){return t.hasSemanticObject(n)};e.hasSemanticObject=m;const f=function(n){return o(n?.annotations?.Common?.Timezone)?n.annotations?.Common?.Timezone.$target:undefined};e.getAssociatedTimezoneProperty=f;const d=function(n){return o(n?.annotations?.Common?.Timezone)?n?.annotations?.Common?.Timezone?.path:undefined};e.getAssociatedTimezonePropertyPath=d;const l=function(n){return o(n?.annotations?.Common?.Text)?n.annotations?.Common?.Text.$target:undefined};e.getAssociatedTextProperty=l;const C=function(n){return o(n?.annotations.Common?.ExternalID)?n?.annotations.Common?.ExternalID.path:undefined};e.getAssociatedExternalIdPropertyPath=C;const y=function(n){return o(n?.annotations?.Common?.ExternalID)?n.annotations?.Common?.ExternalID.$target:undefined};e.getAssociatedExternalIdProperty=y;const p=function(n){return n&&o(n.annotations.Measures?.Unit)?n.annotations.Measures?.Unit.$target:undefined};e.getAssociatedUnitProperty=p;const T=function(n){return o(n?.annotations?.Measures?.Unit)?n.annotations?.Measures?.Unit.path:undefined};e.getAssociatedUnitPropertyPath=T;const g=function(n){return n&&o(n.annotations.Measures?.ISOCurrency)?n.annotations.Measures?.ISOCurrency.$target:undefined};e.getAssociatedCurrencyProperty=g;const h=function(n){return o(n?.annotations?.Measures?.ISOCurrency)?n.annotations?.Measures?.ISOCurrency.path:undefined};e.getAssociatedCurrencyPropertyPath=h;const I=function(n){const t=n.annotations?.Measures?.ISOCurrency??n.annotations?.Measures?.Unit;if(!t||o(t)){return undefined}return`${t}`};e.getStaticUnitOrCurrency=I;const x=function(n){const t=n.annotations?.Common?.Timezone;if(!t||o(t)){return undefined}return`${t}`};e.getStaticTimezone=x;const O=function(n){return o(n?.annotations?.Common?.Text)?n?.annotations?.Common?.Text.path:undefined};e.getAssociatedTextPropertyPath=O;const U=function(n){return!!n.annotations?.Common?.ValueList||!!n.annotations?.Common?.ValueListReferences||!!n.annotations?.Common?.ValueListWithFixedValues||!!n.annotations?.Common?.ValueListMapping};e.hasValueHelp=U;const P=function(n){return!!n?.annotations?.Common?.ValueListWithFixedValues?.valueOf()};e.hasValueHelpWithFixedValues=P;const M=function(n){return n.annotations?.Common?.ValueListForValidation!==undefined};e.hasValueListForValidation=M;const S=function(n){return n.annotations?.Common?.Timezone!==undefined};e.hasTimezone=S;const L=function(n){return!!n.annotations?.Common?.IsUnit?.valueOf()};e.isUnit=L;const V=function(n){return n.annotations?.Common?.Text!==undefined};e.hasText=V;const z=function(n){return!!n.annotations?.UI?.IsImageURL?.valueOf()};e.isImageURL=z;const E=function(n){return!!n.annotations?.Common?.IsCurrency?.valueOf()};e.isCurrency=E;const A=function(n){return n.annotations?.Measures?.ISOCurrency!==undefined};e.hasCurrency=A;const v=function(n){return n.annotations?.Measures?.Unit!==undefined};e.hasUnit=v;const D=function(n){return n.type==="Edm.Guid"};e.isGuid=D;const $=function(n){return n?.annotations?.Measures?.Unit?.toString()==="%"};e.hasStaticPercentUnit=$;function b(n){return n?.annotations?.UI?.MultiLineText?.valueOf()===true}e.isMultiLineText=b;function F(n){return!!n.annotations?.Common?.IsTimezone?.valueOf()}e.isTimezone=F;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/templating/SemanticObjectHelper", ["sap/fe/base/BindingToolkit","sap/fe/core/helpers/TypeGuards"],function(t,n){"use strict";var e={};var s=n.isNavigationProperty;var i=n.isAnnotationOfTerm;var o=t.resolveBindingString;var c=t.getExpressionFromAnnotation;var a=t.compileExpression;const r=t=>{const n=t?.match(/{(.*?)}/);if(t?.startsWith("{=")){return t}if(n?.length&&n.length>1){return n[1]}return null};e.getDynamicPathFromSemanticObject=r;const f=function(t){const n=t.annotations?.Common;if(n){for(const t in n){if(n[t]?.term==="com.sap.vocabularies.Common.v1.SemanticObject"){return true}}}return false};e.hasSemanticObject=f;const m=function(t){const n=[];const e=t.annotations?.Common;if(e){for(const t in e){const s=e[t];if(i(s,"com.sap.vocabularies.Common.v1.SemanticObject")){n.push(s)}}}return n};e.getSemanticObjects=m;const u=function(t){const n=[];const e=t.annotations?.Common;if(e){for(const t in e){const s=e[t];if(i(s,"com.sap.vocabularies.Common.v1.SemanticObjectMapping")){n.push(s)}}}return n};e.getSemanticObjectMappings=u;const p=function(t){const n=[];const e=t.annotations?.Common;if(e){for(const t in e){const s=e[t];if(i(s,"com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions")){n.push(s)}}}return n};e.getSemanticObjectUnavailableActions=p;const b=function(t){let n;if(t.targetObject&&f(t.targetObject)){n=t.targetObject}else if(t.navigationProperties.length>0){for(const e of t.navigationProperties){if(!t.contextLocation?.navigationProperties.find(t=>t.fullyQualifiedName===e.fullyQualifiedName)&&!n&&f(e)){n=e}}}return n};e.getPropertyWithSemanticObject=b;const l=function(t){const n={};const e=[];const s=[];if(t!==undefined){for(const i of m(t)){const t=c(i);const o=a(t);if(o&&!e.includes(o)){n[i.qualifier||""]=o;e.push(o);s.push(t)}}}return{semanticObjectsList:e,semanticObjectsExpressionList:s,qualifierMap:n}};e.getSemanticObjectsAndQualifierMap=l;const O=function(t,n){const e=[];let s=false;if(t){for(const e of t){for(const t of n.semanticObjectsList){if(e===t){s=true;break}}if(s){break}}n.semanticObjectsExpressionList.forEach(t=>{if(t._type!=="Constant"){e.push(t)}})}return{hasReachableStaticSemanticObject:s,dynamicSemanticObjects:e}};e.getReachableSemanticObjectsSettings=O;const j=function(t,n,e){const i=n.targetObject;const r=e.models.internal||e.appComponent?.getModel("internal");const f=r?.getProperty("/semanticObjects");const m=l(i);const u=b(n);if(s(u)){const t=c(u?.annotations?.Common?.SemanticObject);const n=a(t);m.semanticObjectsExpressionList.push(t);m.semanticObjectsList.push(n)}if(t!==undefined&&t!==""){if(t[0]==="["){const n=JSON.parse(t);n.forEach(t=>{m.semanticObjectsList.push(t)})}else{m.semanticObjectsList.push(t);if(t.startsWith("{")||t.startsWith("{=")){const n=o(t);m.semanticObjectsExpressionList.push(n)}}}return O(f,m)};e.manageSemanticObjectsForCurrentUser=j;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/templating/UIFormatters", ["sap/fe/base/BindingToolkit","sap/fe/core/converters/MetaModelConverter","sap/fe/core/formatters/ValueFormatter","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/DisplayModeFormatter","sap/fe/core/templating/FieldControlHelper","sap/fe/core/templating/PropertyHelper"],function(e,t,n,a,i,o,s,r,l){"use strict";var u={};var d=l.isMultiLineText;var c=l.isKey;var f=l.isImmutable;var p=l.isComputed;var g=l.hasValueHelp;var m=l.hasStaticPercentUnit;var y=l.getAssociatedUnitProperty;var v=l.getAssociatedCurrencyProperty;var b=r.isRequiredExpression;var h=r.isReadOnlyExpression;var D=r.isNonEditableExpression;var T=r.isDisabledExpression;var O=o.isPathUpdatable;var E=o.getTargetObjectPath;var x=o.getRelativePaths;var M=o.getContextRelativeTargetObjectPath;var I=o.enhanceDataModelPath;var $=i.isProperty;var V=i.isPathAnnotationExpression;var C=i.isMultipleNavigationProperty;var P=i.isAnnotationOfType;var U=a.singletonPathVisitor;var F=a.bindingContextPathVisitor;var j=a.UI;var S=t.getInvolvedDataModelObjects;var A=t.convertMetaModelContext;var w=e.unresolvableExpression;var R=e.pathInModel;var B=e.or;var N=e.not;var k=e.isTruthy;var q=e.isConstant;var W=e.ifElse;var z=e.getExpressionFromAnnotation;var L=e.formatWithTypeInformation;var H=e.formatResult;var Q=e.equal;var G=e.constant;var K=e.compileExpression;var _=e.and;var Y=e.addTypeInformation;var J=e.EDM_TYPE_MAPPING;const X={Disabled:"Disabled",Display:"Display",Editable:"Editable",EditableDisplay:"EditableDisplay",EditableReadOnly:"EditableReadOnly",ReadOnly:"ReadOnly"};u.FieldEditMode=X;const Z=function(e){return s.getDisplayMode(e.targetObject,e)};u.getDisplayMode=Z;const ee=function(e,t,n){let a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:j.IsEditable;let i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;return te(e,t,n,true,a,i)};u.getEditableExpressionAsObject=ee;const te=function(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;let n=arguments.length>2?arguments[2]:undefined;let a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:j.IsEditable;let o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:true;const s=x(n);if(!e||typeof e==="string"){return K(false)}let r=G(true);if(t!==undefined&&!$(t)){r=W(D(t),false,i)}else if(t!==undefined){r=i}const l=V(e)?e.$target:e;const u=O(n,{propertyPath:e,pathVisitor:(e,t)=>U(e,n.convertedTypes,t)});if(K(u)==="false"&&o){return a?u:"false"}const d=l!==undefined?W(B(_(N(u),o),p(l),c(l),f(l),D(l,s)),W(B(p(l),D(l,s)),false,j.IsTransientBinding),i):w;if(a){return _(d,r)}return K(_(d,r))};u.getEditableExpression=te;const ne=function(e,t){const n=E(e);const a=R(`/collaboration/activities${n}`,"internal");const i=e?.targetEntityType?.keys;const o=[];i?.forEach(function(e){const t=R(e.name);o.push(t)});return H([a,...o],t)};u.getCollaborationExpression=ne;const ae=function(e,t,n){return ie(e,t,true,n)};u.getEnabledExpressionAsObject=ae;const ie=function(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let a=arguments.length>3?arguments[3]:undefined;if(!e||typeof e==="string"){return K(true)}let i;if(a){i=x(a)}let o=G(true);if(t!==undefined&&!$(t)){o=W(T(t),false,true)}const s=V(e)?e.$target:e;const r=s!==undefined?W(T(s,i),false,true):w;if(n){return _(r,o)}return K(_(r,o))};u.getEnabledExpression=ie;const oe=function(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:undefined;let o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:j.IsEditable;if(!e||typeof e==="string"||!$(i)&&i?.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"){return X.Display}const s=V(e)?e.$target:e;const r=x(t);const l=O(t,{propertyPath:s,pathVisitor:(e,n)=>U(e,t.convertedTypes,n)});const u=ee(e,i,t,o,false);const d=ae(e,i,t);const c=v(s);const g=c||y(s);let m=G(X.Editable);if(g){const e=h(g,r);m=W(B(e,p(g),_(f(g),N(j.IsTransientBinding)),n),W(!q(e)&&e,X.EditableReadOnly,X.EditableDisplay),X.Editable)}if(!g&&(s?.annotations?.Measures?.ISOCurrency||s?.annotations?.Measures?.Unit)){m=G(X.EditableDisplay)}let b;if(i!=undefined&&!$(i)){b=B(h(s,r),h(i))}else{b=h(s,r)}const D=W(B(l,j.IsTransientBinding),W(d,W(u,m,W(_(!q(b)&&b,o),X.ReadOnly,X.Display)),W(o,X.Disabled,X.Display)),X.Display);if(a){return D}return K(D)};u.getEditMode=oe;const se=function(e){const t=e?.targetObject;const n=t?.annotations?.Measures?.ISOCurrency;const a=n?n:t?.annotations?.Measures?.Unit;if(a){return K(B(k(z(a)),N(j.IsTotal)))}else{return K(G(true))}};u.hasValidAnalyticalCurrencyOrUnit=se;const re=function(e,t,n){const a=V(e)&&e.$target||e;const i=a.annotations?.Common?.Text!==undefined;if(g(a)){return K(t)}else{return i?K(W(Q(n,"Editable"),"Value",t)):"Value"}};u.getFieldDisplay=re;const le=function(e,t){const n=J[e?.type]||(t?J[t]:undefined);const a={type:n.type,constraints:{},formatOptions:{}};if($(e)){a.constraints={scale:n.constraints?.$Scale?e.scale:undefined,precision:n.constraints?.$Precision?e.precision:undefined,maxLength:n.constraints?.$MaxLength?e.maxLength:undefined,nullable:n.constraints?.$Nullable?e.nullable:undefined,minimum:n.constraints?.["@Org.OData.Validation.V1.Minimum/$Decimal"]&&!isNaN(e.annotations?.Validation?.Minimum)?`${e.annotations?.Validation?.Minimum}`:undefined,maximum:n.constraints?.["@Org.OData.Validation.V1.Maximum/$Decimal"]&&!isNaN(e.annotations?.Validation?.Maximum)?`${e.annotations?.Validation?.Maximum}`:undefined,isDigitSequence:a.type==="sap.ui.model.odata.type.String"&&n.constraints?.["@com.sap.vocabularies.Common.v1.IsDigitSequence"]&&e.annotations?.Common?.IsDigitSequence?true:undefined,V4:n.constraints?.$V4?true:undefined}}a.formatOptions={parseAsString:a?.type?.indexOf("sap.ui.model.odata.type.Int")===0||a?.type?.indexOf("sap.ui.model.odata.type.Double")===0?false:undefined,emptyString:a?.type?.indexOf("sap.ui.model.odata.type.Int")===0||a?.type?.indexOf("sap.ui.model.odata.type.Double")===0?"":undefined,parseKeepsEmptyString:a.type==="sap.ui.model.odata.type.String"?true:undefined};return a};u.getTypeConfig=le;const ue=function(e){return e?.annotations?.UI?.DoNotCheckScaleOfMeasuredQuantity&&e?.annotations?.UI.DoNotCheckScaleOfMeasuredQuantity?.valueOf()?{skipDecimalsValidation:true}:{}};u.getConstraintOptions=ue;const de=function(e,t,a,i){const o=e.targetObject;let s=o.annotations?.Measures?.Unit;const r=x(e);t=L(o,t);if(m(o)){if(i?.showMeasure===false){return t}return H([t],n.formatWithPercentage)}const l=s?"sap.ui.model.odata.type.Unit":"sap.ui.model.odata.type.Currency";s=s?s:o.annotations?.Measures?.ISOCurrency;const u=V(s)&&s.$target?L(s.$target,z(s,r),a):z(s,r);const d=l==="sap.ui.model.odata.type.Unit"?ue(e.targetObject):undefined;return Y([t,u],l,undefined,i,d)};u.getBindingWithUnitOrCurrency=de;const ce=function(e,t){const n=e.targetObject;const a=x(e);const i={};t=L(n,t);const o="sap.fe.core.type.Date";const s=n?.annotations?.Validation?.Minimum?.$Date?n?.annotations?.Validation?.Minimum?.$Date:n?.annotations?.Validation?.Minimum;const r=n?.annotations?.Validation?.Maximum?.$Date?n?.annotations?.Validation?.Maximum?.$Date:n?.annotations?.Validation?.Maximum;const l=s&&V(s)?L(n?.annotations?.Validation?.Minimum,z(n?.annotations?.Validation?.Minimum,a)):s;const u=r&&V(r)?L(n?.annotations?.Validation?.Maximum,z(n?.annotations?.Validation?.Maximum,a)):r;return(l||u)&&Y([t,l,u],o,undefined,i)};u.getBindingForDatePicker=ce;const fe=function(e){const t=e?.targetObject;if(!t){return""}let n=t.annotations?.Measures?.Unit;if(m(t)){return G("%")}const a=x(e);const i=n?"sap.ui.model.odata.type.Unit":"sap.ui.model.odata.type.Currency";n=n?n:t.annotations?.Measures?.ISOCurrency;const o=V(n)&&n.$target?L(n.$target,z(n,a)):z(n,a);let s=R(M(e));s=L(t,s,true);const r=i==="sap.ui.model.odata.type.Unit"?ue(e.targetObject):undefined;return Y([s,o],i,undefined,{parseKeepsEmptyString:true,showNumber:false},r)};u.getBindingForUnitOrCurrency=fe;const pe=function(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let i=arguments.length>4?arguments[4]:undefined;const o=e.targetObject;const s=o.annotations?.Common?.Timezone;const r=o.annotations?.UI?.DateTimeStyle;const l=x(e);t=L(o,t);const u="sap.fe.core.type.DateTimeWithTimezone";const d=V(s)&&s.$target?L(s.$target,z(s,l),n):z(s,l);let c={};if(a){c={showTimezoneForEmptyValues:false}}if(r){c={...c,...{style:r}}}else if(i?.dateTimeStyle!==undefined){c={...c,...{style:i.dateTimeStyle}}}if(i?.dateTimePattern!==undefined){c={...c,...{pattern:i.dateTimePattern}}}if(i?.showTime!==undefined){c={...c,...{showTime:i.showTime}}}if(i?.showDate!==undefined){c={...c,...{showDate:i.showDate}}}if(i?.showTimezone!==undefined){c={...c,...{showTimezone:i.showTimezone}}}return Y([t,d],u,undefined,c)};u.getBindingWithTimezone=pe;const ge=function(e,t,n){const a=e.targetObject;const i=n?.dateTimePattern;const o=a.annotations?.UI?.DateTimeStyle??n?.dateTimeStyle;t=L(a,t);t.type=J[a.type].type;t.formatOptions={...o&&{style:o.toString()},...i&&{pattern:i}};return t};u.getBindingForDateFormat=ge;const me=function(e,t){const n=e.targetObject;t=L(n,t);t.type="any";const a="sap.ui.model.odata.type.DateTimeWithTimezone";const i={showTime:false,showDate:false,showTimezone:true};return Y([null,t],a,undefined,i)};u.getBindingForTimezone=me;const ye=function(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"Begin";let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"Begin";return K(W(Q(e,"Display"),t,n))};u.getAlignmentExpression=ye;const ve=function(e,t){if(t&&t.context){return A(t.context)}return null};ve.requiresIContext=true;u.getConverterContext=ve;const be=function(e,t){if(t&&t.context){return S(t.context)}return null};be.requiresIContext=true;u.getDataModelObjectPath=be;const he=function(e){if(e.navigationProperties?.length){const t=e?.navigationProperties.findIndex(t=>{if(C(t)){if(e.contextLocation?.navigationProperties?.length){return e.contextLocation?.navigationProperties.findIndex(e=>e.name===t.name)===-1}return true}return false})>-1;if(t){return true}}return false};u.isMultiValueField=he;const De=function(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return Te(e,t,n,true)};u.getRequiredExpressionAsObject=De;const Te=function(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};let o=arguments.length>5?arguments[5]:undefined;const s=i.requiredPropertiesFromInsertRestrictions;const r=i.requiredPropertiesFromUpdateRestrictions;if(!e||typeof e==="string"){if(a){return G(false)}return K(G(false))}let l;if(o){l=x(o)}let u=G(false);if(t!==undefined&&!$(t)){u=b(t)}let d=G(false);let c=G(false);const f=V(e)&&e.$target||e;const p=b(f,l);const g=n||j.IsEditable;if(s?.includes(f.name)){d=j.IsCreateMode}if(r?.includes(f.name)){c=_(j.IsEditable,N(j.IsCreateMode))}const m=B(_(B(p,u),g),d,c);if(a){return m}return K(m)};u.getRequiredExpression=Te;const Oe=function(e){const t=e?.targetObject?.$target?.Data??{};const n=Object.keys(t);const a=[];let i;const o=[];for(const e of n){if(t[e]?.["$Type"]&&t[e]["$Type"]?.includes("DataField")){a.push(t[e])}}for(const e of a){switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":if(typeof e.Value==="object"){i=e.Value.$target}break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":if(e.Target?.$target){if(P(e.Target.$target,["com.sap.vocabularies.UI.v1.DataField","com.sap.vocabularies.UI.v1.DataPointType"])){if(typeof e.Target.$target.Value==="object"){i=e.Target.$target.Value.$target}}else{if(typeof e.Target==="object"){i=e.Target.$target}break}}break;default:break}o.push(De(i,e,false))}return K(B(...o))};u.getRequiredExpressionForConnectedDataField=Oe;function Ee(e,t){return N(Q(z(e?.annotations?.UI?.Hidden,t),true))}u.isVisible=Ee;const xe=function(e){return d(e.targetObject)};u.isMultiLine=xe;function Me(e,t,n,a){const i=e.annotations.Core?.OperationAvailable?.term==="Org.OData.Core.V1.OperationAvailable";if(!i){return G(true)}let o="";if(n&&a&&a===true&&n.contextLocation?.targetEntityType&&n.contextLocation.targetEntityType!==e.sourceEntityType){const t=x(n);let a=I(n.contextLocation);for(const n of t){a=I(a,n);if(a.targetEntityType===e.sourceEntityType){o=`${x(a).join("/")}/`;break}}}const s=e.isBound?e.parameters[0]?.fullyQualifiedName:undefined;const r=z(e.annotations.Core?.OperationAvailable,[],undefined,e=>`${o}${F(e,t,s)}`);return Q(r,true)}u.getActionEnabledExpression=Me;function Ie(e){let t=G(true);if(P(e.targetObject?.Target?.$target,"com.sap.vocabularies.UI.v1.FieldGroupType")){t=Ee(e.targetObject?.Target?.$target)}return K(_(Ee(e.targetObject),t))}u.isQuickViewFacetVisible=Ie;return u},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/type/Date", ["sap/fe/base/ClassSupport","sap/ui/core/Lib","sap/ui/model/CompositeType","sap/ui/model/ValidateException","sap/ui/model/odata/type/Date"],function(e,t,a,r,o){"use strict";var s,u;var i=e.defineUI5Class;function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,p(e,t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}let f=(s=i("sap.fe.core.type.Date"),s(u=function(e){function a(t,a){var r;r=e.call(this,t,a)||this;r.bParseWithValues=true;r.date=new o;r.bUseRawValues=true;return r}n(a,e);var s=a.prototype;s.validateValue=function e(a){const o=t.getResourceBundleFor("sap.fe.core");if(a[0]){if(a[1]){if(Date.parse(a[0])<Date.parse(a[1])){throw new r(o.getText("C_ERROR_MINMAX_VALIDATION_DISPLAYED"))}}if(a[2]){if(Date.parse(a[0])>Date.parse(a[2])){throw new r(o.getText("C_ERROR_MINMAX_VALIDATION_DISPLAYED"))}}}this.date.validateValue(a[0])};s.formatValue=function e(t,a){return this.date.formatValue(t[0],a)};s.parseValue=function e(t,a){return[this.date.parseValue(t,a)]};return a}(a))||u);return f},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/type/DateTimeWithTimezone", ["sap/fe/base/ClassSupport","sap/ui/model/odata/type/DateTimeWithTimezone"],function(t,e){"use strict";var o,r;var n=t.defineUI5Class;function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,u(t,e)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}let a=(o=n("sap.fe.core.type.DateTimeWithTimezone"),o(r=function(t){function e(e,o){var r;r=t.call(this,e,o)||this;r.bShowTimezoneForEmptyValues=e?.showTimezoneForEmptyValues??true;return r}i(e,t);var o=e.prototype;o.formatValue=function e(o,r){const n=o&&o[0];if(n===undefined||!n&&!this.bShowTimezoneForEmptyValues){return null}return t.prototype.formatValue.call(this,o,r)};return e}(e))||r);return a},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/type/EDM", [],function(){"use strict";var e={};const d={"Edm.Binary":{modelType:undefined},"Edm.Boolean":{modelType:"Bool"},"Edm.Byte":{modelType:"Int"},"Edm.Date":{modelType:"Date"},"Edm.DateTime":{modelType:"Date"},"Edm.DateTimeOffset":{modelType:"DateTimeOffset"},"Edm.Decimal":{modelType:"Decimal"},"Edm.Duration":{modelType:undefined},"Edm.Double":{modelType:"Float"},"Edm.Float":{modelType:"Float"},"Edm.Guid":{modelType:"Guid"},"Edm.Int16":{modelType:"Int"},"Edm.Int32":{modelType:"Int"},"Edm.Int64":{modelType:"Int"},"Edm.SByte":{modelType:"Int"},"Edm.Single":{modelType:"Float"},"Edm.String":{modelType:"String"},"Edm.Time":{modelType:"TimeOfDay"},"Edm.TimeOfDay":{modelType:"TimeOfDay"},"Edm.Stream":{modelType:undefined}};e.DefaultTypeForEdmType=d;function m(e){return!!d[e]?.modelType}e.isTypeFilterable=m;function o(e){return d[e]?.modelType}e.getModelType=o;return e},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/type/Email", ["sap/fe/base/ClassSupport","sap/ui/core/Lib","sap/ui/model/odata/type/String","sap/ui/model/ValidateException"],function(t,e,o,r){"use strict";var n,s;var a=t.defineUI5Class;function p(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}const c=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]{1,64}/;const u=/[a-zA-Z0-9-]{1,255}/;let l=(n=a("sap.fe.core.type.Email"),n(s=function(t){function o(){return t.apply(this,arguments)||this}p(o,t);var n=o.prototype;n.validateValue=function o(n){const s=n.split("@");const a=s?.[0];const p=s?.[1];if(n&&(!a||!p||!c.test(a)||!p.split(".").every(t=>u.test(t))||s.length!==2)){throw new r(e.getResourceBundleFor("sap.fe.core").getText("T_EMAILTYPE_INVALID_VALUE"))}t.prototype.validateValue.call(this,n)};return o}(o))||s);return l},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/type/FiscalDate", ["sap/base/i18n/date/CalendarType","sap/fe/base/ClassSupport","sap/fe/core/formatters/FiscalFormat","sap/ui/core/Lib","sap/ui/model/ValidateException","sap/ui/model/odata/type/String"],function(a,e,t,r,o,s){"use strict";var i,c,l;var n=e.defineUI5Class;function m(a,e){a.prototype=Object.create(e.prototype),a.prototype.constructor=a,u(a,e)}function u(a,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},u(a,e)}let p=(i=n("sap.fe.core.type.FiscalDate"),i(c=(l=function(e){function s(r,o){var i;if((r.fiscalType==="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"||r.fiscalType==="com.sap.vocabularies.Common.v1.IsFiscalYearQuarter"||r.fiscalType==="com.sap.vocabularies.Common.v1.IsFiscalYearWeek")&&o?.maxLength){o.maxLength=o.maxLength+1}i=e.call(this,r,o)||this;i.annotationType=r.fiscalType;const c=s.dateFormats[i.annotationType];if(c){i.formatter=t.getDateInstance({format:c,calendarType:a.Gregorian})}return i}m(s,e);var i=s.prototype;i.getPattern=function a(){return this.formatter?.getPattern()};i.formatValue=function a(t,r){return this.formatter?this.formatter.format(e.prototype.formatValue.call(this,t,r)):e.prototype.formatValue.call(this,t,r)};i.parseValue=function a(t,r){return this.formatter?this.formatter.parse(e.prototype.parseValue.call(this,t,r)):e.prototype.parseValue.call(this,t,r)};i.validateValue=function a(t){try{e.prototype.validateValue.call(this,t)}catch(a){if(!this.formatter){throw a}if(!this.formatter.validate(t)){throw new o(this.getErrorMessage(this.annotationType))}}if(!this.formatter||t===""||t===null){return}if(!this.formatter.validate(t)){throw new o(this.getErrorMessage(this.annotationType))}};i.getErrorMessage=function a(e){let t="";this.fullYear=this.fullYear||(new Date).getFullYear().toString();switch(e){case"com.sap.vocabularies.Common.v1.IsFiscalYear":t=this.fullYear;break;case"com.sap.vocabularies.Common.v1.IsFiscalPeriod":t="001";break;case"com.sap.vocabularies.Common.v1.IsFiscalYearPeriod":t=this.fullYear+"001";break;case"com.sap.vocabularies.Common.v1.IsFiscalQuarter":t="1";break;case"com.sap.vocabularies.Common.v1.IsFiscalYearQuarter":t=this.fullYear+"1";break;case"com.sap.vocabularies.Common.v1.IsFiscalWeek":t="01";break;case"com.sap.vocabularies.Common.v1.IsFiscalYearWeek":t=this.fullYear+"01";break;case"com.sap.vocabularies.Common.v1.IsDayOfFiscalYear":t="1";break;case"com.sap.vocabularies.Common.v1.IsFiscalYearVariant":break;default:t=this.fullYear}return r.getResourceBundleFor("sap.fe.core").getText("FISCAL_VALIDATION_FAILS",[this.formatValue(t,"string")])};i.getName=function a(){return"sap.fe.core.type.FiscalDate"};i.getFormatter=function a(){return this.formatter};return s}(s),l.dateFormats={["com.sap.vocabularies.Common.v1.IsFiscalYear"]:"YYYY",["com.sap.vocabularies.Common.v1.IsFiscalPeriod"]:"PPP",["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]:"YYYYPPP",["com.sap.vocabularies.Common.v1.IsFiscalQuarter"]:"Q",["com.sap.vocabularies.Common.v1.IsFiscalYearQuarter"]:"YYYYQ",["com.sap.vocabularies.Common.v1.IsFiscalWeek"]:"WW",["com.sap.vocabularies.Common.v1.IsFiscalYearWeek"]:"YYYYWW",["com.sap.vocabularies.Common.v1.IsDayOfFiscalYear"]:"d",["com.sap.vocabularies.Common.v1.IsFiscalYearVariant"]:""},l))||c);return p},false);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/fe/core/type/InputMask", ["sap/fe/base/ClassSupport","sap/ui/core/Lib","sap/ui/model/ValidateException","sap/ui/model/odata/type/String"],function(t,e,o,s){"use strict";var i,r;var n=t.defineUI5Class;function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,l(t,e)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}let u=(i=n("sap.fe.core.type.InputMask"),i(r=function(t){function s(e){return t.call(this,e)||this}a(s,t);var i=s.prototype;i.validateValue=function s(i){const r=this.formatValue(i);if(r.includes(this.oFormatOptions.placeholderSymbol)){let t=e.getResourceBundleFor("sap.fe.core").getText("T_MASKEDINPUT_INVALID_VALUE");if(!t){t=""}throw new o(t)}t.prototype.validateValue.call(this,i)};i.parseValue=function t(e){let o="";let s=0;const i=this.oFormatOptions?.mask;if(i){for(let t=0;t<=i.length;t++){if(this.doesMakingRuleExists(this.oFormatOptions.maskRule,i[t])){const r=this.oFormatOptions.maskRule.find(e=>e.symbol===i[t]);if(e[s]&&r&&e[s].match(new RegExp(r.regex))){o+=e[s++]}}else if(i[t]==="^"){t++;s++}else{s++}}}return o};i.doesMakingRuleExists=function t(e,o){for(const t of e){if(t.symbol===o){return true}}return false};i.formatValue=function t(e){if(!e)return e;const o={};let t="";if(this.oFormatOptions.maskRule){for(const t of this.oFormatOptions.maskRule){o[t.symbol]=t.regex}let s=0;let i="";const r=this.oFormatOptions.mask;for(let t=0;t<r.length;t++){if(o[r[t]]){if(e[s]&&e[s].match(new RegExp(o[r[t]]))){i+=e[s++]}else{i+=this.oFormatOptions.placeholderSymbol}}else if(r[t]==="^"){i+=r[t+1];t++}else{i+=r[t]}}t=i}return t};return s}(s))||r);return u},false);
sap.ui.require.preload({
	"sap/fe/base/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.fe.base","type":"library","embeds":[],"applicationVersion":{"version":"1.132.0"},"title":"UI5 library: sap.fe.base","description":"UI5 library: sap.fe.base","ach":"CA-UI5-FE","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":[]},"sap.ui5":{"dependencies":{"minUI5Version":"1.132","libs":{"sap.ui.core":{"minVersion":"1.132.1"}}},"library":{"i18n":false,"css":false,"content":{"controls":[],"elements":[],"types":[],"interfaces":[]}}}}',
	"sap/fe/core/controls/NonComputedVisibleKeyFieldsDialog.fragment.xml":'<core:FragmentDefinition\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mdc="sap.ui.mdc"\n\txmlns:mdcv="sap.ui.mdc.valuehelp"\n\txmlns:mdcvc="sap.ui.mdc.valuehelp.content"\n\txmlns:form="sap.ui.layout.form"\n\txmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"\n\ttemplate:require="{\n\t\tMODEL: \'sap/ui/model/odata/v4/AnnotationHelper\',\n\t\tCOMMON: \'sap/fe/macros/CommonHelper\',\n\t\tID: \'sap/fe/core/helpers/StableIdHelper\',\n\t\tValueHelpTemplating: \'sap/fe/macros/internal/valuehelp/ValueHelpTemplating\',\n\t\tProperty: \'sap/fe/core/templating/PropertyFormatters\',\n\t\tFIELD: \'sap/fe/macros/field/FieldHelper\',\n\t\tUI: \'sap/fe/core/templating/UIFormatters\'\n\t}"\n><template:with path="fields>" var="allFields"><form:SimpleForm><template:repeat list="{allFields>}" var="key"><template:with path="key>" helper="COMMON.getPathToKey" var="immutableKey"><Label text="{= ${immutableKey>@com.sap.vocabularies.Common.v1.Label}}" /><mdc:Field\n\t\t\t\t\t\tdelegate="{name:\'sap/fe/macros/field/FieldBaseDelegate\', payload:{retrieveTextFromValueList:true}}"\n\t\t\t\t\t\tid="{= ID.generate([\'CreateDialog\', ${entitySet>@sapui.name}, ${immutableKey>@sapui.name}]) }"\n\t\t\t\t\t\tvalue="{immutableKey>@@MODEL.format}"\n\t\t\t\t\t\tplaceholder="{immutableKey>@com.sap.vocabularies.UI.v1.Placeholder@@MODEL.value}"\n\t\t\t\t\t\twidth="100%"\n\t\t\t\t\t\trequired="{= FIELD.getRequired(${immutableKey>@sapui.name}, ${immutableKey>@@UI.getDataModelObjectPath}, ${requiredProperties>})}"\n\t\t\t\t\t\tdisplay="{immutableKey>@@FIELD.getAPDialogDisplayFormat}"\n\t\t\t\t\t\tchange="{= \'.handleChange($event, \\\'\' + ${immutableKey>@sapui.name} + \'\\\')\' }"\n\t\t\t\t\t\tliveChange=".handleLiveChange"\n\t\t\t\t\t\tvalueHelp="{= ${immutableKey>@@Property.hasValueHelp} ? ID.generate([${immutableKey>@sapui.name},\'VH\']) : undefined }"\n\t\t\t\t\t\tcustomData:fieldName="{immutableKey>@sapui.name}"\n\t\t\t\t\t\teditMode="{= ${immutableKey>@com.sap.vocabularies.Common.v1.FieldControl} &amp;&amp; ${immutableKey>@com.sap.vocabularies.Common.v1.FieldControl/$EnumMember} &amp;&amp; ${immutableKey>@com.sap.vocabularies.Common.v1.FieldControl/$EnumMember} === \'com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly\' ? \'Display\' : \'Editable\'}"\n\t\t\t\t\t><template:if test="{immutableKey>@@Property.hasValueHelp}"><template:then><mdc:dependents><mdc:ValueHelp\n\t\t\t\t\t\t\t\t\t\tid="{= ID.generate([${immutableKey>@sapui.name},\'VH\']) }"\n\t\t\t\t\t\t\t\t\t\tdelegate="{= FIELD.getValueHelpDelegateForNonComputedVisibleKeyField(${immutableKey>@@Property.getPropertyPath}) }"\n\t\t\t\t\t\t\t\t\t\tvalidateInput="{= ValueHelpTemplating.requiresValidation(${immutableKey>@@Property.getProperty})}"\n\t\t\t\t\t\t\t\t\t><mdc:typeahead><mdcv:Popover><mdcvc:MTable\n\t\t\t\t\t\t\t\t\t\t\t\t\tid="{= ID.generate([${immutableKey>@sapui.name},\'VH\']) }::Popover::qualifier::"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcaseSensitive="{= ValueHelpTemplating.useCaseSensitiveFilterRequests(${immutableKey>@@Property.getPropertyObjectPath}, ${immutableKey>/@Org.OData.Capabilities.V1.FilterFunctions})}"\n\t\t\t\t\t\t\t\t\t\t\t\t\tuseAsValueHelp="{= ${immutableKey>@com.sap.vocabularies.Common.v1.ValueListWithFixedValues} || false}"\n\t\t\t\t\t\t\t\t\t\t\t\t/></mdcv:Popover></mdc:typeahead><template:if\n\t\t\t\t\t\t\t\t\t\t\ttest="{= ${immutableKey>@com.sap.vocabularies.Common.v1.ValueListWithFixedValues} ? (${immutableKey>@com.sap.vocabularies.Common.v1.ValueListWithFixedValues} === \'true\') : true}"\n\t\t\t\t\t\t\t\t\t\t><mdc:dialog><mdcv:Dialog /></mdc:dialog></template:if></mdc:ValueHelp></mdc:dependents></template:then></template:if></mdc:Field></template:with></template:repeat></form:SimpleForm></template:with></core:FragmentDefinition>\n',
	"sap/fe/core/rootView/Fcl.view.xml":'<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.f" displayBlock="true" height="100%" controllerName="sap.fe.core.rootView.Fcl"><FlexibleColumnLayout\n\t\tid="appContent"\n\t\tcolumnsDistributionChange="onColumnsDistributionChange"\n\t\tbackgroundDesign="Transparent"\n\t\trestoreFocusOnBackNavigation="true"\n\t\tautoFocus="false"\n\t><layoutData><FlexibleColumnLayoutData><desktopLayoutData><FlexibleColumnLayoutDataForDesktop\n\t\t\t\t\t\ttwoColumnsBeginExpanded="{internal>/FCLColumnsDistribution/desktop/TwoColumnsBeginExpanded}"\n\t\t\t\t\t\ttwoColumnsMidExpanded="{internal>/FCLColumnsDistribution/desktop/TwoColumnsMidExpanded}"\n\t\t\t\t\t\tthreeColumnsBeginExpandedEndHidden="{internal>/FCLColumnsDistribution/desktop/ThreeColumnsBeginExpandedEndHidden}"\n\t\t\t\t\t\tthreeColumnsEndExpanded="{internal>/FCLColumnsDistribution/desktop/ThreeColumnsEndExpanded}"\n\t\t\t\t\t\tthreeColumnsMidExpanded="{internal>/FCLColumnsDistribution/desktop/ThreeColumnsMidExpanded}"\n\t\t\t\t\t\tthreeColumnsMidExpandedEndHidden="{internal>/FCLColumnsDistribution/desktop/ThreeColumnsMidExpandedEndHidden}"\n\t\t\t\t\t/></desktopLayoutData><tabletLayoutData><FlexibleColumnLayoutDataForTablet\n\t\t\t\t\t\ttwoColumnsBeginExpanded="{internal>/FCLColumnsDistribution/tablet/TwoColumnsBeginExpanded}"\n\t\t\t\t\t\ttwoColumnsMidExpanded="{internal>/FCLColumnsDistribution/tablet/TwoColumnsMidExpanded}"\n\t\t\t\t\t\tthreeColumnsBeginExpandedEndHidden="{internal>/FCLColumnsDistribution/tablet/ThreeColumnsBeginExpandedEndHidden}"\n\t\t\t\t\t\tthreeColumnsEndExpanded="{internal>/FCLColumnsDistribution/tablet/ThreeColumnsEndExpanded}"\n\t\t\t\t\t\tthreeColumnsMidExpanded="{internal>/FCLColumnsDistribution/tablet/ThreeColumnsMidExpanded}"\n\t\t\t\t\t\tthreeColumnsMidExpandedEndHidden="{internal>/FCLColumnsDistribution/tablet/ThreeColumnsMidExpandedEndHidden}"\n\t\t\t\t\t/></tabletLayoutData></FlexibleColumnLayoutData></layoutData></FlexibleColumnLayout></mvc:View>\n',
	"sap/fe/core/rootView/NavContainer.view.xml":'<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" displayBlock="true" height="100%" controllerName="sap.fe.core.rootView.NavContainer"><NavContainer id="appContent" autoFocus="false" /></mvc:View>\n',
	"sap/fe/core/services/view/TemplatingErrorPage.view.xml":'<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" controllerName="sap.fe.core.services.view.TemplatingErrorPage"><Page showHeader="false"><IllustratedMessage\n\t\t\tillustrationType="sapIllus-ErrorScreen"\n\t\t\ttitle="{sap.fe.i18n>T_TEMPLATING_ERROR_PAGE_SAPFE_APPSTART_TEMPLATING_FAILED}"\n\t\t\tdescription="{= ${error>/message} ? ${error>/message} : \'\'}"\n\t\t/></Page></mvc:View>\n'
},"sap/fe/core-lib-preload");
//# sourceMappingURL=library-preload.js.map
