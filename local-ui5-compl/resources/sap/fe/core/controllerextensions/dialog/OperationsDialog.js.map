{"version":3,"file":"OperationsDialog.js","names":["macroResourceBundle","Library","getResourceBundleFor","OperationsDialog","_dec","defineUI5Class","_dec2","property","type","required","_dec3","_dec4","_dec5","defineReference","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_class","_class2","_BuildingBlock","props","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","model","_exports","_inheritsLoose","_proto","prototype","open","createContent","operationsDialog","current","getBeginButton","Button","press","isMultiContext412","resolve","submitBatch","groupId","requestSideEffects","strictHandlingPromises","forEach","strictHandlingPromise","strictHandlingFails","strictHandlingUtilities","strictHandlingTransitionFails","length","messageHandler","removeTransitionMessages","strictHandlingWarningMessages","is412Executed","messageDialogModel","setData","close","text","actionName","getTitle","sTitle","getText","Title","getEndButton","isGrouped","showMessageInfo","cancelButtonTxt","_jsx","Dialog","id","ref","resizable","content","messageObject","messageView","state","customHeader","Bar","contentLeft","oBackButton","contentMiddle","contentHeight","contentWidth","verticalScrolling","beginButton","endButton","BuildingBlock","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./OperationsDialog.tsx"],"sourcesContent":["import type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { defineReference, defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport type { Ref } from \"sap/fe/base/jsx-runtime/jsx\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport Bar from \"sap/m/Bar\";\nimport Button from \"sap/m/Button\";\nimport Dialog from \"sap/m/Dialog\";\nimport Title from \"sap/m/Title\";\nimport type Control from \"sap/ui/core/Control\";\nimport Library from \"sap/ui/core/Lib\";\nimport type Message from \"sap/ui/core/message/Message\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type MessageHandler from \"../MessageHandler\";\n\ntype StrictHandlingPromise = {\n\t//TODO: move to somewhere else\n\tresolve: Function;\n\tgroupId: string;\n\trequestSideEffects?: Function;\n};\n\nexport type StrictHandlingUtilities = {\n\t//TODO: move to somewhere else\n\tis412Executed: boolean;\n\tstrictHandlingTransitionFails: Object[];\n\tstrictHandlingPromises: StrictHandlingPromise[];\n\tstrictHandlingWarningMessages: Message[];\n\tdelaySuccessMessages: Message[];\n\tprocessedMessageIds: Set<string>;\n};\n\nconst macroResourceBundle = Library.getResourceBundleFor(\"sap.fe.macros\")!;\n/**\n * Known limitations for the first tryout as mentioned in git 5806442\n *  - functional block dependency\n * \t- questionable parameters will be refactored\n */\n@defineUI5Class(\"sap.fe.core.controllerextensions.dialog.OperationsDialog\")\nexport default class OperationsDialog extends BuildingBlock {\n\t/*\n\t * The 'id' property of the dialog\n\t */\n\t@property({ type: \"string\", required: true })\n\tpublic id!: string;\n\n\t/**\n\t * The 'title' property of the Dialog;\n\t */\n\t@property({ type: \"string\" })\n\tpublic title?: string = \"Dialog Standard Title\";\n\n\t/**\n\t * The message object that is provided to this dialog\n\t */\n\t@property({ type: \"object\", required: true }) //TODO: create the type\n\tpublic messageObject!: { messageView: Control; oBackButton: Button };\n\n\t@defineReference()\n\toperationsDialog!: Ref<Dialog>;\n\n\t@property({ type: \"boolean\", required: true })\n\tpublic isMultiContext412?: boolean;\n\n\t@property({ type: \"function\" })\n\tpublic requestSideEffects?: Function;\n\n\t@property({ type: \"function\" })\n\tpublic resolve?: Function;\n\n\t@property({ type: \"object\", required: true })\n\tpublic model!: ODataModel;\n\n\t@property({ type: \"string\", required: true })\n\tpublic groupId!: string;\n\n\t@property({ type: \"string\", required: true })\n\tpublic actionName!: string;\n\n\t@property({ type: \"string\", required: true })\n\tpublic cancelButtonTxt!: string;\n\n\t@property({ type: \"object\", required: true })\n\tpublic strictHandlingPromises!: StrictHandlingPromise[];\n\n\t@property({ type: \"object\" })\n\tpublic strictHandlingUtilities?: StrictHandlingUtilities;\n\n\t@property({ type: \"object\" })\n\tpublic messageHandler?: MessageHandler;\n\n\t@property({ type: \"object\", required: true })\n\tpublic messageDialogModel!: JSONModel;\n\n\t@property({ type: \"boolean\" })\n\tpublic isGrouped?: boolean;\n\n\t@property({ type: \"function\" })\n\tpublic showMessageInfo?: Function;\n\n\tconstructor(props: PropertiesOf<OperationsDialog>) {\n\t\tsuper(props);\n\t\tthis.model = props.model!;\n\t}\n\n\tpublic open(): void {\n\t\tthis.createContent();\n\t\tthis.operationsDialog.current?.open();\n\t}\n\n\tprivate getBeginButton(): Button {\n\t\treturn new Button({\n\t\t\tpress: (): void => {\n\t\t\t\tif (!(this.isMultiContext412 ?? false)) {\n\t\t\t\t\tthis.resolve?.(true);\n\t\t\t\t\tthis.model.submitBatch(this.groupId);\n\t\t\t\t\tif (this.requestSideEffects) {\n\t\t\t\t\t\tthis.requestSideEffects();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.strictHandlingPromises.forEach((strictHandlingPromise: StrictHandlingPromise) => {\n\t\t\t\t\t\tstrictHandlingPromise.resolve(true);\n\t\t\t\t\t\tthis.model.submitBatch(strictHandlingPromise.groupId);\n\t\t\t\t\t\tif (strictHandlingPromise.requestSideEffects) {\n\t\t\t\t\t\t\tstrictHandlingPromise.requestSideEffects();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tconst strictHandlingFails = this.strictHandlingUtilities?.strictHandlingTransitionFails;\n\t\t\t\t\tif (strictHandlingFails && strictHandlingFails.length > 0) {\n\t\t\t\t\t\tthis.messageHandler?.removeTransitionMessages();\n\t\t\t\t\t}\n\t\t\t\t\tif (this.strictHandlingUtilities) {\n\t\t\t\t\t\tthis.strictHandlingUtilities.strictHandlingWarningMessages = [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.strictHandlingUtilities) {\n\t\t\t\t\tthis.strictHandlingUtilities.is412Executed = true;\n\t\t\t\t}\n\t\t\t\tthis.messageDialogModel.setData({});\n\t\t\t\tthis.close();\n\t\t\t},\n\t\t\ttype: \"Emphasized\",\n\t\t\ttext: this.actionName\n\t\t});\n\t}\n\n\tprivate close(): void {\n\t\tthis.operationsDialog.current?.close();\n\t}\n\n\tprivate getTitle(): Title {\n\t\tconst sTitle = macroResourceBundle.getText(\"M_WARNINGS\");\n\t\treturn new Title({ text: sTitle });\n\t}\n\n\tprivate getEndButton(): Button {\n\t\treturn new Button({\n\t\t\tpress: (): void => {\n\t\t\t\tif (this.strictHandlingUtilities) {\n\t\t\t\t\tthis.strictHandlingUtilities.strictHandlingWarningMessages = [];\n\t\t\t\t\tthis.strictHandlingUtilities.is412Executed = false;\n\t\t\t\t}\n\t\t\t\tif (!(this.isMultiContext412 ?? false)) {\n\t\t\t\t\tthis.resolve!(false);\n\t\t\t\t} else {\n\t\t\t\t\tthis.strictHandlingPromises.forEach(function (strictHandlingPromise: StrictHandlingPromise) {\n\t\t\t\t\t\tstrictHandlingPromise.resolve(false);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.messageDialogModel.setData({});\n\t\t\t\tthis.close();\n\t\t\t\tif (this.isGrouped ?? false) {\n\t\t\t\t\tthis.showMessageInfo!();\n\t\t\t\t}\n\t\t\t},\n\t\t\ttext: this.cancelButtonTxt\n\t\t});\n\t}\n\n\t/**\n\t * The building block render function.\n\t * @returns An XML-based string with the definition of the field control\n\t */\n\tcreateContent(): Dialog {\n\t\treturn (\n\t\t\t<Dialog\n\t\t\t\tid={this.id}\n\t\t\t\tref={this.operationsDialog}\n\t\t\t\tresizable={true}\n\t\t\t\tcontent={this.messageObject.messageView}\n\t\t\t\tstate={\"Warning\"}\n\t\t\t\tcustomHeader={\n\t\t\t\t\tnew Bar({\n\t\t\t\t\t\tcontentLeft: [this.messageObject.oBackButton],\n\t\t\t\t\t\tcontentMiddle: [this.getTitle()]\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tcontentHeight={\"50%\"}\n\t\t\t\tcontentWidth={\"50%\"}\n\t\t\t\tverticalScrolling={false}\n\t\t\t\tbeginButton={this.getBeginButton()}\n\t\t\t\tendButton={this.getEndButton()}\n\t\t\t></Dialog>\n\t\t) as Dialog;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}