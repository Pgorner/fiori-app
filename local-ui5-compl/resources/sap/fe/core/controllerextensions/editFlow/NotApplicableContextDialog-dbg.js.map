{"version":3,"names":["NotApplicableContextDialog","props","title","resourceModel","entityType","notApplicableContexts","_shouldContinue","actionName","entitySetName","entitySet","_dialog","createDialog","_processingPromise","Promise","resolve","_fnResolve","_exports","_proto","prototype","onAfterClose","destroy","onContinue","close","open","owner","addDependent","getDialog","boundActionName","includes","split","length","suffixResourceKey","_jsx","Dialog","state","showHeader","resizable","verticalScrolling","horizontalScrolling","class","afterClose","bind","children","beginButton","Button","text","getText","undefined","press","type","endButton","content","_jsxs","_Fragment","VBox","Text","List","headerText","annotations","UI","HeaderInfo","TypeNamePlural","showSeparators","items","map","notApplicableContext","titleExpression","getTitleExpression","customListItem","CustomListItem","HBox","justifyContent","setBindingContext"],"sourceRoot":".","sources":["NotApplicableContextDialog.tsx"],"sourcesContent":["import type { EntityType } from \"@sap-ux/vocabularies-types\";\nimport type ResourceModel from \"sap/fe/core/ResourceModel\";\nimport { getTitleExpression } from \"sap/fe/core/templating/EntityTypeHelper\";\nimport Button from \"sap/m/Button\";\nimport CustomListItem from \"sap/m/CustomListItem\";\nimport Dialog from \"sap/m/Dialog\";\nimport HBox from \"sap/m/HBox\";\nimport List from \"sap/m/List\";\nimport Text from \"sap/m/Text\";\nimport VBox from \"sap/m/VBox\";\nimport type Control from \"sap/ui/core/Control\";\nimport type Context from \"sap/ui/model/Context\";\n\n/**\n * Display a dialog to inform the user that some contexts are not applicable for the action.\n * This is not the target Ux but just keeping the current behavior\n */\nexport default class NotApplicableContextDialog {\n\tprivate readonly title: string;\n\n\tprivate resourceModel: ResourceModel;\n\n\tprivate readonly entityType: EntityType;\n\n\tprivate readonly _dialog: Dialog;\n\n\tprivate readonly _processingPromise: Promise<boolean>;\n\n\tprivate _fnResolve!: (resolveValue: boolean) => void;\n\n\tprivate _shouldContinue: boolean;\n\n\tprivate readonly actionName: string | undefined;\n\n\tprivate readonly entitySetName: string | undefined;\n\n\tprivate notApplicableContexts: Context[];\n\n\tconstructor(props: { title: string; entityType: EntityType; resourceModel: ResourceModel; notApplicableContexts: Context[]; entitySet?: string; actionName?: string }) {\n\t\tthis.title = props.title;\n\t\tthis.resourceModel = props.resourceModel;\n\t\tthis.entityType = props.entityType;\n\t\tthis.notApplicableContexts = props.notApplicableContexts;\n\t\tthis._shouldContinue = false;\n\t\tthis.actionName = props.actionName;\n\t\tthis.entitySetName = props.entitySet;\n\t\tthis._dialog = this.createDialog();\n\t\tthis._processingPromise = new Promise((resolve) => {\n\t\t\tthis._fnResolve = resolve;\n\t\t});\n\t}\n\n\tprivate onAfterClose(): void {\n\t\tthis._fnResolve(this._shouldContinue);\n\t\tthis._dialog.destroy();\n\t}\n\n\tprivate onContinue(): void {\n\t\tthis._shouldContinue = true;\n\t\tthis._dialog.close();\n\t}\n\n\tasync open(owner: Control): Promise<boolean> {\n\t\towner.addDependent(this._dialog);\n\t\tthis._dialog.open();\n\t\treturn this._processingPromise;\n\t}\n\n\tgetDialog(): Dialog {\n\t\treturn this._dialog;\n\t}\n\n\tcreateDialog(): Dialog {\n\t\tlet boundActionName = this.actionName;\n\t\tboundActionName = boundActionName?.includes(\".\")\n\t\t\t? boundActionName?.split(\".\")[boundActionName?.split(\".\").length - 1]\n\t\t\t: boundActionName;\n\t\tconst suffixResourceKey = boundActionName && this.entitySetName ? `${this.entitySetName}|${boundActionName}` : \"\";\n\t\treturn (\n\t\t\t<Dialog\n\t\t\t\tstate={\"Warning\"}\n\t\t\t\tshowHeader={true}\n\t\t\t\tresizable={true}\n\t\t\t\tverticalScrolling={true}\n\t\t\t\thorizontalScrolling={true}\n\t\t\t\tclass={\"sapUiContentPadding\"}\n\t\t\t\ttitle={this.title}\n\t\t\t\tafterClose={this.onAfterClose.bind(this)}\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\tbeginButton: (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttext={this.resourceModel.getText(\"C_ACTION_PARTIAL_FRAGMENT_SAPFE_CONTINUE_ANYWAY\", undefined, suffixResourceKey)}\n\t\t\t\t\t\t\tpress={this.onContinue.bind(this)}\n\t\t\t\t\t\t\ttype=\"Emphasized\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\t\tendButton: (\n\t\t\t\t\t\t<Button text={this.resourceModel.getText(\"C_COMMON_SAPFE_CLOSE\")} press={(): Dialog => this._dialog.close()} />\n\t\t\t\t\t),\n\t\t\t\t\tcontent: (\n\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<VBox>\n\t\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\t\ttext={\n\t\t\t\t\t\t\t\t\t\tthis.notApplicableContexts.length === 1\n\t\t\t\t\t\t\t\t\t\t\t? this.resourceModel.getText(\"C_ACTION_PARTIAL_FRAGMENT_SAPFE_BOUND_ACTION\", undefined, suffixResourceKey)\n\t\t\t\t\t\t\t\t\t\t\t: this.resourceModel.getText(\"C_ACTION_PARTIAL_FRAGMENT_SAPFE_BOUND_ACTION_PLURAL\", [\n\t\t\t\t\t\t\t\t\t\t\t\tthis.notApplicableContexts.length\n\t\t\t\t\t\t\t\t\t\t\t], suffixResourceKey)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclass=\"sapUiTinyMarginBegin sapUiTinyMarginTopBottom\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</VBox>\n\t\t\t\t\t\t\t<List headerText={this.entityType.annotations.UI?.HeaderInfo?.TypeNamePlural} showSeparators=\"None\">\n\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\titems: this.notApplicableContexts.map((notApplicableContext) => {\n\t\t\t\t\t\t\t\t\t\t// Either show the HeaderInfoName or the Semantic Key property\n\t\t\t\t\t\t\t\t\t\tconst titleExpression = getTitleExpression(this.entityType);\n\t\t\t\t\t\t\t\t\t\tconst customListItem = (\n\t\t\t\t\t\t\t\t\t\t\t<CustomListItem>\n\t\t\t\t\t\t\t\t\t\t\t\t<HBox justifyContent={\"Start\"}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text={titleExpression} class=\"sapUiTinyMarginBegin sapUiTinyMarginTopBottom\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</HBox>\n\t\t\t\t\t\t\t\t\t\t\t</CustomListItem>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tcustomListItem.setBindingContext(notApplicableContext);\n\t\t\t\t\t\t\t\t\t\treturn customListItem;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Dialog>\n\t\t) as Dialog;\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"NotApplicableContextDialog-dbg.js"}