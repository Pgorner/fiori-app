{"version":3,"names":["INLINEEDIT_UPDATEGROUPID","toggleControlLocalEdit","control","showInEdit","uiModel","getModel","registeredBindingContexts","getProperty","controlId","getId","path","setProperty","isEditable","bindElement","model","push","unbindElement","filter","id","_exports","leaveInlineEdit","view","resetChanges","Element","getElementById"],"sourceRoot":".","sources":["InlineEditHelper.ts"],"sourcesContent":["import { type FEView } from \"sap/fe/core/BaseController\";\nimport type Control from \"sap/ui/core/Control\";\nimport Element from \"sap/ui/core/Element\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\n\nconst INLINEEDIT_UPDATEGROUPID = \"inlineEdit\";\n\n/**\n * Toggles the control in local edit mode.\n * @param control The control to toggle\n * @param showInEdit Whether to show the control in edit mode\n */\nexport function toggleControlLocalEdit(control: Control, showInEdit: boolean): void {\n\tconst uiModel = control.getModel(\"ui\") as JSONModel;\n\tconst registeredBindingContexts = uiModel.getProperty(\"/registeredBindingContexts\") ?? [];\n\tconst controlId = control.getId();\n\tif (showInEdit) {\n\t\tconst path = `/${controlId}`;\n\t\tuiModel.setProperty(path, { isEditable: true });\n\t\tcontrol.bindElement({ path, model: \"ui\" });\n\t\tregisteredBindingContexts.push(controlId);\n\t\tuiModel.setProperty(\"/registeredBindingContexts\", registeredBindingContexts);\n\t} else {\n\t\tcontrol.unbindElement(\"ui\");\n\t\tuiModel.setProperty(\n\t\t\t\"/registeredBindingContexts\",\n\t\t\tregisteredBindingContexts.filter((id: string) => id !== controlId)\n\t\t);\n\t}\n}\n\n/**\n * Leaves inline edit mode.\n * @param view The view\n */\nexport function leaveInlineEdit(view: FEView): void {\n\tview.getModel().resetChanges(INLINEEDIT_UPDATEGROUPID);\n\tconst uiModel = view.getModel(\"ui\");\n\tconst registeredBindingContexts = uiModel.getProperty(\"/registeredBindingContexts\") ?? [];\n\tfor (const controlId of registeredBindingContexts) {\n\t\tconst control = Element.getElementById(controlId);\n\t\tif (control) {\n\t\t\tcontrol.unbindElement(\"ui\");\n\t\t}\n\t}\n\tuiModel.setProperty(\"/registeredBindingContexts\", []);\n}\n"],"mappings":";;;;;;;;EAKA,MAAMA,wBAAwB,GAAG,YAAY;;EAE7C;AACA;AACA;AACA;AACA;EACO,SAASC,sBAAsBA,CAACC,OAAgB,EAAEC,UAAmB,EAAQ;IACnF,MAAMC,OAAO,GAAGF,OAAO,CAACG,QAAQ,CAAC,IAAI,CAAc;IACnD,MAAMC,yBAAyB,GAAGF,OAAO,CAACG,WAAW,CAAC,4BAA4B,CAAC,IAAI,EAAE;IACzF,MAAMC,SAAS,GAAGN,OAAO,CAACO,KAAK,CAAC,CAAC;IACjC,IAAIN,UAAU,EAAE;MACf,MAAMO,IAAI,GAAG,IAAIF,SAAS,EAAE;MAC5BJ,OAAO,CAACO,WAAW,CAACD,IAAI,EAAE;QAAEE,UAAU,EAAE;MAAK,CAAC,CAAC;MAC/CV,OAAO,CAACW,WAAW,CAAC;QAAEH,IAAI;QAAEI,KAAK,EAAE;MAAK,CAAC,CAAC;MAC1CR,yBAAyB,CAACS,IAAI,CAACP,SAAS,CAAC;MACzCJ,OAAO,CAACO,WAAW,CAAC,4BAA4B,EAAEL,yBAAyB,CAAC;IAC7E,CAAC,MAAM;MACNJ,OAAO,CAACc,aAAa,CAAC,IAAI,CAAC;MAC3BZ,OAAO,CAACO,WAAW,CAClB,4BAA4B,EAC5BL,yBAAyB,CAACW,MAAM,CAAEC,EAAU,IAAKA,EAAE,KAAKV,SAAS,CAClE,CAAC;IACF;EACD;;EAEA;AACA;AACA;AACA;EAHAW,QAAA,CAAAlB,sBAAA,GAAAA,sBAAA;EAIO,SAASmB,eAAeA,CAACC,IAAY,EAAQ;IACnDA,IAAI,CAAChB,QAAQ,CAAC,CAAC,CAACiB,YAAY,CAACtB,wBAAwB,CAAC;IACtD,MAAMI,OAAO,GAAGiB,IAAI,CAAChB,QAAQ,CAAC,IAAI,CAAC;IACnC,MAAMC,yBAAyB,GAAGF,OAAO,CAACG,WAAW,CAAC,4BAA4B,CAAC,IAAI,EAAE;IACzF,KAAK,MAAMC,SAAS,IAAIF,yBAAyB,EAAE;MAClD,MAAMJ,OAAO,GAAGqB,OAAO,CAACC,cAAc,CAAChB,SAAS,CAAC;MACjD,IAAIN,OAAO,EAAE;QACZA,OAAO,CAACc,aAAa,CAAC,IAAI,CAAC;MAC5B;IACD;IACAZ,OAAO,CAACO,WAAW,CAAC,4BAA4B,EAAE,EAAE,CAAC;EACtD;EAACQ,QAAA,CAAAC,eAAA,GAAAA,eAAA;EAAA,OAAAD,QAAA;AAAA","ignoreList":[],"file":"InlineEditHelper-dbg.js"}