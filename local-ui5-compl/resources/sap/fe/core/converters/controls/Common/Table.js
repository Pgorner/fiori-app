/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/base/BindingToolkit","sap/fe/core/converters/annotations/DataField","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/IssueManager","sap/fe/core/converters/helpers/Key","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/DisplayModeFormatter","sap/fe/core/templating/EntitySetHelper","sap/fe/core/templating/FieldControlHelper","sap/fe/core/templating/PropertyHelper","sap/fe/core/templating/UIFormatters","sap/fe/core/templating/CriticalityFormatters","sap/fe/macros/formatters/TableFormatter","sap/fe/macros/internal/helpers/ActionHelper","sap/ui/core/Lib","sap/ui/core/message/MessageType","../../ManifestSettings","../../helpers/Aggregation","../../helpers/DataFieldHelper","../../helpers/ID","./Criticality","./table/StandardActions"],function(e,t,n,a,i,o,r,s,l,c,u,d,p,f,g,m,y,b,v,h,T,I,P,C,A,D,S,F){"use strict";var M={};var E=F.isInDisplayMode;var O=F.isDraftOrStickySupported;var x=F.getStandardActionPaste;var N=F.getStandardActionMoveUpDown;var w=F.getStandardActionMassEdit;var U=F.getStandardActionInsights;var $=F.getStandardActionDelete;var V=F.getStandardActionCut;var R=F.getStandardActionCreate;var L=F.getRestrictions;var j=F.getMassEditVisibility;var H=F.getInsertUpdateActionsTemplating;var k=F.getDeleteVisibility;var B=F.getCutVisibility;var G=F.getCreationRow;var q=F.generateStandardActionsContext;var K=F.StandardActionKeys;var z=S.getMessageTypeFromCriticalityType;var W=D.getTableID;var _=A.isReferencePropertyStaticallyHidden;var Q=C.AggregationHelper;var Y=P.VisualizationType;var J=P.VariantManagementType;var X=P.TemplateType;var Z=P.SelectionMode;var ee=P.OperationGroupingMode;var te=P.Importance;var ne=P.HorizontalAlign;var ae=P.CreationMode;var ie=P.ActionType;var oe=b.criticalityExpressionForIntegrationCards;var re=y.isMultiValueField;var se=m.isTimezone;var le=m.getStaticUnitOrCurrency;var ce=m.getStaticTimezone;var ue=m.getAssociatedUnitPropertyPath;var de=m.getAssociatedUnitProperty;var pe=m.getAssociatedTimezoneProperty;var fe=m.getAssociatedTextProperty;var ge=m.getAssociatedCurrencyPropertyPath;var me=m.getAssociatedCurrencyProperty;var ye=g.isStaticallyMandatory;var be=g.hasFieldControlNotMandatory;var ve=f.getRestrictionsOnProperties;var he=p.getDisplayMode;var Te=d.isPathUpdatable;var Ie=d.isPathSearchable;var Pe=d.isPathDeletable;var Ce=d.getTargetObjectPath;var Ae=d.getNonUpdatableNavigationProperties;var De=d.getHierarchyParentNavigationPropertyPath;var Se=d.getContextRelativeTargetObjectPath;var Fe=d.getContextPropertyRestriction;var Me=d.enhanceDataModelPath;var Ee=u.isTypeDefinition;var Oe=u.isProperty;var xe=u.isPathAnnotationExpression;var Ne=u.isNavigationProperty;var we=u.isAnnotationOfType;var Ue=c.replaceSpecialChars;var $e=c.generate;var Ve=s.UI;var Re=s.Entity;var Le=r.KeyHelper;var je=o.IssueType;var He=o.IssueSeverity;var ke=o.IssueCategoryType;var Be=o.IssueCategory;var Ge=i.insertCustomElements;var qe=i.Placement;var Ke=i.OverrideType;var ze=a.removeDuplicateActions;var We=a.prepareMenuActions;var _e=a.isActionNavigable;var Qe=a.getVisibilityEnablementMenuActions;var Ye=a.getMatchingManifestAction;var Je=a.getEnabledForAnnotationAction;var Xe=a.getCopyAction;var Ze=a.getAnnotationMenuActionItems;var et=a.getActionsFromManifest;var tt=a.dataFieldIsCopyAction;var nt=n.visibleExpression;var at=n.isRatingVisualizationFromDataFieldDefault;var it=n.isDataPointFromDataFieldDefault;var ot=n.isDataFieldTypes;var rt=n.isDataFieldForAnnotation;var st=n.isDataFieldForActionGroup;var lt=n.isDataFieldForActionAbstract;var ct=n.isDataField;var ut=n.hasFieldGroupTarget;var dt=n.hasDataPointTarget;var pt=n.getTargetValueOnDataPoint;var ft=n.getSemanticObjectPath;var gt=n.getDataFieldDataType;var mt=n.collectRelatedPropertiesRecursively;var yt=n.collectRelatedProperties;var bt=t.resolveBindingString;var vt=t.pathInModel;var ht=t.or;var Tt=t.not;var It=t.isConstant;var Pt=t.ifElse;var Ct=t.getExpressionFromAnnotation;var At=t.formatResult;var Dt=t.equal;var St=t.constant;var Ft=t.compileExpression;var Mt=t.and;var Et=t.EDM_TYPE_MAPPING;var Ot=function(e){e["Default"]="Default";e["Annotation"]="Annotation";e["Slot"]="Slot";e["Computed"]="Computed";return e}(Ot||{});function xt(e,t,n,a,i){const o=an(e,t,n);const r=et(n.getManifestControlConfiguration(t).actions,n,o.tableActions,i,true);const s=o.tableActions.filter(e=>e.type===ie.Copy);const l=o.tableActions.filter(e=>e.type!==ie.Copy);const c=[...l,a.create,...s,a.delete,a.massEdit,a.insights,a.creationRow,a.cut,a.paste,a.moveUp,a.moveDown].filter(e=>e!==undefined);for(const e of Object.values(r.actions)){if((e.type===ie.Default||e.type===ie.Menu)&&!e.position?.anchor){e.position={anchor:K.Create,placement:qe.Before}}}const u=Object.entries(r.actions);const d=Object.fromEntries(u.filter(e=>{let[t]=e;return t.startsWith("StandardAction::")}));const p=Object.fromEntries(u.filter(e=>{let[t]=e;return!d[t]}));const f={isNavigable:Ke.overwrite,enableOnSelect:Ke.overwrite,enableAutoScroll:Ke.overwrite,enabled:Ke.overwrite,visible:Ke.overwrite,visibleForContextMenu:Ke.overwrite,defaultValuesExtensionFunction:Ke.overwrite,command:Ke.overwrite,position:Ke.overwrite,menu:Ke.overwrite};const g=Ze(l);const m=Ye(g,r.actions);const y=Ge(g,m,f);let b=Ge(c,p,f);b=Ge(b,d,{position:Ke.overwrite});We(b,y);b=ze(b);b=Qe(b);return{actions:b,commandActions:r.commandActions}}M.getTableActions=xt;function Nt(e,t,n,a){const i=qn(e,t,n);const o=Xn(n.getManifestControlConfiguration(t).columns??{},i,n,n.getAnnotationEntityType(e),a);const r=Ge(i,o,{width:Ke.overwrite,widthIncludingColumnHeader:Ke.overwrite,importance:Ke.overwrite,horizontalAlign:Ke.overwrite,availability:Ke.overwrite,isNavigable:Ke.overwrite,settings:Ke.overwrite,formatOptions:Ke.overwrite,exportSettings:Ke.overwrite});return Zn(r,t,n)}M.getTableColumns=Nt;function wt(e){const t=e.getCustomAggregateDefinitions();const n={};t.forEach(t=>{const a=e._entityType.entityProperties.find(e=>e.name===t.qualifier);if(a){const e=t.annotations?.Aggregation?.ContextDefiningProperties??a.annotations.Aggregation?.ContextDefiningProperties;n[a.name]=e?.map(e=>e.value)??[]}});return n}const Ut=function(e,t,n){const a=new Q(e,n);if(!a.isAnalyticsSupported()){return undefined}const i=new Set;t.forEach(e=>{const n=e;if(n.unit){const e=t.find(e=>e.name===n.unit);i.add(e.relativePath)}});const o=wt(a);const r={};t.forEach(n=>{const s=n;const l=e.entityProperties.find(e=>e.name===s.relativePath);if(s.propertyInfos===undefined&&s.relativePath){let e=o[s.relativePath];let n=false;if(!e&&l&&!!a.isPropertyGroupable(l)){n=true;e=l.annotations.Aggregation?.ContextDefiningProperties?.map(e=>e.value)}if(e&&!i.has(s.relativePath)){r[s.name]={fromGroupableProperty:n,relativePath:s.relativePath};const a=[];e.forEach(e=>{if(i.has(e)){return}const n=jt(e,t);if(n){a.push(n.name)}});if(a.length){r[s.name].additionalProperties=a}}}});return r};M.getExtensionInfoFromEntityType=Ut;function $t(t,n,a,i){if(t.control.type==="AnalyticalTable"){const o=Ut(n,t.columns,a),r=new Q(n,a);if(o){t.enableAnalytics=true;t.enable$select=false;t.enable$$getKeepAliveContext=false;t.analyticsExtensions=o;ra(t);const e=r.getAllowedTransformations();t.enableBasicSearch=e?e.includes("search"):true;t.annotation.groupConditions=oa(i,t.columns,t.control.type);t.annotation.aggregateConditions=ca(i,t.columns,o);if(l.isObjectPathDraftSupported(a.getDataModelObjectPath())){if(t.requestAtLeast){t.requestAtLeast.push("HasActiveEntity")}else{t.requestAtLeast=["HasActiveEntity"]}if(l.isDraftRoot(a.getEntitySet())){t.requestAtLeast.push("HasDraftEntity")}}}else{e.error(`Aggregation not supported for this entity type: ${n.name}`)}t.control.type="GridTable"}else if(t.control.type==="ResponsiveTable"){t.annotation.groupConditions=oa(i,t.columns,t.control.type)}else if(t.control.type==="TreeTable"){const e=new Q(n,a);const i=e.getAllowedTransformations();t.enableBasicSearch=i?i.includes("search"):true;t.enable$$getKeepAliveContext=true;t.annotation.changeSiblingForRootsSupported=n?.annotations.Hierarchy?.[`RecursiveHierarchyActions#${t.control.hierarchyQualifier??""}`]?.ChangeSiblingForRootsSupported??true;t.annotation.allowDropBetweenNodes=!!n.annotations.Hierarchy?.[`RecursiveHierarchyActions#${t.control.hierarchyQualifier??""}`]?.ChangeNextSiblingAction;if(l.isDraftRoot(a.getEntitySet())){if(t.requestAtLeast){t.requestAtLeast.push("HasDraftEntity")}else{t.requestAtLeast=["HasDraftEntity"]}}}if(t.control.enableUploadPlugin){const e=a.getAnnotationEntityType().annotations?.UI?.MediaResource?.Stream?.$target;if(!e){throw"UI.MediaResource annotation with Stream property missing"}const n=t.actions.find(e=>e.key===K.Create);t.annotation.uploadTable={stream:e.name,fileName:e.annotations.Core?.ContentDisposition?.Filename?.path,fileNameMaxLength:e.annotations.Core?.ContentDisposition?.Filename?.$target?.maxLength,acceptableMediaTypes:e.annotations.Core?.AcceptableMediaTypes,maxLength:e.maxLength,uploadAction:n}}}M.updateTableVisualizationForType=$t;function Vt(e,t,n,a){const i=t.getAnnotationEntityType(e);const o=[];function r(e){if(e&&!o.includes(e)&&e.indexOf("/")!==0){o.push(e)}}function s(e){if(e?.length){e.forEach(r)}}const c=(n||"").split(",");const u=c.filter(function(e){return i.resolvePath(e)});const d=(i.annotations.Common?.SemanticKey||[]).map(e=>e.value);const p=t.getEntitySet()?.annotations?.Capabilities;const f=l.getAlternateAndSecondaryKeys(i,t.getEntitySet());if(a){s(a.RequestAtLeast?.map(e=>e.value))}s(Rt(e,i));s(u);s(d);s(f);if(p){r(p.DeleteRestrictions?.Deletable?.path);r(p.UpdateRestrictions?.Updatable?.path)}return o}M.createRequestedProperties=Vt;function Rt(e,t){const n=[];e.forEach(function(e){if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&!e.Inline&&!e.Determining&&xe(e.NavigationAvailable)){const a=e.NavigationAvailable.path;if(t.resolvePath(a)){n.push(a)}}});return n}function Lt(e,t){const n=e.getManifestWrapper();if(t&&n.getNavigationConfiguration(t)){const e=n.getNavigationConfiguration(t);if(Object.keys(e).length>0){return t}}const a=e.getDataModelObjectPath();const i=e.getContextPath();const o=n.getNavigationConfiguration(i);if(o&&Object.keys(o).length>0){return i}return a.targetEntitySet?a.targetEntitySet.name:a.startingEntitySet.name}M.getNavigationTargetPath=Lt;function jt(e,t){return t.find(t=>{const n=t;return n.propertyInfos===undefined&&n.relativePath===e})}function Ht(e,t){const n=e.getConverterContextFor(e.getContextPath()).getDataModelObjectPath();t.forEach(e=>{const a=e;if(a.propertyInfos===undefined&&a.relativePath){const e=Me(n,a.relativePath);const i=e.targetObject;if(i){kt(i,e,t,a);const n=pe(i);const o=i?.annotations?.Common?.Timezone;if(n){const e=jt(n.name,t);a.timezone=e?.name}else if(o){a.timezoneText=o.toString()}const r=he(i),s=i.annotations.Common?.Text;if(xe(s)&&r!=="Value"){const e=jt(s.path,t);if(e&&e.name!==a.name){a.textArrangement={textProperty:e.name,mode:r};if(!e.exportSettings){e.exportSettings={type:"String"}}}}}}})}M.updateLinkedProperties=Ht;function kt(e,t,n,a){const i=ge(e)||ue(e);if(i){const e=Me(t,i);const o=Se(e);if(o){const e=jt(o,n);a.unit=e?.name}}else{const t=e?.annotations?.Measures?.ISOCurrency||e?.annotations?.Measures?.Unit;if(t){a.unitText=`${t}`}}}function Bt(e){const t=e.getAnnotationEntityType()?.annotations?.UI?.HeaderInfo?.Title?.Value?.path;const n=e.getAnnotationEntityType()?.annotations?.Common?.SemanticKey;const a=e?.getAnnotationEntityType()?.annotations?.UI?.HeaderInfo?.TypeName;const i=[];if(n){n.forEach(function(e){i.push(e.value)})}return{headerInfoTitlePath:t,semanticKeyColumns:i,headerInfoTypeName:a}}function Gt(e,t,n,a){const{presentationVariantAnnotation:i,isCondensedTableLayoutCompliant:o,selectionVariantAnnotation:r}=a??{};const s=wa(e,t,n,o,r);const{navigationPropertyPath:l}=fa(t);const c=Lt(n,l);const u=n.getManifestWrapper().getNavigationConfiguration(c);const d=Nt(e,t,n,u);const p=Kt(e,n);const f=Bt(n);const g=ua(e,t,n,s,u);const m=da(e,t,n,s,d,u,g,i);const y=xt(e,t,n,g.standardActions,u);const b=Wt(p,n);let v=s.header;v??=m.title===""?undefined:m.title;const h={type:Y.Table,annotation:m,control:s,actions:y.actions,commandActions:y.commandActions,columns:d,operationAvailableMap:JSON.stringify(p),operationAvailableProperties:b,headerInfoTitle:f.headerInfoTitlePath,semanticKeys:f.semanticKeyColumns,headerInfoTypeName:f.headerInfoTypeName,enable$select:true,enable$$getKeepAliveContext:true,header:v,headerVisible:s.headerVisible,requestAtLeast:Vt(e,n,b,i),handlePatchSent:n.getManifestWrapper().getTemplateType()!==X.ListReport};Ht(n,d);$t(h,n.getAnnotationEntityType(e),n,i);return h}M.createTableVisualization=Gt;function qt(e,t){const n=wa(undefined,"",e,false);const a=un({},e.getEntityType(),[],e,n.type,n.creationMode,{});const i=Kt(undefined,e);const o=Bt(e);const r=Lt(e,"");const s=e.getManifestWrapper().getNavigationConfiguration(r);const l=ua(undefined,"",e,n,s);const c={type:Y.Table,annotation:da(undefined,"",e,n,t?[]:a,s,l),control:n,actions:[],columns:a,operationAvailableMap:JSON.stringify(i),operationAvailableProperties:Wt(i,e),headerInfoTitle:o.headerInfoTitlePath,semanticKeys:o.semanticKeyColumns,headerInfoTypeName:o.headerInfoTypeName,enable$select:true,enable$$getKeepAliveContext:true,header:n.header,headerVisible:n.headerVisible,handlePatchSent:e.getManifestWrapper().getTemplateType()!==X.ListReport};Ht(e,a);$t(c,e.getEntityType(),e);return c}M.createDefaultTableVisualization=qt;function Kt(e,t){return h.getOperationAvailableMap(e,"table",t)}function zt(e){const t=L(e);const n=e.getEntitySet();const a=t.isUpdatable;const i=!It(a.expression)&&a.navigationExpression._type==="Unresolvable";const o=n?.annotations.Capabilities?.UpdateRestrictions?.Updatable;const r=xe(o)&&o.path;return i?r:""}function Wt(e,t){const n=new Set;for(const t in e){const a=e[t];if(a===null){n.add(t)}else if(typeof a==="string"){n.add(a)}}if(n.size){const e=t.getEntityType();const a=e.annotations?.UI?.HeaderInfo?.Title?.Value?.path;if(a){n.add(a)}}return Array.from(n).join(",")}function _t(e,t,n){const a=[];e.forEach(e=>{if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&e?.ActionTarget?.isBound&&t===e?.ActionTarget.sourceEntityType||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&e.RequiresContext&&e?.Inline?.valueOf()!==true){if(typeof e.annotations?.UI?.Hidden?.valueOf()==="object"){a.push(Dt(Yt(e,n),false))}}});return a}function Qt(e){let t;if(xe(e)){t=e.path}else{t=e}return t}function Yt(e,t){const n=e.annotations?.UI?.Hidden;let a=Qt(n);if(typeof a==="object"){return St(false)}else if(typeof a==="string"){if("visible"in e){a=a.substring(1,a.length-1)}if(a.indexOf("/")>0){const e=a.split("/");const n=e[0];if(Ne(t?.targetObject)&&t.targetObject.partner===n){return vt(e.slice(1).join("/"))}else{return St(true)}}else{return St(false)}}return St(true)}function Jt(e,t,n){return Object.keys(n).some(a=>{if(a===e){if(t?.ActionTarget?.isBound||t?.RequiresContext){n[e].requiresSelection=true}return true}return false})}function Xt(e,t,n){return e.some(e=>{if((e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&e?.Inline?.valueOf()!==true&&(e.annotations?.UI?.Hidden?.valueOf()===false||e.annotations?.UI?.Hidden?.valueOf()===undefined)){if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){const a=$e(["DataFieldForAction",e.Action]);if(Jt(a,e,t)){return false}return e?.ActionTarget?.isBound&&n===e?.ActionTarget.sourceEntityType}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(Jt(`DataFieldForIntentBasedNavigation::${e.SemanticObject}::${e.Action}`,e,t)){return false}return e.RequiresContext}}return false})}function Zt(e){const t=Object.keys(e).reduce((t,n)=>{const a=e[n];if(!a.menu){t.push(a)}else{t=[...t,...a.menu.filter(e=>typeof e!=="string")]}return t},[]);return!!t.find(e=>e.requiresSelection&&(e.visible===undefined||e.visible?.toString()==="true"))}function en(e){const t=[];if(e){Object.keys(e).forEach(n=>{const a=e[n];if(a.requiresSelection===true&&a.visible!==undefined){if(typeof a.visible==="string"){t.push(bt(a?.visible?.valueOf()))}}})}return t}function tn(e){const t=Pe(e.getDataModelObjectPath());const n=Te(e.getDataModelObjectPath());return{isDeletable:!(It(t)&&t.value===false),isUpdatable:!(It(n)&&n.value===false)}}M.getCapabilityRestriction=tn;function nn(e,t,n,a,i,o){let r=arguments.length>6&&arguments[6]!==undefined?arguments[6]:St(false);let s=arguments.length>7&&arguments[7]!==undefined?arguments[7]:St(false);const l=n.getManifestControlConfiguration(t);const c=l.tableSettings?.type;let u=l.tableSettings?.selectionMode;if(c==="TreeTable"&&!u){return Z.Multi}if(!e||u===Z.None){if(i.isDeletable&&o){return Ft(Pt(o,St(Z.Multi),St(Z.None)))}return Z.None}if(u===Z.ForceMulti){return Z.Multi}else if(u===Z.ForceSingle){return Z.Single}let d=[],p=[];const f=et(n.getManifestControlConfiguration(t).actions,n,[],undefined,false);let g,m;if(n.getTemplateType()===X.ObjectPage){g=Pe(n.getDataModelObjectPath());m=g?Ft(g,true):g}const y=!It(r)||r.value!==false;if(!u||u===Z.Auto){u=Z.Multi}if(y){u=u===Z.Single?Z.Single:Z.Multi}if(Xt(e,f.actions,n.getEntityType())||Zt(f.actions)){return u}d=_t(e,n.getEntityType(),n.getDataModelObjectPath());p=en(f.actions);if(d.length===0&&p.length===0&&(s||o||y)){if(!a){if(i.isDeletable||m!=="false"||y){const e=ht(s||true,o||true,r);return Ft(Pt(Mt(Ve.IsEditable,e),St(u),St(Z.None)))}else{return Ft(Pt(s,St(Z.Single),St(Z.None)))}}else if(y){return u}else if(i.isDeletable&&o){return Ft(Pt(o,St(u),St(Z.None)))}else{return Z.None}}else if(!a){if(i.isDeletable||m!=="false"||y){const e=Pt(y&&!i.isDeletable,r,St(true));return Ft(Pt(Mt(Ve.IsEditable,e),St(u),Pt(ht(...d.concat(p)),St(u),St(Z.None))))}else{return Ft(Pt(ht(...d.concat(p)),St(u),St(Z.None)))}}else if(i.isDeletable||y){return u}else{return Ft(Pt(ht(...d.concat(p),r),St(u),St(Z.None)))}}M.getSelectionMode=nn;function an(e,t,n){const a=[];const i=Xe(e.filter(e=>tt(e)));if(i){a.push({type:ie.Copy,annotationPath:n.getEntitySetBasedAnnotationPath(i.fullyQualifiedName),key:Le.generateKeyFromDataField(i),visible:Ft(nt(i,n)),visibleForContextMenu:Ft(on(i,n)),text:i.Label?.toString()??T.getResourceBundleFor("sap.fe.core").getText("C_COMMON_COPY"),isNavigable:true})}e.filter(e=>!tt(e)).forEach(e=>{if(lt(e)&&e.Inline?.valueOf()!==true&&e.Determining?.valueOf()!==true){const t=rn(e,n);if(t){a.push(t)}}else if(st(e)){const t=rn(e,n);if(t){a.push(t)}}});return{tableActions:a}}function on(e,t){return Mt(nt(e,t),Dt(vt("contextmenu/inactiveContext","internal"),false))}function rn(e,t){switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":const n={type:ie.DataFieldForAction,annotationPath:t.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:Le.generateKeyFromDataField(e),visible:Ft(nt(e,t)),visibleForContextMenu:Ft(on(e,t)),isNavigable:true};const a=t.getEntityType().fullyQualifiedName;if(Fa(e,a)){n.enabled=Je(t,e.ActionTarget,true)}return n;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":return{type:ie.DataFieldForIntentBasedNavigation,annotationPath:t.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:Le.generateKeyFromDataField(e),visible:Ft(nt(e,t)),visibleForContextMenu:Ft(on(e,t))};case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":return{type:ie.Menu,key:Le.generateKeyFromDataField(e),id:Le.generateKeyFromDataField(e),text:e.Label?.toString(),visible:Ft(nt(e,t)),visibleForContextMenu:Ft(on(e,t)),menu:e.Actions.map(e=>rn(e,t))};default:return}}function sn(e,t,n){let a=I.None;if(e){if(typeof e==="object"){a=Ct(e)}else{a=z(e)}}return At([a,vt(`filteredMessages`,"internal"),t&&Re.HasActive,t&&Re.IsActive,`${t}`,vt("@$ui5.fe.contextPath"),Ve.IsInactive],v.rowHighlighting,n)}function ln(t,n,a,i,o){const r=i?.create||i?.detail;const s=a.getManifestControlConfiguration(o);const l=s&&s.tableSettings||{};if(r?.outbound&&r.outboundDetail&&i?.create){return{mode:"External",outbound:r.outbound,outboundDetail:r.outboundDetail,navigationSettings:i}}if(a.getTemplateType()===X.ListReport&&![ae.NewPage,ae.External,ae.CreationDialog].includes(n.creationMode)){e.warning(`Creation mode '${n.creationMode}' can not be used within the List Report. Instead, the default mode "NewPage" is used.`);n.creationMode=ae.NewPage}else if(a.getTemplateType()!==X.ListReport&&n.type==="TreeTable"&&![ae.NewPage,ae.Inline,ae.CreationDialog].includes(n.creationMode)){e.warning(`Creation mode '${n.creationMode}' can not be used with a Tree Table. Instead, the default mode "NewPage" is used.`);n.creationMode=ae.NewPage}let c;if(t){const e=a.getEntitySet()?.annotations;const t=e?.Common,i=e?.Session;c=t?.DraftRoot?.NewAction||i?.StickySessionSupported?.NewAction;if(n.creationMode===ae.CreationRow&&c){throw Error(`Creation mode '${ae.CreationRow}' can not be used with a custom 'new' action (${c})`)}if(r?.route){return{mode:n.creationMode,append:n.createAtEnd,newAction:c?.toString(),navigateToTarget:n.creationMode===ae.NewPage?r.route:undefined}}}if(n.creationMode===ae.NewPage){if(a.getTemplateType()===X.ListReport){e.error("The creation mode 'NewPage' is used but the navigation configuration to the sub page is missing.")}else{n.creationMode=ae.Inline;if(l.creationMode?.createAtEnd===undefined){n.createAtEnd=false}e.info("The creation mode was changed from 'NewPage' to 'Inline' due to missing navigation configuration to the sub page.")}}return{mode:n.creationMode,append:n.createAtEnd,newAction:c?.toString()}}const cn=function(e,t,n,a,i){let o;let r=St(I.None);const s=t.getEntityType();const c=e?.annotations?.UI?.Criticality;if(n&&e){const e=n.display?.target||n.detail?.outbound;const u=t.getEntitySet();r=sn(c,!!l.getDraftRoot(u)||!!l.getDraftNode(u),s);if(e){o={type:"Outbound",navigationTarget:e}}if(!e&&n.detail?.route){const e=l.getDraftRoot(u)!==undefined||l.getDraftNode(u)!==undefined;o={type:"Navigation",routePath:n.detail.route,targetPath:a,checkEditable:e,recreateContext:i==="AnalyticalTable"}}}const u=At([vt("/deepestPath","internal")],v.navigatedRow,s);return{navigationInfo:o,action:o?"Navigation":undefined,rowHighlighting:Ft(r),rowNavigated:Ft(u),rowCriticalityForInsights:c?oe(c):undefined,visible:Ft(Tt(Ve.IsInactive))}};const un=function(e,t,n,a,i,o,r,s){if(n===undefined){n=[]}let l=[];const c=n;const u=new Q(t,a);const d=u.getGroupableProperties();if(i==="AnalyticalTable"&&u.isAnalyticsSupported()&&d){l=d.map(e=>e.$target).filter(e=>e!==undefined).map(e=>fe(e)).filter(e=>e&&!u.isPropertyGroupable(e)).map(e=>e?.name).filter(e=>e!==undefined)}t.entityProperties.forEach(t=>{const d=n.some(e=>e.name===t.name);if(!t.targetType&&!d&&!l.includes(t.name)){const l=yt(t.name,t,a,true,i);const d=Object.keys(l.properties);const p=Object.keys(l.additionalProperties);d.forEach(e=>{Ra(r,l,e)});const f=dn(t,a.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),t.name,true,true,u,a,r,s,o,l);if(d.length>0){f.propertyInfos=d;if(l.exportSettings.dataPointTargetValue){f.exportDataPointTargetValue=l.exportSettings.dataPointTargetValue}d.forEach(t=>{e[t]=l.properties[t].annotationProperty})}yn(n,e,f);if(p.length>0){f.additionalPropertyInfos=p;p.forEach(t=>{e[t]=l.additionalProperties[t]})}c.push(f)}if(he(t)==="Description"){s?.nonSortableProperties.push(t.name);if(xe(t?.annotations?.Common?.Text)){c.push(dn(t,a.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),t.name,false,false,u,a,r,s,o))}}});const p=An(e,c,a,t,r,o,s);return c.concat(p)};M.getColumnsFromEntityType=un;const dn=function(e,t,n,a,i,o,r,s,c,u,d,p){let f,g;const m=ft(r,e);const y=_(e);const b=e.name?En(e.name,true,false):undefined;const v=b!=e.name;const h=In(e,v);const T=gt(e);const I=Va(e,T);const P=s[n]==="Description";const C=(!y||P)&&!c?.nonSortableProperties.includes(n);const A=!P&&!c?.nonFilterableProperties.includes(n);const D={className:e.type||T,formatOptions:I.formatOptions,constraints:I.constraints};let S=null;if(bn(e)){S=pn(e,d)}const F=!i||y||s[n]?"Hidden":"Adaptation";const M=Sa(n,r);if(p){f=p;g="DataField::"+Ue(p);n=p}else{f=a?n:`Property::${n}`;g=(a?"DataField::":"Property::")+Ue(n)}const E={key:g,type:Ot.Annotation,label:h,groupLabel:v?In(e):undefined,group:v?b:undefined,annotationPath:t,semanticObjectPath:m,availability:F,name:f,relativePath:n,sortable:C,filterable:A,isGroupable:o.isAnalyticsSupported()?!!o.isPropertyGroupable(e):C,isKey:e.isKey,exportSettings:S,caseSensitive:Nn(r),typeConfig:D,importance:Gn(r,e.annotations?.UI?.DataFieldDefault),required:Yn(r,e,u),additionalLabels:M};Da(e,E);kn(e,E);if(o.isAnalyticsSupported()&&l.isObjectPathDraftSupported(r.getDataModelObjectPath())&&(n==="HasActiveEntity"||n==="HasDraftEntity")){const e=E;e.extension={technicallyAggregatable:false,technicallyGroupable:true};return e}else{return E}};const pn=function(e,t){let n,a,i,o,r,s,l,c;const u=t?Object.keys(t.properties):[];if(t&&u?.length===1){e=t.properties[u[0]].annotationProperty}const d=gt(e);if(Oe(e)){n=de(e);l=me(e);a=pe(e);i=le(e);o=ce(e);s=se(e);c=e.scale}n=t?.exportSettings?.unitProperty??n?.name??l?.name;a=t?.exportSettings?.timezoneProperty??a?.name;c=t?.exportSettings?.scale??c;const p=pa(d,s,!!l,t?.exportSettings);if(a||p==="DateTime"&&!o){r=false}const f={type:p,inputFormat:fn(d),delimiter:gn(d),scale:c,unitProperty:n,unit:t?.exportSettings.unit??i,timezoneProperty:a,timezone:t?.exportSettings.timezone??o?.toString(),template:t?.exportSettings.template,wrap:t?.exportSettings.wrap,utc:r};if(f.unitProperty||f.unit){f.autoScale=true}return mn(f)};const fn=function(e){return e==="Edm.Date"?"YYYY-MM-DD":undefined};const gn=function(e){return e==="Edm.Int64"?true:undefined};const mn=function(e){for(const t in e){if(e[t]===undefined){delete e[t]}}return e};function yn(e,t,n,a){const i=e.filter(e=>e.propertyInfos?.includes(n.relativePath)||a&&e.propertyInfos?.includes(a));if(i?.length===1&&(t[n.relativePath]||a&&t[a])&&i[0].propertyInfos?.length===1){n.label=i[0].label;n.tooltip=i[0].tooltip}}function bn(e){let t,n;const a=e.annotations.UI?.DataFieldDefault;if(Oe(e)){if(_(e)){return false}t=a?.$Type}else if(_(e)){return false}else{n=e;t=n.$Type;if(t==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&n.Target?.$target?.$Type){t=n.Target?.$target?.$Type;return t!==undefined&&!"com.sap.vocabularies.UI.v1.ChartDefinitionType".includes(t)}else if(n.Value?.$target?.annotations?.Core?.MediaType?.term==="Org.OData.Core.V1.MediaType"&&n.Value?.$target?.annotations?.Core?.isURL!==true){return false}}return t?!["com.sap.vocabularies.UI.v1.DataFieldForAction","com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation","com.sap.vocabularies.UI.v1.DataFieldForActionGroup"].includes(t):true}const vn=function(e){switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":return!!e.Inline;case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":return true;default:return false}};const hn=function(e){const t=e.targetObject;let n;if(t){switch(t.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataPointType":n=t.Value.$target;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":if(t?.Target?.$target?.$Type==="com.sap.vocabularies.UI.v1.DataPointType"){n=t.Target.$target?.Value.$target}break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForAction":default:n=undefined}}const a=St(false);const i=St(false);return Mt(...[Tt(Dt(Ct(t?.annotations?.UI?.Hidden),true)),Pt(!!n,n&&Tt(Dt(Ct(n.annotations?.UI?.Hidden),true)),true),ht(Tt(a),i)])};M._getVisibleExpression=hn;const Tn=function(e){const t=[];if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target?.$target?.$Type==="com.sap.vocabularies.UI.v1.FieldGroupType"){if(e?.annotations?.UI?.Hidden){return Ft(Tt(Dt(Ct(e.annotations.UI.Hidden),true)))}else{e.Target.$target.Data?.forEach(e=>{t.push(hn({targetObject:e}))});return Ft(Pt(ht(...t),St(true),St(false)))}}else{return undefined}};const In=function(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!e){return undefined}if(Oe(e)||Ne(e)){const t=e.annotations?.UI?.DataFieldDefault;if(t&&!t.qualifier&&t.Label){return t.Label?.toString()}return e.annotations.Common?.Label?.toString()??e.name}else if(ot(e)){if(!!t&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"){return e?.Label?.toString()}return e?.Label?.toString()??Ft(Ct(e.Value?.$target?.annotations?.Common?.Label,[],e.Value?.$target?.name))}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){return e.Label?.toString()??Ft(Ct(e.Target?.$target?.Value?.$target?.annotations?.Common?.Label?.valueOf()))}else{return e.Label?.toString()}};const Pn=function(e){if(!e){return undefined}if(Oe(e)||e.annotations?.Common?.QuickInfo){return e.annotations?.Common?.QuickInfo?Ft(Ct(e.annotations.Common.QuickInfo)):undefined}else if(ot(e)){return e.Value?.$target?.annotations?.Common?.QuickInfo?Ft(Ct(e.Value.$target.annotations.Common.QuickInfo)):undefined}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){const t=e.Target?.$target;return t?.Value?.$target?.annotations?.Common?.QuickInfo?Ft(Ct(t.Value.$target.annotations.Common.QuickInfo)):undefined}else{return undefined}};function Cn(e,t){return At([vt(`semanticKeyHasDraftIndicator`,"internal"),vt(`filteredMessages`,"internal"),e,t],v.getErrorStatusTextVisibilityFormatter)}M.getRowStatusVisibility=Cn;const An=function(e,t,n,a,i,o,r){const s=[];const l={};const c=new Q(a,n);Object.keys(e).forEach(a=>{const u=e[a],d=n.getAbsoluteAnnotationPath(a),p=t.find(e=>e.name===a);const f=n.getConverterContextFor(n.getContextPath()).getDataModelObjectPath();const g=Me(f,a);if(re(g)){const p=Se(g,false,true);const f=dn(u,d,a,true,false,c,n,i,r,o,undefined,p);La(t,a,f);yn(t,e,f,a);s.push(f);l[a]=p??a}else if(p===undefined){const l=dn(u,d,a,true,false,c,n,i,r,o);La(t,a,l);yn(t,e,l);s.push(l)}else if(p.annotationPath!==d||p.propertyInfos){const p=`Property::${a}`;if(!t.some(e=>e.name===p)){const f=dn(u,d,a,false,false,c,n,i,r,o);La(t,a,f);yn(t,e,f);s.push(f);l[a]=p}else if(t.some(e=>e.name===p)&&t.some(e=>e.propertyInfos?.includes(a))){l[a]=p}}else if(i[a]==="Description"&&!p.filterable&&!r?.nonFilterableProperties.includes(a)){r?.nonSortableProperties.push(a);const e=dn(u,d,a,false,false,c,n,{},r,o);e.isGroupable=false;s.push(e)}});t.forEach(e=>{e.propertyInfos=e.propertyInfos?.map(e=>l[e]??e);e.additionalPropertyInfos=e.additionalPropertyInfos?.map(e=>l[e]??e)});return s};const Dn=function(e){if(ot(e)&&e.Value?.path){return e.Value?.path}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target?.$target?.Value?.path){return e.Target?.$target?.Value.path}else{return Le.generateKeyFromDataField(e)}};const Sn=function(e,t,n){const a=`Property_Technical::${e}`;const i=t.find(e=>e.key===a);const o=!i&&t.find(t=>t.name===e&&!t.propertyInfos);if(o){const i={key:a,type:Ot.Annotation,label:o.label,annotationPath:o.annotationPath,availability:"Hidden",name:a,relativePath:o.relativePath,sortable:false,isGroupable:false,isKey:false,exportSettings:null,caseSensitive:false,aggregatable:false,filterable:false,extension:{technicallyGroupable:true,technicallyAggregatable:true}};t.push(i);n[e]=i.name}};const Fn=function(e,t,n){const a=n.getManifestControlConfiguration(t)?.columns;const i=a&&Object.keys(a);return i&&!!i.find(function(t){return t===e&&a[t].showDataFieldsLabel})};const Mn=function(e){let t="";switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":t=e?.Value?.path;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":t=e?.Target?.value;break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldWithActionGroup":t=Le.generateKeyFromDataField(e);break}return t};const En=function(e,t,n){const a=t?e.lastIndexOf("/"):e.indexOf("/");if(a===-1){return e}return n?e.substring(a+1,e.length):e.substring(0,a)};const On=function(e,t){if(ot(e)&&xe(e.Value)){const n=Me(t.getDataModelObjectPath(),e.Value.path);return re(n)}else{return false}};const xn=function(e,t,n,a){return!n.includes(t)&&((e.$Type==="com.sap.vocabularies.UI.v1.DataField"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation")&&Object.keys(a.properties).some(e=>{const t=_(a.properties[e].annotationProperty);return!t&&!n.includes(e)})||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithAction")};const Nn=function(e){const t=wn(e);return Array.isArray(t)?!t.includes("tolower"):true};M.isFilteringCaseSensitive=Nn;function wn(e){const t=e.getEntitySet();if(u.isEntitySet(t)){return t.annotations.Capabilities?.FilterFunctions??e.getEntityContainer().annotations.Capabilities?.FilterFunctions}return undefined}function Un(e){return e===undefined?undefined:{textLinesEdit:4,...e}}function $n(e,t){const n=[];let a=false;for(let i=0;i<e.length;i++){n.push(e[i].value);if(e[i].value===t){a=true}}return{values:n,semanticKeyFound:a}}function Vn(e,t){let n=false;let a;if(e&&e.length>=1&&t&&t.length>=1){for(let i=0;i<e.length;i++){if([e[i]].some(e=>t.includes(e))){n=true;a=e[i];break}}}return{semanticKeyHasPropertyInFieldGroup:n,fieldGroupPropertyPath:a}}function Rn(e,t){const n=[];let a={semanticKeyHasPropertyInFieldGroup:false,fieldGroupPropertyPath:undefined};if(e&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target?.$target?.$Type==="com.sap.vocabularies.UI.v1.FieldGroupType"){e.Target.$target.Data?.forEach(e=>{if((e.$Type==="com.sap.vocabularies.UI.v1.DataField"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")&&e.Value){n.push(e.Value.path)}a=Vn(t,n)})}return{semanticKeyHasPropertyInFieldGroup:a.semanticKeyHasPropertyInFieldGroup,propertyPath:a.fieldGroupPropertyPath}}function Ln(e,t,n){if(!t){return{}}const a=$n(t,e);const i=Rn(n,a.values);if(i.semanticKeyHasPropertyInFieldGroup){return{fieldGroupDraftIndicatorPropertyPath:i.propertyPath,fieldGroupName:e,showErrorObjectStatus:Ft(Cn(e,true))}}else if(a.semanticKeyFound){return{hasDraftIndicator:true,showErrorObjectStatus:Ft(Cn(e,false))}}return{}}function jn(e){const t=e?.annotations?.UI?.Importance;if(t&&t.includes("UI.ImportanceType/High")){return 3}if(t&&t.includes("UI.ImportanceType/Medium")){return 2}if(t&&t.includes("UI.ImportanceType/Low")){return 1}return 0}function Hn(e){const t=e?.annotations?.UI?.Importance;return t?t.split("/")[1]:te.None}function kn(e,t){const n=pt(e);if(it(e)&&typeof n==="string"&&t.exportSettings&&t.exportSettings?.unit!=="%"){t.exportDataPointTargetValue=n;t.exportSettings.template="{0}/"+n}}function Bn(e){if(e&&e.length>0){let t=-1;let n=-1;let a;for(const i of e){n=jn(i);if(n>t){t=n;a=i}}return Hn(a)}return te.None}function Gn(e,t){if(!t){return undefined}const n=e.getDataModelObjectPath().targetEntityType.annotations.Common?.SemanticKey??[];const a=sa(e);const i=[...n,...a].map(e=>e.$target?.fullyQualifiedName);let o;if(we(t,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")){const e=t.Target.$target;if(we(e,"com.sap.vocabularies.UI.v1.FieldGroupType")){const n=e.Data;if(n.some(function(e){return ot(e)&&i.includes(e.Value?.$target?.fullyQualifiedName)})){return te.High}else{if(t?.annotations?.UI?.Importance){return Hn(t)}o=n.filter(function(e){return e?.annotations?.UI?.Importance});return Bn(o)}}}return i.includes(t.Value?.$target?.fullyQualifiedName)?te.High:Hn(t)}M.getImportance=Gn;const qn=function(e,t,n){const a=n.getAnnotationEntityType(e),i=[],o={},r={},s=ve(n.getEntitySet()),l=n.getManifestControlConfiguration(t),c=Ua(n,l),u=n.getManifestWrapper().getSapFeManifestConfiguration()?.macros?.table?.defaultCreationMode==="InlineCreationRows"?ae.InlineCreationRows:undefined,d=l?.tableSettings?.creationMode?.name??u??ae.Inline;const p=n.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[n.getEntityType()])[0];if(e){const a=n.getConverterContextFor(Ce(n.getDataModelObjectPath()));e.forEach(e=>{if(!vn(e)){return}let l=null;const u=ot(e)&&e.Value?.$target?.fullyQualifiedName?ft(n,e):undefined;const f=Mn(e);const g=mt(e,n,c);const m=Object.keys(g.properties);const y=Object.keys(g.additionalProperties);const b=f?En(f,true,false):undefined;const v=b!=f;const h=In(e,v);const T=Dn(e);const I=b?b.includes(`@${"com.sap.vocabularies.UI.v1.FieldGroup"}`):false;const P=I?Fn(T,t,n):false;const C=gt(e);const A=Un(Ln(T,p,e));const D=Me(n.getDataModelObjectPath(),f);const S=D.targetEntityType.navigationProperties;const F=S.filter(e=>!e.isCollection&&e.targetType.annotations.Common?.SAPObjectNodeType?.Name==="BusinessSituation");const M=F.length>=1?F[0]:undefined;if(M&&A){A.hasSituationsIndicator=true}let E;if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target?.$target?.$Type==="com.sap.vocabularies.UI.v1.FieldGroupType"){E=Tn(e)}const O=On(e,a);if(!O&&bn(e)){l=pn(e,g)}let x;if(C){x=Va(e,C)}const N={className:C,formatOptions:{...A,...x?.formatOptions},constraints:{...x?.constraints}};const w={};if(!C||!N){w.widthCalculation=null}const U=!O&&xn(e,f,s.nonSortableProperties,g);const $=_(e)?"Hidden":"Default";const V={key:Le.generateKeyFromDataField(e),type:Ot.Annotation,label:h,groupLabel:v?In(e):undefined,group:v?b:undefined,FieldGroupHiddenExpressions:E,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),semanticObjectPath:u,availability:$,name:T,showDataFieldsLabel:P,required:Yn(n,e,d),relativePath:f,sortable:U,propertyInfos:m.length?m:undefined,additionalPropertyInfos:y.length>0?y:undefined,exportSettings:l,width:e.annotations?.HTML5?.CssDefaults?.width?.valueOf()||undefined,importance:Gn(n,e),isNavigable:true,formatOptions:A,caseSensitive:Nn(n),typeConfig:N,visualSettings:w,timezoneText:l?.timezone,isPartOfLineItem:true,isMultiValue:O};const R=Pn(e)??h;if(R){V.tooltip=R}if(g.exportSettings.dataPointTargetValue){V.exportDataPointTargetValue=g.exportSettings.dataPointTargetValue}i.push(V);m.forEach(t=>{o[t]=g.properties[t].annotationProperty;if(O){s.nonSortableProperties.push(t)}Ra(r,g,t);if(g.properties[t].displayModeOfPropertyUsedAsDescription==="Description"){$a(n,D,e,o,f,s)}});y.forEach(e=>{o[e]=g.additionalProperties[e]})})}return un(o,a,i,n,c,d,r,s)};const Kn=function(e,t,n,a){let i;if(e){i=e.map(function(e){const i=t.find(function(t){return t.relativePath===e&&t.propertyInfos===undefined});if(i){return i.name}else{const i=An({[e]:a.resolvePath(e)},t,n,a,{});t.push(i[0]);return i[0].name}})}return i};const zn=function(e,t,n){const a=t.Data;return a.some(function(t){if(ct(t)&&t?.Value?.$target.type!=="Edm.Boolean"){return ye(t)||n===ae.InlineCreationRows&&la(t.Value.$target.fullyQualifiedName,e)}})};const Wn=function(e,t,n){const a=t.Target.$target;const i=be(t);if(ut(t)){if(zn(e,a,n)){return true}const t=a.Data;return t.some(t=>Yn(e,t,n))}if(dt(t)&&a.Visualization!=="UI.VisualizationType/Rating"){if(i){return false}if(ye(t)){return true}return Qn(e,a,n)}return false};const _n=function(e,t,n){return t.type!=="Edm.Boolean"&&!at(t)&&(ye(t)||n===ae.InlineCreationRows&&la(t.fullyQualifiedName,e))};const Qn=function(e,t,n){return ye(t)||n===ae.InlineCreationRows&&la(t.Value.$target.fullyQualifiedName,e)};const Yn=function(e,t,n){const a=n||ae.Inline;if(e.getTemplateType()===X.ListReport||e.getTemplateType()===X.AnalyticalListPage){return undefined}if(Oe(t)){return _n(e,t,a)?Ft(Ve.IsEditable):undefined}if(rt(t)){return Wn(e,t,a)?Ft(Ve.IsEditable):undefined}if(ct(t)&&t.Value?.$target?.type!=="Edm.Boolean"){return ye(t)||a===ae.InlineCreationRows&&la(t.Value.$target.fullyQualifiedName,e)?Ft(Ve.IsEditable):undefined}return undefined};const Jn=function(e,t){if(t?.length){e=t}if(e){return e.map(t=>`{${e.indexOf(t)}}`).join(`${"\n"}`)}return undefined};const Xn=function(e,t,n,a,i){const o={};function r(e,n){return t.some(e=>e.key===n)}function s(e){return e.type===Ot.Slot}function l(e){return e.type===undefined&&!!e.template}function c(e,t){const a=ve(n.getEntitySet());e.forEach(e=>{t.forEach(t=>{if(t.name===e){t.sortable=!a.nonSortableProperties.includes(e.replace("Property::",""));t.isGroupable=t.sortable;t.filterable=!a.nonFilterableProperties.includes(e.replace("Property::",""));t.isPartOfCustomColumn=true}})})}for(const u in e){const d=e[u];Le.validateKey(u);const p={key:u,widthIncludingColumnHeader:d.widthIncludingColumnHeader,width:d.width||undefined,position:{anchor:d.position?.anchor,placement:d.position===undefined?qe.After:d.position.placement},caseSensitive:Nn(n)};if(r(d,u)){const e={...p,importance:d?.importance,horizontalAlign:d?.horizontalAlign,availability:d?.availability,type:Ot.Annotation,isNavigable:r(d,u)?undefined:_e(d,i,true),settings:d.settings,formatOptions:Un(d.formatOptions),exportSettings:ja(d?.exportSettings,t,n,a,undefined,u)};o[u]=e}else{const e=Kn(d.properties,t,n,a);const i=n.fetchTextFromMetaModel(d.tooltip),r=n.fetchTextFromMetaModel(d.header);const f=e?ja(d?.exportSettings,t,n,a,e):null;const g={...p,header:r,importance:d?.importance||te.None,horizontalAlign:d?.horizontalAlign||ne.Begin,availability:d?.availability||"Default",template:d.template,propertyInfos:e,exportSettings:f,id:`CustomColumn::${u}`,name:`CustomColumn::${u}`,formatOptions:{textLinesEdit:4},isGroupable:false,isNavigable:false,sortable:false,visualSettings:{widthCalculation:null},tooltip:i?i:r,properties:d.properties,required:d.required&&n.getTemplateType()!==X.ListReport&&n.getTemplateType()!==X.AnalyticalListPage?Ft(Ve.IsEditable):undefined};if(e){c(e,t)}if(s(d)){const e={...g,type:Ot.Slot};o[u]=e}else if(l(d)){const e={...g,type:Ot.Default};o[u]=e}else{const e=`The annotation column '${u}' referenced in the manifest is not found`;n.getDiagnostics().addIssue(Be.Manifest,He.Low,e,ke,ke?.AnnotationColumns?.InvalidKey)}}}return o};function Zn(e,t,n){const a=n.getManifestControlConfiguration(t);const i=Ua(n,a);if(!["GridTable","TreeTable","AnalyticalTable"].includes(i)){return e}const o=e.find(e=>e.formatOptions?.hasSituationsIndicator!==undefined&&e.formatOptions?.hasSituationsIndicator===true);if(o?.formatOptions){o.formatOptions.hasSituationsIndicator=false;const t={key:"situationsIndicator",name:"situationsIndicator",propertyKey:o.name,isSituationsIndicator:true,availability:"Default",label:"{sap.fe.i18n>C_SITUATIONS_STATUS_COLUMN_LABEL_TOOLTIP}",tooltip:"{sap.fe.i18n>C_SITUATIONS_STATUS_COLUMN_LABEL_TOOLTIP}",type:Ot.Computed,formatOptions:null,exportSettings:null,clipboardSettings:null,propertyInfos:undefined,caseSensitive:false};const n=e.findIndex(e=>e.availability!=="Hidden");e.splice(n+1,0,t)}const r=e.filter(e=>e.formatOptions?.hasDraftIndicator===true);if(r.length&&n.getTemplateType()===X.ListReport&&(l.isDraftNode(n.getEntitySet())||l.isDraftRoot(n.getEntitySet()))){r.forEach(e=>{if(e?.formatOptions){e.formatOptions.hasDraftIndicator=false}});const t={key:"draftStatus",name:"draftStatus",propertyKey:r[0].name,isDraftIndicator:true,availability:"Default",label:"{sap.fe.i18n>C_DRAFT_STATUS_COLUMN_LABEL_TOOLTIP}",tooltip:"{sap.fe.i18n>C_DRAFT_STATUS_COLUMN_LABEL_TOOLTIP}",type:Ot.Computed,formatOptions:null,exportSettings:null,caseSensitive:false};let n=0;if(o){n=e.findIndex(e=>e.isSituationsIndicator===true)-1}else{n=e.findIndex(e=>e.availability!=="Hidden")}e.splice(n+1,0,t)}return e}M.addComputedColumns=Zn;function ea(e,t,n){const a=t.getManifestWrapper();const i=t.getManifestControlConfiguration(e);const o=a.getVariantManagement();const r=[];const s=n.type==="AnalyticalTable";const l=n.type==="ResponsiveTable";if(i?.tableSettings?.personalization!==undefined){const e=i.tableSettings.personalization;if(e===true){switch(n.type){case"AnalyticalTable":return["Sort","Column","Filter","Group","Aggregate"];case"ResponsiveTable":return["Sort","Column","Filter","Group"];default:return["Sort","Column","Filter"]}}else if(typeof e==="object"){if(e.sort){r.push("Sort")}if(e.column){r.push("Column")}if(e.filter){r.push("Filter")}if(e.group&&(s||l)){r.push("Group")}if(e.aggregate&&s){r.push("Aggregate")}return r.length>0?r:undefined}}else{r.push("Sort");r.push("Column");if(t.getTemplateType()===X.ListReport){if(o===J.Control||ta(a,t)){r.push("Filter")}}else{r.push("Filter")}if(s){r.push("Group");r.push("Aggregate")}if(l){r.push("Group")}return r}}M.getP13nMode=ea;function ta(e,t){return e.isFilterBarHidden()&&!t.getManifestWrapper().hasMultipleVisualizations()&&t.getTemplateType()!==X.AnalyticalListPage}function na(e,t,n){const a=ve(e.getEntitySet()).nonSortableProperties;const i={sorters:[]};if(t?.SortOrder){t.SortOrder.forEach(e=>{const t=e.Property;if(t?.$target!==undefined&&!a.includes(t.$target.name)){const a=ia([t],n)[0];if(a){i.sorters.push({name:a,descending:!!e.Descending})}}})}return i.sorters.length?i:undefined}function aa(e){if(!e){return undefined}const t=e.InitialExpansionLevel?.valueOf();return typeof t==="number"?t+1:undefined}function ia(e,t){const n=[];let a,i;e.forEach(e=>{if(e?.value){a=t.find(t=>{i=t;return!i.propertyInfos&&i.relativePath===e?.value});if(a){n.push(a.name)}}});return n}function oa(e,t,n){const a={groupLevels:[]};if(e?.GroupBy){let i=e.GroupBy;if(n==="ResponsiveTable"){i=i.slice(0,1)}a.groupLevels=ia(i,t).map(e=>({name:e}))}return a.groupLevels.length?a:undefined}function ra(e){const t={};e.columns.forEach(n=>{n=n;const a=Object.keys(e.analyticsExtensions).find(e=>e===n.name);if(a){const t=e.analyticsExtensions[a];n.aggregatable=!t.fromGroupableProperty;n.extension=t??{}}if(n.additionalPropertyInfos?.length){n.additionalPropertyInfos.forEach(n=>{Sn(n,e.columns,t)})}});e.columns.forEach(e=>{e=e;if(e.additionalPropertyInfos){e.additionalPropertyInfos=e.additionalPropertyInfos.map(e=>t[e]??e);e.propertyInfos=e.propertyInfos?.concat(e.additionalPropertyInfos)}})}function sa(e){return Fe(e.getDataModelObjectPath(),e=>e?.InsertRestrictions?.RequiredProperties,false)}function la(e,t){return sa(t).map(e=>e.$target?.fullyQualifiedName).includes(e)}function ca(e,t,n){const a={};if(e?.Total){const n=e.Total;ia(n,t).forEach(e=>{a[e]={}})}else{for(const e in n){if(!n[e].fromGroupableProperty){a[e]={}}}}return Object.keys(a).length?a:undefined}function ua(e,t,n,a,i){const o=ln(e,a,n,i,t);const r=q(n,o.mode,a);const s=B(n,r);const l=k(n,r);const c=j(n,r);const u=H(r,O(n));const d={cut:V(n,r),create:R(n,r),delete:$(n,r),paste:x(n,r,u),massEdit:w(n,r),insights:U(n,r,t),creationRow:G(n,r)};const p={creationBehaviour:o,cutButtonVisibilityExpression:s,deleteButtonVisibilityExpression:l,massEditButtonVisibilityExpression:c,isInsertUpdateActionsTemplated:u,standardActions:d};if(r.tableManifestConfiguration.type==="TreeTable"){p.standardActions.moveUp=N(n,r,true);p.standardActions.moveDown=N(n,r,false)}return p}M.getStandardActionsConfiguration=ua;function da(e,t,n,a,i,o,r,s){const{navigationPropertyPath:l}=fa(t);const c=n.getDataModelObjectPath().targetEntityType.annotations?.UI?.HeaderInfo?.TypeNamePlural;const u=c&&Ft(Ct(c));const d=n.getDataModelObjectPath().targetEntitySet;const p=n.getManifestWrapper();const f=l.length===0;const g=ea(t,n,a);const m=l?W(t):W(n.getContextPath(),"LineItem");const y=tn(n);const b=Lt(n,l);const v=nn(e,t,n,f,y,r.deleteButtonVisibilityExpression,r.massEditButtonVisibilityExpression,r.cutButtonVisibilityExpression);let h=l?10:30;if(s?.MaxItems){h=s.MaxItems.valueOf()}else if(a.type==="TreeTable"){h=200}else if(a.type==="GridTable"||a.type==="AnalyticalTable"){h=100}const T=p.getVariantManagement();const I=Ie(n.getDataModelObjectPath());return{id:m,apiId:$e([m,"Table"]),entityName:d?d.name:"",entityTypeName:d&&d.entityType?d.entityType.name:"",collection:Ce(n.getDataModelObjectPath()),navigationPath:l,row:cn(e,n,o,b,a.type),p13nMode:g,isInsertUpdateActionsTemplated:r.isInsertUpdateActionsTemplated,updatablePropertyPath:zt(n),displayMode:E(n,true),create:r.creationBehaviour,selectionMode:v,variantManagement:T==="Control"&&!g?J.None:T,threshold:h,sortConditions:na(n,s,i),title:u,searchable:a.type!=="AnalyticalTable"&&!(It(I)&&I.value===false),initialExpansionLevel:aa(s),requiredProperties:sa(n).filter(e=>e?.$target?.type!=="Edm.Boolean").map(e=>e.value)}}M.getTableAnnotationConfiguration=da;function pa(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let a=arguments.length>3?arguments[3]:undefined;let i="String";if(!e||a?.dataPointTargetValue){return i}if(a?.isCurrency||n){return"Currency"}if(t){return"Timezone"}if(a?.wrap){return i}switch(e){case"Edm.Decimal":case"Edm.Int32":case"Edm.Int64":case"Edm.Double":case"Edm.Byte":i="Number";break;case"Edm.DateOfTime":case"Edm.Date":i="Date";break;case"Edm.DateTimeOffset":i="DateTime";break;case"Edm.TimeOfDay":i="Time";break;case"Edm.Boolean":i="Boolean";break;default:i="String"}return i}function fa(e){const[t,n]=e.split("@");let a=t;if(a.lastIndexOf("/")===a.length-1){a=a.substring(0,a.length-1)}return{navigationPropertyPath:a,annotationPath:n}}M.splitPath=fa;function ga(e,t){const n=t.getEntityTypeAnnotation(e);const a=n.annotation;if(a){const e=[];a.SelectOptions?.forEach(t=>{const n=t.PropertyName;const a=n?.value??"";if(!e.includes(a)){e.push(a)}});return{text:a?.Text?.toString(),propertyNames:e}}return undefined}M.getSelectionVariantConfiguration=ga;function ma(e,t,n){let a=e.enableFullScreen??n;if(!n&&a&&t.getTemplateType()===X.ListReport){a=false;t.getDiagnostics().addIssue(Be.Manifest,He.Low,je.FULLSCREENMODE_NOT_ON_LISTREPORT)}return a}function ya(e,t,n){let a;if(t!=="ResponsiveTable"){return undefined}switch(n.getTemplateType()){case X.ListReport:case X.ObjectPage:a=e.selectAll===false?"ClearAll":"Default";if(n.getTemplateType()===X.ObjectPage&&n.getManifestWrapper().useIconTabBar()){a=!e.selectAll?"ClearAll":"Default"}break;case X.AnalyticalListPage:a=!e.selectAll?"ClearAll":"Default";break;default:}return a}function ba(e,t,n){if(e!=="ResponsiveTable"){if(n){return{rowCountMode:"Auto",rowCount:3}}else{return{rowCountMode:t.rowCountMode??"Fixed",rowCount:t.rowCount??(e==="GridTable"?5:10)}}}else{return{}}}function va(e,t){return t.condensedTableLayout!==undefined&&e!=="ResponsiveTable"?t.condensedTableLayout:false}function ha(e){return e.selectAll===true||e.selectionLimit===0?0:e.selectionLimit||200}function Ta(e){return e.creationMode?.inlineCreationRowCount?e.creationMode?.inlineCreationRowCount:1}function Ia(e,t,n){return e.enableExport!==undefined?e.enableExport:t.getTemplateType()!=="ObjectPage"||n}function Pa(e){return e.frozenColumnCount}function Ca(e){return e.widthIncludingColumnHeader??false}function Aa(e,t,n,a){let i=false;const o={};const r=n.getAnnotationEntityType(t);if(e.quickVariantSelection){const t=(e.quickVariantSelection.paths??[]).reduce((e,t)=>{if(r.resolvePath(t.annotationPath)){e.push({annotationPath:t.annotationPath})}return e},[]);if(t.length){o.quickFilters={showCounts:e.quickVariantSelection.showCounts,paths:t}}}if(a){o.hiddenFilters={paths:[{annotationPath:`@${a.fullyQualifiedName.split("@")[1]}`}]}}i=!!e.quickVariantSelection?.hideTableTitle;return{filters:o,headerVisible:!(o?.quickFilters&&i)}}function Da(e,t){const n=Pn(e)??t.label;if(n){t.tooltip=n}}function Sa(e,t){const n=Me(t.getDataModelObjectPath(),e).navigationProperties;if(n?.length>0){const e=[];n.forEach(t=>{e.push(In(t)||t.name)});return e}}function Fa(e,t){let n=false;if(e.ActionTarget?.annotations?.Core?.OperationAvailable!==undefined){const a=e.ActionTarget?.isBound;const i=a&&e.ActionTarget?.sourceType!==t;const o=e.ActionTarget?.parameters[0]?.isCollection;if(!a||i||o){n=true}}return n}function Ma(e,t,n){const a=n.getDataModelObjectPath();e.hierarchyQualifier=t.hierarchyQualifier;const i=De(a,e.hierarchyQualifier);const o=Ae(a);e.isHierarchyParentNodeUpdatable=!o?.includes(i);e.isNodeMovable=Ea(t.isNodeMovable,e);e.isMoveToPositionAllowed=Ea(t.isMoveToPositionAllowed,e);e.createEnablement=Ea(t.creationMode?.isCreateEnabled,e);if(t.creationMode?.nodeType?.propertyName&&t.creationMode?.nodeType?.values){const a=t.creationMode.nodeType.values;e.nodeType={propertyName:t.creationMode.nodeType.propertyName,values:Object.keys(a).map(t=>{const i=a[t];if(typeof i==="string"){return{value:t,text:i}}else{return{value:t,text:i.label,creationDialogFields:e.creationMode===ae.CreationDialog?Na(i.creationFields,n):undefined}}})}}if(t.creationMode?.createInPlace){e.createInPlace=true}}function Ea(e,t){if(!e){return undefined}const n=e.lastIndexOf(".")||-1;const a=e.substring(0,n).replace(/\./gi,"/");const i=e.substring(n+1);if(!a.startsWith("/extension/")){if(!t.additionalRequiredModules){t.additionalRequiredModules=[a]}else if(!t.additionalRequiredModules.includes(a)){t.additionalRequiredModules.push(a)}}return{moduleName:a,methodName:i}}M.getCustomFunctionInfo=Ea;function Oa(e){return e?.tableSettings?.disableRequestCache||false}function xa(e,t){const n={visibleFields:[],ignoredFields:[],operationGroupingMode:t.getTemplateType()===X.ListReport?ee.Isolated:ee.ChangeSet};if(!e.enableMassEdit){return{enabled:false,...n}}if(e.enableMassEdit===true){return{enabled:e.enableMassEdit,...n}}else if(typeof e.enableMassEdit==="object"){return{enabled:true,visibleFields:Na(e.enableMassEdit.visibleFields,t),ignoredFields:Na(e.enableMassEdit.ignoredFields,t),operationGroupingMode:e.enableMassEdit.operationGroupingMode&&Object.values(ee).includes(e.enableMassEdit.operationGroupingMode)?e.enableMassEdit.operationGroupingMode:n.operationGroupingMode,customFragment:e.enableMassEdit.customFragment}}return{enabled:false,...n}}M.getMassEditSettings=xa;function Na(e,t){if(!e){return[]}if(e.startsWith("com.sap.vocabularies.UI.v1.FieldGroup")){const n=t.getEntityTypeAnnotation(`@${e}`);if(we(n.annotation,"com.sap.vocabularies.UI.v1.FieldGroupType")){return n.annotation.Data.reduce((e,t)=>{if(ct(t)&&xe(t.Value)){e.push(t.Value.path)}return e},[])}return[]}return e.replace(/\s/g,"").split(",").map(e=>e.trim())}function wa(e,t,n){let a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;let i=arguments.length>4?arguments[4]:undefined;const o=n.getManifestWrapper();const r=n.getManifestControlConfiguration(t);const s=r?.tableSettings??{};const l=o.getSapFeManifestConfiguration();const c=l?.macros?.table?.defaultCreationMode==="InlineCreationRows"?ae.InlineCreationRows:undefined;const u=s.creationMode?.name??c??ae.NewPage;const d=!o.isPhone();const p=s.disableCopyToClipboard;const f=n.getTemplateType();const g=a&&o.isCondensedLayoutCompliant();const m=e?Aa(s,e,n,i):{};const y=s.creationMode?.customValidationFunction;const b=s.exportRequestSize;const v=Ua(n,r);const h=s.enablePaste??(n.getTemplateType()==="ObjectPage"||v==="TreeTable"&&n.getEntitySet()?.annotations.Common?.DraftRoot!==undefined);const T=ba(v,s,f===X.ListReport);const I=v!=="ResponsiveTable"?300:undefined;const P=va(v,s);let C=false;if(s.creationMode?.inlineCreationRowsHiddenInEditMode){C=typeof s.creationMode?.inlineCreationRowsHiddenInEditMode==="string"?s.creationMode?.inlineCreationRowsHiddenInEditMode==="true":s.creationMode?.inlineCreationRowsHiddenInEditMode}let A;if(n.getTemplateType()==="ListReport"){A="illustratedMessage-Auto"}else{A=o.getUseTextForNoDataMessages()?"text":"illustratedMessage-Dot"}const D={createAtEnd:s.creationMode?.createAtEnd!==undefined?s.creationMode?.createAtEnd:![ae.Inline,ae.CreationDialog].includes(u),creationMode:u,creationDialogFields:u===ae.CreationDialog?Na(s.creationMode?.creationFields,n):undefined,customValidationFunction:y,hasDataStateIndicatorFilter:f===X.ListReport,disableAddRowButtonForEmptyData:!y?!!s.creationMode?.disableAddRowButtonForEmptyData:false,enableAutoColumnWidth:d,enablePastingOfComputedProperties:s.enablePastingOfComputedProperties,enableExport:Ia(s,n,h),frozenColumnCount:Pa(s),widthIncludingColumnHeader:Ca(s),enableFullScreen:ma(s,n,o.isPhone()),massEdit:xa(s,n),enableAddCardToInsights:s?.enableAddCardToInsights,enablePaste:h,disableCopyToClipboard:p,headerVisible:true,header:s.header,multiSelectMode:ya(s,v,n),selectionLimit:ha(s),inlineCreationRowCount:Ta(s),inlineCreationRowsHiddenInEditMode:C,showRowCount:s?.quickVariantSelection?.paths?false:!o.getViewConfiguration()?.showCounts,type:v,disableRequestCache:Oa(r),useCondensedTableLayout:P&&g,isCompactType:o.isCompactType(),beforeRebindTable:s.beforeRebindTable,exportRequestSize:b,enableUploadPlugin:!!n.getAnnotationEntityType().annotations?.UI?.MediaResource?.Stream,selectionChange:s.selectionChange,modeForNoDataMessage:A,scrollThreshold:s.scrollThreshold??I};const S={...D,...T,...m};if(v==="TreeTable"){Ma(S,s,n)}if(s.headerVisible!==undefined){S.headerVisible=s.headerVisible}return S}M.getTableManifestConfiguration=wa;function Ua(e,t){if(t?.tableSettings?.type){return t.tableSettings.type}return"ResponsiveTable"}function $a(e,t,n,a,i,o){const r=t.navigationProperties.length!==e.getDataModelObjectPath().navigationProperties.length;if(r&&ct(n)){a[i]=n.Value.$target;o.nonSortableProperties.push(i)}else if(rt(n)&&ut(n)){n.Target.$target.Data.forEach(t=>{if(ct(t)&&he(t.Value.$target)==="Description"){const n=Me(e.getDataModelObjectPath(),t.Value.path);const i=n.navigationProperties.length!==e.getDataModelObjectPath().navigationProperties.length;if(i){a[t.Value.path]=t.Value.$target;o.nonSortableProperties.push(t.Value.path)}}})}}function Va(e,t){let n;if(Oe(e)){n=Ee(e.targetType)?Et[e.targetType.underlyingType]:Et[e.type]}if(n===undefined&&t!==undefined){n=Et[t]}const a={type:n?.type,constraints:{},formatOptions:{}};if(Oe(e)&&n!==undefined){a.constraints={scale:n.constraints?.$Scale?e.scale:undefined,precision:n.constraints?.$Precision?e.precision:undefined,maxLength:n.constraints?.$MaxLength?e.maxLength:undefined,nullable:n.constraints?.$Nullable?e.nullable:undefined,minimum:n.constraints?.["@Org.OData.Validation.V1.Minimum/$Decimal"]&&!isNaN(e.annotations?.Validation?.Minimum)?`${e.annotations?.Validation?.Minimum}`:undefined,maximum:n.constraints?.["@Org.OData.Validation.V1.Maximum/$Decimal"]&&!isNaN(e.annotations?.Validation?.Maximum)?`${e.annotations?.Validation?.Maximum}`:undefined,isDigitSequence:a.type==="sap.ui.model.odata.type.String"&&n.constraints?.[`@${"com.sap.vocabularies.Common.v1.IsDigitSequence"}`]&&e.annotations?.Common?.IsDigitSequence?true:undefined}}a.formatOptions={parseAsString:a?.type?.indexOf("sap.ui.model.odata.type.Int")===0||a?.type?.indexOf("sap.ui.model.odata.type.Double")===0?false:undefined,emptyString:a?.type?.indexOf("sap.ui.model.odata.type.Int")===0||a?.type?.indexOf("sap.ui.model.odata.type.Double")===0?"":undefined,parseKeepsEmptyString:a.type==="sap.ui.model.odata.type.String"&&a.constraints.nullable===false?true:undefined};return a}M.getTypeConfig=Va;function Ra(e,t,n){if(t.properties[n].displayModeOfPropertyUsedAsDescription&&!e[n]){e[n]=t.properties[n].displayModeOfPropertyUsedAsDescription}}function La(e,t,n){const a=e.filter(e=>e.propertyInfos?.includes(t)&&e.isPartOfLineItem);n.isPartOfLineItem=!!a.length;if(a.length&&!a?.some(e=>e.availability!=="Hidden")){n.sortable=false;n.isGroupable=false;n.filterable=false}}function ja(e,t,n,a,i,o){let r;if(o){r=t.find(e=>e.key===o);if(r?.exportSettings===null){return r?.exportSettings}}const s=e?.wrap??(!!(e?.property&&e.property?.length>1)||!!(i&&i.length>1));const l={...r?.exportSettings,type:e?.type??r?.exportSettings?.type,template:e?.template??Jn(i,e?.property)??r?.exportSettings?.template,property:e?.property?Kn(e?.property,t,n,a):undefined,width:e?.width,wrap:s};return mn(l)}return{getTableActions:xt,getTableColumns:Nt,getColumnsFromEntityType:un,updateLinkedProperties:Ht,createTableVisualization:Gt,createDefaultTableVisualization:qt,getCapabilityRestriction:tn,getImportance:Gn,getSelectionMode:nn,getRowStatusVisibility:Cn,getP13nMode:ea,getStandardActionsConfiguration:ua,getTableAnnotationConfiguration:da,isFilteringCaseSensitive:Nn,splitPath:fa,getSelectionVariantConfiguration:ga,getTableManifestConfiguration:wa,getTypeConfig:Va,updateTableVisualizationForType:$t,createRequestedProperties:Vt,getNavigationTargetPath:Lt,getCustomFunctionInfo:Ea}},false);
//# sourceMappingURL=Table.js.map