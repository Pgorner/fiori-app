{"version":3,"names":["SubSectionType","_exports","visualizationTerms","createSubSections","facetCollection","converterContext","isHeaderSection","useSingleTextAreaFieldAsNotes","facetsToCreate","reduce","facetDefinition","$Type","push","Facets","find","facetType","splice","length","map","facet","createSubSection","createCustomHeaderFacetSubSections","customHeaderFacets","getHeaderFacetsFromManifest","getManifestWrapper","getHeaderFacets","aCustomHeaderFacets","Object","keys","forEach","key","customHeaderFacet","templateEdit","createCustomHeaderFacetSubSection","subSectionID","getCustomSubSectionID","subSection","id","title","type","XMLFragment","template","visible","level","sideContent","undefined","stashed","flexSettings","actions","objectPageLazyLoaderEnabled","getSubSectionKey","fallback","ID","toString","Label","addFormMenuActions","reverseIndex","startsWith","hiddenActions","getFormHiddenActions","actionOverwriteConfig","enabled","OverrideType","overwrite","command","position","menu","formActions","getFormActions","manifestActions","getActionsFromManifest","annotationMenuActionItems","getAnnotationMenuActionItems","matchingManifestActions","getMatchingManifestAction","overwrittenMenuActionItems","insertCustomElements","manifestAction","formAllActions","prepareMenuActions","removeDuplicateActions","getVisibilityEnablementMenuActions","action","ActionType","Menu","defaultAction","Default","commandActions","getFacetActions","filter","subFacetDefinition","isReferenceFacet","actionReducer","referenceFacet","createFormActionReducer","getButtonType","emphasized","buttonTypeCondition","equal","getExpressionFromAnnotation","compileExpression","ifElse","ButtonType","Ghost","Transparent","hasSingleContent","getSubSectionID","oHiddenAnnotation","annotations","UI","Hidden","isVisibleExpression","not","isVisibilityDynamic","isConstant","isPathAnnotationExpression","Unknown","annotationPath","getEntitySetBasedAnnotationPath","fullyQualifiedName","getEnableLazyLoading","getStashedSettingsForHeaderFacet","designtime","getDesignTimeMetadataSettingsForHeaderFacet","unsupportedText","facets","visualizationFacets","index","_ref","Target","$target","includes","term","nonVisualizationFacets","visualization","visualizationContent","formContent","mixedContent","Log","warning","fakeFormFacet","_ref2","mixedSubSection","Mixed","content","facetActions","formCollectionSubSection","Form","formDefinition","createFormDefinition","facetName","value","presentation","getDataVisualizationConfiguration","isCondensedTableLayoutCompliant","getCondensedTableLayoutCompliance","doNotCheckApplySupported","shouldCreateTemplateChartVisualization","subSectionTitle","controlTitle","visualizations","annotation","isPartOfPreview","PartOfPreview","valueOf","showSubSectionTitle","getShowSubSectionTitle","dataVisualizationTitleVisible","and","dataVisualizationSubSection","DataVisualization","formElementSubSection","Notes","unsupportedSubSection","text","or","notEqual","resolveBindingString","referenceTarget","targetValue","dataFieldCollection","navigationPropertyPath","split","lastIndexOf","substring","Data","getManifestControlConfiguration","qualifier","dataField","RequiresContext","getDiagnostics","addIssue","IssueCategory","Annotation","IssueSeverity","Low","IssueType","MALFORMED_DATAFIELD_FOR_IBN","REQUIRESCONTEXT","Inline","INLINE","Determining","DETERMINING","mNavigationParameters","Mapping","semanticObjectMapping","getSemanticObjectMapping","DataFieldForIntentBasedNavigation","getFormID","KeyHelper","generateKeyFromDataField","NavigationAvailable","buttonType","Emphasized","press","fn","SemanticObject","Action","customData","semanticObject","formManifestActionsConfiguration","getDataFieldAnnotationAction","Actions","formManifestMenuActionsConfiguration","DataFieldForAction","getEnabledForAnnotationAction","ActionTarget","binding","requiresDialog","isActionWithDialog","contexts","pathInModel","invocationGrouping","InvocationGrouping","label","model","isNavigable","isActionNavigable","ref","isDialog","actionDefinition","bCritical","Common","IsActionCritical","parameters","createCustomSubSections","manifestSubSections","subSections","subSectionKey","createCustomSubSection","manifestSubSection","getSideContentID","equalSplit","placement","Placement","After","isVisible","isDynamicExpression","indexOf","subSectionDefinition","enableLazyLoading","componentName","settings","name","embeddedComponent","EmbeddedComponent","JSON","stringify","Placeholder","currentFacet","facetsToCreateInSection","manifestWrapper","useIconTabBar","hasNoOtherVisibleTableInTargets","entityType","getEntityType","every","subFacet","refFacet","subCollectionFacet","subRefFacet"],"sourceRoot":".","sources":["SubSection.ts"],"sourcesContent":["import type { Action } from \"@sap-ux/vocabularies-types/Edm\";\nimport { CommunicationAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Communication\";\nimport type {\n\tCollectionFacet,\n\tCollectionFacetTypes,\n\tDataFieldAbstractTypes,\n\tDataFieldForActionTypes,\n\tEmphasized,\n\tFacetTypes,\n\tFieldGroup,\n\tOperationGroupingType,\n\tReferenceFacetTypes\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTerms, UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport type { BindingToolkitExpression, CompiledBindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport {\n\tand,\n\tcompileExpression,\n\tequal,\n\tfn,\n\tgetExpressionFromAnnotation,\n\tifElse,\n\tisConstant,\n\tnot,\n\tnotEqual,\n\tor,\n\tpathInModel,\n\tref,\n\tresolveBindingString\n} from \"sap/fe/base/BindingToolkit\";\nimport type { NavigationParameters } from \"sap/fe/core/controllerextensions/InternalIntentBasedNavigation\";\nimport type { PageContextPathTarget } from \"sap/fe/core/converters/TemplateConverter\";\nimport type {\n\tAnnotationAction,\n\tBaseAction,\n\tCombinedAction,\n\tCustomAction,\n\tOverrideTypeAction\n} from \"sap/fe/core/converters/controls/Common/Action\";\nimport {\n\tButtonType,\n\tgetActionsFromManifest,\n\tgetAnnotationMenuActionItems,\n\tgetEnabledForAnnotationAction,\n\tgetMatchingManifestAction,\n\tgetSemanticObjectMapping,\n\tgetVisibilityEnablementMenuActions,\n\tisActionNavigable,\n\tprepareMenuActions,\n\tremoveDuplicateActions\n} from \"sap/fe/core/converters/controls/Common/Action\";\nimport type { ChartVisualization } from \"sap/fe/core/converters/controls/Common/Chart\";\nimport type { TableVisualization } from \"sap/fe/core/converters/controls/Common/Table\";\nimport type { CustomObjectPageHeaderFacet, FlexSettings } from \"sap/fe/core/converters/controls/ObjectPage/HeaderFacet\";\nimport {\n\tgetDesignTimeMetadataSettingsForHeaderFacet,\n\tgetHeaderFacetsFromManifest,\n\tgetStashedSettingsForHeaderFacet\n} from \"sap/fe/core/converters/controls/ObjectPage/HeaderFacet\";\nimport { IssueCategory, IssueSeverity, IssueType } from \"sap/fe/core/converters/helpers/IssueManager\";\nimport { KeyHelper } from \"sap/fe/core/converters/helpers/Key\";\nimport { isPathAnnotationExpression } from \"sap/fe/core/helpers/TypeGuards\";\nimport type ConverterContext from \"../../ConverterContext\";\nimport type { FormManifestConfiguration, ManifestAction, ManifestSubSection } from \"../../ManifestSettings\";\nimport { ActionType } from \"../../ManifestSettings\";\nimport { isActionWithDialog } from \"../../annotations/DataField\";\nimport type { ConfigurableObject, ConfigurableRecord, CustomElement } from \"../../helpers/ConfigurableObject\";\nimport { OverrideType, Placement, insertCustomElements } from \"../../helpers/ConfigurableObject\";\nimport { getCustomSubSectionID, getFormID, getSideContentID, getSubSectionID } from \"../../helpers/ID\";\nimport { getFormActions, getFormHiddenActions } from \"../../objectPage/FormMenuActions\";\nimport type { DataVisualizationDefinition } from \"../Common/DataVisualization\";\nimport { getDataVisualizationConfiguration } from \"../Common/DataVisualization\";\nimport type { FormDefinition } from \"../Common/Form\";\nimport { createFormDefinition, isReferenceFacet } from \"../Common/Form\";\n\nexport enum SubSectionType {\n\tUnknown = \"Unknown\", // Default Type\n\tForm = \"Form\",\n\tNotes = \"Notes\",\n\tDataVisualization = \"DataVisualization\",\n\tXMLFragment = \"XMLFragment\",\n\tPlaceholder = \"Placeholder\",\n\tMixed = \"Mixed\",\n\tEmbeddedComponent = \"EmbeddedComponent\"\n}\n\nexport type ObjectPageSubSection =\n\t| UnsupportedSubSection\n\t| FormSubSection\n\t| DataVisualizationSubSection\n\t| ContactSubSection\n\t| XMLFragmentSubSection\n\t| PlaceholderFragmentSubSection\n\t| MixedSubSection\n\t| ReuseComponentSubSection\n\t| NoteSubSection;\n\ntype BaseSubSection = {\n\tid: string;\n\tkey: string;\n\ttitle: CompiledBindingToolkitExpression;\n\tannotationPath: string;\n\ttype: SubSectionType;\n\tvisible: CompiledBindingToolkitExpression;\n\tisVisibilityDynamic?: boolean | \"\";\n\tflexSettings?: FlexSettings;\n\tstashed?: boolean;\n\tlevel: number;\n\tcontent?: Array<ObjectPageSubSection>;\n\tsideContent?: SideContentDef;\n\tobjectPageLazyLoaderEnabled: boolean;\n\tclass?: string;\n};\n\ntype UnsupportedSubSection = BaseSubSection & {\n\ttype: SubSectionType.Unknown;\n\ttext: string;\n};\n\nexport type DataVisualizationSubSection = BaseSubSection & {\n\ttype: SubSectionType.DataVisualization;\n\tpresentation: DataVisualizationDefinition;\n\tisPartOfPreview?: boolean;\n\tshowSubSectionTitle: boolean | CompiledBindingToolkitExpression;\n\tdataVisualizationTitleVisible?: string | boolean;\n\tdataVisualizationOptions?: Record<string, unknown>;\n};\n\ntype ContactSubSection = UnsupportedSubSection;\ntype NoteSubSection = BaseSubSection & {\n\ttype: SubSectionType.Notes;\n};\ntype XMLFragmentSubSection = Omit<BaseSubSection, \"annotationPath\"> & {\n\ttype: SubSectionType.XMLFragment;\n\ttemplate: string;\n\tactions: Record<string, CustomAction>;\n};\n\ntype ReuseComponentSubSection = BaseSubSection & {\n\ttype: SubSectionType.EmbeddedComponent;\n\tcomponentName: string;\n\tsettings: string;\n};\n\ntype PlaceholderFragmentSubSection = Omit<BaseSubSection, \"annotationPath\"> & {\n\ttype: SubSectionType.Placeholder;\n\tactions: Record<string, CustomAction>;\n};\n\nexport type MixedSubSection = BaseSubSection & {\n\ttype: SubSectionType.Mixed;\n\tcontent: Array<ObjectPageSubSection>;\n};\n\nexport type FormSubSection = BaseSubSection & {\n\ttype: SubSectionType.Form;\n\tformDefinition: FormDefinition;\n\tactions: BaseAction[];\n\tcommandActions: Record<string, CustomAction>;\n};\n\nexport type ObjectPageSection = ConfigurableObject & {\n\tid: string;\n\ttitle: CompiledBindingToolkitExpression;\n\tshowTitle?: boolean;\n\tvisible: CompiledBindingToolkitExpression;\n\tsubSections: ObjectPageSubSection[];\n\tuseSingleTextAreaFieldAsNotes?: boolean;\n};\n\ntype SideContentDef = {\n\ttemplate?: string;\n\tid?: string;\n\tsideContentFallDown?: string;\n\tcontainerQuery?: string;\n\tvisible?: boolean;\n\tequalSplit?: boolean;\n};\n\nexport type CustomObjectPageSection = CustomElement<ObjectPageSection> & {\n\tonSectionLoaded?: string;\n};\n\nexport type CustomObjectPageSubSection = CustomElement<ObjectPageSubSection>;\n\nconst visualizationTerms: string[] = [\n\tUIAnnotationTerms.LineItem,\n\tUIAnnotationTerms.Chart,\n\tUIAnnotationTerms.PresentationVariant,\n\tUIAnnotationTerms.SelectionPresentationVariant\n];\n\n/**\n * Create subsections based on facet definition.\n * @param facetCollection Collection of facets\n * @param converterContext The converter context\n * @param isHeaderSection True if header section is generated in this iteration\n * @param useSingleTextAreaFieldAsNotes If the only field within a form container is a text-area field, the label is hidden\n * @returns The current subsections\n */\nexport function createSubSections(\n\tfacetCollection: FacetTypes[],\n\tconverterContext: ConverterContext<PageContextPathTarget>,\n\tisHeaderSection?: boolean,\n\tuseSingleTextAreaFieldAsNotes?: boolean\n): ObjectPageSubSection[] {\n\t// First we determine which sub section we need to create\n\tconst facetsToCreate = facetCollection.reduce((facetsToCreate: FacetTypes[], facetDefinition) => {\n\t\tswitch (facetDefinition.$Type) {\n\t\t\tcase UIAnnotationTypes.ReferenceFacet:\n\t\t\t\tfacetsToCreate.push(facetDefinition);\n\t\t\t\tbreak;\n\t\t\tcase UIAnnotationTypes.CollectionFacet:\n\t\t\t\t// TODO If the Collection Facet has a child of type Collection Facet we bring them up one level (Form + Table use case) ?\n\t\t\t\t// first case facet Collection is combination of collection and reference facet or not all facets are reference facets.\n\t\t\t\tif (facetDefinition.Facets.find((facetType) => facetType.$Type === UIAnnotationTypes.CollectionFacet)) {\n\t\t\t\t\tfacetsToCreate.splice(facetsToCreate.length, 0, ...facetDefinition.Facets);\n\t\t\t\t} else {\n\t\t\t\t\tfacetsToCreate.push(facetDefinition);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase UIAnnotationTypes.ReferenceURLFacet:\n\t\t\t\t// Not supported\n\t\t\t\tbreak;\n\t\t}\n\t\treturn facetsToCreate;\n\t}, []);\n\n\t// Then we create the actual subsections\n\treturn facetsToCreate.map((facet) =>\n\t\tcreateSubSection(\n\t\t\tfacet,\n\t\t\tfacetsToCreate,\n\t\t\tconverterContext,\n\t\t\t0,\n\t\t\t!(facet as CollectionFacet)?.Facets?.length,\n\t\t\tisHeaderSection,\n\t\t\tuseSingleTextAreaFieldAsNotes\n\t\t)\n\t);\n}\n\n/**\n * Creates subsections based on the definition of the custom header facet.\n * @param converterContext The converter context\n * @returns The current subsections\n */\nexport function createCustomHeaderFacetSubSections(converterContext: ConverterContext<PageContextPathTarget>): ObjectPageSubSection[] {\n\tconst customHeaderFacets: Record<string, CustomObjectPageHeaderFacet> = getHeaderFacetsFromManifest(\n\t\tconverterContext.getManifestWrapper().getHeaderFacets()\n\t);\n\tconst aCustomHeaderFacets: CustomObjectPageHeaderFacet[] = [];\n\tObject.keys(customHeaderFacets).forEach(function (key) {\n\t\taCustomHeaderFacets.push(customHeaderFacets[key]);\n\t\treturn aCustomHeaderFacets;\n\t});\n\tconst facetsToCreate = aCustomHeaderFacets.reduce((facetsToCreate: CustomObjectPageHeaderFacet[], customHeaderFacet) => {\n\t\tif (customHeaderFacet.templateEdit) {\n\t\t\tfacetsToCreate.push(customHeaderFacet);\n\t\t}\n\t\treturn facetsToCreate;\n\t}, []);\n\n\treturn facetsToCreate.map((customHeaderFacet) => createCustomHeaderFacetSubSection(customHeaderFacet));\n}\n\n/**\n * Creates a subsection based on a custom header facet.\n * @param customHeaderFacet A custom header facet\n * @returns A definition for a subsection\n */\nfunction createCustomHeaderFacetSubSection(customHeaderFacet: CustomObjectPageHeaderFacet): ObjectPageSubSection {\n\tconst subSectionID = getCustomSubSectionID(customHeaderFacet.key);\n\tconst subSection: XMLFragmentSubSection = {\n\t\tid: subSectionID,\n\t\tkey: customHeaderFacet.key,\n\t\ttitle: customHeaderFacet.title,\n\t\ttype: SubSectionType.XMLFragment,\n\t\ttemplate: customHeaderFacet.templateEdit || \"\",\n\t\tvisible: customHeaderFacet.visible,\n\t\tlevel: 1,\n\t\tsideContent: undefined,\n\t\tstashed: customHeaderFacet.stashed,\n\t\tflexSettings: customHeaderFacet.flexSettings,\n\t\tactions: {},\n\t\tobjectPageLazyLoaderEnabled: false\n\t};\n\treturn subSection;\n}\n\nconst getSubSectionKey = (facetDefinition: FacetTypes, fallback: string): string => {\n\treturn facetDefinition.ID?.toString() || facetDefinition.Label?.toString() || fallback;\n};\n/**\n * Adds Form menu action to all form actions, removes duplicate actions and hidden actions.\n * @param actions The actions involved\n * @param facetDefinition The definition for the facet\n * @param converterContext The converter context\n * @returns The form menu actions\n */\nfunction addFormMenuActions(\n\tactions: BaseAction[],\n\tfacetDefinition: FacetTypes,\n\tconverterContext: ConverterContext<PageContextPathTarget>\n): CombinedAction {\n\t// annotation actions possibly has CustomActions, which are added at Subsection.ts#createFormActionReducer\n\t// those action are incorrect and cause unwanted results, so we need to carefully remove incorrect ones here\n\tfor (let reverseIndex = actions.length - 1; reverseIndex >= 0; reverseIndex--) {\n\t\tif (\n\t\t\tactions[reverseIndex].id?.startsWith(\"CustomAction::\") &&\n\t\t\t(actions[reverseIndex].key.startsWith(\"DataFieldForAction::\") ||\n\t\t\t\tactions[reverseIndex].key.startsWith(\"DataFieldForIntentBasedNavigation::\"))\n\t\t) {\n\t\t\tactions.splice(reverseIndex, 1);\n\t\t}\n\t}\n\tconst hiddenActions: BaseAction[] = getFormHiddenActions(facetDefinition, converterContext) || [],\n\t\tactionOverwriteConfig: OverrideTypeAction = {\n\t\t\tenabled: OverrideType.overwrite,\n\t\t\tvisible: OverrideType.overwrite,\n\t\t\tcommand: OverrideType.overwrite,\n\t\t\tposition: OverrideType.overwrite,\n\t\t\tmenu: OverrideType.overwrite\n\t\t},\n\t\tformActions: ConfigurableRecord<ManifestAction> = getFormActions(facetDefinition, converterContext),\n\t\t// 1. Get actions from annotations -> actions are passed to this method\n\t\t// 2. Get actions from manifest\n\t\tmanifestActions = getActionsFromManifest(formActions, converterContext, actions, undefined, undefined, hiddenActions),\n\t\t// 3. Get all annotation menu items\n\t\tannotationMenuActionItems = getAnnotationMenuActionItems(actions),\n\t\t// 4. Find manifest actions which override any annotation menu items\n\t\tmatchingManifestActions = getMatchingManifestAction(annotationMenuActionItems, manifestActions.actions),\n\t\t// 5. Get overridden annotation menu items\n\t\toverwrittenMenuActionItems = insertCustomElements(\n\t\t\tannotationMenuActionItems,\n\t\t\tmatchingManifestActions,\n\t\t\tactionOverwriteConfig\n\t\t) as CustomAction[];\n\t// If there is a manifest action defined for a neighbouring reference facet, it would not be part of manifest actions here\n\t// In this for-loop, ensuring a pure manifest action coming from another reference facet is not lost\n\tfor (let reverseIndex = actions.length - 1; reverseIndex >= 0; reverseIndex--) {\n\t\tif (actions[reverseIndex].id?.startsWith(\"CustomAction::\")) {\n\t\t\tfor (const manifestAction in manifestActions.actions) {\n\t\t\t\tif (manifestAction === actions[reverseIndex].key) {\n\t\t\t\t\tactions.splice(reverseIndex, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// 6. Override all actions\n\tlet formAllActions = insertCustomElements(actions, manifestActions.actions, actionOverwriteConfig) as CustomAction[];\n\t// 7. Replace original menu items with their corresponding overridden menu items\n\tprepareMenuActions(formAllActions, overwrittenMenuActionItems);\n\t// 8. Remove duplicate actions which are menu items\n\tformAllActions = removeDuplicateActions(formAllActions);\n\t// 9. Hide menus where all menu items are hidden\n\tformAllActions = getVisibilityEnablementMenuActions(formAllActions);\n\t// 10. (Only for this subsection UI area) defaultAction of a menu must be of type ActionType.Default\n\tformAllActions.forEach((action) => {\n\t\tif (action.type === ActionType.Menu && !!action.defaultAction) {\n\t\t\t(action.defaultAction as CustomAction).type = ActionType.Default;\n\t\t}\n\t});\n\n\treturn {\n\t\tactions: formAllActions ?? actions,\n\t\tcommandActions: manifestActions.commandActions\n\t};\n}\n\n/**\n * Retrieves the action form a facet.\n * @param facetDefinition\n * @param converterContext\n * @returns The current facet actions\n */\nfunction getFacetActions(facetDefinition: FacetTypes, converterContext: ConverterContext<PageContextPathTarget>): CombinedAction {\n\tlet actions: BaseAction[] = [];\n\tswitch (facetDefinition.$Type) {\n\t\tcase UIAnnotationTypes.CollectionFacet:\n\t\t\tactions = (\n\t\t\t\tfacetDefinition.Facets.filter((subFacetDefinition) => isReferenceFacet(subFacetDefinition)) as ReferenceFacetTypes[]\n\t\t\t).reduce(\n\t\t\t\t(actionReducer: BaseAction[], referenceFacet) => createFormActionReducer(actionReducer, referenceFacet, converterContext),\n\t\t\t\t[]\n\t\t\t);\n\t\t\tbreak;\n\t\tcase UIAnnotationTypes.ReferenceFacet:\n\t\t\tactions = createFormActionReducer([], facetDefinition, converterContext);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\treturn addFormMenuActions(actions, facetDefinition, converterContext);\n}\n/**\n * Returns the button type based on @UI.Emphasized annotation.\n * @param emphasized Emphasized annotation value.\n * @returns The button type or path based expression.\n */\nfunction getButtonType(emphasized: Emphasized | undefined): ButtonType {\n\t// Emphasized is a boolean so if it's equal to true we show the button as Ghost, otherwise as Transparent\n\tconst buttonTypeCondition = equal(getExpressionFromAnnotation(emphasized), true);\n\treturn compileExpression(ifElse(buttonTypeCondition, ButtonType.Ghost, ButtonType.Transparent)) as ButtonType;\n}\n\n/**\n * Create a subsection based on FacetTypes.\n * @param facetDefinition\n * @param facetsToCreate\n * @param converterContext\n * @param level\n * @param hasSingleContent\n * @param isHeaderSection\n * @param useSingleTextAreaFieldAsNotes If the only field within a form container is a text-area field, the label is hidden\n * @returns A subsection definition\n */\nexport function createSubSection(\n\tfacetDefinition: FacetTypes,\n\tfacetsToCreate: FacetTypes[],\n\tconverterContext: ConverterContext<PageContextPathTarget>,\n\tlevel: number,\n\thasSingleContent: boolean,\n\tisHeaderSection?: boolean,\n\tuseSingleTextAreaFieldAsNotes?: boolean\n): ObjectPageSubSection {\n\tconst subSectionID = getSubSectionID(facetDefinition);\n\tconst oHiddenAnnotation = facetDefinition.annotations?.UI?.Hidden;\n\tconst isVisibleExpression = not(equal(true, getExpressionFromAnnotation(oHiddenAnnotation)));\n\tconst isVisibilityDynamic = !isConstant(isVisibleExpression) && !isPathAnnotationExpression(oHiddenAnnotation);\n\tconst title = facetDefinition.Label !== undefined ? compileExpression(getExpressionFromAnnotation(facetDefinition.Label)) : undefined;\n\tconst subSection: BaseSubSection = {\n\t\tid: subSectionID,\n\t\tkey: getSubSectionKey(facetDefinition, subSectionID),\n\t\ttitle: title,\n\t\ttype: SubSectionType.Unknown,\n\t\tannotationPath: converterContext.getEntitySetBasedAnnotationPath(facetDefinition.fullyQualifiedName),\n\t\tvisible: compileExpression(isVisibleExpression),\n\t\tisVisibilityDynamic: isVisibilityDynamic,\n\t\tlevel: level,\n\t\tsideContent: undefined,\n\t\tobjectPageLazyLoaderEnabled: converterContext.getManifestWrapper().getEnableLazyLoading()\n\t};\n\tif (isHeaderSection) {\n\t\tsubSection.stashed = getStashedSettingsForHeaderFacet(facetDefinition, facetDefinition, converterContext);\n\t\tsubSection.flexSettings = {\n\t\t\tdesigntime: getDesignTimeMetadataSettingsForHeaderFacet(facetDefinition, facetDefinition, converterContext)\n\t\t};\n\t}\n\tlet unsupportedText = \"\";\n\tlevel++;\n\tswitch (facetDefinition.$Type) {\n\t\tcase UIAnnotationTypes.CollectionFacet:\n\t\t\tconst facets = facetDefinition.Facets;\n\n\t\t\t// Filter for all facets of this subsection that are referring to an annotation describing a visualization (e.g. table or chart)\n\t\t\tconst visualizationFacets = facets\n\t\t\t\t.map((facet, index) => ({ index, facet })) // Remember the index assigned to each facet\n\t\t\t\t.filter(({ facet }) => {\n\t\t\t\t\treturn isReferenceFacet(facet) && facet.Target.$target && visualizationTerms.includes(facet.Target.$target.term);\n\t\t\t\t});\n\n\t\t\t// Filter out all visualization facets; \"visualizationFacets\" and \"nonVisualizationFacets\" are disjoint\n\t\t\tconst nonVisualizationFacets = facets.filter(\n\t\t\t\t(facet) => !visualizationFacets.find((visualization) => visualization.facet === facet)\n\t\t\t);\n\n\t\t\tif (visualizationFacets.length > 0) {\n\t\t\t\t// CollectionFacets with visualizations must be handled separately as they cannot be included in forms\n\t\t\t\tconst visualizationContent: ObjectPageSubSection[] = [];\n\t\t\t\tconst formContent: ObjectPageSubSection[] = [];\n\t\t\t\tconst mixedContent: ObjectPageSubSection[] = [];\n\n\t\t\t\t// Create each visualization facet as if it was its own subsection (via recursion), and keep their relative ordering\n\t\t\t\tfor (const { facet } of visualizationFacets) {\n\t\t\t\t\tvisualizationContent.push(createSubSection(facet, [], converterContext, level, true, isHeaderSection));\n\t\t\t\t}\n\n\t\t\t\tif (nonVisualizationFacets.length > 0) {\n\t\t\t\t\t// This subsection includes visualizations and other content, so it is a \"Mixed\" subsection\n\t\t\t\t\tLog.warning(\n\t\t\t\t\t\t`Warning: CollectionFacet '${facetDefinition.ID}' includes a combination of either a chart or a table and other content. This can lead to rendering issues. Consider moving the chart or table into a separate CollectionFacet.`\n\t\t\t\t\t);\n\n\t\t\t\t\tconst fakeFormFacet = { ...facetDefinition };\n\t\t\t\t\tfakeFormFacet.Facets = nonVisualizationFacets;\n\t\t\t\t\t// Create a joined form of all facets that are not referring to visualizations\n\t\t\t\t\tformContent.push(createSubSection(fakeFormFacet, [], converterContext, level, hasSingleContent, isHeaderSection));\n\t\t\t\t}\n\n\t\t\t\t// Merge the visualization content with the form content\n\t\t\t\tif (visualizationFacets.find(({ index }) => index === 0)) {\n\t\t\t\t\t// If the first facet is a visualization, display the visualizations first\n\t\t\t\t\tmixedContent.push(...visualizationContent);\n\t\t\t\t\tmixedContent.push(...formContent);\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise, display the form first\n\t\t\t\t\tmixedContent.push(...formContent);\n\t\t\t\t\tmixedContent.push(...visualizationContent);\n\t\t\t\t}\n\n\t\t\t\tconst mixedSubSection: MixedSubSection = {\n\t\t\t\t\t...subSection,\n\t\t\t\t\ttype: SubSectionType.Mixed,\n\t\t\t\t\tlevel: level,\n\t\t\t\t\tcontent: mixedContent\n\t\t\t\t};\n\t\t\t\treturn mixedSubSection;\n\t\t\t} else {\n\t\t\t\t// This CollectionFacet only includes content that can be rendered in a merged form\n\t\t\t\tconst facetActions = getFacetActions(facetDefinition, converterContext),\n\t\t\t\t\tformCollectionSubSection: FormSubSection = {\n\t\t\t\t\t\t...subSection,\n\t\t\t\t\t\ttype: SubSectionType.Form,\n\t\t\t\t\t\tformDefinition: createFormDefinition(\n\t\t\t\t\t\t\tfacetDefinition,\n\t\t\t\t\t\t\tcompileExpression(isVisibleExpression),\n\t\t\t\t\t\t\tconverterContext,\n\t\t\t\t\t\t\tfacetActions.actions,\n\t\t\t\t\t\t\t{ useSingleTextAreaFieldAsNotes }\n\t\t\t\t\t\t),\n\t\t\t\t\t\tlevel: level,\n\t\t\t\t\t\tactions: facetActions.actions.filter((action) => action.facetName === undefined),\n\t\t\t\t\t\tcommandActions: facetActions.commandActions\n\t\t\t\t\t};\n\t\t\t\treturn formCollectionSubSection;\n\t\t\t}\n\t\tcase UIAnnotationTypes.ReferenceFacet:\n\t\t\tif (!facetDefinition.Target.$target) {\n\t\t\t\tunsupportedText = `Unable to find annotationPath ${facetDefinition.Target.value}`;\n\t\t\t} else {\n\t\t\t\tswitch (facetDefinition.Target.$target.term) {\n\t\t\t\t\tcase UIAnnotationTerms.LineItem:\n\t\t\t\t\tcase UIAnnotationTerms.Chart:\n\t\t\t\t\tcase UIAnnotationTerms.PresentationVariant:\n\t\t\t\t\tcase UIAnnotationTerms.SelectionPresentationVariant:\n\t\t\t\t\t\tconst presentation = getDataVisualizationConfiguration(facetDefinition.Target.value, converterContext, {\n\t\t\t\t\t\t\tisCondensedTableLayoutCompliant: getCondensedTableLayoutCompliance(\n\t\t\t\t\t\t\t\tfacetDefinition,\n\t\t\t\t\t\t\t\tfacetsToCreate,\n\t\t\t\t\t\t\t\tconverterContext\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tdoNotCheckApplySupported: isHeaderSection,\n\t\t\t\t\t\t\tshouldCreateTemplateChartVisualization: true\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst subSectionTitle: string = subSection.title ? subSection.title : \"\";\n\t\t\t\t\t\tconst controlTitle =\n\t\t\t\t\t\t\t(presentation.visualizations[0] as TableVisualization)?.annotation?.title ||\n\t\t\t\t\t\t\t(presentation.visualizations[0] as ChartVisualization)?.title;\n\t\t\t\t\t\tconst isPartOfPreview = facetDefinition.annotations?.UI?.PartOfPreview?.valueOf() !== false;\n\t\t\t\t\t\tconst showSubSectionTitle = getShowSubSectionTitle(controlTitle ?? \"\", subSectionTitle, hasSingleContent);\n\n\t\t\t\t\t\t// Either calculate the title visibility statically or dynamically\n\t\t\t\t\t\t// Additionally to checking whether a title exists,\n\t\t\t\t\t\t// we also need to check that the facet title is not the same as the control (i.e. visualization) title;\n\t\t\t\t\t\t// this is done by including \"showSubSectionTitle\" in the and expression\n\t\t\t\t\t\tconst dataVisualizationTitleVisible = ifElse(\n\t\t\t\t\t\t\tisVisibilityDynamic,\n\t\t\t\t\t\t\tand(isVisibleExpression, not(equal(title, \"undefined\")), showSubSectionTitle),\n\t\t\t\t\t\t\tand(\n\t\t\t\t\t\t\t\tcompileExpression(isVisibleExpression) !== undefined,\n\t\t\t\t\t\t\t\ttitle !== \"undefined\",\n\t\t\t\t\t\t\t\ttitle !== undefined,\n\t\t\t\t\t\t\t\tisVisibleExpression,\n\t\t\t\t\t\t\t\tshowSubSectionTitle\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst dataVisualizationSubSection: DataVisualizationSubSection = {\n\t\t\t\t\t\t\t...subSection,\n\t\t\t\t\t\t\ttype: SubSectionType.DataVisualization,\n\t\t\t\t\t\t\tlevel: level,\n\t\t\t\t\t\t\tpresentation: presentation,\n\t\t\t\t\t\t\tisPartOfPreview,\n\t\t\t\t\t\t\tshowSubSectionTitle: compileExpression(showSubSectionTitle), // This is used on the ObjectPageSubSection\n\t\t\t\t\t\t\tdataVisualizationTitleVisible: compileExpression(dataVisualizationTitleVisible) // This is used to hide the Title control above data visualizations\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn dataVisualizationSubSection;\n\n\t\t\t\t\tcase UIAnnotationTerms.FieldGroup:\n\t\t\t\t\tcase UIAnnotationTerms.Identification:\n\t\t\t\t\tcase UIAnnotationTerms.DataPoint:\n\t\t\t\t\tcase UIAnnotationTerms.StatusInfo:\n\t\t\t\t\tcase CommunicationAnnotationTerms.Contact:\n\t\t\t\t\t\t// All those element belong to a from facet\n\t\t\t\t\t\tconst facetActions = getFacetActions(facetDefinition, converterContext),\n\t\t\t\t\t\t\tformElementSubSection: FormSubSection = {\n\t\t\t\t\t\t\t\t...subSection,\n\t\t\t\t\t\t\t\ttype: SubSectionType.Form,\n\t\t\t\t\t\t\t\tlevel: level,\n\t\t\t\t\t\t\t\tformDefinition: createFormDefinition(\n\t\t\t\t\t\t\t\t\tfacetDefinition,\n\t\t\t\t\t\t\t\t\tcompileExpression(isVisibleExpression),\n\t\t\t\t\t\t\t\t\tconverterContext,\n\t\t\t\t\t\t\t\t\tfacetActions.actions,\n\t\t\t\t\t\t\t\t\t{ useSingleTextAreaFieldAsNotes }\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tactions: facetActions.actions.filter((action) => action.facetName === undefined),\n\t\t\t\t\t\t\t\tcommandActions: facetActions.commandActions\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\treturn formElementSubSection;\n\n\t\t\t\t\tcase UIAnnotationTerms.Note:\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...subSection,\n\t\t\t\t\t\t\ttype: SubSectionType.Notes\n\t\t\t\t\t\t};\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tunsupportedText = `For ${facetDefinition.Target.$target.term} Fragment`;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase UIAnnotationTypes.ReferenceURLFacet:\n\t\t\tunsupportedText = \"For Reference URL Facet\";\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\t// If we reach here we ended up with an unsupported SubSection type\n\tconst unsupportedSubSection: UnsupportedSubSection = {\n\t\t...subSection,\n\t\ttype: SubSectionType.Unknown,\n\t\ttext: unsupportedText\n\t};\n\treturn unsupportedSubSection;\n}\n\n/**\n * Checks whether to hide or show the subsection title.\n * @param controlTitle\n * @param subSectionTitle\n * @param hasSingleContent\n * @returns Boolean value or expression for showSubSectionTitle\n */\nexport function getShowSubSectionTitle(\n\tcontrolTitle: string,\n\tsubSectionTitle: string,\n\thasSingleContent: boolean\n): BindingToolkitExpression<boolean> {\n\t// visible shall be true if there are multiple content or if the control and subsection title are different\n\treturn or(not(hasSingleContent), notEqual(resolveBindingString(controlTitle), resolveBindingString(subSectionTitle)));\n}\n\nfunction createFormActionReducer(\n\tactions: BaseAction[],\n\tfacetDefinition: ReferenceFacetTypes,\n\tconverterContext: ConverterContext<PageContextPathTarget>\n): BaseAction[] {\n\tconst referenceTarget = facetDefinition.Target.$target;\n\tconst targetValue = facetDefinition.Target.value;\n\tlet manifestActions: Record<string, CustomAction> = {};\n\tlet dataFieldCollection: DataFieldAbstractTypes[] = [];\n\tlet navigationPropertyPath: string | undefined;\n\t[navigationPropertyPath] = targetValue.split(\"@\");\n\tif (navigationPropertyPath.length > 0) {\n\t\tif (navigationPropertyPath.lastIndexOf(\"/\") === navigationPropertyPath.length - 1) {\n\t\t\tnavigationPropertyPath = navigationPropertyPath.substring(0, navigationPropertyPath.length - 1);\n\t\t}\n\t} else {\n\t\tnavigationPropertyPath = undefined;\n\t}\n\n\tif (referenceTarget) {\n\t\tswitch (referenceTarget.term) {\n\t\t\tcase UIAnnotationTerms.FieldGroup:\n\t\t\t\tdataFieldCollection = (referenceTarget as FieldGroup).Data;\n\t\t\t\tmanifestActions = getActionsFromManifest(\n\t\t\t\t\tconverterContext.getManifestControlConfiguration<FormManifestConfiguration>(referenceTarget).actions as\n\t\t\t\t\t\t| Record<string, ManifestAction>\n\t\t\t\t\t\t| undefined,\n\t\t\t\t\tconverterContext,\n\t\t\t\t\t[],\n\t\t\t\t\tundefined,\n\t\t\t\t\tundefined,\n\t\t\t\t\tundefined,\n\t\t\t\t\tfacetDefinition.fullyQualifiedName\n\t\t\t\t).actions;\n\t\t\t\tbreak;\n\t\t\tcase UIAnnotationTerms.Identification:\n\t\t\tcase UIAnnotationTerms.StatusInfo:\n\t\t\t\tif (referenceTarget.qualifier) {\n\t\t\t\t\tdataFieldCollection = referenceTarget;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tactions = dataFieldCollection.reduce((actionReducer, dataField: DataFieldAbstractTypes) => {\n\t\t\tswitch (dataField.$Type) {\n\t\t\t\tcase UIAnnotationTypes.DataFieldForIntentBasedNavigation:\n\t\t\t\t\tif (dataField.RequiresContext?.valueOf() === true) {\n\t\t\t\t\t\tconverterContext\n\t\t\t\t\t\t\t.getDiagnostics()\n\t\t\t\t\t\t\t.addIssue(IssueCategory.Annotation, IssueSeverity.Low, IssueType.MALFORMED_DATAFIELD_FOR_IBN.REQUIRESCONTEXT);\n\t\t\t\t\t}\n\t\t\t\t\tif (dataField.Inline?.valueOf() === true) {\n\t\t\t\t\t\tconverterContext\n\t\t\t\t\t\t\t.getDiagnostics()\n\t\t\t\t\t\t\t.addIssue(IssueCategory.Annotation, IssueSeverity.Low, IssueType.MALFORMED_DATAFIELD_FOR_IBN.INLINE);\n\t\t\t\t\t}\n\t\t\t\t\tif (dataField.Determining?.valueOf() === true) {\n\t\t\t\t\t\tconverterContext\n\t\t\t\t\t\t\t.getDiagnostics()\n\t\t\t\t\t\t\t.addIssue(IssueCategory.Annotation, IssueSeverity.Low, IssueType.MALFORMED_DATAFIELD_FOR_IBN.DETERMINING);\n\t\t\t\t\t}\n\t\t\t\t\tconst mNavigationParameters: NavigationParameters = {};\n\t\t\t\t\tif (dataField.Mapping) {\n\t\t\t\t\t\tmNavigationParameters.semanticObjectMapping = getSemanticObjectMapping(dataField.Mapping);\n\t\t\t\t\t}\n\t\t\t\t\tactionReducer.push({\n\t\t\t\t\t\ttype: ActionType.DataFieldForIntentBasedNavigation,\n\t\t\t\t\t\tid: getFormID(facetDefinition, dataField),\n\t\t\t\t\t\tkey: KeyHelper.generateKeyFromDataField(dataField),\n\t\t\t\t\t\ttext: dataField.Label?.toString(),\n\t\t\t\t\t\tannotationPath: \"\",\n\t\t\t\t\t\tenabled:\n\t\t\t\t\t\t\tdataField.NavigationAvailable !== undefined\n\t\t\t\t\t\t\t\t? compileExpression(equal(getExpressionFromAnnotation(dataField.NavigationAvailable), true))\n\t\t\t\t\t\t\t\t: \"true\",\n\t\t\t\t\t\tvisible: compileExpression(not(equal(getExpressionFromAnnotation(dataField.annotations?.UI?.Hidden), true))),\n\t\t\t\t\t\tbuttonType: getButtonType(dataField.annotations?.UI?.Emphasized),\n\t\t\t\t\t\tpress: compileExpression(\n\t\t\t\t\t\t\tfn(\"._intentBasedNavigation.navigate\", [\n\t\t\t\t\t\t\t\tgetExpressionFromAnnotation(dataField.SemanticObject),\n\t\t\t\t\t\t\t\tgetExpressionFromAnnotation(dataField.Action),\n\t\t\t\t\t\t\t\tmNavigationParameters\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcustomData: compileExpression({\n\t\t\t\t\t\t\tsemanticObject: getExpressionFromAnnotation(dataField.SemanticObject),\n\t\t\t\t\t\t\taction: getExpressionFromAnnotation(dataField.Action)\n\t\t\t\t\t\t})\n\t\t\t\t\t} as AnnotationAction);\n\t\t\t\t\tbreak;\n\t\t\t\tcase UIAnnotationTypes.DataFieldForAction:\n\t\t\t\t\tconst formManifestActionsConfiguration =\n\t\t\t\t\t\tconverterContext.getManifestControlConfiguration<FormManifestConfiguration>(referenceTarget).actions;\n\t\t\t\t\tactionReducer.push(\n\t\t\t\t\t\tgetDataFieldAnnotationAction(\n\t\t\t\t\t\t\tdataField,\n\t\t\t\t\t\t\tfacetDefinition,\n\t\t\t\t\t\t\tconverterContext,\n\t\t\t\t\t\t\tformManifestActionsConfiguration,\n\t\t\t\t\t\t\tnavigationPropertyPath\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase UIAnnotationTypes.DataFieldForActionGroup:\n\t\t\t\t\tactionReducer.push({\n\t\t\t\t\t\ttype: ActionType.Menu,\n\t\t\t\t\t\ttext: dataField.Label?.toString(),\n\t\t\t\t\t\tkey: KeyHelper.generateKeyFromDataField(dataField),\n\t\t\t\t\t\tid: getFormID(facetDefinition, dataField),\n\t\t\t\t\t\tvisible: compileExpression(not(equal(getExpressionFromAnnotation(dataField.annotations?.UI?.Hidden), true))),\n\t\t\t\t\t\tmenu: dataField.Actions.map((action) => {\n\t\t\t\t\t\t\tconst formManifestMenuActionsConfiguration =\n\t\t\t\t\t\t\t\tconverterContext.getManifestControlConfiguration<FormManifestConfiguration>(referenceTarget).actions;\n\t\t\t\t\t\t\treturn getDataFieldAnnotationAction(\n\t\t\t\t\t\t\t\taction as DataFieldForActionTypes,\n\t\t\t\t\t\t\t\tfacetDefinition,\n\t\t\t\t\t\t\t\tconverterContext,\n\t\t\t\t\t\t\t\tformManifestMenuActionsConfiguration,\n\t\t\t\t\t\t\t\tnavigationPropertyPath\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn actionReducer;\n\t\t}, actions);\n\t}\n\n\t// no overrides here, they are done in a later step in addFormMenuActions\n\treturn insertCustomElements(actions, manifestActions);\n}\n\nfunction getDataFieldAnnotationAction(\n\tdataField: DataFieldForActionTypes,\n\tfacetDefinition: ReferenceFacetTypes,\n\tconverterContext: ConverterContext<PageContextPathTarget>,\n\tformManifestActionsConfiguration: Record<string, ManifestAction> | undefined,\n\tnavigationPropertyPath?: string\n): AnnotationAction {\n\tconst key = KeyHelper.generateKeyFromDataField(dataField);\n\treturn {\n\t\ttype: ActionType.DataFieldForAction,\n\t\tid: getFormID(facetDefinition, dataField),\n\t\tkey: KeyHelper.generateKeyFromDataField(dataField),\n\t\ttext: dataField.Label?.toString(),\n\t\tannotationPath: \"\",\n\t\tenabled: getEnabledForAnnotationAction(converterContext, dataField.ActionTarget),\n\t\tbinding: navigationPropertyPath ? `{ 'path' : '${navigationPropertyPath}'}` : undefined,\n\t\tvisible: compileExpression(not(equal(getExpressionFromAnnotation(dataField.annotations?.UI?.Hidden), true))),\n\t\trequiresDialog: isActionWithDialog(dataField),\n\t\tbuttonType: getButtonType(dataField.annotations?.UI?.Emphasized),\n\t\tpress: compileExpression(\n\t\t\tfn(\n\t\t\t\t\"invokeAction\",\n\t\t\t\t[\n\t\t\t\t\tdataField.Action,\n\t\t\t\t\t{\n\t\t\t\t\t\tcontexts: fn(\"getBindingContext\", [], pathInModel(\"\", \"$source\")),\n\t\t\t\t\t\tinvocationGrouping: (dataField.InvocationGrouping === \"UI.OperationGroupingType/ChangeSet\"\n\t\t\t\t\t\t\t? \"ChangeSet\"\n\t\t\t\t\t\t\t: \"Isolated\") as OperationGroupingType,\n\t\t\t\t\t\tlabel: dataField.Label?.toString(),\n\t\t\t\t\t\tmodel: fn(\"getModel\", [], pathInModel(\"/\", \"$source\")),\n\t\t\t\t\t\tisNavigable: isActionNavigable(formManifestActionsConfiguration && formManifestActionsConfiguration[key])\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tref(\".editFlow\")\n\t\t\t)\n\t\t),\n\t\tfacetName: dataField.Inline ? facetDefinition.fullyQualifiedName : undefined\n\t};\n}\n\nexport function isDialog(actionDefinition: Action | undefined): string {\n\tif (actionDefinition) {\n\t\tconst bCritical = actionDefinition.annotations?.Common?.IsActionCritical;\n\t\tif (actionDefinition.parameters.length > 1 || bCritical) {\n\t\t\treturn \"Dialog\";\n\t\t} else {\n\t\t\treturn \"None\";\n\t\t}\n\t} else {\n\t\treturn \"None\";\n\t}\n}\n\nexport function createCustomSubSections(\n\tmanifestSubSections: Record<string, ManifestSubSection>,\n\tconverterContext: ConverterContext<PageContextPathTarget>\n): Record<string, CustomObjectPageSubSection> {\n\tconst subSections: Record<string, CustomObjectPageSubSection> = {};\n\tObject.keys(manifestSubSections).forEach(\n\t\t(subSectionKey) =>\n\t\t\t(subSections[subSectionKey] = createCustomSubSection(manifestSubSections[subSectionKey], subSectionKey, converterContext))\n\t);\n\treturn subSections;\n}\n\nexport function createCustomSubSection(\n\tmanifestSubSection: ManifestSubSection,\n\tsubSectionKey: string,\n\tconverterContext: ConverterContext<PageContextPathTarget>\n): CustomObjectPageSubSection {\n\tconst sideContent: SideContentDef | undefined = manifestSubSection.sideContent\n\t\t? {\n\t\t\t\ttemplate: manifestSubSection.sideContent.template,\n\t\t\t\tid: getSideContentID(subSectionKey),\n\t\t\t\tvisible: false,\n\t\t\t\tequalSplit: manifestSubSection.sideContent.equalSplit\n\t\t  }\n\t\t: undefined;\n\tlet position = manifestSubSection.position;\n\tif (!position) {\n\t\tposition = {\n\t\t\tplacement: Placement.After\n\t\t};\n\t}\n\tconst isVisible = manifestSubSection.visible !== undefined ? manifestSubSection.visible : true;\n\tconst isDynamicExpression = isVisible && typeof isVisible === \"string\" && isVisible.indexOf(\"{=\") === 0;\n\tconst manifestActions = getActionsFromManifest(manifestSubSection.actions, converterContext);\n\tconst subSectionDefinition = {\n\t\ttype: SubSectionType.Unknown,\n\t\tid: manifestSubSection.id || getCustomSubSectionID(subSectionKey),\n\t\tactions: manifestActions.actions,\n\t\tkey: subSectionKey,\n\t\ttitle: manifestSubSection.title,\n\t\tlevel: 1,\n\t\tposition: position,\n\t\tvisible: manifestSubSection.visible !== undefined ? manifestSubSection.visible : \"true\",\n\t\tsideContent: sideContent,\n\t\tisVisibilityDynamic: isDynamicExpression,\n\t\tobjectPageLazyLoaderEnabled: manifestSubSection.enableLazyLoading ?? false,\n\t\tcomponentName: \"\",\n\t\tsettings: \"\"\n\t};\n\tif (manifestSubSection.template || manifestSubSection.name) {\n\t\tsubSectionDefinition.type = SubSectionType.XMLFragment;\n\t\t(subSectionDefinition as unknown as XMLFragmentSubSection).template = manifestSubSection.template || manifestSubSection.name || \"\";\n\t} else if (manifestSubSection.embeddedComponent !== undefined) {\n\t\tsubSectionDefinition.type = SubSectionType.EmbeddedComponent;\n\t\tsubSectionDefinition.componentName = manifestSubSection.embeddedComponent.name;\n\t\tif (manifestSubSection.embeddedComponent.settings !== undefined) {\n\t\t\tsubSectionDefinition.settings = JSON.stringify(manifestSubSection.embeddedComponent.settings);\n\t\t}\n\t} else {\n\t\tsubSectionDefinition.type = SubSectionType.Placeholder;\n\t}\n\treturn subSectionDefinition as CustomObjectPageSubSection;\n}\n\n/**\n * Evaluate if the condensed mode can be applied on the table.\n * @param currentFacet\n * @param facetsToCreateInSection\n * @param converterContext\n * @returns `true` for compliant, false otherwise\n */\nfunction getCondensedTableLayoutCompliance(\n\tcurrentFacet: FacetTypes,\n\tfacetsToCreateInSection: FacetTypes[],\n\tconverterContext: ConverterContext<PageContextPathTarget>\n): boolean {\n\tconst manifestWrapper = converterContext.getManifestWrapper();\n\tif (manifestWrapper.useIconTabBar()) {\n\t\t// If the OP use the tab based we check if the facets that will be created for this section are all non visible\n\t\treturn hasNoOtherVisibleTableInTargets(currentFacet, facetsToCreateInSection);\n\t} else {\n\t\tconst entityType = converterContext.getEntityType();\n\t\tif (entityType.annotations?.UI?.Facets?.length && entityType.annotations?.UI?.Facets?.length > 1) {\n\t\t\treturn hasNoOtherVisibleTableInTargets(currentFacet, facetsToCreateInSection);\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n}\n\nfunction hasNoOtherVisibleTableInTargets(currentFacet: FacetTypes, facetsToCreateInSection: FacetTypes[]): boolean {\n\treturn facetsToCreateInSection.every(function (subFacet) {\n\t\tif (subFacet !== currentFacet) {\n\t\t\tif (subFacet.$Type === UIAnnotationTypes.ReferenceFacet) {\n\t\t\t\tconst refFacet = subFacet;\n\t\t\t\tif (\n\t\t\t\t\trefFacet.Target?.$target?.term === UIAnnotationTerms.LineItem ||\n\t\t\t\t\trefFacet.Target?.$target?.term === UIAnnotationTerms.PresentationVariant ||\n\t\t\t\t\trefFacet.Target.$target?.term === UIAnnotationTerms.SelectionPresentationVariant\n\t\t\t\t) {\n\t\t\t\t\treturn refFacet.annotations?.UI?.Hidden !== undefined ? refFacet.annotations?.UI?.Hidden : false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tconst subCollectionFacet = subFacet as CollectionFacetTypes;\n\t\t\t\treturn subCollectionFacet.Facets.every(function (facet) {\n\t\t\t\t\tconst subRefFacet = facet as ReferenceFacetTypes;\n\t\t\t\t\tif (\n\t\t\t\t\t\tsubRefFacet.Target?.$target?.term === UIAnnotationTerms.LineItem ||\n\t\t\t\t\t\tsubRefFacet.Target?.$target?.term === UIAnnotationTerms.PresentationVariant ||\n\t\t\t\t\t\tsubRefFacet.Target?.$target?.term === UIAnnotationTerms.SelectionPresentationVariant\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn subRefFacet.annotations?.UI?.Hidden !== undefined ? subRefFacet.annotations?.UI?.Hidden : false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t});\n}\n"],"mappings":"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","ignoreList":[],"file":"SubSection-dbg.js"}