/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/BindingToolkit","sap/fe/core/formatters/ValueFormatter","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataFieldFormatters","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/UIFormatters","../converters/annotations/DataField"],function(t,e,a,n,o,r,i,s){"use strict";var l={};var c=s.isDataField;var u=r.getRelativePaths;var f=r.getContextRelativeTargetObjectPath;var T=r.enhanceDataModelPath;var p=o.getLabelForConnectedFields;var d=n.isPropertyPathExpression;var m=n.isPathAnnotationExpression;var v=a.UI;var g=a.Draft;var E=t.transformRecursively;var I=t.pathInModel;var D=t.or;var _=t.not;var h=t.isUndefinedExpression;var O=t.isEmpty;var y=t.isConstant;var A=t.ifElse;var C=t.getExpressionFromAnnotation;var F=t.formatWithTypeInformation;var N=t.formatResult;var x=t.constant;var $=t.compileExpression;const V=function(t,e){return E(t,"PathInModel",t=>{let a=t;if(t.modelName===undefined){const n=T(e,t.path);a=F(n.targetObject,t)}return a})};l.formatValueRecursively=V;const b=t=>{const e=t.targetObject;return d(e)?e.$target:e};const P=t=>{const e=t.targetEntitySet?.annotations?.Common?.DraftRoot;const a=t.targetEntitySet?.annotations?.Common?.DraftNode;if(!!e||!!a){return _(g.IsNewObject)}return true};const R=t=>t._type==="Constant"?x(!t.value):O(t);const U=function(t,e,a){const n=a?.displayMode;const o=b(t);const r=n||i.getDisplayMode(t);const s=o?.annotations?.Common?.Text;const l=u(t);if(o){e=F(o,e)}let c=[e];if(r!=="Value"&&s){switch(r){case"Description":c=[C(s,l)];break;case"DescriptionValue":const t=a?.splitTitleOnTwoLines===undefined?A(!!s.annotations?.UI?.TextArrangement,e,x("")):A(!!a?.splitTitleOnTwoLines,x(""),e);c=[C(s,l),t];break;case"ValueDescription":c=[e,A(!!a?.splitTitleOnTwoLines,x(""),C(s,l))];break}}return c};const L=function(t,e){return E(t,"PathInModel",t=>{if(t.modelName!==undefined)return t;const a=T(e,t.path);return U(a,t)})};const M=function(){const t=I("T_NEW_OBJECT","sap.fe.i18n");return N([t],e.formatTitle)};const H=t=>{const e=b(t);if(e&&e.annotations?.Core?.Computed){return v.IsInactive}else{return x(false)}};const j=function(t,e,a){let n;if(e.$Type==="com.sap.vocabularies.UI.v1.DataField"){n=C(e.Value);if(e.Value?.$target?.annotations.Common?.Text?.annotations?.UI?.TextArrangement){n=L(n,t)}n=V(n,t)}if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target.$target?.$Type==="com.sap.vocabularies.UI.v1.ConnectedFieldsType"){const e=T(t,"$Type/@UI.HeaderInfo/Title/Target/$AnnotationPath");n=p(e,a,false)}return n};const B=function(t,a,n,o,r,i){const s=i||e.formatTitle;let l=I("T_NEW_OBJECT","sap.fe.i18n");let u;let p=false;let d;if(c(o?.Title)&&o?.Title.Value?.$target?.annotations?.Common?.ExternalID){d={...o.Title,Value:{...o.Title.Value,$target:{...o.Title.Value.$target}}};d.Value.path=o.Title.Value.$target?.annotations?.Common?.ExternalID.path;d.Value.$target=o.Title.Value.$target?.annotations?.Common?.ExternalID.$target}if(o?.Title?.$Type&&r){if(d===undefined){u=j(t,o.Title,a)}else{u=j(t,d,a)}l=M();if(y(u)&&u.value===""){p=true}}else if(o&&(o.Title===undefined||o.Title.toString()==="")){p=true;if(!r){u=x("")}}if(u&&y(u)){return $(u)}if(m(t.targetObject)){t=T(t,t.targetObject.path)}const g=I(f(t));let E;if(u){E=Array.isArray(u)?u:[u]}else{E=U(t,g,n)}const O=R(E[0]);const C=H(t);const F=N(E,s);u=A(O,A(D(p&&P(t),C),"",A(h(x(i)),A(D(v.IsCreateMode,_(P(t))),l,I("T_ANNOTATION_HELPER_DEFAULT_HEADER_TITLE_NO_HEADER_INFO","sap.fe.i18n")),A(_(P(t)),r?.resourceModel.getText("T_NEW_OBJECT"),r?.resourceModel.getText("T_ANNOTATION_HELPER_DEFAULT_HEADER_TITLE_NO_HEADER_INFO")))),F);return $(u)};l.getTitleBindingExpression=B;return l},false);
//# sourceMappingURL=TitleHelper.js.map