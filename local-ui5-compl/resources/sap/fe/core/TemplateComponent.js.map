{"version":3,"file":"TemplateComponent.js","names":["TemplateComponent","_dec","defineUI5Class","_dec2","implementInterface","_dec3","_dec4","property","type","defaultValue","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","event","_dec18","_dec19","_class","_class2","_UIComponent","_this","_len","arguments","length","args","Array","_key","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_inheritsLoose","_proto","prototype","setContainer","oContainer","fireEvent","container","init","oAppComponent","CommonUtils","getAppComponent","getExtensionComponent","setRootController","controller","_rootController","getRootController","rootControl","getRootControl","rootController","getController","onPageReady","mParameters","getNavigationConfiguration","sTargetPath","mNavigation","navigation","getViewData","mProperties","getMetadata","getAllProperties","oViewData","Object","keys","reduce","mViewData","sPropertyName","get","preprocessorContext","fclEnabled","_isFclEnabled","_getPageTitleInformation","getExtensionAPI","getMetaModel","metaModelReference","models","metaModel","startsWith","getMetaModelById","getModel","getFullContextPath","fullContextPath","UIComponent","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./TemplateComponent.ts"],"sourcesContent":["import type { ConvertedMetadata } from \"@sap-ux/vocabularies-types\";\nimport { defineUI5Class, event, implementInterface, property } from \"sap/fe/base/ClassSupport\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type ExtensionAPI from \"sap/fe/core/ExtensionAPI\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport type { IBuildingBlockOwnerComponent } from \"sap/fe/core/buildingBlocks/IBuildingBlockOwnerComponent\";\nimport type ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport type { NavigationTargetConfiguration } from \"sap/fe/core/converters/ManifestSettings\";\nimport { getMetaModelById } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { DefinitionContext, DefinitionPage } from \"sap/fe/core/definition/FEDefinition\";\nimport type { TitleInformation } from \"sap/fe/core/rootView/RootViewBaseController\";\nimport type ComponentContainer from \"sap/ui/core/ComponentContainer\";\nimport UIComponent from \"sap/ui/core/UIComponent\";\nimport type { IAsyncContentCreation } from \"sap/ui/core/library\";\nimport type View from \"sap/ui/core/mvc/View\";\nimport type BaseContext from \"sap/ui/model/Context\";\nimport type Model from \"sap/ui/model/Model\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\nexport type NavigationConfiguration = {\n\tdetail: {\n\t\troute: string;\n\t\tparameters: unknown;\n\t\toutbound?: string;\n\t\toutboundDetail?: NavigationTargetConfiguration[\"outboundDetail\"];\n\t};\n\tcreate: {\n\t\troute: string;\n\t\tparameters: unknown;\n\t\toutbound?: string;\n\t\toutboundDetail?: NavigationTargetConfiguration[\"outboundDetail\"];\n\t};\n};\n\nexport type XMLPreprocessorContext = {\n\tbindingContexts: Record<string, BaseContext | null>;\n\tmodels: Record<string, Model>;\n\tfullContextPath: string;\n\tgetConvertedMetadata: () => ConvertedMetadata;\n\tgetDefinitionContext: () => DefinitionContext;\n\tgetDefinitionForPage: () => DefinitionPage;\n\tappComponent: AppComponent;\n\tviewId: string;\n};\n\n@defineUI5Class(\"sap.fe.core.TemplateComponent\")\nclass TemplateComponent extends UIComponent implements IAsyncContentCreation, IBuildingBlockOwnerComponent {\n\t@implementInterface(\"sap.ui.core.IAsyncContentCreation\")\n\t__implements__sap_ui_core_IAsyncContentCreation = true;\n\n\t@implementInterface(\"sap.fe.core.buildingBlocks.IBuildingBlockOwnerComponent\")\n\t__implements__sap_fe_core_buildingBlocks_IBuildingBlockOwnerComponent = true;\n\n\t/**\n\t * Name of the OData entity set\n\t */\n\t@property({ type: \"string\", defaultValue: null })\n\tentitySet: string | null = null;\n\n\t/**\n\t * Context Path for rendering the template\n\t */\n\t@property({ type: \"string\", defaultValue: null })\n\tcontextPath: string | null = null;\n\n\t@property({ type: \"object\" })\n\tpreprocessorContext?: XMLPreprocessorContext;\n\n\t/**\n\t * The pattern for the binding context to be create based on the parameters from the navigation\n\t * If not provided we'll default to what was passed in the URL\n\t */\n\t@property({ type: \"string\" })\n\tbindingContextPattern!: string;\n\n\t/**\n\t * Map of used OData navigations and its routing targets\n\t */\n\t@property({ type: \"object\" })\n\tnavigation!: Record<string, NavigationConfiguration>;\n\n\t/**\n\t * Enhance the i18n bundle used for this page with one or more app specific i18n resource bundles or resource models\n\t * or a combination of both. The last resource bundle/model is given highest priority\n\t */\n\t@property({ type: \"string[]\" })\n\tenhanceI18n!: string[];\n\n\t/**\n\t * Define control related configuration settings\n\t */\n\t@property({ type: \"object\" })\n\tcontrolConfiguration?: Record<string, unknown>;\n\n\t/**\n\t * Adjusts the template content\n\t */\n\t@property({ type: \"object\" })\n\tcontent?: Record<string, unknown>;\n\n\t/**\n\t * Whether or not you can reach this page directly through semantic bookmarks\n\t */\n\t@property({ type: \"boolean\" })\n\tallowDeepLinking!: boolean;\n\n\t/**\n\t * Defines the context path on the component that is refreshed when the app is restored using keep alive mode\n\t */\n\t@property({ type: \"object\" })\n\trefreshStrategyOnAppRestore: unknown;\n\n\t@property({ type: \"string\" })\n\tviewType = \"XML\";\n\n\t@property({ type: \"string\" })\n\tviewName?: string;\n\n\t@property({ type: \"string\" })\n\t_jsxViewName = \"\";\n\n\t@event()\n\tcontainerDefined!: Function;\n\n\t@event()\n\theroesBatchReceived!: Function;\n\n\t@event()\n\tworkersBatchReceived!: Function;\n\n\tprotected oAppComponent!: AppComponent;\n\n\tprivate _rootController?: PageController;\n\n\t// The id of a fragment being processed, it will take priority in the ID generation\n\tprivate _temporaryFragmentId?: string;\n\n\tsetContainer(oContainer: ComponentContainer): this {\n\t\tsuper.setContainer(oContainer);\n\t\tthis.fireEvent(\"containerDefined\", { container: oContainer });\n\t\treturn this;\n\t}\n\n\tinit(): void {\n\t\tthis.oAppComponent = CommonUtils.getAppComponent(this);\n\t\tsuper.init();\n\t}\n\n\t// This method is called by UI5 core to access to the component containing the customizing configuration.\n\t// as controller extensions are defined in the manifest for the app component and not for the\n\t// template component we return the app component.\n\tgetExtensionComponent(): AppComponent {\n\t\treturn this.oAppComponent;\n\t}\n\n\tgetAppComponent(): AppComponent {\n\t\treturn this.oAppComponent;\n\t}\n\n\tsetRootController(controller: PageController): void {\n\t\tthis._rootController = controller;\n\t}\n\n\tgetRootController(): PageController | undefined {\n\t\tconst rootControl: View = this.getRootControl();\n\t\tlet rootController: PageController | undefined;\n\t\tif (rootControl && rootControl.getController) {\n\t\t\trootController = rootControl.getController() as PageController;\n\t\t} else {\n\t\t\trootController = this._rootController;\n\t\t}\n\t\treturn rootController;\n\t}\n\n\tonPageReady(mParameters: unknown): void {\n\t\tconst rootController = this.getRootController();\n\t\tif (rootController && rootController.onPageReady) {\n\t\t\trootController.onPageReady(mParameters);\n\t\t}\n\t}\n\n\tgetNavigationConfiguration(sTargetPath: string): NavigationConfiguration {\n\t\tconst mNavigation = this.navigation;\n\t\treturn mNavigation[sTargetPath];\n\t}\n\n\tgetViewData(): Record<string, unknown> {\n\t\tconst mProperties = this.getMetadata().getAllProperties();\n\t\tconst oViewData = Object.keys(mProperties).reduce((mViewData: Record<string, unknown>, sPropertyName: string) => {\n\t\t\tmViewData[sPropertyName] = mProperties[sPropertyName].get!(this);\n\t\t\treturn mViewData;\n\t\t}, {});\n\t\tdelete oViewData.preprocessorContext;\n\t\t// Access the internal _isFclEnabled which will be there\n\t\toViewData.fclEnabled = this.oAppComponent._isFclEnabled();\n\n\t\treturn oViewData;\n\t}\n\n\t_getPageTitleInformation(): TitleInformation {\n\t\tconst rootControl = this.getRootControl();\n\t\tif (rootControl && rootControl.getController() && rootControl.getController()._getPageTitleInformation) {\n\t\t\treturn rootControl.getController()._getPageTitleInformation();\n\t\t} else {\n\t\t\treturn {} as TitleInformation;\n\t\t}\n\t}\n\n\tgetExtensionAPI(): ExtensionAPI {\n\t\treturn this.getRootControl().getController().getExtensionAPI();\n\t}\n\n\t/**\n\t * Retrieves the metamodel for the given metamodel reference (ID / name or undefined for the default one).\n\t * @param metaModelReference The metamodel reference\n\t * @returns The correct metamodel if it exits\n\t */\n\tgetMetaModel(metaModelReference?: string): ODataMetaModel | undefined {\n\t\tif (!metaModelReference) {\n\t\t\treturn this.preprocessorContext?.models.metaModel as ODataMetaModel | undefined;\n\t\t} else if (metaModelReference.startsWith(\"id-\")) {\n\t\t\treturn getMetaModelById(metaModelReference);\n\t\t} else if (!this.getModel(metaModelReference)) {\n\t\t\treturn this.getAppComponent().getModel(metaModelReference)?.getMetaModel() as ODataMetaModel | undefined;\n\t\t} else {\n\t\t\treturn this.getModel(metaModelReference)?.getMetaModel() as ODataMetaModel | undefined;\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves the full context path for the given metamodel reference (ID / name or undefined for the default one).\n\t * @param metaModelReference The metamodel reference\n\t * @returns The correct full context path\n\t */\n\tgetFullContextPath(metaModelReference: string | undefined): string | undefined {\n\t\tif (!metaModelReference) {\n\t\t\treturn this.preprocessorContext?.fullContextPath;\n\t\t}\n\t}\n}\ninterface TemplateComponent {\n\t// TODO: this should be ideally be handled by the editflow/routing without the need to have this method in the object page - for now keep it here\n\tcreateDeferredContext?(\n\t\tsPath: string,\n\t\toListBinding: ODataListBinding | undefined,\n\t\tparentContext: Context | undefined,\n\t\tdata: object | undefined,\n\t\tbActionCreate: boolean\n\t): void;\n\tisOpenInEditMode(): boolean;\n\tgetRootControl(): { getController(): PageController } & View;\n\textendPageDefinition?(pageDefinition: {}, converterContext?: ConverterContext): {};\n\tgetModel(): ODataModel;\n\tgetModel(modelName: \"_pageModel\"): JSONModel;\n\tgetModel(modelName: string): Model | undefined;\n}\nexport default TemplateComponent;\n"],"mappings":"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","ignoreList":[]}