/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/ClassSupport","sap/fe/core/helpers/ResourceModelHelper","sap/fe/core/helpers/StableIdHelper","sap/m/Button","sap/m/CustomListItem","sap/m/Dialog","sap/m/Label","sap/m/List","sap/m/Text","sap/m/VBox","sap/ui/base/ManagedObject","sap/ui/core/CustomData","sap/ui/core/library","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs","sap/fe/base/jsx-runtime/Fragment"],function(e,t,s,a,i,o,r,n,c,l,u,d,p,h,D,f){"use strict";var T,g,L,_,S,A,m;var R={};var O=p.ValueState;var b=s.generate;var v=t.getResourceModel;var y=e.defineUI5Class;var x=e.defineReference;function M(e,t,s,a){s&&Object.defineProperty(e,t,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(a):void 0})}function E(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,F(e,t)}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function C(e,t,s,a,i){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function w(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let B=(T=y("sap.fe.core.controls.DataLossOrDraftDiscard.DraftDataLossDialog"),g=x(),L=x(),T(_=(S=function(e){function t(){var t;for(var s=arguments.length,a=new Array(s),i=0;i<s;i++){a[i]=arguments[i]}t=e.call(this,...a)||this;M(t,"dataLossDialog",A,t);M(t,"optionsList",m,t);t.shallForceDraftSaveOrDiscard=false;return t}R=t;E(t,e);var s=t.prototype;s.open=async function e(t){this.view=t.getView();this.shallForceDraftSaveOrDiscard=t.editFlow.shallForceDraftSaveOrDiscard();this.dataLossResourceModel=v(this.view);this.createContent();const s=()=>this.handleDataLossOk();this.optionsList.current?.addEventDelegate({onkeyup:function(e){if(e.key==="Enter"){s()}}});this.view.addDependent(this.dataLossDialog.current);this.dataLossDialog.current?.open();this.selectAndFocusFirstEntry();return new Promise(e=>{this.promiseResolve=e})};s.close=function e(){this.dataLossDialog.current?.close();this.dataLossDialog.current?.destroy()};s.handleDataLossOk=function e(){this.promiseResolve(this.getSelectedKey())};s.handleDataLossCancel=function e(){this.promiseResolve("cancel")};s.selectAndFocusFirstEntry=function e(){const t=this.optionsList.current?.getItems()[0];this.optionsList.current?.setSelectedItem(t);t?.focus()};s.getSelectedKey=function e(){const t=this.optionsList.current;return t.getSelectedItem().data("itemKey")};s.getConfirmButton=function e(){return h(a,{text:this.dataLossResourceModel.getText("C_COMMON_DIALOG_OK"),type:"Emphasized",press:()=>this.handleDataLossOk()})};s.getCancelButton=function e(){return h(a,{text:this.dataLossResourceModel.getText("C_COMMON_DIALOG_CANCEL"),press:()=>this.handleDataLossCancel()})};s.getItems=function e(t){const s=t?this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_SAVE_DRAFT_RBL"):this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_CREATE_ENTITY_RBL");const a=t?this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_SAVE_DRAFT_TOL"):this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_CREATE_ENTITY_TOL");const o=[];o.push(h(i,{customData:[new d({key:"itemKey",value:"draftDataLossOptionSave"})],children:D(l,{class:"sapUiTinyMargin",children:[h(r,{text:s,design:"Bold"}),h(c,{text:a})]})}));if(t||!this.shallForceDraftSaveOrDiscard){o.push(h(i,{customData:[new d({key:"itemKey",value:"draftDataLossOptionKeep"})],children:D(l,{class:"sapUiTinyMargin",children:[h(r,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_KEEP_DRAFT_RBL"),design:"Bold"}),h(c,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_KEEP_DRAFT_TOL")})]})}))}o.push(h(i,{customData:[new d({key:"itemKey",value:"draftDataLossOptionDiscard"})],children:D(l,{class:"sapUiTinyMargin",children:[h(r,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_DISCARD_DRAFT_RBL"),design:"Bold"}),h(c,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_DISCARD_DRAFT_TOL")})]})}));return o};s.createContent=function e(){const t=this.view.getBindingContext()?.getObject().HasActiveEntity===true;const s=t?this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_POPUP_MESSAGE_SAVE"):this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_POPUP_MESSAGE_CREATE");return h(o,{id:b([this.getId(),"draftDataLossDialog"]),title:this.dataLossResourceModel.getText("WARNING"),state:O.Warning,type:"Message",contentWidth:"22rem",ref:this.dataLossDialog,children:{content:D(f,{children:[h(c,{text:s,class:"sapUiTinyMarginBegin sapUiTinyMarginTopBottom"}),h(n,{mode:"SingleSelectLeft",showSeparators:"None",includeItemInSelection:"true",backgroundDesign:"Transparent",class:"sapUiNoContentPadding",ref:this.optionsList,items:this.getItems(t)})]}),buttons:D(f,{children:["confirmButton = ",this.getConfirmButton(),"cancelButton = ",this.getCancelButton()]})}})};return t}(u),A=C(S.prototype,"dataLossDialog",[g],{configurable:true,enumerable:true,writable:true,initializer:null}),m=C(S.prototype,"optionsList",[L],{configurable:true,enumerable:true,writable:true,initializer:null}),S))||_);R=B;return R},false);
//# sourceMappingURL=DraftDataLossDialog.js.map