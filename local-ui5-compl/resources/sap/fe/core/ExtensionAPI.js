/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2024 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/CommonUtils","sap/ui/base/Object","sap/ui/core/Component","sap/ui/model/json/JSONModel"],function(e,t,n,i,r,o){"use strict";var a,s,l,c,u,p,d,f,g;var v=t.property;var w=t.defineUI5Class;function h(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function b(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,m(e,t)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function y(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function _(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let x=(a=w("sap.fe.core.ExtensionAPI"),s=v({type:"sap.fe.core.controllerextensions.EditFlow"}),l=v({type:"sap.fe.core.controllerextensions.Routing"}),c=v({type:"sap.fe.core.controllerextensions.IntentBasedNavigation"}),a(u=(p=function(t){function i(e,n){var i;i=t.call(this)||this;h(i,"editFlow",d,i);h(i,"routing",f,i);h(i,"intentBasedNavigation",g,i);i._controller=e;i._view=e.getView();i.extension=i._controller.extension;i.editFlow=i._controller.editFlow;i.routing=i._controller.routing;i._routing=i._controller._routing;i.intentBasedNavigation=i._controller.intentBasedNavigation;i._prefix=n;return i}b(i,t);var a=i.prototype;a.getEditFlow=function e(){return this.editFlow};a.getRouting=function e(){return this.routing};a.getIntentBasedNavigation=function e(){return this.intentBasedNavigation};a.byId=function e(t){let n=this._view.byId(t);if(!n&&this._prefix){n=this._view.byId(`${this._prefix}--${t}`)}if(!n){return undefined}if(!n.isA("sap.fe.macros.MacroAPI")){let e=n.getParent();while(e){if(e.isA("sap.fe.macros.form.FormAPI")){break}if(e.isA("sap.fe.macros.MacroAPI")){throw new Error(`You attempted to access an internal control. This is risky and might change later. Instead access its stable API by using ID ${e.getId()}`)}e=e.getParent()}}return n};a.getModel=function e(t){let i;if(t&&t!=="ui"){i=n.getAppComponent(this._view);if(!i.getManifestEntry("sap.ui5").models[t]){return undefined}}return this._view.getModel(t)};a.addDependent=function e(t){this._view.addDependent(t)};a.removeDependent=function e(t){this._view.removeDependent(t)};a.navigateToTarget=function e(t,n){this._controller._routing.navigateToTarget(n,t)};a.loadFragment=async function t(i){var a=this;const s=r.getOwnerComponentFor(this._view);const l=this._view.getModel("_pageModel");const c=this._view.getModel("sap.fe.i18n");const u=this.getModel()?.getMetaModel();const p=s.getViewData();const d=s.getEntitySet()?`/${s.getEntitySet()}`:s.getContextPath();const f=new o(p),g={bindingContexts:{contextPath:u?.createBindingContext(i.contextPath||d),converterContext:l.createBindingContext("/",undefined,{noResolve:true}),viewData:p?f.createBindingContext("/"):null},models:{contextPath:u,converterContext:l,metaModel:u,viewData:f,"sap.fe.i18n":c},appComponent:n.getAppComponent(this._view)};let v;if(i.controller&&!i.controller?.isA?.("sap.fe.core.ExtensionAPI")){const e=this.getMetadata().getClass().extend(i.id+"-controller",{});for(const t in i.controller){const n=i.controller[t];if(n?.bind){const r=n.bind(i.controller);if(s){e.prototype[t]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return s.runAsOwner(()=>r.apply(a,t))}}else{e.prototype[t]=r}}else{Object.defineProperty(e.prototype,t,{get(){return i.controller?.[t]},set(e){if(i.controller){i.controller[t]=e}}})}}v=new e(this._controller);const t=v.isA;v.isA=e=>t.bind(v)(e)||this.isA(e)}else{v=i.controller??this}return s.runAsOwner(async()=>{const t=n.templateControlFragment(i.name,g,{controller:v,isXML:false,id:i.id,containingView:this._view});try{const e=await t;if(i.initialBindingContext!==undefined){e.setBindingContext(i.initialBindingContext)}this.addDependent(e);return e}catch(t){e.error(t)}})};a.updateAppState=async function e(){const t=this._controller.getView();const n=this._controller.getAppComponent();const i=await n.getAppStateHandler().createAppState({viewId:t.getId()});return i?.appStateData};a.runWithFPMContext=function e(t){const n=r.getOwnerComponentFor(this._view);return n.runAsOwner(t)};return i}(i),d=y(p.prototype,"editFlow",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),f=y(p.prototype,"routing",[l],{configurable:true,enumerable:true,writable:true,initializer:null}),g=y(p.prototype,"intentBasedNavigation",[c],{configurable:true,enumerable:true,writable:true,initializer:null}),p))||u);return x},false);
//# sourceMappingURL=ExtensionAPI.js.map