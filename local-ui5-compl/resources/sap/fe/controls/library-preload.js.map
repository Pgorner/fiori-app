{"version":3,"file":"library-preload.js","sections":[{"offset":{"line":1,"column":0},"map":{"version":3,"names":["AINotice","props","_jsx","Button","text","resourceBundle","getText","icon","type","ButtonType","Transparent","press","e","$disclaimerPopover","Popover","contentWidth","showArrow","showHeader","placement","PlacementType","Bottom","title","children","content","_jsxs","VBox","Text","class","footer","OverflowToolbar","_Fragment","ToolbarSpacer","close","openBy","getSource"],"sources":["./AINotice.tsx"],"sourcesContent":["import type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport type { Button$PressEvent } from \"sap/m/Button\";\nimport Button from \"sap/m/Button\";\nimport type Link from \"sap/m/Link\";\nimport OverflowToolbar from \"sap/m/OverflowToolbar\";\nimport Popover from \"sap/m/Popover\";\nimport Text from \"sap/m/Text\";\nimport ToolbarSpacer from \"sap/m/ToolbarSpacer\";\nimport VBox from \"sap/m/VBox\";\nimport { ButtonType, PlacementType } from \"sap/m/library\";\n\n/**\n * Tiny component to display a link that opens a popover with the AI notice.\n * @param props\n * @param props.resourceBundle\n * @returns The AI Notice component\n */\nfunction AINotice(props: { resourceBundle: ResourceBundle }): Link {\n\treturn (\n\t\t<Button\n\t\t\ttext={props.resourceBundle.getText(\"M_EASY_FILTER_FILTER_SET_AI\")}\n\t\t\ticon=\"sap-icon://ai\"\n\t\t\ttype={ButtonType.Transparent}\n\t\t\tpress={(e: Button$PressEvent): void => {\n\t\t\t\tconst $disclaimerPopover: Popover = (\n\t\t\t\t\t<Popover\n\t\t\t\t\t\tcontentWidth={\"22.8125rem\"}\n\t\t\t\t\t\tshowArrow={true}\n\t\t\t\t\t\tshowHeader={true}\n\t\t\t\t\t\tplacement={PlacementType.Bottom}\n\t\t\t\t\t\ttitle={props.resourceBundle.getText(\"M_EASY_FILTER_POPOVER_AI_TITLE\")}\n\t\t\t\t\t>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tcontent: (\n\t\t\t\t\t\t\t\t<VBox>\n\t\t\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\t\t\tclass=\"sapFeControlsAiPopoverText1\"\n\t\t\t\t\t\t\t\t\t\ttext={props.resourceBundle.getText(\"M_EASY_FILTER_POPOVER_AI_TEXT_1\")}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\t\t\tclass=\"sapFeControlsAiPopoverText2\"\n\t\t\t\t\t\t\t\t\t\ttext={props.resourceBundle.getText(\"M_EASY_FILTER_POPOVER_AI_TEXT_2\")}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</VBox>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tfooter: (\n\t\t\t\t\t\t\t\t<OverflowToolbar>\n\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\tcontent: (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<ToolbarSpacer />\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext={props.resourceBundle.getText(\"M_EASY_FILTER_POPOVER_CLOSE\")}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpress={(): void => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$disclaimerPopover?.close();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t</OverflowToolbar>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</Popover>\n\t\t\t\t) as Popover;\n\t\t\t\t$disclaimerPopover.openBy(e.getSource());\n\t\t\t}}\n\t\t/>\n\t);\n}\n\nexport default AINotice;\n"],"mappings":"AAAA;;;;qWAiBA,SAASA,EAASC,GACjB,OACCC,EAACC,EAAM,CACNC,KAAMH,EAAMI,eAAeC,QAAQ,+BACnCC,KAAK,gBACLC,KAAMC,EAAWC,YACjBC,MAAQC,IACP,MAAMC,EACLX,EAACY,EAAO,CACPC,aAAc,aACdC,UAAW,KACXC,WAAY,KACZC,UAAWC,EAAcC,OACzBC,MAAOpB,EAAMI,eAAeC,QAAQ,kCAAkCgB,SAErE,CACAC,QACCC,EAACC,EAAI,CAAAH,SAAA,CACJpB,EAACwB,EAAI,CACJC,MAAM,8BACNvB,KAAMH,EAAMI,eAAeC,QAAQ,qCAEpCJ,EAACwB,EAAI,CACJC,MAAM,8BACNvB,KAAMH,EAAMI,eAAeC,QAAQ,wCAItCsB,OACC1B,EAAC2B,EAAe,CAAAP,SACd,CACAC,QACCC,EAAAM,EAAA,CAAAR,SAAA,CACCpB,EAAC6B,EAAa,IACd7B,EAACC,EAAM,CACNC,KAAMH,EAAMI,eAAeC,QAAQ,+BACnCK,MAAOA,KACNE,GAAoBmB,OAAO,aAWrCnB,EAAmBoB,OAAOrB,EAAEsB,YAAY,GAI5C,CAAC,OAEclC,CAAQ","ignoreList":[],"sourceRoot":"easyFilter"}},{"offset":{"line":6,"column":0},"map":{"version":3,"names":["EasyFilterBarContainer","_dec","defineUI5Class","_dec2","property","type","_dec3","_dec4","_dec5","_dec6","_dec7","defineReference","_dec8","_dec9","aggregation","_dec10","event","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","defineState","_class","_class2","_Control","properties","others","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","shouldTokenChangeEventFired","inputFieldReady","Promise","resolve","resolveContentReady","initialize","_exports","_inheritsLoose","_proto","prototype","setEasyFilterLib","easyFilterLib","setProperty","easyfilter","__ui5_require_async","setAppId","async","appId","easyFilterInput","current","initShellHistoryProvider","setFilterBarMetadata","filterBarMetadata","tokens","getDefaultTokens","innerControlPopover","createPopoverForInnerControls","addDependent","state","showResult","length","isMandatoryCheckRequired","init","resourceBundle","Lib","getResourceBundleFor","content","createContent","mandatoryKeyMap","forEach","data","isRequired","required","name","push","key","label","keySpecificSelectedValues","defaultValue","onEnterPressed","e","onGoPress","getParameter","checkIfAllMandatoryTokensFilled","tokensInState","getUnSetMandatoryTokensInCurrentState","getActualTokensFromState","token","ValueState","Error","getText","openValueStateMessage","closeAllMandatoryValueStateMessages","easyTokens","tokenizer","getTokens","closeValueStateMessage","magicQuery","resetState","tokenizerEditable","fireEvent","easyFilterMetadata","version","entitySet","contextPath","fields","easyFilterResult","easyFilter","success","isHistoryEnabled","addRecentQuery","handleV1Success","setAsInvalid","message","removeNonMandatoryTokens","Log","error","unclear","filter","debug","JSON","stringify","EasyFilterUtils","formatData","updatedTokens","verifySingleSelectTokenValues","singleSelectTokenLabels","selectedValues","splice","singleValueMessageStripText","join","showSingleValueMessageStrip","_jsx","Popover","id","getId","showArrow","showHeader","placement","PlacementType","Bottom","children","footer","getToolbar","toolbar","okButton","getOkButton","showAllButton","getShowAllButton","OverflowToolbar","_jsxs","_Fragment","ToolbarSpacer","Button","text","ButtonType","Emphasized","onStateChange","changedProps","arguments","undefined","includes","map","deepClone","$topGoBtn","createReference","outVBox","VBox","FlexBox","renderType","EasyFilterInput","recommendedValues","ref","enterPressed","bind","queryChanged","query","liveChange","icon","class","press","onGoButtonPress","visible","bindState","alignItems","FlexAlignItems","Center","wrap","FlexWrap","Wrap","justifyContent","FlexJustifyContent","SpaceBetween","AINotice","Tokenizer","editable","and","idx","ctx","object","getObject","Token","items","mandatory","isKeyMandatory","delete","tokenIndex","findIndex","newTokens","concat","updateFilterInput","customData","CustomData","value","find","codeList","Transparent","$searchInput","focus","MessageStrip","showIcon","enableFormattedText","showCloseButton","close","FESRHelper","setSemanticStepname","currentInputValue","getValue","currentInputPlaceholder","getPlaceholder","setValue","None","updateTokenArray","changeType","newTokenSpecificValues","tokenKey","t","setSelectedValues","closeInnerControlPopover","newToken","currValue","setPlaceholder","getTokensInInitialState","mandatoryTokens","requiredKeys","getKey","render","rm","control","jsx","renderUsingRenderManager","getAggregation","Control","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./EasyFilterBarContainer.tsx"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type { EnhanceWithUI5, StateOf } from \"sap/fe/base/ClassSupport\";\nimport {\n\taggregation,\n\tcreateReference,\n\tdefineReference,\n\tdefineState,\n\tdefineUI5Class,\n\tevent,\n\tproperty,\n\ttype PropertiesOf\n} from \"sap/fe/base/ClassSupport\";\nimport type { Ref } from \"sap/fe/base/jsx-runtime/jsx\";\nimport jsx from \"sap/fe/base/jsx-runtime/jsx\";\nimport Token from \"sap/fe/controls/easyFilter/Token\";\nimport Button from \"sap/m/Button\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport Popover from \"sap/m/Popover\";\nimport Tokenizer from \"sap/m/Tokenizer\";\nimport VBox from \"sap/m/VBox\";\nimport { ButtonType, FlexAlignItems, FlexJustifyContent, FlexWrap, PlacementType } from \"sap/m/library\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type { $ControlSettings } from \"sap/ui/core/Control\";\nimport Control from \"sap/ui/core/Control\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport Lib from \"sap/ui/core/Lib\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport { ValueState } from \"sap/ui/core/library\";\nimport type Context from \"sap/ui/model/Context\";\n\nimport type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport deepClone from \"sap/base/util/deepClone\";\nimport { and, bindState } from \"sap/fe/base/BindingToolkit\";\nimport EasyFilterInput from \"sap/fe/controls/easyFilter/EasyFilterInput\";\nimport type EasyFilterToken from \"sap/fe/controls/easyFilter/Token\";\nimport MessageStrip from \"sap/m/MessageStrip\";\nimport OverflowToolbar from \"sap/m/OverflowToolbar\";\nimport ToolbarSpacer from \"sap/m/ToolbarSpacer\";\nimport type FilterOperator from \"sap/ui/model/FilterOperator\";\nimport FESRHelper from \"sap/ui/performance/trace/FESRHelper\";\nimport type EasyFilter from \"ux/eng/fioriai/reuse/easyfilter/EasyFilter\";\nimport type { EasyFilterMetadata, PropertyMetadata, Success } from \"ux/eng/fioriai/reuse/easyfilter/EasyFilter\";\nimport type { EventHandler } from \"../../../../../../../types/extension_types\";\nimport AINotice from \"./AINotice\";\nimport EasyFilterUtils from \"./utils\";\n\n//For current release we are ignoring \"All\" and \"Any\"\n//We can incorporate these values in future\nexport type BetweenSelectedValues = [boolean, boolean] | [string, string] | [number, number] | [Date, Date];\n\n//We will be handling \"ALL\" and \"ANY\" at later point of time\nexport type TokenSelectedValuesDefinition =\n\t| {\n\t\t\toperator: Exclude<FilterOperator, FilterOperator.BT | FilterOperator.NB>;\n\t\t\tselectedValues: string[] | boolean[] | number[] | Date[];\n\t  }\n\t| {\n\t\t\toperator: FilterOperator.BT | FilterOperator.NB;\n\t\t\tselectedValues: BetweenSelectedValues;\n\t  };\n\nexport type TokenType = \"MenuWithCheckBox\" | \"Calendar\" | \"Time\" | \"ValueHelp\" | \"MenuWithSingleSelect\";\n\nexport type TokenDefinition = {\n\tkey: string;\n\tlabel: string;\n\tkeySpecificSelectedValues: TokenSelectedValuesDefinition[];\n\ttype?: TokenType;\n\tisRequired?: boolean;\n};\n\nexport type TokenSetters = \"setSelectedValues\";\n\nexport type EasyFilterPropertyMetadata = PropertyMetadata & {\n\ttype: TokenType;\n\tdefaultValue?: TokenSelectedValuesDefinition[];\n};\n\n/*\n * Delivery for beta release for the easy filter feature.\n * @experimental\n */\n@defineUI5Class(\"sap.fe.controls.easyFilter.EasyFilterBarContainer\")\nexport default class EasyFilterBarContainer extends Control {\n\t@property({ type: \"string\" })\n\tcontextPath?: string;\n\n\t@property({ type: \"string\" })\n\tappId?: string;\n\n\t@property({ type: \"string\" })\n\teasyFilterLib?: string;\n\n\t@property({ type: \"array\" })\n\tfilterBarMetadata?: EasyFilterPropertyMetadata[];\n\n\t@property({ type: \"array\" })\n\trecommendedValues?: string[];\n\n\t@defineReference()\n\teasyFilterInput!: Ref<EnhanceWithUI5<EasyFilterInput>>;\n\n\t@defineReference()\n\ttokenizer!: Ref<Tokenizer>;\n\n\t@aggregation({ type: \"sap.ui.core.Control\" })\n\tcontent?: Control;\n\n\t@event()\n\ttokensChanged?: EventHandler<UI5Event<{ tokens: TokenDefinition[] }, EasyFilterBarContainer>>;\n\n\t@event()\n\tqueryChanged?: EventHandler<UI5Event<{ query: string }, EasyFilterBarContainer>>;\n\n\t@event()\n\tshowValueHelp?: EventHandler<\n\t\tUI5Event<\n\t\t\t{ key: string; values: unknown[]; resolve: (value: TokenSelectedValuesDefinition[]) => void; reject: (reason?: Error) => void },\n\t\t\tEasyFilterBarContainer\n\t\t>\n\t>;\n\n\t@event()\n\tclearFilters?: EventHandler;\n\n\t@event()\n\tbeforeQueryProcessing?: EventHandler;\n\n\t@event()\n\tafterQueryProcessing?: EventHandler;\n\n\tprivate resourceBundle!: ResourceBundle;\n\n\t@defineState()\n\tprotected state: StateOf<{\n\t\tshowResult: boolean;\n\t\ttokens: TokenDefinition[];\n\t\ttokenizerEditable: boolean;\n\t\tshowSingleValueMessageStrip?: boolean;\n\t\tsingleValueMessageStripText?: string;\n\t}> = {\n\t\tshowResult: false,\n\t\ttokens: [] as TokenDefinition[],\n\t\ttokenizerEditable: true,\n\t\tshowSingleValueMessageStrip: false,\n\t\tsingleValueMessageStripText: \"\"\n\t};\n\n\tprivate innerControlPopover?: Popover;\n\n\tprivate okButton?: Button;\n\n\tprivate showAllButton?: Button;\n\n\tprivate toolbar?: OverflowToolbar;\n\n\tprivate mandatoryKeyMap?: Record<string, boolean>;\n\n\t//If set to true the error state can be seen on the tokens\n\tprivate isMandatoryCheckRequired?: boolean;\n\n\tprivate shouldTokenChangeEventFired = true;\n\n\teasyfilter?: Promise<typeof EasyFilter | undefined>;\n\n\tprivate resolveContentReady!: () => void;\n\n\tprivate inputFieldReady: Promise<void> = new Promise((resolve) => {\n\t\tthis.resolveContentReady = resolve;\n\t});\n\n\tconstructor(properties: string | ($ControlSettings & PropertiesOf<EasyFilterBarContainer>), others?: $ControlSettings) {\n\t\tsuper(properties as string, others);\n\t\tthis.initialize();\n\t}\n\n\tsetEasyFilterLib(easyFilterLib: string): void {\n\t\tthis.setProperty(\"easyFilterLib\", easyFilterLib);\n\t\tif (this.easyFilterLib) {\n\t\t\tthis.easyfilter = import(this.easyFilterLib);\n\t\t}\n\t}\n\n\tasync setAppId(appId: string): Promise<void> {\n\t\tif (!this.appId) {\n\t\t\tthis.setProperty(\"appId\", appId, true);\n\t\t\tawait this.inputFieldReady;\n\t\t\tthis.easyFilterInput.current?.setProperty(\"appId\", appId, true);\n\t\t\tawait this.easyFilterInput.current?.initShellHistoryProvider();\n\t\t}\n\t}\n\n\tsetFilterBarMetadata(filterBarMetadata: EasyFilterPropertyMetadata[]): void {\n\t\tif (!this.filterBarMetadata) {\n\t\t\tthis.setProperty(\"filterBarMetadata\", filterBarMetadata, true);\n\t\t\t// populate the tokens with default value\n\t\t\tconst tokens = this.getDefaultTokens();\n\t\t\tif (!this.innerControlPopover) {\n\t\t\t\tthis.innerControlPopover = this.createPopoverForInnerControls();\n\t\t\t\tthis.addDependent(this.innerControlPopover);\n\t\t\t}\n\t\t\tthis.state.tokens = tokens;\n\t\t\tthis.state.showResult = tokens.length > 0;\n\t\t\t///We don't want to display error valueStateMessage as soon the control renders\n\t\t\tthis.isMandatoryCheckRequired = true;\n\t\t\t//onTokenChange event should not be fired when initial set of tokens are set\n\t\t\tthis.shouldTokenChangeEventFired = false;\n\t\t}\n\t}\n\n\tinit(): void {\n\t\tthis.resourceBundle = Lib.getResourceBundleFor(\"sap.fe.controls\")!;\n\t}\n\n\tinitialize(): void {\n\t\tthis.content = this.createContent();\n\t\tthis.resolveContentReady();\n\t\tif (!this.innerControlPopover) {\n\t\t\tthis.innerControlPopover = this.createPopoverForInnerControls();\n\t\t\tthis.addDependent(this.innerControlPopover);\n\t\t}\n\t\t//We don't want to display error valueStateMessage as soon the control renders\n\t\tthis.isMandatoryCheckRequired = true;\n\t\t//onTokenChange event should not be fired when initial set of tokens are set\n\t\tthis.shouldTokenChangeEventFired = false;\n\t}\n\n\t// This method should be used before updating the state, once the state is updated the previous overridden default values would be gone forever\n\tgetDefaultTokens(): TokenDefinition[] {\n\t\tconst tokens: TokenDefinition[] = [];\n\t\tif (!this.mandatoryKeyMap) {\n\t\t\tthis.mandatoryKeyMap = {};\n\t\t}\n\t\tthis.filterBarMetadata?.forEach((data) => {\n\t\t\tconst isRequired = data.required;\n\t\t\tif (isRequired) {\n\t\t\t\t(this.mandatoryKeyMap as Record<string, boolean>)[data.name] = true;\n\t\t\t\t//Check whether the keys exist in the current state else push it across\n\t\t\t\ttokens.push({\n\t\t\t\t\tkey: data.name,\n\t\t\t\t\tlabel: data.label as string,\n\t\t\t\t\tkeySpecificSelectedValues: data.defaultValue ?? [],\n\t\t\t\t\ttype: data.type,\n\t\t\t\t\tisRequired\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn tokens;\n\t}\n\n\tonEnterPressed(e: UI5Event<{ query: string }, EasyFilterInput>): void {\n\t\tthis.onGoPress(e.getParameter(\"query\"));\n\t}\n\n\t//Making it public because in live mode the app developer can decide whether to display the error ValueStateMessage\n\t//In non-live mode , we are already internally handling it on every time time a user clicks on GO/Enter buttons\n\tpublic checkIfAllMandatoryTokensFilled(): boolean {\n\t\tconst tokensInState = this.getUnSetMandatoryTokensInCurrentState();\n\t\tif (tokensInState.length !== 0) {\n\t\t\tconst tokens = this.getActualTokensFromState(tokensInState);\n\t\t\ttokens?.forEach((token) => {\n\t\t\t\ttoken.setProperty(\"valueState\", ValueState.Error);\n\t\t\t\ttoken.setProperty(\"valueStateText\", this.resourceBundle.getText(\"M_EASY_FILTER_MANDATORY_TOKEN_ERROR\"));\n\t\t\t\ttoken.openValueStateMessage();\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic closeAllMandatoryValueStateMessages(): void {\n\t\tconst easyTokens = this.tokenizer.current?.getTokens() as EasyFilterToken[];\n\t\teasyTokens.forEach((token) => token.closeValueStateMessage());\n\t}\n\n\tasync onGoPress(magicQuery: string | undefined): Promise<void> {\n\t\tif (!magicQuery) {\n\t\t\tthis.resetState();\n\t\t\treturn;\n\t\t}\n\t\tthis.state.tokenizerEditable = true;\n\n\t\t// Call AI service to get the filter criteria\n\t\tconst easyfilter = await this.easyfilter;\n\t\tif (!easyfilter) {\n\t\t\treturn;\n\t\t}\n\t\tthis.fireEvent(\"beforeQueryProcessing\");\n\n\t\tconst easyFilterMetadata: EasyFilterMetadata = {\n\t\t\tversion: 1,\n\t\t\tentitySet: this.contextPath,\n\t\t\tfields: this.filterBarMetadata as EasyFilterPropertyMetadata[]\n\t\t};\n\n\t\tconst easyFilterResult = await easyfilter.easyFilter(magicQuery, easyFilterMetadata);\n\n\t\tif (easyFilterResult.success) {\n\t\t\t//Only add the recent query when the call is success\n\t\t\t//Do not track the recent queries when the isHistoryEnabled is set to false\n\t\t\t//It would be a violation to users privacy\n\t\t\tif (this.easyFilterInput.current?.isHistoryEnabled() ?? false) {\n\t\t\t\tthis.easyFilterInput.current?.addRecentQuery(magicQuery);\n\t\t\t}\n\t\t\tif (easyFilterResult.data.version === 1) {\n\t\t\t\tthis.handleV1Success(easyFilterResult);\n\t\t\t} else if (easyFilterResult.data.version === 2) {\n\t\t\t\t// Create the sap.ui.model.Filter from the filter and apply it directly to the list binding\n\t\t\t}\n\t\t} else {\n\t\t\t// error\n\t\t\tthis.easyFilterInput.current?.setAsInvalid(easyFilterResult.message);\n\t\t\tthis.removeNonMandatoryTokens();\n\t\t\tLog.error(\"Error while generating filter criteria: \", easyFilterResult.message);\n\t\t}\n\n\t\tthis.fireEvent(\"afterQueryProcessing\");\n\t}\n\n\t/**\n\t * Handles the success response from the AI service for version 1 of the easy filter.\n\t * @param easyFilterResult The result from the AI service\n\t * @private\n\t */\n\tprivate handleV1Success(easyFilterResult: Success<EasyFilter.EasyFilterResult>): void {\n\t\tif (easyFilterResult.data.unclear) {\n\t\t\tthis.easyFilterInput.current?.setAsInvalid(\n\t\t\t\tthis.resourceBundle.getText(\"M_EASY_FILTER_UNCLEAR_INPUT\", [easyFilterResult.data.unclear])\n\t\t\t);\n\t\t}\n\t\tif (easyFilterResult.data.filter) {\n\t\t\t// We need to show a message to the user that the filter criteria has been generated\n\t\t\tLog.debug(\"Filter criteria generated: \", JSON.stringify(easyFilterResult.data.filter, null, 2));\n\n\t\t\tconst tokens = [...this.state.tokens].filter((token) => token.isRequired);\n\n\t\t\t// Validate and apply the filter criteria\n\t\t\tEasyFilterUtils.formatData(tokens, easyFilterResult.data.filter, this.filterBarMetadata as EasyFilterPropertyMetadata[]);\n\n\t\t\tconst updatedTokens = this.verifySingleSelectTokenValues(tokens);\n\t\t\tthis.state.showResult = true;\n\t\t\tthis.state.tokens = updatedTokens;\n\t\t}\n\t}\n\n\t//every single select menu type should have only one value, else splice to one value and update the  message strip\n\tverifySingleSelectTokenValues(tokens: TokenDefinition[]): TokenDefinition[] {\n\t\tconst singleSelectTokenLabels: string[] = [];\n\t\ttokens.forEach((token) => {\n\t\t\tif (token.type === \"MenuWithSingleSelect\") {\n\t\t\t\tif (token.keySpecificSelectedValues[0].selectedValues.length > 1) {\n\t\t\t\t\tsingleSelectTokenLabels.push(token.label);\n\t\t\t\t\ttoken.keySpecificSelectedValues[0].selectedValues.splice(1);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (singleSelectTokenLabels.length) {\n\t\t\tthis.state.singleValueMessageStripText = this.resourceBundle.getText(\"M_EASY_FILTER_SINGLE_VALUE_MESSAGE\", [\n\t\t\t\t`<strong>${singleSelectTokenLabels.join(\", \")}</strong>`\n\t\t\t]);\n\t\t\tthis.state.showSingleValueMessageStrip = true;\n\t\t}\n\t\treturn tokens;\n\t}\n\n\tcreatePopoverForInnerControls(): Popover {\n\t\tif (!this.innerControlPopover) {\n\t\t\tthis.innerControlPopover = (\n\t\t\t\t<Popover id={this.getId() + \"-innerPopover\"} showArrow={false} showHeader={true} placement={PlacementType.Bottom}>\n\t\t\t\t\t{{\n\t\t\t\t\t\tfooter: this.getToolbar()\n\t\t\t\t\t}}\n\t\t\t\t</Popover>\n\t\t\t);\n\t\t}\n\t\treturn this.innerControlPopover as Popover;\n\t}\n\n\tgetToolbar(): OverflowToolbar | undefined {\n\t\tif (!this.toolbar) {\n\t\t\tconst okButton = this.getOkButton();\n\t\t\tconst showAllButton = this.getShowAllButton();\n\t\t\tthis.toolbar = (\n\t\t\t\t<OverflowToolbar>\n\t\t\t\t\t{{\n\t\t\t\t\t\tcontent: (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ToolbarSpacer />\n\t\t\t\t\t\t\t\t{okButton}\n\t\t\t\t\t\t\t\t{showAllButton}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)\n\t\t\t\t\t}}\n\t\t\t\t</OverflowToolbar>\n\t\t\t);\n\t\t}\n\t\treturn this.toolbar;\n\t}\n\n\tgetOkButton(): Button | undefined {\n\t\tif (!this.okButton) {\n\t\t\tthis.okButton = <Button text={this.resourceBundle.getText(\"M_EASY_FILTER_POPOVER_OK\")} type={ButtonType.Emphasized} />;\n\t\t}\n\t\treturn this.okButton;\n\t}\n\n\tgetShowAllButton(): Button | undefined {\n\t\tif (!this.showAllButton) {\n\t\t\tthis.showAllButton = <Button text={this.resourceBundle.getText(\"M_EASY_FILTER_POPOVER_SHOW_ALL_ITEMS\")} />;\n\t\t}\n\t\treturn this.showAllButton;\n\t}\n\n\tonStateChange(changedProps: string[] = []): void {\n\t\tif (changedProps.includes(\"tokens\")) {\n\t\t\tif (this.shouldTokenChangeEventFired) {\n\t\t\t\tthis.fireEvent(\"tokensChanged\", {\n\t\t\t\t\ttokens: this.state.tokens.map((data) => deepClone(data))\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.state.showResult = this.state.tokens.length > 0;\n\t\t\tif (!(this.isMandatoryCheckRequired ?? false)) {\n\t\t\t\tthis.checkIfAllMandatoryTokensFilled();\n\t\t\t}\n\t\t}\n\t\t//Resetting to default values\n\t\tthis.isMandatoryCheckRequired = false;\n\t\tthis.shouldTokenChangeEventFired = true;\n\t}\n\n\tcreateContent(): VBox {\n\t\tconst $topGoBtn = createReference<Button>();\n\t\tconst outVBox = (\n\t\t\t<VBox>\n\t\t\t\t<FlexBox renderType=\"Bare\">\n\t\t\t\t\t<EasyFilterInput\n\t\t\t\t\t\trecommendedValues={this.recommendedValues}\n\t\t\t\t\t\tref={this.easyFilterInput}\n\t\t\t\t\t\tenterPressed={this.onEnterPressed.bind(this)}\n\t\t\t\t\t\tqueryChanged={(e): void => {\n\t\t\t\t\t\t\tthis.fireEvent(\"queryChanged\", { query: e.getParameter(\"query\") });\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tliveChange={(): void => {\n\t\t\t\t\t\t\tthis.state.tokenizerEditable = false;\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={\"sap-icon://ai\"}\n\t\t\t\t\t\tclass={\"sapUiSmallMarginBegin\"}\n\t\t\t\t\t\tref={$topGoBtn}\n\t\t\t\t\t\ttext={this.resourceBundle.getText(\"M_EASY_FILTER_GO\")}\n\t\t\t\t\t\ttype={ButtonType.Emphasized}\n\t\t\t\t\t\tpress={this.onGoButtonPress.bind(this)}\n\t\t\t\t\t/>\n\t\t\t\t</FlexBox>\n\t\t\t\t<FlexBox\n\t\t\t\t\trenderType=\"Bare\"\n\t\t\t\t\tvisible={bindState(this.state, \"showResult\")}\n\t\t\t\t\talignItems={FlexAlignItems.Center}\n\t\t\t\t\twrap={FlexWrap.Wrap}\n\t\t\t\t\tjustifyContent={FlexJustifyContent.SpaceBetween}\n\t\t\t\t\tclass={\"sapUiTinyMarginTop\"}\n\t\t\t\t>\n\t\t\t\t\t<FlexBox class={\"sapFeControlsGap8px\"} renderType=\"Bare\" alignItems={FlexAlignItems.Center} wrap={FlexWrap.Wrap}>\n\t\t\t\t\t\t<AINotice resourceBundle={this.resourceBundle} />\n\t\t\t\t\t\t<Tokenizer\n\t\t\t\t\t\t\teditable={and(bindState(this.state, \"tokenizerEditable\"), true)}\n\t\t\t\t\t\t\tclass={\"sapFeControlsTokenizer\"}\n\t\t\t\t\t\t\ttokens={bindState(this.state, \"tokens\")}\n\t\t\t\t\t\t\tref={this.tokenizer}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\ttokens: (idx: number, ctx: Context): Token => {\n\t\t\t\t\t\t\t\t\tconst object = ctx.getObject() as TokenDefinition;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Token\n\t\t\t\t\t\t\t\t\t\t\tkey={this.state.tokens.key}\n\t\t\t\t\t\t\t\t\t\t\tlabel={this.state.tokens.label}\n\t\t\t\t\t\t\t\t\t\t\titems={this.state.tokens.keySpecificSelectedValues}\n\t\t\t\t\t\t\t\t\t\t\tmandatory={this.isKeyMandatory(object.key)}\n\t\t\t\t\t\t\t\t\t\t\tdelete={(): void => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst tokenIndex = this.state.tokens.findIndex((token) => token.key === object.key);\n\t\t\t\t\t\t\t\t\t\t\t\tconst newTokens = this.state.tokens.concat();\n\t\t\t\t\t\t\t\t\t\t\t\tnewTokens.splice(tokenIndex, 1);\n\t\t\t\t\t\t\t\t\t\t\t\tthis.state.tokens = newTokens;\n\t\t\t\t\t\t\t\t\t\t\t\tthis.updateFilterInput(\"tokenUpdated\");\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\tcustomData: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CustomData key=\"TokenInfo\" value={object} />,\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CustomData key=\"popover\" value={this.innerControlPopover} />,\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CustomData key=\"easyFilterBarContainer\" value={this} />,\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CustomData\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey=\"codeList\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.filterBarMetadata?.find((data) => data.name === object.key)?.codeList}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</Token>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</Tokenizer>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttext={this.resourceBundle.getText(\"M_EASY_FILTER_RESET\")}\n\t\t\t\t\t\t\ttype={ButtonType.Transparent}\n\t\t\t\t\t\t\tpress={(): void => {\n\t\t\t\t\t\t\t\tthis.resetState();\n\t\t\t\t\t\t\t\t//Retaining the focus on popover doesn't make the popover close on every interaction\n\t\t\t\t\t\t\t\tthis.easyFilterInput.current?.$searchInput.focus();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FlexBox>\n\t\t\t\t</FlexBox>\n\t\t\t\t<FlexBox renderType=\"Bare\">\n\t\t\t\t\t<MessageStrip\n\t\t\t\t\t\ttext={bindState(this.state, \"singleValueMessageStripText\")}\n\t\t\t\t\t\tshowIcon={true}\n\t\t\t\t\t\tenableFormattedText={true}\n\t\t\t\t\t\tvisible={bindState(this.state, \"showSingleValueMessageStrip\")}\n\t\t\t\t\t\tshowCloseButton={true}\n\t\t\t\t\t\tclose={(): void => {\n\t\t\t\t\t\t\tthis.state.showSingleValueMessageStrip = false;\n\t\t\t\t\t\t}}\n\t\t\t\t\t></MessageStrip>\n\t\t\t\t</FlexBox>\n\t\t\t</VBox>\n\t\t) as VBox;\n\t\tFESRHelper.setSemanticStepname($topGoBtn.current!, \"press\", \"fe:ai:search\");\n\t\treturn outVBox;\n\t}\n\n\tasync onGoButtonPress(): Promise<void> {\n\t\tthis.state.tokenizerEditable = true;\n\t\tlet currentInputValue = this.easyFilterInput.current?.getValue();\n\t\tconst currentInputPlaceholder = this.easyFilterInput.current?.getPlaceholder();\n\n\t\tif (currentInputValue === \"\" && currentInputPlaceholder !== this.resourceBundle.getText(\"M_EASY_FILTER_PLACEHOLDER\")) {\n\t\t\tthis.easyFilterInput.current?.setValue(currentInputPlaceholder || \"\");\n\t\t\tcurrentInputValue = currentInputPlaceholder;\n\t\t}\n\t\tawait this.onGoPress(currentInputValue);\n\t}\n\n\tresetState(): void {\n\t\tthis.fireEvent(\"clearFilters\");\n\t\tthis.state.tokens = this.getDefaultTokens();\n\t\tthis.updateFilterInput(\"tokenReset\");\n\t\tthis.state.tokenizerEditable = true;\n\t\tthis.isMandatoryCheckRequired = true;\n\t\t//Set the Value States of all the Tokens back to None\n\t\tthis.tokenizer.current?.getTokens().forEach((token) => token.setProperty(\"valueState\", ValueState.None));\n\t\tthis.tokenizer.current?.getTokens().forEach((token) => token.setProperty(\"valueStateText\", null));\n\t}\n\n\t//The below code updates the existing state by fetching the key and selectedValues\n\tupdateTokenArray(changeType: TokenSetters, newTokenSpecificValues: TokenSelectedValuesDefinition[], tokenKey: string): void {\n\t\tconst newTokens = this.state.tokens.map((token) => ({ ...token, keySpecificSelectedValues: [...token.keySpecificSelectedValues] }));\n\t\tconst tokenIndex = newTokens.findIndex((t) => t.key === tokenKey);\n\t\tconst token = newTokens[tokenIndex];\n\t\tif (tokenIndex != -1) {\n\t\t\tswitch (changeType) {\n\t\t\t\tcase \"setSelectedValues\":\n\t\t\t\t\tthis.setSelectedValues(token, newTokenSpecificValues, tokenIndex, newTokens);\n\t\t\t\t\ttoken.keySpecificSelectedValues = newTokenSpecificValues;\n\t\t\t\t\t//Remove the token entirely\n\t\t\t\t\tif (!this.isKeyMandatory(token.key) && token.keySpecificSelectedValues.length === 0) {\n\t\t\t\t\t\tnewTokens.splice(tokenIndex, 1);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tLog.error(\"Specifying a setter that is out of the boundary\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// Update the state by assigning the new tokens array\n\t\t\tthis.state.tokens = newTokens;\n\t\t\tthis.state.showResult = newTokens.length > 0;\n\t\t\tthis.updateFilterInput(\"tokenUpdated\");\n\t\t}\n\t}\n\n\tpublic closeInnerControlPopover(): void {\n\t\tthis.innerControlPopover?.close();\n\t}\n\n\tprivate setSelectedValues(\n\t\ttoken: TokenDefinition,\n\t\tnewTokenSpecificValues: TokenSelectedValuesDefinition[],\n\t\ttokenIndex: number,\n\t\tnewTokens: TokenDefinition[]\n\t): void {\n\t\ttoken.keySpecificSelectedValues = newTokenSpecificValues;\n\t\tif (!this.isKeyMandatory(token.key) && token.keySpecificSelectedValues.length === 0) {\n\t\t\tnewTokens.splice(tokenIndex, 1);\n\t\t}\n\t}\n\n\tisKeyMandatory(key: string): boolean {\n\t\tif (!this.mandatoryKeyMap) {\n\t\t\tthis.mandatoryKeyMap = {};\n\t\t}\n\t\treturn this.mandatoryKeyMap[key] ? true : false;\n\t}\n\n\tremoveNonMandatoryTokens(): this {\n\t\tconst newToken: TokenDefinition[] = this.state.tokens.filter((token) => {\n\t\t\treturn this.isKeyMandatory(token.key);\n\t\t});\n\t\tthis.state.tokens = newToken;\n\t\treturn this;\n\t}\n\n\tupdateFilterInput(value: string): void {\n\t\tconst currValue: string = this.easyFilterInput.current?.getValue() || \"\";\n\t\tif (value === \"tokenUpdated\" && currValue !== \"\") {\n\t\t\tthis.easyFilterInput.current?.setValue(\"\");\n\t\t\tthis.easyFilterInput.current?.setPlaceholder(currValue);\n\t\t} else if (value === \"tokenReset\") {\n\t\t\tthis.easyFilterInput.current?.setValue(\"\");\n\t\t\tthis.easyFilterInput.current?.setPlaceholder(this.resourceBundle.getText(\"M_EASY_FILTER_PLACEHOLDER\"));\n\t\t}\n\t}\n\n\tgetTokensInInitialState(): TokenDefinition[] {\n\t\tconst newTokens = this.state.tokens.map((token) => ({ ...token, keySpecificSelectedValues: [...token.keySpecificSelectedValues] }));\n\t\tconst mandatoryTokens = newTokens.filter((token) => {\n\t\t\tif (this.isKeyMandatory(token.key)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t\treturn mandatoryTokens.map((token) => ({ ...token, keySpecificSelectedValues: [] }));\n\t}\n\n\tgetUnSetMandatoryTokensInCurrentState(): TokenDefinition[] {\n\t\treturn this.state.tokens.filter((token) => {\n\t\t\tconst isKeyMandatory = this.isKeyMandatory(token.key);\n\t\t\tif (isKeyMandatory) {\n\t\t\t\treturn token.keySpecificSelectedValues.length === 0;\n\t\t\t}\n\t\t});\n\t}\n\n\tgetActualTokensFromState(tokens: TokenDefinition[]): EasyFilterToken[] | undefined {\n\t\tconst requiredKeys = tokens.map((token) => token.key);\n\t\treturn this.tokenizer.current?.getTokens().filter((token) => requiredKeys.includes(token.getKey())) as\n\t\t\t| EasyFilterToken[]\n\t\t\t| undefined;\n\t}\n\n\tstatic render(rm: RenderManager, control: EasyFilterBarContainer): void {\n\t\treturn jsx.renderUsingRenderManager(rm, control, () => {\n\t\t\treturn <span ref={control}>{control.getAggregation(\"content\")}</span>;\n\t\t});\n\t}\n}\n"],"mappings":"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","ignoreList":[],"sourceRoot":"easyFilter"}},{"offset":{"line":11,"column":0},"map":{"version":3,"names":["EasyFilterInput","_dec","defineUI5Class","_dec2","aggregation","type","multiple","isDefault","_dec3","property","_dec4","_dec5","event","_dec6","_dec7","_dec8","defineState","_class","_class2","_Control","properties","others","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","initialize","_exports","_inheritsLoose","_proto","prototype","getValue","$searchInput","isHistoryEnabled","state","valueOf","setValue","value","setPlaceholder","getPlaceholder","recommendedQueries","recommendedValues","resourceBundle","Lib","getResourceBundleFor","createInput","setAsInvalid","message","setValueState","ValueState","Warning","setValueStateText","openValueStateMessage","_jsx","Input","width","showClearIcon","change","e","fireEvent","query","getParameter","liveChange","queryChanged","getSource","$favoritePopover","isOpen","openSuggestionPopover","getText","placeholder","favoritePopover","createFavoritePopover","addDependent","addEventDelegate","onkeyup","key","onEnterPressed","close","onkeydown","length","preventDefault","ontap","onfocusin","shellHistoryProvider","favoriteQueries","getFavoriteQueries","recentQueries","getRecentQueries","map","openBy","requestFavorite","magicQuery","addRecentQuery","queryString","recentQueryIndex","findIndex","toLowerCase","concat","slice","filter","unshift","onStateChange","changedProps","arguments","undefined","includes","setFavoriteQueries","setRecentQueries","recentQueriesWitFavorites","recentQuery","text","isFavorite","find","favoriteQuery","initShellHistoryProvider","async","ShellHistoryProvider","getInstance","appId","error","Log","Popover","id","getId","showHeader","horizontalScrolling","placement","PlacementType","Bottom","showArrow","initialFocus","class","visible","equal","bindState","children","content","FlexBox","direction","FlexDirection","Column","renderType","items","Title","titleStyle","TitleLevel","H6","HBox","wrap","FlexWrap","Wrap","ctx","Button","getObject","press","bind","List","noData","IllustratedMessage","title","illustrationSize","IllustratedMessageSize","Dot","illustrationType","IllustratedMessageType","NoEntries","description","CustomListItem","customData","CustomData","_jsxs","Row","alignItems","FlexAlignItems","Center","justifyContent","FlexJustifyContent","SpaceBetween","Text","tooltip","wrapping","dependents","EventDelegateHook","tap","icon","ButtonType","Transparent","focus","index","indexOf","mode","ListMode","Delete","delete","data","enabled","lessThan","removeFromFavorites","addToFavorites","newFavorite","pop","render","rm","control","jsx","renderUsingRenderManager","ref","Control","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./EasyFilterInput.tsx"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport type { PathInModelExpression } from \"sap/fe/base/BindingToolkit\";\nimport { bindState, equal, length, lessThan } from \"sap/fe/base/BindingToolkit\";\nimport { aggregation, defineState, defineUI5Class, event, property, type PropertiesOf, type StateOf } from \"sap/fe/base/ClassSupport\";\nimport EventDelegateHook from \"sap/fe/base/EventDelegateHook\";\nimport jsx from \"sap/fe/base/jsx-runtime/jsx\";\nimport ShellHistoryProvider from \"sap/fe/controls/easyFilter/ShellHistoryProvider\";\nimport type { Button$PressEvent } from \"sap/m/Button\";\nimport Button from \"sap/m/Button\";\nimport CustomListItem from \"sap/m/CustomListItem\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport HBox from \"sap/m/HBox\";\nimport IllustratedMessage from \"sap/m/IllustratedMessage\";\nimport IllustratedMessageSize from \"sap/m/IllustratedMessageSize\";\nimport IllustratedMessageType from \"sap/m/IllustratedMessageType\";\nimport type { Input$LiveChangeEvent } from \"sap/m/Input\";\nimport Input from \"sap/m/Input\";\nimport List from \"sap/m/List\";\nimport type { ListBase$DeleteEvent } from \"sap/m/ListBase\";\nimport Popover from \"sap/m/Popover\";\nimport type StandardListItem from \"sap/m/StandardListItem\";\nimport Text from \"sap/m/Text\";\nimport Title from \"sap/m/Title\";\nimport { ButtonType, FlexAlignItems, FlexDirection, FlexJustifyContent, FlexWrap, ListMode, PlacementType } from \"sap/m/library\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type { $ControlSettings } from \"sap/ui/core/Control\";\nimport Control from \"sap/ui/core/Control\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport Lib from \"sap/ui/core/Lib\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport { TitleLevel, ValueState } from \"sap/ui/core/library\";\nimport type Context from \"sap/ui/model/Context\";\nimport type { EventHandler } from \"../../../../../../../types/extension_types\";\n\ntype RecentType = {\n\ttext: string;\n\tisFavorite: boolean;\n};\n@defineUI5Class(\"sap.fe.controls.easyFilter.EasyFilterInput\")\nexport default class EasyFilterInput extends Control {\n\t@aggregation({ type: \"sap.m.Input\", multiple: false, isDefault: true })\n\t$searchInput!: Input;\n\n\t@property({ type: \"string\" })\n\tappId?: string;\n\n\t@property({ type: \"array\" })\n\trecommendedValues?: string[];\n\n\t@event()\n\tqueryChanged?: EventHandler<UI5Event<{ query: string }, EasyFilterInput>>;\n\n\t@event()\n\tenterPressed?: EventHandler<UI5Event<{ query: string }, EasyFilterInput>>;\n\n\t@event()\n\tliveChange?: EventHandler;\n\n\tprivate resourceBundle!: ResourceBundle;\n\n\tshellHistoryProvider: ShellHistoryProvider | undefined;\n\n\t$favoritePopover: Popover | undefined;\n\n\t@defineState()\n\tprotected state: StateOf<{\n\t\tqueryChanged: boolean;\n\t\trecentQueries: readonly string[];\n\t\trecentQueriesWitFavorites: readonly RecentType[];\n\t\tisHistoryEnabled: boolean;\n\t\tfavoriteQueries: string[];\n\t\trecommendedQueries: string[];\n\t}> = {\n\t\tqueryChanged: false,\n\t\tisHistoryEnabled: false,\n\t\trecentQueries: [],\n\t\trecentQueriesWitFavorites: [],\n\t\tfavoriteQueries: [] as string[],\n\t\trecommendedQueries: [] as string[]\n\t};\n\n\tconstructor(properties: string | ($ControlSettings & PropertiesOf<EasyFilterInput>), others?: $ControlSettings) {\n\t\tsuper(properties as string, others);\n\t\tthis.initialize();\n\t}\n\n\tpublic getValue(): string {\n\t\treturn this.$searchInput.getValue();\n\t}\n\n\tpublic isHistoryEnabled(): boolean {\n\t\treturn this.state.isHistoryEnabled.valueOf();\n\t}\n\n\tsetValue(value: string): this {\n\t\tthis.$searchInput.setValue(value);\n\t\treturn this;\n\t}\n\n\tsetPlaceholder(value: string): this {\n\t\tthis.$searchInput.setPlaceholder(value);\n\t\treturn this;\n\t}\n\n\tpublic getPlaceholder(): string {\n\t\treturn this.$searchInput.getPlaceholder();\n\t}\n\n\tinitialize(): void {\n\t\tthis.state.recommendedQueries = this.recommendedValues ?? [];\n\t\tthis.resourceBundle = Lib.getResourceBundleFor(\"sap.fe.controls\")!;\n\t\tthis.createInput();\n\t}\n\n\tsetAsInvalid(message: string): void {\n\t\tthis.$searchInput.setValueState(ValueState.Warning);\n\t\tthis.$searchInput.setValueStateText(message);\n\t\tthis.$searchInput.openValueStateMessage();\n\t}\n\n\tcreateInput(): void {\n\t\tthis.$searchInput = (\n\t\t\t<Input\n\t\t\t\twidth=\"100%\"\n\t\t\t\tshowClearIcon={true}\n\t\t\t\tchange={(e): void => {\n\t\t\t\t\tthis.fireEvent(\"queryChanged\", { query: e.getParameter(\"value\") });\n\t\t\t\t}}\n\t\t\t\tliveChange={(e: Input$LiveChangeEvent): void => {\n\t\t\t\t\tthis.state.queryChanged = true;\n\t\t\t\t\tthis.fireEvent(\"liveChange\");\n\t\t\t\t\tif (!e.getSource().getValue() && !(this.$favoritePopover?.isOpen() ?? false)) {\n\t\t\t\t\t\tthis.openSuggestionPopover();\n\t\t\t\t\t}\n\t\t\t\t\tif (e.getParameter(\"value\") === \"\") {\n\t\t\t\t\t\tthis.setPlaceholder(this.resourceBundle.getText(\"M_EASY_FILTER_PLACEHOLDER\"));\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tplaceholder={this.resourceBundle.getText(\"M_EASY_FILTER_PLACEHOLDER\")}\n\t\t\t></Input>\n\t\t);\n\t\tconst favoritePopover = this.createFavoritePopover();\n\t\tthis.$favoritePopover = favoritePopover;\n\t\tthis.$searchInput.addDependent(favoritePopover);\n\t\tthis.$searchInput.addEventDelegate({\n\t\t\tonkeyup: (e: KeyboardEvent) => {\n\t\t\t\tif (e.key === \"Enter\") {\n\t\t\t\t\tthis.onEnterPressed();\n\t\t\t\t}\n\t\t\t\tif (this.$favoritePopover && this.$searchInput.getValue()) {\n\t\t\t\t\tthis.$favoritePopover.close();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonkeydown: (e: KeyboardEvent) => {\n\t\t\t\tif (\n\t\t\t\t\te.key === \"Tab\" &&\n\t\t\t\t\tthis.$searchInput?.getValue().length === 0 &&\n\t\t\t\t\tthis.$searchInput?.getValue() !== this.$searchInput?.getPlaceholder() &&\n\t\t\t\t\tthis.$searchInput?.getPlaceholder() !== this.resourceBundle.getText(\"M_EASY_FILTER_PLACEHOLDER\")\n\t\t\t\t) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.$searchInput?.setValue(this.$searchInput?.getPlaceholder());\n\t\t\t\t\tthis.fireEvent(\"liveChange\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tontap: () => {\n\t\t\t\tthis.openSuggestionPopover();\n\t\t\t},\n\t\t\tonfocusin: () => {\n\t\t\t\tthis.openSuggestionPopover();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate openSuggestionPopover(): void {\n\t\tif (!this.$searchInput?.getValue() && (!this.$favoritePopover || !this.$favoritePopover?.isOpen())) {\n\t\t\t// Open the easy filter popover\n\t\t\tthis.state.isHistoryEnabled = this.shellHistoryProvider?.isHistoryEnabled() ?? false;\n\t\t\tthis.state.favoriteQueries = this.shellHistoryProvider?.getFavoriteQueries() ?? [];\n\t\t\tthis.state.recentQueries = (this.shellHistoryProvider?.getRecentQueries() ?? []).map((query) => query);\n\t\t\tthis.$favoritePopover?.openBy(this.$searchInput);\n\t\t}\n\t}\n\n\trequestFavorite(e: Button$PressEvent): void {\n\t\tthis.$favoritePopover?.close();\n\t\tthis.$searchInput?.setValue(e.getSource().getText());\n\t\tthis.onEnterPressed();\n\t}\n\n\tonEnterPressed(): void {\n\t\tthis.$favoritePopover?.close();\n\t\tthis.state.queryChanged = false;\n\t\tlet magicQuery = this.$searchInput?.getValue();\n\t\tif (magicQuery === \"\" && this.$searchInput.getPlaceholder() !== this.resourceBundle.getText(\"M_EASY_FILTER_PLACEHOLDER\")) {\n\t\t\tmagicQuery = this.$searchInput.getPlaceholder();\n\t\t\tthis.$searchInput?.setValue(magicQuery);\n\t\t}\n\t\tthis.$searchInput?.setValueStateText(\"\");\n\t\tthis.$searchInput?.setValueState(\"None\");\n\t\tthis.fireEvent(\"enterPressed\", { query: magicQuery });\n\t}\n\n\taddRecentQuery(queryString: string | undefined): void {\n\t\tconst recentQueryIndex = this.state.recentQueries.findIndex((query) => query.toLowerCase() === queryString?.toLowerCase());\n\t\tif (queryString && recentQueryIndex === -1) {\n\t\t\tthis.state.recentQueries = [queryString].concat(this.state.recentQueries);\n\t\t\tif (this.state.recentQueries.length > 5) {\n\t\t\t\tthis.state.recentQueries = this.state.recentQueries.slice(0, 5);\n\t\t\t}\n\t\t} else if (queryString) {\n\t\t\tconst recentQueries = this.state.recentQueries.filter((query) => query.toLowerCase() !== queryString.toLowerCase());\n\t\t\trecentQueries.unshift(queryString);\n\t\t\tthis.state.recentQueries = recentQueries;\n\t\t}\n\t}\n\n\tonStateChange(changedProps: string[] = []): void {\n\t\tif (changedProps.includes(\"favoriteQueries\") || changedProps.includes(\"recentQueries\")) {\n\t\t\tthis.shellHistoryProvider?.setFavoriteQueries(this.state.favoriteQueries);\n\t\t\tthis.shellHistoryProvider?.setRecentQueries(this.state.recentQueries.map((query) => query));\n\t\t\tthis.state.recentQueriesWitFavorites = this.state.recentQueries.map((recentQuery) => {\n\t\t\t\treturn {\n\t\t\t\t\ttext: recentQuery,\n\t\t\t\t\tisFavorite: !!this.state.favoriteQueries.find((favoriteQuery) => favoriteQuery === recentQuery)\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t}\n\n\tasync initShellHistoryProvider(): Promise<void> {\n\t\ttry {\n\t\t\tthis.shellHistoryProvider = await ShellHistoryProvider.getInstance(this.appId ?? \"<unknownApp>\");\n\t\t} catch (error) {\n\t\t\tLog.error(\"Error while creating ShellHistoryProvider for easy filter\", error as string);\n\t\t}\n\t}\n\n\tcreateFavoritePopover(): Popover {\n\t\treturn (\n\t\t\t<Popover\n\t\t\t\tid={this.getId() + \"-favoritePopover\"}\n\t\t\t\tshowHeader={false}\n\t\t\t\thorizontalScrolling={false}\n\t\t\t\tplacement={PlacementType.Bottom}\n\t\t\t\tshowArrow={false}\n\t\t\t\tinitialFocus={this.$searchInput}\n\t\t\t\tclass={\"sapFEControlsPopover\"}\n\t\t\t\tvisible={this.state.recommendedQueries.length > 0 || equal(bindState(this.state, \"isHistoryEnabled\"), true)}\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<FlexBox direction={FlexDirection.Column} class={\"sapUiContentPadding\"} renderType={\"Bare\"}>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t<Title\n\t\t\t\t\t\t\t\t\t\ttitleStyle={TitleLevel.H6}\n\t\t\t\t\t\t\t\t\t\ttext={this.resourceBundle.getText(\"M_EASY_FILTER_POPOVER_SUGGESTIONS_TITLE\")}\n\t\t\t\t\t\t\t\t\t\tclass={\"sapFeControlsTitleBorder\"}\n\t\t\t\t\t\t\t\t\t\tvisible={this.state.recommendedQueries.length > 0}\n\t\t\t\t\t\t\t\t\t/>,\n\t\t\t\t\t\t\t\t\t<HBox\n\t\t\t\t\t\t\t\t\t\tclass={\"sapUiContentPadding\"}\n\t\t\t\t\t\t\t\t\t\titems={bindState(this.state, \"recommendedQueries\")}\n\t\t\t\t\t\t\t\t\t\twrap={FlexWrap.Wrap}\n\t\t\t\t\t\t\t\t\t\tvisible={this.state.recommendedQueries.length > 0}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\titems: (id: string, ctx: Context): StandardListItem => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass={\"sapUiTinyMarginEnd\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext={ctx.getObject()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress={this.requestFavorite.bind(this)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</HBox>,\n\t\t\t\t\t\t\t\t\t<Title\n\t\t\t\t\t\t\t\t\t\ttitleStyle={TitleLevel.H6}\n\t\t\t\t\t\t\t\t\t\ttext={this.resourceBundle.getText(\"M_EASY_FILTER_POPOVER_FAVORITE_TITLE\")}\n\t\t\t\t\t\t\t\t\t\tclass={\"sapFeControlsTitleBorder\"}\n\t\t\t\t\t\t\t\t\t\tvisible={equal(bindState(this.state, \"isHistoryEnabled\"), true)}\n\t\t\t\t\t\t\t\t\t/>,\n\t\t\t\t\t\t\t\t\t<List\n\t\t\t\t\t\t\t\t\t\titems={bindState(this.state, \"favoriteQueries\")}\n\t\t\t\t\t\t\t\t\t\tvisible={equal(bindState(this.state, \"isHistoryEnabled\"), true)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\tnoData: (\n\t\t\t\t\t\t\t\t\t\t\t\t<IllustratedMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={this.resourceBundle.getText(\"M_EASY_FILTER_POPOVER_EMPTY_FAVORITE_TITLE\")}\n\t\t\t\t\t\t\t\t\t\t\t\t\tillustrationSize={IllustratedMessageSize.Dot}\n\t\t\t\t\t\t\t\t\t\t\t\t\tillustrationType={IllustratedMessageType.NoEntries}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdescription={this.resourceBundle.getText(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"M_EASY_FILTER_POPOVER_EMPTY_FAVORITE_DESCRIPTION\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\titems: (id: string, ctx: Context): StandardListItem => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CustomListItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass={\"sapUiSmallMarginBegin\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustomData={[<CustomData key={\"text\"} value={ctx.getObject()} />]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress={(): void => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$searchInput.setValue(ctx.getObject());\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.onEnterPressed();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FlexBox\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth={\"100%\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdirection={FlexDirection.Row}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talignItems={FlexAlignItems.Center}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent={FlexJustifyContent.SpaceBetween}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trenderType={\"Bare\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext={ctx.getObject()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip={ctx.getObject()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twrapping={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"sapFEControlsPointer\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdependents: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EventDelegateHook\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttap={(): void => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$searchInput?.setValue(ctx.getObject());\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.onEnterPressed();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={\"sap-icon://favorite\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip={this.resourceBundle.getText(\"M_EASY_FILTER_FILLED_STAR\")}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype={ButtonType.Transparent}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress={(): void => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//Retaining the focus on popover doesn't make the popover close on every interaction\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$favoritePopover?.focus();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst queryString = ctx.getObject();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst index = this.state.favoriteQueries.indexOf(queryString);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.favoriteQueries = this.state.favoriteQueries.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(query) => query !== queryString\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FlexBox>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CustomListItem>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</List>,\n\t\t\t\t\t\t\t\t\t<Title\n\t\t\t\t\t\t\t\t\t\ttitleStyle={TitleLevel.H6}\n\t\t\t\t\t\t\t\t\t\ttext={this.resourceBundle.getText(\"M_EASY_FILTER_POPOVER_LAST_USED\")}\n\t\t\t\t\t\t\t\t\t\tclass={\"sapFeControlsTitleBorder\"}\n\t\t\t\t\t\t\t\t\t\tvisible={equal(bindState(this.state, \"isHistoryEnabled\"), true)}\n\t\t\t\t\t\t\t\t\t/>,\n\t\t\t\t\t\t\t\t\t<List\n\t\t\t\t\t\t\t\t\t\titems={bindState(this.state, \"recentQueriesWitFavorites\")}\n\t\t\t\t\t\t\t\t\t\tvisible={equal(bindState(this.state, \"isHistoryEnabled\"), true)}\n\t\t\t\t\t\t\t\t\t\tmode={ListMode.Delete}\n\t\t\t\t\t\t\t\t\t\tdelete={(e: ListBase$DeleteEvent): void => {\n\t\t\t\t\t\t\t\t\t\t\t//Retaining the focus on popover doesn't make the popover close on every interaction\n\t\t\t\t\t\t\t\t\t\t\tthis.$favoritePopover?.focus();\n\t\t\t\t\t\t\t\t\t\t\tconst queryString = e.getParameter(\"listItem\")?.data(\"text\");\n\t\t\t\t\t\t\t\t\t\t\tthis.state.recentQueries = this.state.recentQueries.filter((query) => query !== queryString);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\tnoData: (\n\t\t\t\t\t\t\t\t\t\t\t\t<IllustratedMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={this.resourceBundle.getText(\"M_EASY_FILTER_POPOVER_EMPTY_LAST_USED_TITLE\")}\n\t\t\t\t\t\t\t\t\t\t\t\t\tillustrationSize={IllustratedMessageSize.Dot}\n\t\t\t\t\t\t\t\t\t\t\t\t\tillustrationType={IllustratedMessageType.NoEntries}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdescription={this.resourceBundle.getText(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"M_EASY_FILTER_POPOVER_EMPTY_RECENT_DESCRIPTION\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\titems: (id: string, ctx: Context): FlexBox => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CustomListItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress={(): void => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$searchInput?.setValue(ctx.getObject().text);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.onEnterPressed();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass={\"sapUiSmallMarginBegin\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustomData={[<CustomData key={\"text\"} value={ctx.getObject().text} />]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FlexBox\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth={\"100%\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdirection={FlexDirection.Row}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talignItems={FlexAlignItems.Center}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent={FlexJustifyContent.SpaceBetween}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trenderType={\"Bare\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext={ctx.getObject().text}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip={ctx.getObject().text}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twrapping={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"sapFEControlsPointer\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdependents: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EventDelegateHook\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttap={(): void => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$searchInput?.setValue(ctx.getObject().text);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.onEnterPressed();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tctx.getObject().isFavorite\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"sap-icon://favorite\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"sap-icon://add-favorite\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tctx.getObject().isFavorite\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? this.resourceBundle.getText(\"M_EASY_FILTER_FILLED_STAR\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: this.resourceBundle.getText(\"M_EASY_FILTER_EMPTY_START\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled={lessThan(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlength(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbindState(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"favoriteQueries\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) as PathInModelExpression<unknown>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype={ButtonType.Transparent}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress={(): void => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//Retaining the focus on popover doesn't make the popover close on every interaction\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$favoritePopover?.focus();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst queryString = ctx.getObject().text;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst isFavorite = ctx.getObject().isFavorite;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (isFavorite) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.removeFromFavorites(queryString);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addToFavorites(queryString);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FlexBox>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</CustomListItem>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</FlexBox>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Popover>\n\t\t) as Popover;\n\t}\n\n\tprivate removeFromFavorites(query: string): void {\n\t\tthis.state.favoriteQueries = this.state.favoriteQueries.filter((data) => data.toLowerCase() !== query.toLowerCase());\n\t}\n\n\tprivate addToFavorites(query: string): void {\n\t\tconst newFavorite = [query].concat(this.state.favoriteQueries.concat());\n\t\tif (newFavorite.length > 5) {\n\t\t\tnewFavorite.pop();\n\t\t}\n\t\tthis.state.favoriteQueries = newFavorite;\n\t}\n\n\tstatic render(rm: RenderManager, control: EasyFilterInput): void {\n\t\treturn jsx.renderUsingRenderManager(rm, control, () => {\n\t\t\treturn (\n\t\t\t\t<span ref={control} class={\"sapFEEasyFilterInput\"}>\n\t\t\t\t\t{control.$searchInput}\n\t\t\t\t</span>\n\t\t\t);\n\t\t});\n\t}\n}\n"],"mappings":"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","ignoreList":[],"sourceRoot":"easyFilter"}},{"offset":{"line":16,"column":0},"map":{"version":3,"names":["ShellHistoryProvider","_dec","defineUI5Class","_dec2","defineState","_dec3","defineReference","_dec4","_class","_class2","_ShellHistoryProvider","_ManagedObject","personalizationService","globalPersonalizer","appPersonalizer","data","appData","_this","call","this","_initializerDefineProperty","_descriptor","instances","add","state","isHistoryEnabled","apps","recentQueries","favoriteQueries","_exports","_inheritsLoose","getShellDialogContent","selectedValue","$form","_jsxs","VBox","children","_jsx","Title","text","resourceBundle","getText","CheckBox","ref","$historyEnabled","selected","saveShellDialog","currentSelectedState","current","getSelected","forEach","instance","_proto","prototype","onStateChange","async","setPersData","valueOf","getRecentQueries","concat","getFavoriteQueries","setRecentQueries","setFavoriteQueries","getInstance","appId","shellContainer","sap","ui","require","resolveCreation","Promise","resolve","extensionService","getServiceAsync","frameBoundExtension","shellHistoryProvider","registerUserAction","e","Log","error","Error","message","String","shellExtensionService","Lib","getResourceBundleFor","scope","clientStorageAllowed","keyCategory","constants","FIXED_KEY","validity","Infinity","writeFrequency","LOW","getPersonalizer","container","item","globalData","getPersData","uid","shellHistoryDialog","isDialogAdded","addGroupedUserSettingsEntry","title","icon","entryHelpId","groupingId","groupingTabTitle","groupingTabHelpId","value","content","onSave","onCancel","err","ManagedObject","Set","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer","_init","Object","getOwnPropertyDescriptor","undefined","_init2"],"sources":["./ShellHistoryProvider.tsx"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport uid from \"sap/base/util/uid\";\nimport { defineReference, defineState, defineUI5Class } from \"sap/fe/base/ClassSupport\";\nimport type { Ref } from \"sap/fe/base/jsx-runtime/jsx\";\nimport CheckBox from \"sap/m/CheckBox\";\nimport Title from \"sap/m/Title\";\nimport VBox from \"sap/m/VBox\";\nimport ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Lib from \"sap/ui/core/Lib\";\nimport type Container from \"sap/ushell/Container\";\nimport type Extension from \"sap/ushell/services/Extension\";\nimport type PersonalizationV2 from \"sap/ushell/services/PersonalizationV2\";\n\nexport type PersonalizationWithConstants = PersonalizationV2 & {\n\tconstants: {\n\t\tkeyCategory: {\n\t\t\tFIXED_KEY: string;\n\t\t\tGENERATED_KEY: string;\n\t\t};\n\t\twriteFrequency: {\n\t\t\tHIGH: string;\n\t\t\tLOW: string;\n\t\t};\n\t};\n};\n\ntype FrameBoundExtension = {\n\taddGroupedUserSettingsEntry: (settings: unknown) => Promise<void>;\n};\ntype PersonalizerType = {\n\tgetPersData: () => Promise<object>;\n\tsetPersData: (persData: object) => Promise<void>;\n};\n\ntype ShellHistorySettings = {\n\tisHistoryEnabled: boolean;\n\tapps: Record<string, string>;\n};\n\ntype ShellAppHistorySettings = {\n\trecentQueries: string[];\n\tfavoriteQueries: string[];\n};\n\n@defineUI5Class(\"sap.fe.controls.easyFilter.ShellHistoryProvider\")\nexport default class ShellHistoryProvider extends ManagedObject {\n\t@defineState()\n\tprivate state = {\n\t\tisHistoryEnabled: true,\n\t\tapps: {} as Record<string, string>,\n\t\trecentQueries: [] as readonly string[],\n\t\tfavoriteQueries: [] as readonly string[]\n\t};\n\n\tprivate static instances: Set<ShellHistoryProvider> = new Set();\n\n\tconstructor(\n\t\tprivate readonly personalizationService: PersonalizationWithConstants,\n\t\tprivate readonly globalPersonalizer: PersonalizerType,\n\t\tprivate readonly appPersonalizer: PersonalizerType,\n\t\tprivate readonly data: ShellHistorySettings,\n\t\tprivate readonly appData: ShellAppHistorySettings\n\t) {\n\t\tsuper();\n\t\tShellHistoryProvider.instances.add(this);\n\t\tthis.state.isHistoryEnabled = data.isHistoryEnabled;\n\t\tthis.state.apps = data.apps;\n\t\tthis.state.recentQueries = appData.recentQueries;\n\t\tthis.state.favoriteQueries = appData.favoriteQueries;\n\t}\n\n\tprivate static resourceBundle = Lib.getResourceBundleFor(\"sap.fe.controls\")!;\n\n\tprivate static $form: VBox;\n\n\t@defineReference()\n\tprivate static $defaultOption: Ref<CheckBox>;\n\n\t@defineReference()\n\tprivate static $historyEnabled: Ref<CheckBox>;\n\n\tstatic getShellDialogContent(selectedValue: boolean): VBox {\n\t\tthis.$form = (\n\t\t\t<VBox>\n\t\t\t\t<Title text={this.resourceBundle.getText(\"M_BUSINESS_AI_SHELL_SETTINGS_EASY_FILTER\")}></Title>\n\t\t\t\t<CheckBox\n\t\t\t\t\tref={this.$historyEnabled}\n\t\t\t\t\tselected={selectedValue}\n\t\t\t\t\ttext={this.resourceBundle.getText(\"M_BUSINESS_AI_SHELL_SETTINGS_EASY_FILTER_KEEP_QUERIES\")}\n\t\t\t\t/>\n\t\t\t</VBox>\n\t\t) as VBox;\n\t\treturn this.$form;\n\t}\n\n\tstatic saveShellDialog(): void {\n\t\tconst currentSelectedState = ShellHistoryProvider.$historyEnabled.current!.getSelected();\n\t\t//updating the value in all the objects\n\t\tthis.instances.forEach((instance) => {\n\t\t\tinstance.state.isHistoryEnabled = currentSelectedState;\n\t\t});\n\t}\n\n\tasync onStateChange(): Promise<void> {\n\t\t// We confirm the value of the switch\n\t\tawait this.globalPersonalizer.setPersData({\n\t\t\tisHistoryEnabled: this.state.isHistoryEnabled,\n\t\t\tapps: this.state.apps\n\t\t});\n\t\tawait this.appPersonalizer.setPersData({ recentQueries: this.state.recentQueries, favoriteQueries: this.state.favoriteQueries });\n\t}\n\n\tisHistoryEnabled(): boolean {\n\t\treturn this.state.isHistoryEnabled.valueOf();\n\t}\n\n\tgetRecentQueries(): string[] {\n\t\treturn this.state.recentQueries.concat();\n\t}\n\n\tgetFavoriteQueries(): string[] {\n\t\treturn this.state.favoriteQueries.concat();\n\t}\n\n\tsetRecentQueries(recentQueries: readonly string[]): void {\n\t\tthis.state.recentQueries = recentQueries;\n\t}\n\n\tsetFavoriteQueries(favoriteQueries: readonly string[]): void {\n\t\tthis.state.favoriteQueries = favoriteQueries;\n\t}\n\n\tstatic instance: Promise<ShellHistoryProvider | undefined>;\n\n\tstatic isDialogAdded = false;\n\n\tstatic async getInstance(appId: string): Promise<ShellHistoryProvider | undefined> {\n\t\t// Register the extension\n\t\tconst shellContainer = sap.ui.require(\"sap/ushell/Container\") as Container | undefined;\n\t\ttry {\n\t\t\tif (shellContainer) {\n\t\t\t\tlet resolveCreation!: Function;\n\t\t\t\tthis.instance = new Promise<ShellHistoryProvider | undefined>((resolve) => {\n\t\t\t\t\tresolveCreation = resolve;\n\t\t\t\t});\n\t\t\t\tconst extensionService = (await shellContainer.getServiceAsync(\"Extension\")) as Extension | undefined;\n\t\t\t\tconst frameBoundExtension = (await shellContainer.getServiceAsync(\"FrameBoundExtension\")) as\n\t\t\t\t\t| FrameBoundExtension\n\t\t\t\t\t| undefined;\n\t\t\t\tconst personalizationService = (await shellContainer.getServiceAsync(\"PersonalizationV2\")) as\n\t\t\t\t\t| PersonalizationWithConstants\n\t\t\t\t\t| undefined;\n\t\t\t\tif (extensionService && personalizationService && frameBoundExtension) {\n\t\t\t\t\tconst shellHistoryProvider = await ShellHistoryProvider.registerUserAction(\n\t\t\t\t\t\textensionService,\n\t\t\t\t\t\tpersonalizationService,\n\t\t\t\t\t\tframeBoundExtension,\n\t\t\t\t\t\tappId\n\t\t\t\t\t);\n\t\t\t\t\tresolveCreation(shellHistoryProvider);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tLog.error(\"Cannot register extension\", e instanceof Error ? e.message : String(e));\n\t\t}\n\t\treturn this.instance;\n\t}\n\n\tstatic async registerUserAction(\n\t\tshellExtensionService: Extension,\n\t\tpersonalizationService: PersonalizationWithConstants,\n\t\tframeBoundExtension: FrameBoundExtension,\n\t\tappId: string\n\t): Promise<ShellHistoryProvider | undefined> {\n\t\ttry {\n\t\t\tconst resourceBundle = Lib.getResourceBundleFor(\"sap.fe.controls\")!;\n\t\t\tconst scope = {\n\t\t\t\tclientStorageAllowed: false,\n\t\t\t\tkeyCategory: personalizationService.constants.keyCategory.FIXED_KEY,\n\t\t\t\tvalidity: Infinity,\n\t\t\t\twriteFrequency: personalizationService.constants.writeFrequency.LOW\n\t\t\t};\n\t\t\tconst globalPersonalizer = (await personalizationService.getPersonalizer(\n\t\t\t\t{\n\t\t\t\t\tcontainer: \"sap.fe.easyFilter\",\n\t\t\t\t\titem: \"settings\"\n\t\t\t\t},\n\t\t\t\tscope\n\t\t\t)) as PersonalizerType;\n\t\t\tlet globalData = (await globalPersonalizer.getPersData()) as ShellHistorySettings | undefined;\n\t\t\tif (!globalData) {\n\t\t\t\t// In case defaut value don't exist we create it\n\t\t\t\tglobalData = {\n\t\t\t\t\tisHistoryEnabled: true,\n\t\t\t\t\tapps: {\n\t\t\t\t\t\t[appId]: uid()\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tglobalPersonalizer.setPersData(globalData);\n\t\t\t} else if (!globalData.apps?.[appId]) {\n\t\t\t\tglobalData.apps ??= {};\n\t\t\t\tglobalData.apps[appId] = uid();\n\t\t\t\tawait globalPersonalizer.setPersData(globalData);\n\t\t\t}\n\t\t\tconst appPersonalizer = (await personalizationService.getPersonalizer(\n\t\t\t\t{\n\t\t\t\t\tcontainer: \"sap.fe.easyFilter\" + globalData.apps[appId],\n\t\t\t\t\titem: \"recentQueries\"\n\t\t\t\t},\n\t\t\t\tscope\n\t\t\t)) as PersonalizerType;\n\t\t\tlet appData = (await appPersonalizer.getPersData()) as ShellAppHistorySettings | undefined;\n\t\t\tif (!appData) {\n\t\t\t\tappData = {\n\t\t\t\t\trecentQueries: [],\n\t\t\t\t\tfavoriteQueries: []\n\t\t\t\t};\n\t\t\t\tawait appPersonalizer.setPersData(appData);\n\t\t\t}\n\t\t\tconst shellHistoryDialog = new ShellHistoryProvider(\n\t\t\t\tpersonalizationService,\n\t\t\t\tglobalPersonalizer,\n\t\t\t\tappPersonalizer,\n\t\t\t\tglobalData,\n\t\t\t\tappData\n\t\t\t);\n\t\t\tif (!this.isDialogAdded) {\n\t\t\t\tthis.isDialogAdded = true;\n\t\t\t\tawait frameBoundExtension.addGroupedUserSettingsEntry({\n\t\t\t\t\ttitle: resourceBundle.getText(\"M_BUSINESS_AI_SHELL_SETTINGS_TITLE\"),\n\t\t\t\t\ticon: \"sap-icon://laptop\",\n\t\t\t\t\tentryHelpId: \"userActivitiesEntry\",\n\t\t\t\t\tgroupingId: \"userActivities\",\n\t\t\t\t\tgroupingTabTitle: resourceBundle.getText(\"M_BUSINESS_AI_SHELL_SETTINGS_TITLE\"),\n\t\t\t\t\tgroupingTabHelpId: \"sapBusinessAI-helpId\",\n\t\t\t\t\tvalue: async () => {\n\t\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t\t},\n\t\t\t\t\tcontent: async () => {\n\t\t\t\t\t\treturn Promise.resolve(this.getShellDialogContent(globalData?.isHistoryEnabled as boolean));\n\t\t\t\t\t},\n\t\t\t\t\tonSave: () => {\n\t\t\t\t\t\tthis.saveShellDialog();\n\t\t\t\t\t},\n\t\t\t\t\tonCancel: () => {\n\t\t\t\t\t\t//return (this.viewInstance.getController() as RequestSettingsController).onCancel();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn shellHistoryDialog;\n\t\t} catch (err) {\n\t\t\tLog.error(\"Cannot add user action\", err instanceof Error ? err.message : String(err));\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[],"sourceRoot":"easyFilter"}},{"offset":{"line":21,"column":0},"map":{"version":3,"names":["EasyFilterToken","_dec","defineUI5Class","_dec2","property","type","_dec3","_dec4","_dec5","defaultValue","_dec6","_dec7","_dec8","group","ValueState","None","_dec9","visibility","_dec10","_class","_class2","_Token","idOrSettings","settings","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","resourceBundle","Lib","getResourceBundleFor","eventAttached","isDescriptionFetched","valueStateMessage","ValueStateMessage","attachCloseHandlersForValueStateMessagePopup","_exports","_inheritsLoose","_proto","prototype","firePress","_parameters","tokenizer","getParent","getEditable","fireEvent","close","easyFilterBarContainer","getCustomDataValue","popover","key","keySpecificSelectedValues","isOpen","prevTokenKey","setShowHeader","getFooter","setVisible","shouldOpenDefaultFragment","invokeCalendar","invokeTime","invokeMenuWithCheckBox","invokeMenuWithSingleSelect","invokeValueHelpPreview","okButton","getOkButton","showAllButton","getShowAllButton","attachPress","handleOkClick","bind","handleShowAllClick","attachAfterClose","handleAttachAfterClose","getCustomData","find","customData","getKey","getValue","onBeforeRendering","e","Token","apply","setValueForToken","document","addEventListener","tokenSelectedValues","items","length","firstKeySpecificValue","selectedValues","firstOperator","operator","firstSelectedValue","totalSelectedValues","reduce","counter","tokenSelectedValue","EasyFilterUtils","isBetweenSelectedValues","tokenInfo","requiredMetadata","filterBarMetadata","data","name","dataType","setValueForMenu","setProperty","mapOperatorForBetweenOperator","mapOperator","getText","setBusy","description","getDescriptionByKey","error","Log","getDomRefForValueStateMessage","getDomRef","async","codeList","getCodeListArray","list","value","menuWithCheckBox","MenuWithCheckBoxFactory","innerControl","getControl","addDependent","setItems","removeAllContent","addContent","openPopover","menuWithSingleSelect","MenuWithSingleSelectFactory","calender","CalenderFactory","time","TimeFactory","valueHelpPreview","ValueHelpPreviewFactory","oPopover","setTitle","label","openBy","okButtonHandler","invokeOkButtonHandler","valueHelpHandler","invokeShowAllButtonHandler","invokePopupCloseHandler","getInnerControl","openValueStateMessage","open","closeValueStateMessage","isBetweenOperator","FilterOperator","BT","NB","focusout","render","rm","control","jsx","renderUsingRenderManager","classes","classesForLabel","classesForValue","isMandatory","getMandatory","push","getSelected","getValueState","Error","_jsxs","ref","class","join","tabindex","getProperty","children","getLabel","_jsx","getAggregation","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./Token.tsx"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type { EnhanceWithUI5, PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport jsx from \"sap/fe/base/jsx-runtime/jsx\";\nimport type List from \"sap/m/List\";\nimport type Popover from \"sap/m/Popover\";\nimport type TimePickerClocks from \"sap/m/TimePickerClocks\";\nimport type { $TokenSettings } from \"sap/m/Token\";\nimport Token from \"sap/m/Token\";\nimport type Tokenizer from \"sap/m/Tokenizer\";\nimport ValueStateMessage from \"sap/m/delegate/ValueStateMessage\";\nimport type Control from \"sap/ui/core/Control\";\nimport type CustomData from \"sap/ui/core/CustomData\";\nimport type UI5Element from \"sap/ui/core/Element\";\nimport Lib from \"sap/ui/core/Lib\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport { ValueState } from \"sap/ui/core/library\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport type Calendar from \"sap/ui/unified/Calendar\";\nimport type { PropertyMetadata } from \"ux/eng/fioriai/reuse/easyfilter/EasyFilter\";\nimport type EasyFilterBarContainer from \"./EasyFilterBarContainer\";\nimport type {\n\tBetweenSelectedValues,\n\tEasyFilterPropertyMetadata,\n\tTokenDefinition,\n\tTokenSelectedValuesDefinition\n} from \"./EasyFilterBarContainer\";\nimport CalenderFactory from \"./innerControls/CalendarFactory\";\nimport MenuWithCheckBoxFactory from \"./innerControls/MenuWithCheckBoxFactory\";\nimport MenuWithSingleSelectFactory from \"./innerControls/MenuWithSingleSelectFactory\";\nimport TimeFactory from \"./innerControls/TimeFactory\";\nimport ValueHelpPreviewFactory from \"./innerControls/ValueHelpPreviewFactory\";\nimport EasyFilterUtils from \"./utils\";\n\ntype codeListType = PropertyMetadata[\"codeList\"];\ntype CustomKeys = \"TokenInfo\" | \"popover\" | \"easyFilterBarContainer\" | \"codeList\";\n\n@defineUI5Class(\"sap.fe.controls.easyFilter.Token\")\nexport default class EasyFilterToken extends Token {\n\t@property({ type: \"string\" })\n\tlabel?: string;\n\n\t@property({ type: \"string\" })\n\ttitlePopover?: string;\n\n\t@property({ type: \"string\" })\n\tvalue?: string;\n\n\t@property({ type: \"string\", defaultValue: null })\n\tvalueStateText?: string;\n\n\t@property({ type: \"boolean\" })\n\tmandatory?: boolean;\n\n\t@property({ type: \"array\" })\n\titems?: TokenSelectedValuesDefinition[];\n\n\t@property({ type: \"sap.ui.core.ValueState\", group: \"Appearance\", defaultValue: ValueState.None })\n\tvalueState?: ValueState;\n\n\t@property({ type: \"int\", visibility: \"hidden\" })\n\tposinset?: number;\n\n\t@property({ type: \"int\", visibility: \"hidden\" })\n\tsetsize?: number;\n\n\tprivate resourceBundle = Lib.getResourceBundleFor(\"sap.fe.controls\")!;\n\n\tprivate innerControl?: Calendar | TimePickerClocks | List;\n\n\tprivate time?: TimeFactory;\n\n\tprivate calender?: CalenderFactory;\n\n\tprivate valueHelpPreview?: ValueHelpPreviewFactory;\n\n\tprivate menuWithCheckBox?: MenuWithCheckBoxFactory;\n\n\tprivate menuWithSingleSelect?: MenuWithSingleSelectFactory;\n\n\tprivate eventAttached = false;\n\n\tprivate isDescriptionFetched = false;\n\n\tprivate valueStateMessage?: ValueStateMessage;\n\n\tprivate static prevTokenKey?: string;\n\n\tconstructor(\n\t\tidOrSettings: string | (PropertiesOf<EasyFilterToken> & $TokenSettings),\n\t\tsettings?: PropertiesOf<EasyFilterToken> & $TokenSettings\n\t) {\n\t\tsuper(idOrSettings as string, settings);\n\t\tthis.valueStateMessage = new ValueStateMessage(this);\n\t\t//Closing the ValueState popovers whenever we are clicking/tapping else where on the screen\n\t\tthis.attachCloseHandlersForValueStateMessagePopup();\n\t}\n\n\tfirePress(_parameters: unknown): this {\n\t\tconst tokenizer = this.getParent() as Tokenizer;\n\t\tif (!tokenizer.getEditable()) {\n\t\t\treturn this;\n\t\t}\n\t\t// We hijack the press event to open the detail popover\n\t\tthis.fireEvent(\"press\");\n\t\tthis.valueStateMessage?.close();\n\n\t\tconst easyFilterBarContainer = this.getCustomDataValue(\"easyFilterBarContainer\") as EasyFilterBarContainer;\n\t\tconst popover = this.getCustomDataValue(\"popover\") as Popover;\n\n\t\tconst { key, type, keySpecificSelectedValues } = this.getCustomDataValue(\"TokenInfo\") as TokenDefinition;\n\n\t\t// Check if the popover is already open\n\t\tif (popover.isOpen()) {\n\t\t\t// If the popover is open and the new key is the same as the previous one, do nothing\n\t\t\tif (EasyFilterToken.prevTokenKey === key) {\n\t\t\t\treturn this; // Return early to prevent any further action\n\t\t\t} else {\n\t\t\t\t// If the key is different, update prevTokenKey and close the popover\n\t\t\t\tEasyFilterToken.prevTokenKey = key; // Update the previous token key to the new one\n\t\t\t\tpopover.close(); // Close the popover\n\t\t\t}\n\t\t} else {\n\t\t\t// If the popover is not open, update prevTokenKey for the first time\n\t\t\tEasyFilterToken.prevTokenKey = key;\n\t\t}\n\n\t\t//resetting the header and footer, if hidden by singleselect\n\t\tpopover?.setShowHeader(true);\n\t\tpopover?.getFooter()?.setVisible(true);\n\n\t\tif (type === \"Calendar\" && this.shouldOpenDefaultFragment(keySpecificSelectedValues)) {\n\t\t\tthis.invokeCalendar();\n\t\t} else if (type === \"Time\" && this.shouldOpenDefaultFragment(keySpecificSelectedValues)) {\n\t\t\tthis.invokeTime();\n\t\t} else if (type === \"MenuWithCheckBox\") {\n\t\t\tthis.invokeMenuWithCheckBox();\n\t\t} else if (type === \"MenuWithSingleSelect\") {\n\t\t\tthis.invokeMenuWithSingleSelect();\n\t\t} else {\n\t\t\tthis.invokeValueHelpPreview();\n\t\t}\n\t\tconst okButton = easyFilterBarContainer?.getOkButton();\n\t\tconst showAllButton = easyFilterBarContainer?.getShowAllButton();\n\t\tif (!(this.eventAttached ?? false)) {\n\t\t\tokButton?.attachPress(this.handleOkClick.bind(this));\n\t\t\tshowAllButton?.attachPress(this.handleShowAllClick.bind(this));\n\t\t\tpopover.attachAfterClose(this.handleAttachAfterClose.bind(this));\n\t\t\tthis.eventAttached = true;\n\t\t}\n\t\treturn this;\n\t}\n\n\tgetCustomDataValue(key: CustomKeys): TokenDefinition | Popover | EasyFilterBarContainer | codeListType | undefined {\n\t\treturn this.getCustomData()\n\t\t\t.find((customData: CustomData) => customData.getKey() === key)\n\t\t\t?.getValue();\n\t}\n\n\tonBeforeRendering(e: jQuery.Event): void | undefined {\n\t\tToken.prototype.onBeforeRendering.apply(this, [e]);\n\t\tif (!this.isDescriptionFetched) {\n\t\t\tthis.setValueForToken();\n\t\t}\n\t\tthis.isDescriptionFetched = false;\n\t}\n\n\tattachCloseHandlersForValueStateMessagePopup(): void {\n\t\tdocument.addEventListener(\"click\", () => {\n\t\t\tif (this?.valueStateMessage) {\n\t\t\t\tthis.valueStateMessage.close();\n\t\t\t}\n\t\t});\n\n\t\tdocument.addEventListener(\"touchstart\", () => {\n\t\t\tif (this?.valueStateMessage) {\n\t\t\t\tthis.valueStateMessage.close();\n\t\t\t}\n\t\t});\n\t}\n\n\tsetValueForToken(): void {\n\t\tconst tokenSelectedValues = this.items as TokenSelectedValuesDefinition[];\n\t\tif (tokenSelectedValues.length > 0) {\n\t\t\tconst firstKeySpecificValue = tokenSelectedValues[0].selectedValues;\n\t\t\tconst firstOperator = tokenSelectedValues[0]?.operator;\n\t\t\tconst firstSelectedValue = firstKeySpecificValue[0];\n\t\t\tconst totalSelectedValues = tokenSelectedValues?.reduce((counter, tokenSelectedValue) => {\n\t\t\t\tif (EasyFilterUtils.isBetweenSelectedValues(tokenSelectedValue.operator)) {\n\t\t\t\t\treturn ++counter;\n\t\t\t\t} else {\n\t\t\t\t\treturn counter + tokenSelectedValue.selectedValues.length;\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t\tif (totalSelectedValues === 1) {\n\t\t\t\tconst tokenInfo = this.getCustomDataValue(\"TokenInfo\");\n\t\t\t\tconst easyFilterBarContainer = this.getCustomDataValue(\"easyFilterBarContainer\") as EasyFilterBarContainer | undefined;\n\t\t\t\tconst requiredMetadata = easyFilterBarContainer?.filterBarMetadata?.find((data) => data.name === this.getKey());\n\t\t\t\tif (!requiredMetadata) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst { type, dataType } = requiredMetadata;\n\t\t\t\tif (tokenInfo) {\n\t\t\t\t\tconst { key } = tokenInfo as TokenDefinition;\n\t\t\t\t\tif (type === \"MenuWithCheckBox\" || type === \"MenuWithSingleSelect\") {\n\t\t\t\t\t\tthis.setValueForMenu(key);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (EasyFilterUtils.isBetweenSelectedValues(firstOperator)) {\n\t\t\t\t\t\tthis.setProperty(\n\t\t\t\t\t\t\t\"value\",\n\t\t\t\t\t\t\tEasyFilterUtils.mapOperatorForBetweenOperator(\n\t\t\t\t\t\t\t\tfirstOperator,\n\t\t\t\t\t\t\t\tfirstKeySpecificValue as BetweenSelectedValues,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tdataType === \"Edm.DateTimeOffset\"\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setProperty(\n\t\t\t\t\t\t\t\"value\",\n\t\t\t\t\t\t\tEasyFilterUtils.mapOperator(\n\t\t\t\t\t\t\t\tfirstOperator,\n\t\t\t\t\t\t\t\tfirstSelectedValue as string | number | boolean,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tdataType === \"Edm.DateTimeOffset\"\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.setProperty(\"value\", this.resourceBundle.getText(\"M_EASY_FILTER_MANDATORY_TOKEN_ITEMS\", [totalSelectedValues], true));\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setProperty(\"value\", this.resourceBundle.getText(\"M_EASY_FILTER_MANDATORY_TOKEN_SELECT_VALUE\"), true);\n\t\t}\n\t}\n\n\tsetValueForMenu(key: string): void {\n\t\tconst easyFilterBarContainer = this.getCustomDataValue(\"easyFilterBarContainer\") as EasyFilterBarContainer;\n\t\t//The retrieval of codeList might take more time so marking the control as busy until then\n\t\tthis.setBusy(true);\n\t\t(async (): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tconst description = await this.getDescriptionByKey(\n\t\t\t\t\teasyFilterBarContainer.filterBarMetadata?.find((data) => data.name === key) as EasyFilterPropertyMetadata,\n\t\t\t\t\tthis.items as TokenSelectedValuesDefinition[]\n\t\t\t\t);\n\t\t\t\t//Rerender the token once the description is fetched\n\t\t\t\tthis.setProperty(\"value\", description);\n\t\t\t\tthis.isDescriptionFetched = true;\n\t\t\t\tthis.setBusy(false);\n\t\t\t} catch (error) {\n\t\t\t\tLog.error(\"Error while fetching codeList\", error as Error);\n\t\t\t}\n\t\t})();\n\t}\n\n\tgetDomRefForValueStateMessage(): Element | null {\n\t\treturn this.getDomRef();\n\t}\n\n\tasync getDescriptionByKey(\n\t\tdata: EasyFilterPropertyMetadata,\n\t\tselectedValues: TokenDefinition[\"keySpecificSelectedValues\"]\n\t): Promise<string> {\n\t\tconst codeList = await EasyFilterUtils.getCodeListArray(data.codeList);\n\t\treturn codeList?.find((list) => list.value === selectedValues[0].selectedValues[0])?.description as string;\n\t}\n\n\tasync invokeMenuWithCheckBox(): Promise<void> {\n\t\tconst easyFilterBarContainer = this.getCustomDataValue(\"easyFilterBarContainer\") as EasyFilterBarContainer;\n\t\tconst popover = this.getCustomDataValue(\"popover\") as Popover;\n\t\tconst codeList = this.getCustomDataValue(\"codeList\") as codeListType;\n\t\tconst { keySpecificSelectedValues } = this.getCustomDataValue(\"TokenInfo\") as TokenDefinition;\n\t\tif (!this.menuWithCheckBox) {\n\t\t\tthis.menuWithCheckBox = new MenuWithCheckBoxFactory(\n\t\t\t\teasyFilterBarContainer as EnhanceWithUI5<EasyFilterBarContainer>,\n\t\t\t\tthis as EasyFilterToken as EnhanceWithUI5<EasyFilterToken>\n\t\t\t);\n\t\t}\n\t\tthis.innerControl = this.menuWithCheckBox.getControl();\n\t\tthis.addDependent(this.innerControl as UI5Element);\n\t\tawait this.menuWithCheckBox.setItems(codeList, keySpecificSelectedValues);\n\t\tpopover?.removeAllContent();\n\t\tpopover?.addContent(this.innerControl as Control);\n\t\teasyFilterBarContainer?.getShowAllButton()?.setVisible(false);\n\t\tthis.openPopover();\n\t}\n\n\tasync invokeMenuWithSingleSelect(): Promise<void> {\n\t\tconst easyFilterBarContainer = this.getCustomDataValue(\"easyFilterBarContainer\") as EasyFilterBarContainer;\n\t\tconst popover = this.getCustomDataValue(\"popover\") as Popover;\n\t\tconst codeList = this.getCustomDataValue(\"codeList\") as codeListType;\n\t\tconst { keySpecificSelectedValues } = this.getCustomDataValue(\"TokenInfo\") as TokenDefinition;\n\t\tif (!this.menuWithSingleSelect) {\n\t\t\tthis.menuWithSingleSelect = new MenuWithSingleSelectFactory(\n\t\t\t\teasyFilterBarContainer as EnhanceWithUI5<EasyFilterBarContainer>,\n\t\t\t\tthis as EasyFilterToken as EnhanceWithUI5<EasyFilterToken>\n\t\t\t);\n\t\t}\n\t\tthis.innerControl = this.menuWithSingleSelect.getControl();\n\t\tthis.addDependent(this.innerControl as UI5Element);\n\t\tawait this.menuWithSingleSelect.setItems(codeList, keySpecificSelectedValues);\n\n\t\tpopover.setShowHeader(false);\n\t\tpopover.getFooter()?.setVisible(false);\n\n\t\tpopover?.removeAllContent();\n\t\tpopover?.addContent(this.innerControl as Control);\n\t\tthis.openPopover();\n\t}\n\n\tinvokeCalendar(): void {\n\t\tconst easyFilterBarContainer = this.getCustomDataValue(\"easyFilterBarContainer\") as EasyFilterBarContainer;\n\t\tconst popover = this.getCustomDataValue(\"popover\") as Popover;\n\t\tif (!this.calender) {\n\t\t\tthis.calender = new CalenderFactory(\n\t\t\t\teasyFilterBarContainer as EnhanceWithUI5<EasyFilterBarContainer>,\n\t\t\t\tthis as EasyFilterToken as EnhanceWithUI5<EasyFilterToken>\n\t\t\t);\n\t\t}\n\t\tthis.innerControl = this.calender.getControl();\n\t\tthis.addDependent(this.innerControl as UI5Element);\n\t\tpopover?.removeAllContent();\n\t\tpopover?.addContent(this.innerControl as Control);\n\t\teasyFilterBarContainer?.getShowAllButton()?.setVisible(true);\n\t\tthis.openPopover();\n\t}\n\n\tinvokeTime(): void {\n\t\tconst easyFilterBarContainer = this.getCustomDataValue(\"easyFilterBarContainer\") as EasyFilterBarContainer;\n\t\tconst popover = this.getCustomDataValue(\"popover\") as Popover;\n\t\tif (!this.time) {\n\t\t\tthis.time = new TimeFactory(\n\t\t\t\teasyFilterBarContainer as EnhanceWithUI5<EasyFilterBarContainer>,\n\t\t\t\tthis as EasyFilterToken as EnhanceWithUI5<EasyFilterToken>\n\t\t\t);\n\t\t}\n\t\tthis.innerControl = this.time.getControl();\n\t\tthis.addDependent(this.innerControl as UI5Element);\n\t\tpopover?.removeAllContent();\n\t\tpopover?.addContent(this.innerControl as Control);\n\t\teasyFilterBarContainer?.getShowAllButton()?.setVisible(true);\n\t\tthis.openPopover();\n\t}\n\n\tinvokeValueHelpPreview(): void {\n\t\tconst easyFilterBarContainer = this.getCustomDataValue(\"easyFilterBarContainer\") as EasyFilterBarContainer;\n\t\tconst popover = this.getCustomDataValue(\"popover\") as Popover;\n\t\tif (!this.valueHelpPreview) {\n\t\t\tthis.valueHelpPreview = new ValueHelpPreviewFactory(\n\t\t\t\teasyFilterBarContainer as EnhanceWithUI5<EasyFilterBarContainer>,\n\t\t\t\tthis as EasyFilterToken as EnhanceWithUI5<EasyFilterToken>\n\t\t\t);\n\t\t}\n\t\tconst { type, dataType } = easyFilterBarContainer.filterBarMetadata?.find(\n\t\t\t(data) => data.name === this.getKey()\n\t\t) as EasyFilterPropertyMetadata;\n\t\tthis.valueHelpPreview.setItems(this.items as TokenSelectedValuesDefinition[], type, dataType === \"Edm.DateTimeOffset\");\n\t\tthis.innerControl = this.valueHelpPreview.getControl();\n\t\tthis.addDependent(this.innerControl as UI5Element);\n\t\tpopover?.removeAllContent();\n\t\tpopover?.addContent(this.innerControl as Control);\n\t\teasyFilterBarContainer?.getShowAllButton()?.setVisible(true);\n\t\tthis.openPopover();\n\t}\n\n\topenPopover(): void {\n\t\tconst oPopover = this.getCustomDataValue(\"popover\") as Popover;\n\t\toPopover?.setTitle(this.label);\n\t\toPopover?.openBy(this);\n\t}\n\n\thandleOkClick(): void {\n\t\t// The below event handler would be invoked on all the tokens when OK button is clicked on the popover\n\t\t//Writing the below check so that we know that the current token instance is handling the press events appropriately\n\t\tif (!this.innerControl?.getDomRef()) {\n\t\t\treturn;\n\t\t}\n\t\tconst { type, keySpecificSelectedValues } = this.getCustomDataValue(\"TokenInfo\") as TokenDefinition;\n\t\tconst popover = this.getCustomDataValue(\"popover\") as Popover;\n\n\t\tlet okButtonHandler: (() => void) | undefined;\n\t\tif (type === \"Calendar\" && this.shouldOpenDefaultFragment(keySpecificSelectedValues)) {\n\t\t\tokButtonHandler = this.calender?.invokeOkButtonHandler.bind(this.calender);\n\t\t} else if (type === \"Time\" && this.shouldOpenDefaultFragment(keySpecificSelectedValues)) {\n\t\t\tokButtonHandler = this.time?.invokeOkButtonHandler.bind(this.time);\n\t\t} else if (type === \"MenuWithCheckBox\") {\n\t\t\tokButtonHandler = this.menuWithCheckBox?.invokeOkButtonHandler.bind(this.menuWithCheckBox);\n\t\t} else {\n\t\t\tokButtonHandler = this.valueHelpPreview?.invokeOkButtonHandler.bind(this.valueHelpPreview);\n\t\t}\n\n\t\tif (okButtonHandler) {\n\t\t\tokButtonHandler();\n\t\t}\n\t\tpopover?.close();\n\t}\n\n\thandleShowAllClick(): void {\n\t\t// The below event handler would be invoked on all the tokens when OK button is clicked on the popover\n\t\t//Writing the below check so that we know that the current token instance is handling the press events appropriately\n\t\tif (!this.innerControl?.getDomRef()) {\n\t\t\treturn;\n\t\t}\n\t\tconst popover = this.getCustomDataValue(\"popover\") as Popover;\n\t\tconst { type, keySpecificSelectedValues } = this.getCustomDataValue(\"TokenInfo\") as TokenDefinition;\n\t\tpopover.close();\n\t\tlet valueHelpHandler: (() => Promise<void>) | undefined;\n\t\tif (type === \"Calendar\" && this.shouldOpenDefaultFragment(keySpecificSelectedValues)) {\n\t\t\tvalueHelpHandler = this.calender?.invokeShowAllButtonHandler.bind(this.calender);\n\t\t} else if (type === \"Time\" && this.shouldOpenDefaultFragment(keySpecificSelectedValues)) {\n\t\t\tvalueHelpHandler = this.time?.invokeShowAllButtonHandler.bind(this.time);\n\t\t} else {\n\t\t\tvalueHelpHandler = this.valueHelpPreview?.invokeShowAllButtonHandler.bind(this.valueHelpPreview);\n\t\t}\n\t\tif (valueHelpHandler) {\n\t\t\t((): void => {\n\t\t\t\tvalueHelpHandler();\n\t\t\t})();\n\t\t}\n\t}\n\n\thandleAttachAfterClose(): void {\n\t\tif (!this.innerControl?.getDomRef()) {\n\t\t\treturn;\n\t\t}\n\t\tconst tokenInfo = this.getCustomDataValue(\"TokenInfo\") as TokenDefinition | undefined;\n\t\tif (tokenInfo) {\n\t\t\tconst { type, keySpecificSelectedValues } = this.getCustomDataValue(\"TokenInfo\") as TokenDefinition;\n\t\t\tif (\n\t\t\t\ttype === \"ValueHelp\" ||\n\t\t\t\t((type === \"Calendar\" || type === \"Time\") && !this.shouldOpenDefaultFragment(keySpecificSelectedValues))\n\t\t\t) {\n\t\t\t\tthis.valueHelpPreview?.invokePopupCloseHandler();\n\t\t\t} else if (type === \"MenuWithCheckBox\") {\n\t\t\t\tthis.menuWithCheckBox?.invokePopupCloseHandler();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetInnerControl(): Calendar | TimePickerClocks | List | undefined {\n\t\treturn this.innerControl;\n\t}\n\n\topenValueStateMessage(): void {\n\t\tthis.valueStateMessage?.open();\n\t}\n\n\tcloseValueStateMessage(): void {\n\t\tthis.valueStateMessage?.close();\n\t}\n\n\tshouldOpenDefaultFragment(keySpecificSelectedValues: TokenSelectedValuesDefinition[]): boolean {\n\t\t//Between and NotBetween cant be handled by default fragments\n\t\tconst isBetweenOperator = keySpecificSelectedValues.find(\n\t\t\t(selectedValues) => selectedValues.operator === FilterOperator.BT || selectedValues.operator === FilterOperator.NB\n\t\t);\n\t\t//This first condition would be useful in mandatory token scenario and no value has been set to it\n\t\treturn (\n\t\t\tkeySpecificSelectedValues.length === 0 ||\n\t\t\t(keySpecificSelectedValues.length === 1 && keySpecificSelectedValues[0].selectedValues.length === 1 && !isBetweenOperator)\n\t\t);\n\t}\n\n\tfocusout(): void {\n\t\tthis.valueStateMessage?.close();\n\t}\n\n\tstatic render(rm: RenderManager, control: EnhanceWithUI5<EasyFilterToken>): void {\n\t\treturn jsx.renderUsingRenderManager(rm, control, () => {\n\t\t\tconst tokenizer = control.getParent() as EnhanceWithUI5<Tokenizer>;\n\t\t\tconst classes = [\"sapMToken\", \"sapFeControlsToken\"];\n\t\t\tconst classesForLabel = [\"sapMTokenText\", \"sapFeControlsTokenPropertyName\"];\n\t\t\tconst classesForValue = [\"sapMTokenText\", \"sapFeControlsTokenPropertyValues\"];\n\t\t\tconst isMandatory = control.getMandatory();\n\t\t\tif (typeof tokenizer?.getEditable === \"function\" && tokenizer?.getEditable()) {\n\t\t\t\tclasses.push(\"sapFEControlsPointer\");\n\t\t\t}\n\t\t\tif (control.getSelected()) {\n\t\t\t\tclasses.push(\"sapMTokenSelected\");\n\t\t\t}\n\t\t\tif (isMandatory ?? false) {\n\t\t\t\tclasses.push(\"sapFeControlsTokenMandatory\");\n\t\t\t\tif (control.getValue() === control.resourceBundle.getText(\"M_EASY_FILTER_MANDATORY_TOKEN_SELECT_VALUE\")) {\n\t\t\t\t\tclassesForValue.push(\"sapFeControlsTokenMandatory\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (control.getValueState() === ValueState.Error) {\n\t\t\t\tclasses.push(\"sapFeTokenError\");\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tref={control}\n\t\t\t\t\tclass={classes.join(\" \")}\n\t\t\t\t\taria-selected={control.getSelected()}\n\t\t\t\t\ttabindex={-1}\n\t\t\t\t\taria-posinset={control.getProperty(\"posinset\")}\n\t\t\t\t\taria-setsize={control.getProperty(\"setsize\")}\n\t\t\t\t>\n\t\t\t\t\t<span class={classesForLabel.join(\" \")}>{control.getLabel()}:</span>\n\t\t\t\t\t<span class={classesForValue.join(\" \")}>{control.getValue()}</span>\n\t\t\t\t\t{isMandatory === true ? null : control.getAggregation(\"deleteIcon\")}\n\t\t\t\t</div>\n\t\t\t);\n\t\t});\n\t}\n}\n"],"mappings":"AAAA;;;;gnDAsCqBA,GAAeC,EADnCC,EAAe,oCAAmCC,EAEjDC,EAAS,CAAEC,KAAM,WAAWC,EAG5BF,EAAS,CAAEC,KAAM,WAAWE,EAG5BH,EAAS,CAAEC,KAAM,WAAWG,EAG5BJ,EAAS,CAAEC,KAAM,SAAUI,aAAc,OAAOC,EAGhDN,EAAS,CAAEC,KAAM,YAAYM,EAG7BP,EAAS,CAAEC,KAAM,UAAUO,EAG3BR,EAAS,CAAEC,KAAM,yBAA0BQ,MAAO,aAAcJ,aAAcK,EAAWC,OAAOC,EAGhGZ,EAAS,CAAEC,KAAM,MAAOY,WAAY,WAAWC,EAG/Cd,EAAS,CAAEC,KAAM,MAAOY,WAAY,WAAWhB,EAAAkB,GAAAC,EAAA,SAAAC,GAyBhD,SAAArB,EACCsB,EACAC,GACC,IAAAC,EACDA,EAAAH,EAAAI,KAAAC,KAAMJ,EAAwBC,IAASG,KAACC,EAAAH,EAAA,QAAAI,EAAAJ,GAAAG,EAAAH,EAAA,eAAAK,EAAAL,GAAAG,EAAAH,EAAA,QAAAM,EAAAN,GAAAG,EAAAH,EAAA,iBAAAO,EAAAP,GAAAG,EAAAH,EAAA,YAAAQ,EAAAR,GAAAG,EAAAH,EAAA,QAAAS,EAAAT,GAAAG,EAAAH,EAAA,aAAAU,EAAAV,GAAAG,EAAAH,EAAA,WAAAW,EAAAX,GAAAG,EAAAH,EAAA,UAAAY,EAAAZ,KA1BjCa,eAAiBC,EAAIC,qBAAqB,mBAAkBf,EAc5DgB,cAAgB,MAAKhB,EAErBiB,qBAAuB,MAW9BjB,EAAKkB,kBAAoB,IAAIC,EAAiBnB,GAE9CA,EAAKoB,+CAA+C,OAAApB,CACrD,CAACqB,EAAA7C,EAAA8C,EAAA9C,EAAAqB,GAAA,IAAA0B,EAAA/C,EAAAgD,UAAAD,EAEDE,UAAA,SAAAA,EAAUC,GACT,MAAMC,EAAYzB,KAAK0B,YACvB,IAAKD,EAAUE,cAAe,CAC7B,OAAO3B,IACR,CAEAA,KAAK4B,UAAU,SACf5B,KAAKgB,mBAAmBa,QAExB,MAAMC,EAAyB9B,KAAK+B,mBAAmB,0BACvD,MAAMC,EAAUhC,KAAK+B,mBAAmB,WAExC,MAAME,IAAEA,EAAGtD,KAAEA,EAAIuD,0BAAEA,GAA8BlC,KAAK+B,mBAAmB,aAGzE,GAAIC,EAAQG,SAAU,CAErB,GAAI7D,EAAgB8D,eAAiBH,EAAK,CACzC,OAAOjC,IACR,KAAO,CAEN1B,EAAgB8D,aAAeH,EAC/BD,EAAQH,OACT,CACD,KAAO,CAENvD,EAAgB8D,aAAeH,CAChC,CAGAD,GAASK,cAAc,MACvBL,GAASM,aAAaC,WAAW,MAEjC,GAAI5D,IAAS,YAAcqB,KAAKwC,0BAA0BN,GAA4B,CACrFlC,KAAKyC,gBACN,MAAO,GAAI9D,IAAS,QAAUqB,KAAKwC,0BAA0BN,GAA4B,CACxFlC,KAAK0C,YACN,MAAO,GAAI/D,IAAS,mBAAoB,CACvCqB,KAAK2C,wBACN,MAAO,GAAIhE,IAAS,uBAAwB,CAC3CqB,KAAK4C,4BACN,KAAO,CACN5C,KAAK6C,wBACN,CACA,MAAMC,EAAWhB,GAAwBiB,cACzC,MAAMC,EAAgBlB,GAAwBmB,mBAC9C,KAAMjD,KAAKc,eAAiB,OAAQ,CACnCgC,GAAUI,YAAYlD,KAAKmD,cAAcC,KAAKpD,OAC9CgD,GAAeE,YAAYlD,KAAKqD,mBAAmBD,KAAKpD,OACxDgC,EAAQsB,iBAAiBtD,KAAKuD,uBAAuBH,KAAKpD,OAC1DA,KAAKc,cAAgB,IACtB,CACA,OAAOd,IACR,EAACqB,EAEDU,mBAAA,SAAAA,EAAmBE,GAClB,OAAOjC,KAAKwD,gBACVC,KAAMC,GAA2BA,EAAWC,WAAa1B,IACxD2B,UACJ,EAACvC,EAEDwC,kBAAA,SAAAA,EAAkBC,GACjBC,EAAMzC,UAAUuC,kBAAkBG,MAAMhE,KAAM,CAAC8D,IAC/C,IAAK9D,KAAKe,qBAAsB,CAC/Bf,KAAKiE,kBACN,CACAjE,KAAKe,qBAAuB,KAC7B,EAACM,EAEDH,6CAAA,SAAAA,IACCgD,SAASC,iBAAiB,QAAS,KAClC,GAAInE,MAAMgB,kBAAmB,CAC5BhB,KAAKgB,kBAAkBa,OACxB,IAGDqC,SAASC,iBAAiB,aAAc,KACvC,GAAInE,MAAMgB,kBAAmB,CAC5BhB,KAAKgB,kBAAkBa,OACxB,GAEF,EAACR,EAED4C,iBAAA,SAAAA,IACC,MAAMG,EAAsBpE,KAAKqE,MACjC,GAAID,EAAoBE,OAAS,EAAG,CACnC,MAAMC,EAAwBH,EAAoB,GAAGI,eACrD,MAAMC,EAAgBL,EAAoB,IAAIM,SAC9C,MAAMC,EAAqBJ,EAAsB,GACjD,MAAMK,EAAsBR,GAAqBS,OAAO,CAACC,EAASC,KACjE,GAAIC,EAAgBC,wBAAwBF,EAAmBL,UAAW,CACzE,QAASI,CACV,KAAO,CACN,OAAOA,EAAUC,EAAmBP,eAAeF,MACpD,GACE,GACH,GAAIM,IAAwB,EAAG,CAC9B,MAAMM,EAAYlF,KAAK+B,mBAAmB,aAC1C,MAAMD,EAAyB9B,KAAK+B,mBAAmB,0BACvD,MAAMoD,EAAmBrD,GAAwBsD,mBAAmB3B,KAAM4B,GAASA,EAAKC,OAAStF,KAAK2D,UACtG,IAAKwB,EAAkB,CACtB,MACD,CACA,MAAMxG,KAAEA,EAAI4G,SAAEA,GAAaJ,EAC3B,GAAID,EAAW,CACd,MAAMjD,IAAEA,GAAQiD,EAChB,GAAIvG,IAAS,oBAAsBA,IAAS,uBAAwB,CACnEqB,KAAKwF,gBAAgBvD,GACrB,MACD,CACA,GAAI+C,EAAgBC,wBAAwBR,GAAgB,CAC3DzE,KAAKyF,YACJ,QACAT,EAAgBU,8BACfjB,EACAF,EACA5F,EACA4G,IAAa,sBAEd,KAEF,KAAO,CACNvF,KAAKyF,YACJ,QACAT,EAAgBW,YACflB,EACAE,EACAhG,EACA4G,IAAa,sBAEd,KAEF,CACD,CACD,KAAO,CACNvF,KAAKyF,YAAY,QAASzF,KAAKW,eAAeiF,QAAQ,sCAAuC,CAAChB,GAAsB,MACrH,CACD,KAAO,CACN5E,KAAKyF,YAAY,QAASzF,KAAKW,eAAeiF,QAAQ,8CAA+C,KACtG,CACD,EAACvE,EAEDmE,gBAAA,SAAAA,EAAgBvD,GACf,MAAMH,EAAyB9B,KAAK+B,mBAAmB,0BAEvD/B,KAAK6F,QAAQ,MACb,WACC,IACC,MAAMC,QAAoB9F,KAAK+F,oBAC9BjE,EAAuBsD,mBAAmB3B,KAAM4B,GAASA,EAAKC,OAASrD,GACvEjC,KAAKqE,OAGNrE,KAAKyF,YAAY,QAASK,GAC1B9F,KAAKe,qBAAuB,KAC5Bf,KAAK6F,QAAQ,MACd,CAAE,MAAOG,GACRC,EAAID,MAAM,gCAAiCA,EAC5C,CACA,EAbD,EAcD,EAAC3E,EAED6E,8BAAA,SAAAA,IACC,OAAOlG,KAAKmG,WACb,EAAC9E,EAEK0E,oBAANK,eAAML,EACLV,EACAb,GAEA,MAAM6B,QAAiBrB,EAAgBsB,iBAAiBjB,EAAKgB,UAC7D,OAAOA,GAAU5C,KAAM8C,GAASA,EAAKC,QAAUhC,EAAe,GAAGA,eAAe,KAAKsB,WACtF,EAACzE,EAEKsB,uBAANyD,eAAMzD,IACL,MAAMb,EAAyB9B,KAAK+B,mBAAmB,0BACvD,MAAMC,EAAUhC,KAAK+B,mBAAmB,WACxC,MAAMsE,EAAWrG,KAAK+B,mBAAmB,YACzC,MAAMG,0BAAEA,GAA8BlC,KAAK+B,mBAAmB,aAC9D,IAAK/B,KAAKyG,iBAAkB,CAC3BzG,KAAKyG,iBAAmB,IAAIC,EAC3B5E,EACA9B,KAEF,CACAA,KAAK2G,aAAe3G,KAAKyG,iBAAiBG,aAC1C5G,KAAK6G,aAAa7G,KAAK2G,oBACjB3G,KAAKyG,iBAAiBK,SAAST,EAAUnE,GAC/CF,GAAS+E,mBACT/E,GAASgF,WAAWhH,KAAK2G,cACzB7E,GAAwBmB,oBAAoBV,WAAW,OACvDvC,KAAKiH,aACN,EAAC5F,EAEKuB,2BAANwD,eAAMxD,IACL,MAAMd,EAAyB9B,KAAK+B,mBAAmB,0BACvD,MAAMC,EAAUhC,KAAK+B,mBAAmB,WACxC,MAAMsE,EAAWrG,KAAK+B,mBAAmB,YACzC,MAAMG,0BAAEA,GAA8BlC,KAAK+B,mBAAmB,aAC9D,IAAK/B,KAAKkH,qBAAsB,CAC/BlH,KAAKkH,qBAAuB,IAAIC,EAC/BrF,EACA9B,KAEF,CACAA,KAAK2G,aAAe3G,KAAKkH,qBAAqBN,aAC9C5G,KAAK6G,aAAa7G,KAAK2G,oBACjB3G,KAAKkH,qBAAqBJ,SAAST,EAAUnE,GAEnDF,EAAQK,cAAc,OACtBL,EAAQM,aAAaC,WAAW,OAEhCP,GAAS+E,mBACT/E,GAASgF,WAAWhH,KAAK2G,cACzB3G,KAAKiH,aACN,EAAC5F,EAEDoB,eAAA,SAAAA,IACC,MAAMX,EAAyB9B,KAAK+B,mBAAmB,0BACvD,MAAMC,EAAUhC,KAAK+B,mBAAmB,WACxC,IAAK/B,KAAKoH,SAAU,CACnBpH,KAAKoH,SAAW,IAAIC,EACnBvF,EACA9B,KAEF,CACAA,KAAK2G,aAAe3G,KAAKoH,SAASR,aAClC5G,KAAK6G,aAAa7G,KAAK2G,cACvB3E,GAAS+E,mBACT/E,GAASgF,WAAWhH,KAAK2G,cACzB7E,GAAwBmB,oBAAoBV,WAAW,MACvDvC,KAAKiH,aACN,EAAC5F,EAEDqB,WAAA,SAAAA,IACC,MAAMZ,EAAyB9B,KAAK+B,mBAAmB,0BACvD,MAAMC,EAAUhC,KAAK+B,mBAAmB,WACxC,IAAK/B,KAAKsH,KAAM,CACftH,KAAKsH,KAAO,IAAIC,EACfzF,EACA9B,KAEF,CACAA,KAAK2G,aAAe3G,KAAKsH,KAAKV,aAC9B5G,KAAK6G,aAAa7G,KAAK2G,cACvB3E,GAAS+E,mBACT/E,GAASgF,WAAWhH,KAAK2G,cACzB7E,GAAwBmB,oBAAoBV,WAAW,MACvDvC,KAAKiH,aACN,EAAC5F,EAEDwB,uBAAA,SAAAA,IACC,MAAMf,EAAyB9B,KAAK+B,mBAAmB,0BACvD,MAAMC,EAAUhC,KAAK+B,mBAAmB,WACxC,IAAK/B,KAAKwH,iBAAkB,CAC3BxH,KAAKwH,iBAAmB,IAAIC,EAC3B3F,EACA9B,KAEF,CACA,MAAMrB,KAAEA,EAAI4G,SAAEA,GAAazD,EAAuBsD,mBAAmB3B,KACnE4B,GAASA,EAAKC,OAAStF,KAAK2D,UAE9B3D,KAAKwH,iBAAiBV,SAAS9G,KAAKqE,MAA0C1F,EAAM4G,IAAa,sBACjGvF,KAAK2G,aAAe3G,KAAKwH,iBAAiBZ,aAC1C5G,KAAK6G,aAAa7G,KAAK2G,cACvB3E,GAAS+E,mBACT/E,GAASgF,WAAWhH,KAAK2G,cACzB7E,GAAwBmB,oBAAoBV,WAAW,MACvDvC,KAAKiH,aACN,EAAC5F,EAED4F,YAAA,SAAAA,IACC,MAAMS,EAAW1H,KAAK+B,mBAAmB,WACzC2F,GAAUC,SAAS3H,KAAK4H,OACxBF,GAAUG,OAAO7H,KAClB,EAACqB,EAED8B,cAAA,SAAAA,IAGC,IAAKnD,KAAK2G,cAAcR,YAAa,CACpC,MACD,CACA,MAAMxH,KAAEA,EAAIuD,0BAAEA,GAA8BlC,KAAK+B,mBAAmB,aACpE,MAAMC,EAAUhC,KAAK+B,mBAAmB,WAExC,IAAI+F,EACJ,GAAInJ,IAAS,YAAcqB,KAAKwC,0BAA0BN,GAA4B,CACrF4F,EAAkB9H,KAAKoH,UAAUW,sBAAsB3E,KAAKpD,KAAKoH,SAClE,MAAO,GAAIzI,IAAS,QAAUqB,KAAKwC,0BAA0BN,GAA4B,CACxF4F,EAAkB9H,KAAKsH,MAAMS,sBAAsB3E,KAAKpD,KAAKsH,KAC9D,MAAO,GAAI3I,IAAS,mBAAoB,CACvCmJ,EAAkB9H,KAAKyG,kBAAkBsB,sBAAsB3E,KAAKpD,KAAKyG,iBAC1E,KAAO,CACNqB,EAAkB9H,KAAKwH,kBAAkBO,sBAAsB3E,KAAKpD,KAAKwH,iBAC1E,CAEA,GAAIM,EAAiB,CACpBA,GACD,CACA9F,GAASH,OACV,EAACR,EAEDgC,mBAAA,SAAAA,IAGC,IAAKrD,KAAK2G,cAAcR,YAAa,CACpC,MACD,CACA,MAAMnE,EAAUhC,KAAK+B,mBAAmB,WACxC,MAAMpD,KAAEA,EAAIuD,0BAAEA,GAA8BlC,KAAK+B,mBAAmB,aACpEC,EAAQH,QACR,IAAImG,EACJ,GAAIrJ,IAAS,YAAcqB,KAAKwC,0BAA0BN,GAA4B,CACrF8F,EAAmBhI,KAAKoH,UAAUa,2BAA2B7E,KAAKpD,KAAKoH,SACxE,MAAO,GAAIzI,IAAS,QAAUqB,KAAKwC,0BAA0BN,GAA4B,CACxF8F,EAAmBhI,KAAKsH,MAAMW,2BAA2B7E,KAAKpD,KAAKsH,KACpE,KAAO,CACNU,EAAmBhI,KAAKwH,kBAAkBS,2BAA2B7E,KAAKpD,KAAKwH,iBAChF,CACA,GAAIQ,EAAkB,CACrB,MACCA,GACA,EAFD,EAGD,CACD,EAAC3G,EAEDkC,uBAAA,SAAAA,IACC,IAAKvD,KAAK2G,cAAcR,YAAa,CACpC,MACD,CACA,MAAMjB,EAAYlF,KAAK+B,mBAAmB,aAC1C,GAAImD,EAAW,CACd,MAAMvG,KAAEA,EAAIuD,0BAAEA,GAA8BlC,KAAK+B,mBAAmB,aACpE,GACCpD,IAAS,cACPA,IAAS,YAAcA,IAAS,UAAYqB,KAAKwC,0BAA0BN,GAC5E,CACDlC,KAAKwH,kBAAkBU,yBACxB,MAAO,GAAIvJ,IAAS,mBAAoB,CACvCqB,KAAKyG,kBAAkByB,yBACxB,CACD,CACD,EAAC7G,EAED8G,gBAAA,SAAAA,IACC,OAAOnI,KAAK2G,YACb,EAACtF,EAED+G,sBAAA,SAAAA,IACCpI,KAAKgB,mBAAmBqH,MACzB,EAAChH,EAEDiH,uBAAA,SAAAA,IACCtI,KAAKgB,mBAAmBa,OACzB,EAACR,EAEDmB,0BAAA,SAAAA,EAA0BN,GAEzB,MAAMqG,EAAoBrG,EAA0BuB,KAClDe,GAAmBA,EAAeE,WAAa8D,EAAeC,IAAMjE,EAAeE,WAAa8D,EAAeE,IAGjH,OACCxG,EAA0BoC,SAAW,GACpCpC,EAA0BoC,SAAW,GAAKpC,EAA0B,GAAGsC,eAAeF,SAAW,IAAMiE,CAE1G,EAAClH,EAEDsH,SAAA,SAAAA,IACC3I,KAAKgB,mBAAmBa,OACzB,EAACvD,EAEMsK,OAAP,SAAOA,EAAOC,EAAmBC,GAChC,OAAOC,EAAIC,yBAAyBH,EAAIC,EAAS,KAChD,MAAMrH,EAAYqH,EAAQpH,YAC1B,MAAMuH,EAAU,CAAC,YAAa,sBAC9B,MAAMC,EAAkB,CAAC,gBAAiB,kCAC1C,MAAMC,EAAkB,CAAC,gBAAiB,oCAC1C,MAAMC,EAAcN,EAAQO,eAC5B,UAAW5H,GAAWE,cAAgB,YAAcF,GAAWE,cAAe,CAC7EsH,EAAQK,KAAK,uBACd,CACA,GAAIR,EAAQS,cAAe,CAC1BN,EAAQK,KAAK,oBACd,CACA,GAAIF,GAAe,MAAO,CACzBH,EAAQK,KAAK,+BACb,GAAIR,EAAQlF,aAAekF,EAAQnI,eAAeiF,QAAQ,8CAA+C,CACxGuD,EAAgBG,KAAK,8BACtB,CACD,CACA,GAAIR,EAAQU,kBAAoBpK,EAAWqK,MAAO,CACjDR,EAAQK,KAAK,kBACd,CACA,OACCI,EAAA,OACCC,IAAKb,EACLc,MAAOX,EAAQY,KAAK,KACpB,gBAAef,EAAQS,cACvBO,UAAW,EACX,gBAAehB,EAAQiB,YAAY,YACnC,eAAcjB,EAAQiB,YAAY,WAAWC,SAAA,CAE7CN,EAAA,QAAME,MAAOV,EAAgBW,KAAK,KAAKG,SAAA,CAAElB,EAAQmB,WAAW,OAC5DC,EAAA,QAAMN,MAAOT,EAAgBU,KAAK,KAAKG,SAAElB,EAAQlF,aAChDwF,IAAgB,KAAO,KAAON,EAAQqB,eAAe,gBACjD,EAGT,EAAC,OAAA7L,CAAA,CA9b+C,CAzBJyF,GAAK7D,EAAAkK,EAAA1K,EAAA4B,UAAA,SAAA7C,GAAA,CAAA4L,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAArK,EAAAiK,EAAA1K,EAAA4B,UAAA,gBAAA1C,GAAA,CAAAyL,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAApK,EAAAgK,EAAA1K,EAAA4B,UAAA,SAAAzC,GAAA,CAAAwL,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAnK,EAAA+J,EAAA1K,EAAA4B,UAAA,kBAAAxC,GAAA,CAAAuL,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAlK,EAAA8J,EAAA1K,EAAA4B,UAAA,aAAAtC,GAAA,CAAAqL,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAjK,EAAA6J,EAAA1K,EAAA4B,UAAA,SAAArC,GAAA,CAAAoL,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAhK,EAAA4J,EAAA1K,EAAA4B,UAAA,cAAApC,GAAA,CAAAmL,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA/J,EAAA2J,EAAA1K,EAAA4B,UAAA,YAAAhC,GAAA,CAAA+K,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA9J,EAAA0J,EAAA1K,EAAA4B,UAAA,WAAA9B,GAAA,CAAA6K,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA9K,KAAAD,GAAA0B,EAAA7C,EAAA,OAAA6C,CAAA","ignoreList":[],"sourceRoot":"easyFilter"}},{"offset":{"line":26,"column":0},"map":{"version":3,"names":["BaseFactory","easyFilter","easyFilterToken","this","items","_exports","_proto","prototype","getItems","getControl","control","setControl","getEasyFilter","getToken"],"sources":["./BaseFactory.ts"],"sourcesContent":["import type { PrimitiveType } from \"@sap-ux/vocabularies-types/Edm\";\nimport type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport type { PropertyMetadata } from \"ux/eng/fioriai/reuse/easyfilter/EasyFilter\";\nimport type EasyFilterBarContainer from \"../EasyFilterBarContainer\";\nimport type { TokenSelectedValuesDefinition } from \"../EasyFilterBarContainer\";\nimport type EasyFilterToken from \"../Token\";\n\ntype codeListType = PropertyMetadata[\"codeList\"];\n\nexport type finalCodeListType = { value: PrimitiveType; description: string };\n\nexport class BaseFactory<T> {\n\t// Private property to hold array of items\n\tprotected items: TokenSelectedValuesDefinition[] | codeListType = [];\n\n\tprivate control?: T;\n\n\tprivate easyFilter?: EnhanceWithUI5<EasyFilterBarContainer>;\n\n\tprivate easyFilterToken?: EnhanceWithUI5<EasyFilterToken>;\n\n\tconstructor(easyFilter: EnhanceWithUI5<EasyFilterBarContainer>, easyFilterToken: EnhanceWithUI5<EasyFilterToken>) {\n\t\tthis.easyFilter = easyFilter;\n\t\tthis.easyFilterToken = easyFilterToken;\n\t}\n\n\tpublic getItems(): TokenSelectedValuesDefinition[] | codeListType {\n\t\treturn this.items;\n\t}\n\n\tpublic getControl(): T | undefined {\n\t\treturn this.control;\n\t}\n\n\tprotected setControl(control: T): void {\n\t\tthis.control = control;\n\t}\n\n\tpublic getEasyFilter(): EnhanceWithUI5<EasyFilterBarContainer> | undefined {\n\t\treturn this.easyFilter;\n\t}\n\n\tpublic getToken(): EnhanceWithUI5<EasyFilterToken> | undefined {\n\t\treturn this.easyFilterToken;\n\t}\n}\n"],"mappings":"AAAA;;;;iHAWaA,EAAW,WAUvB,SAAAA,EAAYC,EAAoDC,GAThEC,KACUC,MAAwD,GASjED,KAAKF,WAAaA,EAClBE,KAAKD,gBAAkBA,CACxB,CAACG,EAAAL,cAAA,IAAAM,EAAAN,EAAAO,UAAAD,EAEME,SAAP,SAAOA,IACN,OAAOL,KAAKC,KACb,EAACE,EAEMG,WAAP,SAAOA,IACN,OAAON,KAAKO,OACb,EAACJ,EAESK,WAAV,SAAUA,EAAWD,GACpBP,KAAKO,QAAUA,CAChB,EAACJ,EAEMM,cAAP,SAAOA,IACN,OAAOT,KAAKF,UACb,EAACK,EAEMO,SAAP,SAAOA,IACN,OAAOV,KAAKD,eACb,EAAC,OAAAF,CAAA,CAjCsB,GAiCtBK,EAAAL,cAAA,OAAAK,CAAA","ignoreList":[],"sourceRoot":"easyFilter/innerControls"}},{"offset":{"line":31,"column":0},"map":{"version":3,"names":["CalenderFactory","_BaseFactory","EFB","token","_this","call","this","setControl","Calendar","_inheritsLoose","_proto","prototype","invokeOkButtonHandler","calendar","getControl","popover","getToken","getCustomDataValue","key","keySpecificSelectedValues","formattedDate","DateFormat","getDateInstance","format","getSelectedDates","getStartDate","operator","length","FilterOperator","EQ","newSpecificValue","selectedValues","EasyFilterUtils","areItemsSame","getEasyFilter","updateTokenArray","close","invokeShowAllButtonHandler","async","getKey","valueHelpPromise","Promise","resolve","reject","fireEvent","getItems","newSelectedValues","error","Error","Log","message","String","BaseFactory"],"sources":["./CalendarFactory.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport { BaseFactory } from \"sap/fe/controls/easyFilter/innerControls/BaseFactory\";\nimport type Popover from \"sap/m/Popover\";\nimport type UI5Date from \"sap/ui/core/date/UI5Date\";\nimport DateFormat from \"sap/ui/core/format/DateFormat\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport Calendar from \"sap/ui/unified/Calendar\";\nimport type EasyFilterBarContainer from \"../EasyFilterBarContainer\";\nimport type { TokenDefinition, TokenSelectedValuesDefinition } from \"../EasyFilterBarContainer\";\nimport type EasyFilterToken from \"../Token\";\nimport EasyFilterUtils from \"../utils\";\n\nclass CalenderFactory extends BaseFactory<Calendar> {\n\tconstructor(EFB: EnhanceWithUI5<EasyFilterBarContainer>, token: EnhanceWithUI5<EasyFilterToken>) {\n\t\tsuper(EFB, token);\n\t\tthis.setControl(new Calendar({}));\n\t}\n\n\tinvokeOkButtonHandler(): void {\n\t\tconst calendar = this.getControl();\n\t\tconst popover = this.getToken()?.getCustomDataValue(\"popover\") as Popover;\n\t\tconst { key, keySpecificSelectedValues } = this.getToken()?.getCustomDataValue(\"TokenInfo\") as TokenDefinition;\n\t\tconst formattedDate = DateFormat.getDateInstance().format(calendar?.getSelectedDates()[0].getStartDate() as UI5Date | Date);\n\t\tconst operator = keySpecificSelectedValues.length === 0 ? FilterOperator.EQ : keySpecificSelectedValues[0].operator;\n\t\tconst newSpecificValue: TokenDefinition[\"keySpecificSelectedValues\"] = [\n\t\t\t{\n\t\t\t\toperator: operator as Exclude<\n\t\t\t\t\tFilterOperator,\n\t\t\t\t\tFilterOperator.BT | FilterOperator.NB | FilterOperator.All | FilterOperator.Any\n\t\t\t\t>,\n\t\t\t\tselectedValues: [formattedDate] as string[] | number[] | boolean[]\n\t\t\t}\n\t\t];\n\t\tif (EasyFilterUtils.areItemsSame(keySpecificSelectedValues, newSpecificValue)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.getEasyFilter()?.updateTokenArray(\"setSelectedValues\", newSpecificValue, key);\n\t\tpopover?.close();\n\t}\n\n\tasync invokeShowAllButtonHandler(): Promise<void> {\n\t\tconst token = this.getToken();\n\t\tconst key = token?.getKey() as string;\n\t\tconst valueHelpPromise = new Promise<TokenSelectedValuesDefinition[]>((resolve, reject) => {\n\t\t\tthis.getEasyFilter()?.fireEvent(\"showValueHelp\", {\n\t\t\t\tkey,\n\t\t\t\tselectedValues: token?.getItems(),\n\t\t\t\tresolve,\n\t\t\t\treject\n\t\t\t});\n\t\t});\n\n\t\ttry {\n\t\t\tconst newSelectedValues = await valueHelpPromise;\n\t\t\tthis.getEasyFilter()?.updateTokenArray(\"setSelectedValues\", newSelectedValues, key);\n\t\t} catch (error) {\n\t\t\tif (error instanceof Error) {\n\t\t\t\tLog.error(\"Error while fetching new tokens\", error.message);\n\t\t\t} else {\n\t\t\t\tLog.error(\"Error while fetching new tokens\", String(error));\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default CalenderFactory;\n"],"mappings":"AAAA;;;;ogBAaMA,EAAe,SAAAC,GACpB,SAAAD,EAAYE,EAA6CC,GAAwC,IAAAC,EAChGA,EAAAH,EAAAI,KAAAC,KAAMJ,EAAKC,IAAMG,KACjBF,EAAKG,WAAW,IAAIC,EAAS,CAAC,IAAI,OAAAJ,CACnC,CAACK,EAAAT,EAAAC,GAAA,IAAAS,EAAAV,EAAAW,UAAAD,EAEDE,sBAAA,SAAAA,IACC,MAAMC,EAAWP,KAAKQ,aACtB,MAAMC,EAAUT,KAAKU,YAAYC,mBAAmB,WACpD,MAAMC,IAAEA,EAAGC,0BAAEA,GAA8Bb,KAAKU,YAAYC,mBAAmB,aAC/E,MAAMG,EAAgBC,EAAWC,kBAAkBC,OAAOV,GAAUW,mBAAmB,GAAGC,gBAC1F,MAAMC,EAAWP,EAA0BQ,SAAW,EAAIC,EAAeC,GAAKV,EAA0B,GAAGO,SAC3G,MAAMI,EAAiE,CACtE,CACCJ,SAAUA,EAIVK,eAAgB,CAACX,KAGnB,GAAIY,EAAgBC,aAAad,EAA2BW,GAAmB,CAC9E,MACD,CACAxB,KAAK4B,iBAAiBC,iBAAiB,oBAAqBL,EAAkBZ,GAC9EH,GAASqB,OACV,EAAC1B,EAEK2B,2BAANC,eAAMD,IACL,MAAMlC,EAAQG,KAAKU,WACnB,MAAME,EAAMf,GAAOoC,SACnB,MAAMC,EAAmB,IAAIC,QAAyC,CAACC,EAASC,KAC/ErC,KAAK4B,iBAAiBU,UAAU,gBAAiB,CAChD1B,MACAa,eAAgB5B,GAAO0C,WACvBH,UACAC,UACC,GAGH,IACC,MAAMG,QAA0BN,EAChClC,KAAK4B,iBAAiBC,iBAAiB,oBAAqBW,EAAmB5B,EAChF,CAAE,MAAO6B,GACR,GAAIA,aAAiBC,MAAO,CAC3BC,EAAIF,MAAM,kCAAmCA,EAAMG,QACpD,KAAO,CACND,EAAIF,MAAM,kCAAmCI,OAAOJ,GACrD,CACD,CACD,EAAC,OAAA/C,CAAA,CAlDmB,CAASoD,GAAW,OAqD1BpD,CAAe","ignoreList":[],"sourceRoot":"easyFilter/innerControls"}},{"offset":{"line":36,"column":0},"map":{"version":3,"names":["MenuWithCheckBoxFactory","_BaseFactory","EFB","token","_this","ListSeparators","library","ListMode","call","this","selectionList","okButtonClicked","setControl","List","mode","MultiSelect","showSeparators","None","_inheritsLoose","_proto","prototype","setItems","async","newItems","allSelectedValues","Utils","areCodeListsSame","getItems","list","getControl","items","getCodeListArray","destroyAggregation","forEach","item","idx","selectState","length","selectedValues","firstValue","value","includes","push","addItem","StandardListItem","title","description","selected","customData","CustomData","key","invokeOkButtonHandler","areSelectListSame","getSelectedIndices","listItems","getSelectedItems","easyFilterBarContainer","getEasyFilter","operator","FilterOperator","EQ","getToken","getCustomDataValue","getCustomData","find","getKey","getValue","undefined","Array","isArray","every","val","updateTokenArray","tempSelectList","invokePopupCloseHandler","removeSelections","setSelected","setSelectList","indexOfItem","BaseFactory"],"sources":["./MenuWithCheckBoxFactory.ts"],"sourcesContent":["import type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport type { finalCodeListType } from \"sap/fe/controls/easyFilter/innerControls/BaseFactory\";\nimport { BaseFactory } from \"sap/fe/controls/easyFilter/innerControls/BaseFactory\";\nimport Utils from \"sap/fe/controls/easyFilter/utils\";\nimport List from \"sap/m/List\";\nimport StandardListItem from \"sap/m/StandardListItem\";\nimport library from \"sap/m/library\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport type { PropertyMetadata } from \"ux/eng/fioriai/reuse/easyfilter/EasyFilter\";\nimport type EasyFilterBarContainer from \"../EasyFilterBarContainer\";\nimport type { TokenDefinition, TokenSelectedValuesDefinition } from \"../EasyFilterBarContainer\";\nimport type EasyFilterToken from \"../Token\";\ntype codeListType = PropertyMetadata[\"codeList\"];\nclass MenuWithCheckBoxFactory extends BaseFactory<List> {\n\tprivate selectionList: number[] = [];\n\n\tprivate okButtonClicked = false;\n\n\tconstructor(EFB: EnhanceWithUI5<EasyFilterBarContainer>, token: EnhanceWithUI5<EasyFilterToken>) {\n\t\tconst ListSeparators = library.ListSeparators;\n\t\tconst ListMode = library.ListMode;\n\t\tsuper(EFB, token);\n\t\tthis.setControl(\n\t\t\tnew List({\n\t\t\t\tmode: ListMode.MultiSelect,\n\t\t\t\tshowSeparators: ListSeparators.None\n\t\t\t})\n\t\t);\n\t}\n\n\tasync setItems(newItems: codeListType, allSelectedValues: TokenDefinition[\"keySpecificSelectedValues\"]): Promise<void> {\n\t\tif (await Utils.areCodeListsSame(newItems, this.getItems() as codeListType)) {\n\t\t\treturn;\n\t\t}\n\t\tconst list: List | undefined = this.getControl();\n\n\t\tthis.items = (await Utils.getCodeListArray(newItems)) as finalCodeListType[];\n\t\tlist?.destroyAggregation(\"items\");\n\t\tthis.selectionList = [];\n\t\tthis.items.forEach((item: finalCodeListType, idx: number) => {\n\t\t\tlet selectState = false;\n\t\t\t//Value should either be string, number or boolean.\n\t\t\tif (allSelectedValues.length > 0 && allSelectedValues[0].selectedValues.length > 0) {\n\t\t\t\tconst firstValue = allSelectedValues[0].selectedValues[0];\n\t\t\t\tif (typeof firstValue === \"string\" && typeof item.value === \"string\") {\n\t\t\t\t\t// Assert selectedValues as string[]\n\t\t\t\t\tif ((allSelectedValues[0].selectedValues as string[]).includes(item.value)) {\n\t\t\t\t\t\tselectState = true;\n\t\t\t\t\t\tthis.selectionList?.push(idx);\n\t\t\t\t\t}\n\t\t\t\t} else if (typeof firstValue === \"boolean\" && typeof item.value === \"boolean\") {\n\t\t\t\t\t// Assert selectedValues as boolean[]\n\t\t\t\t\tif ((allSelectedValues[0].selectedValues as boolean[]).includes(item.value)) {\n\t\t\t\t\t\tselectState = true;\n\t\t\t\t\t\tthis.selectionList?.push(idx);\n\t\t\t\t\t}\n\t\t\t\t} else if (typeof firstValue === \"number\" && typeof item.value === \"number\") {\n\t\t\t\t\t// Assert selectedValues as number[]\n\t\t\t\t\tif ((allSelectedValues[0].selectedValues as number[]).includes(item.value)) {\n\t\t\t\t\t\tselectState = true;\n\t\t\t\t\t\tthis.selectionList?.push(idx);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlist?.addItem(\n\t\t\t\tnew StandardListItem({\n\t\t\t\t\ttitle: item.description,\n\t\t\t\t\tselected: selectState,\n\t\t\t\t\tcustomData: [\n\t\t\t\t\t\t//Saving the value inside the CustomData, because at the end we would be exposing the values to the consumer not the description\n\t\t\t\t\t\tnew CustomData({\n\t\t\t\t\t\t\tkey: \"value\",\n\t\t\t\t\t\t\tvalue: item.value\n\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\t}\n\n\tinvokeOkButtonHandler(): void {\n\t\tif (this.areSelectListSame()) {\n\t\t\treturn;\n\t\t}\n\t\tthis.selectionList = this.getSelectedIndices();\n\t\tthis.okButtonClicked = true;\n\t\tconst listItems: StandardListItem[] | undefined = this.getControl()?.getSelectedItems() as StandardListItem[];\n\t\tconst easyFilterBarContainer = this.getEasyFilter() as EasyFilterBarContainer;\n\t\tlet allSelectedValues: TokenSelectedValuesDefinition[] = [\n\t\t\t{\n\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\tselectedValues: []\n\t\t\t}\n\t\t];\n\t\tconst { key } = this.getToken()?.getCustomDataValue(\"TokenInfo\") as TokenDefinition;\n\t\tlistItems.forEach((item) => {\n\t\t\tconst value: string | number | boolean | undefined = item\n\t\t\t\t.getCustomData()\n\t\t\t\t.find((customData: CustomData) => customData.getKey() === \"value\")\n\t\t\t\t?.getValue() as string | number | boolean;\n\n\t\t\tif (value !== undefined) {\n\t\t\t\t// Check the type of value and the contents of selectedValues\n\t\t\t\tif (Array.isArray(allSelectedValues[0].selectedValues)) {\n\t\t\t\t\tconst selectedValues = allSelectedValues[0].selectedValues;\n\t\t\t\t\tif (\n\t\t\t\t\t\t(typeof value === \"string\" && selectedValues.every((val): val is string => typeof val === \"string\")) ||\n\t\t\t\t\t\t(typeof value === \"boolean\" && selectedValues.every((val): val is boolean => typeof val === \"boolean\")) ||\n\t\t\t\t\t\t(typeof value === \"number\" && selectedValues.every((val): val is number => typeof val === \"number\"))\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Push the value only if all selectedValues are of the same type\n\t\t\t\t\t\t(selectedValues as Array<typeof value>).push(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tallSelectedValues = allSelectedValues[0].selectedValues.length === 0 ? [] : allSelectedValues;\n\t\teasyFilterBarContainer.updateTokenArray(\"setSelectedValues\", allSelectedValues, key);\n\t}\n\n\tareSelectListSame(): boolean {\n\t\t//The below case would get applicable in mandatory tokens case where no value has been set\n\t\tconst tempSelectList = this.getSelectedIndices();\n\t\tif (this.selectionList.length === 0 || tempSelectList.length !== this.selectionList.length) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.selectionList.every((item, idx) => tempSelectList[idx] === item);\n\t}\n\n\tinvokePopupCloseHandler(): void {\n\t\tif (this.okButtonClicked) {\n\t\t\tthis.okButtonClicked = false;\n\t\t\treturn;\n\t\t}\n\t\tthis.okButtonClicked = false;\n\t\tthis.getControl()?.removeSelections();\n\t\tthis.selectionList?.forEach((idx) => this.getControl()?.getItems()[idx].setSelected(true));\n\t}\n\n\tsetSelectList(): void {\n\t\tthis.selectionList = [];\n\t\tconst listItems: StandardListItem[] = this.getControl()?.getSelectedItems() as StandardListItem[];\n\t\tlistItems?.forEach((item) => this.selectionList?.push(this.getControl()?.indexOfItem(item) as number));\n\t}\n\n\tgetSelectedIndices(): number[] {\n\t\tconst selectionList: number[] = [];\n\t\tconst listItems: StandardListItem[] = this.getControl()?.getSelectedItems() as StandardListItem[];\n\t\tlistItems?.forEach((item) => selectionList?.push(this.getControl()?.indexOfItem(item) as number));\n\t\treturn selectionList;\n\t}\n}\n\nexport default MenuWithCheckBoxFactory;\n"],"mappings":"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","ignoreList":[],"sourceRoot":"easyFilter/innerControls"}},{"offset":{"line":41,"column":0},"map":{"version":3,"names":["MenuWithSingleSelectFactory","_BaseFactory","EFB","token","_this","ListSeparators","library","ListMode","call","this","selectedItemIndex","setControl","List","mode","SingleSelectMaster","showSeparators","None","selectionChange","onItemSelected","bind","_inheritsLoose","_proto","prototype","setItems","async","newItems","allSelectedValues","Utils","areCodeListsSame","getItems","list","getControl","items","getCodeListArray","destroyAggregation","forEach","item","idx","selectState","length","selectedValues","firstValue","value","addItem","StandardListItem","title","description","selected","customData","CustomData","key","event","selectedItem","getParameter","easyFilterBarContainer","getEasyFilter","getCustomData","find","getKey","getValue","undefined","selectedValue","operator","FilterOperator","EQ","closeInnerControlPopover","getToken","getCustomDataValue","updateTokenArray","indexOfItem","getSelectedIndex","getSelectedItems","BaseFactory"],"sources":["./MenuWithSingleSelectFactory.ts"],"sourcesContent":["import type { PrimitiveType } from \"@sap-ux/vocabularies-types/Edm\";\nimport type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport type { finalCodeListType } from \"sap/fe/controls/easyFilter/innerControls/BaseFactory\";\nimport { BaseFactory } from \"sap/fe/controls/easyFilter/innerControls/BaseFactory\";\nimport Utils from \"sap/fe/controls/easyFilter/utils\";\nimport List from \"sap/m/List\";\nimport type { ListBase$SelectionChangeEvent } from \"sap/m/ListBase\";\nimport StandardListItem from \"sap/m/StandardListItem\";\nimport library from \"sap/m/library\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport type { PropertyMetadata } from \"ux/eng/fioriai/reuse/easyfilter/EasyFilter\";\nimport type EasyFilterBarContainer from \"../EasyFilterBarContainer\";\nimport type { TokenDefinition, TokenSelectedValuesDefinition } from \"../EasyFilterBarContainer\";\nimport type EasyFilterToken from \"../Token\";\n\ntype codeListType = PropertyMetadata[\"codeList\"];\n\nclass MenuWithSingleSelectFactory extends BaseFactory<List> {\n\tprivate selectedItemIndex = -1;\n\n\tconstructor(EFB: EnhanceWithUI5<EasyFilterBarContainer>, token: EnhanceWithUI5<EasyFilterToken>) {\n\t\tconst ListSeparators = library.ListSeparators;\n\t\tconst ListMode = library.ListMode;\n\n\t\tsuper(EFB, token);\n\n\t\t// Initialize the list with single-select mode.\n\t\tthis.setControl(\n\t\t\tnew List({\n\t\t\t\tmode: ListMode.SingleSelectMaster,\n\t\t\t\tshowSeparators: ListSeparators.None,\n\t\t\t\tselectionChange: this.onItemSelected.bind(this) // Attach the selection event handler.\n\t\t\t})\n\t\t);\n\t}\n\n\t/**\n\t * Sets the items for the list and initializes the selection.\n\t * @param newItems\n\t * @param allSelectedValues\n\t */\n\tasync setItems(newItems: codeListType, allSelectedValues: TokenDefinition[\"keySpecificSelectedValues\"]): Promise<void> {\n\t\tif (await Utils.areCodeListsSame(newItems, this.getItems() as codeListType)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst list: List | undefined = this.getControl();\n\t\tthis.items = (await Utils.getCodeListArray(newItems)) as finalCodeListType[];\n\t\tlist?.destroyAggregation(\"items\");\n\t\tthis.selectedItemIndex = -1;\n\n\t\tthis.items.forEach((item: finalCodeListType, idx: number) => {\n\t\t\tlet selectState = false;\n\n\t\t\t// Check if the item matches any preselected value.\n\t\t\tif (allSelectedValues.length > 0 && allSelectedValues[0].selectedValues.length > 0) {\n\t\t\t\tconst firstValue = allSelectedValues[0].selectedValues[0];\n\t\t\t\tif (typeof firstValue === typeof item.value && firstValue === item.value) {\n\t\t\t\t\tselectState = true;\n\t\t\t\t\tthis.selectedItemIndex = idx;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add item to the list with the appropriate selection state.\n\t\t\tlist?.addItem(\n\t\t\t\tnew StandardListItem({\n\t\t\t\t\ttitle: item.description,\n\t\t\t\t\tselected: selectState,\n\t\t\t\t\tcustomData: [\n\t\t\t\t\t\tnew CustomData({\n\t\t\t\t\t\t\tkey: \"value\",\n\t\t\t\t\t\t\tvalue: item.value\n\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\t}\n\n\t/**\n\t * Event handler for item selection.\n\t * Directly triggers the token update when an item is selected.\n\t * @param event\n\t */\n\tprivate onItemSelected(event: ListBase$SelectionChangeEvent): void {\n\t\tconst selectedItem = event.getParameter(\"listItem\");\n\t\tconst list: List | undefined = this.getControl();\n\t\tconst easyFilterBarContainer = this.getEasyFilter() as EasyFilterBarContainer;\n\n\t\tif (!selectedItem || !list) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get the value of the selected item.\n\t\tconst value: PrimitiveType = selectedItem\n\t\t\t.getCustomData()\n\t\t\t.find((customData: CustomData) => customData.getKey() === \"value\")\n\t\t\t?.getValue() as string | number | boolean;\n\n\t\tif (value !== undefined) {\n\t\t\t// Prepare the selected values definition.\n\t\t\tconst selectedValue: TokenSelectedValuesDefinition[] = [\n\t\t\t\t{\n\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\tselectedValues: [value]\n\t\t\t\t}\n\t\t\t];\n\n\t\t\teasyFilterBarContainer?.closeInnerControlPopover();\n\n\t\t\t// Get the key of the token and update the token array.\n\t\t\tconst { key } = this.getToken()?.getCustomDataValue(\"TokenInfo\") as TokenDefinition;\n\t\t\teasyFilterBarContainer.updateTokenArray(\"setSelectedValues\", selectedValue, key);\n\n\t\t\t// Update the selected item index for internal tracking.\n\t\t\tthis.selectedItemIndex = list.indexOfItem(selectedItem);\n\t\t}\n\t}\n\n\t//Retrieves the index of the currently selected item.\n\tgetSelectedIndex(): number {\n\t\tconst selectedItem: StandardListItem | undefined = this.getControl()?.getSelectedItems()?.[0] as StandardListItem;\n\n\t\treturn selectedItem ? this.getControl()?.indexOfItem(selectedItem) ?? -1 : -1;\n\t}\n}\n\nexport default MenuWithSingleSelectFactory;\n"],"mappings":"AAAA;;;;gjBAkBMA,EAA2B,SAAAC,GAGhC,SAAAD,EAAYE,EAA6CC,GAAwC,IAAAC,EAChG,MAAMC,EAAiBC,EAAQD,eAC/B,MAAME,EAAWD,EAAQC,SAEzBH,EAAAH,EAAAO,KAAAC,KAAMP,EAAKC,IAAMM,KAEjBL,EAROM,mBAAqB,EAS5BN,EAAKO,WACJ,IAAIC,EAAK,CACRC,KAAMN,EAASO,mBACfC,eAAgBV,EAAeW,KAC/BC,gBAAiBb,EAAKc,eAAeC,KAAIf,MAEzC,OAAAA,CACH,CAEAgB,EAAApB,EAAAC,GAAA,IAAAoB,EAAArB,EAAAsB,UAAAD,EAKME,SAANC,eAAMD,EAASE,EAAwBC,GACtC,SAAUC,EAAMC,iBAAiBH,EAAUhB,KAAKoB,YAA6B,CAC5E,MACD,CAEA,MAAMC,EAAyBrB,KAAKsB,aACpCtB,KAAKuB,YAAeL,EAAMM,iBAAiBR,GAC3CK,GAAMI,mBAAmB,SACzBzB,KAAKC,mBAAqB,EAE1BD,KAAKuB,MAAMG,QAAQ,CAACC,EAAyBC,KAC5C,IAAIC,EAAc,MAGlB,GAAIZ,EAAkBa,OAAS,GAAKb,EAAkB,GAAGc,eAAeD,OAAS,EAAG,CACnF,MAAME,EAAaf,EAAkB,GAAGc,eAAe,GACvD,UAAWC,WAAsBL,EAAKM,OAASD,IAAeL,EAAKM,MAAO,CACzEJ,EAAc,KACd7B,KAAKC,kBAAoB2B,CAC1B,CACD,CAGAP,GAAMa,QACL,IAAIC,EAAiB,CACpBC,MAAOT,EAAKU,YACZC,SAAUT,EACVU,WAAY,CACX,IAAIC,EAAW,CACdC,IAAK,QACLR,MAAON,EAAKM,WAIf,EAEH,EAEArB,EAKQH,eAAR,SAAQA,EAAeiC,GACtB,MAAMC,EAAeD,EAAME,aAAa,YACxC,MAAMvB,EAAyBrB,KAAKsB,aACpC,MAAMuB,EAAyB7C,KAAK8C,gBAEpC,IAAKH,IAAiBtB,EAAM,CAC3B,MACD,CAGA,MAAMY,EAAuBU,EAC3BI,gBACAC,KAAMT,GAA2BA,EAAWU,WAAa,UACxDC,WAEH,GAAIjB,IAAUkB,UAAW,CAExB,MAAMC,EAAiD,CACtD,CACCC,SAAUC,EAAeC,GACzBxB,eAAgB,CAACE,KAInBY,GAAwBW,2BAGxB,MAAMf,IAAEA,GAAQzC,KAAKyD,YAAYC,mBAAmB,aACpDb,EAAuBc,iBAAiB,oBAAqBP,EAAeX,GAG5EzC,KAAKC,kBAAoBoB,EAAKuC,YAAYjB,EAC3C,CACD,EAEA/B,EACAiD,iBAAA,SAAAA,IACC,MAAMlB,EAA6C3C,KAAKsB,cAAcwC,qBAAqB,GAE3F,OAAOnB,EAAe3C,KAAKsB,cAAcsC,YAAYjB,KAAkB,GAAK,CAC7E,EAAC,OAAApD,CAAA,CA3G+B,CAASwE,GAAW,OA8GtCxE,CAA2B","ignoreList":[],"sourceRoot":"easyFilter/innerControls"}},{"offset":{"line":46,"column":0},"map":{"version":3,"names":["TimeFactory","_BaseFactory","EFB","token","_this","call","this","setControl","TimePickerClocks","_inheritsLoose","_proto","prototype","invokeOkButtonHandler","timePickerControl","getControl","popover","getToken","getCustomDataValue","key","keySpecificSelectedValues","formattedTime","DateFormat","getTimeInstance","format","getTimeValues","operator","length","FilterOperator","EQ","newSpecificValue","selectedValues","EasyFilterUtils","areItemsSame","getEasyFilter","updateTokenArray","close","invokeShowAllButtonHandler","async","getKey","valueHelpPromise","Promise","resolve","reject","fireEvent","getItems","newSelectedValues","error","Error","Log","message","String","BaseFactory"],"sources":["./TimeFactory.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport { BaseFactory } from \"sap/fe/controls/easyFilter/innerControls/BaseFactory\";\nimport type Popover from \"sap/m/Popover\";\nimport TimePickerClocks from \"sap/m/TimePickerClocks\";\nimport type UI5Date from \"sap/ui/core/date/UI5Date\";\nimport DateFormat from \"sap/ui/core/format/DateFormat\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport type EasyFilterBarContainer from \"../EasyFilterBarContainer\";\nimport type { TokenDefinition, TokenSelectedValuesDefinition } from \"../EasyFilterBarContainer\";\nimport type EasyFilterToken from \"../Token\";\nimport EasyFilterUtils from \"../utils\";\n\nclass TimeFactory extends BaseFactory<TimePickerClocks> {\n\tconstructor(EFB: EnhanceWithUI5<EasyFilterBarContainer>, token: EnhanceWithUI5<EasyFilterToken>) {\n\t\tsuper(EFB, token);\n\t\tthis.setControl(new TimePickerClocks());\n\t}\n\n\tinvokeOkButtonHandler(): void {\n\t\tconst timePickerControl = this.getControl();\n\t\tconst popover = this.getToken()?.getCustomDataValue(\"popover\") as Popover;\n\t\tconst { key, keySpecificSelectedValues } = this.getToken()?.getCustomDataValue(\"TokenInfo\") as TokenDefinition;\n\t\tconst formattedTime: string = DateFormat.getTimeInstance().format(timePickerControl?.getTimeValues() as UI5Date | Date);\n\t\tconst operator = keySpecificSelectedValues.length === 0 ? FilterOperator.EQ : keySpecificSelectedValues[0].operator;\n\t\tconst newSpecificValue: TokenDefinition[\"keySpecificSelectedValues\"] = [\n\t\t\t{\n\t\t\t\toperator: operator as Exclude<\n\t\t\t\t\tFilterOperator,\n\t\t\t\t\tFilterOperator.BT | FilterOperator.NB | FilterOperator.All | FilterOperator.Any\n\t\t\t\t>,\n\t\t\t\tselectedValues: [formattedTime] as string[] | number[] | boolean[]\n\t\t\t}\n\t\t];\n\t\tif (EasyFilterUtils.areItemsSame(keySpecificSelectedValues, newSpecificValue)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.getEasyFilter()?.updateTokenArray(\"setSelectedValues\", newSpecificValue, key);\n\t\tpopover?.close();\n\t}\n\n\tasync invokeShowAllButtonHandler(): Promise<void> {\n\t\tconst token = this.getToken();\n\t\tconst key = token?.getKey() as string;\n\t\tconst valueHelpPromise = new Promise<TokenSelectedValuesDefinition[]>((resolve, reject) => {\n\t\t\tthis.getEasyFilter()?.fireEvent(\"showValueHelp\", {\n\t\t\t\tkey,\n\t\t\t\tselectedValues: token?.getItems(),\n\t\t\t\tresolve,\n\t\t\t\treject\n\t\t\t});\n\t\t});\n\n\t\ttry {\n\t\t\tconst newSelectedValues = await valueHelpPromise;\n\t\t\tthis.getEasyFilter()?.updateTokenArray(\"setSelectedValues\", newSelectedValues, key);\n\t\t} catch (error) {\n\t\t\tif (error instanceof Error) {\n\t\t\t\tLog.error(\"Error while fetching new tokens\", error.message);\n\t\t\t} else {\n\t\t\t\tLog.error(\"Error while fetching new tokens\", String(error));\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default TimeFactory;\n"],"mappings":"AAAA;;;;+fAaMA,EAAW,SAAAC,GAChB,SAAAD,EAAYE,EAA6CC,GAAwC,IAAAC,EAChGA,EAAAH,EAAAI,KAAAC,KAAMJ,EAAKC,IAAMG,KACjBF,EAAKG,WAAW,IAAIC,GAAoB,OAAAJ,CACzC,CAACK,EAAAT,EAAAC,GAAA,IAAAS,EAAAV,EAAAW,UAAAD,EAEDE,sBAAA,SAAAA,IACC,MAAMC,EAAoBP,KAAKQ,aAC/B,MAAMC,EAAUT,KAAKU,YAAYC,mBAAmB,WACpD,MAAMC,IAAEA,EAAGC,0BAAEA,GAA8Bb,KAAKU,YAAYC,mBAAmB,aAC/E,MAAMG,EAAwBC,EAAWC,kBAAkBC,OAAOV,GAAmBW,iBACrF,MAAMC,EAAWN,EAA0BO,SAAW,EAAIC,EAAeC,GAAKT,EAA0B,GAAGM,SAC3G,MAAMI,EAAiE,CACtE,CACCJ,SAAUA,EAIVK,eAAgB,CAACV,KAGnB,GAAIW,EAAgBC,aAAab,EAA2BU,GAAmB,CAC9E,MACD,CACAvB,KAAK2B,iBAAiBC,iBAAiB,oBAAqBL,EAAkBX,GAC9EH,GAASoB,OACV,EAACzB,EAEK0B,2BAANC,eAAMD,IACL,MAAMjC,EAAQG,KAAKU,WACnB,MAAME,EAAMf,GAAOmC,SACnB,MAAMC,EAAmB,IAAIC,QAAyC,CAACC,EAASC,KAC/EpC,KAAK2B,iBAAiBU,UAAU,gBAAiB,CAChDzB,MACAY,eAAgB3B,GAAOyC,WACvBH,UACAC,UACC,GAGH,IACC,MAAMG,QAA0BN,EAChCjC,KAAK2B,iBAAiBC,iBAAiB,oBAAqBW,EAAmB3B,EAChF,CAAE,MAAO4B,GACR,GAAIA,aAAiBC,MAAO,CAC3BC,EAAIF,MAAM,kCAAmCA,EAAMG,QACpD,KAAO,CACND,EAAIF,MAAM,kCAAmCI,OAAOJ,GACrD,CACD,CACD,EAAC,OAAA9C,CAAA,CAlDe,CAASmD,GAAW,OAqDtBnD,CAAW","ignoreList":[],"sourceRoot":"easyFilter/innerControls"}},{"offset":{"line":51,"column":0},"map":{"version":3,"names":["ValueHelpPreviewFactory","_BaseFactory","EFB","token","_this","call","this","setControl","List","delete","onDelete","bind","mode","ListMode","Delete","showSeparators","ListSeparators","None","_inheritsLoose","_proto","prototype","setItems","items","tokenType","isDateTimeOffset","Utils","areItemsSame","list","getControl","destroyAggregation","forEach","item","index1","operator","selectedValues","title","isBetweenSelectedValues","mapOperatorForBetweenOperator","insertItem","selectedValue","index2","mapOperator","indexPositions","addItem","StandardListItem","customData","CustomData","key","value","event","popover","getToken","getCustomDataValue","getParameter","setVisible","focus","normalizeString","str","regex","replace","invokeOkButtonHandler","easyFilterBarContainer","getEasyFilter","getItems","map","JSON","parse","stringify","deepClone","indicesToBeRemoved","listItem","getVisible","Infinity","getCustomData","find","data","getKey","getValue","push","sort","a","b","_ref","objIndex","valueIndex","splice","length","updateTokenArray","close","invokeShowAllButtonHandler","async","valueHelpPromise","Promise","resolve","reject","fireEvent","newSelectedValues","error","Error","Log","message","String","invokePopupCloseHandler","BaseFactory"],"sources":["./ValueHelpPreviewFactory.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport deepClone from \"sap/base/util/deepClone\";\nimport type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport { BaseFactory } from \"sap/fe/controls/easyFilter/innerControls/BaseFactory\";\nimport Utils from \"sap/fe/controls/easyFilter/utils\";\nimport List from \"sap/m/List\";\nimport type { ListBase$DeleteEvent } from \"sap/m/ListBase\";\nimport type Popover from \"sap/m/Popover\";\nimport StandardListItem from \"sap/m/StandardListItem\";\nimport { ListMode, ListSeparators } from \"sap/m/library\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport type EasyFilterBarContainer from \"../EasyFilterBarContainer\";\nimport type { BetweenSelectedValues, TokenSelectedValuesDefinition, TokenType } from \"../EasyFilterBarContainer\";\nimport type EasyFilterToken from \"../Token\";\n\nclass ValueHelpPreviewFactory extends BaseFactory<List> {\n\tconstructor(EFB: EnhanceWithUI5<EasyFilterBarContainer>, token: EnhanceWithUI5<EasyFilterToken>) {\n\t\tsuper(EFB, token);\n\t\tthis.setControl(\n\t\t\tnew List({\n\t\t\t\tdelete: this.onDelete.bind(this),\n\t\t\t\tmode: ListMode.Delete,\n\t\t\t\tshowSeparators: ListSeparators.None\n\t\t\t})\n\t\t);\n\t}\n\n\tsetItems(items: TokenSelectedValuesDefinition[], tokenType: TokenType, isDateTimeOffset: boolean): void {\n\t\tif (Utils.areItemsSame(items, this.items as TokenSelectedValuesDefinition[])) {\n\t\t\treturn;\n\t\t}\n\t\tthis.items = items;\n\t\tconst list = this.getControl();\n\t\tlist?.destroyAggregation(\"items\");\n\n\t\titems.forEach((item, index1) => {\n\t\t\tconst { operator, selectedValues } = item;\n\t\t\tlet title = \"\";\n\t\t\tif (Utils.isBetweenSelectedValues(operator)) {\n\t\t\t\ttitle = Utils.mapOperatorForBetweenOperator(operator, selectedValues as BetweenSelectedValues, tokenType, isDateTimeOffset);\n\t\t\t\t//In this case, we don't need t to store index2, because we know that LLM or VHD always gives you only 2 values in return\n\t\t\t\tthis.insertItem(list as List, title, [index1]);\n\t\t\t} else {\n\t\t\t\tselectedValues.forEach((selectedValue, index2) => {\n\t\t\t\t\ttitle = Utils.mapOperator(operator, selectedValue as string | number | boolean, tokenType, isDateTimeOffset);\n\t\t\t\t\t//We need to store index2 to find out which item has been removed inside the array\n\t\t\t\t\tthis.insertItem(list as List, title, [index1, index2]);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tinsertItem(list: List, title: string, indexPositions: number[]): void {\n\t\tlist?.addItem(\n\t\t\tnew StandardListItem({\n\t\t\t\ttitle,\n\t\t\t\tcustomData: new CustomData({\n\t\t\t\t\tkey: \"arrayIndex\",\n\t\t\t\t\tvalue: indexPositions\n\t\t\t\t})\n\t\t\t})\n\t\t);\n\t}\n\n\tonDelete(event: ListBase$DeleteEvent): void {\n\t\tconst popover = this.getToken()?.getCustomDataValue(\"popover\") as Popover;\n\t\tevent.getParameter(\"listItem\")?.setVisible(false);\n\t\tpopover.focus();\n\t}\n\n\tnormalizeString(str: string): string {\n\t\tconst regex = /^(>=|<=|!=|>|<)+/;\n\t\treturn str.replace(regex, \"\");\n\t}\n\n\tinvokeOkButtonHandler(): void {\n\t\tconst popover = this.getToken()?.getCustomDataValue(\"popover\") as Popover;\n\t\tconst token = this.getToken();\n\t\tconst easyFilterBarContainer = this.getEasyFilter() as EasyFilterBarContainer;\n\t\tconst items = token?.getItems()?.map((item) => ({\n\t\t\toperator: JSON.parse(JSON.stringify(item.operator)), // Deep copy of operator\n\t\t\tselectedValues: deepClone(item.selectedValues) // Deep copy of selectedValues, if its a complex object\n\t\t}));\n\t\tconst indicesToBeRemoved: number[][] = [];\n\t\tthis.getControl()\n\t\t\t?.getItems()\n\t\t\t.forEach((listItem) => {\n\t\t\t\t//If the item is hidden that means it should be removed completely\n\t\t\t\tif (!listItem.getVisible()) {\n\t\t\t\t\tconst [index1 = Infinity, index2 = Infinity] =\n\t\t\t\t\t\t(listItem\n\t\t\t\t\t\t\t?.getCustomData()\n\t\t\t\t\t\t\t?.find((data) => data?.getKey() === \"arrayIndex\")\n\t\t\t\t\t\t\t?.getValue() as number[]) ?? [];\n\t\t\t\t\tif (index1 === Infinity || !items) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tindicesToBeRemoved.push([index1, index2]);\n\t\t\t\t}\n\t\t\t});\n\n\t\t/*\n\t\tWithout sorting in descending order:\n\n\t\tRemoving an object would shift all subsequent indices, potentially causing incorrect removals or skips.\n\t\tRemoving values from selectedValues could shift other values, resulting in missed or unintended removals.\n\t\tThis approach ensures that each removal operates on stable, correct indices.\n\n\t\tThis is the reason why we have added valueIndex to infinity\n\t\tInfinity is greater than any valid index, so sorting in descending order will naturally place entries with valueIndex = Infinity at the top for each objIndex.\n\t\tThis way, we can process the complete removal of an object before handling any individual selectedValues removals within that object, preventing unwanted shifts.\n\t\t */\n\t\tindicesToBeRemoved.sort((a, b) => b[0] - a[0] || b[1] - a[1]);\n\n\t\tindicesToBeRemoved.forEach(([objIndex, valueIndex]) => {\n\t\t\tif (items) {\n\t\t\t\t//If valueIndex is infinity, then it means it should be a between operator scenario, so remove the total object only\n\t\t\t\tif (valueIndex === Infinity) {\n\t\t\t\t\titems.splice(objIndex, 1);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\titems[objIndex].selectedValues.splice(valueIndex, 1);\n\t\t\t\t// If the values array becomes empty, remove the whole object\n\t\t\t\tif (items[objIndex].selectedValues.length === 0) {\n\t\t\t\t\titems.splice(objIndex, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\teasyFilterBarContainer.updateTokenArray(\"setSelectedValues\", items as TokenSelectedValuesDefinition[], token?.getKey() as string);\n\t\tpopover.close();\n\t}\n\n\tasync invokeShowAllButtonHandler(): Promise<void> {\n\t\tconst token = this.getToken();\n\t\tconst key = token?.getKey() as string;\n\t\tconst valueHelpPromise = new Promise<TokenSelectedValuesDefinition[]>((resolve, reject) => {\n\t\t\tthis.getEasyFilter()?.fireEvent(\"showValueHelp\", {\n\t\t\t\tkey,\n\t\t\t\tselectedValues: token?.getItems(),\n\t\t\t\tresolve,\n\t\t\t\treject\n\t\t\t});\n\t\t});\n\n\t\ttry {\n\t\t\tconst newSelectedValues = await valueHelpPromise;\n\t\t\tthis.getEasyFilter()?.updateTokenArray(\"setSelectedValues\", newSelectedValues, key);\n\t\t} catch (error) {\n\t\t\tif (error instanceof Error) {\n\t\t\t\tLog.error(\"Error while fetching new tokens\", error.message);\n\t\t\t} else {\n\t\t\t\tLog.error(\"Error while fetching new tokens\", String(error));\n\t\t\t}\n\t\t}\n\t}\n\n\tinvokePopupCloseHandler(): void {\n\t\t//Whatever has been deleted, make them appear again so that they can be visible as soon as you click the token again\n\t\tthis.getControl()\n\t\t\t?.getItems()\n\t\t\t.forEach((item) => item.setVisible(true));\n\t}\n}\n\nexport default ValueHelpPreviewFactory;\n"],"mappings":"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","ignoreList":[],"sourceRoot":"easyFilter/innerControls"}},{"offset":{"line":56,"column":0},"map":{"version":3,"names":["resourceBundle","Lib","getResourceBundleFor","dateTimeOffset","DateTimeOffset","areItemsSame","arr1","arr2","length","i","operator","selectedValues","every","value","index","areArraySame","async","areCodeListsSame","arrNew1","getCodeListArray","arrNew2","descriptionNew1","map","data","description","descriptionNew2","value1","value2","arr","convertDateToString","tokenType","isDateTimeOffset","formattedDateTime","formatValue","DateFormat","getDateInstance","format","getTimeInstance","mapOperator","newValue","convertBoolToString","Date","FilterOperator","GT","LT","GE","LE","EQ","Contains","EndsWith","StartsWith","NE","NotContains","NotEndsWith","NotStartsWith","toString","mapOperatorForBetweenOperator","values","newValue1","newValue2","BT","isBetweenSelectedValues","NB","getText","formatData","tokens","filterValues","filterBarMetadata","visitedMapForMandatoryTokens","filterValue","filterCriteria","find","field","name","type","tokenIndex","findIndex","token","key","keySpecificSelectedValues","EasyFilterUtils","newToken","label","push","currentToken","isRequired"],"sources":["./utils.ts"],"sourcesContent":["import type { PrimitiveType } from \"@sap-ux/vocabularies-types/Edm\";\nimport Lib from \"sap/ui/core/Lib\";\nimport DateFormat from \"sap/ui/core/format/DateFormat\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport DateTimeOffset from \"sap/ui/model/odata/type/DateTimeOffset\";\nimport type { EasyFilterResult, PropertyMetadata } from \"ux/eng/fioriai/reuse/easyfilter/EasyFilter\";\nimport type {\n\tBetweenSelectedValues,\n\tEasyFilterPropertyMetadata,\n\tTokenDefinition,\n\tTokenSelectedValuesDefinition,\n\tTokenType\n} from \"./EasyFilterBarContainer\";\n\ntype codeListType = PropertyMetadata[\"codeList\"];\ntype finalCodeListType = { value: PrimitiveType; description: string }[];\nconst resourceBundle = Lib.getResourceBundleFor(\"sap.fe.controls\")!;\nconst dateTimeOffset = new DateTimeOffset();\n\nfunction areItemsSame(arr1: readonly TokenSelectedValuesDefinition[], arr2: readonly TokenSelectedValuesDefinition[]): boolean {\n\tif (arr1.length !== arr2.length) {\n\t\treturn false;\n\t}\n\t// Compare elements of both arrays\n\tfor (let i = 0; i < arr1.length; i++) {\n\t\tif (\n\t\t\tarr1[i].operator !== arr2[i].operator ||\n\t\t\t!arr1[i].selectedValues.every((value, index) => value === arr2[i].selectedValues[index])\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true; // Arrays are the same\n}\n\nfunction areArraySame(arr1: readonly unknown[], arr2: readonly unknown[]): boolean {\n\tif (arr1.length !== arr2.length) {\n\t\treturn false;\n\t}\n\t// Compare elements of both arrays\n\tfor (let i = 0; i < arr1.length; i++) {\n\t\tif (arr1[i] !== arr2[i]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true; // Arrays are the same\n}\n\nasync function areCodeListsSame(arr1: codeListType, arr2: codeListType): Promise<boolean> {\n\tconst arrNew1: finalCodeListType | undefined = await getCodeListArray(arr1);\n\tconst arrNew2: finalCodeListType | undefined = await getCodeListArray(arr2);\n\tconst descriptionNew1 = arrNew1?.map((data) => data.description);\n\tconst descriptionNew2 = arrNew2?.map((data) => data.description);\n\n\tconst value1 = arrNew1?.map((data) => data.value);\n\tconst value2 = arrNew2?.map((data) => data.value);\n\tif (!descriptionNew1 || !descriptionNew2) {\n\t\treturn false;\n\t}\n\treturn areArraySame(descriptionNew1, descriptionNew2) && areArraySame(value1 as PrimitiveType, value2 as PrimitiveType);\n}\n\nasync function getCodeListArray(arr: codeListType): Promise<finalCodeListType | undefined> {\n\tif (typeof arr === \"function\") {\n\t\treturn arr();\n\t}\n\treturn arr;\n}\n\nfunction convertDateToString(value: Date, tokenType: TokenType, isDateTimeOffset: boolean): string {\n\tlet formattedDateTime = \"\";\n\tif (isDateTimeOffset) {\n\t\treturn dateTimeOffset.formatValue(value, \"string\") as string;\n\t}\n\tswitch (tokenType) {\n\t\tcase \"Calendar\":\n\t\t\tformattedDateTime = DateFormat.getDateInstance().format(value);\n\t\t\tbreak;\n\t\tcase \"Time\":\n\t\t\tformattedDateTime = DateFormat.getTimeInstance().format(value);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\treturn formattedDateTime;\n}\n\n/**\n * Create a string representation of the operator and value.\n * @param operator The operator to represent\n * @param value The value to represent\n * @param tokenType The token's type\n * @param isDateTimeOffset Checks if the data type is of DateTimeOffset\n * @returns The string representation of the operator and value\n */\nfunction mapOperator(\n\toperator: FilterOperator,\n\tvalue: string | number | boolean | Date,\n\ttokenType: TokenType,\n\tisDateTimeOffset: boolean\n): string {\n\tlet newValue: number | string = \"\";\n\tif (typeof value === \"boolean\") {\n\t\tnewValue = convertBoolToString(value);\n\t} else if (value instanceof Date) {\n\t\tnewValue = convertDateToString(value, tokenType, isDateTimeOffset);\n\t} else {\n\t\tnewValue = value;\n\t}\n\n\tswitch (operator) {\n\t\tcase FilterOperator.GT:\n\t\t\treturn `> ${newValue}`;\n\t\tcase FilterOperator.LT:\n\t\t\treturn `< ${newValue}`;\n\t\tcase FilterOperator.GE:\n\t\t\treturn `>= ${newValue}`;\n\t\tcase FilterOperator.LE:\n\t\t\treturn `<= ${newValue}`;\n\t\tcase FilterOperator.EQ:\n\t\t\treturn `${newValue}`;\n\t\tcase FilterOperator.Contains:\n\t\t\treturn `*${newValue}*`;\n\t\tcase FilterOperator.EndsWith:\n\t\t\treturn `*${newValue}`;\n\t\tcase FilterOperator.StartsWith:\n\t\t\treturn `${newValue}*`;\n\t\tcase FilterOperator.NE:\n\t\t\treturn `!=(${newValue})`;\n\t\tcase FilterOperator.NotContains:\n\t\t\treturn `!(*${newValue}*)`;\n\t\tcase FilterOperator.NotEndsWith:\n\t\t\treturn `!(*${newValue})`;\n\t\tcase FilterOperator.NotStartsWith:\n\t\t\treturn `!(${newValue}*)`;\n\t\tdefault:\n\t\t\treturn newValue?.toString();\n\t}\n}\n\nfunction mapOperatorForBetweenOperator(\n\toperator: FilterOperator,\n\tvalues: BetweenSelectedValues,\n\ttokenType: TokenType,\n\tisDateTimeOffset: boolean\n): string {\n\tlet newValue1: string | number | Date = \"\";\n\tlet newValue2: string | number | Date = \"\";\n\tif (typeof values[0] === \"boolean\") {\n\t\tnewValue1 = convertBoolToString(values[0]);\n\t} else if (values[0] instanceof Date) {\n\t\tnewValue1 = convertDateToString(values[0], tokenType, isDateTimeOffset);\n\t} else {\n\t\tnewValue1 = values[0];\n\t}\n\n\tif (typeof values[1] === \"boolean\") {\n\t\tnewValue2 = convertBoolToString(values[1]);\n\t} else if (values[1] instanceof Date) {\n\t\tnewValue2 = convertDateToString(values[1], tokenType, isDateTimeOffset);\n\t} else {\n\t\tnewValue2 = values[1];\n\t}\n\tif (operator === FilterOperator.BT) {\n\t\treturn `${newValue1}...${newValue2}`;\n\t} else {\n\t\treturn `!(${newValue1}...${newValue2})`;\n\t}\n}\n\nfunction isBetweenSelectedValues(operator: FilterOperator): boolean {\n\treturn operator === FilterOperator.BT || operator === FilterOperator.NB;\n}\n\nfunction convertBoolToString(value: boolean): string {\n\treturn value\n\t\t? resourceBundle.getText(\"M_EASY_FILTER_SELECTED_VALUES_TRUE\")\n\t\t: resourceBundle.getText(\"M_EASY_FILTER_SELECTED_VALUES_FALSE\");\n}\n\nfunction formatData(\n\ttokens: TokenDefinition[],\n\tfilterValues: EasyFilterResult[\"filter\"],\n\tfilterBarMetadata: EasyFilterPropertyMetadata[]\n): void {\n\tif (filterValues) {\n\t\tconst visitedMapForMandatoryTokens: Record<string, boolean> = {};\n\t\tfor (const filterValue of filterValues) {\n\t\t\tconst filterCriteria = filterBarMetadata.find((field) => field.name === filterValue.name);\n\t\t\tif (filterCriteria) {\n\t\t\t\tconst { type } = filterCriteria;\n\t\t\t\tconst tokenIndex = tokens.findIndex((token) => token.key === filterValue.name);\n\t\t\t\tconst { operator, values } = filterValue;\n\t\t\t\tlet keySpecificSelectedValues: TokenSelectedValuesDefinition;\n\t\t\t\tif (EasyFilterUtils.isBetweenSelectedValues(operator)) {\n\t\t\t\t\tkeySpecificSelectedValues = {\n\t\t\t\t\t\toperator,\n\t\t\t\t\t\tselectedValues: values as BetweenSelectedValues\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tkeySpecificSelectedValues = {\n\t\t\t\t\t\toperator: operator as Exclude<FilterOperator, FilterOperator.BT | FilterOperator.NB>,\n\t\t\t\t\t\tselectedValues: values as string[] | Date[] | number[] | boolean[]\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (tokenIndex === -1) {\n\t\t\t\t\t// Add new token if it doesn't exist\n\t\t\t\t\tconst newToken: TokenDefinition = {\n\t\t\t\t\t\tkey: filterValue.name,\n\t\t\t\t\t\tlabel: filterCriteria.label as string,\n\t\t\t\t\t\tkeySpecificSelectedValues: [keySpecificSelectedValues],\n\t\t\t\t\t\ttype\n\t\t\t\t\t};\n\t\t\t\t\ttokens.push(newToken);\n\t\t\t\t} else {\n\t\t\t\t\t// Update existing token\n\t\t\t\t\tconst currentToken = tokens[tokenIndex];\n\t\t\t\t\t//If its default value , override it\n\t\t\t\t\tif ((currentToken.isRequired ?? false) && !visitedMapForMandatoryTokens[currentToken.key]) {\n\t\t\t\t\t\tcurrentToken.keySpecificSelectedValues = [keySpecificSelectedValues];\n\t\t\t\t\t\tvisitedMapForMandatoryTokens[currentToken.key] = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentToken.keySpecificSelectedValues.push(keySpecificSelectedValues);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst EasyFilterUtils = {\n\tareItemsSame,\n\tareCodeListsSame,\n\tgetCodeListArray,\n\tareArraySame,\n\tmapOperator,\n\tmapOperatorForBetweenOperator,\n\tisBetweenSelectedValues,\n\tformatData\n};\n\nexport default EasyFilterUtils;\n"],"mappings":"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","ignoreList":[],"sourceRoot":"easyFilter"}},{"offset":{"line":61,"column":0},"map":{"version":3,"names":["sap","ui","define","_library","_library2","Library","_library3","_exports","feControlsNamespace","thisLib","init","name","apiVersion","dependencies","types","interfaces","controls","elements","version","noLibraryCSS"],"sources":["library-dbg.js"],"mappings":"AAAA;;;;AAIAA,IAAIC,GAAGC,qCAAO,CAAC,sBAAuB,gBAAiB,kBAAmB,0BAA2B,SAAUC,EAAUC,EAAWC,EAASC,GAC3I,aAEA,IAAIC,EAAW,CAAC,EAMhB,MAAMC,EAAsB,kBAC5BD,EAASC,oBAAsBA,EAC/B,MAAMC,EAAUJ,EAAQK,KAAK,CAC3BC,KAAM,kBACNC,WAAY,EACZC,aAAc,CAAC,cAAe,cAAe,QAAS,kBACtDC,MAAO,GACPC,WAAY,GACZC,SAAU,GACVC,SAAU,GAEVC,QAAS,UACTC,aAAc,QAGhB,OAAOV,CACT,EAAG","ignoreList":[],"sourceRoot":""}},{"offset":{"line":66,"column":0},"map":{"version":3,"names":[],"sources":["library-preload.js?bundle-code-0"],"mappings":"AAAA;AACA","sourcesContent":["sap.ui.require.preload({\n"],"sourceRoot":""}}]}