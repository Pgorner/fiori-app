/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff0200.io"],function(e){"use strict";e.NativeDispatcher=function(){e.DfDispatcher.call(this);this._ff_c="NativeDispatcher"};e.NativeDispatcher.prototype=new e.DfDispatcher;e.NativeDispatcher.staticSetup=function(){e.Dispatcher.replaceInstance(new e.NativeDispatcher)};e.NativeDispatcher.prototype.registerInterval=function(t,n,o){var a=new e.JsTimerHandle(t,n,o,true);a.jsHandle=setInterval(function(){a.execute()},t);return a};e.NativeDispatcher.prototype.unregisterInterval=function(e){clearInterval(e.jsHandle)};e.NativeDispatcher.prototype.registerTimer=function(t,n,o){var a=new e.JsTimerHandle(t,n,o,false);a.jsHandle=setTimeout(function(){a.execute()},t);return a};e.NativeDispatcher.prototype.unregisterTimer=function(e){clearTimeout(e.jsHandle)};e.NativeDispatcher.prototype.getProcessingTimeReceiverCount=function(){return-1};e.NativeDispatcher.prototype.registerProcessingTimeReceiver=function(e){return};e.NativeDispatcher.prototype.unregisterProcessingTimeReceiver=function(e){return};e.NativeDispatcher.prototype.shutdown=function(){return};e.NativeDispatcher.prototype.process=function(){return};e.NativeDispatcher.prototype.getSyncState=function(){return e.SyncState.IN_SYNC};e.JsTimerHandle=function(t,n,o,a){e.TimerItem.call(this);e.TimerItem.prototype.setupExt.call(this,t,n,o,a);this._ff_c="JsTimerHandle"};e.JsTimerHandle.prototype=new e.TimerItem;e.NativeHttpClient=function(t){e.DfHttpClient.call(this);this.m_xmlHttpRequest=null;this.m_isOnAjaxEventExecuted=false;e.DfHttpClient.prototype.setupHttpClient.call(this,t);this._ff_c="NativeHttpClient"};e.NativeHttpClient.prototype=new e.DfHttpClient;e.NativeHttpClient.parseResponseHeaders=function(t,n){if(t!==null){if(e.XSystemUtils.isGoogleAppsScript()){for(var o in t){if(o!==e.HttpConstants.HD_SET_COOKIE){n.put(o,t[o])}}}else{var a=t.split("\r\n");var i=a.length;var r=e.HttpConstants;for(var s=0;s<i;s++){var c=a[s];var l=c.indexOf(": ");if(l>0){var d=c.substring(0,l).replace(/(^\u000d\u000a?)|(^\u000a?)/,"");var p=c.substring(l+2);n.put(r.lookupCamelCase(d),p)}}}}};e.NativeHttpClient.prototype.abort=function(){this.m_xmlHttpRequest.abort()};e.NativeHttpClient.prototype.releaseObject=function(){this.m_xmlHttpRequest=null;this.m_response=e.XObjectExt.release(this.m_response);this.m_isOnAjaxEventExecuted=null;e.DfHttpClient.prototype.releaseObject.call(this)};e.NativeHttpClient.prototype.onAjaxEvent=function(){var t=this.m_xmlHttpRequest;if(t!==null&&t.readyState===4){this.addProfileStep("Receive http response");this.m_response=e.HttpResponse.createResponse(this.getRequest());this.m_isOnAjaxEventExecuted=true;if(e.isNode()||e.XSystemUtils.isGoogleAppsScript()){var n=e.HttpCookies.create();var o=t.getResponseHeader(e.HttpConstants.HD_SET_COOKIE);for(var a in o){if(o.hasOwnProperty(a)){n.addByHttpServerResponseValue(o[a])}}this.m_response.setCookies(n);this.m_response.setCookiesMasterStore(this.getRequest().getCookiesMasterStore());this.m_response.applyCookiesToMasterStorage()}this.m_response.setStatusCode(t.status);this.m_response.setStatusCodeDetails(t.statusText);var i=t.getAllResponseHeaders();var r=this.m_response.getHeaderFieldsBase();e.NativeHttpClient.parseResponseHeaders(i,r);var s=r.getByKey(e.HttpConstants.HD_CONTENT_TYPE);if(s!==null){s=s.toLowerCase();var c=s.indexOf(";");if(c!==-1){s=s.substring(0,c)}}var l=e.ContentType.lookup(s);if(l===null){this.m_response.setContentTypeValue(s)}else{this.m_response.setContentType(l);let n;let o;if(t.responseType==="arraybuffer"){let o=t.response;n=e.XByteArray.create(o,o.length)}else{o=t.responseText}if(l.isText()){if(!o&&n){o=e.XByteArray.convertToString(n)}this.m_response.setString(o);if(l===e.ContentType.APPLICATION_JSON){if(o!==null&&o.length>0){try{this.addProfileStep("Parse json");var d=JSON.parse(o);var p=new e.NativeJsonProxyElement(d);this.m_response.setJsonObject(p)}catch(t){this.addError(e.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,t.message)}}}}else if(n){this.m_response.setByteArray(n)}}if(t.status===0){this.addError(e.ErrorCodes.HOST_UNREACHABLE,"Destination host is unreachable!")}this.setData(this.m_response);this.endSync();this.m_xmlHttpRequest=null}};e.NativeHttpClient.prototype.processSynchronization=function(t){var n=e.HttpConstants;var o=e.HttpRequestMethod;var a=this.prepareRequest();var i=a.getUrlWithoutAuthentication();this.m_xmlHttpRequest=null;if(e.isXs()){this.m_xmlHttpRequest=new $Global.XMLHttpRequest}else if(e.isNode()){this.m_xmlHttpRequest=new e.NodeJsXMLHttpRequest;var r;if(typeof window!=="undefined"&&window&&window.options&&window.options.isMobile&&e.userSession){r=e.HttpCookies.create();r.addByHttpClientRequestValue(e.userSession.cookies)}else{r=this.getRequest().getCookies()}this.m_xmlHttpRequest.setCookies(r)}else if(e.XSystemUtils.isGoogleAppsScript()){this.m_xmlHttpRequest=new e.NativeGoogleHttpRequest;this.m_xmlHttpRequest.setCookies(this.getRequest().getCookies())}else if(e.XSystemUtils.isBrowser()&&a.isLogoff()&&typeof navigator.sendBeacon!=="undefined"){navigator.sendBeacon(i);return true}else{this.m_xmlHttpRequest=new XMLHttpRequest}if(this.m_xmlHttpRequest!==null){var s=this.m_xmlHttpRequest;var c=t===e.SyncType.NON_BLOCKING;var l=a.getMethod();var d=a.getContentType();if(d!=null&&d.isBinary()){s.responseType="arraybuffer"}s.open(l.getName(),i,c);if(l===o.HTTP_POST||l===o.HTTP_PUT){var p=d.getName()+";charset=UTF-8";s.setRequestHeader(n.HD_CONTENT_TYPE,p)}s.setRequestHeader(n.HD_ACCEPT,a.getAcceptContentType().getName());var u=a.getAuthenticationType();if(u===e.AuthenticationType.BASIC&&(a.getUser()!==null||a.getPassword()!==null)){var v=a.getUser()+":"+a.getPassword();var f=n.VA_AUTHORIZATION_BASIC+" "+e.XBase64.getInstance().encodeFromString(v);s.setRequestHeader(n.HD_AUTHORIZATION,f);if(a.isXAuthorizationRequired()){s.setRequestHeader(n.HD_X_AUTHORIZATION,f)}}else if(u===e.AuthenticationType.BEARER){var m=a.getAccessToken();if(m===null){m=a.getAuthenticationToken().getAccessToken()}if(m!==null){s.setRequestHeader(n.HD_AUTHORIZATION,n.VA_AUTHORIZATION_BEARER+" "+m)}}else if(u===e.AuthenticationType.SCP_OPEN_CONNECTORS){var h=a.getUser();var y=a.getOrganization();var N=a.getElement();var g=e.XStringBuffer.create();g.append(n.HD_USER).append(" ").append(h);g.append(", ");g.append(n.HD_ORGANIZATION).append(" ").append(y);g.append(", ");g.append(n.HD_ELEMENT).append(" ").append(N);s.setRequestHeader(n.HD_AUTHORIZATION,g.toString())}var C=a.getLanguage();if(C&&C.length>0){C=e.HttpCoreUtils.normalizeLanguage(C);s.setRequestHeader(n.HD_ACCEPT_LANGUAGE,C)}var I=a.getHeaderFields();var _=I.getKeysAsIterator();while(_.hasNext()){var S=_.next();s.setRequestHeader(S,I.getByKey(S))}s.onreadystatechange=this.onAjaxEvent.bind(this);if(c){s.timeout=a.m_timeout}if(this._sendInternal(a)===false){return false}if(!c){if(!this.m_isOnAjaxEventExecuted){this.onAjaxEvent();this.m_xmlHttpRequest=null}}return true}this.addError(e.HttpErrorCode.HTTP_MISSING_NATIVE_DRIVER,"XMLHttpRequest not supported");return false};e.NativeHttpClient.prototype._sendInternal=function(t){var n=e.HttpRequestMethod;try{this.m_isOnAjaxEventExecuted=false;this.addProfileStep("### SERVER ###");if(t.isCorsSecured()){this.m_xmlHttpRequest.withCredentials=true}if(t.getMethod()===n.HTTP_POST||t.getMethod()===n.HTTP_PUT){this.m_xmlHttpRequest.send(t.getString())}else{this.m_xmlHttpRequest.send(null)}return true}catch(t){this.addError(e.HttpErrorCode.HTTP_IO_EXCEPTION,t.message);return false}};e.NativeHttpClientFactory=function(){e.HttpClientFactory.call(this);this._ff_c="NativeHttpClientFactory"};e.NativeHttpClientFactory.prototype=new e.HttpClientFactory;e.NativeHttpClientFactory.staticSetup=function(){var t=new e.NativeHttpClientFactory;e.HttpClientFactory.setHttpClientFactoryForProtocol(e.ProtocolType.HTTPS,t);e.HttpClientFactory.setHttpClientFactoryForProtocol(e.ProtocolType.HTTP,t);e.HttpClientFactory.setHttpClientFactoryForProtocol(e.ProtocolType.WEBWORKER,t)};e.NativeHttpClientFactory.prototype.newHttpClientInstance=function(t,n){if(n.getProtocolType().getName()==="webworker"){return new e.NativeHttpWebWorkerClient(t)}return new e.NativeHttpClient(t)};e.NativeNetworkEnv=function(){e.NetworkEnv.call(this);this._ff_c="NativeNetworkEnv"};e.NativeNetworkEnv.prototype=new e.NetworkEnv;e.NativeNetworkEnv.staticSetup=function(){e.NetworkEnv.setNative(new e.NativeNetworkEnv)};e.NativeNetworkEnv.prototype.getNativeLocation=function(){var t=e.XUri.create();if(e.XSystemUtils.isBrowser()){var n=window.location;var o=n.protocol;var a=o.indexOf(":");if(a!==-1){o=o.substring(0,a)}t.setScheme(o);t.setHost(n.hostname);var i=0;if(n.port!==null&&n.port!==""){i=parseInt(n.port);if(isNaN(i)){i=0}}t.setPort(i);t.setPath(n.pathname);var r=n.hash;if(r!==null&&r!==""){if(r.indexOf("#")===0){r=r.substring(1)}r=decodeURIComponent(r);t.setFragment(r)}var s=n.search;if(s!==null&&s!==""){s=decodeURIComponent(s);t.setQuery(s)}}return t};e.NativeNetworkEnv.prototype.getNativeFragment=function(){return this.getNativeLocation().getFragment()};e.NativeNetworkEnv.prototype.setNativeFragment=function(t){if(e.XSystemUtils.isBrowser()){if(t===null){var n=window.location.toString();if(n.indexOf("#")>0){n=n.substring(0,n.indexOf("#"))}window.history.pushState({},document.title,n)}else{window.location.hash=t}}};e.NativeNetworkEnv.prototype.setNativeDomain=function(t){if(e.XSystemUtils.isBrowser()){document.domain=t}};e.NativeSamlUtils=function(){e.SamlUtils.call(this);this._ff_c="NativeSamlUtils"};e.NativeSamlUtils.prototype=new e.SamlUtils;e.NativeSamlUtils.WINDOW_WIDTH=800;e.NativeSamlUtils.WINDOW_HEIGHT=520;e.NativeSamlUtils.DEFAULT_AUTH_TIMEOUT=31e3;e.NativeSamlUtils.staticSetup=function(){e.SamlUtils.setNative(new e.NativeSamlUtils)};e.NativeSamlUtils.prototype.openNativeWindow=function(t,n,o,a){const i=window.open(t,"_blank",`width=${e.NativeSamlUtils.WINDOW_WIDTH},height=${e.NativeSamlUtils.WINDOW_HEIGHT}`);if(!i){return false}const r=setInterval(()=>{if(i&&i.closed&&a){clearInterval(r);n.onWindowClose()}},100);const s=e=>{if(e&&e.origin!==null){clearInterval(r);if(i.opener){i.opener.removeEventListener("message",s)}i.close();n.onWindowClose()}};if(o&&i.opener){i.opener.addEventListener("message",s,false)}setTimeout(()=>{if(i&&(!i.closed||!a)){clearInterval(r);i.close();n.onAuthenticationTimeout()}},e.NativeSamlUtils.DEFAULT_AUTH_TIMEOUT);return true};e.NativeSamlUtils.prototype.createInvisibleIframe=function(t,n,o){const a=document.createElement("iframe");a.style.display="none";a.src=t;a.sandbox.add("allow-forms");a.sandbox.add("allow-scripts");a.sandbox.add("allow-same-origin");document.body.appendChild(a);const i=setInterval(function(){fetch(n,{credentials:"include"}).then(e=>{if(e.ok&&e.headers.get("Content-Type").includes("json")){document.body.removeChild(a);clearInterval(i);o.onWindowClose()}}).catch(()=>{})},5e3);setTimeout(()=>{if(a&&document.body.contains(a)){document.body.removeChild(a);clearInterval(i);o.onAuthenticationTimeout()}},e.NativeSamlUtils.DEFAULT_AUTH_TIMEOUT)};e.NativeSamlUtils.prototype.getPlatform=function(){return window.navigator.platform};e.NativeOAuthUtils=function(){e.OAuthUtils.call(this);this._ff_c="NativeOAuthUtils"};e.NativeOAuthUtils.prototype=new e.OAuthUtils;e.NativeOAuthUtils.staticSetup=function(){e.OAuthUtils.setNative(new e.NativeOAuthUtils)};e.NativeOAuthUtils.prototype.generateCodeVerifier=function(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~";const t=window.crypto.getRandomValues(new Uint8Array(43));const n=e.length;return Array.from(t,t=>e[t%n]).join("")};e.NativeOAuthUtils.prototype.generateCodeChallenge=function(t){return e.XPromise.create((e,n)=>{try{window.crypto.subtle.digest("SHA-256",(new TextEncoder).encode(t)).then(t=>{const n=btoa(Array.from(new Uint8Array(t),e=>String.fromCharCode(e)).join("")).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"");e(n)},n)}catch(e){n(e)}})};e.NativeIframeHandler=function(){e.IframeHandler.call(this);this._ff_c="NativeIframeHandler"};e.NativeIframeHandler.prototype=new e.IframeHandler;e.NativeIframeHandler.DEFAULT_AUTH_TIMEOUT=31e3;e.NativeIframeHandler.FILE_CHECK_TIMEOUT=2e3;e.NativeIframeHandler.GET_SERVER_INFO_INTERVAL=2e3;e.NativeIframeHandler.SUPPORT_DOCUMENTATION_URL_CONFIGURE_HELP="https://help.sap.com/docs/SAP_ANALYTICS_CLOUD/00f68c2e08b941f081002fd3691d86a7/955edc49e709457ea4a1fec042da3339.html";e.NativeIframeHandler.SUPPORT_DOCUMENTATION_URL_NO_FILES="https://help.sap.com/docs/SAP_ANALYTICS_CLOUD/00f68c2e08b941f081002fd3691d86a7/2480f6941d9c4227b64f6b7730ef087d.html";e.NativeIframeHandler.supportedThemes=["sap_belize","sap_belize_hcb","sap_belize_hcw","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw"];e.NativeIframeHandler.messageBoxState={WARNING:"warning",ERROR:"error"};e.NativeIframeHandler.staticSetup=function(){e.IframeHandler.setNative(new e.NativeIframeHandler)};e.NativeIframeHandler.prototype.openStorageAccessDialog=function(t,n,o,a,i,r,s,c){const l=s.getByKey("TITLE_WARNING");const d=s.getByKey("TITLE_ERROR");const p=s.getByKey("WARNING_MESSAGE");if(document.querySelector(".ff-3pc-message-box")){return}const u=o=>{const a=s.getByKey("ERROR_MESSAGE_BLOCK_ACCESS");const i=s.getByKey("ERROR_MESSAGE_RESOURCE_NOT_FOUND");const c=s.getByKey("ERROR_MESSAGE_SUPPORT_DOCUMENT");const l=document.createElement("button");l.className="ff-3pc-message-box-anchor-style";l.addEventListener("click",function(){const o=window.open(n,"_blank");const a=setInterval(()=>{if(o&&o.closed){clearInterval(a);const n=document.querySelector(".ff-3pc-iframe");if(n&&n.contentWindow){const e=n.contentWindow;e.postMessage({enableButton:true},t)}F(e.NativeIframeHandler.messageBoxState.WARNING)}},100)});const d=document.createElement("a");d.href=r?e.NativeIframeHandler.SUPPORT_DOCUMENTATION_URL_CONFIGURE_HELP:e.NativeIframeHandler.SUPPORT_DOCUMENTATION_URL_NO_FILES;d.target="_blank";l.textContent=s.getByKey("CONTINUE_ACCESS");d.textContent=s.getByKey("LEARN_MORE");const p=" ";const u=document.createTextNode((r?a:i)+p);const v=document.createTextNode(c);const f=document.createElement("p");const m=document.createElement("br");o.innerHTML="";o.appendChild(u);if(r){o.appendChild(l);o.appendChild(f);o.appendChild(v);o.appendChild(m)}o.appendChild(d)};const v=e.NativeIframeHandler.supportedThemes.includes(i)?i:"sap_belize";const f=r?e.NativeIframeHandler.messageBoxState.WARNING:e.NativeIframeHandler.messageBoxState.ERROR;let m;const h="sap-ui-blocklayer-popup";const y="ff-3pc-background-overlay";function N(){if(document.getElementById(h)){const e=window.getComputedStyle(document.getElementById(h));return e.getPropertyValue("visibility")!=="hidden"&&e.getPropertyValue("display")!=="none"}else{return false}}function g(){let e=0;document.querySelectorAll("*").forEach(function(t){const n=window.getComputedStyle(t,null).getPropertyValue("z-index");if(n!==null&&n!=="auto"&&Number(n)>e){e=Number(n)}});return e}function C(e){let t;if(N()){t=document.getElementById(h);m=parseInt(window.getComputedStyle(t).getPropertyValue("z-index"))}else{t=document.createElement("div");t.className=`${y} ${v}`;document.body.appendChild(t)}t.style.setProperty("z-index",(e+1).toString())}function I(){let e;if(N()&&m!==undefined){const e=document.getElementById(h);if(m<parseInt(e.style.getPropertyValue("z-index"))){e.style.setProperty("z-index",m.toString())}}else if((e=document.querySelector(".ff-3pc-background-overlay"))!==null){document.body.removeChild(e)}}const _=document.createElement("style");_.textContent=c;document.head.appendChild(_);const S=document.createElement("dialog");S.className=`ff-3pc-message-box ${v}`;document.body.appendChild(S);const E=document.createElement("header");E.className="ff-3pc-message-box__header";const A=document.createElement("div");A.className="ff-3pc-bar__header";const T=document.createElement("span");T.className="ff-3pc-header-icon";const b=document.createElement("h1");b.className="ff-3pc-title";b.textContent=l;A.appendChild(T);A.appendChild(b);E.appendChild(A);S.appendChild(E);const H=document.createElement("div");H.className="ff-3pc-message-box__body";const P=document.createElement("p");P.className="ff-3pc-text";P.innerHTML=p;H.appendChild(P);S.appendChild(H);const w=document.createElement("footer");w.className="ff-3pc-message-box__footer";const X=document.createElement("div");X.className="ff-3pc-bar__footer";const R=document.createElement("iframe");R.className="ff-3pc-iframe";R.src=`${t}`;R.sandbox.add("allow-forms");R.sandbox.add("allow-scripts");R.sandbox.add("allow-same-origin");R.sandbox.add("allow-storage-access-by-user-activation");R.sandbox.add("allow-popups");R.style.display="none";const O=document.createElement("div");O.className="ff-3pc-message-box-loader";const D=document.createElement("div");D.className="ff-3pc-message-box-loader-circle";const x=document.createElement("div");x.className="ff-3pc-message-box-loader-circle";const L=document.createElement("div");L.className="ff-3pc-message-box-loader-circle";O.appendChild(D);O.appendChild(x);O.appendChild(L);const U=document.createElement("button");U.className="ff-3pc-message-box-button";U.onclick=function(){W();o.onIframeClose()};const B=document.createElement("span");B.className="ff-3pc-message-box-button-content";B.textContent=s.getByKey("CLOSE_BUTTON");U.appendChild(B);const M=t=>{if(r&&t===e.NativeIframeHandler.messageBoxState.WARNING){if(!X.contains(R)){X.appendChild(R);X.appendChild(O)}else{R.style.display="block";U.style.display="none"}}else{if(!X.contains(U)){X.appendChild(U)}R.style.display="none";U.style.display="block"}};const F=t=>{if(t===e.NativeIframeHandler.messageBoxState.WARNING){S.classList.remove(e.NativeIframeHandler.messageBoxState.ERROR);S.classList.add(e.NativeIframeHandler.messageBoxState.WARNING);b.textContent=l;P.textContent=p}else{S.classList.remove(e.NativeIframeHandler.messageBoxState.WARNING);S.classList.add(e.NativeIframeHandler.messageBoxState.ERROR);b.textContent=d;u(P)}M(t)};F(f);w.appendChild(X);S.appendChild(w);C(g());const k=setTimeout(function(){if(document.body.contains(S)){S.showModal()}},a);function W(){I();if(document.body.contains(S)){document.body.removeChild(S)}if(document.head.contains(_)){document.head.removeChild(_)}window.removeEventListener("message",q)}const q=t=>{if(t&&t.data){if(typeof t.data.hasCookieAccess!=="undefined"&&t.data.hasCookieAccess){clearTimeout(k);W();o.onIframeClose()}else if(typeof t.data.hasCookieAccess!=="undefined"&&!t.data.hasCookieAccess){F(e.NativeIframeHandler.messageBoxState.ERROR)}else if(typeof t.data.iframeIsLoaded!=="undefined"&&t.data.iframeIsLoaded){X.removeChild(O);R.style.display="block"}}};window.addEventListener("message",q,false);document.body.addEventListener("keydown",function(e){if(e.key=="Escape"){W();o.onIframeClose()}});setTimeout(()=>{if(R.style.display==="visible"&&document.body.contains(S)&&r){clearTimeout(k);W();o.onAuthenticationTimeout()}},e.NativeIframeHandler.DEFAULT_AUTH_TIMEOUT)};e.NativeIframeHandler.prototype.openIframe=function(t,n,o){const a=document.createElement("dialog");a.style.width="500px";a.style.height="650px";a.style.border="none";a.style.margin="0";a.style.overflow="hidden";a.style.position="fixed";a.style.top="50%";a.style.left="50%";a.style.transform="translate(-50%, -50%)";const i=document.createElement("iframe");i.style.width="100%";i.style.height="100%";i.style.border="none";i.src=t;i.sandbox.add("allow-forms");i.sandbox.add("allow-scripts");i.sandbox.add("allow-same-origin");i.sandbox.add("allow-storage-access-by-user-activation");i.sandbox.add("allow-popups");a.appendChild(i);document.body.appendChild(a);function r(){clearInterval(s);window.removeEventListener("message",c);document.body.removeChild(a)}const s=setInterval(function(){fetch(n,{credentials:"include"}).then(e=>{if(e.ok&&e.headers.get("Content-Type").includes("json")){r();o.onIframeClose()}}).catch(()=>{})},e.NativeIframeHandler.GET_SERVER_INFO_INTERVAL);const c=e=>{if(e&&e.data&&e.data.isClosed){r();o.onIframeClose()}};window.addEventListener("message",c,false);a.showModal();setTimeout(()=>{if(i&&document.body.contains(a)){r();o.onAuthenticationTimeout()}},e.NativeIframeHandler.DEFAULT_AUTH_TIMEOUT)};e.NativeIframeHandler.prototype.openMessageIframe=function(t,n,o){const a=Math.random().toString(32)+"_FF_Message_Iframe";const i=document.createElement("iframe");i.name=a;i.style.display="none";i.src=t;const r=Math.random().toString(32);if(o==e.MessageIframeOption.OPEN_ID){i.src+="&state="+r}i.sandbox.add("allow-forms");i.sandbox.add("allow-scripts");i.sandbox.add("allow-same-origin");function s(e){return e.substr(1).split("&").reduce((e,t)=>{const n=t.split("=");const o=n[0];const a=n[1];e[o]=a;return e},{})}function c(e){const t=JSON.parse(e&&e.data||null);if(e.origin===null&&!e.source&&!t){return false}const n=e.source.location;const o=s(n.search);return o.state===r&&a===e.source.name}function l(){window.removeEventListener("message",d);i.remove()}const d=t=>{if(o==e.MessageIframeOption.STORAGE_ACCESS_FILES_CHECK&&t&&t.data){if(t.data.isExists){l();n.onMessageReceived()}}else if(o==e.MessageIframeOption.OPEN_ID&&c(t)){l();const t=s(location.search);const o={queryParams:t};const a=new e.NativeJsonProxyElement(o);n.onMessageReceived(a)}};window.addEventListener("message",d,false);document.body.appendChild(i);setTimeout(()=>{if(i&&document.body.contains(i)){l();n.onMessageTimeout()}},o==e.MessageIframeOption.OPEN_ID?e.NativeIframeHandler.DEFAULT_AUTH_TIMEOUT:e.NativeIframeHandler.FILE_CHECK_TIMEOUT)};e.NativePopupHandler=function(){e.PopupHandler.call(this);this._ff_c="NativePopupHandler"};e.NativePopupHandler.prototype=new e.PopupHandler;e.NativePopupHandler.WINDOW_WIDTH=400;e.NativePopupHandler.WINDOW_HEIGHT=520;e.NativePopupHandler.DEFAULT_AUTH_TIMEOUT=31e3;e.NativePopupHandler.staticSetup=function(){e.PopupHandler.setNative(new e.NativePopupHandler)};e.NativePopupHandler.prototype.openPopup=function(t,n){const o=Math.random().toString(32);const a=t+"&state="+o;const i=window.open(a,"_blank",`width=${e.NativePopupHandler.WINDOW_WIDTH},height=${e.NativePopupHandler.WINDOW_HEIGHT}`);if(!i){return false}const r=setInterval(()=>{if(i&&i.closed){clearInterval(r);n.onMessageTimeout()}},100);function s(e){return e.substr(1).split("&").reduce((e,t)=>{const n=t.split("=");const o=n[0];const a=n[1];e[o]=a;return e},{})}function c(e){let t;try{t=JSON.parse(e&&e.data||null)}catch(n){t=e.data}return t}function l(e){const t=c(e);if(e.origin===null&&!e.source&&!t){return false}if(t.isOpenIdSuccessful){const t=e.source.location;const n=s(t.search);return n.state===o}else{return t.state===o}}const d=t=>{if(l(t)){clearInterval(r);i.close();const o=c(t);let a={};if(o.isOpenIdSuccessful){const e=s(t.source.location.search);a={queryParams:e}}else{a=t.data}const l=new e.NativeJsonProxyElement(a);n.onMessageReceived(l)}};i.opener.addEventListener("message",d,false);setTimeout(()=>{if(i&&!i.closed){clearInterval(r);i.close();n.onMessageTimeout()}},e.NativeSamlUtils.DEFAULT_AUTH_TIMEOUT);return true};e.NativeDocumentEnv=function(){e.DocumentEnv.call(this);this._ff_c="NativeDocumentEnv"};e.NativeDocumentEnv.prototype=new e.DocumentEnv;e.NativeDocumentEnv.staticSetup=function(){e.DocumentEnv.setNative(new e.NativeDocumentEnv)};e.NativeDocumentEnv.prototype.setNativeStringAtId=function(t,n){if(e.XSystemUtils.isBrowser()){var o=document.getElementById(t);if(o!==null&&o!==undefined){o.innerHTML=n}}};e.NativeXLocalStorage=function(t){e.XLocalStorage.call(this);this._ff_c="NativeXLocalStorage"};e.NativeXLocalStorage.prototype=new e.XLocalStorage;e.NativeXLocalStorage.staticSetup=function(){if(e.XSystemUtils.isBrowser()){e.XLocalStorage.setInstance(new e.NativeXLocalStorage)}};e.NativeXLocalStorage.releaseObject=function(){e.XLocalStorage.prototype.releaseObject.call(this)};e.NativeXLocalStorage.prototype.getStringByKey=function(e){return localStorage.getItem(e)};e.NativeXLocalStorage.prototype.getStringByKeyExt=function(e,t){if(!this.containsKey(e)){return t}return this.getStringByKey(e)};e.NativeXLocalStorage.prototype.putString=function(e,t){localStorage.setItem(e,t)};e.NativeXLocalStorage.prototype.getBooleanByKey=function(e){return localStorage.getItem(e)==="true"};e.NativeXLocalStorage.prototype.getBooleanByKeyExt=function(e,t){if(!this.containsKey(e)){return t}return this.getBooleanByKey(e)};e.NativeXLocalStorage.prototype.putBoolean=function(e,t){localStorage.setItem(e,t)};e.NativeXLocalStorage.prototype.getLongByKey=function(e){return parseInt(localStorage.getItem(e))};e.NativeXLocalStorage.prototype.getLongByKeyExt=function(e,t){if(!this.containsKey(e)){return t}return this.getLongByKey(e)};e.NativeXLocalStorage.prototype.putLong=function(e,t){localStorage.setItem(e,t)};e.NativeXLocalStorage.prototype.getIntegerByKey=function(e){return parseInt(localStorage.getItem(e),10)};e.NativeXLocalStorage.prototype.getIntegerByKeyExt=function(e,t){if(!this.containsKey(e)){return t}return this.getIntegerByKey(e)};e.NativeXLocalStorage.prototype.putInteger=function(e,t){localStorage.setItem(e,t)};e.NativeXLocalStorage.prototype.getDoubleByKey=function(e){return parseFloat(localStorage.getItem(e))};e.NativeXLocalStorage.prototype.getDoubleByKeyExt=function(e,t){if(!this.containsKey(e)){return t}return this.getDoubleByKey(e)};e.NativeXLocalStorage.prototype.putDouble=function(e,t){localStorage.setItem(e,t)};e.NativeXLocalStorage.prototype.removeKey=function(e){localStorage.removeItem(e)};e.NativeXLocalStorage.prototype.containsKey=function(e){return localStorage.getItem(e)!==null&&localStorage.getItem(e)!==undefined};e.NativeXLocalStorage.prototype.clear=function(){localStorage.clear()};e.NativeXLocalStorage.prototype.getAllKeys=function(){var t=e.XList.create();for(var n in localStorage){t.add(n)}return t};e.NativeXCacheProviderIdbOpenAction=function(){};e.NativeXCacheProviderIdbOpenAction.prototype=new e.SyncAction;e.NativeXCacheProviderIdbOpenAction.prototype._ff_c="NativeXCacheProviderIdbOpenAction";e.NativeXCacheProviderIdbOpenAction.m_openReq=null;e.NativeXCacheProviderIdbOpenAction.createAndRun=function(t,n,o,a){var i=new e.NativeXCacheProviderIdbOpenAction;i.setupActionAndRun(t,n,o,a);return i};e.NativeXCacheProviderIdbOpenAction.prototype.releaseObjectInternal=function(){};e.NativeXCacheProviderIdbOpenAction.prototype.processSynchronization=function(e){var t=this;var n=this.getActionContext();this.setData(n);var o=n.getIDB();var a=o.open("ff_cache25",25);a.onerror=function(e){};a.onupgradeneeded=function(e){var t=e.target.result;if(t!==null){if(t.objectStoreNames.contains("main")===false){var n=t.createObjectStore("main",{keyPath:["namespace","name"]});n.createIndex("namespace","namespace",{unique:false});n.createIndex("name","name",{unique:false});n.createIndex("value","value",{unique:false})}}};a.onsuccess=function(e){var o=e.target.result;n.setActiveDb(o);t.endSync()};return true};e.NativeXCacheProviderIdbOpenAction.prototype.callListener=function(e,t,n,o){t.onCacheProviderOpen(e,n,o)};e.NativeXCacheProviderIdbWriteAction=function(){};e.NativeXCacheProviderIdbWriteAction.prototype=new e.SyncAction;e.NativeXCacheProviderIdbWriteAction.prototype._ff_c="NativeXCacheProviderIdbWriteAction";e.NativeXCacheProviderIdbWriteAction.prototype.m_namespace=null;e.NativeXCacheProviderIdbWriteAction.prototype.m_name=null;e.NativeXCacheProviderIdbWriteAction.prototype.m_content=null;e.NativeXCacheProviderIdbWriteAction.prototype.m_maxCount=0;e.NativeXCacheProviderIdbWriteAction.createAndRun=function(t,n,o,a,i,r,s,c){var l=new e.NativeXCacheProviderIdbWriteAction;l.m_namespace=i;l.m_name=r;l.m_content=s;l.setData(s);l.m_maxCount=c;l.setupActionAndRun(t,n,o,a);return l};e.NativeXCacheProviderIdbWriteAction.prototype.releaseObjectInternal=function(){};e.NativeXCacheProviderIdbWriteAction.prototype.processSynchronization=function(e){var t=this;var n=this.m_content.isBinaryContentSet()?this.m_content.getByteArray().getNative():this.m_content.getString();var o=this.getActionContext();var a=o.getActiveDb();var i=a.transaction(["main"],"readwrite");var r=i.objectStore("main");var s=r.put({namespace:this.m_namespace,name:this.m_name,value:n});s.onsuccess=function(e){console.log("The data has been written successfully");o.incWriteHit(t.m_namespace);t.endSync()};s.onerror=function(e){console.log("The data has been written failed");t.endSync()};return true};e.NativeXCacheProviderIdbWriteAction.prototype.callListener=function(e,t,n,o){t.onCacheWrite(e,n,o)};e.NativeXCacheProviderIdbReadAction=function(){};e.NativeXCacheProviderIdbReadAction.prototype=new e.SyncAction;e.NativeXCacheProviderIdbReadAction.prototype._ff_c="NativeXCacheProviderIdbReadAction";e.NativeXCacheProviderIdbReadAction.prototype.m_namespace=null;e.NativeXCacheProviderIdbReadAction.prototype.m_name=null;e.NativeXCacheProviderIdbReadAction.prototype.m_validityTime=0;e.NativeXCacheProviderIdbReadAction.createAndRun=function(t,n,o,a,i,r,s){var c=new e.NativeXCacheProviderIdbReadAction;c.m_namespace=i;c.m_name=r;c.m_validityTime=s;c.setupActionAndRun(t,n,o,a);return c};e.NativeXCacheProviderIdbReadAction.prototype.releaseObjectInternal=function(){};e.NativeXCacheProviderIdbReadAction.prototype.processSynchronization=function(t){var n=this;var o=this.getActionContext();var a=o.getActiveDb();var i=a.transaction(["main"],"readwrite");var r=i.objectStore("main");var s=r.get([this.m_namespace,this.m_name]);s.onsuccess=function(t){var a=t.target.result;if(a!==undefined){var i=a.value;console.log("The data has been read successfully");o.incHit(n.m_namespace);var r=i instanceof Uint8Array||i instanceof Array?e.XContent.createByteArrayContent(e.ContentType.APPLICATION_OCTETSTREAM,new e.XByteArray(i)):e.XContent.createStringContent(e.ContentType.TEXT,i);n.setData(r)}else{o.incMissedHit(n.m_namespace);n.addError("The data read has been failed")}n.endSync()};s.onerror=function(e){o.incMissedHit(n.m_namespace);n.addError("The data read has been failed");n.endSync()};return true};e.NativeXCacheProviderIdbReadAction.prototype.callListener=function(e,t,n,o){t.onCacheRead(e,n,o)};e.NativeXCacheProviderIdbDeleteAction=function(){};e.NativeXCacheProviderIdbDeleteAction.prototype=new e.SyncAction;e.NativeXCacheProviderIdbDeleteAction.prototype._ff_c="NativeXCacheProviderIdbDeleteAction";e.NativeXCacheProviderIdbDeleteAction.prototype.m_namespace=null;e.NativeXCacheProviderIdbDeleteAction.prototype.m_name=null;e.NativeXCacheProviderIdbDeleteAction.prototype.m_content=null;e.NativeXCacheProviderIdbDeleteAction.prototype.m_maxCount=0;e.NativeXCacheProviderIdbDeleteAction.createAndRun=function(t,n,o,a,i,r,s,c){var l=new e.NativeXCacheProviderIdbDeleteAction;l.m_namespace=i;l.m_name=r;l.m_content=s;l.setData(e.XBooleanValue.create(false));l.setupActionAndRun(t,n,o,a);return l};e.NativeXCacheProviderIdbDeleteAction.prototype.releaseObjectInternal=function(){};e.NativeXCacheProviderIdbDeleteAction.prototype.processSynchronization=function(e){var t=this;var n=this.getActionContext();var o=n.getActiveDb();var a=o.transaction(["main"],"readwrite");var i=a.objectStore("main");var r=i.delete([this.m_namespace,this.m_name]);r.onsuccess=function(e){console.log("The data has been deleted successfully");n.incDelete(t.m_namespace);t.endSync()};r.onerror=function(e){console.log("Failed to delete the data");t.endSync()};return true};e.NativeXCacheProviderIdbDeleteAction.prototype.callListener=function(e,t,n,o){t.onCacheDelete(e,n.getBoolean(),o)};e.NativeXCacheProviderIdb=function(){e.DfXCacheProvider.call(this);this._ff_c="NativeXCacheProviderIdb"};e.NativeXCacheProviderIdb.prototype=new e.DfXCacheProvider;e.NativeXCacheProviderIdb.m_indexedDB=null;e.NativeXCacheProviderIdb.m_activeDb=null;e.NativeXCacheProviderIdb.create=function(t){var n=new e.NativeXCacheProviderIdb;n.setupSessionContext(t);return n};e.NativeXCacheProviderIdb.prototype.setupSessionContext=function(t){e.DfXCacheProvider.prototype.setupSessionContext.call(this,t);var n=typeof window!=="undefined"?window:{};this.m_indexedDB=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB};e.NativeXCacheProviderIdb.prototype.processOpen=function(t,n,o){return e.NativeXCacheProviderIdbOpenAction.createAndRun(t,n,o,this)};e.NativeXCacheProviderIdb.prototype.getPrefix=function(){return""};e.NativeXCacheProviderIdb.prototype.writeStringToCache=function(e,t,n,o){var a=this.m_activeDb.transaction(["main"],"readwrite").objectStore("main").add({namespace:e,name:t,value:n});a.onsuccess=function(e){console.log("The data has been written successfully")};a.onerror=function(e){console.log("The data has been written failed")}};e.NativeXCacheProviderIdb.prototype.getStringByKey=function(e){return null};e.NativeXCacheProviderIdb.prototype.clearCacheInternal=function(e){};e.NativeXCacheProviderIdb.prototype.getIDB=function(){return this.m_indexedDB};e.NativeXCacheProviderIdb.prototype.setActiveDb=function(e){this.m_activeDb=e};e.NativeXCacheProviderIdb.prototype.getActiveDb=function(){return this.m_activeDb};e.NativeXCacheProviderIdb.prototype.processWrite=function(t,n,o,a,i,r,s){return e.NativeXCacheProviderIdbWriteAction.createAndRun(t,n,o,this,a,i,r,s)};e.NativeXCacheProviderIdb.prototype.processRead=function(t,n,o,a,i,r){return e.NativeXCacheProviderIdbReadAction.createAndRun(t,n,o,this,a,i,r)};e.NativeXCacheProviderIdb.prototype.processDelete=function(t,n,o,a,i){return e.NativeXCacheProviderIdbDeleteAction.createAndRun(t,n,o,this,a,i)};e.NativeXCacheProviderLs=function(){e.DfXCacheProvider.call(this);this._ff_c="NativeXCacheProviderLs"};e.NativeXCacheProviderLs.prototype=new e.DfXCacheProvider;e.NativeXCacheProviderLs.create=function(t){var n=new e.NativeXCacheProviderLs;n.setupSessionContext(t);return n};e.NativeXCacheProviderLs.prototype.getPrefix=function(){return"sap.ff"};e.NativeXCacheProviderLs.prototype.putString=function(e,t){try{window.localStorage.setItem(e,t)}catch(e){this.logError2("Error occured during cache writing: ",e.message)}};e.NativeXCacheProviderLs.prototype.getStringByKey=function(e){return window.localStorage.getItem(e)};e.NativeXCacheProviderLs.prototype.clearCacheInternal=function(e){window.localStorage.clear()};e.NativeXCacheProviderFactory=function(){e.XCacheProviderFactory.call(this);this._ff_c="NativeXCacheProviderFactory"};e.NativeXCacheProviderFactory.prototype=new e.XCacheProviderFactory;e.NativeXCacheProviderFactory.staticSetup=function(){var t=typeof window!=="undefined"?window:{};if(typeof t.localStorage!=="undefined"){var n=new e.NativeXCacheProviderFactory;e.XCacheProviderFactory.registerFactory(e.XCacheProviderFactory.DRIVER_LOCAL_STORAGE,n)}var o=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB;if(o!=="undefined"&&o!==null){e.XCacheProviderFactory.registerFactory(e.XCacheProviderFactory.DRIVER_INDEX_DB,n)}};e.NativeXCacheProviderFactory.prototype.newDeviceCacheAccess=function(t,n){var o=null;if(n==e.XCacheProviderFactory.DRIVER_LOCAL_STORAGE){o=new e.NativeXCacheProviderLs.create(t)}else if(n==e.XCacheProviderFactory.DRIVER_INDEX_DB){o=new e.NativeXCacheProviderIdb.create(t)}return o};e.NativeXPeek=function(){e.XPeek.call(this);this._ff_c="NativeXPeek"};e.NativeXPeek.prototype=new e.XPeek;e.NativeXPeek.staticSetup=function(){if(typeof document!=="undefined"){const t=new e.NativeXPeek;e.XPeek.setInstance(t)}};e.NativeXPeek.prototype.retrieveContent=function(t,n){let o=null;const a=document.getElementById(n);const i=a.contentDocument||a.contentWindow.document;if(i.readyState==="complete"){const t=i.body.innerText;o=e.XContent.createStringContent(e.ContentType.TEXT,t)}return o};e.IoNativeModule=function(){e.DfModule.call(this);this._ff_c="IoNativeModule"};e.IoNativeModule.prototype=new e.DfModule;e.IoNativeModule.s_module=null;e.IoNativeModule.getInstance=function(){var t=e.IoNativeModule;if(t.s_module===null){if(e.IoModule.getInstance()===null){throw new Error("Initialization Exception")}t.s_module=e.DfModule.startExt(new e.IoNativeModule);e.NativeNetworkEnv.staticSetup();e.NativeDispatcher.staticSetup();e.NativeHttpClientFactory.staticSetup();e.NativeXLocalStorage.staticSetup();e.NativeXCacheProviderFactory.staticSetup();e.NativeDocumentEnv.staticSetup();e.NativeXPeek.staticSetup();e.NativeSamlUtils.staticSetup();e.NativeOAuthUtils.staticSetup();e.NativeIframeHandler.staticSetup();e.NativePopupHandler.staticSetup();if(e.isNode()){e.userSession={};e.NativeXFileSystem.staticSetup();e.NativeXFileSystemOSFactory.staticSetup()}if(!e.isUi5()&&!e.isXs()){e.NativeSqlDriverFactory.staticSetup()}e.DfModule.stopExt(t.s_module)}return t.s_module};e.IoNativeModule.prototype.getName=function(){return"ff0210.io.native"};e.IoNativeModule.getInstance();return e});
//# sourceMappingURL=ff0210.io.native.js.map