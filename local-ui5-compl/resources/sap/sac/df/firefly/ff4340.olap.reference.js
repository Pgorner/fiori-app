/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff2670.visualization.ui","sap/sac/df/firefly/ff4310.olap.impl"],function(e){"use strict";e.QQuickActionCoordinate=function(){};e.QQuickActionCoordinate.prototype=new e.XObject;e.QQuickActionCoordinate.prototype._ff_c="QQuickActionCoordinate";e.QQuickActionCoordinate.create=function(){let t=new e.QQuickActionCoordinate;t.m_columMap=e.XSimpleMap.create();t.m_rowMap=e.XSimpleMap.create();t.m_columnCoordinate=-1;t.m_rowCoordinate=-1;return t};e.QQuickActionCoordinate.prototype.m_columMap=null;e.QQuickActionCoordinate.prototype.m_columnCoordinate=0;e.QQuickActionCoordinate.prototype.m_rowCoordinate=0;e.QQuickActionCoordinate.prototype.m_rowMap=null;e.QQuickActionCoordinate.prototype.applyColumnParameter=function(t,i){this.m_columMap.put(e.XIntegerValue.create(t),i);this.m_columnCoordinate=e.XMath.max(this.m_columnCoordinate,t)};e.QQuickActionCoordinate.prototype.applyRowParameter=function(t,i){this.m_rowMap.put(e.XIntegerValue.create(t),i);this.m_rowCoordinate=e.XMath.max(this.m_rowCoordinate,t)};e.QQuickActionCoordinate.prototype.getColumMap=function(){return this.m_columMap};e.QQuickActionCoordinate.prototype.getColumnCoordinate=function(){return this.m_columnCoordinate};e.QQuickActionCoordinate.prototype.getRowCoordinate=function(){return this.m_rowCoordinate};e.QQuickActionCoordinate.prototype.getRowMap=function(){return this.m_rowMap};e.QQuickActionCoordinate.prototype.reset=function(){this.m_columnCoordinate=-1;this.m_rowCoordinate=-1;this.m_columMap.clear();this.m_rowMap.clear()};e.QQuickActionParameterResolveUtil={fieldValueParameterMatchesMember:function(t,i,n){let r=t.getMatchesTotals();let l=t.getMatchesExpanded();let o=t.getMatchesLeaves();return(!e.TriStateBool.isExplicitBooleanValue(r)||i.getMemberType().isTypeOf(e.MemberType.RESULT)===r.getBoolean())&&(!e.TriStateBool.isExplicitBooleanValue(l)||n===e.DrillState.EXPANDED===l.getBoolean())&&(!e.TriStateBool.isExplicitBooleanValue(o)||(n===e.DrillState.LEAF||e.isNull(n))===o.getBoolean())},readFromCartesianList:function(t,i){e.XCollectionUtils.forEach(i,i=>{e.XCollectionUtils.addIfNotNull(t,e.QQuickActionParameterResolveUtil.resolveFromFilterOperation(i))});return t},resolveFromFilterElement:function(t,i,n){let r=e.XList.create();let l=n.getOlapComponentType();let o=i.getDimension();let s=i.getField();let a=i.getSemanticObject();let u=null;if(l.isTypeOf(e.FilterComponentType.CARTESIAN_PRODUCT)){let i=n;if(e.notNull(o)){u=i.getCartesianListByDimensionName(o.getName())}else if(e.notNull(s)){u=i.getCartesianListByField(s)}else if(e.XStringUtils.isNotNullAndNotEmpty(a)){u=e.XStream.of(i).find(i=>e.XString.isEqual(a,t.getDimensionByName(i.getDimensionName()).getSemanticObject())).orElse(null)}if(e.notNull(u)){e.QQuickActionParameterResolveUtil.readFromCartesianList(r,u)}}else if(l.isTypeOf(e.FilterComponentType.CARTESIAN_LIST)){let i=n;if(e.notNull(o)&&e.XString.isEqual(i.getDimensionName(),o.getName())||e.notNull(s)&&i.getFieldMetadata()===s.getMetadata()||e.XStringUtils.isNotNullAndNotEmpty(a)&&e.XString.isEqual(a,t.getDimensionByName(i.getDimensionName()).getSemanticObject())){e.QQuickActionParameterResolveUtil.readFromCartesianList(r,i)}}else if(l.isTypeOf(e.FilterComponentType.OPERATION)){let i=n;if(e.notNull(o)&&e.XString.isEqual(i.getDimensionName(),o.getName())||e.notNull(s)&&i.getFieldMetadata()===s.getMetadata()||e.XStringUtils.isNotNullAndNotEmpty(a)&&e.XString.isEqual(a,t.getDimensionByName(i.getDimensionName()).getSemanticObject())){r.add(e.QQuickActionParameterResolveUtil.resolveFromFilterOperation(i))}}return r},resolveFromFilterOperation:function(t){let i=e.QFilterValueBag._create(null,null,null);i.copyFrom(t.getLow(),null);return i}};e.BindingUtils={getBindingSoureList:function(t,i){let n=t.getStructureByKey(e.VizDefConstants.K_CHART).getListByKey(e.VizDefConstants.K_BINDINGS);let r=e.XList.create();for(let t=0;t<n.size();++t){let l=n.getStructureAt(t);if(e.XString.isEqual(l.getStringByKey(e.VizDefConstants.K_FEED),i)){let t=l.getListByKey(e.VizDefConstants.K_SOURCE);for(let i=0;i<t.size();++i){r.add(t.getStructureAt(i).getStringByKey(e.VizDefConstants.K_ID))}}}return r}};e.ChartRendererFactoryImpl=function(){};e.ChartRendererFactoryImpl.prototype=new e.XObject;e.ChartRendererFactoryImpl.prototype._ff_c="ChartRendererFactoryImpl";e.ChartRendererFactoryImpl.create=function(){return new e.ChartRendererFactoryImpl};e.ChartRendererFactoryImpl.prototype.newRenderer=function(t){if(t.isTypeOf(e.ProtocolBindingType.GOOGLE_CHART_PROTOCOL)){return e.RsGoogleChartRenderer.create()}if(t.isTypeOf(e.ProtocolBindingType.VIZ_FRAME_PROTOCOL)){return e.RsVizFrameRenderer.create()}if(t.isTypeOf(e.ProtocolBindingType.MICRO_CHART_PROTOCOL)){return e.RsMicroChartRenderer.create()}if(t.isTypeOf(e.ProtocolBindingType.VIZ_INSTANCE_PROTOCOL)){return e.RsVizInstanceRenderer.create()}return e.RsHiChartRenderer.create()};e.ChartRendererFactoryImpl.prototype.newSimpleRenderer=function(t,i){return e.GenericHiChartRendererLatest.create(i.getVisualizationData(),true)};e.RsHiChartRenderer=function(){};e.RsHiChartRenderer.prototype=new e.XObject;e.RsHiChartRenderer.prototype._ff_c="RsHiChartRenderer";e.RsHiChartRenderer.create=function(){return new e.RsHiChartRenderer};e.RsHiChartRenderer.getDoubleValueExtended=function(t,i,n){let r=n;let l=t.getStringByKeyExt(i,"0");if(t.getElementTypeByKey(i).isNumber()){r=t.getByKey(i).asNumber().getDouble()}else if(e.notNull(l)&&e.XString.containsString(l,"E")){let t=e.XDouble.convertFromString(e.XString.substring(l,0,e.XString.indexOf(l,"E")));let i=e.XInteger.convertFromString(e.XString.substring(l,e.XString.indexOf(l,"E"),e.XString.size(l)));r=t*e.XMath.pow(10,i)}else if(e.notNull(l)){try{r=e.XDouble.convertFromString(l)}catch(e){r=n}}return r};e.RsHiChartRenderer.prototype.render=function(t,i){if(e.notNull(i)){let n=e.RsHiChartRenderHelper.create(t,i);return n.getChartData()}return null};e.RsHiChartRenderer.prototype.renderVisualizationWithResultSet=function(t,i){if(e.notNull(i)){let n=e.RsHiChartRenderHelper.createWithVisualizationDefinition(t,i);let r=n.getChartData();if(!r.containsKey(e.VizDefConstants.K_TITLE)){let t=r.putNewStructure(e.VizDefConstants.K_TITLE);t.putString(e.VizDefConstants.K_TEXT,"")}return n.getChartData()}return null};e.RsHiChartUtils={axisPloter:function(t,i,n,r){let l=true;let o=r;let s=false;let a="#FFFFFF";let u=t.getStructureByKey(e.VizDefConstants.K_AXIS_LINE);if(t.getElementTypeByKey(e.VizDefConstants.K_VISIBLE)===e.PrElementType.BOOLEAN){o=t.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,r)}let p=t.getStructureByKey(e.VizDefConstants.K_AXIS_TICK);if(e.notNull(u)){if(u.containsKey(e.VizDefConstants.K_SIZE)){let t=u.getIntegerByKeyExt(e.VizDefConstants.K_SIZE,0);i.putInteger(e.VizDefConstants.K_LINE_WIDTH,t)}l=u.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,true)}if(e.notNull(p)){s=p.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,false)}let c=t.getBooleanByKeyExt(e.VizDefConstants.K_SHOW_LABEL_GRIDS,true);if(!e.XString.isEqual(e.VizDefConstants.K_HEATMAP,n)&&t.hasStringByKey(e.VizDefConstants.K_COLOR)&&l){a=t.getStringByKeyExt(e.VizDefConstants.K_COLOR,"#FFFFFF")}i.putString(e.VizDefConstants.K_LINE_COLOR,a);let g=t.getStructureByKey(e.VizDefConstants.K_LABEL);if(e.notNull(g)){let t=g.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.notNull(t)){let r=t.getStringByKey(e.VizDefConstants.K_COLOR);let l=t.getStringByKey(e.VizDefConstants.K_FONT_FAMILY);let s=t.getStringByKey(e.VizDefConstants.K_FONT_SIZE);let a=i.putNewStructure(e.VizDefConstants.K_LABELS);if(c){a.putInteger(e.VizDefConstants.K_X,-5);let t=a.putNewStructure(e.VizDefConstants.K_STYLE);t.putString(e.VizDefConstants.K_FONT_SIZE,s);t.putString(e.VizDefConstants.K_FILL,r);if(e.XString.isEqual(n,e.VizDefConstants.V_CHART_TYPE_BOXPLOT)){t.putString(e.VizDefConstants.K_COLOR,r)}t.putString(e.VizDefConstants.K_FONT_FAMILY,l)}a.putBoolean(e.VizDefConstants.K_ENABLED,o)}}if(!s){i.putInteger(e.VizDefConstants.K_GRIDLINE_WIDTH,0);i.putString(e.VizDefConstants.K_TICK_COLOR,"rgb(166, 168, 171)");i.putInteger(e.VizDefConstants.K_TICK_WIDTH,0)}return i},create:function(){return new e.RsHiChartUtils},responsiveBuilder:function(t,i){let n=i.putNewStructure(e.VizDefConstants.K_RESPONSIVE);let r=n.putNewList(e.VizDefConstants.K_RULES);let l=r.addNewStructure();let o=l.putNewStructure(e.VizDefConstants.K_CONDITION);o.putInteger(e.VizDefConstants.K_MAX_HEIGHT,176);let s=l.putNewStructure(e.VizDefConstants.K_CHART_OPTIONS);let a=s.putNewStructure(e.VizDefConstants.K_LEGEND);a.putBoolean(e.VizDefConstants.K_ENABLED,false);let u=s.putNewStructure(e.VizDefConstants.K_Y_AXIS);let p=u.putNewStructure(e.VizDefConstants.K_LABELS);p.putInteger(e.VizDefConstants.K_ROTATION,344);p.putInteger(e.VizDefConstants.K_X,10);let c=r.addNewStructure();let g=c.putNewStructure(e.VizDefConstants.K_CONDITION);g.putInteger(e.VizDefConstants.K_MAX_WIDTH,359);g.putInteger(e.VizDefConstants.K_MIN_HEIGHT,70);let m=c.putNewStructure(e.VizDefConstants.K_CHART_OPTIONS);let f=m.putNewStructure(e.VizDefConstants.K_CHART);f.putBoolean(e.VizDefConstants.K_ANIMATION,false);let C=m.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);let d=C.putNewStructure(e.VizDefConstants.K_SERIES);let y=d.putNewStructure(e.VizDefConstants.K_DATA_LABELS);let h=y.putNewStructure(e.VizDefConstants.K_STYLE);if(e.XString.isEqual(t,e.VizDefConstants.K_PIE)){h.putString(e.VizDefConstants.K_FONT_SIZE,"9px");y.putInteger(e.VizDefConstants.K_CONNECTOR_WIDTH,0);y.putInteger(e.VizDefConstants.K_DISTANCE,-30);y.putBoolean(e.VizDefConstants.K_INSIDE,true);f.putInteger(e.VizDefConstants.K_MARGIN_TOP,40)}else{f.putInteger(e.VizDefConstants.K_MARGIN_TOP,50);h.putString(e.VizDefConstants.K_FONT_SIZE,"9px")}let _=m.putNewStructure(e.VizDefConstants.K_TITLE);let T=_.putNewStructure(e.VizDefConstants.K_STYLE);T.putString(e.VizDefConstants.K_FONT_SIZE,"13px");T.putBoolean(e.VizDefConstants.K_FLOATING,true);let S=m.putNewStructure(e.VizDefConstants.K_SUBTITLE);S.putString(e.VizDefConstants.K_TEXT,"");let R=m.putNewStructure(e.VizDefConstants.K_X_AXIS);let D=R.putNewStructure(e.VizDefConstants.K_LABELS);let A=D.putNewStructure(e.VizDefConstants.K_STYLE);A.putString(e.VizDefConstants.K_FONT_SIZE,"10px");let E=m.putNewStructure(e.VizDefConstants.K_Y_AXIS);let V=E.putNewStructure(e.VizDefConstants.K_LABELS);let N=V.putNewStructure(e.VizDefConstants.K_STYLE);N.putString(e.VizDefConstants.K_FONT_SIZE,"10px");let x=r.addNewStructure();let P=x.putNewStructure(e.VizDefConstants.K_CONDITION);P.putInteger(e.VizDefConstants.K_MAX_WIDTH,176);let L=x.putNewStructure(e.VizDefConstants.K_CHART_OPTIONS);let I=L.putNewStructure(e.VizDefConstants.K_CHART);I.putBoolean(e.VizDefConstants.K_ANIMATION,false);let b=L.putNewStructure(e.VizDefConstants.K_LEGEND);b.putBoolean(e.VizDefConstants.K_ENABLED,false);b.putInteger(e.VizDefConstants.K_Y,25);let z=L.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);let O=z.putNewStructure(e.VizDefConstants.K_SERIES);O.putInteger(e.VizDefConstants.K_MIN_SIZE,100);let F=O.putNewStructure(e.VizDefConstants.K_DATA_LABELS);F.putInteger(e.VizDefConstants.K_CONNECTOR_WIDTH,0);F.putInteger(e.VizDefConstants.K_DISTANCE,-25);let M=F.putNewStructure(e.VizDefConstants.K_STYLE);M.putString(e.VizDefConstants.K_FONT_SIZE,"8px");I.putInteger(e.VizDefConstants.K_MARGIN_TOP,40);let v=L.putNewStructure(e.VizDefConstants.K_TITLE);let U=v.putNewStructure(e.VizDefConstants.K_STYLE);U.putString(e.VizDefConstants.K_FONT_SIZE,"10px");let X=L.putNewStructure(e.VizDefConstants.K_SUBTITLE);X.putString(e.VizDefConstants.K_TEXT,"");let K=L.putNewStructure(e.VizDefConstants.K_X_AXIS);let H=K.putNewStructure(e.VizDefConstants.K_LABELS);let w=H.putNewStructure(e.VizDefConstants.K_STYLE);w.putString(e.VizDefConstants.K_FONT_SIZE,"9px");let B=L.putNewStructure(e.VizDefConstants.K_Y_AXIS);let G=B.putNewStructure(e.VizDefConstants.K_LABELS);let W=G.putNewStructure(e.VizDefConstants.K_STYLE);W.putString(e.VizDefConstants.K_FONT_SIZE,"9px")}};e.RsGoogleChartConfig={s_charts:null,createMetadata:function(t,i){let n=e.RsGoogleChartConfig.s_charts.getByKey(e.RsGoogleChartConfig.getChartType(t));if(e.notNull(n)){return n.createMetadata(i)}return e.PrFactory.createStructure()},createOptions:function(t){let i=e.RsGoogleChartConfig.s_charts.getByKey(e.RsGoogleChartConfig.getChartType(t));if(e.notNull(i)){return i.createOptions(t)}return e.PrFactory.createStructure()},getChartType:function(t){let i=t.getStructureByKey(e.VizDefConstants.K_CHART);let n=i.getStringByKey(e.VizDefConstants.K_TYPE);if(e.XString.isEqual(n,e.VizDefConstants.V_CHART_TYPE_BAR)||e.XString.isEqual(n,e.VizDefConstants.V_STACKED_BAR)){return e.SemanticBindingType.BAR}if(e.XString.isEqual(n,e.VizDefConstants.V_CHART_TYPE_COLUMN)||e.XString.isEqual(n,e.VizDefConstants.V_STACKED_COLUMN)){return e.SemanticBindingType.COLUMN}if(e.XString.isEqual(n,e.VizDefConstants.V_TYPE_BARCOLUMN)){let t=i.getStructureByKey(e.VizDefConstants.K_PROPERTIES);let n=t.getStructureByKey(e.VizDefConstants.K_GENERAL);if(e.notNull(n)&&n.getBooleanByKeyExt(e.VizDefConstants.K_INVERTED,false)){return e.SemanticBindingType.BAR}return e.SemanticBindingType.COLUMN}if(e.XString.isEqual(n,e.VizDefConstants.K_LINE)){return e.SemanticBindingType.LINE}return null},staticSetup:function(){if(e.isNull(e.RsGoogleChartConfig.s_charts)){e.RsGoogleChartConfig.s_charts=e.XSimpleMap.create();e.RsGoogleChartConfig.s_charts.put(e.SemanticBindingType.BAR,e.GoogleChartBar.create());e.RsGoogleChartConfig.s_charts.put(e.SemanticBindingType.COLUMN,e.GoogleChartColumn.create());e.RsGoogleChartConfig.s_charts.put(e.SemanticBindingType.LINE,e.GoogleChartLine.create())}}};e.RsGoogleChartRenderer=function(){};e.RsGoogleChartRenderer.prototype=new e.XObject;e.RsGoogleChartRenderer.prototype._ff_c="RsGoogleChartRenderer";e.RsGoogleChartRenderer.create=function(){return new e.RsGoogleChartRenderer};e.RsGoogleChartRenderer.prototype.addHeader=function(t,i,n){let r=t.addNewStructure();r.putString(e.GoogleConstants.K_TYPE,n);r.putString(e.GoogleConstants.K_LABEL,i)};e.RsGoogleChartRenderer.prototype.addHeaderForDimensionColumns=function(t,i){t.setTupleCursorBeforeStart();t.nextTuple();for(let n=0;n<t.getTupleElementsCount();n++){t.nextTupleElement();t.nextFieldValue();let n=t.getField().getDimension();this.addHeader(i,n.getText(),e.GoogleConstants.V_TYPE_STRING)}};e.RsGoogleChartRenderer.prototype.addHeaderForMeasureColumns=function(t,i){t.setTupleCursorBeforeStart();while(t.hasNextTuple()){t.nextTuple();let n=e.XStringBuffer.create();while(t.hasNextTupleElement()){t.nextTupleElement();if(n.length()>0){n.append("/")}n.append(this.getMemberName(t))}this.addHeader(i,n.toString(),e.GoogleConstants.V_TYPE_NUMBER)}};e.RsGoogleChartRenderer.prototype.addRowCell=function(t,i){let n=t.addNewStructure();let r=i.getValueType();if(r===e.XValueType.STRING){n.putString(e.GoogleConstants.K_V,i.getStringRepresentation())}else if(r===e.XValueType.INTEGER){n.putInteger(e.GoogleConstants.K_V,i.getInteger())}else if(r===e.XValueType.DOUBLE){n.putDouble(e.GoogleConstants.K_V,i.getDouble())}else if(r===e.XValueType.LONG){n.putLong(e.GoogleConstants.K_V,i.getLong())}else if(r===e.XValueType.BOOLEAN){n.putBoolean(e.GoogleConstants.K_V,i.getBoolean())}};e.RsGoogleChartRenderer.prototype.addRows=function(t,i,n){let r=t.getTuplesCount();t.setTupleCursorBeforeStart();for(let l=0;l<r;l++){t.nextTuple();if(!this.isResultRow(t)){let r=i.addNewStructure();let o=r.putNewList(e.GoogleConstants.K_C);while(t.hasNextTupleElement()){t.nextTupleElement();this.addRowCell(o,e.XStringValue.create(this.getMemberName(t)))}for(let e=0;e<n.getDataColumns();e++){let t=n.getDataCell(e,l);this.addRowCell(o,this.getCellValue(t))}}}};e.RsGoogleChartRenderer.prototype.getCellValue=function(t){let i=t.getValueException();if(i===e.ValueException.NULL_VALUE||i===e.ValueException.UNDEFINED){return e.XStringValue.create(null)}if(i===e.ValueException.ZERO){return e.XIntegerValue.create(0)}return t.getXValue()};e.RsGoogleChartRenderer.prototype.getMemberName=function(t){let i=null;while(t.hasNextFieldValue()){let n=t.nextFieldValue();if(e.isNull(i)||e.PresentationType.isTextPresentation(n.getField().getPresentationType())){i=n.getValue().getStringRepresentation()}}return i};e.RsGoogleChartRenderer.prototype.isResultRow=function(t){if(t.hasNextTupleElement()){t.nextTupleElement();if(t.getDimensionMemberType()===e.MemberType.RESULT){return true}t.setTupleElementCursorBeforeStart()}return false};e.RsGoogleChartRenderer.prototype.render=function(t,i){let n=e.PrFactory.createStructure();let r=i.getQueryModel().getVizManager().getVizDef();if(e.notNull(r)&&r.containsKey(e.VizDefConstants.K_CHART)&&i.getAvailableDataCellCount()>0){let t=i.getCursorRowsAxis();let l=i.getCursorColumnsAxis();let o=n.putNewStructure(e.GoogleConstants.K_DATA);let s=o.putNewList(e.GoogleConstants.K_COLS);let a=o.putNewList(e.GoogleConstants.K_ROWS);this.addHeaderForDimensionColumns(t,s);this.addHeaderForMeasureColumns(l,s);this.addRows(t,a,i);n.put(e.GoogleConstants.K_OPTIONS,e.RsGoogleChartConfig.createOptions(r));n.put(e.GoogleConstants.K_METADATA,e.RsGoogleChartConfig.createMetadata(r,s))}return n};e.RsGoogleChartRenderer.prototype.renderVisualizationWithResultSet=function(e,t){return this.render(e.getSemanticBindingType(),t)};e.GoogleChart=function(){};e.GoogleChart.prototype=new e.XObject;e.GoogleChart.prototype._ff_c="GoogleChart";e.GoogleChart.ANIMATION_DURATION=750;e.GoogleChart.HEIGHT=500;e.GoogleChart.HEIGHT_CHART_AREA=380;e.GoogleChart.LEGEND_MAX_LINES=3;e.GoogleChart.WIDTH=600;e.GoogleChart.prototype.createMetadata=function(t){let i=e.PrFactory.createStructure();i.putString(e.GoogleConstants.K_CHART_TYPE,this.getChartName());let n=i.putNewList(e.GoogleConstants.K_COLS);for(let i=0;i<t.size();i++){n.addInteger(i);let r=t.getStructureAt(i).getStringByKey(e.GoogleConstants.K_TYPE);if(e.XString.isEqual(r,e.GoogleConstants.K_NUMBER)){let t=n.addNewStructure();t.putString(e.GoogleConstants.K_ROLE,e.GoogleConstants.V_ROLE_ANNOTATION);t.putString(e.GoogleConstants.K_TYPE,e.GoogleConstants.V_TYPE_STRING);t.putString(e.GoogleConstants.K_CALC,e.GoogleConstants.V_CALC_STRINGIFY);t.putInteger(e.GoogleConstants.K_SOURCE_COLUMN,i)}}return i};e.GoogleChart.prototype.createOptions=function(t){let i=e.PrFactory.createStructure();let n=t.getStructureByKey(e.VizDefConstants.K_CHART);let r=n.getStructureByKey(e.VizDefConstants.K_PROPERTIES);i.putString(e.GoogleConstants.K_TITLE,n.getStringByKeyExt(e.VizDefConstants.K_TITLE,""));i.putNewStructure(e.GoogleConstants.K_SERIES);let l=r.getStructureByKey(e.VizDefConstants.K_LEGEND);let o=l.getStructureByKey(e.VizDefConstants.K_LABEL);let s=o.getStructureByKey(e.VizDefConstants.K_STYLE);let a=r.getStructureByKey(e.VizDefConstants.K_LEGEND_GROUP);let u=a.getStructureByKey(e.VizDefConstants.K_LAYOUT);let p=u.getStringByKeyExt(e.VizDefConstants.K_POSITION,e.GoogleConstants.V_POSITION_NONE);let c=i.putNewStructure(e.GoogleConstants.K_LEGEND);this.setTextStyle(c,s);c.putString(e.GoogleConstants.K_POSITION,p);c.putString(e.GoogleConstants.K_ALIGNMENT,e.GoogleConstants.V_CENTER);c.putInteger(e.GoogleConstants.K_MAX_LINES,e.GoogleChart.LEGEND_MAX_LINES);i.putInteger(e.GoogleConstants.K_WIDTH,e.GoogleChart.WIDTH);i.putInteger(e.GoogleConstants.K_HEIGHT,e.GoogleChart.HEIGHT);let g=i.putNewStructure(e.GoogleConstants.K_CHART_AREA);g.putInteger(e.GoogleConstants.K_HEIGHT,e.GoogleChart.HEIGHT_CHART_AREA);let m=i.putNewStructure(e.GoogleConstants.K_ANIMATION);m.putBoolean(e.GoogleConstants.K_STARTUP,true);m.putInteger(e.GoogleConstants.K_DURATION,e.GoogleChart.ANIMATION_DURATION);m.putString(e.GoogleConstants.K_EASING,e.GoogleConstants.V_EASING_LINEAR);let f=r.getStructureByKey(e.VizDefConstants.K_PLOT_AREA);let C=f.getStructureByKey(e.VizDefConstants.K_STACK_COLUMN_LABEL);let d=C.getStructureByKey(e.VizDefConstants.K_STYLE);let y=i.putNewStructure(e.GoogleConstants.K_ROLE_ANNOTATIONS);y.putBoolean(e.GoogleConstants.K_HIGH_CONTRAST,true);this.setTextStyle(y,d);let h=y.putNewStructure(e.GoogleConstants.K_STEM);h.putInteger(e.GoogleConstants.K_LENGTH,2);let _=i.putNewStructure(e.GoogleConstants.K_TOOLTIP);this.setTextStyle(_,d);this.addChartSpecificOptions(i,t);return i};e.GoogleChart.prototype.getAxisReferenceLines=function(t,i){let n=t.getStructureByKey(e.VizDefConstants.K_ANALYTIC_OBJECTS);let r=n.getListByKey(e.VizDefConstants.K_REFERENCELINES);if(e.notNull(r)){for(let t=0;t<r.size();t++){let n=r.getStructureAt(t);if(e.XString.isEqual(n.getStringByKey(e.VizDefConstants.K_FEED),i)){let t=n.getListByKey(e.VizDefConstants.K_MARKERS);if(!e.PrUtils.isListEmpty(t)){return t}}}}return null};e.GoogleChart.prototype.getOppositeAxis=function(t,i){if(e.XString.isEqual(t,e.VizDefConstants.K_CATEGORY_AXIS)){return i.getStructureByKey(e.VizDefConstants.K_VALUE_AXIS)}return i.getStructureByKey(e.VizDefConstants.K_CATEGORY_AXIS)};e.GoogleChart.prototype.isTicksVisible=function(t){let i=t.getStructureByKey(e.VizDefConstants.K_AXIS_TICK);return e.notNull(i)&&i.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,false)};e.GoogleChart.prototype.setAxisStyle=function(t,i,n,r){let l=i.getStructureByKey(e.VizDefConstants.K_CHART);let o=l.getStructureByKey(e.VizDefConstants.K_PROPERTIES);let s=o.getStructureByKey(n);let a=s.getStructureByKey(e.VizDefConstants.K_LABEL);let u=this.getOppositeAxis(n,o);this.setTextStyle(t,a.getStructureByKey(e.VizDefConstants.K_STYLE));if(!r){t.putString(e.GoogleConstants.K_TEXT_POSITION,e.GoogleConstants.V_POSITION_NONE)}let p=u.getStructureByKey(e.VizDefConstants.K_AXIS_LINE);if(e.notNull(p)&&p.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,true)){t.putInteger(e.GoogleConstants.K_BASELINE,0)}let c=this.getAxisReferenceLines(i,n);if(e.notNull(c)){let i=t.putNewList(e.GoogleConstants.K_TICKS);for(let t=0;t<c.size();t++){i.addString(c.getStructureAt(t).getStringByKey(e.VizDefConstants.K_VALUE))}}else if(!this.isTicksVisible(u)){t.putNewList(e.GoogleConstants.K_TICKS)}};e.GoogleChart.prototype.setTextStyle=function(t,i){let n=t.putNewStructure(e.GoogleConstants.K_TEXT_STYLE);n.putString(e.GoogleConstants.K_FONT_NAME,i.getStringByKeyExt(e.VizDefConstants.K_FONT_FAMILY,""));n.putString(e.GoogleConstants.K_COLOR,i.getStringByKeyExt(e.VizDefConstants.K_COLOR,"rgb(0,0,0)"));let r=i.getStringByKey(e.VizDefConstants.K_FONT_SIZE);if(e.notNull(r)){n.putString(e.GoogleConstants.K_FONT_SIZE,e.XString.replace(r,"px",""))}let l=i.getStringByKey(e.VizDefConstants.K_FONT_WEIGHT);if(e.XString.isEqual(l,e.VizDefConstants.V_FONT_WEIGHT_BOLD)){n.putBoolean(e.GoogleConstants.K_BOLD,true)}};e.RsHiChartRenderHelper=function(){};e.RsHiChartRenderHelper.prototype=new e.XObject;e.RsHiChartRenderHelper.prototype._ff_c="RsHiChartRenderHelper";e.RsHiChartRenderHelper.checkChartTypePolar=function(t){return t===e.ChartType.RADAR||t===e.ChartType.PIE||t===e.ChartType.VARIABLE_PIE||t===e.ChartType.DOUGHNUT};e.RsHiChartRenderHelper.create=function(t,i){let n=null;let r=null;if(e.notNull(i)){let l=null;let o=i.getQueryModel().getVizManager().getVizDef();let s=i.getQueryModel().getVizManager().getGlobalDef();let a=e.XString.toLowerCase(t.getName());let u=null;let p=false;let c=false;let g="0%";let m=null;if(e.XString.isEqual(a,e.VizDefConstants.K_COMB_BCL)){a=e.VizDefConstants.V_CHART_TYPE_COLUMN;u=e.VizDefConstants.K_LINE}else if(e.XString.isEqual(a,e.VizDefConstants.K_RADAR)){a=e.VizDefConstants.K_LINE;p=true}let f=false;if(e.notNull(o)){let t=o.getStructureByKey(e.VizDefConstants.K_CHART);r=o.getStructureByKey(e.VizDefConstants.K_USER_PREFERENCES);if(e.notNull(t)){l=t.getStringByKey(e.VizDefConstants.K_TYPE);if(e.XString.isEqual(l,e.VizDefConstants.V_CHART_TYPE_BAR)||e.XString.isEqual(l,e.VizDefConstants.V_STACKED_BAR)){f=true}}let i;let n=t.getStructureByKey(e.VizDefConstants.K_PROPERTIES);if(e.notNull(n)){i=n.getStructureByKey(e.VizDefConstants.K_GENERAL);if(e.notNull(i)){if(i.containsKey(e.VizDefConstants.K_INVERTED)){f=i.getBooleanByKey(e.VizDefConstants.K_INVERTED)}if(i.containsKey(e.VizDefConstants.K_ORIENTATION)){f=e.XString.isEqual(i.getStringByKey(e.VizDefConstants.K_ORIENTATION),e.VizDefConstants.V_HORIZONTAL)}m=i.getStringByKey(e.VizDefConstants.K_FULL_STACKING)}}if(e.notNull(r)){i=r.getStructureByKey(e.VizDefConstants.K_GENERAL);if(e.notNull(i)){if(i.containsKey(e.VizDefConstants.K_INVERTED)){f=i.getBooleanByKey(e.VizDefConstants.K_INVERTED)}if(i.containsKey(e.VizDefConstants.K_ORIENTATION)){f=e.XString.isEqual(i.getStringByKey(e.VizDefConstants.K_ORIENTATION),e.VizDefConstants.V_HORIZONTAL)}if(i.containsKey(e.VizDefConstants.K_FULL_STACKING)){m=i.getStringByKey(e.VizDefConstants.K_FULL_STACKING)}}}if(e.XString.isEqual(l,e.VizDefConstants.K_MARIMEKKO)){a=e.VizDefConstants.K_VARIWIDE;m=e.VizDefConstants.V_NORMAL;f=false}else if(e.XString.isEqual(l,e.VizDefConstants.K_BAR_COLUMN)){m=null;if(!f){a=e.VizDefConstants.V_CHART_TYPE_COLUMN}else{a=e.VizDefConstants.V_CHART_TYPE_BAR}}else if(e.XString.isEqual(l,e.VizDefConstants.V_TYPE_CHART_DONUT)){m=null;f=false;a=e.VizDefConstants.K_PIE;g="50%"}else if(e.XString.isEqual(l,e.VizDefConstants.K_SCATTER_PLOT)){m=null;f=false;a=e.VizDefConstants.K_SCATTER}else if(e.XString.isEqual(l,e.VizDefConstants.K_RADAR)){m=null;f=false;a=e.VizDefConstants.K_LINE;p=true}else if(e.XString.isEqual(l,e.VizDefConstants.K_METRIC)){m=null;f=false;a=e.VizDefConstants.K_SOLID_GAUGE}else if(e.XString.isEqual(l,e.VizDefConstants.K_AREA)){f=false;m=e.VizDefConstants.V_NORMAL;a=e.VizDefConstants.K_AREA}else if(e.XString.isEqual(l,e.VizDefConstants.K_STACKED_BAR)||e.XString.isEqual(l,e.VizDefConstants.K_STACKED_COLUMN)){if(e.isNull(m)){m=e.VizDefConstants.V_NORMAL}if(e.XString.isEqual(l,e.VizDefConstants.K_STACKED_COLUMN)&&!f){a=e.VizDefConstants.V_CHART_TYPE_COLUMN}else if(e.XString.isEqual(l,e.VizDefConstants.K_STACKED_BAR)&&f){a=e.VizDefConstants.V_CHART_TYPE_BAR}else{a=e.VizDefConstants.V_CHART_TYPE_COLUMN}}else if(e.XString.isEqual(l,e.VizDefConstants.K_COMB_STACKED_BCL)){a=e.VizDefConstants.V_CHART_TYPE_COLUMN;u=e.VizDefConstants.K_LINE;m=e.VizDefConstants.V_NORMAL}else if(e.XString.isEqual(l,e.VizDefConstants.K_COMB_BCL)){a=e.VizDefConstants.V_CHART_TYPE_COLUMN;u=e.VizDefConstants.K_LINE;m=null}else if(e.XString.isEqual(l,e.VizDefConstants.V_CHART_TYPE_BOXPLOT)){a=e.VizDefConstants.V_CHART_TYPE_BOXPLOT;m=null;f=false}else if(e.XString.isEqual(l,e.VizDefConstants.K_TIME_SERIES)){c=true;a=e.VizDefConstants.K_LINE;m=null;f=false}else if(e.XString.isEqual(l,e.VizDefConstants.K_CLUSTER_BUBBLE)){a=e.VizDefConstants.K_PACKED_BUBBLE;m=null;f=false}else{a=e.XString.toLowerCase(o.getStructureByKey(e.VizDefConstants.K_CHART).getStringByKey(e.VizDefConstants.K_TYPE));m=null;f=false}}let C=!e.XString.isEqual(null,u);let d=e.XString.isEqual(a,e.VizDefConstants.V_CHART_TYPE_COLUMN);let y=e.XString.isEqual(a,e.VizDefConstants.V_CHART_TYPE_BELLCURVE);let h=e.XString.isEqual(a,e.VizDefConstants.K_LINE);let _=e.XString.isEqual(a,e.VizDefConstants.V_CHART_TYPE_BAR);let T=e.XString.isEqual(a,e.VizDefConstants.K_SPLINE);let S=e.XString.isEqual(a,e.VizDefConstants.K_AREA);let R=e.XString.isEqual(a,e.VizDefConstants.K_PIE);let D=e.XString.isEqual(a,e.VizDefConstants.K_WORDCLOUD);let A=e.XString.isEqual(a,e.VizDefConstants.K_VARIPIE);let E=e.XString.isEqual(a,e.VizDefConstants.K_VARIWIDE);let V=e.XString.isEqual(a,e.VizDefConstants.K_SCATTER);let N=e.XString.isEqual(a,e.VizDefConstants.V_CHART_TYPE_BUBBLE);let x=e.XString.isEqual(a,e.VizDefConstants.K_PACKED_BUBBLE);let P=e.XString.isEqual(a,e.VizDefConstants.K_HEATMAP);let L=e.XString.isEqual(a,e.VizDefConstants.K_TREEMAP);let I=e.XString.isEqual(a,e.VizDefConstants.V_CHART_TYPE_BOXPLOT);let b=e.XString.isEqual(a,e.VizDefConstants.K_SOLID_GAUGE);if(h||_||T||y||d||S||C){if(c){n=new e.RsHiChartTimeSeriesHelper}else{n=new e.RsHiChartCategorialSeriesHelper}}else if(D){n=new e.RsHiChartWordcloudHelper}else if(R||A||D){n=new e.RsHiChartPieHelper}else if(I){n=new e.RsHiChartBoxplotHelper}else if(N||V){n=new e.RsHiChartCorrelationHelper}else if(P){n=new e.RsHiChartHeatmapHelper}else if(L){n=new e.RsHiChartTreemapHelper}else if(b){n=new e.RsHiChartMetricHelper}else if(E){n=new e.RsHiChartMarimekkoHelper}else if(x){n=new e.RsHiChartClusterBubbleHelper}else{n=new e.RsHiChartUnsupportedHelper}n.setupBase(o,s,null,i,a,u,m,g,p,C,f);if(e.notNull(r)){e.RsHiChartVizUserPrefrence.userPrefrence(n.getChartData(),r,a)}}return n};e.RsHiChartRenderHelper.createWithVisualizationDefinition=function(t,i){let n=null;let r=t.getChartSetting();let l=e.ChartType.BAR;let o=e.ChartOrientation.HORIZONTAL;let s=e.ChartType.NONE;let a=e.ChartStackingType.NONE;if(e.notNull(r)){l=r.getChartType();if(l.isTypeOf(e.ChartType.BAR_COLUMN)&&r.getChartType2()!==null){s=r.getChartType2()}if(r.getChartOrientation()!==null){o=r.getChartOrientation()}a=r.getChartStackingType()}if(e.notNull(i)){let u=null;let p=null;let c;let g="0%";let m=null;if(l===e.ChartType.VARIABLE_PIE||l===e.ChartType.VARI_WIDE){m=e.VizDefConstants.V_NORMAL}if(a===e.ChartStackingType.NORMAL){m=e.VizDefConstants.V_NORMAL}else if(a===e.ChartStackingType.PERCENT){m=e.VizDefConstants.V_PERCENT}if(!l.isTypeOf(e.ChartType.BAR_COLUMN)&&l!==e.ChartType.LINE&&l!==e.ChartType.AREA&&l!==e.ChartType.VARI_WIDE&&l!==e.ChartType.VARIABLE_PIE){m=null}u=e.RsHiChartRenderHelper.unmapChartType(l,o);if((l===e.ChartType.LINE||l===e.ChartType.AREA||l===e.ChartType.POINT||l.isTypeOf(e.ChartType.BAR_COLUMN))&&(s===e.ChartType.LINE||s===e.ChartType.AREA||s===e.ChartType.POINT||s.isTypeOf(e.ChartType.BAR_COLUMN))){p=e.RsHiChartRenderHelper.unmapChartType(s,o)}c=e.RsHiChartRenderHelper.checkChartTypePolar(l)||r.isPolar();let f=o===e.ChartOrientation.HORIZONTAL;let C=s!==e.ChartType.NONE;let d=l.isTypeOf(e.ChartType.COLUMN)||l===e.ChartType.BAR_COLUMN&&o===e.ChartOrientation.VERTICAL;let y=l===e.ChartType.BELL_CURVE;let h=l===e.ChartType.LINE||l===e.ChartType.TIME_SERIES;let _=l===e.ChartType.TIME_SERIES||r.isTimeSeries();let T=l.isTypeOf(e.ChartType.BAR)||l===e.ChartType.BAR_COLUMN&&o===e.ChartOrientation.HORIZONTAL;let S=l===e.ChartType.SPLINE;let R=l===e.ChartType.AREA;let D=l===e.ChartType.PIE||l===e.ChartType.DOUGHNUT;let A=l===e.ChartType.WORD_CLOUD;let E=l===e.ChartType.VARIABLE_PIE;let V=l===e.ChartType.VARI_WIDE;let N=l===e.ChartType.SCATTER_PLOT;let x=l===e.ChartType.BUBBLE;let P=l===e.ChartType.PACKED_BUBBLE;let L=l===e.ChartType.HEAT_MAP;let I=l===e.ChartType.TREE_MAP;let b=l===e.ChartType.BOX_PLOT;let z=l===e.ChartType.METRIC;if(h||T||S||y||d||R||C){if(_){n=new e.RsHiChartTimeSeriesHelper}else{n=new e.RsHiChartCategorialSeriesHelper}}else if(A){n=new e.RsHiChartWordcloudHelper}else if(D||E||A){n=new e.RsHiChartPieHelper;if(l===e.ChartType.DOUGHNUT){g="50%"}}else if(b){n=new e.RsHiChartBoxplotHelper}else if(x||N){n=new e.RsHiChartCorrelationHelper}else if(L){n=new e.RsHiChartHeatmapHelper}else if(I){n=new e.RsHiChartTreemapHelper}else if(z){n=new e.RsHiChartMetricHelper}else if(V){n=new e.RsHiChartMarimekkoHelper}else if(P){n=new e.RsHiChartClusterBubbleHelper}else{n=new e.RsHiChartUnsupportedHelper}n.setupBase(null,null,t,i,u,p,m,g,c,C,f)}return n};e.RsHiChartRenderHelper.unmapChartType=function(t,i){let n=null;if(t.isTypeOf(e.ChartType.BAR)||t===e.ChartType.BAR_COLUMN&&i===e.ChartOrientation.HORIZONTAL){n=e.VizDefConstants.V_CHART_TYPE_BAR}else if(t.isTypeOf(e.ChartType.COLUMN)||t===e.ChartType.BAR_COLUMN&&i===e.ChartOrientation.VERTICAL){n=e.VizDefConstants.V_CHART_TYPE_COLUMN}else if(t===e.ChartType.VARI_WIDE){n=e.VizDefConstants.K_VARIWIDE}else if(t===e.ChartType.DOUGHNUT||t===e.ChartType.PIE){n=e.VizDefConstants.K_PIE}else if(t===e.ChartType.SCATTER_PLOT){n=e.VizDefConstants.K_SCATTER}else if(t===e.ChartType.BUBBLE){n=e.VizDefConstants.V_CHART_TYPE_BUBBLE}else if(t===e.ChartType.RADAR){n=e.VizDefConstants.K_LINE}else if(t===e.ChartType.METRIC){n=e.VizDefConstants.K_SOLID_GAUGE}else if(t===e.ChartType.AREA){n=e.VizDefConstants.K_AREA}else if(t===e.ChartType.BOX_PLOT){n=e.VizDefConstants.V_CHART_TYPE_BOXPLOT}else if(t===e.ChartType.TIME_SERIES){n=e.VizDefConstants.K_LINE}else if(t===e.ChartType.LINE){n=e.VizDefConstants.K_LINE}else if(t===e.ChartType.PACKED_BUBBLE){n=e.VizDefConstants.K_PACKED_BUBBLE}else if(t===e.ChartType.WORD_CLOUD){n=e.VizDefConstants.K_WORDCLOUD}else if(t===e.ChartType.BELL_CURVE){n=e.VizDefConstants.V_CHART_TYPE_BELLCURVE}else if(t===e.ChartType.SPLINE){n=e.VizDefConstants.K_SPLINE}else if(t===e.ChartType.VARIABLE_PIE){n=e.VizDefConstants.K_VARIPIE}else if(t===e.ChartType.HEAT_MAP){n=e.VizDefConstants.K_HEATMAP}else if(t===e.ChartType.TREE_MAP){n=e.VizDefConstants.K_TREEMAP}else if(t===e.ChartType.BOX_PLOT){n=e.VizDefConstants.V_CHART_TYPE_BOXPLOT}return n};e.RsHiChartRenderHelper.prototype.m_chartType=null;e.RsHiChartRenderHelper.prototype.m_colorIndex=0;e.RsHiChartRenderHelper.prototype.m_colors=null;e.RsHiChartRenderHelper.prototype.m_globalDef=null;e.RsHiChartRenderHelper.prototype.m_innerRadius=null;e.RsHiChartRenderHelper.prototype.m_inverted=false;e.RsHiChartRenderHelper.prototype.m_localization=null;e.RsHiChartRenderHelper.prototype.m_polar=false;e.RsHiChartRenderHelper.prototype.m_secondChart=null;e.RsHiChartRenderHelper.prototype.m_showLegend=false;e.RsHiChartRenderHelper.prototype.m_stackingType=null;e.RsHiChartRenderHelper.prototype.m_theChartData=null;e.RsHiChartRenderHelper.prototype.m_vizDef=null;e.RsHiChartRenderHelper.prototype.addColorAndPattern=function(t,i,n,r,l){if(!l){this.m_colorIndex++}let o=t;if(e.XStringUtils.isNullOrEmpty(o)&&this.m_colorIndex<this.m_colors.size()){o=this.m_colors.get(this.m_colorIndex)}if(!e.XString.isEqual(r,e.VizDefConstants.K_LINE)&&e.XStringUtils.isNotNullAndNotEmpty(i)){n.putStringNotNullAndNotEmpty(e.VizDefConstants.K_BORDER_COLOR,o);if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_NON_FILL)){if(l&&!e.XString.isEqual(r,e.VizDefConstants.K_AREA)){n.putString(e.VizDefConstants.K_COLOR,"#ffffff")}else{n.putStringNotNullAndNotEmpty(e.VizDefConstants.K_COLOR,o)}}else{let t=0;let r="";if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING1)){t=e.VizDefConstants.V_PATTERN_SIZE_HATCHING1;r=e.VizDefConstants.V_PATTERN_PATH_HATCHING1}else if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING2)){t=e.VizDefConstants.V_PATTERN_SIZE_HATCHING2;r=e.VizDefConstants.V_PATTERN_PATH_HATCHING2}else if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING3)){t=e.VizDefConstants.V_PATTERN_SIZE_HATCHING3;r=e.VizDefConstants.V_PATTERN_PATH_HATCHING3}else if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING4)){t=e.VizDefConstants.V_PATTERN_SIZE_HATCHING4;r=e.VizDefConstants.V_PATTERN_PATH_HATCHING4}else if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING5)){t=e.VizDefConstants.V_PATTERN_SIZE_HATCHING5;r=e.VizDefConstants.V_PATTERN_PATH_HATCHING5}else if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING6)){t=e.VizDefConstants.V_PATTERN_SIZE_HATCHING6;r=e.VizDefConstants.V_PATTERN_PATH_HATCHING6}else if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING7)){t=e.VizDefConstants.V_PATTERN_SIZE_HATCHING7;r=e.VizDefConstants.V_PATTERN_PATH_HATCHING7}else if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING8)){t=e.VizDefConstants.V_PATTERN_SIZE_HATCHING8;r=e.VizDefConstants.V_PATTERN_PATH_HATCHING8}if(t>0&&e.XStringUtils.isNotNullAndNotEmpty(r)){let i=n.putNewStructure(e.VizDefConstants.K_COLOR).putNewStructure(e.VizDefConstants.K_PATTERN);i.putStringNotNullAndNotEmpty(e.VizDefConstants.K_COLOR,o);i.putInteger(e.VizDefConstants.K_WIDTH,t);i.putInteger(e.VizDefConstants.K_HEIGHT,t);i.putString(e.VizDefConstants.K_PATH,r)}}}else{n.putStringNotNullAndNotEmpty(e.VizDefConstants.K_COLOR,o)}};e.RsHiChartRenderHelper.prototype.addColorList=function(){let t=this.m_theChartData.putNewList(e.VizDefConstants.K_COLORS);for(let e=0;e<this.m_colors.size();e++){t.addString(this.m_colors.get(e))}};e.RsHiChartRenderHelper.prototype.getChartData=function(){return this.m_theChartData};e.RsHiChartRenderHelper.prototype.getChartType=function(){return this.m_chartType};e.RsHiChartRenderHelper.prototype.getColorAt=function(e){if(e>0&&this.m_colors.size()>e){return this.m_colors.get(e)}return null};e.RsHiChartRenderHelper.prototype.getCurrentColor=function(){return this.getColorAt(this.m_colorIndex)};e.RsHiChartRenderHelper.prototype.getGlobalDef=function(){return this.m_globalDef};e.RsHiChartRenderHelper.prototype.getInnerRadius=function(){return this.m_innerRadius};e.RsHiChartRenderHelper.prototype.getLocalizationProvider=function(){return this.m_localization};e.RsHiChartRenderHelper.prototype.getSecondChart=function(){return this.m_secondChart};e.RsHiChartRenderHelper.prototype.getStackingType=function(){return this.m_stackingType};e.RsHiChartRenderHelper.prototype.getVizDef=function(){return this.m_vizDef};e.RsHiChartRenderHelper.prototype.initializeColorList=function(){this.m_colors=e.XList.create();let t=e.XList.create();if(e.notNull(this.m_vizDef)){let i=this.m_vizDef.getStructureByKey(e.VizDefConstants.K_COLOR_SCHEME);let n=e.XHashSetOfString.create();let r=this.m_globalDef.getStructureByKey(e.VizDefConstants.K_COLOR_SYNC);let l=e.XStringBuffer.create();let o=this.m_vizDef.getStructureByKey(e.VizDefConstants.K_CHART).getListByKey(e.VizDefConstants.K_BINDINGS);for(let t=0;t<o.size();++t){let i=o.getStructureAt(t);if(e.XString.isEqual(i.getStringByKey(e.VizDefConstants.K_FEED),e.VizDefConstants.K_COLOR)){let t=i.getListByKey(e.VizDefConstants.K_SOURCE);if(t.size()>0){for(let i=0;i<t.size();++i){if(t.getStructureAt(i).hasStringByKey(e.VizDefConstants.K_ID)){if(l.length()!==0){l.append("/")}let n=t.getStructureAt(i);if(n.containsKey(e.VizDefConstants.K_DIMENSION)){l.append(n.getStringByKey(e.VizDefConstants.K_DIMENSION))}else{l.append(n.getStringByKey(e.VizDefConstants.K_ID))}}}}}}if(!this.m_vizDef.getStructureByKey(e.VizDefConstants.K_CHART).getBooleanByKeyExt(e.VizDefConstants.K_IS_EXCLUDE_COLOR_SYNC,false)){if(e.XStringUtils.isNotNullAndNotEmpty(l.toString())&&e.XCollectionUtils.hasElements(r)){let i=r.getStructureByKey(l.toString());if(e.notNull(i)){let n=i.getListByKey(e.VizDefConstants.K_COLORS);for(let e=0;e<n.size();++e){t.add(n.getStringAt(e))}}}}if(e.XCollectionUtils.hasElements(i)){let n=i.getListByKey(e.VizDefConstants.K_PALETTE_COLORS);if(e.notNull(n)){for(let e=0;e<n.size();e++){t.add(n.getStringAt(e))}}}if(t.size()<5&&e.XCollectionUtils.hasElements(r)){let i=r.getKeysAsReadOnlyListSorted();for(let n=0;n<i.size();n++){let o=i.get(n);if(!e.XString.isEqual(o,l.toString())){let i=r.getStructureByKey(o);if(e.notNull(i)){let n=i.getListByKey(e.VizDefConstants.K_COLORS);for(let e=0;e<n.size();++e){t.add(n.getStringAt(e))}}}}}if(t.size()<5){t.add(e.VizDefConstants.V_COLOR_1);t.add(e.VizDefConstants.V_COLOR_2);t.add(e.VizDefConstants.V_COLOR_3);t.add(e.VizDefConstants.V_COLOR_4);t.add(e.VizDefConstants.V_COLOR_5);t.add(e.VizDefConstants.V_COLOR_6);t.add(e.VizDefConstants.V_COLOR_7);t.add(e.VizDefConstants.V_COLOR_8);t.add(e.VizDefConstants.V_COLOR_9);t.add(e.VizDefConstants.V_COLOR_10);t.add(e.VizDefConstants.V_COLOR_11);t.add(e.VizDefConstants.V_COLOR_12);t.add(e.VizDefConstants.V_COLOR_13);t.add(e.VizDefConstants.V_COLOR_14);t.add(e.VizDefConstants.V_COLOR_15);t.add(e.VizDefConstants.V_COLOR_16);t.add(e.VizDefConstants.V_COLOR_17);t.add(e.VizDefConstants.V_COLOR_18)}n.addAll(t);for(let e=0;e<t.size();e++){let i=t.get(e);if(n.contains(i)){n.removeElement(i);this.m_colors.add(i)}}}else{this.m_colors.add(e.VizDefConstants.V_COLOR_1);this.m_colors.add(e.VizDefConstants.V_COLOR_2);this.m_colors.add(e.VizDefConstants.V_COLOR_3);this.m_colors.add(e.VizDefConstants.V_COLOR_4);this.m_colors.add(e.VizDefConstants.V_COLOR_5);this.m_colors.add(e.VizDefConstants.V_COLOR_6);this.m_colors.add(e.VizDefConstants.V_COLOR_7);this.m_colors.add(e.VizDefConstants.V_COLOR_8);this.m_colors.add(e.VizDefConstants.V_COLOR_9);this.m_colors.add(e.VizDefConstants.V_COLOR_10);this.m_colors.add(e.VizDefConstants.V_COLOR_11);this.m_colors.add(e.VizDefConstants.V_COLOR_12);this.m_colors.add(e.VizDefConstants.V_COLOR_13);this.m_colors.add(e.VizDefConstants.V_COLOR_14);this.m_colors.add(e.VizDefConstants.V_COLOR_15);this.m_colors.add(e.VizDefConstants.V_COLOR_16);this.m_colors.add(e.VizDefConstants.V_COLOR_17);this.m_colors.add(e.VizDefConstants.V_COLOR_18)}};e.RsHiChartRenderHelper.prototype.isInverted=function(){return this.m_inverted};e.RsHiChartRenderHelper.prototype.isPolar=function(){return this.m_polar};e.RsHiChartRenderHelper.prototype.isResponsive=function(){return true};e.RsHiChartRenderHelper.prototype.isShowLegend=function(){return this.m_showLegend};e.RsHiChartRenderHelper.prototype.isUnsupported=function(){return false};e.RsHiChartRenderHelper.prototype.reiterateResultSet=function(e,t,i){};e.RsHiChartRenderHelper.prototype.setShowLegend=function(e){this.m_showLegend=e};e.RsHiChartRenderHelper.prototype.setupBase=function(t,i,n,r,l,o,s,a,u,p,c){this.m_polar=u;this.m_chartType=l;this.m_secondChart=o;this.m_innerRadius=a;this.m_vizDef=t;this.m_globalDef=i;this.m_theChartData=e.PrFactory.createStructure();this.m_inverted=c;this.m_stackingType=s;this.m_colorIndex=-1;this.m_localization=e.XLocalizationCenter.getCenter().getLocalizationProviderByName("AuChartView");let g=e.XString.isEqual(this.m_chartType,e.VizDefConstants.V_CHART_TYPE_BAR);let m=this.m_theChartData.putNewStructure(e.VizDefConstants.K_SCROLL_BAR);m.putBoolean(e.VizDefConstants.K_ENABLED,true);let f=this.m_theChartData.putNewStructure(e.VizDefConstants.K_CHART);let C=50;let d=50;let y=50;let h=50;if(this.m_inverted&&!g){f.putBoolean(e.VizDefConstants.K_INVERTED,true)}let _=f.putNewList(e.VizDefConstants.K_SPACING);_.addInteger(C);_.addInteger(d);_.addInteger(y);_.addInteger(h);if(g){f.putInteger(e.VizDefConstants.K_MARGIN_LEFT,200)}f.putBoolean(e.VizDefConstants.K_POLAR,u);f.putString(e.VizDefConstants.K_TYPE,l);f.putBoolean(e.VizDefConstants.K_ANIMATION,false);let T=this.m_theChartData.putNewStructure(e.VizDefConstants.K_LANG);T.putString(e.VizDefConstants.K_DECIMAL_POINT,",");T.putString(e.VizDefConstants.K_THOUSANDS_SEP,".");let S="rgba(0,0,0,0)";f.putString(e.VizDefConstants.K_BACKGROUND_COLOR,S);if(e.notNull(t)){S=t.getStringByKey(e.VizDefConstants.K_BBACKGROUND_COLOR);if(e.notNull(S)){if(e.XString.size(S)>0){f.putString(e.VizDefConstants.K_BACKGROUND_COLOR,S)}}}let R=f.putNewStructure(e.VizDefConstants.K_STYLE);R.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");let D=this.m_theChartData.putNewStructure(e.VizDefConstants.K_BOOST);let A=this.m_theChartData.putNewStructure(e.VizDefConstants.K_CREDITS);A.putBoolean(e.VizDefConstants.K_ENABLED,false);D.putBoolean(e.VizDefConstants.K_USER_GPU_TRANSLATIONS,true);if(this.isUnsupported()){T.putString(e.VizDefConstants.K_NO_DATA,"Chart not supported ");this.getChartData().putBoolean("fullscreenEnabled",false);return}if(r.hasErrors()){T.putString(e.VizDefConstants.K_NO_DATA,"Olap query returned with errors ");this.getChartData().putBoolean(e.VizDefConstants.K_FULL_SCREEN_ENABLED,false);return}e.RsHiChartVizUtils.vizProcessor(t,R,this.m_theChartData,l);if(this.isResponsive()){e.RsHiChartUtils.responsiveBuilder(l,this.m_theChartData)}let E=null;let V=null;if(e.notNull(t)){let n=e.XHashMapByString.create();E=e.RsVizAxisExtractor.extractCustomFormatting(t,i);let r=t.getStructureByKey("feedMembers");e.XCollectionUtils.forEach(r.getKeysAsReadOnlyList(),t=>{let i=e.XStream.of(r.getListByKey(t)).filterNullValues().collect(e.XStreamCollector.toListOfString(e=>e.asString().getString()));n.put(t,i)});V=n}if(e.isNull(V)&&e.notNull(n)){V=e.RsVizAxisExtractor.getFeedMembersFromVisualizationDefinition(r,n)}if(e.isNull(V)){V=e.RsVizAxisExtractor.guessFeedMembers(r,l,p)}let N=e.RsVizAxisExtractor.getTuplesFromColumnAxis(r,V,E);let x=e.RsVizAxisExtractor.getTuplesFromRowAxis(r,V,E);this.initializeColorList();this.prepareRendering();this.readResultSetData(N,x,r);this.reiterateResultSet(N,x,r);this.addColorList();e.RsHiChartVizUtils.addColorGradient(i,t,this.m_theChartData);e.RsHiChartVizUtils.checkShowLegend(t,this.m_theChartData,l,this.isShowLegend());this.finishRendering()};e.RsMicroChartRenderer=function(){};e.RsMicroChartRenderer.prototype=new e.XObject;e.RsMicroChartRenderer.prototype._ff_c="RsMicroChartRenderer";e.RsMicroChartRenderer.create=function(){return new e.RsMicroChartRenderer};e.RsMicroChartRenderer.prototype.m_seriesFilColor=null;e.RsMicroChartRenderer.prototype.m_valueAxis=null;e.RsMicroChartRenderer.prototype.extractSeriesColorsFromVizDef=function(t){this.m_seriesFilColor=e.PrStructure.create();if(e.notNull(t)){let i=t.getStructureByKey("userPreferences");if(e.notNull(i)){let t=i.getStructureByKey("series");if(e.notNull(t)){let i=t.getStructureByKey("fillColor");if(e.notNull(i)){let t=i.getKeysAsIterator();while(t.hasNext()){let n=t.next();let r=i.getListByKey(n);for(let t=0;t<r.size();t++){let i=r.getListAt(t);if(i.size()>0){let t=i.getListAt(0);if(t.size()>0){let i=t.getStructureAt(0);if(e.notNull(i)){let t=i.getStructureByKey("entityId");if(e.notNull(t)){let i=t.getStringByKeyExt("id",null);if(e.notNull(i)){let t=e.XString.replace(n,'"',"");this.m_seriesFilColor.putString(i,t)}}}}}}}}}}}};e.RsMicroChartRenderer.prototype.extractValueAxisFromVizDef=function(t){if(e.notNull(t)){let i=t.getStructureByKey("feedMembers");if(e.notNull(i)){this.m_valueAxis=i.getListByKey("valueAxis")}}};e.RsMicroChartRenderer.prototype.generateColumns=function(t,i){let n=t.getCursorColumnsAxis();n.setTupleCursorBeforeStart();let r=0;while(n.hasNextTuple()){let l=null;let o=0;let s=null;let a=null;let u="";n.nextTuple();while(n.hasNextTupleElement()){n.nextTupleElement();while(n.hasNextFieldValue()){n.nextFieldValue();let t=n.getField().getPresentationType();let i=n.getFormattedValue();u=e.XStringUtils.concatenate5(t.getName(),":",i," - ",u);if(t.isTypeOf(e.PresentationType.SHORT_TEXT)||t.isTypeOf(e.PresentationType.LONG_TEXT)||t.isTypeOf(e.PresentationType.MEDIUM_TEXT)||t.isTypeOf(e.PresentationType.HIERARCHY_TEXT)){l=i}else if(e.isNull(l)&&t.isTypeOf(e.PresentationType.DISPLAY_KEY)){l=i}if(t.isTypeOf(e.PresentationType.HIERARCHY_KEY)){a=i}}}let p=t.getDataCell(r,0);o=p.getDouble();s=p.getFormattedValue();r++;let c=this.getIndexOfMember(a);let g=this.getColorForMember(a);let m=e.PrStructure.create();if(c!==-1&&i.size()>c){i.insert(c,m)}else{i.add(m)}m.putDouble("value",o);m.putString("displayValue",s);m.putString("label",l);if(e.notNull(g)){m.putString("color",g)}m.putString("hierarchyKey",a)}};e.RsMicroChartRenderer.prototype.getColorForMember=function(t){if(e.notNull(this.m_seriesFilColor)&&this.m_seriesFilColor.size()>0){return this.m_seriesFilColor.getStringByKey(t)}return null};e.RsMicroChartRenderer.prototype.getIndexOfMember=function(t){if(e.notNull(this.m_valueAxis)){return this.m_valueAxis.getIndex(e.PrString.createWithValue(t))}return-1};e.RsMicroChartRenderer.prototype.render=function(t,i){let n=i.getQueryModel().getVizManager().getVizDef();let r=i.getQueryModel().getVizManager().getGlobalDef();let l=e.PrFactory.createStructure();if(e.notNull(n)){let t=n.getStructureByKey("chart");if(e.notNull(t)){if(e.XString.isEqual(t.getStringByKey("type"),"barcolumn")){this.renderColumnChart(i,l,n)}}l.put("vizDef",n);l.put("globalDef",r)}else{this.renderColumnChart(i,l,null)}return l};e.RsMicroChartRenderer.prototype.renderColumnChart=function(e,t,i){t.putString("chart","Column");t.putBoolean("allowColumnLabels",true);let n=t.putNewList("columns");this.extractValueAxisFromVizDef(i);this.extractSeriesColorsFromVizDef(i);this.generateColumns(e,n)};e.RsMicroChartRenderer.prototype.renderVisualizationWithResultSet=function(e,t){return this.render(e.getSemanticBindingType(),t)};e.RsVizAxis=function(){};e.RsVizAxis.prototype=new e.XObject;e.RsVizAxis.prototype._ff_c="RsVizAxis";e.RsVizAxis.create=function(){let t=new e.RsVizAxis;t.m_numberFormatingInfosByFeed=e.XHashMapByString.create();t.m_elements=e.XList.create();t.m_availableFeedTypes=e.XHashSetOfString.create();return t};e.RsVizAxis.prototype.m_availableFeedTypes=null;e.RsVizAxis.prototype.m_elements=null;e.RsVizAxis.prototype.m_numberFormatingInfosByFeed=null;e.RsVizAxis.prototype.m_numberFormattingInfo=null;e.RsVizAxis.prototype.addElement=function(t){this.m_elements.add(t);let i=t.getAvailableFeedTypes();this.m_availableFeedTypes.addAll(i);let n=t.getNumberFormattingInfo();if(e.isNull(this.m_numberFormattingInfo)||this.m_numberFormattingInfo.isUseFormattingFromDataCell()){this.m_numberFormattingInfo=n}let r=i.getIterator();while(r.hasNext()){let t=r.next();let i=this.m_numberFormatingInfosByFeed.getByKey(t);if(e.isNull(i)||i.isUseFormattingFromDataCell()){this.m_numberFormatingInfosByFeed.put(t,n)}}};e.RsVizAxis.prototype.getCategories=function(t,i,n){let r=e.XList.create();if(e.XStringUtils.isNotNullAndNotEmpty(n)){r.add(n)}let l=e.XList.create();let o=e.XList.create();for(let n=0;n<this.m_elements.size();n++){let s=this.m_elements.get(n).getCategories(r);let a=this.m_elements.get(n).getPrettyKeyText(r);if(e.XCollectionUtils.hasElements(s)){if(!t||!o.contains(a)&&(i||!this.m_elements.get(n).isTotal())){l.add(s);o.add(a)}}}return l};e.RsVizAxis.prototype.getCategoryObjects=function(t,i,n){let r=e.XList.create();if(e.XStringUtils.isNotNullAndNotEmpty(n)){r.add(n)}let l=e.XList.create();let o=e.XList.create();for(let n=0;n<this.m_elements.size();n++){let s=this.m_elements.get(n).getCategoriesObjects(r);let a=this.m_elements.get(n).getPrettyKeyText(r);if(e.XCollectionUtils.hasElements(s)){if(!t||!o.contains(a)&&(i||!this.m_elements.get(n).isTotal())){l.add(s);o.add(a)}}}return l};e.RsVizAxis.prototype.getDateList=function(){let t=0;let i=0;let n=false;for(;i<4;i++){let r=e.XList.create();for(t=0;t<this.m_elements.size();t++){let l=this.m_elements.get(t).getDate(i);if(e.notNull(l)){n=true}r.add(l)}if(n){return r}}return null};e.RsVizAxis.prototype.getDecimalPlaces=function(t){let i=this.m_numberFormatingInfosByFeed.getByKey(t);if(e.notNull(i)){return i.getMaxDecimalPlaces()}return e.notNull(this.m_numberFormattingInfo)?this.m_numberFormattingInfo.getMaxDecimalPlaces():0};e.RsVizAxis.prototype.getDimensionsForFeed=function(t){let i=e.XList.create();i.add(t);return this.getDimensionsForFeeds(i)};e.RsVizAxis.prototype.getDimensionsForFeeds=function(t){let i=e.XList.create();for(let e=0;e<this.m_elements.size();e++){let n=this.m_elements.get(e).getDimensionTextsForFeeds(t);for(let e=0;e<n.size();e++){if(!i.contains(n.get(e))){i.add(n.get(e))}}}return i};e.RsVizAxis.prototype.getExtendedPrettyNames=function(e,t){return this.getExtendedPrettyNamesForFeed(e,t,null,null)};e.RsVizAxis.prototype.getExtendedPrettyNamesForFeed=function(t,i,n,r){let l=e.XList.create();if(e.XStringUtils.isNotNullAndNotEmpty(n)){l.add(n)}return this.getExtendedPrettyNamesForFeeds(t,i,l,r)};e.RsVizAxis.prototype.getExtendedPrettyNamesForFeeds=function(t,i,n,r){let l=e.XList.create();l.addAll(n);let o;if(e.XCollectionUtils.hasElements(r)){o=r.getIterator()}else{o=this.m_availableFeedTypes.getIterator()}while(o.hasNext()){let e=o.next();if(!n.contains(e)&&this.getPrettyNamesForFeed(true,i,e).size()>1){l.add(e)}}return this.getPrettyNamesForFeeds(t,i,l)};e.RsVizAxis.prototype.getFeedDimensionTuple=function(t){for(let i=0;i<this.m_elements.size();i++){let n=this.m_elements.get(i).getDimensionNamesForFeeds(t);let r=e.XStringBuffer.create();for(let e=0;e<n.size();e++){r.append(n.get(e));r.append("/")}let l=r.toString();if(e.XStringUtils.isNotNullAndNotEmpty(l)){return e.XString.substring(l,0,e.XString.size(l)-1)}}return""};e.RsVizAxis.prototype.getFormattedDateList=function(){let t=e.XList.create();let i=0;let n=false;for(i=0;i<this.m_elements.size();i++){let r=this.m_elements.get(i).getFormattedDate();if(e.notNull(r)){n=true}t.add(r)}if(n){return t}return null};e.RsVizAxis.prototype.getFormattedNames=function(t,i){let n=e.XList.create();for(let r=0;r<this.m_elements.size();r++){let l=this.m_elements.get(r).getFormattedText(null);if(e.XStringUtils.isNullOrEmpty(l)){l=this.m_elements.get(r).getFormattedDefaultText()}if(e.XStringUtils.isNotNullAndNotEmpty(l)){if(!t||!n.contains(l)&&(i||!this.m_elements.get(r).isTotal())){n.add(l)}}}return n};e.RsVizAxis.prototype.getFormattedNamesForFeed=function(t,i,n){let r=e.XList.create();if(e.XStringUtils.isNotNullAndNotEmpty(n)){r.add(n)}return this.getFormattedNamesForFeeds(t,i,r)};e.RsVizAxis.prototype.getFormattedNamesForFeeds=function(t,i,n){let r=e.XList.create();let l=e.XList.create();for(let o=0;o<this.m_elements.size();o++){let s=this.m_elements.get(o).getFormattedText(n);let a=this.m_elements.get(o).getPrettyKeyText(n);if(e.XStringUtils.isNotNullAndNotEmpty(s)){if(!t||!l.contains(a)&&(i||!this.m_elements.get(o).isTotal())){r.add(s);l.add(a)}}}return r};e.RsVizAxis.prototype.getFormattedValue=function(t,i,n){let r=this.m_numberFormatingInfosByFeed.getByKey(t);return e.RsVizAxisExtractor.getFormattedValue(n,i.getNumberFormattingInfo(),r)};e.RsVizAxis.prototype.getIndicesByFeedOrder=function(t){let i=e.XList.create();for(let n=0;n<t.size();n++){let r=t.get(n);let l=i.size();for(let t=0;t<this.m_elements.size();t++){let n=this.m_elements.get(t);if(n.isSelectedByString(r)){let r=i.size();while(r>l&&n.compareTo(this.m_elements.get(i.get(r-1).getInteger()))<0){r--}i.insert(r,e.XIntegerValue.create(t))}}}return i};e.RsVizAxis.prototype.getIndicesGroupedByFeed=function(t){let i=e.XHashMapByString.create();for(let n=0;n<this.getTuplesCount();n++){let r=this.getTupleAt(n);let l=r.getPrettyText(t);if(!i.containsKey(l)){i.put(l,e.XList.create())}i.getByKey(l).add(e.XIntegerValue.create(n))}return i};e.RsVizAxis.prototype.getIndicesGroupedByFeedAndOrdered=function(t,i){let n=e.XHashMapByString.create();let r=this.getIndicesByFeedOrder(i);for(let i=0;i<r.size();i++){let l=r.get(i);let o=this.getTupleAt(l.getInteger());let s=o.getPrettyText(t);if(!n.containsKey(s)){n.put(s,e.XList.create())}n.getByKey(s).add(l)}return n};e.RsVizAxis.prototype.getLabels=function(t,i,n){let r=e.XHashSetOfString.create();let l=e.XList.create();for(let o=0;o<this.m_elements.size();o++){let s=this.m_elements.get(o).getLabel(n?this:null,null);if(e.isNull(s)){s=this.m_elements.get(o).getDefaultLabel(n?this:null)}if(e.notNull(s)){if(!t||!r.contains(s.getCompoundId())&&(i||!this.m_elements.get(o).isTotal())){r.add(s.getCompoundId());l.add(s)}}}return l};e.RsVizAxis.prototype.getLabelsForFeed=function(t,i,n,r){let l=e.XList.create();if(e.XStringUtils.isNotNullAndNotEmpty(r)){l.add(r)}return this.getLabelsForFeeds(t,i,n,l)};e.RsVizAxis.prototype.getLabelsForFeeds=function(t,i,n,r){let l=e.XHashSetOfString.create();let o=e.XList.create();for(let s=0;s<this.m_elements.size();s++){let a=this.m_elements.get(s).getLabel(n?this:null,r);if(e.notNull(a)){if(!t||!l.contains(a.getCompoundId())&&(i||!this.m_elements.get(s).isTotal())){o.add(a);l.add(a.getCompoundId())}}}return o};e.RsVizAxis.prototype.getMatchingFeedSubList=function(t){let i=e.XList.create();for(let e=0;e<t.size();e++){for(let n=0;n<this.m_elements.size();n++){if(this.m_elements.get(n).isSelectedByString(t.get(e))){i.add(t.get(e));break}}}return i};e.RsVizAxis.prototype.getMatchingTupleIndicesForMemberNameAndFeed=function(t,i){let n=e.XList.create();for(let r=0;r<this.m_elements.size();r++){let l=2;let o=this.m_elements.get(r);if(o.isSelectedByString(i)){for(let e=0;e<t.size();e++){let i=t.get(e);if(!o.getMemberKeys().contains(i)){l--}}if(l>0){n.add(e.XIntegerValue.create(r))}}}return n};e.RsVizAxis.prototype.getMatchingTupleIndicesForMemberNamesAndSuffix=function(t,i){for(let n=0;n<this.m_elements.size();n++){let r=true;let l=false;let o=this.m_elements.get(n);for(let n=0;n<t.size();n++){let s=t.get(n);let a=o.isSelectedByString(e.XStringUtils.concatenate2(s,i));l=a||l;if(!o.getMemberKeys().contains(s)&&!a){r=false;break}}if(r&&l){return n}}return-1};e.RsVizAxis.prototype.getNumericShift=function(t){let i=this.m_numberFormatingInfosByFeed.getByKey(t);if(e.notNull(i)){return i.getNumericShift()}return e.notNull(this.m_numberFormattingInfo)?this.m_numberFormattingInfo.getNumericShift():0};e.RsVizAxis.prototype.getPrettyNames=function(t,i){let n=e.XList.create();for(let r=0;r<this.m_elements.size();r++){let l=this.m_elements.get(r).getPrettyText(null);if(e.XStringUtils.isNullOrEmpty(l)){l=this.m_elements.get(r).getPrettyDefaultText()}if(e.XStringUtils.isNotNullAndNotEmpty(l)){if(!t||!n.contains(l)&&(i||!this.m_elements.get(r).isTotal())){n.add(l)}}}return n};e.RsVizAxis.prototype.getPrettyNamesForFeed=function(t,i,n){let r=e.XList.create();if(e.XStringUtils.isNotNullAndNotEmpty(n)){r.add(n)}return this.getPrettyNamesForFeeds(t,i,r)};e.RsVizAxis.prototype.getPrettyNamesForFeedExclude=function(t,i,n,r){let l=e.XList.create();if(e.XStringUtils.isNotNullAndNotEmpty(n)){l.add(n)}return this.getPrettyNamesForFeedsExclude(t,i,l,r)};e.RsVizAxis.prototype.getPrettyNamesForFeeds=function(t,i,n){let r=e.XList.create();let l=e.XList.create();for(let o=0;o<this.m_elements.size();o++){let s=this.m_elements.get(o).getPrettyText(n);let a=this.m_elements.get(o).getPrettyKeyText(n);if(e.XStringUtils.isNotNullAndNotEmpty(s)){if(!t||!l.contains(a)&&(i||!this.m_elements.get(o).isTotal())){r.add(s);l.add(a)}}}return r};e.RsVizAxis.prototype.getPrettyNamesForFeedsExclude=function(t,i,n,r){let l=e.XList.create();let o=e.XList.create();for(let s=0;s<this.m_elements.size();s++){let a=this.m_elements.get(s).getPrettyTextExclude(n,r);let u=this.m_elements.get(s).getPrettyKeyText(n);if(e.XStringUtils.isNotNullAndNotEmpty(a)){if(!t||!o.contains(u)&&(i||!this.m_elements.get(s).isTotal())){l.add(a);o.add(u)}}}return l};e.RsVizAxis.prototype.getScaledValue=function(t,i,n){let r=this.m_numberFormatingInfosByFeed.getByKey(t);return e.RsVizAxisExtractor.getScaledValue(n,i.getNumberFormattingInfo(),r)};e.RsVizAxis.prototype.getTupleAt=function(e){return e>-1&&e<this.m_elements.size()?this.m_elements.get(e):null};e.RsVizAxis.prototype.getTupleForFeed=function(e){for(let t=0;t<this.m_elements.size();t++){if(this.m_elements.get(t).isSelectedByString(e)){return this.m_elements.get(t)}}return null};e.RsVizAxis.prototype.getTupleIndexForMemberName=function(t){let i=e.XList.create();for(let n=0;n<this.m_elements.size();n++){if(this.m_elements.get(n).getMemberKeys().contains(t)){i.add(e.XIntegerValue.create(n))}}return i};e.RsVizAxis.prototype.getTupleIndexForMemberNames=function(t){let i=e.XList.create();for(let n=0;n<this.m_elements.size();n++){let r=true;for(let e=0;e<t.size();e++){let i=t.get(e);if(!this.m_elements.get(n).getMemberKeys().contains(i)){r=false;break}}if(r){i.add(e.XIntegerValue.create(n))}}return i};e.RsVizAxis.prototype.getTuplesCount=function(){return this.m_elements.size()};e.RsVizAxis.prototype.hasTupleForFeed=function(e){for(let t=0;t<this.m_elements.size();t++){if(this.m_elements.get(t).isSelectedByString(e)){return true}}return false};e.RsVizAxis.prototype.releaseObject=function(){this.m_elements=e.XObjectExt.release(this.m_elements);this.m_availableFeedTypes=e.XObjectExt.release(this.m_availableFeedTypes);this.m_numberFormattingInfo=null;e.XObject.prototype.releaseObject.call(this)};e.RsVizAxis.prototype.toString=function(){return e.XStringUtils.concatenate3(this.m_elements.toString(),":::",this.m_availableFeedTypes.toString())};e.RsVizAxisExtractor={createTupleElement:function(t,i,n,r,l,o){t.setFieldValueCursorBeforeStart();let s="";let a="";let u="";let p=null;let c=0;let g=-1;let m=e.DrillState.LEAF;let f=e.XList.create();let C=e.XList.create();let d=e.XList.create();let y=e.XList.create();let h=0;let _=0;let T="";while(t.hasNextFieldValue()){t.nextFieldValue();let i=t.getField();let n=i.getPresentationType();let r=t.getFormattedValue();f.add(r);y.add(n);let l=t.getValueType();if(i.isHierarchyNavigationField()){T=t.getFormattedValue()}if(t.getValue()!==null){C.add(t.getValue().clone())}d.add(l);if(n.isTypeOf(e.PresentationType.SHORT_TEXT)||n.isTypeOf(e.PresentationType.LONG_TEXT)||n.isTypeOf(e.PresentationType.MEDIUM_TEXT)){if(h<5&&e.XStringUtils.isNotNullAndNotEmpty(r)){s=r;h=5}}else if(n.isTypeOf(e.PresentationType.HIERARCHY_TEXT)&&h<4&&e.XStringUtils.isNotNullAndNotEmpty(r)){s=r;h=4}else if(n.isTypeOf(e.PresentationType.HIERARCHY_DISPLAY_KEY)&&h<3&&e.XStringUtils.isNotNullAndNotEmpty(r)){s=r;h=3}else if(n.isTypeOf(e.PresentationType.DISPLAY_KEY)&&h<2&&e.XStringUtils.isNotNullAndNotEmpty(r)){s=r;h=2}else if(h<=1&&e.PresentationType.isTextPresentation(n)&&e.XStringUtils.isNotNullAndNotEmpty(r)){s=r;h=1}if(_<=4&&n.isTypeOf(e.PresentationType.HIERARCHY_KEY)&&!n.isTypeOf(e.PresentationType.HIERARCHY_DISPLAY_KEY)&&e.XStringUtils.isNotNullAndNotEmpty(r)){a=r;_=4}else if(_<=3&&n.isTypeOf(e.PresentationType.HIERARCHY_KEY)&&e.XStringUtils.isNotNullAndNotEmpty(r)){a=r;_=3}else if(_<=2&&n.isTypeOf(e.PresentationType.KEY)&&!n.isTypeOf(e.PresentationType.DISPLAY_KEY)&&e.XStringUtils.isNotNullAndNotEmpty(r)){a=r;_=2}else if(_<=1&&e.PresentationType.isKeyPresentation(n)&&e.XStringUtils.isNotNullAndNotEmpty(r)){a=r;_=1}let o=t.getRsDimensionAtCurrentPosition().getResultSetFields();let p=e.XStream.of(o).find(t=>e.XString.isEqual(t.getName(),i.getName())).isPresent();if(p){u=e.XStringUtils.concatenate3(u," ",r)}}if(i.containsStructureMember(a)&&e.XStringUtils.isNotNullAndNotEmpty(i.getStructureMember(a).getText())){s=i.getStructureMember(a).getText()}if(!t.getRsDimensionAtCurrentPosition().isMeasureStructure()){if(o.isResult()){p=t.getField().getDimension().getResultMember(o)}else{p=t.getField().getDimension().getDimensionMember(t.getDimensionMemberName())}c=t.getDisplayLevel();g=t.getParentNodeIndex();m=t.getDrillState();if(e.XStringUtils.isNullOrEmpty(s)){s=p.getText();a=p.getName()}}let S=null;let R="()";let D=-1;let A=null;let E=null;if(e.notNull(r)){let t;let i=r.getStructureByKey(e.VizDefConstants.K_NUMBER_FORMATTING);if(e.notNull(i)){S=i.getByKey(a);for(t=0;e.isNull(S)&&t<C.size();t++){S=i.getByKey(C.get(t).getStringRepresentation())}}i=r.getStructureByKey(e.VizDefConstants.K_SHOW_SIGN_AS);if(e.notNull(i)){R=i.getStringByKey(a);for(t=0;e.isNull(S)&&t<C.size();t++){R=i.getStringByKey(C.get(t).getStringRepresentation())}}i=r.getStructureByKey(e.VizDefConstants.K_DECIMAL_PLACES);if(e.notNull(i)){D=i.getIntegerByKey(a);for(t=0;e.isNull(S)&&t<C.size();t++){D=i.getIntegerByKey(C.get(t).getStringRepresentation())}}i=r.getStructureByKey(e.VizDefConstants.K_PATTERN_FORMATTING);if(e.notNull(i)){E=i.getStringByKey(a);for(t=0;e.isNull(E)&&t<C.size();t++){E=i.getStringByKey(C.get(t).getStringRepresentation())}}i=r.getStructureByKey(e.VizDefConstants.K_COLOR_FORMATTING);if(e.notNull(i)){A=i.getStringByKey(a);for(t=0;e.isNull(A)&&t<C.size();t++){A=i.getStringByKey(C.get(t).getStringRepresentation())}}}l.setColor(A);l.setPattern(E);if(e.notNull(S)){let t=0;let i=2;let n=0;if(S.isStructure()){let r=S.asStructure();let l=r.getStructureByKey(e.VizDefConstants.K_OPTIONS);let o=r.getStructureByKey(e.VizDefConstants.K_SCALE).getStringByKey(e.VizDefConstants.K_MULTIPLIER);if(e.XString.startsWith(o,"1E")){t=e.XInteger.convertFromString(e.XString.substring(o,2,e.XString.size(o)))}if(l.containsKey(e.VizDefConstants.K_MINIMUM_FRACTION_DIGITS)){n=l.getIntegerByKey(e.VizDefConstants.K_MINIMUM_FRACTION_DIGITS)}if(l.containsKey(e.VizDefConstants.K_MAXIMUM_FRACTION_DIGITS)){i=l.getIntegerByKey(e.VizDefConstants.K_MAXIMUM_FRACTION_DIGITS)-n}}else if(S.isInteger()){t=S.asInteger().getInteger()}if(D>-1){i=D;n=D}let r=e.RsVizNumberFormattingInfo.createNumberFormat(t,n,i,R,false);l.setNumberFormattingInfo(r)}if(e.XStringUtils.isNullOrEmpty(s)){s=e.XStringUtils.isNotNullAndNotEmpty(a)?a:u}if(e.XStringUtils.isNullOrEmpty(e.XString.trim(u))){u=e.XStringUtils.isNotNullAndNotEmpty(s)?s:a}if(o.isResult()&&e.notNull(p)){s=p.getFormattedValue()}return e.RsVizTupleElement.createTupleElement(p,c,g,m,a,s,u,n,f,C,d,y,o,T)},extractCustomFormatting:function(t,i){if(e.isNull(t)){return null}let n=t.getStructureByKey(e.VizDefConstants.K_CUSTOM_FORMATTING);let r=t.getStructureByKey(e.VizDefConstants.K_PLACEHOLDER_2_ID);let l=e.isNull(i)?null:i.getListByKey(e.VizDefConstants.K_MEASURE_SYNC);if(e.isNull(n)){n=t.putNewStructure(e.VizDefConstants.K_CUSTOM_FORMATTING)}let o=n.getStructureByKey(e.VizDefConstants.K_PATTERN_FORMATTING);if(e.isNull(o)){o=n.putNewStructure(e.VizDefConstants.K_PATTERN_FORMATTING)}let s=n.getStructureByKey(e.VizDefConstants.K_COLOR_FORMATTING);if(e.isNull(s)){s=n.putNewStructure(e.VizDefConstants.K_COLOR_FORMATTING)}let a=e.XHashSetOfString.create();if(!t.getStructureByKey(e.VizDefConstants.K_CHART).getBooleanByKeyExt(e.VizDefConstants.K_IS_EXCLUDE_COLOR_SYNC,false)){if(e.notNull(l)){for(let t=0;t<l.size();t++){let i=l.getStructureAt(t);let n=i.getStructureByKey(e.VizDefConstants.K_ID);let r=n.getStringByKey(e.VizDefConstants.K_ID);if(!s.containsKey(r)){s.putStringNotNullAndNotEmpty(r,i.getStringByKey(e.VizDefConstants.K_COLOR))}if(!o.containsKey(r)){o.putStringNotNullAndNotEmpty(r,i.getStringByKey(e.VizDefConstants.K_PATTERN))}}}}else{let i=t.getStructureByKey(e.VizDefConstants.K_FEED_MEMBERS);let n=i.getKeysAsReadOnlyList();for(let t=0;t<n.size();t++){let r=n.get(t);if(!e.XString.containsString(r,e.VizDefConstants.K_ERRORBAR_INFIX)){let e=i.getListByKey(r);for(let t=0;t<e.size();t++){s.remove(e.getStringAt(t))}}}o.clear();let r=t.getStructureByKey(e.VizDefConstants.K_USER_PREFERENCES);if(e.notNull(r)){let t=r.getStructureByKey(e.VizDefConstants.K_MEASURE);if(e.notNull(t)){let i=t.getListByKey(e.VizDefConstants.K_COLORS);if(e.notNull(i)){for(let t=0;t<i.size();t++){let n=i.getStructureAt(t);let r=n.getStructureByKey(e.VizDefConstants.K_ID);let l=r.getStringByKey(e.VizDefConstants.K_ID);s.putStringNotNullAndNotEmpty(l,n.getStringByKey(e.VizDefConstants.K_COLOR));o.putStringNotNullAndNotEmpty(l,n.getStringByKey(e.VizDefConstants.K_PATTERN));a.add(l)}}}}}if(e.notNull(r)){let e=r.getKeysAsReadOnlyList();for(let t=0;t<e.size();t++){let i=e.get(t);let n=r.getStringByKey(i);if(s.containsKey(i)&&(!s.containsKey(n)||a.contains(i))){s.putString(n,s.getStringByKey(i))}if(o.containsKey(i)&&!o.containsKey(n)){o.putString(n,o.getStringByKey(i))}if(s.containsKey(n)&&(!s.containsKey(i)||a.contains(n))){s.putString(i,s.getStringByKey(n))}if(o.containsKey(n)&&!o.containsKey(i)){o.putString(i,o.getStringByKey(n))}}}return n},getAxisMemberFeedTypes:function(t,i){let n=e.XLinkedHashMapByString.create();t.setFieldValueCursorBeforeStart();let r=i.getKeysAsReadOnlyList();while(t.hasNextFieldValue()){t.nextFieldValue();let l=t.getFieldValue();let o=l.getField().getDimension().getName();let s=t.getDimensionMemberName();let a="";if(e.XStringUtils.isNotNullAndNotEmpty(s)){let i=t.getField().getDimension().getStructureMember(s);if(e.notNull(i)){a=i.getAliasName()}}for(let t=0;t<r.size();t++){let u=r.get(t);let p=i.getByKey(u);for(let t=0;t<p.size();t++){let i=p.get(t);if(e.XString.isEqual(a,i)||e.XString.isEqual(s,i)||e.XString.isEqual(l.toString(),i)||e.XString.isEqual(l.getFormattedValue(),i)||e.XString.isEqual(o,i)){if(!n.containsKey(u)){n.put(u,e.XIntegerValue.create(t))}break}}}}t.setFieldValueCursorBeforeStart();return n},getDimensionStack:function(t){let i=e.XList.create();t.setFieldValueCursorBeforeStart();t.setTupleElementCursorBeforeStart();t.setTupleCursorBeforeStart();if(t.hasNextTuple()){t.nextTuple();while(t.hasNextTupleElement()){t.nextTupleElement();if(t.hasNextFieldValue()){t.nextFieldValue()}i.add(t.getRsDimensionAtCurrentPosition().getName())}}t.setFieldValueCursorBeforeStart();t.setTupleElementCursorBeforeStart();t.setTupleCursorBeforeStart();return i},getFeedMembersFromVisualizationDefinition:function(t,i){let n=e.XHashMapByString.create();let r=i.getChartSetting();let l=r.getChartType();let o=r.getChartType2();let s=e.XList.create();n.put(e.VizDefConstants.K_CATEGORY_AXIS,s);let a=e.XList.create();n.put(e.VizDefConstants.K_CATEGORY_AXIS2,a);let u=e.XList.create();n.put(e.VizDefConstants.K_VALUE_AXIS,u);let p=e.XList.create();n.put(e.VizDefConstants.K_VALUE_AXIS2,p);let c=e.XList.create();n.put(e.VizDefConstants.K_VARIANCE,c);let g=e.XList.create();n.put(e.VizDefConstants.K_BUBBLE_WIDTH,g);let m=e.XList.create();n.put(e.VizDefConstants.K_WEIGHT,m);let f=e.XList.create();n.put(e.VizDefConstants.K_SIZE,f);let C=e.XList.create();n.put(e.VizDefConstants.K_TIME_AXIS,C);let d=e.XList.create();n.put(e.VizDefConstants.K_COLOR,d);let y=t.getCursorColumnsAxis();let h=t.getCursorRowsAxis();let _;let T;if(e.XStream.of(y.getRsDimensions()).anyMatch(t=>e.XString.isEqual(t.getName(),i.getKeyFigureDimension().getName()))){_=e.RsVizAxisExtractor.getDimensionStack(y);T=e.RsVizAxisExtractor.getDimensionStack(h)}else{T=e.RsVizAxisExtractor.getDimensionStack(y);_=e.RsVizAxisExtractor.getDimensionStack(h)}_.removeElement(i.getKeyFigureDimension().getName());if(l===e.ChartType.LINE||l.isTypeOf(e.ChartType.BAR_COLUMN)||l===e.ChartType.AREA){s.addAll(T);d.addAll(_);u.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE));if(o!==e.ChartType.NONE||l===e.ChartType.LINE){p.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE_B))}c.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE_VARIANCE))}else if(l===e.ChartType.RADAR){s.addAll(T);d.addAll(_);u.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE))}else if(l===e.ChartType.BOX_PLOT){s.addAll(T);d.addAll(_);u.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE))}else if(l===e.ChartType.TIME_SERIES){C.addAll(T);d.addAll(_);u.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE))}else if(l===e.ChartType.HEAT_MAP){s.addAll(T);a.addAll(_);d.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.COLOR))}else if(l===e.ChartType.PACKED_BUBBLE||l===e.ChartType.BUBBLE||l===e.ChartType.SCATTER_PLOT||l===e.ChartType.VARI_WIDE){d.addAll(_);u.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE));p.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE_B));if(l===e.ChartType.BUBBLE||l===e.ChartType.PACKED_BUBBLE){g.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.SIZE))}}else if(l===e.ChartType.METRIC){u.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE));p.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE_B));c.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE_VARIANCE))}else if(l===e.ChartType.PIE||l===e.ChartType.DOUGHNUT){s.addAll(T);f.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.SIZE))}else if(l===e.ChartType.TREE_MAP){s.addAll(T);d.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.COLOR));m.addAll(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.WEIGHT))}return n},getFormattedValue:function(t,i,n){let r=t.getFormattedValue();if(e.XStringUtils.isNullOrEmpty(r)&&t.getValueException()===e.ValueException.NORMAL){r=e.XDouble.convertToString(t.getDouble())}if(e.XValueType.PERCENT.isEqualTo(t.getValueType())){r=e.XStringUtils.concatenate2(r,"%")}let l=e.DataCellNumberFormatterSettings.create(t);let o=e.RscMappingUtils.resolveCurrencyUnitPair(t.getComplexUnit(),l.getCurrencyFormatSettings().getCurrencyPresentation(),e.XPairOfString.create("",""));let s=e.XNumberFormatter.formatHeaderStringUsingSettingsWithCurrency(l,o,e.XIntegerValue.create(-i.getNumericShift()),null);return e.XStringUtils.concatenate3(r," ",s)},getMemberStack:function(t,i){let n=e.XList.create();t.setFieldValueCursorBeforeStart();t.setTupleElementCursorBeforeStart();t.setTupleCursorBeforeStart();while(t.hasNextTuple()){t.nextTuple();t.setTupleElementCursorBeforeStart();let e=0;while(t.hasNextTupleElement()&&e++<i){t.nextTupleElement()}if(t.hasNextFieldValue()){t.nextFieldValue()}n.add(t.getDimensionMemberName())}t.setFieldValueCursorBeforeStart();t.setTupleElementCursorBeforeStart();t.setTupleCursorBeforeStart();return n},getMemberStackFromVisualizationDefinition:function(t,i){let n=e.XList.create();let r=t.getChartSetting().getTypedValueSelectionsForType(i);for(let e=0;e<r.size();e++){n.add(r.get(e).getDimensionMember().getName())}return n},getScaledValue:function(t,i,n){let r=i;if(e.isNull(r)||r.isUseFormattingFromDataCell()){if(t.getScalingFactor()===0&&e.notNull(n)&&!n.isUseFormattingFromDataCell()){r=n}}let l;if(e.notNull(r)&&!r.isUseFormattingFromDataCell()){l=r.getNumericShift()}else{l=t.getScalingFactor()}if(!t.getValueException().isValidValue()&&t.getValueException()!==e.ValueException.MIXED_CURRENCIES_OR_UNITS){return 0}try{return t.getDouble()*e.XMath.pow(10,l)}catch(e){return 0}},getTuplesFromAxis:function(t,i,n,r,l){let o=e.RsVizAxis.create();let s=t.getQueryModel().getAccountDimension();if(e.isNull(s)){s=t.getQueryModel().getMeasureDimension()}i.setTupleCursorBeforeStart();let a=0;while(i.hasNextTuple()){i.nextTuple();let u=null;if(n){if(t.getDataColumns()>0){u=t.getDataCell(0,a)}}else{if(t.getDataRows()>0){u=t.getDataCell(a,0)}}if(e.notNull(u)){let t=u.getDecimalPlaces();let n=e.XStringUtils.isNullOrEmpty(u.getFormattedValue());let a=n&&i.getScalingFactor()!==null?i.getScalingFactor().getInteger():u.getScalingFactor();let p=u.getFormatString();let c=e.RsVizNumberFormattingInfo.createNumberFormat(a,t,t,p,a===0);let g=e.RsVizFeedTuple.createTuple();g.setNumberFormattingInfo(c);while(i.hasNextTupleElement()){let t=i.nextTupleElement().getDimensionMemberType();let n=e.RsVizAxisExtractor.getAxisMemberFeedTypes(i,r);g.addElement(e.RsVizAxisExtractor.createTupleElement(i,s,n,l,g,t))}o.addElement(g)}a++}return o},getTuplesFromColumnAxis:function(t,i,n){return e.RsVizAxisExtractor.getTuplesFromAxis(t,t.getCursorColumnsAxis(),false,i,n)},getTuplesFromRowAxis:function(t,i,n){return e.RsVizAxisExtractor.getTuplesFromAxis(t,t.getCursorRowsAxis(),true,i,n)},guessFeedMembers:function(t,i,n){let r=e.XString.isEqual(i,e.VizDefConstants.V_CHART_TYPE_COLUMN);let l=e.XString.isEqual(i,e.VizDefConstants.V_CHART_TYPE_BELLCURVE);let o=e.XString.isEqual(i,e.VizDefConstants.K_LINE);let s=e.XString.isEqual(i,e.VizDefConstants.V_CHART_TYPE_BAR);let a=e.XString.isEqual(i,e.VizDefConstants.K_SPLINE);let u=e.XString.isEqual(i,e.VizDefConstants.K_AREA);let p=e.XString.isEqual(i,e.VizDefConstants.K_PIE);let c=e.XString.isEqual(i,e.VizDefConstants.K_WORDCLOUD);let g=e.XString.isEqual(i,e.VizDefConstants.K_VARIPIE);let m=e.XString.isEqual(i,e.VizDefConstants.K_VARIWIDE);let f=e.XString.isEqual(i,e.VizDefConstants.K_SCATTER);let C=e.XString.isEqual(i,e.VizDefConstants.V_CHART_TYPE_BUBBLE);let d=e.XString.isEqual(i,e.VizDefConstants.K_PACKED_BUBBLE);let y=e.XString.isEqual(i,e.VizDefConstants.K_HEATMAP);let h=e.XString.isEqual(i,e.VizDefConstants.K_TREEMAP);let _=e.XString.isEqual(i,e.VizDefConstants.V_CHART_TYPE_BOXPLOT);let T=e.XString.isEqual(i,e.VizDefConstants.K_SOLID_GAUGE);let S=e.XHashMapByString.create();let R=t.getCursorRowsAxis();let D=t.getCursorColumnsAxis();let A=e.XList.create();S.put(e.VizDefConstants.K_CATEGORY_AXIS,A);let E=e.XList.create();S.put(e.VizDefConstants.K_CATEGORY_AXIS2,E);let V=e.XList.create();S.put(e.VizDefConstants.K_VALUE_AXIS,V);let N=e.XList.create();S.put(e.VizDefConstants.K_VALUE_AXIS2,N);let x=e.XList.create();S.put(e.VizDefConstants.K_BUBBLE_WIDTH,x);let P=e.XList.create();S.put(e.VizDefConstants.K_WEIGHT,P);let L=e.XList.create();S.put(e.VizDefConstants.K_SIZE,L);let I=e.XList.create();S.put(e.VizDefConstants.K_TIME_AXIS,I);let b=e.XList.create();S.put(e.VizDefConstants.K_COLOR,b);let z=e.RsVizAxisExtractor.getDimensionStack(D);let O=e.RsVizAxisExtractor.getDimensionStack(R);let F=e.RsVizAxisExtractor.getMemberStack(D,z.size());if(O.size()>0){I.add(O.get(O.size()-1));b.add(O.get(O.size()-1));A.add(O.get(O.size()-1))}if(z.size()>1){if(y){E.add(z.get(z.size()-2))}else{b.add(z.get(z.size()-2))}}if(o||s||a||l||r||u||n||T||_){let e=F.size();if(n&&F.size()>1){e--;N.add(F.get(F.size()-1))}for(let t=0;t<e;t++){V.add(F.get(t))}}else if(p||g||c||C||f||h||m||d){if(F.size()>0){P.add(F.get(0));V.add(F.get(0));L.add(F.get(F.size()-1))}if(F.size()>1){N.add(F.get(1))}if(F.size()>2){x.add(F.get(2))}}else if(y){if(F.size()>0){b.add(F.get(0))}}return S}};e.RsVizFeedTuple=function(){};e.RsVizFeedTuple.prototype=new e.XObject;e.RsVizFeedTuple.prototype._ff_c="RsVizFeedTuple";e.RsVizFeedTuple.createTuple=function(){let t=new e.RsVizFeedTuple;t.m_elements=e.XList.create();t.m_availableFeedTypes=e.XHashSetOfString.create();return t};e.RsVizFeedTuple.prototype.m_availableFeedTypes=null;e.RsVizFeedTuple.prototype.m_color=null;e.RsVizFeedTuple.prototype.m_elements=null;e.RsVizFeedTuple.prototype.m_numberFormattingInfo=null;e.RsVizFeedTuple.prototype.m_pattern=null;e.RsVizFeedTuple.prototype.addElement=function(e){this.m_elements.add(e);this.m_availableFeedTypes.addAll(e.getFeedTypes())};e.RsVizFeedTuple.prototype.compareTo=function(t){if(e.isNull(t)){return 1}let i=t;let n=e.XMath.min(this.m_elements.size(),i.m_elements.size());for(let e=0;e<n;e++){let t=this.m_elements.get(e).compareTo(i.m_elements.get(e));if(t!==0){return t}}return 0};e.RsVizFeedTuple.prototype.createVizLabel=function(t,i,n){let r=n;let l=this.m_elements.get(t);return e.RsVizLabel.create(l.getKey(),l.getText(),l.getFormattedText(),r,l.getDisplayLevel(),l.getDrillState())};e.RsVizFeedTuple.prototype.getAvailableFeedTypes=function(){return this.m_availableFeedTypes};e.RsVizFeedTuple.prototype.getCategories=function(t){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null}let i=e.XList.create();for(let e=0;e<this.m_elements.size();e++){if(this.m_elements.get(e).isSelectedByList(t)){i.add(this.m_elements.get(e).getText())}}return i};e.RsVizFeedTuple.prototype.getCategoriesObjects=function(t){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null}let i=e.XList.create();for(let e=0;e<this.m_elements.size();e++){if(this.m_elements.get(e).isSelectedByList(t)){i.add(this.m_elements.get(e))}}return i};e.RsVizFeedTuple.prototype.getColor=function(){return this.m_color};e.RsVizFeedTuple.prototype.getDate=function(t){for(let i=0;i<this.m_elements.size();i++){let n=this.m_elements.get(i).getDate(t);if(e.notNull(n)){return n}}return null};e.RsVizFeedTuple.prototype.getDecimalPlaces=function(){return this.m_numberFormattingInfo.getMaxDecimalPlaces()};e.RsVizFeedTuple.prototype.getDefaultLabel=function(t){let i=null;for(let n=0;n<this.m_elements.size();n++){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)||e.XCollectionUtils.hasElements(this.m_elements.get(n).getFeedTypes())){i=this.createVizLabel(n,t,i)}}return i};e.RsVizFeedTuple.prototype.getDimensionNamesForFeeds=function(t){let i=e.XList.create();for(let e=0;e<this.m_elements.size();e++){let n=this.m_elements.get(e);if(n.getDimensionMember()!==null&&n.getDimensionMember().getDimension()!==null&&n.isSelectedByList(t)&&!i.contains(n.getDimensionMember().getDimension().getName())){i.add(n.getDimensionMember().getDimension().getName())}}return i};e.RsVizFeedTuple.prototype.getDimensionTextsForFeeds=function(t){let i=e.XList.create();for(let e=0;e<this.m_elements.size();e++){let n=this.m_elements.get(e);if(n.getDimensionMember()!==null&&n.getDimensionMember().getDimension()!==null&&n.isSelectedByList(t)&&!i.contains(n.getDimensionMember().getDimension().getName())){i.add(n.getDimensionMember().getDimension().getText())}}return i};e.RsVizFeedTuple.prototype.getFormattedDate=function(){for(let t=0;t<this.m_elements.size();t++){let i=this.m_elements.get(t).getFormattedDate();if(e.notNull(i)){return i}}return null};e.RsVizFeedTuple.prototype.getFormattedDefaultText=function(){let t=e.XStringBuffer.create();for(let i=0;i<this.m_elements.size();i++){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)||e.XCollectionUtils.hasElements(this.m_elements.get(i).getFeedTypes())){t.append("/");t.append(this.m_elements.get(i).getFormattedText())}}let i=t.toString();if(e.XString.size(i)>1){return e.XString.substring(i,1,e.XString.size(i))}return null};e.RsVizFeedTuple.prototype.getFormattedText=function(t){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null}let i=e.XStringBuffer.create();for(let e=0;e<this.m_elements.size();e++){if(this.m_elements.get(e).isSelectedByList(t)){i.append("/");i.append(this.m_elements.get(e).getFormattedText())}}let n=i.toString();if(e.XString.size(n)>1){return e.XString.substring(n,1,e.XString.size(n))}return null};e.RsVizFeedTuple.prototype.getFormattedValue=function(t){return e.RsVizAxisExtractor.getFormattedValue(t,this.getNumberFormattingInfo(),null)};e.RsVizFeedTuple.prototype.getLabel=function(t,i){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null}let n=null;for(let e=0;e<this.m_elements.size();e++){if(this.m_elements.get(e).isSelectedByList(i)){n=this.createVizLabel(e,t,n)}}return n};e.RsVizFeedTuple.prototype.getMemberKeys=function(){let t=e.XList.create();for(let e=0;e<this.m_elements.size();e++){t.add(this.m_elements.get(e).getKey())}return t};e.RsVizFeedTuple.prototype.getMemberKeysForFeedsOtherThan=function(t){let i=e.XList.create();for(let e=0;e<this.m_elements.size();e++){if(!this.m_elements.get(e).isSelectedByString(t)){i.add(this.m_elements.get(e).getKey())}}return i};e.RsVizFeedTuple.prototype.getNumberFormattingInfo=function(){return this.m_numberFormattingInfo};e.RsVizFeedTuple.prototype.getNumericShift=function(){return this.m_numberFormattingInfo.getNumericShift()};e.RsVizFeedTuple.prototype.getPattern=function(){return this.m_pattern};e.RsVizFeedTuple.prototype.getPrettyDefaultText=function(){let t=e.XStringBuffer.create();for(let i=0;i<this.m_elements.size();i++){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)||e.XCollectionUtils.hasElements(this.m_elements.get(i).getFeedTypes())){t.append("/");t.append(this.m_elements.get(i).getText())}}let i=t.toString();if(e.XString.size(i)>1){return e.XString.substring(i,1,e.XString.size(i))}return null};e.RsVizFeedTuple.prototype.getPrettyKeyText=function(t){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null}let i=e.XStringBuffer.create();for(let e=0;e<this.m_elements.size();e++){if(this.m_elements.get(e).isSelectedByList(t)){i.append("/");i.append(this.m_elements.get(e).getKey())}}let n=i.toString();if(e.XString.size(n)>1){return e.XString.substring(n,1,e.XString.size(n))}return null};e.RsVizFeedTuple.prototype.getPrettyText=function(t){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null}let i=e.XStringBuffer.create();for(let e=0;e<this.m_elements.size();e++){if(this.m_elements.get(e).isSelectedByList(t)){i.append("/");i.append(this.m_elements.get(e).getText())}}let n=i.toString();if(e.XString.size(n)>1){return e.XString.substring(n,1,e.XString.size(n))}return null};e.RsVizFeedTuple.prototype.getPrettyTextExclude=function(t,i){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null}let n=e.XStringBuffer.create();for(let e=0;e<this.m_elements.size();e++){if(this.m_elements.get(e).isSelectedByList(t)&&!this.m_elements.get(e).isSelectedByList(i)){n.append("/");n.append(this.m_elements.get(e).getText())}}let r=n.toString();if(e.XString.size(r)>1){return e.XString.substring(r,1,e.XString.size(r))}return null};e.RsVizFeedTuple.prototype.getPrettyTextForFeed=function(t){let i=e.XList.create();i.add(t);return this.getPrettyText(i)};e.RsVizFeedTuple.prototype.getScaledValue=function(t){return e.RsVizAxisExtractor.getScaledValue(t,this.getNumberFormattingInfo(),null)};e.RsVizFeedTuple.prototype.isSelectedByList=function(t){if(e.XCollectionUtils.hasElements(this.m_availableFeedTypes)&&!e.XCollectionUtils.hasElements(t)){return true}for(let e=0;e<t.size();e++){if(this.m_availableFeedTypes.contains(t.get(e))){return true}}return false};e.RsVizFeedTuple.prototype.isSelectedByString=function(t){return e.XStringUtils.isNullOrEmpty(t)||this.m_availableFeedTypes.contains(t)};e.RsVizFeedTuple.prototype.isTotal=function(){for(let e=0;e<this.m_elements.size();e++){if(this.m_elements.get(e).isTotal()){return true}}return false};e.RsVizFeedTuple.prototype.releaseObject=function(){this.m_elements=e.XObjectExt.release(this.m_elements);this.m_availableFeedTypes=e.XObjectExt.release(this.m_availableFeedTypes);this.m_numberFormattingInfo=null;e.XObject.prototype.releaseObject.call(this)};e.RsVizFeedTuple.prototype.setColor=function(e){this.m_color=e};e.RsVizFeedTuple.prototype.setNumberFormattingInfo=function(e){this.m_numberFormattingInfo=e};e.RsVizFeedTuple.prototype.setPattern=function(e){this.m_pattern=e};e.RsVizFeedTuple.prototype.toString=function(){return e.XStringUtils.concatenate3(this.m_elements.toString(),":::",this.m_availableFeedTypes.toString())};e.RsVizLabel=function(){};e.RsVizLabel.prototype=new e.XObject;e.RsVizLabel.prototype._ff_c="RsVizLabel";e.RsVizLabel.create=function(t,i,n,r,l,o){let s=new e.RsVizLabel;s.m_id=t;s.m_label=i;s.m_formattedLabel=n;s.m_parent=r;s.m_leafOrCollapsed=e.isNull(o)||o===e.DrillState.LEAF||o===e.DrillState.COLLAPSED||o===e.DrillState.COLLAPSED_EXPAND_AND_DRILLDOWN_ALLOWED;s.m_displayLevel=l;if(e.notNull(r)){r.m_leafOrCollapsed=false}return s};e.RsVizLabel.prototype.m_compoundFormattedLabel=null;e.RsVizLabel.prototype.m_compoundId=null;e.RsVizLabel.prototype.m_compoundLabel=null;e.RsVizLabel.prototype.m_displayLevel=0;e.RsVizLabel.prototype.m_formattedLabel=null;e.RsVizLabel.prototype.m_id=null;e.RsVizLabel.prototype.m_label=null;e.RsVizLabel.prototype.m_leafOrCollapsed=false;e.RsVizLabel.prototype.m_parent=null;e.RsVizLabel.prototype.getCompoundFormattedLabel=function(){if(e.isNull(this.m_compoundFormattedLabel)){if(e.notNull(this.m_parent)){this.m_compoundFormattedLabel=e.XStringUtils.concatenate3(this.m_parent.getCompoundFormattedLabel(),"/",this.m_formattedLabel)}else{this.m_compoundFormattedLabel=this.m_formattedLabel}}return this.m_compoundFormattedLabel};e.RsVizLabel.prototype.getCompoundId=function(){if(e.isNull(this.m_compoundId)){if(e.notNull(this.m_parent)){this.m_compoundId=e.XStringUtils.concatenate3(this.m_parent.getCompoundId(),"/",this.m_id)}else{this.m_compoundId=this.m_id}}return this.m_compoundId};e.RsVizLabel.prototype.getCompoundLabel=function(){if(e.isNull(this.m_compoundLabel)){if(e.notNull(this.m_parent)){this.m_compoundLabel=e.XStringUtils.concatenate3(this.m_parent.getCompoundLabel(),"/",this.m_label)}else{this.m_compoundLabel=this.m_label}}return this.m_compoundLabel};e.RsVizLabel.prototype.getDisplayLevel=function(){return this.m_displayLevel};e.RsVizLabel.prototype.getFormattedLabel=function(){return this.m_formattedLabel};e.RsVizLabel.prototype.getId=function(){return this.m_id};e.RsVizLabel.prototype.getLabel=function(){return this.m_label};e.RsVizLabel.prototype.getParent=function(){return this.m_parent};e.RsVizLabel.prototype.isLeafOrCollapsed=function(){return this.m_leafOrCollapsed};e.RsVizLabel.prototype.releaseObject=function(){this.m_id=null;this.m_label=null;this.m_formattedLabel=null;this.m_parent=null;this.m_compoundFormattedLabel=null;this.m_compoundId=null;this.m_compoundLabel=null;e.XObject.prototype.releaseObject.call(this)};e.RsVizNumberFormattingInfo=function(){};e.RsVizNumberFormattingInfo.prototype=new e.XObject;e.RsVizNumberFormattingInfo.prototype._ff_c="RsVizNumberFormattingInfo";e.RsVizNumberFormattingInfo.createNumberFormat=function(t,i,n,r,l){let o=new e.RsVizNumberFormattingInfo;o.m_numericShift=t;o.m_minDecimalPlaces=i;o.m_maxDecimalPlaces=n;o.m_useFormattingFromDataCell=l;o.m_showSignAs=r;return o};e.RsVizNumberFormattingInfo.prototype.m_maxDecimalPlaces=0;e.RsVizNumberFormattingInfo.prototype.m_minDecimalPlaces=0;e.RsVizNumberFormattingInfo.prototype.m_numericShift=0;e.RsVizNumberFormattingInfo.prototype.m_showSignAs=null;e.RsVizNumberFormattingInfo.prototype.m_useFormattingFromDataCell=false;e.RsVizNumberFormattingInfo.prototype.getMaxDecimalPlaces=function(){return this.m_maxDecimalPlaces};e.RsVizNumberFormattingInfo.prototype.getMinDecimalPlaces=function(){return this.m_minDecimalPlaces};e.RsVizNumberFormattingInfo.prototype.getNumericShift=function(){return this.m_numericShift};e.RsVizNumberFormattingInfo.prototype.getShowSignAs=function(){return this.m_showSignAs};e.RsVizNumberFormattingInfo.prototype.isShowPlusSign=function(){return e.XStringUtils.isNotNullAndNotEmpty(this.m_showSignAs)&&e.XString.startsWith(this.m_showSignAs,"+")};e.RsVizNumberFormattingInfo.prototype.isUseFormattingFromDataCell=function(){return this.m_useFormattingFromDataCell};e.RsVizNumberFormattingInfo.prototype.releaseObject=function(){this.m_showSignAs=null;e.XObject.prototype.releaseObject.call(this)};e.RsVizTupleElement=function(){};e.RsVizTupleElement.prototype=new e.XObject;e.RsVizTupleElement.prototype._ff_c="RsVizTupleElement";e.RsVizTupleElement.createTupleElement=function(t,i,n,r,l,o,s,a,u,p,c,g,m,f){let C=new e.RsVizTupleElement;C.m_displayLevel=i;C.m_drillState=r;C.m_member=t;C.m_parentIndex=n;C.m_key=l;C.m_text=o;C.m_displayText=s;C.m_feedTypes=a;C.m_formattedValueList=u;C.m_valueList=p;C.m_valueTypeList=c;C.m_presentationTypeList=g;C.m_memberType=m;C.m_hierarchyNavigation=f;return C};e.RsVizTupleElement.prototype.m_displayLevel=0;e.RsVizTupleElement.prototype.m_displayText=null;e.RsVizTupleElement.prototype.m_drillState=null;e.RsVizTupleElement.prototype.m_feedTypes=null;e.RsVizTupleElement.prototype.m_formattedValueList=null;e.RsVizTupleElement.prototype.m_hierarchyNavigation=null;e.RsVizTupleElement.prototype.m_key=null;e.RsVizTupleElement.prototype.m_member=null;e.RsVizTupleElement.prototype.m_memberType=null;e.RsVizTupleElement.prototype.m_parentIndex=0;e.RsVizTupleElement.prototype.m_presentationTypeList=null;e.RsVizTupleElement.prototype.m_text=null;e.RsVizTupleElement.prototype.m_valueList=null;e.RsVizTupleElement.prototype.m_valueTypeList=null;e.RsVizTupleElement.prototype.compareTo=function(t){if(e.isNull(t)){return 1}let i=t;let n=this.m_feedTypes.getKeysAsReadOnlyList();let r=n.size();for(let t=0;t<r;t++){let r=n.get(t);let l=this.m_feedTypes.getByKey(r);let o=i.m_feedTypes.getByKey(r);if(e.isNull(o)){return 1}let s=l.getInteger()-o.getInteger();if(s!==0){return s}}return e.XString.isEqual(this.getKey(),i.getKey())?0:1};e.RsVizTupleElement.prototype.getDate=function(t){if(e.isNull(this.m_member)){return null}for(let i=0;i<this.m_valueList.size();i++){let n=this.m_valueList.get(i);if(n.getValueType()===e.XValueType.DATE){return n}if(t===0){return null}let r=n.getStringRepresentation();if(t===2){r=e.XStringUtils.concatenate2(r,"01")}else if(t===3){r=e.XStringUtils.concatenate2(r,"0101")}try{if(e.XString.startsWith(r,"!")&&e.XString.size(r)===9){return e.XDate.createDateFromString(e.XString.substring(r,1,9),e.DateTimeFormat.SAP)}else if(e.XString.size(r)===8){return e.XDate.createDateFromString(r,e.DateTimeFormat.SAP)}else if(e.XString.startsWith(r,"!")&&e.XString.size(r)===11){return e.XDate.createDateFromString(e.XString.substring(r,1,11),e.DateTimeFormat.ISO)}else if(e.XString.size(r)===10){return e.XDate.createDateFromString(r,e.DateTimeFormat.ISO)}}catch(e){continue}}return null};e.RsVizTupleElement.prototype.getDimensionMember=function(){return this.m_member};e.RsVizTupleElement.prototype.getDisplayLevel=function(){return this.m_displayLevel};e.RsVizTupleElement.prototype.getDrillState=function(){return this.m_drillState};e.RsVizTupleElement.prototype.getFeedTypes=function(){return this.m_feedTypes.getKeysAsReadOnlyList()};e.RsVizTupleElement.prototype.getFormattedDate=function(){if(e.isNull(this.m_member)){return null}for(let t=0;t<this.m_valueList.size();t++){let i=this.m_valueList.get(t);if(i.getValueType()===e.XValueType.DATE){return i.toString()}}return this.m_text};e.RsVizTupleElement.prototype.getFormattedText=function(){let t="";let i="";if(e.notNull(this.m_drillState)&&this.m_drillState!==e.DrillState.LEAF&&this.m_drillState!==e.DrillState.LEAF_UDH){if(this.m_displayLevel===0){t="<b>";i="</b>"}else if(this.m_displayLevel===1){t="<b><em>";i="</em></b>"}else if(this.m_displayLevel===2){t="<em>";i="</em>"}}return e.XStringUtils.concatenate3(t,this.m_text,i)};e.RsVizTupleElement.prototype.getFormattedValueList=function(){return this.m_formattedValueList};e.RsVizTupleElement.prototype.getHierarchyNavigation=function(){return this.m_hierarchyNavigation};e.RsVizTupleElement.prototype.getKey=function(){if(this.m_memberType.isResult()&&e.notNull(this.m_member)){return this.m_member.getFormattedValue()}return this.m_key};e.RsVizTupleElement.prototype.getParentIndex=function(){return this.m_parentIndex};e.RsVizTupleElement.prototype.getPresentationTypeList=function(){return this.m_presentationTypeList};e.RsVizTupleElement.prototype.getText=function(){return this.m_displayText};e.RsVizTupleElement.prototype.getValueTypeList=function(){return this.m_valueTypeList};e.RsVizTupleElement.prototype.isSelectedByList=function(t){let i=this.m_feedTypes.getKeysAsReadOnlyList();if(e.XCollectionUtils.hasElements(this.m_feedTypes)&&!e.XCollectionUtils.hasElements(t)){return true}for(let e=0;e<this.m_feedTypes.size();e++){if(t.contains(i.get(e))){return true}}return false};e.RsVizTupleElement.prototype.isSelectedByString=function(t){return e.XStringUtils.isNullOrEmpty(t)||this.m_feedTypes.containsKey(t)};e.RsVizTupleElement.prototype.isTotal=function(){return e.notNull(this.m_memberType)&&this.m_memberType.isTypeOf(e.MemberType.RESULT)};e.RsVizTupleElement.prototype.releaseObject=function(){this.m_member=null;this.m_key=null;this.m_text=null;this.m_displayText=null;this.m_feedTypes=e.XObjectExt.release(this.m_feedTypes);this.m_formattedValueList=e.XObjectExt.release(this.m_formattedValueList);this.m_valueList=e.XObjectExt.release(this.m_valueList);this.m_valueTypeList=e.XObjectExt.release(this.m_valueTypeList);this.m_presentationTypeList=e.XObjectExt.release(this.m_presentationTypeList);this.m_memberType=null;e.XObject.prototype.releaseObject.call(this)};e.RsVizTupleElement.prototype.toString=function(){return e.XStringUtils.concatenate5(this.m_feedTypes.toString(),"::<",this.m_key,">::",this.m_text)};e.RsVizFrameRenderer=function(){};e.RsVizFrameRenderer.prototype=new e.XObject;e.RsVizFrameRenderer.prototype._ff_c="RsVizFrameRenderer";e.RsVizFrameRenderer.create=function(){return new e.RsVizFrameRenderer};e.RsVizFrameRenderer.prototype.render=function(t,i){let n=e.PrFactory.createStructure();let r=i.getQueryModel().getVizManager().getVizDef();if(e.notNull(r)&&r.containsKey(e.VizDefConstants.K_CHART)&&i.getAvailableDataCellCount()>0){n.putString("test","testValue")}n.putString("test2","testValue2");return n};e.RsVizFrameRenderer.prototype.renderVisualizationWithResultSet=function(e,t){return this.render(e.getSemanticBindingType(),t)};e.RsVizInstanceRenderer=function(){};e.RsVizInstanceRenderer.prototype=new e.XObject;e.RsVizInstanceRenderer.prototype._ff_c="RsVizInstanceRenderer";e.RsVizInstanceRenderer.create=function(){return new e.RsVizInstanceRenderer};e.RsVizInstanceRenderer.prototype.render=function(t,i){let n=e.PrFactory.createStructure();let r=i.getQueryModel().getVizManager().getVizDef();if(e.notNull(r)&&r.containsKey(e.VizDefConstants.K_CHART)&&i.getAvailableDataCellCount()>0){n.putString("test","testValue")}return n};e.RsVizInstanceRenderer.prototype.renderVisualizationWithResultSet=function(e,t){return this.render(e.getSemanticBindingType(),t)};e.RsHiChartVizUserPrefrence={create:function(){return new e.RsHiChartVizUserPrefrence},userPrefrence:function(t,i,n){if(!e.XString.isEqual(n,e.VizDefConstants.K_SOLID_GAUGE)){let r=i.getStructureByKey(e.VizDefConstants.K_DATA_LABEL);if(e.notNull(r)){let i=r.getStructureByKey(e.VizDefConstants.K_STYLE);let l=i.getStringByKey(e.VizDefConstants.K_COLOR);let o=i.getStringByKey(e.VizDefConstants.K_FONT_WEIGHT);let s=i.getStringByKey(e.VizDefConstants.K_FONT_SIZE);let a=t.getStructureByKey(e.VizDefConstants.K_PLOT_OPTIONS);if(e.notNull(a)){let i=a.getStructureByKey(n);if(e.notNull(i)){let n=i.getStructureByKey(e.VizDefConstants.K_DATA_LABELS);let r=t.getListByKey(e.VizDefConstants.K_Y_AXIS);if(e.notNull(r)){let t=r.getStructureAt(0);if(e.notNull(t)){if(t.containsKey(e.VizDefConstants.K_STACK_LABELS)){let i=t.putNewStructure(e.VizDefConstants.K_STACK_LABELS);i.putBoolean(e.VizDefConstants.K_ENABLED,true);let n=i.putNewStructure(e.VizDefConstants.K_STYLE);if(e.notNull(l)){n.putString(e.VizDefConstants.K_COLOR,l);n.putString(e.VizDefConstants.K_FILL,l)}n.putString(e.VizDefConstants.K_FONT_WEIGHT,o);n.putString(e.VizDefConstants.K_FONT_SIZE,s)}}}if(e.notNull(n)){let t=n.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.notNull(t)){if(e.notNull(l)){t.putString(e.VizDefConstants.K_COLOR,l);t.putString(e.VizDefConstants.K_FILL,l)}t.putString(e.VizDefConstants.K_FONT_WEIGHT,o);t.putString(e.VizDefConstants.K_FONT_SIZE,s)}}}}}let l=i.getStructureByKey(e.VizDefConstants.K_TITLE);if(e.notNull(l)){let i=l.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,true);let n=t.getStructureByKey(e.VizDefConstants.K_TITLE);if(e.notNull(n)){if(i===false){n.putString(e.VizDefConstants.K_TEXT,"")}let t=l.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.notNull(t)){n.put(e.VizDefConstants.K_STYLE,t)}}}let o=i.getStructureByKey(e.VizDefConstants.K_SUB_TITLE);if(e.notNull(o)){let i=o.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,true);let n=t.getStructureByKey(e.VizDefConstants.K_SUBTITLE);if(e.notNull(n)){if(i===false){n.putString(e.VizDefConstants.K_TEXT,"")}let t=o.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.notNull(t)){n.put(e.VizDefConstants.K_STYLE,t)}}}let s=t.getByKey(e.VizDefConstants.K_X_AXIS);let a=e.notNull(s)&&s.isList()?s.asList():null;let u=e.notNull(s)&&s.isStructure()?s.asStructure():e.XCollectionUtils.hasElements(a)?a.getStructureAt(0):null;let p=i.getStructureByKey(e.VizDefConstants.K_GENERAL);if(e.notNull(p)){let t=p.getStructureByKey(e.VizDefConstants.K_AXIS_LABEL);if(e.notNull(t)){if(e.notNull(u)){let i=u.getStructureByKey(e.VizDefConstants.K_LABELS);if(e.isNull(i)){i=u.putNewStructure(e.VizDefConstants.K_LABELS)}let n=t.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.notNull(n)){i.put(e.VizDefConstants.K_STYLE,n)}}}}let c=t.getStructureByKey(e.VizDefConstants.K_LEGEND);if(e.notNull(c)){let t=i.getStructureByKey(e.VizDefConstants.K_LEGEND);if(e.notNull(t)){let i=t.getStructureByKey(e.VizDefConstants.K_LABEL);if(e.notNull(i)){let t=i.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.notNull(t)){c.put(e.VizDefConstants.K_ITEM_STYLE,t)}}}}}return t}};e.RsHiChartVizUtils={addColorGradient:function(t,i,n){if(e.notNull(i)){let r=i.getStructureByKey(e.VizDefConstants.K_COLOR_SCHEME);let l=t.getStructureByKey(e.VizDefConstants.K_COLOR_SYNC);if(!i.getStructureByKey(e.VizDefConstants.K_CHART).getBooleanByKeyExt(e.VizDefConstants.K_IS_EXCLUDE_COLOR_SYNC,false)){if(e.XCollectionUtils.hasElements(r)){let t=r.getStructureByKey(e.VizDefConstants.K_PALETTE_DESC);if(e.notNull(t)){let i=n.putNewStructure(e.VizDefConstants.K_PALETTE);let r=i.putNewList(e.VizDefConstants.K_GRADIENT_KEYS);let l=t.getStructureByKey(e.VizDefConstants.K_GRADIENT);if(e.notNull(l)){let t=l.getKeysAsReadOnlyList();let n=e.XList.create();for(let i=0;i<t.size();i++){n.add(e.XDoubleValue.create(e.XDouble.convertFromString(t.get(i))))}n.sortByComparator(new e.XComparatorDouble);for(let e=0;e<n.size();e++){r.addDouble(n.get(e).getDouble())}i.put(e.VizDefConstants.K_GRADIENT,l)}}}}let o;let s;let a=null;let u=i.getStructureByKey(e.VizDefConstants.K_CHART);if(e.notNull(u)){let i=u.getListByKey(e.VizDefConstants.K_BINDINGS);for(let t=0;t<i.size();t++){o=i.getStructureAt(t);if(e.XString.isEqual(o.getStringByKey(e.VizDefConstants.K_FEED),e.VizDefConstants.K_COLOR)){let t=o.getListByKey(e.VizDefConstants.K_SOURCE);if(t.size()>0){a=t.getStructureAt(0).getStringByKey(e.VizDefConstants.K_ID)}break}}let r=t.getStructureByKey(e.VizDefConstants.K_STORY_WIDE_SETTINGS);if(e.notNull(r)){let t=r.getListByKey(e.VizDefConstants.K_CUSTOM_COLOR_PALETTES);if(e.notNull(t)){let i=t.getStructureAt(0).getStructureByKey(e.VizDefConstants.K_GRADIENT);let n=i.getKeysAsReadOnlyList();let r=e.PrFactory.createList();for(let t=0;t<n.size();t++){let l=e.PrFactory.createList();l.addString(n.get(t));l.addString(i.getStringByKey(n.get(t)));r.add(l)}}}if(e.notNull(l)){s=l.getStructureByKey(a);if(e.notNull(s)){let t=s.getStructureByKey(e.VizDefConstants.K_EXPLICIT_COLOR_ASSIGNMENTS);n.put(e.VizDefConstants.K_EXPLICIT_COLOR_ASSIGNMENTS,t)}}}}},chartLegendBuilder:function(t){let i=t.putNewStructure(e.VizDefConstants.K_LEGEND);i.putBoolean(e.VizDefConstants.K_ENABLED,true);i.putInteger(e.VizDefConstants.K_SYMBOL_RADIUS,0);i.putString(e.VizDefConstants.K_LAYOUT,e.VizDefConstants.V_VERTICAL);i.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_RIGHT);i.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);i.putBoolean(e.VizDefConstants.K_SQUARE_SYMBOL,true);let n=i.putNewStructure(e.VizDefConstants.K_ITEM_STYLE);n.putString(e.VizDefConstants.K_FONT_SIZE,"12px");n.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_NORMAL);n.putString(e.VizDefConstants.K_FONT_SIZE,"12px");let r=i.putNewStructure(e.VizDefConstants.K_ITEM_HOVER_STYLE);r.putString(e.VizDefConstants.K_CURSOR_STYLE,"default")},chartPlotBuilder:function(t,i,n){let r=true;if(e.notNull(n)&&n.hasElements()){let t=n.getStructureByKey(e.VizDefConstants.K_DATA_LABEL);r=t.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,false)}let l=t.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);let o=l.putNewStructure(e.VizDefConstants.K_SERIES);o.putInteger(e.VizDefConstants.K_CROP_THRESHOLD,1e3);let s=l.putNewStructure(i);s.putBoolean(e.VizDefConstants.K_GROUPING,true);let a=s.putNewStructure(e.VizDefConstants.K_DATA_LABELS);a.putBoolean(e.VizDefConstants.K_ENABLED,r);a.putString(e.VizDefConstants.K_FORMAT,"{point.yFormatted} ");let u=a.putNewStructure(e.VizDefConstants.K_STYLE);u.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_FONT_WEIGHT_BOLD);u.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");u.putString(e.VizDefConstants.K_FONT_SIZE,"12px");u.putString(e.VizDefConstants.K_COLOR,"rgb(88,89,91)")},chartTitleBuilder:function(t,i,n){if(e.notNull(i)){let n=t.putNewStructure(e.VizDefConstants.K_TITLE);n.putString(e.VizDefConstants.K_TEXT,i);n.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_LEFT)}if(e.notNull(n)){let i=t.putNewStructure(e.VizDefConstants.K_SUBTITLE);i.putString(e.VizDefConstants.K_TEXT,n);i.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_LEFT)}},checkShowLegend:function(t,i,n,r){let l=i.getStructureByKey(e.VizDefConstants.K_PLOT_OPTIONS);let o=l.getStructureByKey(n);o.putBoolean(e.VizDefConstants.K_SHOW_IN_LEGEND,r);let s=i.getStructureByKey(e.VizDefConstants.K_LEGEND);s.putBoolean(e.VizDefConstants.K_ENABLED,r);if(e.isNull(t)){return}let a=t.getStructureByKey(e.VizDefConstants.K_CHART);if(e.isNull(a)){return}let u=false;let p=r;let c=a.getStructureByKey(e.VizDefConstants.K_PROPERTIES);if(e.notNull(c)){let t=c.getStructureByKey(e.VizDefConstants.K_LEGEND_GROUP);if(e.notNull(t)){if(t.getElementTypeByKey(e.VizDefConstants.K_VISIBLE)===e.PrElementType.BOOLEAN){u=t.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,r)}else if(t.getElementTypeByKey(e.VizDefConstants.K_VISIBLE)===e.PrElementType.STRING){u=e.XBoolean.convertFromStringWithDefault(t.getStringByKey(e.VizDefConstants.K_VISIBLE),r)}else{u=r}let i=t.getBooleanByKeyExt(e.VizDefConstants.K_RESPONSIVE,true);p=u&&!i||r&&i;s.putBoolean(e.VizDefConstants.K_ENABLED,p)}}o.putBoolean(e.VizDefConstants.K_SHOW_IN_LEGEND,r)},create:function(){return new e.RsHiChartVizUtils},datalabelPloter:function(t,i){let n=t.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,true);let r=t.getBooleanByKeyExt(e.VizDefConstants.K_IS_HIDDEN_WHEN_OVERLAP,true);let l=t.getStructureByKey(e.VizDefConstants.K_STYLE);let o=l.getStringByKey(e.VizDefConstants.K_FONT_SIZE);let s=l.getStringByKey(e.VizDefConstants.K_FONT_WEIGHT);let a=l.getStringByKey(e.VizDefConstants.K_FONT_FAMILY);let u=l.getStringByKey(e.VizDefConstants.K_COLOR);i.putBoolean(e.VizDefConstants.K_ENABLED,n);i.putBoolean(e.VizDefConstants.K_HIDE_WHEN_OVERLAP,r);let p=i.putNewStructure(e.VizDefConstants.K_STYLE);p.putString(e.VizDefConstants.K_FONT_FAMILY,a);p.putString(e.VizDefConstants.K_FONT_SIZE,o);p.putString(e.VizDefConstants.K_FONT_WEIGHT,s);if(!e.XString.isEqual(u,null)){p.putString("fill",u);p.putString(e.VizDefConstants.K_COLOR,u)}p.putString("textOutline","0px");return i},vizProcessor:function(t,i,n,r){let l=null;let o=null;let s;let a;let u;let p;let c=e.PrFactory.createStructure();if(e.notNull(t)){let g=t.getStructureByKey(e.VizDefConstants.K_CHART);let m=n.putNewStructure(e.VizDefConstants.K_LEGEND);if(e.notNull(g)){l=g.getStringByKey(e.VizDefConstants.K_TITLE);o=g.getStringByKey(e.VizDefConstants.K_SUB_TITLE);e.RsHiChartVizUtils.chartTitleBuilder(n,l,o);let t=n.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);let f=t.putNewStructure(r);let C=t.putNewStructure(e.VizDefConstants.K_SERIES);C.putString(e.VizDefConstants.K_BORDER_COLOR,e.VizDefConstants.K_TRANSPARENT);let d=C.putNewStructure(e.VizDefConstants.K_MARKER);d.putString(e.VizDefConstants.K_SYMBOL,"circle");let y=f.putNewStructure(e.VizDefConstants.K_DATA_LABELS);s=g.getStructureByKey(e.VizDefConstants.K_PROPERTIES);if(e.notNull(s)){let t=s.getStructureByKey(e.VizDefConstants.K_GENERAL);if(e.notNull(t)){u=t.getStructureByKey(e.VizDefConstants.K_LAYOUT);if(e.notNull(u)){let t=u.getIntegerByKey(e.VizDefConstants.K_PADDING_BOTTOM);i.putInteger(e.VizDefConstants.K_SPACING_BOTTOM,t)}else{i.putInteger(e.VizDefConstants.K_SPACING_BOTTOM,0)}}a=s.getStructureByKey(e.VizDefConstants.K_LEGEND);if(e.notNull(a)){m=n.putNewStructure(e.VizDefConstants.K_LEGEND);let t=a.getStructureByKey(e.VizDefConstants.K_LABEL);if(e.notNull(t)){let i=t.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.notNull(i)){let t=i.getStringByKey(e.VizDefConstants.K_FONT_FAMILY);let n=i.getStringByKey(e.VizDefConstants.K_FONT_SIZE);let r=i.getStringByKey(e.VizDefConstants.K_FONT_WEIGHT);let l=m.putNewStructure(e.VizDefConstants.K_ITEM_STYLE);l.putString(e.VizDefConstants.K_FONT_FAMILY,t);l.putString(e.VizDefConstants.K_FONT_WEIGHT,r);l.putString(e.VizDefConstants.K_FONT_SIZE,n)}}}p=s.getStructureByKey(e.VizDefConstants.K_LEGEND_GROUP);if(e.notNull(p)){let t=p.getStructureByKey(e.VizDefConstants.K_LAYOUT);if(e.notNull(t)){let i=t.getStringByKey(e.VizDefConstants.K_POSITION);m.putString(e.VizDefConstants.K_VERTICAL_ALIGN,i)}}c=s.getStructureByKey(e.VizDefConstants.K_PLOT_AREA);if(e.notNull(c)){let t=c.getStructureByKey(e.VizDefConstants.K_DATA_LABEL);if(e.notNull(t)){y=e.RsHiChartVizUtils.datalabelPloter(t,y)}let i=C.putNewStructure(e.VizDefConstants.K_DATA_LABELS);i.putString(e.VizDefConstants.K_FORMAT,"{point.yFormatted}")}}}}else{a=n.putNewStructure(e.VizDefConstants.K_LEGEND);a.putBoolean(e.VizDefConstants.K_ENABLED,true);i.putInteger(e.VizDefConstants.K_SPACING_TOP,0);e.RsHiChartVizUtils.chartTitleBuilder(n,l,o);e.RsHiChartVizUtils.chartLegendBuilder(n);e.RsHiChartVizUtils.chartPlotBuilder(n,r,c)}}};e.RsHiChartVizUtilsCorrelation={create:function(){return new e.RsHiChartVizUtilsCorrelation},legendStyler:function(t){let i=t.putNewStructure(e.VizDefConstants.K_LEGEND);i.putBoolean(e.VizDefConstants.K_ENABLED,true);i.putBoolean(e.VizDefConstants.K_SQUARE_SYMBOL,true);i.putInteger(e.VizDefConstants.K_SYMBOL_RADIUS,0);i.putString(e.VizDefConstants.K_LAYOUT,e.VizDefConstants.V_HORIZONTAL);i.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_CENTER);i.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);let n=i.putNewStructure(e.VizDefConstants.K_ITEM_STYLE);n.putString(e.VizDefConstants.K_FONT_SIZE,"12px");n.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_NORMAL);n.putString(e.VizDefConstants.K_FONT_SIZE,"12px")},renderValueAxis:function(t,i,n){let r=t.putNewStructure(e.VizDefConstants.K_TITLE);t.putInteger(e.VizDefConstants.K_GRIDLINE_WIDTH,0);if(e.isNull(i)){return}t.putBoolean(e.VizDefConstants.K_VISIBLE,i.getBooleanByKey(e.VizDefConstants.K_VISIBLE));let l=i.getStructureByKey(e.VizDefConstants.K_AXIS_LINE);t.putInteger(e.VizDefConstants.K_LINE_WIDTH,l.getBooleanByKey(e.VizDefConstants.K_VISIBLE)?3:0);t.putString(e.VizDefConstants.K_LINE_COLOR,"#bbbdbf");let o=i.getStructureByKey(e.VizDefConstants.K_AXIS_TICK);let s=0;if(e.notNull(o)&&o.getBooleanByKey(e.VizDefConstants.K_VISIBLE)){s=o.getIntegerByKey(e.VizDefConstants.K_SIZE)}t.putInteger(e.VizDefConstants.K_TICK_LENGTH,s);t.putString(e.VizDefConstants.K_TICK_COLOR,"rgb(166, 168, 171)");let a=i.getStructureByKey(e.VizDefConstants.K_LABEL);let u=t.putNewStructure(e.VizDefConstants.K_LABEL);u.putBoolean(e.VizDefConstants.K_ENABLED,a.getBooleanByKey(e.VizDefConstants.K_VISIBLE));let p=t.putNewStructure(e.VizDefConstants.K_STYLE);let c=a.getStructureByKey(e.VizDefConstants.K_STYLE);p.putString(e.VizDefConstants.K_COLOR,c.getStringByKey(e.VizDefConstants.K_COLOR));p.putString(e.VizDefConstants.K_FONT_FAMILY,a.getStringByKey(e.VizDefConstants.K_FONT_FAMILY));p.putString(e.VizDefConstants.K_FONT_SIZE,a.getStringByKey(e.VizDefConstants.K_FONT_SIZE));let g=i.getStructureByKey(e.VizDefConstants.K_TITLE);r.putBoolean(e.VizDefConstants.K_ENABLED,g.getBooleanByKey(e.VizDefConstants.K_VISIBLE));if(n){r.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_MIDDLE)}let m=r.putNewStructure(e.VizDefConstants.K_STYLE);let f=g.getStructureByKey(e.VizDefConstants.K_STYLE);m.putString(e.VizDefConstants.K_COLOR,"#000000");m.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.K_BOLD);p.putString(e.VizDefConstants.K_COLOR,f.getStringByKey(e.VizDefConstants.K_COLOR));p.putString(e.VizDefConstants.K_FONT_FAMILY,f.getStringByKey(e.VizDefConstants.K_FONT_FAMILY));p.putString(e.VizDefConstants.K_FONT_SIZE,f.getStringByKey(e.VizDefConstants.K_FONT_SIZE))}};e.RsHiChartVizUtilsHeatmap={create:function(){return new e.RsHiChartVizUtilsHeatmap},rendrerHeatmap:function(t,i,n,r){let l=t.getStructureByKey(e.VizDefConstants.K_PLOT_OPTIONS);if(e.isNull(l)){l=t.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS)}let o=l.getStructureByKey(i);o.putBoolean(e.VizDefConstants.K_COLOR_BY_POINT,false);let s=t.getStructureByKey(e.VizDefConstants.K_CHART);s.putString(e.VizDefConstants.K_TYPE,i);let a=true;s.putBoolean(e.VizDefConstants.K_INVERTED,a);let u=t.putNewStructure(e.VizDefConstants.K_COLOR_AXIS);let p=t.getStructureByKey(e.VizDefConstants.K_PALETTE);if(e.notNull(p)){let t=e.PrFactory.createList();let i=0;let n="#FFFFFF";let r=p.getListByKey(e.VizDefConstants.K_GRADIENT_KEYS);let l=p.getStructureByKey(e.VizDefConstants.K_GRADIENT);for(let o=0;o<r.size();o++){let s=e.PrFactory.createList();i=r.getDoubleAt(o)/100;n=l.getStringByKey(e.XDouble.convertToString(r.getDoubleAt(r.size()-1-o)));s.addDouble(i);s.addString(n);t.add(s)}u.put(e.VizDefConstants.K_STOPS,t)}let c=e.XString.isEqual(i,e.VizDefConstants.K_HEATMAP);if(e.notNull(r)){let i=e.PrFactory.createStructure();let n=0;let l=0;let o="#FFFFFF";let s=r.getListByKey(e.VizDefConstants.K_THRESHOLDS);if(e.notNull(s)&&c){let r=e.PrFactory.createList();let a=1;if(t.containsKey(e.VizDefConstants.K_MAX_ELEMENT)){a=e.XMath.max(e.XDouble.convertToInt(t.getDoubleByKey(e.VizDefConstants.K_MAX_ELEMENT)),e.XDouble.convertToInt(t.getDoubleByKey(e.VizDefConstants.K_MAX_ELEMENT))*-1)}for(let t=0;t<s.size();t++){i=s.getStructureAt(t);let u=e.PrFactory.createList();n=i.getDoubleByKey(e.VizDefConstants.K_LOW);o=i.getStringByKey(e.VizDefConstants.K_COLOR);l=n/a;u.addDouble(l);u.addString(o);r.add(u)}u.put(e.VizDefConstants.K_STOPS,r)}}let g=t.getStructureByKey(e.VizDefConstants.K_LEGEND);let m=e.PrFactory.createList();let f=e.PrFactory.createStructure();let C=e.PrFactory.createList();let d=e.PrFactory.createStructure();if(c){m=t.getListByKey(e.VizDefConstants.K_X_AXIS);if(e.isNull(m)){m=t.putNewList(e.VizDefConstants.K_X_AXIS);f=m.addNewStructure()}else{f=m.getStructureAt(0)}C=t.getListByKey(e.VizDefConstants.K_Y_AXIS);if(e.isNull(C)){C=t.putNewList(e.VizDefConstants.K_Y_AXIS);d=C.addNewStructure()}else{d=C.getStructureAt(0)}}let y=o.getStructureByKey(e.VizDefConstants.K_DATA_LABELS);let h=d.putNewStructure(e.VizDefConstants.K_TITLE);let _=f.putNewStructure(e.VizDefConstants.K_TITLE);h.putString(e.VizDefConstants.K_TEXT,"");_.putString(e.VizDefConstants.K_TEXT,"");let T="#a0f3ff";let S="#003c6b";let R=true;if(e.notNull(n)){let t=n.getStructureByKey(e.VizDefConstants.K_COLOR_SCHEME);if(e.notNull(t)){let i=t.getListByKey(e.VizDefConstants.K_PALETTE_COLORS);if(e.notNull(i)){if(i.size()>0){S=i.getStringAt(0);T=i.getStringAt(i.size()-1)}}}let r=n.getStructureByKey(e.VizDefConstants.K_CHART).getStructureByKey(e.VizDefConstants.K_PROPERTIES);if(e.notNull(r)){let t=r.getStructureByKey(e.VizDefConstants.K_CATEGORY_AXIS2);if(e.notNull(t)){f=e.RsHiChartUtils.axisPloter(t,f,i,true)}let n=r.getStructureByKey(e.VizDefConstants.K_CATEGORY_AXIS);if(e.notNull(n)){d=e.RsHiChartUtils.axisPloter(n,d,i,true)}let l=r.getStructureByKey(e.VizDefConstants.K_PLOT_AREA);if(e.notNull(l)){y.putBoolean(e.VizDefConstants.K_ENABLED,R)}}u.putString(e.VizDefConstants.K_MIN_COLOR,T);u.putString(e.VizDefConstants.K_MAX_COLOR,S);u.putBoolean(e.VizDefConstants.K_REVERSED,false)}else{let t=d.putNewStructure(e.VizDefConstants.K_LABELS);let i=t.putNewStructure(e.VizDefConstants.K_STYLE);i.putString(e.VizDefConstants.K_FONT_SIZE,"13px");i.putString(e.VizDefConstants.K_FILL,"rgb(166, 168, 171)");i.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_FONT_WEIGHT_NORMAL);f.putString(e.VizDefConstants.K_LINE_COLOR,"#FFFFFF");let n=f.putNewStructure(e.VizDefConstants.K_LABELS);let r=n.putNewStructure(e.VizDefConstants.K_STYLE);r.putString(e.VizDefConstants.K_FONT_SIZE,"13px");r.putString(e.VizDefConstants.K_FILL,"rgb(166, 168, 171)");r.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_FONT_WEIGHT_NORMAL);u.putString(e.VizDefConstants.K_MIN_COLOR,T);u.putString(e.VizDefConstants.K_MAX_COLOR,S);u.putInteger(e.VizDefConstants.K_MIN,1)}let D=e.XString.isEqual(i,e.VizDefConstants.K_TREEMAP);if(D){o.putString(e.VizDefConstants.K_TYPE,i);let t=o.putNewList(e.VizDefConstants.K_LEVELS);let n=t.addNewStructure();n.putInteger(e.VizDefConstants.K_LEVEL,1);n.putInteger(e.VizDefConstants.K_BORDER_WIDTH,6);let r=n.putNewStructure(e.VizDefConstants.K_DATA_LABELS);r.putBoolean(e.VizDefConstants.K_ENABLED,true);r.putString(e.VizDefConstants.K_FORMAT,"<div>{point.name}</div><br/>");r.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_LEFT);r.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);let l=r.putNewStructure(e.VizDefConstants.K_STYLE);l.putString(e.VizDefConstants.K_FONT_SIZE,"14px");let s=t.addNewStructure();s.putInteger(e.VizDefConstants.K_LEVEL,2);let a=s.putNewStructure(e.VizDefConstants.K_DATA_LABELS);a.putBoolean(e.VizDefConstants.K_ENABLED,true);a.putString(e.VizDefConstants.K_FORMAT,"<div>{point.name}</div><br/><div>{point.valueFormatted}</div >");g.putInteger(e.VizDefConstants.K_Y,25)}y.putBoolean(e.VizDefConstants.K_ENABLED,R);y.putBoolean(e.VizDefConstants.K_HIDE_WHEN_OVERLAP,true);let A=y.putNewStructure(e.VizDefConstants.K_STYLE);A.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");A.putString(e.VizDefConstants.K_FONT_SIZE,"10px");A.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_FONT_WEIGHT_NORMAL);A.putString(e.VizDefConstants.K_FILL,"black");A.putString(e.VizDefConstants.K_COLOR,"black");A.putString(e.VizDefConstants.K_TEXT_OUTLINE,"0px");y.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_CENTER);g.putBoolean(e.VizDefConstants.K_ENABLED,true);g.putString(e.VizDefConstants.K_LAYOUT,e.VizDefConstants.V_VERTICAL);g.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_RIGHT);g.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_MIDDLE);g.putInteger("x",15);let E=g.putNewStructure(e.VizDefConstants.K_STYLE);E.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");return t}};e.RsHiChartVizUtilsSimple={addReferenceLine:function(t,i,n,r,l,o){let s=false;let a=t.getStructureByKey(e.VizDefConstants.K_ANALYTIC_OBJECTS);if(e.notNull(a)){let t=a.getListByKey(e.VizDefConstants.K_REFERENCELINES);if(e.notNull(t)){if(t.hasElements()){s=true;for(let s=0;s<t.size();s++){let a=t.getStructureAt(s);let u=a.getListByKey(e.VizDefConstants.K_MARKERS);let p=a.getStringByKey(e.VizDefConstants.K_FEED);for(let t=0;t<u.size();t++){let s=u.getStructureAt(t);let a=0;if(s.containsKey(e.VizDefConstants.K_DYNAMIC_VALUE)){let t=s.getStructureByKey(e.VizDefConstants.K_DYNAMIC_VALUE);let i=t.getStringByKey(e.VizDefConstants.K_AGGREGATION_TYPE);let n=t.getStructureByKey(e.VizDefConstants.K_MEASURE).getStructureByKey(e.VizDefConstants.K_ID).getStringByKey(e.VizDefConstants.K_ID);let u=r.getTupleIndexForMemberName(n);if(!e.XCollectionUtils.hasElements(u)){let t=l.getTupleIndexForMemberName(n);if(e.XCollectionUtils.hasElements(t)){a=e.RsHiChartVizUtilsSimple.getAggregateValue(t,r,i,false,o)}}else{a=e.RsHiChartVizUtilsSimple.getAggregateValue(u,l,i,true,o)}}else{a=e.RsHiChartRenderer.getDoubleValueExtended(s,e.VizDefConstants.K_VALUE,0)}let c=e.VizDefConstants.V_BLACK;if(s.hasStringByKey(e.VizDefConstants.K_COLOR)){c=s.getStringByKey(e.VizDefConstants.K_COLOR)}let g=s.getStringByKey("belowColor");let m=s.getStringByKey("aboveColor");let f=s.getStructureByKey(e.VizDefConstants.K_LABEL);let C=f.getStringByKey(e.VizDefConstants.K_TEXT);let d=f.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.XString.isEqual(e.VizDefConstants.K_VALUE_AXIS,p)){e.RsHiChartVizUtilsSimple.ploLineBuilder(i,a,g,m,c,C,d)}if(e.XString.isEqual(e.VizDefConstants.K_VALUE_AXIS2,p)){e.RsHiChartVizUtilsSimple.ploLineBuilder(n,a,g,m,c,C,d)}}}}}}return s},create:function(){return new e.RsHiChartVizUtilsSimple},dataLabelAlignment:function(t,i,n,r){let l=t.putNewStructure(e.VizDefConstants.K_STACK_LABELS);l.putBoolean(e.VizDefConstants.K_ENABLED,r);l.putString(e.VizDefConstants.K_FORMAT,e.XStringUtils.concatenate3("{total:,.",e.XInteger.convertToString(n),"f}"));if(e.XString.isEqual(e.VizDefConstants.V_CHART_TYPE_BAR,i)){let t=l.putNewStructure(e.VizDefConstants.K_STYLE);t.putString(e.VizDefConstants.K_COLOR,"rgb(88,89,91)");t.putString(e.VizDefConstants.K_FONT_SIZE,"12px");t.putString(e.VizDefConstants.K_FONT_STYLE,e.VizDefConstants.V_NORMAL);t.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.K_BOLD)}else if(e.XString.isEqual(e.VizDefConstants.V_CHART_TYPE_COLUMN,i)){l.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_CENTER);l.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);l.putInteger(e.VizDefConstants.K_Y,-20);l.putInteger(e.VizDefConstants.K_X,5)}else{l.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_CENTER);l.putInteger(e.VizDefConstants.K_Y,-20)}},dataLabelBuilder:function(t,i){let n=t.putNewStructure(e.VizDefConstants.K_STYLE);t.putBoolean(e.VizDefConstants.K_ENABLED,true);t.putBoolean(e.VizDefConstants.K_HIDE_WHEN_OVERLAP,true);if(e.XString.isEqual(e.XString.toLowerCase(e.ChartStackingType.PERCENT.getName()),i)){t.putString(e.VizDefConstants.K_FORMAT,"{point.percentage:.2f} %")}else{t.putString(e.VizDefConstants.K_FORMAT,"{point.yFormatted}")}n.putString(e.VizDefConstants.K_FILL,"black");n.putString(e.VizDefConstants.K_COLOR,"black");n.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");n.putString(e.VizDefConstants.K_FONT_SIZE,"12px");n.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_NORMAL);n.putString(e.VizDefConstants.K_TEXT_OUTLINE,"0px")},getAggregateValue:function(t,i,n,r,l){let o=0;let s=0;for(let a=0;a<i.getTuplesCount();a++){if(!i.getTupleAt(a).isTotal()){for(let i=0;i<t.size();i++){let u=t.get(i).getInteger();let p;if(r){p=l.getDataCell(u,a)}else{p=l.getDataCell(a,u)}if(p.getValueException()!==e.ValueException.NORMAL){continue}let c=p.getDouble();if(o===0){s=c}else if(e.XString.isEqual(n,"max")){if(s<c){s=c}}else if(e.XString.isEqual(n,"min")){if(s>c){s=c}}else{s=s+c}o++}}}if(e.XString.isEqual(n,"average")||e.XString.isEqual(n,"avg")){return s/o}return s},legendStyler:function(t){let i=t.getStructureByKey(e.VizDefConstants.K_LEGEND);if(e.notNull(i)){i.putBoolean(e.VizDefConstants.K_SQUARE_SYMBOL,true);i.putInteger(e.VizDefConstants.K_SYMBOL_RADIUS,0);i.putString(e.VizDefConstants.K_LAYOUT,e.VizDefConstants.V_VERTICAL);i.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_RIGHT);i.putInteger(e.VizDefConstants.K_WIDTH,200);i.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);let t=i.putNewStructure(e.VizDefConstants.K_ITEM_STYLE);t.putString(e.VizDefConstants.K_FONT_SIZE,"12px");t.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_FONT_WEIGHT_BOLD);t.putString(e.VizDefConstants.K_FONT_SIZE,"12px");let n=i.putNewStructure(e.VizDefConstants.K_ITEM_HOVER_STYLE);n.putString(e.VizDefConstants.K_CURSOR_STYLE,"default")}},ploLineBuilder:function(t,i,n,r,l,o,s){let a="#000000";let u=t.containsKey(e.VizDefConstants.K_PLOT_LINES)?t.getListByKey(e.VizDefConstants.K_PLOT_LINES):t.putNewList(e.VizDefConstants.K_PLOT_LINES);let p=u.addNewStructure();if(e.notNull(l)){a=l}p.putString(e.VizDefConstants.K_COLOR,a);let c=p.putNewStructure(e.VizDefConstants.K_LABEL);if(e.notNull(o)){c.putString(e.VizDefConstants.K_TEXT,o)}else{c.putString(e.VizDefConstants.K_TEXT,e.XDouble.convertToString(i))}let g=c.putNewStructure(e.VizDefConstants.K_STYLE);g.putString(e.VizDefConstants.K_COLOR,s.getStringByKey(e.VizDefConstants.K_COLOR));p.putString(e.VizDefConstants.K_DASH_STYLE,e.VizDefConstants.K_SHORT_DOT);c.putInteger(e.VizDefConstants.K_ROTATION,0);p.putDouble(e.VizDefConstants.K_VALUE,i);p.putInteger(e.VizDefConstants.K_WIDTH,2);let m=t.containsKey(e.VizDefConstants.K_PLOT_BANDS)?t.getListByKey(e.VizDefConstants.K_PLOT_BANDS):t.putNewList(e.VizDefConstants.K_PLOT_BANDS);if(e.notNull(n)){let t=m.addNewStructure();t.putString(e.VizDefConstants.K_COLOR,e.RsHiChartVizUtilsSimple.setColorAlpha(n,.2));t.putDouble(e.VizDefConstants.K_FROM,0);t.putDouble(e.VizDefConstants.K_TO,i)}if(e.notNull(r)){let t=m.addNewStructure();t.putString(e.VizDefConstants.K_COLOR,e.RsHiChartVizUtilsSimple.setColorAlpha(r,.2));t.putDouble(e.VizDefConstants.K_FROM,i);t.putDouble(e.VizDefConstants.K_TO,i*100)}},plotOptionChart:function(t,i,n,r,l,o,s){let a=t.putNewStructure(e.VizDefConstants.K_TITLE);let u=a.putNewStructure(e.VizDefConstants.K_STYLE);u.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_FONT_WEIGHT_BOLD);a.putString(e.VizDefConstants.K_TEXT,s);t.putInteger(e.VizDefConstants.K_GRID_LINE_WIDTH,0);let p;p=r.getStructureByKey(i);if(l===1||e.isNull(p)){p=r.putNewStructure(i)}if(e.XStringUtils.isNotNullAndNotEmpty(n)&&!e.XString.isEqual(n,"null")){p.putString(e.VizDefConstants.K_STACKING,n)}p.putInteger(e.VizDefConstants.K_Y_AXIS,l);p.putBoolean(e.VizDefConstants.K_COLOR_BY_POINT,false);p.putDouble(e.VizDefConstants.K_POINT_PADDING,0);if(e.XString.isEqual(e.VizDefConstants.V_CHART_TYPE_BOXPLOT,i)){p.putString(e.VizDefConstants.K_FILL_COLOR,o);t.putInteger(e.VizDefConstants.K_TICK_AMOUNT,4)}let c=p.getStructureByKey(e.VizDefConstants.K_DATA_LABELS);if(e.isNull(c)){c=p.putNewStructure(e.VizDefConstants.K_DATA_LABELS)}e.RsHiChartVizUtilsSimple.dataLabelBuilder(c,n)},setColorAlpha:function(t,i){let n=null;let r=e.XDouble.convertToString(i);if(e.notNull(t)){if(e.XString.startsWith(t,"rgb")){let i=e.XString.indexOf(t,")");if(i>0){n=e.XString.replace(t,"rgb","rgba");let i=e.XStringUtils.concatenate3(",",r,")");n=e.XString.replace(n,")",i)}}else if(e.XString.isEqual(t,"transparent")){n=e.XStringUtils.concatenate3("rgba(255,255,255,",r,")")}else{n=t}}return n}};e.RscAxisReference=function(){};e.RscAxisReference.prototype=new e.XObject;e.RscAxisReference.prototype._ff_c="RscAxisReference";e.RscAxisReference.createForEmptyResultSet=function(t,i,n,r){let l=e.RscAxisReference.createInternal(t);l.setupForEmptyResultSet(i,n,r);return l};e.RscAxisReference.createForStructureProjectionInternal=function(t,i,n,r){let l=e.RscAxisReference.createInternal(t);l.setupForProjection(i,n,r);return l};e.RscAxisReference.createForValidResultSet=function(t,i,n,r){let l=e.RscAxisReference.createInternal(t);l.setupForValidResultSet(i,n,r);return l};e.RscAxisReference.createInternal=function(t){let i=new e.RscAxisReference;i.setup();i.setGridContainer(t);return i};e.RscAxisReference.createMergedAxis=function(t,i,n,r){let l=e.RscAxisReference.createInternal(n);l.setupForMerge(t,i,n,r);return l};e.RscAxisReference.prototype.m_axisType=null;e.RscAxisReference.prototype.m_componentsOnAxis=null;e.RscAxisReference.prototype.m_dimensionReferences=null;e.RscAxisReference.prototype.m_gridContainer=null;e.RscAxisReference.prototype.m_modelDimensionsOnAxis=null;e.RscAxisReference.prototype.m_resultSetDimensionsOnAxis=null;e.RscAxisReference.prototype.m_structureMembersOnAxis=null;e.RscAxisReference.prototype.m_tupleTotalsCount=0;e.RscAxisReference.prototype.m_tuplesOnAxis=null;e.RscAxisReference.prototype.m_visibleComponentsOnAxis=null;e.RscAxisReference.prototype.addFromResultSetFields=function(t,i,n,r,l,o,s,a){let u=t.size();let p;let c=s;let g=0;for(p=0;p<u;p++){let s=i.getFieldByName(t.get(p).getName());let u=s.getAttribute();let m="";if(e.notNull(u)&&!r.contains(u)){m=u.getText();if(e.isNull(m)){m=u.getName()}if(u===i.getMainAttribute()){m=e.RscMappingUtils.getDimText(a,i)}}else if(p===0&&e.isNull(u)&&e.isNull(o)&&e.RscMappingUtils.isImplicitMainField(i,s)){m=e.RscMappingUtils.getDimText(a,i)}let f=s.getObtainability()!==e.ObtainabilityType.USER_INTERFACE;let C=e.RscMappingUtils.isMainFieldGeneric(o,s,i,l);let d;if(!f){d=s.getText()}else if(C||l===e.FieldLayoutType.ATTRIBUTE_BASED){d=m;m=""}else{d=s.getText();if(e.isNull(d)){d=s.getName()}}if(f&&e.notNull(u)){r.add(u)}let y=e.RscFieldReference.create(this,d,s.getName(),n,s,f?c:-1,C,f);this.m_componentsOnAxis.add(y);if(f){this.m_visibleComponentsOnAxis.add(y);c++;g++}}return g};e.RscAxisReference.prototype.createForStructureProjection=function(t,i){let n=e.XStream.of(t).filter(e=>this.m_modelDimensionsOnAxis.contains(e)).collect(e.XStreamCollector.toList());let r=e.XListOfNameObject.create();if(n.size()>0){let t=i.getByKey(n.get(0).getName());let l=n.size()>1?i.getByKey(n.get(1).getName()):null;for(let i=0;i<t.size();i++){let n=e.RscMeasureReference.createForValueHelpNode(t.get(i));if(e.XCollectionUtils.hasElements(l)){for(let t=0;t<l.size();t++){r.add(e.RscDataCellReference.create(n,e.RscMeasureReference.createForValueHelpNode(l.get(t))))}}else{r.add(n)}}}return e.RscAxisReference.createForStructureProjectionInternal(this.getGridContainer(),n,r,this)};e.RscAxisReference.prototype.getAxisType=function(){return this.m_axisType};e.RscAxisReference.prototype.getComponentByName=function(e){return this.m_componentsOnAxis.getByKey(e)};e.RscAxisReference.prototype.getComponentsOnAxis=function(){return this.m_componentsOnAxis};e.RscAxisReference.prototype.getDimensionMember=function(t){let i=e.XStream.of(this.m_visibleComponentsOnAxis).find(i=>e.XString.isEqual(i.getName(),t));return i.isPresent()?i.get().getStructureMember():null};e.RscAxisReference.prototype.getDimensionReference=function(e){return this.m_dimensionReferences.getByKey(e)};e.RscAxisReference.prototype.getDimensionReferenceBySemanticObject=function(t){return e.XStream.of(this.m_dimensionReferences).find(i=>e.XString.isEqual(i.getDimension().getSemanticObject(),t))};e.RscAxisReference.prototype.getGridContainer=function(){return e.XWeakReferenceUtil.getHardRef(this.m_gridContainer)};e.RscAxisReference.prototype.getMeasureReference=function(t){let i=e.XStream.of(this.m_visibleComponentsOnAxis).find(i=>e.XString.isEqual(i.getName(),t));return i.isPresent()?i.get():null};e.RscAxisReference.prototype.getModelDimensionsOnAxis=function(){return this.m_modelDimensionsOnAxis};e.RscAxisReference.prototype.getOrCreateComponentForField=function(t,i){let n=i.getDimension();let r=e.isNull(n)?null:n.getMainAttribute();let l=e.isNull(r)?null:r.getFields();let o=e.isNull(n)?null:n.getFieldLayoutType();let s=e.RscMappingUtils.isMainFieldGeneric(l,i,n,o);let a=e.RscFieldReference.create(this,i.getText(),i.getName(),t,i,-1,s,false);this.m_componentsOnAxis.add(a);return a};e.RscAxisReference.prototype.getOrCreateDimensionReference=function(t,i,n){if(!this.m_dimensionReferences.containsKey(i)){let r=t.getDimensionByName(i);if(e.notNull(r)){this.m_dimensionReferences.put(i,e.RscDimensionReference.create(this,i,r.getText(),r,n))}}return this.m_dimensionReferences.getByKey(i)};e.RscAxisReference.prototype.getResultSetDimensionsOnAxis=function(){return this.m_resultSetDimensionsOnAxis};e.RscAxisReference.prototype.getStructureMembersOnAxis=function(){return this.m_structureMembersOnAxis};e.RscAxisReference.prototype.getTupleAt=function(e){return e>-1&&e<this.m_tuplesOnAxis.size()?this.m_tuplesOnAxis.get(e):null};e.RscAxisReference.prototype.getTuplesLoadedCount=function(){return e.XStream.of(this.m_tuplesOnAxis).filterNullValues().countItems()};e.RscAxisReference.prototype.getTuplesOnAxis=function(){return this.m_tuplesOnAxis};e.RscAxisReference.prototype.getTuplesTotalCount=function(){return this.m_tupleTotalsCount};e.RscAxisReference.prototype.getVisibleComponentsOnAxis=function(){return this.m_visibleComponentsOnAxis};e.RscAxisReference.prototype.hasActiveHierarchy=function(){return e.XStream.of(this.m_modelDimensionsOnAxis).anyMatch(e=>e.isHierarchyActive())||this.m_resultSetDimensionsOnAxis.size()===1&&this.m_resultSetDimensionsOnAxis.get(0).isUniversalDisplayHierarchyDimension()&&this.m_modelDimensionsOnAxis.size()>1};e.RscAxisReference.prototype.insertTuple=function(t,i){while(t>this.m_tuplesOnAxis.size()-1){this.m_tuplesOnAxis.add(null)}let n=this.m_tuplesOnAxis.get(t);this.m_tuplesOnAxis.set(t,i);e.XObjectExt.release(n)};e.RscAxisReference.prototype.isComplete=function(){return this.getTuplesLoadedCount()===this.getTuplesTotalCount()};e.RscAxisReference.prototype.prepareForStructureProjection=function(t){let i=e.XSimpleMap.create();let n=e.XPromiseList.create();let r=e.XStream.of(t).filter(e=>this.m_modelDimensionsOnAxis.contains(e)).collect(e.XStreamCollector.toList());for(let t=0;t<r.size();t++){let l=r.get(t);n.add(l.getMemberManager().getMembers());i.put(l,e.XListOfNameObject.create())}return e.XPromise.allSettled(n).then(t=>{for(let r=0;r<t.size();r++){if(n.get(r).getState()===e.XPromiseState.FULFILLED){let n=t.get(r);let l=n.getValue();if(e.XCollectionUtils.hasElements(l)){i.put(l.get(0).getDimension(),l)}}}let l=e.XListOfNameObject.create();if(r.size()>0){let t=i.getByKey(r.get(0));let n=r.size()>1?i.getByKey(r.get(1)):null;for(let i=0;i<t.size();i++){let r=e.RscMeasureReference.createForValueHelpNode(t.get(i));if(e.XCollectionUtils.hasElements(n)){for(let t=0;t<n.size();t++){l.add(e.RscDataCellReference.create(r,e.RscMeasureReference.createForValueHelpNode(n.get(t))))}}else{l.add(r)}}}return e.RscAxisReference.createForStructureProjectionInternal(this.getGridContainer(),r,l,this)},null)};e.RscAxisReference.prototype.releaseObject=function(){this.m_componentsOnAxis=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_componentsOnAxis);this.m_tuplesOnAxis=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_tuplesOnAxis);this.m_visibleComponentsOnAxis=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_visibleComponentsOnAxis);this.m_modelDimensionsOnAxis=e.XObjectExt.release(this.m_modelDimensionsOnAxis);this.m_resultSetDimensionsOnAxis=e.XObjectExt.release(this.m_resultSetDimensionsOnAxis);this.m_structureMembersOnAxis=e.XObjectExt.release(this.m_structureMembersOnAxis);this.m_dimensionReferences=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_dimensionReferences);this.m_tupleTotalsCount=0;this.m_axisType=null;e.XObject.prototype.releaseObject.call(this)};e.RscAxisReference.prototype.retrieveActionParameterDimensionIndex=function(t){let i=-1;let n=t.getDimension();let r=t.getField();let l=t.getSemanticObject();if(e.isNull(n)&&e.notNull(r)){n=r.getDimension()}if(e.notNull(n)){let t=this.m_dimensionReferences.getByKey(n.getName());if(e.notNull(t)){i=t.getIndex()}}else if(e.XStringUtils.isNotNullAndNotEmpty(l)){let e=this.getDimensionReferenceBySemanticObject(l);if(e.isPresent()){i=e.get().getIndex()}}return i};e.RscAxisReference.prototype.setGridContainer=function(t){this.m_gridContainer=e.XWeakReferenceUtil.getWeakRef(t)};e.RscAxisReference.prototype.setup=function(){this.m_componentsOnAxis=e.XListOfNameObject.create();this.m_tuplesOnAxis=e.XList.create();this.m_visibleComponentsOnAxis=e.XList.create();this.m_modelDimensionsOnAxis=e.XList.create();this.m_resultSetDimensionsOnAxis=e.XList.create();this.m_structureMembersOnAxis=e.XList.create();this.m_dimensionReferences=e.XLinkedHashMapByString.create()};e.RscAxisReference.prototype.setupForEmptyResultSet=function(t,i,n){this.m_axisType=t.getType();let r;let l;let o=t.getDimensions();let s=o.size();let a=0;let u;let p;for(r=0;r<s;r++){let t=o.get(r);let s=this.getOrCreateDimensionReference(i,t.getName(),r);e.XCollectionUtils.addIfNotPresent(this.m_modelDimensionsOnAxis,t);e.XCollectionUtils.addIfNotPresent(this.m_resultSetDimensionsOnAxis,t);let c=t.getMainAttribute();let g;let m=e.XSetOfNameObject.create();let f=e.isNull(c)?null:c.getFields();let C=t.getFieldLayoutType();let d=0;if(C===e.FieldLayoutType.FIELD_BASED){d=this.addFromResultSetFields(t.getResultSetFields(),t,s,m,C,f,a,n);a=a+d}else{let e=t.getResultSetAttributes();for(l=0;l<e.size();l++){let i=this.addFromResultSetFields(e.get(l).getResultSetFields(),t,s,m,C,f,a,n);a=a+i;d=d+i}}if(d===0){g=t.getKeyField();u=e.RscMappingUtils.getDimText(n,t);p=e.RscFieldReference.create(this,u,g.getName(),s,g,a,true,true);this.m_componentsOnAxis.add(p);this.m_visibleComponentsOnAxis.add(p)}}};e.RscAxisReference.prototype.setupForMerge=function(t,i,n,r){this.m_axisType=t.getAxisType();this.m_componentsOnAxis.addAll(e.XStream.of(t.getComponentsOnAxis()).filter(t=>t.getModelComponentType()===e.OlapComponentType.FIELD&&!r.contains(t.getDimension())).collect(e.XStreamCollector.toList()));this.m_componentsOnAxis.addAll(e.XStream.of(i.getComponentsOnAxis()).filter(t=>t.getModelComponentType()===e.OlapComponentType.FIELD&&!r.contains(t.getDimension())).collect(e.XStreamCollector.toList()));this.m_visibleComponentsOnAxis.addAll(e.XStream.of(t.getVisibleComponentsOnAxis()).filter(t=>t.getModelComponentType()===e.OlapComponentType.FIELD&&!r.contains(t.getDimension())).collect(e.XStreamCollector.toList()));this.m_visibleComponentsOnAxis.addAll(e.XStream.of(i.getVisibleComponentsOnAxis()).filter(t=>t.getModelComponentType()===e.OlapComponentType.FIELD&&!r.contains(t.getDimension())).collect(e.XStreamCollector.toList()));this.m_modelDimensionsOnAxis.addAll(t.getModelDimensionsOnAxis());this.m_modelDimensionsOnAxis.addAll(i.getModelDimensionsOnAxis());this.m_resultSetDimensionsOnAxis.addAll(t.getResultSetDimensionsOnAxis());this.m_resultSetDimensionsOnAxis.addAll(i.getResultSetDimensionsOnAxis());let l=e.XStream.of(t.getComponentsOnAxis()).filter(t=>t.getModelComponentType()!==e.OlapComponentType.FIELD).collect(e.XStreamCollector.toList());let o=e.XStream.of(i.getComponentsOnAxis()).filter(t=>t.getModelComponentType()!==e.OlapComponentType.FIELD).collect(e.XStreamCollector.toList());let s=e.XCollectionUtils.hasElements(l);let a=e.XCollectionUtils.hasElements(o);let u=e.XListOfNameObject.create();if(s&&a){for(let t=0;t<l.size();t++){for(let i=0;i<o.size();i++){let n=e.RscDataCellReference.create(l.get(t),o.get(i));this.m_componentsOnAxis.add(n);u.add(n)}}}else if(s){this.m_componentsOnAxis.addAll(l);u.addAll(l)}else if(a){this.m_componentsOnAxis.addAll(o);u.addAll(o)}let p=t.getTuplesOnAxis();let c=i.getTuplesOnAxis();for(let t=0;t<p.size();t++){let i=p.get(t);for(let t=0;t<c.size();t++){let r=c.get(t);this.m_tuplesOnAxis.add(e.RscTupleReference.mergeTuples(this,i,r,n))}}this.m_visibleComponentsOnAxis.addAll(e.XStream.of(u).filter(e=>e.isVisible()).collect(e.XStreamCollector.toList()))};e.RscAxisReference.prototype.setupForProjection=function(t,i,n){this.m_axisType=n.getAxisType();this.m_componentsOnAxis.addAll(n.getComponentsOnAxis());this.m_componentsOnAxis.addAll(i);this.m_visibleComponentsOnAxis.addAll(n.getVisibleComponentsOnAxis());this.m_modelDimensionsOnAxis.addAll(n.getModelDimensionsOnAxis());this.m_resultSetDimensionsOnAxis.addAll(n.getResultSetDimensionsOnAxis());let r=e.XSimpleMap.create();let l=n.getTuplesOnAxis();for(let n=0;n<l.size();n++){let o=l.get(n);let s=e.XStream.of(o.getValues()).filter(t=>t.getModelReference().getModelComponentType().isTypeOf(e.OlapComponentType.FIELD)).filter(e=>!t.contains(e.getModelReference().getDimension())).collect(e.XStreamCollector.toListOfString(t=>e.XValueUtil.getString(t.getPlainValue())));let a=r.getByKey(s);if(e.isNull(a)){let n=e.RscTupleReference.createForListByOrigTuple(o,t,this,i);r.put(s,n)}else{e.RscTupleReference.mergeOnSameAxis(a,o,t,i)}}this.m_tuplesOnAxis.addAll(r.getValuesAsReadOnlyList())};e.RscAxisReference.prototype.setupForValidResultSet=function(t,i,n){let r;let l;this.m_axisType=t.getType();this.m_tupleTotalsCount=t.getTuplesCountTotal();let o=t.getRsDimensions();let s=i.getModelCapabilities().supportsUdhKey();let a=o.size();let u=0;let p;let c;let g=e.XSetOfNameObject.create();let m="";let f;let C;for(r=0;r<a;r++){let t=o.get(r);let d=this.getOrCreateDimensionReference(i,t.getName(),r);let y=i.getDimensionByName(t.getName());let h=y.getMainAttribute();if(!t.isUniversalDisplayHierarchyDimension()&&!this.m_modelDimensionsOnAxis.contains(y)){this.m_modelDimensionsOnAxis.add(y)}else if(a===1&&t.isUniversalDisplayHierarchyDimension()&&this.m_modelDimensionsOnAxis.isEmpty()){this.m_modelDimensionsOnAxis.addAll(y.getAxis())}if(!this.m_resultSetDimensionsOnAxis.contains(t)){this.m_resultSetDimensionsOnAxis.add(t)}p=y.getDisplayDescription();if(e.isNull(p)){p=y.getDisplayName()}let _;let T;if(y.isUniversalDisplayHierarchyDimension()){let o=t.getAllFields();_=o.size();for(l=0;l<_;l++){T=y.getFieldByName(o.get(l).getName());p=e.RscMappingUtils.getUdhDimText(i,y,n,l);c=T.getAttribute();let t=e.RscMappingUtils.isUdhMainAttribute(T);if(t&&(l>0&&!e.RscMappingUtils.showMoreUdhMainAttributeFields(y.getAxis())||l>1)){continue}if(!t&&T.getObtainability()!==null&&T.getObtainability()!==e.ObtainabilityType.ALWAYS){continue}if(e.notNull(c)&&!g.contains(c)){m=c.getText();if(e.isNull(m)){m=c.getName()}if(!t){p=m}}let r=t?e.XInteger.convertToString(l):T.getName();f=e.RscFieldReference.create(this,p,r,d,T,u,t,true);this.m_componentsOnAxis.add(f);this.m_visibleComponentsOnAxis.add(f);u++}if(s){let t=i.getAxis(y.getAxisType());for(l=0;l<t.size();l++){let n=t.get(l);d=this.getOrCreateDimensionReference(i,n.getName(),r);let o=n.getKeyField();if(e.notNull(o)){f=e.RscFieldReference.create(this,p,o.getName(),d,o,u,true,true);this.m_componentsOnAxis.add(f)}o=n.getHierarchyNavigationField();if(e.notNull(o)){f=e.RscFieldReference.create(this,p,o.getName(),d,o,u,true,true);this.m_componentsOnAxis.add(f)}}}}else{let i=y.getFieldLayoutType();let r=t.getResultSetFields();let o=e.isNull(h)?null:h.getFields();_=r.size();m=p;for(l=0;l<_;l++){T=y.getFieldByName(r.get(l).getName());c=T.getAttribute();if(e.notNull(c)&&!g.contains(c)){m=c.getText();if(e.isNull(m)){m=c.getName()}if(c===y.getMainAttribute()){m=e.RscMappingUtils.getDimText(n,y)}}else if(l===0&&e.isNull(c)&&e.isNull(o)&&e.RscMappingUtils.isImplicitMainField(y,T)){m=e.RscMappingUtils.getDimText(n,y)}C=T.getObtainability()!==e.ObtainabilityType.USER_INTERFACE;let t=e.RscMappingUtils.isMainFieldGeneric(o,T,y,i);if(!C){p=T.getText()}else if(t||i===e.FieldLayoutType.ATTRIBUTE_BASED){p=m;m=""}else{p=T.getText();if(e.isNull(p)){p=T.getName()}}if(C&&e.notNull(c)){g.add(c)}f=e.RscFieldReference.create(this,p,T.getName(),d,T,C?u:-1,t,C);this.m_componentsOnAxis.add(f);if(C){this.m_visibleComponentsOnAxis.add(f);u++}}}}};e.RscCollectorConstants={PERCENT:"%",S_SCALE_LONG_BILLION:"ScaleLongBillion",S_SCALE_LONG_MILLION:"ScaleLongMillion",S_SCALE_LONG_THOUSAND:"ScaleLongThousand",S_SCALE_SHORT_BILLION:"ScaleShortBillion",S_SCALE_SHORT_MILLION:"ScaleShortMillion",S_SCALE_SHORT_THOUSAND:"ScaleShortThousand"};e.RscGenericValue=function(){};e.RscGenericValue.prototype=new e.XObject;e.RscGenericValue.prototype._ff_c="RscGenericValue";e.RscGenericValue.prototype.m_formatPattern=null;e.RscGenericValue.prototype.m_formatPatternFull=null;e.RscGenericValue.prototype.m_formattedText=null;e.RscGenericValue.prototype.m_formattedTextFull=null;e.RscGenericValue.prototype.m_text=null;e.RscGenericValue.prototype.m_value=null;e.RscGenericValue.prototype.applyPlainValue=function(t){this.m_value=e.XValueUtil.copyValue(t)};e.RscGenericValue.prototype.applyStringValue=function(t){this.m_value=e.XStringValue.create(t)};e.RscGenericValue.prototype.getFormatPattern=function(){return this.m_formatPattern};e.RscGenericValue.prototype.getFormatPatternFull=function(){return this.m_formatPatternFull};e.RscGenericValue.prototype.getFormattedText=function(){return this.m_formattedText};e.RscGenericValue.prototype.getFormattedTextFull=function(){return this.m_formattedTextFull};e.RscGenericValue.prototype.getPlainDouble=function(){return e.XValueUtil.getDouble(this.m_value,false,true)};e.RscGenericValue.prototype.getPlainValue=function(){return this.m_value};e.RscGenericValue.prototype.getText=function(){return this.m_text};e.RscGenericValue.prototype.setFormattedText=function(e){this.m_formattedText=e};e.RscGenericValue.prototype.setText=function(e){this.m_text=e};e.RscGenericValue.prototype.setupInternal=function(t,i,n,r,l,o){this.m_value=e.XValueUtil.copyValue(t);this.m_text=i;this.m_formatPattern=n;this.m_formattedText=r;this.m_formatPatternFull=l;this.m_formattedTextFull=o};e.RscGridRequestToken=function(){};e.RscGridRequestToken.prototype=new e.XObject;e.RscGridRequestToken.prototype._ff_c="RscGridRequestToken";e.RscGridRequestToken.create=function(t,i,n,r,l,o,s,a){let u=new e.RscGridRequestToken;u.m_syncType=t;u.m_resultSetCollectorListener=i;u.m_queryExecutedListener=n;u.m_identifier=r;u.m_rowStart=l;u.m_rowEnd=o;u.m_colStart=s;u.m_colEnd=a;return u};e.RscGridRequestToken.prototype.m_colEnd=0;e.RscGridRequestToken.prototype.m_colStart=0;e.RscGridRequestToken.prototype.m_identifier=null;e.RscGridRequestToken.prototype.m_queryExecutedListener=null;e.RscGridRequestToken.prototype.m_resultSetCollectorListener=null;e.RscGridRequestToken.prototype.m_rowEnd=0;e.RscGridRequestToken.prototype.m_rowStart=0;e.RscGridRequestToken.prototype.m_syncType=null;e.RscGridRequestToken.prototype.getColEnd=function(){return this.m_colEnd};e.RscGridRequestToken.prototype.getColStart=function(){return this.m_colStart};e.RscGridRequestToken.prototype.getIdentifier=function(){return this.m_identifier};e.RscGridRequestToken.prototype.getQueryExecutedListener=function(){return this.m_queryExecutedListener};e.RscGridRequestToken.prototype.getResultSetCollectorListener=function(){return this.m_resultSetCollectorListener};e.RscGridRequestToken.prototype.getRowEnd=function(){return this.m_rowEnd};e.RscGridRequestToken.prototype.getRowStart=function(){return this.m_rowStart};e.RscGridRequestToken.prototype.getSyncType=function(){return this.m_syncType};e.RscGridTileCarrier=function(){};e.RscGridTileCarrier.prototype=new e.XObject;e.RscGridTileCarrier.prototype._ff_c="RscGridTileCarrier";e.RscGridTileCarrier.create=function(t,i,n,r){let l=new e.RscGridTileCarrier;l.setupCarrier(t,i,n,r);return l};e.RscGridTileCarrier.prototype.m_columnMax=0;e.RscGridTileCarrier.prototype.m_columnMin=0;e.RscGridTileCarrier.prototype.m_rowMax=0;e.RscGridTileCarrier.prototype.m_rowMin=0;e.RscGridTileCarrier.prototype.getColumnMax=function(){return this.m_columnMax};e.RscGridTileCarrier.prototype.getColumnMin=function(){return this.m_columnMin};e.RscGridTileCarrier.prototype.getRowMax=function(){return this.m_rowMax};e.RscGridTileCarrier.prototype.getRowMin=function(){return this.m_rowMin};e.RscGridTileCarrier.prototype.releaseObject=function(){this.m_rowMin=0;this.m_rowMax=0;this.m_columnMin=0;this.m_columnMax=0;e.XObject.prototype.releaseObject.call(this)};e.RscGridTileCarrier.prototype.setupCarrier=function(e,t,i,n){this.m_rowMin=e;this.m_rowMax=t;this.m_columnMin=i;this.m_columnMax=n};e.RscMappingUtils={POTENCE_OPERATOR:"^",PRODUCT_SPACE_OPERATOR:" ",QUOTIENT_OPERATOR:"/",correctFieldIdConsideringUdhSettings:function(t,i){let n=t.getName();if(t.getDimension().isUniversalDisplayHierarchyDimension()&&e.RscMappingUtils.isUdhMainAttribute(t)){let r=i.isUniversalDisplayHierarchyDimension()&&i.getAxis().size()>0?i.getAxis().get(0):i;if(e.notNull(r)){let i=r.getFieldLayoutType()===e.FieldLayoutType.FIELD_BASED?r.getResultSetFields():r.getMainAttribute().getResultSetFields();let l=e.XStream.of(i).filter(t=>t.getObtainability()!==e.ObtainabilityType.USER_INTERFACE).map(t=>e.RscMappingUtils.mapPresentationType(t)).collect(e.XStreamCollector.toList());let o=e.RscMappingUtils.mapPresentationType(t);let s=l.getIndex(o);if(s>-1){n=e.XInteger.convertToString(s)}else if(r.isUniversalDisplayHierarchyDimension()&&t.getObtainability()===e.ObtainabilityType.ALWAYS){n="0"}}}return n},createUnitTextWithExponent:function(t,i,n){let r=e.XStringUtils.isNullOrEmpty(t)?i:t;let l;if(n>1){l=e.XStringUtils.concatenate3(r,e.RscMappingUtils.POTENCE_OPERATOR,e.XInteger.convertToString(n))}else{l=r}return l},getCurrencyUnitPair:function(t,i,n){let r=null;if(i){r=e.XPairOfString.create("","")}else{r=e.RscMappingUtils.resolveCurrencyUnitPair(t,n,null)}return r},getDimText:function(t,i){let n=i.getDisplayDescription();if(i.getDimensionType().isTypeOf(e.DimensionType.MEASURE_STRUCTURE)&&e.XStringUtils.isNotNullAndNotEmpty(t.getByKey(e.SacTableConstants.S_MEASURE_DIMENSION_OVERWRITE_TEXT))){n=t.getByKey(e.SacTableConstants.S_MEASURE_DIMENSION_OVERWRITE_TEXT)}else if(i.getDimensionType().isTypeOf(e.DimensionType.SECONDARY_STRUCTURE)&&e.XStringUtils.isNotNullAndNotEmpty(t.getByKey(e.SacTableConstants.S_STRUCTURE_DIMENSION_OVERWRITE_TEXT))){if(i.getProcess().hasFeature(e.FeatureToggleOlap.USE_ORIGINAL_STRUCTURE_TEXT_IN_UI)&&e.XStringUtils.isNotNullAndNotEmpty(i.getOriginalText())){n=i.getOriginalText()}else{n=t.getByKey(e.SacTableConstants.S_STRUCTURE_DIMENSION_OVERWRITE_TEXT)}}if(e.isNull(n)){n=i.getDisplayName()}return n},getSimplifiedUniqueName:function(t){let i="";for(let n=0;n<t.size();n++){let r=t.get(n);i=e.XStringUtils.concatenate5(i,"::[",r.getDimension().getName(),"]==>",r.getSelectValue())}return i},getUdhDimText:function(t,i,n,r){let l="";if(r===0){let r=e.XStream.ofString(e.RscMappingUtils.getUdhDimensionNames(i)).map(e=>t.getDimensionByName(e.getString())).collect(e.XStreamCollector.toListOfString(t=>e.RscMappingUtils.getDimText(n,t)));l=e.XCollectionUtils.join(r,"/")}return l},getUdhDimensionNames:function(t){let i;if(t.isUniversalDisplayHierarchyDimension()){i=t.getQueryModel().getUniversalDisplayHierarchies().getByAxisType(t.getAxisType()).getDimensionNames()}else{i=e.XList.create()}return i},getUnitsSuffix:function(t,i,n,r){let l=i.size();let o=e.XList.create();let s=e.XList.create();for(let a=t;a<l;a++){let t=r.get(a).getInteger();if(t>0){o.add(e.RscMappingUtils.createUnitTextWithExponent(i.get(a),n.get(a),t))}else if(t<0){s.add(e.RscMappingUtils.createUnitTextWithExponent(i.get(a),n.get(a),-t))}}let a=e.XCollectionUtils.hasElements(o);let u=e.XCollectionUtils.hasElements(s);let p=null;if(u&&a){p=e.XStringUtils.concatenate3(e.XCollectionUtils.join(o,e.RscMappingUtils.PRODUCT_SPACE_OPERATOR),e.RscMappingUtils.QUOTIENT_OPERATOR,e.XCollectionUtils.join(s,e.RscMappingUtils.PRODUCT_SPACE_OPERATOR))}else if(a){p=e.XStringUtils.concatenate2(e.RscMappingUtils.PRODUCT_SPACE_OPERATOR,e.XCollectionUtils.join(o,e.RscMappingUtils.PRODUCT_SPACE_OPERATOR))}else if(u){p=e.XStringUtils.concatenate2(e.RscMappingUtils.QUOTIENT_OPERATOR,e.XCollectionUtils.join(s,e.RscMappingUtils.PRODUCT_SPACE_OPERATOR))}return p},isExplicitlyInRsPresentationForUdh:function(t,i){let n=false;if(t.getDimension().isUniversalDisplayHierarchyDimension()&&e.RscMappingUtils.isUdhMainAttribute(t)){let r=i.isUniversalDisplayHierarchyDimension()&&i.getAxis().size()>0?i.getAxis().get(0):i;if(e.notNull(r)){let i=r.getFieldLayoutType()===e.FieldLayoutType.FIELD_BASED?r.getResultSetFields():r.getMainAttribute().getResultSetFields();let l=e.XStream.of(i).filter(t=>t.getObtainability()!==e.ObtainabilityType.USER_INTERFACE).map(e=>e.getPresentationType()).collect(e.XStreamCollector.toList());n=l.contains(t.getPresentationType())}}return n},isImplicitMainField:function(e,t){return e.getTextField()===t||e.getFlatTextField()===t||e.getHierarchyTextField()===t||e.getKeyField()===t||e.getFlatKeyField()===t||e.getHierarchyKeyField()===t||e.getDisplayKeyField()===t||e.getFlatDisplayKeyField()===t||e.getHierarchyDisplayKeyField()===t},isMainFieldGeneric:function(t,i,n,r){return e.notNull(n)&&e.notNull(i)&&i.getAttribute()===n.getMainAttribute()||r===e.FieldLayoutType.FIELD_BASED&&e.notNull(t)&&t.contains(i)||e.isNull(t)&&e.notNull(i)&&e.notNull(n)&&i.getAttribute()===null&&e.RscMappingUtils.isImplicitMainField(n,i)},isUdhMainAttribute:function(t){let i=t.getAttribute();let n=e.isNull(i)?null:i.getDimension();return e.isNull(n)||e.isNull(i)||n.getMainAttribute()===i},mapPresentationType:function(t){let i=t.getPresentationType();if(i.isTypeOf(e.PresentationType.DISPLAY_KEY)||i.isTypeOf(e.PresentationType.HIERARCHY_DISPLAY_KEY)){i=e.PresentationType.DISPLAY_KEY}else if(i.isTypeOf(e.PresentationType.ABSTRACT_KEY)){i=e.PresentationType.ABSTRACT_KEY}else if(i.isTypeOf(e.PresentationType.ABSTRACT_TEXT)){i=e.PresentationType.ABSTRACT_TEXT}return i},resolveCurrencyUnitPair:function(t,i,n){let r=n;let l=e.isNull(t)?null:t.getUnitTypes();if(e.notNull(l)&&l.size()>0){let n=t.getUnitExponents();let o=i===e.CurrencyPresentation.ISO?t.getUnitValues():t.getUnitDescriptions();let s=t.getUnitValues();let a="";let u=null;if(e.UnitType.lookup(l.get(0))===e.UnitType.CURRENCY&&n.get(0).getInteger()>0){a=e.RscMappingUtils.createUnitTextWithExponent(o.get(0),s.get(0),n.get(0).getInteger());if(l.size()>1){u=e.RscMappingUtils.getUnitsSuffix(1,o,s,n)}}else{u=e.RscMappingUtils.getUnitsSuffix(0,o,s,n)}if(e.XStringUtils.isNotNullAndNotEmpty(a)||e.XStringUtils.isNotNullAndNotEmpty(u)){r=e.XPairOfString.create(a,u)}}return r},showMoreUdhMainAttributeFields:function(t){return e.XStream.of(t).map(t=>t.getFieldLayoutType()===e.FieldLayoutType.FIELD_BASED?t.getResultSetFields():t.getMainAttribute().getResultSetFields()).anyMatch(t=>e.XStream.of(t).filter(t=>t.getObtainability()!==e.ObtainabilityType.USER_INTERFACE).collect(e.XStreamCollector.toList()).size()>1)}};e.RscResultsetCollectorFactoryImpl=function(){};e.RscResultsetCollectorFactoryImpl.prototype=new e.XObject;e.RscResultsetCollectorFactoryImpl.prototype._ff_c="RscResultsetCollectorFactoryImpl";e.RscResultsetCollectorFactoryImpl.create=function(){return new e.RscResultsetCollectorFactoryImpl};e.RscResultsetCollectorFactoryImpl.prototype.newGridCollector=function(t){return e.RscGridCollector.create(t)};e.RscResultsetCollectorFactoryImpl.prototype.newListCollector=function(t,i,n){return e.RscListCollector.create(t,i,n)};e.GridRendererFactoryImpl=function(){};e.GridRendererFactoryImpl.prototype=new e.XObject;e.GridRendererFactoryImpl.prototype._ff_c="GridRendererFactoryImpl";e.GridRendererFactoryImpl.create=function(){return new e.GridRendererFactoryImpl};e.GridRendererFactoryImpl.prototype.newRenderer=function(t){return e.RsSacTableRenderer.createAnalyticsGridRenderer()};e.SacTableClipboardHelperFactory=function(){};e.SacTableClipboardHelperFactory.prototype=new e.XObject;e.SacTableClipboardHelperFactory.prototype._ff_c="SacTableClipboardHelperFactory";e.SacTableClipboardHelperFactory.create=function(){return new e.SacTableClipboardHelperFactory};e.SacTableClipboardHelperFactory.prototype.newClipboardHelper=function(t,i){return e.SacAnalyticsTableClipboardHelper.createForAnalytics(t,i)};e.RsSacTableRenderer=function(){};e.RsSacTableRenderer.prototype=new e.XObject;e.RsSacTableRenderer.prototype._ff_c="RsSacTableRenderer";e.RsSacTableRenderer.createAnalyticsGridRenderer=function(){let t=new e.RsSacTableRenderer;return t};e.RsSacTableRenderer.prototype.m_rowList=null;e.RsSacTableRenderer.prototype.m_tableJson=null;e.RsSacTableRenderer.prototype.getFullOrPaginatedRowList=function(t){let i=e.XList.create();let n=e.PrFactory.createList();let r=e.SacTableWidgetRenderHelper.createTableRenderHelper(t);r.fillRowsFromList(t.getHeaderRowList(),n,0,t.isFreezeHeaderRows(),t.getFreezeUpToRow());r.fillRowsFromListKeepGaps(t.isRowPaginated()?t.getLocalRowList():t.getRowList(),n,t.getHeaderRowList().size());for(let e=0;e<n.size();e++){i.add(n.getStructureAt(e))}return i};e.RsSacTableRenderer.prototype.getTableJson=function(){return this.m_tableJson};e.RsSacTableRenderer.prototype.postRender=function(t,i){let n=null;if(e.XObjectExt.isValidObject(i)&&e.XObjectExt.isValidObject(t)){let r=e.XHashMapByString.create();n=t.renderGenericSettings(this.m_tableJson);let l=i.getEffectiveHighlightedCells();if(e.XCollectionUtils.hasElements(l)){let t=this.getTableJson().putNewList(e.SacTableConstants.TD_L_HIGHLIGHTED_CELLS);e.XCollectionUtils.forEach(l,i=>{let n=t.addNewStructure();n.putString(e.SacTableConstants.HC_S_BACKGROUND_COLOR,e.RenderThemingHelper.remapColor(r,i.getColor()));n.putInteger(e.SacTableConstants.C_N_X,i.getColumn());n.putInteger(e.SacTableConstants.C_N_Y,i.getRow())})}else{this.getTableJson().putNewList(e.SacTableConstants.TD_L_HIGHLIGHTED_CELLS)}this.getTableJson().putInteger(e.SacTableConstants.TD_N_DATA_REGION_HEADER_END_ROW,i.getHeaderEndRow());let o=i.getTotalRowDiff();if(o<0){this.getTableJson().putInteger(e.SacTableConstants.TD_N_TOTAL_ROWS_DIFF,o)}else{this.getTableJson().remove(e.SacTableConstants.TD_N_TOTAL_ROWS_DIFF)}i.setTotalRowDiff(0)}return n};e.RsSacTableRenderer.prototype.prepareJsonStructure=function(){this.m_tableJson=e.PrFactory.createStructure();this.m_rowList=this.m_tableJson.putNewList(e.SacTableConstants.TD_L_ROWS)};e.RsSacTableRenderer.prototype.reFormat=function(t){let i=t;return!e.XObjectExt.isValidObject(i)?null:this.reFormatInternal(i,i.needsRecreateRows(),i.needsReApplyFormatting(),true)};e.RsSacTableRenderer.prototype.reFormatInternal=function(t,i,n,r){let l=!e.XObjectExt.isValidObject(t)?null:t.getResultTable();let o=null;if(e.XObjectExt.isValidObject(l)&&l.isHeaderComplete()){let t=e.SacAnalyticTableWidgetRenderHelper.createAnalyticTableRenderHelper(l);this.prepareJsonStructure();if(n){l.reApplyTableStyling()}if(i){l.recreateHeaderColumns();t.fillRowsFromList(l.getHeaderRowList(),this.m_rowList,0,l.isFreezeHeaderRows(),l.getFreezeUpToRow());t.fillRowsFromList(l.getRowList(),this.m_rowList,l.getHeaderRowList().size(),false,l.getFreezeUpToRow())}this.postRender(t,l);o=this.getTableJson();o.putBoolean(e.SacTableConstants.TD_B_PARTIAL,true);o.putBoolean(e.SacTableConstants.TD_B_SCROLL_TO_TOP,false)}if(r){t.markPristine()}return o};e.RsSacTableRenderer.prototype.reHighlight=function(t,i,n,r,l){let o=null;if(e.XObjectExt.isValidObject(l)){l.applyRenderingScope(t,i,n,r);o=this.reFormatInternal(l,false,false,false);l.resetRenderingScope()}return o};e.RsSacTableRenderer.prototype.releaseObject=function(){this.releaseStaleData();e.XObject.prototype.releaseObject.call(this)};e.RsSacTableRenderer.prototype.releaseStaleData=function(){this.m_tableJson=null;this.m_rowList=null};e.RsSacTableRenderer.prototype.render=function(t){let i=t.getVisualizationData();this.prepareJsonStructure();let n=this.getTableJson();let r=e.SacAnalyticTableWidgetRenderHelper.createAnalyticTableRenderHelper(i);if(!e.XObjectExt.isValidObject(i)||!i.isHeaderComplete()){n=null}else{if(i.isRowPaginated()){r.fillRowsFromList(i.getHeaderRowList(),this.m_rowList,0,i.isFreezeHeaderRows(),i.getFreezeUpToRow());let t=i.getLocalRowList();if(e.XCollectionUtils.hasElements(t)){r.fillRowsFromList(t,this.m_rowList,i.getHeaderRowList().size(),false,i.getFreezeUpToRow())}}else if(i.isPartial()){r.fillRowsFromList(i.getHeaderRowList(),this.m_rowList,0,i.isFreezeHeaderRows(),i.getFreezeUpToRow());let t=i.getLocalRowList();if(e.XCollectionUtils.hasElements(t)){r.fillRowsFromList(t,this.m_rowList,i.getTableRowOffsetForTupleIndex(t.get(0).getRootTupleIndex()),false,i.getFreezeUpToRow())}n.putBoolean(e.SacTableConstants.TD_B_PARTIAL,true)}else{r.fillRowsFromList(i.getHeaderRowList(),this.m_rowList,0,i.isFreezeHeaderRows(),i.getFreezeUpToRow());r.fillRowsFromList(i.getRowList(),this.m_rowList,i.getHeaderRowList().size(),false,i.getFreezeUpToRow());let t=n.putNewStructure(e.SacTableConstants.TD_B_PARTIAL);t.putInteger(e.SacTableConstants.TDP_N_TOTAL_ROWS,i.getRowsTotalCount());t.putInteger(e.SacTableConstants.TDP_N_ROW_HEIGHT,e.SacTableConstants.DF_R_N_HEIGHT)}this.postRender(r,i);n.putBoolean(e.SacTableConstants.TD_B_SCROLL_TO_TOP,false)}return n};e.FioriGrid=function(){};e.FioriGrid.prototype=new e.XObject;e.FioriGrid.prototype._ff_c="FioriGrid";e.FioriGrid.MAGIC_CELL_DIV="/";e.FioriGrid.create=function(t){let i=new e.FioriGrid;i.setupGrid(t);return i};e.FioriGrid.prototype.m_cells=null;e.FioriGrid.prototype.m_colDefs=null;e.FioriGrid.prototype.m_fixedHeight=0;e.FioriGrid.prototype.m_fixedHeightOff=0;e.FioriGrid.prototype.m_fixedWidth=0;e.FioriGrid.prototype.m_fixedWidthOff=0;e.FioriGrid.prototype.m_offsetColumns=0;e.FioriGrid.prototype.m_offsetRows=0;e.FioriGrid.prototype.m_resultSet=null;e.FioriGrid.prototype.m_rowDefs=null;e.FioriGrid.prototype.m_semStyles=null;e.FioriGrid.prototype.m_suppressRepetition=true;e.FioriGrid.prototype.m_suppress_unit=null;e.FioriGrid.prototype.m_withDetails=false;e.FioriGrid.prototype.addCell=function(t,i,n,r,l){if(t===e.AxisType.ROWS){l.setRow(n+r+this.m_offsetRows);l.setColumn(i);this.setCell(i,n+r,l)}else{l.setRow(i);l.setColumn(n+r+this.m_offsetColumns);this.setCell(n+r,i,l)}};e.FioriGrid.prototype.addSemanticStyle=function(e,t){this.m_semStyles.put(e,t)};e.FioriGrid.prototype.appendAlertLevel=function(t,i){let n=t.getMaxAlertLevel();if(n!==e.AlertLevel.NORMAL){i.append("|[");i.append(e.isNull(n)?"<null>":n.getName());i.append("]")}};e.FioriGrid.prototype.appendAlertLevelToValue=function(t,i){if(e.XStringUtils.isNotNullAndNotEmpty(t.getExceptionName())){i.append(" [").appendInt(t.getAlertLevel()).append("]")}};e.FioriGrid.prototype.appendCurrencyUnit=function(t,i){if(e.notNull(t)&&!t.isEmpty()){i.append("|");if(t.isMixed()){i.append("M:")}else if(t.hasUnit()){i.append("U:")}else if(t.hasCurrency()){i.append("C:")}if(t.hasFormatted()){i.append(t.getFormatted())}else{i.append("<null>")}}};e.FioriGrid.prototype.appendInputReadiness=function(t,i,n){let r=t.getQueryModel().getQueryManager();if(r.supportsInputReadinessStates()&&t.getQueryModel().isDataEntryEnabled()){let r=t.getInputReadinessState();if(e.notNull(r)){let t=i.get(r.getIndex());let l=t.getInputReadinessTypes();let o=e.XList.create();for(let e=0;e<l.size();e++){o.add(l.get(e).getShortcut())}n.append("|S:").append(e.XCollectionUtils.join(o,","))}}};e.FioriGrid.prototype.appendPrefixValueSuffix=function(t,i,n){if(e.notNull(t)&&e.XString.compare(this.m_suppress_unit,t.getFormatted())===0){n.append(this.formatDataCellValue(i))}else{if(e.notNull(t)&&t.hasPrefix()){n.append(t.getPrefix()).append(" ")}n.append(this.formatDataCellValue(i));if(e.notNull(t)&&t.hasSuffix()){n.append(" ").append(t.getSuffix())}}};e.FioriGrid.prototype.appendValueChanged=function(t,i){if(t.isValueChanged()){i.append("|N:");let n=t.getXValue();if(e.isNull(n)){i.append("<null>")}else{i.append(n.getValueType().getName());if(n.getValueType()===e.XValueType.STRING){i.append(" ").append(n.getString())}}}if(t.isNewValueForced()){i.append("|F:")}};e.FioriGrid.prototype.appendValueException=function(t,i){let n=t.getValueException();if(n!==e.ValueException.NORMAL){i.append("|");if(e.isNull(n)){i.append("<null>")}else{i.append(n.getName())}}};e.FioriGrid.prototype.exportToFireflyGrid=function(t){this.m_suppressRepetition=t;this.prepareCellStructure();let i=this.getColumnCount();let n=this.getRowCount();let r=this.getFixedRowsCount();let l=this.getFixedColumnsCount();let o=e.PrFactory.createStructure();o.putString("Type","Grid");o.putString("ApplicationName",this.m_resultSet.getApplication().getApplicationName());o.putInteger("RowCount",n);o.putInteger("ColCount",i);o.putInteger("FixedRows",r);o.putInteger("FixedColumns",l);let s=o.putNewList("Cells");for(let t=0;t<n;t++){for(let n=0;n<i;n++){let i=this.getSimpleCell(n,t);if(e.notNull(i)){let o=s.addNewStructure();o.putString("Type","Text");o.putString("DisplayValue",i.getDisplayValue());o.putString("Value",i.getText(-1));o.putInteger("Row",i.getRow());o.putInteger("Column",i.getColumn());o.putString("DrillState",i.getDrillState());o.putString("DataValueId",i.getDataValueId());o.putInteger("DisplayLevel",i.getDisplayLevel());o.putInteger("RowTupleIndex",i.getRowTupleIndex());o.putInteger("ColumnTupleIndex",i.getColumnTupleIndex());o.putInteger("TupleIndex",i.getRowTupleIndex()>0?i.getRowTupleIndex():i.getColumnTupleIndex());o.putString("Icon",i.getIcon());o.putString("AlertLevel",i.getAlertLevel());o.putString("DocumentId",i.getDocumentId());o.putBoolean("Input",i.getInput());if(i.isTotals()){o.putBoolean("Totals",true)}let a=i.getCellType();if(a===e.FioriCellType.HEADER){o.putString("Semantic","Header");o.putString("Dimension",i.getDimension());o.putString("Member",i.getMember());o.putString("SemanticClass",i.getSemantic())}else if(a===e.FioriCellType.TITLE){o.putString("Semantic","Title");o.putString("Dimension",i.getDimension());if(i.getDimensionOther()!==null){o.putString("DimensionOther",i.getDimensionOther())}}else if(a===e.FioriCellType.DATA){o.putInteger("DataRow",t-r);o.putInteger("DataColumn",n-l);o.putString("Member",i.getMember());o.putString("Member2",i.getMember2());o.putString("Semantic",i.isTotals()?"Result":"Standard")}else{o.putString("Semantic","Empty");o.putString("GridPart","Empty")}}}}return o};e.FioriGrid.prototype.formatDataCellValue=function(e){return e.getFormattedValue()};e.FioriGrid.prototype.formatFieldValue=function(t){if(e.isNull(t)){return""}else{if(t.getValueType()===e.XValueType.DOUBLE){let i=t.getDouble();return e.XNumberFormatter.formatDoubleToString(i,"#.0000")}else{return t.getFormattedValue()}}};e.FioriGrid.prototype.getCellValue=function(t,i){let n=i.getValueException();if(n===e.ValueException.NULL_VALUE||n===e.ValueException.UNDEFINED){return""}let r=null;if(n!==e.ValueException.NORMAL&&n!==e.ValueException.ZERO){r=n.getName()}let l=null;let o=i.getMaxAlertLevel();if(o!==e.AlertLevel.NORMAL){l=o.getName()}if(e.notNull(r)||e.notNull(l)){let i=e.XStringBuffer.create();i.append(t);if(e.notNull(l)){i.append(" [").append(l).append("]")}if(e.notNull(r)){i.append(" [").append(r).append("]")}return i.toString()}return t};e.FioriGrid.prototype.getCellValueWithDetails=function(t,i){let n=e.XStringBuffer.create();let r=t.getDataCell();if(e.notNull(r)){n.append("(DataCell->").append(r.getName()).append(")")}let l=t.getDecimalPlaces();if(l!==0){n.append("(Decimal Places=").appendInt(l).append(")")}if(t.isDataEntryEnabled()){n.append("I:")}if(t.isValueLocked()){n.append("L:")}let o=t.getCurrencyUnit();this.appendPrefixValueSuffix(o,t,n);this.appendValueException(t,n);this.appendAlertLevel(t,n);this.appendValueChanged(t,n);n.append("|").append(t.getValueType().getName());n.append("|").append(t.getFormatString());this.appendCurrencyUnit(o,n);this.appendInputReadiness(t,i,n);return n.toString()};e.FioriGrid.prototype.getColumnCount=function(){return this.m_cells.size0()};e.FioriGrid.prototype.getColumnMaxCharacters=function(t,i,n){let r=0;let l=this.m_cells.size1();let o=0;for(let s=i;s<l&&(n===-1||o<n);s++){let i=this.m_cells.getByIndices(t,s);if(e.notNull(i)){r=e.XMath.max(i.getCharacterCount(),r)}o++}return r};e.FioriGrid.prototype.getEffectiveFieldSizeCol=function(e){let t=0;let i=e.getRsDimensions();let n=i.size();for(let r=0;r<n;r++){t=t+i.get(r).getResultSetFields().size();t=t+this.getMaxDisplayLevel(e,i.get(r))}return t};e.FioriGrid.prototype.getEffectiveFieldSizeRow=function(e){let t=0;let i=e.getRsDimensions();let n=i.size();for(let e=0;e<n;e++){t=t+i.get(e).getResultSetFields().size()}return t};e.FioriGrid.prototype.getFixedColumnsCount=function(){return this.m_fixedWidth};e.FioriGrid.prototype.getFixedRowsCount=function(){return this.m_fixedHeight};e.FioriGrid.prototype.getMaxDisplayLevel=function(t,i){let n=t.getTuplesCount();let r=0;for(let l=0;l<n;l++){let n=t.getTupleAt(l);r=e.XMath.max(r,n.getTupleElementByDimension(i).getDisplayLevel())}return r};e.FioriGrid.prototype.getRowCount=function(){return this.m_cells.size1()};e.FioriGrid.prototype.getSimpleCell=function(e,t){return this.m_cells.getByIndices(e,t)};e.FioriGrid.prototype.prepareCellStructure=function(){if(e.isNull(this.m_cells)&&e.notNull(this.m_resultSet)){this.prepareStructure()}};e.FioriGrid.prototype.prepareStructure=function(){let t=this.m_resultSet.getColumnsAxis();let i=e.XMath.max(t.getDataCount(),t.getTuplesCount());let n=this.m_resultSet.getRowsAxis();this.m_fixedHeight=e.XMath.max(this.getEffectiveFieldSizeCol(t),this.getEffectiveFieldSizeRow(n)===0?0:1);let r=n.getDataCount();let l=n.getTuplesCount();let o=e.XMath.max(r,l);this.m_fixedWidth=e.XMath.max(this.getEffectiveFieldSizeRow(n),1);let s=this.m_fixedWidth+i;let a=this.m_fixedHeight+o;this.m_offsetColumns=this.m_resultSet.getQueryManager().getOffsetColumns();this.m_offsetRows=this.m_resultSet.getQueryManager().getOffsetRows();this.m_cells=e.XArray2Dim.create(s,a);this.m_rowDefs=e.XList.create();this.m_colDefs=e.XList.create();for(let t=0;t<s;t++){this.m_colDefs.add(e.FioriLineDef.create())}for(let t=0;t<a;t++){this.m_rowDefs.add(e.FioriLineDef.create())}this.setTitleCells(n,e.XMath.max(this.m_fixedHeight-1,0),t.getRsDimensions().isEmpty());this.setTitleCells(t,e.XMath.max(this.m_fixedWidth-1,0),n.getRsDimensions().isEmpty());let u=this.m_fixedHeight-this.m_fixedHeightOff;this.setHeaderCells(n,u);let p=this.m_fixedWidth-this.m_fixedWidthOff;this.setHeaderCells(t,p);this.setDataCells()};e.FioriGrid.prototype.prependToFirstField=function(t,i){let n=t.getDisplayLevel();let r=t.getDrillState();if(n>0||r!==e.DrillState.LEAF){let t=i.toString();i.clear();for(let e=0;e<n;e++){i.append("  ")}if(r===e.DrillState.COLLAPSED||r===e.DrillState.LEAF_DRILLDOWN_ALLOWED||r===e.DrillState.LEAF_UDH_EXPAND_ALLOWED||r===e.DrillState.COLLAPSED_EXPAND_AND_DRILLDOWN_ALLOWED){i.append("+ ")}else if(r===e.DrillState.EXPANDED||r===e.DrillState.DRILLED||r===e.DrillState.LEAF_UDH){i.append("- ")}i.append(t)}};e.FioriGrid.prototype.releaseObject=function(){if(e.notNull(this.m_cells)){let t=this.m_cells.size0();for(let i=0;i<t;i++){let t=this.m_cells.size1();for(let n=0;n<t;n++){let t=this.m_cells.getByIndices(i,n);if(e.notNull(t)){e.XObjectExt.release(t);this.m_cells.setByIndices(i,n,null)}}}e.XObjectExt.release(this.m_cells);this.m_cells=null}this.m_colDefs=null;this.m_rowDefs=null;this.m_resultSet=null;e.XObject.prototype.releaseObject.call(this)};e.FioriGrid.prototype.setCell=function(e,t,i){if(this.m_rowDefs.get(t).hasTotals()||this.m_colDefs.get(e).hasTotals()){i.setIsTotal(true)}this.m_cells.setByIndices(e,t,i)};e.FioriGrid.prototype.setDataCells=function(){let t=this.m_resultSet.getInputReadinessStates();let i=this.m_resultSet.getDataColumns();let n=this.m_resultSet.getDataRows();let r=e.XStringBuffer.create();for(let l=0;l<n;l++){for(let n=0;n<i;n++){let i=this.m_resultSet.getDataCell(n,l);let o;if(this.m_withDetails){o=e.FioriGridCell.create(this.getCellValueWithDetails(i,t),e.FioriCellType.DATA)}else{o=e.FioriGridCell.create(this.getCellValue(this.formatDataCellValue(i),i),e.FioriCellType.DATA)}r.clear();this.appendPrefixValueSuffix(i.getCurrencyUnit(),i,r);o.setDisplayValue(r.toString());o.setAlertLevel(i.getMaxAlertLevel().getName());o.setDocumentId(i.getDocumentId());o.setInput(i.isDataEntryEnabled());let s=i.getDataCell();if(e.notNull(s)){r.clear();let t=s.getReferenceStructureElement1();if(e.notNull(t)){r.append("mem-");r.append(t.getFieldValue(t.getDimension().getDisplayKeyField()).getString());if(t.getFieldValue(t.getDimension().getDisplayKeyField())!==null){o.setMember(t.getFieldValue(t.getDimension().getDisplayKeyField()).getString())}else{o.setMember(t.getName())}}t=s.getReferenceStructureElement2();if(e.notNull(t)){r.append("-mem-");r.append(t.getFieldValue(t.getDimension().getDisplayKeyField()).getString());if(t.getFieldValue(t.getDimension().getDisplayKeyField())!==null){o.setMember2(t.getFieldValue(t.getDimension().getDisplayKeyField()).getString())}else{o.setMember(t.getName())}}let n=i.getDocumentId();if(e.XStringUtils.isNotNullAndNotEmpty(n)){o.setDataValueId(e.XStringUtils.concatenate3("docId","-",n))}}o.setRow(l+this.m_fixedHeight-this.m_fixedHeightOff+this.m_offsetRows);o.setColumn(n+this.m_fixedWidth-this.m_fixedWidthOff+this.m_offsetColumns);this.setCell(n+this.m_fixedWidth-this.m_fixedWidthOff,l+this.m_fixedHeight-this.m_fixedHeightOff,o)}}};e.FioriGrid.prototype.setHeaderCells=function(t,i){let n=t.getRsDimensions();let r=t.getType();let l=t.getTuplesCount();let o=e.XStringBuffer.create();let s=e.XStringBuffer.create();let a=t.getType()===e.AxisType.COLUMNS;for(let u=0;u<l;u++){let l=t.getTupleAt(u);let p=0;let c=l.size();for(let g=0;g<c;g++){let c=n.get(g);let m=l.get(g);let f=a?m.getDisplayLevel():0;let C=c.getResultSetFields();let d=C.size();let y=m.getDimensionMember();o.clear();let h=a&&d>0?this.getMaxDisplayLevel(t,c):0;if(a&&d>0&&h>0){for(let t=0;t<=h;++t){let n=e.FioriGridCell.create("",e.FioriCellType.HEADER);n.setDisplayValue("");let r=this.m_resultSet.getQueryModel().getDimensionByName(c.getName()).getExternalName();if(e.notNull(r)){n.setDimension(r)}else{n.setDimension(c.getName())}if(y.getName()!==null&&c.isStructure()&&y.getDimension().getStructureMember(y.getName()).getFieldValue(y.getDimension().getDisplayKeyField())!==null){n.setMember(y.getDimension().getStructureMember(y.getName()).getFieldValue(y.getDimension().getDisplayKeyField()).getString())}else{n.setMember(y.getName())}n.setRow(p+t);n.setColumn(u+i);this.setCell(u+i,p+t,n)}}for(let n=0;n<d;n++){let g=y.getAllFieldValues().getByKey(C.get(n).getName());o.append(this.formatFieldValue(g));s.append(this.formatFieldValue(g));if(n===0){this.prependToFirstField(m,o);this.appendAlertLevelToValue(m,o)}let d=e.FioriGridCell.create(o.toString(),e.FioriCellType.HEADER);if(!this.m_suppressRepetition||m.getFirstTuple()===l){d.setDisplayValue(s.toString())}let h=this.m_resultSet.getQueryModel().getDimensionByName(c.getName()).getExternalName();if(e.notNull(h)){d.setDimension(h)}else{d.setDimension(c.getName())}if(c.isStructure()&&y.getDimension().getStructureMember(y.getName()).getFieldValue(y.getDimension().getDisplayKeyField())!==null){d.setMember(y.getDimension().getStructureMember(y.getName()).getFieldValue(y.getDimension().getDisplayKeyField()).getString());let t=d.getMember();if(e.notNull(t)){d.setSemantic(this.m_semStyles.getByKey(t))}}else{d.setMember(y.getName())}if(t===this.m_resultSet.getRowsAxis()){d.setRowTupleIndex(u)}else{d.setColumnTupleIndex(u)}if(n===0&&m.getFirstTuple()===l){d.setDisplayLevel(a?0:m.getDisplayLevel());let t=m.getDrillState();let i="";if(t===e.DrillState.EXPANDED||t===e.DrillState.DRILLED){d.setDrillState("Expanded");if(c.getLowerLevelNodeAlignment()===e.Alignment.CHILDREN_ABOVE_PARENT){if(r===e.AxisType.ROWS){i="sap-icon://slim-arrow-up"}else{i="sap-icon://slim-arrow-left"}}else{if(r===e.AxisType.ROWS){i="sap-icon://slim-arrow-down"}else{i="sap-icon://slim-arrow-down"}}}else if(t===e.DrillState.COLLAPSED||t===e.DrillState.LEAF_UDH_EXPAND_ALLOWED){d.setDrillState("Collapsed");if(c.getLowerLevelNodeAlignment()===e.Alignment.CHILDREN_ABOVE_PARENT){if(r===e.AxisType.ROWS){i="sap-icon://slim-arrow-right"}else{i="sap-icon://slim-arrow-up"}}else{if(r===e.AxisType.ROWS){i="sap-icon://slim-arrow-right"}else{i="sap-icon://slim-arrow-right"}}}else{d.setDrillState("None");i=""}d.setIcon(i)}let _=d.getMember();if(e.notNull(_)&&this.m_semStyles.getByKey(_)!==null){d.setSemantic(this.m_semStyles.getByKey(_))}o.clear();s.clear();this.addCell(r,p+f,u,i,d);p++}}}};e.FioriGrid.prototype.setSuppressUnit=function(e){this.m_suppress_unit=e};e.FioriGrid.prototype.setTitleCells=function(t,i,n){let r=t.getType();let l=t.getRsDimensions();let o=0;let s=e.XStringBuffer.create();let a=e.XStringBuffer.create();let u=l.size();for(let t=0;t<u;t++){let p=l.get(t);let c=p.getResultSetFields();let g=c.size();for(let l=0;l<g;l++){let g=c.get(l).getName();if(e.XStringUtils.isNullOrEmpty(p.getName())){s.append("[").append(g).append("]")}else{if(l===0){a.append(p.getText())}if(p.isMeasureStructure()){if(l===0){s.append("Measures")}}else if(p.isStructure()){if(l===0){s.append("Structure")}}else{if(l===0){s.append(p.getName()).append(".[")}else{s.append("[")}s.append(g).append("]")}}if(r===e.AxisType.ROWS){if(!(p.isStructure()&&u===t+1)){let t=e.FioriGridCell.create(s.toString(),e.FioriCellType.TITLE);t.setDisplayValue(a.toString());let n=this.m_resultSet.getQueryModel().getDimensionByName(p.getName()).getExternalName();if(e.notNull(n)){t.setDimension(n)}else{t.setDimension(p.getName())}t.setRow(i);t.setColumn(o);this.setCell(o,i,t)}}else{if(!(p.isStructure()&&u===t+1)){let t=this.m_cells.getByIndices(i,o);if(e.notNull(t)){let i=s.toString();s.clear();a.clear();s.append(t.toString());s.append(e.FioriGrid.MAGIC_CELL_DIV);s.append(i);a.append(t.getDisplayValue());if(l===0&&!p.isStructure()){a.append(e.FioriGrid.MAGIC_CELL_DIV);a.append(p.getText())}}let n=e.FioriGridCell.create(s.toString(),e.FioriCellType.TITLE);n.setRow(o);n.setColumn(i);n.setDisplayValue(a.toString());if(e.notNull(t)){n.setDimension(t.getDimension());let i=this.m_resultSet.getQueryModel().getDimensionByName(p.getName()).getExternalName();if(e.notNull(i)){n.setDimensionOther(i)}else{n.setDimensionOther(p.getName())}}else{let t=this.m_resultSet.getQueryModel().getDimensionByName(p.getName()).getExternalName();if(e.notNull(t)){n.setDimension(t)}else{n.setDimension(p.getName())}}this.setCell(i,o,n)}else if(n){this.m_fixedWidthOff=1}}s.clear();a.clear();o++}}};e.FioriGrid.prototype.setupGrid=function(t){this.m_resultSet=t;this.m_withDetails=true;this.m_semStyles=e.XHashMapByString.create()};e.FioriGridCell=function(){};e.FioriGridCell.prototype=new e.XObject;e.FioriGridCell.prototype._ff_c="FioriGridCell";e.FioriGridCell.create=function(t,i){let n=new e.FioriGridCell;n.setupExt(t,i);return n};e.FioriGridCell.prototype.m_alertLevel=null;e.FioriGridCell.prototype.m_cellType=null;e.FioriGridCell.prototype.m_col=0;e.FioriGridCell.prototype.m_colIndex=0;e.FioriGridCell.prototype.m_content=null;e.FioriGridCell.prototype.m_dataValueId=null;e.FioriGridCell.prototype.m_dimName=null;e.FioriGridCell.prototype.m_displayLevel=0;e.FioriGridCell.prototype.m_displayValue=null;e.FioriGridCell.prototype.m_documentId=null;e.FioriGridCell.prototype.m_drillState=null;e.FioriGridCell.prototype.m_icon=null;e.FioriGridCell.prototype.m_input=false;e.FioriGridCell.prototype.m_isLeftAligned=false;e.FioriGridCell.prototype.m_isRep=false;e.FioriGridCell.prototype.m_isTotal=false;e.FioriGridCell.prototype.m_memName=null;e.FioriGridCell.prototype.m_memName2=null;e.FioriGridCell.prototype.m_oDimName=null;e.FioriGridCell.prototype.m_row=0;e.FioriGridCell.prototype.m_rowIndex=0;e.FioriGridCell.prototype.m_semantic=null;e.FioriGridCell.prototype.getAlertLevel=function(){return this.m_alertLevel};e.FioriGridCell.prototype.getCellType=function(){return this.m_cellType};e.FioriGridCell.prototype.getCharacterCount=function(){if(e.isNull(this.m_content)){return 0}return e.XString.size(this.m_content)};e.FioriGridCell.prototype.getColumn=function(){return this.m_col};e.FioriGridCell.prototype.getColumnTupleIndex=function(){return this.m_colIndex};e.FioriGridCell.prototype.getDataValueId=function(){return this.m_dataValueId};e.FioriGridCell.prototype.getDimension=function(){return this.m_dimName};e.FioriGridCell.prototype.getDimensionOther=function(){return this.m_oDimName};e.FioriGridCell.prototype.getDisplayLevel=function(){return this.m_displayLevel};e.FioriGridCell.prototype.getDisplayValue=function(){return this.m_displayValue};e.FioriGridCell.prototype.getDocumentId=function(){return this.m_documentId};e.FioriGridCell.prototype.getDrillState=function(){return this.m_drillState};e.FioriGridCell.prototype.getIcon=function(){return this.m_icon};e.FioriGridCell.prototype.getInput=function(){return this.m_input};e.FioriGridCell.prototype.getIsRepetition=function(){return this.m_isRep};e.FioriGridCell.prototype.getMember=function(){return this.m_memName};e.FioriGridCell.prototype.getMember2=function(){return this.m_memName2};e.FioriGridCell.prototype.getRow=function(){return this.m_row};e.FioriGridCell.prototype.getRowTupleIndex=function(){return this.m_rowIndex};e.FioriGridCell.prototype.getSemantic=function(){return this.m_semantic};e.FioriGridCell.prototype.getText=function(t){if(e.isNull(this.m_content)){return""}if(e.XString.size(this.m_content)>t){return e.XString.substring(this.m_content,0,t)}return this.m_content};e.FioriGridCell.prototype.isLeftAligned=function(){return this.m_isLeftAligned};e.FioriGridCell.prototype.isTotals=function(){return this.m_isTotal};e.FioriGridCell.prototype.releaseObject=function(){this.m_content=null;this.m_cellType=null;e.XObject.prototype.releaseObject.call(this)};e.FioriGridCell.prototype.setAlertLevel=function(e){this.m_alertLevel=e};e.FioriGridCell.prototype.setColumn=function(e){this.m_col=e};e.FioriGridCell.prototype.setColumnTupleIndex=function(e){this.m_colIndex=e};e.FioriGridCell.prototype.setDataValueId=function(e){this.m_dataValueId=e};e.FioriGridCell.prototype.setDimension=function(e){this.m_dimName=e};e.FioriGridCell.prototype.setDimensionOther=function(e){this.m_oDimName=e};e.FioriGridCell.prototype.setDisplayLevel=function(e){this.m_displayLevel=e};e.FioriGridCell.prototype.setDisplayValue=function(e){this.m_displayValue=e};e.FioriGridCell.prototype.setDocumentId=function(e){this.m_documentId=e};e.FioriGridCell.prototype.setDrillState=function(e){this.m_drillState=e};e.FioriGridCell.prototype.setIcon=function(e){this.m_icon=e};e.FioriGridCell.prototype.setInput=function(e){this.m_input=e};e.FioriGridCell.prototype.setIsRepetition=function(e){this.m_isRep=e};e.FioriGridCell.prototype.setIsTotal=function(e){this.m_isTotal=e};e.FioriGridCell.prototype.setMember=function(e){this.m_memName=e};e.FioriGridCell.prototype.setMember2=function(e){this.m_memName2=e};e.FioriGridCell.prototype.setRow=function(e){this.m_row=e};e.FioriGridCell.prototype.setRowTupleIndex=function(e){this.m_rowIndex=e};e.FioriGridCell.prototype.setSemantic=function(e){this.m_semantic=e};e.FioriGridCell.prototype.setupExt=function(t,i){this.m_content=t;this.m_isLeftAligned=i!==e.FioriCellType.DATA;this.m_cellType=i};e.FioriGridCell.prototype.toString=function(){if(e.isNull(this.m_content)){return""}return this.m_content};e.FioriGridFactoryImpl=function(){};e.FioriGridFactoryImpl.prototype=new e.XObject;e.FioriGridFactoryImpl.prototype._ff_c="FioriGridFactoryImpl";e.FioriGridFactoryImpl.create=function(){return new e.FioriGridFactoryImpl};e.FioriGridFactoryImpl.prototype.createFioriGrid=function(t){return e.FioriGrid.create(t)};e.FioriLineDef=function(){};e.FioriLineDef.prototype=new e.XObject;e.FioriLineDef.prototype._ff_c="FioriLineDef";e.FioriLineDef.create=function(){return new e.FioriLineDef};e.FioriLineDef.prototype.m_hasTotals=false;e.FioriLineDef.prototype.hasTotals=function(){return this.m_hasTotals};e.FioriLineDef.prototype.setHasTotals=function(e){this.m_hasTotals=e};e.FioriLineDef.prototype.toString=function(){return e.XStringBuffer.create().append("Totals:").appendBoolean(this.m_hasTotals).toString()};e.ReferenceGridFactoryImpl=function(){};e.ReferenceGridFactoryImpl.prototype=new e.XObject;e.ReferenceGridFactoryImpl.prototype._ff_c="ReferenceGridFactoryImpl";e.ReferenceGridFactoryImpl.create=function(){return new e.ReferenceGridFactoryImpl};e.ReferenceGridFactoryImpl.prototype.createForVizGrid=function(t){return e.ReferenceGrid.createForVizGrid(t)};e.ReferenceGridFactoryImpl.prototype.createReferenceGrid=function(e,t){if(t){return this.createReferenceGridWithDetails(e)}return this.createReferenceGridSimple(e)};e.ReferenceGridFactoryImpl.prototype.createReferenceGridSimple=function(t){return e.ReferenceGrid.create(t)};e.ReferenceGridFactoryImpl.prototype.createReferenceGridWithDetails=function(t){return e.ReferenceGrid.createWithDetails(t)};e.ReferenceGridFactoryImpl.prototype.createReferenceGridWithName=function(t,i){if(e.notNull(t)&&e.XString.endsWith(t,"_gen")){return e.ReferenceGrid2.createWithName2(t,i)}return e.ReferenceGrid.createWithName(t,i)};e.ReferenceGridFactoryImpl.prototype.createReferenceGridWithNameAndDetails=function(t,i){return e.ReferenceGrid.createWithNameAndDetails(t,i)};e.KpiRendererFactoryImpl=function(){};e.KpiRendererFactoryImpl.prototype=new e.XObject;e.KpiRendererFactoryImpl.prototype._ff_c="KpiRendererFactoryImpl";e.KpiRendererFactoryImpl.create=function(){return new e.KpiRendererFactoryImpl};e.KpiRendererFactoryImpl.prototype.newRenderer=function(t){return e.RsKpiRenderer.create()};e.RsKpiRenderer=function(){};e.RsKpiRenderer.prototype=new e.XObject;e.RsKpiRenderer.prototype._ff_c="RsKpiRenderer";e.RsKpiRenderer.stateMap=null;e.RsKpiRenderer.unitMap=null;e.RsKpiRenderer.addIndicatorContent=function(t,i,n){let r=e.RsKpiRenderer.getUnitMap();let l="";let o=e.XInteger.convertToString(t.getNumericShift());if(r.containsKey(o)){l=r.getStringByKey(o)}let s=e.XStringBuffer.create();s.append(!i.getCurrencyUnit().isEmpty()?i.getCurrencyUnit().getSuffix():"");s.append(t.getFormattedValue(i));n.putString(e.SapKpiConstants.K_UNIT,l);n.putString(e.SapKpiConstants.K_NUMBER,s.toString())};e.RsKpiRenderer.create=function(){return new e.RsKpiRenderer};e.RsKpiRenderer.getStateMap=function(){if(e.isNull(e.RsKpiRenderer.stateMap)){e.RsKpiRenderer.stateMap=e.PrFactory.createStructure();e.RsKpiRenderer.stateMap.putString("0",e.SapKpiConstants.V_GOOD);e.RsKpiRenderer.stateMap.putString("1",e.SapKpiConstants.V_CRITICAL);e.RsKpiRenderer.stateMap.putString("2",e.SapKpiConstants.V_ERROR)}return e.RsKpiRenderer.stateMap};e.RsKpiRenderer.getUnitMap=function(){if(e.isNull(e.RsKpiRenderer.unitMap)){e.RsKpiRenderer.unitMap=e.PrFactory.createStructure();e.RsKpiRenderer.unitMap.putString("-3","K");e.RsKpiRenderer.unitMap.putString("-6","M");e.RsKpiRenderer.unitMap.putString("-9","B")}return e.RsKpiRenderer.unitMap};e.RsKpiRenderer.processMetricData=function(t,i,n){let r=e.PrFactory.createStructure();let l=r.putNewStructure(e.VizDefConstants.K_CHART);l.putString(e.VizDefConstants.K_TYPE,e.SapKpiConstants.K_METRIC);let o=r.putNewStructure(e.SapKpiConstants.K_SAP_CARD);o.putString(e.VizDefConstants.K_TYPE,e.SapKpiConstants.K_ANALYTICAL);let s=o.putNewStructure(e.SapKpiConstants.K_HEADER);s.putString(e.VizDefConstants.K_TYPE,e.SapKpiConstants.K_NUMERIC);s.putString(e.VizDefConstants.K_TITLE,n.getStructureByKey(e.VizDefConstants.K_CHART).getStringByKey(e.VizDefConstants.K_TITLE));s.putString(e.VizDefConstants.K_SUB_TITLE,n.getStructureByKey(e.VizDefConstants.K_CHART).getStringByKey(e.VizDefConstants.K_SUB_TITLE));let a=e.XList.create();a.add(e.VizDefConstants.K_VALUE_AXIS);a.add(e.VizDefConstants.K_VALUE_AXIS2);a.add(e.VizDefConstants.K_THRESHOLD_REFERENCE);a.add(e.VizDefConstants.K_VARIANCE);let u=t.getIndicesByFeedOrder(a);let p=t.hasTupleForFeed(e.VizDefConstants.K_VALUE_AXIS);let c=s.putNewList(e.SapKpiConstants.K_SIDEINDICATORS);let g=null;let m="";let f="";for(let n=0;n<u.size();n++){let r=u.get(n).getInteger();let l=t.getTupleAt(r);let o=l.getPrettyText(a);let C=i.getDataCell(r,0);if(p&&l.isSelectedByString(e.VizDefConstants.K_VALUE_AXIS)){s.putString(e.SapKpiConstants.K_UNIT_OF_MEASUREMENT,C.getCurrencyUnit().getFormatted());s.putString(e.VizDefConstants.K_SUB_TITLE,o);g=s.putNewStructure(e.SapKpiConstants.K_MAININDICATOR);e.RsKpiRenderer.addIndicatorContent(l,C,g);p=false}else if(l.isSelectedByString(e.VizDefConstants.K_VALUE_AXIS2)){let t=c.addNewStructure();t.putString(e.VizDefConstants.K_TITLE,o);e.RsKpiRenderer.addIndicatorContent(l,C,t)}if(l.isSelectedByString(e.VizDefConstants.K_THRESHOLD_REFERENCE)){let t=e.XInteger.convertToString((C.getExceptionSettingPriorityByName(e.ExceptionSetting.ALERT_LEVEL.getName()).getInteger()-1)/3);if(e.RsKpiRenderer.getStateMap().containsKey(t)){m=e.RsKpiRenderer.getStateMap().getStringByKey(t)}}if(l.isSelectedByString(e.VizDefConstants.K_VARIANCE)){let t=C.getDouble();if(t!==0){f=t>0?e.SapKpiConstants.V_UP:e.SapKpiConstants.V_DOWN}}}if(e.notNull(g)){if(!e.XString.isEqual(m,"")){g.putString(e.SapKpiConstants.K_STATE,m)}if(!e.XString.isEqual(f,"")){g.putString(e.SapKpiConstants.K_TREND,f)}}return r};e.RsKpiRenderer.prototype.render=function(t){let i=t.getQueryModel().getVizManager().getVizDef();let n=t.getQueryModel().getVizManager().getGlobalDef();if(e.notNull(i)&&i.containsKey(e.VizDefConstants.K_CHART)&&t.getAvailableDataCellCount()>0){let r=i.getStructureByKey(e.VizDefConstants.K_CHART);if(e.XString.isEqual(r.getStringByKey(e.VizDefConstants.K_TYPE),e.SapKpiConstants.K_METRIC)){let r=e.RsVizAxisExtractor.extractCustomFormatting(i,n);let l=e.XHashMapByString.create();let o=i.getStructureByKey("feedMembers");e.XCollectionUtils.forEach(o.getKeysAsReadOnlyList(),t=>{let i=e.XStream.of(o.getListByKey(t)).collect(e.XStreamCollector.toListOfString(e=>e.asString().getString()));l.put(t,i)});let s=e.RsVizAxisExtractor.getTuplesFromColumnAxis(t,l,r);return e.RsKpiRenderer.processMetricData(s,t,i)}}return e.PrFactory.createStructure()};e.SapKpiConstants={K_ANALYTICAL:"Analytical",K_CALCULATIONS:"Calculations",K_FEEDMEMBERS:"feedMembers",K_GLOBALOBJECTS:"GlobalObjects",K_HEADER:"header",K_MAININDICATOR:"mainIndicator",K_METRIC:"metric",K_NUMBER:"number",K_NUMERIC:"Numeric",K_SAP_CARD:"sap.card",K_SIDEINDICATORS:"sideIndicators",K_STATE:"state",K_THRESHOLDREFERENCE:"thresholdReference",K_TREND:"trend",K_UNIT:"unit",K_UNIT_OF_MEASUREMENT:"unitOfMeasurement",K_VARIANCE:"variance",V_CALCULATION:"calculation",V_CRITICAL:"Critical",V_DOWN:"Down",V_ERROR:"Error",V_GOOD:"Good",V_UP:"Up"};e.OlapVizToChartConverterUtil={BASE_PLOT_LINE_NAME:"BASE_PLOT_LINE",CATEGORY_AXIS:"CategoryAxis",CATEGORY_AXIS2:"CategoryAxis2",COORDINATE_SYTEM_BICATEGORIAL:"CoordinateSystemBiCategorical",COORDINATE_SYTEM_BISCALAR:"CoordinateSystemBiScalar",COORDINATE_SYTEM_CATVAL1:"CoordinateSystemCatVal1",COORDINATE_SYTEM_CATVAL2:"CoordinateSystemCatVal2",COORDINATE_SYTEM_CATVAL3:"CoordinateSystemCatVal3",COORDINATE_SYTEM_CATVAL4:"CoordinateSystemCatVal4",DEFAULT_STYLING_AXIS:"DEFAULT_STYLING_AXIS",EXCEPTIONAL_STYLING_AXIS:"EXCEPTIONAL_STYLING_AXIS",INFO_PREFIX:" (",INFO_SUFFIX:")",UNIFORM_SERIES:"UNIFORM_SERIES",addBasePlotLine:function(t){if(e.notNull(t)){let i=t.addPlotLine(e.OlapVizToChartConverterUtil.BASE_PLOT_LINE_NAME,"");i.setWidth(2);i.setValue(0);i.setColor("#000000")}},addDataPointExceptionInfo:function(t,i,n,r){if(e.notNull(n)){let l=n.getAlertLevel();let o=n.getExceptionName();let s=r.getFormulaExceptionManager();let a=e.isNull(s)?null:s.getModelFormulaExceptionThreshold(o);let u=t.addExceptionInformation();let p=e.isNull(a)?null:a.getColor();if(e.XStringUtils.isNotNullAndNotEmpty(p)){u.setColor(a.getColor())}let c=e.isNull(a)?null:a.getName();if(e.XStringUtils.isNotNullAndNotEmpty(c)){u.setThresholdName(c)}let g=e.isNull(a)?null:a.getText();if(e.XStringUtils.isNotNullAndNotEmpty(g)){u.setThresholdText(g)}u.setExceptionName(o);u.setLevel(e.SacAlertLevel.getByLevelValue(l.getLevel()));u.setValueSign(e.OlapVizToChartConverterUtil.getValueSignFromMeasure(n));e.XCollectionUtils.forEach(n.getTags(),e=>{u.addTag(e)});let m=e.SacDataPathTag.createTag();e.OlapToVisualizationConverterUtil.applyDataSectionInfoFromTupleToPath(i,m);m.add(e.RscMeasureInfoTag.create(n.getModelReference()));let f=t.getParentSeries().getParentSeriesGroup().getParentCoordinateSystem().getParentChartVisualization();let C=f.getRelevantDataPathTags();e.OlapToVisualizationConverterUtil.complementExceptionInformation(u,m,C);f.addExceptionInformation(u)}},applyChartStylingAxis:function(t,i,n,r,l,o){let s=n.getOrCreateStylingAxis(t);e.OlapVizToChartConverterUtil.transferColorScheme(s.getAxisDomain().getAsCategorial(),i,r);e.OlapVizToChartConverterUtil.fillCategoryAxis(r,s,i,i.shouldIncludeKeyFigureDimension(),l,e.ChartTotalsRestriction.TOTALS_ALLOWED,true,o)},chartPlotAreaLabelStyle:function(t){let i=e.ChartLabelStyle.create("ChartPlotAreaLabelStyle","ChartPlotAreaLabelStyle");let n=t.getChartSetting().getChartStyle().getPlotArea();let r=n.getDataLabel();let l=e.XList.create();l.add(r);e.OlapVizToChartConverterUtil.createLabelStyle(t,i,l);return i},convertChartType:function(t){return e.ChartVisualizationType.lookup(t.getName())},createAxis:function(t,i,n,r,l){let o=null;if(e.notNull(i)){let s=e.OlapVizToChartConverterUtil.lookupAxisPosition(i);let a=e.XStringUtils.concatenate3(r.getName(),":",i.getName());if(s.isTypeOf(e.ChartVisualizationAxisPosition.X)){o=t.addXAxis(a,a,n)}else if(s.isTypeOf(e.ChartVisualizationAxisPosition.Y)){o=t.addYAxis(a,a,n)}else if(s.isTypeOf(e.ChartVisualizationAxisPosition.Z)){o=t.addZAxis(a,a,n)}else if(s.isTypeOf(e.ChartVisualizationAxisPosition.HIDDEN)){o=t.addHiddenAxis(a,a,n)}else{o=t.addHiddenAxis(a,a,n)}o.setPosition(s);o.setLabelStyle(e.OlapVizToChartConverterUtil.createAxisLabelStyle(i,r,o.getAxisDomain().getAxisDomainType(),l.getChartDefinition()));o.setTitleStyle(e.OlapVizToChartConverterUtil.createAxisTitleStyle(i,r,o.getAxisDomain().getAxisDomainType(),l.getChartDefinition()))}return o},createAxisLabelStyle:function(t,i,n,r){let l=e.ChartLabelStyle.create("AxisLabelStyle","AxisLabelStyle");let o=r.getChartSetting().getChartStyle();let s=o.getDefaultAxisStyle();let a=null;if(n.isTypeOf(e.ChartAxisDomainType.CATEGORIAL)){a=o.getCategoryAxisStyle()}else if(n.isTypeOf(e.ChartAxisDomainType.SCALAR)){a=o.getOrCreateValueAxisStyle(i)}let u=o.getOrCreateChartAxisStyleByPosition(t);let p=e.XList.create();if(e.notNull(u)){p.add(u.getLabelStyle())}if(e.notNull(a)){p.add(a.getLabelStyle())}if(e.notNull(s)){p.add(s.getLabelStyle())}e.OlapVizToChartConverterUtil.createLabelStyle(r,l,p);return l},createAxisTitleStyle:function(t,i,n,r){let l=e.ChartLabelStyle.create("AxisTitleStyle","AxisTitleStyle");let o=r.getChartSetting().getChartStyle();let s=o.getDefaultAxisStyle();let a=null;if(n.isTypeOf(e.ChartAxisDomainType.CATEGORIAL)){a=o.getCategoryAxisStyle()}else if(n.isTypeOf(e.ChartAxisDomainType.SCALAR)){a=o.getOrCreateValueAxisStyle(i)}let u=o.getOrCreateChartAxisStyleByPosition(t);let p=e.XList.create();if(e.notNull(u)){p.add(u.getHeaderStyle())}if(e.notNull(a)){p.add(a.getHeaderStyle())}if(e.notNull(s)){p.add(s.getHeaderStyle())}e.OlapVizToChartConverterUtil.createLabelStyle(r,l,p);return l},createChartLegend:function(t){let i=e.ChartLegend.create("ChartLegend","ChartLegend");let n=t.getChartSetting().getChartStyle().getLegendStyle();i.setVerticalAlignment(e.OlapToVisualizationConverterUtil.getVerticalAlignmentFromViz(n.getVerticalAlignmentRaw().getResolvedValue(t)));i.setHorizontalAlignment(e.OlapToVisualizationConverterUtil.getHorizontalAlignmentFromViz(n.getHorizontalAlignmentRaw().getResolvedValue(t)));i.setLayoutDirection(e.OlapToVisualizationConverterUtil.getLayoutDirectionFromViz(n.getLayoutDirectionRaw().getResolvedValue(t)));i.setEnabled(n.getEnabledRaw().resolveBoolean(t));i.setLabelStyle(e.OlapVizToChartConverterUtil.createLegendLabelStyle(t));return i},createChartPlotAre:function(t){let i=e.ChartPlotArea.create("ChartPlotArea","ChartPlotArea");i.setLabelStyle(e.OlapVizToChartConverterUtil.chartPlotAreaLabelStyle(t));return i},createChartTitleStyle:function(t,i){i.setTitle(t.getChartSetting().getTitle());let n=e.ChartLabelStyle.create("ChartTitle","ChartTitle");let r=t.getChartSetting().getChartStyle().getTitleStyle();n.setFontWeight(r.getFontBoldRaw().resolveBoolean(t)?"bold":"normal");n.setFontStyle(r.getFontItalicRaw().resolveBoolean(t)?"italic":"normal");n.setFontFamily(r.getFontFamilyRaw().resolveString(t));n.setFontSize(e.XStringUtils.concatenate2(e.XDouble.convertToString(r.getFontSizeRaw().resolveDouble(t)),"px"));n.setFontColor(r.getFontColorRaw().resolveString(t));n.setEnabled(r.getShowLabelRaw().resolveBoolean(t));n.setTextAlign(e.OlapToVisualizationConverterUtil.getHorizontalAlignmentFromViz(r.getHorizontalAlignmentRaw().getResolvedValue(t)));i.setChartTitleStyle(n)},createLabelStyle:function(t,i,n){let r=e.OlapVizToChartConverterUtil.resolveBoolean(n,t,e=>e.getFontBoldRaw());i.setFontWeight(r?"bold":"normal");let l=e.OlapVizToChartConverterUtil.resolveBoolean(n,t,e=>e.getFontItalicRaw());i.setFontStyle(l?"italic":"normal");let o=e.OlapVizToChartConverterUtil.resolveString(n,t,e=>e.getFontFamilyRaw());i.setFontFamily(o);let s=e.OlapVizToChartConverterUtil.resolveDouble(n,t,e=>e.getFontSizeRaw());i.setFontSize(e.XStringUtils.concatenate2(e.XDouble.convertToString(s),"px"));let a=e.OlapVizToChartConverterUtil.resolveString(n,t,e=>e.getFontColorRaw());if(!e.XStringUtils.isNotNullAndNotEmpty(a)){a="#000000"}i.setFontColor(a);i.setEnabled(e.OlapVizToChartConverterUtil.resolveBoolean(n,t,e=>e.getShowLabelRaw()))},createLegendLabelStyle:function(t){let i=e.ChartLabelStyle.create("LegendLabelStyle","LegendLabelStyle");let n=t.getChartSetting().getChartStyle().getLegendStyle().getLabelStyle();let r=e.XList.create();r.add(n);e.OlapVizToChartConverterUtil.createLabelStyle(t,i,r);return i},createValueAxis:function(t,i,n,r){let l=null;if(e.XCollectionUtils.hasElements(n.getTypedValueSelectionsForType(r))){l=e.OlapVizToChartConverterUtil.createAxis(t,i,e.ChartAxisDomainType.SCALAR,r,n)}return l},decorateDataPoint:function(t,i,n,r,l,o,s,a){let u=s.getDimensionNames();let p=s.shouldIncludeKeyFigureDimension();if(e.notNull(i)&&e.XCollectionUtils.hasElements(u)||p){let u=p&&e.notNull(a);let c=e.ChartAxisCategoryAnalytic.getKey(t,s.getDimensionNames(),u?a.getName():null);let g=l.getAxisDomain().getAsCategorial().getCategoryByName(c);if(e.isNull(g)&&u){c=e.ChartAxisCategoryAnalytic.getKey(t,s.getDimensionNames(),null);g=l.getAxisDomain().getAsCategorial().getCategoryByName(c)}if(e.OlapVizToChartConverterUtil.dimensionVisualizationSectionCovered(o.getDistributionDimensionSelection(),null,s)){n.addStylingCategory(g)}else if(e.OlapVizToChartConverterUtil.dimensionVisualizationSectionCovered(o.getGroupingDimensionSelection(),null,s)){r.addStylingCategory(g)}else if(e.OlapVizToChartConverterUtil.dimensionVisualizationSectionCovered(o.getDistributionDimensionSelection(),o.getGroupingDimensionSelection(),s)){n.addStylingCategory(g)}else{i.addStylingCategory(g)}}},decorateDataPointInternal:function(t,i,n,r){let l=r.getValueForKey(n.getDimensionMember().getName());let o=null;if(e.notNull(l)){e.OlapVizToChartConverterUtil.addDataPointExceptionInfo(i,r,l,n.getQueryModel());i.setIsEmptyValue(l.getValueException()!==e.ValueException.NORMAL&&l.getValueException()!==e.ValueException.ZERO);o=l.getScaledValue();i.addCoordinate(t,t,o,l.getFormattedTextFull(),l.getFormattedText(),l.getScalingText(),l.getUnitInformation(),n.getDimensionMember().getText());let s=n.getStyle();if(e.notNull(s)){e.OlapVizToChartConverterUtil.transferVizToChartStyle(s,i.getStyle(),null)}e.OlapVizToChartConverterUtil.decorateSimpleDataPoint(e.XStringUtils.concatenate2(t,"."),i,n,n.getVisualizationValueTypes(),r)}return o},decorateSimpleDataPoint:function(t,i,n,r,l){for(let o=0;o<r.size();o++){let s=r.get(o);let a=e.XStringUtils.concatenate2(t,s.getName());let u=n.getTypedValueSelectionsForType(s);if(e.XCollectionUtils.hasElements(u)){let t=u.get(0);if(t.getDimensionMember()!==null){e.OlapVizToChartConverterUtil.decorateDataPointInternal(a,i,t,l)}}}},decorateWithCategory:function(t,i,n){if(e.notNull(i)){let r=i.getParentChartDomain();let l=e.isNull(r)?null:r.getChartAxis();if(e.notNull(r)){t.addCoordinate(l.getName(),l.getText(),e.XStringValue.create(i.getName()),null,null,null,null,null);if(e.notNull(n)){t.addCoordinate(n,n,e.XIntegerValue.create(r.getCategoryIndex(i)),null,null,null,null,null)}}}},dimensionVisualizationSectionCovered:function(t,i,n){return e.XStream.ofString(n.getDimensionNames()).allMatch(n=>t.getDimensionNames().contains(n.getString())||e.notNull(i)&&i.getDimensionNames().contains(n.getString()))&&(t.shouldIncludeKeyFigureDimension()||e.notNull(i)&&i.shouldIncludeKeyFigureDimension()||!n.shouldIncludeKeyFigureDimension())},expandAndApplyDataPointStyle:function(t,i,n,r){e.OlapVizToChartConverterUtil.transferChartDataPointStyle(t,i,r);let l=n.getValueSign();if(e.notNull(l)){i.setValueSign(l)}let o=n.getExceptionName();if(e.XStringUtils.isNotNullAndNotEmpty(o)){i.setExceptionName(o)}let s=n.getLevel();if(e.notNull(s)){i.setAlertLevelMin(s);i.setAlertLevelMax(s)}e.XCollectionUtils.forEach(n.getTags(),e=>{i.addTag(e)})},expandDataPointStylesForExceptionInformation:function(t,i,n,r){e.XStream.of(i.getKeysAsReadOnlyList()).filter(e=>t.matchesExceptionInfo(e,n)).forEach(l=>{e.OlapVizToChartConverterUtil.expandAndApplyDataPointStyle(i.getByKey(l),t.addNewDataPointStyle(l.getName(),l.getText()),n,r)})},fillCategoryAxis:function(t,i,n,r,l,o,s,a){i.setText(e.XCollectionUtils.join(e.XStream.of(n.getDimensions()).collect(e.XStreamCollector.toListOfString(e=>e.getText()))," / "));e.OlapVizToChartConverterUtil.transferColorScheme(i.getAxisDomain().getAsCategorial(),n,t);let u=l.getListAxis();let p=u.getTuplesOnAxis();for(let l=0;l<p.size();l++){let u=p.get(l);e.OlapVizToChartConverterUtil.getOrCreateCategoryIteratively(t,i,u,n,r,l,o,s,a)}},fillValueAxis:function(t,i,n,r){let l=t.getTypedValueSelectionsForType(n);if(e.XCollectionUtils.hasElements(l)){let t=e.XCollectionUtils.join(e.XStream.of(l).filter(t=>t.getDimensionMember()!==null&&e.XStringUtils.isNotNullAndNotEmpty(t.getDimensionMember().getText())&&r.containsKey(t.getDimensionMember())).collect(e.XStreamCollector.toListOfString(t=>{let i=t.getDimensionMember();return e.XStringUtils.concatenate2(i.getText(),r.getByKey(i).getString())})),", ");i.setText(t)}else{i.setText("")}},getNameForCategory:function(t){return e.isNull(t)?"":t.getName()},getOrCreateCategory:function(t,i,n,r,l,o,s,a){let u=e.ChartAxisCategoryAnalytic.getKey(i,n,e.isNull(r)?null:r.getName());let p=t.getAxisDomain().getAsCategorial();let c=e.XStream.of(i.getAxisReference().getVisibleComponentsOnAxis()).filter(t=>t.getModelComponentType()===e.OlapComponentType.FIELD&&e.OlapVizToChartConverterUtil.matchDimensions(n,t.getDimension())).collect(e.XStreamCollector.toList());let g=e.isNull(r)?null:i.getAxisReference().getMeasureReference(r.getName());let m=e.isNull(r)||e.notNull(g)&&i.getValueForKey(r.getName())!==null;let f=a||e.XStream.of(c).allMatch(t=>{let n=i.getValueForModelComponent(t).getDrillState();return e.isNull(n)||n===e.DrillState.LEAF||n===e.DrillState.COLLAPSED||n===e.DrillState.COLLAPSED_EXPAND_AND_DRILLDOWN_ALLOWED});let C=t=>{let n=i.getValueForModelComponent(t).getDimensionMemberType();return n.isTypeOf(e.MemberType.RESULT)||e.OlapComponentType.TOTALS===n};let d=!(s===e.ChartTotalsRestriction.TOTALS_FORBIDDEN&&e.XStream.of(c).anyMatch(C));let y=p.getCategoryByName(u);if(m&&f&&d){if(e.isNull(y)){let s=e.ChartAxisCategoryAnalytic.getKey(i,n,!l||e.isNull(r)?null:r.getText());y=e.ChartAxisCategoryAnalytic.createAnalyticCategory(u,s,t,i,n,g,l,o)}else{y.obtainTupleCoordinates(i,o)}}return y},getOrCreateCategoryIteratively:function(t,i,n,r,l,o,s,a,u){if(l){let l=t.getVisualizationValueTypes();for(let p=0;p<l.size();p++){let c=l.get(p);let g=t.getTypedValueSelectionsForType(c);for(let t=0;t<g.size();t++){let l=g.get(t);if(l.getDimensionMember()!==null&&e.XStringUtils.isNotNullAndNotEmpty(l.getDimensionMember().getName())){e.OlapVizToChartConverterUtil.getOrCreateCategory(i,n,r.getDimensionNames(),l.getDimensionMember(),u||!e.XCollectionUtils.hasElements(r.getDimensionNames()),o,s,a)}}}}else{e.OlapVizToChartConverterUtil.getOrCreateCategory(i,n,r.getDimensionNames(),null,false,o,s,a)}},getValueSignFromMeasure:function(t){let i=t.getValueException();let n=null;let r=t.getPlainValue();let l=e.isNull(r)?null:r.getValueType();if(i===e.ValueException.UNDEFINED||i===e.ValueException.MIXED_CURRENCIES_OR_UNITS||i===e.ValueException.UNDEFINED_NOP){n=e.SacValueSign.UNDEFINED}else if(i!==e.ValueException.NORMAL&&i!==e.ValueException.ZERO){n=e.SacValueSign.UNBOOKED}else{if(e.notNull(l)&&l.isNumber()){let t=e.XValueUtil.getDouble(r,false,true);if(i===e.ValueException.ZERO){n=e.SacValueSign.ZERO}else if(t>0){n=e.SacValueSign.POSITIVE}else if(t<0){n=e.SacValueSign.NEGATIVE}}else{n=e.SacValueSign.NORMAL}}return n},lookupAxisPosition:function(t){return e.isNull(t)?null:e.ChartVisualizationAxisPosition.lookup(t.getName())},lookupTargetStackingType:function(t){return e.isNull(t)?null:e.ChartVisualizationStackingType.lookup(t.getName())},matchDimensions:function(t,i){return t.contains(i.getName())||i.isUniversalDisplayHierarchyDimension()&&e.XStream.ofString(e.RscMappingUtils.getUdhDimensionNames(i)).allMatch(e=>t.contains(e.getString()))},processBiCategorialCoordinateSystem:function(t,i,n,r,l){let o=i.getGroupingAxis();e.OlapVizToChartConverterUtil.transferColorScheme(o.getAxisDomain().getAsCategorial(),t.getDefaultStylingDimensionSelection(),t);e.OlapVizToChartConverterUtil.fillCategoryAxis(t,o,t.getGroupingDimensionSelection(),t.groupingDimensionSelectionEffectivelyIncludesKeyFigureDimension(),r,t.getChartType().getGroupingCategoryTotalsRestriction(),t.getChartType().getGroupingCategoryHierarchyAllowed(),l);let s=n.getYAxisReference().getAxisDomain().getAsCategorial();let a=n.getXAxisReference().getAxisDomain().getAsCategorial();let u=n.getOrCreateSeriesGroup(e.OlapVizToChartConverterUtil.UNIFORM_SERIES,e.OlapVizToChartConverterUtil.UNIFORM_SERIES);let p=u.getOrCreateSeries(e.OlapVizToChartConverterUtil.UNIFORM_SERIES,e.OlapVizToChartConverterUtil.UNIFORM_SERIES);let c=r.getListAxis();let g=c.getTuplesOnAxis();for(let i=0;i<g.size();i++){let n=g.get(i);let r=e.ChartAxisCategoryAnalytic.getKey(n,t.getCategoryDimensionSelection().getDimensionNames(),null);let l=s.getCategoryByName(r);let o=e.ChartAxisCategoryAnalytic.getKey(n,t.getGroupingDimensionSelection().getDimensionNames(),null);let u=a.getCategoryByName(o);e.OlapVizToChartConverterUtil.processSimpleDataPointCreation(p,t,t.getVisualizationValueTypes(),n,l,u,null)}},processComplexDataPointCreation:function(t,i,n,r,l,o,s){let a=e.isNull(r)?e.XInteger.convertToString(n.getTupleIndex()):r.getName();let u=t.addChartDataPoint(a,a);let p=e.OlapVizToChartConverterUtil.decorateDataPointInternal(i.getType().getName(),u,i,n);u.setCategory(r);if(e.notNull(p)&&p.getValueType().isNumber()){let t=e.XValueUtil.convertValue(p,e.XValueType.DOUBLE).getDouble();if(t>0){e.OlapVizToChartConverterUtil.sumUpValue(l,o,t)}else if(t<0){e.OlapVizToChartConverterUtil.sumUpValue(l,s,t)}}return u},processCorrelationCoordinateSystem:function(t,i,n,r,l,o,s){let a=i.getGroupingAxis();let u=a.getAxisDomain().getAsCategorial();e.OlapVizToChartConverterUtil.transferColorScheme(u,t.getDefaultStylingDimensionSelection(),t);e.OlapVizToChartConverterUtil.fillCategoryAxis(t,a,t.getGroupingDimensionSelection(),t.groupingDimensionSelectionEffectivelyIncludesKeyFigureDimension(),r,t.getChartType().getGroupingCategoryTotalsRestriction(),t.getChartType().getGroupingCategoryHierarchyAllowed(),s);let p=i.getDistributionAxis().getAxisDomain().getAsCategorial();let c=r.getListAxis();let g=c.getTuplesOnAxis();for(let i=0;i<g.size();i++){let r=g.get(i);let l=e.ChartAxisCategoryAnalytic.getKey(r,t.getGroupingDimensionSelection().getDimensionNames(),null);let o=e.ChartAxisCategoryAnalytic.getKey(r,t.getDistributionDimensionSelection().getDimensionNames(),null);let s=n.getOrCreateSeriesGroup(l,l);let a=u.getCategoryByName(l);s.setCategory(a);let c=p.getCategoryByName(o);let m=s.getOrCreateSeries(o,o);m.setCategory(c);e.OlapVizToChartConverterUtil.processSimpleDataPointCreation(m,t,t.getVisualizationValueTypes(),r,a,c,null)}},processCorrelationDataPointCreation:function(t,i,n,r,l,o,s){let a=e.ChartAxisCategoryAnalytic.getKey(r,t.getGroupingDimensionSelection().getDimensionNames(),null);let u=t.getDistributionDimensionSelection().getDimensionNames();let p=e.ChartAxisCategoryAnalytic.getKey(r,u,null);let c=i.getDistributionAxis().getAxisDomain().getAsCategorial();let g=n.getOrCreateSeriesGroup(a,a);let m=o.getCategoryByName(a);g.setCategory(m);let f=c.getCategoryByName(p);if(e.notNull(f)||u.size()===0){let n=g.getOrCreateSeries(p,p);n.setCategory(f);let o=e.OlapVizToChartConverterUtil.processSimpleDataPointCreation(n,t,t.getVisualizationValueTypes(),r,l,m,f);e.XCollectionUtils.forEach(t.getStylingDimensionKeys(),l=>{e.OlapVizToChartConverterUtil.decorateDataPoint(r,o,n,g,i.getOrCreateStylingAxis(l),t,t.getStylingDimensionSelection(l),null)});e.OlapVizToChartConverterUtil.decorateDataPoint(r,o,n,g,i.getOrCreateStylingAxis(e.OlapVizToChartConverterUtil.DEFAULT_STYLING_AXIS),t,t.getDefaultStylingDimensionSelection(),null)}},processDataPointStyleForCoordinateSystem:function(t,i){e.XCollectionUtils.forEach(t.getSeriesGroups(),t=>{e.OlapVizToChartConverterUtil.processDataPointStyleForSeriesGroup(t,i)})},processDataPointStyleForSeries:function(t,i){e.XCollectionUtils.forEach(t.getChartDataPoints(),t=>{e.OlapVizToChartConverterUtil.processDatapointStyleForChartDataPoint(t,i)})},processDataPointStyleForSeriesGroup:function(t,i){e.XCollectionUtils.forEach(t.getSeries(),t=>{e.OlapVizToChartConverterUtil.processDataPointStyleForSeries(t,i)})},processDataPointStyles:function(t,i){let n=t.getChartSetting().getChartStyle().getPrioritizedDataPointStyles();let r=e.XSimpleMap.create();e.XCollectionUtils.forEach(n,t=>{let n=i.addNewDataPointStyle(t.getName(),t.getText());e.OlapVizToChartConverterUtil.transferChartDataPointStyle(t,n,null);r.put(n,t)});i.tagMatchedExceptions();if(e.XCollectionUtils.hasElements(t.getDatapointVariableContainers())){i.clearDataPointStyles();e.XCollectionUtils.forEach(i.getExceptionInformation(),n=>{let l=t.getVariableHolderForDataPoint(n,()=>e.SacDataSectionInfoReference.create());e.OlapVizToChartConverterUtil.expandDataPointStylesForExceptionInformation(i,r,n,l)})}},processDatapointStyleForChartDataPoint:function(t,i){let n=t.getParentSeries().getParentSeriesGroup().getParentCoordinateSystem().getParentChartVisualization();let r=n.getDataPointStyles();if(e.XCollectionUtils.hasElements(r)){let l=n.getOrCreateStylingAxis(e.OlapVizToChartConverterUtil.EXCEPTIONAL_STYLING_AXIS);let o=l.getAxisDomain().getAsCategorial();let s=e.XList.create();let a;let u;let p=t.getExceptionInformation();let c=r.size();let g=p.size();let m=null;for(a=0;a<c;a++){let e=r.get(a);for(let t=0;t<g;t++){let i=p.get(t);if(n.matchesExceptionInfo(e,i)){s.add(e)}}}let f=null;let C=null;let d=null;let y=null;let h=null;let _=e.XStringUtils.isNotNullAndNotEmpty(m);let T=false;let S=false;let R=false;let D=e.XList.create();let A=e.XList.create();for(a=0;a<s.size();a++){u=s.get(a);let t=u.getChartPointStyle();let i=false;if(!_){m=t.getColor();_=e.notNull(m);if(_){i=true}}if(!S){f=t.getLineStyle();S=e.notNull(f);if(S){i=true}}if(!T){C=t.getPattern();y=t.getCustomPattern();T=e.notNull(C)||e.notNull(y);if(T){i=true}}if(!R){d=t.getShape();h=t.getCustomShape();R=e.notNull(d)||e.notNull(h);if(R){i=true}}if(i){D.add(u.getDataPointCategoryName());A.add(u.getDataPointCategoryText())}if(_&&S&&R&&T){break}}if(!D.isEmpty()&&!A.isEmpty()){let n=e.XCollectionUtils.join(D,"/");let r=e.XCollectionUtils.join(A," / ");let l=o.getCategoryByName(n);if(e.isNull(l)){l=o.addCategory(n,r);l.addCategoryElement(n,r,r,false,false)}let s=l.getStyle();s.setColor(e.RenderThemingHelper.remapColor(i,m));s.setCustomPattern(y);s.setCustomShape(h);if(e.notNull(d)){s.setShape(d)}if(e.notNull(C)){s.setPattern(C)}if(e.notNull(f)){s.setLineStyle(f)}t.addStylingCategory(l)}}},processListContainerToChart:function(t,i,n){let r=i.getChartSetting();e.OlapVizToChartConverterUtil.transferDataPointStyles(i,n);let l=e.XList.create();let o=e.XStream.of(r.getVisualizationValueTypes()).map(e=>r.getTypedValueSelectionsForType(e)).reduce(l,(t,i)=>{t.addAll(e.XStream.of(i).filter(e=>e.getDimensionMember()!==null&&e.getDimensionMember().getName()!==null).collect(e.XStreamCollector.toList()));return t});let s=o.size()>1;let a=r.getCategoryDimensionSelection();let u=r.getGroupingDimensionSelection();let p=r.getDistributionDimensionSelection();e.OlapVizToChartConverterUtil.transferVizToChartStyle(r.getMinColor(),n.getMinColor(),null);e.OlapVizToChartConverterUtil.transferVizToChartStyle(r.getMaxColor(),n.getMaxColor(),null);n.setUseColorAxis(r.isUseColorAxis());e.OlapVizToChartConverterUtil.createChartTitleStyle(i,n);let c=i.getLeadingAxis();i.getQueryModel().getAxis(c);let g=r.getChartType();let m=e.OlapVizToChartConverterUtil.createAxis(n,g.getFirstCategoryPosition(),e.ChartAxisDomainType.NOMINAL,e.VisualizationValueType.CATEGORY,r);let f=e.OlapVizToChartConverterUtil.createAxis(n,g.getSecondCategoryPosition(),e.ChartAxisDomainType.NOMINAL,e.VisualizationValueType.CATEGORY_B,r);let C=e.OlapVizToChartConverterUtil.createValueAxis(n,g.getPrimaryValuePosition(),r,g.getPrimaryValueFeed());e.OlapVizToChartConverterUtil.addBasePlotLine(C);if(r.areYAxisOnSameSide()){C.setFrom(0);C.setTo(1)}let d;if(r.areYAxisOnSameSide()){d=e.OlapVizToChartConverterUtil.createValueAxis(n,e.ChartAxisPosition.Y_LEFT,r,g.getSecondaryValueFeed());d.setFrom(1);d.setTo(2)}else{d=e.OlapVizToChartConverterUtil.createValueAxis(n,g.getSecondaryValuePosition(),r,g.getSecondaryValueFeed())}let y=e.OlapVizToChartConverterUtil.createValueAxis(n,g.getThirdValuePosition(),r,g.getThirdValueFeed());let h=e.OlapVizToChartConverterUtil.createValueAxis(n,g.getFourthValuePosition(),r,g.getFourthValueFeed());n.setChartType(e.OlapVizToChartConverterUtil.convertChartType(g));n.setPolar(r.isPolar());n.setChartLegend(e.OlapVizToChartConverterUtil.createChartLegend(i));n.setChartPlotArea(e.OlapVizToChartConverterUtil.createChartPlotAre(i));let _=r.getChartOrientation();if(_===e.ChartOrientation.HORIZONTAL){n.setInverted(true)}let T=e.OlapVizToChartConverterUtil.lookupTargetStackingType(r.getChartStackingType());let S=r.getStylingDimensionKeys();e.XCollectionUtils.forEach(S,i=>{e.OlapVizToChartConverterUtil.applyChartStylingAxis(i,r.getStylingDimensionSelection(i),n,r,t,s)});e.OlapVizToChartConverterUtil.applyChartStylingAxis(e.OlapVizToChartConverterUtil.DEFAULT_STYLING_AXIS,r.getDefaultStylingDimensionSelection(),n,r,t,s);let R=t.getListAxis();let D=e.XSimpleMap.create();e.XStream.of(R.getVisibleComponentsOnAxis()).filter(t=>t.getModelComponentType().isTypeOf(e.MemberType.ABSTRACT_MEMBER)).map(e=>e).forEach(t=>{let i=t.getUniqueUnitScaleInformation();if(e.XStringUtils.isNotNullAndNotEmpty(i)){i=e.XStringUtils.concatenate3(e.OlapVizToChartConverterUtil.INFO_PREFIX,i,e.OlapVizToChartConverterUtil.INFO_SUFFIX)}let n=t.getStructureMember();let r=D.getByKey(n);if(e.isNull(r)){D.put(n,e.XStringValue.create(i))}else if(!e.XString.isEqual(r.getString(),i)){D.put(n,e.XStringValue.create(""))}});if(e.notNull(C)){e.OlapVizToChartConverterUtil.fillValueAxis(r,C,g.getPrimaryValueFeed(),D)}if(e.notNull(d)){e.OlapVizToChartConverterUtil.fillValueAxis(r,d,g.getSecondaryValueFeed(),D)}if(e.notNull(y)){e.OlapVizToChartConverterUtil.fillValueAxis(r,y,g.getThirdValueFeed(),D)}if(e.notNull(h)){e.OlapVizToChartConverterUtil.fillValueAxis(r,h,g.getFourthValueFeed(),D)}e.OlapVizToChartConverterUtil.transferColorScheme(n.getDistributionAxis().getAxisDomain().getAsCategorial(),p,r);if(e.notNull(m)){e.OlapVizToChartConverterUtil.fillCategoryAxis(r,m,a,r.categoryDimensionSelectionEffectivelyIncludesKeyFigureDimension(),t,g.getFirstCategoryTotalsRestriction(),g.getFirstCategoryHierarchyAllowed(),s)}if(e.notNull(f)){e.OlapVizToChartConverterUtil.fillCategoryAxis(r,f,u,r.groupingDimensionSelectionEffectivelyIncludesKeyFigureDimension(),t,g.getSecondCategoryTotalsRestriction(),g.getSecondCategoryHierarchyAllowed(),s)}e.OlapVizToChartConverterUtil.fillCategoryAxis(r,n.getDistributionAxis(),p,r.distributionDimensionSelectionEffectivelyIncludesKeyFigureDimension(),t,g.getDistributionCategoryTotalsRestriction(),g.getDistributionCategoryHierarchyAllowed(),s);if(e.notNull(m)&&e.notNull(f)){let i=n.addCoordinateSystem(e.OlapVizToChartConverterUtil.COORDINATE_SYTEM_BICATEGORIAL,e.OlapVizToChartConverterUtil.COORDINATE_SYTEM_BICATEGORIAL,f,m,null);e.OlapVizToChartConverterUtil.processBiCategorialCoordinateSystem(r,n,i,t,s)}else if(g.isTypeOf(e.ChartType.ABSTRACT_VALUE_CORRELATION)){let i=n.addCoordinateSystem(e.OlapVizToChartConverterUtil.COORDINATE_SYTEM_BISCALAR,e.OlapVizToChartConverterUtil.COORDINATE_SYTEM_BISCALAR,C,d,null);e.OlapVizToChartConverterUtil.processOverallCorrelationCoordinateSystemInternal(m,r,n,i,t)}else if(e.notNull(m)){if(e.notNull(C)){let i=n.addCoordinateSystem(e.OlapVizToChartConverterUtil.COORDINATE_SYTEM_CATVAL1,e.OlapVizToChartConverterUtil.COORDINATE_SYTEM_CATVAL1,m,C,null);if(g.getSecondaryValuePosition()===null&&g.getSecondaryValueFeed()!==null){e.OlapVizToChartConverterUtil.processOverallSeriesSeriesCoordinateSystem(r,n,T,i,t,C,s)}else{e.OlapVizToChartConverterUtil.processSelectiveSeriesCoordinateSystem(r,n,T,i,g.getPrimaryValueFeed(),t,C,s)}}if(e.notNull(d)){let i=n.addCoordinateSystem(e.OlapVizToChartConverterUtil.COORDINATE_SYTEM_CATVAL2,e.OlapVizToChartConverterUtil.COORDINATE_SYTEM_CATVAL2,m,d,null);e.OlapVizToChartConverterUtil.processSelectiveSeriesCoordinateSystem(r,n,null,i,g.getSecondaryValueFeed(),t,d,s)}if(e.notNull(y)){let i=n.addCoordinateSystem(e.OlapVizToChartConverterUtil.COORDINATE_SYTEM_CATVAL3,e.OlapVizToChartConverterUtil.COORDINATE_SYTEM_CATVAL3,m,y,null);e.OlapVizToChartConverterUtil.processSelectiveSeriesCoordinateSystem(r,n,null,i,g.getThirdValueFeed(),t,y,s)}if(e.notNull(h)){let i=n.addCoordinateSystem(e.OlapVizToChartConverterUtil.COORDINATE_SYTEM_CATVAL4,e.OlapVizToChartConverterUtil.COORDINATE_SYTEM_CATVAL4,m,h,null);e.OlapVizToChartConverterUtil.processSelectiveSeriesCoordinateSystem(r,n,null,i,g.getFourthValueFeed(),t,h,s)}}else if(e.notNull(C)&&e.notNull(d)){e.OlapVizToChartConverterUtil.processCorrelationCoordinateSystem(r,n,n.addCoordinateSystem(e.OlapVizToChartConverterUtil.COORDINATE_SYTEM_BISCALAR,e.OlapVizToChartConverterUtil.COORDINATE_SYTEM_BISCALAR,C,d,null),t,C,d,s)}e.OlapVizToChartConverterUtil.processDataPointStyles(i,n);let A=e.XHashMapByString.create();e.XCollectionUtils.forEach(n.getCoordinateSystems(),t=>{e.OlapVizToChartConverterUtil.processDataPointStyleForCoordinateSystem(t,A)})},processOverallCorrelationCoordinateSystemInternal:function(t,i,n,r,l){let o=t.getAxisDomain().getAsCategorial();let s=n.getGroupingAxis();let a=i.getGroupingDimensionSelection();e.OlapVizToChartConverterUtil.transferColorScheme(s.getAxisDomain().getAsCategorial(),i.getDefaultStylingDimensionSelection(),i);e.OlapVizToChartConverterUtil.transferColorScheme(s.getAxisDomain().getAsCategorial(),a,i);let u=l.getListAxis();let p=u.getTuplesOnAxis();for(let t=0;t<p.size();t++){let l=p.get(t);let a=e.ChartAxisCategoryAnalytic.getKey(l,i.getCategoryDimensionSelection().getDimensionNames(),null);let u=o.getCategoryByName(a);if(e.isNull(u)){continue}e.OlapVizToChartConverterUtil.processCorrelationDataPointCreation(i,n,r,l,u,s.getAxisDomain().getAsCategorial(),t)}},processOverallSeriesSeriesCoordinateSystem:function(t,i,n,r,l,o,s){e.OlapVizToChartConverterUtil.processOverallSeriesSeriesCoordinateSystemInternal(t,i,n,t.getVisualizationValueTypes(),r,l,s)},processOverallSeriesSeriesCoordinateSystemInternal:function(t,i,n,r,l,o,s){let a=l.getXAxisReference().getAxisDomain().getAsCategorial();let u=i.getGroupingAxis();let p=t.getGroupingDimensionSelection();e.OlapVizToChartConverterUtil.transferColorScheme(u.getAxisDomain().getAsCategorial(),p,t);let c=o.getListAxis();let g=c.getTuplesOnAxis();let m=e.XStream.of(r).filter(i=>e.XCollectionUtils.hasElements(t.getTypedValueSelectionsForType(i))).collect(e.XStreamCollector.toList());let f=m.size();let C=l.getYAxisReference().getAxisDomain().getAsScalar();let d=e.XHashMapByString.create();let y=e.XHashMapByString.create();let h;for(h=0;h<g.size();h++){let r=g.get(h);let o=t.getTypedValueSelectionsForType(e.VisualizationValueType.COLOR);let c=e.XCollectionUtils.hasElements(o)?e.XStream.of(o).find(e=>e.getDimensionMember()!==null).orElse(null):null;for(let o=0;o<f;o++){let g=m.get(o);let f=t.getChartType().getChartTypeForVisualizationValueType(g,t.getChartType2());let C=t.getTypedValueSelectionsForType(g);e.OlapVizToChartConverterUtil.processSeriesDataPointCreation(s,f,C,c,t,n,i,r,h,a,l,u,p,d,y)}}let _=0;let T;let S=y.getValuesAsReadOnlyList();for(h=0;h<S.size();h++){T=S.get(h).getDouble();if(_>T){_=T}}let R=0;let D=d.getValuesAsReadOnlyList();for(h=0;h<D.size();h++){T=D.get(h).getDouble();if(R<T){R=T}}if(_<0){C.setMin(_)}if(R>0){C.setMax(R)}},processSelectiveSeriesCoordinateSystem:function(t,i,n,r,l,o,s,a){let u=e.XList.create();u.add(l);e.OlapVizToChartConverterUtil.processOverallSeriesSeriesCoordinateSystemInternal(t,i,n,u,r,o,a)},processSeriesDataPointCreation:function(t,i,n,r,l,o,s,a,u,p,c,g,m,f,C){let d=n.size();let y=s.getDistributionAxis().getAxisDomain().getAsCategorial();let h=l.getDistributionDimensionSelection();for(let _=0;_<d;_++){let d=n.get(_);let T=d.getDimensionMember();let S=e.ChartAxisCategoryAnalytic.getKey(a,l.getCategoryDimensionSelection().getDimensionNames(),l.categoryDimensionSelectionEffectivelyIncludesKeyFigureDimension()&&e.notNull(T)?T.getName():null);let R=p.getCategoryByName(S);if(e.isNull(R)){continue}let D=(t||!e.XCollectionUtils.hasElements(m.getDimensionNames()))&&l.groupingDimensionSelectionEffectivelyIncludesKeyFigureDimension();let A=l.groupingDimensionSelectionEffectivelyIncludesKeyFigureDimension()?T:null;let E=e.ChartAxisCategoryAnalytic.getKey(a,m.getDimensionNames(),!D||e.isNull(A)?null:A.getName());let V=e.OlapVizToChartConverterUtil.getOrCreateCategory(g,a,m.getDimensionNames(),A,D,u,l.getChartType().getGroupingCategoryTotalsRestriction(),l.getChartType().getGroupingCategoryHierarchyAllowed());let N=l.distributionDimensionSelectionEffectivelyIncludesKeyFigureDimension()?T:null;let x=e.ChartAxisCategoryAnalytic.getKey(a,h.getDimensionNames(),e.isNull(N)?null:N.getName());let P=y.getCategoryByName(x);if(e.notNull(P)&&e.notNull(N)){e.OlapVizToChartConverterUtil.transferVizToChartStyle(d.getStyle(),P.getStyle(),null)}else if(e.notNull(V)&&e.notNull(A)){e.OlapVizToChartConverterUtil.transferVizToChartStyle(d.getStyle(),V.getStyle(),null)}if(e.notNull(V)&&e.notNull(P)){let t=c.getOrCreateSeriesGroup(E,E);t.setChartType(e.OlapVizToChartConverterUtil.convertChartType(i));t.setStackingType(o);t.setCategory(V);let n=t.getOrCreateSeries(x,x);n.setCategory(P);let u=e.OlapVizToChartConverterUtil.processComplexDataPointCreation(n,d,a,R,e.XStringUtils.concatenate3(R.getName(),"_",E),f,C);if(e.notNull(r)){e.OlapVizToChartConverterUtil.decorateDataPointInternal(e.VisualizationValueType.COLOR.getName(),u,r,a)}e.XCollectionUtils.forEach(l.getStylingDimensionKeys(),i=>{e.OlapVizToChartConverterUtil.decorateDataPoint(a,u,n,t,s.getOrCreateStylingAxis(i),l,l.getStylingDimensionSelection(i),T)});e.OlapVizToChartConverterUtil.decorateDataPoint(a,u,n,t,s.getOrCreateStylingAxis(e.OlapVizToChartConverterUtil.DEFAULT_STYLING_AXIS),l,l.getDefaultStylingDimensionSelection(),T)}}},processSimpleDataPointCreation:function(t,i,n,r,l,o,s){let a=e.XStringUtils.concatenate5(e.OlapVizToChartConverterUtil.getNameForCategory(l),"/",e.OlapVizToChartConverterUtil.getNameForCategory(o),"/",e.OlapVizToChartConverterUtil.getNameForCategory(s));let u=t.addChartDataPoint(a,a);u.setCategory(l);e.OlapVizToChartConverterUtil.decorateWithCategory(u,l,e.OlapVizToChartConverterUtil.CATEGORY_AXIS);e.OlapVizToChartConverterUtil.decorateWithCategory(u,o,e.OlapVizToChartConverterUtil.CATEGORY_AXIS2);e.OlapVizToChartConverterUtil.decorateWithCategory(u,s,null);e.OlapVizToChartConverterUtil.decorateSimpleDataPoint("",u,i,n,r);return u},remapAlertLevel:function(t){return e.isNull(t)?null:e.SacAlertLevel.getByLevelValue(t.getLevel())},resolveBoolean:function(t,i,n){let r=e.TriStateBool._DEFAULT;for(let l=0;l<t.size();l++){let o=t.get(l);if(e.notNull(o)){r=n(o).resolveTriStateBoolean(i);if(e.TriStateBool.isExplicitBooleanValue(r)){break}}}return r.getBoolean()},resolveDouble:function(t,i,n){let r=0;for(let l=0;l<t.size();l++){let o=t.get(l);if(e.notNull(o)){r=n(o).resolveDouble(i);if(r>0){break}}}return r},resolveString:function(t,i,n){let r=null;for(let l=0;l<t.size();l++){let o=t.get(l);if(e.notNull(o)){r=n(o).resolveString(i);if(e.XStringUtils.isNotNullAndNotEmpty(r)){break}}}return r},sumUpValue:function(t,i,n){if(!i.containsKey(t)){i.put(t,e.XDoubleValue.create(n))}else{i.put(t,e.XDoubleValue.create(n+i.getByKey(t).getDouble()))}},transferChartDataPointStyle:function(t,i,n){if(t.isUnmatchedTags()){i.setUnmatchedTags()}else{i.clearTags();e.XCollectionUtils.forEach(t.getTags(),e=>{i.addTag(e)})}if(t.isUnmatchedExceptions()){i.setUnmatchedExceptions()}else{i.setExceptionName(t.getExceptionName())}if(t.isUnmatchedAlertLevels()){i.setUnmatchedAlertLevels()}else{i.setAlertLevelMin(e.OlapVizToChartConverterUtil.remapAlertLevel(t.getAlertLevelMin()));i.setAlertLevelMax(e.OlapVizToChartConverterUtil.remapAlertLevel(t.getAlertLevelMax()))}if(t.isUnmatchedValueSigns()){i.setUnmatchedValueSigns()}else{i.setValueSign(e.OlapToVisualizationConverterUtil.getValueSignFromViz(t.getValueSign()))}if(t.isUnmatchedPathElements()){i.setUnmatchedPathElements()}else{e.XCollectionUtils.forEach(t.getPathElements(),t=>{e.OlapToVisualizationConverterUtil.applyDataSectionInfoFromViz(t,i.addNewPathElement())})}let r=t.getDataPointCategoryNameRaw().resolveStringExtended(n,t.getChartDefinition());if(e.XStringUtils.isNotNullAndNotEmpty(r)){i.setDataPointCategoryName(r)}let l=t.getDataPointCategoryTextRaw().resolveStringExtended(n,t.getChartDefinition());if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.setDataPointCategoryText(l)}let o=t.getChartPointStyleNameRaw().resolveStringExtended(n,t.getChartDefinition());let s=e.isNull(o)?null:t.getChartDefinition().getChartSetting().getChartStyle().getOrCreateChartPointStyle(o,null);if(e.notNull(s)){e.OlapVizToChartConverterUtil.transferVizToChartStyle(s,i.getChartPointStyle(),n)}i.setPriority(t.getPriority())},transferColorScheme:function(t,i,n){if(e.notNull(i)&&n.getChartStyle().hasChartColorSchemeForKey(i.getColorSchemeKey())){let r=n.getChartStyle().getChartColorSchemeIfAvailable(i.getColorSchemeKey());if(e.XCollectionUtils.hasElements(r.getColors())){t.clearColors();t.putAllColors(r.getColors())}if(e.XCollectionUtils.hasElements(r.getPatterns())){t.clearPatterns();t.putAllPatterns(e.XStream.of(r.getPatterns()).map(t=>e.VisualizationBackgroundPatternType.lookup(t.getName())).collect(e.XStreamCollector.toList()))}if(e.XCollectionUtils.hasElements(r.getLineStyles())){t.clearLineStyles();t.putAllLineStyles(e.XStream.of(r.getLineStyles()).map(t=>e.ChartVisualizationLineStyle.lookup(t.getName())).collect(e.XStreamCollector.toList()))}if(e.XCollectionUtils.hasElements(r.getShapes())){t.clearShapes();t.putAllShapes(e.XStream.of(r.getShapes()).map(t=>e.VisualizationChartPointShape.lookup(t.getName())).collect(e.XStreamCollector.toList()))}}},transferDataPointStyles:function(t,i){i.clearRelevantDataPathTags();e.XCollectionUtils.forEach(t.getRelevantDataPointPaths(),t=>{let n=e.SacDataSectionInfoReference.create();e.OlapToVisualizationConverterUtil.applyDataSectionInfoFromViz(t,n);i.addRelevantDataPathTag(n)})},transferVizToChartStyle:function(t,i,n){let r=t.getChartDefinition();i.setColor(t.getColorRaw().resolveStringExtended(n,r));i.setCustomPattern(t.getCustomPatternRaw().resolveStringExtended(n,r));i.setCustomShape(t.getCustomShapeRaw().resolveStringExtended(n,r));let l=e.DfNameObject.getSafeName(t.getLineStyleRaw().getResolvedValueExtended(n,r));if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.setLineStyle(e.ChartVisualizationLineStyle.lookup(l))}l=e.DfNameObject.getSafeName(t.getPatternRaw().getResolvedValueExtended(n,r));if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.setPattern(e.VisualizationBackgroundPatternType.lookup(l))}l=e.DfNameObject.getSafeName(t.getShapeRaw().getResolvedValueExtended(n,r));if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.setShape(e.VisualizationChartPointShape.lookup(l))}}};e.RsVizContainerFactoryImpl=function(){};e.RsVizContainerFactoryImpl.prototype=new e.XObject;e.RsVizContainerFactoryImpl.prototype._ff_c="RsVizContainerFactoryImpl";e.RsVizContainerFactoryImpl.create=function(){return new e.RsVizContainerFactoryImpl};e.RsVizContainerFactoryImpl.prototype.newVisualizationContainer=function(t){if(t.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_TABLE_DEFINITION){return e.RsVizTableContainer.create(t)}else if(t.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_CHART_DEFINITION){return e.RsVizChartContainer.create(t)}else if(t.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_CUSTOM_DEFINITION){return e.RsVizCustomVisualizationContainer.create(t)}else{return null}};e.PivotTableEngine=function(){};e.PivotTableEngine.prototype=new e.XObject;e.PivotTableEngine.prototype._ff_c="PivotTableEngine";e.PivotTableEngine.create=function(t,i){let n=new e.PivotTableEngine;n.m_tableDefinition=t;n.m_gridContainer=i;n.m_sacAnalyticsTable=e.PivotTableProxy.create(n.m_gridContainer,n);n.m_table=e.SacFormattableTableFragment.create(n.m_sacAnalyticsTable,0,0,0,0);n.m_sacAnalyticsTable.setBaseTile(n.m_table);return n};e.PivotTableEngine.prototype.m_gridContainer=null;e.PivotTableEngine.prototype.m_headerCompactionType=null;e.PivotTableEngine.prototype.m_neededEmptyHeaderRows=null;e.PivotTableEngine.prototype.m_sacAnalyticsTable=null;e.PivotTableEngine.prototype.m_showDimensionTitles=false;e.PivotTableEngine.prototype.m_table=null;e.PivotTableEngine.prototype.m_tableDefinition=null;e.PivotTableEngine.prototype.applyCellChart=function(t,i){let n=this.extractStructureMemberWithCellChart(i);if(e.notNull(n)){this.fillCellChart(t,n)}};e.PivotTableEngine.prototype.applyTableDefinition=function(t){if(e.notNull(t)){this.m_tableDefinition=t;let i=t.getApplicationSettings();if(e.notNull(i)){if(i.getWidgetWidth()>0){this.m_sacAnalyticsTable.setWidth(i.getWidgetWidth())}if(i.getWidgetHeight()>0){this.m_sacAnalyticsTable.setHeight(i.getWidgetHeight())}if(i.getMaxColumns()>0){this.m_sacAnalyticsTable.setMaxColumns(i.getMaxColumns())}if(i.getMaxRows()>0){this.m_sacAnalyticsTable.setMaxRows(i.getMaxRows())}this.m_sacAnalyticsTable.setMemberSortIconsLevel(i.getMemberSortIconsLevel())}this.m_sacAnalyticsTable.setStripeDataRows(t.isEffectiveStripeDataRows());this.m_sacAnalyticsTable.setStripeDataColumns(t.isEffectiveStripeDataColumns());this.m_sacAnalyticsTable.setFreezeHeaderRows(t.isEffectiveFreezeHeaderRows());this.m_sacAnalyticsTable.setFreezeHeaderColumns(t.isEffectiveFreezeHeaderColumns());this.m_sacAnalyticsTable.setFreezeUpToColumn(t.getFreezeUpToColumn());this.m_sacAnalyticsTable.setFreezeUpToRow(t.getFreezeUpToRow());this.m_sacAnalyticsTable.setShowFreezeLines(t.isEffectiveShowFreezeLines());this.m_sacAnalyticsTable.setShowGrid(t.isEffectiveShowGrid());this.m_sacAnalyticsTable.setHeaderCompactionType(t.getEffectiveTableHeaderCompactionType());this.m_sacAnalyticsTable.setShowDimensionTitles(t.isEffectiveShowDimensionTitles());this.m_sacAnalyticsTable.setTableMemberHeaderHandling(e.OlapVizToPivotConverterUtil.getTableMemberHeaderHandlingFromViz(t.getEffectiveTableMemberHeaderHandling()));this.m_sacAnalyticsTable.setShowCoordinateHeader(t.isEffectiveShowCoordinateHeader());this.m_sacAnalyticsTable.setHeaderColor(t.getHeaderColor());this.m_sacAnalyticsTable.setTotalLevel6Color(t.getTotalLevel6Color());this.m_sacAnalyticsTable.setTotalLevel5Color(t.getTotalLevel5Color());this.m_sacAnalyticsTable.setTotalLevel4Color(t.getTotalLevel4Color());this.m_sacAnalyticsTable.setTotalLevel3Color(t.getTotalLevel3Color());this.m_sacAnalyticsTable.setTotalLevel2Color(t.getTotalLevel2Color());this.m_sacAnalyticsTable.setTotalLevel1Color(t.getTotalLevel1Color());this.m_sacAnalyticsTable.setTotalLevel0Color(t.getTotalLevel0Color());this.m_sacAnalyticsTable.applyTableDefinition(t);this.m_headerCompactionType=t.getEffectiveTableHeaderCompactionType();this.m_showDimensionTitles=t.isEffectiveShowDimensionTitles();this.synchronizeTable(this.m_table)}};e.PivotTableEngine.prototype.applyTableMarkups=function(){if(this.getAvailableTableMarkups()!==null){this.m_table.clearTableMarkups();let t=this.getAvailableTableMarkups().getIterator();while(t.hasNext()){e.OlapVizToPivotConverterUtil.applyTableMarkupFromViz(t.next(),this.m_table.addNewTableMarkup())}}if(this.getAvailableLayeredStyles()!==null){this.m_table.clearLayeredRectangularStyles();let t=this.getAvailableLayeredStyles().getIterator();while(t.hasNext()){e.OlapVizToPivotConverterUtil.applyLayeredRectangularStyleFromViz(t.next(),this.m_table.addNewLayeredRectangularStyle())}}};e.PivotTableEngine.prototype.applyTotalIndex=function(t,i){let n=i.getAxisReference().getVisibleComponentsOnAxis();for(let r=n.size()-1;r>-1;r--){let l=i.getValueForModelComponent(n.get(r));let o=e.isNull(l)?null:l.getDimensionMemberType();if(o===e.MemberType.RESULT||e.OlapComponentType.TOTALS===o){t.setTotalLevel(l.getFieldReference().getDimensionIndex());t.setTotalsContext(true);break}}};e.PivotTableEngine.prototype.checkRowDiff=function(t){if(e.TriStateBool.isExplicitBooleanValue(this.m_neededEmptyHeaderRows)&&t!==this.m_neededEmptyHeaderRows.getBoolean()){if(t){this.m_sacAnalyticsTable.setTotalRowDiff(this.m_sacAnalyticsTable.getTotalRowDiff()+1)}else{this.m_sacAnalyticsTable.setTotalRowDiff(this.m_sacAnalyticsTable.getTotalRowDiff()-1)}}this.m_neededEmptyHeaderRows=e.TriStateBool.lookup(t)};e.PivotTableEngine.prototype.correctTileCarrier=function(t){return e.RscGridTileCarrier.create(this.m_sacAnalyticsTable.isRowPaginated()?t.getRowMin():this.getMin(t.getRowMin(),this.m_table.getRowsBundle()),t.getRowMax(),this.m_sacAnalyticsTable.isColumnPaginated()?t.getColumnMin():this.getMin(t.getColumnMin(),this.m_table.getColumnsBundle()),t.getColumnMax())};e.PivotTableEngine.prototype.extractStructureMemberWithCellChart=function(t){let i=null;if(e.notNull(t)){let n=t.getValues();for(let t=0;t<n.size();t++){let r=n.get(t);let l=r.getFieldReference().getDimension();if(l.getDimensionType().isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE)||l.getDimensionType()===e.DimensionType.ACCOUNT){i=l.getStructureMemberByAliasOrMember(r.getDimensionMemberName());if(e.notNull(i)){if(i.isShowCellChart()){break}else{i=null}}}}}return i};e.PivotTableEngine.prototype.fillCellChart=function(t,i){if(e.notNull(i)&&i.isShowCellChart()){let n=i.getCellChartType();if(e.isNull(n)||n===e.CellChartType.NONE){n=e.CellChartType.BAR}let r=i.getAliasOrMemberName();t.setShowCellChart(true);t.setCellChartType(e.OlapVizToPivotConverterUtil.getCellChartTypeFromViz(n));t.setCellChartMemberName(r);t.getTableStyle().setCellChartLineColor(i.getCellChartLineColor());t.getTableStyle().setCellChartBarColor(i.getCellChartBarColor());t.setHideNumberForCellChart(i.isHideNumberForCellChart());t.setCellChartOrientation(e.OlapVizToPivotConverterUtil.getCellChartOrientationFromViz(i.getCellChartOrientationEffective()))}};e.PivotTableEngine.prototype.fillHeader=function(t){let i;let n=this.m_gridContainer.getColumnsAxis().getVisibleComponentsOnAxis();let r;let l;let o=n.size();let s=t.getRowsBundle();s.clearHeaders();s.clearHeaderGroupNames();let a=this.m_gridContainer.getRowsAxis().getModelDimensionsOnAxis();e.XCollectionUtils.forEach(a,e=>{s.addHeaderGroupName(e.getName())});let u=null;for(r=0;r<o;r++){u=e.SacTableFragmentRow._create(s);u.setHeader(true);i=n.get(r);l=i.getField();u.setComponentIndex(r);e.OlapVizToPivotConverterUtil.applyHeaderSectionInfoFromField(l,u);s.addHeader(u)}if(this.needsEmptyHeaderRow()){u=e.SacTableFragmentRow._create(s);u.setHeader(true);e.OlapVizToPivotConverterUtil.applyHeaderSectionInfoFromUniqueHeader(u);s.addHeader(u)}if(e.notNull(u)){u.setHeaderBoundary(true)}let p=this.m_gridContainer.getRowsAxis().getVisibleComponentsOnAxis();let c=p.size();let g=null;let m=t.getColumnsBundle();m.clearHeaders();m.clearHeaderGroupNames();let f=this.m_gridContainer.getColumnsAxis().getModelDimensionsOnAxis();e.XCollectionUtils.forEach(f,e=>{m.addHeaderGroupName(e.getName())});for(r=0;r<c;r++){g=e.SacTableFragmentColumn._create(m);g.setHeader(true);i=p.get(r);l=i.getField();g.setComponentIndex(r);e.OlapVizToPivotConverterUtil.applyHeaderSectionInfoFromField(l,g);m.addHeader(g)}if(this.needsEmptyHeaderColumn()){g=e.SacTableFragmentColumn._create(m);g.setHeader(true);e.OlapVizToPivotConverterUtil.applyHeaderSectionInfoFromUniqueHeader(g);m.addHeader(g)}if(e.notNull(g)){g.setHeaderBoundary(true)}};e.PivotTableEngine.prototype.fillOrigin=function(e){this.applyTableMarkups();this.m_table.clear();return this.fillTileInternal(e,this.m_table)};e.PivotTableEngine.prototype.fillProjection=function(e){let t=this.correctTileCarrier(e);let i=this.projectTile(t);this.transferTableMarkups(i);i.clear();return this.fillTileInternal(t,i)};e.PivotTableEngine.prototype.fillTile=function(t,i){let n;let r;let l;this.fillHeader(i);let o=t.getColumnMin();let s=t.getColumnMax();let a=i.getColumnsBundle();for(n=o;n<=s;n++){let t=this.m_gridContainer.getColumnTupleAt(n);if(e.notNull(t)){l=e.SacTableFragmentColumn._create(a);l.setTupleIndex(n);e.OlapToVisualizationConverterUtil.applyDataSectionInfoFromTuple(t,l);this.applyCellChart(l,t);this.applyTotalIndex(l,t);a.addTuple(l)}else{a.addEmptyTuple()}}o=t.getRowMin();s=t.getRowMax();let u=i.getRowsBundle();for(n=o;n<=s;n++){let t=this.m_gridContainer.getRowTupleAt(n);if(e.notNull(t)){r=e.SacTableFragmentRow._create(u);r.setTupleIndex(n);e.OlapToVisualizationConverterUtil.applyDataSectionInfoFromTuple(t,r);this.applyCellChart(r,t);if(r.isShowCellChart()&&r.getCellChartOrientation()===e.SacCellChartOrientation.VERTICAL){r.setHeight(e.SacTableConstants.DF_R_N_HEIGHT_VERTICAL_CHARTS)}this.applyTotalIndex(r,t);u.addTuple(r)}else{u.addEmptyTuple()}}};e.PivotTableEngine.prototype.fillTileInternal=function(t,i){let n=this.m_gridContainer.getColumnsAxis().getModelDimensionsOnAxis();let r=this.m_gridContainer.getRowsAxis().getModelDimensionsOnAxis();let l=n.size();let o=r.size();let s=this.m_gridContainer.getRowsLoadedCount();let a=this.m_gridContainer.getColumnsLoadedCount();let u=a>0&&l>0||s>0&&o>0;this.fillTile(t,i);i.formatTable();if(this.m_table!==i){this.m_table.swallow(i)}i.applyColumnAndRowSizes(this.m_tableDefinition.getFixedPixelHeightsForRows(),this.m_tableDefinition.getFixedPixelWidthsForColumns());let p=i.getColumnsBundle().getTupleRanges();let c=i.getRowsBundle().getTupleRanges();let g=0;let m=0;let f=-1;let C=-1;if(e.XCollectionUtils.hasElements(p)){m=p.get(0).getFirstObject().getInteger();C=p.get(p.size()-1).getSecondObject().getInteger()}if(e.XCollectionUtils.hasElements(c)){g=c.get(0).getFirstObject().getInteger();f=c.get(c.size()-1).getSecondObject().getInteger()}this.m_sacAnalyticsTable.prepareTable(g,f,m,C);return u};e.PivotTableEngine.prototype.getAvailableLayeredStyles=function(){return e.isNull(this.m_tableDefinition)?null:this.m_tableDefinition.getLayeredRectangularStyles()};e.PivotTableEngine.prototype.getAvailableTableMarkups=function(){return e.isNull(this.m_tableDefinition)?null:this.m_tableDefinition.getTableMarkups()};e.PivotTableEngine.prototype.getMin=function(e,t){return e+(e>0&&(t.getTuples().size()<e||t.getTuples().get(e-1)===null)?1:0)};e.PivotTableEngine.prototype.getResultTable=function(){return this.m_sacAnalyticsTable};e.PivotTableEngine.prototype.getTableProxy=function(){return this.m_sacAnalyticsTable};e.PivotTableEngine.prototype.isEffectivelyShownDimensionTitles=function(){return this.m_showDimensionTitles||this.m_gridContainer.getRowsAxis().getTuplesTotalCount()===0&&this.m_gridContainer.getColumnsAxis().getTuplesTotalCount()===0};e.PivotTableEngine.prototype.isEmptyColumnDimensions=function(){return this.m_gridContainer.getColumnsAxis().getVisibleComponentsOnAxis().size()===0};e.PivotTableEngine.prototype.isEmptyRowDimensions=function(){let t=this.m_gridContainer.getRowsAxis();return e.isNull(t)||t.getVisibleComponentsOnAxis().isEmpty()};e.PivotTableEngine.prototype.needsEmptyHeaderColumn=function(){let t=this.isEmptyColumnDimensions();return this.m_headerCompactionType===e.TableHeaderCompactionType.NONE||this.m_headerCompactionType===e.TableHeaderCompactionType.ROW||!t&&this.isEffectivelyShownDimensionTitles()&&this.m_headerCompactionType===e.TableHeaderCompactionType.PREFERABLY_ROW||!t&&this.isEmptyRowDimensions()&&this.isEffectivelyShownDimensionTitles()};e.PivotTableEngine.prototype.needsEmptyHeaderRow=function(){let t=this.isEmptyRowDimensions();let i=this.m_headerCompactionType===e.TableHeaderCompactionType.NONE||this.m_headerCompactionType===e.TableHeaderCompactionType.COLUMN||!t&&this.isEffectivelyShownDimensionTitles()&&this.m_headerCompactionType===e.TableHeaderCompactionType.PREFERABLY_COLUMN||!t&&this.isEmptyColumnDimensions()&&this.isEffectivelyShownDimensionTitles();this.checkRowDiff(i);return i};e.PivotTableEngine.prototype.projectTile=function(t){let i=this.m_table.getRowsBundle().projectMinDataIndexFromTuple(t.getRowMin());let n=this.m_table.getColumnsBundle().projectMinDataIndexFromTuple(t.getColumnMin());let r=e.SacFormattableTableFragment.create(this.m_sacAnalyticsTable,i,n,t.getRowMin(),t.getColumnMin());this.synchronizeTable(r);return r};e.PivotTableEngine.prototype.reCreateHeaders=function(){if(e.XObjectExt.isValidObject(this.m_gridContainer)){this.fillHeader(this.m_table);this.m_table.getColumnsBundle().updateHeaderStyles();this.m_table.getRowsBundle().updateHeaderStyles();this.m_table.applyColumnAndRowSizes(this.m_tableDefinition.getFixedPixelHeightsForRows(),this.m_tableDefinition.getFixedPixelWidthsForColumns())}};e.PivotTableEngine.prototype.reFillForFormatting=function(){return e.XObjectExt.isValidObject(this.m_gridContainer)&&this.fillTileInternal(e.RscGridTileCarrier.create(0,-1,0,-1),this.m_table)};e.PivotTableEngine.prototype.releaseObject=function(){this.m_tableDefinition=null;this.m_gridContainer=null;this.m_sacAnalyticsTable=e.XObjectExt.release(this.m_sacAnalyticsTable);this.m_table=e.XObjectExt.release(this.m_table);e.XObject.prototype.releaseObject.call(this)};e.PivotTableEngine.prototype.synchronizeTable=function(e){e.setTableMemberHeaderHandling(this.m_sacAnalyticsTable.getTableMemberHeaderHandling());e.getRowsBundle().setMemberHeaderHandling(this.m_sacAnalyticsTable.getRowsMemberHeaderHandling());e.getColumnsBundle().setMemberHeaderHandling(this.m_sacAnalyticsTable.getColumnsMemberHeaderHandling())};e.PivotTableEngine.prototype.transferTableMarkups=function(e){if(this.m_table.getTableMarkups()!==null){e.clearTableMarkups();e.addTableMarkups(this.m_table.getTableMarkups())}if(this.m_table.getLayeredRectangularStyles()!==null){e.clearLayeredRectangularStyles();e.addRectangularStyles(this.m_table.getLayeredRectangularStyles())}};e.PivotTableCellContextProvider=function(){};e.PivotTableCellContextProvider.prototype=new e.XObject;e.PivotTableCellContextProvider.prototype._ff_c="PivotTableCellContextProvider";e.PivotTableCellContextProvider.create=function(t){let i=new e.PivotTableCellContextProvider;i.setup();i.m_queryManager=t;return i};e.PivotTableCellContextProvider.prototype.m_queryManager=null;e.PivotTableCellContextProvider.prototype.getCellContext=function(t,i,n){return e.CellContextGetAction.createAndRunAction(t,i,this.m_queryManager,n)};e.PivotTableCellContextProvider.prototype.releaseObject=function(){this.m_queryManager=null;e.XObject.prototype.releaseObject.call(this)};e.PivotTableExport=function(){};e.PivotTableExport.prototype=new e.XObject;e.PivotTableExport.prototype._ff_c="PivotTableExport";e.PivotTableExport.addSemanticObjects=function(t,i){if(e.notNull(i)&&!t.contains(e.PrFactory.createString(i))){t.addString(i)}};e.PivotTableExport.create=function(t,i){let n=new e.PivotTableExport;n.m_table=t;n.m_tableDefinition=i;return n};e.PivotTableExport.getCellType=function(t){if(t===e.SacTableConstants.CT_VALUE){return e.PivotTableExportConstants.CT_VALUE}else if(t===e.SacTableConstants.CT_INPUT){return e.PivotTableExportConstants.CT_VALUE}else if(t===e.SacTableConstants.CT_UNBOOKED){return e.PivotTableExportConstants.CT_VALUE}else if(t===e.SacTableConstants.CT_HEADER){return e.PivotTableExportConstants.CT_HEADER}else if(t===e.SacTableConstants.CT_ROW_DIM_HEADER){return e.PivotTableExportConstants.CT_DIM_HEADER_ROW}else if(t===e.SacTableConstants.CT_COL_DIM_HEADER){return e.PivotTableExportConstants.CT_DIM_HEADER_COL}else if(t===e.SacTableConstants.CT_COL_DIM_MEMBER){return e.PivotTableExportConstants.CT_DIM_MEMBER_COL}else if(t===e.SacTableConstants.CT_ROW_DIM_MEMBER){return e.PivotTableExportConstants.CT_DIM_MEMBER_ROW}else if(t===e.SacTableConstants.CT_EMPTY_AXIS_ROW_HEADER){return e.PivotTableExportConstants.CT_EMPTY_AXIS_HEADER_ROW}else if(t===e.SacTableConstants.CT_EMPTY_AXIS_COLUMN_HEADER){return e.PivotTableExportConstants.CT_EMPTY_AXIS_HEADER_COL}else if(t===e.SacTableConstants.CT_ATTRIBUTE){return e.PivotTableExportConstants.CT_ATTRIBUTE}else if(t===e.SacTableConstants.CT_ATTRIBUTE_ROW_DIM_HEADER){return e.PivotTableExportConstants.CT_ATTRIBUTE_ROW_DIM_HEADER}else if(t===e.SacTableConstants.CT_ATTRIBUTE_COL_DIM_HEADER){return e.PivotTableExportConstants.CT_ATTRIBUTE_COL_DIM_HEADER}else if(t===e.SacTableConstants.CT_ATTRIBUTE_ROW_DIM_MEMBER){return e.PivotTableExportConstants.CT_ATTRIBUTE_ROW_DIM_MEMBER}else if(t===e.SacTableConstants.CT_ATTRIBUTE_COL_DIM_MEMBER){return e.PivotTableExportConstants.CT_ATTRIBUTE_COL_DIM_MEMBER}else{return e.XInteger.convertToString(t)}};e.PivotTableExport.getDimensionMemberName=function(t){let i=null;let n=t.getDimension();if(n.isStructure()){let r=n.getStructureMember(t.getName());let l=r.getDimension().getDisplayKeyField();let o=r.getFieldValue(l);if(e.notNull(o)){i=o.getValue().getStringRepresentation()}}if(e.isNull(i)){i=t.getName()}return i};e.PivotTableExport.prototype.m_cellType=null;e.PivotTableExport.prototype.m_currentCellBase=null;e.PivotTableExport.prototype.m_currentCellJson=null;e.PivotTableExport.prototype.m_currentColIndex=0;e.PivotTableExport.prototype.m_currentRowIndex=0;e.PivotTableExport.prototype.m_table=null;e.PivotTableExport.prototype.m_tableDefinition=null;e.PivotTableExport.prototype._export=function(){let t=this.m_table.getRowList();let i=this.m_table.getColumnList();let n=t.size();let r=i.size();let l=n-1;let o=r-1;let s=e.PrFactory.createStructure();s.putInteger(e.PivotTableExportConstants.TOTAL_ROWS,this.m_table.getRowsTotalCount());s.putInteger(e.PivotTableExportConstants.TOTAL_COLUMNS,this.m_table.getColumnsTotalCount());let a=this.m_table.getHeaderRowList();let u=s.putNewList("Cells");if(this.m_table.getColumnsTotalCount()!==0||this.m_table.getRowsTotalCount()!==0){let n=a.size();let r=e.XMath.min(i.size(),o+1);let s=e.XMath.min(t.size(),l+1);let p;let c=0;let g;for(g=0;g<n;g++){p=a.get(g);if(e.notNull(p)&&!p.isEffectivelyHidden()){this.renderRow(u,p,c++,r)}else if(e.isNull(p)){c++}}for(g=0;g<s;g++){p=t.get(g);if(e.notNull(p)&&!p.isEffectivelyHidden()){this.renderRow(u,p,c++,r)}else if(e.isNull(p)){c++}}}return s};e.PivotTableExport.prototype.addSemanticObjectFromTupleElement=function(t,i){if(e.notNull(i)){let n=this.m_tableDefinition.getQueryModel().getDimensionByName(i.getDimension().getName());let r=n.getSemanticObject();e.PivotTableExport.addSemanticObjects(t,r);if(n.isStructure()){let l=i.getDimensionMember();if(e.notNull(l)){let i=n.getStructureMember(l.getName());r=i.getSemanticObject();e.PivotTableExport.addSemanticObjects(t,r)}}}};e.PivotTableExport.prototype.fillCellType=function(){this.m_cellType=e.PivotTableExport.getCellType(this.m_currentCellBase.getEffectiveCellType());this.m_currentCellJson.putString(e.PivotTableExportConstants.CELL_TYPE,this.m_cellType)};e.PivotTableExport.prototype.fillDimension=function(){if(e.XString.isEqual(this.m_cellType,e.PivotTableExportConstants.CT_DIM_MEMBER_COL)||e.XString.isEqual(this.m_cellType,e.PivotTableExportConstants.CT_DIM_HEADER_COL)){let t=this.m_tableDefinition.getColumnDimension(this.m_currentRowIndex);if(e.notNull(t)){this.m_currentCellJson.putString("Dimension",this.getDimensionName(t))}}if(e.XString.isEqual(this.m_cellType,e.PivotTableExportConstants.CT_DIM_MEMBER_ROW)||e.XString.isEqual(this.m_cellType,e.PivotTableExportConstants.CT_DIM_HEADER_ROW)){let t=this.m_tableDefinition.getRowDimension(this.m_currentColIndex);if(e.notNull(t)){this.m_currentCellJson.putString("Dimension",this.getDimensionName(t))}}};e.PivotTableExport.prototype.fillDocument=function(){if(this.m_currentCellBase.getCommentDocumentId()!==null){this.m_currentCellJson.putString(e.PivotTableExportConstants.DOCUMENT_ID,this.m_currentCellBase.getCommentDocumentId())}};e.PivotTableExport.prototype.fillFormattedValue=function(){let t=this.m_currentCellBase.getPrioritizedStylesList();this.m_currentCellJson.putString(e.PivotTableExportConstants.FORMATTED,this.m_currentCellBase.getEffectiveFormattedText(t));let i=this.m_currentCellBase.getEffectiveFormattingPattern(t);if(!this.m_currentCellBase.isHeaderCell()){this.m_currentCellJson.putString(e.PivotTableExportConstants.FORMAT_STRING,i)}};e.PivotTableExport.prototype.fillHierarchyInfo=function(){let t=this.m_currentCellBase.isInHierarchy();this.m_currentCellJson.putBoolean(e.PivotTableExportConstants.IN_HIERARCHY,t);if(t){this.m_currentCellJson.putInteger(e.PivotTableExportConstants.HIERARCHY_LEVEL,this.m_currentCellBase.getHierarchyLevel());this.m_currentCellJson.putBoolean(e.PivotTableExportConstants.HIERARCHY_NODE_EXPANDED,this.m_currentCellBase.isExpanded())}};e.PivotTableExport.prototype.fillMember=function(){let t=null;let i=null;if(e.XString.isEqual(this.m_cellType,e.PivotTableExportConstants.CT_DIM_MEMBER_COL)){t=this.m_tableDefinition.getColumnTupleElement(this.m_currentColIndex,this.m_currentRowIndex);i=this.m_tableDefinition.getColumnDimension(this.m_currentRowIndex)}if(e.XString.isEqual(this.m_cellType,e.PivotTableExportConstants.CT_DIM_MEMBER_ROW)){t=this.m_tableDefinition.getRowTupleElement(this.m_currentColIndex,this.m_currentRowIndex);i=this.m_tableDefinition.getRowDimension(this.m_currentColIndex)}if(e.notNull(t)){let n=t.getDimensionMember();this.m_currentCellJson.putString("Member",e.PivotTableExport.getDimensionMemberName(n));this.m_currentCellJson.putBoolean(e.PivotTableExportConstants.REPEATED_MEMBER_NAME,this.m_currentCellBase.isRepeatedHeader());if(i.isStructure()){let e=this.m_tableDefinition.getQueryModel().getDimensionByName(i.getName()).getStructureMember(n.getName());if(e.getMemberType().isCustomMember()){this.m_currentCellJson.putBoolean("Custom",true)}}}};e.PivotTableExport.prototype.fillMergedCellInfo=function(){let t=this.m_currentCellBase.getMergedColumns();let i=this.m_currentCellBase.getMergedRows();if(t!==0||i!==0){let n=this.m_currentCellJson.putNewStructure(e.PivotTableExportConstants.MERGED);if(t>=0&&i>=0){if(this.m_currentCellBase.getMergedColumns()>0){n.putInteger(e.PivotTableExportConstants.MERGED_COLUMNS,this.m_currentCellBase.getMergedColumns())}if(this.m_currentCellBase.getMergedRows()>0){n.putInteger(e.PivotTableExportConstants.MERGED_ROWS,this.m_currentCellBase.getMergedRows())}}else{n.putInteger(e.PivotTableExportConstants.ORIGINAL_COLUMN,this.m_currentColIndex+this.m_currentCellBase.getMergedColumns());n.putInteger(e.PivotTableExportConstants.ORIGINAL_ROW,this.m_currentRowIndex+this.m_currentCellBase.getMergedRows())}}};e.PivotTableExport.prototype.fillPlainValue=function(){let t=this.m_currentCellBase.getPlain();if(e.notNull(t)){let i=t.getValueType();this.m_currentCellJson.putString(e.PivotTableExportConstants.CELL_DATA_TYPE,i.getName());if(!this.m_currentCellBase.isHeaderCell()){if(i===e.XValueType.BOOLEAN){this.m_currentCellJson.putBoolean(e.PivotTableExportConstants.CELL_PLAIN,e.XValueUtil.getBoolean(t,false,true))}else if(i===e.XValueType.DOUBLE||i===e.XValueType.DECIMAL_FLOAT&&t.mayLoosePrecision()){this.m_currentCellJson.putDouble(e.PivotTableExportConstants.CELL_PLAIN,e.XValueUtil.getDouble(t,false,true))}else if(i===e.XValueType.LONG){this.m_currentCellJson.putLong(e.PivotTableExportConstants.CELL_PLAIN,e.XValueUtil.getLong(t,false,true))}else if(i===e.XValueType.INTEGER){this.m_currentCellJson.putInteger(e.PivotTableExportConstants.CELL_PLAIN,e.XValueUtil.getInteger(t,false,true))}else{this.m_currentCellJson.putString(e.PivotTableExportConstants.CELL_PLAIN,t.getStringRepresentation())}}}let i=this.m_currentCellBase.getUnitInformation();if(e.notNull(i)){let t=e.XStringUtils.isNotNullAndNotEmpty(i.getFirstString())?i.getFirstString():i.getSecondString();this.m_currentCellJson.putString("Unit",t)}if(e.XStringUtils.isNotNullAndNotEmpty(this.m_currentCellBase.getScalingText())){this.m_currentCellJson.putString("Scaling",this.m_currentCellBase.getScalingText())}};e.PivotTableExport.prototype.fillSemanticObjects=function(){let t=e.XString.isEqual(this.m_cellType,e.PivotTableExportConstants.CT_VALUE);let i=e.PrFactory.createList();this.addSemanticObjectFromTupleElement(i,this.m_tableDefinition.getColumnTupleElement(this.m_currentColIndex,this.m_currentRowIndex));this.addSemanticObjectFromTupleElement(i,this.m_tableDefinition.getRowTupleElement(this.m_currentColIndex,this.m_currentRowIndex));if(t){let t=this.m_tableDefinition.getColumnTuple(this.m_currentColIndex);if(e.notNull(t)){for(let e=0;e<t.size();e++){this.addSemanticObjectFromTupleElement(i,t.getTupleElementAt(e))}}t=this.m_tableDefinition.getRowTuple(this.m_currentRowIndex);if(e.notNull(t)){for(let e=0;e<t.size();e++){this.addSemanticObjectFromTupleElement(i,t.getTupleElementAt(e))}}}let n=this.m_currentCellBase.getDataCellRef();if(e.notNull(n)){let t=this.m_tableDefinition.getQueryModel().getQueryDataCell(n);if(e.notNull(t)&&t.getSemanticObject()!==null){e.PivotTableExport.addSemanticObjects(i,t.getSemanticObject())}}if(i.hasElements()){this.m_currentCellJson.put("SemanticObjects",i)}};e.PivotTableExport.prototype.fillTotals=function(){if(this.m_currentCellBase.isEffectiveTotalsContext()){this.m_currentCellJson.putBoolean(e.PivotTableExportConstants.TOTALS,true)}};e.PivotTableExport.prototype.fillTupleIndex=function(){if(e.XString.isEqual(this.m_cellType,e.PivotTableExportConstants.CT_DIM_MEMBER_COL)||e.XString.isEqual(this.m_cellType,e.PivotTableExportConstants.CT_VALUE)){let e=this.m_currentCellBase.getParentColumn();let t=e.getTupleIndex();this.m_currentCellJson.putInteger("TupleIndexCol",t)}if(e.XString.isEqual(this.m_cellType,e.PivotTableExportConstants.CT_DIM_MEMBER_ROW)||e.XString.isEqual(this.m_cellType,e.PivotTableExportConstants.CT_VALUE)){let e=this.m_currentCellBase.getParentRow();let t=e.getTupleIndex();this.m_currentCellJson.putInteger("TupleIndexRow",t)}};e.PivotTableExport.prototype.fillValueException=function(){if(this.m_currentCellBase.getValueException()!==null){this.m_currentCellJson.putString(e.PivotTableExportConstants.VAL_EXPT,this.m_currentCellBase.getValueException().getName())}};e.PivotTableExport.prototype.getDimensionName=function(e){let t=this.m_tableDefinition.getQueryModel().getDimensionByName(e.getName());if(t.isMeasureStructure()){return"MeasureStructure"}if(t.isStructure()){return"NonMeasureStructure"}return t.getExternalName()!==null?t.getExternalName():e.getName()};e.PivotTableExport.prototype.renderCell=function(t,i,n,r){this.m_currentCellBase=i;this.m_currentRowIndex=n;this.m_currentColIndex=r;this.m_currentCellJson=t.addNewStructure();this.m_currentCellJson.putInteger(e.PivotTableExportConstants.ROW,this.m_currentRowIndex);this.m_currentCellJson.putInteger(e.PivotTableExportConstants.COLUMN,this.m_currentColIndex);this.fillMergedCellInfo();this.fillCellType();this.fillFormattedValue();this.fillPlainValue();this.fillTupleIndex();this.fillDimension();this.fillMember();this.fillDocument();this.fillTotals();this.fillHierarchyInfo();this.fillSemanticObjects();this.fillValueException()};e.PivotTableExport.prototype.renderRow=function(t,i,n,r){let l=0;let o=this.m_table.getPreColumnsAmount();for(let s=0;s<o+r;s++){let r=i.getCells().get(s);if(e.notNull(r)&&r.getParentColumn()!==null&&!r.getParentColumn().isEffectivelyHidden()){this.renderCell(t,r,n,l++)}else if(e.isNull(r)){l++}}};e.PivotTableExportConstants={CELL_DATA_TYPE:"Type",CELL_PLAIN:"PlainValue",CELL_TYPE:"CellType",COLUMN:"Column",CT_ATTRIBUTE:"Attribute",CT_ATTRIBUTE_COL_DIM_HEADER:"DimAttrHeaderCol",CT_ATTRIBUTE_COL_DIM_MEMBER:"DimAttrMemberCol",CT_ATTRIBUTE_ROW_DIM_HEADER:"DimAttrHeaderRow",CT_ATTRIBUTE_ROW_DIM_MEMBER:"DimAttrMemberRow",CT_DIM_HEADER_COL:"DimHeaderCol",CT_DIM_HEADER_ROW:"DimHeaderRow",CT_DIM_MEMBER_COL:"DimMemberCol",CT_DIM_MEMBER_ROW:"DimMemberRow",CT_EMPTY_AXIS_HEADER_COL:"EmptyAxisHeaderCol",CT_EMPTY_AXIS_HEADER_ROW:"EmptyAxisHeaderRow",CT_HEADER:"Header",CT_VALUE:"Value",DOCUMENT_ID:"DocumentId",FORMATTED:"Value",FORMAT_STRING:"FormatString",HIERARCHY_LEVEL:"HierarchyLevel",HIERARCHY_NODE_EXPANDED:"HierarchyNodeExpanded",IN_HIERARCHY:"InHierarchy",MERGED:"Merged",MERGED_COLUMNS:"MergedColumns",MERGED_ROWS:"MergedRows",ORIGINAL_COLUMN:"OriginalColumn",ORIGINAL_ROW:"OriginalRow",REPEATED_MEMBER_NAME:"RepeatedMemberName",ROW:"Row",TOTALS:"Totals",TOTAL_COLUMNS:"TotalColumns",TOTAL_ROWS:"TotalRows",VAL_EXPT:"ValueException"};e.QFilterCartesianListTransformer=function(){};e.QFilterCartesianListTransformer.prototype=new e.XObject;e.QFilterCartesianListTransformer.prototype._ff_c="QFilterCartesianListTransformer";e.QFilterCartesianListTransformer.create=function(t){let i=new e.QFilterCartesianListTransformer;i.setup();i.m_cartesianList=t;return i};e.QFilterCartesianListTransformer.prototype.m_cartesianList=null;e.QFilterCartesianListTransformer.prototype.addComponents=function(t,i,n){if(e.XCollectionUtils.hasElements(i)){let r=t.putNewList(n);e.XCollectionUtils.forEach(i,t=>{let i=t.getField();if(e.notNull(i)){let n=i.getDimension();let l=r.addNewStructure();let o=n.getExternalName();if(e.XStringUtils.isNullOrEmpty(o)){o=n.getName()}l.putString("Dimension",o);l.putString("Member",t.getValueAsString())}})}};e.QFilterCartesianListTransformer.prototype.computeFilterValueText=function(t,i){let n=this.getFilterElementValueText(t,t.getLow());let r=this.getFilterElementValueText(t,t.getHigh());let l=e.notNull(r)?e.XStringUtils.concatenate3(n," - ",r):n;if(i){l=e.XStringUtils.concatenate3("!( ",l," )")}return l};e.QFilterCartesianListTransformer.prototype.convertMemberFilterList=function(){let t=e.PrList.create();if(e.notNull(this.m_cartesianList)){for(let i=0;i<this.m_cartesianList.size();i++){let n=this.m_cartesianList.getCartesianElement(i);if(e.notNull(n)){let i=n.getLow();let r=n.getHigh();let l=n.getSetSign()===e.SetSign.EXCLUDING;let o=t.addNewStructure();o.putString("Low",i.getString());this.addComponents(o,i.getExternalKeyMembers(),"LowExternal");this.addComponents(o,i.getInternalKeyMembers(),"LowIntenal");if(r.getString()!==null){o.putString("High",r.getString());this.addComponents(o,r.getExternalKeyMembers(),"HighExternal");this.addComponents(o,r.getInternalKeyMembers(),"HighInternal")}o.putString("ComparisonOperator",n.getComparisonOperator().getName());o.putString("Text",this.computeFilterValueText(n,l));o.putBoolean("IsExcluding",l);o.put("Hierarchy",this.getHierarchyInfo(n))}}}return t};e.QFilterCartesianListTransformer.prototype.getFilterElementValueText=function(t,i){let n=i.getString();let r=t.getDimension();let l=r.getTextField();if(e.notNull(l)){let t=i.getSupplementValueString(l.getName());if(e.XStringUtils.isNotNullAndNotEmpty(t)){n=t}}return n};e.QFilterCartesianListTransformer.prototype.getHierarchyInfo=function(t){let i=e.PrStructure.create();let n=t.getHierarchyName();if(e.notNull(n)){i.putString("name",n);i.putString("version",t.getHierarchyVersion());i.putString("dueDate",t.getHierarchyDueDate().getStringRepresentation());i.putInteger("levelOffset",t.getLevelOffset());i.putInteger("depth",t.getDepth())}return i};e.QFilterCartesianListTransformer.prototype.releaseObject=function(){this.m_cartesianList=null;e.XObject.prototype.releaseObject.call(this)};e.DataCellNumberFormatterSettings=function(){};e.DataCellNumberFormatterSettings.prototype=new e.XObject;e.DataCellNumberFormatterSettings.prototype._ff_c="DataCellNumberFormatterSettings";e.DataCellNumberFormatterSettings.create=function(t){let i=new e.DataCellNumberFormatterSettings;let n=t.getFormatString();i.setDecimalGroupingSeparatorFromFormat(n);i.setDecimalSeparatorFromFormat(n);i.setScaleFactor(t);i.setMaxDigitsRightAndPadding(t);i.setCurrencyFormatSettings(t.getCurrencyUnit());return i};e.DataCellNumberFormatterSettings.prototype.m_currencySettings=null;e.DataCellNumberFormatterSettings.prototype.m_decimalGroupingSeparator=null;e.DataCellNumberFormatterSettings.prototype.m_decimalSeparator=null;e.DataCellNumberFormatterSettings.prototype.m_maxDigitsRight=-1;e.DataCellNumberFormatterSettings.prototype.m_rightPad=-1;e.DataCellNumberFormatterSettings.prototype.m_scaleFactor=null;e.DataCellNumberFormatterSettings.prototype.getCurrencyFormatSettings=function(){return this.m_currencySettings};e.DataCellNumberFormatterSettings.prototype.getDecimalGroupingSeparator=function(){return this.m_decimalGroupingSeparator};e.DataCellNumberFormatterSettings.prototype.getDecimalSeparator=function(){return this.m_decimalSeparator};e.DataCellNumberFormatterSettings.prototype.getFirstCharacterAfter=function(t,i){if(e.isNull(t)||e.isNull(i)){return null}let n=e.XString.indexOf(t,i);if(n<0||n===e.XString.size(t)-1){return null}return e.XString.substring(t,n+1,n+2)};e.DataCellNumberFormatterSettings.prototype.getMaxDigitsRight=function(){return this.m_maxDigitsRight};e.DataCellNumberFormatterSettings.prototype.getRightPad=function(){return this.m_rightPad};e.DataCellNumberFormatterSettings.prototype.getScaleFactor=function(){return this.m_scaleFactor};e.DataCellNumberFormatterSettings.prototype.getScaleFormat=function(){return null};e.DataCellNumberFormatterSettings.prototype.getSignPresentation=function(){return null};e.DataCellNumberFormatterSettings.prototype.isSupportedDecimalGroupingSeparator=function(t){return e.XString.isEqual(",",t)||e.XString.isEqual(".",t)||e.XString.isEqual(" ",t)};e.DataCellNumberFormatterSettings.prototype.isSupportedDecimalSeparator=function(t){return e.XString.isEqual(",",t)||e.XString.isEqual(".",t)};e.DataCellNumberFormatterSettings.prototype.setCurrencyFormatSettings=function(t){let i=null;if(t.hasPrefix()){i=e.XCurrencyFormatSettings.create();i.setCurrencyPresentationPosition(0);i.setValuePosition(1);i.setScaleTextPosition(2);i.setCurrencyPresentationHasSpace(true);i.setScaleTextHasSpace(true)}else{i=e.XCurrencyFormatSettings.create();i.setCurrencyPresentationPosition(2);i.setValuePosition(0);i.setScaleTextPosition(1);i.setCurrencyPresentationHasSpace(true);i.setScaleTextHasSpace(true)}this.m_currencySettings=i};e.DataCellNumberFormatterSettings.prototype.setDecimalGroupingSeparatorFromFormat=function(t){let i=this.getFirstCharacterAfter(t,"#");if(e.isNull(i)&&!e.XString.containsString(t,"#")){this.m_decimalGroupingSeparator=" "}else if(this.isSupportedDecimalGroupingSeparator(i)){this.m_decimalGroupingSeparator=i}};e.DataCellNumberFormatterSettings.prototype.setDecimalSeparatorFromFormat=function(e){let t=this.getFirstCharacterAfter(e,"0");if(this.isSupportedDecimalSeparator(t)){this.m_decimalSeparator=t}};e.DataCellNumberFormatterSettings.prototype.setMaxDigitsRightAndPadding=function(e){let t=e.getDecimalPlaces();if(t>=0){this.m_maxDigitsRight=t;this.m_rightPad=t}};e.DataCellNumberFormatterSettings.prototype.setScaleFactor=function(t){this.m_scaleFactor=e.XIntegerValue.create(-t.getScalingFactor())};e.QStructureMemberFormatterSettings=function(){};e.QStructureMemberFormatterSettings.prototype=new e.XObject;e.QStructureMemberFormatterSettings.prototype._ff_c="QStructureMemberFormatterSettings";e.QStructureMemberFormatterSettings.create=function(t,i){let n=new e.QStructureMemberFormatterSettings;let r=e.XCollectionUtils.hasElements(t)?t.get(0):null;let l=e.XCollectionUtils.hasElements(t)&&t.size()>1?t.get(1):null;let o=n.getDataCell(r,l,i);n.setScaleFactor(r,l,o);n.setMaxDigitsRightAndPadding(r,l,o);n.setScaleFormat(r,l,o);n.setSignPresentation(r,l,o);n.setCurrencyPresentation(r,l,o);return n};e.QStructureMemberFormatterSettings.findBySolveOrder=function(t,i,n){let r=t;let l=i;if(e.notNull(t)&&e.notNull(i)){let e=t.getQueryModel();let n=t.getSolveOrder();let o=i.getSolveOrder();if(n<o){r=i;l=t}else if(n===o){if(e.isLeadingStructureAccount()&&t.getDimension().isMeasureStructure()){r=i;l=t}else if(!e.isLeadingStructureAccount()&&i.getDimension().isMeasureStructure()){r=i;l=t}}}let o=null;if(e.notNull(r)){o=n(r)}if(e.isNull(o)&&e.notNull(l)){o=n(l)}return e.XOptional.ofNullable(o)};e.QStructureMemberFormatterSettings.getLeadingScalingPower=function(t,i){return e.QStructureMemberFormatterSettings.findBySolveOrder(t,i,e=>e.getNumericShift())};e.QStructureMemberFormatterSettings.prototype.m_currencyFormatSettings=null;e.QStructureMemberFormatterSettings.prototype.m_maxDigitsRight=-1;e.QStructureMemberFormatterSettings.prototype.m_rightPad=-1;e.QStructureMemberFormatterSettings.prototype.m_scaleFactor=null;e.QStructureMemberFormatterSettings.prototype.m_scaleFormat=null;e.QStructureMemberFormatterSettings.prototype.m_signPresentation=null;e.QStructureMemberFormatterSettings.prototype.getCurrencyFormatSettings=function(){return this.m_currencyFormatSettings};e.QStructureMemberFormatterSettings.prototype.getDataCell=function(t,i,n){let r=e.XOptional.empty();let l=n.getQueryDataCells();if(e.XCollectionUtils.hasElements(l)){r=e.XStream.of(l).filter(n=>(e.isNull(t)||n.hasMemberReference(t))&&(e.isNull(i)||n.hasMemberReference(i))).findAny()}return r};e.QStructureMemberFormatterSettings.prototype.getDecimalGroupingSeparator=function(){return null};e.QStructureMemberFormatterSettings.prototype.getDecimalSeparator=function(){return null};e.QStructureMemberFormatterSettings.prototype.getLeadingCurrencyPresentation=function(t,i){return e.QStructureMemberFormatterSettings.findBySolveOrder(t,i,e=>e.getCurrencyPresentation())};e.QStructureMemberFormatterSettings.prototype.getLeadingDecimalPlaces=function(t,i){return e.QStructureMemberFormatterSettings.findBySolveOrder(t,i,e=>e.getNumericScale())};e.QStructureMemberFormatterSettings.prototype.getLeadingScaleFormat=function(t,i){return e.QStructureMemberFormatterSettings.findBySolveOrder(t,i,e=>e.getScaleFormat())};e.QStructureMemberFormatterSettings.prototype.getLeadingSignPresentation=function(t,i){return e.QStructureMemberFormatterSettings.findBySolveOrder(t,i,e=>e.getSignPresentation())};e.QStructureMemberFormatterSettings.prototype.getMaxDigitsRight=function(){return this.m_maxDigitsRight};e.QStructureMemberFormatterSettings.prototype.getRightPad=function(){return this.m_rightPad};e.QStructureMemberFormatterSettings.prototype.getScaleFactor=function(){return this.m_scaleFactor};e.QStructureMemberFormatterSettings.prototype.getScaleFormat=function(){return this.m_scaleFormat};e.QStructureMemberFormatterSettings.prototype.getSignPresentation=function(){return this.m_signPresentation};e.QStructureMemberFormatterSettings.prototype.setCurrencyPresentation=function(t,i,n){this.m_currencyFormatSettings=e.XCurrencyFormatSettings.create();if(n.isPresent()){this.m_currencyFormatSettings.setCurrencyPresentation(n.get().getCurrencyPresentation())}else{this.m_currencyFormatSettings.setCurrencyPresentation(this.getLeadingCurrencyPresentation(t,i).orElse(null))}};e.QStructureMemberFormatterSettings.prototype.setMaxDigitsRightAndPadding=function(e,t,i){let n;if(i.isPresent()){let e=i.get();n=!e.getModelCapabilities().supportsQueryDataCellModelDefaults()&&e.isDecimalPlacesDefault()?-1:e.getDecimalPlaces()}else{let i=this.getLeadingDecimalPlaces(e,t);n=i.isPresent()?i.get().getInteger():-1}if(n>=0){this.m_maxDigitsRight=n;this.m_rightPad=n}};e.QStructureMemberFormatterSettings.prototype.setScaleFactor=function(t,i,n){if(n.isPresent()){let t=n.get();if(!t.isScalingFactorDefault()){let i=t.getScalingFactor();this.m_scaleFactor=e.XIntegerValue.create(i)}}else{e.QStructureMemberFormatterSettings.getLeadingScalingPower(t,i).ifPresent(t=>{this.m_scaleFactor=e.XIntegerValue.create(-t.getInteger())})}};e.QStructureMemberFormatterSettings.prototype.setScaleFormat=function(e,t,i){if(i.isPresent()){this.m_scaleFormat=i.get().getScaleFormat()}else{this.m_scaleFormat=this.getLeadingScaleFormat(e,t).orElse(null)}};e.QStructureMemberFormatterSettings.prototype.setSignPresentation=function(e,t,i){if(i.isPresent()){this.m_signPresentation=i.get().getSignPresentation()}else{this.m_signPresentation=this.getLeadingSignPresentation(e,t).orElse(null)}};e.PivotActionResolver=function(){};e.PivotActionResolver.prototype=new e.XObject;e.PivotActionResolver.prototype._ff_c="PivotActionResolver";e.PivotActionResolver.create=function(t){let i=new e.PivotActionResolver;i.m_gridContainer=t;return i};e.PivotActionResolver.prototype.m_gridContainer=null;e.PivotActionResolver.prototype.canResolveSimple=function(e,t,i){let n=this.getSimpleGridCoordinates(e);let r=n.getColumnCoordinate();let l=n.getRowCoordinate();let o=false;if(t===-1&&i===-1&&r>-1&&l>-1){o=true}else if(t===l&&r===-1&&i===-1){o=true}else if(r===i&&l===-1&&t===-1){o=true}return o};e.PivotActionResolver.prototype.correctIndex=function(e,t){return e<0?t+e:e};e.PivotActionResolver.prototype.encodeForUrl=function(t){return e.isNull(t)?null:e.XHttpUtils.encodeURIComponent(t.getStringRepresentation())};e.PivotActionResolver.prototype.getDpCommandPairFromSimpleContext=function(t,i,n,r,l){let o=e.XStream.of(t.getParameters()).collect(e.XStreamCollector.toListOfString(t=>e.XValueUtil.getString(this.resolveParameter(t,i,n,r,l))));return e.XPair.create(e.XStringValue.create(t.getCommandName()),o)};e.PivotActionResolver.prototype.getDpCommandPairsFromSimpleContext=function(t,i,n,r,l){return e.XStream.of(t).map(e=>this.getDpCommandPairFromSimpleContext(e,i,n,r,l)).collect(e.XStreamCollector.toList())};e.PivotActionResolver.prototype.getSimpleGridCoordinates=function(t){let i=t.getParameters();let n=i.size();let r=e.QQuickActionCoordinate.create();for(let t=0;t<n;t++){let n=i.get(t);if(n.getOlapComponentType()===e.OlapComponentType.QUICK_ACTION_PARAMETER_FIELD_VALUE){let e=n;let t=this.m_gridContainer.getRowsAxis().retrieveActionParameterDimensionIndex(e);if(t>-1){r.applyRowParameter(t,n)}else{t=this.m_gridContainer.getColumnsAxis().retrieveActionParameterDimensionIndex(e);if(t>-1){r.applyColumnParameter(t,n)}else{r.reset();break}}}}return r};e.PivotActionResolver.prototype.getUriFromSimpleContext=function(t,i,n,r,l){let o=e.XStream.of(t.getParameters()).collect(e.XStreamCollector.toListOfString(e=>this.resolveSimpleParameterUrl(e,i,n,r,l)));let s=e.XUri.create();s.setUrl(e.XCollectionUtils.join(o,""));return s};e.PivotActionResolver.prototype.resolveByFilterElement=function(t,i){return e.QQuickActionParameterResolveUtil.resolveFromFilterElement(t.getQueryModel(),t,i)};e.PivotActionResolver.prototype.resolveByTupleContext=function(t,i){return e.XStream.of(i).map(e=>e.resolveFieldValueActionParameter(t)).collect(e.XStreamCollector.toList())};e.PivotActionResolver.prototype.resolveOlapParameter=function(t,i,n){let r=t.getComponentTypeToResolve();let l=null;if(r.isTypeOf(e.OlapComponentType.QUERY_MODEL)){l=this.m_gridContainer.getQueryModel()}else{let t=i.getVisibleComponentsOnAxis();if(n>-1&&n<e.XCollectionUtils.size(t)){let o=t.get(n);if(r.isTypeOf(e.OlapComponentType.AXIS)){l=i.getAxisType()}else if(o.getModelComponentType().isTypeOf(e.OlapComponentType.FIELD)){let t=o;if(r.isTypeOf(e.OlapComponentType.FIELD)){l=t.getField()}else if(r.isTypeOf(e.OlapComponentType.ATTRIBUTE)){l=t.getField().getAttribute()}else if(r.isTypeOf(e.OlapComponentType.ABSTRACT_DIMENSION)){l=t.getField().getDimension()}}}}return e.XCollectionUtils.singletonList(e.XValueAccess.createWithValue(e.XStringValue.create(e.DfNameObject.getSafeName(l))))};e.PivotActionResolver.prototype.resolveParameter=function(t,i,n,r,l){let o=t.getOlapComponentType();let s=null;if(o.isTypeOf(e.OlapComponentType.QUICK_ACTION_PARAMETER_FIELD_VALUE)){let o=t;if(this.resolvesAxisContext(o,i,0,n)){s=this.resolveByTupleContext(o,e.XCollectionUtils.singletonList(i))}else if(this.resolvesAxisContext(o,r,0,l)){s=this.resolveByTupleContext(o,e.XCollectionUtils.singletonList(r))}else if(this.resolvesFilterElement(o,t.getQueryModel().getFilter().getDynamicFilter().getFilterRootElement())){s=this.resolveByFilterElement(o,t.getQueryModel().getFilter().getDynamicFilter().getFilterRootElement())}}else if(o.isTypeOf(e.OlapComponentType.QUICK_ACTION_PARAMETER_OLAP)){if(n>-1){s=this.resolveOlapParameter(t,i.getAxisReference(),n)}else if(l>-1){s=this.resolveOlapParameter(t,r.getAxisReference(),l)}}else if(o.isTypeOf(e.OlapComponentType.QUICK_ACTION_PARAMETER_CONSTANT)){s=t.resolveConstantValue()}else if(o.isTypeOf(e.OlapComponentType.QUICK_ACTION_PARAMETER_CONSTANT_LIST)){s=t.resolveConstantValue()}else if(o.isTypeOf(e.OlapComponentType.QUICK_ACTION_PARAMETER_URL_LITERAL)){s=t.resolveConstantValue()}return e.XCollectionUtils.hasElements(s)?s.get(0).getValue():null};e.PivotActionResolver.prototype.resolveSimpleParameterUrl=function(t,i,n,r,l){let o=t.getOlapComponentType();let s=this.resolveParameter(t,i,n,r,l);return o===e.OlapComponentType.QUICK_ACTION_PARAMETER_URL_LITERAL?e.XValueUtil.getString(s):this.encodeForUrl(s)};e.PivotActionResolver.prototype.resolvesAxisContext=function(t,i,n,r){let l=false;let o;if(e.notNull(i)){o=i.getAxisReference();let s=o.retrieveActionParameterDimensionIndex(t);let a=e.XCollectionUtils.size(o.getModelDimensionsOnAxis());l=s>-1&&this.correctIndex(n,a)<=s&&this.correctIndex(r,a)>=s}return l};e.PivotActionResolver.prototype.resolvesFilterElement=function(e,t){return false};e.PivotTextMeasureUtil={calculateWidth:function(t,i,n,r,l){let o=0;let s=e.XString.size(i);if(s>0){o=e.XDouble.convertToInt(e.XMath.ceil(t.calculateTextWidth(i,n)));if(o===0){o=e.XDouble.convertToInt(e.XMath.ceil(l*s*(r?8:7)/13))}}return o},getFontCssString:function(t,i,n,r){let l=e.XStringBuffer.create();if(i){l.append("bold ")}if(n){l.append("italic ")}l.append(e.XDouble.convertToString(r));l.append("px");l.append(" ");l.append(t);return l.toString()},measureText:function(t,i,n,r,l,o){let s=e.PivotTextMeasureUtil.getFontCssString(o,n,r,l);let a=e.UiFramework.currentFramework();return e.XStream.ofString(t).map(t=>e.XIntegerValue.create(e.PivotTextMeasureUtil.calculateWidth(a,t.getString(),s,n,l))).reduce(e.XIntegerValue.create(0),(t,i)=>e.XIntegerValue.create(e.XMath.max(t.getInteger(),i.getInteger()))).getInteger()},measureTextOrRetokenize:function(t,i,n,r,l,o,s,a){let u=e.PivotTextMeasureUtil.getFontCssString(l,i,n,r);let p=e.UiFramework.currentFramework();let c=t.getIterator();let g=0;while(c.hasNext()){let t=c.next();let n=e.PivotTextMeasureUtil.calculateWidth(p,t,u,i,r);if(o&&a>0){n=e.PivotTextMeasureUtil.subTokenize(t,a,n,s,p,u,i,r)}else{s.add(t)}g=e.XMath.max(g,n)}return g},subTokenize:function(t,i,n,r,l,o,s,a){let u=t;let p=n;let c=e.XString.size(t);let g=c;while(p>i&&g>0){let i=e.XString.size(u)-1;while(i>0&&!e.PivotTextWrappingUtil.canWrapAtPosition(u,i)){i--}if(i<1){break}g=i;u=e.XString.trim(e.XString.substring(t,0,g));p=e.PivotTextMeasureUtil.calculateWidth(l,u,o,s,a)}r.add(u);if(g<c){let u=e.XString.trim(e.XString.substring(t,g,-1));p=e.XMath.max(p,e.PivotTextMeasureUtil.subTokenize(u,i,n-p,r,l,o,s,a))}return p}};e.PivotTextWrappingUtil={CJK_BASE_MAX_9FFF:40959,CJK_BASE_MIN_4E00:19968,CJK_COMP_MAX_FAFF:64255,CJK_COMP_MIN_F900:63744,CJK_EXT_A_MAX_4DBF:19903,CJK_EXT_A_MIN_3400:13312,CJK_EXT_B_MAX_2A6DF:173791,CJK_EXT_B_MIN_20000:131072,CJK_EXT_C_MAX_2B73F:177983,CJK_EXT_C_MIN_2A700:173824,CJK_EXT_D_MAX_2B81F:178207,CJK_EXT_D_MIN_2B740:177984,CJK_EXT_E_MAX_2CEAF:183983,CJK_EXT_E_MIN_2B820:178208,CJK_EXT_F_MAX_2EBEF:191471,CJK_EXT_F_MIN_2CEB0:183984,CJK_EXT_G_MAX_3134F:201551,CJK_EXT_G_MIN_30000:196608,CJK_EXT_H_MAX_323AF:205743,CJK_EXT_H_MIN_31350:201552,CJK_EXT_I_MAX_2EE5F:192095,CJK_EXT_I_MIN_2EBF0:191472,HANGUL_MAX_D7AF:55215,HANGUL_MIN_AC00:44032,JAP_MAX_30FF:12543,JAP_MIN_3040:12352,s_breakingWhiteSpaces:null,s_endDelimiters:null,s_hyphens:null,s_nonSeparatableDelimiters:null,s_startDelimiters:null,addInteger:function(t,i){t.add(e.XIntegerValue.create(i))},canBeSplitToTheLeft:function(t){return t!==-1&&!e.PivotTextWrappingUtil.isNonSeparatableDelimiter(t)&&!e.PivotTextWrappingUtil.isEndDelimiter(t)&&(e.PivotTextWrappingUtil.isCjkCharacter(t)||e.PivotTextWrappingUtil.isStartDelimiter(t))},canBeSplitToTheRight:function(t){return t!==-1&&!e.PivotTextWrappingUtil.isNonSeparatableDelimiter(t)&&!e.PivotTextWrappingUtil.isStartDelimiter(t)&&(e.PivotTextWrappingUtil.isCjkCharacter(t)||e.PivotTextWrappingUtil.isEndDelimiter(t))},canWrapAtPosition:function(t,i){let n=i>1?e.XString.getCharAt(t,i-2):-1;let r=i>0?e.XString.getCharAt(t,i-1):-1;let l=e.XString.getCharAt(t,i);return e.PivotTextWrappingUtil.isBreakingWhiteSpace(l)||e.PivotTextWrappingUtil.isBreakingWhiteSpace(r)||e.PivotTextWrappingUtil.isHyphen(r)&&n>-1&&!e.PivotTextWrappingUtil.isBreakingWhiteSpace(n)||e.PivotTextWrappingUtil.canBeSplitToTheRight(r)&&e.PivotTextWrappingUtil.canBeSplitToTheLeft(l)},isBetween:function(e,t,i){return e>=t&&e<=i},isBreakingWhiteSpace:function(t){return e.PivotTextWrappingUtil.s_breakingWhiteSpaces.contains(e.XIntegerValue.create(t))},isCjkCharacter:function(t){return e.PivotTextWrappingUtil.isBetween(t,e.PivotTextWrappingUtil.HANGUL_MIN_AC00,e.PivotTextWrappingUtil.HANGUL_MAX_D7AF)||e.PivotTextWrappingUtil.isBetween(t,e.PivotTextWrappingUtil.JAP_MIN_3040,e.PivotTextWrappingUtil.JAP_MAX_30FF)||e.PivotTextWrappingUtil.isBetween(t,e.PivotTextWrappingUtil.CJK_BASE_MIN_4E00,e.PivotTextWrappingUtil.CJK_BASE_MAX_9FFF)||e.PivotTextWrappingUtil.isBetween(t,e.PivotTextWrappingUtil.CJK_COMP_MIN_F900,e.PivotTextWrappingUtil.CJK_COMP_MAX_FAFF)||e.PivotTextWrappingUtil.isBetween(t,e.PivotTextWrappingUtil.CJK_EXT_A_MIN_3400,e.PivotTextWrappingUtil.CJK_EXT_A_MAX_4DBF)||e.PivotTextWrappingUtil.isBetween(t,e.PivotTextWrappingUtil.CJK_EXT_B_MIN_20000,e.PivotTextWrappingUtil.CJK_EXT_B_MAX_2A6DF)||e.PivotTextWrappingUtil.isBetween(t,e.PivotTextWrappingUtil.CJK_EXT_C_MIN_2A700,e.PivotTextWrappingUtil.CJK_EXT_C_MAX_2B73F)||e.PivotTextWrappingUtil.isBetween(t,e.PivotTextWrappingUtil.CJK_EXT_D_MIN_2B740,e.PivotTextWrappingUtil.CJK_EXT_D_MAX_2B81F)||e.PivotTextWrappingUtil.isBetween(t,e.PivotTextWrappingUtil.CJK_EXT_E_MIN_2B820,e.PivotTextWrappingUtil.CJK_EXT_E_MAX_2CEAF)||e.PivotTextWrappingUtil.isBetween(t,e.PivotTextWrappingUtil.CJK_EXT_F_MIN_2CEB0,e.PivotTextWrappingUtil.CJK_EXT_F_MAX_2EBEF)||e.PivotTextWrappingUtil.isBetween(t,e.PivotTextWrappingUtil.CJK_EXT_G_MIN_30000,e.PivotTextWrappingUtil.CJK_EXT_G_MAX_3134F)||e.PivotTextWrappingUtil.isBetween(t,e.PivotTextWrappingUtil.CJK_EXT_H_MIN_31350,e.PivotTextWrappingUtil.CJK_EXT_H_MAX_323AF)||e.PivotTextWrappingUtil.isBetween(t,e.PivotTextWrappingUtil.CJK_EXT_I_MIN_2EBF0,e.PivotTextWrappingUtil.CJK_EXT_I_MAX_2EE5F)},isEndDelimiter:function(t){return e.PivotTextWrappingUtil.s_endDelimiters.contains(e.XIntegerValue.create(t))},isHyphen:function(t){return e.PivotTextWrappingUtil.s_hyphens.contains(e.XIntegerValue.create(t))},isNonSeparatableDelimiter:function(t){return e.PivotTextWrappingUtil.s_nonSeparatableDelimiters.contains(e.XIntegerValue.create(t))},isStartDelimiter:function(t){return e.PivotTextWrappingUtil.s_startDelimiters.contains(e.XIntegerValue.create(t))},staticSetup:function(){e.PivotTextWrappingUtil.s_startDelimiters=e.XList.create();e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,32);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,34);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,35);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,36);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,39);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,40);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,91);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,123);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,163);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,165);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,171);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,183);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,8245);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,12293);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,12295);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,12296);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,12297);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,12298);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,12299);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,12300);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,12301);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,12302);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,12304);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,12308);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,12310);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,12312);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,12317);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65076);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65077);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65079);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65081);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65083);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65085);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65087);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65089);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65091);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65103);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65113);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65115);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65284);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65288);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65294);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65339);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65371);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65375);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65376);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65505);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65509);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_startDelimiters,65510);e.PivotTextWrappingUtil.s_endDelimiters=e.XList.create();e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,32);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,33);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,34);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,37);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,39);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,41);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,44);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,46);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,58);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,59);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,63);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,93);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,125);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,162);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,176);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,183);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,187);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,8211);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,8212);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,8224);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,8225);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,8226);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,8250);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,8451);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,8758);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12289);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12290);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12291);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12294);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12296);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12297);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12298);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12299);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12300);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12301);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12302);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12303);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12305);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12309);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12311);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12313);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12318);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,12319);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65072);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65073);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65074);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65075);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65078);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65080);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65082);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65084);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65086);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65088);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65090);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65104);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65105);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65106);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65107);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65108);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65109);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65110);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65111);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65112);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65114);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65116);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65281);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65282);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65285);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65287);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65289);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65292);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65294);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65306);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65307);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65311);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65341);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65372);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65373);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65374);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65376);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_endDelimiters,65380);e.PivotTextWrappingUtil.s_nonSeparatableDelimiters=e.XList.create();e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_nonSeparatableDelimiters,346);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_nonSeparatableDelimiters,8212);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_nonSeparatableDelimiters,8229);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_nonSeparatableDelimiters,12339);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_nonSeparatableDelimiters,12340);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_nonSeparatableDelimiters,12341);e.PivotTextWrappingUtil.s_hyphens=e.XList.create();e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_hyphens,45);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_hyphens,8208);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_hyphens,8211);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_hyphens,12316);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_hyphens,12448);e.PivotTextWrappingUtil.s_breakingWhiteSpaces=e.XList.create();e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_breakingWhiteSpaces,9);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_breakingWhiteSpaces,10);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_breakingWhiteSpaces,11);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_breakingWhiteSpaces,12);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_breakingWhiteSpaces,13);e.PivotTextWrappingUtil.addInteger(e.PivotTextWrappingUtil.s_breakingWhiteSpaces,32)}};e.OlapVizToPivotConverterUtil={applyCellTypeRestrictionFromViz:function(t,i){i.setInHierarchy(t.isInHierarchy());i.setInTotalsContext(t.isInTotalsContext());i.setExpanded(t.isExpanded());i.setRepeatedMemberName(t.isRepeatedMemberName());i.setMerged(t.isMerged());e.XCollectionUtils.forEach(t.getMatchingCellTypes(),t=>{i.addCellType(e.OlapVizToPivotConverterUtil.getCellTypeFromViz(t))})},applyCellsReferenceScopeFromViz:function(t,i){let n=t.getHeaderSectionInfos().getIterator();i.clearHeaderSectionsInfos();while(n.hasNext()){e.OlapVizToPivotConverterUtil.applyHeaderSectionInfoFromViz(n.next(),i.addNewHeaderSectionInfo())}i.setMatchHeaderSectionStart(t.isMatchHeaderSectionStart());i.setMatchHeaderSectionEnd(t.isMatchHeaderSectionEnd());i.setMatchHeaderFieldsSectionEnd(t.isMatchHeaderFieldsSectionEnd());i.setMatchFullHeaderSection(t.isMatchFullHeaderSection());let r=t.getAxisPaths().getIterator();i.clearDataPaths();while(r.hasNext()){e.OlapToVisualizationConverterUtil.applyPathInfoFromViz(r.next(),i.addNewDataPath())}i.setMatchDataSectionStart(t.isMatchDataSectionStart());i.setMatchDataSectionEnd(t.isMatchDataSectionEnd());i.setMatchFullDataSection(t.isMatchFullDataSection());i.setMatchModulo(t.getMatchModulo());i.setMatchOrdinal(t.getMatchOrdinal());i.setMatchSkipFirst(t.getMatchSkipFirst());i.setMatchSkipLast(t.getMatchSkipLast());i.setMatchRootContentIndices(t.isMatchRootContentIndices())},applyDataPointStyleFromViz:function(t,i){e.OlapVizToPivotConverterUtil.applyDataPointStyleFromVizExt(t,i,null)},applyDataPointStyleFromVizExt:function(t,i,n){if(t.isUnmatchedTags()){i.setUnmatchedTags()}else{i.clearTags();e.XCollectionUtils.forEach(t.getTags(),e=>{t.addTag(e)})}if(t.isUnmatchedExceptions()){i.setUnmatchedExceptions()}else{i.setExceptionName(t.getExceptionName())}if(t.isUnmatchedAlertLevels()){i.setUnmatchedAlertLevels()}else{i.setAlertLevelMin(e.OlapVizToPivotConverterUtil.getAlertLevelFromViz(t.getAlertLevelMin()));i.setAlertLevelMax(e.OlapVizToPivotConverterUtil.getAlertLevelFromViz(t.getAlertLevelMax()))}if(t.isUnmatchedValueSigns()){i.setUnmatchedValueSigns()}else{i.setValueSign(e.OlapToVisualizationConverterUtil.getValueSignFromViz(t.getValueSign()))}if(t.isUnmatchedPathElements()){i.setUnmatchedPathElements()}else{e.XCollectionUtils.forEach(t.getPathElements(),t=>{e.OlapToVisualizationConverterUtil.applyDataSectionInfoFromViz(t,i.addNewPathElement())})}let r=t.getTableDefinition();let l=t.getDataPointCategoryNameRaw().resolveStringExtended(n,r);if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.setDataPointCategoryName(l)}let o=t.getDataPointCategoryTextRaw().resolveStringExtended(n,r);if(e.XStringUtils.isNotNullAndNotEmpty(o)){i.setDataPointCategoryText(o)}let s=t.getFormattingStyleNameRaw().resolveStringExtended(n,r);let a=r.getFormattingStyle(s);e.OlapVizToPivotConverterUtil.applyTableStyleFromVizExt(a,i.getTableStyle(),n);i.setPriority(t.getPriority())},applyHeaderSectionInfoFromField:function(t,i){let n=t.getAttribute();let r=t.getDimension();let l=false;let o=false;let s=false;let a=false;let u=t=>t.getObtainability()===null||t.getObtainability()===e.ObtainabilityType.ALWAYS;if(e.isNull(n)||r.getFieldLayoutType()===e.FieldLayoutType.FIELD_BASED){let i=e.XStream.of(r.getResultSetFields()).filter(u).collect(e.XStreamCollector.toList());l=i.getIndex(t)===0;s=l;o=i.getIndex(t)===i.size()-1;a=o}else{let i=r.getResultSetAttributes();let p=e.XStream.of(n.getResultSetFields()).filter(u).collect(e.XStreamCollector.toList());s=p.getIndex(t)===0;a=p.getIndex(t)===p.size()-1;l=s&&i.getIndex(n)===0;o=a&&i.getIndex(n)===i.size()-1}let p=r.getIndexOnAxis();let c=p-r.getAxis().size()-1;let g=i.addPartOfHeaderSectionInfo(l,o);g.setHeaderLevel(0);g.setHeaderName(r.getName());g.setAxisLevel(p);g.setReversedAxisLevel(c);g.setExactHeaderLevel(l);let m=i.addPartOfHeaderSectionInfo(s,a);m.setHeaderLevel(1);m.setHeaderName(e.isNull(n)?r.getName():n.getName());m.setAxisLevel(p);m.setReversedAxisLevel(c);m.setExactHeaderLevel(s);let f=i.addPartOfHeaderSectionInfo(true,true);f.setHeaderLevel(2);f.setHeaderName(t.getName());f.setAxisLevel(p);f.setReversedAxisLevel(c);f.setExactHeaderLevel(true)},applyHeaderSectionInfoFromUniqueHeader:function(e){let t=e.addPartOfHeaderSectionInfo(false,false);t.setHeaderLevel(3);t.setExactHeaderLevel(true)},applyHeaderSectionInfoFromViz:function(e,t){if(e.isDimensionLevel()){t.setHeaderLevel(0)}else if(e.isAttributeLevel()){t.setHeaderLevel(1)}else if(e.isFieldLevel()){t.setHeaderLevel(2)}else if(e.isUniqueUnitsLevel()){t.setHeaderLevel(3)}else{t.setHeaderLevel(-1)}t.setHeaderName(e.getHeaderName());t.setExactHeaderLevel(e.isExactHeaderLevel());t.setAxisLevel(e.getAxisLevel());t.setSectionStart(e.isSectionStart());t.setSectionEnd(e.isSectionEnd())},applyHighlightingFromViz:function(t,i){i.setHighlightColor(t.getHighlightColor());i.setPriority(t.getPriority());e.OlapVizToPivotConverterUtil.applyCellsReferenceScopeFromViz(t.getColumnsReference(),i.getColumnsReference());e.OlapVizToPivotConverterUtil.applyCellsReferenceScopeFromViz(t.getRowsReference(),i.getRowsReference());e.OlapVizToPivotConverterUtil.applyCellTypeRestrictionFromViz(t.getCellTypeRestriction(),i.getCellTypeRestriction())},applyInsertedTupleFromViz:function(t,i){let n=t.getTableDefinition();i.setCellWidth(t.getCellWidth());i.setCellHeight(t.getCellHeight());i.setFormattedText(t.getFormattedText());i.setMerged(t.isMerged());let r=t.getScopedStyleNames().getIterator();while(r.hasNext()){e.OlapVizToPivotConverterUtil.applyScopedStyleFromViz(n.getScopedStyle(r.next()),i.addNewScopedStyle())}},applyLayeredRectangularStyleFromViz:function(t,i){e.OlapVizToPivotConverterUtil.applyTableStyleFromViz(t.getStyle(),i.getStyle());e.OlapVizToPivotConverterUtil.applyCellsReferenceScopeFromViz(t.getRowsScope(),i.getRowsRestriction());e.OlapVizToPivotConverterUtil.applyCellsReferenceScopeFromViz(t.getColumnsScope(),i.getColumnsRestriction())},applyPageBreakHandlingFromViz:function(e,t){t.setBreakAfter(e.isBreakAfter());t.setBreakBefore(e.isBreakBefore());t.setKeepTogether(e.isKeepTogether())},applyScopedStyleFromViz:function(t,i){e.OlapVizToPivotConverterUtil.applyTableStyleFromViz(t.getStyle(),i.getStyle());e.OlapVizToPivotConverterUtil.applyCellsReferenceScopeFromViz(t.getOrthogonalColumnsScope(),i.getOrthogonalColumnsRestriction());e.OlapVizToPivotConverterUtil.applyCellsReferenceScopeFromViz(t.getOrthogonalRowsScope(),i.getOrthogonalRowsRestriction())},applyTableMarkupFromViz:function(t,i){let n=t.getTableDefinition();i.setHide(t.isHide());i.setCellHeight(t.getCellHeight());i.setCellWidth(t.getCellWidth());i.setCellHeightAddition(t.getCellHeightAddition());i.setCellWidthAddition(t.getCellWidthAddition());i.setPriority(t.getPriority());e.OlapVizToPivotConverterUtil.applyPageBreakHandlingFromViz(t.getPageBreakHandling(),i.getPageBreakHandling());e.OlapVizToPivotConverterUtil.applyCellsReferenceScopeFromViz(t.getColumnsScope(),i.getColumnsScope());e.OlapVizToPivotConverterUtil.applyCellsReferenceScopeFromViz(t.getRowsScope(),i.getRowsScope());let r=t.getScopedStyleNames().getIterator();while(r.hasNext()){let t=i.addNewScopedStyle();e.OlapVizToPivotConverterUtil.applyScopedStyleFromViz(n.getScopedStyle(r.next()),t);if(t.getPriority()<0&&i.getPriority()>-1){t.setPriority(i.getPriority())}}let l=t.getTuplesBefore().getIterator();while(l.hasNext()){e.OlapVizToPivotConverterUtil.applyInsertedTupleFromViz(l.next(),i.addNewTupleBefore())}l=t.getTuplesAfter().getIterator();while(l.hasNext()){e.OlapVizToPivotConverterUtil.applyInsertedTupleFromViz(l.next(),i.addNewTupleAfter())}},applyTableStyleFromViz:function(t,i){e.OlapVizToPivotConverterUtil.applyTableStyleFromVizExt(t,i,null)},applyTableStyleFromVizExt:function(t,i,n){let r=e.isNull(t)?null:t.getTableDefinition();if(e.notNull(t)&&t.getActiveRaw().resolveBooleanExtended(n,r,true)){i.setOverridePlaceholderForFormattedText(t.getOverridePlaceholderForFormattedTextRaw().resolveStringExtended(n,r));i.setOverrideText(t.getOverrideTextRaw().resolveStringExtended(n,r));i.setShowFormattedText(t.getShowFormattedTextRaw().resolveTriStateBooleanExtended(n,r));i.setFillColor(t.getFillColorRaw().resolveStringExtended(n,r));i.setFillAlpha(t.getFillAlphaRaw().resolveDoubleExtended(n,r,-1));e.OlapVizToPivotConverterUtil.transferStyledLine(i.getStyledLineTop(),t.getStyledLineTop(),n);e.OlapVizToPivotConverterUtil.transferStyledLine(i.getStyledLineBottom(),t.getStyledLineBottom(),n);e.OlapVizToPivotConverterUtil.transferStyledLine(i.getStyledLineLeft(),t.getStyledLineLeft(),n);e.OlapVizToPivotConverterUtil.transferStyledLine(i.getStyledLineRight(),t.getStyledLineRight(),n);e.XCollectionUtils.forEach(t.getCellTypeRestrictions(),t=>{e.OlapVizToPivotConverterUtil.applyCellTypeRestrictionFromViz(t,i.addNewCellTypeRestriction())});i.setBackgroundContent(t.getBackgroundContentRaw().resolveStringExtended(n,r));i.setBackgroundPatternType(e.OlapVizToPivotConverterUtil.getLinePatternTypeFromViz(t.getBackgroundPatternTypeRaw().getResolvedValueExtended(n,r)));i.setFontItalicExt(t.getFontItalicRaw().resolveTriStateBooleanExtended(n,r));i.setFontBoldExt(t.getFontBoldRaw().resolveTriStateBooleanExtended(n,r));i.setFontUnderlineExt(t.getFontUnderlineRaw().resolveTriStateBooleanExtended(n,r));i.setFontStrikeThroughExt(t.getFontStrikeThroughRaw().resolveTriStateBooleanExtended(n,r));i.setWrapExt(t.getWrapRaw().resolveTriStateBooleanExtended(n,r));i.setFontSize(t.getFontSizeRaw().resolveDoubleExtended(n,r,0));i.setFontFamily(t.getFontFamilyRaw().resolveStringExtended(n,r));i.setFontColor(t.getFontColorRaw().resolveStringExtended(n,r));i.setCellChartLineColor(t.getCellChartLineColorRaw().resolveStringExtended(n,r));i.setCellChartBarColor(t.getCellChartBarColorRaw().resolveStringExtended(n,r));i.setThresholdType(e.OlapVizToPivotConverterUtil.getAlertSymbolFromViz(t.getAlertSymbolRaw().getResolvedValueExtended(n,r)));i.setThresholdColor(t.getAlertColorRaw().resolveStringExtended(n,r));i.setVerticalAlignment(e.OlapToVisualizationConverterUtil.getVerticalAlignmentFromViz(t.getVerticalAlignmentRaw().getResolvedValueExtended(n,r)));i.setHorizontalAlignment(e.OlapToVisualizationConverterUtil.getHorizontalAlignmentFromViz(t.getHorizontalAlignmentRaw().getResolvedValueExtended(n,r)));i.setPriority(t.getPriority())}},applyVizStyleFromTable:function(t,i){if(e.notNull(i)){t.setOverridePlaceholderForFormattedText(i.getOverridePlaceholderForFormattedText());t.setOverrideText(i.getOverrideText());t.setShowFormattedText(i.isShowFormattedText());t.setFillColor(i.getFillColor());t.setFillAlpha(i.getFillAlpha());e.OlapVizToPivotConverterUtil.transferBackStyledLine(t.getStyledLineTop(),i.getStyledLineTop());e.OlapVizToPivotConverterUtil.transferBackStyledLine(t.getStyledLineBottom(),i.getStyledLineBottom());e.OlapVizToPivotConverterUtil.transferBackStyledLine(t.getStyledLineLeft(),i.getStyledLineLeft());e.OlapVizToPivotConverterUtil.transferBackStyledLine(t.getStyledLineRight(),i.getStyledLineRight());t.setBackgroundContent(i.getBackgroundContent());t.setBackgroundPatternType(e.OlapVizToPivotConverterUtil.getLinePatternTypeFromTable(i.getBackgroundPatternType()));t.setFontItalicExt(i.isFontItalicExt());t.setFontBoldExt(i.isFontBoldExt());t.setFontUnderlineExt(i.isFontUnderlineExt());t.setFontStrikeThroughExt(i.isFontStrikeThroughExt());t.setFontSize(i.getFontSize());t.setFontFamily(i.getFontFamily());t.setFontColor(i.getFontColor());t.setCellChartLineColor(i.getCellChartLineColor());t.setCellChartBarColor(i.getCellChartBarColor());t.setAlertSymbol(e.OlapVizToPivotConverterUtil.getThresholdTypeFromTable(i.getThresholdType()));t.getWrapRaw().setTriStateBoolean(i.getWrapExt());t.setAlertColor(i.getThresholdColor());t.setHorizontalAlignment(e.OlapToVisualizationConverterUtil.getHorizontalAlignmentFromTable(i.getHorizontalAlignment()));t.setVerticalAlignment(e.OlapToVisualizationConverterUtil.getVerticalAlignmentFromTable(i.getVerticalAlignment()));t.setPriority(i.getPriority())}},expandAndApplyDataPointStyle:function(t,i,n,r){e.OlapVizToPivotConverterUtil.applyDataPointStyleFromVizExt(t,i,r);let l=n.getValueSign();if(e.notNull(l)){i.setValueSign(l)}let o=n.getExceptionName();if(e.XStringUtils.isNotNullAndNotEmpty(o)){i.setExceptionName(o)}let s=n.getLevel();if(e.notNull(s)){i.setAlertLevelMin(s);i.setAlertLevelMax(s)}e.XCollectionUtils.forEach(n.getTags(),e=>{i.addTag(e)})},getAlertLevelFromViz:function(t){return e.isNull(t)?null:e.SacAlertLevel.getByLevelValue(t.getLevel())},getAlertSymbolFromViz:function(t){let i=null;if(e.notNull(t)){i=e.SacAlertSymbol.lookup(t.getName())}return i},getCellChartOrientationFromViz:function(t){return t===e.CellChartOrientation.VERTICAL?e.SacCellChartOrientation.VERTICAL:e.SacCellChartOrientation.HORIZONTAL},getCellChartTypeFromViz:function(t){if(t===e.CellChartType.BAR){return e.SacCellChartType.BAR}else if(t===e.CellChartType.VARIANCE_BAR){return e.SacCellChartType.VARIANCE_BAR}else if(t===e.CellChartType.PIN){return e.SacCellChartType.PIN}return null},getCellTypeFromViz:function(t){return e.isNull(t)?null:e.SacCellType.lookup(t.getName())},getLinePatternTypeFromTable:function(t){return e.isNull(t)?null:e.BackgroundPatternType.lookup(t.getName())},getLinePatternTypeFromViz:function(t){return e.isNull(t)?null:e.VisualizationBackgroundPatternType.lookup(t.getName())},getLineStyleFromTable:function(t){return e.isNull(t)?null:e.TableLineStyle.lookup(t.getName())},getLineStyleFromViz:function(t){return e.isNull(t)?null:e.SacTableLineStyle.lookup(t.getName())},getTableAxisTypeFromViz:function(t){if(t===e.AxisType.ROWS){return e.SacTableAxisType.ROWS}if(t===e.AxisType.COLUMNS){return e.SacTableAxisType.COLUMNS}return null},getTableMemberHeaderHandlingFromViz:function(t){let i=null;if(e.notNull(t)){i=e.SacTableMemberHeaderHandling.lookup(t.getName())}return i},getThresholdTypeFromTable:function(t){let i=null;if(e.notNull(t)){i=e.AlertSymbol.lookup(t.getName())}return i},getValueSignFromValue:function(t){let i=t.getValueException();let n=null;let r=t.getPlainValue();let l=e.isNull(r)?null:r.getValueType();if(i===e.ValueException.UNDEFINED||i===e.ValueException.MIXED_CURRENCIES_OR_UNITS||i===e.ValueException.UNDEFINED_NOP){n=e.ValueSign.UNDEFINED}else if(i!==e.ValueException.NORMAL&&i!==e.ValueException.ZERO){n=e.ValueSign.UNBOOKED}else{if(e.notNull(l)&&l.isNumber()){let t=e.XValueUtil.getDouble(r,false,true);if(i===e.ValueException.ZERO){n=e.ValueSign.ZERO}else if(t>0){n=e.ValueSign.POSITIVE}else if(t<0){n=e.ValueSign.NEGATIVE}}else{n=e.ValueSign.NORMAL}}return n},transferBackStyledLine:function(t,i){t.setLeftPadding(i.getLeftPadding());t.setRightPadding(i.getRightPadding());t.setTopPadding(i.getTopPadding());t.setBottomPadding(i.getBottomPadding());t.setColor(i.getColor());t.setWidth(i.getWidth());t.setPatternWidth(i.getPatternWidth());t.setPatternBackground(i.getPatternBackground());t.setPatternColor(i.getPatternColor());t.setPatternBorderColor(i.getPatternBorderColor());t.setPatternType(e.OlapVizToPivotConverterUtil.getLinePatternTypeFromTable(i.getPatternType()));t.setLineStyle(e.OlapVizToPivotConverterUtil.getLineStyleFromTable(i.getLineStyle()))},transferStyledLine:function(t,i,n){let r=i.getTableDefinition();t.setLeftPadding(i.getLeftPaddingRaw().resolveDoubleExtended(n,r,-1));t.setRightPadding(i.getRightPaddingRaw().resolveDoubleExtended(n,r,-1));t.setTopPadding(i.getTopPaddingRaw().resolveDoubleExtended(n,r,-1));t.setBottomPadding(i.getBottomPaddingRaw().resolveDoubleExtended(n,r,-1));t.setColor(i.getColorRaw().resolveStringExtended(n,r));t.setWidth(i.getWidthRaw().resolveDoubleExtended(n,r,-1));t.setPatternWidth(i.getPatternWidthRaw().resolveDoubleExtended(n,r,0));t.setPatternBackground(i.getPatternBackgroundRaw().resolveStringExtended(n,r));t.setPatternColor(i.getPatternColorRaw().resolveStringExtended(n,r));t.setPatternBorderColor(i.getPatternBorderColorRaw().resolveStringExtended(n,r));t.setPatternType(e.OlapVizToPivotConverterUtil.getLinePatternTypeFromViz(i.getPatternTypeRaw().getResolvedValueExtended(n,r)));t.setLineStyle(e.OlapVizToPivotConverterUtil.getLineStyleFromViz(i.getLineStyleRaw().getResolvedValueExtended(n,r)))}};e.OlapToVisualizationConverterUtil={applyDataSectionInfoFromElement:function(t,i){let n=e.RscDataSectionInfoTag.create(i);let r=i.getFieldReference().getDimensionIndex();t.addGroupLevelIndex(r);t.add(n);return r},applyDataSectionInfoFromTuple:function(t,i){let n=i.getDataPath();e.OlapToVisualizationConverterUtil.applyDataSectionInfoFromTupleToPath(t,n)},applyDataSectionInfoFromTupleToPath:function(t,i){if(e.notNull(t)){let n=t.getValues().getIterator();let r=-1;while(n.hasNext()){let t=n.next();let l=t.getModelReference().getModelComponentType();if(l===e.OlapComponentType.FIELD){let n=e.OlapToVisualizationConverterUtil.applyDataSectionInfoFromElement(i,t);r=e.XMath.max(n,r)}}let l=i.addNewPathElement();l.setGroupLevel(-1);l.setReversedGroupLevel(-r-3);l.setGroupLevelStart(t.getTupleIndex()===0);l.setGroupLevelEnd(t.getTupleIndex()===t.getAxisReference().getTuplesTotalCount()-1);l.setExactSectionLevel(true);i.applyBandInformation()}},applyDataSectionInfoFromViz:function(t,i){let n=null;let r=t.getField();if(e.isNull(r)){let i=t.getAttribute();let l=t.getDimension();let o=t.getDimensionType();let s=t.getPresentationType();let a=t.getSemanticType();if(e.isNull(l)&&e.notNull(o)){l=t.getQueryModel().getDimensionByType(o)}if(e.notNull(l)){n=l.getName()}if(e.notNull(s)){if(e.notNull(i)){n=i.getName();if(s===e.PresentationType.ACTIVE_KEY){r=i.getKeyField()}else if(s===e.PresentationType.ACTIVE_TEXT){r=i.getTextField()}else if(s===e.PresentationType.ACTIVE_DISPLAY_KEY){r=i.getHierarchyTextField()}else{r=i.getFieldByPresentationType(s)}}else if(e.notNull(l)){if(s===e.PresentationType.ACTIVE_KEY){r=l.getKeyField()}else if(s===e.PresentationType.ACTIVE_TEXT){r=l.getTextField()}else if(s===e.PresentationType.ACTIVE_DISPLAY_KEY){r=l.getHierarchyTextField()}else{r=l.getFieldByPresentationType(s)}}}else if(e.notNull(l)&&e.XStringUtils.isNotNullAndNotEmpty(a)){r=l.getFieldBySemanticType(a)}}if(e.notNull(r)){n=r.getName()}i.setGroupName(n);i.setSectionLevelName(t.getHierarchyLevelName());i.clearSectionNodeNames();e.XCollectionUtils.forEach(t.getMemberNames(),e=>{i.addSectionNodeName(e)});i.setGroupLevel(t.getAxisLevel());i.setSectionLevel(t.getHierarchyLevel());i.setExactSectionLevel(t.isExactHierarchyLevel());i.setIncludeHeaderBand(t.isIncludeHeaderBand());i.setIncludeTotalsBand(t.isIncludeTotalsBand());i.setIncludeInnerBands(t.isIncludeSubDrills());i.setMatchesExpanded(t.isMatchesExpanded());if(t.getHierarchyAlignment()===e.Alignment.CHILDREN_ABOVE_PARENT){i.setMatchesHierarchyBottomUp(e.TriStateBool._TRUE)}else if(t.getHierarchyAlignment()===e.Alignment.CHILDREN_BELOW_PARENT){i.setMatchesHierarchyBottomUp(e.TriStateBool._FALSE)}i.setMatchesLeaves(t.isMatchesLeaves());i.setMatchesTotals(t.isMatchesTotals())},applyPathInfoFromViz:function(t,i){i.setMatchingGroupSectionStart(t.isMatchingDimensionSectionStart());i.setMatchingGroupSectionEnd(t.isMatchingDimensionSectionEnd());i.setMatchingExactLevelStart(t.isMatchingHierarchyLevelStart());i.setMatchingExactLevelEnd(t.isMatchingHierarchyLevelEnd());e.XCollectionUtils.forEach(t,t=>{e.OlapToVisualizationConverterUtil.applyDataSectionInfoFromViz(t,i.addNewPathElement())});i.indexLevels()},complementExceptionInformation:function(t,i,n){if(e.XCollectionUtils.hasElements(n)){e.XCollectionUtils.forEach(i.getPathElements(),i=>{if(e.XStream.of(n).anyMatch(e=>i.matches(e))){let e=t.addNewDataSectionInfoTag();e.setGroupName(i.getGroupName());e.setSectionNodeName(i.getSectionNodeName())}})}},getHorizontalAlignmentFromTable:function(t){let i=null;if(t===e.SacVisualizationHorizontalAlignment.LEFT){i=e.CellAlignmentHorizontal.LEFT}else if(t===e.SacVisualizationHorizontalAlignment.CENTER){i=e.CellAlignmentHorizontal.CENTER}else if(t===e.SacVisualizationHorizontalAlignment.RIGHT){i=e.CellAlignmentHorizontal.RIGHT}else if(t===e.SacVisualizationHorizontalAlignment.INHERIT){i=e.CellAlignmentHorizontal.INHERIT}return i},getHorizontalAlignmentFromViz:function(t){let i=null;if(t===e.CellAlignmentHorizontal.LEFT){i=e.SacVisualizationHorizontalAlignment.LEFT}else if(t===e.CellAlignmentHorizontal.CENTER){i=e.SacVisualizationHorizontalAlignment.CENTER}else if(t===e.CellAlignmentHorizontal.RIGHT){i=e.SacVisualizationHorizontalAlignment.RIGHT}else if(t===e.CellAlignmentHorizontal.INHERIT){i=e.SacVisualizationHorizontalAlignment.INHERIT}return i},getLayoutDirectionFromViz:function(t){return e.SacLayoutDirection.lookup(e.DfNameObject.getSafeName(t))},getValueSignFromViz:function(t){let i=null;if(e.notNull(t)){if(t===e.ValueSign.NORMAL){i=e.SacValueSign.NORMAL}else if(t===e.ValueSign.NEGATIVE){i=e.SacValueSign.NEGATIVE}else if(t===e.ValueSign.ZERO){i=e.SacValueSign.ZERO}else if(t===e.ValueSign.POSITIVE){i=e.SacValueSign.POSITIVE}else if(t===e.ValueSign.NULL_VALUE){i=e.SacValueSign.NULL_VALUE}else if(t===e.ValueSign.UNBOOKED){i=e.SacValueSign.UNBOOKED}else if(t===e.ValueSign.UNDEFINED){i=e.SacValueSign.UNDEFINED}}return i},getVerticalAlignmentFromTable:function(t){let i=null;if(t===e.SacVisualizationVerticalAlignment.TOP){i=e.CellAlignmentVertical.TOP}else if(t===e.SacVisualizationVerticalAlignment.MIDDLE){i=e.CellAlignmentVertical.MIDDLE}else if(t===e.SacVisualizationVerticalAlignment.BOTTOM){i=e.CellAlignmentVertical.BOTTOM}else if(t===e.SacVisualizationVerticalAlignment.INHERIT){i=e.CellAlignmentVertical.INHERIT}return i},getVerticalAlignmentFromViz:function(t){let i=null;if(t===e.CellAlignmentVertical.TOP){i=e.SacVisualizationVerticalAlignment.TOP}else if(t===e.CellAlignmentVertical.MIDDLE){i=e.SacVisualizationVerticalAlignment.MIDDLE}else if(t===e.CellAlignmentVertical.BOTTOM){i=e.SacVisualizationVerticalAlignment.BOTTOM}else if(t===e.CellAlignmentVertical.INHERIT){i=e.SacVisualizationVerticalAlignment.INHERIT}return i}};e.GoogleChartBar=function(){};e.GoogleChartBar.prototype=new e.GoogleChart;e.GoogleChartBar.prototype._ff_c="GoogleChartBar";e.GoogleChartBar.create=function(){return new e.GoogleChartBar};e.GoogleChartBar.prototype.addChartSpecificOptions=function(t,i){let n=i.getStructureByKey(e.VizDefConstants.K_CHART);let r=n.getStringByKey(e.VizDefConstants.K_TYPE);t.putBoolean(e.GoogleConstants.K_STACKED,e.XString.isEqual(r,e.VizDefConstants.V_STACKED_BAR));let l=t.putNewStructure(e.GoogleConstants.K_BAR);l.putString(e.GoogleConstants.K_GROUP_WIDTH,"50%");this.setAxisStyle(t.putNewStructure(e.GoogleConstants.K_VERTICAL_AXIS),i,e.VizDefConstants.K_CATEGORY_AXIS,true);this.setAxisStyle(t.putNewStructure(e.GoogleConstants.K_HORIZONTAL_AXIS),i,e.VizDefConstants.K_VALUE_AXIS,false)};e.GoogleChartBar.prototype.getChartName=function(){return"BarChart"};e.GoogleChartColumn=function(){};e.GoogleChartColumn.prototype=new e.GoogleChart;e.GoogleChartColumn.prototype._ff_c="GoogleChartColumn";e.GoogleChartColumn.create=function(){return new e.GoogleChartColumn};e.GoogleChartColumn.prototype.addChartSpecificOptions=function(t,i){let n=i.getStructureByKey(e.VizDefConstants.K_CHART);let r=n.getStringByKey(e.VizDefConstants.K_TYPE);t.putBoolean(e.GoogleConstants.K_STACKED,e.XString.isEqual(r,e.VizDefConstants.V_STACKED_BAR));let l=t.putNewStructure(e.GoogleConstants.K_BAR);l.putString(e.GoogleConstants.K_GROUP_WIDTH,"50%");this.setAxisStyle(t.putNewStructure(e.GoogleConstants.K_VERTICAL_AXIS),i,e.VizDefConstants.K_VALUE_AXIS,false);this.setAxisStyle(t.putNewStructure(e.GoogleConstants.K_HORIZONTAL_AXIS),i,e.VizDefConstants.K_CATEGORY_AXIS,true)};e.GoogleChartColumn.prototype.getChartName=function(){return"ColumnChart"};e.GoogleChartLine=function(){};e.GoogleChartLine.prototype=new e.GoogleChart;e.GoogleChartLine.prototype._ff_c="GoogleChartLine";e.GoogleChartLine.POINT_SIZE=3;e.GoogleChartLine.create=function(){return new e.GoogleChartLine};e.GoogleChartLine.prototype.addChartSpecificOptions=function(t,i){t.putInteger(e.GoogleConstants.K_POINT_SIZE,e.GoogleChartLine.POINT_SIZE);this.setAxisStyle(t.putNewStructure(e.GoogleConstants.K_VERTICAL_AXIS),i,e.VizDefConstants.K_VALUE_AXIS,false);this.setAxisStyle(t.putNewStructure(e.GoogleConstants.K_HORIZONTAL_AXIS),i,e.VizDefConstants.K_CATEGORY_AXIS,true)};e.GoogleChartLine.prototype.getChartName=function(){return"LineChart"};e.RsHiChartCovariationHelper=function(){};e.RsHiChartCovariationHelper.prototype=new e.RsHiChartRenderHelper;e.RsHiChartCovariationHelper.prototype._ff_c="RsHiChartCovariationHelper";e.RsHiChartCovariationHelper.prototype.m_categoriesFormattedList=null;e.RsHiChartCovariationHelper.prototype.m_categoriesList=null;e.RsHiChartCovariationHelper.prototype.m_categoryLabels=null;e.RsHiChartCovariationHelper.prototype.m_colorList=null;e.RsHiChartCovariationHelper.prototype.m_tooltipList=null;e.RsHiChartCovariationHelper.prototype.m_tooltipListFormatted=null;e.RsHiChartCovariationHelper.prototype.m_tooltipValueMeasures=null;e.RsHiChartCovariationHelper.prototype.m_xColors=null;e.RsHiChartCovariationHelper.prototype.m_xList=null;e.RsHiChartCovariationHelper.prototype.m_xListFormatted=null;e.RsHiChartCovariationHelper.prototype.m_xMeasures=null;e.RsHiChartCovariationHelper.prototype.m_xPatterns=null;e.RsHiChartCovariationHelper.prototype.m_yColors=null;e.RsHiChartCovariationHelper.prototype.m_yList=null;e.RsHiChartCovariationHelper.prototype.m_yListFormatted=null;e.RsHiChartCovariationHelper.prototype.m_yMeasures=null;e.RsHiChartCovariationHelper.prototype.m_yPatterns=null;e.RsHiChartCovariationHelper.prototype.m_zColors=null;e.RsHiChartCovariationHelper.prototype.m_zList=null;e.RsHiChartCovariationHelper.prototype.m_zListFormatted=null;e.RsHiChartCovariationHelper.prototype.m_zMeasures=null;e.RsHiChartCovariationHelper.prototype.m_zPatterns=null;e.RsHiChartCovariationHelper.prototype.addToolTipsToSeries=function(t,i,n){if(e.XCollectionUtils.hasElements(this.m_tooltipValueMeasures)){let r=this.m_tooltipValueMeasures.size();for(let l=0;l<r;l++){t.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_HEADER,e.XInteger.convertToString(l)),this.m_tooltipValueMeasures.get(l));t.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_FORMATTED,e.XInteger.convertToString(l)),this.m_tooltipListFormatted.getListAt(i*r+l).getStringAt(n))}}};e.RsHiChartCovariationHelper.prototype.addValueToList=function(t,i,n,r,l,o,s,a){let u=t.getDataCell(i,n);let p=u.getValueType();if(p===e.XValueType.DOUBLE||p===e.XValueType.DECIMAL_FLOAT){if(u.getXValue()===null){r.addDouble(0)}else{r.addDouble(u.getDouble())}let e=s.getFormattedValue(o,a,u);l.addString(e)}};e.RsHiChartCovariationHelper.prototype.decorateToolTip=function(e){};e.RsHiChartCovariationHelper.prototype.getCategoriesFormattedList=function(){return this.m_categoriesFormattedList};e.RsHiChartCovariationHelper.prototype.getCategoriesList=function(){return this.m_categoriesList};e.RsHiChartCovariationHelper.prototype.getCategoryLabels=function(){return this.m_categoryLabels};e.RsHiChartCovariationHelper.prototype.getColorList=function(){return this.m_colorList};e.RsHiChartCovariationHelper.prototype.getXColors=function(){return this.m_xColors};e.RsHiChartCovariationHelper.prototype.getXList=function(){return this.m_xList};e.RsHiChartCovariationHelper.prototype.getXListFormatted=function(){return this.m_xListFormatted};e.RsHiChartCovariationHelper.prototype.getXListFormattedRemapped=function(){if(e.XCollectionUtils.hasElements(this.m_xListFormatted)){return this.m_xListFormatted.getListAt(0)}return null};e.RsHiChartCovariationHelper.prototype.getXListRemapped=function(){if(e.XCollectionUtils.hasElements(this.m_xList)){return this.m_xList.getListAt(0)}return null};e.RsHiChartCovariationHelper.prototype.getXMeasures=function(){return this.m_xMeasures};e.RsHiChartCovariationHelper.prototype.getXPatterns=function(){return this.m_xPatterns};e.RsHiChartCovariationHelper.prototype.getYColors=function(){return this.m_yColors};e.RsHiChartCovariationHelper.prototype.getYList=function(){return this.m_yList};e.RsHiChartCovariationHelper.prototype.getYListFormatted=function(){return this.m_yListFormatted};e.RsHiChartCovariationHelper.prototype.getYListFormattedRemapped=function(){if(e.XCollectionUtils.hasElements(this.m_yListFormatted)){return this.m_yListFormatted.getListAt(0)}return this.getXListFormattedRemapped()};e.RsHiChartCovariationHelper.prototype.getYListRemapped=function(){if(e.XCollectionUtils.hasElements(this.m_yList)){return this.m_yList.getListAt(0)}return this.getXListRemapped()};e.RsHiChartCovariationHelper.prototype.getYMeasures=function(){return this.m_yMeasures};e.RsHiChartCovariationHelper.prototype.getYPatterns=function(){return this.m_yPatterns};e.RsHiChartCovariationHelper.prototype.getZColors=function(){return this.m_zColors};e.RsHiChartCovariationHelper.prototype.getZList=function(){return this.m_zList};e.RsHiChartCovariationHelper.prototype.getZListFormatted=function(){return this.m_zListFormatted};e.RsHiChartCovariationHelper.prototype.getZListFormattedRemapped=function(){if(e.XCollectionUtils.hasElements(this.m_zListFormatted)){return this.m_zListFormatted.getListAt(0)}return this.getYListFormattedRemapped()};e.RsHiChartCovariationHelper.prototype.getZListRemapped=function(){if(e.XCollectionUtils.hasElements(this.m_zList)){return this.m_zList.getListAt(0)}return this.getYListRemapped()};e.RsHiChartCovariationHelper.prototype.getZMeasures=function(){return this.m_zMeasures};e.RsHiChartCovariationHelper.prototype.getZPatterns=function(){return this.m_zPatterns};e.RsHiChartCovariationHelper.prototype.readResultSetData=function(t,i,n){let r=this.getChartData();let l=true;if(n.getAvailableDataCellCount()>0){this.m_xMeasures=e.XList.create();this.m_yMeasures=e.XList.create();this.m_zMeasures=e.XList.create();this.m_xPatterns=e.XList.create();this.m_yPatterns=e.XList.create();this.m_zPatterns=e.XList.create();this.m_xColors=e.XList.create();this.m_yColors=e.XList.create();this.m_zColors=e.XList.create();let o=e.XList.create();if(e.XStringUtils.isNotNullAndNotEmpty(this.getXFeed())){o.add(this.getXFeed())}if(e.XStringUtils.isNotNullAndNotEmpty(this.getYFeed())){o.add(this.getYFeed())}if(e.XStringUtils.isNotNullAndNotEmpty(this.getZFeed())){o.add(this.getZFeed())}this.m_tooltipValueMeasures=e.XList.create();o.add(e.VizDefConstants.K_TOOLTIP_VALUE_AXIS);this.m_colorList=t.getPrettyNamesForFeed(true,!l,e.VizDefConstants.K_COLOR);this.m_categoriesList=i.getPrettyNames(true,!l);this.m_categoriesFormattedList=i.getCategories(true,!l,e.VizDefConstants.K_CATEGORY_AXIS);this.m_categoryLabels=i.getLabels(true,!l,true);if(!e.XCollectionUtils.hasElements(this.m_categoriesList)){this.m_categoriesList=e.XList.create();this.m_categoriesList.add("")}this.m_xList=e.PrFactory.createList();this.m_yList=e.PrFactory.createList();this.m_zList=e.PrFactory.createList();this.m_tooltipList=e.PrFactory.createList();this.m_xListFormatted=e.PrFactory.createList();this.m_yListFormatted=e.PrFactory.createList();this.m_zListFormatted=e.PrFactory.createList();this.m_tooltipListFormatted=e.PrFactory.createList();let s;let a;let u;let p=e.XList.create();p.add(e.VizDefConstants.K_CATEGORY_AXIS);p.add(e.VizDefConstants.K_COLOR);let c=t.getIndicesByFeedOrder(o);for(let r=0;r<c.size();r++){let o=c.get(r).getInteger();let p=t.getTupleAt(o);if(p.isSelectedByString(this.getXFeed())){let e=p.getPrettyTextForFeed(this.getXFeed());if(!this.m_xMeasures.contains(e)){this.m_xMeasures.add(e);this.m_xPatterns.add(p.getPattern());this.m_xColors.add(p.getColor())}s=this.m_xList.addNewList();a=this.m_xListFormatted.addNewList();u=this.getXFeed()}else if(this.getYFeed()!==null&&p.isSelectedByString(this.getYFeed())){let e=p.getPrettyTextForFeed(this.getYFeed());if(!this.m_yMeasures.contains(e)){this.m_yMeasures.add(e);this.m_yPatterns.add(p.getPattern());this.m_yColors.add(p.getColor())}s=this.m_yList.addNewList();a=this.m_yListFormatted.addNewList();u=this.getYFeed()}else if(this.getZFeed()!==null&&p.isSelectedByString(this.getZFeed())){let e=p.getPrettyTextForFeed(this.getZFeed());if(!this.m_zMeasures.contains(e)){this.m_zMeasures.add(e);this.m_zPatterns.add(p.getPattern());this.m_zColors.add(p.getColor())}s=this.m_zList.addNewList();a=this.m_zListFormatted.addNewList();u=this.getZFeed()}else if(p.isSelectedByString(e.VizDefConstants.K_TOOLTIP_VALUE_AXIS)){let t=p.getPrettyTextForFeed(e.VizDefConstants.K_TOOLTIP_VALUE_AXIS);if(!this.m_tooltipValueMeasures.contains(t)){this.m_tooltipValueMeasures.add(t)}s=this.m_tooltipList.addNewList();a=this.m_tooltipListFormatted.addNewList();u=""}else{continue}if(i.getTuplesCount()>0){for(let e=0;e<i.getTuplesCount();e++){if(l&&i.getTupleAt(e).isTotal()){continue}this.addValueToList(n,o,e,s,a,u,t,p)}}else{this.addValueToList(n,o,0,s,a,u,t,p)}}let g=e.XStringBuffer.create();g.append("<b>{series.name}</b><br/>");this.decorateToolTip(g);for(let t=0;t<this.m_tooltipListFormatted.size();t++){g.append("<b>{point.tHeader");g.append(e.XInteger.convertToString(t));g.append("}</b>  {point.tFormatted");g.append(e.XInteger.convertToString(t));g.append("}<br/>")}g.append("{point.errorRange}");let m=r.putNewStructure(e.VizDefConstants.K_TOOLTIP);m.putString(e.VizDefConstants.K_POINT_FORMAT,g.toString());m.putString(e.VizDefConstants.K_HEADER_FORMAT,"")}this.setShowLegend(e.XCollectionUtils.hasElements(this.getXList()))};e.RsHiChartHeatmapHelper=function(){};e.RsHiChartHeatmapHelper.prototype=new e.RsHiChartRenderHelper;e.RsHiChartHeatmapHelper.prototype._ff_c="RsHiChartHeatmapHelper";e.RsHiChartHeatmapHelper.prototype.finishRendering=function(){e.RsHiChartVizUtilsHeatmap.rendrerHeatmap(this.getChartData(),this.getChartType(),this.getVizDef(),this.getGlobalDef())};e.RsHiChartHeatmapHelper.prototype.isShowLegend=function(){return false};e.RsHiChartHeatmapHelper.prototype.prepareRendering=function(){};e.RsHiChartHeatmapHelper.prototype.readResultSetData=function(t,i,n){let r=this.getChartData();let l=e.XList.create();let o=r.putNewStructure(e.VizDefConstants.K_LANG);if(n.getAvailableDataCellCount()>0){let o=true;let s=r.putNewList(e.VizDefConstants.K_X_AXIS);let a=r.putNewList(e.VizDefConstants.K_Y_AXIS);let u=s.addNewStructure();let p=a.addNewStructure();let c=p.putNewList(e.VizDefConstants.K_CATEGORIES);let g=u.putNewList(e.VizDefConstants.K_CATEGORIES);let m=r.putNewList(e.VizDefConstants.K_SERIES);let f=m.addNewStructure();let C=f.putNewStructure(e.VizDefConstants.K_DATA_LABELS);C.putString(e.VizDefConstants.K_POINT_FORMAT,"{point.valueFormatted}");let d=f.putNewList(e.VizDefConstants.K_DATA);let y=e.XStringBuffer.create();let h=e.XList.create();h.add(e.VizDefConstants.K_COLOR);let _=e.XList.create();y.append("<b>{point.xCategory} / {point.yCategory}</b><br/><b>{point.series.name}</b>:  {point.valueFormatted}<br/>");let T=t.getPrettyNamesForFeed(true,!o,e.VizDefConstants.K_CATEGORY_AXIS2).getIterator();while(T.hasNext()){g.addString(T.next())}let S=e.XCollectionUtils.hasElements(g)&&g.size()>1;let R=i.getPrettyNamesForFeed(true,!o,e.VizDefConstants.K_CATEGORY_AXIS).getIterator();let D=t.getPrettyNamesForFeed(true,false,e.VizDefConstants.K_TOOLTIP_VALUE_AXIS);for(let t=0;t<D.size();t++){y.append("<b>{point.tHeader");y.append(e.XInteger.convertToString(t));y.append("}</b>:  {point.tFormatted");y.append(e.XInteger.convertToString(t));y.append("}<br/>")}while(R.hasNext()){c.addString(R.next())}if(g.isEmpty()){g.addString("")}if(c.isEmpty()){c.addString("")}let A=0;let E=t.getIndicesByFeedOrder(h);for(let r=0;r<E.size();r++){let s=E.get(r).getInteger();let a=t.getTupleAt(s);if(!a.isSelectedByString(e.VizDefConstants.K_COLOR)){continue}if(o&&t.getTupleAt(s).isTotal()){continue}_.add(a.getPrettyTextForFeed(e.VizDefConstants.K_COLOR));let u=a.getMemberKeys();let p=null;let m=null;if(e.XCollectionUtils.hasElements(u)){p=t.getMatchingTupleIndicesForMemberNameAndFeed(u,e.VizDefConstants.K_TOOLTIP_VALUE_AXIS)}let f=0;for(let r=0;r<i.getTuplesCount();r++){if(!i.getTupleAt(r).isSelectedByString(e.VizDefConstants.K_CATEGORY_AXIS)){continue}if(e.XCollectionUtils.hasElements(p)){m=e.XList.create();for(let i=0;i<p.size();i++){let l=p.get(i).getInteger();m.add(t.getFormattedValue(e.VizDefConstants.K_COLOR,t.getTupleAt(l),n.getDataCell(l,r)))}}let a=n.getDataCell(s,r);let u=e.PrFactory.createStructure();let C=a.getXValue();if(!o||!i.getTupleAt(r).isTotal()){if(e.notNull(C)){u.putInteger(e.VizDefConstants.K_X,S?A:f);u.putInteger(e.VizDefConstants.K_Y,S?f:A);u.putDouble(e.VizDefConstants.K_VALUE,a.getDouble());u.putString(e.VizDefConstants.K_VALUE_FORMATTED,a.getFormattedValue());u.putString(e.VizDefConstants.K_X_CATEGORY,e.XCollectionUtils.hasElements(g)&&A<g.size()?g.getStringAt(A):"");u.putString(e.VizDefConstants.K_Y_CATEGORY,e.XCollectionUtils.hasElements(c)&&f<c.size()?c.getStringAt(f):"");if(e.XCollectionUtils.hasElements(D)){for(let t=0;t<D.size();t++){u.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_HEADER,e.XInteger.convertToString(t)),D.get(t))}}if(e.XCollectionUtils.hasElements(m)){for(let t=0;t<m.size();t++){u.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_FORMATTED,e.XInteger.convertToString(t)),m.get(t))}}d.add(u);l.add(e.XDoubleValue.create(a.getDouble()))}}f++}A++}if(!S){p.put(e.VizDefConstants.K_CATEGORIES,g);u.put(e.VizDefConstants.K_CATEGORIES,c)}if(e.XCollectionUtils.hasElements(_)){f.putString(e.VizDefConstants.K_NAME,_.get(0))}let V=e.XDoubleValue.create(1);if(l.size()>1){l.sortByComparator(new e.XComparatorDouble);V=l.get(l.size()-1)}f.putInteger(e.VizDefConstants.K_BORDER_WIDTH,2);f.putString(e.VizDefConstants.K_BORDER_COLOR,"white");if(e.XCollectionUtils.hasElements(l)){r.putDouble(e.VizDefConstants.K_MIN_ELEMENT,l.get(0).getDouble());r.putDouble(e.VizDefConstants.K_MAX_ELEMENT,V.getDouble())}let N=r.putNewStructure(e.VizDefConstants.K_TOOLTIP);N.putString(e.VizDefConstants.K_POINT_FORMAT,y.toString());N.putString(e.VizDefConstants.K_HEADER_FORMAT,"");e.RsHiChartVizUtilsHeatmap.rendrerHeatmap(r,this.getChartType(),this.getVizDef(),this.getGlobalDef())}else{r.putBoolean(e.VizDefConstants.K_FULL_SCREEN_ENABLED,false);o.putString(e.VizDefConstants.K_NO_DATA,"FireFly Resultset is empty.")}};e.RsHiChartSeriesHelper=function(){};e.RsHiChartSeriesHelper.prototype=new e.RsHiChartRenderHelper;e.RsHiChartSeriesHelper.prototype._ff_c="RsHiChartSeriesHelper";e.RsHiChartSeriesHelper.X_LIMIT=5;e.RsHiChartSeriesHelper.prototype.m_chartWidth=0;e.RsHiChartSeriesHelper.prototype.m_hasVariance=false;e.RsHiChartSeriesHelper.prototype.m_maxYValue=0;e.RsHiChartSeriesHelper.prototype.m_widthScale=0;e.RsHiChartSeriesHelper.prototype.getChartWidth=function(){return this.m_chartWidth};e.RsHiChartSeriesHelper.prototype.getMaxYValue=function(){return this.m_maxYValue};e.RsHiChartSeriesHelper.prototype.getWidthScale=function(){return this.m_widthScale};e.RsHiChartSeriesHelper.prototype.isCombinationChart=function(){return e.XStringUtils.isNotNullAndNotEmpty(this.getSecondChart())};e.RsHiChartSeriesHelper.prototype.isHasVariance=function(){return this.m_hasVariance};e.RsHiChartSeriesHelper.prototype.isTimeseries=function(){return false};e.RsHiChartSeriesHelper.prototype.reiterateResultSet=function(t,i,n){let r=this.getChartData();let l=!n.getQueryModel().getRowsAxis().isTotalsVisible();let o=t.hasTupleForFeed(e.VizDefConstants.K_VALUE_AXIS2);let s=r.putNewList(e.VizDefConstants.K_Y_AXIS);let a=s.addNewStructure();let u;let p;let c=e.PrFactory.createStructure();c=r.getStructureByKey(e.VizDefConstants.K_PLOT_OPTIONS);let g=e.VizDefConstants.K_TRANSPARENT;if(r.getListByKey(e.VizDefConstants.K_COLORS)!==null){if(r.getListByKey(e.VizDefConstants.K_COLORS).size()>0){g=r.getListByKey(e.VizDefConstants.K_COLORS).getStringAt(0)}}if(e.isNull(c)){c=r.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS)}let m=r.getListByKey(e.VizDefConstants.K_SERIES);let f=null;let C=0;if(this.isTimeseries()){u=r.putNewList(e.VizDefConstants.K_X_AXIS);p=u.addNewStructure();p.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_DATE_TIME)}else{u=r.getListByKey(e.VizDefConstants.K_X_AXIS);if(e.isNull(u)){u=r.putNewList(e.VizDefConstants.K_X_AXIS)}p=u.getStructureAt(0);if(e.isNull(p)){p=u.addNewStructure()}}p.putInteger(e.VizDefConstants.K_MIN,0);let d=this.getChartWidth();let y=this.getChartData().getStructureByKey(e.VizDefConstants.K_SCROLL_BAR);if(e.isNull(y)){y=this.getChartData().putNewStructure(e.VizDefConstants.K_SCROLL_BAR)}if(d>e.RsHiChartSeriesHelper.X_LIMIT){p.putInteger(e.VizDefConstants.K_MAX,e.RsHiChartSeriesHelper.X_LIMIT)}else{y.putBoolean(e.VizDefConstants.K_ENABLED,false);p.putInteger(e.VizDefConstants.K_MAX,d-1)}if(this.getStackingType()===null||e.ChartStackingType.NONE.isEqualTo(e.ChartStackingType.lookup(this.getStackingType()))){a.putDouble(e.VizDefConstants.K_MAX,this.getMaxYValue())}let h=null;if(o){let i=t.getPrettyNamesForFeed(true,!l,e.VizDefConstants.K_VALUE_AXIS2);let n=e.XCollectionUtils.join(i,",");h=s.addNewStructure();e.RsHiChartVizUtilsSimple.plotOptionChart(h,this.getSecondChart(),null,c,1,g,n);h.putBoolean(e.VizDefConstants.K_OPPOSITE,true);if(this.isHasVariance()){if(this.isInverted()){h.putString(e.VizDefConstants.K_WIDTH,"50%")}else{h.putString(e.VizDefConstants.K_WIDTH,"50%");a.putString(e.VizDefConstants.V_POSITION_TOP,"50%")}}e.RsHiChartVizUtilsSimple.dataLabelAlignment(h,this.getSecondChart(),t.getDecimalPlaces(e.VizDefConstants.K_VALUE_AXIS2),false)}let _;let T;let S=false;let R=null;if(this.getVizDef()!==null){R=this.getVizDef().getStructureByKey(e.VizDefConstants.K_CHART).getStructureByKey(e.VizDefConstants.K_PROPERTIES);if(e.notNull(R)){let r=R.getStructureByKey(e.VizDefConstants.K_CATEGORY_AXIS);if(e.notNull(r)&&!this.isPolar()){p=e.RsHiChartUtils.axisPloter(r,p,this.getChartType(),true)}let l=R.getStructureByKey(e.VizDefConstants.K_VALUE_AXIS);if(e.notNull(l)&&!this.isPolar()){a=e.RsHiChartUtils.axisPloter(l,a,this.getChartType(),false)}e.RsHiChartVizUtilsSimple.addReferenceLine(this.getVizDef(),a,h,t,i,n)}}if(this.isHasVariance()){let i=s.addNewStructure();if(this.isInverted()){a.putString(e.VizDefConstants.K_WIDTH,"50%");i.putString(e.VizDefConstants.K_WIDTH,"50%");i.putString(e.VizDefConstants.V_LEFT,"50%")}else{a.putString(e.VizDefConstants.K_HEIGHT,"50%");i.putString(e.VizDefConstants.K_HEIGHT,"50%");a.putString(e.VizDefConstants.V_POSITION_TOP,"50%")}if(e.notNull(R)){let t=R.getStructureByKey(e.VizDefConstants.K_VALUE_AXIS);if(e.notNull(t)){e.RsHiChartUtils.axisPloter(t,i,this.getChartType(),false)}}let n=t.getPrettyNamesForFeed(true,!l,e.VizDefConstants.K_VARIANCE);let r=e.XCollectionUtils.join(n,",");e.RsHiChartVizUtilsSimple.plotOptionChart(i,this.getChartType(),null,c,this.isCombinationChart()?2:1,g,r)}e.RsHiChartVizUtilsSimple.legendStyler(r);if(S){for(let t=0;t<m.size();t++){e.RsHiChartVizUtilsSimple.plotOptionChart(a,this.getChartType(),this.getStackingType(),c,0,g,"");_=m.getStructureAt(t);f=_.getStringByKey(e.VizDefConstants.K_TYPE);if(e.XString.isEqual(f,e.VizDefConstants.K_ERRORBAR)){C=t;T=m.getStructureAt(C-1);let i=_.putNewStructure(e.VizDefConstants.K_DATA_LABELS);i.putBoolean(e.VizDefConstants.K_ENABLED,true);let n=i.putNewStructure(e.VizDefConstants.K_STYLE);n.putString(e.VizDefConstants.K_FILL,"black");n.putString(e.VizDefConstants.K_COLOR,"black");let r=T.putNewStructure(e.VizDefConstants.K_DATA_LABELS);r.putBoolean(e.VizDefConstants.K_ENABLED,false)}}}else{let i=t.getPrettyNamesForFeed(true,!l,e.VizDefConstants.K_VALUE_AXIS);let n=e.XCollectionUtils.join(i,",");e.RsHiChartVizUtilsSimple.plotOptionChart(a,this.getChartType(),this.getStackingType(),c,0,g,n)}let D=e.XStringUtils.isNullOrEmpty(this.getSecondChart())&&e.XString.isEqual(e.VizDefConstants.V_NORMAL,this.getStackingType())&&(e.XString.isEqual(this.getChartType(),e.VizDefConstants.V_CHART_TYPE_BAR)||e.XString.isEqual(this.getChartType(),e.VizDefConstants.V_CHART_TYPE_COLUMN));e.RsHiChartVizUtilsSimple.dataLabelAlignment(a,this.getChartType(),t.getDecimalPlaces(e.VizDefConstants.K_VALUE_AXIS),D);let A=e.XString.isEqual(e.VizDefConstants.V_CHART_TYPE_BAR,this.getChartType());let E=e.XString.isEqual(e.VizDefConstants.V_CHART_TYPE_COLUMN,this.getChartType());if(A||E){let t=a.containsKey(e.VizDefConstants.K_PLOT_LINES)?a.getListByKey(e.VizDefConstants.K_PLOT_LINES):a.putNewList(e.VizDefConstants.K_PLOT_LINES);let i=t.addNewStructure();i.putString(e.VizDefConstants.K_COLOR,e.VizDefConstants.V_BLACK);i.putInteger(e.VizDefConstants.K_WIDTH,2);i.putInteger(e.VizDefConstants.K_VALUE,0);i.putString(e.VizDefConstants.K_ID,e.VizDefConstants.V_BASE_PLOTLINE_ID);i.putInteger(e.VizDefConstants.K_Z_INDEX,6)}};e.RsHiChartSeriesHelper.prototype.setChartWidth=function(e){this.m_chartWidth=e};e.RsHiChartSeriesHelper.prototype.setHasVariance=function(e){this.m_hasVariance=e};e.RsHiChartSeriesHelper.prototype.setMaxYValue=function(e){this.m_maxYValue=e};e.RsHiChartSeriesHelper.prototype.setWidthScale=function(e){this.m_widthScale=e};e.RsHiChartUnsupportedHelper=function(){};e.RsHiChartUnsupportedHelper.prototype=new e.RsHiChartRenderHelper;e.RsHiChartUnsupportedHelper.prototype._ff_c="RsHiChartUnsupportedHelper";e.RsHiChartUnsupportedHelper.prototype.finishRendering=function(){};e.RsHiChartUnsupportedHelper.prototype.isUnsupported=function(){return true};e.RsHiChartUnsupportedHelper.prototype.prepareRendering=function(){};e.RsHiChartUnsupportedHelper.prototype.readResultSetData=function(e,t,i){};e.RscCellValueReference=function(){};e.RscCellValueReference.prototype=new e.RscGenericValue;e.RscCellValueReference.prototype._ff_c="RscCellValueReference";e.RscCellValueReference.create=function(t,i,n,r,l,o,s,a,u,p,c,g,m,f,C,d,y){let h=new e.RscCellValueReference;h.setupCellValue(t,i,n,r,l,o,s,a,u,p,c,g,m,f,C,d,y);return h};e.RscCellValueReference.prototype.m_alertLevel=null;e.RscCellValueReference.prototype.m_cellValueType=null;e.RscCellValueReference.prototype.m_complexUnit=null;e.RscCellValueReference.prototype.m_currencyUnit=null;e.RscCellValueReference.prototype.m_dataCellName=null;e.RscCellValueReference.prototype.m_dataEntryEnabled=false;e.RscCellValueReference.prototype.m_documentId=null;e.RscCellValueReference.prototype.m_exceptionName=null;e.RscCellValueReference.prototype.m_numericShift=0;e.RscCellValueReference.prototype.m_scalingText=null;e.RscCellValueReference.prototype.m_tags=null;e.RscCellValueReference.prototype.m_unitInformation=null;e.RscCellValueReference.prototype.m_valueException=null;e.RscCellValueReference.prototype.getAlertLevel=function(){return this.m_alertLevel};e.RscCellValueReference.prototype.getCellValueType=function(){return this.m_cellValueType};e.RscCellValueReference.prototype.getComplexUnit=function(){return this.m_complexUnit};e.RscCellValueReference.prototype.getCurrencyUnit=function(){return this.m_currencyUnit};e.RscCellValueReference.prototype.getDataCellName=function(){return this.m_dataCellName};e.RscCellValueReference.prototype.getDocumentId=function(){return this.m_documentId};e.RscCellValueReference.prototype.getExceptionName=function(){return this.m_exceptionName};e.RscCellValueReference.prototype.getNumericShift=function(){return this.m_numericShift};e.RscCellValueReference.prototype.getReversedScalingFactor=function(){return-this.m_numericShift};e.RscCellValueReference.prototype.getScalingText=function(){return this.m_scalingText};e.RscCellValueReference.prototype.getTags=function(){return this.m_tags};e.RscCellValueReference.prototype.getUnitInformation=function(){return this.m_unitInformation};e.RscCellValueReference.prototype.getValueException=function(){return this.m_valueException};e.RscCellValueReference.prototype.isDataEntryEnabled=function(){return this.m_dataEntryEnabled};e.RscCellValueReference.prototype.releaseObject=function(){this.m_numericShift=0;this.m_currencyUnit=null;this.m_complexUnit=null;this.m_cellValueType=null;this.m_valueException=null;this.m_tags=e.XObjectExt.release(this.m_tags);this.m_exceptionName=null;this.m_alertLevel=null;this.m_documentId=null;this.m_dataEntryEnabled=false;this.m_dataCellName=null;e.RscGenericValue.prototype.releaseObject.call(this)};e.RscCellValueReference.prototype.setScalingText=function(e){this.m_scalingText=e};e.RscCellValueReference.prototype.setUnitInformation=function(e){this.m_unitInformation=e};e.RscCellValueReference.prototype.setupCellValue=function(t,i,n,r,l,o,s,a,u,p,c,g,m,f,C,d,y){e.RscGenericValue.prototype.setupInternal.call(this,t,i,n,r,l,o);this.m_numericShift=s;this.m_currencyUnit=a;this.m_complexUnit=u;this.m_cellValueType=p;this.m_tags=g;this.m_valueException=c;this.m_exceptionName=m;this.m_alertLevel=f;this.m_documentId=C;this.m_dataEntryEnabled=d;this.m_dataCellName=y};e.RscDataSectionInfoTag=function(){};e.RscDataSectionInfoTag.prototype=new e.XObject;e.RscDataSectionInfoTag.prototype._ff_c="RscDataSectionInfoTag";e.RscDataSectionInfoTag.create=function(t){let i=new e.RscDataSectionInfoTag;i.setupWithFieldValueReference(t);return i};e.RscDataSectionInfoTag.prototype.m_fieldValueReference=null;e.RscDataSectionInfoTag.prototype.m_headerBand=false;e.RscDataSectionInfoTag.prototype.m_innerBand=false;e.RscDataSectionInfoTag.prototype.m_totalBand=false;e.RscDataSectionInfoTag.prototype.copyFrom=function(t,i){let n=t;this.m_fieldValueReference=n.m_fieldValueReference;this.m_headerBand=n.m_headerBand;this.m_innerBand=n.m_innerBand;this.m_totalBand=n.m_totalBand;e.XObject.prototype.copyFrom.call(this,t,i)};e.RscDataSectionInfoTag.prototype.createCopy=function(){let t=e.RscDataSectionInfoTag.create(this.m_fieldValueReference);t.copyFrom(this,null);return t};e.RscDataSectionInfoTag.prototype.getFieldReference=function(){return e.notNull(this.m_fieldValueReference)?this.m_fieldValueReference.getFieldReference():null};e.RscDataSectionInfoTag.prototype.getGroupLevel=function(){let t=this.getFieldReference();return e.notNull(t)?t.getDimensionIndex():-1};e.RscDataSectionInfoTag.prototype.getGroupName=function(){let t=this.getFieldReference();return e.notNull(t)?t.getDimension().getName():null};e.RscDataSectionInfoTag.prototype.getReversedGroupLevel=function(){let t=this.getFieldReference();return e.notNull(t)?t.getReversedDimensionIndex():-1};e.RscDataSectionInfoTag.prototype.getSectionLevel=function(){return e.notNull(this.m_fieldValueReference)?this.m_fieldValueReference.getDisplayLevel():-1};e.RscDataSectionInfoTag.prototype.getSectionLevelName=function(){return null};e.RscDataSectionInfoTag.prototype.getSectionNodeName=function(){return e.XObjectExt.isValidObject(this.m_fieldValueReference)?this.m_fieldValueReference.getDimensionMemberName():null};e.RscDataSectionInfoTag.prototype.isExactSectionLevel=function(){return true};e.RscDataSectionInfoTag.prototype.isExpanded=function(){let t=e.XObjectExt.isValidObject(this.m_fieldValueReference)?this.m_fieldValueReference.getDrillState():null;return t===e.DrillState.EXPANDED||t===e.DrillState.DRILLED};e.RscDataSectionInfoTag.prototype.isGroupLevelEnd=function(){return!e.XObjectExt.isValidObject(this.m_fieldValueReference)||this.m_fieldValueReference.isDimensionSectionEnd()};e.RscDataSectionInfoTag.prototype.isGroupLevelStart=function(){return!e.XObjectExt.isValidObject(this.m_fieldValueReference)||this.m_fieldValueReference.isDimensionSectionStart()};e.RscDataSectionInfoTag.prototype.isHeaderBand=function(){return this.m_headerBand};e.RscDataSectionInfoTag.prototype.isHierarchyBottomUp=function(){let t=this.getFieldReference();return e.notNull(t)&&t.getLowerLevelNodeAlignment()===e.Alignment.CHILDREN_ABOVE_PARENT};e.RscDataSectionInfoTag.prototype.isInnerBand=function(){return this.m_innerBand};e.RscDataSectionInfoTag.prototype.isLeaf=function(){let t=e.XObjectExt.isValidObject(this.m_fieldValueReference)?this.m_fieldValueReference.getDrillState():null;return t===e.DrillState.LEAF||e.isNull(t)};e.RscDataSectionInfoTag.prototype.isMatchingGroupName=function(t,i){return e.XStringUtils.isNullOrEmpty(t)||e.notNull(i)&&(e.XString.isEqual(t,i.getName())||e.XString.isEqual(t,i.getText())||e.XString.isEqual(t,i.getDisplayName())||e.XString.isEqual(t,i.getText()))};e.RscDataSectionInfoTag.prototype.isSectionLevelEnd=function(){return!e.XObjectExt.isValidObject(this.m_fieldValueReference)||this.m_fieldValueReference.isHierarchyLevelEnd()};e.RscDataSectionInfoTag.prototype.isSectionLevelStart=function(){return!e.XObjectExt.isValidObject(this.m_fieldValueReference)||this.m_fieldValueReference.isHierarchyLevelStart()};e.RscDataSectionInfoTag.prototype.isTotal=function(){return this.m_fieldValueReference.getDimensionMemberType().isTypeOf(e.MemberType.RESULT)};e.RscDataSectionInfoTag.prototype.isTotalBand=function(){return this.m_totalBand};e.RscDataSectionInfoTag.prototype.matches=function(t){let i=t.getGroupName();let n=this.getFieldReference();let r=false;if(e.notNull(n)){let e=n.getDimension();let l=n.getField();let o=l.getAttribute();let s=n.isMainAttribute();let a=this.isMatchingGroupName(i,o);let u=s&&a||this.isMatchingGroupName(i,e);let p=this.isMatchingGroupName(i,l);let c=n.isMainFieldForAttribute();let g=c&&s||n.isMainFieldForDimension();let m=p||c&&a||g&&u;let f=m;r=this.matchesSections(t,this)&&this.matchesDrillState(t,this)&&this.matchesHierarchyAlignment(t,this)&&this.matchesTotal(t,this)&&(u||a||p)&&(t.getGroupLevel()===-1||this.getGroupLevel()===t.getGroupLevel()||this.getReversedGroupLevel()===t.getGroupLevel())&&this.matchesNamesAndLevelsExt(t,this.m_fieldValueReference,m,f,u)}return r};e.RscDataSectionInfoTag.prototype.matchesDrillState=function(t,i){return e.TriStateMatchingUtil.matchesTriStateStrictPositive(t.isMatchesLeaves(),i.isLeaf())||e.TriStateMatchingUtil.matchesTriStateStrictPositive(t.isMatchesExpanded(),i.isExpanded())&&i.isExactSectionLevel()||e.TriStateMatchingUtil.matchesTriStateNegative(t.isMatchesLeaves(),i.isLeaf())&&e.TriStateMatchingUtil.matchesTriStateNegative(t.isMatchesExpanded(),i.isExpanded())&&i.isExactSectionLevel()};e.RscDataSectionInfoTag.prototype.matchesHierarchyAlignment=function(t,i){return e.TriStateMatchingUtil.matchesTriStateStrictPositive(t.isMatchesHierarchyBottomUp(),this.isHierarchyBottomUp())||e.TriStateMatchingUtil.matchesTriStateNegative(t.isMatchesHierarchyBottomUp(),this.isHierarchyBottomUp())};e.RscDataSectionInfoTag.prototype.matchesNamesAndLevelsExt=function(t,i,n,r,l){let o=i.getPlainValue().getStringRepresentation();let s=i.getFormattedText();let a=i.getDimensionMemberName();let u=t.getSectionNodeNames();let p=(t.getSectionLevel()<0||i.getDisplayLevel()===t.getSectionLevel())&&(!e.XCollectionUtils.hasElements(u)||n&&u.contains(o)||r&&u.contains(s)||l&&u.contains(a));let c=i.getParent();return p||!t.isExactSectionLevel()&&e.notNull(c)&&this.matchesNamesAndLevelsExt(t,c,n,r,l)};e.RscDataSectionInfoTag.prototype.matchesSections=function(t,i){return e.TriStateMatchingUtil.matchesTriStateStrictPositive(t.isIncludeHeaderBand(),i.isHeaderBand())||e.TriStateMatchingUtil.matchesTriStateStrictPositive(t.isIncludeTotalsBand(),i.isTotalBand())||e.TriStateMatchingUtil.matchesTriStateStrictPositive(t.isIncludeInnerBands(),i.isInnerBand())||e.TriStateMatchingUtil.matchesTriStateNegative(t.isIncludeHeaderBand(),i.isHeaderBand())&&e.TriStateMatchingUtil.matchesTriStateNegative(t.isIncludeTotalsBand(),i.isTotalBand())&&e.TriStateMatchingUtil.matchesTriStateNegative(t.isIncludeHeaderBand(),i.isHeaderBand())};e.RscDataSectionInfoTag.prototype.matchesSibling=function(t){let i=this.isTotal()===t.isTotal()&&this.isLeaf()===t.isLeaf()&&this.isExpanded()===t.isExpanded()&&(!t.isExactSectionLevel()||this.isExactSectionLevel())&&(t.getGroupLevel()===-1||this.getGroupLevel()===t.getGroupLevel())&&(t.getSectionLevel()<0||this.getSectionLevel()===t.getSectionLevel())&&(e.XStringUtils.isNullOrEmpty(t.getGroupName())||e.XString.isEqual(t.getGroupName(),this.getGroupName()))&&(e.XStringUtils.isNullOrEmpty(t.getSectionNodeName())||e.XString.isEqual(t.getSectionNodeName(),this.getSectionNodeName()));return i};e.RscDataSectionInfoTag.prototype.matchesTotal=function(t,i){return e.TriStateMatchingUtil.matchesTriStateStrictPositive(t.isMatchesTotals(),this.isTotal())||e.TriStateMatchingUtil.matchesTriStateNegative(t.isMatchesTotals(),this.isTotal())};e.RscDataSectionInfoTag.prototype.releaseObject=function(){this.m_headerBand=false;this.m_totalBand=false;this.m_innerBand=false;this.m_fieldValueReference=null;e.XObject.prototype.releaseObject.call(this)};e.RscDataSectionInfoTag.prototype.setHeaderBand=function(e){this.m_headerBand=e};e.RscDataSectionInfoTag.prototype.setInnerBand=function(e){this.m_innerBand=e};e.RscDataSectionInfoTag.prototype.setTotalBand=function(e){this.m_totalBand=e};e.RscDataSectionInfoTag.prototype.setupWithFieldValueReference=function(e){this.m_fieldValueReference=e;if(this.m_fieldValueReference.isDrillGroupHeader()){this.m_headerBand=true;this.m_innerBand=false}};e.RscMeasureInfoTag=function(){};e.RscMeasureInfoTag.prototype=new e.XObject;e.RscMeasureInfoTag.prototype._ff_c="RscMeasureInfoTag";e.RscMeasureInfoTag.create=function(t){let i=new e.RscMeasureInfoTag;i.setupWithMeasureReference(t);return i};e.RscMeasureInfoTag.prototype.m_headerBand=false;e.RscMeasureInfoTag.prototype.m_innerBand=false;e.RscMeasureInfoTag.prototype.m_measureReference=null;e.RscMeasureInfoTag.prototype.m_totalBand=false;e.RscMeasureInfoTag.prototype.copyFrom=function(t,i){let n=t;this.m_measureReference=n.m_measureReference;this.m_headerBand=n.m_headerBand;this.m_innerBand=n.m_innerBand;this.m_totalBand=n.m_totalBand;e.XObject.prototype.copyFrom.call(this,t,i)};e.RscMeasureInfoTag.prototype.createCopy=function(){let t=e.RscMeasureInfoTag.create(this.m_measureReference);t.copyFrom(this,null);return t};e.RscMeasureInfoTag.prototype.getGroupLevel=function(){return-1};e.RscMeasureInfoTag.prototype.getGroupName=function(){let t=this.getMeasureReference();return e.notNull(t)?t.getStructureMember().getDimension().getName():null};e.RscMeasureInfoTag.prototype.getMeasureReference=function(){return e.notNull(this.m_measureReference)?this.m_measureReference:null};e.RscMeasureInfoTag.prototype.getReversedGroupLevel=function(){return-1};e.RscMeasureInfoTag.prototype.getSectionLevel=function(){return e.notNull(this.m_measureReference)?this.m_measureReference.getDisplayLevel():-1};e.RscMeasureInfoTag.prototype.getSectionLevelName=function(){return null};e.RscMeasureInfoTag.prototype.getSectionNodeName=function(){return e.notNull(this.m_measureReference)?this.m_measureReference.getStructureMember().getName():null};e.RscMeasureInfoTag.prototype.isExactSectionLevel=function(){return true};e.RscMeasureInfoTag.prototype.isExpanded=function(){let t=e.notNull(this.m_measureReference)?this.m_measureReference.getDrillState():null;return t===e.DrillState.EXPANDED||t===e.DrillState.DRILLED};e.RscMeasureInfoTag.prototype.isGroupLevelEnd=function(){return false};e.RscMeasureInfoTag.prototype.isGroupLevelStart=function(){return false};e.RscMeasureInfoTag.prototype.isHeaderBand=function(){return this.m_headerBand};e.RscMeasureInfoTag.prototype.isHierarchyBottomUp=function(){return false};e.RscMeasureInfoTag.prototype.isInnerBand=function(){return this.m_innerBand};e.RscMeasureInfoTag.prototype.isLeaf=function(){let t=e.notNull(this.m_measureReference)?this.m_measureReference.getDrillState():null;return t===e.DrillState.LEAF||e.isNull(t)};e.RscMeasureInfoTag.prototype.isMatchingGroupName=function(t,i){return e.XStringUtils.isNullOrEmpty(t)||e.notNull(i)&&(e.XString.isEqual(t,i.getName())||e.XString.isEqual(t,i.getText())||e.XString.isEqual(t,i.getDisplayName())||e.XString.isEqual(t,i.getText()))};e.RscMeasureInfoTag.prototype.isSectionLevelEnd=function(){return false};e.RscMeasureInfoTag.prototype.isSectionLevelStart=function(){return false};e.RscMeasureInfoTag.prototype.isTotal=function(){return false};e.RscMeasureInfoTag.prototype.isTotalBand=function(){return this.m_totalBand};e.RscMeasureInfoTag.prototype.matches=function(t){let i=t.getGroupName();let n=this.getMeasureReference();let r=false;if(e.notNull(n)){let e=n.getStructureMember();let l=e.getDimension();let o=this.isMatchingGroupName(i,l);r=this.matchesDrillState(t,this)&&o&&this.matchesNamesAndLevelsExt(t,n)}return r};e.RscMeasureInfoTag.prototype.matchesDrillState=function(t,i){return e.TriStateMatchingUtil.matchesTriStateStrictPositive(t.isMatchesLeaves(),i.isLeaf())||e.TriStateMatchingUtil.matchesTriStateStrictPositive(t.isMatchesExpanded(),i.isExpanded())&&i.isExactSectionLevel()||e.TriStateMatchingUtil.matchesTriStateNegative(t.isMatchesLeaves(),i.isLeaf())&&e.TriStateMatchingUtil.matchesTriStateNegative(t.isMatchesExpanded(),i.isExpanded())&&i.isExactSectionLevel()};e.RscMeasureInfoTag.prototype.matchesNamesAndLevelsExt=function(t,i){let n=t.getSectionNodeNames();let r=i.getStructureMember();let l=(t.getSectionLevel()<0||i.getDisplayLevel()===t.getSectionLevel())&&(!e.XCollectionUtils.hasElements(n)||e.XStream.of(r.getAllFieldValues()).anyMatch(e=>n.contains(e.getValue().getStringRepresentation()))||n.contains(r.getName())||n.contains(r.getDisplayName())||n.contains(r.getText())||n.contains(r.getDisplayDescription())||r.getMemberType().isTypeOf(e.MemberType.MEASURE)&&n.contains(r.getAliasName()));let o=i.getParent();return l||!t.isExactSectionLevel()&&e.notNull(o)&&this.matchesNamesAndLevelsExt(t,o)};e.RscMeasureInfoTag.prototype.matchesSibling=function(t){let i=this.isTotal()===t.isTotal()&&this.isLeaf()===t.isLeaf()&&this.isExpanded()===t.isExpanded()&&(!t.isExactSectionLevel()||this.isExactSectionLevel())&&(t.getGroupLevel()===-1||this.getGroupLevel()===t.getGroupLevel())&&(t.getSectionLevel()<0||this.getSectionLevel()===t.getSectionLevel())&&(e.XStringUtils.isNullOrEmpty(t.getGroupName())||e.XString.isEqual(t.getGroupName(),this.getGroupName()))&&(e.XStringUtils.isNullOrEmpty(t.getSectionNodeName())||e.XString.isEqual(t.getSectionNodeName(),this.getSectionNodeName()));return i};e.RscMeasureInfoTag.prototype.releaseObject=function(){this.m_headerBand=false;this.m_totalBand=false;this.m_innerBand=false;this.m_measureReference=null;e.XObject.prototype.releaseObject.call(this)};e.RscMeasureInfoTag.prototype.setHeaderBand=function(e){this.m_headerBand=e};e.RscMeasureInfoTag.prototype.setInnerBand=function(e){this.m_innerBand=e};e.RscMeasureInfoTag.prototype.setTotalBand=function(e){this.m_totalBand=e};e.RscMeasureInfoTag.prototype.setupWithMeasureReference=function(e){this.m_measureReference=e};e.RscTupleReference=function(){};e.RscTupleReference.prototype=new e.XObject;e.RscTupleReference.prototype._ff_c="RscTupleReference";e.RscTupleReference.applyValues=function(t,i){let n=t.getValuesMap();let r=n.getKeysAsIterator();let l=e.XHashMapByString.create();while(r.hasNext()){let n=r.next();let o=t.getValueForKey(n).createValueCopy(t,t.getAxisReference());if(o.getModelReference().getModelComponentType().isTypeOf(e.OlapComponentType.FIELD)){i.putTupleValueReference(n,o)}else{l.put(n,o)}}return l};e.RscTupleReference.compareRepetition=function(t,i){if(e.notNull(t)&&e.notNull(i)){let n=t.m_memberValues;let r=i.m_memberValues;let l=n.getKeysAsIterator();while(l.hasNext()){let t=l.next();let i=n.getByKey(t);let o=r.getByKey(t);if(e.notNull(i)&&e.notNull(o)){let t=e.XObjectExt.areEqual(i.getPlainValue(),o.getPlainValue())&&i.getDisplayLevel()===o.getDisplayLevel()&&i.getValueException()===o.getValueException()&&e.XString.isEqual(i.getPathKey(),o.getPathKey());o.setRepeatedMemberName(t);o.setDimensionSectionStart(!t);if(!t){i.setDimensionSectionEnd()}}}}};e.RscTupleReference.createForListByOrigTuple=function(t,i,n,r){let l=e.RscTupleReference.createInternal(n,-1);l.setupFromOrigTupleAndDimension(t,i,r);return l};e.RscTupleReference.createForRsAxis=function(t,i,n,r,l,o,s,a,u){let p=e.RscTupleReference.createInternal(t,i);p.setupForRsAxis(n,r,l,o,s,a,u);return p};e.RscTupleReference.createForRsAxisDummy=function(t,i){let n=e.RscTupleReference.createInternal(t,i);return n};e.RscTupleReference.createInternal=function(t,i){let n=new e.RscTupleReference;n.initializeInternal(t,i);return n};e.RscTupleReference.getReference=function(t){let i=null;if(t.size()===1){i=e.RscMeasureReference.createForFieldValueReference(t.get(0))}else if(t.size()===2){i=e.RscDataCellReference.create(e.RscMeasureReference.createForFieldValueReference(t.get(0)),e.RscMeasureReference.createForFieldValueReference(t.get(1)))}return i};e.RscTupleReference.mergeCoordinates=function(t){let i=null;let n=null;for(let r=0;r<t.size();r++){let l=t.get(r);if(e.notNull(l)){if(e.isNull(i)){i=l.getFirstObject()}if(e.isNull(n)){n=l.getSecondObject()}}}return e.XPair.create(i,n)};e.RscTupleReference.mergeOnSameAxis=function(t,i,n,r){let l=i.getValues();let o=e.XIntegerValue.create(i.getTupleIndex());let s=t.getAxisReference().getAxisType()===e.AxisType.ROWS?e.XPair.create(o,null):e.XPair.create(null,o);let a=e.XList.create();let u=e.XList.create();for(let t=0;t<l.size();t++){let i=l.get(t);if(i.getModelReference().getModelComponentType().isTypeOf(e.OlapComponentType.FIELD)&&n.contains(i.getFieldReference().getDimension())){let e=i;let t=e.getDimensionMemberName();if(!a.contains(t)){a.add(t);u.add(e)}}}if(e.XCollectionUtils.hasElements(a)){let n=r.getByKey(e.XCollectionUtils.join(a," "));if(e.isNull(n)){n=e.RscTupleReference.getReference(u)}n.applyUnitAndScalingInfoAndMakeVisible(i);let l=e.RscMeasureValueReference.createWithCoordinate(s,t,n);t.putTupleValueReference(e.XCollectionUtils.join(a," "),l)}};e.RscTupleReference.mergeTuples=function(t,i,n,r){let l=e.RscTupleReference.createInternal(t,-1);let o=e.XList.create();o.add(i.m_tupleIndexCoordinate);o.add(n.m_tupleIndexCoordinate);l.m_tupleIndexCoordinate=e.RscTupleReference.mergeCoordinates(o);let s=e.RscTupleReference.applyValues(i,l);let a=e.RscTupleReference.applyValues(n,l);let u=e.XCollectionUtils.hasElements(s);let p=e.XCollectionUtils.hasElements(a);if(u&&p){l.mergeAndResolveValues(s,a,r)}else if(u){l.resolveAllValues(s,r)}else if(p){l.resolveAllValues(a,r)}return l};e.RscTupleReference.prototype.m_accountMemberName=null;e.RscTupleReference.prototype.m_axisReference=null;e.RscTupleReference.prototype.m_cellValueType=null;e.RscTupleReference.prototype.m_complexUnit=null;e.RscTupleReference.prototype.m_currencyUnit=null;e.RscTupleReference.prototype.m_measureName=null;e.RscTupleReference.prototype.m_memberValues=null;e.RscTupleReference.prototype.m_numericShift=null;e.RscTupleReference.prototype.m_relevantTupleCoordinates=null;e.RscTupleReference.prototype.m_secondaryStructureMemberName=null;e.RscTupleReference.prototype.m_tupleIndex=0;e.RscTupleReference.prototype.m_tupleIndexCoordinate=null;e.RscTupleReference.prototype.m_uniqueDecimalPlaces=0;e.RscTupleReference.prototype.m_uniqueScalingText=null;e.RscTupleReference.prototype.m_uniqueUnitInfo=null;e.RscTupleReference.prototype.m_uniqueUnitScaleInformation=null;e.RscTupleReference.prototype.m_values=null;e.RscTupleReference.prototype.complementByDimensionTypes=function(t,i,n,r){let l=t.getDimensionByType(r);if(e.notNull(l)&&r!==n){i.addAll(l.getAllStructureMembers())}};e.RscTupleReference.prototype.correctNumericShift=function(t,i){let n=this.getAxisReference();let r=e.isNull(n)?null:n.getGridContainer();let l=e.isNull(r)?null:r.getQueryModel();if(e.notNull(l)&&!l.getModelCapabilities().supportsDataCells()&&e.notNull(this.m_numericShift)&&this.getCellValueType()!==e.XValueType.PERCENT){if(e.XCollectionUtils.size(t)===1){let n=e.XList.create();let r=t.get(0);let o=r.getDimension().getDimensionType();this.complementByDimensionTypes(l,n,o,e.DimensionType.ACCOUNT);this.complementByDimensionTypes(l,n,o,e.DimensionType.MEASURE_STRUCTURE);this.complementByDimensionTypes(l,n,o,e.DimensionType.SECONDARY_STRUCTURE);let s=e.XList.create();let a=false;for(let t=0;t<n.size();t++){let i=n.get(t);let l=e.QStructureMemberFormatterSettings.getLeadingScalingPower(r,i);if(!l.isPresent()){a=true}else{e.XCollectionUtils.addIfNotPresent(s,l.get())}}if(e.XCollectionUtils.size(s)===1&&!a){let e=s.get(0);if(e.getInteger()!==2||!i){this.setNumericShift(e)}}else if(e.XCollectionUtils.size(n)>1&&(e.XCollectionUtils.hasElements(s)||!a)){this.setNumericShift(null)}}else if(e.XCollectionUtils.size(t)>1){let i=e.QStructureMemberFormatterSettings.getLeadingScalingPower(t.get(0),t.get(1));if(i.isPresent()){this.setNumericShift(i.get())}}else if(!e.XCollectionUtils.hasElements(t)){this.setNumericShift(null)}}};e.RscTupleReference.prototype.extractDrillGroupDimenisonMembers=function(t,i,n,r,l,o,s,a,u){let p=t.getAxis();e.XCollectionUtils.forEach(p,e=>{this.extractDrillGroupDimensionMember(e,i,n,r,l,o,s,a)});let c=this.m_values.getByKey(t.getKeyField().getName());c.setDrillGroupHeader(true);u.setDrillGroupReference(c)};e.RscTupleReference.prototype.extractDrillGroupDimensionMember=function(t,i,n,r,l,o,s,a){let u=t.getKeyField();let p=this.getAxisReference().getDimensionReference(t.getName());let c=u.getName();let g=i.getHierarchyKeyByDimension(t);let m=this.getAxisReference().getComponentByName(c);let f=this.getTupleIndex()>0?this.getAxisReference().getTupleAt(this.getTupleIndex()-1):null;let C=e.isNull(f)?null:f.m_memberValues.getByKey(u.getDimension().getName());let d=this.getOrCreateMemberValueReference(p,n,g,C,r);let y=t.getDimensionType();if(y.isTypeOf(e.DimensionType.ACCOUNT)){this.m_accountMemberName=g}else if(y.isTypeOf(e.DimensionType.MEASURE_STRUCTURE)){this.m_measureName=g}else if(y.isTypeOf(e.DimensionType.SECONDARY_STRUCTURE)){this.m_secondaryStructureMemberName=g}let h=e.XStringValue.create(g);s.put(c,g);a.put(c,h);let _=e.RscFieldValueReference.create(this,m,h,g,d);_.setValueException(l);if(!this.m_values.containsKey(c)){this.m_values.put(c,_)}if(!o.contains(c)){o.add(c)}u=t.getHierarchyNavigationField();c=u.getName();let T=i.getId();m=this.getAxisReference().getComponentByName(c);h=e.XStringValue.create(T);s.put(c,T);a.put(c,h);_=e.RscFieldValueReference.create(this,m,h,T,d);_.setValueException(l);if(!this.m_values.containsKey(c)){this.m_values.put(c,_)}if(!o.contains(c)){o.add(c)}};e.RscTupleReference.prototype.extractStructureMembers=function(t){let i=this.getValues();for(let n=0;n<i.size();n++){let r=i.get(n);let l=r.getFieldReference().getDimension();if(l.getDimensionType().isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE)||l.getDimensionType().isTypeOf(e.DimensionType.ACCOUNT)){let i=l.getStructureMemberByAliasOrMember(r.getDimensionMemberName());if(e.notNull(i)&&!t.contains(i)){t.add(i)}}}};e.RscTupleReference.prototype.getAccountMemberName=function(){return this.m_accountMemberName};e.RscTupleReference.prototype.getAxisReference=function(){return e.XWeakReferenceUtil.getHardRef(this.m_axisReference)};e.RscTupleReference.prototype.getCellValueType=function(){return this.m_cellValueType};e.RscTupleReference.prototype.getComplexUnit=function(){return this.m_complexUnit};e.RscTupleReference.prototype.getCurrencyUnit=function(){return this.m_currencyUnit};e.RscTupleReference.prototype.getFormattedUnitScalingHeader=function(t,i,n,r){let l="";let o=e.RscMappingUtils.getCurrencyUnitPair(this.getComplexUnit(),false,i.getCurrencyFormatSettings().getCurrencyPresentation());if(this.getCellValueType()===e.XValueType.PERCENT||r&&e.notNull(this.m_numericShift)&&this.m_numericShift.getInteger()===2){l=e.RscCollectorConstants.PERCENT}else if(e.notNull(o)){l=e.XNumberFormatter.formatHeaderStringUsingSettingsWithCurrency(i,o,this.getReversedScalingFactor(),t)}else if(this.getCurrencyUnit()!==null){let n=this.getCurrencyUnit();let r="";let o="";if(n.hasPrefix()){r=e.XStringUtils.concatenate2(n.getPrefix()," ")}if(n.hasSuffix()){o=e.XStringUtils.concatenate2(" ",n.getSuffix())}let s=e.XPairOfString.create(r,o);l=e.XNumberFormatter.formatHeaderStringUsingSettingsWithCurrency(i,s,this.getReversedScalingFactor(),t)}else{l=e.XNumberFormatter.formatHeaderStringUsingSettingsWithCurrency(i,n,this.getReversedScalingFactor(),t)}return l};e.RscTupleReference.prototype.getMeasureName=function(){return this.m_measureName};e.RscTupleReference.prototype.getNumericShift=function(){return this.m_numericShift};e.RscTupleReference.prototype.getOrCreateMemberValueReference=function(t,i,n,r,l){let o=t.getName();if(!this.m_memberValues.containsKey(o)){let s=e.XStringValue.create(n);let a=i.getDisplayLevel();let u=e.RscMemberValueReference.create(this,t,s,n,i.getDimensionMemberType(),i.getDrillState(),a);this.m_memberValues.put(o,u);let p=i.getDimensionMemberNameValueException();u.setValueException(p);let c=i.getParentDimensionMemberName();u.setParentDimensionMemberName(c);let g=true;let m;if(e.isNull(r)){g=false;m=this.getTupleIndex()}else{let t=r.getPlainValue().getStringRepresentation();if(!e.XString.isEqual(n,t)||r.getDisplayLevel()!==a||r.getValueException()!==p||!e.XString.isEqual(r.getPathKey(),l)){r.setDimensionSectionEnd();m=this.getTupleIndex();g=false}else{m=r.getReferenceTupleIndex()}if(!e.XString.isEqual(n,c)){if(e.XString.isEqual(c,t)){u.setParent(r)}else if(e.XString.isEqual(n,r.getParentDimensionMemberName())){r.setParent(u)}}u.setHierarchyLevelStart(!r.findParent(u));r.setHierarchyLevelEnd(!u.findParent(r))}u.setReferenceTupleIndex(m);u.setRepeatedMemberName(g);u.setDimensionSectionStart(!g);u.setPathKey(l)}return this.m_memberValues.getByKey(o)};e.RscTupleReference.prototype.getRelevantTupleIndices=function(){return this.m_relevantTupleCoordinates};e.RscTupleReference.prototype.getReversedScalingFactor=function(){return e.isNull(this.m_numericShift)?null:e.XIntegerValue.create(-this.m_numericShift.getInteger())};e.RscTupleReference.prototype.getScalingText=function(t,i,n,r){let l="";if(this.getCellValueType()===e.XValueType.PERCENT||r&&e.notNull(this.m_numericShift)&&this.m_numericShift.getInteger()===2){l=e.RscCollectorConstants.PERCENT}else{l=e.XNumberFormatter.formatHeaderStringUsingSettingsWithCurrency(i,n,this.getReversedScalingFactor(),t)}return l};e.RscTupleReference.prototype.getSecondaryStructureMemberName=function(){return this.m_secondaryStructureMemberName};e.RscTupleReference.prototype.getTextWithSuffix=function(t,i,n,r){if(e.XCollectionUtils.hasElements(t)&&i.getDimensionType().isTypeOf(e.DimensionType.GENERAL_VERSION)&&e.XStream.of(t).anyMatch(t=>(e.XString.isEqual(t.getVersionDescription(),n)||e.XString.isEqual(t.getVersionUniqueName(),n)||e.XString.isEqual(t.getVersionDescription(),r))&&t.getVersionState()===e.PlanningVersionState.CHANGED)){return e.XStringUtils.concatenate2(r," *")}else{return r}};e.RscTupleReference.prototype.getTupleIndex=function(){return this.m_tupleIndex};e.RscTupleReference.prototype.getUniqueDecimalPlaces=function(){return this.m_uniqueDecimalPlaces};e.RscTupleReference.prototype.getUniqueScalingText=function(){return this.m_uniqueScalingText};e.RscTupleReference.prototype.getUniqueUnitInfo=function(){return this.m_uniqueUnitInfo};e.RscTupleReference.prototype.getUniqueUnitInformation=function(t){let i=e.RscMappingUtils.getCurrencyUnitPair(this.getComplexUnit(),false,t.getCurrencyFormatSettings().getCurrencyPresentation());if(e.isNull(i)&&this.getCurrencyUnit()!==null){let t=this.getCurrencyUnit();let n="";let r="";if(t.hasPrefix()){n=e.XStringUtils.concatenate2(t.getPrefix()," ")}if(t.hasSuffix()){r=e.XStringUtils.concatenate2(" ",t.getSuffix())}i=e.XPairOfString.create(n,r)}return i};e.RscTupleReference.prototype.getUniqueUnitScaleInformation=function(){return this.m_uniqueUnitScaleInformation};e.RscTupleReference.prototype.getValueForKey=function(e){return this.m_values.getByKey(e)};e.RscTupleReference.prototype.getValueForModelComponent=function(e){return this.m_values.getByKey(e.getName())};e.RscTupleReference.prototype.getValues=function(){return this.m_values.getValuesAsReadOnlyList()};e.RscTupleReference.prototype.getValuesMap=function(){return this.m_values};e.RscTupleReference.prototype.initializeInternal=function(t,i){this.m_values=e.XLinkedHashMapByString.create();this.m_memberValues=e.XLinkedHashMapByString.create();this.m_tupleIndex=i;this.m_axisReference=e.XWeakReferenceUtil.getWeakRef(t);this.m_relevantTupleCoordinates=e.XList.create()};e.RscTupleReference.prototype.mapResult=function(t){e.XStream.of(this.getAxisReference().getComponentsOnAxis()).filter(t=>t.getModelComponentType()===e.OlapComponentType.FIELD).map(e=>e).filter(e=>e.getDimension()===t.getDimension()&&e.getField()!==t.getField()).forEach(e=>{let i=this.getValueForModelComponent(e);t.addSupplementValue(e.getField().getName(),i.getPlainValue().getStringRepresentation())})};e.RscTupleReference.prototype.mergeAndResolveValues=function(t,i,n){let r=t.getKeysAsIterator();while(r.hasNext()){let l=r.next();let o=t.getByKey(l);let s=i.getKeysAsIterator();while(s.hasNext()){let t=s.next();let r=i.getByKey(t);let a=e.XList.create();a.add(o.getTupleIndexCoordinate());a.add(r.getTupleIndexCoordinate());a.add(this.m_tupleIndexCoordinate);let u=e.RscTupleReference.mergeCoordinates(a);if(u.getFirstObject()===null||u.getSecondObject()===null){throw e.XException.createIllegalStateException("INVALID STATE: VALUE CANNOT BE FETCHED")}this.m_relevantTupleCoordinates.add(u);let p=n.getCellValueReference(u.getSecondObject().getInteger(),u.getFirstObject().getInteger());let c=e.XStringUtils.concatenate3(o.getModelReference().getName()," ",r.getModelReference().getName());let g=this.getAxisReference().getComponentByName(c);g.setVisible(true);let m=e.RscMeasureValueReference.createWithCoordinate(u,this,g);m.pullFromCellValue(p);this.putTupleValueReference(e.XStringUtils.concatenate3(l," ",t),m)}}};e.RscTupleReference.prototype.putTupleValueReference=function(e,t){this.m_values.put(e,t)};e.RscTupleReference.prototype.releaseObject=function(){this.m_axisReference=null;this.m_values=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_values);this.m_memberValues=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_memberValues);this.m_relevantTupleCoordinates=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_relevantTupleCoordinates);this.m_tupleIndex=0;this.m_numericShift=null;this.m_currencyUnit=null;this.m_complexUnit=null;this.m_cellValueType=null;e.XObject.prototype.releaseObject.call(this)};e.RscTupleReference.prototype.resolveAllValues=function(t,i){let n=t.getKeysAsIterator();while(n.hasNext()){let r=n.next();let l=t.getByKey(r);let o=e.XList.create();o.add(l.getTupleIndexCoordinate());o.add(this.m_tupleIndexCoordinate);let s=e.RscTupleReference.mergeCoordinates(o);if(s.getFirstObject()===null||s.getSecondObject()===null){throw e.XException.createIllegalStateException("INVALID STATE: VALUE CANNOT BE FETCHED")}this.m_relevantTupleCoordinates.add(s);let a=i.getCellValueReference(s.getSecondObject().getInteger(),s.getFirstObject().getInteger());l.pullFromCellValue(a);this.putTupleValueReference(r,l)}};e.RscTupleReference.prototype.resolveFieldValueActionParameter=function(t){let i=t.getField();let n=t.getAttribute();let r=t.getDimension();let l=t.getSemanticObject();if(e.isNull(r)&&e.XStringUtils.isNotNullAndNotEmpty(l)){let e=this.getAxisReference().getDimensionReferenceBySemanticObject(l);if(e.isPresent()){r=e.get().getDimension()}}let o=r;if(e.isNull(i)&&e.notNull(n)){o=n}let s=t.getSemanticType();let a=t.getPresentationType();if(e.isNull(i)&&e.notNull(o)){if(e.notNull(a)){i=o.getFieldByPresentationType(a)}if(e.isNull(i)&&e.notNull(s)){i=o.getFieldBySemanticType(s)}if(e.isNull(i)){i=o.getClientDefaultTextField()}if(e.isNull(i)){i=o.getClientDefaultKeyField()}}let u=null;let p;if(e.notNull(i)){let n=this.m_values.getByKey(i.getName());p=i.getDimension().getDimensionMember(n.getDimensionMemberName());if(e.QQuickActionParameterResolveUtil.fieldValueParameterMatchesMember(t,p,n.getDrillState())){u=e.QFilterValueBag._create(null,null,null);u.setFieldValue(e.QFieldValue.createWithValue(null,i,p,n.getPlainValue()));u.setValue(n.getPlainValue());this.mapResult(u)}}else if(e.notNull(r)){let i=this.m_memberValues.getByKey(r.getName());p=r.getDimensionMember(i.getPlainValue().getStringRepresentation());if(e.QQuickActionParameterResolveUtil.fieldValueParameterMatchesMember(t,p,i.getDrillState())){u=e.QFilterValueBag._create(null,null,null);u.setDimensionMember(p);u.setValue(i.getPlainValue());this.mapResult(u)}}return u};e.RscTupleReference.prototype.setCellValueType=function(e){this.m_cellValueType=e};e.RscTupleReference.prototype.setComplexUnit=function(e){this.m_complexUnit=e};e.RscTupleReference.prototype.setCurrencyUnit=function(e){this.m_currencyUnit=e};e.RscTupleReference.prototype.setNumericShift=function(e){this.m_numericShift=e};e.RscTupleReference.prototype.setUnitInformation=function(e){this.m_uniqueUnitScaleInformation=e};e.RscTupleReference.prototype.setupForRsAxis=function(t,i,n,r,l,o,s){let a="";let u=null;while(t.hasNextTupleElement()){let n=t.nextTupleElement();let r=n.getDimensionMemberName();u=n;let l=n.getDimensionMemberType();let s;if(!l.isTypeOf(e.MemberType.RESULT)){a=e.XStringUtils.concatenate5(a,"::[",n.getRsDimensionAtCurrentPosition().getName(),"]==>",r)}let p;let c=n.getDimensionMemberNameValueException();let g;let m=e.XLinkedHashMapByString.create();let f=e.XLinkedHashMapByString.create();let C=e.XList.create();let d=e.XList.create();let y=n.getDrillGroupDimensionAtCurrentPosition();let h;let _;while(t.hasNextFieldValue()){let l=t.nextFieldValue();g=l.getField();let u=this.getAxisReference().getDimensionReference(g.getDimension().getName());let T=this.getTupleIndex()>0?this.getAxisReference().getTupleAt(this.getTupleIndex()-1):null;let S=e.isNull(T)?null:T.m_memberValues.getByKey(g.getDimension().getName());let R=this.getOrCreateMemberValueReference(u,n,n.getDimensionMemberName(),S,a);p=l.getValueException();h=e.RscMappingUtils.correctFieldIdConsideringUdhSettings(g,y);_=this.getAxisReference().getComponentByName(h);if(e.isNull(_)){_=this.getAxisReference().getOrCreateComponentForField(u,g)}let D=e.isNull(_)?null:_.getDimension();let A=e.isNull(D)?null:D.getStructureMemberByAliasOrMember(r);if(e.notNull(D)){let t=D.getDimensionType();if(t.isTypeOf(e.DimensionType.ACCOUNT)){this.m_accountMemberName=r}else if(t.isTypeOf(e.DimensionType.MEASURE_STRUCTURE)){this.m_measureName=r}else if(t.isTypeOf(e.DimensionType.SECONDARY_STRUCTURE)){this.m_secondaryStructureMemberName=r}}let E=l.getValue();let V=e.XValueUtil.getString(E);s=l.getFormattedValue();if(e.notNull(A)&&g.getPresentationType()!==null){if(g.getPresentationType().isTypeOf(e.PresentationType.ABSTRACT_TEXT)&&(D.getMainAttribute()===g.getAttribute()&&D.getFieldLayoutType()===e.FieldLayoutType.ATTRIBUTE_BASED||D.getTextField()===g||D.getClientDefaultTextField()===g||D.getDefaultResultSetTextField()===g)&&e.XStringUtils.isNotNullAndNotEmpty(A.getText())){s=A.getDisplayDescription();if(e.XStringUtils.isNullOrEmpty(V)&&!e.XStringUtils.isNullOrEmpty(r)){E=e.XStringValue.create(r)}}else if((g.getPresentationType().isTypeOf(e.PresentationType.DISPLAY_KEY)||g.getPresentationType().isTypeOf(e.PresentationType.HIERARCHY_DISPLAY_KEY)||D.getDisplayKeyField()===g)&&(D.getMainAttribute()===g.getAttribute()&&D.getFieldLayoutType()===e.FieldLayoutType.ATTRIBUTE_BASED||D.getDisplayKeyField()===g)&&A.isDisplayNameSet()){s=A.getDisplayName();if(e.XStringUtils.isNullOrEmpty(V)&&!e.XStringUtils.isNullOrEmpty(r)){E=e.XStringValue.create(r)}}}if(e.XStringUtils.isNullOrEmpty(s)){s=V}if(p===e.ValueException.UNDEFINED){s=i.getByKey(e.SacTableConstants.S_VALUE_EXCEPTION_UNDEFINED)}else if(p===e.ValueException.ERROR){s=i.getByKey(e.SacTableConstants.S_VALUE_EXCEPTION_ERROR)}else if(p===e.ValueException.NULL_VALUE&&c===e.ValueException.NULL_VALUE){s=i.getByKey(e.SacTableConstants.S_VALUE_EXCEPTION_NULL)}else if(e.notNull(p)&&p!==e.ValueException.NORMAL&&p!==e.ValueException.ZERO&&p!==e.ValueException.NULL_VALUE){s=i.getByKey(e.SacTableConstants.S_VALUE_EXCEPTION_OTHER)}s=this.getTextWithSuffix(o,D,V,s);m.put(h,s);f.put(h,E);let N=e.RscFieldValueReference.create(this,_,E,s,R);if(t.hasUniqueScalingFactor()){this.setNumericShift(t.getScalingFactor())}if(t.hasUniqueComplexUnit()){this.setComplexUnit(t.getComplexUnit())}if(t.hasUniqueCurrencyUnit()){this.setCurrencyUnit(t.getCurrencyUnit())}if(t.hasUniqueCellValueType()){this.setCellValueType(t.getCellValueType())}N.setValueException(p);let x=e.RscMappingUtils.isExplicitlyInRsPresentationForUdh(g,y);if(!this.m_values.containsKey(h)||x||!d.contains(h)&&g.getObtainability()===e.ObtainabilityType.ALWAYS){this.m_values.put(h,N);if(x){d.add(h)}}if(!C.contains(h)){C.add(h)}let P=l.getUdhKey();if(e.notNull(y)&&e.notNull(P)){this.extractDrillGroupDimenisonMembers(y,P,n,a,p,C,m,f,R)}}let T=0;for(let t=0;t<C.size();t++){h=C.get(t);let n=this.getValueForKey(h);s=n.getText();let r=n.getPlainValue();let o=e.XValueUtil.getString(r);let a=e.XStringUtils.isNullOrEmpty(o);let u=null;l=n.getDimensionMemberType();if(l===e.MemberType.RESULT){if(e.XStringUtils.isNotNullAndNotEmpty(i.getByKey(e.SacTableConstants.S_TOTAL_MEMBER_OVERWRITE_TEXT))){s=T===0?i.getByKey(e.SacTableConstants.S_TOTAL_MEMBER_OVERWRITE_TEXT):"";u=s}}else if(l===e.MemberType.CONDITION_RESULT){if(e.XStringUtils.isNotNullAndNotEmpty(i.getByKey(e.SacTableConstants.S_TOTAL_INCLUDING_MEMBER_OVERWRITE_TEXT))){s=T===0?i.getByKey(e.SacTableConstants.S_TOTAL_INCLUDING_MEMBER_OVERWRITE_TEXT):"";u=s}}else if(l===e.MemberType.CONDITION_OTHERS_RESULT){if(e.XStringUtils.isNotNullAndNotEmpty(i.getByKey(e.SacTableConstants.S_TOTAL_INCLUDING_MEMBER_OVERWRITE_TEXT))){s=T===0?i.getByKey(e.SacTableConstants.S_TOTAL_REMAINING_MEMBER_OVERWRITE_TEXT):"";u=s}}else if(e.XStringUtils.isNullOrEmpty(s)&&(n.getValueException()===null||n.getValueException()===e.ValueException.NORMAL||n.getDimensionMemberValueException()===null||n.getDimensionMemberValueException()===e.ValueException.NORMAL)){_=n.getFieldReference();g=e.isNull(_)?null:n.getFieldReference().getField();let t=e.isNull(g)?null:g.getAttribute();if(e.isNull(t)){s=n.getDimensionMemberName();u=s}if(e.notNull(t)&&e.XStringUtils.isNullOrEmpty(s)&&!e.PresentationType.DISPLAY_KEY.isTypeOf(g.getPresentationType())&&!e.PresentationType.HIERARCHY_DISPLAY_KEY.isTypeOf(g.getPresentationType())&&!e.PresentationType.DISPLAY_KEY_NOT_COMPOUND.isTypeOf(g.getPresentationType())){let i=t.getFieldByPresentationType(e.PresentationType.DISPLAY_KEY_NOT_COMPOUND);if(e.isNull(i)){i=t.getDisplayKeyField()}if(e.notNull(i)){let e=i.getName();if(m.containsKey(e)){s=m.getByKey(e)}if(f.containsKey(e)){n.applyPlainValue(f.getByKey(e))}else{u=s}}}if(e.XStringUtils.isNullOrEmpty(s)&&!(g.getDimension().isUniversalDisplayHierarchyDimension()&&!e.RscMappingUtils.isUdhMainAttribute(g))){s=i.getByKey(e.SacTableConstants.S_VALUE_EXCEPTION_NO_VALUE)}}let p=n.getFieldReference().getField().getObtainability();if(e.isNull(p)||p===e.ObtainabilityType.ALWAYS){T++}n.setText(s);n.setFormattedText(s);if(a&&e.XStringUtils.isNotNullAndNotEmpty(u)){n.applyStringValue(u)}}}let p=u;e.XStream.of(this.getAxisReference().getComponentsOnAxis()).find(e=>this.getValueForModelComponent(e)===null).ifPresent(t=>{let i=t;let n=this.getAxisReference().getDimensionReference(i.getDimension().getName());let r=this.getOrCreateMemberValueReference(n,p,null,null,null);let l=e.RscFieldValueReference.create(this,i,e.XStringValue.create(""),"",r);this.m_values.put(i.getName(),l)});let c=e.XList.create();this.extractStructureMembers(c);let g=e.XNumberFormatterSettingsFactory.getInstance();let m=e.QStructureMemberFormatterSettings.create(c,t.getCursorResultSet().getQueryModel());let f=g.merge(r,m);this.correctNumericShift(c,s);this.m_uniqueUnitInfo=this.getUniqueUnitInformation(f);this.m_uniqueUnitScaleInformation=this.getFormattedUnitScalingHeader(n,f,l,s);this.m_uniqueScalingText=this.getScalingText(n,f,l,s);this.m_uniqueDecimalPlaces=f.getRightPad()};e.RscTupleReference.prototype.setupFromOrigTupleAndDimension=function(t,i,n){let r=t.getValuesMap();let l=e.XIntegerValue.create(t.getTupleIndex());let o=this.getAxisReference().getAxisType()===e.AxisType.ROWS?e.XPair.create(l,null):e.XPair.create(null,l);let s=e.XList.create();let a=r.getKeysAsIterator();let u=e.XList.create();while(a.hasNext()){let n=a.next();let r=t.getValueForKey(n);if(r.getModelReference().getModelComponentType().isTypeOf(e.OlapComponentType.FIELD)&&i.contains(r.getFieldReference().getDimension())){let e=r;let t=e.getDimensionMemberName();if(!s.contains(t)){s.add(t);u.add(e)}}else{this.putTupleValueReference(n,r)}}if(e.XCollectionUtils.hasElements(s)){let i=n.getByKey(e.XCollectionUtils.join(s," "));if(e.isNull(i)){i=e.RscTupleReference.getReference(u)}i.applyUnitAndScalingInfoAndMakeVisible(t);let r=e.RscMeasureValueReference.createWithCoordinate(o,this,i);this.putTupleValueReference(e.XCollectionUtils.join(s," "),r)}else{this.m_tupleIndexCoordinate=o}};e.RscTupleValueReference=function(){};e.RscTupleValueReference.prototype=new e.RscGenericValue;e.RscTupleValueReference.prototype._ff_c="RscTupleValueReference";e.RscTupleValueReference.prototype.m_modelReference=null;e.RscTupleValueReference.prototype.m_parent=null;e.RscTupleValueReference.prototype.m_tupleReference=null;e.RscTupleValueReference.prototype.findParent=function(t){let i=this.getParent();let n=0;while(e.notNull(i)&&i!==t&&n<100){i=i.getParent();n++}return i===t};e.RscTupleValueReference.prototype.getModelReference=function(){return e.XWeakReferenceUtil.getHardRef(this.m_modelReference)};e.RscTupleValueReference.prototype.getParent=function(){return e.XWeakReferenceUtil.getHardRef(this.m_parent)};e.RscTupleValueReference.prototype.getTupleReference=function(){return e.XWeakReferenceUtil.getHardRef(this.m_tupleReference)};e.RscTupleValueReference.prototype.releaseObject=function(){this.m_modelReference=null;e.RscGenericValue.prototype.releaseObject.call(this)};e.RscTupleValueReference.prototype.setParent=function(t){this.m_parent=e.XWeakReferenceUtil.getWeakRef(t)};e.RscTupleValueReference.prototype.setupWithTupleReference=function(t,i,n,r,l,o,s,a){this.m_tupleReference=e.XWeakReferenceUtil.getWeakRef(t);this.m_modelReference=e.XWeakReferenceUtil.getWeakRef(a);e.RscGenericValue.prototype.setupInternal.call(this,i,n,r,l,o,s)};e.SacAnalyticTableCsvRenderHelper=function(){};e.SacAnalyticTableCsvRenderHelper.prototype=new e.SacTableCsvRenderHelper;e.SacAnalyticTableCsvRenderHelper.prototype._ff_c="SacAnalyticTableCsvRenderHelper";e.SacAnalyticTableWidgetRenderHelper=function(){};e.SacAnalyticTableWidgetRenderHelper.prototype=new e.SacTableWidgetRenderHelper;e.SacAnalyticTableWidgetRenderHelper.prototype._ff_c="SacAnalyticTableWidgetRenderHelper";e.SacAnalyticTableWidgetRenderHelper.createAnalyticTableRenderHelper=function(t){let i=new e.SacAnalyticTableWidgetRenderHelper;i.initializeRH(t);i.m_rowTupleIndexMap=e.XSimpleMap.create();i.m_columnTupleIndexMap=e.XSimpleMap.create();return i};e.SacAnalyticTableWidgetRenderHelper.prototype.m_columnTupleIndexMap=null;e.SacAnalyticTableWidgetRenderHelper.prototype.m_rowTupleIndexMap=null;e.SacAnalyticTableWidgetRenderHelper.prototype.getAnalyticTable=function(){return this.getTableObject()};e.SacAnalyticTableWidgetRenderHelper.prototype.preFormatCellChart=function(t,i,n,r,l){let o=e.SacTableWidgetRenderHelper.prototype.preFormatCellChart.call(this,t,i,n,r,l);return o};e.SacAnalyticTableWidgetRenderHelper.prototype.renderCell=function(t,i,n,r,l,o){let s=n;if(n.isEffectiveMergeRepetitiveHeaderCells()){if(s.getRepetitiveColumns()>0){s.setMergedColumns(s.getRepetitiveColumns())}if(s.getRepetitiveRows()>0){s.setMergedRows(s.getRepetitiveRows())}}else{if(s.getParentRow().isBaseElement()&&s.getMergedColumns()>0){s.setMergedColumns(0)}if(s.getParentColumn().isBaseElement()&&s.getMergedRows()>0){s.setMergedRows(0)}}let a=e.SacTableWidgetRenderHelper.prototype.renderCell.call(this,t,i,n,r,l,o);let u=s.getParentColumn();let p=s.getParentRow();let c=p.getTupleIndex();let g=u.getTupleIndex();let m=e.XIntegerValue.create(c);let f=e.XIntegerValue.create(g);if(!this.m_rowTupleIndexMap.containsKey(m)){this.m_rowTupleIndexMap.put(m,e.XIntegerValue.create(l))}if(!this.m_columnTupleIndexMap.containsKey(f)){this.m_columnTupleIndexMap.put(f,e.XIntegerValue.create(o))}let C=o;let d=l;let y=s.getRepeatedRefColumn();let h=s.getRepeatedRefRow();if(s.isRepeatedHeader()){let t=e.XIntegerValue.create(y);let i=e.XIntegerValue.create(h);let n=false;if(y>-1&&this.m_columnTupleIndexMap.containsKey(t)){C=this.m_columnTupleIndexMap.getByKey(t).getInteger();n=true}if(h>-1&&this.m_rowTupleIndexMap.containsKey(i)){d=this.m_rowTupleIndexMap.getByKey(i).getInteger();n=true}if(n){a.putInteger(e.SacTableConstants.C_N_REF_ROW,d);a.putInteger(e.SacTableConstants.C_N_REF_COL,C)}}a.putInteger(e.SacTableConstants.N_TUPLE_INDEX,g);if(s.getParentRow().isLastHeader()&&!this.getAnalyticTable().isEmptyRowDimensions()){a.putInteger(e.SacTableConstants.RCS_N_INDEX,u.getDimensionIndex());if(u.getFieldName()!==null){a.putString(e.SacTableConstants.C_SN_FIELD,u.getFieldName())}}else{a.putInteger(e.SacTableConstants.RCS_N_INDEX,p.getDimensionIndex());if(p.getFieldName()!==null){a.putString(e.SacTableConstants.C_SN_FIELD,p.getFieldName())}}if(s.getSortDirection()!==null){let t=null;if(s.getSortDirection()===e.XSortDirection.DEFAULT_VALUE){t=""}else if(s.getSortDirection()===e.XSortDirection.ASCENDING){t=""}else if(s.getSortDirection()===e.XSortDirection.DESCENDING){t=""}let i=a.putNewList(e.SacTableConstants.C_L_CELL_ICONS_RIGHT).addNewStructure();i.putString(e.SacTableConstants.CI_S_CLASS_NAME,e.SacTableConstants.CI_SV_CLASS_NAME_SAP_UI_ICON);let n=i.putNewStructure(e.SacTableConstants.CI_M_DATA_ATTRIBUTES);n.putString(e.SacTableConstants.CIA_S_DATA_SAP_UI_ICON_CONTENT,t);let r=i.putNewStructure(e.SacTableConstants.CI_M_STYLE);r.putString(e.SacTableConstants.CIS_S_FONT_FAMILY,e.SacTableConstants.CIS_SV_SAP_ICONS);r.putInteger(e.SacTableConstants.CIS_N_MARGIN_LEFT,e.SacTableConstants.CIS_NV_MARGIN_RIGHT);let l=s.getType();if(l===e.SacTableConstants.CT_ATTRIBUTE_COL_DIM_HEADER||l===e.SacTableConstants.CT_COL_DIM_HEADER||l===e.SacTableConstants.CT_ROW_DIM_MEMBER||l===e.SacTableConstants.CT_ATTRIBUTE_ROW_DIM_MEMBER){r.putString(e.SacTableConstants.CIS_S_ROTATE,e.SacTableConstants.CIS_SV_ROTATE)}i.putBoolean(e.SacTableConstants.CI_B_ICON_AFTER,true)}return a};e.SacAnalyticTableWidgetRenderHelper.prototype.renderColumn=function(t,i){if(e.notNull(t)){let n=t;i.putInteger(e.SacTableConstants.RCS_N_INDEX,n.getDimensionIndex());i.putInteger(e.SacTableConstants.N_TUPLE_INDEX,n.getTupleIndex());i.putString(e.SacTableConstants.C_SN_FIELD,n.getFieldName())}};e.SacAnalyticTableWidgetRenderHelper.prototype.renderRow=function(t,i,n,r,l,o,s){let a=n;let u=e.SacTableWidgetRenderHelper.prototype.renderRow.call(this,t,i,n,r,l,o,s);u.putInteger(e.SacTableConstants.N_TUPLE_INDEX,a.getTupleIndex());u.putInteger(e.SacTableConstants.RCS_N_INDEX,a.getDimensionIndex());u.putString(e.SacTableConstants.C_SN_FIELD,a.getFieldName());return u};e.SacAnalyticTableXlsRenderHelper=function(){};e.SacAnalyticTableXlsRenderHelper.prototype=new e.SacTableXlsRenderHelper;e.SacAnalyticTableXlsRenderHelper.prototype._ff_c="SacAnalyticTableXlsRenderHelper";e.ReferenceGrid=function(){};e.ReferenceGrid.prototype=new e.XObject;e.ReferenceGrid.prototype._ff_c="ReferenceGrid";e.ReferenceGrid.MAGIC_CELL_DIV="/";e.ReferenceGrid.create=function(t){let i=new e.ReferenceGrid;i.setupSimpleGrid(t,false,false);return i};e.ReferenceGrid.createForVizGrid=function(t){let i=new e.ReferenceGrid;i.setupSimpleGrid(t,false,true);return i};e.ReferenceGrid.createWithDetails=function(t){let i=new e.ReferenceGrid;i.setupSimpleGrid(t,true,false);return i};e.ReferenceGrid.createWithName=function(t,i){let n=new e.ReferenceGrid;n.setupSimpleGrid(i,false,false);return n};e.ReferenceGrid.createWithNameAndDetails=function(t,i){let n=new e.ReferenceGrid;n.setupSimpleGrid(i,true,false);return n};e.ReferenceGrid.prototype.m_defineAllCells=false;e.ReferenceGrid.prototype.m_fixedHeightOff=0;e.ReferenceGrid.prototype.m_fixedWidthOff=0;e.ReferenceGrid.prototype.m_grid=null;e.ReferenceGrid.prototype.m_offsetColumns=0;e.ReferenceGrid.prototype.m_offsetRows=0;e.ReferenceGrid.prototype.m_renderForFireflyGrid=false;e.ReferenceGrid.prototype.m_resultSet=null;e.ReferenceGrid.prototype.m_withDetails=false;e.ReferenceGrid.prototype.addCell=function(t,i,n,r,l){if(t===e.AxisType.ROWS){l.setRow(n+r+this.m_offsetRows);l.setColumn(i+this.m_offsetColumns);this.m_grid.setCell(i,n+r,l,false)}else{l.setRow(i);l.setColumn(n+r);this.m_grid.setCell(n+r,i,l,false)}};e.ReferenceGrid.prototype.addColumnsDef=function(e){this.m_grid.addColumnsDef(e)};e.ReferenceGrid.prototype.addRowsDef=function(e){this.m_grid.addRowsDef(e)};e.ReferenceGrid.prototype.appendAlertLevel=function(t,i){let n=t.getMaxAlertLevel();if(n!==e.AlertLevel.NORMAL){i.append("|[");i.append(e.isNull(n)?"<null>":n.getName());i.append("]")}};e.ReferenceGrid.prototype.appendAlertLevelToValue=function(t,i){if(e.XStringUtils.isNotNullAndNotEmpty(t.getExceptionName())){i.append(" [").appendInt(t.getAlertLevel()).append("]")}};e.ReferenceGrid.prototype.appendCurrencyUnit=function(t,i){if(e.notNull(t)&&!t.isEmpty()){i.append("|");if(t.isMixed()){i.append("M:")}else if(t.hasUnit()){i.append("U:")}else if(t.hasCurrency()){i.append("C:")}if(t.hasFormatted()){i.append(t.getFormatted())}else{i.append("<null>")}}};e.ReferenceGrid.prototype.appendInputReadiness=function(t,i,n){let r=t.getQueryModel().getQueryManager();if(r.supportsInputReadinessStates()&&t.getQueryModel().isDataEntryEnabled()){let r=t.getInputReadinessState();if(e.notNull(r)){let t=i.get(r.getIndex());let l=t.getInputReadinessTypes();let o=e.XList.create();for(let e=0;e<l.size();e++){o.add(l.get(e).getShortcut())}n.append("|S:").append(e.XCollectionUtils.join(o,","))}}};e.ReferenceGrid.prototype.appendPrefixValueSuffix=function(t,i,n){if(e.notNull(t)&&t.hasPrefix()){n.append(t.getPrefix()).append(" ")}n.append(this.formatDataCellValue(i));if(e.notNull(t)&&t.hasSuffix()){n.append(" ").append(t.getSuffix())}};e.ReferenceGrid.prototype.appendValueChanged=function(t,i){if(t.isValueChanged()){i.append("|N:");let n=t.getXValue();if(e.isNull(n)){i.append("<null>")}else{i.append(n.getValueType().getName());if(n.getValueType()===e.XValueType.STRING){i.append(" ").append(n.getString())}}}if(t.isNewValueForced()){i.append("|F:")}};e.ReferenceGrid.prototype.appendValueException=function(t,i){let n=t.getValueException();if(n!==e.ValueException.NORMAL){i.append("|");if(e.isNull(n)){i.append("<null>")}else{i.append(n.getName())}}};e.ReferenceGrid.prototype.enableTotals=function(t,i){let n;if(t===e.AxisType.ROWS){n=this.m_grid.getRowsDef(i)}else{n=this.m_grid.getColumnDef(i)}if(e.notNull(n)){n.setHasTotals(true)}};e.ReferenceGrid.prototype.exportBodyColumns=function(e,t,i,n){return this.exportToAsciiExt(e,false,t,0,-1,i,n)};e.ReferenceGrid.prototype.exportBodyRows=function(e,t,i,n){return this.exportToAsciiExt(e,t,false,i,n,0,-1)};e.ReferenceGrid.prototype.exportForProtocol=function(e){return this.exportToVizGrid()};e.ReferenceGrid.prototype.exportToAscii=function(e){return this.exportToAsciiExt(e,true,true,0,-1,0,-1)};e.ReferenceGrid.prototype.exportToAsciiExt=function(e,t,i,n,r,l,o){this.prepareCellStructure(t,i);return this.m_grid.exportToAsciiExt(e,t,i,n,r,l,o)};e.ReferenceGrid.prototype.exportToCsv=function(e,t){this.prepareCellStructure(true,true);return this.m_grid.exportToCsv(e,t)};e.ReferenceGrid.prototype.exportToFingerprint=function(){this.m_grid.setFingerprintMode();this.prepareCellStructure(true,true);return this.m_grid.getFingerprint()};e.ReferenceGrid.prototype.exportToVizGrid=function(){this.prepareCellStructure(true,true);let t=this.m_grid.getColumnCount();let i=this.m_grid.getRowCount();let n=e.PrFactory.createStructure();n.putString("Type","Grid");n.putInteger("RowCount",i);n.putInteger("ColCount",t);let r=n.putNewList("Cells");for(let n=0;n<i;n++){for(let i=0;i<t;i++){let t=r.addNewStructure();let l=this.m_grid.getSimpleCell(i,n);if(e.notNull(l)){t.putString("Type","Text");t.putString("Value",l.getText(50));if(!l.isLeftAligned()){t.putString("HAlign","End")}if(l.isTotals()){t.putBoolean("Totals",true)}let i=l.getCellType();if(i===e.RgCellType.HEADER){t.putString("Semantic","Header")}else if(i===e.RgCellType.TITLE){t.putString("Semantic","Title")}}else{t.putString("Type","Empty")}}}return n};e.ReferenceGrid.prototype.formatDataCellValue=function(e){return e.getFormattedValue()};e.ReferenceGrid.prototype.formatFieldValue=function(t){if(e.isNull(t)){return"[null]"}else{if(t.getValueType()===e.XValueType.DOUBLE||t.getValueType()===e.XValueType.DECIMAL_FLOAT&&t.getDecFloat().mayLoosePrecision()){let i=t.getDouble();return e.XNumberFormatter.formatDoubleToString(i,"#.0000")}else{return t.getFormattedValue()}}};e.ReferenceGrid.prototype.getCellValue=function(t,i){let n=i.getValueException();if(n===e.ValueException.NULL_VALUE||n===e.ValueException.UNDEFINED){return""}let r=null;if(n!==e.ValueException.NORMAL&&n!==e.ValueException.ZERO){r=n.getName()}let l=null;let o=i.getMaxAlertLevel();if(o!==e.AlertLevel.NORMAL){l=o.getName()}if(e.notNull(r)||e.notNull(l)){let i=e.XStringBuffer.create();i.append(t);if(e.notNull(l)){i.append(" [").append(l).append("]")}if(e.notNull(r)){i.append(" [").append(r).append("]")}return i.toString()}return t};e.ReferenceGrid.prototype.getCellValueWithDetails=function(t,i){let n=e.XStringBuffer.create();let r=t.getDataCell();if(e.notNull(r)){n.append("(DataCell->").append(r.getName()).append(")")}let l=t.getDecimalPlaces();if(l!==0){n.append("(Decimal Places=").appendInt(l).append(")")}if(t.isDataEntryEnabled()){n.append("I:")}if(t.isValueLocked()){n.append("L:")}let o=t.getCurrencyUnit();this.appendPrefixValueSuffix(o,t,n);this.appendValueException(t,n);this.appendAlertLevel(t,n);this.appendValueChanged(t,n);n.append("|").append(t.getValueType().getName());n.append("|").append(t.getFormatString());this.appendCurrencyUnit(o,n);this.appendInputReadiness(t,i,n);return n.toString()};e.ReferenceGrid.prototype.getColumnCount=function(){return this.m_grid.getColumnCount()};e.ReferenceGrid.prototype.getColumnDef=function(e){return this.m_grid.getColumnDef(e)};e.ReferenceGrid.prototype.getColumnMaxCharacters=function(e,t,i){return this.m_grid.getColumnMaxCharacters(e,t,i)};e.ReferenceGrid.prototype.getEffectiveFieldSize=function(e){let t=0;let i=e.getRsDimensions();let n=i.size();for(let e=0;e<n;e++){t=t+i.get(e).getResultSetFields().size()}return t};e.ReferenceGrid.prototype.getFingerprint=e.noSupport;e.ReferenceGrid.prototype.getFixedColumnsCount=function(){return this.m_grid.getFixedColumnsCount()};e.ReferenceGrid.prototype.getFixedHeight=function(){return this.m_grid.getFixedHeight()};e.ReferenceGrid.prototype.getFixedRowsCount=function(){return this.m_grid.getFixedRowsCount()};e.ReferenceGrid.prototype.getFixedWidth=function(){return this.m_grid.getFixedWidth()};e.ReferenceGrid.prototype.getRowCount=function(){return this.m_grid.getRowCount()};e.ReferenceGrid.prototype.getRowsDef=function(e){return this.m_grid.getRowsDef(e)};e.ReferenceGrid.prototype.getSimpleCell=function(e,t){return this.m_grid.getSimpleCell(e,t)};e.ReferenceGrid.prototype.hasCells=function(){return this.m_grid.hasCells()};e.ReferenceGrid.prototype.prepareCellStructure=function(t,i){if(this.m_grid.hasCells()===false&&e.notNull(this.m_resultSet)){this.prepareStructure(t,i)}};e.ReferenceGrid.prototype.prepareStructure=function(t,i){let n=this.m_resultSet.getColumnsAxis();let r=e.XMath.max(n.getDataCount(),n.getTuplesCount());let l=this.m_resultSet.getRowsAxis();if(i){this.m_grid.setFixedHeight(e.XMath.max(this.getEffectiveFieldSize(n),this.m_renderForFireflyGrid&&this.getEffectiveFieldSize(l)===0?0:1))}else{this.m_grid.setFixedHeight(0)}let o=l.getDataCount();let s=l.getTuplesCount();let a=e.XMath.max(o,s);if(t){this.m_grid.setFixedWidth(e.XMath.max(this.getEffectiveFieldSize(l),1))}else{this.m_grid.setFixedWidth(0)}let u=this.m_grid.getFixedWidth()+r;let p=this.m_grid.getFixedHeight()+a;this.m_offsetColumns=this.m_resultSet.getQueryManager().getOffsetColumns();this.m_offsetRows=this.m_resultSet.getQueryManager().getOffsetRows();this.m_grid.setFullSize(u,p);for(let t=0;t<u;t++){this.m_grid.addColumnsDef(e.XReferenceGridLine.create())}for(let t=0;t<p;t++){this.m_grid.addRowsDef(e.XReferenceGridLine.create())}if(t&&i){this.setTitleCells(l,e.XMath.max(this.getFixedHeight()-1,0),n.getRsDimensions().isEmpty());this.setTitleCells(n,e.XMath.max(this.getFixedWidth()-1,0),l.getRsDimensions().isEmpty())}if(t){let e=this.m_grid.getFixedHeight()-this.m_fixedHeightOff;this.setHeaderCells(l,e)}if(i){let e=this.m_grid.getFixedWidth()-this.m_fixedWidthOff;this.setHeaderCells(n,e)}this.setDataCells()};e.ReferenceGrid.prototype.prependToFirstField=function(t,i){let n=t.getDisplayLevel();let r=t.getDrillState();if(n>0||r!==e.DrillState.LEAF){let t=i.toString();i.clear();for(let e=0;e<n;e++){i.append("  ")}if(r===e.DrillState.COLLAPSED||r===e.DrillState.LEAF_DRILLDOWN_ALLOWED||r===e.DrillState.LEAF_UDH_EXPAND_ALLOWED||r===e.DrillState.COLLAPSED_EXPAND_AND_DRILLDOWN_ALLOWED){i.append("+ ")}else if(r===e.DrillState.EXPANDED||r===e.DrillState.DRILLED||r===e.DrillState.LEAF_UDH){i.append("- ")}i.append(t)}};e.ReferenceGrid.prototype.releaseObject=function(){this.m_resultSet=null;e.XObject.prototype.releaseObject.call(this)};e.ReferenceGrid.prototype.setCell=function(e,t,i,n){this.m_grid.setCell(e,t,i,n)};e.ReferenceGrid.prototype.setDataCells=function(){let t=this.m_resultSet.getInputReadinessStates();let i=this.m_resultSet.getDataColumns();let n=this.m_resultSet.getDataRows();let r=e.XStringBuffer.create();for(let l=0;l<n;l++){for(let n=0;n<i;n++){let i=this.m_resultSet.getDataCell(n,l);let o;if(this.m_withDetails){o=e.XReferenceGridCell.create(this.getCellValueWithDetails(i,t),e.RgCellType.DATA)}else{o=e.XReferenceGridCell.create(this.getCellValue(this.formatDataCellValue(i),i),e.RgCellType.DATA)}if(this.m_renderForFireflyGrid){r.clear();this.appendPrefixValueSuffix(i.getCurrencyUnit(),i,r);o.setDisplayValue(r.toString());o.setPart("Data");o.setAlertLeve(i.getMaxAlertLevel().getName());o.setIsInputEnabled(i.isDataEntryEnabled());let t=i.getDataCell();if(e.notNull(t)){let n=i.getQueryModel().getDataSource().getName();r.clear();let l=t.getReferenceStructureElement1();if(e.notNull(l)){r.append("mem-");r.append(l.getFieldValue(l.getDimension().getDisplayKeyField()).getString());if(l.getFieldValue(l.getDimension().getDisplayKeyField())!==null){o.setMember(l.getFieldValue(l.getDimension().getDisplayKeyField()).getString())}else{o.setMember(l.getName())}}l=t.getReferenceStructureElement2();if(e.notNull(l)){r.append("-mem-");r.append(l.getFieldValue(l.getDimension().getDisplayKeyField()).getString());if(l.getFieldValue(l.getDimension().getDisplayKeyField())!==null){o.setMember2(l.getFieldValue(l.getDimension().getDisplayKeyField()).getString())}else{o.setMember(l.getName())}}let s=r.toString();let a=i.getValueException().isValidValue()&&i.getValueException()!==e.ValueException.NULL_VALUE?e.XNumberFormatter.formatDoubleToString(i.getDouble(),"0.####"):"";r.clear();o.setDataValueId(e.XStringUtils.concatenate5(n,"-",s,"-",a))}o.setRow(l+this.m_grid.getFixedHeight()-this.m_fixedHeightOff+this.m_offsetRows);o.setColumn(n+this.m_grid.getFixedWidth()-this.m_fixedWidthOff+this.m_offsetColumns)}this.m_grid.setCell(n+this.m_grid.getFixedWidth()-this.m_fixedWidthOff,l+this.m_grid.getFixedHeight()-this.m_fixedHeightOff,o,false)}}};e.ReferenceGrid.prototype.setFingerprintMode=e.noSupport;e.ReferenceGrid.prototype.setFixedHeight=function(e){this.m_grid.setFixedHeight(e)};e.ReferenceGrid.prototype.setFixedWidth=function(e){this.m_grid.setFixedWidth(e)};e.ReferenceGrid.prototype.setFullSize=function(e,t){this.m_grid.setFullSize(e,t)};e.ReferenceGrid.prototype.setHeaderCells=function(t,i){let n=t.getRsDimensions();let r=t.getType();let l=t.getTuplesCount();let o=e.XStringBuffer.create();let s=e.XStringBuffer.create();let a=e.XReferenceGridCell.create(null,e.RgCellType.HEADER);let u=e.XReferenceGridCell.create(null,e.RgCellType.HEADER);for(let p=0;p<l;p++){let l=t.getTupleAt(p);let c=0;let g=false;let m=l.size();for(let f=0;f<m;f++){let m=n.get(f);let C=l.get(f);let d=m.getResultSetFields();let y=d.size();if(C.getFirstTuple()===l||this.m_renderForFireflyGrid===true){let n=C.getDimensionMember();o.clear();let a=n.getMemberType();if(a.isResult()&&a!==e.MemberType.OTHERS_FROM_CONDITIONS_RESULT){this.enableTotals(r,p+i);if(y>0){let f=0;if(!g){if(a===e.MemberType.CONDITION_RESULT){o.append("[Totals Included]");s.append("[Totals Included]")}else if(a===e.MemberType.CONDITION_OTHERS_RESULT){o.append("[Totals Remaining]");s.append("[Totals Remaining]")}else{o.append("[Totals]");s.append("[Totals]")}this.appendAlertLevelToValue(C,o);let u=e.XReferenceGridCell.create(o.toString(),e.RgCellType.HEADER);if(this.m_renderForFireflyGrid){if(C.getFirstTuple()===l){u.setDisplayValue(s.toString())}u.setDimension(m.getName());if(m.isStructure()&&n.getDimension().getStructureMember(n.getName()).getFieldValue(n.getDimension().getDisplayKeyField())!==null){u.setMember(n.getDimension().getStructureMember(n.getName()).getFieldValue(n.getDimension().getDisplayKeyField()).getString())}else{u.setMember(n.getName())}if(t===this.m_resultSet.getRowsAxis()){u.setPart("Rows");u.setRowTupleIndex(p)}else{u.setPart("Columns");u.setColumnTupleIndex(p)}}this.addCell(r,c,p,i,u);o.clear();s.clear();f=1}if(this.m_defineAllCells){c=c+f;for(let e=f;e<y;e++){this.addCell(r,c,p,i,u);c++}}else{c=c+y}}g=true}else{for(let a=0;a<y;a++){let u=n.getAllFieldValues().getByKey(d.get(a).getName());o.append(this.formatFieldValue(u));s.append(this.formatFieldValue(u));if(a===0){this.prependToFirstField(C,o);this.appendAlertLevelToValue(C,o)}let g=e.XReferenceGridCell.create(o.toString(),e.RgCellType.HEADER);if(this.m_renderForFireflyGrid){if(r===e.AxisType.ROWS){g.setPart("Rows")}else{g.setPart("Columns")}if(C.getFirstTuple()===l){g.setDisplayValue(s.toString())}g.setDimension(m.getName());if(m.isStructure()&&n.getDimension().getStructureMember(n.getName()).getFieldValue(n.getDimension().getDisplayKeyField())!==null){g.setMember(n.getDimension().getStructureMember(n.getName()).getFieldValue(n.getDimension().getDisplayKeyField()).getString())}else{g.setMember(n.getName())}if(t===this.m_resultSet.getRowsAxis()){g.setRowTupleIndex(p)}else{g.setColumnTupleIndex(p)}}if(a===0&&C.getFirstTuple()===l){g.setDisplayLevel(C.getDisplayLevel());let t=C.getDrillState();let i="";if(t===e.DrillState.EXPANDED||t===e.DrillState.DRILLED){g.setDrillState("Expanded");if(m.getLowerLevelNodeAlignment()===e.Alignment.CHILDREN_ABOVE_PARENT){if(r===e.AxisType.ROWS){i="sap-icon://slim-arrow-up"}else{i="sap-icon://slim-arrow-left"}}else{if(r===e.AxisType.ROWS){i="sap-icon://slim-arrow-down"}else{i="sap-icon://slim-arrow-down"}}}else if(t===e.DrillState.COLLAPSED||t===e.DrillState.LEAF_UDH_EXPAND_ALLOWED){g.setDrillState("Collapsed");if(m.getLowerLevelNodeAlignment()===e.Alignment.CHILDREN_ABOVE_PARENT){if(r===e.AxisType.ROWS){i="sap-icon://slim-arrow-right"}else{i="sap-icon://slim-arrow-up"}}else{if(r===e.AxisType.ROWS){i="sap-icon://slim-arrow-right"}else{i="sap-icon://slim-arrow-right"}}}else{g.setDrillState("None");i=""}g.setIcon(i)}o.clear();s.clear();this.addCell(r,c,p,i,g);c++}}}else{if(this.m_defineAllCells){for(let e=0;e<y;e++){this.addCell(r,c,p,i,a);c++}}else{c=c+y}}}}};e.ReferenceGrid.prototype.setTitleCells=function(t,i,n){let r=t.getType();let l=t.getRsDimensions();let o=0;let s=e.XStringBuffer.create();let a=e.XStringBuffer.create();let u=l.size();for(let t=0;t<u;t++){let p=l.get(t);let c=p.getResultSetFields();let g=c.size();for(let l=0;l<g;l++){let g=c.get(l).getName();if(e.XStringUtils.isNullOrEmpty(p.getName())){s.append("[").append(g).append("]")}else{if(l===0){a.append(p.getText())}if(p.isMeasureStructure()){if(l===0){s.append("Measures")}}else if(p.isStructure()){if(l===0){s.append("Structure")}}else{if(l===0){s.append(p.getName()).append(".[")}else{s.append("[")}s.append(g).append("]")}}if(r===e.AxisType.ROWS){if(!(this.m_renderForFireflyGrid&&p.isStructure()&&u===t+1)){let t=e.XReferenceGridCell.create(s.toString(),e.RgCellType.TITLE);t.setDisplayValue(a.toString());t.setDimension(p.getName());t.setPart("Rows");t.setRow(i);t.setColumn(o);this.m_grid.setCell(o,i,t,false)}else if(n&&!this.m_renderForFireflyGrid){this.m_fixedHeightOff=1}}else{if(!(this.m_renderForFireflyGrid&&p.isStructure()&&u===t+1)){let t=this.m_grid.getSimpleCell(i,o);if(e.notNull(t)){let i=s.toString();s.clear();a.clear();s.append(t.toString());s.append(e.ReferenceGrid.MAGIC_CELL_DIV);s.append(i);if(this.m_renderForFireflyGrid){a.append(t.getDisplayValue())}if(l===0&&!p.isStructure()){a.append(e.ReferenceGrid.MAGIC_CELL_DIV);a.append(p.getText())}}let n=e.XReferenceGridCell.create(s.toString(),e.RgCellType.TITLE);if(this.m_renderForFireflyGrid){n.setRow(i);n.setColumn(o);n.setDisplayValue(a.toString());if(e.notNull(t)){n.setPart("Mixed")}else{n.setPart("Columns")}if(e.notNull(t)){n.setDimension(t.getDimension())}else{n.setDimension(p.getName())}}else{n.setDimension(p.getName())}this.m_grid.setCell(i,o,n,true)}else if(n){this.m_fixedWidthOff=1}}s.clear();a.clear();o++}}};e.ReferenceGrid.prototype.setupSimpleGrid=function(t,i,n){this.setup();this.m_withDetails=i;this.m_defineAllCells=n;this.m_resultSet=t;this.m_grid=e.XReferenceGrid.create()};e.RsHiChartBoxplotHelper=function(){};e.RsHiChartBoxplotHelper.prototype=new e.RsHiChartSeriesHelper;e.RsHiChartBoxplotHelper.prototype._ff_c="RsHiChartBoxplotHelper";e.RsHiChartBoxplotHelper.prototype.finishRendering=function(){};e.RsHiChartBoxplotHelper.prototype.prepareRendering=function(){};e.RsHiChartBoxplotHelper.prototype.readResultSetData=function(t,i,n){let r=this.getChartData();let l=r.putNewList(e.VizDefConstants.K_X_AXIS);let o=l.addNewStructure();let s=r.putNewStructure(e.VizDefConstants.K_LANG);let a=e.XInteger.convertToString(t.getDecimalPlaces(e.VizDefConstants.K_VALUE_AXIS));if(n.getAvailableDataCellCount()>0){let l=r.putNewList(e.VizDefConstants.K_SERIES);let s=e.XStringBuffer.create();s.append("<b>{series.name}</b><br/><b>Distribution</b> <br/>");s.append("Maximum: {point.high:,.");s.append(a);s.append("f} <br/>Upper Quartile: {point.q3:,.");s.append(a);s.append("f} <br/>Median: {point.median:,.");s.append(a);s.append("f} <br/>Lower Quartile: {point.q1:,.");s.append(a);s.append("f} <br/>Minimum: {point.low:,.");s.append(a);s.append("f}");let u=o.putNewList(e.VizDefConstants.K_CATEGORIES);let p=i.getPrettyNamesForFeed(true,false,e.VizDefConstants.K_CATEGORY_AXIS);let c=e.XList.create();c.add(e.VizDefConstants.K_VALUE_AXIS);c.add(e.VizDefConstants.K_VALUE_AXIS2);c.add(e.VizDefConstants.K_VARIANCE);for(let e=0;e<p.size();e++){u.addString(p.get(e))}let g=t.getPrettyNamesForFeeds(true,false,c).size();let m=t.getIndicesByFeedOrder(c);let f=e.VizDefConstants.V_FEED_COLOR;c.add(e.VizDefConstants.K_COLOR);let C=t.getPrettyNamesForFeed(true,false,e.VizDefConstants.K_COLOR);let d=C.size()<2;if(t.hasTupleForFeed(e.VizDefConstants.V_FEED_DATA_CONTEXT)&&t.getPrettyNamesForFeed(true,false,e.VizDefConstants.V_FEED_DATA_CONTEXT).size()>1){f=e.VizDefConstants.V_FEED_DATA_CONTEXT;g=t.getPrettyNamesForFeeds(true,false,c).size()}let y=e.XList.create();let h=-1;for(let r=0;r<m.size();r++){let o=m.get(r);if(y.contains(o)){continue}h=h+1;let u=o.getInteger();let C=t.getTupleAt(u);let _=C.getMemberKeysForFeedsOtherThan(f);let T=t.getTupleIndexForMemberNames(_);y.addAll(T);this.setShowLegend(g>1);let S=C.getPrettyText(c);let R=l.addNewStructure();let D=R.putNewList(e.VizDefConstants.K_DATA);let A=R.putNewStructure(e.VizDefConstants.K_TOOLTIP);A.putString(e.VizDefConstants.K_POINT_FORMAT,s.toString());A.putString(e.VizDefConstants.K_HEADER_FORMAT,"");R.putBoolean(e.VizDefConstants.K_SHOW_IN_LEGEND,true);R.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.V_CHART_TYPE_BOXPLOT);R.putString(e.VizDefConstants.K_NAME,S);let E=l.addNewStructure();E.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_SCATTER);E.putString(e.VizDefConstants.K_NAME,S);E.putString("linkedTo",":previous");let V=E.putNewStructure(e.VizDefConstants.K_MARKER);V.putString(e.VizDefConstants.K_FILL_COLOR,e.VizDefConstants.K_TRANSPARENT);V.putInteger(e.VizDefConstants.K_LINE_WIDTH,1);let N=E.putNewList(e.VizDefConstants.K_DATA);let x=E.putNewStructure(e.VizDefConstants.K_TOOLTIP);x.putString(e.VizDefConstants.K_POINT_FORMAT,e.XStringUtils.concatenate3("<b>{series.name}</b><br/><b>Outliers</b><br/><br/> {point.categoryName}: {point.y:,.",a,"f}"));x.putString(e.VizDefConstants.K_HEADER_FORMAT,"");if(d){this.addColorAndPattern(C.getColor(),C.getPattern(),R,e.VizDefConstants.V_CHART_TYPE_BOXPLOT,false);this.addColorAndPattern(C.getColor(),C.getPattern(),E,e.VizDefConstants.K_SCATTER,true);V.putString(e.VizDefConstants.K_LINE_COLOR,this.getCurrentColor())}else{V.putString(e.VizDefConstants.K_LINE_COLOR,this.getColorAt(0))}for(let r=0;r<i.getTuplesCount();r++){if(!i.getTupleAt(r).isSelectedByString(e.VizDefConstants.K_CATEGORY_AXIS)){continue}if(i.getTupleAt(r).isTotal()){continue}let l=e.XList.create();for(let i=0;i<T.size();i++){let o=T.get(i).getInteger();let s=t.getTupleAt(u);if(!s.isSelectedByString(e.VizDefConstants.K_VALUE_AXIS)){continue}let a=n.getDataCell(o,r);let p=0;let c=a.getValueType();if(c===e.XValueType.DOUBLE||c===e.XValueType.DECIMAL_FLOAT){if(a.getXValue()!==null){p=t.getScaledValue(e.VizDefConstants.K_VALUE_AXIS,s,a);l.add(e.XDoubleValue.create(p))}}}if(l.size()===0){continue}l.sortByComparator(e.XComparatorDouble.create());let o=D.addNewStructure();let s=0;let a=0;let c=0;let m=0;let f=0;let y=0;let _=0;let S=l.size()-1;let R=S/4;let A=S/2;let E=S*3/4;s=l.get(e.XDouble.convertToInt(R)).getDouble();m=l.get(e.XDouble.convertToInt(A)).getDouble();a=l.get(e.XDouble.convertToInt(E)).getDouble();c=(a-s)*1.5;_=l.get(0).getDouble();y=l.get(l.size()-1).getDouble();for(let t=0;t<l.size();t++){f=l.get(t).getDouble();if(a+c<f||s-c>f){let t=N.addNewStructure();t.putDouble(e.VizDefConstants.K_X,r-.25+(.5+h)/g/2);t.putDouble(e.VizDefConstants.K_Y,f);t.putString(e.VizDefConstants.K_CATEGORY_NAME,p.get(r));if(d){this.addColorAndPattern(C.getColor(),C.getPattern(),t,e.VizDefConstants.K_SCATTER,true)}}else{if(f<y){y=f}if(f>_){_=f}}}o.putDouble("low",y);o.putDouble("q1",s);o.putDouble("median",m);o.putDouble("q3",a);o.putDouble("high",_);if(d){this.addColorAndPattern(C.getColor(),C.getPattern(),o,e.VizDefConstants.K_SCATTER,true)}}}}else{r.putBoolean(e.VizDefConstants.K_FULL_SCREEN_ENABLED,false);s.putString(e.VizDefConstants.K_NO_DATA,"Firefly Resultset is Empty.")}};e.RsHiChartCategorialSeriesHelper=function(){};e.RsHiChartCategorialSeriesHelper.prototype=new e.RsHiChartSeriesHelper;e.RsHiChartCategorialSeriesHelper.prototype._ff_c="RsHiChartCategorialSeriesHelper";e.RsHiChartCategorialSeriesHelper.prototype.addValue=function(t,i,n,r,l,o,s,a,u,p,c,g,m,f,C,d,y){let h=0;let _=n.getValueType();let T=i.addNewStructure();if(n.getComplexUnit()!==null&&e.XString.isEqual(n.getComplexUnit().getUnitValues().get(0),"*")){return}if(_===e.XValueType.DOUBLE||_===e.XValueType.DECIMAL_FLOAT||_===e.XValueType.PERCENT){if(n.getXValue()!==null){h=r.getScaledValue(t,l,n);if(h>this.getMaxYValue()){this.setMaxYValue(h)}T.putDouble(e.VizDefConstants.K_Y,h);T.putString(e.VizDefConstants.K_Y_FORMATTED,r.getFormattedValue(t,l,n))}else{T.putString(e.VizDefConstants.K_Y,null);T.putString(e.VizDefConstants.K_Y_FORMATTED,null)}if(d){this.addColorAndPattern(l.getColor(),l.getPattern(),T,y,true)}T.putString(e.VizDefConstants.K_NAME,o);if(e.notNull(c)){let t=this.getFormattedCategoriesForTooltip(p,c);if(e.notNull(t)){T.putString("formattedCategories",t)}}}if(e.notNull(s)){let t=s.addNewList();t.addDouble(a);t.addDouble(u);if(a<u){T.putString(e.VizDefConstants.K_ERROR_RANGE,e.XStringUtils.concatenate3(f," .. ",C))}else{T.putString(e.VizDefConstants.K_ERROR_RANGE,e.XStringUtils.concatenate3(C," .. ",f))}}if(e.XCollectionUtils.hasElements(g)){for(let t=0;t<g.size();t++){T.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_HEADER,e.XInteger.convertToString(t)),g.get(t))}}if(e.XCollectionUtils.hasElements(m)){for(let t=0;t<m.size();t++){T.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_FORMATTED,e.XInteger.convertToString(t)),m.get(t))}}};e.RsHiChartCategorialSeriesHelper.prototype.createCategoryStructureRec=function(t,i,n){if(e.XCollectionUtils.hasElements(t)){let r=t.get(0).getText();let l=e.XStringUtils.concatenate2(t.get(0).getKey(),t.get(0).getHierarchyNavigation());let o=t.get(0).getDrillState();t.removeAt(0);let s=n.getByKey(l);if(e.isNull(s)||e.DrillState.LEAF.isEqualTo(o)){s=i.addNewStructure();s.putString(e.VizDefConstants.K_NAME,r);if(t.size()>0){s.putNewList(e.VizDefConstants.K_CATEGORIES)}n.put(l,s)}if(t.size()===1){s.getListByKey(e.VizDefConstants.K_CATEGORIES).addString(t.get(0).getText())}if(t.size()>1){this.createCategoryStructureRec(t,s.getListByKey(e.VizDefConstants.K_CATEGORIES),n)}}};e.RsHiChartCategorialSeriesHelper.prototype.fillCategories=function(e,t,i){for(let n=0;n<e.size();n++){let r=e.get(n);this.createCategoryStructureRec(r,t,i)}};e.RsHiChartCategorialSeriesHelper.prototype.finishRendering=function(){};e.RsHiChartCategorialSeriesHelper.prototype.getFormattedCategoriesForTooltip=function(t,i){let n=e.XStringBuffer.create();if(t.size()===i.size()){for(let r=0;r<t.size();r++){if(r!==0){n.append("<br/>")}n.append(e.XStringUtils.concatenate3(t.get(r),": ",i.get(r)))}}return n.toString()};e.RsHiChartCategorialSeriesHelper.prototype.prepareRendering=function(){};e.RsHiChartCategorialSeriesHelper.prototype.readResultSetData=function(t,i,n){let r=this.getChartData();let l;let o;let s;let a;let u=null;let p=false;let c=false;let g=r.putNewList(e.VizDefConstants.K_X_AXIS);let m=g.addNewStructure();m.putInteger(e.VizDefConstants.K_TICK_WIDTH,1);let f=r.putNewStructure(e.VizDefConstants.K_LANG);let C=r.putNewList(e.VizDefConstants.K_SERIES);let d=r.getStructureByKey(e.VizDefConstants.K_EXPLICIT_COLOR_ASSIGNMENTS);if(e.notNull(d)){r.getListByKey(e.VizDefConstants.K_COLORS).clear()}let y=e.XStringBuffer.create();y.append("<b>{series.name}</b>: {point.yFormatted}<br/>");y.append("{point.formattedCategories}");if(n.getAvailableDataCellCount()>0){let r=true;let g=i.getFormattedNamesForFeed(true,!c,e.VizDefConstants.K_CATEGORY_AXIS);let d=i.getCategoryObjects(false,!c,e.VizDefConstants.K_CATEGORY_AXIS);if(g.size()===0){g=i.getFormattedNames(true,!c);r=false}let h=e.XList.create();h.add(e.VizDefConstants.K_VALUE_AXIS);h.add(e.VizDefConstants.K_VALUE_AXIS2);h.add(e.VizDefConstants.K_VARIANCE);let _=e.XList.create();_.add(e.VizDefConstants.K_CATEGORY_AXIS);let T=t.getPrettyNamesForFeed(true,!c,e.VizDefConstants.K_COLOR);let S=t.getPrettyNamesForFeeds(true,!c,h);let R=T.size()<2;let D=g.size();let A=i.getDimensionsForFeed(e.VizDefConstants.K_CATEGORY_AXIS);if(D>0){let t=m.putNewList(e.VizDefConstants.K_CATEGORIES);let i=e.XHashMapByString.create();this.fillCategories(d,t,i)}else{m.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_CATEGORY)}let E=m.putNewStructure(e.VizDefConstants.K_TITLE);let V=E.putNewStructure(e.VizDefConstants.K_STYLE);V.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_FONT_WEIGHT_BOLD);E.putString(e.VizDefConstants.K_TEXT,e.XCollectionUtils.join(A,", "));let N=e.XList.create();if(T.size()>1){N.add(e.VizDefConstants.K_COLOR)}if(S.size()>1){N.addAll(h)}let x=t.getPrettyNamesForFeed(true,false,e.VizDefConstants.K_TOOLTIP_VALUE_AXIS);for(let t=0;t<x.size();t++){y.append("<b>{point.tHeader");y.append(e.XInteger.convertToString(t));y.append("}</b>  {point.tFormatted");y.append(e.XInteger.convertToString(t));y.append("}<br/>")}y.append("{point.errorRange}");let P=t.getIndicesByFeedOrder(h);this.setShowLegend(true);for(let g=0;g<P.size();g++){let m=P.get(g).getInteger();let f=t.getTupleAt(m);if(!f.isSelectedByList(h)){continue}o=C.addNewStructure();let d=f.isSelectedByString(e.VizDefConstants.K_VARIANCE);let y=!d&&f.isSelectedByString(e.VizDefConstants.K_VALUE_AXIS2);let _=y?1:d?this.isCombinationChart()?2:1:0;u=d?"Δ":f.getPrettyText(N);o.putBoolean(e.VizDefConstants.K_ANIMATION,false);o.putString(e.VizDefConstants.K_NAME,u);let T=d?"":f.getPrettyText(h);let S=y?this.getSecondChart():this.getChartType();o.putString(e.VizDefConstants.K_TYPE,S);o.putInteger(e.VizDefConstants.K_Y_AXIS,_);let E=d?e.VizDefConstants.K_VARIANCE:y?e.VizDefConstants.K_VALUE_AXIS2:e.VizDefConstants.K_VALUE_AXIS;o.putString(e.VizDefConstants.K_AXIS,E);p=p||d;l=o.putNewList(e.VizDefConstants.K_DATA);let V=f.getMemberKeys();a=null;let L=m;let I=m;let b=false;let z=null;let O=null;if(e.XCollectionUtils.hasElements(V)){z=t.getMatchingTupleIndicesForMemberNameAndFeed(V,e.VizDefConstants.K_TOOLTIP_VALUE_AXIS);let i=t.getMatchingTupleIndicesForMemberNamesAndSuffix(V,e.VizDefConstants.K_ERRORBAR_MIN);if(i!==-1){L=i;b=true}i=t.getMatchingTupleIndicesForMemberNamesAndSuffix(V,e.VizDefConstants.K_ERRORBAR_MAX);if(i!==-1){I=i;b=true}if(b){s=C.addNewStructure();a=s.putNewList(e.VizDefConstants.K_DATA);s.putInteger(e.VizDefConstants.K_Y_AXIS,_);s.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_ERRORBAR);s.putStringNotNullAndNotEmpty(e.VizDefConstants.K_COLOR,t.getTupleAt(e.XMath.max(L,I)).getColor())}}let F;let M=0;let v=0;let U="";let X="";if(R){this.addColorAndPattern(f.getColor(),f.getPattern(),o,S,false)}if(D>0){for(let o=0;o<i.getTuplesCount();o++){if(r&&!i.getTupleAt(o).isSelectedByString(e.VizDefConstants.K_CATEGORY_AXIS)){continue}if(!c||!i.getTupleAt(o).isTotal()){if(b){M=t.getScaledValue(E,t.getTupleAt(L),n.getDataCell(L,o));U=t.getFormattedValue(E,t.getTupleAt(L),n.getDataCell(L,o));v=t.getScaledValue(E,t.getTupleAt(I),n.getDataCell(I,o));X=t.getFormattedValue(E,t.getTupleAt(I),n.getDataCell(I,o))}if(e.XCollectionUtils.hasElements(z)){O=e.XList.create();for(let e=0;e<z.size();e++){let i=z.get(e).getInteger();O.add(t.getFormattedValue("",t.getTupleAt(i),n.getDataCell(i,o)))}}F=n.getDataCell(m,o);let r=e.XList.create();r.add(e.VizDefConstants.K_CATEGORY_AXIS);let s=i.getTupleAt(o).getCategories(r);this.addValue(E,l,F,t,f,T,a,M,v,A,s,x,O,U,X,R,S)}}}else if(n.getDataRows()>0){for(let i=0;i<n.getDataRows();i++){if(b){M=t.getScaledValue(E,t.getTupleAt(L),n.getDataCell(L,i));U=t.getFormattedValue(E,t.getTupleAt(L),n.getDataCell(L,i));v=t.getScaledValue(E,t.getTupleAt(I),n.getDataCell(I,i));X=t.getFormattedValue(E,t.getTupleAt(I),n.getDataCell(I,i))}if(e.XCollectionUtils.hasElements(z)){O=e.XList.create();for(let e=0;e<z.size();e++){let r=z.get(e).getInteger();O.add(t.getFormattedValue("",t.getTupleAt(r),n.getDataCell(r,i)))}}F=n.getDataCell(m,i);this.addValue(E,l,F,t,f,T,a,M,v,A,null,x,O,U,X,R,S)}}}this.setChartWidth(e.XMath.max(D,1));this.setWidthScale(1);if(e.XStringUtils.isNullOrEmpty(this.getStackingType())||!e.XString.isEqual(this.getChartType(),e.VizDefConstants.V_CHART_TYPE_BAR)&&!e.XString.isEqual(this.getChartType(),e.VizDefConstants.V_CHART_TYPE_COLUMN)){let t=this.isCombinationChart()?2:1;if(D>1){this.setWidthScale(P.size()/t)}else if(T.size()>1){this.setWidthScale(e.XMath.max(1,S.size()/t))}}if(C.size()===0){f.putString(e.VizDefConstants.K_NO_DATA,"At least one measure is required to build a chart.")}}let h=r.putNewStructure(e.VizDefConstants.K_TOOLTIP);h.putString(e.VizDefConstants.K_POINT_FORMAT,y.toString());h.putString(e.VizDefConstants.K_HEADER_FORMAT,"");this.setHasVariance(p)};e.RsHiChartClusterBubbleHelper=function(){};e.RsHiChartClusterBubbleHelper.prototype=new e.RsHiChartCovariationHelper;e.RsHiChartClusterBubbleHelper.prototype._ff_c="RsHiChartClusterBubbleHelper";e.RsHiChartClusterBubbleHelper.prototype.decorateToolTip=function(e){e.append("<b>{point.name}</b>: {point.valueFormatted} <br/>")};e.RsHiChartClusterBubbleHelper.prototype.finishRendering=function(){let t=this.getChartData();let i=t.putNewList(e.VizDefConstants.K_SERIES);let n=e.PrFactory.createList();n.addAll(this.getXList());n.addAll(this.getYList());n.addAll(this.getZList());let r=e.PrFactory.createList();r.addAll(this.getXListFormatted());r.addAll(this.getYListFormatted());r.addAll(this.getZListFormatted());let l=e.XList.create();l.addAll(this.getXMeasures());l.addAll(this.getYMeasures());l.addAll(this.getZMeasures());for(let t=0;t<n.size();t++){let o=i.addNewStructure();let s=o.putNewList(e.VizDefConstants.K_DATA);o.putString(e.VizDefConstants.K_NAME,this.getColorList().get(t));let a=n.getListAt(t);let u=r.getListAt(t);for(let i=0;i<a.size();i++){let n=s.addNewStructure();n.putDouble(e.VizDefConstants.K_VALUE,a.getDoubleAt(i));n.putString(e.VizDefConstants.K_VALUE_FORMATTED,u.getStringAt(i));if(e.XCollectionUtils.hasElements(l)){n.putString(e.VizDefConstants.K_NAME,l.get(0))}else{n.putString(e.VizDefConstants.K_NAME,"")}this.addToolTipsToSeries(n,t,i)}}};e.RsHiChartClusterBubbleHelper.prototype.getXFeed=function(){return e.VizDefConstants.K_VALUE_AXIS};e.RsHiChartClusterBubbleHelper.prototype.getYFeed=function(){return e.VizDefConstants.K_VALUE_AXIS2};e.RsHiChartClusterBubbleHelper.prototype.getZFeed=function(){return e.VizDefConstants.K_BUBBLE_WIDTH};e.RsHiChartClusterBubbleHelper.prototype.prepareRendering=function(){};e.RsHiChartClusterBubbleHelper.prototype.reiterateResultSet=function(t,i,n){let r=this.getChartData();let l=r.putNewList(e.VizDefConstants.K_Y_AXIS);let o=l.addNewStructure();let s=r.putNewList(e.VizDefConstants.K_X_AXIS);let a=s.addNewStructure();let u=!n.getQueryModel().getRowsAxis().isTotalsVisible();let p=null;if(this.getVizDef()!==null){p=this.getVizDef().getStructureByKey(e.VizDefConstants.K_CHART).getStructureByKey(e.VizDefConstants.K_PROPERTIES);if(e.notNull(p)){let t=p.getStructureByKey(e.VizDefConstants.K_CATEGORY_AXIS);if(e.notNull(t)){e.RsHiChartUtils.axisPloter(t,a,this.getChartType(),true)}let i=p.getStructureByKey(e.VizDefConstants.K_VALUE_AXIS);if(e.notNull(i)){o=e.RsHiChartUtils.axisPloter(i,o,this.getChartType(),false)}}}e.RsHiChartVizUtilsSimple.legendStyler(r);let c=e.PrFactory.createStructure();c=r.getStructureByKey(e.VizDefConstants.K_PLOT_OPTIONS);let g=e.VizDefConstants.K_TRANSPARENT;if(r.getListByKey(e.VizDefConstants.K_COLORS)!==null){if(r.getListByKey(e.VizDefConstants.K_COLORS).size()>0){g=r.getListByKey(e.VizDefConstants.K_COLORS).getStringAt(0)}}if(e.isNull(c)){c=r.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS)}if(!e.XString.isEqual(this.getStackingType(),null)){e.RsHiChartVizUtilsSimple.dataLabelAlignment(o,this.getChartType(),t.getDecimalPlaces(this.getXFeed()),false)}let m=t.getPrettyNamesForFeed(true,!u,e.VizDefConstants.K_VALUE_AXIS);let f=e.XCollectionUtils.join(m,",");e.RsHiChartVizUtilsSimple.plotOptionChart(o,this.getChartType(),this.getStackingType(),c,0,g,f);e.RsHiChartVizUtilsSimple.dataLabelAlignment(o,this.getChartType(),t.getDecimalPlaces(this.getXFeed()),false)};e.RsHiChartCorrelationHelper=function(){};e.RsHiChartCorrelationHelper.prototype=new e.RsHiChartCovariationHelper;e.RsHiChartCorrelationHelper.prototype._ff_c="RsHiChartCorrelationHelper";e.RsHiChartCorrelationHelper.prototype.addPadding=function(t,i){let n=false;let r=0;let l=0;let o;let s;let a;let u;for(o=0;o<t.size();o++){u=t.getListAt(o);for(s=0;s<u.size();s++){a=u.getDoubleAt(s);if(!n||a>l){l=a}if(!n||a<r){r=a}n=true}}let p=(l-r)/10;if(l+p<0){i.putDouble(e.VizDefConstants.K_MAX,0)}else{i.putDouble(e.VizDefConstants.K_MAX_PADDING,.05)}if(r-p>0){i.putDouble(e.VizDefConstants.K_MIN,0)}else{i.putDouble(e.VizDefConstants.K_MIN_PADDING,.05)}};e.RsHiChartCorrelationHelper.prototype.decorateToolTip=function(t){t.append("<b>{point.name}</b> <br/>");t.append("<b>{point.SeriesX}</b>: {point.xFormatted} <br/>");t.append("<b>{point.SeriesY}</b>: {point.yFormatted} <br/>");if(e.XCollectionUtils.hasElements(this.getZMeasures())){t.append("<b>{point.SeriesZ}</b>: {point.zFormatted} <br/>")}};e.RsHiChartCorrelationHelper.prototype.finishRendering=function(){let t=this.getChartData();let i=t.putNewList(e.VizDefConstants.K_SERIES);let n=this.getXList();let r=this.getYList();let l=this.getZList();let o=this.getXListFormatted();let s=this.getYListFormatted();let a=this.getZListFormatted();let u=e.XCollectionUtils.hasElements(this.getXMeasures())?this.getXMeasures().get(0):"";let p=e.XCollectionUtils.hasElements(this.getYMeasures())?this.getYMeasures().get(0):"";let c=e.XCollectionUtils.hasElements(this.getZMeasures())?this.getZMeasures().get(0):"";if(e.XStringUtils.isNotNullAndNotEmpty(u)||e.XStringUtils.isNotNullAndNotEmpty(p)){let t=this.getChartData().getListByKey(e.VizDefConstants.K_X_AXIS).getStructureAt(0).getStructureByKey(e.VizDefConstants.K_TITLE);t.putString(e.VizDefConstants.K_TEXT,u);let i=this.getChartData().getListByKey(e.VizDefConstants.K_Y_AXIS).getStructureAt(0).getStructureByKey(e.VizDefConstants.K_TITLE);i.putString(e.VizDefConstants.K_TEXT,p)}let g=0;let m=0;let f=0;let C="0";let d="0";let y="0";let h=e.PrFactory.createList();let _=e.PrFactory.createList();for(let t=0;t<e.XMath.min(n.size(),r.size());t++){let T=i.addNewStructure();let S=T.putNewList(e.VizDefConstants.K_DATA);T.putString(e.VizDefConstants.K_TYPE,this.getChartType());if(e.XCollectionUtils.hasElements(this.getColorList())&&this.getColorList().size()>t){T.putString(e.VizDefConstants.K_NAME,this.getColorList().get(t))}else{T.putString(e.VizDefConstants.K_NAME,"")}T.putBoolean(e.VizDefConstants.K_SIZE_BY_ABSOLUTE_VALUE,true);let R=n.getListAt(t);let D=o.getListAt(t);let A=r.getListAt(t);let E=s.getListAt(t);if(l.size()>0){h=l.getListAt(t)}if(a.size()>0){_=a.getListAt(t)}for(let i=0;i<this.getCategoriesList().size();i++){let n=e.PrFactory.createStructure();f=R.getDoubleAt(i);m=A.getDoubleAt(i);y=D.getStringAt(i);d=E.getStringAt(i);let r=this.getCategoriesList().get(i);n.putString(e.VizDefConstants.K_NAME,r);n.putDouble(e.VizDefConstants.K_X,f);n.putDouble(e.VizDefConstants.K_Y,m);n.putString(e.VizDefConstants.K_X_FORMATTED,y);n.putString(e.VizDefConstants.K_Y_FORMATTED,d);if(e.notNull(h)){if(h.size()>i){g=h.getDoubleAt(i);n.putDouble(e.VizDefConstants.K_Z,g)}}if(e.notNull(_)){if(_.size()>i){C=_.getStringAt(i);n.putString(e.VizDefConstants.K_Z_FORMATTED,C)}}n.putString(e.VizDefConstants.K_SERIES_X,u);n.putString(e.VizDefConstants.K_SERIES_Y,p);n.putString(e.VizDefConstants.K_SERIES_Z,c);if(!(g===0&&f===0&&m===0)){S.add(n)}this.addToolTipsToSeries(n,t,i)}}};e.RsHiChartCorrelationHelper.prototype.getXFeed=function(){return e.VizDefConstants.K_VALUE_AXIS};e.RsHiChartCorrelationHelper.prototype.getYFeed=function(){return e.VizDefConstants.K_VALUE_AXIS2};e.RsHiChartCorrelationHelper.prototype.getZFeed=function(){return e.VizDefConstants.K_BUBBLE_WIDTH};e.RsHiChartCorrelationHelper.prototype.prepareRendering=function(){};e.RsHiChartCorrelationHelper.prototype.reiterateResultSet=function(t,i,n){let r=this.getChartData();let l=this.getVizDef();let o="#FFAA49";let s="Dash";let a=r.putNewList(e.VizDefConstants.K_Y_AXIS);let u=r.putNewList(e.VizDefConstants.K_X_AXIS);let p=u.addNewStructure();let c=a.addNewStructure();if(e.notNull(l)){e.RsHiChartVizUtilsSimple.addReferenceLine(l,p,c,t,i,n);if(l.containsKey(e.VizDefConstants.K_BUBBLE_STYLING)){let t=l.getStructureByKey(e.VizDefConstants.K_BUBBLE_STYLING);if(e.notNull(t)){s=t.getStringByKey(e.VizDefConstants.K_PATTERN);o=t.getStringByKey(e.VizDefConstants.K_COLOR)}}}let g=r.getStructureByKey(e.VizDefConstants.K_CHART);g.putString(e.VizDefConstants.K_TYPE,this.getChartType());let m=g.putNewStructure(e.VizDefConstants.K_STYLE);m.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");m.putString(e.VizDefConstants.K_FONT_SIZE,"13px");g.putInteger(e.VizDefConstants.K_MARGIN_TOP,100);let f=null;if(e.notNull(l)){f=l.getStructureByKey(e.VizDefConstants.K_CHART).getStructureByKey(e.VizDefConstants.K_PROPERTIES).getStructureByKey(e.VizDefConstants.K_VALUE_AXIS)}e.RsHiChartVizUtilsCorrelation.renderValueAxis(p,f,false);if(e.notNull(l)){f=l.getStructureByKey(e.VizDefConstants.K_CHART).getStructureByKey(e.VizDefConstants.K_PROPERTIES).getStructureByKey(e.VizDefConstants.K_VALUE_AXIS2)}e.RsHiChartVizUtilsCorrelation.renderValueAxis(c,f,true);let C=r.getStructureByKey(e.VizDefConstants.K_LEGEND);C.putBoolean(e.VizDefConstants.K_SQUARE_SYMBOL,true);C.putString(e.VizDefConstants.K_LAYOUT,e.VizDefConstants.V_VERTICAL);C.putInteger(e.VizDefConstants.K_MAX_HEIGHT,50);C.putInteger(e.VizDefConstants.K_Y,20);C.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_CENTER);C.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);let d=C.putNewStructure(e.VizDefConstants.K_ITEM_STYLE);d.putString(e.VizDefConstants.K_FONT_SIZE,"12px");d.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_NORMAL);let y=r.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);let h=y.putNewStructure(this.getChartType());let _=h.putNewStructure(e.VizDefConstants.K_MARKER);_.putString(e.VizDefConstants.K_SYMBOL,e.VizDefConstants.V_CIRCLE);let T=r.putNewStructure(e.VizDefConstants.K_SHAPE_OPTIONS);if(this.getXList().size()>1){e.RsHiChartVizUtilsCorrelation.legendStyler(r)}else{h.putString(e.VizDefConstants.K_DASH_STYLE,s);h.putString(e.VizDefConstants.K_COLOR,o);h.putString(e.VizDefConstants.K_STROKE,o);h.putString(e.VizDefConstants.K_FILL,o);T.putString(e.VizDefConstants.K_FILL,o)}let S=h.putNewStructure(e.VizDefConstants.K_DATA_LABELS);S.putBoolean(e.VizDefConstants.K_ENABLED,false);this.addPadding(this.getXList(),p);this.addPadding(this.getYList(),c)};e.RsHiChartMarimekkoHelper=function(){};e.RsHiChartMarimekkoHelper.prototype=new e.RsHiChartCovariationHelper;e.RsHiChartMarimekkoHelper.prototype._ff_c="RsHiChartMarimekkoHelper";e.RsHiChartMarimekkoHelper.prototype.createOneDimensionalColorSeries=function(t){let i=this.getXMeasures().size();for(let n=0;n<this.getColorList().size();n++){let r=this.getColorList().get(n);for(let l=0;l<this.getXMeasures().size();l++){let o=t.addNewStructure();let s=o.putNewStructure(e.VizDefConstants.K_DATA_LABELS);s.putBoolean(e.VizDefConstants.K_ENABLED,true);o.putString(e.VizDefConstants.K_NAME,e.XStringUtils.concatenate3(r,"/",this.getXMeasures().get(l)));let a=o.putNewList(e.VizDefConstants.K_DATA);for(let t=0;t<this.getCategoriesList().size();t++){let r=this.getXList().getListAt(this.getXMeasures().size()*n+l).getDoubleAt(t);let o=0;let s;for(s=0;s<this.getXList().size();s++){o=this.getXList().getListAt(s).getDoubleAt(t);if(o!==0){break}}let u=this.getXListFormatted().getListAt(this.getXMeasures().size()*n+l).getStringAt(t);let p=this.getXMeasures().get(l);let c=a.addNewStructure();c.putInteger(e.VizDefConstants.K_X,t);c.putDouble(e.VizDefConstants.K_Y,r);c.putDouble(e.VizDefConstants.K_Z,o);c.putString(e.VizDefConstants.K_Y_FORMATTED,u);c.putString(e.VizDefConstants.K_X_NAME,this.getCategoriesList().get(t));c.putString(e.VizDefConstants.K_Y_NAME,p);this.addToolTipsToSeries(c,e.XMath.div(s,i),t)}}}};e.RsHiChartMarimekkoHelper.prototype.createOneDimensionalSeries=function(t){for(let i=0;i<this.getXMeasures().size();i++){let n=t.addNewStructure();let r=n.putNewStructure(e.VizDefConstants.K_DATA_LABELS);r.putBoolean(e.VizDefConstants.K_ENABLED,true);n.putString(e.VizDefConstants.K_NAME,this.getXMeasures().get(i));this.addColorAndPattern(this.getXColors().get(i),this.getXPatterns().get(i),n,e.VizDefConstants.K_VARIWIDE,false);let l=n.putNewList(e.VizDefConstants.K_DATA);for(let t=0;t<this.getCategoriesList().size();t++){let n=l.addNewStructure();n.putInteger(e.VizDefConstants.K_X,t);n.putDouble(e.VizDefConstants.K_Y,this.getXList().getListAt(i).getDoubleAt(t));n.putDouble(e.VizDefConstants.K_Z,this.getXList().getListAt(i).getDoubleAt(t));n.putString(e.VizDefConstants.K_Y_FORMATTED,this.getXListFormatted().getListAt(i).getStringAt(t));n.putString(e.VizDefConstants.K_Z_FORMATTED,this.getXListFormatted().getListAt(i).getStringAt(t));n.putString(e.VizDefConstants.K_X_NAME,this.getCategoriesList().get(t));n.putString(e.VizDefConstants.K_Y_NAME,this.getXMeasures().get(i));n.putString(e.VizDefConstants.K_Z_NAME,this.getXMeasures().get(i));this.addColorAndPattern(this.getXColors().get(i),this.getXPatterns().get(i),n,e.VizDefConstants.K_VARIWIDE,true);this.addToolTipsToSeries(n,0,t)}}};e.RsHiChartMarimekkoHelper.prototype.createTwoDimensionalColorSeries=function(t){let i=this.getYList().size();let n=this.getYMeasures().size();for(let r=0;r<this.getColorList().size();r++){let l=this.getColorList().get(r);for(let o=0;o<this.getXMeasures().size();o++){let s=t.addNewStructure();let a=s.putNewStructure(e.VizDefConstants.K_DATA_LABELS);a.putBoolean(e.VizDefConstants.K_ENABLED,true);s.putString(e.VizDefConstants.K_NAME,e.XStringUtils.concatenate3(l,"/",this.getXMeasures().get(o)));let u=s.putNewList(e.VizDefConstants.K_DATA);for(let t=0;t<this.getCategoriesList().size();t++){let l=this.getXList().getListAt(this.getXMeasures().size()*r+o).getDoubleAt(t);let s=this.getXListFormatted().getListAt(this.getXMeasures().size()*r+o).getStringAt(t);let a="";let p=this.getXMeasures().get(o);let c="";let g=0;let m;for(m=0;m<i;m++){g=this.getYList().getListAt(m).getDoubleAt(t);a=this.getYListFormatted().getListAt(m).getStringAt(t);c=this.getYMeasures().get(0);if(g!==0){break}}let f=u.addNewStructure();f.putInteger(e.VizDefConstants.K_X,t);f.putDouble(e.VizDefConstants.K_Y,l);f.putDouble(e.VizDefConstants.K_Z,g);f.putString(e.VizDefConstants.K_Y_FORMATTED,s);f.putString(e.VizDefConstants.K_Z_FORMATTED,a);f.putString(e.VizDefConstants.K_X_NAME,this.getCategoriesList().get(t));f.putString(e.VizDefConstants.K_Y_NAME,p);f.putString(e.VizDefConstants.K_Z_NAME,c);this.addToolTipsToSeries(f,e.XMath.div(m,n),t)}}}};e.RsHiChartMarimekkoHelper.prototype.createTwoDimensionalSeries=function(t){for(let i=0;i<this.getXMeasures().size();i++){for(let n=0;n<this.getYMeasures().size();n++){let r=t.addNewStructure();let l=r.putNewStructure(e.VizDefConstants.K_DATA_LABELS);l.putBoolean(e.VizDefConstants.K_ENABLED,true);r.putString(e.VizDefConstants.K_NAME,e.XStringUtils.concatenate3(this.getXMeasures().get(i),"/",this.getYMeasures().get(n)));this.addColorAndPattern(this.getXColors().get(i),this.getXPatterns().get(i),r,e.VizDefConstants.K_VARIWIDE,false);let o=r.putNewList(e.VizDefConstants.K_DATA);for(let t=0;t<this.getCategoriesList().size();t++){let r=o.addNewStructure();this.addColorAndPattern(this.getXColors().get(i),this.getXPatterns().get(i),r,e.VizDefConstants.K_VARIWIDE,true);r.putInteger(e.VizDefConstants.K_X,t);r.putDouble(e.VizDefConstants.K_Y,this.getXList().getListAt(i).getDoubleAt(t));r.putDouble(e.VizDefConstants.K_Z,this.getYList().getListAt(n).getDoubleAt(t));r.putString(e.VizDefConstants.K_X_NAME,this.getCategoriesList().get(t));r.putString(e.VizDefConstants.K_Y_FORMATTED,this.getXListFormatted().getListAt(i).getStringAt(t));r.putString(e.VizDefConstants.K_Z_FORMATTED,this.getYListFormatted().getListAt(n).getStringAt(t));r.putString(e.VizDefConstants.K_Y_NAME,this.getXMeasures().get(i));r.putString(e.VizDefConstants.K_Z_NAME,this.getYMeasures().get(n));this.addToolTipsToSeries(r,0,t)}}}};e.RsHiChartMarimekkoHelper.prototype.decorateToolTip=function(t){t.append("<b>{point.xName}</b> <br/>");t.append("<b>{point.yName}</b>: {point.yFormatted} <br/>");if(e.XCollectionUtils.hasElements(this.getYMeasures())){t.append("<b>{point.zName}</b>: {point.zFormatted} <br/>")}};e.RsHiChartMarimekkoHelper.prototype.finishRendering=function(){let t=this.getChartData();let i=t.putNewList(e.VizDefConstants.K_SERIES);let n=this.getChartData().putNewStructure(e.VizDefConstants.K_X_AXIS);n.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_CATEGORY);let r=n.putNewList(e.VizDefConstants.K_CATEGORIES);for(let e=0;e<this.getCategoriesList().size();e++){r.addString(this.getCategoriesList().get(e))}i.clear();if(e.XCollectionUtils.hasElements(this.getColorList())){if(this.getYMeasures().size()===0){this.createOneDimensionalColorSeries(i)}else{this.createTwoDimensionalColorSeries(i)}}else{if(this.getYMeasures().size()===0){this.createOneDimensionalSeries(i)}else{this.createTwoDimensionalSeries(i)}}};e.RsHiChartMarimekkoHelper.prototype.getXFeed=function(){return e.VizDefConstants.K_VALUE_AXIS};e.RsHiChartMarimekkoHelper.prototype.getYFeed=function(){return e.VizDefConstants.K_VALUE_AXIS2};e.RsHiChartMarimekkoHelper.prototype.getZFeed=function(){return e.VizDefConstants.K_BUBBLE_WIDTH};e.RsHiChartMarimekkoHelper.prototype.prepareRendering=function(){};e.RsHiChartMarimekkoHelper.prototype.reiterateResultSet=function(t,i,n){let r=this.getChartData();let l=r.putNewList(e.VizDefConstants.K_Y_AXIS);let o=l.addNewStructure();let s=r.putNewList(e.VizDefConstants.K_X_AXIS);let a=s.addNewStructure();a.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_CATEGORY);let u=null;let p=!n.getQueryModel().getRowsAxis().isTotalsVisible();if(this.getVizDef()!==null){u=this.getVizDef().getStructureByKey(e.VizDefConstants.K_CHART).getStructureByKey(e.VizDefConstants.K_PROPERTIES);if(e.notNull(u)){let r=u.getStructureByKey(e.VizDefConstants.K_CATEGORY_AXIS);if(e.notNull(r)){a=e.RsHiChartUtils.axisPloter(r,a,this.getChartType(),true)}let l=u.getStructureByKey(e.VizDefConstants.K_VALUE_AXIS);if(e.notNull(l)){o=e.RsHiChartUtils.axisPloter(l,o,this.getChartType(),false)}e.RsHiChartVizUtilsSimple.addReferenceLine(this.getVizDef(),o,o,t,i,n)}}e.RsHiChartVizUtilsSimple.legendStyler(r);let c=e.PrFactory.createStructure();c=r.getStructureByKey(e.VizDefConstants.K_PLOT_OPTIONS);let g=e.VizDefConstants.K_TRANSPARENT;if(r.getListByKey(e.VizDefConstants.K_COLORS)!==null){if(r.getListByKey(e.VizDefConstants.K_COLORS).size()>0){g=r.getListByKey(e.VizDefConstants.K_COLORS).getStringAt(0)}}if(e.isNull(c)){c=r.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS)}if(!e.XString.isEqual(this.getStackingType(),null)){e.RsHiChartVizUtilsSimple.dataLabelAlignment(o,this.getChartType(),t.getDecimalPlaces(this.getXFeed()),false)}let m=t.getPrettyNamesForFeed(true,!p,e.VizDefConstants.K_VALUE_AXIS);let f=e.XCollectionUtils.join(m,",");e.RsHiChartVizUtilsSimple.plotOptionChart(o,this.getChartType(),this.getStackingType(),c,0,g,f);e.RsHiChartVizUtilsSimple.dataLabelAlignment(o,this.getChartType(),t.getDecimalPlaces(this.getXFeed()),false)};e.RsHiChartMetricHelper=function(){};e.RsHiChartMetricHelper.prototype=new e.RsHiChartCovariationHelper;e.RsHiChartMetricHelper.prototype._ff_c="RsHiChartMetricHelper";e.RsHiChartMetricHelper.prototype.finishRendering=function(){let t=this.getXList();if(!e.XCollectionUtils.hasElements(t)){return}let i=this.getZList();let n=this.getXListFormatted();let r=this.getYListFormatted();let l=this.getZListFormatted();if(!e.XCollectionUtils.hasElements(n)){return}let o=this.getChartData();let s=o.putNewList(e.VizDefConstants.K_SERIES);let a=s.addNewStructure();let u=a.putNewList(e.VizDefConstants.K_DATA);let p="120px";let c="30px";let g="40px";let m=e.VizDefConstants.V_BLACK;let f=e.VizDefConstants.V_BLACK;let C=u.addNewStructure();C.putString(e.VizDefConstants.K_VALUE_FORMATTED,n.getListAt(0).getStringAt(0));C.putDouble(e.VizDefConstants.K_Y,t.getListAt(0).getDoubleAt(0));C.putString(e.VizDefConstants.K_NAME,this.getXMeasures().get(0));let d=0;let y=C.putNewList(e.VizDefConstants.K_TARGET_VALUES);let h=e.XStringBuffer.create();if(r.size()+l.size()>0){h.append('<br/><div style="font-size:');h.append(g);h.append('">')}let _=0;let T=0;for(d=0;d<r.size();d++){T=e.XMath.max(T,e.XString.size(r.getListAt(d).getStringAt(0)));if(d<this.getYMeasures().size()){_=e.XMath.max(_,e.XString.size(this.getYMeasures().get(d)))}}if(l.size()>0){T=e.XMath.max(T,e.XString.size(l.getListAt(0).getStringAt(0)))}for(d=0;d<r.size();d++){let t=y.addNewStructure();t.putString(e.VizDefConstants.K_TARGET_FORMATTED,r.getListAt(d).getStringAt(0));let i="";if(d<this.getYMeasures().size()){i=this.getYMeasures().get(d)}t.putString(e.VizDefConstants.K_NAME,i);h.append('<br/><div><span style="text-align:left;font-size:');h.append(g);h.append(";width:");let n=3+T-e.XString.size(i);h.append(e.XInteger.convertToString(n));h.append('em;">{point.targetValues.');h.append(e.XInteger.convertToString(d));h.append(".targetFormatted}");for(let e=0;e<n;e++){h.append(" ")}h.append(' </span><span style="text-align:right;font-size:');h.append(g);h.append(';">{point.targetValues.');h.append(e.XInteger.convertToString(d));h.append(".name}</span></div>")}if(l.size()>0){C.putString(e.VizDefConstants.K_VARIANCE,l.getListAt(0).getStringAt(0));h.append('<br/><div><span style="font-size:');h.append(g);h.append(";width:");let t=3+_+T-e.XString.size(l.getListAt(0).getStringAt(0));h.append(e.XInteger.convertToString(t));h.append('em;">');h.append(i.getListAt(0).getDoubleAt(0)<0?"⇩":i.getListAt(0).getDoubleAt(0)===0?"⇨":"⇧");h.append(" {point.variance}");h.append('</span><span style="text-align:right;font-size:');h.append(g);h.append(';"></span></div>')}if(r.size()+l.size()>0){h.append("</div>")}let S=o.getStructureByKey(e.VizDefConstants.K_CHART);let R=o.putNewStructure(e.VizDefConstants.K_LANG);R.putString(e.VizDefConstants.K_THOUSANDS_SEP,",");S.putInteger(e.VizDefConstants.K_MARGIN_TOP,110);let D=o.putNewStructure(e.VizDefConstants.K_TOOLTIP);D.putBoolean(e.VizDefConstants.K_ENABLED,false);let A=o.putNewStructure(e.VizDefConstants.K_PANE);let E=A.putNewList(e.VizDefConstants.K_BACKGROUND).addNewStructure();E.putString(e.VizDefConstants.K_BACKGROUND_COLOR,"rgba(0,0,0,0)");E.putString(e.VizDefConstants.K_INNER_RADIUS,"0%");E.putString(e.VizDefConstants.K_OUTER_RADIUS,"0%");E.putString(e.VizDefConstants.K_SHAPE,e.VizDefConstants.V_ARC);A.putInteger(e.VizDefConstants.K_END_ANGLE,0);A.putInteger(e.VizDefConstants.K_START_ANGLE,0);A.putInteger(e.VizDefConstants.K_SIZE,0);let V=A.putNewList(e.VizDefConstants.V_CENTER);V.addString("0%");V.addString("0%");let N=o.putNewList(e.VizDefConstants.K_Y_AXIS);let x=N.addNewStructure();x.putInteger(e.VizDefConstants.K_LINE_WIDTH,0);x.putInteger(e.VizDefConstants.K_GRIDLINE_WIDTH,0);x.putBoolean(e.VizDefConstants.K_VISIBLE,false);let P=o.putNewStructure(e.VizDefConstants.K_LEGEND);P.putBoolean(e.VizDefConstants.K_ENABLED,false);let L=o.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);let I=L.putNewStructure(e.VizDefConstants.K_SERIES);let b=I.putNewStructure(e.VizDefConstants.K_DATA_LABELS);b.putBoolean(e.VizDefConstants.K_ENABLED,true);b.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_RIGHT);b.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_MIDDLE);b.putInteger(e.VizDefConstants.K_Y,0);b.putInteger(e.VizDefConstants.K_BORDER_WIDTH,0);let z=';">{point.valueFormatted}</span>';let O=';">{point.name}</span></div>';o.putBoolean(e.VizDefConstants.K_FULL_SCREEN_ENABLED,false);let F=null;let M=null;let v=null;F=e.XStringUtils.concatenate5('<div><span style="font-size:',c,";color:",m,O);M=e.XStringUtils.concatenate5('<span style="font-size:',p,";color:",f,z);let U=h.toString();v=e.XStringUtils.concatenate4(M,"<br/>",F,U);b.putString(e.VizDefConstants.K_FORMAT,v);let X=b.putNewStructure(e.VizDefConstants.K_STYLE);X.putString(e.VizDefConstants.K_TEXT_OUTLINE,"0px");let K=L.putNewStructure(e.VizDefConstants.K_SOLID_GAUGE);K.putBoolean(e.VizDefConstants.K_ANIMATION,false)};e.RsHiChartMetricHelper.prototype.getXFeed=function(){return e.VizDefConstants.K_VALUE_AXIS};e.RsHiChartMetricHelper.prototype.getYFeed=function(){return e.VizDefConstants.K_VALUE_AXIS2};e.RsHiChartMetricHelper.prototype.getZFeed=function(){return e.VizDefConstants.K_VARIANCE};e.RsHiChartMetricHelper.prototype.isResponsive=function(){return false};e.RsHiChartMetricHelper.prototype.prepareRendering=function(){};e.RsHiChartPieHelper=function(){};e.RsHiChartPieHelper.prototype=new e.RsHiChartCovariationHelper;e.RsHiChartPieHelper.prototype._ff_c="RsHiChartPieHelper";e.RsHiChartPieHelper.ERROR_MESSAGE="ERROR_MESSAGE";e.RsHiChartPieHelper.I18N_CV_CHART_PIE_NEGATIVE_POSITIVE="I18N_CV_CHART_PIE_NEGATIVE_POSITIVE";e.RsHiChartPieHelper.prototype.decorateToolTip=function(e){e.append("<b>{point.name}</b>: {point.yFormatted} <br/>")};e.RsHiChartPieHelper.prototype.finishRendering=function(){let t=this.getChartData();let i=t.putNewList(e.VizDefConstants.K_SERIES);if(!e.XCollectionUtils.hasElements(this.getXList())){return}let n=i.addNewStructure();let r=n.putNewList(e.VizDefConstants.K_DATA);n.putString(e.VizDefConstants.K_NAME,this.getXMeasures().get(0));let l=this.getXListRemapped();let o=this.getYListRemapped();let s=this.getXListFormattedRemapped();let a=this.getYListFormattedRemapped();let u=this.getCategoriesFormattedList();for(let t=0;t<l.size();t++){let i=t>0?l.getDoubleAt(t-1):0;let n=l.getDoubleAt(t);if(i*n>=0){let i=r.addNewStructure();let l=e.XDouble.convertToString(n);let p=0;let c="0.0";if(t<s.size()){l=s.getStringAt(t)}if(t<o.size()){p=o.getDoubleAt(t);c=e.XDouble.convertToString(p)}if(t<a.size()){c=a.getStringAt(t)}i.putString(e.VizDefConstants.K_Y_FORMATTED,l);i.putString(e.VizDefConstants.K_Z_FORMATTED,c);i.putDouble(e.VizDefConstants.K_Y,e.XMath.abs(n));i.putDouble(e.VizDefConstants.K_Z,p);this.addToolTipsToSeries(i,0,t);if(u.size()>t){let n=u.get(t);let r=e.XStringBuffer.create();for(let e=0;e<n.size();e++){r.append(n.get(e));if(!(e===n.size()-1)){r.append("/")}}i.putString(e.VizDefConstants.K_NAME,r.toString())}}else{this.getChartData().putString(e.RsHiChartPieHelper.ERROR_MESSAGE,this.getLocalizationProvider().getText(e.RsHiChartPieHelper.I18N_CV_CHART_PIE_NEGATIVE_POSITIVE));return}}};e.RsHiChartPieHelper.prototype.getXFeed=function(){return e.VizDefConstants.K_SIZE};e.RsHiChartPieHelper.prototype.getYFeed=function(){return null};e.RsHiChartPieHelper.prototype.getZFeed=function(){return null};e.RsHiChartPieHelper.prototype.isShowLegend=function(){return true};e.RsHiChartPieHelper.prototype.prepareRendering=function(){let t=this.getChartData();let i=t.getStructureByKey(e.VizDefConstants.K_CHART);let n=i.putNewStructure(e.VizDefConstants.K_STYLE);n.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");n.putString(e.VizDefConstants.K_FONT_SIZE,"13px");let r=t.getStructureByKey(e.VizDefConstants.K_LEGEND);r.putBoolean(e.VizDefConstants.K_SQUARE_SYMBOL,true);r.putInteger(e.VizDefConstants.K_SYMBOL_RADIUS,0);r.putString(e.VizDefConstants.K_LAYOUT,e.VizDefConstants.V_VERTICAL);r.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_RIGHT);r.putInteger(e.VizDefConstants.K_WIDTH,200);r.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);let l=t.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);let o=t.putNewList(e.VizDefConstants.K_Y_AXIS);let s=o.addNewStructure();let a=s.putNewStructure(e.VizDefConstants.K_TITLE);a.putString(e.VizDefConstants.K_TEXT,"");let u=l.putNewStructure(this.getChartType());u.putBoolean(e.VizDefConstants.K_SHOW_IN_LEGEND,true);u.putString(e.VizDefConstants.K_INNER_SIZE,this.getInnerRadius());u.putString(e.VizDefConstants.K_SIZE,"70%");let p=u.putNewStructure(e.VizDefConstants.K_DATA_LABELS);p.putBoolean(e.VizDefConstants.K_ENABLED,true);p.putString(e.VizDefConstants.K_FORMAT,"{point.percentage:.2f} %");p.putBoolean(e.VizDefConstants.K_HIDE_WHEN_OVERLAP,true);p.putInteger(e.VizDefConstants.K_DISTANCE,15);let c=p.putNewStructure(e.VizDefConstants.K_STYLE);c.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_FONT_WEIGHT_BOLD);c.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");c.putString(e.VizDefConstants.K_FONT_SIZE,"12px");c.putString(e.VizDefConstants.K_COLOR,"rgb(88,89,91)")};e.RsHiChartTimeSeriesHelper=function(){};e.RsHiChartTimeSeriesHelper.prototype=new e.RsHiChartSeriesHelper;e.RsHiChartTimeSeriesHelper.prototype._ff_c="RsHiChartTimeSeriesHelper";e.RsHiChartTimeSeriesHelper.addValue=function(t,i,n,r,l,o,s,a,u,p,c,g,m,f,C){let d=0;let y=n.getValueType();let h=t.addNewStructure();if(y===e.XValueType.DOUBLE||y===e.XValueType.DECIMAL_FLOAT){h.putDouble(e.VizDefConstants.K_X,i.getMilliseconds());if(n.getXValue()!==null){d=n.getDouble();h.putDouble(e.VizDefConstants.K_Y,d);h.putString(e.VizDefConstants.K_Y_FORM,r.getFormattedValue(e.VizDefConstants.K_VALUE_AXIS,l,n));h.putDouble(e.VizDefConstants.K_PERCENT,d*100)}else{h.putString(e.VizDefConstants.K_Y,null);h.putString(e.VizDefConstants.K_Y_FORM,null)}if(C){h.putStringNotNullAndNotEmpty(e.VizDefConstants.K_COLOR,l.getColor())}h.putString(e.VizDefConstants.K_NAME,o);if(e.notNull(p)){h.putString(e.VizDefConstants.K_CATEGORY_FORM,p)}}if(e.notNull(s)){let t=s.addNewList();t.addDouble(a);t.addDouble(u);if(a<u){h.putString(e.VizDefConstants.K_ERROR_RANGE,e.XStringUtils.concatenate3(m," .. ",f))}else{h.putString(e.VizDefConstants.K_ERROR_RANGE,e.XStringUtils.concatenate3(f," .. ",m))}}if(e.XCollectionUtils.hasElements(c)){for(let t=0;t<c.size();t++){h.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_HEADER,e.XInteger.convertToString(t)),c.get(t))}}if(e.XCollectionUtils.hasElements(g)){for(let t=0;t<g.size();t++){h.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_FORMATTED,e.XInteger.convertToString(t)),g.get(t))}}};e.RsHiChartTimeSeriesHelper.prototype.finishRendering=function(){this.getChartData().putBoolean(e.VizDefConstants.K_IS_TIME_SERIES,true)};e.RsHiChartTimeSeriesHelper.prototype.isTimeseries=function(){return true};e.RsHiChartTimeSeriesHelper.prototype.prepareRendering=function(){};e.RsHiChartTimeSeriesHelper.prototype.readResultSetData=function(t,i,n){let r=this.getChartData();let l=null;let o=null;let s=r.putNewStructure(e.VizDefConstants.K_LANG);let a=r.putNewList(e.VizDefConstants.K_SERIES);let u=e.XStringBuffer.create();u.append("<b>{series.name}</b><br/>");let p;u.append("<b>{point.name}</b>:  {point.yForm}<br/>");let c=false;let g=e.XList.create();g.add(e.VizDefConstants.K_VALUE_AXIS);g.add(e.VizDefConstants.K_VALUE_AXIS2);g.add(e.VizDefConstants.K_VARIANCE);let m=t.getPrettyNamesForFeed(true,false,e.VizDefConstants.K_COLOR);if(n.getAvailableDataCellCount()>0){let s=t.getPrettyNamesForFeed(true,false,e.VizDefConstants.K_TOOLTIP_VALUE_AXIS);for(let t=0;t<s.size();t++){u.append("<b>{point.tHeader");u.append(e.XInteger.convertToString(t));u.append("}</b>:  {point.tFormatted");u.append(e.XInteger.convertToString(t));u.append("}<br/>")}u.append("{point.errorRange}<br/>");u.append("{point.categoryForm}<br/>");let f=i.getDateList();let C=i.getFormattedDateList();if(e.XCollectionUtils.hasElements(f)){let d=t.getIndicesByFeedOrder(g);let y=e.XList.create();y.add(e.VizDefConstants.K_COLOR);y.addAll(g);this.setShowLegend(d.size()>1);for(let r=0;r<d.size();r++){let u=d.get(r).getInteger();let g=t.getTupleAt(u);if(!g.isSelectedByString(e.VizDefConstants.K_VALUE_AXIS)){continue}let y=m.size()<2;o=a.addNewStructure();o.putString(e.VizDefConstants.K_NAME,g.getPrettyDefaultText());l=o.putNewList(e.VizDefConstants.K_DATA);if(y){o.putStringNotNullAndNotEmpty(e.VizDefConstants.K_COLOR,g.getColor())}let h=g.getMemberKeys();p=null;let _=u;let T=u;let S=false;let R=null;let D=null;if(e.XCollectionUtils.hasElements(h)){R=t.getMatchingTupleIndicesForMemberNameAndFeed(h,e.VizDefConstants.K_TOOLTIP_VALUE_AXIS);let i=t.getMatchingTupleIndicesForMemberNamesAndSuffix(h,e.VizDefConstants.K_ERRORBAR_MIN);if(i!==-1){_=i;S=true}i=t.getMatchingTupleIndicesForMemberNamesAndSuffix(h,e.VizDefConstants.K_ERRORBAR_MAX);if(i!==-1){T=i;S=true}if(S){let t=a.addNewStructure();p=t.putNewList(e.VizDefConstants.K_DATA);t.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_ERRORBAR)}}for(let r=0;r<i.getTuplesCount();r++){if(!i.getTupleAt(r).isSelectedByString(e.VizDefConstants.K_TIME_AXIS)){continue}let o=f.get(r);let a=0;let m=0;let d="";let h="";if(e.notNull(o)){if(S){a=n.getDataCell(_,r).getDouble();d=t.getFormattedValue(e.VizDefConstants.K_VALUE_AXIS,t.getTupleAt(_),n.getDataCell(_,r));m=n.getDataCell(T,r).getDouble();h=t.getFormattedValue(e.VizDefConstants.K_VALUE_AXIS,t.getTupleAt(T),n.getDataCell(T,r))}if(e.XCollectionUtils.hasElements(R)){D=e.XList.create();for(let e=0;e<R.size();e++){let i=R.get(e).getInteger();D.add(t.getFormattedValue("",t.getTupleAt(i),n.getDataCell(i,r)))}}let f=n.getDataCell(u,r);if(!i.getTupleAt(r).isTotal()){e.RsHiChartTimeSeriesHelper.addValue(l,o,f,t,g,g.getPrettyDefaultText(),p,a,m,C.get(r),s,D,d,h,y);c=true}}}}let h=r.putNewStructure(e.VizDefConstants.K_TOOLTIP);h.putString(e.VizDefConstants.K_POINT_FORMAT,u.toString());h.putString(e.VizDefConstants.K_HEADER_FORMAT,"")}}if(!c){s.putString(e.VizDefConstants.K_NO_DATA,"Firefly Resultset is Empty.");r.putBoolean(e.VizDefConstants.K_FULL_SCREEN_ENABLED,false)}};e.RsHiChartTreemapHelper=function(){};e.RsHiChartTreemapHelper.prototype=new e.RsHiChartCovariationHelper;e.RsHiChartTreemapHelper.prototype._ff_c="RsHiChartTreemapHelper";e.RsHiChartTreemapHelper.prototype.decorateToolTip=function(t){t.append("<b>{point.name}</b><br/><b>{point.valueName}</b>: {point.valueFormatted} <br/>");if(e.XCollectionUtils.hasElements(this.getYMeasures())){t.append("<b>{point.colorName}</b>: {point.colorValueFormatted} <br/>")}};e.RsHiChartTreemapHelper.prototype.finishRendering=function(){let t=this.getChartData();let i=t.putNewList(e.VizDefConstants.K_SERIES);let n=i.addNewStructure();n.putString(e.VizDefConstants.K_LAYOUT_ALGORITHM,e.VizDefConstants.V_TREEMAP_LAYOUT_STRIP);let r=n.putNewList(e.VizDefConstants.K_DATA);if(this.getXList().size()===0){return}if(this.getYMeasures().size()>0){n.putString(e.VizDefConstants.K_NAME,this.getYMeasures().get(0))}else if(this.getXMeasures().size()>0){n.putString(e.VizDefConstants.K_NAME,this.getXMeasures().get(0))}else{n.putString(e.VizDefConstants.K_NAME,"")}let l=this.getXListRemapped();let o=this.getYListRemapped();let s=this.getXListFormattedRemapped();let a=this.getYListFormattedRemapped();let u=this.getXMeasures();let p=this.getYMeasures();let c=this.getCategoryLabels();let g=e.XCollectionUtils.hasElements(p);if(!g){o=l;a=s;p=u}let m=n.putNewStructure(e.VizDefConstants.K_DATA_LABELS);m.putString(e.VizDefConstants.K_POINT_FORMAT,"<b>{point.name}</b><br/> {point.valueFormatted}");let f=0;let C=0;let d="0";let y="0";let h=e.XHashSetOfString.create();for(let t=0;t<c.size();t++){let i=c.get(t);f=l.getDoubleAt(t);C=o.getDoubleAt(t);d=s.getStringAt(t);y=a.getStringAt(t);let n=this.getNewLabeledStructure(r,i,h);if(i.isLeafOrCollapsed()){n.putDouble(e.VizDefConstants.K_VALUE,f);n.putDouble(e.VizDefConstants.K_COLOR_VALUE,C)}n.putString(e.VizDefConstants.K_VALUE_FORMATTED,d);n.putString(e.VizDefConstants.K_COLOR_VALUE_FORMATTED,y);n.putString(e.VizDefConstants.K_COLOR_NAME,p.get(0));n.putString(e.VizDefConstants.K_VALUE_NAME,u.get(0));n.putString(e.VizDefConstants.K_TYPE,this.getChartType());this.addToolTipsToSeries(n,0,t)}e.RsHiChartVizUtilsHeatmap.rendrerHeatmap(this.getChartData(),this.getChartType(),this.getVizDef(),this.getGlobalDef())};e.RsHiChartTreemapHelper.prototype.getNewLabeledStructure=function(t,i,n){if(n.contains(i.getCompoundId())){return null}if(i.getParent()!==null){this.getNewLabeledStructure(t,i.getParent(),n)}n.add(i.getCompoundId());let r=t.addNewStructure();r.putString(e.VizDefConstants.K_ID,i.getCompoundId());if(i.getParent()!==null){r.putString(e.VizDefConstants.K_PARENT,i.getParent().getCompoundId())}r.putString(e.VizDefConstants.K_NAME,i.getLabel());if(!i.isLeafOrCollapsed()){r.putInteger(e.VizDefConstants.K_BORDER_WIDTH,e.XMath.div(6,i.getDisplayLevel()+1));r.putString(e.VizDefConstants.K_BORDER_COLOR,"grey")}return r};e.RsHiChartTreemapHelper.prototype.getXFeed=function(){return e.VizDefConstants.K_WEIGHT};e.RsHiChartTreemapHelper.prototype.getYFeed=function(){return e.VizDefConstants.K_COLOR};e.RsHiChartTreemapHelper.prototype.getZFeed=function(){return null};e.RsHiChartTreemapHelper.prototype.prepareRendering=function(){};e.RsHiChartWordcloudHelper=function(){};e.RsHiChartWordcloudHelper.prototype=new e.RsHiChartCovariationHelper;e.RsHiChartWordcloudHelper.prototype._ff_c="RsHiChartWordcloudHelper";e.RsHiChartWordcloudHelper.prototype.decorateToolTip=function(e){e.append("<b>{point.name}</b>: {point.weightFormatted}  <br/>")};e.RsHiChartWordcloudHelper.prototype.finishRendering=function(){let t=this.getChartData();let i=t.putNewList(e.VizDefConstants.K_SERIES);let n=this.getXList();let r=this.getXListFormatted();let l=n.size();for(let t=0;t<l;t++){let l=i.addNewStructure();l.putString(e.VizDefConstants.K_NAME,this.getXMeasures().get(t));let o=l.putNewList(e.VizDefConstants.K_DATA);let s=n.getListAt(t);let a=r.getListAt(t);for(let i=0;i<s.size();i++){let n=o.addNewStructure();let r=s.getDoubleAt(i);let l=e.XDouble.convertToString(r);if(i<a.size()){l=a.getStringAt(i)}n.putDouble(e.VizDefConstants.K_WEIGHT,r);n.putString(e.VizDefConstants.K_WEIGHT_FORMATTED,l);let u=this.getCategoriesList().get(i);n.putString(e.VizDefConstants.K_NAME,u);n.putString(e.VizDefConstants.K_TYPE,this.getChartType());this.addToolTipsToSeries(n,t,i)}}};e.RsHiChartWordcloudHelper.prototype.getXFeed=function(){return e.VizDefConstants.K_SIZE};e.RsHiChartWordcloudHelper.prototype.getYFeed=function(){return null};e.RsHiChartWordcloudHelper.prototype.getZFeed=function(){return null};e.RsHiChartWordcloudHelper.prototype.prepareRendering=function(){let t=this.getChartData();let i=t.getStructureByKey(e.VizDefConstants.K_CHART);let n=i.putNewStructure(e.VizDefConstants.K_STYLE);n.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");n.putString(e.VizDefConstants.K_FONT_SIZE,"13px");let r=t.getStructureByKey(e.VizDefConstants.K_LEGEND);r.putBoolean(e.VizDefConstants.K_SQUARE_SYMBOL,true);r.putInteger(e.VizDefConstants.K_SYMBOL_RADIUS,0);r.putString(e.VizDefConstants.K_LAYOUT,e.VizDefConstants.V_HORIZONTAL);r.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_CENTER);r.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);let l=t.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);let o=t.putNewList(e.VizDefConstants.K_Y_AXIS);let s=o.addNewStructure();let a=s.putNewStructure(e.VizDefConstants.K_TITLE);a.putString(e.VizDefConstants.K_TEXT,"");let u=l.putNewStructure(this.getChartType());let p=u.putNewStructure(e.VizDefConstants.K_STYLE);p.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");let c=u.putNewStructure(e.VizDefConstants.K_ROTATION);c.putInteger(e.VizDefConstants.K_FROM,-45);c.putInteger(e.VizDefConstants.K_TO,25);u.putString(e.VizDefConstants.K_PLACEMENT_STRATEGY,"center");u.putBoolean(e.VizDefConstants.K_SHOW_IN_LEGEND,true);let g=u.putNewStructure(e.VizDefConstants.K_DATA_LABELS);g.putBoolean(e.VizDefConstants.K_ENABLED,true);g.putString(e.VizDefConstants.K_FORMAT,"{point.percentage:.2f} %");g.putBoolean(e.VizDefConstants.K_HIDE_WHEN_OVERLAP,true);g.putInteger(e.VizDefConstants.K_DISTANCE,15);let m=g.putNewStructure(e.VizDefConstants.K_STYLE);m.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.K_BOLD);m.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");m.putString(e.VizDefConstants.K_FONT_SIZE,"12px");m.putString(e.VizDefConstants.K_COLOR,"rgb(88,89,91)")};e.RscGenericModelReference=function(){};e.RscGenericModelReference.prototype=new e.XObject;e.RscGenericModelReference.prototype._ff_c="RscGenericModelReference";e.RscGenericModelReference.prototype.m_axisReference=null;e.RscGenericModelReference.prototype.m_name=null;e.RscGenericModelReference.prototype.m_text=null;e.RscGenericModelReference.prototype.m_visible=false;e.RscGenericModelReference.prototype.getAxisReference=function(){return e.XWeakReferenceUtil.getHardRef(this.m_axisReference)};e.RscGenericModelReference.prototype.getName=function(){return this.m_name};e.RscGenericModelReference.prototype.getText=function(){return this.m_text};e.RscGenericModelReference.prototype.isVisible=function(){return this.m_visible};e.RscGenericModelReference.prototype.setVisible=function(e){this.m_visible=e};e.RscGenericModelReference.prototype.setupInternal=function(t,i,n){this.m_name=t;this.m_text=i;this.m_axisReference=e.XWeakReferenceUtil.getWeakRef(n)};e.RscGridContainerProvider=function(){};e.RscGridContainerProvider.prototype=new e.XObjectExt;e.RscGridContainerProvider.prototype._ff_c="RscGridContainerProvider";e.RscMeasureValueReference=function(){};e.RscMeasureValueReference.prototype=new e.RscTupleValueReference;e.RscMeasureValueReference.prototype._ff_c="RscMeasureValueReference";e.RscMeasureValueReference.createCopy=function(t,i,n){let r=new e.RscMeasureValueReference;r.m_tags=e.XList.create();let l=n;r.setupWithTupleReference(i,null,null,null,null,null,null,t.getComponentByName(n.getModelReference().getName()));r.m_tupleIndexCoordinate=l.m_tupleIndexCoordinate;return r};e.RscMeasureValueReference.createWithCoordinate=function(t,i,n){let r=new e.RscMeasureValueReference;r.m_tags=e.XList.create();r.setupWithTupleReference(i,null,null,null,null,null,null,n);r.m_tupleIndexCoordinate=t;return r};e.RscMeasureValueReference.prototype.m_alertLevel=null;e.RscMeasureValueReference.prototype.m_cellValueType=null;e.RscMeasureValueReference.prototype.m_complexUnit=null;e.RscMeasureValueReference.prototype.m_currencyUnit=null;e.RscMeasureValueReference.prototype.m_documentId=null;e.RscMeasureValueReference.prototype.m_exceptionName=null;e.RscMeasureValueReference.prototype.m_numericShift=null;e.RscMeasureValueReference.prototype.m_scalingText=null;e.RscMeasureValueReference.prototype.m_tags=null;e.RscMeasureValueReference.prototype.m_tupleIndexCoordinate=null;e.RscMeasureValueReference.prototype.m_unitInformation=null;e.RscMeasureValueReference.prototype.m_valueException=null;e.RscMeasureValueReference.prototype.createValueCopy=function(t,i){return e.RscMeasureValueReference.createCopy(i,t,this)};e.RscMeasureValueReference.prototype.getAlertLevel=function(){return this.m_alertLevel};e.RscMeasureValueReference.prototype.getCellValueType=function(){return this.m_cellValueType};e.RscMeasureValueReference.prototype.getComplexUnit=function(){return this.m_complexUnit};e.RscMeasureValueReference.prototype.getCurrencyUnit=function(){return this.m_currencyUnit};e.RscMeasureValueReference.prototype.getDocumentId=function(){return this.m_documentId};e.RscMeasureValueReference.prototype.getEffectiveScalingFactor=function(){let t=1;if(this.m_cellValueType===e.XValueType.PERCENT){t=100}else if(e.notNull(this.m_numericShift)){t=e.XMath.pow(10,this.m_numericShift.getInteger())}return t};e.RscMeasureValueReference.prototype.getExceptionName=function(){return this.m_exceptionName};e.RscMeasureValueReference.prototype.getNumericShift=function(){return this.m_numericShift};e.RscMeasureValueReference.prototype.getReversedScalingFactor=function(){return e.isNull(this.m_numericShift)?null:e.XIntegerValue.create(-this.m_numericShift.getInteger())};e.RscMeasureValueReference.prototype.getScaledDouble=function(){return this.getEffectiveScalingFactor()*this.getPlainDouble()};e.RscMeasureValueReference.prototype.getScaledValue=function(){let t=this.getPlainValue();let i=null;if(e.notNull(t)){i=e.XDoubleValue.create(e.XValueUtil.getDouble(t,false,true)*this.getEffectiveScalingFactor())}return i};e.RscMeasureValueReference.prototype.getScalingText=function(){return this.m_scalingText};e.RscMeasureValueReference.prototype.getTags=function(){return this.m_tags};e.RscMeasureValueReference.prototype.getTupleIndexCoordinate=function(){return this.m_tupleIndexCoordinate};e.RscMeasureValueReference.prototype.getUnitInformation=function(){return this.m_unitInformation};e.RscMeasureValueReference.prototype.getValueException=function(){return this.m_valueException};e.RscMeasureValueReference.prototype.pullFromCellValue=function(t){this.setupInternal(t.getPlainValue(),t.getText(),t.getFormatPattern(),t.getFormattedText(),t.getFormatPatternFull(),t.getFormattedTextFull());this.m_numericShift=e.XIntegerValue.create(t.getNumericShift());this.m_currencyUnit=t.getCurrencyUnit();this.m_complexUnit=t.getComplexUnit();this.m_cellValueType=t.getCellValueType();this.m_valueException=t.getValueException();this.m_tags=t.getTags().createListCopy();this.m_unitInformation=t.getUnitInformation();this.m_scalingText=t.getScalingText();this.m_alertLevel=t.getAlertLevel();this.m_exceptionName=t.getExceptionName();this.m_documentId=t.getDocumentId()};e.RscMemberValueReference=function(){};e.RscMemberValueReference.prototype=new e.RscTupleValueReference;e.RscMemberValueReference.prototype._ff_c="RscMemberValueReference";e.RscMemberValueReference.create=function(t,i,n,r,l,o,s){let a=new e.RscMemberValueReference;a.setupWithFieldReference(t,i,n,r,l,o,s);return a};e.RscMemberValueReference.createCopy=function(t,i,n){let r=new e.RscMemberValueReference;r.setupWithFieldReference(i,t.getComponentByName(n.getFieldReference().getName()),e.XValueUtil.copyValue(n.getPlainValue()),n.getFormattedText(),n.getDimensionMemberType(),n.getDrillState(),n.getDisplayLevel());r.setRepeatedMemberName(n.isRepeatedMemberName());r.setReferenceTupleIndex(n.getReferenceTupleIndex());r.setDimensionSectionStart(n.isDimensionSectionStart());if(n.isDimensionSectionEnd()){r.setDimensionSectionEnd()}return r};e.RscMemberValueReference.prototype.m_dimensionMemberType=null;e.RscMemberValueReference.prototype.m_dimensionSectionEnd=false;e.RscMemberValueReference.prototype.m_dimensionSectionStart=false;e.RscMemberValueReference.prototype.m_displayLevel=0;e.RscMemberValueReference.prototype.m_drillGroupReference=null;e.RscMemberValueReference.prototype.m_drillState=null;e.RscMemberValueReference.prototype.m_hierarchyLevelEnd=false;e.RscMemberValueReference.prototype.m_hierarchyLevelStart=false;e.RscMemberValueReference.prototype.m_parentDimensionMemberName=null;e.RscMemberValueReference.prototype.m_pathKey=null;e.RscMemberValueReference.prototype.m_referenceTupleIndex=0;e.RscMemberValueReference.prototype.m_repeatedMemberName=false;e.RscMemberValueReference.prototype.m_valueException=null;e.RscMemberValueReference.prototype.createValueCopy=function(t,i){return e.RscMemberValueReference.createCopy(i,t,this)};e.RscMemberValueReference.prototype.getDimensionMemberType=function(){return this.m_dimensionMemberType};e.RscMemberValueReference.prototype.getDisplayLevel=function(){return this.m_displayLevel};e.RscMemberValueReference.prototype.getDrillGroupReference=function(){return this.m_drillGroupReference};e.RscMemberValueReference.prototype.getDrillState=function(){return this.m_drillState};e.RscMemberValueReference.prototype.getFieldReference=function(){return this.getModelReference()};e.RscMemberValueReference.prototype.getParentDimensionMemberName=function(){return this.m_parentDimensionMemberName};e.RscMemberValueReference.prototype.getPathKey=function(){return this.m_pathKey};e.RscMemberValueReference.prototype.getReferenceTupleIndex=function(){return this.m_referenceTupleIndex};e.RscMemberValueReference.prototype.getValueException=function(){return this.m_valueException};e.RscMemberValueReference.prototype.isDimensionSectionEnd=function(){return this.m_dimensionSectionEnd};e.RscMemberValueReference.prototype.isDimensionSectionStart=function(){return this.m_dimensionSectionStart};e.RscMemberValueReference.prototype.isHierarchyLevelEnd=function(){return this.m_hierarchyLevelEnd};e.RscMemberValueReference.prototype.isHierarchyLevelStart=function(){return this.m_hierarchyLevelStart};e.RscMemberValueReference.prototype.isRepeatedMemberName=function(){return this.m_repeatedMemberName};e.RscMemberValueReference.prototype.releaseObject=function(){this.m_drillState=null;this.m_displayLevel=0;this.m_dimensionMemberType=null;this.m_pathKey=null;this.m_valueException=null;this.m_parentDimensionMemberName=null;this.m_referenceTupleIndex=-1;this.m_repeatedMemberName=false;this.m_dimensionSectionStart=false;this.m_dimensionSectionEnd=false;this.m_hierarchyLevelStart=false;this.m_hierarchyLevelEnd=false;this.m_drillGroupReference=null;e.RscTupleValueReference.prototype.releaseObject.call(this)};e.RscMemberValueReference.prototype.setDimensionSectionEnd=function(){this.m_dimensionSectionEnd=true};e.RscMemberValueReference.prototype.setDimensionSectionStart=function(e){this.m_dimensionSectionStart=e};e.RscMemberValueReference.prototype.setDrillGroupReference=function(e){this.m_drillGroupReference=e};e.RscMemberValueReference.prototype.setHierarchyLevelEnd=function(e){this.m_hierarchyLevelEnd=e};e.RscMemberValueReference.prototype.setHierarchyLevelStart=function(e){this.m_hierarchyLevelStart=e};e.RscMemberValueReference.prototype.setParentDimensionMemberName=function(e){this.m_parentDimensionMemberName=e};e.RscMemberValueReference.prototype.setPathKey=function(e){this.m_pathKey=e};e.RscMemberValueReference.prototype.setReferenceTupleIndex=function(e){this.m_referenceTupleIndex=e};e.RscMemberValueReference.prototype.setRepeatedMemberName=function(e){this.m_repeatedMemberName=e};e.RscMemberValueReference.prototype.setValueException=function(e){this.m_valueException=e};e.RscMemberValueReference.prototype.setupWithFieldReference=function(e,t,i,n,r,l,o){this.setupWithTupleReference(e,i,n,null,n,null,n,t);this.m_dimensionMemberType=r;this.m_drillState=l;this.m_displayLevel=o};e.SacAnalyticsTableClipboardHelper=function(){};e.SacAnalyticsTableClipboardHelper.prototype=new e.SacTableClipboardHelper;e.SacAnalyticsTableClipboardHelper.prototype._ff_c="SacAnalyticsTableClipboardHelper";e.SacAnalyticsTableClipboardHelper.INTERNAL_DECIMAL_SEPARATOR=".";e.SacAnalyticsTableClipboardHelper.createForAnalytics=function(t,i){let n=new e.SacAnalyticsTableClipboardHelper;n.setupWithTable(t);n.setUserProfile(i);return n};e.SacAnalyticsTableClipboardHelper.prototype.m_userProfile=null;e.SacAnalyticsTableClipboardHelper.prototype.fillStructureOfCell=function(t,i,n,r){let l=this.getTable();if(t.isEffectiveMergeRepetitiveHeaderCells()){if(t.getRepetitiveColumns()>0){t.setMergedColumns(t.getRepetitiveColumns())}if(t.getRepetitiveRows()>0){t.setMergedRows(t.getRepetitiveRows())}}else{if(t.getMergedColumns()>0){t.setMergedColumns(0)}if(t.getMergedRows()>0){t.setMergedRows(0)}}let o=e.SacTableClipboardHelper.prototype.fillStructureOfCell.call(this,t,i,n,r);let s=t.getParentColumn();let a=t.getParentRow();o.putInteger(e.SacTableConstants.N_TUPLE_INDEX,s.getTupleIndex());if(t.isLastHeaderRow()&&!l.isEmptyRowDimensions()){o.putInteger(e.SacTableConstants.RCS_N_INDEX,s.getDimensionIndex());if(s.getFieldName()!==null){o.putString(e.SacTableConstants.C_SN_FIELD,s.getFieldName())}}else{o.putInteger(e.SacTableConstants.RCS_N_INDEX,a.getDimensionIndex());if(a.getFieldName()!==null){o.putString(e.SacTableConstants.C_SN_FIELD,a.getFieldName())}}let u=t.getSortDirection();if(e.notNull(u)){let t=null;if(u===e.XSortDirection.DEFAULT_VALUE){t=""}else if(u===e.XSortDirection.ASCENDING){t=""}else if(u===e.XSortDirection.DESCENDING){t=""}let i=o.putNewList(e.SacTableConstants.C_L_CELL_ICONS_RIGHT).addNewStructure();i.putString(e.SacTableConstants.CI_S_CLASS_NAME,e.SacTableConstants.CI_SV_CLASS_NAME_SAP_UI_ICON);let n=i.putNewStructure(e.SacTableConstants.CI_M_DATA_ATTRIBUTES);n.putString(e.SacTableConstants.CIA_S_DATA_SAP_UI_ICON_CONTENT,t);let r=i.putNewStructure(e.SacTableConstants.CI_M_STYLE);r.putString(e.SacTableConstants.CIS_S_FONT_FAMILY,e.SacTableConstants.CIS_SV_SAP_ICONS);r.putInteger(e.SacTableConstants.CIS_N_MARGIN_LEFT,e.SacTableConstants.CIS_NV_MARGIN_RIGHT);i.putBoolean(e.SacTableConstants.CI_B_ICON_AFTER,true)}return o};e.SacAnalyticsTableClipboardHelper.prototype.getLocalizedNumber=function(t){return e.isNull(this.m_userProfile)||this.m_userProfile.getDecimalSeparator()===null?t.getStringRepresentation():e.XString.replace(t.getStringRepresentation(),e.SacAnalyticsTableClipboardHelper.INTERNAL_DECIMAL_SEPARATOR,this.m_userProfile.getDecimalSeparator())};e.SacAnalyticsTableClipboardHelper.prototype.setUserProfile=function(e){this.m_userProfile=e};e.ReferenceGrid2=function(){};e.ReferenceGrid2.prototype=new e.ReferenceGrid;e.ReferenceGrid2.prototype._ff_c="ReferenceGrid2";e.ReferenceGrid2.createWithName2=function(t,i){let n=new e.ReferenceGrid2;n.setupSimpleGrid(i,false,false);return n};e.ReferenceGrid2.prototype.formatDataCellValue=function(t){let i;if(t.getXValue()!==null&&t.getXValue().getValueType()===e.XValueType.DOUBLE){let n=t.getXValue().getStringRepresentation();i=e.XNumberFormatter.formatDoubleToString(e.XDouble.convertFromString(n),"#,#.###")}else{i=t.getFormattedValue()}return i};e.ReferenceGrid2.prototype.prepareCellStructure=function(t,i){if(e.notNull(this.m_resultSet)){this.prepareStructure(t,i)}};e.RscDimensionReference=function(){};e.RscDimensionReference.prototype=new e.RscGenericModelReference;e.RscDimensionReference.prototype._ff_c="RscDimensionReference";e.RscDimensionReference.create=function(t,i,n,r,l){let o=e.RscDimensionReference.createInternal(i,n,t);o.setupWithParameters(r,l);return o};e.RscDimensionReference.createInternal=function(t,i,n){let r=new e.RscDimensionReference;r.setupInternal(t,i,n);return r};e.RscDimensionReference.prototype.m_dimension=null;e.RscDimensionReference.prototype.m_index=0;e.RscDimensionReference.prototype.m_lowerLevelNodeAlignment=null;e.RscDimensionReference.prototype.m_reversedIndex=0;e.RscDimensionReference.prototype.getDimension=function(){return this.m_dimension};e.RscDimensionReference.prototype.getIndex=function(){return this.m_index};e.RscDimensionReference.prototype.getLowerLevelNodeAlignment=function(){return this.m_lowerLevelNodeAlignment};e.RscDimensionReference.prototype.getModelComponentType=function(){return e.OlapComponentType.ABSTRACT_DIMENSION};e.RscDimensionReference.prototype.getReversedIndex=function(){return this.m_reversedIndex};e.RscDimensionReference.prototype.releaseObject=function(){this.m_dimension=null;this.m_index=0;this.m_reversedIndex=0;this.m_lowerLevelNodeAlignment=null;e.RscGenericModelReference.prototype.releaseObject.call(this)};e.RscDimensionReference.prototype.setupWithParameters=function(e,t){this.m_dimension=e;this.m_index=t;this.m_reversedIndex=t-e.getAxis().size()-1;this.m_lowerLevelNodeAlignment=e.getLowerLevelNodeAlignment();this.setVisible(false)};e.RscFieldValueReference=function(){};e.RscFieldValueReference.prototype=new e.RscTupleValueReference;e.RscFieldValueReference.prototype._ff_c="RscFieldValueReference";e.RscFieldValueReference.create=function(t,i,n,r,l){let o=new e.RscFieldValueReference;o.setupWithMemberReference(t,i,n,r,l);return o};e.RscFieldValueReference.createCopy=function(t,i,n,r){let l=new e.RscFieldValueReference;l.setupWithMemberReference(i,t.getComponentByName(n.getFieldReference().getName()),e.XValueUtil.copyValue(n.getPlainValue()),n.getFormattedText(),r);return l};e.RscFieldValueReference.prototype.m_drillGroupHeader=false;e.RscFieldValueReference.prototype.m_memberValueReference=null;e.RscFieldValueReference.prototype.m_valueException=null;e.RscFieldValueReference.prototype.createValueCopy=function(t,i){return e.RscFieldValueReference.createCopy(i,t,this,this.m_memberValueReference)};e.RscFieldValueReference.prototype.getDimensionMemberName=function(){return this.m_memberValueReference.getPlainValue().getStringRepresentation()};e.RscFieldValueReference.prototype.getDimensionMemberType=function(){return this.m_memberValueReference.getDimensionMemberType()};e.RscFieldValueReference.prototype.getDimensionMemberValueException=function(){return this.m_memberValueReference.getValueException()};e.RscFieldValueReference.prototype.getDisplayLevel=function(){return this.m_memberValueReference.getDisplayLevel()};e.RscFieldValueReference.prototype.getDrillGroupReference=function(){return this.m_memberValueReference.getDrillGroupReference()};e.RscFieldValueReference.prototype.getDrillState=function(){return this.m_memberValueReference.getDrillState()};e.RscFieldValueReference.prototype.getFieldReference=function(){return this.getModelReference()};e.RscFieldValueReference.prototype.getParentDimensionMemberName=function(){return this.m_memberValueReference.getParentDimensionMemberName()};e.RscFieldValueReference.prototype.getPathKey=function(){return this.m_memberValueReference.getPathKey()};e.RscFieldValueReference.prototype.getReferenceTupleIndex=function(){return this.m_memberValueReference.getReferenceTupleIndex()};e.RscFieldValueReference.prototype.getValueException=function(){return this.m_valueException};e.RscFieldValueReference.prototype.isDimensionSectionEnd=function(){return this.m_memberValueReference.isDimensionSectionEnd()};e.RscFieldValueReference.prototype.isDimensionSectionStart=function(){return this.m_memberValueReference.isDimensionSectionStart()};e.RscFieldValueReference.prototype.isDrillGroupHeader=function(){return this.m_drillGroupHeader};e.RscFieldValueReference.prototype.isHierarchyLevelEnd=function(){return this.m_memberValueReference.isHierarchyLevelEnd()};e.RscFieldValueReference.prototype.isHierarchyLevelStart=function(){return this.m_memberValueReference.isHierarchyLevelStart()};e.RscFieldValueReference.prototype.isRepeatedMemberName=function(){return this.m_memberValueReference.isRepeatedMemberName()};e.RscFieldValueReference.prototype.releaseObject=function(){this.m_memberValueReference=null;this.m_valueException=null;e.RscTupleValueReference.prototype.releaseObject.call(this)};e.RscFieldValueReference.prototype.setDrillGroupHeader=function(e){this.m_drillGroupHeader=e};e.RscFieldValueReference.prototype.setDrillGroupReference=function(e){this.m_memberValueReference.setDrillGroupReference(e)};e.RscFieldValueReference.prototype.setValueException=function(e){this.m_valueException=e};e.RscFieldValueReference.prototype.setupWithMemberReference=function(e,t,i,n,r){this.setupWithTupleReference(e,i,n,null,n,null,n,t);this.m_memberValueReference=r};e.RscDataCellReference=function(){};e.RscDataCellReference.prototype=new e.RscGenericModelReference;e.RscDataCellReference.prototype._ff_c="RscDataCellReference";e.RscDataCellReference.create=function(t,i){let n=new e.RscDataCellReference;let r=e.XStringUtils.concatenate3(t.getName()," ",i.getName());let l=e.XStringUtils.concatenate3(t.getText()," ",i.getText());n.setupInternal(r,l,null);n.setupDataCellReference(t,i);return n};e.RscDataCellReference.prototype.m_cellValueType=null;e.RscDataCellReference.prototype.m_complexUnit=null;e.RscDataCellReference.prototype.m_currencyUnit=null;e.RscDataCellReference.prototype.m_displayLevel1=0;e.RscDataCellReference.prototype.m_displayLevel2=0;e.RscDataCellReference.prototype.m_drillState1=null;e.RscDataCellReference.prototype.m_drillState2=null;e.RscDataCellReference.prototype.m_numericShift=null;e.RscDataCellReference.prototype.m_parent1=null;e.RscDataCellReference.prototype.m_parent2=null;e.RscDataCellReference.prototype.m_structureMember1=null;e.RscDataCellReference.prototype.m_structureMember2=null;e.RscDataCellReference.prototype.m_uniqueDecimalPlaces=0;e.RscDataCellReference.prototype.m_uniqueScalingText=null;e.RscDataCellReference.prototype.m_uniqueUnitInfo=null;e.RscDataCellReference.prototype.m_uniqueUnitScaleInformation=null;e.RscDataCellReference.prototype.applyUnitAndScalingInfoAndMakeVisible=function(t){if(!this.isVisible()){this.m_numericShift=t.getNumericShift();this.m_currencyUnit=t.getCurrencyUnit();this.m_complexUnit=t.getComplexUnit();this.m_cellValueType=t.getCellValueType();this.m_uniqueUnitScaleInformation=t.getUniqueUnitScaleInformation();this.m_uniqueUnitInfo=t.getUniqueUnitInfo();this.m_uniqueScalingText=t.getUniqueScalingText();this.m_uniqueDecimalPlaces=t.getUniqueDecimalPlaces();this.setVisible(true)}else{if(!e.XObjectExt.areEqual(this.m_numericShift,t.getNumericShift())){this.m_numericShift=null}if(!e.XObjectExt.areEqual(this.m_currencyUnit,t.getCurrencyUnit())){this.m_currencyUnit=null}if(!e.XObjectExt.areEqual(this.m_complexUnit,t.getComplexUnit())){this.m_complexUnit=null}if(!e.XObjectExt.areEqual(this.m_cellValueType,t.getCellValueType())){this.m_cellValueType=null}if(!e.XString.isEqual(this.m_uniqueUnitScaleInformation,t.getUniqueUnitScaleInformation())){this.m_uniqueUnitScaleInformation=null}if(!e.XPairOfString.arePairsEqual(this.m_uniqueUnitInfo,t.getUniqueUnitInfo())){this.m_uniqueUnitInfo=null}if(!e.XString.isEqual(this.m_uniqueScalingText,t.getUniqueScalingText())){this.m_uniqueScalingText=null}if(this.m_uniqueDecimalPlaces!==t.getUniqueDecimalPlaces()){this.m_uniqueDecimalPlaces=0}}};e.RscDataCellReference.prototype.getCellValueType=function(){return this.m_cellValueType};e.RscDataCellReference.prototype.getComplexUnit=function(){return this.m_complexUnit};e.RscDataCellReference.prototype.getCurrencyUnit=function(){return this.m_currencyUnit};e.RscDataCellReference.prototype.getDisplayLevel1=function(){return this.m_displayLevel1};e.RscDataCellReference.prototype.getDisplayLevel2=function(){return this.m_displayLevel2};e.RscDataCellReference.prototype.getDrillState1=function(){return this.m_drillState1};e.RscDataCellReference.prototype.getDrillState2=function(){return this.m_drillState2};e.RscDataCellReference.prototype.getModelComponentType=function(){return e.OlapComponentType.DATA_CELL};e.RscDataCellReference.prototype.getNumericShift=function(){return this.m_numericShift};e.RscDataCellReference.prototype.getParent1=function(){return e.XWeakReferenceUtil.getHardRef(this.m_parent1)};e.RscDataCellReference.prototype.getParent2=function(){return e.XWeakReferenceUtil.getHardRef(this.m_parent2)};e.RscDataCellReference.prototype.getReversedScalingFactor=function(){return e.isNull(this.m_numericShift)?null:e.XIntegerValue.create(-this.m_numericShift.getInteger())};e.RscDataCellReference.prototype.getStructureMember1=function(){return this.m_structureMember1};e.RscDataCellReference.prototype.getStructureMember2=function(){return this.m_structureMember2};e.RscDataCellReference.prototype.getUniqueDecimalPlaces=function(){return this.m_uniqueDecimalPlaces};e.RscDataCellReference.prototype.getUniqueObject=function(t,i){let n=null;return e.XObjectExt.areEqual(t,i)?t:n};e.RscDataCellReference.prototype.getUniquePositiveInt=function(e,t){return e===t?e:0};e.RscDataCellReference.prototype.getUniqueScalingText=function(){return this.m_uniqueScalingText};e.RscDataCellReference.prototype.getUniqueString=function(t,i){return e.XString.isEqual(t,i)?t:null};e.RscDataCellReference.prototype.getUniqueStringPair=function(t,i){return e.XPairOfString.arePairsEqual(t,i)?t:null};e.RscDataCellReference.prototype.getUniqueUnitInfo=function(){return this.m_uniqueUnitInfo};e.RscDataCellReference.prototype.getUniqueUnitScaleInformation=function(){return this.m_uniqueUnitScaleInformation};e.RscDataCellReference.prototype.setupDataCellReference=function(e,t){this.m_structureMember1=e.getStructureMember();this.m_displayLevel1=e.getDisplayLevel();this.m_drillState1=e.getDrillState();this.m_structureMember2=t.getStructureMember();this.m_displayLevel2=t.getDisplayLevel();this.m_drillState2=t.getDrillState();this.m_uniqueUnitScaleInformation=this.getUniqueString(e.getUniqueUnitScaleInformation(),t.getUniqueUnitScaleInformation());this.m_numericShift=this.getUniqueObject(e.getNumericShift(),t.getNumericShift());this.m_currencyUnit=this.getUniqueObject(e.getCurrencyUnit(),t.getCurrencyUnit());this.m_complexUnit=this.getUniqueObject(e.getComplexUnit(),t.getComplexUnit());this.m_cellValueType=this.getUniqueObject(e.getCellValueType(),t.getCellValueType());this.m_uniqueUnitInfo=this.getUniqueStringPair(e.getUniqueUnitInfo(),t.getUniqueUnitInfo());this.m_uniqueScalingText=this.getUniqueString(e.getUniqueScalingText(),t.getUniqueScalingText());this.m_uniqueDecimalPlaces=this.getUniquePositiveInt(e.getUniqueDecimalPlaces(),t.getUniqueDecimalPlaces())};e.RscFieldReference=function(){};e.RscFieldReference.prototype=new e.RscGenericModelReference;e.RscFieldReference.prototype._ff_c="RscFieldReference";e.RscFieldReference.create=function(t,i,n,r,l,o,s,a){let u=e.RscFieldReference.createInternal(n,i,t);u.setupWithParameters(r,l,o,s,a);return u};e.RscFieldReference.createInternal=function(t,i,n){let r=new e.RscFieldReference;r.setupInternal(t,i,n);return r};e.RscFieldReference.prototype.m_dimensionReference=null;e.RscFieldReference.prototype.m_fieldName=null;e.RscFieldReference.prototype.m_index=0;e.RscFieldReference.prototype.m_isMainAttribute=false;e.RscFieldReference.prototype.m_isMainFieldForAttribute=false;e.RscFieldReference.prototype.m_isMainFieldForDimension=false;e.RscFieldReference.prototype.getDimension=function(){return this.m_dimensionReference.getDimension()};e.RscFieldReference.prototype.getDimensionIndex=function(){return this.m_dimensionReference.getIndex()};e.RscFieldReference.prototype.getField=function(){return this.m_dimensionReference.getDimension().getFieldByName(this.m_fieldName)};e.RscFieldReference.prototype.getIndex=function(){return this.m_index};e.RscFieldReference.prototype.getLowerLevelNodeAlignment=function(){return this.m_dimensionReference.getLowerLevelNodeAlignment()};e.RscFieldReference.prototype.getModelComponentType=function(){return e.OlapComponentType.FIELD};e.RscFieldReference.prototype.getReversedDimensionIndex=function(){return this.m_dimensionReference.getReversedIndex()};e.RscFieldReference.prototype.getReversedIndex=e.noSupport;e.RscFieldReference.prototype.isMainAttribute=function(){return this.m_isMainAttribute};e.RscFieldReference.prototype.isMainFieldFor=function(t,i){return e.notNull(i)&&(t===i.getTextField()||t===i.getKeyField()||t===i.getDisplayKeyField()||t===i.getHierarchyKeyField()||t===i.getFlatKeyField()||t===i.getHierarchyTextField()||t===i.getFlatTextField()||t===i.getHierarchyDisplayKeyField()||t===i.getFlatDisplayKeyField()||t===i.getHierarchyNavigationField())};e.RscFieldReference.prototype.isMainFieldForAttribute=function(){return this.m_isMainFieldForAttribute};e.RscFieldReference.prototype.isMainFieldForDimension=function(){return this.m_isMainFieldForDimension};e.RscFieldReference.prototype.releaseObject=function(){this.m_dimensionReference=null;this.m_index=0;this.m_isMainAttribute=false;this.m_isMainFieldForAttribute=false;this.m_isMainFieldForDimension=false;this.m_fieldName=null;e.RscGenericModelReference.prototype.releaseObject.call(this)};e.RscFieldReference.prototype.setupWithParameters=function(t,i,n,r,l){this.m_dimensionReference=t;this.m_fieldName=e.DfNameObject.getSafeName(i);this.m_index=n;this.m_isMainAttribute=r;this.m_isMainFieldForAttribute=this.isMainFieldFor(i,i.getAttribute());this.m_isMainFieldForDimension=this.isMainFieldFor(i,i.getDimension());this.setVisible(l)};e.RscGridContainer=function(){};e.RscGridContainer.prototype=new e.XObject;e.RscGridContainer.prototype._ff_c="RscGridContainer";e.RscGridContainer.create=function(t,i){let n=new e.RscGridContainer;n.setupWithVisualizationManager(t,i);return n};e.RscGridContainer.prototype.m_activeVersions=null;e.RscGridContainer.prototype.m_cellValues=null;e.RscGridContainer.prototype.m_columnsAxis=null;e.RscGridContainer.prototype.m_columnsTotalCount=0;e.RscGridContainer.prototype.m_dateFormatter=null;e.RscGridContainer.prototype.m_dateTimeFormatter=null;e.RscGridContainer.prototype.m_derivePercentageFromShift=false;e.RscGridContainer.prototype.m_emptyCurrencyPair=null;e.RscGridContainer.prototype.m_filled=false;e.RscGridContainer.prototype.m_gridCollector=null;e.RscGridContainer.prototype.m_lastColumnToFetch=0;e.RscGridContainer.prototype.m_lastRowToFetch=0;e.RscGridContainer.prototype.m_overwriteTexts=null;e.RscGridContainer.prototype.m_rowsAxis=null;e.RscGridContainer.prototype.m_rowsTotalCount=0;e.RscGridContainer.prototype.m_scaleTextsMap=null;e.RscGridContainer.prototype.m_sortDirections=null;e.RscGridContainer.prototype.m_totalColumnsCountAccurate=false;e.RscGridContainer.prototype.m_totalRowsCountAccurate=false;e.RscGridContainer.prototype.m_userProfile=null;e.RscGridContainer.prototype.m_visualizationManager=null;e.RscGridContainer.prototype.addCelValueAt=function(e,t,i){while(e.size()<t){e.add(null)}if(t===e.size()){e.add(i)}else{e.set(t,i)}};e.RscGridContainer.prototype.analyzeSortingOperations=function(t){let i=t.getSortingManager();let n=i.getSortingOperations();let r;let l;for(r=0;r<n.size();r++){let o=n.get(r);let s=o.getSortingType();let a=o.getDirection();if(o.getCustomSort()!==null){continue}else if(s.isTypeOf(e.SortType.MEMBER_KEY)){l=o.getDimension();if(this.checkAbstractDimensionSort(l,t,i)){e.XStream.of(o.getDimension().getMainAttribute().getFields()).filter(t=>t.getPresentationType().isTypeOf(e.PresentationType.ABSTRACT_KEY)).forEach(e=>{this.getSortDirections().put(e.getName(),a)})}}else if(s.isTypeOf(e.SortType.MEMBER_TEXT)){l=o.getDimension();if(this.checkAbstractDimensionSort(l,t,i)){e.XStream.of(o.getDimension().getMainAttribute().getFields()).filter(t=>t.getPresentationType().isTypeOf(e.PresentationType.ABSTRACT_TEXT)).forEach(e=>{this.getSortDirections().put(e.getName(),a)})}}else if(s.isTypeOf(e.SortType.FIELD)){let e=o.getField();l=e.getDimension();if(this.checkAbstractDimensionSort(l,t,i)&&!this.isFallbackFieldSort(e)){this.getSortDirections().put(e.getName(),a)}}else if(s.isTypeOf(e.SortType.DATA_CELL_VALUE)||s.isTypeOf(e.SortType.COMPLEX)){let t=e.RscMappingUtils.getSimplifiedUniqueName(o.getElementPath());this.getSortDirections().put(t,a)}else if(s.isTypeOf(e.SortType.MEASURE)){let t=o.getMeasure();this.getSortDirections().put(t.getName(),a);let i=o.getSecondaryMeasure();if(e.notNull(i)){this.getSortDirections().put(e.XStringUtils.concatenate3(t.getName(),":",i.getName()),a)}}}};e.RscGridContainer.prototype.areCellValuesComplete=function(){return!e.XCollectionUtils.contains(this.m_cellValues,t=>e.isNull(t))&&!e.XStream.of(this.m_cellValues).anyMatch(t=>e.XCollectionUtils.contains(t,t=>e.isNull(t)))};e.RscGridContainer.prototype.checkAbstractDimensionSort=function(e,t,i){return!i.hasOverrulingSortingOperationForDimension(e)&&(t.getRowsAxis().contains(e)||t.getColumnsAxis().contains(e))};e.RscGridContainer.prototype.checkColumnComplete=function(t,i,n){let r=false;let l=this.m_cellValues.size();let o=l>i?i:-1;let s=l>n?n:-1;let a;if(this.getDataRowsTotalCount()>0){r=o>-1&&s>-1&&o<l&&s<l;if(r){for(a=o;a<=s;a++){if(this.getCellValueReference(t,a)===null){r=false;break}}}}else if(this.m_columnsAxis.getComponentsOnAxis().size()>0){let i=this.m_columnsAxis.getTuplesOnAxis();r=e.notNull(i)&&i.size()>t&&i.get(t)!==null}return r};e.RscGridContainer.prototype.checkColumnsRange=function(e,t){return this.getDataColumnsTotalCount()===0||this.checkListRange(this.m_columnsAxis.getTuplesOnAxis(),e,t)};e.RscGridContainer.prototype.checkListRange=function(e,t,i){let n=false;let r=e.size();if(t<=r&&i<r){n=true;for(let r=t;r<=i;r++){if(e.get(r)===null){n=false;break}}}return n};e.RscGridContainer.prototype.checkRowComplete=function(t,i,n){let r=false;let l=this.getDataColumnsTotalCount();let o;if(l>0){let s=l>i?i:-1;let a=l>n?n:-1;r=s>-1&&a>-1&&s<l&&a<l;if(r){let i=this.m_cellValues.get(t);if(e.isNull(i)){r=false}else{for(o=s;o<=a;o++){if(o>=i.size()||i.get(o)===null){r=false;break}}}}}else if(this.m_rowsAxis.getComponentsOnAxis().size()>0){let i=this.m_rowsAxis.getTuplesOnAxis();r=e.notNull(i)&&i.size()>t&&i.get(t)!==null}return r};e.RscGridContainer.prototype.checkRowsRange=function(e,t){return this.getDataRowsTotalCount()===0||this.checkListRange(this.m_rowsAxis.getTuplesOnAxis(),e,t)};e.RscGridContainer.prototype.clearInternal=function(){this.m_rowsAxis=e.XObjectExt.release(this.m_rowsAxis);this.m_columnsAxis=e.XObjectExt.release(this.m_columnsAxis);this.m_cellValues=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_cellValues);this.m_sortDirections=e.XObjectExt.release(this.m_sortDirections);this.m_activeVersions=null;this.m_lastRowToFetch=-1;this.m_lastColumnToFetch=-1;this.m_totalRowsCountAccurate=false;this.m_totalColumnsCountAccurate=false;this.m_filled=false};e.RscGridContainer.prototype.createDataColumns=function(t,i,n){let r=i;this.m_lastColumnToFetch=e.XMath.max(1,i+t.getCursorColumnsAxis().getTuplesCount());if(n>-1){this.m_lastColumnToFetch=e.XMath.min(n+1,this.m_lastColumnToFetch)}if(this.m_columnsTotalCount===-1||this.m_columnsTotalCount>i||!this.m_totalColumnsCountAccurate){this.preFillAxis(t.getCursorColumnsAxis(),this.m_columnsAxis,t.getResultSetContainer().getOffsetColumns(),t.getDataColumns());if(this.m_columnsAxis.getTupleAt(i)===null){r=i+1}}return r};e.RscGridContainer.prototype.createDataRows=function(t,i,n){let r=i;this.m_lastRowToFetch=e.XMath.max(1,t.getResultSetContainer().getOffsetRows()+t.getCursorRowsAxis().getTuplesCount());if(n>-1){this.m_lastRowToFetch=e.XMath.min(this.m_lastRowToFetch,n+1)}if(this.m_rowsTotalCount===-1||this.m_rowsTotalCount>i||!this.m_totalRowsCountAccurate){this.preFillAxis(t.getCursorRowsAxis(),this.m_rowsAxis,t.getResultSetContainer().getOffsetRows(),t.getDataRows());if(this.m_rowsAxis.getTupleAt(i)===null){r=i+1}}this.retrieveColumnsTotalCount(t);this.retrieveRowsTotalCount(t);return r};e.RscGridContainer.prototype.createFormatterSettings=function(t,i){let n=e.DataCellNumberFormatterSettings.create(t);let r=e.XNumberFormatterSettingsFactory.getInstance();let l=r.merge(n,this.m_userProfile);let o=e.QStructureMemberFormatterSettings.create(i,t.getQueryModel());return r.merge(l,o)};e.RscGridContainer.prototype.createScaleTextsMap=function(){this.m_scaleTextsMap=e.XHashMapByString.create();this.m_scaleTextsMap.put(e.XStringUtils.concatenate2(e.ScaleFormat.SHORT.getName(),"_3"),this.m_overwriteTexts.getByKey(e.RscCollectorConstants.S_SCALE_SHORT_THOUSAND));this.m_scaleTextsMap.put(e.XStringUtils.concatenate2(e.ScaleFormat.SHORT.getName(),"_6"),this.m_overwriteTexts.getByKey(e.RscCollectorConstants.S_SCALE_SHORT_MILLION));this.m_scaleTextsMap.put(e.XStringUtils.concatenate2(e.ScaleFormat.SHORT.getName(),"_9"),this.m_overwriteTexts.getByKey(e.RscCollectorConstants.S_SCALE_SHORT_BILLION));this.m_scaleTextsMap.put(e.XStringUtils.concatenate2(e.ScaleFormat.LONG.getName(),"_3"),this.m_overwriteTexts.getByKey(e.RscCollectorConstants.S_SCALE_LONG_THOUSAND));this.m_scaleTextsMap.put(e.XStringUtils.concatenate2(e.ScaleFormat.LONG.getName(),"_6"),this.m_overwriteTexts.getByKey(e.RscCollectorConstants.S_SCALE_LONG_MILLION));this.m_scaleTextsMap.put(e.XStringUtils.concatenate2(e.ScaleFormat.LONG.getName(),"_9"),this.m_overwriteTexts.getByKey(e.RscCollectorConstants.S_SCALE_LONG_BILLION))};e.RscGridContainer.prototype.extractStructureMembers=function(t,i){let n=e.XList.create();this.extractStructureMembersInternal(n,this.m_columnsAxis.getTupleAt(t));this.extractStructureMembersInternal(n,this.m_rowsAxis.getTupleAt(i));return n};e.RscGridContainer.prototype.extractStructureMembersInternal=function(t,i){if(e.notNull(i)){i.extractStructureMembers(t)}};e.RscGridContainer.prototype.fillDataCells=function(t,i,n,r){for(let l=0;l<t.getDataRows();l++){let o=i+l;let s=this.getOrCreateCellRow(o);for(let i=0;i<t.getDataColumns();i++){let a=n+i;let u=t.getDataCell(i,l);let p=u.isDataEntryEnabled();let c=u.getQueryDataCellReference();let g=u.getFormattedValue();let m=this.getFormattedValue(u,o,a);let f=m.getFirstObject();let C=m.getSecondObject();let d=f.getFirstString();let y=f.getSecondString();let h=C.getFirstString();let _=C.getSecondString();let T;let S=u.getValueType();if(u.getValueException()!==e.ValueException.UNDEFINED&&u.getValueException()!==e.ValueException.NULL_VALUE){if(S.isNumber()){T=u.getDecFloat()}else if(S===e.XValueType.DATE){T=u.getDate()}else if(S===e.XValueType.TIME){T=u.getTime()}else if(S===e.XValueType.DATE_TIME){T=u.getDateTime()}else{T=e.XStringValue.create(u.getStringRepresentation())}}else{T=e.XStringValue.create("")}if(e.isNull(T)){T=e.XStringValue.create(null)}let R=u.getValueException();let D=u.getDocumentId();if(e.XStringUtils.isNotNullAndNotEmpty(D)){r.add(D)}let A=u.getMaxAlertLevel();let E=u.getMaxAlertLevelName();let V=this.extractStructureMembers(a,o);let N=this.getTags(u.getQueryModel(),V);let x=e.RscCellValueReference.create(T,g,y,d,_,h,u.getScalingFactor(),u.getCurrencyUnit(),u.getComplexUnit(),u.getValueType(),R,N,E,A,D,p,c);let P=this.createFormatterSettings(u,V);x.setScalingText(this.getFormattedScale(u,V,P));x.setUnitInformation(this.getUnitInformation(u,V,P));this.addCelValueAt(s,a,x)}}this.retrieveColumnsTotalCount(t);this.retrieveRowsTotalCount(t)};e.RscGridContainer.prototype.fillEmptyTable=function(t){this.m_overwriteTexts=e.XHashMapByString.create();let i=t.getVisualizationManager().getApplicationSettings().getOverwriteTexts();let n=i.getKeysAsIterator();while(n.hasNext()){let e=n.next();this.m_overwriteTexts.put(e,i.getByKey(e))}this.m_rowsAxis=e.RscAxisReference.createForEmptyResultSet(this,t.getRowsAxis(),t,this.m_overwriteTexts);this.m_columnsAxis=e.RscAxisReference.createForEmptyResultSet(this,t.getColumnsAxis(),t,this.m_overwriteTexts);this.m_filled=true};e.RscGridContainer.prototype.fillFromResultSetContainer=function(t,i){let n=t.getQueryModel().getVisualizationManager().getApplicationSettings();this.m_userProfile=n.getUserProfile();this.m_emptyCurrencyPair=e.XPairOfString.create("","");this.initializeUserProfileSettings();let r=t.getOffsetRows();let l=t.getOffsetColumns();let o=true;let s=t.hasErrors()||t.getSyncState().isNotInSync();let a=null;if(e.isNull(this.m_rowsAxis)||e.isNull(this.m_columnsAxis)||e.isNull(this.m_cellValues)||this.needsStartOver(t)||s){this.clearInternal();this.m_cellValues=e.XList.create();this.m_overwriteTexts=e.XHashMapByString.create();this.m_derivePercentageFromShift=n.isDerivePercentageFromShift();let i=n.getOverwriteTexts();let r=i.getKeysAsIterator();while(r.hasNext()){let e=r.next();this.m_overwriteTexts.put(e,i.getByKey(e))}o=!s&&this.preFill(t.getCursorResultSet())}if(o){let n=t.getCursorResultSet();let o=r+e.XMath.max(n.getDataRows(),n.getCursorRowsAxis().getTuplesCount())-1;let s=l+e.XMath.max(n.getDataColumns(),n.getCursorColumnsAxis().getTuplesCount())-1;let u=this.getIndexOfFirstUndefinedRowAfter(r);let p=this.getIndexOfLastUndefinedRowBefore(o);let c=this.getIndexOfFirstUndefinedColumnAfter(l);let g=this.getIndexOfLastUndefinedColumnBefore(s);if(u<=p){this.prepareDataRows(n,u,p)}if(c<=g){this.prepareDataColumns(n,c,g)}this.fillDataCells(n,r,l,i);a=e.RscGridTileCarrier.create(r,o,l,s)}else{a=e.RscGridTileCarrier.create(0,-2,0,-2);this.fillEmptyTable(t.getQueryModel())}this.m_filled=true;return a};e.RscGridContainer.prototype.getApplication=function(){return this.getQueryModel().getApplication()};e.RscGridContainer.prototype.getCellValueReference=function(t,i){let n=e.notNull(this.m_cellValues)&&i>-1&&i<this.m_cellValues.size()?this.m_cellValues.get(i):null;return e.notNull(n)&&t>-1&&t<n.size()?n.get(t):null};e.RscGridContainer.prototype.getCellValueReferenceStrict=function(t,i){let n=e.XCollectionUtils.size(this.m_cellValues);e.XBooleanUtils.checkFalse(i<0||i>=n,e.XStringUtils.concatenate3("Row index is invalid, valid indices are [0, ",e.XIntegerValue.create(n-1).toString(),"]"));let r=i>-1&&i<this.m_cellValues.size()?this.m_cellValues.get(i):null;let l=e.XCollectionUtils.size(r);e.XBooleanUtils.checkFalse(t<0||t>=l,e.XStringUtils.concatenate3("Column index is invalid, valid indices are [0, ",e.XIntegerValue.create(l-1).toString(),"]"));return t>-1&&t<r.size()?r.get(t):null};e.RscGridContainer.prototype.getCollector=function(){return e.XWeakReferenceUtil.getHardRef(this.m_gridCollector)};e.RscGridContainer.prototype.getColumnTupleAt=function(e){return this.m_columnsAxis.getTupleAt(e)};e.RscGridContainer.prototype.getColumnsAxis=function(){return e.isNull(this.m_columnsAxis)?null:this.m_columnsAxis};e.RscGridContainer.prototype.getColumnsLoadedCount=function(){return e.isNull(this.m_columnsAxis)?0:this.m_columnsAxis.getTuplesLoadedCount()};e.RscGridContainer.prototype.getDataColumnsTotalCount=function(){return e.isNull(this.m_columnsAxis)?0:this.m_columnsAxis.getTuplesTotalCount()};e.RscGridContainer.prototype.getDataRowsTotalCount=function(){return e.isNull(this.m_rowsAxis)?0:this.m_rowsAxis.getTuplesTotalCount()};e.RscGridContainer.prototype.getFormattedScale=function(t,i,n){let r="";let l=t.getValueException();if(l===e.ValueException.NORMAL||l===e.ValueException.ZERO){let l=t.getValueType();if(this.shouldDerivePercentageFromShift(t,i)){r=e.RscCollectorConstants.PERCENT}else if(l.isTypeOf(e.XValueType.DOUBLE)){r=e.XNumberFormatter.getScaleText(n.getScaleFactor(),n.getScaleFormat(),this.m_scaleTextsMap).getName()}else if(l.isTypeOf(e.XValueType.PERCENT)){r=e.RscCollectorConstants.PERCENT}}return r};e.RscGridContainer.prototype.getFormattedValue=function(t,i,n){let r=this.m_rowsAxis.getTupleAt(i);let l=this.m_columnsAxis.getTupleAt(n);let o=this.shouldSkipUnit(r)||this.shouldSkipUnit(l);let s=this.shouldSkipScaling(r)||this.shouldSkipScaling(l);let a=this.shouldSkipPercent(r)||this.shouldSkipPercent(l);let u=t.getFormattedValue();let p=e.XNumberFormatter.standardizeFormatString(t.getDecimalPlaces(),t.getValueType().isNumber()||t.getValueType().isTypeOf(e.XValueType.NUMBER));let c=u;let g=p;let m=t.getValueException();let f=t.getCurrencyUnit();let C="";let d="";if(f.hasPrefix()){C=e.XStringUtils.concatenate2(f.getPrefix()," ")}if(f.hasSuffix()){d=e.XStringUtils.concatenate2(" ",f.getSuffix())}let y=false;if(e.notNull(u)&&(m===e.ValueException.NORMAL||m===e.ValueException.ZERO)){let r=e.XPairOfString.create(C,d);let l=this.extractStructureMembers(n,i);let m=t.getValueType();if(this.shouldDerivePercentageFromShift(t,l)){let i=this.createFormatterSettings(t,l);let n=e.XNumberFormatter.formatDecFloatToStringUsingSettingsWithCurrency(t.getDecFloat(),i,r,this.m_scaleTextsMap,p,true,true);if(s){u=n.getFirstString();c=e.XStringUtils.concatenate3(n.getFirstString()," ",e.RscCollectorConstants.PERCENT)}else{u=e.XStringUtils.concatenate3(n.getFirstString()," ",e.RscCollectorConstants.PERCENT);c=u}p=n.getSecondString();g=p;y=true}else if(m.isTypeOf(e.XValueType.DOUBLE)){let i=this.createFormatterSettings(t,l);let n=e.RscMappingUtils.getCurrencyUnitPair(t.getComplexUnit(),o,i.getCurrencyFormatSettings().getCurrencyPresentation());y=true;let r;let a;if(e.notNull(n)){r=e.XNumberFormatter.formatDecFloatToStringUsingSettingsWithCurrency(t.getDecFloat(),i,n,this.m_scaleTextsMap,p,s,false);u=r.getFirstString();p=r.getSecondString()}else{a=e.XPairOfString.create(C,d);r=e.XNumberFormatter.formatDecFloatToStringUsingSettingsWithCurrency(t.getDecFloat(),i,a,this.m_scaleTextsMap,p,s,false);u=r.getFirstString();p=r.getSecondString()}n=e.RscMappingUtils.getCurrencyUnitPair(t.getComplexUnit(),false,i.getCurrencyFormatSettings().getCurrencyPresentation());if(e.notNull(n)){r=e.XNumberFormatter.formatDecFloatToStringUsingSettingsWithCurrency(t.getDecFloat(),i,n,this.m_scaleTextsMap,p,false,false);c=r.getFirstString();g=r.getSecondString()}else{a=e.XPairOfString.create(C,d);r=e.XNumberFormatter.formatDecFloatToStringUsingSettingsWithCurrency(t.getDecFloat(),i,a,this.m_scaleTextsMap,p,false,false);c=r.getFirstString();g=r.getSecondString()}}else if(m.isTypeOf(e.XValueType.PERCENT)){let i=this.createFormatterSettings(t,l);i.setScaleFactor(e.XIntegerValue.create(-2));let n=e.XNumberFormatter.formatDecFloatToStringUsingSettingsWithCurrency(t.getDecFloat(),i,r,this.m_scaleTextsMap,p,true,true);if(a){u=n.getFirstString();c=e.XStringUtils.concatenate3(n.getFirstString()," ",e.RscCollectorConstants.PERCENT)}else{u=e.XStringUtils.concatenate3(n.getFirstString()," ",e.RscCollectorConstants.PERCENT);c=u}p=n.getSecondString();g=p;y=true}else if(m.isTypeOf(e.XValueType.DATE)&&e.notNull(this.m_dateFormatter)){let i=t.getDate();u=e.isNull(i)?u:this.m_dateFormatter.formatDate(i)}else if(m.isTypeOf(e.XValueType.DATE_TIME)&&e.notNull(this.m_dateTimeFormatter)){let i=t.getDateTime();u=e.isNull(i)?u:this.m_dateTimeFormatter.formatDateTime(i)}if(!y){u=e.XStringUtils.concatenate2(C,u);u=e.XStringUtils.concatenate2(u,d);c=u}}else if(m===e.ValueException.UNDEFINED){u="-";p="";c=u;g=p}else if(m===e.ValueException.MIXED_CURRENCIES_OR_UNITS||m===e.ValueException.UNDEFINED_NOP){u="*";p="\\*;\\*";c=u;g=p}else if(m!==e.ValueException.NORMAL&&m!==e.ValueException.ZERO){u="";p="";c=u;g=p}if(e.isNull(u)){u=" ";p="";c=u;g=p}return e.XPair.create(e.XPairOfString.create(u,p),e.XPairOfString.create(c,g))};e.RscGridContainer.prototype.getIndexOfFirstIncompleteTileColumnAfter=function(t,i,n,r){let l=t;if(e.notNull(this.m_columnsAxis)){let e=this.m_columnsAxis.getTuplesOnAxis();let t=e.size();if(this.checkRowsRange(n,r)){while(l<t&&this.checkColumnComplete(l,n,r)){l++}}}return l};e.RscGridContainer.prototype.getIndexOfFirstIncompleteTileRowAfter=function(t,i,n,r){let l=n;if(e.notNull(this.m_rowsAxis)){let e=this.m_rowsAxis.getTuplesOnAxis();let n=e.size();if(this.checkColumnsRange(t,i)){while(l<n&&this.checkRowComplete(l,t,i)){l++}}}return l};e.RscGridContainer.prototype.getIndexOfFirstUndefinedColumnAfter=function(t){let i=t;if(e.notNull(this.m_columnsAxis)){let e=this.m_columnsAxis.getTuplesOnAxis();let t=e.size();while(i<t&&e.get(i)!==null){i++}}return i};e.RscGridContainer.prototype.getIndexOfFirstUndefinedRowAfter=function(t){let i=t;if(e.notNull(this.m_rowsAxis)){let e=this.m_rowsAxis.getTuplesOnAxis();let t=e.size();while(i<t&&e.get(i)!==null){i++}}return i};e.RscGridContainer.prototype.getIndexOfLastIncompleteTileColumnBefore=function(t,i,n,r){let l=i;if(e.notNull(this.m_columnsAxis)){let e=this.m_columnsAxis.getTuplesOnAxis();let t=e.size();if(this.checkRowsRange(n,r)){while(l<t&&l>-1&&this.checkColumnComplete(l,n,r)){l--}}}return l};e.RscGridContainer.prototype.getIndexOfLastIncompleteTileRowBefore=function(t,i,n,r){let l=r;if(e.notNull(this.m_rowsAxis)){let e=this.m_rowsAxis.getTuplesOnAxis();let n=e.size();if(this.checkColumnsRange(t,i)){while(l<n&&l>-1&&this.checkRowComplete(l,t,i)){l--}}}return l};e.RscGridContainer.prototype.getIndexOfLastUndefinedColumnBefore=function(t){let i=t;if(e.notNull(this.m_columnsAxis)){let e=this.m_columnsAxis.getTuplesOnAxis();let t=e.size();while(i<t&&i>-1&&e.get(i)!==null){i--}}return i};e.RscGridContainer.prototype.getIndexOfLastUndefinedRowBefore=function(t){let i=t;if(e.notNull(this.m_rowsAxis)){let e=this.m_rowsAxis.getTuplesOnAxis();let t=e.size();while(i<t&&i>-1&&e.get(i)!==null){i--}}return i};e.RscGridContainer.prototype.getOrCreateCellRow=function(t){while(this.m_cellValues.size()<t){this.m_cellValues.add(null)}if(t===this.m_cellValues.size()){this.m_cellValues.add(e.XList.create())}else if(this.m_cellValues.get(t)===null){this.m_cellValues.set(t,e.XList.create())}return this.m_cellValues.get(t)};e.RscGridContainer.prototype.getProcess=function(){return this.getQueryModel().getProcess()};e.RscGridContainer.prototype.getQueryModel=function(){return this.getVisualizationManager().getQueryModel()};e.RscGridContainer.prototype.getRowTupleAt=function(t){return e.isNull(this.m_rowsAxis)?null:this.m_rowsAxis.getTupleAt(t)};e.RscGridContainer.prototype.getRowsAxis=function(){return this.m_rowsAxis};e.RscGridContainer.prototype.getRowsLoadedCount=function(){return e.isNull(this.m_rowsAxis)?0:this.m_rowsAxis.getTuplesLoadedCount()};e.RscGridContainer.prototype.getSession=function(){return this.getQueryModel().getSession()};e.RscGridContainer.prototype.getSortDirections=function(){return this.m_sortDirections};e.RscGridContainer.prototype.getTags=function(t,i){let n=e.XList.create();e.XCollectionUtils.forEach(i,e=>{n.addAll(e.getTagging().getKeysAsReadOnlyList())});if(e.XCollectionUtils.hasElements(i)){let r=t.getQueryDataCells();let l=e.XStream.of(r).filter(t=>e.XStream.of(i).allMatch(e=>t.hasMemberReference(e))).collect(e.XStreamCollector.toList());if(e.XCollectionUtils.size(l)===1){e.XCollectionUtils.getOptionalAtIndex(l,0).ifPresent(e=>{n.addAll(e.getTagging().getKeysAsReadOnlyList())})}}return n};e.RscGridContainer.prototype.getUnitInformation=function(t,i,n){let r=t.getValueException();let l=t.getCurrencyUnit();let o="";let s="";if(l.hasPrefix()){o=e.XStringUtils.concatenate2(l.getPrefix()," ")}if(l.hasSuffix()){s=e.XStringUtils.concatenate2(" ",l.getSuffix())}let a=e.XPairOfString.create(o,s);if(r===e.ValueException.NORMAL||r===e.ValueException.ZERO){let r=t.getValueType();if(r.isTypeOf(e.XValueType.DOUBLE)&&!this.shouldDerivePercentageFromShift(t,i)){a=e.RscMappingUtils.getCurrencyUnitPair(t.getComplexUnit(),false,n.getCurrencyFormatSettings().getCurrencyPresentation());if(e.isNull(a)){a=e.XPairOfString.create(o,s)}}}return a};e.RscGridContainer.prototype.getVisualizationManager=function(){return e.XWeakReferenceUtil.getHardRef(this.m_visualizationManager)};e.RscGridContainer.prototype.initializeUserProfileSettings=function(){if(e.notNull(this.m_userProfile)){let t=null;let i=null;if(this.m_userProfile.getDateFormatting()!==null){t=this.m_userProfile.getDateFormatting();try{this.m_dateFormatter=e.XDateTimeFormatter.create(t)}catch(i){e.XLogger.println(e.XStringUtils.concatenate2("Invalid date format ",t))}}if(this.m_userProfile.getTimeFormatting()!==null){i=this.m_userProfile.getTimeFormatting()}if(e.notNull(t)||e.notNull(i)){let n=t;if(e.isNull(t)){n=i}else if(e.notNull(i)){n=e.XStringUtils.concatenate3(t," ",i)}try{this.m_dateTimeFormatter=e.XDateTimeFormatter.create(n)}catch(t){e.XLogger.println(e.XStringUtils.concatenate2("Invalid date or time format ",n))}}}};e.RscGridContainer.prototype.invalidate=function(){this.clearInternal()};e.RscGridContainer.prototype.isAccurate=function(t,i,n,r,l){return n>-1&&(this.getQueryModel().getModelCapabilities().supportsUndefinedTupleCountTotals()||!this.getQueryModel().getSystemType().isTypeOf(e.SystemType.HANA)||(r>=n||r+i<n)&&l)||t<i};e.RscGridContainer.prototype.isComplete=function(){return e.notNull(this.m_rowsAxis)&&e.notNull(this.m_columnsAxis)&&this.m_rowsAxis.isComplete()&&this.m_columnsAxis.isComplete()&&this.areCellValuesComplete()};e.RscGridContainer.prototype.isFallbackFieldSort=function(t){let i=false;if(t.getPresentationType().isTypeOf(e.PresentationType.ABSTRACT_KEY)){let n=t.getDimension();i=e.XStream.of(t.getQueryModel().getSortingManager().getSortingOperations()).filter(t=>t.getSortingType()===e.SortType.FIELD&&t.getField().getDimension()===n).map(e=>e.getField().getPresentationType()).anyMatch(t=>!t.isTypeOf(e.PresentationType.ABSTRACT_KEY))}return i};e.RscGridContainer.prototype.isFilled=function(){return this.m_filled};e.RscGridContainer.prototype.isOriginInitialized=function(){return e.notNull(this.m_rowsAxis)&&e.notNull(this.m_columnsAxis)&&this.getCellValueReference(0,0)!==null};e.RscGridContainer.prototype.isTileComplete=function(t,i,n,r){let l=e.XMath.min(r,this.getDataRowsTotalCount()-1);let o=e.XMath.min(i,this.getDataColumnsTotalCount()-1);let s=this.checkRowsRange(n,l)&&this.checkColumnsRange(t,o);if(s){for(let e=t;e<=o;e++){if(!this.checkColumnComplete(e,n,l)){s=false;break}}}return s};e.RscGridContainer.prototype.needsStartOver=function(e){return this.getCollector().needsStartOver(e)};e.RscGridContainer.prototype.preFill=function(t){this.m_sortDirections=e.XHashMapByString.create();this.analyzeSortingOperations(t.getQueryModel());let i=t.getCursorColumnsAxis().getRsDimensions();let n=t.getCursorRowsAxis().getRsDimensions();this.retrieveColumnsTotalCount(t);this.retrieveRowsTotalCount(t);let r=i.size();let l=n.size();let o=e.XMath.max(t.getDataRows(),t.getCursorRowsAxis().getTuplesCount());let s=t.getQueryModel();try{let t=s.getQueryManager().getPlanningModel();this.m_activeVersions=e.isNull(t)?null:t.getActiveVersions()}catch(t){e.XLogger.getInstance().logExt(null,e.Severity.DEBUG,0,"Error creating planning model")}this.m_lastRowToFetch=e.XMath.max(1,o);this.m_rowsAxis=e.RscAxisReference.createForValidResultSet(this,t.getCursorRowsAxis(),s,this.m_overwriteTexts);this.m_columnsAxis=e.RscAxisReference.createForValidResultSet(this,t.getCursorColumnsAxis(),s,this.m_overwriteTexts);let a=e.XMath.max(t.getDataColumns(),t.getCursorColumnsAxis().getTuplesCount());let u=a>0&&r>0||o>0&&l>0||a>0&&o>0;this.createScaleTextsMap();if(u){this.prepareDataColumns(t,0,-1)}return u};e.RscGridContainer.prototype.preFillAxis=function(t,i,n,r){t.setTupleCursorBeforeStart();let l=i;let o=n;let s;while(t.hasNextTuple()){t.nextTuple();s=e.RscTupleReference.createForRsAxis(i,o,t,this.m_overwriteTexts,this.m_scaleTextsMap,this.m_userProfile,this.m_emptyCurrencyPair,this.m_activeVersions,this.m_derivePercentageFromShift);l.insertTuple(o,s);o++}e.RscTupleReference.compareRepetition(l.getTupleAt(o-1),l.getTupleAt(o));while(o<r+n){s=e.RscTupleReference.createForRsAxisDummy(i,o);l.insertTuple(o,s);o++}};e.RscGridContainer.prototype.prepareDataColumns=function(e,t,i){if(!this.m_totalColumnsCountAccurate){this.retrieveColumnsTotalCount(e)}let n=this.createDataColumns(e,t,i);return n};e.RscGridContainer.prototype.prepareDataRows=function(e,t,i){if(!this.m_totalRowsCountAccurate){this.retrieveRowsTotalCount(e)}let n=this.createDataRows(e,t,i);return n};e.RscGridContainer.prototype.releaseObject=function(){this.m_visualizationManager=null;this.m_overwriteTexts=e.XObjectExt.release(this.m_overwriteTexts);this.m_scaleTextsMap=e.XObjectExt.release(this.m_scaleTextsMap);this.clearInternal();e.XObject.prototype.releaseObject.call(this)};e.RscGridContainer.prototype.retrieveColumnsTotalCount=function(t){let i=e.XMath.max(t.getDataColumns(),t.getCursorColumnsAxis().getTuplesCount());let n=t.getCursorColumnsAxis().getTuplesCountTotal();this.m_totalColumnsCountAccurate=this.m_totalColumnsCountAccurate||this.isAccurate(i,t.getResultSetContainer().getMaxColumns(),n,this.m_columnsTotalCount,this.m_totalColumnsCountAccurate);this.m_columnsTotalCount=n;if(!this.m_totalColumnsCountAccurate){let e=10;if(this.m_lastColumnToFetch>-1&&t.getResultSetContainer().getMaxColumns()>this.m_lastColumnToFetch+1){e=0;this.m_totalColumnsCountAccurate=true}this.m_columnsTotalCount=this.m_lastColumnToFetch+e}this.m_columnsTotalCount=e.XMath.max(this.m_columnsTotalCount,i)};e.RscGridContainer.prototype.retrieveRowsTotalCount=function(t){let i=e.XMath.max(t.getDataRows(),t.getCursorRowsAxis().getTuplesCount());let n=t.getCursorRowsAxis().getTuplesCountTotal();this.m_totalRowsCountAccurate=this.m_totalRowsCountAccurate||this.isAccurate(i,t.getResultSetContainer().getMaxRows(),n,this.m_rowsTotalCount,this.m_totalRowsCountAccurate);this.m_rowsTotalCount=n;if(!this.m_totalRowsCountAccurate){let e=10;if(this.m_lastRowToFetch>-1&&t.getResultSetContainer().getMaxRows()>this.m_lastRowToFetch+1){e=0;this.m_totalRowsCountAccurate=true}this.m_rowsTotalCount=this.m_lastRowToFetch+e}this.m_rowsTotalCount=e.XMath.max(this.m_rowsTotalCount,i)};e.RscGridContainer.prototype.setupWithVisualizationManager=function(t,i){this.m_visualizationManager=e.XWeakReferenceUtil.getWeakRef(t);this.m_gridCollector=e.XWeakReferenceUtil.getWeakRef(i);this.m_cellValues=e.XList.create()};e.RscGridContainer.prototype.shouldDerivePercentageFromShift=function(t,i){let n=t.getScalingFactor();let r=e.XCollectionUtils.hasElements(i)?i.get(0):null;let l=e.XCollectionUtils.hasElements(i)&&i.size()>1?i.get(1):null;if(!t.getQueryModel().getModelCapabilities().supportsDataCells()){let t=e.QStructureMemberFormatterSettings.getLeadingScalingPower(r,l);if(t.isPresent()){n=t.get().getInteger()}}return this.m_derivePercentageFromShift&&t.getValueType().isTypeOf(e.XValueType.DOUBLE)&&n===2&&(t.getCurrencyUnit()===null||t.getCurrencyUnit().isEmpty())&&e.RscMappingUtils.getCurrencyUnitPair(t.getComplexUnit(),false,null)===null};e.RscGridContainer.prototype.shouldSkipPercent=function(t){return e.notNull(t)&&t.getCellValueType()===e.XValueType.PERCENT};e.RscGridContainer.prototype.shouldSkipScaling=function(t){return e.notNull(t)&&t.getNumericShift()!==null};e.RscGridContainer.prototype.shouldSkipUnit=function(t){return e.notNull(t)&&(t.getCurrencyUnit()!==null||t.getComplexUnit()!==null)};e.RscGridContainer.prototype.totalColumnsCountMayBeInaccurate=function(){return!this.m_totalColumnsCountAccurate};e.RscGridContainer.prototype.totalRowsCountMayBeInaccurate=function(){return!this.m_totalRowsCountAccurate};e.RscListContainer=function(){};e.RscListContainer.prototype=new e.XObject;e.RscListContainer.prototype._ff_c="RscListContainer";e.RscListContainer.create=function(t,i,n,r){let l=new e.RscListContainer;l.setupListContainer(t,i,n,r);return l};e.RscListContainer.createWithMembers=function(t,i,n,r,l){let o=i.createForStructureProjection(r,l);let s=n.createForStructureProjection(r,l);return e.RscListContainer.create(t,o,s,r)};e.RscListContainer.prototype.m_gridContainer=null;e.RscListContainer.prototype.m_listAxis=null;e.RscListContainer.prototype.getApplication=function(){return this.getGridContainer().getApplication()};e.RscListContainer.prototype.getGridContainer=function(){return e.XWeakReferenceUtil.getHardRef(this.m_gridContainer)};e.RscListContainer.prototype.getListAxis=function(){return this.m_listAxis};e.RscListContainer.prototype.getProcess=function(){return this.getGridContainer().getProcess()};e.RscListContainer.prototype.getQueryModel=function(){return this.getGridContainer().getQueryModel()};e.RscListContainer.prototype.getSession=function(){return this.getGridContainer().getSession()};e.RscListContainer.prototype.releaseObject=function(){this.m_listAxis=e.XObjectExt.release(this.m_listAxis);e.XObject.prototype.releaseObject.call(this)};e.RscListContainer.prototype.setupListContainer=function(t,i,n,r){this.m_gridContainer=e.XWeakReferenceUtil.getWeakRef(t);this.m_listAxis=e.RscAxisReference.createMergedAxis(i,n,t,r)};e.RscMeasureReference=function(){};e.RscMeasureReference.prototype=new e.RscGenericModelReference;e.RscMeasureReference.prototype._ff_c="RscMeasureReference";e.RscMeasureReference.createForFieldValueReference=function(t){let i=new e.RscMeasureReference;i.setupInternal(t.getDimensionMemberName(),t.getText(),null);let n=t.getFieldReference().getDimension();let r=n.getStructureMemberByAliasOrMember(t.getDimensionMemberName());i.setupMeasureReference(r,t.getDisplayLevel(),t.getDrillState());return i};e.RscMeasureReference.createForValueHelpNode=function(t){let i=new e.RscMeasureReference;i.setupInternal(t.getName(),t.getDimensionMember().getText(),null);i.setupMeasureReference(t.getDimensionMember(),t.getDisplayLevel(),t.getDrillState());return i};e.RscMeasureReference.prototype.m_cellValueType=null;e.RscMeasureReference.prototype.m_complexUnit=null;e.RscMeasureReference.prototype.m_currencyUnit=null;e.RscMeasureReference.prototype.m_displayLevel=0;e.RscMeasureReference.prototype.m_drillState=null;e.RscMeasureReference.prototype.m_numericShift=null;e.RscMeasureReference.prototype.m_parent=null;e.RscMeasureReference.prototype.m_structureMember=null;e.RscMeasureReference.prototype.m_uniqueDecimalPlaces=0;e.RscMeasureReference.prototype.m_uniqueScalingText=null;e.RscMeasureReference.prototype.m_uniqueUnitInfo=null;e.RscMeasureReference.prototype.m_uniqueUnitScaleInformation=null;e.RscMeasureReference.prototype.applyUnitAndScalingInfoAndMakeVisible=function(t){if(!this.isVisible()){this.m_numericShift=t.getNumericShift();this.m_currencyUnit=t.getCurrencyUnit();this.m_complexUnit=t.getComplexUnit();this.m_cellValueType=t.getCellValueType();this.m_uniqueUnitScaleInformation=t.getUniqueUnitScaleInformation();this.m_uniqueUnitInfo=t.getUniqueUnitInfo();this.m_uniqueScalingText=t.getUniqueScalingText();this.m_uniqueDecimalPlaces=t.getUniqueDecimalPlaces();this.setVisible(true)}else{if(!e.XObjectExt.areEqual(this.m_numericShift,t.getNumericShift())){this.m_numericShift=null}if(!e.XObjectExt.areEqual(this.m_currencyUnit,t.getCurrencyUnit())){this.m_currencyUnit=null}if(!e.XObjectExt.areEqual(this.m_complexUnit,t.getComplexUnit())){this.m_complexUnit=null}if(!e.XObjectExt.areEqual(this.m_cellValueType,t.getCellValueType())){this.m_cellValueType=null}if(!e.XString.isEqual(this.m_uniqueUnitScaleInformation,t.getUniqueUnitScaleInformation())){this.m_uniqueUnitScaleInformation=null}if(!e.XPairOfString.arePairsEqual(this.m_uniqueUnitInfo,t.getUniqueUnitInfo())){this.m_uniqueUnitInfo=null}if(!e.XString.isEqual(this.m_uniqueScalingText,t.getUniqueScalingText())){this.m_uniqueScalingText=null}if(this.m_uniqueDecimalPlaces!==t.getUniqueDecimalPlaces()){this.m_uniqueDecimalPlaces=0}}};e.RscMeasureReference.prototype.getCellValueType=function(){return this.m_cellValueType};e.RscMeasureReference.prototype.getComplexUnit=function(){return this.m_complexUnit};e.RscMeasureReference.prototype.getCurrencyUnit=function(){return this.m_currencyUnit};e.RscMeasureReference.prototype.getDisplayLevel=function(){return this.m_displayLevel};e.RscMeasureReference.prototype.getDrillState=function(){return this.m_drillState};e.RscMeasureReference.prototype.getModelComponentType=function(){return e.MemberType.ABSTRACT_MEMBER};e.RscMeasureReference.prototype.getNumericShift=function(){return this.m_numericShift};e.RscMeasureReference.prototype.getParent=function(){return e.XWeakReferenceUtil.getHardRef(this.m_parent)};e.RscMeasureReference.prototype.getReversedScalingFactor=function(){return e.isNull(this.m_numericShift)?null:e.XIntegerValue.create(-this.m_numericShift.getInteger())};e.RscMeasureReference.prototype.getStructureMember=function(){return this.m_structureMember};e.RscMeasureReference.prototype.getUniqueDecimalPlaces=function(){return this.m_uniqueDecimalPlaces};e.RscMeasureReference.prototype.getUniqueScalingText=function(){return this.m_uniqueScalingText};e.RscMeasureReference.prototype.getUniqueUnitInfo=function(){return this.m_uniqueUnitInfo};e.RscMeasureReference.prototype.getUniqueUnitScaleInformation=function(){return this.m_uniqueUnitScaleInformation};e.RscMeasureReference.prototype.setupMeasureReference=function(e,t,i){this.m_structureMember=e;this.m_displayLevel=t;this.m_drillState=i};e.PivotProxyAxis=function(){};e.PivotProxyAxis.prototype=new e.XObject;e.PivotProxyAxis.prototype._ff_c="PivotProxyAxis";e.PivotProxyAxis.prototype.m_baseTable=null;e.PivotProxyAxis.prototype.m_dimensionIndex=0;e.PivotProxyAxis.prototype.m_fieldName=null;e.PivotProxyAxis.prototype.m_fragment=null;e.PivotProxyAxis.prototype.addPartOfHeaderSectionInfo=e.noSupport;e.PivotProxyAxis.prototype.addScopedStyle=e.noSupport;e.PivotProxyAxis.prototype.applyHeaderHandling=e.noSupport;e.PivotProxyAxis.prototype.applyTableMarkups=e.noSupport;e.PivotProxyAxis.prototype.clearScopedStyles=e.noSupport;e.PivotProxyAxis.prototype.clearTableMarkups=e.noSupport;e.PivotProxyAxis.prototype.getCellChartMemberName=function(){return this.m_fragment.getCellChartMemberName()};e.PivotProxyAxis.prototype.getCellChartOrientation=function(){return this.m_fragment.getCellChartOrientation()};e.PivotProxyAxis.prototype.getCellChartType=function(){return this.m_fragment.getCellChartType()};e.PivotProxyAxis.prototype.getDataPath=function(){return this.m_fragment.getDataPath()};e.PivotProxyAxis.prototype.getDataSiblingAt=e.noSupport;e.PivotProxyAxis.prototype.getDataSize=function(){return this.m_fragment.getDataSize()};e.PivotProxyAxis.prototype.getDimensionIndex=function(){return this.m_dimensionIndex};e.PivotProxyAxis.prototype.getEffectiveMemberHeaderHandling=function(){return this.m_fragment.getEffectiveMemberHeaderHandling()};e.PivotProxyAxis.prototype.getFieldName=function(){return this.m_fieldName};e.PivotProxyAxis.prototype.getFullIndex=function(){return this.m_fragment.getFullIndex()};e.PivotProxyAxis.prototype.getFullSize=function(){return this.m_fragment.getFullSize()};e.PivotProxyAxis.prototype.getHeaderSiblingAt=e.noSupport;e.PivotProxyAxis.prototype.getHeadersSize=function(){return this.m_fragment.getHeadersSize()};e.PivotProxyAxis.prototype.getId=function(){return this.m_fragment.getId()};e.PivotProxyAxis.prototype.getMatchingOrthogonalStyles=function(e){return this.m_fragment.getMatchingOrthogonalStyles(e)};e.PivotProxyAxis.prototype.getMatchingRectangularStyles=function(e){return this.m_fragment.getMatchingRectangularStyles(e)};e.PivotProxyAxis.prototype.getMatchingStyles=function(e){return this.m_fragment.getMatchingStyles(e)};e.PivotProxyAxis.prototype.getMatchingTableMarkups=function(e){return this.m_fragment.getMatchingTableMarkups(e)};e.PivotProxyAxis.prototype.getNewTableStyleWithPriority=e.noSupport;e.PivotProxyAxis.prototype.getParentTable=function(){return e.XWeakReferenceUtil.getHardRef(this.m_baseTable)};e.PivotProxyAxis.prototype.getPartOfHeaderSectionInfos=function(){return this.m_fragment.getPartOfHeaderSectionInfos()};e.PivotProxyAxis.prototype.getRootDimensionIndex=e.noSupport;e.PivotProxyAxis.prototype.getRootTupleIndex=function(){return this.m_fragment.getRootTupleIndex()};e.PivotProxyAxis.prototype.getScopedStyles=function(){return this.m_fragment.getScopedStyles()};e.PivotProxyAxis.prototype.getSecondaryTableStyles=function(){return this.m_fragment.getSecondaryTableStyles()};e.PivotProxyAxis.prototype.getTableStyle=function(){return this.m_fragment.getTableStyle()};e.PivotProxyAxis.prototype.getTotalLevel=function(){return this.m_fragment.getTotalLevel()};e.PivotProxyAxis.prototype.getTupleIndex=function(){return this.m_fragment.getTupleIndex()};e.PivotProxyAxis.prototype.indexTableMarkups=e.noSupport;e.PivotProxyAxis.prototype.injectStyleToList=function(e){this.m_fragment.injectStyleToList(e)};e.PivotProxyAxis.prototype.isBaseElement=function(){return this.m_fragment.getParent()===null};e.PivotProxyAxis.prototype.isEffectivelyHidden=function(){return this.m_fragment.isEffectivelyHidden()};e.PivotProxyAxis.prototype.isHeader=function(){return this.m_fragment.isHeader()};e.PivotProxyAxis.prototype.isHeaderBand=function(){return this.m_fragment.isHeaderBand()};e.PivotProxyAxis.prototype.isHideNumberForCellChart=function(){return this.m_fragment.isHideNumberForCellChart()};e.PivotProxyAxis.prototype.isShowCellChart=function(){return this.m_fragment.isShowCellChart()};e.PivotProxyAxis.prototype.isTotalsContext=function(){return this.m_fragment.isTotalsContext()};e.PivotProxyAxis.prototype.matchesSacTableSectionInfo=e.noSupport;e.PivotProxyAxis.prototype.remove=e.noSupport;e.PivotProxyAxis.prototype.removePreviousChildren=e.noSupport;e.PivotProxyAxis.prototype.removeSingle=e.noSupport;e.PivotProxyAxis.prototype.removeSubsequentChildren=e.noSupport;e.PivotProxyAxis.prototype.setCellChartMemberName=e.noSupport;e.PivotProxyAxis.prototype.setCellChartOrientation=e.noSupport;e.PivotProxyAxis.prototype.setCellChartType=e.noSupport;e.PivotProxyAxis.prototype.setDimensionIndex=function(e){this.m_dimensionIndex=e};e.PivotProxyAxis.prototype.setFieldName=function(e){this.m_fieldName=e};e.PivotProxyAxis.prototype.setHeader=function(e){this.m_fragment.setHeader(e)};e.PivotProxyAxis.prototype.setHideNumberForCellChart=e.noSupport;e.PivotProxyAxis.prototype.setId=function(e){this.m_fragment.setId(e)};e.PivotProxyAxis.prototype.setShowCellChart=e.noSupport;e.PivotProxyAxis.prototype.setTableStyle=e.noSupport;e.PivotProxyAxis.prototype.setTotalLevel=function(e){this.m_fragment.setTotalLevel(e)};e.PivotProxyAxis.prototype.setTotalsContext=function(e){this.m_fragment.setTotalsContext(e)};e.PivotProxyAxis.prototype.setTupleIndex=e.noSupport;e.PivotProxyAxis.prototype.setupWithFragmentAndTable=function(t,i){this.m_baseTable=e.XWeakReferenceUtil.getWeakRef(t);this.m_fragment=i;this.m_dimensionIndex=-1};e.PivotTableProxy=function(){};e.PivotTableProxy.prototype=new e.XObject;e.PivotTableProxy.prototype._ff_c="PivotTableProxy";e.PivotTableProxy.DEFAULT_CELL_WIDTH=8;e.PivotTableProxy.create=function(t,i){let n=new e.PivotTableProxy;n.setupExt(t,i);return n};e.PivotTableProxy.getValueException=function(t){if(e.isNull(t)||t===e.ValueException.NORMAL){return null}if(t===e.ValueException.DIFF0){return e.SacValueException.DIV0}else{return e.SacValueException.get(t.getName())}};e.PivotTableProxy.getValueSign=function(t){let i=t.getValueException();let n=null;let r=t.getPlainValue();let l=e.isNull(r)?null:r.getValueType();if(i===e.ValueException.UNDEFINED||i===e.ValueException.MIXED_CURRENCIES_OR_UNITS||i===e.ValueException.UNDEFINED_NOP){n=e.SacValueSign.UNDEFINED}else if(e.PivotTableProxy.isCellUnbooked(t)){n=e.SacValueSign.UNBOOKED}else{if(e.notNull(l)&&l.isNumber()){let t=e.XValueUtil.getDouble(r,false,true);if(i===e.ValueException.ZERO||t===0){n=e.SacValueSign.ZERO}else if(t>0){n=e.SacValueSign.POSITIVE}else if(t<0){n=e.SacValueSign.NEGATIVE}}else{n=e.SacValueSign.NORMAL}}return n};e.PivotTableProxy.isCellUnbooked=function(t){let i=t.getValueException();return i!==e.ValueException.UNDEFINED&&i!==e.ValueException.MIXED_CURRENCIES_OR_UNITS&&i!==e.ValueException.UNDEFINED_NOP&&i!==e.ValueException.NORMAL&&i!==e.ValueException.ZERO};e.PivotTableProxy.prototype.m_actionResolver=null;e.PivotTableProxy.prototype.m_baseTile=null;e.PivotTableProxy.prototype.m_cachedDataRowList=null;e.PivotTableProxy.prototype.m_cachedHeaderRowList=null;e.PivotTableProxy.prototype.m_caps=null;e.PivotTableProxy.prototype.m_cellChartInfo=null;e.PivotTableProxy.prototype.m_colEnd=0;e.PivotTableProxy.prototype.m_colStart=0;e.PivotTableProxy.prototype.m_colorateHeaderCells=false;e.PivotTableProxy.prototype.m_columnHeaderHyperlinkLevels=null;e.PivotTableProxy.prototype.m_columnsMemberHeaderHandling=null;e.PivotTableProxy.prototype.m_dataCellHyperlinks=null;e.PivotTableProxy.prototype.m_dataColumns=null;e.PivotTableProxy.prototype.m_dataPointContextMatcher=null;e.PivotTableProxy.prototype.m_dataPointStyleMap=null;e.PivotTableProxy.prototype.m_dataPointStyles=null;e.PivotTableProxy.prototype.m_dataRowList=null;e.PivotTableProxy.prototype.m_defaultRowHeight=0;e.PivotTableProxy.prototype.m_engine=null;e.PivotTableProxy.prototype.m_freezeHeaderColumns=false;e.PivotTableProxy.prototype.m_freezeHeaderRows=false;e.PivotTableProxy.prototype.m_freezeUpToColumn=0;e.PivotTableProxy.prototype.m_freezeUpToRow=0;e.PivotTableProxy.prototype.m_gridContainer=null;e.PivotTableProxy.prototype.m_hasHierarchyActive=false;e.PivotTableProxy.prototype.m_headerColor=null;e.PivotTableProxy.prototype.m_headerColumns=null;e.PivotTableProxy.prototype.m_headerCompactionType=null;e.PivotTableProxy.prototype.m_headerComplete=false;e.PivotTableProxy.prototype.m_headerRowList=null;e.PivotTableProxy.prototype.m_height=0;e.PivotTableProxy.prototype.m_highlightAreas=null;e.PivotTableProxy.prototype.m_localColumnsAmount=0;e.PivotTableProxy.prototype.m_localColumnsOffset=0;e.PivotTableProxy.prototype.m_localRowList=null;e.PivotTableProxy.prototype.m_localRowsAmount=0;e.PivotTableProxy.prototype.m_localRowsOffset=0;e.PivotTableProxy.prototype.m_matchedExceptionInformation=null;e.PivotTableProxy.prototype.m_maxCellWidth=0;e.PivotTableProxy.prototype.m_maxColumns=0;e.PivotTableProxy.prototype.m_maxRecommendedCellWidth=0;e.PivotTableProxy.prototype.m_maxRows=0;e.PivotTableProxy.prototype.m_memberSortIconsLevel=0;e.PivotTableProxy.prototype.m_minCellWidth=0;e.PivotTableProxy.prototype.m_partial=false;e.PivotTableProxy.prototype.m_queryModel=null;e.PivotTableProxy.prototype.m_relevantDataPointPaths=null;e.PivotTableProxy.prototype.m_reversedHierarchy=false;e.PivotTableProxy.prototype.m_rowEnd=0;e.PivotTableProxy.prototype.m_rowHeaderHyperlinkLevels=null;e.PivotTableProxy.prototype.m_rowStart=0;e.PivotTableProxy.prototype.m_rowsMemberHeaderHandling=null;e.PivotTableProxy.prototype.m_showCoordinateHeader=false;e.PivotTableProxy.prototype.m_showDimensionTitles=false;e.PivotTableProxy.prototype.m_showFreezeLines=false;e.PivotTableProxy.prototype.m_showGrid=false;e.PivotTableProxy.prototype.m_showHyperlinks=false;e.PivotTableProxy.prototype.m_showSubTitle=false;e.PivotTableProxy.prototype.m_showTableDetails=false;e.PivotTableProxy.prototype.m_showTableTitle=false;e.PivotTableProxy.prototype.m_stripeDataColumns=false;e.PivotTableProxy.prototype.m_stripeDataRows=false;e.PivotTableProxy.prototype.m_tableDefinition=null;e.PivotTableProxy.prototype.m_tableMemberHeaderHandling=null;e.PivotTableProxy.prototype.m_tileCarrier=null;e.PivotTableProxy.prototype.m_tileColumnPadding=0;e.PivotTableProxy.prototype.m_tileRowPadding=0;e.PivotTableProxy.prototype.m_title=null;e.PivotTableProxy.prototype.m_totalLevel0Color=null;e.PivotTableProxy.prototype.m_totalLevel1Color=null;e.PivotTableProxy.prototype.m_totalLevel2Color=null;e.PivotTableProxy.prototype.m_totalLevel3Color=null;e.PivotTableProxy.prototype.m_totalLevel4Color=null;e.PivotTableProxy.prototype.m_totalLevel5Color=null;e.PivotTableProxy.prototype.m_totalLevel6Color=null;e.PivotTableProxy.prototype.m_totalRowDiff=0;e.PivotTableProxy.prototype.m_width=0;e.PivotTableProxy.prototype.adaptCells=function(e,t,i,n){let r;let l;for(l=0;l<t&&e+l+1<i.size();l++){r=i.get(e+l+1);r.setMergedColumnsInternal(-l-1);r.setMergedRowsInternal(-n)}};e.PivotTableProxy.prototype.adaptMergedCells=function(t){let i=t.getMergedColumns();let n=t.getMergedRows();let r=t.getParentRow();let l=r.getCells();let o=l.getIndex(t);let s=e.XCollectionUtils.hasElements(this.m_cachedHeaderRowList)?this.m_cachedHeaderRowList.getIndex(r):-1;let a=e.XCollectionUtils.hasElements(this.m_cachedDataRowList)?this.m_cachedDataRowList.getIndex(r):-1;this.adaptCells(o,i,l,0);this.resetCellMerger(o+i+1,l);if(s>-1){this.adaptRows(this.m_cachedHeaderRowList,s,n,o,i)}if(a>-1){this.adaptRows(this.m_cachedDataRowList,a,n,o,i)}};e.PivotTableProxy.prototype.adaptRows=function(t,i,n,r,l){let o;let s;let a;let u;for(u=i+1;u<t.size()&&u<i+n+1;u++){a=t.get(u);if(e.isNull(a)){continue}s=a.getCells();o=s.get(r);if(e.isNull(o)){continue}o.setMergedRowsInternal(i-u);o.setMergedColumnsInternal(0);this.adaptCells(r,l,s,u-i);this.resetCellMerger(r+l+1,s)}for(;u<t.size();u++){a=t.get(u);if(e.isNull(a)){continue}s=a.getCells();o=s.get(r);if(e.notNull(o)&&o.getMergedRows()<0){o.setMergedRowsInternal(0);o.setMergedColumnsInternal(0);this.resetCellMerger(r+1,s)}else{break}}};e.PivotTableProxy.prototype.addColumnHeaderGroupName=function(e){};e.PivotTableProxy.prototype.addHyperlinkQuickAction=function(t,i,n){let r=e.XIntegerValue.create(i);if(!t.containsKey(r)){t.put(r,e.XList.create())}t.getByKey(r).add(n)};e.PivotTableProxy.prototype.addNewDataPointStyle=function(){let t=e.SacDataPointStyle.create();this.m_dataPointStyles.add(t);return t};e.PivotTableProxy.prototype.addNewHighlightArea=function(){let t=e.SacTableHighlightArea.create();this.m_highlightAreas.add(t);return t};e.PivotTableProxy.prototype.addNewLayeredRectangularStyle=e.noSupport;e.PivotTableProxy.prototype.addNewTableMarkup=e.noSupport;e.PivotTableProxy.prototype.addRowHeaderGroupName=function(e){};e.PivotTableProxy.prototype.applyDataPointStyles=function(){this.clearDataPointStyles();this.m_relevantDataPointPaths=e.XList.create();e.XCollectionUtils.forEach(this.m_tableDefinition.getRelevantDataPointPaths(),t=>{let i=e.SacDataSectionInfoReference.create();e.OlapToVisualizationConverterUtil.applyDataSectionInfoFromViz(t,i);this.m_relevantDataPointPaths.add(i)});let t=this.getAvailableDataPointStyle();if(e.XCollectionUtils.hasElements(t)){for(let i=0;i<t.size();i++){let n=t.get(i);let r=e.SacDataPointStyle.create();e.OlapVizToPivotConverterUtil.applyDataPointStyleFromViz(n,r);this.m_dataPointStyleMap.put(r,n);this.tagMatchingStyleCriteria(r)}}};e.PivotTableProxy.prototype.applyHeaderRowCells=function(t,i,n,r,l,o){let s;let a;let u;let p;let c=this.m_tableDefinition.getApplicationSettings();let g=c.isShowImages();let m=c.isShowHyperlinks();let f=c.isOptimizedTableDragDropExperience();let C=e.XMath.min(this.m_dataColumns.size(),this.m_baseTile.getColumnsBundle().getDataList().size());let d=o===-1?C:e.XMath.min(o+1,C);let y=this.m_baseTile.getColumnsBundle().getHeaderList();let h=this.m_gridContainer.getRowsAxis().getVisibleComponentsOnAxis();let _;let T;let S=this.m_gridContainer.getColumnsAxis().getVisibleComponentsOnAxis().size();let R=y.size();let D;if(this.isEffectivelyShownDimensionTitles()&&n.isHeaderBoundary()){for(_=0;_<R;_++){D=y.get(_);T=e.PivotProxyCell._createProxyCell(i,this.m_headerColumns.get(_),n,D);i.addCell(T);T.setType(e.SacTableConstants.CT_HEADER);if(this.isEffectivelyShownDimensionTitles()&&D.getComponentIndex()>-1){p=h.get(D.getComponentIndex());s=p.getField();T.setAllowDragDrop(!f);T.setType(p.isMainAttribute()?e.SacTableConstants.CT_ROW_DIM_HEADER:e.SacTableConstants.CT_ATTRIBUTE_ROW_DIM_HEADER);T.getTableStyle().setHorizontalAlignment(e.SacVisualizationHorizontalAlignment.LEFT);T.getTableStyle().setVerticalAlignment(e.SacVisualizationVerticalAlignment.BOTTOM);T.setPlainString(p.getName());T.setFormatted(p.getText());u=p.getDimension();T.setUdhContext(u.isUniversalDisplayHierarchyDimension());if((p.isMainAttribute()&&this.m_caps.supportsDimensionSorting(u,s.getPresentationType().isTypeOf(e.PresentationType.ABSTRACT_KEY)?e.SortType.MEMBER_KEY:e.SortType.MEMBER_TEXT)||this.m_caps.supportsFieldSorting(s))&&!u.isStructure()&&!u.getDimensionType().isTypeOf(e.DimensionType.GENERAL_VERSION)&&this.getDataRowTuplesTotalCount()>1){a=this.m_gridContainer.getSortDirections().getByKey(s.getName());if(e.isNull(a)){a=e.XSortDirection.DEFAULT_VALUE}T.setSortDirection(a);T.setLengthAddition(2)}else{T.setLengthAddition(1)}}}}else{for(_=0;_<y.size();_++){D=y.get(_);T=e.PivotProxyCell._createProxyCell(i,this.m_headerColumns.get(_),n,D);i.addCell(T);T.setType(e.SacTableConstants.CT_HEADER)}}let A=i.getCells();if(r>-1&&this.isEffectivelyShownDimensionTitles()&&A.size()>0){p=this.m_gridContainer.getColumnsAxis().getVisibleComponentsOnAxis().get(r);s=p.getField();T=i.getCells().get(this.getPreColumnsAmount()-1);if(e.notNull(T)){T.setAllowDragDrop(!f);T.setType(p.isMainAttribute()?e.SacTableConstants.CT_COL_DIM_HEADER:e.SacTableConstants.CT_ATTRIBUTE_COL_DIM_HEADER);T.getTableStyle().setHorizontalAlignment(e.SacVisualizationHorizontalAlignment.RIGHT);T.getTableStyle().setVerticalAlignment(e.SacVisualizationVerticalAlignment.BOTTOM);T.setPlainString(p.getName());T.setFormatted(p.getText());u=p.getDimension();T.setUdhContext(u.isUniversalDisplayHierarchyDimension());if((p.isMainAttribute()&&this.m_caps.supportsDimensionSorting(u,s.getPresentationType().isTypeOf(e.PresentationType.ABSTRACT_KEY)?e.SortType.MEMBER_KEY:e.SortType.MEMBER_TEXT)||this.m_caps.supportsFieldSorting(s))&&!u.isStructure()&&!u.getDimensionType().isTypeOf(e.DimensionType.GENERAL_VERSION)&&this.getDataColumnTuplesTotalCount()>1){a=this.m_gridContainer.getSortDirections().getByKey(s.getName());if(e.isNull(a)){a=e.XSortDirection.DEFAULT_VALUE}T.setSortDirection(a);T.setLengthAddition(2)}else{T.setLengthAddition(1)}}}let E=this.isAxisValidForMemberSort(this.m_queryModel.getRowsAxis());for(_=e.XMath.max(0,l);_<d;_++){if(_>=this.m_dataColumns.size()||this.m_dataColumns.get(_)===null){i.addCell(null);continue}let t=this.m_baseTile.getColumnsBundle().getDataAt(_);T=e.PivotProxyCell._createProxyCell(i,this.m_dataColumns.get(_),n,t);i.addCell(T);let l;if(r>-1&&e.notNull(t)&&t.getTupleIndex()>-1){p=this.m_gridContainer.getColumnsAxis().getVisibleComponentsOnAxis().get(r);l=this.m_gridContainer.getColumnTupleAt(t.getTupleIndex());if(e.isNull(l)){continue}T.setShowHyperLink(this.checkHyperlinksOnColumns(l,p));u=p.getDimension();T.setAllowDragDrop(!f);T.setType(p.isMainAttribute()?e.SacTableConstants.CT_COL_DIM_MEMBER:e.SacTableConstants.CT_ATTRIBUTE_COL_DIM_MEMBER);T.getTableStyle().setHorizontalAlignment(e.SacVisualizationHorizontalAlignment.RIGHT);T.getTableStyle().setVerticalAlignment(e.SacVisualizationVerticalAlignment.BOTTOM);let i=l.getValueForModelComponent(p);if(e.isNull(i)){continue}let o=i.getDrillState();let c=i.getDimensionMemberType();if(c.isTypeOf(e.MemberType.RESULT)||e.OlapComponentType.TOTALS===c){T.setTotalsContext(true)}T.setRepeatedHeader(i.isRepeatedMemberName());T.setRepeatedRefColumn(i.getReferenceTupleIndex());T.setInitialHeader(!u.isUniversalDisplayHierarchyDimension()&&u.getAxis().size()>u.getIndexOnAxis()+1&&!i.isRepeatedMemberName());T.setPlainString(e.XValueUtil.getString(i.getPlainValue()));T.setFormatted(i.getFormattedText());s=p.getField();if(e.XStringUtils.isNotNullAndNotEmpty(e.XValueUtil.getString(i.getPlainValue()))){let t=e.XString.containsString(s.getMimeType(),e.SacTableConstants.MIME_TYPE_IMAGE);if(g&&s.getPresentationType()===e.PresentationType.BLOB&&t){T.setType(e.SacTableConstants.CT_IMAGE)}else if(m&&s.getPresentationType()===e.PresentationType.URL){T.setShowHyperLink(true)}}let C=this.m_caps.supportsComplexSorting()||this.m_caps.supportsDataCellSorting();if(E&&(C&&r+1===S||!C&&this.m_caps.supportsMeasureSorting()&&p.getDimension().isMeasureStructure()&&!T.isRepeatedHeader())&&this.getDataRowTuplesTotalCount()>1){a=this.m_gridContainer.getSortDirections().getByKey(i.getPathKey());if(e.isNull(a)||a===e.XSortDirection.DEFAULT_VALUE){let t=l.getMeasureName();let i=l.getSecondaryStructureMemberName();if(e.XStringUtils.isNotNullAndNotEmpty(t)){if(e.XStringUtils.isNotNullAndNotEmpty(i)){a=this.m_gridContainer.getSortDirections().getByKey(e.XStringUtils.concatenate3(t,":",i))}else{a=this.m_gridContainer.getSortDirections().getByKey(t)}}}if(e.isNull(a)){a=e.XSortDirection.DEFAULT_VALUE}T.setSortDirection(a);T.setLengthAddition(2)}else{T.setLengthAddition(1)}u=p.getDimension();let d=u.isHierarchyActive()||u.isUniversalDisplayHierarchyDimension();let y=u.isStructure()||u.getDimensionType()===e.DimensionType.ACCOUNT;T.setInStructureContext(y);let h=e.XStringUtils.isNotNullAndNotEmpty(p.getText())&&p.isMainAttribute()&&e.notNull(o)&&d;if(h){let t=i.getDisplayLevel();let r=o!==e.DrillState.LEAF&&e.MemberType.RESULT!==c&&e.OlapComponentType.TOTALS!==c;if(r){T.setLengthAddition(1+T.getLengthAddition())}T.setInHierarchy(true);T.setHierarchyLevel(t);T.setHierarchyPaddingType(e.SacTableConstants.C_N_HIERARCHY_PADDING_TOP);T.setHierarchyPaddingValue(e.SacTableConstants.DF_C_N_HIERARCHY_PADDING_TOP);T.setShowDrillIcon(r);T.setExpanded(o===e.DrillState.EXPANDED||o===e.DrillState.DRILLED);let l=e.SacTableConstants.DF_C_N_HIERARCHY_PADDING_TOP+e.SacTableConstants.DF_R_N_HEIGHT+e.SacTableConstants.DF_C_N_HIERARCHY_PADDING_TOP*i.getDisplayLevel();if(n.getHeight()<l){n.setHeight(l)}}}else if(n.isHeaderBoundary()&&e.notNull(t)&&t.getTupleIndex()>-1){l=this.m_gridContainer.getColumnTupleAt(t.getTupleIndex());T.setType(e.SacTableConstants.CT_HEADER);let i=e.isNull(l)?null:l.getUniqueUnitScaleInformation();if(e.XStringUtils.isNotNullAndNotEmpty(i)){T.getTableStyle().setHorizontalAlignment(e.SacVisualizationHorizontalAlignment.RIGHT);T.getTableStyle().setVerticalAlignment(e.SacVisualizationVerticalAlignment.BOTTOM);T.setPlainString(i);T.setFormatted(i);T.setUnitInformation(l.getUniqueUnitInfo());T.setScalingText(l.getUniqueScalingText());if(l.getNumericShift()!==null){T.setScaling(l.getNumericShift().getInteger())}}}else{T.setType(e.SacTableConstants.CT_HEADER)}}if(n.isHeaderBoundary()&&this.isEmptyColumnDimensions()&&this.isEffectivelyShownDimensionTitles()){let t=i.getCells();if(t.size()>R){T=t.get(R);T.setType(e.SacTableConstants.CT_EMPTY_AXIS_COLUMN_HEADER);T.setAllowDragDrop(!f)}}};e.PivotTableProxy.prototype.applyHighlighting=function(){if(this.getAvailableHighlightAreas()!==null){let t=this.getAvailableHighlightAreas().getIterator();this.clearHighlightAreas();while(t.hasNext()){e.OlapVizToPivotConverterUtil.applyHighlightingFromViz(t.next(),this.addNewHighlightArea())}}};e.PivotTableProxy.prototype.applyPagingSettings=function(){let e=this.m_tableDefinition.getTableViewportPagingSettings();let t=this.m_baseTile.getRowsBundle();t.setMaxElements(e.getMaxRows());t.setMaxRecommendedElements(e.getMaxRecommendedRows());t.setMaxSize(e.getMaxHeight());t.setMaxRecommendedSize(e.getMaxRecommendedHeight());t.setPageBreakIsStylingBoundary(e.rowPagingActive()&&e.isRowPageBreakIsStylingBoundary());let i=this.m_baseTile.getColumnsBundle();i.setMaxElements(e.getMaxColumns());i.setMaxRecommendedElements(e.getMaxRecommendedColumns());i.setMaxSize(e.getMaxWidth());i.setMaxRecommendedSize(e.getMaxRecommendedWidth());i.setPageBreakIsStylingBoundary(e.columnPagingActive()&&e.isColumnPageBreakIsStylingBoundary())};e.PivotTableProxy.prototype.applyTableDefinition=function(t){if(e.notNull(t)){this.m_tableDefinition=t;this.m_queryModel=t.getQueryModel();let i=t.getApplicationSettings();if(e.notNull(i)){if(i.getWidgetWidth()>0){this.setWidth(i.getWidgetWidth())}if(i.getWidgetHeight()>0){this.setHeight(i.getWidgetHeight())}if(i.getMaxColumns()>0){this.setMaxColumns(i.getMaxColumns())}if(i.getMaxRows()>0){this.setMaxRows(i.getMaxRows())}this.m_tileRowPadding=e.XMath.max(i.getTileRowsPadding(),30);this.m_tileColumnPadding=e.XMath.max(i.getTileColumnsPadding(),30);this.m_memberSortIconsLevel=i.getMemberSortIconsLevel()}this.setStripeDataRows(t.isEffectiveStripeDataRows());this.setStripeDataColumns(t.isEffectiveStripeDataColumns());this.setFreezeHeaderRows(t.isEffectiveFreezeHeaderRows());this.setFreezeHeaderColumns(t.isEffectiveFreezeHeaderColumns());this.setFreezeUpToColumn(t.getFreezeUpToColumn());this.setFreezeUpToRow(t.getFreezeUpToRow());this.setShowFreezeLines(t.isEffectiveShowFreezeLines());this.setShowGrid(t.isEffectiveShowGrid());this.setHeaderCompactionType(t.getEffectiveTableHeaderCompactionType());this.setShowDimensionTitles(t.isEffectiveShowDimensionTitles());this.setTableMemberHeaderHandling(e.OlapVizToPivotConverterUtil.getTableMemberHeaderHandlingFromViz(t.getEffectiveTableMemberHeaderHandling()));this.setShowCoordinateHeader(t.isEffectiveShowCoordinateHeader());this.setHeaderColor(t.getHeaderColor());this.setTotalLevel6Color(t.getTotalLevel6Color());this.setTotalLevel5Color(t.getTotalLevel5Color());this.setTotalLevel4Color(t.getTotalLevel4Color());this.setTotalLevel3Color(t.getTotalLevel3Color());this.setTotalLevel2Color(t.getTotalLevel2Color());this.setTotalLevel1Color(t.getTotalLevel1Color());this.setTotalLevel0Color(t.getTotalLevel0Color());this.setTitle(t.getTitle());this.m_showHyperlinks=t.isEffectiveShowHyperlinks();this.m_baseTile.applyColumnAndRowSizes(this.m_tableDefinition.getFixedPixelHeightsForRows(),this.m_tableDefinition.getFixedPixelWidthsForColumns())}};e.PivotTableProxy.prototype.applyTupleRowCells=function(t,i,n,r,l,o){let s=e.XMath.min(this.m_dataColumns.size(),this.m_baseTile.getColumnsBundle().getDataList().size());let a=this.isAxisValidForMemberSort(this.m_queryModel.getColumnsAxis());let u=o===-1?s:e.XMath.min(o+1,s);let p=this.m_baseTile.getColumnsBundle().getHeaderList();let c;let g;let m=null;let f=i.getEffectiveMemberHeaderHandling()===e.SacTableMemberHeaderHandling.BAND;let C=this.m_tableDefinition.getApplicationSettings();let d=C.isOptimizedTableDragDropExperience();let y=C.isShowImages();let h=C.isShowHyperlinks();let _=C.isShowCommentIcons();let T=n.getRootTupleIndex();let S;let R=this.m_gridContainer.getRowsAxis().getTupleAt(T);let D=this.m_gridContainer.getRowsAxis().getVisibleComponentsOnAxis();let A=D.size()===0?-1:D.get(D.size()-1).getDimensionIndex();let E;let V=p.size();for(c=0;c<V;c++){let t=p.get(c);g=e.PivotProxyCell._createProxyCell(i,this.m_headerColumns.get(c),n,t);g.setType(e.SacTableConstants.CT_HEADER);i.addCell(g);let l=t.getComponentIndex();let o=n.getHeaderLevel();if(l>-1){E=D.get(l);g.setShowHyperLink(this.checkHyperlinksOnRows(R,E));let t=f&&o===E.getDimensionIndex()&&o<A;if(t||r>-1){let i=R.getValueForModelComponent(E);let n=E.getDimension();let o=i.getDimensionMemberType();if(o===e.MemberType.RESULT||e.OlapComponentType.TOTALS===o){g.setTotalsContext(true)}g.setAllowDragDrop(!d);g.setType(E.isMainAttribute()?e.SacTableConstants.CT_ROW_DIM_MEMBER:e.SacTableConstants.CT_ATTRIBUTE_ROW_DIM_MEMBER);g.getTableStyle().setHorizontalAlignment(e.SacVisualizationHorizontalAlignment.LEFT);g.getTableStyle().setVerticalAlignment(e.SacVisualizationVerticalAlignment.BOTTOM);if(r>-1){g.setRepeatedHeader(i.isRepeatedMemberName());g.setRepeatedRefRow(i.getReferenceTupleIndex());g.setInitialHeader(!n.isUniversalDisplayHierarchyDimension()&&n.getAxis().size()>n.getIndexOnAxis()+1&&!i.isRepeatedMemberName())}g.setPlainString(e.XValueUtil.getString(i.getPlainValue()));g.setFormatted(i.getFormattedText());let u=E.getField();if(e.XStringUtils.isNotNullAndNotEmpty(e.XValueUtil.getString(i.getPlainValue()))){let t=e.XString.containsString(u.getMimeType(),e.SacTableConstants.MIME_TYPE_IMAGE);if(y&&u.getPresentationType()===e.PresentationType.BLOB&&t){g.setType(e.SacTableConstants.CT_IMAGE)}else if(h&&u.getPresentationType()===e.PresentationType.URL){g.setShowHyperLink(true)}}if(t){g.setMergedColumns(V-c+s)}let p=this.m_caps.supportsComplexSorting()||this.m_caps.supportsDataCellSorting();if(a&&(p&&l+1===D.size()||!p&&this.m_caps.supportsMeasureSorting()&&E.getDimension().isMeasureStructure()&&!g.isRepeatedHeader())&&this.getDataColumnTuplesTotalCount()>1){S=this.m_gridContainer.getSortDirections().getByKey(i.getPathKey());if(e.isNull(S)||S===e.XSortDirection.DEFAULT_VALUE){let t=i.getTupleReference();let n=t.getMeasureName();let r=t.getSecondaryStructureMemberName();if(e.XStringUtils.isNotNullAndNotEmpty(n)){if(e.XStringUtils.isNotNullAndNotEmpty(r)){S=this.m_gridContainer.getSortDirections().getByKey(e.XStringUtils.concatenate3(n,":",r))}else{S=this.m_gridContainer.getSortDirections().getByKey(n)}}}if(e.isNull(S)){S=e.XSortDirection.DEFAULT_VALUE}g.setSortDirection(S);g.setLengthAddition(2)}else{g.setLengthAddition(1)}let m=i.getDrillState();o=i.getDimensionMemberType();let f=n.isHierarchyActive()||n.isUniversalDisplayHierarchyDimension();let C=n.isStructure()||n.getDimensionType()===e.DimensionType.ACCOUNT;g.setInStructureContext(C);let _=e.XStringUtils.isNotNullAndNotEmpty(E.getText())&&E.isMainAttribute()&&e.notNull(m)&&f;if(_){let t=i.getDisplayLevel();let n=m!==e.DrillState.LEAF&&e.MemberType.RESULT!==o&&e.OlapComponentType.TOTALS!==o;g.setLengthAddition((n?2:1)+t+g.getLengthAddition());g.setInHierarchy(true);g.setHierarchyLevel(t);g.setHierarchyPaddingType(e.SacTableConstants.C_N_HIERARCHY_PADDING_LEFT);g.setHierarchyPaddingValue(e.SacTableConstants.DF_C_N_HIERARCHY_PADDING_LEFT);g.setShowDrillIcon(n);g.setExpanded(m===e.DrillState.EXPANDED||m===e.DrillState.DRILLED||m===e.DrillState.LEAF_UDH)}}if(e.notNull(m)){m.setMergedColumns(0)}m=g}else if(t.isHeaderBoundary()&&T===r){g.setType(e.SacTableConstants.CT_HEADER);if(e.isNull(R)){continue}let t=R.getUniqueUnitScaleInformation();if(e.XStringUtils.isNotNullAndNotEmpty(t)){g.getTableStyle().setHorizontalAlignment(e.SacVisualizationHorizontalAlignment.LEFT);g.getTableStyle().setVerticalAlignment(e.SacVisualizationVerticalAlignment.BOTTOM);g.setPlainString(t);g.setFormatted(t);g.setUnitInformation(R.getUniqueUnitInfo());g.setScalingText(R.getUniqueScalingText());if(R.getNumericShift()!==null){g.setScaling(R.getNumericShift().getInteger())}}}}let N;if(T===r){for(c=e.XMath.max(0,l);c<u;c++){if(c>=this.m_dataColumns.size()||this.m_dataColumns.get(c)===null){i.addCell(null);continue}N=this.m_baseTile.getColumnsBundle().getDataAt(c);g=e.PivotProxyCell._createProxyCell(i,this.m_dataColumns.get(c),n,N);i.addCell(g);let t=N.getTupleIndex();if(t>-1){if(i.isShowCellChart()||N.isShowCellChart()){g.setType(e.SacTableConstants.CT_CHART);if(i.isShowCellChart()&&N.getCellChartOrientation()===e.SacCellChartOrientation.VERTICAL){n.setHeight(e.SacTableConstants.DF_R_N_HEIGHT_VERTICAL_CHARTS)}}let l=this.m_gridContainer.getCellValueReference(t,r);if(e.notNull(l)){g.setShowHyperLink(this.checkHyperlinkOnCross(this.m_gridContainer.getRowTupleAt(T),this.m_gridContainer.getColumnTupleAt(t)));g.getTableStyle().setHorizontalAlignment(e.SacVisualizationHorizontalAlignment.RIGHT);g.getTableStyle().setVerticalAlignment(e.SacVisualizationVerticalAlignment.BOTTOM);if(l.isDataEntryEnabled()){g.setType(e.SacTableConstants.CT_INPUT)}else if(e.PivotTableProxy.isCellUnbooked(l)){g.setType(e.SacTableConstants.CT_UNBOOKED)}else{g.setType(e.SacTableConstants.CT_VALUE)}g.setDataCellRef(l.getDataCellName());g.setFormatted(l.getFormattedText());g.setFormattingPattern(l.getFormatPattern());g.setPlain(l.getPlainValue());g.setScaling(l.getNumericShift());g.setScalingText(l.getScalingText());g.setUnitInformation(l.getUnitInformation());let n=l.getValueException();if(e.notNull(n)&&n!==e.ValueException.NORMAL){g.setValueException(e.PivotTableProxy.getValueException(n))}if(_){g.setCommentDocumentId(l.getDocumentId())}let r=l.getAlertLevel();let o=l.getExceptionName();let s=this.m_queryModel.getFormulaExceptionManager();let a=e.isNull(s)?null:s.getModelFormulaExceptionThreshold(o);let u=g.addNewExceptionInformation();let p=e.isNull(a)?null:a.getColor();if(e.XStringUtils.isNotNullAndNotEmpty(p)){u.setColor(p)}let c=e.isNull(a)?null:a.getName();if(e.XStringUtils.isNotNullAndNotEmpty(c)){u.setThresholdName(c)}let m=e.isNull(a)?null:a.getText();if(e.XStringUtils.isNotNullAndNotEmpty(m)){u.setThresholdText(m)}u.setExceptionName(o);e.XCollectionUtils.forEach(l.getTags(),e=>{u.addTag(e)});u.setLevel(e.SacAlertLevel.getByLevelValue(r.getLevel()));u.setValueSign(e.PivotTableProxy.getValueSign(l));this.tagExceptionInformation(u,i.getDataPath(),N.getDataPath())}}}}else{for(c=e.XMath.max(0,l);c<u;c++){if(c>=this.m_dataColumns.size()||this.m_dataColumns.get(c)===null){i.addCell(null);continue}N=this.m_baseTile.getColumnsBundle().getDataAt(c);g=e.PivotProxyCell._createProxyCell(i,this.m_dataColumns.get(c),n,N);i.addCell(g)}}if(r===0&&this.isEmptyRowDimensions()&&this.isEffectivelyShownDimensionTitles()&&this.m_gridContainer.getColumnsAxis().getVisibleComponentsOnAxis().size()>0&&e.XCollectionUtils.hasElements(i.getCells())){g=i.getCells().get(0);g.setType(e.SacTableConstants.CT_EMPTY_AXIS_ROW_HEADER)}};e.PivotTableProxy.prototype.canResolveAction=function(e,t,i){return this.m_actionResolver.canResolveSimple(e,t,i)};e.PivotTableProxy.prototype.checkAnyHierarchyActive=function(){return e.notNull(this.m_gridContainer)&&(this.checkHasAxisHierarchy(this.m_gridContainer.getRowsAxis())||this.checkHasAxisHierarchy(this.m_gridContainer.getColumnsAxis()))};e.PivotTableProxy.prototype.checkDimensionOnAxis=function(e,t){return e.contains(t)&&this.checkHasRelevantMembers(t)};e.PivotTableProxy.prototype.checkHasAxisHierarchy=function(t){return e.notNull(t)&&t.hasActiveHierarchy()};e.PivotTableProxy.prototype.checkHasRelevantMembers=function(t){let i=t.getAllStructureMembers();let n=e.notNull(i)&&i.size()===1;if(!n){let i=this.m_queryModel.getFilter().getDynamicFilter();let r=e.isNull(i)?null:i.getCartesianProduct();let l=e.isNull(r)?null:r.getCartesianList(t);n=e.notNull(l)&&l.size()===1&&l.getCartesianElement(0).getSetSign()===e.SetSign.INCLUDING}return!n};e.PivotTableProxy.prototype.checkHyperlinkOnCross=function(t,i){return e.XStream.of(this.m_dataCellHyperlinks).anyMatch(e=>this.matchesTuple(t,e.getRowMap())&&this.matchesTuple(i,e.getColumMap()))};e.PivotTableProxy.prototype.checkHyperlinksExt=function(t,i,n,r){let l=false;if(e.notNull(i)){let o=n.getByKey(e.XIntegerValue.create(i.getDimensionIndex()));l=e.XStream.of(o).anyMatch(e=>this.matchesTuple(t,r(e)))}return l};e.PivotTableProxy.prototype.checkHyperlinksOnColumns=function(e,t){return this.checkHyperlinksExt(e,t,this.m_columnHeaderHyperlinkLevels,e=>e.getColumMap())};e.PivotTableProxy.prototype.checkHyperlinksOnRows=function(e,t){return this.checkHyperlinksExt(e,t,this.m_rowHeaderHyperlinkLevels,e=>e.getRowMap())};e.PivotTableProxy.prototype.checkReversedHierarchy=function(){let t=false;let i=e.isNull(this.m_queryModel)?null:this.m_queryModel.getRowsAxis();if(e.XCollectionUtils.hasElements(i)){t=this.isAxisReversed(i)}return t};e.PivotTableProxy.prototype.clear=function(){};e.PivotTableProxy.prototype.clearColumnHeaderGroupNames=function(){};e.PivotTableProxy.prototype.clearDataPointStyles=function(){this.m_dataPointStyles.clear();e.XObjectExt.release(this.m_dataPointContextMatcher);this.m_dataPointContextMatcher=e.VisualizationDataPointMatcher.create()};e.PivotTableProxy.prototype.clearHighlightAreas=function(){this.m_highlightAreas.clear()};e.PivotTableProxy.prototype.clearLayeredRectangularStyles=e.noSupport;e.PivotTableProxy.prototype.clearRowHeaderGroupNames=function(){};e.PivotTableProxy.prototype.clearTableMarkups=e.noSupport;e.PivotTableProxy.prototype.completeHighlightCoordinate=function(t,i,n,r,l,o){if(e.notNull(t)&&e.notNull(r)&&r.matchesUntaggedReference(n.getColumnsReference())&&n.getCellTypeRestriction().matches(t)){i.add(e.SacTableHighlightCoordinate.create(l,o,n.getHighlightColor()))}};e.PivotTableProxy.prototype.createHighlightCoordinate=function(t,i,n,r,l){if(e.notNull(n)&&n.matchesUntaggedReference(i.getRowsReference())){let n;let o=this.m_baseTile.getColumnsBundle().getHeaderList();for(n=0;n<o.size();n++){this.completeHighlightCoordinate(r.getCells().get(n),t,i,o.get(n),n,l)}let s=this.m_baseTile.getColumnsBundle().getDataList();let a=s.size();let u=this.m_colStart<0?0:e.XMath.min(a,this.m_colStart);let p=this.m_colEnd<0?a:e.XMath.min(a,this.m_colEnd+1);for(n=u;n<p;n++){this.completeHighlightCoordinate(r.getCells().get(o.size()+n),t,i,s.get(n),this.getPreColumnsAmount()+n,l)}}};e.PivotTableProxy.prototype.createNewAnalyticDataColumn=e.noSupport;e.PivotTableProxy.prototype.createNewAnalyticDataColumnAt=e.noSupport;e.PivotTableProxy.prototype.createNewAnalyticHeaderColumn=e.noSupport;e.PivotTableProxy.prototype.createNewDataColumn=e.noSupport;e.PivotTableProxy.prototype.createNewDataColumnAt=e.noSupport;e.PivotTableProxy.prototype.createNewHeaderColumn=e.noSupport;e.PivotTableProxy.prototype.createNewHeaderColumnAt=e.noSupport;e.PivotTableProxy.prototype.exceptionInfoMatchesDataPointStyle=function(t,i){return e.XStream.of(t).anyMatch(e=>this.m_dataPointContextMatcher.matchesStyleCriterion(i,e,null))};e.PivotTableProxy.prototype.expandDataPointStyles=function(){this.m_dataPointStyles.clear();if(e.XCollectionUtils.hasElements(this.m_tableDefinition.getDatapointVariableContainers())){e.XCollectionUtils.forEach(this.m_matchedExceptionInformation,t=>{let i=this.m_tableDefinition.getVariableHolderForDataPoint(t,()=>e.SacDataSectionInfoReference.create());this.expandDataPointStylesForExceptionInformation(t,i)})}else{this.m_dataPointStyles.addAll(this.m_dataPointStyleMap.getKeysAsReadOnlyList())}};e.PivotTableProxy.prototype.expandDataPointStylesForExceptionInformation=function(t,i){e.XStream.of(this.m_dataPointStyleMap.getKeysAsReadOnlyList()).filter(e=>this.m_dataPointContextMatcher.matchesStyleCriterion(e,t,null)).forEach(n=>{e.OlapVizToPivotConverterUtil.expandAndApplyDataPointStyle(this.m_dataPointStyleMap.getByKey(n),this.addNewDataPointStyle(),t,i)})};e.PivotTableProxy.prototype.fillEmptyTable=function(e){};e.PivotTableProxy.prototype.formatCellWidth=function(t,i,n){let r=i.getPrioritizedStylesList();let l=i.getEffectiveFormattedText(r);i.setWrapped(l);let o=i.getEffectiveFontFamily(r);if(e.XStringUtils.isNullOrEmpty(o)){o=e.SacTableConstants.DEFAULT_FONT_FAMILY}let s=i.isEffectiveFontItalic(r);let a=i.isEffectiveFontBold(r)||i.isDimensionHeader()||i.isTotalsContext();let u=i.getEffectiveFontSize(r);let p=i.isEffectiveWrap(r);if(u===0){u=e.SacTableConstants.DEFAULT_FONT_SIZE}let c=e.XDouble.convertToInt(e.SacTableConstants.DF_R_N_HEIGHT_REDUCED*u/e.SacTableConstants.DEFAULT_FONT_SIZE);let g=c;if(t.isHeader()&&i.isInHierarchy()){g=e.SacTableConstants.DF_C_N_HIERARCHY_PADDING_TOP+c-e.SacTableConstants.DF_R_N_HEIGHT_REDUCED+this.getDefaultRowHeight()+e.SacTableConstants.DF_C_N_HIERARCHY_PADDING_TOP*i.getHierarchyLevel();t.setTextBaseHeight(e.XMath.max(t.getHeight(),g))}if(!i.isHeaderCell()||!i.isRepeatedHeader()||i.isEffectiveRepetitiveHeaderCells()||p){let r;if(e.isNull(l)||i.isUnbooked()){r=e.XList.create()}else{r=e.XStringTokenizer.splitString(l,"\r\n")}let m=e.XList.create();let f=i.isEffectiveShowCellChart()&&i.getEffectiveCellChartOrientation()===e.SacCellChartOrientation.HORIZONTAL?3:1;let C=i.isEffectiveShowCellChart()&&i.getEffectiveCellChartOrientation()!==e.SacCellChartOrientation.HORIZONTAL?3:1;let d=i.getParentColumn();let y=e.XDouble.convertToInt(e.XMath.max(1,i.getLengthAddition())*e.SacTableConstants.DEFAULT_TEXT_BOX_SIZE+e.SacTableConstants.DEFAULT_CELL_PADDING);let h=0;if(!d.isWidthOverwritten()){h=d.getIdealWidth()}if(h===0){h=d.getWidth()}if(h===0){h=n}else if(!d.isWidthOverwritten()){h=e.XMath.min(h,n)}let _=e.XMath.max(0,h-y);let T=e.PivotTextMeasureUtil.measureTextOrRetokenize(r,a,s,u,o,p,m,_);if(p){T=e.XMath.min(_,T)}let S=m.size();if(S>1||C>1||S>0&&e.SacTableConstants.DEFAULT_FONT_SIZE!==u){i.setWrapped(e.XCollectionUtils.join(m,"\n"));t.setTextBaseHeight(e.XMath.max(t.getHeight(),g+(S-2)*c+c*C));i.setWrap(true)}let R=T+y;d.setIdealWidth(e.XMath.max(h,R));d.setDefaultEmWidth(e.XMath.max(R*f,d.getDefaultEmWidth()))}};e.PivotTableProxy.prototype.formatDataColumnWidths=function(){};e.PivotTableProxy.prototype.formatHeaderColumnWidths=function(){};e.PivotTableProxy.prototype.formatWidths=function(t,i,n,r){if(e.notNull(t)&&!this.m_tableDefinition.getApplicationSettings().skipTableCellWidthCalc()){let n=t.getCells();if(!i.heightDiffersFromDefault()){if(i.isShowCellChart()&&i.getCellChartOrientation()!==e.SacCellChartOrientation.HORIZONTAL){i.setHeight(e.XMath.max(e.SacTableConstants.DF_R_N_HEIGHT_VERTICAL_CHARTS,i.getHeight()))}else{i.setHeight(e.XMath.max(this.getDefaultRowHeight(),i.getHeight()))}}let r;let l=this.getMaxRecommendedCellWith();let o=l;let s=this.getMaxCellWidth();let a=3;let u=this.getPreColumnsAmount();let p=this.isFreezeHeaderColumns()||this.getFreezeUpToColumn()>-1;let c=this.getWidth();let g=this.isColumnPaginated()?this.getLocalColumnsAmount():this.getDataColumnsAmount();if(s>0){if(p){a=e.XMath.max(a,e.XMath.min(e.XMath.div(4*u*s,c*3),e.XMath.div((u+g)*s,c)))}o=e.XMath.min(l,e.XMath.div(s,a))}i.resetTextHeight();for(r=0;r<n.size();r++){let t=n.get(r);if(e.notNull(t)&&t.getType()!==e.SacTableConstants.CT_IMAGE){this.formatCellWidth(i,t,t.getParentColumn().isHeader()?o:l)}}}};e.PivotTableProxy.prototype.getAvailableDataPointStyle=function(){return e.isNull(this.m_tableDefinition)?null:this.m_tableDefinition.getDataPointStyles()};e.PivotTableProxy.prototype.getAvailableHighlightAreas=function(){return e.isNull(this.m_tableDefinition)?null:this.m_tableDefinition.getHighlightAreas()};e.PivotTableProxy.prototype.getBaseTile=function(){return this.m_baseTile};e.PivotTableProxy.prototype.getCellChartInfo=function(){return this.m_cellChartInfo};e.PivotTableProxy.prototype.getCellChartMemberName=function(){return null};e.PivotTableProxy.prototype.getCellChartOrientation=function(){return null};e.PivotTableProxy.prototype.getCellChartType=function(){return null};e.PivotTableProxy.prototype.getColumnEmWidthsInternal=function(){let t=e.XList.create();let i;let n=this.getHeaderColumnList();let r=n.size();for(i=0;i<r;i++){t.add(e.XIntegerValue.create(n.get(i).getDefaultEmWidth()))}let l=this.getColumnList();r=l.size();let o=0;let s;for(i=0;i<r;i++){s=l.get(i);if(e.isNull(s)){break}let n=s.getDefaultEmWidth();t.add(e.XIntegerValue.create(n));o=o+n}let a=i===0?0:e.XMath.div(o,i);for(;i<r;i++){s=l.get(i);if(e.isNull(s)){t.add(e.XIntegerValue.create(a))}else{t.add(e.XIntegerValue.create(s.getDefaultEmWidth()))}}let u=this.getDataColumnsAmount();let p=this.getMaxColumns();for(;i<e.XMath.min(u,p===0?u:p);i++){t.add(e.XIntegerValue.create(a))}return t};e.PivotTableProxy.prototype.getColumnEmWidthsSubList=function(e,t){let i=this.getColumnEmWidthsInternal();let n=i.size();return i.size()===0?i:i.sublist(e,t===-1||t>n?n:t)};e.PivotTableProxy.prototype.getColumnHeaderGroupNames=function(){return null};e.PivotTableProxy.prototype.getColumnHeaderMap=function(){return null};e.PivotTableProxy.prototype.getColumnList=function(){return this.getColumnListExt(0,-1)};e.PivotTableProxy.prototype.getColumnListExt=function(t,i){let n=this.m_dataColumns.size();let r=i===-1?n:e.XMath.min(i+1,n);return this.m_dataColumns.sublist(e.XMath.max(0,t),r)};e.PivotTableProxy.prototype.getColumnWidth=function(t){let i=this.getHeaderColumnList();let n=i.size();let r=this.getColumnList();if(t<n){return i.get(t).getWidth()}else if(t<n+r.size()){return r.get(t-n).getWidth()}else{return e.PivotTableProxy.DEFAULT_CELL_WIDTH}};e.PivotTableProxy.prototype.getColumnsLoadedCount=function(){return e.XMath.max(0,this.getPreColumnsAmount())+(e.XCollectionUtils.hasElements(this.getColumnList())?e.XStream.of(this.getColumnList()).filter(t=>e.notNull(t)).countItems():0)};e.PivotTableProxy.prototype.getColumnsMemberHeaderHandling=function(){return this.m_columnsMemberHeaderHandling};e.PivotTableProxy.prototype.getColumnsTotalCount=function(){return e.XMath.max(0,this.getPreColumnsAmount())+this.getDataColumnsAmount()};e.PivotTableProxy.prototype.getDataColumnTuplesTotalCount=function(){return this.m_baseTile.getColumnsBundle().getTotalTuples()};e.PivotTableProxy.prototype.getDataColumnsAmount=function(){return e.XMath.max(0,this.m_baseTile.getColumnsBundle().getDataTotalCount())};e.PivotTableProxy.prototype.getDataColumnsLoadedCount=function(){return e.XCollectionUtils.hasElements(this.getColumnList())?e.XStream.of(this.getColumnList()).filter(t=>e.notNull(t)).countItems():0};e.PivotTableProxy.prototype.getDataPointStyles=function(){return this.m_dataPointStyles};e.PivotTableProxy.prototype.getDataPointStylesMatchingExceptionInformation=function(t){return e.XStream.of(this.m_dataPointStyles).filter(e=>this.exceptionInfoMatchesDataPointStyle(t,e)).collect(e.XStreamCollector.toList())};e.PivotTableProxy.prototype.getDataRowAmount=function(){return e.XMath.max(0,this.m_baseTile.getRowsBundle().getDataTotalCount())};e.PivotTableProxy.prototype.getDataRowTuplesTotalCount=function(){return this.m_baseTile.getRowsBundle().getTotalTuples()};e.PivotTableProxy.prototype.getDataRowsLoadedCount=function(){let t=this.m_baseTile.getRowsBundle().getDataList();return e.XCollectionUtils.hasElements(t)?e.XStream.of(t).filterNullValues().countItems():0};e.PivotTableProxy.prototype.getDefaultRowHeight=function(){return this.m_defaultRowHeight};e.PivotTableProxy.prototype.getDpActionCommandPairsFromSimpleContext=function(e,t,i,n,r){return this.m_actionResolver.getDpCommandPairsFromSimpleContext(e,t,i,n,r)};e.PivotTableProxy.prototype.getEffectiveHighlightedCells=function(){this.applyHighlighting();let t=e.XList.create();e.XCollectionUtils.forEach(this.m_highlightAreas,i=>{let n;let r=this.m_baseTile.getRowsBundle().getHeaderList();let l=this.getHeaderRowList();for(n=0;n<r.size();n++){this.createHighlightCoordinate(t,i,r.get(n),l.get(n),n)}let o=this.m_baseTile.getRowsBundle().getDataList();let s=this.getRowList();let a=o.size();let u=this.m_rowStart<0?0:e.XMath.min(a,this.m_rowStart);let p=this.m_rowEnd<0?a:e.XMath.min(a,this.m_rowEnd+1);for(n=u;n<p;n++){this.createHighlightCoordinate(t,i,o.get(n),s.get(n),this.getPreRowsAmount()+n)}});return t};e.PivotTableProxy.prototype.getEngine=function(){return e.XWeakReferenceUtil.getHardRef(this.m_engine)};e.PivotTableProxy.prototype.getEstimatedColumnPageCount=function(){return this.m_baseTile.getColumnsBundle().getEstimatedPageCount()};e.PivotTableProxy.prototype.getEstimatedColumnPageInterval=function(e,t,i){return this.m_baseTile.getColumnsBundle().getEstimatedPageTupleInterval(e,t,i)};e.PivotTableProxy.prototype.getEstimatedRowPageCount=function(){return this.m_baseTile.getRowsBundle().getEstimatedPageCount()};e.PivotTableProxy.prototype.getEstimatedRowPageInterval=function(e,t,i){return this.m_baseTile.getRowsBundle().getEstimatedPageTupleInterval(e,t,i)};e.PivotTableProxy.prototype.getFilledColumnPageCount=function(){return this.m_baseTile.getColumnsBundle().getFilledPageCount()};e.PivotTableProxy.prototype.getFilledRowPageCount=function(){return this.m_baseTile.getRowsBundle().getFilledPageCount()};e.PivotTableProxy.prototype.getFreezeUpToColumn=function(){return this.m_freezeUpToColumn};e.PivotTableProxy.prototype.getFreezeUpToRow=function(){return this.m_freezeUpToRow};e.PivotTableProxy.prototype.getHeaderColor=function(){return this.m_headerColor};e.PivotTableProxy.prototype.getHeaderColumnList=function(){return this.m_headerColumns};e.PivotTableProxy.prototype.getHeaderCompactionType=function(){return this.m_headerCompactionType};e.PivotTableProxy.prototype.getHeaderEndColumn=function(){return this.m_baseTile.getColumnsBundle().getHeaderEndIndex()};e.PivotTableProxy.prototype.getHeaderEndRow=function(){return this.m_baseTile.getRowsBundle().getHeaderEndIndex()};e.PivotTableProxy.prototype.getHeaderRowList=function(){return this.m_headerRowList};e.PivotTableProxy.prototype.getHeight=function(){return this.m_height};e.PivotTableProxy.prototype.getIndexOfFirstIncompleteTileColumnAfter=function(e,t,i,n){return 0};e.PivotTableProxy.prototype.getIndexOfFirstIncompleteTileRowAfter=function(e,t,i,n){return 0};e.PivotTableProxy.prototype.getIndexOfFirstUndefinedColumnAfter=function(e){return 0};e.PivotTableProxy.prototype.getIndexOfFirstUndefinedRowAfter=function(e){return 0};e.PivotTableProxy.prototype.getIndexOfLastIncompleteTileColumnBefore=function(e,t,i,n){return 0};e.PivotTableProxy.prototype.getIndexOfLastIncompleteTileRowBefore=function(e,t,i,n){return 0};e.PivotTableProxy.prototype.getIndexOfLastUndefinedColumnBefore=function(e){return 0};e.PivotTableProxy.prototype.getIndexOfLastUndefinedRowBefore=function(e){return 0};e.PivotTableProxy.prototype.getLayeredRectangularStyles=e.noSupport;e.PivotTableProxy.prototype.getLocalColumnsAmount=function(){return this.m_localColumnsAmount};e.PivotTableProxy.prototype.getLocalColumnsOffset=function(){return this.m_localColumnsOffset};e.PivotTableProxy.prototype.getLocalRowList=function(){return this.m_localRowList};e.PivotTableProxy.prototype.getLocalRowsAmount=function(){return this.m_localRowsAmount};e.PivotTableProxy.prototype.getLocalRowsOffset=function(){return this.m_localRowsOffset};e.PivotTableProxy.prototype.getMaxCellWidth=function(){return this.m_maxCellWidth};e.PivotTableProxy.prototype.getMaxColumns=function(){return this.m_maxColumns};e.PivotTableProxy.prototype.getMaxRecommendedCellWith=function(){return this.m_maxRecommendedCellWidth};e.PivotTableProxy.prototype.getMaxRows=function(){return this.m_maxRows};e.PivotTableProxy.prototype.getMemberSortIconsLevel=function(){return this.m_memberSortIconsLevel};e.PivotTableProxy.prototype.getMinCellWidth=function(){return this.m_minCellWidth};e.PivotTableProxy.prototype.getNewTableStyleWithPriority=function(e){return null};e.PivotTableProxy.prototype.getOverallHeight=function(){let t;let i=this.isRowPaginated();let n=i?this.getLocalRowsAmount():this.getDataRowAmount();let r=this.getPreRowsAmount()+n;let l=t=>e.notNull(t)&&t.heightDiffersFromDefault();let o=e.XStream.of(this.getHeaderRowList()).filter(l).collect(e.XStreamCollector.toList());let s=e.XStream.of(i?this.getLocalRowList():this.getRowList()).filter(l).collect(e.XStreamCollector.toList());let a=(t,i)=>e.XIntegerValue.create(t.getInteger()+i.getEffectiveHeight());let u=e.XStream.of(o).reduce(e.XIntegerValue.create(0),a).getInteger()+e.XStream.of(s).reduce(e.XIntegerValue.create(0),a).getInteger();t=(r-o.size()-s.size())*this.getDefaultRowHeight()+u;return t};e.PivotTableProxy.prototype.getPagedColumnsAmount=function(){return this.isColumnPaginated()?this.getLocalColumnsAmount():this.getDataColumnsAmount()};e.PivotTableProxy.prototype.getPagedColumnsOffset=function(){return this.isColumnPaginated()?this.m_localColumnsOffset:0};e.PivotTableProxy.prototype.getPagedRowsAmount=function(){return this.isRowPaginated()?this.getLocalRowsAmount():this.getDataRowAmount()};e.PivotTableProxy.prototype.getPagedRowsOffset=function(){return this.isRowPaginated()?this.m_localRowsOffset:0};e.PivotTableProxy.prototype.getPreColumnsAmount=function(){return this.m_baseTile.getColumnsBundle().getHeaderList().size()};e.PivotTableProxy.prototype.getPreRowsAmount=function(){return this.m_baseTile.getRowsBundle().getHeaderList().size()};e.PivotTableProxy.prototype.getQueryModel=function(){return this.m_queryModel};e.PivotTableProxy.prototype.getRecentTileCarrier=function(){return this.m_tileCarrier};e.PivotTableProxy.prototype.getRowHeaderGroupNames=function(){return null};e.PivotTableProxy.prototype.getRowHeaderMap=function(){return null};e.PivotTableProxy.prototype.getRowList=function(){return this.m_dataRowList};e.PivotTableProxy.prototype.getRowsLoadedCount=function(){return e.XMath.max(0,this.getPreRowsAmount())+this.getDataRowsLoadedCount()};e.PivotTableProxy.prototype.getRowsMemberHeaderHandling=function(){return this.m_rowsMemberHeaderHandling};e.PivotTableProxy.prototype.getRowsTotalCount=function(){return e.XMath.max(0,this.getPreRowsAmount())+this.getDataRowAmount()};e.PivotTableProxy.prototype.getSecondaryTableStyles=function(){return null};e.PivotTableProxy.prototype.getTableColumnOffsetForTupleIndex=function(e){return this.m_baseTile.getColumnsBundle().getTupleRanges().get(e).getFirstObject().getInteger()};e.PivotTableProxy.prototype.getTableMarkups=e.noSupport;e.PivotTableProxy.prototype.getTableMemberHeaderHandling=function(){return this.m_tableMemberHeaderHandling};e.PivotTableProxy.prototype.getTableRowOffsetForTupleIndex=function(e){return this.getPreRowsAmount()+this.m_baseTile.getRowsBundle().getTupleRanges().get(e).getFirstObject().getInteger()};e.PivotTableProxy.prototype.getTableStyle=function(){return this.m_baseTile.getTableStyle()};e.PivotTableProxy.prototype.getTitle=function(){let t=this.m_title;if(e.isNull(t)&&e.notNull(this.m_queryModel)){t=this.m_queryModel.getText();if(e.XStringUtils.isNullOrEmpty(t)){t=this.m_queryModel.getName()}if(e.XStringUtils.isNullOrEmpty(t)){t="Query Model without a name"}}return t};e.PivotTableProxy.prototype.getTotalLevel=function(){return 0};e.PivotTableProxy.prototype.getTotalLevel0Color=function(){return this.m_totalLevel0Color};e.PivotTableProxy.prototype.getTotalLevel1Color=function(){return this.m_totalLevel1Color};e.PivotTableProxy.prototype.getTotalLevel2Color=function(){return this.m_totalLevel2Color};e.PivotTableProxy.prototype.getTotalLevel3Color=function(){return this.m_totalLevel3Color};e.PivotTableProxy.prototype.getTotalLevel4Color=function(){return this.m_totalLevel4Color};e.PivotTableProxy.prototype.getTotalLevel5Color=function(){return this.m_totalLevel5Color};e.PivotTableProxy.prototype.getTotalLevel6Color=function(){return this.m_totalLevel6Color};e.PivotTableProxy.prototype.getTotalRowDiff=function(){return this.m_totalRowDiff};e.PivotTableProxy.prototype.getUriFromAction=function(e,t,i,n,r){return this.m_actionResolver.getUriFromSimpleContext(e,t,i,n,r)};e.PivotTableProxy.prototype.getWidth=function(){return this.m_width};e.PivotTableProxy.prototype.hasHierarchy=function(){return this.m_hasHierarchyActive};e.PivotTableProxy.prototype.injectStyleToList=function(e){this.m_baseTile.injectStyleToList(e)};e.PivotTableProxy.prototype.isAxisReversed=function(t){let i=false;let n=t.getModelCapabilities().supportsUniversalDisplayHierarchies()?t.getQueryModel().getUniversalDisplayHierarchies().getByAxisType(t.getType()):null;if(e.XObjectExt.isValidObject(n)&&n.isActive()){if(this.m_queryModel.getSession().hasFeature(e.FeatureToggleOlap.UDH_ALIGNMENT)){i=t.getResultAlignment()===e.ResultAlignment.BOTTOM}}else{for(let n=0;n<t.size();n++){let r=t.get(n);if(r.isHierarchyActive()){i=r.getLowerLevelNodeAlignment()===e.Alignment.CHILDREN_ABOVE_PARENT;break}}}return i};e.PivotTableProxy.prototype.isAxisValidForMemberSort=function(t){let i;if(this.m_memberSortIconsLevel===e.SacTableConstants.N_MEMBER_SORT_ICONS_NONE){i=false}else if(this.m_memberSortIconsLevel===e.SacTableConstants.N_MEMBER_SORT_ICONS_MAXIMAL){i=true}else{let n=this.checkDimensionOnAxis(t,this.m_queryModel.getVersionDimension());n=n||this.checkDimensionOnAxis(t,this.m_queryModel.getAccountDimension());n=n||this.checkDimensionOnAxis(t,this.m_queryModel.getMeasureDimension());n=n||this.checkDimensionOnAxis(t,this.m_queryModel.getNonMeasureDimension());if(this.m_memberSortIconsLevel===e.SacTableConstants.N_MEMBER_SORT_ICONS_EXTENSIVE){i=!n}else{i=!n&&t===this.m_queryModel.getRowsAxis()&&this.m_queryModel.getColumnsAxis().size()===1}}return i};e.PivotTableProxy.prototype.isColorateHeaderCells=function(){return this.m_colorateHeaderCells};e.PivotTableProxy.prototype.isColorateTotals=function(){return e.XStringUtils.isNotNullAndNotEmpty(this.m_totalLevel0Color)&&e.XStringUtils.isNotNullAndNotEmpty(this.m_totalLevel1Color)&&e.XStringUtils.isNotNullAndNotEmpty(this.m_totalLevel2Color)&&e.XStringUtils.isNotNullAndNotEmpty(this.m_totalLevel3Color)&&e.XStringUtils.isNotNullAndNotEmpty(this.m_totalLevel4Color)&&e.XStringUtils.isNotNullAndNotEmpty(this.m_totalLevel5Color)};e.PivotTableProxy.prototype.isColumnInsertOrHidePresent=function(){return false};e.PivotTableProxy.prototype.isColumnPaginated=function(){return this.m_tableDefinition.getTableViewportPagingSettings().columnPagingActive()};e.PivotTableProxy.prototype.isEffectivelyShownDimensionTitles=function(){return this.m_showDimensionTitles||this.m_gridContainer.getRowsAxis().getTuplesTotalCount()===0&&this.m_gridContainer.getColumnsAxis().getTuplesTotalCount()===0};e.PivotTableProxy.prototype.isEmptyColumnDimensions=function(){return this.m_gridContainer.getColumnsAxis().getVisibleComponentsOnAxis().size()===0};e.PivotTableProxy.prototype.isEmptyRowDimensions=function(){let t=this.m_gridContainer.getRowsAxis();return e.isNull(t)||t.getVisibleComponentsOnAxis().isEmpty()};e.PivotTableProxy.prototype.isFreezeHeaderColumns=function(){return this.m_freezeHeaderColumns};e.PivotTableProxy.prototype.isFreezeHeaderRows=function(){return this.m_freezeHeaderRows};e.PivotTableProxy.prototype.isHeaderComplete=function(){return this.m_headerComplete};e.PivotTableProxy.prototype.isHideNumberForCellChart=function(){return false};e.PivotTableProxy.prototype.isMergeRepetitiveHeaderCells=function(){return this.m_baseTile.getTableMemberHeaderHandling()===e.SacTableMemberHeaderHandling.MERGE};e.PivotTableProxy.prototype.isPartial=function(){return this.m_partial};e.PivotTableProxy.prototype.isRepetitiveHeaderNames=function(){return this.m_baseTile.getTableMemberHeaderHandling()===e.SacTableMemberHeaderHandling.REPETITIVE};e.PivotTableProxy.prototype.isReversedHierarchy=function(){return this.m_reversedHierarchy};e.PivotTableProxy.prototype.isRowInsertOrHidePresent=function(){return false};e.PivotTableProxy.prototype.isRowPaginated=function(){return this.m_tableDefinition.getTableViewportPagingSettings().rowPagingActive()};e.PivotTableProxy.prototype.isShowCellChart=function(){return this.m_baseTile.isShowCellChart()};e.PivotTableProxy.prototype.isShowCoordinateHeader=function(){return this.m_showCoordinateHeader};e.PivotTableProxy.prototype.isShowDimensionTitles=function(){return this.m_showDimensionTitles};e.PivotTableProxy.prototype.isShowFreezeLines=function(){return this.m_showFreezeLines};e.PivotTableProxy.prototype.isShowGrid=function(){return this.m_showGrid};e.PivotTableProxy.prototype.isShowSubTitle=function(){return this.m_showSubTitle};e.PivotTableProxy.prototype.isShowTableDetails=function(){return this.m_showTableDetails};e.PivotTableProxy.prototype.isShowTableTitle=function(){return this.m_showTableTitle};e.PivotTableProxy.prototype.isStripeDataColumns=function(){return this.m_stripeDataColumns};e.PivotTableProxy.prototype.isStripeDataRows=function(){return this.m_stripeDataRows};e.PivotTableProxy.prototype.isTotalsContext=function(){return false};e.PivotTableProxy.prototype.matchesParameter=function(t,i){return(!e.TriStateBool.isExplicitBooleanValue(i.getMatchesLeaves())||i.getMatchesLeaves().getBoolean()===(t.getDrillState()===e.DrillState.LEAF))&&(!e.TriStateBool.isExplicitBooleanValue(i.getMatchesExpanded())||i.getMatchesExpanded().getBoolean()===(t.getDrillState()===e.DrillState.EXPANDED))&&(!e.TriStateBool.isExplicitBooleanValue(i.getMatchesTotals())||i.getMatchesTotals().getBoolean()===t.getDimensionMemberType().isTypeOf(e.MemberType.RESULT))};e.PivotTableProxy.prototype.matchesTuple=function(t,i){return e.XStream.of(t.getValues()).filter(t=>t.getModelReference().getModelComponentType().isTypeOf(e.OlapComponentType.FIELD)).map(e=>e).allMatch(t=>{let n=t.getFieldReference();let r=i.getByKey(e.XIntegerValue.create(n.getDimensionIndex()));return e.isNull(r)||r.getOlapComponentType()!==e.OlapComponentType.QUICK_ACTION_PARAMETER_FIELD_VALUE||this.matchesParameter(t,r)})};e.PivotTableProxy.prototype.newDataRow=function(){return null};e.PivotTableProxy.prototype.newDataRowAt=function(e,t){return null};e.PivotTableProxy.prototype.newHeaderRow=function(){return null};e.PivotTableProxy.prototype.newHeaderRowAt=function(e){return null};e.PivotTableProxy.prototype.postFormatHeaderColumnsForDataRows=function(t){let i;let n;let r;let l;let o=this.getHeaderColumnList().size();for(let s=0;s<o;s++){if(e.XCollectionUtils.hasElements(t)){for(let o=0;o<t.size();o++){r=t.get(o);if(e.isNull(r)){continue}i=r.getCells().get(s);if(e.notNull(i)&&!i.isRepeatedHeader()){for(l=0;o+l+1<t.size();l++){let i=t.get(o+l+1);if(e.isNull(i)){break}n=i.getCells().get(s);if(i.getTupleIndex()>-1&&!n.isRepeatedHeader()){break}}o=o+l;i.setRepetitiveRows(l)}}}}};e.PivotTableProxy.prototype.postFormatHeaderColumnsForHeaderRows=function(t){let i;let n;let r;let l;let o=this.getHeaderColumnList().size();if(o>0&&e.XCollectionUtils.hasElements(t)){r=t.get(0);i=r.getCells().get(0);if(e.notNull(i)&&i.getType()===-1){for(l=0;l+1<t.size();l++){n=t.get(l+1).getCells().get(0);if(e.isNull(n)||n.getType()!==-1){break}}i.setRepetitiveRows(l)}}};e.PivotTableProxy.prototype.postFormatHeaderRows=function(t){let i=this.getHeaderColumnList().size();for(let n=0;n<t.size();n++){let r=0;let l=t.get(n);let o=l.getCells();if(o.size()===0){break}let s=o.get(0);let a;if(n===0&&e.notNull(s)&&s.getType()===-1){for(r=0;r+1<o.size();r++){a=o.get(r+1);if(e.isNull(a)||a.getType()!==-1){break}}s.setRepetitiveColumns(r)}for(let t=i;t<o.size();t++){s=o.get(t);if(e.notNull(s)&&!s.isRepeatedHeader()){for(r=0;t+r+1<o.size();r++){a=o.get(t+r+1);let i=e.isNull(a)?null:a.getParentColumn();if(e.isNull(i)||i.getTupleIndex()>-1&&!a.isRepeatedHeader()){break}}t=t+r;s.setRepetitiveColumns(r)}}}};e.PivotTableProxy.prototype.prepareColumnList=function(t,i){let n=e.XList.create();let r=this.m_baseTile.getColumnsBundle().getDataList().size();let l=i===-1?r:e.XMath.min(i+1,r);let o;for(let i=e.XMath.max(0,t);i<l;i++){let t=this.m_baseTile.getColumnsBundle().getDataAt(i);o=e.PivotProxyColumn.create(this,t);n.add(o)}return n};e.PivotTableProxy.prototype.prepareHeaderColumnList=function(){let t=e.XList.create();let i=this.m_baseTile.getColumnsBundle().getHeaderList().size();let n=this.m_gridContainer.getRowsAxis().getVisibleComponentsOnAxis();let r;for(let l=0;l<i;l++){let i=this.m_baseTile.getColumnsBundle().getHeaderAt(l);r=e.PivotProxyColumn.create(this,i);let o=i.getComponentIndex();let s;if(o<n.size()&&o>-1){s=n.get(o);let e=s.getField();r.setFieldName(e.getName());r.setHeader(true);r.setDimensionIndex(s.getDimensionIndex())}t.add(r)}return t};e.PivotTableProxy.prototype.prepareHeaderRowListExt=function(t,i){let n=e.XList.create();let r=this.m_baseTile.getRowsBundle().getHeaderList().size();let l=this.m_gridContainer.getColumnsAxis().getVisibleComponentsOnAxis();let o;for(let s=0;s<r;s++){let r=this.m_baseTile.getRowsBundle().getHeaderAt(s);o=e.PivotProxyRow.create(this,r);let a=r.getComponentIndex();let u;if(a<l.size()&&a>-1){u=l.get(a);let e=u.getField();o.setFieldName(e.getName());o.setHeader(true);o.setDimensionIndex(u.getDimensionIndex())}n.add(o);this.applyHeaderRowCells(s,o,r,a,t,i);this.formatWidths(o,r,t,i)}if(e.XCollectionUtils.hasElements(n)){n.get(n.size()-1).setLastHeader(true)}this.postFormatHeaderRows(n);this.postFormatHeaderColumnsForHeaderRows(n);this.m_cachedHeaderRowList=n;return n};e.PivotTableProxy.prototype.prepareHyperLinkLevel=function(e){let t=this.m_actionResolver.getSimpleGridCoordinates(e);let i=t.getColumnCoordinate();let n=t.getRowCoordinate();if(n>-1&&i>-1){this.m_dataCellHyperlinks.add(t)}else if(n>-1){this.addHyperlinkQuickAction(this.m_rowHeaderHyperlinkLevels,n,t)}else if(i>-1){this.addHyperlinkQuickAction(this.m_columnHeaderHyperlinkLevels,i,t)}};e.PivotTableProxy.prototype.prepareHyperlinkLevels=function(){if(this.m_showHyperlinks){e.XCollectionUtils.forEach(this.getQueryModel().getQuickActionManager(),e=>{this.prepareHyperLinkLevel(e)})}else{this.m_dataCellHyperlinks.clear();this.m_rowHeaderHyperlinkLevels.clear();this.m_columnHeaderHyperlinkLevels.clear()}};e.PivotTableProxy.prototype.prepareLocalRowList=function(e,t,i,n){this.m_localRowList=this.prepareRowListExt(e,t,i,n);if(this.isRowPaginated()){this.m_dataRowList.clear();this.m_dataRowList.addAll(this.m_localRowList)}else{if(this.m_localColumnsOffset!==i||this.m_localColumnsAmount+this.m_localColumnsOffset-1!==n){this.m_dataRowList.clear()}let t=this.m_dataRowList.size();while(e>t){this.m_dataRowList.add(null);t++}let r=0;let l=e;for(;r<this.m_localRowList.size()&&l<t;l++,r++){this.m_dataRowList.set(l,this.m_localRowList.get(r))}for(;r<this.m_localRowList.size();r++,l++){this.m_dataRowList.add(this.m_localRowList.get(r))}let o=this.m_baseTile.getRowsBundle();if(o.getTuples().size()!==o.getDataList().size()){for(r=this.m_dataRowList.size()-1;r>=l;r--){this.m_dataRowList.removeAt(r)}}}this.m_localRowsOffset=e;this.m_localColumnsOffset=i;this.m_localRowsAmount=this.m_localRowList.size();this.m_localColumnsAmount=n-i+1};e.PivotTableProxy.prototype.prepareRowListExt=function(t,i,n,r){let l=e.XList.create();let o=this.m_baseTile.getRowsBundle().getDataList().size();let s=i===-1?o:e.XMath.min(i+1,o);let a;for(let i=e.XMath.max(0,t);i<s;i++){let t=this.m_baseTile.getRowsBundle().getDataAt(i);if(e.notNull(t)){a=e.PivotProxyRow.create(this,t);let l=t.getTupleIndex();this.applyTupleRowCells(i,a,t,l,n,r)}else{a=null}l.add(a)}this.expandDataPointStyles();e.XCollectionUtils.forEach(l,t=>{if(e.notNull(t)){this.formatWidths(t,t.getFragmentRow(),n,r)}});this.postFormatHeaderColumnsForDataRows(l);this.m_cachedDataRowList=l;return l};e.PivotTableProxy.prototype.prepareTable=function(t,i,n,r){this.m_headerComplete=false;this.applyPagingSettings();this.applyDataPointStyles();this.prepareHyperlinkLevels();this.m_headerColumns.clear();this.m_headerColumns.addAll(this.prepareHeaderColumnList());this.m_headerRowList=e.XObjectExt.release(this.m_headerRowList);while(this.m_dataColumns.size()<=r){this.m_dataColumns.add(null)}let l=this.prepareColumnList(n,r);for(let e=0,t=n;t<=r&&e<l.size();t++,e++){this.m_dataColumns.set(t,l.get(e))}let o=this.m_baseTile.getColumnsBundle();if(o.getTuples().size()!==o.getDataList().size()){for(let e=this.m_dataColumns.size()-1;e>r;e--){this.m_dataColumns.removeAt(e)}}this.updateColumnDimensions();this.updateRowDimensions();this.setHasHierarchy(this.checkAnyHierarchyActive());this.checkReversedHierarchy();let s=this.m_tableDefinition.getTableViewportPagingSettings();let a=0;let u=-1;let p=t;let c=i;if(s.rowPagingActive()||s.columnPagingActive()){this.m_baseTile.applyColumnAndRowSizes(this.m_tableDefinition.getFixedPixelHeightsForRows(),this.m_tableDefinition.getFixedPixelWidthsForColumns());this.m_baseTile.getRowsBundle().updatePageRanges();this.m_baseTile.getColumnsBundle().updatePageRanges();if(s.columnPagingActive()&&s.getColumnPage()<=this.m_baseTile.getColumnsBundle().getFilledPageCount()){let t=this.m_baseTile.getColumnsBundle().getEstimatedPageInterval(s.getColumnPage(),s.getStartColumn(),s.getEndColumn());a=t.getFirstObject().getInteger();u=e.XMath.min(t.getSecondObject().getInteger(),this.m_gridContainer.getDataColumnsTotalCount()-1)}if(s.rowPagingActive()&&s.getRowPage()<=this.m_baseTile.getRowsBundle().getFilledPageCount()){let t=this.m_baseTile.getRowsBundle().getEstimatedPageInterval(s.getRowPage(),s.getStartRow(),s.getEndRow());p=t.getFirstObject().getInteger();c=e.XMath.min(t.getSecondObject().getInteger(),this.m_gridContainer.getDataRowsTotalCount()-1)}}this.m_headerRowList=this.prepareHeaderRowListExt(a,u);this.prepareLocalRowList(p,c,a,u);this.m_baseTile.applyColumnAndRowSizes(this.m_tableDefinition.getFixedPixelHeightsForRows(),this.m_tableDefinition.getFixedPixelWidthsForColumns());this.m_headerComplete=true};e.PivotTableProxy.prototype.putColumnHeaderGroupMapping=function(e,t){};e.PivotTableProxy.prototype.putRowHeaderGroupMapping=function(e,t){};e.PivotTableProxy.prototype.reApplyTableStyling=function(){this.prepareHyperlinkLevels();this.getEngine().applyTableDefinition(this.m_tableDefinition);this.setPartial(false);this.getEngine().reFillForFormatting()};e.PivotTableProxy.prototype.recreateHeaderColumns=function(){this.m_headerComplete=false;this.prepareHyperlinkLevels();this.getEngine().applyTableDefinition(this.m_tableDefinition);this.getEngine().reCreateHeaders();this.m_headerColumns.clear();this.m_headerColumns.addAll(this.prepareHeaderColumnList());let t=this.m_tableDefinition.getTableViewportPagingSettings();let i=0;let n=-1;let r=0;let l=-1;if(t.rowPagingActive()||t.columnPagingActive()){this.m_baseTile.applyColumnAndRowSizes(this.m_tableDefinition.getFixedPixelHeightsForRows(),this.m_tableDefinition.getFixedPixelWidthsForColumns());this.m_baseTile.getRowsBundle().updatePageRanges();this.m_baseTile.getColumnsBundle().updatePageRanges();if(t.columnPagingActive()&&t.getColumnPage()<this.m_baseTile.getColumnsBundle().getFilledPageCount()){let r=this.m_baseTile.getColumnsBundle().getEstimatedPageInterval(t.getColumnPage(),t.getStartColumn(),t.getEndColumn());i=r.getFirstObject().getInteger();n=e.XMath.min(r.getSecondObject().getInteger(),this.m_gridContainer.getDataColumnsTotalCount()-1)}if(t.rowPagingActive()&&t.getRowPage()<this.m_baseTile.getRowsBundle().getFilledPageCount()){let i=this.m_baseTile.getRowsBundle().getEstimatedPageInterval(t.getRowPage(),t.getStartRow(),t.getEndRow());r=i.getFirstObject().getInteger();l=e.XMath.min(i.getSecondObject().getInteger(),this.m_gridContainer.getDataRowsTotalCount()-1)}}this.m_headerRowList=this.prepareHeaderRowListExt(i,n);this.setPartial(false);this.prepareLocalRowList(r,l,i,n);this.m_baseTile.applyColumnAndRowSizes(this.m_tableDefinition.getFixedPixelHeightsForRows(),this.m_tableDefinition.getFixedPixelWidthsForColumns());this.m_headerComplete=true};e.PivotTableProxy.prototype.releaseObject=function(){this.m_engine=e.XObjectExt.release(this.m_engine);this.m_baseTile=e.XObjectExt.release(this.m_baseTile);this.m_gridContainer=null;this.m_headerCompactionType=null;this.m_headerColumns=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_headerColumns);this.m_dataColumns=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_dataColumns);this.m_highlightAreas=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_highlightAreas);this.m_rowStart=-1;this.m_rowEnd=-1;this.m_colStart=-1;this.m_colEnd=-1;this.m_freezeUpToColumn=-1;this.m_freezeUpToRow=-1;this.m_height=-1;this.m_width=-1;this.m_defaultRowHeight=0;this.m_queryModel=null;this.m_caps=null;this.m_dataPointStyles=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_dataPointStyles);this.m_dataPointStyleMap=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_dataPointStyleMap);this.m_matchedExceptionInformation=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_matchedExceptionInformation);this.m_dataPointContextMatcher=e.XObjectExt.release(this.m_dataPointContextMatcher);this.m_minCellWidth=0;this.m_maxCellWidth=0;this.m_maxRecommendedCellWidth=0;this.m_dataRowList=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_dataRowList);this.m_dataColumns=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_dataColumns);this.m_headerRowList=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_headerRowList);this.m_headerColumns=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_headerColumns);this.m_localRowList=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_localRowList);this.m_cellChartInfo=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_cellChartInfo);this.m_actionResolver=e.XObjectExt.release(this.m_actionResolver);this.setReversedHierarchy(false)};e.PivotTableProxy.prototype.removeDataColumnAt=e.noSupport;e.PivotTableProxy.prototype.removeHeaderColumnAt=e.noSupport;e.PivotTableProxy.prototype.resetCellMerger=function(e,t){for(let i=e;i<t.size();i++){let e=t.get(i);if(e.getMergedColumns()<0){e.setMergedColumnsInternal(0);e.setMergedRowsInternal(0)}else{break}}};e.PivotTableProxy.prototype.resetRenderingScope=function(){this.m_rowStart=-1;this.m_rowEnd=-1;this.m_colStart=-1;this.m_colEnd=-1};e.PivotTableProxy.prototype.setBaseTile=function(e){this.m_baseTile=e};e.PivotTableProxy.prototype.setCellChartMemberName=function(e){};e.PivotTableProxy.prototype.setCellChartOrientation=function(e){};e.PivotTableProxy.prototype.setCellChartType=function(e){};e.PivotTableProxy.prototype.setColorateHeaderCells=function(e){this.m_colorateHeaderCells=e};e.PivotTableProxy.prototype.setColorateTotals=function(e){this.m_totalLevel5Color=e?"rgba(220,220,150,0.3)":null;this.m_totalLevel4Color=e?"rgba(230,230,150,0.4)":null;this.m_totalLevel3Color=e?"rgba(220,220,135,0.4)":null;this.m_totalLevel2Color=e?"rgba(220,220,135,0.5)":null;this.m_totalLevel1Color=e?"rgba(220,220,220,1)":null;this.m_totalLevel0Color=e?"rgba(204,204,204,1)":null};e.PivotTableProxy.prototype.setColumnInsertOrHidePresent=function(){};e.PivotTableProxy.prototype.setColumnsMemberHeaderHandling=function(e){this.m_columnsMemberHeaderHandling=e};e.PivotTableProxy.prototype.setDataColumnsAmount=function(e){this.m_baseTile.getColumnsBundle().setDataTotalCount(e)};e.PivotTableProxy.prototype.setDataRowAmount=function(e){this.m_baseTile.getRowsBundle().setDataTotalCount(e)};e.PivotTableProxy.prototype.setDefaultRowHeight=function(e){this.m_defaultRowHeight=e};e.PivotTableProxy.prototype.setFreezeHeaderColumns=function(e){this.m_freezeHeaderColumns=e};e.PivotTableProxy.prototype.setFreezeHeaderRows=function(e){this.m_freezeHeaderRows=e};e.PivotTableProxy.prototype.setFreezeUpToColumn=function(e){this.m_freezeUpToColumn=e};e.PivotTableProxy.prototype.setFreezeUpToRow=function(e){this.m_freezeUpToRow=e};e.PivotTableProxy.prototype.setHasHierarchy=function(e){this.m_hasHierarchyActive=e};e.PivotTableProxy.prototype.setHeaderColor=function(e){this.m_headerColor=e};e.PivotTableProxy.prototype.setHeaderCompactionType=function(e){this.m_headerCompactionType=e};e.PivotTableProxy.prototype.setHeight=function(e){this.m_height=e};e.PivotTableProxy.prototype.setHideNumberForCellChart=function(e){};e.PivotTableProxy.prototype.setMaxCellWidth=function(e){this.m_maxCellWidth=e};e.PivotTableProxy.prototype.setMaxColumns=function(e){this.m_maxColumns=e};e.PivotTableProxy.prototype.setMaxRecommendedCellWidth=function(e){this.m_maxRecommendedCellWidth=e};e.PivotTableProxy.prototype.setMaxRows=function(e){this.m_maxRows=e};e.PivotTableProxy.prototype.setMemberSortIconsLevel=function(e){this.m_memberSortIconsLevel=e};e.PivotTableProxy.prototype.setMergeRepetitiveHeaderCells=function(t){this.m_baseTile.setTableMemberHeaderHandling(e.SacTableMemberHeaderHandling.MERGE)};e.PivotTableProxy.prototype.setMinCellWidth=function(e){this.m_minCellWidth=e};e.PivotTableProxy.prototype.setPartial=function(e){this.m_partial=e};e.PivotTableProxy.prototype.setPreColumnsAmount=function(e){};e.PivotTableProxy.prototype.setPreRowsAmount=function(e){};e.PivotTableProxy.prototype.setRecentTileCarrier=function(e){this.m_tileCarrier=e};e.PivotTableProxy.prototype.setRenderingScope=function(e,t,i,n){this.m_rowStart=e;this.m_rowEnd=t;this.m_colStart=i;this.m_colEnd=n};e.PivotTableProxy.prototype.setRepetitiveHeaderNames=function(t){this.m_baseTile.setTableMemberHeaderHandling(e.SacTableMemberHeaderHandling.REPETITIVE);this.formatHeaderColumnWidths();this.formatDataColumnWidths()};e.PivotTableProxy.prototype.setReversedHierarchy=function(e){this.m_reversedHierarchy=e};e.PivotTableProxy.prototype.setRowInsertOrHidePresent=function(){};e.PivotTableProxy.prototype.setRowsMemberHeaderHandling=function(e){this.m_rowsMemberHeaderHandling=e};e.PivotTableProxy.prototype.setShowCellChart=function(e){this.m_baseTile.setShowCellChart(e)};e.PivotTableProxy.prototype.setShowCoordinateHeader=function(e){this.m_showCoordinateHeader=e};e.PivotTableProxy.prototype.setShowDimensionTitles=function(e){this.m_showDimensionTitles=e};e.PivotTableProxy.prototype.setShowFreezeLines=function(e){this.m_showFreezeLines=e};e.PivotTableProxy.prototype.setShowGrid=function(e){this.m_showGrid=e};e.PivotTableProxy.prototype.setShowSubTitle=function(e){this.m_showSubTitle=e};e.PivotTableProxy.prototype.setShowTableDetails=function(e){this.m_showTableDetails=e};e.PivotTableProxy.prototype.setShowTableTitle=function(e){this.m_showTableTitle=e};e.PivotTableProxy.prototype.setStripeDataColumns=function(e){this.m_stripeDataColumns=e};e.PivotTableProxy.prototype.setStripeDataRows=function(e){this.m_stripeDataRows=e};e.PivotTableProxy.prototype.setTableMemberHeaderHandling=function(e){this.m_tableMemberHeaderHandling=e};e.PivotTableProxy.prototype.setTableStyle=function(e){};e.PivotTableProxy.prototype.setTitle=function(e){this.m_title=e};e.PivotTableProxy.prototype.setTotalLevel=function(e){};e.PivotTableProxy.prototype.setTotalLevel0Color=function(e){this.m_totalLevel0Color=e};e.PivotTableProxy.prototype.setTotalLevel1Color=function(e){this.m_totalLevel1Color=e};e.PivotTableProxy.prototype.setTotalLevel2Color=function(e){this.m_totalLevel2Color=e};e.PivotTableProxy.prototype.setTotalLevel3Color=function(e){this.m_totalLevel3Color=e};e.PivotTableProxy.prototype.setTotalLevel4Color=function(e){this.m_totalLevel4Color=e};e.PivotTableProxy.prototype.setTotalLevel5Color=function(e){this.m_totalLevel5Color=e};e.PivotTableProxy.prototype.setTotalLevel6Color=function(e){this.m_totalLevel6Color=e};e.PivotTableProxy.prototype.setTotalRowDiff=function(e){this.m_totalRowDiff=e};e.PivotTableProxy.prototype.setTotalsContext=function(e){};e.PivotTableProxy.prototype.setWidth=function(e){this.m_width=e};e.PivotTableProxy.prototype.setupExt=function(t,i){this.m_engine=e.XWeakReferenceUtil.getWeakRef(i);this.m_gridContainer=t;this.m_headerCompactionType=e.TableHeaderCompactionType.PREFERABLY_COLUMN;this.m_headerColumns=e.XList.create();this.m_dataColumns=e.XList.create();this.m_highlightAreas=e.XList.create();this.m_rowStart=-1;this.m_rowEnd=-1;this.m_colStart=-1;this.m_colEnd=-1;this.m_freezeUpToColumn=-1;this.m_freezeUpToRow=-1;this.m_height=451;this.m_width=1257;this.m_defaultRowHeight=e.SacTableConstants.DF_R_N_HEIGHT;this.m_queryModel=t.getQueryModel();this.m_caps=this.m_queryModel.getModelCapabilities();this.m_dataPointStyles=e.XList.create();this.m_dataPointStyleMap=e.XSimpleMap.create();this.m_matchedExceptionInformation=e.XList.create();this.m_dataPointContextMatcher=e.VisualizationDataPointMatcher.create();this.m_minCellWidth=40;this.m_maxRecommendedCellWidth=200;this.m_maxCellWidth=900;this.m_dataRowList=e.XList.create();this.m_cellChartInfo=e.XHashMapByString.create();this.m_rowHeaderHyperlinkLevels=e.XSimpleMap.create();this.m_columnHeaderHyperlinkLevels=e.XSimpleMap.create();this.m_dataCellHyperlinks=e.XList.create();this.m_actionResolver=e.PivotActionResolver.create(t);this.setReversedHierarchy(this.checkReversedHierarchy())};e.PivotTableProxy.prototype.tagExceptionInformation=function(t,i,n){e.OlapToVisualizationConverterUtil.complementExceptionInformation(t,i,this.m_relevantDataPointPaths);e.OlapToVisualizationConverterUtil.complementExceptionInformation(t,n,this.m_relevantDataPointPaths);e.XCollectionUtils.addIfNotPresent(this.m_matchedExceptionInformation,t)};e.PivotTableProxy.prototype.tagMatchingStyleCriteria=function(e){this.m_dataPointContextMatcher.tagMatchingStyleCriteria(e)};e.PivotTableProxy.prototype.totalColumnsCountMayBeInaccurate=function(){return this.m_baseTile.getRowsBundle().isTotalTuplesMayBeInaccurate()};e.PivotTableProxy.prototype.totalRowsCountMayBeInaccurate=function(){return this.m_baseTile.getRowsBundle().isTotalTuplesMayBeInaccurate()};e.PivotTableProxy.prototype.updateColumnDimensions=function(){let t=this.m_baseTile.getColumnsBundle().getTupleRanges();if(e.XCollectionUtils.hasElements(t)){let i=e.XMath.min(this.m_baseTile.getColumnsBundle().getTuples().size(),t.size());this.m_baseTile.getColumnsBundle().setTotalTuplesMayBeInaccurate(this.m_gridContainer.totalColumnsCountMayBeInaccurate()&&(this.getMaxColumns()>this.m_gridContainer.getDataColumnsTotalCount()||this.getMaxColumns()<=0));let n=e.XMath.max(this.m_gridContainer.getDataColumnsTotalCount(),this.m_gridContainer.getColumnsLoadedCount())+(this.m_baseTile.getColumnsBundle().isTotalTuplesMayBeInaccurate()?this.m_tileColumnPadding:0);this.m_baseTile.getColumnsBundle().setTotalTuples(n>0?e.XMath.max(0,this.getMaxColumns()>0?e.XMath.min(n,this.getMaxColumns()):n):0);let r=t.get(i-1).getSecondObject().getInteger()+1;this.setDataColumnsAmount(i>0?e.XMath.div(this.m_baseTile.getColumnsBundle().getTotalTuples()*r,i):n)}else{this.setDataColumnsAmount(0)}};e.PivotTableProxy.prototype.updateRowDimensions=function(){let t=this.m_baseTile.getRowsBundle().getTupleRanges();if(e.XCollectionUtils.hasElements(t)){let i=e.XMath.min(this.m_baseTile.getRowsBundle().getTuples().size(),t.size());this.m_baseTile.getRowsBundle().setTotalTuplesMayBeInaccurate(this.m_gridContainer.totalRowsCountMayBeInaccurate()&&(this.getMaxRows()>this.m_gridContainer.getDataRowsTotalCount()||this.getMaxRows()<=0));let n=e.XMath.max(this.m_gridContainer.getDataRowsTotalCount(),this.m_gridContainer.getRowsLoadedCount())+(this.m_baseTile.getRowsBundle().isTotalTuplesMayBeInaccurate()?this.m_tileRowPadding:0);this.m_baseTile.getRowsBundle().setTotalTuples(n>0?e.XMath.max(0,this.getMaxRows()>0?e.XMath.min(n,this.getMaxRows()):n):0);let r=t.get(i-1).getSecondObject().getInteger()+1;this.setDataRowAmount(i>0?e.XMath.div(this.m_baseTile.getRowsBundle().getTotalTuples()*r,i):n)}else{this.setDataRowAmount(0)}};e.ChartAxisCategoryElementAnalytic=function(){};e.ChartAxisCategoryElementAnalytic.prototype=new e.ChartAxisCategoryElement;e.ChartAxisCategoryElementAnalytic.prototype._ff_c="ChartAxisCategoryElementAnalytic";e.ChartAxisCategoryElementAnalytic.createAnalytic=function(t,i,n,r,l,o,s,a,u){let p=new e.ChartAxisCategoryElementAnalytic;p.initializeAxis(t,i,n,r,l,o);p.m_dimensionIndex=s;p.m_fieldName=a;p.m_dimensionMember=u;return p};e.ChartAxisCategoryElementAnalytic.prototype.m_dimensionIndex=0;e.ChartAxisCategoryElementAnalytic.prototype.m_dimensionMember=null;e.ChartAxisCategoryElementAnalytic.prototype.m_fieldName=null;e.ChartAxisCategoryElementAnalytic.prototype.getDimensionIndex=function(){return this.m_dimensionIndex};e.ChartAxisCategoryElementAnalytic.prototype.getDimensionMember=function(){return this.m_dimensionMember};e.ChartAxisCategoryElementAnalytic.prototype.getFieldName=function(){return this.m_fieldName};e.ChartAxisCategoryElementAnalytic.prototype.releaseObject=function(){this.m_fieldName=null;this.m_dimensionIndex=0;e.ChartAxisCategoryElement.prototype.releaseObject.call(this)};e.ChartAxisCategoryElementAnalytic.prototype.setDimensionIndex=function(e){this.m_dimensionIndex=e};e.ChartAxisCategoryElementAnalytic.prototype.setFieldName=function(e){this.m_fieldName=e};e.PivotProxyCell=function(){};e.PivotProxyCell.prototype=new e.SacTableCell;e.PivotProxyCell.prototype._ff_c="PivotProxyCell";e.PivotProxyCell._createProxyCell=function(t,i,n,r){let l=new e.PivotProxyCell;l.setupInternal(t,i);l.setupFragments(n,r);return l};e.PivotProxyCell.prototype.m_dataCellRef=null;e.PivotProxyCell.prototype.m_fragmentColumn=null;e.PivotProxyCell.prototype.m_fragmentRow=null;e.PivotProxyCell.prototype.m_prioritizedStylesList=null;e.PivotProxyCell.prototype.m_repeatedRefColumn=0;e.PivotProxyCell.prototype.m_repeatedRefRow=0;e.PivotProxyCell.prototype.m_repetitiveColumns=0;e.PivotProxyCell.prototype.m_repetitiveRows=0;e.PivotProxyCell.prototype.m_sortDirection=null;e.PivotProxyCell.prototype.getDataCellRef=function(){return this.m_dataCellRef};e.PivotProxyCell.prototype.getPrioritizedStylesList=function(){if(e.isNull(this.m_prioritizedStylesList)){let t=e.XList.create();t.add(this.getTableStyle());let i=this.getParentRow().getParentTable();e.XStream.of(i.getDataPointStylesMatchingExceptionInformation(this.getExceptionInformations())).forEach(e=>{t.add(e.getTableStyle())});e.XStream.of(this.m_fragmentRow.getMatchingTableMarkups(false)).filterNullValues().forEach(e=>{t.addAll(this.m_fragmentColumn.getMatchingOrthogonalStyles(e))});e.XStream.of(this.m_fragmentColumn.getMatchingTableMarkups(false)).filterNullValues().forEach(e=>{t.addAll(this.m_fragmentRow.getMatchingOrthogonalStyles(e))});t.addAll(this.m_fragmentColumn.getMatchingStyles(this.m_fragmentRow.getScopedStyles()));t.addAll(this.m_fragmentRow.getMatchingStyles(this.m_fragmentColumn.getScopedStyles()));t.addAll(this.getSecondaryTableStyles());t.addAll(this.m_fragmentColumn.getSecondaryTableStyles());t.addAll(this.m_fragmentRow.getSecondaryTableStyles());t.addAll(i.getSecondaryTableStyles());t.add(this.m_fragmentRow.getTableStyle());t.add(this.m_fragmentColumn.getTableStyle());t.add(i.getTableStyle());let n=e.XStream.of(t).filter(e=>this.isStyleApplicable(e)).collect(e.XStreamCollector.toList());let r=(t,i)=>e.XIntegerValue.create(t.getPriority()-i.getPriority());n.sortByComparator(e.XComparatorLambda.create(r));e.XStream.of(this.m_fragmentColumn.getMatchingRectangularStyles(true)).filter(e=>this.m_fragmentRow.getMatchingRectangularStyles(true).contains(e)).filterNullValues().forEach(e=>{n.insert(0,e.getStyle())});this.m_prioritizedStylesList=n}return this.m_prioritizedStylesList};e.PivotProxyCell.prototype.getRepeatedRefColumn=function(){return this.m_repeatedRefColumn};e.PivotProxyCell.prototype.getRepeatedRefRow=function(){return this.m_repeatedRefRow};e.PivotProxyCell.prototype.getRepetitiveColumns=function(){return this.m_repetitiveColumns};e.PivotProxyCell.prototype.getRepetitiveRows=function(){return this.m_repetitiveRows};e.PivotProxyCell.prototype.getSortDirection=function(){return this.m_sortDirection};e.PivotProxyCell.prototype.releaseObject=function(){this.m_sortDirection=null;this.m_repetitiveRows=0;this.m_repetitiveColumns=0;this.m_repeatedRefColumn=-1;this.m_repeatedRefRow=-1;this.m_fragmentRow=null;this.m_fragmentColumn=null;this.m_prioritizedStylesList=e.XObjectExt.release(this.m_prioritizedStylesList);e.SacTableCell.prototype.releaseObject.call(this)};e.PivotProxyCell.prototype.setDataCellRef=function(e){this.m_dataCellRef=e};e.PivotProxyCell.prototype.setRepeatedRefColumn=function(e){this.m_repeatedRefColumn=e};e.PivotProxyCell.prototype.setRepeatedRefRow=function(e){this.m_repeatedRefRow=e};e.PivotProxyCell.prototype.setRepetitiveColumns=function(e){this.m_repetitiveColumns=e};e.PivotProxyCell.prototype.setRepetitiveRows=function(e){this.m_repetitiveRows=e};e.PivotProxyCell.prototype.setSortDirection=function(e){this.m_sortDirection=e};e.PivotProxyCell.prototype.setupFragments=function(e,t){this.m_fragmentRow=e;this.m_fragmentColumn=t;this.m_repeatedRefColumn=-1;this.m_repeatedRefRow=-1};e.PivotProxyCell.prototype.setupInternal=function(t,i){e.SacTableCell.prototype.setupInternal.call(this,t,i)};e.OlapDataPrg=function(){};e.OlapDataPrg.prototype=new e.DfShellProgramWithApplication;e.OlapDataPrg.prototype._ff_c="OlapDataPrg";e.OlapDataPrg.OUTPUT="output";e.OlapDataPrg.QUERY="query";e.OlapDataPrg.SYSTEM_NAME="system";e.OlapDataPrg.main=function(){e.KernelNativeModule.getInstance();let t=e.KernelBoot.createByName("olapdata");t.setStringArgument("system","KIW");t.setStringArgument("query","query:[0BICS_C03_BICSTEST_Q0000]");t.setDefaultSyncType(e.SyncType.BLOCKING);t.runFull()};e.OlapDataPrg.prototype.getProgramName=function(){return"olapdata"};e.OlapDataPrg.prototype.newProgram=function(){let t=new e.OlapDataPrg;t.setup();return t};e.OlapDataPrg.prototype.onQueryExecuted=function(t,i,n){if(t.hasErrors()){this.writeToOutput(t.getSummary())}else{let t=i.getClassicResultSet();let n=e.ReferenceGrid.create(t);let r=n.exportToAscii(30);this.writeToOutput(e.XStringUtils.concatenate3("<pre>",r,"</pre>"))}};e.OlapDataPrg.prototype.onQueryManagerCreated=function(e,t,i){if(e.hasErrors()){this.writeToOutput(e.getSummary())}else{this.writeToOutput("Loading Resultset...");t.processQueryExecution(null,this,null)}};e.OlapDataPrg.prototype.prepareProgramMetadata=function(t){t.addMandatoryOption(e.OlapDataPrg.SYSTEM_NAME,"The system name","",e.XValueType.STRING);t.addMandatoryOption(e.OlapDataPrg.QUERY,"The query name","",e.XValueType.STRING);t.addOption(e.OlapDataPrg.OUTPUT,"Output DOM id. If not given, the output is written on the console","",e.XValueType.STRING)};e.OlapDataPrg.prototype.processArguments=function(e){};e.OlapDataPrg.prototype.processConfiguration=function(e){};e.OlapDataPrg.prototype.runMain=function(){this.writeToOutput("Initializing Query Manager...");let t=this.getApplication();let i=this.getArguments();let n=i.getStringByKey(e.OlapDataPrg.SYSTEM_NAME);let r=i.getStringByKey(e.OlapDataPrg.QUERY);let l=e.QueryServiceConfig.createWithDataSourceName(t,n,r);l.processQueryManagerCreation(null,this,null);return false};e.OlapDataPrg.prototype.writeToOutput=function(t){let i=this.getArguments();let n=i.getStringByKey(e.OlapDataPrg.OUTPUT);if(e.XStringUtils.isNotNullAndNotEmpty(n)){e.DocumentEnv.setStringAtId(n,t)}else{this.println(t)}};e.ChartAxisCategoryAnalytic=function(){};e.ChartAxisCategoryAnalytic.prototype=new e.ChartAxisCategory;e.ChartAxisCategoryAnalytic.prototype._ff_c="ChartAxisCategoryAnalytic";e.ChartAxisCategoryAnalytic.createAnalyticCategory=function(t,i,n,r,l,o,s,a){let u=new e.ChartAxisCategoryAnalytic;let p=n.getAxisDomain().getAsCategorial();u.initializeAxis(t,i,p);u.setupForTupleAndDimensionNames(r,l,o,s,a);p.addAxisCategory(u);return u};e.ChartAxisCategoryAnalytic.getKey=function(t,i,n){let r=e.XStream.of(t.getAxisReference().getVisibleComponentsOnAxis()).filter(t=>t.getModelComponentType()===e.OlapComponentType.FIELD&&e.ChartAxisCategoryAnalytic.matchDimensions(i,t.getDimension())).collect(e.XStreamCollector.toList());let l="";if(e.XCollectionUtils.hasElements(r)){l=e.XCollectionUtils.join(e.XStream.of(r).collect(e.XStreamCollector.toListOfString(i=>e.XValueUtil.getString(t.getValueForModelComponent(i).getPlainValue())))," / ")}if(e.notNull(n)){l=e.XStringUtils.concatenate3(l," / ",n)}return l};e.ChartAxisCategoryAnalytic.matchDimensions=function(t,i){return e.XCollectionUtils.contains(t,t=>e.XString.isEqual(t,i.getName()))||i.isUniversalDisplayHierarchyDimension()&&e.XStream.ofString(e.RscMappingUtils.getUdhDimensionNames(i)).allMatch(i=>e.XCollectionUtils.contains(t,t=>e.XString.isEqual(t,i.getString())))};e.ChartAxisCategoryAnalytic.prototype.m_axis=null;e.ChartAxisCategoryAnalytic.prototype.m_cellValueType=null;e.ChartAxisCategoryAnalytic.prototype.m_complexUnit=null;e.ChartAxisCategoryAnalytic.prototype.m_currencyUnit=null;e.ChartAxisCategoryAnalytic.prototype.m_gridTupleCoordinates=null;e.ChartAxisCategoryAnalytic.prototype.m_listTupleIndices=null;e.ChartAxisCategoryAnalytic.prototype.m_numericShift=null;e.ChartAxisCategoryAnalytic.prototype.addAnalyticCategoryElement=function(t){let i=t.getFieldReference().getDimension();let n=i.getText();let r=e.ChartAxisCategoryElementAnalytic.createAnalytic(e.XValueUtil.getString(t.getPlainValue()),t.getFormattedText(),n,this,this.isRepeated(t),this.isSectionEnd(t),this.getDimensionIndex(t),this.getFieldName(t),this.getDimensionMember(t));r.setTotal(t.getDimensionMemberType().isTypeOf(e.OlapComponentType.TOTALS)||t.getDimensionMemberType().isTypeOf(e.MemberType.RESULT));r.setHierarchyLevel(t.getDisplayLevel());let l=t.getDrillState();r.setExpanded(l===e.DrillState.EXPANDED||l===e.DrillState.DRILLED);r.setInHierarchy(t.getDrillState()!==null);if(r.isTotal()&&this.getTotalLevel()===-1){this.setTotalLevel(this.getCategoryElements().size())}this.addElement(r)};e.ChartAxisCategoryAnalytic.prototype.addAnalyticCategoryStructureElement=function(t){let i=e.ChartAxisCategoryElementAnalytic.createAnalytic(t.getName(),t.getText(),"",this,false,false,-1,t.getDimension().getTextField().getName(),t);this.addElement(i)};e.ChartAxisCategoryAnalytic.prototype.addTupleCoordinate=function(e){this.m_gridTupleCoordinates.add(e)};e.ChartAxisCategoryAnalytic.prototype.getAxis=function(){return e.XWeakReferenceUtil.getHardRef(this.m_axis)};e.ChartAxisCategoryAnalytic.prototype.getCellValueType=function(){return this.m_cellValueType};e.ChartAxisCategoryAnalytic.prototype.getComplexUnit=function(){return this.m_complexUnit};e.ChartAxisCategoryAnalytic.prototype.getCurrencyUnit=function(){return this.m_currencyUnit};e.ChartAxisCategoryAnalytic.prototype.getDimensionIndex=function(t){return t.getModelReference().getModelComponentType()===e.OlapComponentType.FIELD?t.getFieldReference().getDimensionIndex():-1};e.ChartAxisCategoryAnalytic.prototype.getDimensionMember=function(t){let i=null;if(t.getModelReference().getModelComponentType()===e.OlapComponentType.FIELD){let n=t;if(n.getDrillGroupReference()!==null){n=n.getDrillGroupReference()}let r=n.getDimensionMemberName();let l=n.getFieldReference().getDimension();let o=n.getDimensionMemberType();if(e.notNull(l)){if(t.getDimensionMemberType().isTypeOf(e.MemberType.RESULT)){i=l.getResultMember(o)}else{i=l.getDimensionMember(r)}}}return i};e.ChartAxisCategoryAnalytic.prototype.getFieldName=function(t){return t.getModelReference().getModelComponentType()===e.OlapComponentType.FIELD?t.getFieldReference().getField().getName():null};e.ChartAxisCategoryAnalytic.prototype.getGridTupleCoordinates=function(){return this.m_gridTupleCoordinates};e.ChartAxisCategoryAnalytic.prototype.getListTupleIndices=function(){return this.m_listTupleIndices};e.ChartAxisCategoryAnalytic.prototype.getNumericShift=function(){return this.m_numericShift};e.ChartAxisCategoryAnalytic.prototype.getOlapTupleElementPairs=function(){let t=e.XList.create();let i=e.XList.create();let n=e.XStream.of(this.getCategoryElements()).map(e=>e.getDimensionMember()).collect(e.XStreamCollector.toList());let r=e.XStream.of(n).collect(e.XStreamCollector.toListOfString(e=>e.getName()));let l=(t,i,n)=>{if(e.notNull(i)){for(let e=0;e<i.size();e++){let r=i.getTupleElementAt(e);if(n.contains(r.getDimensionMember().getName())&&!t.contains(r)){t.add(r)}}}};if(e.XCollectionUtils.hasElements(n)){let o=e.XStream.of(n).map(e=>e.getDimension()).collect(e.XStreamCollector.toSetOfNameObject());if(e.XCollectionUtils.hasElements(o)){e.XCollectionUtils.forEach(this.getOlapTuplePairs(),e=>{l(t,e.getFirstObject(),r);l(i,e.getSecondObject(),r)})}}return e.XPair.create(t,i)};e.ChartAxisCategoryAnalytic.prototype.getOlapTuplePairs=function(){let t=e.XList.create();let i=this.getAxis().getGridContainer().getCollector();let n=i.getRowTuples();let r=i.getColumnTuples();let l=(e,t)=>{let i=t.getInteger();return i>-1&&i<e.size()?e.get(i):null};e.XCollectionUtils.forEach(this.m_gridTupleCoordinates,i=>{t.add(e.XPair.create(l(n,i.getFirstObject()),l(r,i.getSecondObject())))});return t};e.ChartAxisCategoryAnalytic.prototype.getReversedScalingFactor=function(){return e.isNull(this.m_numericShift)?null:e.XIntegerValue.create(-this.m_numericShift.getInteger())};e.ChartAxisCategoryAnalytic.prototype.getUniqueScalingText=function(){return this.m_uniqueScalingText};e.ChartAxisCategoryAnalytic.prototype.getUniqueUnitInfo=function(){return this.m_uniqueUnitInfo};e.ChartAxisCategoryAnalytic.prototype.isRepeated=function(t){return t.getModelReference().getModelComponentType()===e.OlapComponentType.FIELD&&t.isRepeatedMemberName()};e.ChartAxisCategoryAnalytic.prototype.isSectionEnd=function(t){return t.getModelReference().getModelComponentType()===e.OlapComponentType.FIELD&&t.isDimensionSectionEnd()};e.ChartAxisCategoryAnalytic.prototype.obtainTupleCoordinates=function(t,i){this.m_gridTupleCoordinates.addAll(t.getRelevantTupleIndices());this.m_listTupleIndices.add(e.XIntegerValue.create(i))};e.ChartAxisCategoryAnalytic.prototype.releaseObject=function(){this.m_gridTupleCoordinates=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_gridTupleCoordinates);e.ChartAxisCategory.prototype.releaseObject.call(this)};e.ChartAxisCategoryAnalytic.prototype.setupForTupleAndDimensionNames=function(t,i,n,r,l){this.m_gridTupleCoordinates=e.XList.create();this.m_listTupleIndices=e.XList.create();this.m_axis=e.XWeakReferenceUtil.getWeakRef(t.getAxisReference());let o=0;let s;let a=e.XStream.of(t.getAxisReference().getVisibleComponentsOnAxis()).filter(t=>t.getModelComponentType()===e.OlapComponentType.FIELD&&e.ChartAxisCategoryAnalytic.matchDimensions(i,t.getDimension())).collect(e.XStreamCollector.toList());if(e.XCollectionUtils.hasElements(a)){for(;o<a.size();o++){s=t.getValueForModelComponent(a.get(o));this.addAnalyticCategoryElement(s)}}if(e.notNull(n)){if(r&&n.getStructureMember()!==null){this.addAnalyticCategoryStructureElement(n.getStructureMember())}this.m_numericShift=n.getNumericShift();this.m_currencyUnit=n.getCurrencyUnit();this.m_complexUnit=n.getComplexUnit();this.m_cellValueType=n.getCellValueType();this.setUniqueUnitScaleInformation(n.getUniqueUnitScaleInformation());this.setUniqueUnitInfo(n.getUniqueUnitInfo());this.setUniqueScalingText(n.getUniqueScalingText());this.setUniqueDecimalPlaces(n.getUniqueDecimalPlaces());this.setUniqueNumericShift(n.getNumericShift())}this.obtainTupleCoordinates(t,l)};e.PivotProxyColumn=function(){};e.PivotProxyColumn.prototype=new e.PivotProxyAxis;e.PivotProxyColumn.prototype._ff_c="PivotProxyColumn";e.PivotProxyColumn.create=function(t,i){let n=new e.PivotProxyColumn;n.setupWithFragmentAndTable(t,i);n.setup();return n};e.PivotProxyColumn.prototype.m_defaultEmWidth=0;e.PivotProxyColumn.prototype.m_defaultWidth=0;e.PivotProxyColumn.prototype.m_idealWidth=0;e.PivotProxyColumn.prototype.addNewChildColumnAfter=e.noSupport;e.PivotProxyColumn.prototype.addNewChildColumnBefore=e.noSupport;e.PivotProxyColumn.prototype.getColumnsAfter=e.noSupport;e.PivotProxyColumn.prototype.getColumnsBefore=e.noSupport;e.PivotProxyColumn.prototype.getDefaultEmWidth=function(){return this.m_defaultEmWidth};e.PivotProxyColumn.prototype.getIdealWidth=function(){return this.m_idealWidth};e.PivotProxyColumn.prototype.getParentColumn=e.noSupport;e.PivotProxyColumn.prototype.getWidth=function(){let t=this.getMatchingTableMarkups(false);let i=0;let n=0;if(e.XCollectionUtils.hasElements(t)){i=e.XStream.of(t).map(t=>e.XIntegerValue.create(t.getCellWidth())).reduce(e.XIntegerValue.create(0),(t,i)=>e.XIntegerValue.create(e.XMath.max(t.getInteger(),i.getInteger()))).getInteger();n=e.XStream.of(t).map(t=>e.XIntegerValue.create(t.getCellWidthAddition())).reduce(e.XIntegerValue.create(0),(t,i)=>e.XIntegerValue.create(e.XMath.max(t.getInteger(),i.getInteger()))).getInteger()}let r=this.m_fragment;let l=e.XMath.max(i,r.getWidth());return l>0?l:this.m_defaultWidth+n};e.PivotProxyColumn.prototype.isWidthOverwritten=function(){return e.notNull(this.m_fragment)&&this.m_fragment.getWidth()>0};e.PivotProxyColumn.prototype.setDefaultEmWidth=function(e){this.m_defaultEmWidth=e};e.PivotProxyColumn.prototype.setDefaultWidth=function(e){this.m_defaultWidth=e};e.PivotProxyColumn.prototype.setIdealWidth=function(e){this.m_idealWidth=e};e.PivotProxyColumn.prototype.setParentColumn=e.noSupport;e.PivotProxyColumn.prototype.setWidth=function(e){this.m_fragment.setWidth(e)};e.PivotProxyRow=function(){};e.PivotProxyRow.prototype=new e.PivotProxyAxis;e.PivotProxyRow.prototype._ff_c="PivotProxyRow";e.PivotProxyRow.create=function(t,i){let n=new e.PivotProxyRow;n.setupWithFragmentAndTable(t,i);n.setup();return n};e.PivotProxyRow.prototype.m_cells=null;e.PivotProxyRow.prototype.m_changedOnTheFlyUnresponsive=false;e.PivotProxyRow.prototype.m_fixed=false;e.PivotProxyRow.prototype.m_lastHeader=false;e.PivotProxyRow.prototype.addCell=function(e){this.m_cells.add(e)};e.PivotProxyRow.prototype.addNewAnalyticsCell=e.noSupport;e.PivotProxyRow.prototype.addNewAnalyticsCellAt=e.noSupport;e.PivotProxyRow.prototype.addNewCell=function(){return null};e.PivotProxyRow.prototype.addNewChildRowAfter=e.noSupport;e.PivotProxyRow.prototype.addNewChildRowBefore=e.noSupport;e.PivotProxyRow.prototype.addNullCellAt=e.noSupport;e.PivotProxyRow.prototype.getCells=function(){return this.m_cells};e.PivotProxyRow.prototype.getEffectiveHeight=function(){return this.m_fragment.getHeight()+this.m_fragment.getDefaultHeightAddition()};e.PivotProxyRow.prototype.getFragmentRow=function(){return this.m_fragment};e.PivotProxyRow.prototype.getHeight=function(){return this.m_fragment.getHeight()};e.PivotProxyRow.prototype.getParentRow=e.noSupport;e.PivotProxyRow.prototype.getRowsAfter=e.noSupport;e.PivotProxyRow.prototype.getRowsBefore=e.noSupport;e.PivotProxyRow.prototype.heightDiffersFromDefault=function(){return this.m_fragment.heightDiffersFromDefault()};e.PivotProxyRow.prototype.insertNewCellAtWithColumn=e.noSupport;e.PivotProxyRow.prototype.isChangedOnTheFlyUnresponsive=function(){return this.m_changedOnTheFlyUnresponsive};e.PivotProxyRow.prototype.isFixed=function(){return this.m_fixed};e.PivotProxyRow.prototype.isLastHeader=function(){return this.m_lastHeader};e.PivotProxyRow.prototype.removeCellAt=e.noSupport;e.PivotProxyRow.prototype.setChangedOnTheFlyUnresponsive=function(e){this.m_changedOnTheFlyUnresponsive=e};e.PivotProxyRow.prototype.setFixed=function(e){this.m_fixed=e};e.PivotProxyRow.prototype.setHeight=function(e){this.m_fragment.setHeight(e)};e.PivotProxyRow.prototype.setLastHeader=function(e){this.m_lastHeader=e};e.PivotProxyRow.prototype.setParentRow=e.noSupport;e.PivotProxyRow.prototype.setup=function(){e.PivotProxyAxis.prototype.setup.call(this);this.m_cells=e.XList.create()};e.RscGridCollector=function(){};e.RscGridCollector.prototype=new e.DfRsSyncAction;e.RscGridCollector.prototype._ff_c="RscGridCollector";e.RscGridCollector.create=function(t){let i=new e.RscGridCollector;i.setupContainer();i.setupAction(null,null,null,t);i.setGridContainer(e.RscGridContainer.create(t,i));i.m_reEntryProcessors=e.XList.create();i.m_pagingQueue=e.XList.create();return i};e.RscGridCollector.prototype.m_colPadding=0;e.RscGridCollector.prototype.m_columnTuples=null;e.RscGridCollector.prototype.m_dataColumnLimitExceeded=false;e.RscGridCollector.prototype.m_dataRowLimitExceeded=false;e.RscGridCollector.prototype.m_maxColLoad=0;e.RscGridCollector.prototype.m_maxRowLoad=0;e.RscGridCollector.prototype.m_minColFetch=0;e.RscGridCollector.prototype.m_minRowFetch=0;e.RscGridCollector.prototype.m_outdatedResultSetProcessing=false;e.RscGridCollector.prototype.m_pagingQueue=null;e.RscGridCollector.prototype.m_pendingPagingProcessInProgress=false;e.RscGridCollector.prototype.m_pendingReset=false;e.RscGridCollector.prototype.m_pendingSyncType=null;e.RscGridCollector.prototype.m_reEntryProcessors=null;e.RscGridCollector.prototype.m_resultSetContainer=null;e.RscGridCollector.prototype.m_rowPadding=0;e.RscGridCollector.prototype.m_rowTuples=null;e.RscGridCollector.prototype.m_rscGridContainer=null;e.RscGridCollector.prototype.m_scrollWindowMaxCol=0;e.RscGridCollector.prototype.m_scrollWindowMaxRow=0;e.RscGridCollector.prototype.m_scrollWindowMinCol=0;e.RscGridCollector.prototype.m_scrollWindowMinRow=0;e.RscGridCollector.prototype.m_tileCarrier=null;e.RscGridCollector.prototype.m_timerId=null;e.RscGridCollector.prototype.callListener=function(e,t,i,n){t.onGridCollectorFilled(e,e.getGridContainer(),n)};e.RscGridCollector.prototype.cancelSynchronization=function(){if(e.XStringUtils.isNotNullAndNotEmpty(this.m_timerId)){e.XTimeout.clear(this.m_timerId);this.m_timerId=null;this.addInfo(0,"Canceled");e.DfRsSyncAction.prototype.cancelSynchronization.call(this)}};e.RscGridCollector.prototype.checkPendingResets=function(){let t=false;if(!this.isSyncCanceled()&&this.m_pendingReset){let i=this.getSyncState();if(i!==e.SyncState.PROCESSING){if(i.isInSync()){this._resetSyncStateInternal(false);t=true}this.m_pendingReset=false}}return t};e.RscGridCollector.prototype.endSync=function(){if(e.notNull(this.m_resultSetContainer)){let t=this.getMessages();e.XCollectionUtils.forEach(this.m_resultSetContainer.getMessages(),e=>{if(!t.contains(e)){this.addMessage(e)}})}e.DfRsSyncAction.prototype.endSync.call(this)};e.RscGridCollector.prototype.enqueuePaging=function(t,i,n,r,l,o,s,a){this.m_pagingQueue.add(e.RscGridRequestToken.create(t,i,n,r,l,o,s,a))};e.RscGridCollector.prototype.exceedsMinBoundaries=function(e,t,i){return e<1&&t>1||t<0||t>i.getTuplesTotalCount()-1||e>0&&t>e-1};e.RscGridCollector.prototype.executeWindowedRequest=function(e,t,i,n,r,l,o,s){this.m_pendingPagingProcessInProgress=true;this.executeWindowedRequestInternal(e,t,i,n,r,l,o,s)};e.RscGridCollector.prototype.executeWindowedRequestInternal=function(e,t,i,n,r,l,o,s){let a=o<0?0:o;let u=s<0?this.m_minColFetch:s;this.processQueryExecutionWindow(e,t,i,n,r,l-r+1,a,u-a+1);this.m_scrollWindowMinRow=r;this.m_scrollWindowMaxRow=l;this.m_scrollWindowMinCol=o;this.m_scrollWindowMaxCol=s};e.RscGridCollector.prototype.fillAxis=function(e,t,i){let n=0;let r=i.size();let l=t.getTuplesCount();if(e>r){for(let t=r;t<e;t++){i.add(null)}}else if(e<r){for(;n<l&&n+e<r;n++){i.set(n+e,t.getTupleAt(n))}}for(;n<l;n++){i.add(t.getTupleAt(n))}};e.RscGridCollector.prototype.fillTileCollector=function(t){let i=e.XList.create();if(e.notNull(this.m_resultSetContainer)){let n=this.m_resultSetContainer.getSyncState();this.processResultSet(this.m_resultSetContainer,i);let r=this.m_resultSetContainer.getQueryModel().getVisualizationManager().getApplicationSettings();if(r.isSupportCommentDocuments()&&e.XCollectionUtils.hasElements(i)){let r=this.m_resultSetContainer.getQueryModel().getDocumentsInfo().getOrCreateDocumentsStoreService(true);if(e.notNull(r)){e.XCollectionUtils.forEach(i,e=>{r.addToFetchList(e)});r.performRequests(t,this,null)}else{this.endSync();if(n.isNotInSync()){this.resetState()}}}else{this.endSync();if(n.isNotInSync()){this.resetState()}}}else{this.processEmptyResult();this.endSync()}};e.RscGridCollector.prototype.getColumnModelDimensions=function(){return this.getGridContainer().getColumnsAxis().getModelDimensionsOnAxis()};e.RscGridCollector.prototype.getColumnResultSetDimensions=function(){return this.getGridContainer().getColumnsAxis().getResultSetDimensionsOnAxis()};e.RscGridCollector.prototype.getColumnTuples=function(){return this.m_columnTuples};e.RscGridCollector.prototype.getGridContainer=function(){return this.m_rscGridContainer};e.RscGridCollector.prototype.getPagingValue=function(t,i){if(t<=0&&i<=0){return-1}if(t<=0){return i}if(i<=0){return t}return e.XMath.min(i,t)};e.RscGridCollector.prototype.getRecentTileCarrier=function(){return this.m_tileCarrier};e.RscGridCollector.prototype.getRowModelDimensions=function(){return this.getGridContainer().getRowsAxis().getModelDimensionsOnAxis()};e.RscGridCollector.prototype.getRowResultSetDimensions=function(){return this.getGridContainer().getRowsAxis().getResultSetDimensionsOnAxis()};e.RscGridCollector.prototype.getRowTuples=function(){return this.m_rowTuples};e.RscGridCollector.prototype.getVisualizationManager=function(){return this.getActionContext()};e.RscGridCollector.prototype.invalidate=function(){this.cancelSynchronization();this.invalidateInternal()};e.RscGridCollector.prototype.invalidateInternal=function(){this.m_resultSetContainer=null;this.resetState();this.getGridContainer().invalidate()};e.RscGridCollector.prototype.isDataColumnLimitExceeded=function(){return this.m_dataColumnLimitExceeded};e.RscGridCollector.prototype.isDataRowLimitExceeded=function(){return this.m_dataRowLimitExceeded};e.RscGridCollector.prototype.isReadyForExecution=function(){let t=this.getQueryManager().getActiveResultSetContainer();let i=t.getSyncState();return t.isCursorResultSetAvailable()||i!==e.SyncState.PROCESSING};e.RscGridCollector.prototype.loadApplicationSettings=function(){let t=this.getVisualizationManager();if(e.notNull(t)){let e=t.getApplicationSettings();this.m_minColFetch=e.getMinColumnsFetch();this.m_minRowFetch=e.getMinRowsFetch();this.m_maxColLoad=e.getMaxColumns();this.m_maxRowLoad=e.getMaxRows();this.m_rowPadding=e.getTileRowsPadding();this.m_colPadding=e.getTileColumnsPadding()}};e.RscGridCollector.prototype.needsStartOver=function(e){return e.getOffsetColumns()===0&&e.getOffsetRows()===0&&this.exceedsMinBoundaries(this.m_minColFetch,e.getMaxColumns(),this.m_rscGridContainer.getColumnsAxis())&&this.exceedsMinBoundaries(this.m_minRowFetch,e.getMaxRows(),this.m_rscGridContainer.getRowsAxis())};e.RscGridCollector.prototype.onProviderFetch=function(e,t,i){this.endSync()};e.RscGridCollector.prototype.onQueryExecuted=function(t,i,n){this.resetState();if(e.XCollectionUtils.hasElements(this.m_reEntryProcessors)){this.prunePagingQueue();e.XCollectionUtils.forEach(this.m_reEntryProcessors,t=>{this.attachListener(t.getResultSetCollectorListener(),e.ListenerType.SPECIFIC,t.getIdentifier())});if(!this.m_outdatedResultSetProcessing){this.m_reEntryProcessors.clear()}this.processExecution(this.getActiveSyncType(),null,null,null)}else if(this.m_pendingPagingProcessInProgress){this.processExecution(this.m_pendingSyncType,null,null,null)}};e.RscGridCollector.prototype.processEmptyResult=function(){let t=this.getGridContainer();t.fillEmptyTable(this.getQueryModel());this.setTileCarrier(e.RscGridTileCarrier.create(0,0,0,0));this.updateModel();this.m_scrollWindowMaxCol=0;this.m_scrollWindowMinCol=0;this.m_scrollWindowMaxRow=0;this.m_scrollWindowMinRow=0;this.m_pendingPagingProcessInProgress=false;this.reschedulePendingScroll()};e.RscGridCollector.prototype.processExecution=function(t,i,n,r){this.checkPendingResets();let l=this.getQueryManager().getActiveResultSetContainer();let o=l.getSyncState();this.setActiveSyncType(t);this.attachAllListeners(this.getVisualizationManager().getResultSetCollectorListeners());if(!l.isCursorResultSetAvailable()&&o!==e.SyncState.IN_SYNC_WITH_ERROR){if(o===e.SyncState.PROCESSING){if(e.notNull(n)){l.attachListener(n,e.ListenerType.SPECIFIC,r)}l.attachListener(this,e.ListenerType.SPECIFIC,r);this.attachListener(i,e.ListenerType.SPECIFIC,r);this.m_outdatedResultSetProcessing=true;this.m_reEntryProcessors.add(e.RscGridRequestToken.create(t,i,n,r,-1,-1,-1,-1))}if(o===e.SyncState.OUT_OF_SYNC){this.resetPaging();if(e.notNull(n)){l.attachListener(n,e.ListenerType.SPECIFIC,r)}this.m_reEntryProcessors.add(e.RscGridRequestToken.create(t,i,n,r,-1,-1,-1,-1));this.m_outdatedResultSetProcessing=false;this.getQueryManager().processQueryExecution(t,this,r)}}else{this.m_resultSetContainer=l;this.processGridCollectionActionInternal(t,i,n,r)}return this};e.RscGridCollector.prototype.processGridCollectionActionInternal=function(t,i,n,r){e.XCollectionUtils.forEach(this.m_reEntryProcessors,t=>{this.attachListener(t.getResultSetCollectorListener(),e.ListenerType.SPECIFIC,t.getIdentifier())});if(!this.m_outdatedResultSetProcessing){this.m_reEntryProcessors.clear()}this.processSyncAction(t,i,r);if(this.checkPendingResets()){this.processExecution(t,i,n,r)}};e.RscGridCollector.prototype.processQueryExecutionWindow=function(t,i,n,r,l,o,s,a){let u=this.getQueryManager().getConvenienceCommands();if(o>0){u.setOffsetRows(l);u.setMaxRows(o)}if(a>0){u.setOffsetColumns(s);u.setMaxColumns(a)}if(e.notNull(n)){this.getQueryManager().getActiveResultSetContainer().attachListener(n,e.ListenerType.SPECIFIC,r)}this.resetState();this.attachListener(i,e.ListenerType.SPECIFIC,r);this.getQueryManager().processQueryExecution(t,this,r)};e.RscGridCollector.prototype.processResultSet=function(e,t){let i=e.getOffsetRows();let n=e.getOffsetColumns();let r=this.getGridContainer();this.setTileCarrier(r.fillFromResultSetContainer(e,t));this.updateModel();if(i===0&&n===0){this.m_scrollWindowMaxCol=0;this.m_scrollWindowMinCol=0;this.m_scrollWindowMaxRow=0;this.m_scrollWindowMinRow=0}this.m_pendingPagingProcessInProgress=false;this.reschedulePendingScroll()};e.RscGridCollector.prototype.processSynchronization=function(t){if(t===e.SyncType.BLOCKING){this.fillTileCollector(t)}else{this.m_timerId=e.XTimeout.timeout(10,()=>{try{if(this.isSyncCanceled()){this.addInfo(2,"Action has been canceled")}else{this.fillTileCollector(t)}this.m_timerId=null}catch(t){this.addError(1,e.XException.getStackTrace(t,0));this.endSync()}})}return t!==e.SyncType.BLOCKING};e.RscGridCollector.prototype.processTileCollection=function(t,i,n,r,l,o,s,a){this.loadApplicationSettings();let u=false;this.attachAllListeners(this.getVisualizationManager().getResultSetCollectorListeners());if(this.getQueryManager().isValid()&&this.getSyncState()!==e.SyncState.PROCESSING&&(this.getQueryManager().getActiveResultSetContainer().getSyncState().isInSync()||l===0&&s===0)){let p=this.getGridContainer();let c=e.XMath.max(p.getDataRowsTotalCount(),p.getRowsLoadedCount())+(p.totalRowsCountMayBeInaccurate()?this.m_minRowFetch*3:0);if(this.m_maxRowLoad>0){this.m_dataRowLimitExceeded=this.m_maxRowLoad<c;c=e.XMath.min(this.m_maxRowLoad,c)}let g=e.XMath.max(p.getDataColumnsTotalCount(),p.getColumnsLoadedCount())+(p.totalColumnsCountMayBeInaccurate()?this.m_minColFetch*3:0);if(this.m_maxColLoad>0){this.m_dataColumnLimitExceeded=this.m_maxColLoad<g;g=e.XMath.min(this.m_maxColLoad,g)}let m=e.XMath.max(0,e.XMath.min(c-1,l));let f=e.XMath.max(0,e.XMath.min(g-1,s));let C=e.XMath.max(0,e.XMath.min(c-1,o));let d=e.XMath.max(0,e.XMath.min(g-1,a));let y=e.XMath.max(0,m-this.m_rowPadding);let h=e.XMath.min(c-1,C+this.m_rowPadding);let _=e.XMath.max(0,f-this.m_colPadding);let T=e.XMath.min(g-1,d+this.m_colPadding);if(this.m_maxColLoad>0&&this.m_minColFetch>=this.m_maxColLoad){_=0;T=e.XMath.min(this.m_maxColLoad,g)}let S=p.getIndexOfFirstIncompleteTileRowAfter(_,T,y,h);let R=e.XMath.max(0,p.getIndexOfLastIncompleteTileRowBefore(_,T,y,h));let D=p.getIndexOfFirstIncompleteTileColumnAfter(_,T,y,h);let A=e.XMath.max(0,p.getIndexOfLastIncompleteTileColumnBefore(_,T,y,h));if(R>=S&&R-S<this.m_minRowFetch){if(R===h){R=p.getIndexOfLastIncompleteTileRowBefore(D,A,S,e.XMath.min(c-1,S+this.m_minRowFetch))}if(S===y){S=p.getIndexOfFirstIncompleteTileRowAfter(D,A,e.XMath.max(0,R-this.m_minRowFetch),R)}}if(A>=D&&A-D<this.m_minColFetch){if(A===T){A=p.getIndexOfLastIncompleteTileColumnBefore(D,e.XMath.min(g-1,D+this.m_minColFetch),S,R)}if(D===_){D=p.getIndexOfFirstIncompleteTileColumnAfter(e.XMath.max(0,A-this.m_minColFetch),A,S,R)}}u=true;if((S<=h||h===-1)&&R>=y&&S<=R&&(S<c||S===0)&&S>-1&&R>-1&&(D<=T||T===-1)&&A>=_&&D<=A&&(D<g||D===0)&&D>-1&&A>-1){let u=e.XMath.max(S,m-this.m_rowPadding);let p=e.XMath.min(R,o+this.m_rowPadding);let c=e.XMath.max(D,f-this.m_colPadding);let g=e.XMath.min(A,a+this.m_colPadding);if(p>this.m_scrollWindowMaxRow||u<this.m_scrollWindowMinRow||g>this.m_scrollWindowMaxCol||c<this.m_scrollWindowMinCol){if(!this.m_pendingPagingProcessInProgress&&this.isReadyForExecution()){this.m_pendingSyncType=t;this.m_pendingPagingProcessInProgress=true;this.executeWindowedRequestInternal(t,i,n,r,S,R,D,A)}else{this.enqueuePaging(t,i,n,r,l,o,s,a)}}}else{u=false;this.attachListener(i,e.ListenerType.SPECIFIC,r);this.endSync()}}else{this.enqueuePaging(t,i,n,r,l,o,s,a)}return u};e.RscGridCollector.prototype.prunePagingQueue=function(){while(e.XCollectionUtils.hasElements(this.m_pagingQueue)){this.m_pagingQueue.removeAt(0)}};e.RscGridCollector.prototype.releaseObjectInternal=function(){e.XTimeout.clear(this.m_timerId);this.m_timerId=null;this.m_columnTuples=null;this.m_rowTuples=null;this.m_rscGridContainer=e.XObjectExt.release(this.m_rscGridContainer);e.DfRsSyncAction.prototype.releaseObjectInternal.call(this)};e.RscGridCollector.prototype.reschedulePendingScroll=function(){if(e.XCollectionUtils.hasElements(this.m_pagingQueue)){let e=this.m_pagingQueue.get(0);this.m_pagingQueue.removeAt(0);this.processTileCollection(e.getSyncType(),e.getResultSetCollectorListener(),e.getQueryExecutedListener(),e.getIdentifier(),e.getRowStart(),e.getRowEnd(),e.getColStart(),e.getColEnd())}};e.RscGridCollector.prototype.resetPaging=function(){this.loadApplicationSettings();let e=this.getQueryManager();e.setOffsetColumns(0);e.setOffsetRows(0);e.setMaxColumns(this.getPagingValue(this.m_minColFetch,this.m_maxColLoad));e.setMaxRows(this.getPagingValue(this.m_minRowFetch,this.m_maxRowLoad))};e.RscGridCollector.prototype.resetState=function(){let t=this.getSyncState();if(t.isInSync()){this._resetSyncStateInternal(false)}else if(t===e.SyncState.PROCESSING){this.m_pendingReset=true}};e.RscGridCollector.prototype.setGridContainer=function(e){this.m_rscGridContainer=e};e.RscGridCollector.prototype.setTileCarrier=function(e){this.m_tileCarrier=e;this.setData(e)};e.RscGridCollector.prototype.setupContainer=function(){this.m_columnTuples=e.XList.create();this.m_rowTuples=e.XList.create();this.loadApplicationSettings()};e.RscGridCollector.prototype.updateModel=function(){let t=this.getQueryManager().getActiveResultSetContainer();let i=t.isCursorResultSetAvailable()?t.getClassicResultSet():null;if(e.notNull(i)){let e=i.getResultSetContainer();let t=e.getOffsetColumns();let n=e.getOffsetRows();if(this.needsStartOver(e)){this.m_columnTuples.clear();this.m_rowTuples.clear()}this.fillAxis(t,i.getColumnsAxis(),this.m_columnTuples);this.fillAxis(n,i.getRowsAxis(),this.m_rowTuples)}};e.RscListCollector=function(){};e.RscListCollector.prototype=new e.DfRsSyncAction;e.RscListCollector.prototype._ff_c="RscListCollector";e.RscListCollector.create=function(t,i,n){let r=new e.RscListCollector;r.setupAction(null,null,null,t.getVisualizationManager());r.setupWithAxisTypeAndStructures(i,n);r.setGridContainer(t.getGridContainer());return r};e.RscListCollector.prototype.m_leadingAxisType=null;e.RscListCollector.prototype.m_membersMap=null;e.RscListCollector.prototype.m_pendingIdentifier=null;e.RscListCollector.prototype.m_pendingListCollectorListener=null;e.RscListCollector.prototype.m_pendingSyncType=null;e.RscListCollector.prototype.m_rscGridContainer=null;e.RscListCollector.prototype.m_structuresToExtract=null;e.RscListCollector.prototype.callListener=function(e,t,i,n){t.onListCollectorFilled(e,e.getData(),n)};e.RscListCollector.prototype.checkDimensionsFilled=function(t){return!e.XCollectionUtils.hasElements(t)||e.XStream.of(t).allMatch(e=>this.m_membersMap.containsKey(e.getName()))};e.RscListCollector.prototype.checkReadyAndContinue=function(){if(this.checkDimensionsFilled(this.m_structuresToExtract)){this.continueCreationInternally(this.m_pendingSyncType,this.m_pendingListCollectorListener,this.m_pendingIdentifier,this.m_leadingAxisType,this.m_structuresToExtract)}};e.RscListCollector.prototype.continueCreationInternally=function(t,i,n,r,l){let o=r===e.AxisType.COLUMNS?this.m_rscGridContainer.getColumnsAxis():this.m_rscGridContainer.getRowsAxis();let s=r===e.AxisType.COLUMNS?this.m_rscGridContainer.getRowsAxis():this.m_rscGridContainer.getColumnsAxis();let a=e.RscListContainer.createWithMembers(this.m_rscGridContainer,o,s,l,this.m_membersMap);this.setData(a);this.processSyncAction(t,i,n)};e.RscListCollector.prototype.getGridContainer=function(){return this.m_rscGridContainer};e.RscListCollector.prototype.getListContainer=function(){return this.getData()};e.RscListCollector.prototype.getVisualizationManager=function(){return this.m_rscGridContainer.getVisualizationManager()};e.RscListCollector.prototype.gridReadyAndContinue=function(){if(e.XCollectionUtils.hasElements(this.m_structuresToExtract)){for(let e=0;e<this.m_structuresToExtract.size();e++){let t=this.m_structuresToExtract.get(e);let i=t.getSelector().getSelectorRootLevel();t.getSelector().setSelectorInitialDrillLevel(-1);t.processValueHelp(this.getActiveSyncType(),this,t);t.getSelector().setSelectorInitialDrillLevel(i)}}else{this.checkReadyAndContinue()}};e.RscListCollector.prototype.invalidate=function(){};e.RscListCollector.prototype.onGridCollectorFilled=function(t,i,n){if(t.isValid()){this.m_rscGridContainer=i;let t=this.getVisualizationManager().getGridCollector();if(t.isDataRowLimitExceeded()){this.addWarning(e.RscGridCollectorConstants.WARNING_ROW_LIMIT_EXCEEDED_CODE,e.RscGridCollectorConstants.WARNING_ROW_LIMIT_EXCEEDED_MESSAGE)}if(t.isDataColumnLimitExceeded()){this.addWarning(e.RscGridCollectorConstants.WARNING_COLUMN_LIMIT_EXCEEDED_CODE,e.RscGridCollectorConstants.WARNING_COLUMN_LIMIT_EXCEEDED_MESSAGE)}}this.gridReadyAndContinue()};e.RscListCollector.prototype.onValuehelpExecuted=function(t,i,n){e.XCollectionUtils.forEach(t.getMessages(),e=>{this.addMessage(e)});if(e.notNull(i)&&!i.hasErrors()){let i=n;let r=e.XStream.of(t.getData()).collect(e.XStreamCollector.toListOfNameObject());let l=i.getCustomStructureMembers();for(let t=0;t<l.size();t++){let i=l.get(t);let n=i.getName();if(!r.containsKey(n)){r.add(e.QFactory.createMeasureHelpNode(n,i))}}this.m_membersMap.put(i.getName(),r)}this.checkReadyAndContinue()};e.RscListCollector.prototype.processFullListCollection=function(t,i,n,r,l){this.m_pendingIdentifier=l;this.m_pendingSyncType=t;this.m_pendingListCollectorListener=i;if(this.m_rscGridContainer.isComplete()){this.gridReadyAndContinue()}else{let i=this.getVisualizationManager().getSynchronizedGridCollector();this.resetState();let o=i.getSyncState();let s=this.getQueryManager().getActiveResultSetContainer().getSyncState();this.clearMessages();e.XCollectionUtils.forEach(i.getMessages(),e=>{this.addMessage(e)});if(e.notNull(n)){i.attachListener(n,e.ListenerType.SPECIFIC,l)}if(o===e.SyncState.OUT_OF_SYNC&&s!==e.SyncState.PROCESSING){i.processExecution(t,this,r,l)}else if(o.isInSync()){i.processTileCollection(t,this,r,l,0,-1,0,-1)}}return this};e.RscListCollector.prototype.processSynchronization=function(e){return false};e.RscListCollector.prototype.releaseObjectInternal=function(){this.m_rscGridContainer=null;this.m_membersMap=e.XObjectExt.release(this.m_membersMap)};e.RscListCollector.prototype.resetState=function(){};e.RscListCollector.prototype.setGridContainer=function(e){this.m_rscGridContainer=e};e.RscListCollector.prototype.setupWithAxisTypeAndStructures=function(t,i){this.m_membersMap=e.XLinkedHashMapByString.create();this.m_leadingAxisType=t;this.m_structuresToExtract=e.XStream.of(i).filterNullValues().collect(e.XStreamCollector.toList())};e.CellContextGetAction=function(){};e.CellContextGetAction.prototype=new e.DfRsSyncAction;e.CellContextGetAction.prototype._ff_c="CellContextGetAction";e.CellContextGetAction.CELL_CONTEXT_NAME="DF";e.CellContextGetAction.createAndRunAction=function(t,i,n,r){let l=new e.CellContextGetAction;l.setupActionAndRun(t,i,r,n);return l};e.CellContextGetAction.populateDimensionStructure=function(t,i){let n=e.PrStructure.create();n.putString("Name",t.getExternalName());n.putString("TechName",t.getName());n.putBoolean("HierarchyActive",t.isHierarchyActive());n.put("Filter",e.QFilterCartesianListTransformer.create(i).convertMemberFilterList());return n};e.CellContextGetAction.prototype.m_indexInfo=null;e.CellContextGetAction.prototype.m_queryManager=null;e.CellContextGetAction.prototype.callListener=function(e,t,i,n){t.onCellContext(e,i,n)};e.CellContextGetAction.prototype.onQueryExecuted=function(t,i,n){let r=e.PrStructure.create();this.addAllMessages(t);if(t.isValid()){let t=i.getCellContextByName(e.CellContextGetAction.CELL_CONTEXT_NAME);let n=t.getCartesianProduct();if(e.notNull(n)){for(let t=0;t<n.size();t++){let i=n.getCartesianChild(t);let l=i.getDimension();if(e.notNull(l)){let t=l.getExternalName();if(e.XStringUtils.isNullOrEmpty(t)){t=l.getName()}r.put(t,e.CellContextGetAction.populateDimensionStructure(l,i))}}}}this.setData(r);e.XObjectExt.release(this.m_queryManager);this.endSync()};e.CellContextGetAction.prototype.processSynchronization=function(t){try{let i=this.m_indexInfo.getColumnIndex();let n=this.m_indexInfo.getRowIndex();let r=this.m_queryManager.getQueryModel();let l=r.getCellContextManager();let o=e.QFactory.createCellContext(r,e.CellContextGetAction.CELL_CONTEXT_NAME);o.setRowIndex(n);o.setColumnIndex(i);o.setComponentsExternal(true);l.addCellContext(o);this.m_queryManager.setResultSetTransportEnabled(false);this.m_queryManager.setOffsetColumns(i);this.m_queryManager.setOffsetRows(n);this.m_queryManager.setMaxColumns(1);this.m_queryManager.setMaxRows(1);this.m_queryManager.processQueryExecution(t,this,null);return true}catch(t){this.addError(e.ErrorCodes.CELL_CONTEXT_ACTION_FAILED,e.XException.getMessage(t));return false}};e.CellContextGetAction.prototype.releaseObjectInternal=function(){this.m_queryManager=null;this.m_indexInfo=null};e.CellContextGetAction.prototype.setupAction=function(t,i,n,r){e.DfRsSyncAction.prototype.setupAction.call(this,t,i,n,r);this.m_queryManager=r.cloneQueryManager();this.m_indexInfo=n};e.QQuickAction=function(){};e.QQuickAction.prototype=new e.QModelComponent;e.QQuickAction.prototype._ff_c="QQuickAction";e.QQuickActionParameterAbstract=function(){};e.QQuickActionParameterAbstract.prototype=new e.QModelComponent;e.QQuickActionParameterAbstract.prototype._ff_c="QQuickActionParameterAbstract";e.QQuickActionParameterAbstract.prototype.isApplicableSimpleParameters=function(t,i,n,r,l,o,s){return e.XCollectionUtils.size(this.resolveOlapContextValue(t,i,n,r,l,o,s))===1};e.QQuickActionParameterAbstract.prototype.resolveConstantValue=e.noSupport;e.QQuickActionParameterAbstract.prototype.resolveOlapContextValue=function(e,t,i,n,r,l,o){return this.resolveConstantValue()};e.RsVizChartContainer=function(){};e.RsVizChartContainer.prototype=new e.RsVizVisualizationContainer;e.RsVizChartContainer.prototype._ff_c="RsVizChartContainer";e.RsVizChartContainer.create=function(t){let i=new e.RsVizChartContainer;i.setupVisualization(t);i.setupAction(null,null,null,t);return i};e.RsVizChartContainer.prototype.m_visualizationProvidedListener=null;e.RsVizChartContainer.prototype.createVisualizationData=function(){let t=this.getVisualizationDefinition();let i=this.getListCollector();let n=this.getVisualizationData();let r=i.getSyncState().isInSync();if(r){if(e.isNull(n)){n=e.ChartVisualization.create(t.getName(),t.getText())}let r=i.getListContainer();e.OlapVizToChartConverterUtil.processListContainerToChart(r,t,n);this.setVisualizationData(n)}return true};e.RsVizChartContainer.prototype.getCategoryElement=function(t){let i=this.getCategoryInternal(t);let n=i.getFirstObject();let r=i.getSecondObject();let l=e.isNull(r)||e.isNull(n)?null:r.getStructureByKey(e.HighChartConstants.V_CATEGORY_ELEMENT);return e.isNull(l)?null:n.getCategoryElementByName(l.getStringByKey(e.HighChartConstants.V_NAME))};e.RsVizChartContainer.prototype.getCategoryInternal=function(t){let i=this.getVisualizationData();let n=e.isNull(i)||e.isNull(t)?null:t.getStructureByKey(e.HighChartConstants.K_AXIS);let r=e.isNull(n)?null:i.getAxisByName(n.getStringByKey(e.HighChartConstants.V_NAME));let l=e.isNull(r)||e.isNull(n)?null:n.getStructureByKey(e.HighChartConstants.V_CATEGORY);let o=e.isNull(l)?null:r.getAxisDomain().getAsCategorial().getCategoryByName(l.getStringByKey(e.HighChartConstants.V_NAME));return e.XPair.create(o,l)};e.RsVizChartContainer.prototype.getDataPointCategory=function(t){return this.getSpecificCategoryInternal(t,e.HighChartConstants.V_DATA_POINT)};e.RsVizChartContainer.prototype.getDistributionCategory=function(t){return this.getSpecificCategoryInternal(t,e.HighChartConstants.V_SERIES)};e.RsVizChartContainer.prototype.getGroupCategory=function(t){return this.getSpecificCategoryInternal(t,e.HighChartConstants.V_SERIES_GROUP)};e.RsVizChartContainer.prototype.getListCollector=function(){let t=this.getQueryManager().getQueryModel();let i=e.isNull(t)?null:t.getVisualizationManager();let n=this.getVisualizationDefinition();return e.isNull(i)?null:i.getListCollector(n.getLeadingAxis(),n.getStructuresToRemap())};e.RsVizChartContainer.prototype.getSpecificCategoryInternal=function(t,i){let n=e.isNull(t)?null:this.getCategoryInternal(t.getStructureByKey(i));return e.isNull(n)?null:n.getFirstObject()};e.RsVizChartContainer.prototype.isOnCategory=function(t){return e.notNull(t)&&t.containsKey(e.HighChartConstants.K_AXIS)};e.RsVizChartContainer.prototype.isOnDataPoint=function(t){return e.notNull(t)&&t.containsKey(e.HighChartConstants.V_DATA_POINT)};e.RsVizChartContainer.prototype.onGridCollectorFilled=function(e,t,i){};e.RsVizChartContainer.prototype.onListCollectorFilled=function(e,t,i){if(e.isValid()){this.processVisualizationActionInternal(this.getActiveSyncType(),this.m_visualizationProvidedListener,i);this.m_visualizationProvidedListener=null}else{if(e.hasErrors()){let t=e.getErrors().getIterator();while(t.hasNext()){let e=t.next();this.addError(e.getCode(),e.getText())}}this.endSync()}};e.RsVizChartContainer.prototype.processExecution=function(t,i,n){let r=this.getListCollector();if(e.notNull(r)){let l=r.getSyncState();let o=this.getQueryManager().getActiveResultSetContainer().getSyncState();this.setActiveSyncType(t);this.attachAllListeners(this.getVisualizationDefinition().getVisualizationProvidedListeners());if(!r.isValid()&&l===e.SyncState.PROCESSING){throw e.XException.createIllegalStateException("Cannot retrieve the resultset while processing")}else if(o===e.SyncState.OUT_OF_SYNC){this.resetPaging();this.m_visualizationProvidedListener=i;this.clearMessages();e.XCollectionUtils.forEach(r.getMessages(),e=>{this.addMessage(e)});r.processFullListCollection(t,this,null,null,n)}else if(l===e.SyncState.OUT_OF_SYNC){this.m_visualizationProvidedListener=i;r.processFullListCollection(t,this,null,null,n)}else if(r.isSyncCanceled()){this.cancelSynchronization()}else{this.processVisualizationActionInternal(t,i,n)}}return this};e.RsVizChartContainer.prototype.setupVisualization=function(e){this.setVisualizationDefinition(e)};e.RsVizChartContainer.prototype.updateDefinition=function(){};e.RsVizCustomVisualizationContainer=function(){};e.RsVizCustomVisualizationContainer.prototype=new e.RsVizVisualizationContainer;e.RsVizCustomVisualizationContainer.prototype._ff_c="RsVizCustomVisualizationContainer";e.RsVizCustomVisualizationContainer.create=function(t){let i=new e.RsVizCustomVisualizationContainer;i.setupVisualization(t);i.setupAction(null,null,null,t);return i};e.RsVizCustomVisualizationContainer.prototype.createVisualizationData=function(){return true};e.RsVizCustomVisualizationContainer.prototype.onGridCollectorFilled=function(e,t,i){};e.RsVizCustomVisualizationContainer.prototype.setupVisualization=function(e){this.setVisualizationDefinition(e)};e.RsVizCustomVisualizationContainer.prototype.updateDefinition=function(){};e.RsVizTableContainer=function(){};e.RsVizTableContainer.prototype=new e.RsVizVisualizationContainer;e.RsVizTableContainer.prototype._ff_c="RsVizTableContainer";e.RsVizTableContainer.create=function(t){let i=new e.RsVizTableContainer;i.setupVisualization();i.setupAction(null,null,null,t);return i};e.RsVizTableContainer.prototype.m_colPadding=0;e.RsVizTableContainer.prototype.m_columnDimensions=null;e.RsVizTableContainer.prototype.m_columnTuples=null;e.RsVizTableContainer.prototype.m_maxColLoad=0;e.RsVizTableContainer.prototype.m_minColFetch=0;e.RsVizTableContainer.prototype.m_minRowFetch=0;e.RsVizTableContainer.prototype.m_needsGeneralPropReWrite=false;e.RsVizTableContainer.prototype.m_needsOverallRewrite=false;e.RsVizTableContainer.prototype.m_needsReapplyFormatting=false;e.RsVizTableContainer.prototype.m_pagingProcess=null;e.RsVizTableContainer.prototype.m_pagingTileCarrier=null;e.RsVizTableContainer.prototype.m_pendingColScrollPoint=0;e.RsVizTableContainer.prototype.m_pendingColScrollPointEnd=0;e.RsVizTableContainer.prototype.m_pendingIdentifier=null;e.RsVizTableContainer.prototype.m_pendingPaging=false;e.RsVizTableContainer.prototype.m_pendingQueryExecutedListener=null;e.RsVizTableContainer.prototype.m_pendingResultSetCollectorListener=null;e.RsVizTableContainer.prototype.m_pendingRowScrollPoint=0;e.RsVizTableContainer.prototype.m_pendingRowScrollPointEnd=0;e.RsVizTableContainer.prototype.m_pendingSyncType=null;e.RsVizTableContainer.prototype.m_pendingTileCarrier=null;e.RsVizTableContainer.prototype.m_pendingVisualizationProvidedListener=null;e.RsVizTableContainer.prototype.m_pivotTableEngine=null;e.RsVizTableContainer.prototype.m_rowDimensions=null;e.RsVizTableContainer.prototype.m_rowPadding=0;e.RsVizTableContainer.prototype.m_rowTuples=null;e.RsVizTableContainer.prototype.analyzeSelectionStyle=function(t){let i=e.XGuid.getGuid();let n=e.QVizTableStyle.create(this.getContext(),this.getVisualizationDefinition(),i,i);let r=null;if(e.XCollectionUtils.hasElements(t)){let i;let n=t.size();for(i=0;e.isNull(r)&&i<n;i++){r=this.getCellStyleExtInt(t.get(i))}for(;e.notNull(r)&&r.isDefined()&&i<n;i++){r.reduceToCommonSettings(this.getCellStyleExtInt(t.get(i)))}}if(e.notNull(r)){e.OlapVizToPivotConverterUtil.applyVizStyleFromTable(n,r)}return n};e.RsVizTableContainer.prototype.applyRenderingScope=function(t,i,n,r){let l=this.getVisualizationData();if(e.notNull(l)){let o=e.XMath.max(0,t-this.m_rowPadding);let s=i+this.m_rowPadding;let a=e.XMath.max(0,n-this.m_colPadding);let u=r+this.m_colPadding;l.setRenderingScope(o,s,a,u)}};e.RsVizTableContainer.prototype.canResolveAction=function(t,i,n){let r=false;let l=this.getVisualizationData();if(e.notNull(l)){r=l.canResolveAction(t,i,n)}return r};e.RsVizTableContainer.prototype.checkTileComplete=function(t){let i=this.getVisualizationDefinition().getTableViewportPagingSettings();let n=i.rowPagingActive();let r=i.columnPagingActive();let l=this.m_pivotTableEngine.getResultTable();let o=l.getBaseTile();let s=t.getRowMin();let a=t.getColumnMin();let u=t.getRowMax();let p=t.getColumnMax();if(n){if(o.getRowsBundle().getFilledPageCountWithSecurePadding()<=i.getRowPage()){s=u;u=s+this.m_minRowFetch*3}else{let t=l.getEstimatedRowPageInterval(i.getRowPage(),i.getStartRow(),i.getEndRow());s=t.getFirstObject().getInteger();u=e.XMath.max(t.getSecondObject().getInteger(),s+this.m_minRowFetch*3)}}if(r){if(o.getColumnsBundle().getFilledPageCountWithSecurePadding()<=i.getColumnPage()){a=p;p=a+this.m_minColFetch*3}else{let t=l.getEstimatedColumnPageInterval(i.getColumnPage(),i.getStartColumn(),i.getEndColumn());a=t.getFirstObject().getInteger();p=e.XMath.max(t.getSecondObject().getInteger(),a+this.m_minColFetch*3)}}let c=true;if(n||r){let t=this.getGridCollector().getGridContainer();let i=t.getDataRowsTotalCount();let n=t.getDataColumnsTotalCount();if(a<n&&s<i){c=t.isTileComplete(a,p,s,u);if(!c){this.m_pagingTileCarrier=e.RscGridTileCarrier.create(s,u,a,p)}else{this.m_pivotTableEngine.fillProjection(e.RscGridTileCarrier.create(s,e.XMath.min(u,i-1),a,e.XMath.min(p,n-1)))}}}return c};e.RsVizTableContainer.prototype.createDimensionMemberRectangles=function(t,i,n,r){let l=e.XIntegerValue.create(i);let o=e.XIntegerValue.create(n);e.XCollectionUtils.forEach(r,i=>{let n=e.XList.create();n.add(l);n.add(o);n.add(i.getFirstObject());n.add(i.getSecondObject());t.add(n)})};e.RsVizTableContainer.prototype.createVisualizationData=function(){let t=this.getVisualizationDefinition().getApplicationSettings();let i=this.getVisualizationDefinition();let n=this.getQueryModel().getVisualizationManager().getGridCollector();let r=this.getVisualizationData();let l=e.isNull(this.m_pendingTileCarrier)?n.getRecentTileCarrier():this.m_pendingTileCarrier;let o=n.getSyncState().isInSync()&&e.notNull(l);let s=o;if(o){let o=n.hasErrors();let s=n.getGridContainer();let a=false;let u=!this.m_pendingPaging||e.notNull(r)&&e.XCollectionUtils.hasElements(r.getLocalRowList());if(e.isNull(r)||o||l.getColumnMin()===0&&l.getRowMin()===0&&this.exceedsMinBoundaries(this.m_minRowFetch,l.getRowMax(),s.getRowsAxis())&&this.exceedsMinBoundaries(this.m_minColFetch,l.getColumnMax(),s.getColumnsAxis())){this.m_pivotTableEngine=e.PivotTableEngine.create(i,s);r=this.m_pivotTableEngine.getTableProxy();this.m_pivotTableEngine.applyTableDefinition(i);if(t.getWidgetHeight()>0){r.setHeight(t.getWidgetHeight())}if(t.getWidgetWidth()>0){r.setWidth(t.getWidgetWidth())}u=!o;a=true}if(u){if(a){this.m_pivotTableEngine.fillOrigin(l)}else{this.m_pivotTableEngine.fillProjection(l)}let t=this.getVisualizationDefinition().getTableViewportPagingSettings();let i=this.m_pivotTableEngine.getResultTable();if(e.notNull(i)){let e=i.getEstimatedRowPageCount()-1;let n=i.getEstimatedColumnPageCount()-1;this.getActionContext().getTableViewportPagingSettings().validate(e,n);t.validate(e,n)}this.checkTileComplete(l);r.setPartial(!a&&!t.rowPagingActive())}else if(a){this.m_pivotTableEngine.fillOrigin(e.RscGridTileCarrier.create(0,-1,0,-1))}r.setRecentTileCarrier(l);this.updateModel(n);this.setVisualizationData(r)}return s};e.RsVizTableContainer.prototype.decorateColumnCellReferenceScope=function(e,t,i){let n=e.getPreColumnsAmount();if(i<n){this.fillReferenceScope(t,this.getResultTable().getHeaderColumnList().get(i))}else if(i-n<this.getResultTable().getColumnList().size()){this.fillReferenceScope(t,this.getResultTable().getColumnList().get(i-n))}};e.RsVizTableContainer.prototype.decorateRowCellReferenceScope=function(e,t,i){let n=e.getPreRowsAmount();if(i<n){this.fillReferenceScope(t,this.getResultTable().getHeaderRowList().get(i))}else if(i-n<this.getResultTable().getRowList().size()){this.fillReferenceScope(t,this.getResultTable().getRowList().get(i-n))}};e.RsVizTableContainer.prototype.endSync=function(){e.RsVizVisualizationContainer.prototype.endSync.call(this);this.m_pagingProcess=null;if(this.m_pendingPaging){this.m_pendingPaging=false;this.reschedulePendingScroll()}};e.RsVizTableContainer.prototype.exceedsMinBoundaries=function(e,t,i){return e<1&&t>0||t<0||t>i.getTuplesTotalCount()-2||e>0&&t>e-2};e.RsVizTableContainer.prototype.executeWindowedRequest=function(t,i,n,r,l,o,s,a,u){this.m_pendingPaging=false;let p=a<0?0:a;let c=u<0?this.m_minColFetch:u;let g=this.getGridCollector();this.m_pagingProcess=g;g.resetState();g.attachListener(this,e.ListenerType.SPECIFIC,l);this.clearMessages();e.XCollectionUtils.forEach(g.getMessages(),e=>{this.addMessage(e)});if(e.notNull(n)){g.attachListener(n,e.ListenerType.SPECIFIC,l)}this.resetState();this.setReEntryListener(i);let m=g.processTileCollection(t,n,r,l,o,s,p,c);if(!m){this.processSynchronization(t)}return m};e.RsVizTableContainer.prototype.fillReferenceScope=function(t,i){if(e.notNull(i)){let n;let r=i.getPartOfHeaderSectionInfos();if(e.XCollectionUtils.hasElements(r)){for(n=0;n<r.size();n++){let e=r.get(n);if(e.isExactHeaderLevel()){let i=t.addNewHeaderSectionInfo();i.setHeaderName(e.getHeaderName());i.setExactHeaderLevel(true);switch(e.getHeaderLevel()){case 0:i.setDimensionLevel(true);break;case 1:i.setAttributeLevel(true);break;case 2:i.setFieldLevel(true);break;case 3:i.setUniqueUnitsLevel(true);break;default:break}}}}let l=i.getDataPath();let o=e.isNull(l)?null:l.getPathElements();if(e.XCollectionUtils.hasElements(o)){let e=t.addNewAxisPath();for(n=0;n<o.size();n++){let t=o.get(n);if(t.isExactSectionLevel()&&(this.getQueryModel().getDimensionByName(t.getGroupName())!==null||this.getQueryModel().getFieldByName(t.getGroupName())!==null)){let i=e.addNewElement();i.setDimensionName(t.getGroupName());i.addMemberName(t.getSectionNodeName())}}}}};e.RsVizTableContainer.prototype.getAttributeBoundaries=function(t,i,n,r){let l=e.XList.create();if(e.notNull(t)&&t!==t.getDimension().getMainAttribute()&&i>0){let o=t.getDimension();let s=0;let a=null;for(;s<i;s++){a=e.XIntegerValue.create(s);if(e.DfNameObject.areNamesEqual(n(a),o)){break}}let u=null;for(;s<i;s++){a=e.XIntegerValue.create(s);if(!e.DfNameObject.areNamesEqual(n(a),o)){break}let i=this.getAttributeInternal(o,r,a);if(!e.DfNameObject.areNamesEqual(u,i)){if(e.notNull(u)&&e.notNull(i)&&!e.DfNameObject.areNamesEqual(u,t)&&!e.DfNameObject.areNamesEqual(i,t)&&!e.DfNameObject.areNamesEqual(i,o.getMainAttribute())){l.add(a)}u=i}}if(e.notNull(u)&&!e.DfNameObject.areNamesEqual(u,t)){l.add(e.XIntegerValue.create(s))}}return l};e.RsVizTableContainer.prototype.getAttributeInternal=function(t,i,n){let r=t.getFieldByName(i(n));return e.isNull(r)?null:r.getAttribute()};e.RsVizTableContainer.prototype.getCellObjectAt=function(t,i){let n=this.getRowAtIndex(i);let r=null;if(e.notNull(n)){let e=n.getCells();if(t<e.size()){r=e.get(t)}}return r};e.RsVizTableContainer.prototype.getCellStyle=function(t,i){let n=this.getCellObjectAt(t,i);return e.isNull(n)?null:n.getEffectiveStyle()};e.RsVizTableContainer.prototype.getCellStyleExtInt=function(e){return this.getCellStyle(e.getFirstObject().getInteger(),e.getSecondObject().getInteger())};e.RsVizTableContainer.prototype.getColumnAtIndex=function(t){let i=null;let n=this.getResultTable();if(e.notNull(n)){let e=n.getHeaderColumnList();let r=e.size();let l=n.getColumnList();let o=n.getPagedColumnsOffset();if(t>-1&&t<r){i=e.get(t)}else if(t>=r&&t-r+o<l.size()){i=l.get(t-r+o)}}return i};e.RsVizTableContainer.prototype.getColumnAttributeBoundaries=function(e){return this.getAttributeBoundaries(e,this.getLastColumnIndexWithRowHeader()+1,e=>this.getRowDimension(e.getInteger()),e=>this.getRowTupleFieldName(e.getInteger()))};e.RsVizTableContainer.prototype.getColumnDimension=function(t){if(this.isOnHeaderRow(t)){let i=this.getRowAtIndex(t);if(e.notNull(i)){let e=i.getDimensionIndex();return e<0?null:this.m_columnDimensions.get(e)}}return null};e.RsVizTableContainer.prototype.getColumnDimensionInterval=function(t){return this.getDimensionInterval(t,()=>e.XIntegerValue.create(this.getLastRowIndexWithColumnHeader()+1),e=>this.getColumnDimension(e.getInteger()))};e.RsVizTableContainer.prototype.getColumnDimensionStrict=function(e,t){if(e===this.getHeaderColumnCount()-1){return this.getColumnDimension(t)}return null};e.RsVizTableContainer.prototype.getColumnDimensions=function(t,i){let n=e.XList.create();if(this.isOnHeaderRow(i)){for(let r=t;r<=i;r++){let t=this.getRowAtIndex(r);if(e.notNull(t)){let i=t.getDimensionIndex();let r=i<0?null:this.m_columnDimensions.get(i);if(e.notNull(r)&&!n.contains(r)){n.add(r)}}}}return n};e.RsVizTableContainer.prototype.getColumnFieldBoundaries=function(e){return this.getFieldBoundaries(e,this.getLastColumnIndexWithRowHeader()+1,e=>this.getRowDimension(e.getInteger()),e=>this.getRowTupleFieldName(e.getInteger()))};e.RsVizTableContainer.prototype.getColumnIndexForTupleIndex=function(t){return this.getIndexForTupleIndex(t,e=>e.getColumnsBundle(),t=>e.XIntegerValue.create(t.getPreColumnsAmount()))};e.RsVizTableContainer.prototype.getColumnMemberBoundaries=function(e,t,i){return this.getMemberBoundaries(e,t,i+this.getHeaderColumnCount(),e=>this.getColumnTuples(e.getInteger(),e.getInteger()),e=>this.getColumnDimension(e.getInteger()),this.getLastRowIndexWithColumnHeader()+1,this.getHeaderColumnCount())};e.RsVizTableContainer.prototype.getColumnTuple=function(e){let t=this.getColumnTupleIndex(e);if(t>-1&&t<this.m_columnTuples.size()){return this.m_columnTuples.get(t)}return null};e.RsVizTableContainer.prototype.getColumnTupleElement=function(t,i){let n=this.getColumnTupleIndex(t);if(n>-1&&n<this.m_columnTuples.size()&&this.isOnHeaderRow(i)){let t=this.getRowAtIndex(i);if(e.notNull(t)){let i=t.getDimensionIndex();let r=this.m_columnTuples.get(n);if(i>-1&&e.notNull(r)){return r.getTupleElementAt(i)}}}return null};e.RsVizTableContainer.prototype.getColumnTupleElements=function(t,i,n,r){let l=e.XList.create();let o=this.getColumnTupleIndex(t);let s=this.getColumnTupleIndex(i);if(o>-1&&s<this.m_columnTuples.size()&&this.isOnHeaderRow(n)&&this.isOnHeaderRow(r)){for(let t=n;t<=r;t++){let i=this.getRowAtIndex(t);if(e.notNull(i)){let t=i.getDimensionIndex();if(t>-1){for(let i=o;i<=s;i++){let n=this.m_columnTuples.get(i);if(e.notNull(n)){let i=n.getTupleElementAt(t);e.XCollectionUtils.addIfNotContains(l,i,(t,i)=>e.XObjectExt.areEqual(t,i)&&e.XObjectExt.areEqual(t.getFirstTuple(),i.getFirstTuple()))}}}}}}return l};e.RsVizTableContainer.prototype.getColumnTupleFieldName=function(t){if(this.isOnHeaderRow(t)){let i=this.getRowAtIndex(t);if(e.notNull(i)&&e.XStringUtils.isNotNullAndNotEmpty(i.getFieldName())){return i.getFieldName()}}return null};e.RsVizTableContainer.prototype.getColumnTupleFieldNames=function(t,i,n){let r=this.getRowAtIndex(t);let l=this.getRowAtIndex(i);if(!n||e.notNull(r)&&e.notNull(l)&&r.getDimensionIndex()===l.getDimensionIndex()){let n=e.XList.create();for(let r=t;r<=i;r++){let t=this.getRowAtIndex(r);if(e.notNull(t)&&e.XStringUtils.isNotNullAndNotEmpty(t.getFieldName())){n.add(t.getFieldName())}}return n}return null};e.RsVizTableContainer.prototype.getColumnTupleIndex=function(t){let i=-1;let n=this.getColumnAtIndex(t);if(e.notNull(n)){i=n.getTupleIndex()}return i};e.RsVizTableContainer.prototype.getColumnTupleReference=function(t){let i=this.getColumnTupleIndex(t);let n=this.getGridCollector().getGridContainer();if(e.XObjectExt.isValidObject(n)&&i>-1){return n.getColumnTupleAt(i)}return null};e.RsVizTableContainer.prototype.getColumnTuples=function(t,i){let n=e.XList.create();let r=this.getColumnTupleIndex(t);let l=this.getColumnTupleIndex(i);if(r>-1&&l<this.m_columnTuples.size()){for(let e=r;e<=l;e++){n.add(this.m_columnTuples.get(e))}}return n};e.RsVizTableContainer.prototype.getColumnsDimensionBoundaries=function(e){return this.getDimensionBoundaries(e,this.getLastRowIndexWithColumnHeader()+1,e=>this.getColumnDimension(e.getInteger()))};e.RsVizTableContainer.prototype.getColumnsSelectionScope=function(t,i){let n=this.getResultTable();let r=null;if(e.notNull(n)){r=e.QVizCellsReferenceScope.create(this.getContext(),this.getVisualizationDefinition());for(let e=t;e<=i;e++){this.decorateColumnCellReferenceScope(n,r,e)}}return r};e.RsVizTableContainer.prototype.getDimensionBoundaries=function(t,i,n){let r=e.XList.create();let l=e.XIntegerValue.create(0);if(i>0){let o=n(l);if(!e.DfNameObject.areNamesEqual(o,t)){r.add(l)}for(let s=1;s<i;s++){l=e.XIntegerValue.create(s);let i=n(l);if(!e.DfNameObject.areNamesEqual(i,o)){if(!e.DfNameObject.areNamesEqual(o,t)&&!e.DfNameObject.areNamesEqual(i,t)){r.add(l)}o=i}}if(!e.DfNameObject.areNamesEqual(o,t)){r.add(e.XIntegerValue.create(i))}}else{r.add(l);r.add(e.XIntegerValue.create(1))}return r};e.RsVizTableContainer.prototype.getDimensionInterval=function(t,i,n){let r=-1;let l=-1;let o=i().getInteger();for(let i=0;i<o;i++){let o=e.DfNameObject.areNamesEqual(n(e.XIntegerValue.create(i)),t);if(r===-1&&o){r=i}if(r>-1&&!o){l=i-1;break}}if(r>-1&&l===-1){l=o-1}return e.XPair.create(e.XIntegerValue.create(r),e.XIntegerValue.create(l))};e.RsVizTableContainer.prototype.getDocumentId=function(t,i){let n=this.getCellObjectAt(t,i);let r=null;if(e.notNull(n)){r=n.getCommentDocumentId()}return r};e.RsVizTableContainer.prototype.getDpActionCommandPairsFromSimpleContext=function(t,i,n,r,l){let o=this.getVisualizationData();let s=null;if(e.notNull(o)){s=o.getDpActionCommandPairsFromSimpleContext(t,i,n,r,l)}return s};e.RsVizTableContainer.prototype.getFieldBoundaries=function(t,i,n,r){let l=e.XList.create();if(e.notNull(t)&&i>0){let n=t.getDimension();let o=n.getFieldLayoutType();let s=this.getFieldContainerInternal(o,t);let a=0;let u=null;for(;a<i;a++){u=e.XIntegerValue.create(a);if(e.DfNameObject.areNamesEqual(this.getFieldContainerInternal2(n,r,u),s)){break}}let p=null;for(;a<i;a++){u=e.XIntegerValue.create(a);if(!e.DfNameObject.areNamesEqual(this.getFieldContainerInternal2(n,r,u),s)){break}let i=n.getFieldByName(r(u));if(p!==i){if(e.notNull(p)&&e.notNull(i)&&p!==t&&i!==t){l.add(u)}p=i}}if(e.notNull(p)&&p!==t){l.add(e.XIntegerValue.create(a))}}return l};e.RsVizTableContainer.prototype.getFieldContainerInternal=function(t,i){let n;if(t===e.FieldLayoutType.FIELD_BASED){n=i.getDimension()}else{n=i.getAttribute()}return n};e.RsVizTableContainer.prototype.getFieldContainerInternal2=function(t,i,n){let r=t.getFieldByName(i(n));let l;if(e.isNull(r)){l=null}else if(t.getFieldLayoutType()===e.FieldLayoutType.FIELD_BASED){l=r.getDimension()}else{l=r.getAttribute()}return l};e.RsVizTableContainer.prototype.getFilterableColumnDimensionMemberBoundaries=function(e,t){return this.getFilterableDimensionMemberBoundaries(e,t+this.getHeaderColumnCount(),this.getLastRowIndexWithColumnHeader()+1,e=>this.getColumnDimension(e.getInteger()),e=>this.getColumnTuples(e.getInteger(),e.getInteger()))};e.RsVizTableContainer.prototype.getFilterableDimensionMemberBoundaries=function(t,i,n,r,l){let o=e.XList.create();let s=null;let a=-1;let u=this.getQueryModel().getFilter().getDynamicFilter().getCartesianProduct();if(n>0){let p=null;let c=e.XList.create();for(let g=0;g<n;g++){s=e.XIntegerValue.create(g);let n=r(s);if(!e.DfNameObject.areNamesEqual(n,p)){if(a>-1){this.createDimensionMemberRectangles(o,a,g-1,c);c.clear()}a=g;let r=null;let s=-1;let m=false;for(let o=t;o<=i;o++){let t=this.retrieveMemberInternal(n,l,o);let i=n;if(n.isUniversalDisplayHierarchyDimension()){i=e.isNull(t)?null:t.getDrillGroupDimension()}let a=e.isNull(u)||e.isNull(i)?null:u.getCartesianList(i);let p=e.isNull(t)?null:t.getFirstTuple();let g=e.isNull(t)?null:t.getDimensionMember();if(r!==p){if(s>-1&&m){c.add(e.XPair.create(e.XIntegerValue.create(s),e.XIntegerValue.create(o-1)))}s=o;m=e.notNull(g)&&!e.XConstantWithParent.isObjectTypeOf(g.getMemberType(),e.MemberType.RESULT)&&(!i.isHierarchyActive()||e.isNull(a)||e.XStringUtils.isNullOrEmpty(a.getHierarchyName())||!a.isConvertToFlatFilter()&&e.XString.isEqual(a.getHierarchyName(),i.getHierarchyName()));r=p}}if(m){c.add(e.XPair.create(e.XIntegerValue.create(s),e.XIntegerValue.create(i-1)))}p=n}}this.createDimensionMemberRectangles(o,a,n-1,c)}return o};e.RsVizTableContainer.prototype.getFilterableRowDimensionMemberBoundaries=function(e,t){return this.getFilterableDimensionMemberBoundaries(e,t+this.getHeaderRowCount(),this.getLastColumnIndexWithRowHeader()+1,e=>this.getRowDimension(e.getInteger()),e=>this.getRowTuples(e.getInteger(),e.getInteger()))};e.RsVizTableContainer.prototype.getFormattedCellContent=function(t,i){let n=this.getCellObjectAt(t,i);return e.isNull(n)?null:n.getFormatted()};e.RsVizTableContainer.prototype.getGridCollector=function(){return this.getQueryModel().getVisualizationManager().getGridCollector()};e.RsVizTableContainer.prototype.getHeaderCellCoordinates=function(t,i,n,r){let l;let o;let s=e.XList.create();let a=this.getHeaderColumnCount();let u=this.getHeaderRowCount();for(l=0;l<a;l++){for(o=0;o<u;o++){s.add(e.XPair.create(e.XIntegerValue.create(l),e.XIntegerValue.create(o)))}}for(l=0;l<a;l++){for(o=n;o<=r;o++){s.add(e.XPair.create(e.XIntegerValue.create(l),e.XIntegerValue.create(o+u)))}}for(l=t;l<=i;l++){for(o=0;o<u;o++){s.add(e.XPair.create(e.XIntegerValue.create(l+a),e.XIntegerValue.create(o)))}}return s};e.RsVizTableContainer.prototype.getHeaderColumnCount=function(){let t=-1;let i=this.getResultTable();if(e.notNull(i)){t=i.getPreColumnsAmount()}return t};e.RsVizTableContainer.prototype.getHeaderFieldName=function(t,i){let n=this.getVisualizationDefinition().getEffectiveTableHeaderCompactionType();let r;if(n===e.TableHeaderCompactionType.ROW||n===e.TableHeaderCompactionType.PREFERABLY_ROW){r=this.getRowTupleFieldName(t);if(e.isNull(r)){r=this.getColumnTupleFieldName(i)}}else{r=this.getColumnTupleFieldName(i);if(e.isNull(r)){r=this.getRowTupleFieldName(t)}}return r};e.RsVizTableContainer.prototype.getHeaderRowCount=function(){let t=-1;let i=this.getResultTable();if(e.notNull(i)){t=i.getPreRowsAmount()}return t};e.RsVizTableContainer.prototype.getIndexForTupleIndex=function(t,i,n){let r=this.getVisualizationData();let l=e.isNull(r)?null:r.getBaseTile();let o=e.isNull(l)?null:i(l);let s=-1;if(e.notNull(o)){let e=o.getTupleAt(t);s=n(r).getInteger()+e.getDataIndex()}return s};e.RsVizTableContainer.prototype.getLastColumnIndexWithRowHeader=function(){let t=-1;let i=this.getResultTable();if(e.notNull(i)){t=i.getHeaderEndColumn()}return t};e.RsVizTableContainer.prototype.getLastRowIndexWithColumnHeader=function(){let t=-1;let i=this.getResultTable();if(e.notNull(i)){t=i.getHeaderEndRow()}return t};e.RsVizTableContainer.prototype.getMemberBoundaries=function(t,i,n,r,l,o,s){let a=e.XList.create();if(e.notNull(t)){let u=t.getDimension();let p=null;let c=null;for(let l=i;l<=n;l++){let i=e.XIntegerValue.create(l);let n=this.retrieveMemberInternal(u,r,l);let o=e.isNull(n)?null:n.getDimensionMember();let s=e.isNull(n)?null:n.getFirstTuple();if(c!==s){if((e.notNull(s)||e.notNull(c))&&!e.DfNameObject.areNamesEqual(o,t)&&c!==s){a.add(i)}c=s;p=o}}if(e.notNull(p)&&!e.DfNameObject.areNamesEqual(p,t)){a.add(e.XIntegerValue.create(n+1))}if(!e.XCollectionUtils.hasElements(a)){for(let t=0;t<o;t++){if(e.DfNameObject.areNamesEqual(u,l(e.XIntegerValue.create(t)))){a.add(e.XIntegerValue.create(s))}}}}return a};e.RsVizTableContainer.prototype.getMinColEffective=function(t){let i=this.m_minColFetch;if(i<1){i=this.getQueryManager().getMaxColumns()}if(i<1&&e.notNull(t)){i=t.getIndexOfFirstUndefinedColumnAfter(0)}return i};e.RsVizTableContainer.prototype.getMinRowEffective=function(t){let i=this.m_minRowFetch;if(i<1){i=this.getQueryManager().getMaxRows()}if(i<1&&e.notNull(t)){i=t.getIndexOfFirstUndefinedRowAfter(0)}return i};e.RsVizTableContainer.prototype.getPlainCellContent=function(t,i){let n=this.getCellObjectAt(t,i);return e.isNull(n)?null:n.getPlain()};e.RsVizTableContainer.prototype.getResultTable=function(){return this.getVisualizationData()};e.RsVizTableContainer.prototype.getRowAtIndex=function(t){let i=null;let n=this.getResultTable();if(e.notNull(n)){let e=n.getHeaderRowList();let r=e.size();let l=n.getRowList();if(t>-1&&t<r){i=e.get(t)}else if(t>=r&&t-r<l.size()){i=l.get(t-r)}}return i};e.RsVizTableContainer.prototype.getRowAttributeBoundaries=function(e){return this.getAttributeBoundaries(e,this.getLastRowIndexWithColumnHeader()+1,e=>this.getColumnDimension(e.getInteger()),e=>this.getColumnTupleFieldName(e.getInteger()))};e.RsVizTableContainer.prototype.getRowDimension=function(t){if(this.isOnHeaderColumn(t)){let i=this.getColumnAtIndex(t);if(e.notNull(i)){let e=i.getDimensionIndex();return e<0?null:this.m_rowDimensions.get(e)}}return null};e.RsVizTableContainer.prototype.getRowDimensionInterval=function(t){return this.getDimensionInterval(t,()=>e.XIntegerValue.create(this.getLastColumnIndexWithRowHeader()+1),e=>this.getRowDimension(e.getInteger()))};e.RsVizTableContainer.prototype.getRowDimensionStrict=function(e,t){if(t===this.getHeaderRowCount()-1){return this.getRowDimension(e)}return null};e.RsVizTableContainer.prototype.getRowDimensions=function(t,i){let n=e.XList.create();if(this.isOnHeaderColumn(i)){for(let r=t;r<=i;r++){let t=this.getColumnAtIndex(r);if(e.notNull(t)){let i=t.getDimensionIndex();let r=i<0?null:this.m_rowDimensions.get(i);if(e.notNull(r)&&!n.contains(r)){n.add(r)}}}}return n};e.RsVizTableContainer.prototype.getRowFieldBoundaries=function(e){return this.getFieldBoundaries(e,this.getLastRowIndexWithColumnHeader()+1,e=>this.getColumnDimension(e.getInteger()),e=>this.getColumnTupleFieldName(e.getInteger()))};e.RsVizTableContainer.prototype.getRowIndexForTupleIndex=function(t){return this.getIndexForTupleIndex(t,e=>e.getRowsBundle(),t=>e.XIntegerValue.create(t.getPreRowsAmount()))};e.RsVizTableContainer.prototype.getRowMemberBoundaries=function(e,t,i){return this.getMemberBoundaries(e,t,i+this.getHeaderRowCount(),e=>this.getRowTuples(e.getInteger(),e.getInteger()),e=>this.getRowDimension(e.getInteger()),this.getLastColumnIndexWithRowHeader()+1,this.getHeaderRowCount())};e.RsVizTableContainer.prototype.getRowTuple=function(e){let t=this.getRowTupleIndex(e);if(t>-1&&t<this.m_rowTuples.size()){return this.m_rowTuples.get(t)}return null};e.RsVizTableContainer.prototype.getRowTupleElement=function(t,i){let n=this.getRowTupleIndex(i);if(n>-1&&n<this.m_rowTuples.size()&&this.isOnHeaderColumn(t)){let i=this.getColumnAtIndex(t);if(e.notNull(i)){let t=i.getDimensionIndex();let r=this.m_rowTuples.get(n);if(t>-1&&e.notNull(r)){return r.getTupleElementAt(t)}}}return null};e.RsVizTableContainer.prototype.getRowTupleElements=function(t,i,n,r){let l=e.XList.create();let o=this.getRowTupleIndex(n);let s=this.getRowTupleIndex(r);if(o>-1&&s<this.m_rowTuples.size()&&this.isOnHeaderColumn(t)&&this.isOnHeaderColumn(i)){for(let n=t;n<=i;n++){let t=this.getColumnAtIndex(n);if(e.notNull(t)){let i=t.getDimensionIndex();if(i>-1){for(let t=o;t<=s;t++){let n=this.m_rowTuples.get(t);if(e.notNull(n)){let t=n.getTupleElementAt(i);e.XCollectionUtils.addIfNotContains(l,t,(t,i)=>e.XObjectExt.areEqual(t,i)&&e.XObjectExt.areEqual(t.getFirstTuple(),i.getFirstTuple()))}}}}}}return l};e.RsVizTableContainer.prototype.getRowTupleFieldName=function(t){if(this.isOnHeaderColumn(t)){let i=this.getColumnAtIndex(t);if(e.notNull(i)&&e.XStringUtils.isNotNullAndNotEmpty(i.getFieldName())){return i.getFieldName()}}return null};e.RsVizTableContainer.prototype.getRowTupleFieldNames=function(t,i,n){let r=this.getColumnAtIndex(t);let l=this.getColumnAtIndex(i);if(!n||e.notNull(r)&&e.notNull(l)&&r.getDimensionIndex()===l.getDimensionIndex()){let n=e.XList.create();for(let r=t;r<=i;r++){let t=this.getColumnAtIndex(r);if(e.notNull(t)&&e.XStringUtils.isNotNullAndNotEmpty(t.getFieldName())){n.add(t.getFieldName())}}return n}return null};e.RsVizTableContainer.prototype.getRowTupleIndex=function(t){let i=-1;let n=this.getRowAtIndex(t);if(e.notNull(n)){i=n.getTupleIndex()}return i};e.RsVizTableContainer.prototype.getRowTupleReference=function(t){let i=this.getRowTupleIndex(t);let n=this.getGridCollector().getGridContainer();if(e.XObjectExt.isValidObject(n)&&i>-1){return n.getRowTupleAt(i)}return null};e.RsVizTableContainer.prototype.getRowTuples=function(t,i){let n=e.XList.create();let r=this.getRowTupleIndex(t);let l=this.getRowTupleIndex(i);if(r>-1&&l<this.m_rowTuples.size()){for(let e=r;e<=l;e++){n.add(this.m_rowTuples.get(e))}}return n};e.RsVizTableContainer.prototype.getRowsDimensionBoundaries=function(e){return this.getDimensionBoundaries(e,this.getLastColumnIndexWithRowHeader()+1,e=>this.getRowDimension(e.getInteger()))};e.RsVizTableContainer.prototype.getRowsSelectionScope=function(t,i){let n=this.getResultTable();let r=null;if(e.notNull(n)){r=e.QVizCellsReferenceScope.create(this.getContext(),this.getVisualizationDefinition());for(let e=t;e<=i;e++){this.decorateRowCellReferenceScope(n,r,e)}}return r};e.RsVizTableContainer.prototype.getTargetDropAxisType=function(t,i){let n=null;if(i===-1&&t===-1){n=e.AxisType.FREE}else if(i===-1){n=e.AxisType.ROWS}else if(t===-1){n=e.AxisType.COLUMNS}else{let r=this.getCellObjectAt(t,i);if(e.notNull(r)){let t=r.getType();if(t===e.SacTableConstants.CT_EMPTY_AXIS_ROW_HEADER){n=e.AxisType.ROWS}else if(t===e.SacTableConstants.CT_EMPTY_AXIS_COLUMN_HEADER){n=e.AxisType.COLUMNS}}}return n};e.RsVizTableContainer.prototype.getTupleElement=function(t,i){let n=this.getRowTupleElement(t,i);if(e.isNull(n)){n=this.getColumnTupleElement(t,i)}return n};e.RsVizTableContainer.prototype.getTupleElementForDimension=function(t,i,n){let r=t=>e.isNull(t)?null:t.getTupleElementByDimension(n);let l=r(this.getRowTuple(i));if(e.isNull(l)){l=r(this.getColumnTuple(t))}return l};e.RsVizTableContainer.prototype.getUriFromAction=function(t,i,n,r,l){let o=null;let s=this.getVisualizationData();if(e.notNull(s)){o=s.getUriFromAction(t,i,n,r,l)}return o};e.RsVizTableContainer.prototype.hasColumnDimensions=function(){return e.XStream.of(this.m_columnDimensions).anyMatch(t=>{let i=t.getQueryModel().getDimensionByName(t.getName());return i.isUniversalDisplayHierarchyDimension()&&t.getResultSetFields().size()>0||i.getFieldLayoutType()===e.FieldLayoutType.ATTRIBUTE_BASED&&i.getResultSetAttributes().size()>0||i.getFieldLayoutType()===e.FieldLayoutType.FIELD_BASED&&i.getResultSetFields().size()>0})};e.RsVizTableContainer.prototype.hasRowDimensions=function(){return e.XStream.of(this.m_rowDimensions).anyMatch(t=>{let i=t.getQueryModel().getDimensionByName(t.getName());return i.isUniversalDisplayHierarchyDimension()&&t.getResultSetFields().size()>0||i.getFieldLayoutType()===e.FieldLayoutType.ATTRIBUTE_BASED&&i.getResultSetAttributes().size()>0||i.getFieldLayoutType()===e.FieldLayoutType.FIELD_BASED&&i.getResultSetFields().size()>0})};e.RsVizTableContainer.prototype.invalidate=function(){this.resetTileCarrier();e.RsVizVisualizationContainer.prototype.invalidate.call(this)};e.RsVizTableContainer.prototype.isEmptyHeaderCell=function(t,i){let n=this.getCellObjectAt(t,i);return i<this.getHeaderRowCount()&&this.hasRowDimensions()&&t<=this.getHeaderColumnCount()&&e.notNull(n)&&n.getType()===e.SacTableConstants.CT_HEADER};e.RsVizTableContainer.prototype.isOnDataColumn=function(e){return this.getResultTable()!==null&&e>=this.getHeaderColumnCount()};e.RsVizTableContainer.prototype.isOnDataRow=function(e){return this.getResultTable()!==null&&e>=this.getHeaderRowCount()};e.RsVizTableContainer.prototype.isOnHeaderBandRow=function(t){let i=this.getRowAtIndex(t);return e.notNull(i)&&i.isHeaderBand()};e.RsVizTableContainer.prototype.isOnHeaderColumn=function(e){return this.getResultTable()!==null&&this.hasRowDimensions()&&e<this.getHeaderColumnCount()&&e<=this.getLastColumnIndexWithRowHeader()};e.RsVizTableContainer.prototype.isOnHeaderRow=function(e){return this.getResultTable()!==null&&this.hasColumnDimensions()&&e<this.getHeaderRowCount()&&e<=this.getLastRowIndexWithColumnHeader()};e.RsVizTableContainer.prototype.isOnTotalColumns=function(t){let i=this.getColumnAtIndex(t);return e.notNull(i)&&i.isTotalsContext()};e.RsVizTableContainer.prototype.isOnTotalRow=function(t){let i=this.getRowAtIndex(t);return e.notNull(i)&&i.isTotalsContext()};e.RsVizTableContainer.prototype.isUdh=function(t){return e.XCollectionUtils.size(t)===1&&t.get(0).isUniversalDisplayHierarchyDimension()};e.RsVizTableContainer.prototype.isUdhOnColumns=function(){return this.isUdh(this.m_columnDimensions)};e.RsVizTableContainer.prototype.isUdhOnRows=function(){return this.isUdh(this.m_rowDimensions)};e.RsVizTableContainer.prototype.loadApplicationSettings=function(){let t=this.getVisualizationDefinition();if(e.notNull(t)){let e=t.getApplicationSettings();this.m_minColFetch=e.getMinColumnsFetch();this.m_minRowFetch=e.getMinRowsFetch();this.m_maxColLoad=e.getMaxColumns();this.m_rowPadding=e.getTileRowsPadding();this.m_colPadding=e.getTileColumnsPadding()}};e.RsVizTableContainer.prototype.markNeedsGeneralPropReWrite=function(){this.m_needsGeneralPropReWrite=true;this.resetState()};e.RsVizTableContainer.prototype.markNeedsOverallReWrite=function(){this.m_needsGeneralPropReWrite=true;this.m_needsOverallRewrite=true;this.resetState()};e.RsVizTableContainer.prototype.markNeedsReapplyFormatting=function(){this.m_needsGeneralPropReWrite=true;this.m_needsOverallRewrite=true;this.m_needsReapplyFormatting=true;this.resetState();this.resetLocalPaging()};e.RsVizTableContainer.prototype.markPristine=function(){this.m_needsReapplyFormatting=false;this.m_needsOverallRewrite=false;this.m_needsGeneralPropReWrite=false};e.RsVizTableContainer.prototype.needsGeneralPropReWrite=function(){return this.m_needsGeneralPropReWrite};e.RsVizTableContainer.prototype.needsReApplyFormatting=function(){return this.m_needsReapplyFormatting};e.RsVizTableContainer.prototype.needsRecreateRows=function(){return this.m_needsOverallRewrite};e.RsVizTableContainer.prototype.onGridCollectorFilled=function(e,t,i){if(e.isValid()){this.processVisualizationActionInternal(this.getActiveSyncType(),this.m_reEntryListener,i);this.m_reEntryListener=null}else{if(e.hasErrors()){let t=e.getErrors().getIterator();while(t.hasNext()){let e=t.next();this.addError(e.getCode(),e.getText())}}this.endSync()}};e.RsVizTableContainer.prototype.performPendingRequests=function(t,i,n){if(e.notNull(this.m_pagingTileCarrier)){let e=this.m_pagingTileCarrier;this.m_pagingTileCarrier=null;this.processTileVisualization(t,i,this,null,n,e.getRowMin(),e.getRowMax(),e.getColumnMin(),e.getColumnMax())}};e.RsVizTableContainer.prototype.processTileVisualization=function(t,i,n,r,l,o,s,a,u){this.loadApplicationSettings();let p=false;let c=this.getGridCollector();let g=this.getVisualizationData();if(e.notNull(g)&&e.notNull(c)&&c.isValid()&&c.getSyncState()!==e.SyncState.PROCESSING&&this.getSyncState()!==e.SyncState.PROCESSING){let c=g.getDataRowTuplesTotalCount();let m=g.getDataColumnTuplesTotalCount();this.m_pendingRowScrollPoint=-1;this.m_pendingRowScrollPointEnd=-1;this.m_pendingColScrollPoint=-1;this.m_pendingColScrollPointEnd=-1;let f=e.XMath.max(0,e.XMath.min(c-1,o));let C=e.XMath.max(0,e.XMath.min(m-1,a));let d=e.XMath.max(0,e.XMath.min(c-1,s));let y=e.XMath.max(0,e.XMath.min(m-1,u));let h=e.XMath.max(0,f-this.m_rowPadding);let _=e.XMath.min(c-1,d+this.m_rowPadding);let T=e.XMath.max(0,C-this.m_colPadding);let S=e.XMath.min(m-1,y+this.m_colPadding);let R=this.m_minColFetch<this.m_maxColLoad;if(!R){T=0;S=e.XMath.min(this.m_maxColLoad,m-1)}if((T<=S||S===-1)&&(h<=_||_===-1)){p=true;if(e.isNull(this.m_pagingProcess)){this.m_pendingPaging=false;this.m_pendingTileCarrier=e.RscGridTileCarrier.create(h,_,T,S);p=this.executeWindowedRequest(t,i,n,r,l,h,_,T,S)}else{this.m_pendingPaging=true;this.m_pendingRowScrollPoint=f;this.m_pendingRowScrollPointEnd=s;this.m_pendingColScrollPoint=C;this.m_pendingColScrollPointEnd=u;this.m_pendingVisualizationProvidedListener=i;this.m_pendingResultSetCollectorListener=n;this.m_pendingQueryExecutedListener=r;this.m_pendingIdentifier=l;this.m_pendingSyncType=t}}}else{this.m_pendingRowScrollPoint=o;this.m_pendingRowScrollPointEnd=s;this.m_pendingColScrollPoint=a;this.m_pendingColScrollPointEnd=u;this.m_pendingVisualizationProvidedListener=i;this.m_pendingResultSetCollectorListener=n;this.m_pendingQueryExecutedListener=r;this.m_pendingIdentifier=l;this.m_pendingSyncType=t;this.m_pendingPaging=true}return p};e.RsVizTableContainer.prototype.releaseObjectInternal=function(){this.m_columnTuples=e.XObjectExt.release(this.m_columnTuples);this.m_rowTuples=e.XObjectExt.release(this.m_rowTuples);this.m_columnDimensions=e.XObjectExt.release(this.m_columnDimensions);this.m_rowDimensions=e.XObjectExt.release(this.m_rowDimensions);this.m_pivotTableEngine=e.XObjectExt.release(this.m_pivotTableEngine);e.RsVizVisualizationContainer.prototype.releaseObjectInternal.call(this)};e.RsVizTableContainer.prototype.reschedulePendingScroll=function(){this.processTileVisualization(this.m_pendingSyncType,this.m_pendingVisualizationProvidedListener,this.m_pendingResultSetCollectorListener,this.m_pendingQueryExecutedListener,this.m_pendingIdentifier,this.m_pendingRowScrollPoint,this.m_pendingRowScrollPointEnd,this.m_pendingColScrollPoint,this.m_pendingColScrollPointEnd)};e.RsVizTableContainer.prototype.resetLocalPaging=function(){this.loadApplicationSettings();let t=this.getVisualizationData();if(e.notNull(t)){t.setPartial(false)}let i=this.getGridCollector().getGridContainer();if(!e.XObjectExt.isValidObject(i)||this.getGridCollector().getSyncState()===e.SyncState.OUT_OF_SYNC){this.resetPaging()}else{let t=i.getRowsLoadedCount();let n=i.getColumnsLoadedCount();let r=e.XMath.max(i.getDataRowsTotalCount(),t);let l=e.XMath.max(i.getDataColumnsTotalCount(),n);let o=e.XMath.min(r,this.getMinRowEffective(i))-1;let s=e.XMath.min(l,this.getMinColEffective(i))-1;if(this.getGridCollector().getSyncState()!==e.SyncState.PROCESSING){this.m_pendingTileCarrier=e.RscGridTileCarrier.create(0,o,0,s)}}};e.RsVizTableContainer.prototype.resetPaging=function(){this.loadApplicationSettings();let e=this.getQueryManager();e.setOffsetColumns(0);e.setOffsetRows(0);if(this.m_minColFetch>0){e.setMaxColumns(this.m_minColFetch)}if(this.m_minRowFetch>0){e.setMaxRows(this.m_minRowFetch)}};e.RsVizTableContainer.prototype.resetRenderingScope=function(){let t=this.getVisualizationData();if(e.notNull(t)){t.resetRenderingScope()}};e.RsVizTableContainer.prototype.resetTileCarrier=function(){this.m_pendingTileCarrier=null};e.RsVizTableContainer.prototype.retrieveMemberInternal=function(t,i,n){let r=i(e.XIntegerValue.create(n));let l=null;if(e.XCollectionUtils.size(r)===1){let i=r.get(0);let n=i.size();for(let r=0;r<n;r++){let n=i.get(r);if(e.DfNameObject.areNamesEqual(n.getDimension(),t)){l=n}}}return l};e.RsVizTableContainer.prototype.setupVisualization=function(){this.m_columnTuples=e.XList.create();this.m_rowTuples=e.XList.create();this.m_rowDimensions=e.XList.create();this.m_columnDimensions=e.XList.create();this.loadApplicationSettings()};e.RsVizTableContainer.prototype.updateDefinition=function(){this.loadApplicationSettings();if(this.getResultTable()!==null&&this.getVisualizationDefinition()!==null){this.getResultTable().applyTableDefinition(this.getVisualizationDefinition())}};e.RsVizTableContainer.prototype.updateModel=function(t){if(e.notNull(t)){this.m_columnTuples.clear();this.m_columnTuples.addAll(t.getColumnTuples());this.m_columnDimensions.clear();this.m_columnDimensions.addAll(t.getColumnResultSetDimensions());this.m_rowTuples.clear();this.m_rowTuples.addAll(t.getRowTuples());this.m_rowDimensions.clear();this.m_rowDimensions.addAll(t.getRowResultSetDimensions())}this.m_needsGeneralPropReWrite=false;this.m_needsOverallRewrite=false;this.m_needsReapplyFormatting=false};e.QQuickActionParameterConstant=function(){};e.QQuickActionParameterConstant.prototype=new e.QQuickActionParameterAbstract;e.QQuickActionParameterConstant.prototype._ff_c="QQuickActionParameterConstant";e.QQuickActionParameterConstant.create=function(t){let i=new e.QQuickActionParameterConstant;i.m_value=t;return i};e.QQuickActionParameterConstant.prototype.m_value=null;e.QQuickActionParameterConstant.prototype.copyFromInternal=function(t,i){e.QQuickActionParameterAbstract.prototype.copyFromInternal.call(this,t,i);let n=t;this.m_value=n.m_value};e.QQuickActionParameterConstant.prototype.getOlapComponentType=function(){return e.OlapComponentType.QUICK_ACTION_PARAMETER_CONSTANT};e.QQuickActionParameterConstant.prototype.getValue=function(){return this.m_value};e.QQuickActionParameterConstant.prototype.releaseObject=function(){this.m_value=null;e.QQuickActionParameterAbstract.prototype.releaseObject.call(this)};e.QQuickActionParameterConstant.prototype.resolveConstantValue=function(){let t=e.XList.create();t.add(e.XValueAccess.createWithValue(this.m_value));return t};e.QQuickActionParameterConstantList=function(){};e.QQuickActionParameterConstantList.prototype=new e.QQuickActionParameterAbstract;e.QQuickActionParameterConstantList.prototype._ff_c="QQuickActionParameterConstantList";e.QQuickActionParameterConstantList.create=function(){let t=new e.QQuickActionParameterConstantList;t.m_values=e.XList.create();return t};e.QQuickActionParameterConstantList.prototype.m_values=null;e.QQuickActionParameterConstantList.prototype.addValue=function(e){this.m_values.add(e)};e.QQuickActionParameterConstantList.prototype.clearValues=function(){this.m_values.clear()};e.QQuickActionParameterConstantList.prototype.copyFromInternal=function(t,i){e.QQuickActionParameterAbstract.prototype.copyFromInternal.call(this,t,i);let n=t;this.m_values=n.m_values.createListCopy()};e.QQuickActionParameterConstantList.prototype.getOlapComponentType=function(){return e.OlapComponentType.QUICK_ACTION_PARAMETER_CONSTANT_LIST};e.QQuickActionParameterConstantList.prototype.getValues=function(){return this.m_values};e.QQuickActionParameterConstantList.prototype.releaseObject=function(){this.m_values=e.XObjectExt.release(this.m_values);e.QQuickActionParameterAbstract.prototype.releaseObject.call(this)};e.QQuickActionParameterConstantList.prototype.resolveConstantValue=function(){return e.XStream.of(this.m_values).map(t=>e.XValueAccess.createWithValue(t)).collect(e.XStreamCollector.toList())};e.QQuickActionParameterFieldValue=function(){};e.QQuickActionParameterFieldValue.prototype=new e.QQuickActionParameterAbstract;e.QQuickActionParameterFieldValue.prototype._ff_c="QQuickActionParameterFieldValue";e.QQuickActionParameterFieldValue.create=function(t){let i=new e.QQuickActionParameterFieldValue;i.setupModelComponent(t.getContext(),t);return i};e.QQuickActionParameterFieldValue.prototype.m_allowMultiValues=false;e.QQuickActionParameterFieldValue.prototype.m_attributeName=null;e.QQuickActionParameterFieldValue.prototype.m_dimensionName=null;e.QQuickActionParameterFieldValue.prototype.m_fieldName=null;e.QQuickActionParameterFieldValue.prototype.m_matchesExpanded=null;e.QQuickActionParameterFieldValue.prototype.m_matchesLeaves=null;e.QQuickActionParameterFieldValue.prototype.m_matchesTotals=null;e.QQuickActionParameterFieldValue.prototype.m_presentationType=null;e.QQuickActionParameterFieldValue.prototype.m_semanticObject=null;e.QQuickActionParameterFieldValue.prototype.m_semanticType=null;e.QQuickActionParameterFieldValue.prototype.addValueIfMatches=function(t,i){let n=i.getDimensionMember();let r=i.getDrillState();let l=this.getEffectiveField();e.XCollectionUtils.forEach(n.getAllFieldValues(),i=>{let o=i.getField();let s=o.getAttribute();let a=o.getDimension();if(e.DfNameObject.areNamesEqual(a,this.getEffectiveDimension())&&e.QQuickActionParameterResolveUtil.fieldValueParameterMatchesMember(this,n,r)&&(e.DfNameObject.areNamesEqual(o,l)||e.isNull(l)&&(e.XStringUtils.isNullOrEmpty(this.m_attributeName)||e.DfNameObject.areNamesEqual(this.getAttribute(),s)))){t.add(e.XValueAccess.createWithValue(i.getValue()))}})};e.QQuickActionParameterFieldValue.prototype.copyFromInternal=function(t,i){e.QQuickActionParameterAbstract.prototype.copyFromInternal.call(this,t,i);let n=t;this.m_allowMultiValues=n.m_allowMultiValues;this.m_dimensionName=n.m_dimensionName;this.m_attributeName=n.m_attributeName;this.m_fieldName=n.m_fieldName;this.m_presentationType=n.m_presentationType;this.m_semanticType=n.m_semanticType;this.m_semanticObject=n.m_semanticObject;this.m_matchesExpanded=n.m_matchesExpanded;this.m_matchesLeaves=n.m_matchesLeaves;this.m_matchesTotals=n.m_matchesTotals};e.QQuickActionParameterFieldValue.prototype.extractFields=function(t,i){let n=this.getEffectiveDimension();if(e.DfNameObject.areNamesEqual(n,i)){e.XCollectionUtils.addIfNotNull(t,this.getEffectiveField())}};e.QQuickActionParameterFieldValue.prototype.getAttribute=function(){let t=this.getDimension();return e.isNull(t)?null:t.getAttributeByName(this.m_attributeName)};e.QQuickActionParameterFieldValue.prototype.getAttributeName=function(){return this.m_attributeName};e.QQuickActionParameterFieldValue.prototype.getDimension=function(){return this.getQueryModel().getDimensionByName(this.m_dimensionName)};e.QQuickActionParameterFieldValue.prototype.getDimensionName=function(){return this.m_dimensionName};e.QQuickActionParameterFieldValue.prototype.getEffectiveDimension=function(){let t=this.getDimension();if(e.isNull(t)){let i=this.getAttribute();if(e.notNull(i)){t=i.getDimension()}}if(e.isNull(t)){let i=this.getField();if(e.notNull(i)){t=i.getDimension()}}if(e.isNull(t)&&e.XStringUtils.isNotNullAndNotEmpty(this.m_semanticObject)){t=e.XStream.of(this.getQueryModel().getDimensions()).find(t=>e.XString.isEqual(t.getSemanticObject(),this.m_semanticObject)).orElse(null)}return t};e.QQuickActionParameterFieldValue.prototype.getEffectiveField=function(){let t=this.getField();if(e.isNull(t)){t=this.getFieldFromFieldContainer(this.getAttribute())}if(e.isNull(t)){let i=this.getEffectiveDimension();if(e.notNull(i)){t=this.getFieldFromFieldContainer(i.getMainAttribute());if(e.isNull(t)){t=this.getFieldFromFieldContainer(i)}}}return t};e.QQuickActionParameterFieldValue.prototype.getField=function(){return this.getQueryModel().getFieldByName(this.m_fieldName)};e.QQuickActionParameterFieldValue.prototype.getFieldFromFieldContainer=function(t){let i=null;if(e.notNull(t)){if(this.getPresentationType()!==null){i=t.getFieldByPresentationType(this.m_presentationType)}else if(e.XStringUtils.isNotNullAndNotEmpty(this.m_semanticType)){i=t.getFieldBySemanticType(this.m_semanticType)}else{i=t.getKeyField()}}return i};e.QQuickActionParameterFieldValue.prototype.getFieldName=function(){return this.m_fieldName};e.QQuickActionParameterFieldValue.prototype.getMatchesExpanded=function(){return this.m_matchesExpanded};e.QQuickActionParameterFieldValue.prototype.getMatchesLeaves=function(){return this.m_matchesLeaves};e.QQuickActionParameterFieldValue.prototype.getMatchesTotals=function(){return this.m_matchesTotals};e.QQuickActionParameterFieldValue.prototype.getOlapComponentType=function(){return e.OlapComponentType.QUICK_ACTION_PARAMETER_FIELD_VALUE};e.QQuickActionParameterFieldValue.prototype.getPresentationType=function(){return this.m_presentationType};e.QQuickActionParameterFieldValue.prototype.getSemanticObject=function(){return this.m_semanticObject};e.QQuickActionParameterFieldValue.prototype.getSemanticType=function(){return this.m_semanticType};e.QQuickActionParameterFieldValue.prototype.isAllowMultiValues=function(){return this.m_allowMultiValues};e.QQuickActionParameterFieldValue.prototype.releaseObject=function(){this.m_allowMultiValues=false;this.m_dimensionName=null;this.m_attributeName=null;this.m_fieldName=null;this.m_presentationType=null;this.m_semanticType=null;this.m_semanticObject=null;this.m_matchesTotals=null;this.m_matchesLeaves=null;this.m_matchesExpanded=null;e.QQuickActionParameterAbstract.prototype.releaseObject.call(this)};e.QQuickActionParameterFieldValue.prototype.resolveFieldValueFromDrillPath=function(t,i){e.XCollectionUtils.forEach(i,e=>{this.addValueIfMatches(t,e)})};e.QQuickActionParameterFieldValue.prototype.resolveFieldValueFromDrillPaths=function(t,i){e.XCollectionUtils.forEach(i,e=>{this.resolveFieldValueFromDrillPath(t,e)})};e.QQuickActionParameterFieldValue.prototype.resolveOlapContextValue=function(t,i,n,r,l,o,s){let a=e.XList.create();this.resolveFieldValueFromDrillPaths(a,o);this.resolveFieldValueFromDrillPaths(a,s);return a};e.QQuickActionParameterFieldValue.prototype.setAllowMultiValues=function(e){this.m_allowMultiValues=e};e.QQuickActionParameterFieldValue.prototype.setAttribute=function(t){this.m_attributeName=e.isNull(t)?null:t.getName()};e.QQuickActionParameterFieldValue.prototype.setAttributeName=function(e){this.m_attributeName=e};e.QQuickActionParameterFieldValue.prototype.setDimension=function(t){this.m_dimensionName=e.isNull(t)?null:t.getName()};e.QQuickActionParameterFieldValue.prototype.setDimensionName=function(e){this.m_dimensionName=e};e.QQuickActionParameterFieldValue.prototype.setField=function(t){this.m_fieldName=e.isNull(t)?null:t.getName()};e.QQuickActionParameterFieldValue.prototype.setFieldName=function(e){this.m_fieldName=e};e.QQuickActionParameterFieldValue.prototype.setMatchesExpanded=function(e){this.m_matchesExpanded=e};e.QQuickActionParameterFieldValue.prototype.setMatchesLeaves=function(e){this.m_matchesLeaves=e};e.QQuickActionParameterFieldValue.prototype.setMatchesTotals=function(e){this.m_matchesTotals=e};e.QQuickActionParameterFieldValue.prototype.setPresentationType=function(e){this.m_presentationType=e};e.QQuickActionParameterFieldValue.prototype.setSemanticObject=function(e){this.m_semanticObject=e};e.QQuickActionParameterFieldValue.prototype.setSemanticType=function(e){this.m_semanticType=e};e.QQuickActionParameterOlap=function(){};e.QQuickActionParameterOlap.prototype=new e.QQuickActionParameterAbstract;e.QQuickActionParameterOlap.prototype._ff_c="QQuickActionParameterOlap";e.QQuickActionParameterOlap.create=function(t){let i=new e.QQuickActionParameterOlap;i.m_typeToResolve=t;return i};e.QQuickActionParameterOlap.prototype.m_allowsMultipleValues=false;e.QQuickActionParameterOlap.prototype.m_typeToResolve=null;e.QQuickActionParameterOlap.prototype.copyFromInternal=function(t,i){e.QQuickActionParameterAbstract.prototype.copyFromInternal.call(this,t,i);let n=t;this.m_typeToResolve=n.m_typeToResolve;this.m_allowsMultipleValues=n.m_allowsMultipleValues};e.QQuickActionParameterOlap.prototype.getComponentTypeToResolve=function(){return this.m_typeToResolve};e.QQuickActionParameterOlap.prototype.getOlapComponentType=function(){return e.OlapComponentType.QUICK_ACTION_PARAMETER_OLAP};e.QQuickActionParameterOlap.prototype.isAllowMultiValues=function(){return this.m_allowsMultipleValues};e.QQuickActionParameterOlap.prototype.remapNameObjects=function(t){return e.XStream.of(t).map(t=>e.XValueAccess.createWithValue(e.XStringValue.create(t.getName()))).collect(e.XStreamCollector.toList())};e.QQuickActionParameterOlap.prototype.resolveOlapAttributes=function(t,i){let n=null;if(this.m_allowsMultipleValues||e.XCollectionUtils.size(t)===1){n=this.remapNameObjects(t)}if(e.isNull(n)){if(this.m_allowsMultipleValues||e.XCollectionUtils.size(i)===1){n=this.remapNameObjects(e.XStream.of(i).map(e=>e.getAttribute()).collect(e.XStreamCollector.toList()))}}return n};e.QQuickActionParameterOlap.prototype.resolveOlapContextValue=function(t,i,n,r,l,o,s){let a=null;if(this.m_typeToResolve===e.OlapComponentType.QUERY_MODEL){a=e.XCollectionUtils.singletonList(e.XValueAccess.createWithValue(e.XStringValue.create(t.getName())))}else if(this.m_typeToResolve===e.OlapComponentType.AXIS){a=e.XCollectionUtils.singletonList(e.XValueAccess.createWithValue(e.XStringValue.create(i.getName())))}else if(this.m_typeToResolve.isTypeOf(e.OlapComponentType.ABSTRACT_DIMENSION)){a=this.resolveOlapDimensions(n,r,l)}else if(this.m_typeToResolve===e.OlapComponentType.ATTRIBUTE){a=this.resolveOlapAttributes(r,l)}else if(this.m_typeToResolve===e.OlapComponentType.FIELD){a=this.resolveOlapFields(l)}return a};e.QQuickActionParameterOlap.prototype.resolveOlapDimensions=function(t,i,n){let r=null;if(this.m_allowsMultipleValues||e.XCollectionUtils.size(t)===1){r=this.remapNameObjects(t)}if(e.isNull(r)){if(this.m_allowsMultipleValues||e.XCollectionUtils.size(i)===1){r=this.remapNameObjects(e.XStream.of(i).map(e=>e.getDimension()).collect(e.XStreamCollector.toList()))}}if(e.isNull(r)){if(this.m_allowsMultipleValues||e.XCollectionUtils.size(n)===1){r=this.remapNameObjects(e.XStream.of(n).map(e=>e.getDimension()).collect(e.XStreamCollector.toList()))}}return r};e.QQuickActionParameterOlap.prototype.resolveOlapFields=function(t){let i=null;if(this.m_allowsMultipleValues||e.XCollectionUtils.size(t)===1){i=this.remapNameObjects(t)}return i};e.QQuickActionParameterOlap.prototype.setAllowMultiValues=function(e){this.m_allowsMultipleValues=e};e.QQuickActionParameterUrlLiteral=function(){};e.QQuickActionParameterUrlLiteral.prototype=new e.QQuickActionParameterAbstract;e.QQuickActionParameterUrlLiteral.prototype._ff_c="QQuickActionParameterUrlLiteral";e.QQuickActionParameterUrlLiteral.create=function(t){let i=new e.QQuickActionParameterUrlLiteral;i.m_value=t;return i};e.QQuickActionParameterUrlLiteral.prototype.m_value=null;e.QQuickActionParameterUrlLiteral.prototype.copyFromInternal=function(t,i){e.QQuickActionParameterAbstract.prototype.copyFromInternal.call(this,t,i);let n=t;this.m_value=n.m_value};e.QQuickActionParameterUrlLiteral.prototype.getOlapComponentType=function(){return e.OlapComponentType.QUICK_ACTION_PARAMETER_URL_LITERAL};e.QQuickActionParameterUrlLiteral.prototype.getValue=function(){return this.m_value};e.QQuickActionParameterUrlLiteral.prototype.releaseObject=function(){this.m_value=null;e.QQuickActionParameterAbstract.prototype.releaseObject.call(this)};e.QQuickActionParameterUrlLiteral.prototype.resolveConstantValue=function(){let t=e.XList.create();t.add(e.XValueAccess.createWithValue(e.XStringValue.create(this.m_value.getRepresentation())));return t};e.QQuickActionSimple=function(){};e.QQuickActionSimple.prototype=new e.QQuickAction;e.QQuickActionSimple.prototype._ff_c="QQuickActionSimple";e.QQuickActionSimple.prototype.m_parameterList=null;e.QQuickActionSimple.prototype.addConstant=function(t){let i=e.QQuickActionParameterConstant.create(t);this.m_parameterList.add(i);return i};e.QQuickActionSimple.prototype.addConstantList=function(){let t=e.QQuickActionParameterConstantList.create();this.m_parameterList.add(t);return t};e.QQuickActionSimple.prototype.addNewFieldValueParameter=function(){let t=e.QQuickActionParameterFieldValue.create(this);this.m_parameterList.add(t);return t};e.QQuickActionSimple.prototype.addNewLiteralParameter=function(t){let i=e.QQuickActionParameterUrlLiteral.create(t);this.addParameter(i);return i};e.QQuickActionSimple.prototype.addNewOlapParameter=function(t){let i=e.QQuickActionParameterOlap.create(t);this.m_parameterList.add(i);return i};e.QQuickActionSimple.prototype.addParameter=function(e){this.m_parameterList.add(e)};e.QQuickActionSimple.prototype.clearParameters=function(){this.m_parameterList.clear()};e.QQuickActionSimple.prototype.copyFromInternal=function(t,i){e.QQuickAction.prototype.copyFromInternal.call(this,t,i);let n=t;let r=n.getParameterSize();if(r>0){this.clearParameters();let t=n.getParameters();for(let n=0;n<r;n++){let r=t.get(n);let l=r.getOlapComponentType();if(l===e.OlapComponentType.QUICK_ACTION_PARAMETER_OLAP){this.addNewOlapParameter(r.getComponentTypeToResolve()).copyFrom(r,i)}else if(l===e.OlapComponentType.QUICK_ACTION_PARAMETER_URL_LITERAL){this.addNewLiteralParameter(r.getValue())}else if(l===e.OlapComponentType.QUICK_ACTION_PARAMETER_FIELD_VALUE){this.addNewFieldValueParameter().copyFrom(r,i)}else if(l===e.OlapComponentType.QUICK_ACTION_PARAMETER_CONSTANT){this.addConstant(r.getValue()).copyFrom(r,i)}else if(l===e.OlapComponentType.QUICK_ACTION_PARAMETER_CONSTANT_LIST){this.addConstantList().copyFrom(r,i)}}}};e.QQuickActionSimple.prototype.extractFields=function(t,i){e.XStream.of(this.m_parameterList).filterNullValues().filter(t=>t.getOlapComponentType()===e.OlapComponentType.QUICK_ACTION_PARAMETER_FIELD_VALUE).forEach(e=>{e.extractFields(t,i)})};e.QQuickActionSimple.prototype.getParameterSize=function(){return this.m_parameterList.size()};e.QQuickActionSimple.prototype.getParameters=function(){return this.m_parameterList};e.QQuickActionSimple.prototype.isApplicableSimpleParameters=function(t,i,n,r,l,o,s){return e.XStream.of(this.getParameters()).allMatch(e=>e.isApplicableSimpleParameters(t,i,n,r,l,o,s))};e.QQuickActionSimple.prototype.setupQuickAction=function(t,i,n){this.setupModelComponentWithName(t,i,n);this.m_parameterList=e.XList.create()};e.QQuickActionDataProviderCommand=function(){};e.QQuickActionDataProviderCommand.prototype=new e.QQuickActionSimple;e.QQuickActionDataProviderCommand.prototype._ff_c="QQuickActionDataProviderCommand";e.QQuickActionDataProviderCommand.create=function(t,i,n,r){let l=new e.QQuickActionDataProviderCommand;l.m_commandName=r;l.setupQuickAction(t,i,n);return l};e.QQuickActionDataProviderCommand.prototype.m_commandName=null;e.QQuickActionDataProviderCommand.prototype.copyFromInternal=function(t,i){e.QQuickActionSimple.prototype.copyFromInternal.call(this,t,i);this.m_commandName=t.m_commandName};e.QQuickActionDataProviderCommand.prototype.getCommandName=function(){return this.m_commandName};e.QQuickActionDataProviderCommand.prototype.getOlapComponentType=function(){return e.OlapComponentType.QUICK_ACTION_DATAPROVIDER_COMMAND};e.QQuickActionDataProviderCommand.prototype.resolveDpCommandPair=function(t,i,n,r,l,o,s){let a=null;let u=e.XStream.of(this.getParameters()).map(e=>e.resolveOlapContextValue(t,i,n,r,l,o,s)).collect(e.XStreamCollector.toList());if(e.XStream.of(u).allMatch(t=>e.XCollectionUtils.size(t)===1)){a=e.XPair.create(e.XStringValue.create(this.getCommandName()),e.XStream.of(u).collect(e.XStreamCollector.toListOfString(t=>e.XValueUtil.getString(t.get(0).getValue()))))}return a};e.QQuickActionUrl=function(){};e.QQuickActionUrl.prototype=new e.QQuickActionSimple;e.QQuickActionUrl.prototype._ff_c="QQuickActionUrl";e.QQuickActionUrl.create=function(t,i,n,r){let l=new e.QQuickActionUrl;l.setupQuickAction(t,i,n);l.setText(r);return l};e.QQuickActionUrl.prototype.getOlapComponentType=function(){return e.OlapComponentType.QUICK_ACTION_URL};e.QQuickActionUrl.prototype.resolveUri=function(t,i,n,r,l,o,s){let a=null;let u=e.XStream.of(this.getParameters()).map(e=>e.resolveOlapContextValue(t,i,n,r,l,o,s)).collect(e.XStreamCollector.toList());if(e.XStream.of(u).allMatch(t=>e.XCollectionUtils.size(t)===1)){let t=e.XList.create();for(let i=0;i<u.size();i++){let n=this.getParameters().get(i).getOlapComponentType();let r=e.XValueUtil.getString(u.get(i).get(0).getValue());if(n===e.OlapComponentType.QUICK_ACTION_PARAMETER_URL_LITERAL){t.add(r)}else{t.add(e.XHttpUtils.encodeURIComponent(r))}}a=e.XUri.create();a.setUrl(e.XCollectionUtils.join(t,""))}return a};e.QQuickActionManager=function(){};e.QQuickActionManager.prototype=new e.QModelComponentList;e.QQuickActionManager.prototype._ff_c="QQuickActionManager";e.QQuickActionManager.create=function(t,i,n,r){let l=new e.QQuickActionManager;l.setupOlapList(t,i,false,n,e.XCollectionFactory.LINKED_MAP,false);l.setText(r);return l};e.QQuickActionManager.prototype.addNewDataProviderQuickAction=function(t,i){let n=e.QQuickActionDataProvider.create(this.getContext(),this.getQueryModelBase(),t,i);this.add(n);return n};e.QQuickActionManager.prototype.addNewUrlQuickAction=function(t,i){let n=e.QQuickActionUrl.create(this.getContext(),this.getQueryModelBase(),t,i);this.add(n);return n};e.QQuickActionManager.prototype.copyFromInternal=function(t,i){e.QModelComponentList.prototype.copyFromInternal.call(this,t,i);let n=t;let r=n.size();if(r>0){this.clear();for(let t=0;t<r;t++){let r=n.get(t);let l=r.getOlapComponentType();if(l===e.OlapComponentType.QUICK_ACTION_URL){this.addNewUrlQuickAction(r.getName(),r.getText()).copyFrom(r,i)}else if(l===e.OlapComponentType.QUICK_ACTION_DATAPROVIDER){this.addNewDataProviderQuickAction(r.getName(),r.getText()).copyFrom(r,i)}}}};e.QQuickActionManager.prototype.getFieldsForDimension=function(t){let i=e.XSetOfNameObject.create();e.XCollectionUtils.forEach(this,e=>{e.extractFields(i,t)});return i};e.QQuickActionManager.prototype.getOlapComponentType=function(){return e.OlapComponentType.QUICK_ACTION_MANAGER};e.QQuickActionSequence=function(){};e.QQuickActionSequence.prototype=new e.QModelComponentList;e.QQuickActionSequence.prototype._ff_c="QQuickActionSequence";e.QQuickActionSequence.prototype.extractFields=function(t,i){e.XCollectionUtils.forEach(this,e=>{e.extractFields(t,i)})};e.QQuickActionSequence.prototype.getParameters=function(){let t=e.XList.create();e.XCollectionUtils.forEach(this,i=>{e.XCollectionUtils.addAllIfNotPresent(t,i.getParameters())});return t};e.QQuickActionSequence.prototype.isApplicableSimpleParameters=function(t,i,n,r,l,o,s){return e.XStream.of(this).allMatch(e=>e.isApplicableSimpleParameters(t,i,n,r,l,o,s))};e.QQuickActionDataProvider=function(){};e.QQuickActionDataProvider.prototype=new e.QQuickActionSequence;e.QQuickActionDataProvider.prototype._ff_c="QQuickActionDataProvider";e.QQuickActionDataProvider.create=function(t,i,n,r){let l=new e.QQuickActionDataProvider;l.setupOlapList(t,i,false,n,e.XCollectionFactory.LINKED_MAP,false);l.setText(r);return l};e.QQuickActionDataProvider.prototype.addNewDataProviderCommand=function(t,i){let n=e.QQuickActionDataProviderCommand.create(this.getContext(),this.getQueryModelBase(),t,i);this.add(n);return n};e.QQuickActionDataProvider.prototype.copyFromInternal=function(t,i){e.QQuickActionSequence.prototype.copyFromInternal.call(this,t,i);let n=t;let r=n.size();if(r>0){this.clear();for(let e=0;e<r;e++){let t=n.get(e);this.addNewDataProviderCommand(t.getName(),t.getCommandName()).copyFrom(t,i)}}};e.QQuickActionDataProvider.prototype.getOlapComponentType=function(){return e.OlapComponentType.QUICK_ACTION_DATAPROVIDER};e.QQuickActionDataProvider.prototype.resolveDpCommandPairs=function(t,i,n,r,l,o,s){return e.XStream.of(this).map(e=>e.resolveDpCommandPair(t,i,n,r,l,o,s)).collect(e.XStreamCollector.toList())};e.OlapReferenceModule=function(){};e.OlapReferenceModule.prototype=new e.DfModule;e.OlapReferenceModule.prototype._ff_c="OlapReferenceModule";e.OlapReferenceModule.s_module=null;e.OlapReferenceModule.getInstance=function(){if(e.isNull(e.OlapReferenceModule.s_module)){e.DfModule.checkInitialized(e.OlapApiModule.getInstance());e.DfModule.checkInitialized(e.VisualizationUiModule.getInstance());e.OlapReferenceModule.s_module=e.DfModule.startExt(new e.OlapReferenceModule);e.RsVisualizationContainerFactory.setInstance(e.RsVizContainerFactoryImpl.create());e.RscResultsetCollectorFactory.setInstance(e.RscResultsetCollectorFactoryImpl.create());e.ReferenceGridFactory.setInstance(e.ReferenceGridFactoryImpl.create());e.FioriGridFactory.setInstance(e.FioriGridFactoryImpl.create());e.RsGoogleChartConfig.staticSetup();e.ChartRendererFactory.setInstance(e.ChartRendererFactoryImpl.create());e.KpiRendererFactory.setInstance(e.KpiRendererFactoryImpl.create());e.GridRendererFactory.setInstance(e.GridRendererFactoryImpl.create());e.TableClipboardHelperFactory.setInstance(e.SacTableClipboardHelperFactory.create());e.PivotTextWrappingUtil.staticSetup();e.QFactory.setQuickActionManagerFactory((t,i)=>e.QQuickActionManager.create(t,i,null,null));e.DfModule.stopExt(e.OlapReferenceModule.s_module)}return e.OlapReferenceModule.s_module};e.OlapReferenceModule.prototype.getName=function(){return"ff4340.olap.reference"};e.OlapReferenceModule.getInstance();return e});
//# sourceMappingURL=ff4340.olap.reference.js.map