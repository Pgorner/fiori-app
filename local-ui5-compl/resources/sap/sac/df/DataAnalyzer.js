/*
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define("sap/sac/df/DataAnalyzer",["sap/sac/df/controls/MultiDimControlBase","sap/sac/df/types/DataAnalyzerPanelName","sap/sac/df/utils/ListHelper","sap/sac/df/firefly/library"],function(e,t,i,n){var a=e.extend("sap.sac.df.DataAnalyzer",{metadata:{library:"sap.sac.df",properties:{metaPath:{type:"string"},selectedPanel:{type:"sap.sac.df.types.DataAnalyzerPanelName"},showVisualizationType:{type:"boolean",default:false}}},init:function(){if(e.prototype.init){e.prototype.init.apply(this,arguments)}},renderer:e.getMetadata().getRenderer().render,getPluginConfigName:function(){return"DataAnalyzer"},_runProgram:function(){let t=e.prototype._runProgram.apply(this);return t.then(()=>{let e=new n.XPair;e.setFirstObject(n.PrString.createWithValue("UI5ContextMenuProvider"));e.setSecondObject(this._getDefaultContextMenuProvider());this.oHorizonProgram.executeAction(n.HpMenuEngineCommandPlugin.PLUGIN_NAME,n.HpMenuEngineCommandPlugin.REGISTER_DYNAMIC_MENU_ACTIONS_PROVIDER,e)})},_getDefaultContextMenuProvider:function(){return this._getMultiDimModel().getContextMenuProviderRegistry().getDefaultProvider()},_applyPropertiesToPlugin:function(){e.prototype._applyPropertiesToPlugin.apply(this);if(this.oHorizonProgram){const e=n.XNotificationData.create();e.putBoolean(n.AuOlapAxesBuilderViewPlugin.CONFIG_SHOW_DISPLAY_TYPE,this.getShowVisualizationType());this.oHorizonProgram.postLocalNotification(n.AuOlapAxesBuilderViewPlugin.NOTIFICATION_DISPLAY_TYPE_VISIBILITY_CHANGE,e);if(this.getSelectedPanel()){const e=n.XNotificationData.create();e.putString(n.HpSideNavigationDocumentPlugin.NOTIFICATION_DATA_PANEL_KEY,t[this.getSelectedPanel()]);e.putBoolean(n.HpSideNavigationDocumentPlugin.NOTIFICATION_DATA_PANEL_VISIBILITY,true);this.oHorizonProgram.postLocalNotification(n.HpSideNavigationDocumentPlugin.NOTIFICATION_CHANGE_PANEL_VISIBILITY,e)}const i=n.XNotificationData.create();i.putXObject(n.HpSideNavigationDocumentPlugin.NOTIFICATION_DATA_CONSUMER,n.XConsumerHolder.create(this._onPanelChange.bind(this)));this.oHorizonProgram.postLocalNotification(n.HpSideNavigationDocumentPlugin.NOTIFICATION_SET_PANEL_STATE_CHANGE_CONSUMER,i)}},_onPanelChange:function(e){const a=i.arrayFromList(e.getByKey(n.HpSideNavigationDocumentPlugin.PANEL_STATE_OPEN_PANELS_KEY).getKeysAsReadOnlyList());if(a&&a.length>0){const i=a[0];const o=e.getByKey(n.HpSideNavigationDocumentPlugin.PANEL_STATE_OPEN_PANELS_KEY).getBooleanByKey(i);if(o){this.setProperty("selectedPanel",Object.keys(t).find(e=>t[e]===i))}else{this.setProperty("selectedPanel",null)}}}});return a});
//# sourceMappingURL=DataAnalyzer.js.map