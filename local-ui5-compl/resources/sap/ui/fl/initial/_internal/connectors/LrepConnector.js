/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/merge","sap/base/util/restricted/_pick","sap/ui/dom/includeScript","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/interfaces/BaseLoadConnector","sap/ui/fl/Utils"],function(e,t,s,n,i,a){"use strict";const r={DATA:"/flex/data/",MODULES:"/flex/modules/",SETTINGS:"/flex/settings",VARIANTS_AUTHORS:"/variants/authors/"};let o={};return e({},i,{layers:["ALL"],xsrfToken:undefined,settings:undefined,_loadModules(e){return new Promise(function(t,n){s(e,undefined,t,n)})},_addClientInfo(e){var t=a.getUrlParameter("sap-client");if(!e&&t){e={}}if(t){e["sap-client"]=t}},loadFeatures(e){if(this.settings){return Promise.resolve(this.settings)}var t={};this._addClientInfo(t);var s=n.getUrl(r.SETTINGS,e,t);return n.sendRequest(s,"GET",{initialConnector:this}).then(function(e){e.response.isVariantAdaptationEnabled=!!e.response.isPublicLayerAvailable;e.response.isContextSharingEnabled=true;e.response.isLocalResetEnabled=true;return e.response})},loadFlexData(e){if(e.cacheKey==="<NO CHANGES>"){return Promise.resolve()}var s=t(e,["version","allContexts","adaptationId"]);this._addClientInfo(s);n.addSAPLogonLanguageInfo(s);var i;if(e.appDescriptor&&e.appDescriptor["sap.app"]){i=e.appDescriptor["sap.app"].id}if(e.preview){e.reference=e.preview.reference;s.upToLayerType=e.preview.maxLayer}o=s;var a=n.getUrl(r.DATA,e,s);return n.sendRequest(a,"GET",{initialConnector:this,xsrfToken:this.xsrfToken,siteId:e.siteId,cacheable:true,sAppDescriptorId:i}).then(function(t){var i=t.response;if(t.etag){i.cacheKey=t.etag}else if(e.cacheKey){i.cacheKey=e.cacheKey}i.changes=i.changes.concat(i.compVariants||[]);if(i.settings){this.settings=i.settings;this.settings.isVariantAdaptationEnabled=!!this.settings.isPublicLayerAvailable;this.settings.isContextSharingEnabled=true;this.settings.isLocalResetEnabled=true}if(!i.loadModules){return i}var a=n.getUrl(r.MODULES,e,s);return this._loadModules(a).then(function(){return i})}.bind(this))},loadVariantsAuthors(e){const t=n.getUrl(r.VARIANTS_AUTHORS,e,o);return n.sendRequest(t,"GET",{initialConnector:this}).then(function(e){return e.response})}})});
//# sourceMappingURL=LrepConnector.js.map