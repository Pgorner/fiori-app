/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexState/FlexObjectState","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/initial/_internal/FlexConfiguration","sap/ui/fl/initial/_internal/FlexInfoSession","sap/ui/fl/Layer","sap/ui/fl/Utils","sap/ui/VersionInfo"],function(e,t,r,n,o,i,l,a,s,c,p){"use strict";var f={isPersonalized(r){function n(t){e.error(t);return Promise.reject(t)}function l(e){return e.getLayer()===s.USER}function a(e){return e.getFileType()==="change"}function p(e,r,n){var o=r.map(function(e){return e.id||e.getId()});var i=n.getSelector();var l=t.getControlIdBySelector(i,e);return o.includes(l)}function f(e,t){return Array.isArray(e)&&e.length>0?e.includes(t.getChangeType()):true}if(!r.selectors||r.selectors.length===0){return n("At least one control ID has to be provided as a parameter")}var u=r.selectors[0].appComponent||c.getAppComponentForControl(r.selectors[0]);if(!u){return n("App Component could not be determined")}const g=i.getFlexReferenceForControl(u);const d=o.getFlexObjectsDataSelector().get({reference:g}).filter(a).filter(l).filter(p.bind(this,u,r.selectors)).filter(f.bind(this,r.changeTypes));return Promise.resolve(d.length>0)},waitForChanges(e){let t;if(e.element){t=[{selector:e.element}]}else if(e.selectors){t=e.selectors.map(function(e){return{selector:e}})}else if(e.complexSelectors){t=e.complexSelectors}return n.waitForFlexObjectsToBeApplied(t)},isFlexSupported(e){return!!c.getAppComponentForControl(e.element)},hasVariantManagement(e){return r.belongsToVariantManagement(e.element)},getFlexReference(e){return i.getFlexReferenceForControl(e.element)},getConfiguredFlexServices(){return l.getFlexibilityServices()},getFlexVersion(e){return a.getByReference(e.reference)?.version},getContextBasedAdaptationId(e){return a.getByReference(e.reference)?.adaptationId},getContextBasedAdaptationTitle(e){return a.getByReference(e.reference)?.adaptationTitle},async getFeedbackInformation(e){const t=this.getConfiguredFlexServices()[0].connector;const r=c.getAppDescriptor(e.rootControl);const n=await p.load();const o=i.getAppIdFromManifest(r);const l=i.getAppVersionFromManifest(r);return{appId:o,appVersion:l,connector:t,version:n.version}}};return f});
//# sourceMappingURL=FlexRuntimeInfoAPI.js.map