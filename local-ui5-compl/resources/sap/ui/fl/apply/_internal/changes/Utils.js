/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/apply/_internal/changes/descriptor/ApplyStrategyFactory","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/flexObjects/AnnotationChange","sap/ui/fl/apply/_internal/flexObjects/AppDescriptorChange","sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerStorage","sap/ui/fl/requireAsync","sap/ui/fl/Utils"],function(e,t,n,a,r,o,i){"use strict";function l(e,t){if(t||e.hasApplyProcessStarted()){return false}return true}const c={getControlIfTemplateAffected(e,t,n){const a=n.modifier;const r={originalControl:t};const o=e.getOriginalSelector();if(e.getContent().boundAggregation&&o){r.control=a.bySelector(o,n.appComponent,n.view);r.controlType=a.getControlType(r.control);r.bTemplateAffected=true}else{r.control=t;r.controlType=a.getControlType(t);r.bTemplateAffected=false}return r},async getChangeHandler(t){const i=t.changeType||t.flexObject?.getChangeType();if(t.flexObject instanceof a||t.appDescriptorChange){const t=await e.getRuntimeStrategy();try{const e=await t.registry();return await(e[i]?.())}catch(e){t.handleError(e)}}else if(t.flexObject instanceof n||t.annotationChange){return r.getAnnotationChangeHandler({changeType:i})}else if(t.control){const e=await t.modifier.getLibraryName(t.control);const n=await o("sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerRegistration");await n.waitForChangeHandlerRegistration(e);const a=t.layer||t.flexObject?.getLayer();return r.getChangeHandler(i,t.controlType,t.control,t.modifier,a)}return undefined},checkIfDependencyIsStillValid(e,n,a,r){const o=i.getChangeFromChangesMap(a.mChanges,r);if(!o){return false}const c=n.bySelector(o.getSelector(),e);if(!c){return true}const s=t.hasChangeApplyFinishedCustomData(c,o,n);return l(o,s)},isChangeInView(e,t){const n=e.modifier;const a=e.appComponent;const r=t.getSelector();if(!r){return false}if(r.viewSelector){const t=n.getControlIdBySelector(r.viewSelector,a);return t===e.viewId}const o=r.id;if(o){let n;if(t.getSelector().idIsLocal){if(a){n=a.getLocalId(e.viewId)}}else{n=e.viewId}let r=0;let i;do{r=o.indexOf("--",r);i=o.slice(0,r);r++}while(i!==n&&r>0);return i===n}return false}};return c});
//# sourceMappingURL=Utils.js.map