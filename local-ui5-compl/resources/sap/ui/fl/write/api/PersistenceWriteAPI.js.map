{"version":3,"file":"PersistenceWriteAPI.js","names":["sap","ui","define","_omit","Log","JsControlTreeModifier","DescriptorChangeTypes","FlexCustomData","AnnotationChange","FlexState","ManifestUtils","FlexInfoSession","Settings","Condenser","UIChangeManager","FlexObjectManager","Storage","FeaturesAPI","Layer","LayerUtils","Utils","PersistenceWriteAPI","isDescriptorChange","oChange","_getMap","getChangeTypes","includes","changeType","getChangeType","hasChanges","mPropertyBag","includeCtrlVariants","_getUIChanges","then","aChanges","length","hasDirtyChanges","hasDirtyFlexObjects","hasHigherLayerChanges","upToLayer","getCurrentLayer","getFlexObjects","aFlexObjects","filter","oFlexObject","isOverLayer","getLayer","aFilteredFlexObjects","filterHiddenFlexObjects","reference","save","sReference","getFlexReferenceForControl","selector","oFlexInfoSession","getByReference","saveChangeKeepSession","setByReference","saveFlexObjects","getResetAndPublishInfo","oResult","Promise","all","isPublishAvailable","aResetPublishInfo","bHasChanges","bIsPublishAvailable","bIsLayerTransportable","layer","USER","PUBLIC","oFlexInfo","isResetEnabled","isPublishEnabled","allContextsProvided","getFlexInfo","oResponse","undefined","catch","oError","error","message","getResetAndPublishInfoFromSession","oControl","sParameter","JSON","parse","window","sessionStorage","getItem","reset","oAppComponent","getAppComponentForSelector","resetFlexObjects","appComponent","add","sFlexReference","getFlexReferenceForSelector","addSingleFlexObject","store","addDirtyFlexObjects","addDirtyChanges","change","flexObjects","Error","bHasDescriptorChanges","some","map","aUIChanges","aAnnotationChanges","forEach","push","aAddedFlexObjects","aAddedUIChanges","find","oAddedFlexObject","remove","resolve","reject","getId","destroyAppliedCustomData","oElement","bySelector","getSelector","deleteFlexObjects","getChangesWarning","this","bHasChangesFromOtherSystem","isChangeFromOtherSystem","oSettingsInstance","getInstanceOrUndef","isProductiveSystemWithTransports","bHasNoChanges","oChangesWarning","showWarning","warningType","_condense","changes","Array","isArray","condense","currentLayer","invalidateCache","_getAnnotationChanges","control","getAnnotationChanges","setAdaptationLayer","sLayer","adaptationLayer"],"sources":["PersistenceWriteAPI-dbg.js"],"mappings":"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","ignoreList":[]}