/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/restricted/_union","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexState/changes/UIChangesState","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/write/_internal/flexState/changes/UIChangeManager","sap/ui/fl/write/api/ChangesWriteAPI","sap/ui/fl/write/api/PersistenceWriteAPI","sap/ui/fl/Utils"],function(e,t,r,n,a,i,l,u,o){"use strict";var s={};function c(e,t,i){return n.getAllUIChanges(a.getFlexReferenceForControl(e)).filter(function(e){return e.getFileType()==="change"&&e.getLayer()===t&&e.getState()!==r.LifecycleState.DELETED&&e.getVariantReference()===(i||undefined)})}function f(r){var n=o.getAppComponentForControl(r);var a=[];var i=[];function l(t,n){var u=(n||[]).concat(t);if(t===r||a.includes(t)){a=e(a,u);return true}var o=t.getParent();if(i.includes(t)||!o){i=e(i,u);return false}return l(o,u)}function u(e){return e.getDependentSelectorList().map(function(e){return t.bySelector(e,n)}).filter(Boolean).some(function(e){return l(e)})}return u}s.resetChanges=function(e,r){var n=e.slice().reverse();var a=n.map(function(e){var n=t.bySelector(e.getSelector(),r);return function(){e.setQueuedForRevert();return l.revert({change:e,element:n})}});return u.remove({flexObjects:n,selector:r}).then(o.execPromiseQueueSequentially.bind(o,a))};s.restoreChanges=function(e,r){const n=a.getFlexReferenceForControl(r);i.restoreDeletedChanges(n,e,r);const u=e.map(e=>()=>{const n=t.bySelector(e.getSelector(),r);return l.apply({change:e,element:n,modifier:t})});return o.execPromiseQueueSequentially(u)};s.getNestedUIChangesForControl=function(e,t){var r=c(e,t.layer,t.currentVariant);var n=f(e);return r.filter(n)};s.isResetEnabled=function(e,t){var r=c(e,t.layer,t.currentVariant);var n=f(e);return r.some(n)};return s});
//# sourceMappingURL=LocalResetAPI.js.map