/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./BaseFactory","sap/base/Log","sap/base/util/isEmptyObject","sap/ui/core/Lib","sap/ui/integration/cards/actions/CardActions","sap/ui/integration/cards/actions/NavigationAction","sap/ui/integration/library","sap/m/library","sap/ui/integration/cards/NumericHeader","sap/ui/integration/cards/Header","sap/ui/integration/util/Utils","sap/m/Button","sap/m/AvatarImageFitType","sap/f/library"],function(e,t,a,i,s,r,n,o,c,u,p,l,d,f){"use strict";var y=n.CardActionArea;var g=n.CardActionType;var m=o.ButtonType;var T=n.CardDisplayVariant;var b=f.cards.SemanticRole;var v=i.getResourceBundleFor("sap.ui.integration");var S=e.extend("sap.ui.integration.util.HeaderFactory");S.prototype.create=function(e,i){if(a(e)){t.warning("Card sap.card/header entry in the manifest is mandatory","sap.ui.integration.widgets.Card");return null}var r=this._oCard,n=r.getId()+"-header",o=r.getOpener(),l,d;e=this.createBindingInfos(e,r.getBindingNamespaces());if(o&&!r.hasPaginator()){i=this._createCloseButton(e)}if(r.isCompactHeader()){e.type=""}switch(e.type){case"Numeric":d=c.create(n,e,i,r._oIconFormatter);break;default:d=u.create(n,e,i,r._oIconFormatter);break}d.setCard(r);if(e.status&&e.status.text&&e.status.text.format){l=p.getStatusTextBindingInfo(e.status.text.format,d);if(l){d.bindProperty("statusText",l)}}d.setServiceManager(r._oServiceManager);d.setDataProviderFactory(r._oDataProviderFactory);d._setDataConfiguration(e.data);if(r.isTileDisplayVariant()){this._setTileDisplayDefaults(d,e)}else if(r.isHeaderDisplayVariant()){this._setHeaderDisplayDefaults(d,e)}var f=new s({card:r});f.attach({area:y.Header,enabledPropertyName:"interactive",actions:e.actions,control:d});d._oActions=f;if(o){d.setProperty("focusable",false);d.setProperty("headingLevel","1")}if(r.getSemanticRole()===b.ListItem&&!d.isInteractive()){d.setProperty("focusable",false)}return d};S.prototype._createCloseButton=function(e){var t=true;if(e.closeButton&&"visible"in e.closeButton){t=e.closeButton.visible}var a=new l({type:m.Transparent,tooltip:v.getText("CARD_DIALOG_CLOSE_BUTTON"),visible:t,icon:"sap-icon://decline",press:function(){this._oCard.hide()}.bind(this)});return a};S.prototype._setTileDisplayDefaults=function(e,t){e.setProperty("useTileLayout",true);e.setProperty("useTooltips",true);const a=this._oCard;const i=[T.TileFlat,T.TileFlatWide].indexOf(a.getDisplayVariant())>-1;if(!t.titleMaxLines){e.setTitleMaxLines(i?1:2)}if(!t.icon?.fitType){e.setIconFitType(d.Contain)}if(i){e.setIconSize("XS");if(e.isA("sap.f.cards.NumericHeader")){e.setNumberSize("S")}if(!t.subtitleMaxLines){e.setSubtitleMaxLines(1)}}if(e.isA("sap.f.cards.NumericHeader")){e.getSideIndicators().forEach(e=>{e.setProperty("useTooltips",true)})}const s=t.actions&&t.actions[0];const n=s?.parameters?.url;const o=s?.parameters?.target;if(s?.type===g.Navigation&&n){e.applySettings({href:n,target:o||r.DEFAULT_TARGET,interactive:true})}};S.prototype._setHeaderDisplayDefaults=function(e,t){const a=this._oCard;e.setProperty("useTooltips",true);if(a.isCompactHeader()){e.setProperty("useTooltips",true);e.setIconSize("XS");e.setTitleMaxLines(1);e.setSubtitleMaxLines(1);e.setStatusVisible(false);return}const i=a.isSmallHeader();if(!t.titleMaxLines){e.setTitleMaxLines(i?1:2)}if(i){if(e.isA("sap.f.cards.NumericHeader")){e.setIconSize("XS");e.setNumberSize("S")}if(!t.subtitleMaxLines){e.setSubtitleMaxLines(1)}}if(e.isA("sap.f.cards.NumericHeader")){e.getSideIndicators().forEach(e=>{e.setProperty("useTooltips",true)})}};return S});
//# sourceMappingURL=HeaderFactory.js.map