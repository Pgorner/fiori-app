/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/dt/OverlayRegistry","sap/ui/dt/Util","sap/ui/fl/apply/api/FlexRuntimeInfoAPI","sap/ui/fl/write/api/ChangesWriteAPI","sap/ui/fl/write/api/PersistenceWriteAPI","sap/ui/fl/Utils"],function(e,r,t,o,a,n,i){"use strict";return function(l){async function s(e){const r=await fetch(`${sap.ui.require.toUrl(e)}.js`);if(!r.ok){throw new Error(`resource ${e} could not be loaded from ${e}. Check for 'file not found' or parse errors. Reason: ${r.statusText}`)}return r.text()}return{exports:{add(r,s){var c=l.getFlexSettings();if(!c.developerMode){throw t.createError("service.ControllerExtension#add","code extensions can only be created in developer mode","sap.ui.rta")}if(!r){throw t.createError("service.ControllerExtension#add","can't create controller extension without codeRef","sap.ui.rta")}if(!r.endsWith(".js")){throw t.createError("service.ControllerExtension#add","codeRef has to end with 'js'")}var d=e.getElementById(s);var p=i.getAppComponentForControl(d);var u=d.getControllerName&&d.getControllerName()||d.getController()&&d.getController().getMetadata().getName();var g=o.getFlexReference({element:p});var f=g.replace(/\.Component/g,"").replace(/\./g,"/");f+="/changes/";f+=r.replace(/\.js/g,"");var v={codeRef:r,controllerName:u,changeType:"codeExt",layer:c.layer,namespace:c.namespace,reference:g,moduleName:f,generator:"rta.service.ControllerExtension"};var m=a.create({changeSpecificData:v,selector:p});n.add({change:m,selector:p});return m.convertToFileContent()},getTemplate(e){var o=r.getOverlay(e);if(!o){throw t.createError("service.ControllerExtension#getTemplate","no overlay found for the given view ID","sap.ui.rta")}var a=o.getDesignTimeMetadata().getControllerExtensionTemplate();return s(`${a}-dbg`).catch(function(){return s(a)})}}}}});
//# sourceMappingURL=ControllerExtension.js.map