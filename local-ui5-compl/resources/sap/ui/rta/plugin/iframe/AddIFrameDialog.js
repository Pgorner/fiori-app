/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/core/Fragment","sap/ui/core/library","sap/ui/core/Element","sap/ui/core/Lib","sap/ui/model/json/JSONModel","sap/ui/rta/Utils","sap/ui/rta/plugin/iframe/AddIFrameDialogController","sap/ui/fl/util/getContainerUserInfo"],function(e,t,a,i,A,_,n,o,l,r){"use strict";var{ValueState:E}=i;var I=_.getResourceBundleFor("sap.ui.rta");var D="https://help.sap.com/docs/search?q=Embedding%20Content%20%28Object%20Pages%29";var T=`${I.getText("IFRAME_ADDIFRAME_DIALOG_URL_WARNING_TEXT")} (`+`<a href=${D}>${I.getText("IFRAME_ADDIFRAME_DIALOG_URL_WARNING_LINKTEXT")}</a>)`;var s={dialogTitle:I.getText("IFRAME_ADDIFRAME_DIALOG_TITLE"),dialogCreateTitle:I.getText("IFRAME_ADDIFRAME_DIALOG_TITLE"),dialogUpdateTitle:I.getText("IFRAME_ADDIFRAME_DIALOG_UPDATE_TITLE"),sizeTitle:I.getText("IFRAME_ADDIFRAME_DIALOG_SIZE_TITLE"),widthLabel:I.getText("IFRAME_ADDIFRAME_DIALOG_WIDTH_LABEL"),widthUnitLabel:I.getText("IFRAME_ADDIFRAME_DIALOG_WIDTH_UNITLABEL"),heightLabel:I.getText("IFRAME_ADDIFRAME_DIALOG_HEIGHT_LABEL"),heightUnitLabel:I.getText("IFRAME_ADDIFRAME_DIALOG_HEIGHT_UNITLABEL"),dimensionsErrorText:I.getText("IFRAME_ADDIFRAME_DIALOG_DIMENSIONS_ERROR"),saveText:I.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_SAVE"),cancelText:I.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_CANCEL"),previewUrlLabel:I.getText("IFRAME_ADDIFRAME_DIALOG_PREVIEW_URL_LABEL"),previewUrlMessage:I.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_PREVIEW_MESSAGE"),previewButtonText:I.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_SHOW_PREVIEW"),showPreviewButton:I.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_SHOW_PREVIEW"),updatePreviewButton:I.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_UPDATE_PREVIEW"),previewFrameLabel:I.getText("IFRAME_ADDIFRAME_DIALOG_PREVIEW_FRAME_LABEL"),parameterSearchLabel:I.getText("IFRAME_ADDIFRAME_DIALOG_PARAMETER_SEARCH_LABEL"),editUrlLabel:I.getText("IFRAME_ADDIFRAME_DIALOG_EDIT_URL_LABEL"),parametersLabel:I.getText("IFRAME_ADDIFRAME_DIALOG_PARAMETERS_LABEL"),columnParameterLabel:I.getText("IFRAME_ADDIFRAME_DIALOG_TABLE_PARAMETER_LABEL"),columnUiValueLabel:I.getText("IFRAME_ADDIFRAME_DIALOG_TABLE_UI_VALUE_LABEL"),containerTitleLabel:I.getText("IFRAME_ADDIFRAME_DIALOG_CONTAINER_TITLE_LABEL"),containerTitleDefaultValue:I.getText("IFRAME_ADDIFRAME_DIALOG_CONTAINER_TITLE_DEFAULT_VALUE_TEXT"),selectAdditionalTextPercentSection:I.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_PERCENT_SECTION"),selectAdditionalTextPercentHeader:I.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_PERCENT_HEADER"),selectAdditionalTextVh:I.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_VH"),selectAdditionalTextPx:I.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_PX"),selectAdditionalTextRem:I.getText("IFRAME_ADDIFRAME_DIALOG_SELECT_ADDITIONAL_TEXT_REM"),advancedSettingsTitle:I.getText("IFRAME_ADDIFRAME_ADVANCED_SETTINGS"),additionalParametersSecurityWarningText:I.getText("IFRAME_ADDIFRAME_ADDITIONAL_PARAMETERS_SECURITY_WARNING_TEXT"),additionalParametersWarningMoreInfoText:I.getText("IFRAME_ADDIFRAME_ADDITIONAL_PARAMETERS_WARNING_MORE_INFO_TEXT"),additionalSandboxParametersLabel:I.getText("IFRAME_ADDIFRAME_ADD_ADDITIONAL_SANDBOX_PARAMETERS_LABEL"),additionalSandboxParametersPlaceholder:I.getText("IFRAME_ADDIFRAME_ADD_ADDITIONAL_SANDBOX_PARAMETERS_PLACEHOLDER")};function d(e,t,a,i,A){s.dialogTitle=e?s.dialogUpdateTitle:s.dialogCreateTitle;var _=t?s.selectAdditionalTextPercentSection:s.selectAdditionalTextPercentHeader;return new n({text:s,asContainer:{value:t},title:{value:s.containerTitleDefaultValue,valueState:E.None,id:"sapUiRtaAddIFrameDialog_ContainerTitle_TitleInput"},frameWidth:{value:parseFloat(a)||100,valueState:E.None,id:"sapUiRtaAddIFrameDialog_WidthInput"},frameWidthUnit:{value:"%"},frameHeight:{value:parseFloat(i)||50,valueState:E.None,id:"sapUiRtaAddIFrameDialog_HeightInput"},frameHeightUnit:{value:"vh"},frameUrl:{value:"",valueState:E.None},previousFrameUrl:{value:""},frameUrlError:{value:undefined},previewUrl:{value:""},documentationLink:{HTML:T},parameters:{value:[]},unitsOfWidthMeasure:[{unit:"%",descriptionText:_},{unit:"px",descriptionText:s.selectAdditionalTextPx},{unit:"rem",descriptionText:s.selectAdditionalTextRem}],unitsOfHeightMeasure:[{unit:"vh",descriptionText:s.selectAdditionalTextVh},{unit:"px",descriptionText:s.selectAdditionalTextPx},{unit:"rem",descriptionText:s.selectAdditionalTextRem}],advancedSettings:{value:{allowForms:true,allowScripts:true,allowSameOrigin:true,additionalSandboxParameters:[],...A}},settingsUpdate:{value:false}})}var R=t.extend("sap.ui.rta.plugin.iframe.AddIFrameDialog",{metadata:{library:"sap.ui.rta",events:{opened:{}}}});R.prototype.open=function(e,t){return new Promise(function(a){this._fnResolve=a;this._createDialog(e,t)}.bind(this))};R.prototype._createDialog=function(t,i){this._oJSONModel=d(!!t?.updateMode,!!t?.asContainer,t?.frameWidth,t?.frameHeight,t?.advancedSettings);this._oController=new l(this._oJSONModel,t);a.load({name:"sap.ui.rta.plugin.iframe.AddIFrameDialog",controller:this._oController}).then(function(e){this._oDialog=e;this._oDialog.addStyleClass(o.getRtaStyleClassName());this._oDialog.setModel(this._oJSONModel,"dialogInfo");this._oDialog.setModel(i.getModel());this._oDialog.setBindingContext(i.getBindingContext());this._openDialog()}.bind(this)).catch(function(t){e.error("Error loading fragment sap.ui.rta.plugin.iframe.AddIFrameDialog: ",t)})};R.prototype._openDialog=function(){this._oDialog.attachAfterOpen(function(){this._disablePanelExpand();const e=A.getElementById("sapUiRtaAddIFrameDialog_PreviewFrame");const t=e.getModel("$user");this._oDialog.setModel(t,"$user");this.fireOpened()}.bind(this));this._oDialog.attachAfterClose(function(){this._oDialog.destroy();this._oDialog=null;this._fnResolve(this._oController.getSettings());this._oController=null}.bind(this));this._oDialog.open()};R.prototype._disablePanelExpand=function(){var e=A.getElementById("sapUiRtaAddIFrameDialog_PreviewLinkPanel").getDependents()[0];if(e){e.setEnabled(false)}};R.buildUrlBuilderParametersFor=async function(e){const t=await r();const a=Object.keys(t).map(function(e){return{label:e,key:`{$user>/${e}}`,value:t[e]}});const i=e.getBindingContext();let A;if(i){const e=i.getObject();A=Object.keys(e).filter(function(t){return typeof e[t]!=="object"}).map(async function(t){const a=i.getModel();const A={label:t,key:`{${t}}`,value:e[t]};if(a.isA("sap.ui.model.odata.v4.ODataModel")){const e=a.getMetaModel();const _=e.getMetaPath(i.getPath());const n=await e.requestObject(`${_}/${t}/$Type`);if(n){A.type=n}}return A})}else{A=[]}return a.concat(await Promise.all(A))};return R});
//# sourceMappingURL=AddIFrameDialog.js.map