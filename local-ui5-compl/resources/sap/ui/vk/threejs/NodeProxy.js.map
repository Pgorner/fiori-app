{"version":3,"file":"NodeProxy.js","names":["sap","ui","define","NodeProxyBase","Material","cssColorToColor","colorToCSSColor","abgrToColor","colorToABGR","TransformationMatrix","ThreeExtensions","ObjectType","THREE","NodeProxy","extend","metadata","library","constructor","nodeHierarchy","obj3D","call","this","_object3D","_nodeHierarchy","prototype","destroy","getNodeHierarchy","getNodeRef","getNodeId","getVeIds","userData","veids","getVeId","treeNode","sid","getMaterialId","refWithMaterial","geometry","children","length","name","undefined","material","materialId","originalMaterial","getName","type","_updateAncestorsBoundingBox","parent","boundingBox","_vkCalculateObjectOrientedBoundingBox","getLocalMatrix","convertTo4x3","matrix","elements","setLocalMatrix","value","fromArray","convertTo4x4","decompose","position","quaternion","scale","updateMatrixWorld","setProperty","setLocalMatrixNotUpdatingBBox","getWorldMatrix","matrixWorld","setWorldMatrix","multiplyMatrices","Matrix4","copy","invert","getOpacity","opacity","setOpacity","vsManager","getScene","getViewStateManager","_vkSetOpacity","getTintColorABGR","tintColor","setTintColorABGR","setTintColor","_vkSetTintColor","getTintColor","abgr","getNodeMetadata","getHasChildren","getClosed","closed","getBoundingBox","assignMaterial","setNodeRefMaterial","materialRef","nodeRef","highlightColor","side","materialUsed","clone","c","color","lerp","Color","red","green","blue","alpha","defaultHighlightingEmissive","emissive","defaultHighlightingSpecular","specular","_vkUpdateMaterialOpacity","getMaterialRef","forEach","child","objectType","PMI","Hotspot","enumerateMaterials","recursive","collectMaterials","materialRefSet","add","matRefSet","Set","materialRefs","val","push","materials","i","setMaterialRef","replaceMaterial","materialToReplace","materialToReplaceRef","_vkUpdateMaterialColorAndOpacity","id","getLocalTranslate","x","y","z","getLocalScale","getLocalRotationInQuaternion","w","getLocalRotationInAngleAxis","q","normalise","angle","Math","acos","s","sqrt","getLocalRotationInEuler","order","test","heading","attitude","bank","atan2","PI","sqx","sqy","sqz","asin"],"sources":["NodeProxy-dbg.js"],"mappings":"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","ignoreList":[]}