/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/EventBus","sap/ui/thirdparty/jquery","sap/ui/documentation/sdk/util/Resources","sap/base/Log"],function(e,jQuery,t,n){"use strict";var i={},r=[],s=[],a=null,o=false,u="OLD_NEWS_IDS",c,f;function l(e){if(i["newsRSS"]){return Promise.resolve(i["newsRSS"])}f=e;c=f.LOCAL_STORAGE_NAMES[u];return e._requireConfigJSON().then(L).then(w).then(d).catch(function(e){a=e.message;n.error(a)}).finally(v)}function d(){if(o){return Promise.resolve()}var e=f.getLocalStorageItem(c);return new Promise(function(t){var n=i["newsRSS"].items,a;if(Array.isArray(e)){for(var u=0;u<n.length;u++){a=n[u];if(e.indexOf(a.id)!==-1){s.push(a)}else{r.push(a)}}}else{r=n.slice()}o=true;t()})}function h(){return a}function p(){return r}function S(){return s}function g(e){var t=r.indexOf(e),n=f.getLocalStorageItem(c)||[];if(t>-1){r.splice(t,1)}s.push(e);n.push(e.id);f.setLocalStorageItem(c,n);v()}function m(){var e=f.getLocalStorageItem(c)||[],t;for(var n=0;n<r.length;n++){t=r[n];s.push(t);e.push(t.id)}r=[];f.setLocalStorageItem(c,e);v()}function w(){var e=i["newsRSS"].items;e.forEach(function(e){e.updated=new Date(e.updated).toLocaleString()})}function v(){e.getInstance().publish("newsChanged","onDemoKitNewsChanged")}function L(e){return new Promise(function(r){jQuery.ajax(t.getResourceOriginPath(e.feedPath),{type:"GET",dataType:"xml",success:function(e){var t=[];jQuery("item",e).each(function(){var e={};e.title=jQuery(this).find("title").eq(0).text();e.link=jQuery(this).find("link").eq(0).text();e.description=jQuery(this).find("description").eq(0).text();e.updated=jQuery(this).find("pubDate").eq(0).text();e.id=jQuery(this).find("guid").eq(0).text();t.push(e)});i["newsRSS"]={items:t};r(i["newsRSS"])},error:function(){n.error("failed to load news rss");i["newsRSS"]=null;r()}})})}return{moveAllNewItemsToOld:m,moveNewItemToOld:g,prepareNewsData:l,getPreparationFailureMessage:h,getNewNewsArray:p,getOldNewsArray:S}});
//# sourceMappingURL=NewsInfo.js.map