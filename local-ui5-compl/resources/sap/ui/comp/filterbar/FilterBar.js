/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/Lib","sap/ui/core/library","sap/ui/core/Control","sap/ui/core/ResizeHandler","sap/m/Button","sap/m/Label","sap/m/Title","sap/m/Text","sap/m/AssociativeOverflowToolbar","sap/m/ToolbarSpacer","sap/ui/Device","sap/ui/comp/state/UIState","./VariantConverterFrom","./VariantConverterTo","sap/ui/comp/smartvariants/PersonalizableInfo","sap/ui/comp/smartvariants/SmartVariantManagementUi2","sap/m/library","sap/ui/model/json/JSONModel","./FilterGroupItem","./FilterBarRenderer","sap/base/Log","sap/base/util/merge","sap/ui/core/ShortcutHintsMixin","sap/base/util/Deferred","sap/m/delegate/ValueStateMessage","sap/m/ToolbarSeparator","sap/ui/layout/form/Form"],function(t,e,i,r,a,n,s,o,l,h,d,u,f,g,p,_,c,m,F,A,y,I,v,V,b,S,B,C,T){"use strict";var R=r.ValueState;var M=i.getResourceBundleFor("sap.ui.comp").getText("SEARCH_FIELD_VALIDATION_WARNING_MESSAGE");var D=r.TextAlign;var E=r.TitleLevel;var N=F.ButtonType;var T;var L=a.extend("sap.ui.comp.filterbar.FilterBar",{metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/filterbar/FilterBar.designtime",properties:{persistencyKey:{type:"string",group:"Misc",defaultValue:""},advancedMode:{type:"boolean",group:"Misc",defaultValue:false},expandAdvancedArea:{type:"boolean",group:"Misc",defaultValue:false,deprecated:true},searchEnabled:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},filterBarExpanded:{type:"boolean",group:"Misc",defaultValue:true},considerGroupTitle:{type:"boolean",group:"Misc",defaultValue:false},showAllFilters:{type:"boolean",group:"Misc",defaultValue:false},showClearButton:{type:"boolean",group:"Misc",defaultValue:false,deprecated:true},showRestoreButton:{type:"boolean",group:"Misc",defaultValue:true},showGoOnFB:{type:"boolean",group:"Misc",defaultValue:true},showRestoreOnFB:{type:"boolean",group:"Misc",defaultValue:false},showClearOnFB:{type:"boolean",group:"Misc",defaultValue:false},showGoButton:{type:"boolean",group:"Misc",defaultValue:null,deprecated:true},deltaVariantMode:{type:"boolean",group:"Misc",defaultValue:true},filterContainerWidth:{type:"string",group:"Misc",defaultValue:"12rem"},useToolbar:{type:"boolean",group:"Misc",defaultValue:true},header:{type:"string",group:"Misc",defaultValue:""},showFilterConfiguration:{type:"boolean",group:"Misc",defaultValue:true},useSnapshot:{type:"boolean",group:"Misc"},isRunningInValueHelpDialog:{type:"boolean",group:"Misc",defaultValue:false},disableSearchMatchesPatternWarning:{type:"boolean",group:"Misc",defaultValue:false},headerLevel:{type:"sap.ui.core.TitleLevel",group:"Appearance",defaultValue:E.Auto}},aggregations:{filterItems:{type:"sap.ui.comp.filterbar.FilterItem",multiple:true,singularName:"filterItem"},filterGroupItems:{type:"sap.ui.comp.filterbar.FilterGroupItem",multiple:true,singularName:"filterGroupItem"},content:{type:"sap.ui.core.Control",multiple:true},_parameters:{type:"sap.ui.comp.filterbar.FilterGroupItem",multiple:true,singularName:"_parameter",visibility:"hidden"},_toolbar:{type:"sap.m.AssociativeOverflowToolbar",multiple:false,visibility:"hidden"},_headerTitle:{type:"sap.m.Title",multiple:false,visibility:"hidden"},_variantManagement:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_basicSearch:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_searchButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_hideShowButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_clearButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_restoreButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_filtersButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_showAllFiltersButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_hintText:{type:"sap.m.Text",multiple:false,visibility:"hidden"}},defaultAggregation:"content",associations:{basicSearch:{type:"sap.m.SearchField",multiple:false}},events:{cancel:{},reset:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"}}},search:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"},firedFromFilterBar:{type:"boolean"}}},beforeVariantSave:{parameters:{context:{type:"string"}}},beforeVariantFetch:{},afterVariantLoad:{parameters:{context:{type:"string"},executeOnSelect:{type:"boolean"}}},filterChange:{parameters:{added:{type:"sap.ui.core.Control"},deleted:{type:"sap.ui.core.Control"},filterItem:{type:"sap.ui.comp.filterbar.FilterGroupItem"}}},clear:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"}}},initialise:{},initialized:{},afterVariantSave:{},filtersDialogClosed:{parameters:{context:{type:"string"}}},filtersDialogBeforeOpen:{},filtersDialogSearch:{},filtersDialogCancel:{},filtersDialogSearchForFilters:{parameters:{newValue:{type:"string"}}},assignedFiltersChanged:{}}},renderer:I});L.INTERNAL_GROUP="__$INTERNAL$";L.prototype.init=function(){a.prototype.init.apply(this,arguments);this._filterGroupItemChange=this._filterGroupItemChange.bind(this);this._filterItemChange=this._filterItemChange.bind(this,null);this._onLocalizationChanged=this._onLocalizationChanged.bind(this);this._oVariantManagement=null;this._oCollectiveSearch=null;this._aBasicAreaSelection=null;this._mAdvancedAreaFilter=null;this._mAdvancedAreaFilterFlat=[];this._aOrderedFilterItems=[];this._aAdaptFilterItems=[];this._mAdvancedAreaHiddenFilters=[];this._mAdaptFiltersDialogInitialItemsOrder=[];this._fRegisteredFetchData=null;this._fRegisteredApplyData=null;this._fRegisterGetFiltersWithValues=null;this._bIsInitialized=false;this._bSearchFiredFromFilterBar=false;this._bMoveTriggered=false;this._bDelegateAdded=false;this._oInitializedDeferred=new S;this._aFields=null;this._oBasicSearchField=null;this._oVariant={};this._oSelectedVariantBase=null;this._filterChangeSemaphore=true;this._triggerFilterChangeState=true;this._fRegisteredFilterChangeHandlers=null;this._fInitialiseVariants=null;this._bHostedVariantManagement=false;this._nMaxFiltersByDefault=7;this._bResetFiltersDialogTriggered=false;this._oRb=i.getResourceBundleFor("sap.ui.comp");this._createVariantLayout();this._createButtons();this._createHeaderTitle();this._createToolbar();this.oModel=new A({});this.setModel(this.oModel,"FilterBar");this._oHintText=new h({text:this._oRb.getText("FILTER_BAR_NO_FILTERS_ON_FB"),textAlign:D.Center}).addStyleClass("sapUiCompFilterBarHint");this.setAggregation("_hintText",this._oHintText);if(this._isTablet()||this._isPhone()){this.setFilterBarExpanded(false)}this.getMetadata().addPublicMethods("getInitializedPromise");this._oClearButtonOnFB=this._getClearButton();t.attachChange(this._onLocalizationChanged)};L.prototype.onBeforeRendering=function(){const t=!!this._mAdvancedAreaFilter;a.prototype.onBeforeRendering.apply(this,arguments);this._updateHideShowButtonText();this._updateHeaderTitle();this._updateToolbarText();this._getClearButton().setVisible(this.getShowClearOnFB());this._getRestoreButton().setVisible(this.getShowRestoreOnFB());this._calcVisibilityFiltersButton();this._calcVisibilityHideShowButton();this._calcVisibilityGoButton();this._calcVisibilityVariant();this._calcVisibilityBasicSearch();this._calcVisibilitySeparator();this._getClearButton().setEnabled(t);this._getRestoreButton().setEnabled(t);this._getFiltersButton().setEnabled(t);this._getHideShowButton().setEnabled(t);this._getSearchButton().setEnabled(this.getSearchEnabled());this._deregisterResizeHandlers()};L.prototype.onAfterRendering=function(t){a.prototype.onAfterRendering.apply(this,arguments);this._applyAttributes();this._registerResizeHandlers();this._onResize()};L.prototype._registerResizeHandlers=function(){const t=this.$("item-buttons").get(0);this._iResizeHandlerId=n.register(this,this._onResize.bind(this));if(t){this._iButtonsAreaResizeHandlerId=n.register(t,this._onResize.bind(this))}};L.prototype._deregisterResizeHandlers=function(){if(this._iResizeHandlerId){n.deregister(this._iResizeHandlerId);this._iResizeHandlerId=null}if(this._iButtonsAreaResizeHandlerId){n.deregister(this._iButtonsAreaResizeHandlerId);this._iButtonsAreaResizeHandlerId=null}};L.prototype._onResize=function(){if(!this.getAdvancedMode()||this.getIsRunningInValueHelpDialog()){this._onNonAdvancedModeResize()}else if(this.getAdvancedMode()){this._onAdvancedModeResize()}};L.prototype._onAdvancedModeResize=function(){const t=this.getDomRef();if(!t){return}t.classList.remove("sapUiCompFilterBarTablet");t.classList.remove("sapUiCompFilterBarDesktop");if(t.offsetWidth>605&&t.offsetWidth<=1024){t.classList.add("sapUiCompFilterBarTablet")}if(t.offsetWidth>1024){t.classList.add("sapUiCompFilterBarDesktop")}};L.prototype._onNonAdvancedModeResize=function(){const t=16,e=this.getDomRef(),i=e?.querySelector(".sapUiCompFilterBarButtons"),r=e?.querySelector(".sapUiCompFilterBarBasicSearch"),a=e?.querySelectorAll(".sapUiCompFilterBarItem"),n=a?.length>0?a[0]:r,s=a?.length>0?a[a.length-1]:r;if(!n||!s||!i||e?.offsetHeight===0){return}const o=i.getBoundingClientRect(),l=n.getBoundingClientRect(),h=s.getBoundingClientRect();let d="";if(o.x-t>=h.x+h.width){d=`margin-top: -${h.height}px`}i.style=d;if(l.y===h.y){e.classList.add("sapUiCompFilterBarOneLine")}else{e.classList.remove("sapUiCompFilterBarOneLine")}};L.prototype.getShowAllFiltersButton=function(){return this._getShowAllFiltersButton()};L.prototype._getMaxItemWidth=function(){var t,e,i=this.getFilterContainerWidth();["rem","%","px","em"].some(function(e){var r=i.indexOf(e);if(r>0){i=i.substring(0,r);t=e;return true}return false});if(t){e=parseInt(i);if(!isNaN(e)){e*=2;return e+t}}};L.prototype._hasAnyVisibleFiltersOnFB=function(){var t=this._retrieveVisibleAdvancedItems();for(var e=0;e<t.length;e++){if(t[e].filterItem.getVisibleInFilterBar()){return true}}return false};L.prototype._hasRelevantFilters=function(){var t,e=null,i;if(!this._mAdvancedAreaFilter||Object.keys(this._mAdvancedAreaFilter)<1){return false}if(this.getAdvancedMode()){for(e in this._mAdvancedAreaFilter){var r=this._mAdvancedAreaFilter[e];if(r&&r.items){for(t=0;t<r.items.length;t++){i=r.items[t];if(i){if(this._determineVisibility(i.filterItem)){return true}}}}}return false}return true};L.prototype.getVariantManagement=function(){return this._oVariantManagement};L.prototype._updateHideShowButtonText=function(){let t=this.getFilterBarExpanded()?"FILTER_BAR_HIDE":"FILTER_BAR_SHOW";if(this.getAdvancedMode()){t=this.getFilterBarExpanded()?"FILTER_BAR_VH_HIDE_FILTERS":"FILTER_BAR_VH_SHOW_FILTERS"}this._getHideShowButton().setText(this._oRb.getText(t))};L.prototype._calcVisibilityBasicSearch=function(){let t=true;if(!this._oBasicSearchField){return}if(!this._isNewFilterBarDesign()&&this._isPhone()&&!this.getAdvancedMode()){t=false}this._oBasicSearchField.setVisible(t)};L.prototype._calcVisibilitySeparator=function(){const t=this.getAggregation("_headerTitle"),e=this._oVariantManagement;let i=false;if(!this._isPhone()&&!this.getIsRunningInValueHelpDialog()&&(t?.getVisible()||e?.getVisible())){i=true}this._oSeparator.setVisible(i)};L.prototype._calcVisibilityVariant=function(){if(!this._oVariantManagement||this.getAssociation("smartVariant")){return false}let t=true;if(this._possibleToChangeVariantManagement()&&(this.getAdvancedMode()||!this.getPersistencyKey())){t=false}this._oVariantManagement.setVisible(t)};L.prototype._calcVisibilityFiltersButton=function(){this._getFiltersButton().setVisible(!this.getAdvancedMode()&&this.getShowFilterConfiguration())};L.prototype._calcVisibilityHideShowButton=function(){if(this.getAdvancedMode()&&!this._isPhone()){this._getHideShowButton().setVisible(this._hasRelevantFilters())}else if(this._isPhone()){this._getHideShowButton().setVisible(false)}};L.prototype._calcVisibilityGoButton=function(){var t=this.getShowGoOnFB();if(t&&!this._isPhone()&&this.isLiveMode&&this.isLiveMode()){t=false}this._getSearchButton().setVisible(t)};L.prototype.setShowGoButton=function(t){return this.setShowGoOnFB(t)};L.prototype.getShowGoButton=function(){return this.getShowGoOnFB()};L.prototype.hideGoButton=function(){this._getSearchButton().setVisible(false)};L.prototype.restoreGoButton=function(){this._getSearchButton().setVisible(this.getShowGoOnFB())};L.prototype.isCurrentVariantStandard=function(){var t;if(this._oVariantManagement){t=this._oVariantManagement.getCurrentVariantId();if(t===""){return true}return t===this._oVariantManagement.getStandardVariantKey()}return undefined};L.prototype.setCurrentVariantId=function(t,e){if(this._oVariantManagement){this._oVariantManagement.setCurrentVariantId(t,e)}};L.prototype.getCurrentVariantId=function(){var t="";if(this._oVariantManagement){t=this._oVariantManagement.getCurrentVariantId()}return t};L.prototype.getDataSuiteFormat=function(t){return this._getDataSuiteFormat(t,null)};L.prototype._getDataSuiteFormat=function(t,e){var i=null,r,a,n,s,o;if(this._oVariantManagement){r=this.getCurrentVariantId();if(this.getFilterDataAsString){n=this._determineVariantFiltersInfo(t,true);if(this.getFilterContextUrl){o=this.getFilterContextUrl()}if(this.getParameterContextUrl){s=this.getParameterContextUrl()}a=this.getFilterDataAsString(t);if(a){var l=new _;i=l.convert(r,n,a,this,e,s,o)}}}return i};L.prototype.getBasicSearchName=function(){var t=null;if(this._oBasicSearchField&&this.getEntitySet){t="$"+this.getEntitySet()+".basicSearch"}return t};L.prototype.getBasicSearchValue=function(){return this._getBasicSearchValue()};L.prototype.setUiStateAsVariant=function(t,e){var i={replace:true,strictMode:true};this.setUiState(t,i);this.fireAfterVariantLoad(e,false);this._applyVisibility(t.getSelectionVariant())};L.prototype._applyVisibility=function(t){var e=function(t){if(t&&t.getVisible()&&!t.getHiddenFilter()){if(!t.getVisibleInFilterBar()){t.setVisibleInFilterBar(true)}if(!t.getPartOfCurrentVariant()){t.setPartOfCurrentVariant(true)}}};if(this._bIsInitialized){for(var i in this._mAdvancedAreaFilter){if(i){this._mAdvancedAreaFilter[i].items.forEach(function(t){if(t&&t.filterItem&&t.filterItem.getMandatory()){e(t.filterItem)}else if(t&&t.filterItem){if(t.filterItem.getVisibleInFilterBar()){t.filterItem.setVisibleInFilterBar(false)}(function(){if(t.filterItem.getPartOfCurrentVariant()){if(i===L.INTERNAL_GROUP){t.filterItem.setPartOfCurrentVariant(true)}else{t.filterItem.setPartOfCurrentVariant(false)}}})()}})}}if(t&&t.Parameters){t.Parameters.forEach(function(t){var i=this.determineFilterItemByName(t.PropertyName);e(i)}.bind(this))}if(t&&t.SelectOptions){t.SelectOptions.forEach(function(t){var i=this.determineFilterItemByName(t.PropertyName);e(i)}.bind(this))}}};L.prototype.getUiState=function(t){var e,i,r=false,a=null,n,s;if(t){r=t.allFilters===true}i=this._getDataSuiteFormat(r,"13.0");e=new g;e.selectionVariant=JSON.parse(i);e.setSelectionVariant(e.selectionVariant);var o=e.getSelectionVariant();if(o){if(this.getModelData&&this.getModelData()){a=this.getModelData()}s=g.calcSemanticDates(o,a);e.setSemanticDates(s);n=g.calculateValueTexts(o,a);e.setValueTexts(n);window.sessionStorage.setItem(this.getId(),JSON.stringify(n));window.sessionStorage.setItem("semanticDates",JSON.stringify(s))}return e};L.prototype.setUiState=function(t,e){var i,r,a=null,n=false,s=true,o;if(e&&typeof e.replace==="boolean"){n=e.replace}if(e&&typeof e.strictMode==="boolean"){s=e.strictMode}if(t){a=t.getSelectionVariant();if(a){r=JSON.stringify(a)}i=t.getValueTexts();o=t.getSemanticDates()}if(!i){i=JSON.parse(window.sessionStorage.getItem(this.getId()))}if(!o){o=JSON.parse(window.sessionStorage.getItem("semanticDates"))}this._setDataSuiteFormat(r,n,s,i,o);this._enhanceFilterItemsWithTextValue(i,a)};L.prototype.getDescriptionForKeys=function(t){};L.prototype._enhanceFilterItemsWithTextValue=function(t,e){var i=g.determineFiltersWithOnlyKeyValues(t,e,[this.getBasicSearchName()]);this.getDescriptionForKeys(i)};L.prototype.setDataSuiteFormat=function(t,e){this._setDataSuiteFormat(t,e,true)};L.prototype._setDataSuiteFormat=function(t,e,i,r,a){var n,s,o;if(t){n=new p;s=n.convert(t,this,i);if(s){this._clearErrorState();if(s.variantId&&this._oVariantManagement){if(this._bIsInitialized){if(this._oVariantManagement.isPageVariant()){this._oVariantManagement._selectVariant(s.variantId,"DATA_SUITE")}else{this._setFilterVisibility(s.variantId)}}this._oVariantManagement.setInitialSelectionKey(s.variantId)}if(s.payload&&(e||Object.keys(JSON.parse(s.payload)).length>0)&&this.setFilterDataAsString){o=s.payload;if(r){o=g.enrichWithValueTexts(o,r)}if(a){o=g.enrichWithSemanticDates(o,a)}this.setFilterDataAsString(o,e)}if(s.basicSearch&&this._oBasicSearchField&&this._oBasicSearchField.setValue){this._oBasicSearchField.setValue(s.basicSearch);this.fireAssignedFiltersChanged()}}}};L.prototype._setFilterVisibility=function(t){if(this._oVariantManagement.getSelectionKey()!==t){this._oVariantManagement.setInitialSelectionKey(t);var e=this._getStandardVariant();if(e){var i=this._oVariantManagement.getVariantContent(this,t);if(i&&i.filterbar){if(i.hasOwnProperty("version")){i=this.mergeVariant(e,i)}this._reapplyVisibility(i.filterbar)}}}};L.prototype.applySettings=function(t){a.prototype.applySettings.apply(this,arguments);if(this._possibleToChangeVariantManagement()){if(t&&t.customData){for(var e=0;e<t.customData.length;e++){var i=t.customData[e];if(i&&i.mProperties&&i.mProperties.key==="pageVariantPersistencyKey"){this._oVariantManagement.setPersistencyKey(i.mProperties.value);this._oVariantManagement.setVisible(true);this._bHostedVariantManagement=true}}}}if(t&&t.persistencyKey){this._bHostedVariantManagement=true}};L.prototype._possibleToChangeVariantManagement=function(){return this._oVariantManagement&&!this._oVariantManagement.isPageVariant()};L.prototype.clearVariantSelection=function(){if(this._oVariantManagement){this._oVariantManagement.clearVariantSelection()}};L.prototype.setSearchButtonEmphType=function(t){};L.prototype.setSimplifiedMode=function(t){};L.prototype.getSimplifiedMode=function(){return!this.getAdvancedMode()};L.prototype.setExpandAdvancedArea=function(t){return this.setFilterBarExpanded(t)};L.prototype.getExpandAdvancedArea=function(){return this.getFilterBarExpanded()};L.prototype._isNewFilterBarDesign=function(){if(this.getAdvancedMode()){return false}if(!this.getUseToolbar()){return true}return false};L.prototype._setCollectiveSearch=function(t){const e=this.getAggregation("_toolbar");if(!e||!this.getAdvancedMode()){return}if(this._oVariantManagement){e.removeContent(this._oVariantManagement);this._unregisterVariantManagement(this._oVariantManagement);this._oVariantManagement=null}if(this._oCollectiveSearch){e.removeContent(this._oCollectiveSearch)}this._oCollectiveSearch=t;if(this._oCollectiveSearch){e.insertContent(this._oCollectiveSearch,e.indexOfContent(this.getAggregation("_headerTitle"))+1)}};L.prototype.setBasicSearch=function(t){const i=this.getAggregation("_toolbar");this.setAssociation("basicSearch",t,true);if(typeof t==="string"){t=e.getElementById(t)}if(t&&!t.getParent()){i.insertContent(t,i.indexOfContent(this._oSeparator))}this._oBasicSearchField=t;if(t&&t.getParent()){if(this._isUi2Mode()){t.attachLiveChange(t=>{this.fireFilterChange(t)})}return}this.setAggregation("_basicSearch",t);if(t){const e=t.setParent;const r=this;t.setParent=function(){e.apply(this,arguments);if(t.getParent()!==r||t.getParent()===r&&t.sParentAggregationName==="content"){i.removeContent(t)}}}return this};L.prototype._getBasicSearchValue=function(){if(this._oBasicSearchField&&this._oBasicSearchField.getValue){return this._oBasicSearchField.getValue()}return null};L.prototype.addFilterItem=function(t){var i,r,a,n;if(!t){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem' may not be null nor empty")}i=t.getName();if(!i){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem.name' may not be null nor empty")}r=t._getControl();if(!r){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem.control' may not be null nor empty")}this.addAggregation("filterItems",t,true);if(!this._aBasicAreaSelection){this._aBasicAreaSelection=[]}var s={control:t._getControl(),filterItem:t};this._aBasicAreaSelection.push(s);n=t.getId()+"__filterGroupItem";a=e.getElementById(n);if(!a){a=new y(t.getId()+"__filterGroupItem",{label:t.getLabel(),controlTooltip:t.getControlTooltip(),name:t.getName(),mandatory:t.getMandatory(),visible:t.getVisible(),visibleInFilterBar:t.getVisibleInFilterBar(),partOfCurrentVariant:true,control:t._getControl(),groupName:L.INTERNAL_GROUP,groupTitle:"",hiddenFilter:t.getHiddenFilter(),entitySetName:t.getEntitySetName(),entityTypeName:t.getEntityTypeName()})}if(t.data("isCustomField")){a.data("isCustomField",true)}t.attachChange(this._filterItemChange);this.addFilterGroupItem(a);return this};L.prototype.addFilterGroupItem=function(t){var e,i,r;if(!t){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItem()"+" Expected argument 'oFilterGroupItem' may not be null nor empty")}this.addAggregation("filterGroupItems",t);i=t.getGroupName();if(!i){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItems()"+" GroupName may not be null nor empty")}e=t.getName();if(!e){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItems()"+" Name may not be null nor empty")}if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={}}if(!this._mAdvancedAreaFilter[i]){this._mAdvancedAreaFilter[i]={};this._mAdvancedAreaFilter[i].filterItem=null;this._mAdvancedAreaFilter[i].items=[]}if(!this._mAdvancedAreaFilter[i].items){this._mAdvancedAreaFilter[i].items=[]}if(!this._mAdvancedAreaFilter[i].filterItem){this._mAdvancedAreaFilter[i].filterItem=t}r={control:t._getControl(),filterItem:t};if(this.getAdvancedMode()||t.getVisibleInFilterBar()){t.setVisibleInFilterBar(true)}else{t.setVisibleInFilterBar(false)}this._mAdvancedAreaFilter[i].items.push(r);if(!t.getHiddenFilter()){this._prepareFilterItemAndLabel(t);if(t.getVisibleInFilterBar()){t.setPartOfCurrentVariant(t.getVisibleInFilterBar())}t.attachChange(this._filterGroupItemChange)}this._mAdvancedAreaFilterFlat=[];return this};L.prototype.removeFilterItem=function(t){var e,i,r,a,n=this.getFilterItems(),s=this.getFilterGroupItems();if(!n||!n.length){return null}i=this._getRemovedItemAsObject(t,n);if(!i){return null}i.detachChange(this._filterItemChange);for(e=0;e<this._aBasicAreaSelection.length;e++){if(this._aBasicAreaSelection[e].filterItem.getId()===i.getId()){this._aBasicAreaSelection.splice(e,1);if(this._aBasicAreaSelection.length===0){this._aBasicAreaSelection=null}break}}this.removeAggregation("filterItems",i,true);r=i.getId()+"__filterGroupItem";a=this._getRemovedItemAsObject(r,s);this._removeFilterGroupItem(a);return i};L.prototype.removeFilterGroupItem=function(t){var e,i=this.getFilterGroupItems();if(!i||!i.length){return null}e=this._getRemovedItemAsObject(t,i);if(!e){return null}return this._removeFilterGroupItem(e)};L.prototype._getRemovedItemAsObject=function(t,e){var i,r;if(typeof t==="string"){for(i=0;i<e.length;i++){if(e[i].getId()===t){r=e[i];break}}}if(typeof t==="number"){if(t<0||t>=e.length){v.warning("sap.ui.comp.filterbar.FilterBar.prototype.removeFilterGroupItems() is called with invalid index "+t)}else{r=e[t]}}if(typeof t==="object"){r=t}return r};L.prototype._removeFilterGroupItem=function(t){var e,i,r,a=t.getGroupName();t.detachChange(this._filterGroupItemChange);this.removeAggregation("filterGroupItems",t,true);if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[a]&&this._mAdvancedAreaFilter[a].items){i=this._mAdvancedAreaFilter[a];for(e=0;e<i.items.length;e++){r=i.items[e];if(r.filterItem.getId()===t.getId()){i.items.splice(e,1);if(i.filterItem.getId()===t.getId()){if(i.items.length){i.filterItem=i.items[0].filterItem}else{delete this._mAdvancedAreaFilter[a]}}break}}if(this.getFilterGroupItems().length===0){this._mAdvancedAreaFilter=null}}return t};L.prototype._addParameter=function(t){var e,i,r=false,a=L.INTERNAL_GROUP;t._setParameter(true);t.setVisibleInFilterBar(true);t.setPartOfCurrentVariant&&t.setPartOfCurrentVariant(true);this.addAggregation("_parameters",t,true);i={control:t._getControl(),filterItem:t};if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={}}if(!this._mAdvancedAreaFilter[a]){this._mAdvancedAreaFilter[a]={};this._mAdvancedAreaFilter[a].filterItem=null}if(!this._mAdvancedAreaFilter[a].items){this._mAdvancedAreaFilter[a].items=[]}for(e=0;e<this._mAdvancedAreaFilter[a].items.length;e++){var n=this._mAdvancedAreaFilter[a].items[e];if(n.filterItem._isParameter()){continue}this._mAdvancedAreaFilter[a].items.splice(e,0,i);r=true;break}if(!r){this._mAdvancedAreaFilter[a].items.push(i)}this._prepareFilterItemAndLabel(t);t.attachChange(this._filterGroupItemChange.bind(this));return this};L.prototype._filterItemChange=function(t,e){var i,r,a,n;if(e&&e.oSource&&e.oSource.isA("sap.ui.comp.filterbar.FilterItem")){a=e.getParameter("propertyName");if(a==="visibleInFilterBar"||a==="visible"||a==="label"||a==="labelTooltip"||a==="controlTooltip"||a==="mandatory"){i=this._determineItemByName(e.oSource.getName(),L.INTERNAL_GROUP);if(i&&i.filterItem){if(a==="visible"){r=e.oSource.getVisible();i.filterItem.setVisible(r)}else if(a==="visibleInFilterBar"){r=e.oSource.getVisibleInFilterBar();var s=this._checkChangePossibleVisibleInFilterBar(i.filterItem,r);if(s){i.filterItem.setVisibleInFilterBar(r)}else{e.oSource.setVisibleInFilterBar(true)}}else if(a==="label"){i.filterItem.setLabel(e.oSource.getLabel())}else if(a==="labelTooltip"){i.filterItem.setLabelTooltip(e.oSource.getLabelTooltip())}else if(a==="controlTooltip"){n=this.determineControlByFilterItem(i.filterItem,true);if(n&&n.setTooltip){n.setTooltip(i.filterItem.getControlTooltip())}}else if(a==="mandatory"){r=e.oSource.getMandatory();i.filterItem.setMandatory(r)}}}}};L.prototype._filterGroupItemChange=function(t){var e;var i;if(t&&t.oSource){i=t.getParameter("propertyName");if(i==="visibleInFilterBar"||i==="visible"){e=this._determineItemByName(t.oSource.getName(),t.oSource.getGroupName());if(e){if(i==="visibleInFilterBar"){var r=t.oSource.getVisibleInFilterBar();var a=r;var n=this._checkChangePossibleVisibleInFilterBar(t.oSource,r);if(!n){t.oSource.setVisibleInFilterBar(true);a=true}if(a){t.oSource.setPartOfCurrentVariant(true)}if(!r&&!this._isFilterItemInBasicGroup(e.filterItem)){t.oSource.setPartOfCurrentVariant(false)}}else if(i==="visible"){if(!this._oAdaptFiltersDialog){if(!this.getAdvancedMode()){this.fireAssignedFiltersChanged()}}}}}else if(i==="groupTitle"){if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[t.oSource.getGroupName()]){this._adaptGroupTitle(t.oSource.getGroupName())}}else if(i==="label"){if(!this._oAdaptFiltersDialog){this._adaptGroupTitleForFilter(t.oSource)}}else if(i==="mandatory"){this._mandatoryFilterItemChange(t.oSource)}else if(i==="partOfCurrentVariant"&&this.ensureLoadedValueHelpList){var s=this.determineFilterItemByName(t.oSource.getName());if(s&&s.getPartOfCurrentVariant&&s.getPartOfCurrentVariant()){this.ensureLoadedValueHelpList(t.oSource.getName())}}}};L.prototype._checkChangePossibleVisibleInFilterBar=function(t,e){if(t&&t.getMandatory()&&!e){var i=this._hasFilterValue(t);if(!i){t.setVisibleInFilterBar(true);return false}}return true};L.prototype._hasFilterValue=function(t){var e;if(!this._getTriggerFilterChangeState()&&this.getAllFiltersWithValues){e=this.getAllFiltersWithValues()}else{e=this._getFiltersWithValues()}return this._checkFilterForValue(e,t)};L.prototype._adaptGroupTitleForFilter=function(t){var e;var i;if(t&&!t.getHiddenFilter()){e=t.getLabel();i=t.getLabelControl(this.getId());if(this.getConsiderGroupTitle()){if(i&&t.getGroupTitle()){i.setText(e+" ("+t.getGroupTitle()+")")}}else{i.setText(e)}}};L.prototype._adaptGroupTitle=function(t){var e;var i;if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[t]&&this._mAdvancedAreaFilter[t].items){for(e=0;e<this._mAdvancedAreaFilter[t].items.length;e++){i=this._mAdvancedAreaFilter[t].items[e];if(i&&i){this._adaptGroupTitleForFilter(i.filterItem)}}}};L.prototype.registerGetFiltersWithValues=function(t){this._fRegisterGetFiltersWithValues=t;return this};L.prototype.registerFetchData=function(t){this._fRegisteredFetchData=t;return this};L.prototype.registerApplyData=function(t){this._fRegisteredApplyData=t;return this};L.prototype._isTINAFScenario=function(){if(this._oVariantManagement){if(!this._isUi2Mode()){return true}}else{if(this._oCollectiveSearch&&this.getAdvancedMode()){return true}}return false};L.prototype.fireInitialise=function(){if(this._isTINAFScenario()){this._createVisibleFilters();if(this.getAdvancedMode()){this._ensureFilterLoaded(null)}this._fireInitialiseEvent()}else{this._initializeVariantManagement()}};L.prototype.variantsInitialized=function(){this.fireInitialized();this._oInitializedDeferred.resolve()};L.prototype.fireInitialized=function(){this.fireEvent("initialized");this._mAdvancedAreaFilterFlat=this._getAllFilterItemsFlat();this._oInitializedDeferred.resolve()};L.prototype.getInitializedPromise=function(){return this._oInitializedDeferred.promise};L.prototype._initializeVariantManagement=function(){this._createVisibleFilters();if(this._oVariantManagement&&this.getPersistencyKey()){if(this._isTINAFScenario()){this._oVariantManagement.initialise(this._initialiseVariants,this)}else{this._fInitialiseVariants=this._initialiseVariants.bind(this);this._oVariantManagement.attachInitialise(this._fInitialiseVariants,this);this._oVariantManagement.initialise()}}else{this._fireInitialiseEvent()}};L.prototype._fireInitialiseEvent=function(){try{this.fireEvent("initialise")}catch(t){v.error("error during initialise event handling - "+t.message)}this._bIsInitialized=true;this.fireAssignedFiltersChanged()};L.prototype._initialiseVariants=function(){this._fireInitialiseEvent();if(this._oVariantManagement){this._oVariantManagement.currentVariantSetModified(false)}};L.prototype.fireAfterVariantLoad=function(t,e){this._aAdaptFilterItems=[];this._oSelectedVariantBase=null;var i={context:t,executeOnSelect:e};try{this.fireEvent("afterVariantLoad",i)}catch(t){v.error("error during 'afterVariantLoad' event handling - "+t.message)}};L.prototype.fireBeforeVariantSave=function(t){var e={context:t};var i=this._getConsiderFilterChanges();if(t){this._setConsiderFilterChanges(false)}this.fireEvent("beforeVariantSave",e);if(t){this._setConsiderFilterChanges(i)}};L.prototype.destroyFilterGroupItems=function(){var t=this.getFilterGroupItems();this._destroyItems(t);return this};L.prototype.destroyFilterItems=function(){var t=this.getFilterItems();this._destroyItems(t);return this};L.prototype.removeAllFilterItems=function(){var t,e=this.getFilterItems();if(e&&e.length){for(t=0;t<e.length;t++){this.removeFilterItem(e[t])}}return e};L.prototype.removeAllFilterGroupItems=function(){var t,e=[],i=this.getFilterGroupItems();if(i&&i.length){for(t=0;t<i.length;t++){e.push(i[t]);this.removeFilterGroupItem(i[t])}}return e};L.prototype.removeAllFilters=function(){this.removeAllFilterItems&&this.removeAllFilterItems();this.removeAllFilterGroupItems();this.removeBasicSearch()};L.prototype.removeBasicSearch=function(){this.setBasicSearch(null)};L.prototype.getAllFilterItems=function(t){var e,i=null;var r=[];var a,n;if(!t){this._ensureFilterLoaded(null)}if(this._mAdvancedAreaFilter){for(i in this._mAdvancedAreaFilter){if(i){a=this._mAdvancedAreaFilter[i];if(a.items){for(e=0;e<a.items.length;e++){n=a.items[e];if(n&&n.filterItem&&n.filterItem.getVisible()){if(t){if(n.filterItem.getVisibleInFilterBar()||this._checkIfFilterHasValue(n.filterItem.getName())||n.filterItem.data("isCustomField")&&this._checkIfCustomControlFilterHasValue(n)){r.push(n.filterItem)}}else{r.push(n.filterItem)}}}}}}}return r};L.prototype._checkIfFilterHasValue=function(t){return false};L.prototype._checkIfCustomControlFilterHasValue=function(t){return false};L.prototype._clearErrorState=function(){this._resetFiltersInErrorValueState()};L.prototype.getAggregation=function(t){if(t=="filterGroupItems"&&!this.__bDeleteMode){this._ensureFilterLoaded(null)}return a.prototype.getAggregation.apply(this,arguments)};L.prototype._getFilterInformation=function(){return[]};L.prototype._isFilterBarContext=function(){return true};L.prototype._createVisibleFilters=function(){this._getFilters()};L.prototype._getFilters=function(){var t=[],e=this._oFilterProvider&&this._oFilterProvider.getModel()&&this._oFilterProvider.getModel().getData();if(e){t=Object.keys(e).filter(function(t){return this._checkIfFilterHasValue(t)}.bind(this))}this._aFields=this._getFilterInformation();var i,r;if(this._aFields&&this._aFields.length>0){if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={};if(!this.getAdvancedMode()){this._mAdvancedAreaFilter[L.INTERNAL_GROUP]={};this._mAdvancedAreaFilter[L.INTERNAL_GROUP].filterItem=null;this._mAdvancedAreaFilter[L.INTERNAL_GROUP].items=null}}for(i=0;i<this._aFields.length;i++){r=this._aFields[i];if(r.groupName!==L.INTERNAL_GROUP){if(!this._mAdvancedAreaFilter[r.groupName]){this._mAdvancedAreaFilter[r.groupName]={};this._mAdvancedAreaFilter[r.groupName].groupTitle=r.groupTitle;this._mAdvancedAreaFilter[r.groupName].filterItem=null;this._mAdvancedAreaFilter[r.groupName].items=[]}}if(r.visibleInAdvancedArea||r.groupName===L.INTERNAL_GROUP||t.includes(r.name)){this._instanciateFilterItem(r)}}}};L.prototype.isVisibleInFilterBarByName=function(t){var e,i=this._getFilterMetadata(t);if(i&&i.factory){if(i.hasOwnProperty("visibleInAdvancedArea")&&i.visibleInAdvancedArea||i.groupName===L.INTERNAL_GROUP){return true}}else{e=this.determineFilterItemByName(t);if(e){return e.getVisibleInFilterBar()}}return false};L.prototype._getFilterMetadata=function(t){if(this._aFields){for(var e=0;e<this._aFields.length;e++){if(this._aFields[e].fieldName===t){return this._aFields[e]}}}return null};L.prototype.getNonVisibleCustomFilterNames=function(){if(this._aFields.length>0){return this._getLazyNonVisibleCustomFilterNames()}else{return this._getNonVisibleCustomFilterNames()}};L.prototype._getLazyNonVisibleCustomFilterNames=function(){var t=this,e=[];this._aFields.forEach(function(i){if(i.factory){if(i.isCustomFilterField&&!i.visibleInAdvancedArea){e.push(i.fieldName)}}else if(t._isNonVisibleCustomFilterNamesByName(i.fieldName,i.groupName)){e.push(i.fieldName)}});return e};L.prototype._isNonVisibleCustomFilterNamesByName=function(t,e){var i,r;if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[e]&&this._mAdvancedAreaFilter[e].items){for(i=0;i<this._mAdvancedAreaFilter[e].items.length;i++){r=this._mAdvancedAreaFilter[e].items[i];if(r.filterName&&r.filterItem.getName()===t){return this._isNonVisibleCustomFilterNamesByFilter(r.filterItem)}}}return false};L.prototype._isNonVisibleCustomFilterNamesByFilter=function(t){if(t.data("isCustomField")&&!t.getVisibleInFilterBar()){return true}return false};L.prototype._getNonVisibleCustomFilterNames=function(){var t=this,e=[],i=this.getAllFilterItems();if(i){i.forEach(function(i){if(t._isNonVisibleCustomFilterNamesByFilter(i)){e.push(i.getName())}})}return e};L.prototype._ensureFilterLoaded=function(t){var e,i,r;if(this._aFields&&this._aFields.length>0){for(i=0;i<this._aFields.length;i++){r=this._aFields[i];if(!r.factory){continue}if(t){for(e=0;e<t.length;e++){if(r.fieldName===t[e].name){if(r.groupName===t[e].group){this._instanciateFilterItem(r);break}else if(r.groupEntityType===t[e].group){this._instanciateFilterItem(r)}}}}else{this._instanciateFilterItem(r)}}if(!t){this._aFields=[]}this._mAdvancedAreaFilterFlat=this._getAllFilterItemsFlat()}};L.prototype._instanciateFilterItem=function(t){var e=t.factory;if(e){delete t.factory;e.call(t)}};L.prototype._destroyItems=function(t){if(t&&t.length){for(var e=0;e<t.length;e++){t[e].destroy()}}};L.prototype._reapplyVisibility=function(t,e){var i,r=null;var a;var n=[];if(this._mAdvancedAreaFilter){for(r in this._mAdvancedAreaFilter){if(r){var s=this._mAdvancedAreaFilter[r];if(s&&s.items){for(i=0;i<s.items.length;i++){a=s.items[i];if(a&&a.filterItem){this._setPersVisibility(t,a.filterItem,n,e)}}}}}}return n};L.prototype._setPersVisibility=function(t,e,i,r){var a,n;if(e&&!e.getHiddenFilter()){a=e.getGroupName();n=this._checkForFilterInfo(t,e);if(this._isTINAFScenario()){if(n){e.setVisibleInFilterBar(n.visibleInFilterBar);if(n.hasOwnProperty("visible")){e.setVisible(n.visible)}}else{e.setVisibleInFilterBar(false)}}else{if(n&&n.visibleInFilterBar!==undefined){e.setVisibleInFilterBar(n.visibleInFilterBar)}else{if(a!==L.INTERNAL_GROUP&&n&&n.group===a){e.setVisibleInFilterBar(n!==null)}}}if(e){var s=this.determineControlByFilterItem(e,true);if(!r&&s&&s.getValueState&&s.getValueState()!==R.None){s.setValueState(R.None)}if(n&&n.hasOwnProperty("partOfCurrentVariant")&&!n.partOfCurrentVariant){i.push(e)}}}};L.prototype._checkForFilterInfo=function(t,e){var i,r,a=e.getName(),n=[e.getGroupName(),e.getEntitySetName(),e.getEntityTypeName()];var s=[];if(t&&t.length){for(i=0;i<t.length;i++){if(t[i].name===a){if(n.indexOf(t[i].group)>-1){s.push(t[i])}}}}if(s.length===1){return s[0]}else if(s.length>1){for(r=0;r<n.length;r++){for(i=0;i<s.length;i++){if(s[i].group===n[r]){return s[i]}}}}return null};L.prototype._createVariantManagement=function(){var t=new m(this.getId()+"-variantUi2",{});var e=new c({type:"filterBar",keyName:"persistencyKey"});e.setControl(this);t.addPersonalizableControl(e);t.addStyleClass("sapUiCompFilterBarMarginLeft");return t};L.prototype.fireAssignedFiltersChanged=function(){this.fireEvent("assignedFiltersChanged")};L.prototype.retrieveFiltersWithValuesAsText=function(){var t,e,i=this.retrieveFiltersWithValues(),r,a=this.getBasicSearchValue();if(a&&i){i.splice(0,0,this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_SEARCH_TERM"))}if(!i||i.length===0){t=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_ZERO")}else if(i&&i.length===1){if(!this._isPhone()){t=this._oRb.getText("FILTER_BAR_ASSIGNED_ONE_FILTER",[i.length,i[0]])}else{t=this._oRb.getText("FILTER_BAR_ASSIGNED_ONE_FILTER_MOBILE",[i.length])}}else{if(!this._isPhone()){r=Math.min(5,i.length);e="";for(var n=0;n<r;n++){e+=i[n];if(n<r-1){e+=", "}}t=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS",[i.length,e]);if(r<i.length){t+=", ..."}}else{t=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_MOBILE",[i.length])}}return t};L.prototype.retrieveFiltersWithValuesAsTextExpanded=function(){var t,e="",i=this.retrieveFiltersWithValues(),r=this.getBasicSearchValue(),a=this.retrieveNonVisibleFiltersWithValues();if(a.length>0){e=" "+this._oRb.getText("FILTER_BAR_ASSIGNED_HIDDEN_FILTERS",[a.length])}if(r&&i){i.splice(0,0,this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_SEARCH_TERM"))}if(i.length===0){t=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_ZERO")}else if(i.length===1){if(!this._isPhone()){t=this._oRb.getText("FILTER_BAR_ASSIGNED_ONE_FILTER_EXPANDED",[i.length]);t+=e}else{t=this._oRb.getText("FILTER_BAR_ASSIGNED_ONE_FILTER_MOBILE",[i.length]);t+=e}}else{if(!this._isPhone()){t=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_EXPANDED",[i.length]);t+=e}else{t=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_MOBILE",[i.length]);t+=e}}return t};L.prototype.retrieveFiltersWithValues=function(){var t,e=[];var i=this._getFiltersWithValues();if(i){for(t=0;t<i.length;t++){if(i[t].getHiddenFilter()){continue}if(i[t].getVisible()&&i[t].getPartOfCurrentVariant()){e.push(i[t].getLabel())}}}return e};L.prototype.retrieveNonVisibleFiltersWithValues=function(){var t,e=[],i,r=this._getFiltersWithValues();if(r){for(t=0;t<r.length;t++){i=r[t];if(i.getHiddenFilter()){continue}if(i.getVisible()&&!i.getVisibleInFilterBar()&&i.getPartOfCurrentVariant&&i.getPartOfCurrentVariant()){e.push(i.getLabel())}}}return e};L.prototype._getFiltersWithValues=function(){if(this._fRegisterGetFiltersWithValues){try{return this._fRegisterGetFiltersWithValues()}catch(t){v.error("callback for obtaining the filter count throws an exception")}}return null};L.prototype._getFiltersWithValuesCount=function(){var t=0;var e=this.retrieveFiltersWithValues();t=e.length;if(this._oBasicSearchField&&this._oBasicSearchField.getValue&&this._oBasicSearchField.getValue()){t++}return t};L.prototype._checkFilterForValue=function(t,e){var i;if(t){for(i=0;i<t.length;i++){if(t[i]===e){return true}}}return false};L.prototype._hasMandatoryFields=function(){return this.getFilterGroupItems().some(function(t){return t.getMandatory()})};L.prototype._toggleHideShow=function(){if(this._hasAnyVisibleFiltersOnFB()){this.setFilterBarExpanded(!this.getFilterBarExpanded())}if(this.isPropertyInitial("showAllFilters")){this.setShowAllFilters(this._hasMandatoryFields())}};L.prototype._updateHeaderTitle=function(){const t=this.getHeader(),e=this.getAggregation("_headerTitle");if(!e){return}e.setVisible(!!t);e.setText(t);e.setLevel(this.getHeaderLevel())};L.prototype._updateToolbarText=function(){if(this.bPreventUpdateToolbarText){return}var t=this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS":"FILTER_BAR_ACTIVE_FILTERS";var e=this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS_ZERO":"FILTER_BAR_ACTIVE_FILTERS_ZERO";var i=this._getFiltersWithValuesCount();var r=i?this._oRb.getText(t,[i]):this._oRb.getText(e);this._getFiltersButton().setText(r)};L.prototype._selectionChangedInFilterDialogByValue=function(t,e){e.setVisibleInFilterBar(t);if(this._getConsiderFilterChanges()&&this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(true)}this._bDirtyViaDialog=true;if(t){this._aAddedFilters.push(e)}else{this._bFilterRemoved=true}this._oFilterToFocus=this._calculateFilterToFocus(e)};L.prototype._onLocalizationChanged=function(){this._oRb=i.getResourceBundleFor("sap.ui.comp");this.destroyAggregation("_searchButton");this.destroyAggregation("_hideShowButton");this.destroyAggregation("_clearButton");this.destroyAggregation("_restoreButton");this.destroyAggregation("_filtersButton");this.destroyAggregation("_showAllFiltersButton");this._createButtons();this.invalidate()};L.prototype._calculateFilterToFocus=function(t){const e=this._oAdaptFiltersDialogModel.getProperty("/items");if(this._aAddedFilters.length===0){if(this._bFilterRemoved){this._bFilterRemoved=false;return this._retrieveVisibleAdvancedItems()[0]?.control}else{return null}}if(this._bFilterRemoved){this._bFilterRemoved=false;return this._oFilterToFocus}if(this._aAddedFilters.length===1){return this._aAddedFilters[0]}const i=e.findIndex(t=>t.name===this._oFilterToFocus.getName());const r=e.findIndex(e=>e.name===t.getName());return r<i?t:this._oFilterToFocus};L.prototype._onLiveChangeValidateSymbols=function(t){var e=new RegExp("[\\w][*][\\w]"),i=new RegExp("[+]"),r=t.getSource(),a=r.getValue(),n=e.test(a)||i.test(a);this._onSymbolsValidationSetValueState.call(this,n,r)};L.prototype._onSymbolsValidationSetValueState=function(t,e){var i=e._oValueStateMessage,r="sapMSFContentWrapperWarning";if(t&&!e.hasStyleClass(r)&&e.setValueState===undefined){e.addStyleClass(r);e.getValueState=function(){return R.Warning};i.open()}else if(!t&&e.hasStyleClass(r)&&e.setValueState===undefined){e.getValueState=function(){return R.None};i.close();e.removeStyleClass(r)}else if(t&&e.getValueState&&e.getValueState()===R.None){e.setValueState(R.Warning);e.setValueStateText(M)}else if(!t&&e.getValueState()===R.Warning){e.setValueState(R.None)}};L.prototype._mandatoryFilterChange=function(t){if(!t){return}var e=t.getParameters();if(!e||!e.oSource){return}var i=this._determineByControl(e.oSource);if(i){this._mandatoryFilterItemChange(i.filterItem)}};L.prototype._mandatoryFilterItemChange=function(t){if(t){if(!t.getMandatory()){return}var e=this._hasFilterValue(t);if(!t.getVisibleInFilterBar()&&!e){t.setVisibleInFilterBar(true)}}};L.prototype._isPhone=function(){return!!f.system.phone};L.prototype._isTablet=function(){return!!(f.system.tablet&&!f.system.desktop)};L.prototype.fireSearch=function(t){if(this._bOKFiltersDialogTriggered&&this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.close()}else if(this._oAdaptFiltersDialog){this._bEnterPressedLeadsToSearch=true}this.fireEvent("search",t)};L.prototype._variantSave=function(t){this._oVariant={};this.fireBeforeVariantSave()};L.prototype._afterVariantSave=function(t){this._aOrderedFilterItems=this._aAdaptFilterItems;this._aAdaptFilterItems=[];this.fireAfterVariantSave()};L.prototype._filterSetInErrorState=function(t){if(this._oAdaptFiltersDialog&&this._oAdaptFiltersDialog.isOpen()){if(this._getConsiderFilterChanges()&&this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(true)}this._bDirtyViaDialog=true}};L.prototype._cancelFilterDialog=function(t){if(t&&this._oVariantManagement){this._bDirtyViaDialog=this._oVariantManagement._bSaveCanceled}if(!this.getPersistencyKey()&&this.getUseSnapshot()===false){this.fireCancel();return}if(this._oInitialVariant&&this._oInitialVariant.content&&this._bDirtyViaDialog){var e=this._retrieveCurrentSelectionSet(false);this._deleteValidatingTokenFlag(e);this.applyVariant(this._oInitialVariant.content,"CANCEL");if(this._oVariantManagement){if(!this._oVariantManagement.isPageVariant()){this._oVariantManagement.setCurrentVariantKey(this._oInitialVariant.key)}this._oVariantManagement.currentVariantSetModified(this._oInitialVariant.modified)}this.fireCancel()}};L.prototype._resetFiltersInErrorValueState=function(){var t;t=this._retrieveCurrentSelectionSet(true,true);t.forEach(function(t){if(t.control&&t.control.setValueState&&t.control.getValueState){if(t.control.getValueState()===R.Error){if(t.control.setValue){t.control.setValue("")}t.control.setValueState(R.None)}}})};L.prototype.setContentWidth=function(t){if(this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.setContentWidth(t+"px")}};L.prototype.setContentHeight=function(t){if(this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.setContentHeight(t+"px")}};L.prototype.addAdaptFilterDialogCustomContent=function(t){this._mCustomViewInfo={item:t.item,search:t.search,selectionChange:t.selectionChange,filterSelect:t.filterSelect,content:t.content}};L.prototype._createStructureForAdaptFiltersDialog=function(){var t,e,i={filtersOnFilterBar:{},allFilters:[]};var r,a=this.getAllFiltersWithValues?this.getAllFiltersWithValues():this._getFiltersWithValues();if(this._mAdvancedAreaFilter){for(var n in this._mAdvancedAreaFilter){if(n){t=this._mAdvancedAreaFilter[n];if(t.items){for(var s=0;s<t.items.length;s++){e=t.items[s];r=this._checkFilterForValue(a,e.filterItem);if(e.filterItem.getVisibleInFilterBar()){i.filtersOnFilterBar[e.filterItem.getName()]=e.filterItem}var o=e.filterItem.getGroupName()?e.filterItem.getGroupName():L.INTERNAL_GROUP;var l=o===L.INTERNAL_GROUP?this._oRb.getText("FILTER_BAR_BASIC_GROUP"):e.filterItem.getGroupTitle();var h=e.filterItem.getControlTooltip()?e.filterItem.getControlTooltip():"";i.allFilters.push({name:e.filterItem.getName(),label:e.filterItem.getLabel(),group:o,groupLabel:l,tooltip:h,visibleInDialog:e.filterItem.getVisible(),filterItem:e.filterItem,active:r,required:e.filterItem.getMandatory()})}}}}if(i.allFilters.length>0){var d=[],u=this._aAdaptFilterItems.length>0?this._aAdaptFilterItems:this._aOrderedFilterItems;if(u.length>0){u.forEach(function(t,e){d[t.name]=e});i.allFilters.sort(function(t,e){return d[t.name]-d[e.name]})}}}return i};L.prototype._getAllFilterItemsFlat=function(){var t,e,i,r=[];if(this._mAdvancedAreaFilter){for(var a in this._mAdvancedAreaFilter){if(a){t=this._mAdvancedAreaFilter[a];if(t.items){for(var n=0;n<t.items.length;n++){e=t.items[n];i=e.filterItem;var s=i.getGroupName()?i.getGroupName():L.INTERNAL_GROUP;var o=s===L.INTERNAL_GROUP?this._oRb.getText("FILTER_BAR_BASIC_GROUP"):i.getGroupTitle();var l=i.getControlTooltip()?i.getControlTooltip():"";r.push({name:i.getName(),label:i.getLabel(),group:s,groupLabel:o,tooltip:l,visibleInDialog:i.getVisible(),filterItem:i,required:i.getMandatory()})}}}}if(r.length>0){var h=[],d=this._aOrderedFilterItems;d.forEach(function(t,e){h[t.name]=e});r.sort(function(t,e){return h[t.name]-h[e.name]})}}return r};L.prototype._restoreControls=function(t,e){var i,r;if(this._fRegisteredFilterChangeHandlers){this.detachFilterChange(this._fRegisteredFilterChangeHandlers);this._fRegisteredFilterChangeHandlers=null}if(this._mAdvancedAreaFilter){for(var a in this._mAdvancedAreaFilter){if(a){i=this._mAdvancedAreaFilter[a];if(i.items){for(var n=0;n<i.items.length;n++){r=i.items[n];if(r.filterItem&&!r.filterItem.getHiddenFilter()&&r.control){if(r.contentReplaced){r.contentReplaced=undefined;var s=r.filterItem._getControl();if(s&&s.getValueState){if(e&&s.getValueState()!=r.control.getValueState()){r.control.setValueState(s.getValueState())}}s.destroy();r.filterItem._oLabel.setLabelFor&&r.filterItem._oLabel.setLabelFor(r.control);r.filterItem.setControl(r.control);if(this._isPhone()||this._isTablet()){r.control.sName=r.filterItem.getName();r.control._onAfterInputRenderingDelegate={onAfterRendering:function(t){this._applyInputModeAttribute(t.srcControl,t.srcControl.sName)},sName:r.filterItem.getName()};r.control.addDelegate(r.control._onAfterInputRenderingDelegate,this)}}r.filterItem.detachChange(t)}}}}}}};L.prototype._expandGroup=function(t){if(this._oAdaptFiltersDialog&&this._oAdaptFiltersDialogModel&&this._oAdaptFiltersPanel&&t&&t.filterItem){var e=t.filterItem.getGroupName()?t.filterItem.getGroupName():L.INTERNAL_GROUP;var i=this._oAdaptFiltersDialogModel.getData().itemsGrouped;for(var r=0;r<i.length;r++){if(i[r].group===e){for(var a=0;a<i[r].items.length;a++){if(i[r].items[a].name===t.filterItem.getName()){this._oAdaptFiltersPanel.setGroupExpanded(i[r].items[a].group,true);return}}return}}}};var P,O;L.prototype._getEntitiesLazy=function(){if(P&&O){return Promise.resolve()}this.setBusy(true);return i.load("sap.ui.mdc",{async:true}).then(function(){return new Promise(function(t){sap.ui.require(["sap/ui/mdc/p13n/P13nBuilder","sap/ui/mdc/p13n/panels/AdaptFiltersPanel"],function(e,i){P=e;O=i;t();this.setBusy(false)}.bind(this))}.bind(this))}.bind(this))};L.prototype._filtersButtonPressed=function(){this._getFiltersButton().focus();this.showAdaptFilterDialog()};L.prototype._checkAssignedFilters=function(){if(this._oAdaptFiltersDialog){var t=this.getAllFiltersWithValues?this.getAllFiltersWithValues():this._getFiltersWithValues();var e=this._oAdaptFiltersDialogModel.getData().items;for(var i=0;i<e.length;i++){if(e[i].hasOwnProperty("filterItem")){var r=this._checkFilterForValue(t,e[i].filterItem);if(e[i].active!==r){e[i].active=r}}}}};L.prototype.showAdaptFilterDialogForKeyUser=function(t,e){this._fGetDataForKeyUser=e;return this.showAdaptFilterDialog().then(function(){this._oAdaptFiltersDialog._oPopup&&this._oAdaptFiltersDialog._oPopup.addStyleClass(t);P.addRTACustomFieldButton(this._oAdaptFiltersDialog._oPopup)}.bind(this))};L.prototype._createKeyUserChange=function(){var t=[];if(this._bOKFiltersDialogTriggered&&this._oVariantManagement&&this._oVariantManagement.isA("sap.ui.comp.smartvariants.SmartVariantManagement")&&this._oVariantManagement.getVisible()&&this._oVariantManagement._getPersoController()){t=[{selectorControl:this._oVariantManagement._getPersoController(),changeSpecificData:{changeType:"variantContent",content:{key:this._oVariantManagement.getSelectionKey(),persistencyKey:this.getPersistencyKey(),content:this.fetchVariant()}}}]}return t};L.prototype.showAdaptFilterDialog=function(t){return new Promise(function(e){this._getEntitiesLazy().then(function(){var r;if(!this._oAdaptFiltersDialog){r=new A;r.setSizeLimit(0);var a=function(t,e){for(var i=0;i<t.length;i++){if(t[i].group===e){var r=t[i].items;for(var a=0;a<r.length;a++){if(r[a].filterItem&&r[a].filterItem.getVisible()){if(!t[i].groupVisible){t[i].groupVisible=true}return}}if(t[i].groupVisible){t[i].groupVisible=false}return}}};var n=function(t){if(t&&t.oSource&&t.oSource.isA("sap.ui.comp.filterbar.FilterItem")){var e=t.getParameter("propertyName");if(this._oAdaptFiltersDialogModel&&e){var i=this._oAdaptFiltersDialogModel.getData().items;for(var r=0;r<i.length;r++){if(i[r].hasOwnProperty("filterItem")&&i[r].filterItem===t.oSource){if(e==="visible"){var n=t.oSource.getVisible();if(i[r].visibleInDialog!=n){i[r].visibleInDialog=n;a(this._oAdaptFiltersDialogModel.getData().itemsGrouped,i[r].group);this._oAdaptFiltersDialogModel.checkUpdate();break}}else if(e==="visibleInFilterBar"){i[r].visible=t.oSource.getVisibleInFilterBar();this._oAdaptFiltersDialogModel.checkUpdate();break}}}}}}.bind(this);this._ensureFilterLoaded(null);var s=this._createStructureForAdaptFiltersDialog();var o=this;var l=P.prepareAdaptationData(s.allFilters,function(t,e){V(t,e);var i=true;if(!e.filterItem||e.filterItem.getHiddenFilter()){o._mAdvancedAreaHiddenFilters.push(t);i=false}t.visible=!!s.filtersOnFilterBar[e.name];return i},true);P.sortP13nData({visible:"visible",position:"position"},l.items);this._oAdaptFiltersDialogModel=new A;this._oAdaptFiltersDialogModel.setSizeLimit(1e3);this._oAdaptFiltersDialogModel.setData(l);this._mAdaptFiltersDialogInitialItemsOrder=[].concat(this._oAdaptFiltersDialogModel.getData().items,this._mAdvancedAreaHiddenFilters);var h=this._oAdaptFiltersDialogModel.getData().items;for(var d=0;d<h.length;d++){if(h[d].hasOwnProperty("filterItem")){h[d].filterItem.attachChange(n)}}this._fRegisteredFilterChangeHandlers=function(t){this._mandatoryFilterChange(t)}.bind(this);this.attachFilterChange(this._fRegisteredFilterChangeHandlers);var u=function(t,e){if(t&&t.filterItem&&t.filterItem.getVisibleInFilterBar()!==e){this._selectionChangedInFilterDialogByValue(e,t.filterItem)}}.bind(this);var f=function(t){var e,i,r,a,n=t.getParameter("item"),s=t.getParameter("reason"),o=s==="Add"||s==="SelectAll"||s==="RangeSelect";if(s==="SelectAll"||s==="DeselectAll"){if(this._oAdaptFiltersPanel.getCurrentViewKey()===this._oAdaptFiltersPanel.GROUP_KEY){i=t.getParameter("item").group;r=this._oAdaptFiltersDialogModel.getProperty("/itemsGrouped").filter(function(t){return t.group===i})[0].items}else{r=this._oAdaptFiltersDialogModel.getProperty("/items")}for(e=0;e<r.length;e++){n=r[e];if(!o&&this._shouldBeVisible(n)){a="/items/"+e;this._oAdaptFiltersDialogModel.setProperty(a+"/visible",true)}else{u(n,o)}}}else if(s==="RangeSelect"&&n){if(this._oAdaptFiltersPanel.getCurrentViewKey()===this._oAdaptFiltersPanel.LIST_KEY){for(e=0;e<n.length;e++){var l=n[e];if(!o&&this._shouldBeVisible(l)){a="/items/"+e;this._oAdaptFiltersDialogModel.setProperty(a+"/visible",true)}else{u(l,o)}}}}else if((s==="Add"||s==="Remove")&&n){if(!o&&this._shouldBeVisible(n)){n.visible=true}else{u(n,o)}}else if(s==="Move"){this._bDirtyViaDialog=true;this._bMoveTriggered=true}this._oAdaptFiltersPanel.setP13nData(this._oAdaptFiltersDialogModel.getData())}.bind(this);var g=new O({enableReorder:true});g.getView(g.GROUP_KEY).getContent().attachChange(f);g.getView(g.LIST_KEY).getContent().attachChange(f);this._oAdaptFiltersPanel=g;g.setItemFactory(function(t){var e,i,a,n;n=t.getObject();if(!n){return undefined}a=this._determineItemByName(n.name,n.group);if(!a||!a.filterItem||!a.control){return undefined}e=a.control;if(!a.contentReplaced&&a.filterItem._getControl()===e){a.contentReplaced=true;const t={cloneChildren:true,cloneBindings:false};if(e.isA("sap.ui.comp.smartfilterbar.SFBMultiComboBox")){t.cloneBindings=true}i=e.clone("",[],t);a.filterItem._oLabel.setLabelFor&&a.filterItem._oLabel.setLabelFor(i);i.setModel(r);a.filterItem.setControl(i)}return e}.bind(this));this.fireFiltersDialogBeforeOpen({newDialog:true});if(this._mCustomViewInfo&&this._mCustomViewInfo.item&&this._mCustomViewInfo.item.getKey()){g.addCustomView(this._mCustomViewInfo);g.switchView(t?t:g.getDefaultView())}sap.ui.require(["sap/m/p13n/Popup"],function(t){var r=new t(this.getId()+"-adapt-filters",{panels:[g],title:this._oRb.getText(this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS_DIALOG":"FILTER_BAR_ADV_FILTERS_DIALOG"),reset:this.getShowRestoreButton()&&!this._fGetDataForKeyUser?this._dialogRestore.bind(this):null,warningText:i.getResourceBundleFor("sap.m").getText("p13n.RESET_WARNING_TEXT"),close:function(t){if(t.getParameter("reason")==="Ok"){this._bOKFiltersDialogTriggered=true}else{this._dialogCancel(this._oAdaptFiltersDialog)}if(this._bOKFiltersDialogTriggered&&typeof this._clearErroneusControlValues==="function"){this._clearErroneusControlValues()}this._restoreControls(n,!this._bOKFiltersDialogTriggered);if(!this._bOKFiltersDialogTriggered){this._cancelFilterDialog(false)}if(this._bOKFiltersDialogTriggered){this._aAdaptFilterItems=this._oAdaptFiltersDialogModel.getProperty("/items");this._mAdvancedAreaFilterFlat=this._aAdaptFilterItems;this._aAdaptFilterItems=[].concat(this._aAdaptFilterItems,this._mAdvancedAreaHiddenFilters);this._mAdvancedAreaFilter=this._mapReorderedFilterItemsInGroups(this._aAdaptFilterItems);this._bMoveTriggered=false;this._mAdvancedAreaHiddenFilters=[]}else{this._aAdaptFilterItems=[]}if(this._fGetDataForKeyUser){this._fGetDataForKeyUser(this._createKeyUserChange())}this._applyAttributes();this._oAdaptFiltersDialogModel=null;this._oAdaptFiltersPanel=null;this._oVariant={};this._oInitialVariant=null;this._oAdaptFiltersDialog.destroy();this._oAdaptFiltersDialog=null;this._fGetDataForKeyUser=null;if((this._bOKFiltersDialogTriggered&&this._bDirtyViaDialog||this._bResetFiltersDialogTriggered)&&!this._bEnterPressedLeadsToSearch){if(!this.isLiveMode||!this.isLiveMode()){this.fireFilterChange()}}this._bEnterPressedLeadsToSearch=false;this._bResetFiltersDialogTriggered=false;this.fireFiltersDialogClosed({context:this._bOKFiltersDialogTriggered?"SEARCH":"CANCEL"});setTimeout(function(){if(!this._oFilterToFocus){return}this._oFilterToFocus.getControl?this._oFilterToFocus.getControl()?.focus():this._oFilterToFocus.focus()}.bind(this),301)}.bind(this)});r._getIdPrefix=function(){return"-dialog"};this._oAdaptFiltersDialog=r;this._oAdaptFiltersDialog.setParent(this);this._oVariant.content=this.fetchVariant();if(this._oVariantManagement){this._oVariant.key=this._oVariantManagement.getSelectionKey();this._oVariant.modified=this._oVariantManagement.currentVariantGetModified()}this._oInitialVariant={};V(this._oInitialVariant,this._oVariant);this._bOKFiltersDialogTriggered=false;this._bDirtyViaDialog=false;this._bEnterPressedLeadsToSearch=false;if(this.$().closest(".sapUiSizeCompact").length>0){this._oAdaptFiltersDialog.addStyleClass("sapUiSizeCompact")}this._oAdaptFiltersDialog.isPopupAdaptationAllowed=function(){return false};const a={enableReset:this._hasChanges(),confirm:{text:this._oRb.getText("FILTER_BAR_OK")}};this._oAdaptFiltersDialog.open(undefined,a);this._aAddedFilters=[];this._oFilterToFocus=undefined;e()}.bind(this));g.setP13nModel(this._oAdaptFiltersDialogModel);return}e()}.bind(this))}.bind(this))};L.prototype._hasChanges=function(){return!!this._oVariantManagement?.currentVariantGetModified()};L.prototype._mapReorderedFilterItemsInGroups=function(t){var e=[];t.forEach(function(t){if(!e[t.group]){e[t.group]={};e[t.group].filterItem=null;e[t.group].items=[]}if(!e[t.group].items){e[t.group].items=[]}e[t.group].items.push(this._mAdvancedAreaFilter[t.group].items.find(function(e){return e.filterItem===t.filterItem}));if(!e[t.group].filterItem){e[t.group].filterItem=t.filterItem}}.bind(this));return e};L.prototype._reorderItemsInAdvancedAreaFilter=function(){var t,e;t=this._createStructureForAdaptFiltersDialog();e=t.allFilters;this._mAdvancedAreaFilterFlat=e;this._mAdvancedAreaFilter=this._mapReorderedFilterItemsInGroups(e)};L.prototype.isDialogOpen=function(){return this._oAdaptFiltersDialog};L.prototype._dialogCancel=function(t){if(t){this._bOKFiltersDialogTriggered=false;this.fireFiltersDialogCancel()}};L.prototype._dialogRestore=function(){this.reset();if(this._oVariantManagement&&this._oVariantManagement.getVisible()&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(false)}if(this._oAdaptFiltersPanel){var t=[],e=this._oAdaptFiltersDialogModel.getData();if(this._bMoveTriggered&&this._mAdaptFiltersDialogInitialItemsOrder.length>0){this._mAdaptFiltersDialogInitialItemsOrder.forEach(function(e,i){t[e.name]=i});e.items.sort(function(e,i){return t[e.name]-t[i.name]})}else{this._aOrderedFilterItems.forEach(function(e,i){t[e.name]=i});e.items.sort(function(e,i){return t[e.name]-t[i.name]});P.sortP13nData({visible:"visible",position:"position"},e.items)}this._oAdaptFiltersPanel.setP13nData(e)}this._bDirtyViaDialog=false;this._bResetFiltersDialogTriggered=true};L.prototype._getSearchButton=function(){return this.getAggregation("_searchButton")};L.prototype._getHideShowButton=function(){return this.getAggregation("_hideShowButton")};L.prototype._getClearButton=function(){return this.getAggregation("_clearButton")};L.prototype._getRestoreButton=function(){return this.getAggregation("_restoreButton")};L.prototype._getFiltersButton=function(){return this.getAggregation("_filtersButton")};L.prototype._getShowAllFiltersButton=function(){return this.getAggregation("_showAllFiltersButton")};L.prototype._createButtons=function(){const t=new s(this.getId()+"-btnGo",{visible:this.getShowGoOnFB(),text:this._oRb.getText("FILTER_BAR_GO"),type:N.Emphasized}).addStyleClass("sapUiCompFilterBarPaddingRightBtn");t.addEventDelegate({ontouchstart:()=>{this.bPreventUpdateToolbarText=true},ontouchend:()=>{this.bPreventUpdateToolbarText=false;this._updateToolbarText();this.fireAssignedFiltersChanged()}});b.addConfig(t,{event:"search"},this);t.attachPress(()=>{t.focus();this._searchFromFilterBar()});this.setAggregation("_searchButton",t);const e=new s(this.getId()+"-btnShowHide",{text:this._oRb.getText("FILTER_BAR_HIDE"),type:N.Transparent,enabled:false}).addStyleClass("sapUiCompFilterBarPaddingRightBtn");e.attachPress(()=>{this._toggleHideShow()});this.setAggregation("_hideShowButton",e);const i=new s(this.getId()+"-btnClear",{visible:this.getShowClearOnFB(),text:this._oRb.getText("FILTER_BAR_CLEAR"),type:N.Transparent,enabled:false}).addStyleClass("sapUiCompFilterBarPaddingRightBtn");i.attachPress(()=>{this.clear();if(this.isLiveMode&&this.isLiveMode()){this._searchFromFilterBar()}});this.setAggregation("_clearButton",i);const r=new s(this.getId()+"-btnRestore",{visible:this.getShowRestoreOnFB(),text:this._oRb.getText("FILTER_BAR_RESTORE"),type:N.Transparent,enabled:false}).addStyleClass("sapUiCompFilterBarPaddingRightBtn");r.attachPress(()=>{this.reset();if(this._oVariantManagement){this._oVariantManagement.currentVariantSetModified(false)}});this.setAggregation("_restoreButton",r);const a=new s(this.getId()+"-btnFilters",{visible:this.getShowFilterConfiguration(),text:this._oRb.getText("FILTER_BAR_ACTIVE_FILTERS_ZERO"),type:N.Transparent,enabled:false});a.attachPress(()=>{this._filtersButtonPressed()});this.setAggregation("_filtersButton",a);const n=new s(this.getId()+"-btnShowAll",{text:this._oRb.getText("FILTER_BAR_VH_SHOW_ALL"),type:N.Transparent,press:this._toggleAllFilters.bind(this)});this.setAggregation("_showAllFiltersButton",n)};L.prototype._shouldSkipRenderButtons=function(){return this.getUseToolbar()};L.prototype._getButtons=function(){return[this.getAggregation("_searchButton"),this.getAggregation("_clearButton"),this.getAggregation("_restoreButton"),this.getAggregation("_filtersButton")]};L.prototype._createHeaderTitle=function(){const t=new l(`${this.getId()}-HeadText`,{level:this.getHeaderLevel()});t.addStyleClass("sapMH4Style");t.addStyleClass("sapUiCompSmartChartHeader");this.setAggregation("_headerTitle",t)};L.prototype._toggleAllFilters=function(){var t,e;this.setShowAllFilters(!this.getShowAllFilters());this._getShowAllFiltersButton().setVisible(!this.getShowAllFilters());if(!this._bDelegateAdded&&this.getFilterGroupItems()){t=this.getFilterGroupItems()[this._nMaxFiltersByDefault]._getControl();e={onAfterRendering:function(){t.focus()}};t.addDelegate(e,this);this._bDelegateAdded=true}};L.prototype._shouldSkipRenderFilters=function(t){return this.getIsRunningInValueHelpDialog()&&this._nMaxFiltersByDefault===t&&!this.getShowAllFilters()};L.prototype._shouldRenderAdvancedLayout=function(){return this.getAdvancedMode()&&!this.getIsRunningInValueHelpDialog()};L.prototype._createVariantLayout=function(){this._oVariantManagement=this._createVariantManagement();this.setAggregation("_variantManagement",this._oVariantManagement);if(this._possibleToChangeVariantManagement()){this._oVariantManagement.setVisible(false)}this._registerVariantManagement();return this._oVariantManagement};L.prototype._createToolbar=function(){const t=new d(`${this.getId()}-toolbar`);this._oToolbarSpacer=new u;this._oSeparator=(new C).addStyleClass("sapUiTinyMarginEnd");t.addContent(this.getAggregation("_headerTitle"));t.addContent(this._oVariantManagement);t.addContent(this._oSeparator);t.addContent(this._oToolbarSpacer);t.addContent(this._getSearchButton());t.addContent(this._getHideShowButton());t.addContent(this._getClearButton());t.addContent(this._getRestoreButton());t.addContent(this._getFiltersButton());t.addStyleClass("sapUiCompFilterBarToolbar");this.setAggregation("_toolbar",t)};L.prototype._replaceVariantManagement=function(t){if(this._oVariantManagement){this._unregisterVariantManagement();const t=this.getAggregation("_toolbar");if(t&&t.getContent(this._oVariantManagement)){t.removeContent(this._oVariantManagement)}this._oVariantManagement.destroy()}this._oVariantManagement=t;this._registerVariantManagement()};L.prototype._prepareFilterItemAndLabel=function(t){var e=t._getControl();if(!e){v.error("no Control obtained");return null}var i=t.getLabelControl(this.getId());if(!i){v.error("no Label obtained");return null}this._adaptGroupTitleForFilter(t);this._connectLabelAndControl(t,e,i)};L.prototype._connectLabelAndControl=function(t,e,i){if(e.setWidth){e.setWidth("100%")}if(!i){return}if(!i.hasStyleClass("sapUiCompFilterLabel")){i.addStyleClass("sapUiCompFilterLabel")}if(t&&e){i.setLabelFor(e)}if(t.getControlTooltip()&&e.setTooltip){e.setTooltip(t.getControlTooltip())}};L.prototype._groupsWithVisibleFilters=function(){var t,e,i=this._mAdvancedAreaFilter;if(this._mAdvancedAreaFilter&&Object.keys(this._mAdvancedAreaFilter).length>1){i={};for(var r in this._mAdvancedAreaFilter){if(r&&this._mAdvancedAreaFilter[r]&&this._mAdvancedAreaFilter[r].items){t=this._mAdvancedAreaFilter[r].items.length;for(var a=0;a<this._mAdvancedAreaFilter[r].items.length;a++){e=this._mAdvancedAreaFilter[r].items[a].filterItem;if(e&&(e.getHiddenFilter()||!e.getVisible())){t--}}if(t){i[r]={}}}}}return i};L.prototype._setTriggerFilterChangeState=function(t){this._triggerFilterChangeState=t};L.prototype._getTriggerFilterChangeState=function(){return this._triggerFilterChangeState};L.prototype._setConsiderFilterChanges=function(t){this._filterChangeSemaphore=t};L.prototype._getConsiderFilterChanges=function(){return this._filterChangeSemaphore};L.prototype.fireFilterChange=function(t){if(!this.bPreventUpdateToolbarText){this._updateToolbarText();this.fireAssignedFiltersChanged()}if(!this._getTriggerFilterChangeState()){return}if(this._getConsiderFilterChanges()&&this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(true)}if(this._oAdaptFiltersDialog&&!this._oAdaptFiltersDialog.isOpen()){return}if(this._oAdaptFiltersDialog){this._bDirtyViaDialog=true;this._checkAssignedFilters();this._oAdaptFiltersDialog.getResetButton?.()?.setEnabled(true)}this.fireEvent("filterChange",t)};L.prototype._notifyAboutChangedFilters=function(t,e){var i,r=this._determineByControl(e);if(t){i={added:e,filterItem:r}}else{i={deleted:e,filterItem:r}}this.fireFilterChange(i)};L.prototype._determineVariantFiltersInfo=function(t,e){var i;var r=null,a,n;var s=[];if(this._mAdvancedAreaFilter){for(r in this._mAdvancedAreaFilter){if(r){if(this._mAdvancedAreaFilter[r].items){for(i=0;i<this._mAdvancedAreaFilter[r].items.length;i++){a=this._mAdvancedAreaFilter[r].items[i];if(t||a.filterItem.getVisible()){n={group:a.filterItem.getGroupName(),name:a.filterItem.getName(),partOfCurrentVariant:a.filterItem.getPartOfCurrentVariant(),visibleInFilterBar:a.filterItem.getVisibleInFilterBar(),visible:a.filterItem.getVisible()};if(e||this._considerFilter(n)){s.push(n)}}}}}}}return s};L.prototype.mergeVariant=function(t,e){var i={};V(i,e);i.filterbar=[];i.filterBarVariant={};V(i.filterbar,t.filterbar);V(i.filterBarVariant,t.filterBarVariant);if(e&&e.hasOwnProperty("version")){i.filterbar=this._mergeVariantFields(i.filterbar,e.filterbar);i.filterBarVariant=e.filterBarVariant}return i};L.prototype._mergeVariantFields=function(t,e){var i;e.forEach(function(e){for(i=0;i<t.length;i++){if(t[i].group===e.group&&t[i].name===e.name){t.splice(i,1);break}}});return t.concat(e)};L.prototype._isUi2Mode=function(){return this._oVariantManagement instanceof m};L.prototype._isDeltaHandling=function(){if(this._isUi2Mode()){return false}return this.getDeltaVariantMode()};L.prototype._getStandardVariant=function(){return this._oVariantManagement.getStandardVariant(this)};L.prototype._considerFilter=function(t){if(!this._isDeltaHandling()){return true}var e=null;var i=this._getStandardVariant();if(i&&i.filterbar){for(var r=0;r<i.filterbar.length;r++){if(i.filterbar[r].group===t.group&&i.filterbar[r].name===t.name){e=i.filterbar[r];break}}}if(!e){if(!t.partOfCurrentVariant){return false}return true}if(e.partOfCurrentVariant!==t.partOfCurrentVariant||e.visibleInFilterBar!==t.visibleInFilterBar||e.visible!==t.visible){return true}return false};L.prototype._determineVisibility=function(t){var e=false;if(t){e=t.getVisible()&&(t.getVisibleInFilterBar()||this._checkIfFilterHasValue(t.getName()));e=e&&!t.getHiddenFilter()}return e};L.prototype._retrieveVisibleAdvancedItems=function(){var t,e=null,i;var r=[];if(this._mAdvancedAreaFilter){for(e in this._mAdvancedAreaFilter){if(e){if(this._mAdvancedAreaFilter[e]&&this._mAdvancedAreaFilter[e].items){for(t=0;t<this._mAdvancedAreaFilter[e].items.length;t++){i=this._mAdvancedAreaFilter[e].items[t];if(i){if(this._determineVisibility(i.filterItem)){r.push(i)}}}}}}}return r};L.prototype._retrieveCurrentSelectionSet=function(t,e){var i,r,a,n=[];var s=this._retrieveVisibleAdvancedItems();for(i=0;i<s.length;i++){r=s[i];if(r.control&&r.filterItem&&(e||!r.filterItem._isParameter())){if(t){a={name:s[i].filterItem.getName(),control:s[i].control}}else{a=s[i].control}n.push(a)}}return n};L.prototype.search=function(){this.fireSearch({selectionSet:this._retrieveCurrentSelectionSet(false),firedFromFilterBar:this._bSearchFiredFromFilterBar});this._bSearchFiredFromFilterBar=false;return true};L.prototype._searchFromFilterBar=function(){this._bSearchFiredFromFilterBar=true;this.search.apply(this,arguments)};L.prototype.clear=function(){var t={};t.selectionSet=this._retrieveCurrentSelectionSet(false);this._deleteValidatingTokenFlag(t.selectionSet);this._clearErrorState();this.fireClear(t);this.fireAssignedFiltersChanged()};L.prototype._deleteValidatingTokenFlag=function(t){t.forEach(function(t){if(t.hasOwnProperty("__bValidatingToken")){delete t.__bValidatingToken}})};L.prototype.reset=function(){var t={};t.selectionSet=this._retrieveCurrentSelectionSet(false);this.fireReset(t);this._resetVariant()};L.prototype._resetVariant=function(){var t=null,e=null;this._resetFiltersInErrorValueState();var i=this._retrieveCurrentSelectionSet(false);this._deleteValidatingTokenFlag(i);if(this._oVariantManagement){var r=this._oVariantManagement.getSelectionKey()||this._oVariantManagement.getStandardVariantKey();if(r){t=this._oVariantManagement.getVariantContent(this,r);if(this._oVariant){this._oVariant.content=t;this._oVariant.modified=false;if(this.getPersistencyKey()&&this._oInitialVariant){this._oInitialVariant.content=t;this._oInitialVariant.modified=false;this._oInitialVariant.key=r}}if(!this.getPersistencyKey()&&this.getUseSnapshot()===undefined&&this._oInitialVariant&&this._oInitialVariant.content){e=this._oInitialVariant.content}if(t||e){this.applyVariant(t||e,"RESET")}if(this._oSelectedVariantBase&&this._isFilterBarContext()){this.applyVariant(this._oSelectedVariantBase,"RESET")}}}};L.prototype._removeValuesForNonPartOfCurrentVariants=function(t){};L.prototype._removeEmptyFilters=function(t){return t};L.prototype._applyVariant=function(t,e,i,r){var a,n=null,s,o=false,l=[];if(t){if(i){s=this._getTriggerFilterChangeState();this._setTriggerFilterChangeState(false)}this._setConsiderFilterChanges(false);a=t.filterBarVariant;n=t.filterbar;if(this._oFilterProvider){this._oFilterProvider._setSingleInputsTextArrangementData(JSON.parse(t.singleInputsTextArrangementData||"{}"))}l=t.orderedFilterItems?JSON.parse(t.orderedFilterItems):[];if(!l.length){l=this._mAdvancedAreaFilterFlat}if(Array.isArray(n)&&n.length){this._ensureFilterLoaded(n.filter(function(t){return t.visibleInFilterBar}))}this._applyVariantFields(a,r);var h=this._reapplyVisibility(n,e==="CANCEL");this._removeValuesForNonPartOfCurrentVariants(h);if(this._oBasicSearchField&&this._oBasicSearchField.setValue){this._oBasicSearchField.setValue(t.basicSearch||"")}if(t.executeOnSelection){o=t.executeOnSelection}this._aOrderedFilterItems=l;this._reorderItemsInAdvancedAreaFilter();this.fireAfterVariantLoad(e,o);this._setConsiderFilterChanges(true);this.fireAssignedFiltersChanged();if(o||this.getLiveMode&&this.getLiveMode()){this._searchFromFilterBar()}else if(e!=="CANCEL"){this._clearErrorState()}if(i){this._setTriggerFilterChangeState(s)}if((!e||e==="RESET")&&this._isFilterBarContext()){this._oSelectedVariantBase=t}}};L.prototype._fetchVariantFiltersData=function(t){if(this._fRegisteredFetchData){try{return this._fRegisteredFetchData(t)}catch(t){v.error("callback for fetching data throws an exception")}}else{v.warning("no callback for fetch data supplied")}return null};L.prototype._applyVariantFields=function(t,e){if(this._fRegisteredApplyData){try{return this._fRegisteredApplyData(t,e)}catch(t){v.error("callback for applying data throws an exception")}}else{v.warning("no callback for apply data supplied")}};L.prototype._isStandardVariant=function(){var t=this.getCurrentVariantId();if(!t){return true}if(this._oVariantManagement){if(t===this._oVariantManagement.getStandardVariantKey()){return true}if(this._oVariantManagement._oStandardVariant===null){return true}}return false};L.prototype.isCurrentVariantExecuteOnSelectEnabled=function(){if(this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){var t=this.getCurrentVariantId();if(!t){return this._oVariantManagement.getExecuteOnSelectForStandardVariant()}var e=this._oVariantManagement.getItemByKey(t);if(e){return e.getExecuteOnSelect()}}return false};L.prototype.fetchVariant=function(){var t,e={},i,r,a=[];if(this._isDeltaHandling()){if(!this._isStandardVariant()){e.version="V3"}}this.fireBeforeVariantFetch();t=this._determineVariantFiltersInfo(true,!e.version);e.filterbar=!t?[]:t;var n=function(t){t.forEach(function(t){a.push({name:t.name,group:t.group})})};if(this._aAdaptFilterItems&&this._aAdaptFilterItems.length>0){n(this._aAdaptFilterItems);e.orderedFilterItems=JSON.stringify(a)}else{if(this._aOrderedFilterItems.length>0){n(this._aOrderedFilterItems)}else{this._mAdvancedAreaFilterFlat=this._getAllFilterItemsFlat();n(this._mAdvancedAreaFilterFlat)}e.orderedFilterItems=JSON.stringify(a)}r=this._fetchVariantFiltersData(e.version);e.filterBarVariant=this._removeEmptyFilters(r);e.singleInputsTextArrangementData=JSON.stringify(this._oFilterProvider?this._oFilterProvider._getSingleInputsTextArrangementData():{});i=this._getBasicSearchValue();if(i){e.basicSearch=i}if(this._oVariant&&this._oVariant.content){this._oVariant.content=e}if(!this._oSelectedVariantBase||this._oSelectedVariantBase===null){this._oSelectedVariantBase=e}return e};L.prototype.applyVariant=function(t,e,i){if(t.hasOwnProperty("version")){t=this.mergeVariant(this._getStandardVariant(),t,e)}this._applyVariant(t,e,i,t.version);this.invalidate()};L.prototype.determineMandatoryFilterItems=function(){var t;var e=[];var i=this._retrieveVisibleAdvancedItems();for(t=0;t<i.length;t++){if(i[t].filterItem.getMandatory()===true){if(i[t].control){e.push(i[t].filterItem)}}}return e};L.prototype.determineAsyncFilters=function(t){var e,i,r,a=[],n=this.getAllFilterItems(true);for(e=0;e<n.length;e++){r=n[e];i=this.determineControlByFilterItem(r,true);if(i&&i.isA("sap.m.ComboBox")&&i.getDomRef()!==null&&!r.data("isCustomField")){if(t.bAll){a.push(r)}else if(t.bNonMandatory&&!r.getMandatory()){a.push(r)}else if(t.bMandatory&&r.getMandatory()){a.push(r)}}}return a};L.prototype.determineControlByFilterItem=function(t,e){var i,r=null;var a,n;if(!t||!e&&t._isParameter()){return null}if(this._aBasicAreaSelection){for(i=0;i<this._aBasicAreaSelection.length;i++){a=this._aBasicAreaSelection[i];if(t===a.filterItem){return a.control}}}if(this._mAdvancedAreaFilter){for(r in this._mAdvancedAreaFilter){if(r){n=this._mAdvancedAreaFilter[r];if(n&&n.items){for(i=0;i<n.items.length;i++){a=n.items[i];if((e||!a.filterItem._isParameter())&&t===a.filterItem){return a.control}}}}}}return null};L.prototype.determineControlByName=function(t,e){var i=this._determineEnsuredItemByName(t,e);if(i&&i.filterItem&&!i.filterItem._isParameter()){return i.control}return null};L.prototype.determineLabelByName=function(t,e){var i=this._determineEnsuredItemByName(t,e);if(i&&i.filterItem){return i.filterItem._oLabel}return null};L.prototype._determineEnsuredItemByName=function(t,e){if(!e){e=this._determineGroupNameByName(t)}this._ensureFilterLoaded([{name:t,group:e}]);return this._determineItemByName(t,e)};L.prototype._determineGroupNameByName=function(t){if(this._aFields){for(var e=0;e<this._aFields.length;e++){if(this._aFields[e].fieldName===t){return this._aFields[e].groupName}}}var i=this._determineFilterItemByName(t);if(i){var r=i.getGroupName();if(r!==L.INTERNAL_GROUP){return r}}return null};L.prototype._determineItemByName=function(t,e){var i;var r,a;var n=e;if(!t){return null}if(!n){n=L.INTERNAL_GROUP}if(this._mAdvancedAreaFilter){a=this._mAdvancedAreaFilter[n];if(a&&a.items){for(i=0;i<a.items.length;i++){r=a.items[i];if(r&&r.filterItem&&r.filterItem.getName()===t){return r}}}}return null};L.prototype.determineFilterItemByName=function(t,e){var i;if(e){i=this._determineEnsuredItemByName(t,e)}else{i=this._determineEnsuredItemByName(t)}if(i&&i.filterItem){return i.filterItem}return null};L.prototype._determineFilterItemByName=function(t){var e,i;if(this._mAdvancedAreaFilter){for(e in this._mAdvancedAreaFilter){i=this._determineItemByName(t,e);if(i){return i.filterItem}}}return null};L.prototype._determineByControl=function(t){var e=null,i;if(this._mAdvancedAreaFilter){for(e in this._mAdvancedAreaFilter){if(e){var r=this._mAdvancedAreaFilter[e];if(r&&r.items){for(i=0;i<r.items.length;i++){if(r.items[i]&&r.items[i].control===t){return r.items[i]}}}}}}return null};L.prototype._applyAttributes=function(){if(this._isPhone()||this._isTablet()){var t=this.getAllFilterItems(true);if(t.length>0){for(var e=0;e<t.length;e++){var i=t[e],r=i._getControl(),a=i.getName();this._applyInputModeAttribute(r,a)}}}};L.prototype._applyInputModeAttribute=function(t,e){if(this._oFilterProvider&&this._oFilterProvider._aFilterBarNumericFieldMetadata&&this._oFilterProvider._aFilterBarNumericFieldMetadata.indexOf(e)!==-1){var i=t.getDomRef("inner");if(i){i.setAttribute("inputmode","decimal");i.setAttribute("pattern","[0-9]+([.,][0-9]+)?")}}};L.prototype._destroyLazyFilterControl=function(){var t,e;if(this._aFields&&this._aFields.length>0){if(this._aFields&&this._aFields.length>0){for(t=0;t<this._aFields.length;t++){e=this._aFields[t];if(e.factory){if(e.control){e.control.destroy()}}}}}};L.prototype._removeInputRenderingDelegate=function(){var t,e,i;if(this._mAdvancedAreaFilter){for(e in this._mAdvancedAreaFilter){if(e&&this._mAdvancedAreaFilter[e]&&this._mAdvancedAreaFilter[e].items){for(t=0;t<this._mAdvancedAreaFilter[e].items.length;t++){i=this._mAdvancedAreaFilter[e].items[t];if(i&&i.control&&i.control._onAfterInputRenderingDelegate){i.control.removeDelegate(i.control._onAfterInputRenderingDelegate)}}}}}};L.prototype._destroyFilterControls=function(){if(!this.getAdvancedMode()){this._destroyLazyFilterControl()}this._removeInputRenderingDelegate()};L.prototype._registerVariantManagement=function(){if(this._oVariantManagement){this._oVariantManagement.attachSave(this._variantSave,this);this._oVariantManagement.attachAfterSave(this._afterVariantSave,this)}};L.prototype._unregisterVariantManagement=function(){if(this._oVariantManagement){if(this._fInitialiseVariants){this._oVariantManagement.detachInitialise(this._fInitialiseVariants);this._fInitialiseVariants=null}this._oVariantManagement.detachSave(this._variantSave,this);this._oVariantManagement.detachAfterSave(this._afterVariantSave,this);if((!this.getUseToolbar()||this.getAdvancedMode())&&!this._oVariantManagement.getDomRef()){this._oVariantManagement.destroy()}}};L.prototype.showFilterDialog=function(){if(!this._oAdaptFiltersDialog){this.showAdaptFilterDialog()}};L.prototype.addFilterDialogContent=function(t){if(this._oAdaptFiltersDialog){return t}return null};L.prototype.getFilterDialogContent=function(){if(this._oAdaptFiltersDialog){return new T}return null};L.prototype.setShowOldFilterDialog=function(){};L.prototype._getFilterControlById=function(t){for(var e in this._mAdvancedAreaFilter){var i=this._mAdvancedAreaFilter[e];for(var r=0;r<i.items.length;r++){var a=i.items[r];if(a.control&&a.control.getId()===t){return a.control}}}return null};L.prototype._getFilterControlByIndex=function(t){var e=0;for(var i in this._mAdvancedAreaFilter){var r=this._mAdvancedAreaFilter[i];for(var a=0;a<r.items.length;a++){var n=r.items[a];if(n.filterItem.getVisibleInFilterBar()){if(e===t){return n.control}e++}}}};function w(t,e){var i=t.filter(function(t){return t.getText()===e});return i.length>0}L.prototype._getFilterControlByLabel=function(t){for(var e in this._mAdvancedAreaFilter){var i=this._mAdvancedAreaFilter[e];for(var r=0;r<i.items.length;r++){var a=i.items[r];if(a.control){if(w(a.control.getLabels(),t)){return a.control}}}}};L.prototype._isFilterItemInBasicGroup=function(t){return t&&!t.getGroupName()||t.getGroupName()===L.INTERNAL_GROUP};L.prototype._shouldBeVisible=function(t){return t.filterItem.getMandatory()&&!this._hasFilterValue(t.filterItem)||t.name==="_BASIC_SEARCH_FIELD"};L.prototype.exit=function(){a.prototype.exit.apply(this,arguments);this._unregisterVariantManagement();this._destroyFilterControls();window.sessionStorage.removeItem(this.getId());window.sessionStorage.removeItem("semanticDates");if(this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.destroy();this._oAdaptFiltersDialog=null}if(this._oAdaptFiltersDialogModel){this._oAdaptFiltersDialogModel=null}if(this._oAdaptFiltersPanel){this._oAdaptFiltersPanel=null}if(this.oModel){this.oModel.destroy();this.oModel=null}if(this._oToolbarSpacer){this._oToolbarSpacer.destroy();this._oToolbarSpacer=null}if(this._oSeparator){this._oSeparator.destroy();this._oSeparator=null}this._aFields=null;this._aBasicAreaSelection=null;this._mAdvancedAreaFilter=null;this._oVariantManagement=null;this._oCollectiveSearch=null;this._oVariant=null;this._fRegisteredFetchData=null;this._fRegisteredApplyData=null;this._fRegisterGetFiltersWithValues=null;this._fRegisteredFilterChangeHandlers=null;this._oBasicSearchField=null;this._bSearchFiredFromFilterBar=false;this._oInitializedDeferred=null;this._bDelegateAdded=false;t.detachChange(this._onLocalizationChanged)};return L});
//# sourceMappingURL=FilterBar.js.map