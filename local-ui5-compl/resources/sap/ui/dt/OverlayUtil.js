/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/UIArea","sap/ui/dt/ElementUtil","sap/ui/dt/OverlayRegistry"],function(e,r,n){"use strict";var t={};t.isInTargetZoneAggregation=function(e){var r=e.getParent();return!!r&&r.isTargetZone()};t.getParentInformation=function(e){var n=e.getParentElementOverlay();if(n){var t=n.getElement();var i=e.getParentAggregationOverlay().getAggregationName();var a=r.getAggregation(t,i);var g=e.getElement();var l=a.indexOf(g);return{parent:t,aggregation:i,index:l}}return{parent:null,aggregation:"",index:-1}};t.getClosestOverlayFor=function(e){if(!e){return null}var r=e;var t=n.getOverlay(r);while(r&&!t){r=r.getParent();t=n.getOverlay(r)}return t};t.getGeometry=function(e){var r;var n;var t;var i;e.forEach(function(e){if(e&&e.visible){if(!r||e.position.left<r){r=e.position.left}if(!t||e.position.top<t){t=e.position.top}var a=e.position.left+e.size.width;if(!n||a>n){n=a}var g=e.position.top+e.size.height;if(!i||g>i){i=g}}});if(typeof r==="number"){return{size:{width:n-r,height:i-t},position:{left:r,top:t},visible:true}}};t.getFirstDescendantByCondition=function(e,r){if(!r){throw new Error("expected condition is 'undefined' or not a function")}var n=t.getAllChildOverlays(e);for(var i=0,a=n.length;i<a;i++){var g=n[i];if(r(g)){return g}var l=this.getFirstDescendantByCondition(g,r);if(l){return l}}return undefined};t.getLastDescendantByCondition=function(e,r){if(!r){throw new Error("expected condition is 'undefined' or not a function")}var n=t.getAllChildOverlays(e);for(var i=n.length-1,a=-1;i>a;i--){var g=n[i];if(r(g)){return g}var l=this.getLastDescendantByCondition(g,r);if(l){return l}}return undefined};t.getAllChildOverlays=function(e){var r=[];var n=[];if(!e){return r}var t=e.getChildren();for(var i=0;i<t.length;i++){n=t[i].getChildren();if(n&&n.length>0){r=r.concat(n)}}return r};t.getFirstChildOverlay=function(e){var r=this.getAllChildOverlays(e);if(r.length){return r[0]}return undefined};t.getLastChildOverlay=function(e){var r=this.getAllChildOverlays(e);if(r.length){return r[r.length-1]}return undefined};t.getNextSiblingOverlay=function(e){if(!e){return undefined}var r=e.getParentAggregationOverlay();if(r){var n=r.getChildren();var t=n.indexOf(e);if(t!==n.length-1){return n[t+1]}else if(t===n.length-1){var i=e.getParentElementOverlay();n=i.getChildren();for(t=n.indexOf(r)+1;t<n.length;t++){var a=n[t].getChildren();if(a.length){return a[0]}}}}};t.getPreviousSiblingOverlay=function(e){if(!e){return undefined}var r=e.getParentAggregationOverlay();if(r){var n=r.getChildren();var t=n.indexOf(e);if(t>0){return n[t-1]}else if(t===0){var i=e.getParentElementOverlay();n=i.getChildren();for(t=n.indexOf(r)-1;t>=0;t--){var a=n[t].getChildren();if(a.length){return a[a.length-1]}}}}};t.getNextOverlay=function(e){if(!e){return undefined}var r=this.getFirstChildOverlay(e);if(r){return r}var n=this.getNextSiblingOverlay(e);if(n){return n}do{e=e.getParentElementOverlay();n=this.getNextSiblingOverlay(e)}while(e&&!n);return n};t.getPreviousOverlay=function(e){if(!e){return undefined}var r=e.getParentAggregationOverlay();if(!r){return undefined}var n=this.getPreviousSiblingOverlay(e);if(n){var t=n;do{n=t;t=this.getLastChildOverlay(n)}while(t);return n}return e.getParentElementOverlay()};t.iterateOverlayElementTree=function(e,r){r(e);e.getChildren().forEach(function(e){e.getChildren().forEach(function(e){this.iterateOverlayElementTree(e,r)},this)},this)};t.getClosestOverlayForNode=function(e){var n=r.getClosestElementForNode(e);return t.getClosestOverlayFor(n)};t.setFirstParentMovable=function(e,r){if(!r){const r=this.getFirstMovableParentOverlay(e);if(r){e._firstMovableParentOverlay=r;r.setMovable(false)}}else if(e._firstMovableParentOverlay){e._firstMovableParentOverlay.setMovable(true);delete e._firstMovableParentOverlay}};t.findAllSiblingOverlaysInContainer=function(e,r){var n=e.getParentElementOverlay();var i=[];if(n){if(n!==r){var a=t.findAllSiblingOverlaysInContainer(n,r);i=a.map(function(r){var n=r.getAggregationOverlay(e.getParentAggregationOverlay().getAggregationName());return n?n.getChildren():[]}).reduce(function(e,r){return e.concat(r)},[])}else{var g=e.getParentAggregationOverlay().getAggregationName();var l=n.getAggregationOverlay(g);i=l&&l.getChildren()||[]}}i=i.filter(function(e){return e.getDesignTimeMetadata()});return i};t.findAllOverlaysInContainer=function(e,r){var i=e.getRelevantContainer()||e.getElement();var a=n.getOverlay(i);var g=[];if(!a){return g}var l=t._findAllSiblingsAndParents(e,a,0,r);if(l[0]){for(var o in l){g=g.concat(l[o])}var f=[];var v=r?g:l[0];v.forEach(function(e){f=f.concat(t._findAllChildrenInContainer(e,i))});g=g.concat(f)}else{g=t._findAllChildrenInContainer(e,i)}g.push(a);g=g.filter(function(e){return e.getDesignTimeMetadata()});return g};t._findAllSiblingsAndParents=function(e,r,n,i){var a=e.getParentElementOverlay();if(!a){return[]}function g(e){var r=e.getAggregationNames();var n=[];r.forEach(function(r){var t=e.getAggregationOverlay(r);var i=t?t.getChildren():[];n=i.concat(n)});return n}if(a!==r){var l;var o;l=t._findAllSiblingsAndParents(a,r,n+1,i);if(i){var f=[];l[n+1].forEach(function(e){f.concat(g(e))});l[n]=f;return l}o=l[n+1].map(function(r){var n=e.getParentAggregationOverlay().getAggregationName();var t=r.getAggregationOverlay(n);return t?t.getChildren():[]}).reduce(function(e,r){return e.concat(r)},[]);l[n]=o;return l}var v=[];if(i){v=g(a)}else{var u=e.getParentAggregationOverlay().getAggregationName();v=e.getParentElementOverlay().getAggregationOverlay(u).getChildren()}var d={};d[n]=v;return d};t._findAllChildrenInContainer=function(e,r,n){n||=[];if(e.getChildren().length>0){e.getChildren().forEach(function(e){e.getChildren().forEach(function(e){if(e.getRelevantContainer()===r){n.push(e);t._findAllChildrenInContainer(e,r,n)}})})}return n};t.findAllUniqueAggregationOverlaysInContainer=function(e,r){var n=t.findAllSiblingOverlaysInContainer(e,r);return n.map(function(e){return e.getParentAggregationOverlay()}).filter(function(e,r,n){return n.indexOf(e)===r})};t.getIndexInAggregation=function(e,t,i){var a=r.getAggregation(t,i).filter(function(r){return!!n.getOverlay(r)||r===e});return a.indexOf(e)};function i(r,n){var t;var a;var g=r.getParent();var l=false;if(r.isA("sap.ui.dt.ElementOverlay")){var o=r.getParentElementOverlay();if(g){t=g.getAggregationName();a=g.getChildren().indexOf(r);l=o&&o.getAggregationOverlay(t,"AggregationBindingTemplateOverlays")}else{a=-1}n.push({overlayId:r.getId(),aggregation:t,index:a});if(l){return{overlayId:o.getId(),aggregation:t,stack:n}}}if(!g||g instanceof e){return{overlayId:undefined,aggregation:undefined,stack:n}}return i(g,n)}t.getClosestBoundControl=function(e){return i(e,[])};t.findParentOverlaysWithScrollbar=function(e){var r=[];function n(e){if(e._oScrollbarSynchronizers.size>0){r.push(e)}if(!e.getParent()){return r}return n(e.getParent())}return n(e)};t.getFirstMovableParentOverlay=function(e){function r(e){if(e.isMovable()){return e}if(!e.getParentElementOverlay()){return undefined}return r(e.getParentElementOverlay())}const n=e.getParentElementOverlay();if(n){return r(n)}return undefined};return t},true);
//# sourceMappingURL=OverlayUtil.js.map