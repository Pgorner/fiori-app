/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./PropertyHelper","../util/PropertyHelper"],(e,t)=>{"use strict";const r=e.extend("sap.ui.mdc.table.V4AnalyticsPropertyHelper",{constructor:function(t,r){this._bEnableAggregatableAttribute=true;e.call(this,t,r,{technicallyGroupable:{type:"boolean",default:{value:"attribute:groupable"},inComplexProperty:{valueIfNotAllowed:false}},technicallyAggregatable:{type:"boolean",default:{value:"attribute:aggregatable"},inComplexProperty:{valueIfNotAllowed:false}},customAggregate:{type:{contextDefiningProperties:{type:"PropertyReference[]"}}},additionalProperties:{type:"PropertyReference[]"}})}});r.prototype.validateProperty=function(r,o,a){e.prototype.validateProperty.apply(this,arguments);if(r.groupable&&r.extension?.technicallyGroupable===false){t.throwInvalidPropertyError("A property cannot be groupable when not technically groupable.",r)}if(r.aggregatable&&r.extension?.technicallyAggregatable===false){t.throwInvalidPropertyError("A property cannot be aggregatable when not technically aggregatable.",r)}const n=(r.groupable||r.extension?.technicallyGroupable)===true;const i=(r.aggregatable||r.extension?.technicallyAggregatable)===true;if(r.isKey){if(!n){t.reportInvalidProperty("A key property must be technically groupable.",r)}if(i){t.throwInvalidPropertyError("A key property must not be technically aggregatable.",r)}}const l=r.extension?.additionalProperties??[];if(!n&&!i&&l.length>0){t.throwInvalidPropertyError("'additionalProperties' must not contain property keys if the property is neither"+" technically groupable nor technically aggregatable.",r)}if(n&&!i){if(l.length>1){t.throwInvalidPropertyError("'additionalProperties' contains more than one property.",r)}if(l.length===1){if(!o.some(e=>{const t=e=>e.key||e.name;return r.extension.additionalProperties[0]===t(e)&&e.text===t(r)})){t.throwInvalidPropertyError("The property in 'additionalProperties' does not reference this property in"+" 'text'.",r)}}}if(l.length>0){if(l.includes(r.text)){t.throwInvalidPropertyError("'additionalProperties' must not contain the text.",r)}if(l.includes(r.unit)){t.throwInvalidPropertyError("'additionalProperties' must not contain the unit.",r)}}const p=new Set(l);for(const e of p){const t=o.find(t=>t.key===e||t.name===e);const r=t.extension?.additionalProperties??[];for(const e of r){p.add(e)}}if(p.difference(new Set(l)).size>0){t.throwInvalidPropertyError("All nested additional properties must be listed at root level.",r)}};r.prototype.prepareProperty=function(r,o){e.prototype.prepareProperty.apply(this,arguments);if(!t.isPropertyComplex(r)&&r.extension.additionalProperties.length>0){r.groupable=false}Object.defineProperty(r,"getAggregatableProperties",{value:function(){return r.getSimpleProperties().filter(e=>e.aggregatable)}})};return r});
//# sourceMappingURL=V4AnalyticsPropertyHelper.js.map