// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/services/AppConfiguration","sap/ui/Device","sap/ushell/Config","sap/ushell/utils","sap/ui/performance/Measurement","sap/ui/util/Mobile","sap/ui/core/Theming","sap/ushell/Container","sap/base/util/deepEqual"],function(e,t,s,n,i,a,o,c,l){"use strict";function p(){this.bIconSet={};this._getFavicon=async function(){let[e]=await n.getThemingParameters(["sapUiShellFavicon"]);let t=false;if(e){var i=/url[\s]*\('?"?([^'")]*)'?"?\)/.exec(e);if(i){e=i[1];t=true}else if(e==="''"||e==="none"){e=null}}var a=s.last("/core/shell/favIcon");if(a&&(e===null||e===undefined)){e=a;t=true}if(!e){var o=sap.ui.require.toUrl("sap/ushell");e=o+"/themes/base/img/launchpad_favicon.ico"}return{favicon:e,isCustomFavicon:t}};this.getAppIcon=function(){var t="sap-icon://folder";var s=e.getMetadata();if(s&&s.icon){t=s.icon}return t};this.setAppIcons=function(){i.start("FLP:ShellController.setAppIcons","setValues","FLP");o.attachApplied(()=>this.setValues());i.end("FLP:ShellController.setAppIcons")};this.setValues=async function(){var e=sap.ui.require.toUrl("sap/ushell");var t=await this._getFavicon();var s=t.favicon;if(t.isCustomFavicon){const e={phone:s,"phone@2":s,tablet:s,"tablet@2":s,favicon:s,precomposed:false};if(l(this.bIconSet,e)){return}a.setIcons(e);this.bIconSet=e}else{const t={phone:e+"/themes/base/img/launchicons/phone-icon_120x120.png","phone@2":e+"/themes/base/img/launchicons/phone-retina_180x180.png",tablet:e+"/themes/base/img/launchicons/tablet-icon_152x152.png","tablet@2":e+"/themes/base/img/launchicons/tablet-retina_167x167.png",favicon:s,precomposed:false};if(l(this.bIconSet,t)){return}a.setIcons(t);this.bIconSet=t}};this._applyContentDensityByPriority=async function(t,s){if(t===undefined){const s=e.getMetadata();if(s.compactContentDensity&&!s.cozyContentDensity){t=true}else if(!s.compactContentDensity&&s.cozyContentDensity){t=false}}await this._applyContentDensityClass(t,s)};this._applyContentDensityClass=async function(e,s){function n(e){document.body.classList.toggle("sapUiSizeCompact",e);document.body.classList.toggle("sapUiSizeCozy",!e);if(s===true){sap.ui.require(["sap/ushell/components/applicationIntegration/application/PostMessageUtils"],function(t){t.postMessageToMultipleIframes("sap.ushell.appRuntime","uiDensityChange",{isTouch:e?"0":"1"})})}}if(!t.system.desktop&&!t.system.combi){e=false}if(e===undefined){const t=await c.getServiceAsync("UserInfo");const s=t.getUser?.()?.getContentDensity();if(s==="compact"){e=true}else if(s==="cozy"){e=false}else{e=this._isCompactContentDensityByDevice()}}n(!!e)};this._isCompactContentDensityByDevice=function(){return!t.support.touch};this.restore=function(){this._applyContentDensityByPriority();this.setAppIcons()}}return new p},true);
//# sourceMappingURL=AppMeta.js.map