// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/utils","sap/ushell/components/applicationIntegration/application/PostMessageUtils","sap/ushell/Container"],function(e,t,a){"use strict";var s={};s.guiStatefulCreateApp=async function(e,a,s){if(a.setCurrentAppUrl){a.setProperty("currentAppUrl",s.url,true)}if(a.setCurrentAppTargetResolution){a.setProperty("currentAppTargetResolution",s,true)}a.setProperty("iframeReusedForApp",true,true);await t.postMessageToIframeApp(a,"sap.gui","triggerCloseSessionImmediately",{},true);await r(a,s);if(a.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){a.toggleStyleClass("sapUShellApplicationContainerIframeHidden",false)}else{a.toggleStyleClass("hidden",false)}};s.guiStatefulCloseCurrentApp=async function(e){return t.postMessageToIframeApp(e,"sap.gui","triggerCloseSession",{},false)};async function r(s,r){let p=r.url;p=await e.appendSapShellParam(p);p=e.filterOutParamsFromLegacyAppURL(p);let i;const l={url:p};if(s.getIframeWithPost&&s.getIframeWithPost()===true){var n=e.getParamKeys(p);if(n.aAppStateNamesArray.length>0){const e=await a.getServiceAsync("Navigation");try{const t=await e.getAppStateData(n.aAppStateKeysArray);i={};n.aAppStateNamesArray.forEach(function(e,a){if(t[a]){i[e]=t[a]}})}catch{}}else{i={}}}if(i){i["sap-flp-url"]=a.getFLPUrl(true);i["system-alias"]=s.getSystemAlias();l["sap-flp-params"]=i}return t.postMessageToIframeApp(s,"sap.its","startService",l,true)}return s},false);
//# sourceMappingURL=WebGUIStatefulHandler.js.map