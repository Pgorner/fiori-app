// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/util/deepExtend","sap/ui/thirdparty/jquery"],function(e,jQuery){"use strict";var s="user.postapi.";function t(){var e,s;this.init=function(t,n){e=t;s=n};this.getInterface=function(){var t={};t.registerPostMessageAPIs=n.bind(null,s);t[e===true?"postMessageToApp":"postMessageToFlp"]=i.bind(null,e);t.createPostMessageResult=r;return t}}function n(t,n,i){var r={status:"success",desc:""};var u={isActiveOnly:true,distributionType:["all"]};if(n===undefined||Object.keys(n).length<=0){r.status="error";r.desc="no handler was found to register";return r}if(i===undefined){i=false}Object.keys(n).forEach(function(t){if(typeof t!=="string"){r.status="error";r.desc="oPostMessageAPIs should contain only string keys"}else if(i===false&&t.indexOf(s)!==0){r.status="error";r.desc="all user custom Message APIs must start with '"+s+"'"}else{Object.keys(n[t]).forEach(function(s){if(s=="inCalls"){n[t].oServiceCalls=n[t][s];delete n[t][s]}else if(s=="outCalls"){Object.keys(n[t][s]).forEach(function(i){n[t][s][i]=e({},u,n[t][s][i])});n[t].oRequestCalls=n[t][s];delete n[t][s]}else{r.status="error";r.desc="api should contain either 'inCalls' or 'outCalls'"}})}});if(r.status==="success"){t(n)}return r}function i(e,s,t,n){var i=new jQuery.Deferred;if(n===undefined){n={}}if(e){sap.ui.require(["sap/ushell/components/applicationIntegration/application/PostMessageUtils"],function(e){e.postMessageToMultipleIframes(s,t,n,true).then(function(e){i.resolve(e&&e[0]&&e[0].body.result)})})}else{sap.ui.require(["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(e){e.sendMessageToOuterShell(s+"."+t,n).done(function(e){i.resolve(e)})})}return i.promise()}function r(e){if(e===undefined){e={}}return(new jQuery.Deferred).resolve(e).promise()}return new t});
//# sourceMappingURL=PostMessageAPIInterface.js.map