// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/ui/core/Element","sap/ui/core/UIComponent","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/resources","sap/ushell/utils/WindowUtils","sap/ushell/ui/shell/ShellHeadItem","sap/ushell/Container"],function(e,t,n,o,i,r,s,u,c,a){"use strict";function d(){return t.getElementById("productSwitchBtn")}function l(){return t.getElementById("sapUshellProductSwitchPopover")}return n.extend("sap.ushell.components.shell.ProductSwitch.Component",{metadata:{version:"1.132.1",library:"sap.ushell.components.shell.ProductSwitch",dependencies:{libs:{"sap.m":{},"sap.f":{lazy:true}}}},createContent:function(){this.oModel=this._getModel()},_getModel:function(){var t=this,n=new i;n.loadData(r.last("/core/productSwitch/url")).then(function(){var o=n.getData();if(o.length===0){e.debug("There are no other profucts configured for your user. ProductSwitch button will be hidden.")}else{t._addProductSwitchButtonToHeader()}}).catch(function(t){e.debug(t)});return n},_openProductSwitch:function(){var e=l(),n=Promise.resolve();if(!e){n=new Promise(function(e,t){sap.ui.require(["sap/ui/core/Fragment"],function(n){n.load({name:"sap.ushell.components.shell.ProductSwitch.ProductSwitch",type:"XML",controller:this}).then(e).catch(t)}.bind(this),t)}.bind(this)).then(function(t){e=t;e.setModel(this.oModel);e.setModel(s.i18nModel,"i18n");if(o.system.phone){e.setShowHeader(true)}}.bind(this))}n.then(function(){var n=d();if(!n||!n.$().width()){n=t.getElementById("endItemsOverflowBtn")}e.openBy(n)});return n},onProductItemPress:function(e){var t=e.getParameter("itemPressed").getTargetSrc();l().close();u.openURL(t,"_blank")},_addProductSwitchButtonToHeader:function(){var e=new c({id:"productSwitchBtn",icon:"sap-icon://grid",visible:true,text:s.i18n.getText("productSwitch"),ariaHaspopup:"dialog",press:this._openProductSwitch.bind(this)});a.getRendererInternal("fiori2").showHeaderEndItem([e.getId()],false)},exit:function(){var e=l();if(!e){e.destroy()}var t=d();if(t){t.destroy()}}})});
//# sourceMappingURL=Component.js.map