// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/ui/launchpad/VizInstance","sap/m/library","sap/base/Log","sap/ushell/library","sap/ushell/utils/chipsUtils","sap/ushell/ui/launchpad/VizInstanceRenderer","sap/ushell/Container"],function(t,i,e,n,s,a,r){"use strict";var o=i.LoadState;var p=n.DisplayFormat;var h=t.extend("sap.ushell.ui.launchpad.VizInstanceAbap",{metadata:{library:"sap.ushell"},renderer:a});h.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oChipInstancePromise=r.getServiceAsync("PageBuilding").then(function(t){var i=t.getFactory();var e=this.getInstantiationData();var n;var a;if(!e.simplifiedChipFormat){n={chipId:e.chip.id,chip:e.chip}}else{var r=e.chip||{};a=r.bags;n={chipId:r.chipId,configuration:r.configuration?JSON.stringify(r.configuration):"{}"}}var o=i.createChipInstance(n);s.addBagDataToChipInstance(o,a);return o}.bind(this))};h.prototype.load=function(t){return this._oChipInstancePromise.then(function(t){this._oChipInstance=t;return new Promise(this._oChipInstance.load)}.bind(this)).then(function(){if(this.getPreview()){var t=this._oChipInstance.getContract("preview");if(t){t.setEnabled(true)}}this._setVisible(this.getActive());return this._oChipInstance.getImplementationAsSapui5Async()}.bind(this)).then(function(t){this._setChipInstanceType();this.setContent(t);if(t.getComponentInstance&&t.getComponentInstance()){t.getComponentInstance().setParent(this)}return Promise.resolve()}.bind(this)).catch(function(t){this.setState(o.Failed);return Promise.reject(t)}.bind(this))};h.prototype._setChipInstanceType=function(){var t=this._oChipInstance.getContract("types");if(t){t.setType(this._mapDisplayFormatToChip(this.getDisplayFormat()))}};h.prototype._mapDisplayFormatToChip=function(t){var i={};i[p.Standard]="tile";i[p.StandardWide]="tile";i[p.Compact]="link";i[p.Flat]="flat";i[p.FlatWide]="flatwide";return i[t]};h.prototype._setVisible=function(t){var i=this._oChipInstance&&!this._oChipInstance.isStub()&&this._oChipInstance.getContract("visible");if(i){i.setVisible(t)}};h.prototype.refresh=function(){if(this._oChipInstance){this._oChipInstance.refresh()}};h.prototype.setActive=function(t,i){this._setVisible(t);if(i){this.refresh()}return this.setProperty("active",t,false)};return h});
//# sourceMappingURL=VizInstanceAbap.js.map