{"version":3,"file":"CardGeneratorModel-dbg-dbg.js","names":["sap","ui","define","sap_cards_ap_common_services_RetrieveCard","CoreLib","JSONModel","___odata_ODataUtils","___ApplicationInfo","___FooterActions","___Formatter","___IntegrationCardHelper","___NavigationProperty","___PropertyExpression","_iteratorSymbol","Symbol","iterator","_settle","pact","state","value","s","_Pact","v","o","bind","then","observer","prototype","onFulfilled","onRejected","result","callback","e","_this","_isSettledPact","thenable","_forTo","array","body","check","i","reject","_cycle","length","getCardActionInfo","oAppComponent","data","resourceModel","mCardManifest","_temp2","_getDefaultAction","annotationActions","cardActions","addedActions","bODataV4","styles","getActionStyles","isAddActionEnabled","actionExists","odataModel","entitySet","ApplicationInfo","getInstance","fetchDetails","ODataModelVersion","V4","getCardActions","_temp","Promise","resolve","getDefaultAction","_forOf","target","step","next","done","return","_fixup","TypeError","values","push","getKeyParameters","createPathWithEntityContext","fetchDataAsync","getLabelForEntitySet","getNavigationPropertyInfoFromEntity","getPropertyInfoFromEntity","formatPropertyDropdownValues","getDefaultPropertyFormatterConfig","getDefaultPropertyFormatterConfigForNavProperties","parseCard","getNavigationPropertiesWithLabel","resolvePropertyPathFromExpression","UnitCollection","Name","Value","_mergePropertyFormatters","defaultPropertyFormatters","arguments","undefined","userProvidedPropertyFormatters","mergedFormatters","propertyFormatter","find","formatter","property","updateUnitOfMeasures","unitOfMeasures","formatterConfigsWithUnit","forEach","matchingProperty","unitConfig","name","parameters","replace","formatterProperty","propertyKeyForDescription","propertyKeyForId","getCardGeneratorDialogModel","applicationInfo","oResourceBundle","getResourceBundleFor","mManifest","getManifest","oAppModel","getModel","cardTitle","title","cardSubtitle","description","entitySetWithObjectContext","serviceUrl","semanticObject","action","entitySetName","properties","propertiesWithNavigation","navigationProperty","selectProperties","map","urlParameters","$select","join","path","_temp16","propertyValueFormatters","parsedManifest","formatterConfigurationFromCardManifest","addLabelsForProperties","mData","mainIndicatorOptions","mainIndicatorCriticalityOptions","criticalityOptions","selectedKeyCriticality","criticality","mainIndicatorStatusKey","trends","trendOptions","sideIndicators","sideIndicatorOptions","mainIndicatorNavigationSelectedKey","navigationValue","selectedNavigationalProperties","_ref","propertiesWithLabel","navigationPropertyData","selectedNavigationPropertyHeader","updateNavigationPropertiesWithLabel","mainIndicatorNavigationSelectedValue","labelWithValue","filter","formatterConfig","formatterName","advancedFormattingOptions","textArrangements","textArrangementsFromCardManifest","sourceCriticalityProperty","targetFormatterProperty","sourceUoMProperty","textArrangementSourceProperty","isPropertyFormattingEnabled","mainIndicatorStatusUnit","_temp14","_temp13","groups","getText","items","label","isEnabled","isNavigationEnabled","_temp12","_temp11","headerUOM","_temp10","subtitle","_temp9","_getCardActionInfo","_getKeyParameters","dialogModelData","configuration","indicatorsValue","selectedTrendOptions","selectedIndicatorOptions","selectedContentNavigation","selectedHeaderNavigation","oDataV4","$data","targetUnit","deviationUnit","errorControls","actions","groupLimitReached","keyParameters","appIntent","dialogModel","propertyValueFormattersForNavigationalProperties","_temp15","_temp8","group","item","propertyPath","_temp6","includes","navigationEntitySet","split","_ref2","navigationalProperties","_temp7","textArrangement","_temp5","_temp3","isNavigationForId","_ref3","navigationalPropertiesForId","_temp4","isNavigationForDescription","_ref4","navigationalPropertiesForDescription","propertyExists","uomProperty","UOM","category","navigationProperties","navigationEntityName","__exports","__esModule"],"sources":["CardGeneratorModel.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport { getKeyParameters } from \"sap/cards/ap/common/services/RetrieveCard\";\nimport Component from \"sap/ui/core/Component\";\nimport CoreLib from \"sap/ui/core/Lib\";\nimport { CardManifest } from \"sap/ui/integration/widgets/Card\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport V2ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport V4ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport ResourceModel from \"sap/ui/model/resource/ResourceModel\";\nimport { ArrangementOptions } from \"../app/controls/ArrangementsEditor\";\nimport { PropertyInfoMap } from \"../odata/ODataTypes\";\nimport {\n\tcreatePathWithEntityContext,\n\tfetchDataAsync,\n\tgetLabelForEntitySet,\n\tgetNavigationPropertyInfoFromEntity,\n\tgetPropertyInfoFromEntity\n} from \"../odata/ODataUtils\";\nimport { ActionStyles, AnnotationAction, ControlProperties } from \"../types/ActionTypes\";\nimport { ApplicationInfo, ODataModelVersion } from \"./ApplicationInfo\";\nimport { getActionStyles, getCardActions, getDefaultAction } from \"./FooterActions\";\nimport {\n\tFormatterConfiguration,\n\tFormatterConfigurationMap,\n\tformatPropertyDropdownValues,\n\tgetDefaultPropertyFormatterConfig,\n\tgetDefaultPropertyFormatterConfigForNavProperties\n} from \"./Formatter\";\nimport { parseCard } from \"./IntegrationCardHelper\";\nimport { getNavigationPropertiesWithLabel } from \"./NavigationProperty\";\nimport { resolvePropertyPathFromExpression } from \"./PropertyExpression\";\n\nexport type GroupItem = {\n\tlabel: string;\n\tvalue: string;\n\tisEnabled: boolean;\n\tname: string;\n\tnavigationProperty?: string;\n\tisNavigationEnabled?: boolean;\n\tnavigationalProperties?: Array<string>;\n};\n\nexport type EntityType = {\n\t[key: string]: any;\n};\nexport type Property = {\n\tlabel?: string;\n\ttype: string;\n\tname: string;\n};\nexport type NavigationParameter = {\n\tname: string;\n\tvalue: Array<string>;\n\tproperties?: Property[];\n};\nexport type NavigationalData = {\n\tname: string;\n\tvalue: Property[];\n};\nexport type NavigationParameters = {\n\tparameters: NavigationParameter[];\n};\n\nexport type ObjectCardGroups = {\n\ttitle: string;\n\titems: Array<GroupItem>;\n};\n\nexport type CriticalityOptions = {\n\tactiveCalculation: boolean;\n\tname: string;\n\tcriticality: string;\n};\n\nexport type MainIndicatorOptions = {\n\tcriticality: Array<CriticalityOptions>;\n};\n\ntype UnitOfMeasures = {\n\tpropertyKeyForDescription: string;\n\tname: string;\n\tpropertyKeyForId: string;\n\tvalue: string;\n};\n\ntype AdvancedFormattingOptions = {\n\tunitOfMeasures: Array<UnitOfMeasures>;\n\ttextArrangements: Array<ArrangementOptions>;\n\tpropertyValueFormatters: Array<object>;\n\tsourceCriticalityProperty: Array<object>;\n\ttargetFormatterProperty: string;\n\tsourceUoMProperty: string;\n\tselectedKeyCriticality: string;\n\ttextArrangementSourceProperty: string;\n\tisPropertyFormattingEnabled?: boolean;\n};\n\nexport type TrendOptions = {\n\treferenceValue: string;\n\tdownDifference: string;\n\tupDifference: string;\n\ttargetValue?: string;\n\tsourceProperty?: string;\n};\nexport type SideIndicatorOptions = {\n\ttargetValue: string;\n\ttargetUnit: string;\n\tdeviationValue: string;\n\tdeviationUnit: string;\n\tsourceProperty?: string;\n};\n\ntype CardActions = {\n\tannotationActions: Array<AnnotationAction>;\n\taddedActions: ControlProperties[];\n\tbODataV4: boolean;\n\tstyles: ActionStyles[];\n\tisAddActionEnabled: boolean;\n\tactionExists: boolean;\n};\n\ntype PropertyValue = string | null | undefined;\n\nexport type TrendOrIndicatorOptions = {\n\tsourceProperty: string;\n};\n\ntype KeyParameter = {\n\tkey: string;\n\tformattedValue: string;\n};\n\n/**\n * Description for the interface CardGeneratorDialogConfiguration\n * @interface CardGeneratorDialogConfiguration\n * @property {string} title The title of the card\n * @property {string} subtitle The subtitle of the card\n * @property {string} headerUOM The header unit of measure\n * @property {MainIndicatorOptions} mainIndicatorOptions The main indicator options\n * @property {string} mainIndicatorStatusKey The main indicator status key\n * @property {string} mainIndicatorStatusUnit The main indicator status unit\n * @property {string} entitySet The entity set\n * @property {Array<ObjectCardGroups>} groups The groups of the card displayed on content\n * @property {Array<object>} properties The properties\n * @property {AdvancedFormattingOptions} advancedFormattingOptions The advanced formatting options\n * @property {Array<object>} selectedTrendOptions The selected trend options\n * @property {Array<object>} selectedIndicatorOptions The selected indicator options\n * @property {TrendOptions} trendOptions The trend options\n * @property {object} $data Data used for adaptive card preview\n * @property {object} targetUnit The target unit\n * @property {object} deviationUnit The deviation unit\n * @property {boolean} groupLimitReached Flag maintained to check if the group limit is reached\n * @property {Array<KeyParameter>} keyParameters The key parameters\n */\ninterface CardGeneratorDialogConfiguration {\n\ttitle: string;\n\tsubtitle?: string;\n\theaderUOM?: string;\n\tmainIndicatorOptions?: MainIndicatorOptions;\n\tmainIndicatorStatusKey?: string;\n\tmainIndicatorStatusUnit?: string;\n\tmainIndicatorNavigationSelectedValue?: string;\n\tmainIndicatorNavigationSelectedKey?: string;\n\tentitySet: string;\n\tgroups: Array<ObjectCardGroups>;\n\tproperties: Array<object>;\n\tadvancedFormattingOptions: AdvancedFormattingOptions;\n\tselectedTrendOptions: Array<TrendOptions>;\n\tselectedIndicatorOptions: Array<SideIndicatorOptions>;\n\tnavigationProperty: Array<object>;\n\tselectedContentNavigation: Array<NavigationParameter>;\n\tselectedHeaderNavigation: Array<NavigationParameter>;\n\tselectedNavigationPropertyHeader: NavigationParameter;\n\ttrendOptions: TrendOptions;\n\toDataV4: boolean;\n\tserviceUrl: string;\n\t$data?: object;\n\ttargetUnit?: object;\n\tdeviationUnit?: object;\n\tactions: CardActions;\n\tgroupLimitReached: boolean;\n\tkeyParameters: Array<KeyParameter>;\n}\n\ninterface CardGeneratorDialog {\n\ttitle: string;\n\tconfiguration: CardGeneratorDialogConfiguration;\n}\n\nconst UnitCollection = [\n\t{\n\t\tName: \"K\",\n\t\tValue: \"K\"\n\t},\n\t{\n\t\tName: \"%\",\n\t\tValue: \"%\"\n\t}\n];\n\n/**\n * Merges the default property formatters with the user provided property formatters\n *\n * @param {FormatterConfigurationMap} defaultPropertyFormatters The default property formatters\n * @param {FormatterConfigurationMap} userProvidedPropertyFormatters The user provided property formatters\n * @returns {FormatterConfigurationMap} The merged property formatters\n * @private\n *\n */\nexport function _mergePropertyFormatters(\n\tdefaultPropertyFormatters: FormatterConfigurationMap = [],\n\tuserProvidedPropertyFormatters: FormatterConfigurationMap = []\n): FormatterConfigurationMap {\n\tconst mergedFormatters = [...userProvidedPropertyFormatters] as FormatterConfigurationMap;\n\n\tfor (const propertyFormatter of defaultPropertyFormatters) {\n\t\tif (!mergedFormatters.find((formatter) => formatter.property === propertyFormatter.property)) {\n\t\t\tmergedFormatters.push({ ...propertyFormatter });\n\t\t}\n\t}\n\n\treturn mergedFormatters;\n}\n\nexport async function getCardActionInfo(\n\toAppComponent: Component,\n\tdata: Record<string, PropertyValue>,\n\tresourceModel?: ResourceModel,\n\tmCardManifest?: CardManifest\n) {\n\tconst { odataModel, entitySet } = ApplicationInfo.getInstance().fetchDetails();\n\tconst bODataV4 = odataModel === ODataModelVersion.V4;\n\tconst cardActions = getCardActions(oAppComponent, entitySet, bODataV4);\n\treturn {\n\t\tannotationActions: cardActions,\n\t\taddedActions: cardActions.length > 0 ? await getDefaultAction(resourceModel, data, mCardManifest) : [],\n\t\tbODataV4: bODataV4,\n\t\tstyles: getActionStyles(),\n\t\tisAddActionEnabled: true,\n\t\tactionExists: cardActions.length > 0\n\t};\n}\n\nexport function updateUnitOfMeasures(\n\tunitOfMeasures: Array<UnitOfMeasures>,\n\tformatterConfigsWithUnit: FormatterConfigurationMap\n): Array<UnitOfMeasures> {\n\tformatterConfigsWithUnit.forEach((formatter: FormatterConfiguration) => {\n\t\tconst matchingProperty = unitOfMeasures.find((unitConfig: UnitOfMeasures) => unitConfig.name === formatter.property);\n\t\tlet value = formatter.parameters?.[0].value?.replace(/\\$\\{/g, \"\");\n\t\tvalue = value?.replace(/\\}/g, \"\");\n\t\tconst formatterProperty = formatter.property;\n\n\t\tif (matchingProperty && value) {\n\t\t\tmatchingProperty.propertyKeyForDescription = value;\n\t\t\tmatchingProperty.value = value;\n\t\t} else if (value && formatterProperty) {\n\t\t\tunitOfMeasures.push({\n\t\t\t\tpropertyKeyForDescription: value,\n\t\t\t\tname: formatterProperty,\n\t\t\t\tpropertyKeyForId: formatterProperty,\n\t\t\t\tvalue: value\n\t\t\t});\n\t\t}\n\t});\n\treturn unitOfMeasures;\n}\n\nexport const getCardGeneratorDialogModel = async (oAppComponent: Component, mCardManifest?: CardManifest) => {\n\tconst applicationInfo = ApplicationInfo.getInstance().fetchDetails();\n\tconst oResourceBundle = CoreLib.getResourceBundleFor(\"sap.cards.ap.generator.i18n\");\n\tconst mManifest = oAppComponent.getManifest();\n\tconst oAppModel = oAppComponent.getModel();\n\tconst cardTitle: string = mManifest[\"sap.app\"].title;\n\tconst cardSubtitle: string = mManifest[\"sap.app\"].description;\n\tconst { entitySetWithObjectContext, serviceUrl, semanticObject, action } = applicationInfo;\n\tconst entitySetName = applicationInfo.entitySet;\n\tconst bODataV4 = applicationInfo.odataModel === ODataModelVersion.V4;\n\tconst entitySet = getLabelForEntitySet(bODataV4 ? (oAppModel as V4ODataModel) : (oAppModel as V2ODataModel), entitySetName);\n\tconst properties = getPropertyInfoFromEntity(\n\t\tbODataV4 ? (oAppModel as V4ODataModel) : (oAppModel as V2ODataModel),\n\t\tentitySetName,\n\t\tfalse\n\t);\n\tconst propertiesWithNavigation = getPropertyInfoFromEntity(\n\t\tbODataV4 ? (oAppModel as V4ODataModel) : (oAppModel as V2ODataModel),\n\t\tentitySetName,\n\t\ttrue,\n\t\toResourceBundle\n\t);\n\tconst navigationProperty = getNavigationPropertyInfoFromEntity(\n\t\tbODataV4 ? (oAppModel as V4ODataModel) : (oAppModel as V2ODataModel),\n\t\tentitySetName\n\t);\n\n\tconst selectProperties = properties.map((property) => property.name);\n\tlet urlParameters = {};\n\tif (selectProperties.length) {\n\t\turlParameters = {\n\t\t\t$select: selectProperties.join(\",\")\n\t\t};\n\t}\n\n\tconst path = await createPathWithEntityContext(entitySetWithObjectContext, oAppModel, bODataV4);\n\tconst data = await fetchDataAsync(serviceUrl, path, bODataV4, urlParameters);\n\tconst unitOfMeasures: Array<UnitOfMeasures> = [];\n\tconst mData: {\n\t\t[key: string]: PropertyValue;\n\t} = {};\n\t// We are adding labels and values for properties\n\taddLabelsForProperties(properties, data, mData, unitOfMeasures);\n\n\tlet propertyValueFormatters = getDefaultPropertyFormatterConfig(oResourceBundle, properties);\n\tconst propertyValueFormattersForNavigationalProperties = getDefaultPropertyFormatterConfigForNavProperties(oResourceBundle, navigationProperty);\n\tpropertyValueFormatters = _mergePropertyFormatters(propertyValueFormatters, propertyValueFormattersForNavigationalProperties);\n\n\tlet parsedManifest;\n\tif (mCardManifest) {\n\t\tparsedManifest = parseCard(mCardManifest, oAppComponent.getModel(\"i18n\") as ResourceModel, properties);\n\n\t\tfor (const textArrangement of parsedManifest.textArrangementsFromCardManifest) {\n\t\t\tif (textArrangement.isNavigationForDescription) {\n\t\t\t\tconst navigationEntitySet = textArrangement.propertyKeyForDescription;\n\t\t\t\tconst { propertiesWithLabel, navigationPropertyData } = await getNavigationPropertiesWithLabel(\n\t\t\t\t\toAppComponent,\n\t\t\t\t\tnavigationEntitySet,\n\t\t\t\t\tpath\n\t\t\t\t);\n\t\t\t\ttextArrangement.navigationalPropertiesForDescription = propertiesWithLabel;\n\t\t\t\tupdateNavigationPropertiesWithLabel(\n\t\t\t\t\tnavigationProperty,\n\t\t\t\t\tnavigationEntitySet,\n\t\t\t\t\ttextArrangement.navigationalPropertiesForDescription\n\t\t\t\t);\n\n\t\t\t\tif (mData[navigationEntitySet] === null || mData[navigationEntitySet] === undefined) {\n\t\t\t\t\tmData[navigationEntitySet] = navigationPropertyData[navigationEntitySet];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (textArrangement.isNavigationForId) {\n\t\t\t\tconst navigationEntitySet = textArrangement.propertyKeyForId as string;\n\t\t\t\tconst { propertiesWithLabel, navigationPropertyData } = await getNavigationPropertiesWithLabel(\n\t\t\t\t\toAppComponent,\n\t\t\t\t\tnavigationEntitySet,\n\t\t\t\t\tpath\n\t\t\t\t);\n\t\t\t\ttextArrangement.navigationalPropertiesForId = propertiesWithLabel;\n\t\t\t\tupdateNavigationPropertiesWithLabel(navigationProperty, navigationEntitySet, textArrangement.navigationalPropertiesForId);\n\n\t\t\t\tif (mData[navigationEntitySet] === null || mData[navigationEntitySet] === undefined) {\n\t\t\t\t\tmData[navigationEntitySet] = navigationPropertyData[navigationEntitySet];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (const group of parsedManifest.groups) {\n\t\t\tfor (const item of group.items) {\n\t\t\t\tconst propertyPath = resolvePropertyPathFromExpression(item.value, mCardManifest);\n\t\t\t\tif (propertyPath?.includes(\"/\")) {\n\t\t\t\t\tconst [navigationEntitySet, property] = propertyPath.replace(/[{}]/g, \"\").split(\"/\");\n\t\t\t\t\tconst { propertiesWithLabel, navigationPropertyData } = await getNavigationPropertiesWithLabel(\n\t\t\t\t\t\toAppComponent,\n\t\t\t\t\t\tnavigationEntitySet,\n\t\t\t\t\t\tpath\n\t\t\t\t\t);\n\t\t\t\t\titem.navigationalProperties = propertiesWithLabel;\n\t\t\t\t\titem.isNavigationEnabled = true;\n\t\t\t\t\titem.isEnabled = false;\n\t\t\t\t\titem.navigationProperty = property;\n\t\t\t\t\tupdateNavigationPropertiesWithLabel(navigationProperty, navigationEntitySet, item.navigationalProperties);\n\n\t\t\t\t\tif (mData[navigationEntitySet] === null || mData[navigationEntitySet] === undefined) {\n\t\t\t\t\t\tmData[navigationEntitySet] = navigationPropertyData[navigationEntitySet];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpropertyValueFormatters = _mergePropertyFormatters(propertyValueFormatters, parsedManifest?.formatterConfigurationFromCardManifest);\n\taddLabelsForProperties(propertiesWithNavigation, data, mData, unitOfMeasures);\n\n\tconst mainIndicatorOptions = parsedManifest?.mainIndicatorOptions;\n\tconst mainIndicatorCriticalityOptions = mainIndicatorOptions?.criticalityOptions || [];\n\tconst selectedKeyCriticality = mainIndicatorCriticalityOptions.length ? mainIndicatorCriticalityOptions[0].criticality : \"\";\n\tconst mainIndicatorStatusKey = parsedManifest?.mainIndicatorOptions.mainIndicatorStatusKey || \"\";\n\tconst trends = parsedManifest?.mainIndicatorOptions.trendOptions;\n\tconst sideIndicators = parsedManifest?.sideIndicatorOptions;\n\n\tconst mainIndicatorNavigationSelectedKey = parsedManifest?.mainIndicatorOptions.mainIndicatorNavigationSelectedKey || \"\";\n\tconst navigationValue = parsedManifest?.mainIndicatorOptions.navigationValue || \"\";\n\tconst selectedNavigationalProperties = [];\n\tconst { propertiesWithLabel, navigationPropertyData } = await getNavigationPropertiesWithLabel(\n\t\toAppComponent,\n\t\tmainIndicatorStatusKey,\n\t\tpath\n\t);\n\tconst selectedNavigationPropertyHeader = {\n\t\tname: mainIndicatorStatusKey,\n\t\tvalue: propertiesWithLabel\n\t};\n\tupdateNavigationPropertiesWithLabel(navigationProperty, mainIndicatorStatusKey, selectedNavigationPropertyHeader.value);\n\n\tif (mainIndicatorStatusKey.length > 0 && (mData[mainIndicatorStatusKey] === null || mData[mainIndicatorStatusKey] === undefined)) {\n\t\tmData[mainIndicatorStatusKey] = navigationPropertyData[mainIndicatorStatusKey];\n\t}\n\n\tif (selectedNavigationPropertyHeader.name) {\n\t\tselectedNavigationalProperties.push(selectedNavigationPropertyHeader);\n\t}\n\n\tconst mainIndicatorNavigationSelectedValue =\n\t\tselectedNavigationPropertyHeader.value.find((value) => value.name === mainIndicatorNavigationSelectedKey)?.labelWithValue || \"\";\n\n\tconst formatterConfigsWithUnit =\n\t\tparsedManifest?.formatterConfigurationFromCardManifest.filter(\n\t\t\t(formatterConfig) => formatterConfig.formatterName === \"format.unit\"\n\t\t) || [];\n\n\tconst advancedFormattingOptions: AdvancedFormattingOptions = {\n\t\tunitOfMeasures:\n\t\t\tformatterConfigsWithUnit.length > 0 ? updateUnitOfMeasures(unitOfMeasures, formatterConfigsWithUnit) : unitOfMeasures,\n\t\ttextArrangements: parsedManifest?.textArrangementsFromCardManifest || [],\n\t\tpropertyValueFormatters: propertyValueFormatters,\n\t\tsourceCriticalityProperty: [],\n\t\ttargetFormatterProperty: \"\",\n\t\tsourceUoMProperty: mainIndicatorOptions?.mainIndicatorStatusKey || \"\",\n\t\tselectedKeyCriticality: selectedKeyCriticality,\n\t\ttextArrangementSourceProperty: mainIndicatorStatusKey,\n\t\tisPropertyFormattingEnabled: !!(mainIndicatorStatusKey && mainIndicatorNavigationSelectedKey === \"\")\n\t};\n\tconst mainIndicatorStatusUnit =\n\t\t(mainIndicatorStatusKey && propertiesWithNavigation.find((property) => property.name === mainIndicatorStatusKey)?.labelWithValue) ||\n\t\t\"\";\n\tconst dialogModelData: CardGeneratorDialog = {\n\t\ttitle: `${entitySet}`,\n\t\tconfiguration: {\n\t\t\ttitle: parsedManifest?.title || cardTitle,\n\t\t\tsubtitle: parsedManifest?.subtitle || cardSubtitle,\n\t\t\theaderUOM: parsedManifest?.headerUOM || \"\",\n\t\t\tmainIndicatorOptions: {\n\t\t\t\tcriticality: mainIndicatorCriticalityOptions\n\t\t\t},\n\t\t\tadvancedFormattingOptions: advancedFormattingOptions,\n\t\t\ttrendOptions: trends as TrendOptions,\n\t\t\tindicatorsValue: sideIndicators,\n\t\t\tselectedTrendOptions: trends ? [trends] : [],\n\t\t\tselectedIndicatorOptions: sideIndicators ? [sideIndicators] : [],\n\t\t\tselectedNavigationPropertyHeader,\n\t\t\tselectedContentNavigation: [],\n\t\t\tselectedHeaderNavigation: [],\n\t\t\tnavigationProperty,\n\t\t\tmainIndicatorNavigationSelectedValue,\n\t\t\tmainIndicatorStatusKey,\n\t\t\tnavigationValue,\n\t\t\tmainIndicatorNavigationSelectedKey,\n\t\t\tmainIndicatorStatusUnit,\n\t\t\tselectedNavigationalProperties,\n\t\t\tentitySet: entitySet,\n\t\t\toDataV4: bODataV4,\n\t\t\tserviceUrl: serviceUrl,\n\t\t\tproperties: properties,\n\t\t\tpropertiesWithNavigation: propertiesWithNavigation,\n\t\t\tgroups: parsedManifest?.groups || [\n\t\t\t\t{\n\t\t\t\t\ttitle: oResourceBundle?.getText(\"GENERATOR_DEFAULT_GROUP_NAME\", [1]),\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: \"\",\n\t\t\t\t\t\t\tvalue: \"\",\n\t\t\t\t\t\t\tisEnabled: false,\n\t\t\t\t\t\t\tname: \"\",\n\t\t\t\t\t\t\tnavigationProperty: \"\",\n\t\t\t\t\t\t\tisNavigationEnabled: false\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\t\t\t$data: mData,\n\t\t\ttargetUnit: UnitCollection,\n\t\t\tdeviationUnit: UnitCollection,\n\t\t\terrorControls: [],\n\t\t\tactions: await getCardActionInfo(oAppComponent, mData, oAppComponent.getModel(\"i18n\") as ResourceModel, mCardManifest),\n\t\t\tgroupLimitReached: false,\n\t\t\tkeyParameters: await getKeyParameters(oAppComponent),\n\t\t\tappIntent: `${semanticObject}-${action}`\n\t\t}\n\t};\n\n\tconst dialogModel = new JSONModel(dialogModelData);\n\treturn dialogModel;\n};\n\nexport function addLabelsForProperties(\n\tproperties: PropertyInfoMap,\n\tdata: Record<string, unknown>,\n\tmData: {\n\t\t[key: string]: PropertyValue;\n\t},\n\tunitOfMeasures: Array<object>\n) {\n\tproperties.forEach((property) => {\n\t\tif (property.name && data[property.name] !== undefined && data[property.name] !== null) {\n\t\t\tconst value = formatPropertyDropdownValues(property, data[property.name] as string);\n\t\t\tproperty.value = data[property.name] as string;\n\t\t\tproperty.labelWithValue = value;\n\t\t\tconst propertyExists = unitOfMeasures.find((uomProperty) => uomProperty.name === property.name);\n\n\t\t\tif (property.UOM && property.name && !propertyExists) {\n\t\t\t\tunitOfMeasures.push({\n\t\t\t\t\tpropertyKeyForDescription: property.UOM,\n\t\t\t\t\tname: property.name,\n\t\t\t\t\tpropertyKeyForId: property.name,\n\t\t\t\t\tvalue: property.UOM\n\t\t\t\t});\n\t\t\t}\n\t\t\tmData[property.name] = data[property.name] as string;\n\t\t} else {\n\t\t\tproperty.labelWithValue = property.category ? `${property.label}` : `${property.label} (<empty>)`;\n\t\t}\n\t});\n}\n\nfunction updateNavigationPropertiesWithLabel(\n\tnavigationProperties: NavigationParameter[],\n\tnavigationEntityName: string,\n\tpropertiesWithLabel: Property[]\n) {\n\tconst navigationProperty = navigationProperties.find((property) => property.name === navigationEntityName);\n\tif (!navigationProperty) {\n\t\treturn;\n\t}\n\n\tnavigationProperty.properties = [...propertiesWithLabel];\n}\n"],"mappings":"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","ignoreList":[]}