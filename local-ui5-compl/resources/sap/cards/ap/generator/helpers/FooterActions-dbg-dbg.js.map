{"version":3,"file":"FooterActions-dbg-dbg.js","names":["sap","ui","define","Log","sap_m_library","CoreLib","___helpers_ApplicationInfo","___helpers_I18nHelper","_iteratorSymbol","Symbol","iterator","_settle","pact","state","value","s","_Pact","v","o","bind","then","observer","prototype","onFulfilled","onRejected","result","callback","e","_this","_isSettledPact","thenable","_forTo","array","body","check","i","reject","_cycle","length","addActionToCardManifest","manifest","controlProperties","context","bODataV4","dialog","getModel","getProperty","metaModel","appModel","getMetaModel","Promise","resolve","getAdaptiveCardAction","actionInfo","addActionToCardFooter","_forOf","target","step","next","done","return","_fixup","TypeError","values","push","ButtonType","ApplicationInfo","ODataModelVersion","resolveI18nTextFromResourceModel","formActionInfoFromDataField","dataField","entitySetName","metadataAnnotationInfo","isConfirmationRequired","enablePath","getMetadataAnnotationInfoV4","getMetadataAnnotationInfoV2","label","Label","String","action","Action","split","getButtonTypeForCard","actionStyle","Accept","Reject","Default","addActionInfoToConfigParameters","configuration","parameters","footerActionParameters","_adaptiveFooterActionParameters","cardConfiguration","configParams","titleKey","removeActionInfoFromConfigParams","updateAdaptiveCardInfo","adaptiveCardStyle","adaptiveCardActionInfo","style","cardFooter","footer","actionsStrip","actionLength","type","visible","text","buttonType","actions","enabled","getActionStyles","actionStyles","name","labelWithValue","getActionFromDataField","dataFields","dataFieldForAnnotation","filter","dataFieldType","$Type","RecordType","map","updateActionParameterData","actionParameters","data","resourceBundle","actionParameter","errorMessage","placeholder","actionParameterConfig","valueHelpEntitySet","entitySet","_temp","updateModelData","serviceUrl","getActionsFromManifest","cardManifest","_exit","_temp7","_result","title","enablePathKey","isStyleControlEnabled","_temp6","_temp5","aKeys","Object","keys","_temp4","key","_temp3","triggerActionText","_temp2","getDefaultAction","resourceModel","mCardManifest","_exit2","_temp9","_result2","_temp8","_await$getActionsFrom","getCardActions","appComponent","getObject","getODataEntitySet","entityTypeName","entityType","getODataEntityType","identificationPath","entityTypeAnnotation","entityTypeKeys","identificationAnnotation","removeActionFromManifest","relatedAction","cardParameters","resetCardActions","updateCardManifestAction","forEach","isEnabledExpression","getActionStyle","getActionParameters","oResourceBundle","getResourceBundleFor","_temp12","parameter","_temp11","actionParamInfoToAdd","EnumMember","isRequired","nullable","id","getText","_temp10","getActionParameterConfigurationV2","functionImportInfo","enabledPathKey","verb","getActionParams","_getActionParams","getActionVerb","getFunctionImportInfo","mActionParams","parameterData","additionalParameters","_getActionParameters","actionParams","getRelatedBoundAction","actionValue","actionType","isBoundAction","$IsBound","$Parameter","some","actionParam","getRelatedUnboundActions","getValueHelpInfo","contextPath","actionParamName","requestValueListInfo","valueListInfo","valueListAnnotationInfo","valueListModel","$model","valueListPropertyName","getValueListPropertyName","valueHelpAnnotation","valueListModelServiceUrl","getServiceUrl","getActionParameterName","actionVerb","_exit3","_temp15","_result3","actionParameterAnnotation","_temp14","_ref","_temp13","oValueList","sPropertyName","oValueListParameter","Parameters","find","oParameter","LocalDataProperty","$PropertyPath","ValueListProperty","getActionParameterValue","propertyPath","descriptionPath","textArrangementType","fetch","valueHelpData","odataModel","getInstance","fetchDetails","V4","_temp16","json","valueHelpDataJson","valueHelpDataValue","d","results","getActionParameterConfiguration","oDialogModel","actionParamAnnotations","_ref2","textArrangementPath","$Path","textArrangementAnnotation","actionParameterValue","$EnumMember","setProperty","getActionParameterInfo","_exit4","actionParamInfo","actionIndex","_temp18","isActionRequired","_temp17","$Nullable","_actionParam$$Name","$Name","_getActionParameterNa","_getActionParameterCo","getEnabledValueFromAnnotation","actionAnnotation","operationAvailable","Bool","getCriticalValueFromAnnotation","oCriticalAnnotation","undefined","oParameterValue","oActionValue","toLowerCase","dataFieldAction","indexOf","functionName","functionImport","getODataFunctionImport","replace","$kind","$Action","unBoundActions","relatedUnboundAction","relatedBoundAction","oContextObject","mKeyProperties","getPropertyKeys","oSkipProperties","importParameter","addParameterLabel","parameterName","isKey","parameterValue","hasOwnProperty","error","Error","skip","mode","toUpperCase","oKeyMap","propertyRef","property","getODataProperty","getParameterConfigFromValueList","serviceUrlPrefix","valueListParameters","selectProps","valueListPropertyPath","valueListParameter","valueListProperty","join","ValueListAnnotation","CollectionPath","sServiceUrl","__exports","__esModule"],"sources":["FooterActions.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport Log from \"sap/base/Log\";\nimport { ButtonType } from \"sap/m/library\";\nimport type UIComponent from \"sap/ui/core/Component\";\nimport CoreLib from \"sap/ui/core/Lib\";\nimport type {\n\tActionParameterConfiguration,\n\tAdaptiveCardAction,\n\tAdaptiveCardActionParameter,\n\tCardManifest,\n\tData\n} from \"sap/ui/integration/widgets/Card\";\nimport V2ODataMetaModel from \"sap/ui/model/odata/ODataMetaModel\";\nimport type { EntitySet } from \"sap/ui/model/odata/ODataMetaModel/EntitySet\";\nimport type { EntityType } from \"sap/ui/model/odata/ODataMetaModel/EntityType\";\nimport type { FunctionImport } from \"sap/ui/model/odata/ODataMetaModel/FunctionImport\";\nimport type { FunctionImportParameter } from \"sap/ui/model/odata/ODataMetaModel/FunctionImportParameter\";\nimport type { Property } from \"sap/ui/model/odata/ODataMetaModel/Property\";\nimport V2ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport V4ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport V4ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport ResourceModel from \"sap/ui/model/resource/ResourceModel\";\nimport { ApplicationInfo, ODataModelVersion } from \"../helpers/ApplicationInfo\";\nimport { resolveI18nTextFromResourceModel } from \"../helpers/I18nHelper\";\nimport type { ActionAnnotation, ActionStyles, AnnotationAction, ControlProperties, CriticalAction } from \"../types/ActionTypes\";\n\ntype ActionParameter = {\n\t$Type?: string;\n\t$Nullable?: boolean;\n\t$Name: string;\n};\n\ntype Action = {\n\t$IsBound: boolean;\n\t$Parameter?: Array<ActionParameter>;\n\t$Action?: string;\n};\n\ntype DataFieldString = {\n\tString: string;\n};\n\ntype DataFieldV4 = {\n\t$Type: string;\n\tRecordType: string;\n\tLabel: string;\n\tAction: string;\n};\n\ntype DataField = {\n\t$Type: string;\n\tRecordType: string;\n\tLabel: DataFieldString;\n\tAction: DataFieldString;\n};\n\ntype EntityTypeAnnotation = {\n\t[key: string]: Array<DataField>;\n};\n\ntype ParametersInfoV2 = {\n\tparameterData: {\n\t\t[key: string]: Array<object>;\n\t};\n\tadditionalParameters: Array<FunctionImportParameter>;\n};\n\ntype KeyMap = {\n\t[key: string]: boolean;\n};\n\ntype SkipProperty = {\n\t[key: string]: string;\n};\n\ntype ValueListAnnotationInfo = {\n\t$model: V4ODataModel;\n\t[\"CollectionPath\"]: string;\n\tParameters: Array<any>;\n};\n\ntype PropertyValue = string | null | undefined;\n\ninterface ValueListParameter {\n\tLocalDataProperty: {\n\t\t$PropertyPath: string;\n\t};\n\tValueListProperty: {\n\t\tString: string;\n\t};\n\tRecordType: string;\n}\n\n/**\n * Forms the action info from the data field\n * @param dataField The data field\n * @param bODataV4 The OData version\n * @returns Action info\n */\nfunction formActionInfoFromDataField(\n\tdataField: DataField,\n\tbODataV4: boolean,\n\tmetaModel: V2ODataMetaModel | V4ODataMetaModel,\n\tentitySetName: string\n) {\n\tlet metadataAnnotationInfo = {\n\t\tisConfirmationRequired: false,\n\t\tenablePath: \"\"\n\t};\n\n\tif (bODataV4) {\n\t\tmetadataAnnotationInfo = getMetadataAnnotationInfoV4(\n\t\t\tdataField as unknown as DataFieldV4,\n\t\t\tmetaModel as V4ODataMetaModel,\n\t\t\tentitySetName\n\t\t);\n\t} else {\n\t\tmetadataAnnotationInfo = getMetadataAnnotationInfoV2(dataField as unknown as DataField, metaModel as V2ODataMetaModel);\n\t}\n\n\treturn {\n\t\tlabel: bODataV4 ? dataField.Label : dataField.Label.String,\n\t\taction: bODataV4 ? dataField.Action : dataField.Action.String.split(\"/\")[1],\n\t\tisConfirmationRequired: metadataAnnotationInfo.isConfirmationRequired || false,\n\t\tenablePath: metadataAnnotationInfo.enablePath\n\t};\n}\n\n/**\n * Gets the button type for the card\n * @param actionStyle The action style\n * @returns The button type\n */\n\nfunction getButtonTypeForCard(actionStyle: string | undefined) {\n\tif (actionStyle === \"Positive\") {\n\t\treturn ButtonType.Accept;\n\t}\n\tif (actionStyle === \"Negative\") {\n\t\treturn ButtonType.Reject;\n\t}\n\treturn ButtonType.Default;\n}\n\n/**\n *\n * Adds action information to integration card configuration parameters\n *\n * @param manifest\n * @param actionInfo\n * @param controlProperties\n */\nfunction addActionInfoToConfigParameters(manifest: CardManifest, actionInfo: AdaptiveCardAction, controlProperties: ControlProperties) {\n\tif (!manifest[\"sap.card\"].configuration) {\n\t\tmanifest[\"sap.card\"].configuration = {\n\t\t\tparameters: {\n\t\t\t\tfooterActionParameters: {},\n\t\t\t\t_adaptiveFooterActionParameters: {}\n\t\t\t}\n\t\t};\n\t} else if (manifest[\"sap.card\"].configuration && !manifest[\"sap.card\"].configuration.parameters) {\n\t\tmanifest[\"sap.card\"].configuration.parameters = {\n\t\t\tfooterActionParameters: {},\n\t\t\t_adaptiveFooterActionParameters: {}\n\t\t};\n\t}\n\n\tconst cardConfiguration = manifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration.parameters;\n\n\tif (configParams && !configParams._adaptiveFooterActionParameters) {\n\t\tconfigParams._adaptiveFooterActionParameters = {};\n\t}\n\tif (configParams && !configParams.footerActionParameters) {\n\t\tconfigParams.footerActionParameters = {};\n\t}\n\n\tif (configParams?._adaptiveFooterActionParameters && configParams?.footerActionParameters) {\n\t\tconfigParams.footerActionParameters[controlProperties.titleKey] = actionInfo.parameters || {};\n\t\tconfigParams._adaptiveFooterActionParameters[controlProperties.titleKey] = actionInfo || {};\n\t}\n}\n\n/**\n *\n * Removes action information from integration card configuration parameters\n *\n * @param manifest\n * @param controlProperties\n */\nfunction removeActionInfoFromConfigParams(manifest: CardManifest, controlProperties: ControlProperties) {\n\tconst cardConfiguration = manifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration?.parameters;\n\tif (configParams?._adaptiveFooterActionParameters && configParams?.footerActionParameters) {\n\t\tdelete configParams.footerActionParameters[controlProperties.titleKey];\n\t\tdelete configParams._adaptiveFooterActionParameters[controlProperties.titleKey];\n\t}\n}\n\n/**\n *\n * Updates the style and enablePath for the adaptive card action\n *\n * @param manifest\n * @param controlProperties\n * @param adaptiveCardStyle\n * @param enablePath\n */\nfunction updateAdaptiveCardInfo(\n\tmanifest: CardManifest,\n\tcontrolProperties: ControlProperties,\n\tadaptiveCardStyle: string,\n\tenablePath: string\n) {\n\tconst cardConfiguration = manifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration?.parameters;\n\n\tif (configParams?._adaptiveFooterActionParameters && configParams?.footerActionParameters) {\n\t\tconst adaptiveCardActionInfo = configParams._adaptiveFooterActionParameters[controlProperties.titleKey];\n\t\tadaptiveCardActionInfo.style = adaptiveCardStyle;\n\t\tadaptiveCardActionInfo.enablePath = enablePath;\n\t}\n}\n\n/**\n * Adds the action to the card footer\n * @param manifest The card manifest\n * @param actionInfo The action info\n */\nfunction addActionToCardFooter(manifest: CardManifest, actionInfo: AdaptiveCardAction, controlProperties: ControlProperties) {\n\tlet cardFooter = manifest[\"sap.card\"].footer;\n\n\tif (!cardFooter) {\n\t\tmanifest[\"sap.card\"].footer = {\n\t\t\tactionsStrip: []\n\t\t};\n\t\tcardFooter = manifest[\"sap.card\"].footer;\n\t}\n\n\tconst actionLength = cardFooter.actionsStrip.length;\n\n\tif (actionLength < 2) {\n\t\tcardFooter.actionsStrip.push({\n\t\t\ttype: \"Button\",\n\t\t\tvisible: false,\n\t\t\ttext: actionInfo.label,\n\t\t\tbuttonType: getButtonTypeForCard(actionInfo.style),\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"custom\",\n\t\t\t\t\tenabled: actionInfo.enablePath ? \"${\" + actionInfo.enablePath + \"}\" : \"true\",\n\t\t\t\t\tparameters: \"{{parameters.footerActionParameters.\" + controlProperties.titleKey + \"}}\"\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\n\t\taddActionInfoToConfigParameters(manifest, actionInfo, controlProperties);\n\t}\n}\n\n/**\n * Gets the action styles for the card\n * @returns The action styles\n */\nexport function getActionStyles() {\n\tconst actionStyles: Array<ActionStyles> = [\n\t\t{\n\t\t\tname: \"Default\",\n\t\t\tlabel: \"Default\",\n\t\t\tlabelWithValue: \"Default\"\n\t\t},\n\t\t{\n\t\t\tname: \"Positive\",\n\t\t\tlabel: \"Positive\",\n\t\t\tlabelWithValue: \"Positive\"\n\t\t},\n\t\t{\n\t\t\tname: \"Negative\",\n\t\t\tlabel: \"Negative\",\n\t\t\tlabelWithValue: \"Negative\"\n\t\t}\n\t];\n\n\treturn actionStyles;\n}\n\n/**\n * Forms action info from the data field\n * @param dataFields The data fields\n * @param bODataV4 The OData version\n * @returns Action info\n */\nfunction getActionFromDataField(\n\tdataFields: Array<DataField>,\n\tbODataV4: boolean,\n\tmetaModel: V2ODataMetaModel | V4ODataMetaModel,\n\tentitySetName: string\n) {\n\tconst actions: Array<AnnotationAction> = [];\n\tconst dataFieldForAnnotation: string = \"com.sap.vocabularies.UI.v1.DataFieldForAction\";\n\n\tdataFields\n\t\t?.filter(function (dataField: DataField) {\n\t\t\tconst dataFieldType: string = bODataV4 ? dataField?.$Type : dataField?.RecordType;\n\t\t\treturn dataFieldType === dataFieldForAnnotation;\n\t\t})\n\t\t.map(function (dataField: DataField) {\n\t\t\tconst actionInfo = formActionInfoFromDataField(dataField, bODataV4, metaModel, entitySetName) as AnnotationAction;\n\t\t\tactions.push(actionInfo);\n\t\t});\n\n\treturn actions;\n}\n\n/**\n *\n * Updates the action parameter data to the model data.\n * Resolves the i18n keys for label, errorMessage and placeholder properties of adaptive card action parameters.\n *\n *\n * @param actionParameters\n * @param data\n * @param resourceBundle\n */\nconst updateActionParameterData = async function (\n\tactionParameters: AdaptiveCardActionParameter[],\n\tdata: Record<string, PropertyValue>,\n\tresourceBundle?: ResourceModel\n) {\n\tfor (const actionParameter of actionParameters) {\n\t\tif (resourceBundle) {\n\t\t\tactionParameter.label = resolveI18nTextFromResourceModel(actionParameter.label, resourceBundle);\n\t\t\tactionParameter.errorMessage = resolveI18nTextFromResourceModel(actionParameter?.errorMessage || \"\", resourceBundle);\n\t\t\tactionParameter.placeholder = resolveI18nTextFromResourceModel(actionParameter?.placeholder || \"\", resourceBundle);\n\t\t}\n\n\t\tconst actionParameterConfig = actionParameter.configuration;\n\t\tconst valueHelpEntitySet = actionParameterConfig?.entitySet;\n\n\t\tif (valueHelpEntitySet) {\n\t\t\tawait updateModelData(data, actionParameterConfig?.serviceUrl, valueHelpEntitySet);\n\t\t}\n\t}\n};\n\n/**\n *\n * Gets the saved action from card manifest\n * Resolves i18n keys to text for label and ok button used for Submit type of action in adaptive card.\n *\n * @param cardManifest\n * @param data\n * @param resourceBundle\n * @returns\n */\nconst getActionsFromManifest = async function (\n\tcardManifest: CardManifest,\n\tdata: Record<string, PropertyValue>,\n\tresourceBundle?: ResourceModel\n) {\n\tconst cardConfiguration = cardManifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration?.parameters;\n\tconst actions: Array<ControlProperties> = [];\n\n\tif (configParams?._adaptiveFooterActionParameters) {\n\t\tconst _adaptiveFooterActionParameters = configParams._adaptiveFooterActionParameters;\n\t\tconst aKeys = Object.keys(_adaptiveFooterActionParameters);\n\n\t\tfor (const key of aKeys) {\n\t\t\tconst action = _adaptiveFooterActionParameters[key];\n\n\t\t\tif (resourceBundle) {\n\t\t\t\taction.label = resolveI18nTextFromResourceModel(action.label, resourceBundle);\n\t\t\t\taction.triggerActionText = resolveI18nTextFromResourceModel(action.triggerActionText, resourceBundle);\n\t\t\t}\n\n\t\t\tif (action.actionParameters?.length) {\n\t\t\t\tawait updateActionParameterData(action.actionParameters, data, resourceBundle);\n\t\t\t}\n\n\t\t\tlet style = \"Default\";\n\n\t\t\tif (action.style === \"positive\") {\n\t\t\t\tstyle = \"Positive\";\n\t\t\t} else if (action.style === \"destructive\") {\n\t\t\t\tstyle = \"Negative\";\n\t\t\t}\n\n\t\t\tconst actionInfo: ControlProperties = {\n\t\t\t\ttitle: action.label,\n\t\t\t\ttitleKey: key,\n\t\t\t\tstyle: style,\n\t\t\t\tenablePathKey: action.enablePath,\n\t\t\t\tisStyleControlEnabled: true,\n\t\t\t\tisConfirmationRequired: action.data?.isConfirmationRequired || false,\n\t\t\t\ttriggerActionText: action.triggerActionText\n\t\t\t};\n\t\t\tactions.push(actionInfo);\n\t\t}\n\t\treturn actions;\n\t}\n\n\treturn [\n\t\t{\n\t\t\ttitle: \"\",\n\t\t\ttitleKey: \"\",\n\t\t\tstyle: \"Default\",\n\t\t\tenablePathKey: \"\",\n\t\t\tisStyleControlEnabled: false\n\t\t}\n\t];\n};\n\n/**\n * Gets the saved actions if exists in card manifest otherwise an initial action with default values\n *\n * @param resourceModel\n * @param data\n * @param mCardManifest\n * @returns\n */\nexport const getDefaultAction = async function (\n\tresourceModel?: ResourceModel,\n\tdata?: Record<string, PropertyValue>,\n\tmCardManifest?: CardManifest\n) {\n\tif (mCardManifest && data) {\n\t\treturn await getActionsFromManifest(mCardManifest, data, resourceModel);\n\t}\n\n\treturn [\n\t\t{\n\t\t\ttitle: \"\",\n\t\t\ttitleKey: \"\",\n\t\t\tstyle: \"Default\",\n\t\t\tenablePathKey: \"\",\n\t\t\tisStyleControlEnabled: false\n\t\t}\n\t];\n};\n\n/**\n * Gets the card actions\n * @param appComponent The app component\n * @param entitySetName The entity set name\n * @param bODataV4 The OData version\n * @returns The card actions\n */\nexport function getCardActions(appComponent: UIComponent, entitySetName: string, bODataV4: boolean) {\n\tconst appModel = bODataV4 ? (appComponent.getModel() as V2ODataModel) : (appComponent.getModel() as V4ODataModel),\n\t\tmetaModel = appModel.getMetaModel(),\n\t\tentitySet: EntitySet = bODataV4\n\t\t\t? metaModel.getObject(\"/\" + entitySetName)\n\t\t\t: (metaModel as V2ODataMetaModel).getODataEntitySet(entitySetName),\n\t\tentityTypeName: string = bODataV4 ? entitySet?.$Type : entitySet?.entityType,\n\t\tentityType: EntityType = bODataV4\n\t\t\t? metaModel.getObject(\"/\" + entityTypeName)\n\t\t\t: (metaModel as V2ODataMetaModel).getODataEntityType(entityTypeName),\n\t\tidentificationPath: string = bODataV4 ? \"@com.sap.vocabularies.UI.v1.Identification\" : \"com.sap.vocabularies.UI.v1.Identification\";\n\tlet entityTypeAnnotation: EntityTypeAnnotation = {};\n\n\tif (bODataV4) {\n\t\tentityTypeAnnotation = metaModel.getObject(\"/\" + entityTypeName + \"@\");\n\t}\n\n\tconst entityTypeKeys: Array<string> = bODataV4 ? Object.keys(entityTypeAnnotation) : Object.keys(entityType);\n\tconst identificationAnnotation: Array<string> = entityTypeKeys?.filter((key: string) => {\n\t\treturn key === identificationPath;\n\t});\n\tlet dataFields: Array<DataField> = [];\n\n\tif (identificationAnnotation?.length) {\n\t\tdataFields = bODataV4 ? entityTypeAnnotation[identificationPath] : entityType[identificationPath];\n\t}\n\n\treturn getActionFromDataField(dataFields, bODataV4, metaModel, entitySetName);\n}\n\n/**\n * Adds the action to the card manifest\n * @param manifest The card manifest\n * @param controlProperties The control properties\n * @param context\n */\nexport async function addActionToCardManifest(manifest: CardManifest, controlProperties: ControlProperties, context: any) {\n\tconst bODataV4: boolean = context.dialog.getModel().getProperty(\"/configuration/actions/bODataV4\");\n\tconst metaModel: V2ODataMetaModel | V4ODataMetaModel = context.appModel.getMetaModel();\n\tconst actionInfo = await getAdaptiveCardAction(controlProperties, bODataV4, metaModel, context);\n\taddActionToCardFooter(manifest, actionInfo, controlProperties);\n}\n\n/**\n * Removes the action from the card manifest\n * @param manifest The card manifest\n * @param controlProperties The control properties\n */\nexport function removeActionFromManifest(manifest: CardManifest, controlProperties: ControlProperties) {\n\tconst cardFooter = manifest[\"sap.card\"]?.footer;\n\tconst actionLength = cardFooter?.actionsStrip.length;\n\n\tif (actionLength && cardFooter) {\n\t\tconst relatedAction = cardFooter.actionsStrip.filter((actionsStrip) => {\n\t\t\tconst cardParameters = actionsStrip.actions[0].parameters;\n\t\t\treturn cardParameters !== \"{{parameters.footerActionParameters.\" + controlProperties.titleKey + \"}}\";\n\t\t});\n\n\t\tif (relatedAction.length) {\n\t\t\tcardFooter.actionsStrip = relatedAction;\n\t\t} else {\n\t\t\tdelete manifest[\"sap.card\"]?.footer;\n\t\t}\n\n\t\tremoveActionInfoFromConfigParams(manifest, controlProperties);\n\t}\n}\n\n/**\n * Updates the actions in the footer of the card manifest based on the provided control properties.\n *\n * @param {CardManifest} manifest - The card manifest object that contains the footer actions.\n */\nexport function resetCardActions(manifest: CardManifest) {\n\tmanifest[\"sap.card\"].footer = {\n\t\tactionsStrip: []\n\t};\n\n\tconst cardConfiguration = manifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration?.parameters;\n\tif (configParams) {\n\t\tconfigParams._adaptiveFooterActionParameters = {};\n\t\tconfigParams.footerActionParameters = {};\n\t}\n}\n\n/**\n * Updates the actions in the footer of the card manifest based on the provided control properties.\n *\n * @param {CardManifest} manifest - The card manifest object that contains the footer actions.\n * @param {ControlProperties} controlProperties - The control properties used to update the footer actions.\n */\nexport function updateCardManifestAction(manifest: CardManifest, controlProperties: ControlProperties) {\n\tconst cardFooter = manifest[\"sap.card\"].footer;\n\tconst actionLength = cardFooter?.actionsStrip.length;\n\n\tif (actionLength && cardFooter) {\n\t\tcardFooter.actionsStrip.forEach((actionsStrip) => {\n\t\t\tconst action = actionsStrip.actions[0];\n\t\t\tconst cardParameters = action.parameters;\n\n\t\t\tif (cardParameters === \"{{parameters.footerActionParameters.\" + controlProperties.titleKey + \"}}\") {\n\t\t\t\tconst isEnabledExpression = controlProperties.enablePathKey ? \"${\" + controlProperties.enablePathKey + \"}\" : \"true\";\n\t\t\t\tconst adaptiveCardStyle = getActionStyle(controlProperties);\n\t\t\t\tactionsStrip.buttonType = getButtonTypeForCard(controlProperties.style);\n\t\t\t\taction.enabled = isEnabledExpression;\n\t\t\t\tupdateAdaptiveCardInfo(manifest, controlProperties, adaptiveCardStyle, controlProperties.enablePathKey || \"\");\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * Gets the action style\n * @param controlProperties The control properties\n * @returns Action style\n */\n\nfunction getActionStyle(controlProperties: ControlProperties) {\n\tlet actionStyle: string = \"default\";\n\n\tif (controlProperties.style === \"Positive\") {\n\t\tactionStyle = \"positive\";\n\t} else if (controlProperties.style === \"Negative\") {\n\t\tactionStyle = \"destructive\";\n\t}\n\treturn actionStyle;\n}\n\n/**\n *\n * Gets the OData V2 action parameters for the card\n *\n * @param parameters The parameters\n * @param context The context\n * @returns The OData V2 action parameters\n */\nconst getActionParameters = async function (parameters: Array<FunctionImportParameter>, context: any) {\n\tconst actionParameters: Array<AdaptiveCardActionParameter> = [];\n\tconst oResourceBundle = CoreLib.getResourceBundleFor(\"sap.cards.ap.generator.i18n\");\n\n\tfor (const parameter of parameters) {\n\t\tconst EnumMember = parameter?.[\"com.sap.vocabularies.Common.v1.FieldControl\"]?.EnumMember;\n\t\tconst isRequired = EnumMember === \"com.sap.vocabularies.Common.v1.FieldControlType/Mandatory\" || parameter?.nullable === \"false\";\n\t\tconst actionParamInfoToAdd: AdaptiveCardActionParameter = {\n\t\t\tlabel: parameter?.[\"sap:label\"] || parameter?.name || \"\",\n\t\t\tid: parameter?.name || \"\",\n\t\t\tisRequired: isRequired,\n\t\t\terrorMessage: isRequired ? oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_ACTION_PARAMETERS_ERROR_MESSAGE\") : \"\",\n\t\t\tplaceholder: \"\"\n\t\t};\n\n\t\tif (parameter?.[\"sap:value-list\"] === \"fixed-values\") {\n\t\t\tconst actionParameterConfig = await getActionParameterConfigurationV2(parameter, context);\n\n\t\t\tif (actionParameterConfig?.entitySet) {\n\t\t\t\tactionParamInfoToAdd.configuration = actionParameterConfig;\n\t\t\t\tactionParamInfoToAdd.placeholder = oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_ACTION_PARAMETERS_PLACEHOLDER\");\n\t\t\t}\n\t\t}\n\t\tactionParameters.push(actionParamInfoToAdd);\n\t}\n\n\treturn actionParameters;\n};\n\n/**\n * Forms the Adaptive Card action from the control properties\n * @param controlProperties The control properties\n * @param bODataV4 The OData version\n * @param metaModel The meta model\n * @param context Context\n * @returns The action info\n */\nconst getAdaptiveCardAction = async function (\n\tcontrolProperties: ControlProperties,\n\tbODataV4: boolean,\n\tmetaModel: V2ODataMetaModel | V4ODataMetaModel,\n\tcontext: any\n) {\n\tconst oResourceBundle = CoreLib.getResourceBundleFor(\"sap.cards.ap.generator.i18n\");\n\tconst actionStyle = getActionStyle(controlProperties);\n\tlet actionParameters: Array<AdaptiveCardActionParameter> = [];\n\tlet functionImportInfo;\n\tconst data: Data = {\n\t\tisConfirmationRequired: controlProperties.isConfirmationRequired || false\n\t};\n\tconst enabledPathKey = controlProperties.enablePathKey;\n\tconst actionInfo: AdaptiveCardAction = {\n\t\tstyle: actionStyle,\n\t\tverb: \"\",\n\t\tlabel: controlProperties.title,\n\t\tactionParameters: [],\n\t\tdata: data,\n\t\tenablePath: enabledPathKey || \"\",\n\t\ttriggerActionText: oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_SUBMIT_ACTION_OK_BUTTON\")\n\t};\n\n\tif (bODataV4) {\n\t\tactionParameters = await getActionParams(controlProperties, metaModel as V4ODataMetaModel, context);\n\t\tactionInfo.verb = getActionVerb(controlProperties, metaModel as V4ODataMetaModel);\n\t\tactionInfo.actionParameters = actionParameters || [];\n\n\t\treturn actionInfo;\n\t} else {\n\t\tfunctionImportInfo = getFunctionImportInfo(controlProperties, metaModel as V2ODataMetaModel, context);\n\t\tactionInfo.verb = controlProperties.titleKey;\n\t\tactionInfo.parameters = functionImportInfo?.mActionParams?.parameterData;\n\t\tactionInfo.actionParameters = await getActionParameters(functionImportInfo?.mActionParams?.additionalParameters, context);\n\t\tdata.actionParams = {\n\t\t\tkeys: Object.keys(functionImportInfo?.mActionParams?.parameterData)\n\t\t};\n\t\tactionInfo.data = data;\n\n\t\treturn actionInfo;\n\t}\n};\n\n/**\n * Gets the related bound action for OData V4 model\n * @param actionValue The action value\n * @param actionType The action type\n * @returns Bound action\n */\n\nfunction getRelatedBoundAction(actionValue: Array<Action>, actionType: string) {\n\treturn actionValue?.filter((action: Action) => {\n\t\tconst isBoundAction: boolean = action?.$IsBound;\n\t\tif (isBoundAction) {\n\t\t\treturn action?.$Parameter?.some((actionParam: ActionParameter) => {\n\t\t\t\treturn actionType === actionParam?.$Type;\n\t\t\t});\n\t\t}\n\t});\n}\n\n/**\n * Returns the related unbound actions for OData V4 model\n * @param actionValue The action value\n * @returns\n */\nfunction getRelatedUnboundActions(actionValue: Array<Action>) {\n\treturn actionValue?.filter((action: Action) => {\n\t\treturn !action?.$IsBound;\n\t});\n}\n\n/**\n * Gets the valuehelp info for OData V4 metamodel\n *\n * @param metaModel\n * @param contextPath\n * @param actionParamName\n * @returns\n */\nconst getValueHelpInfo = async function (metaModel: V4ODataMetaModel, contextPath: string, actionParamName?: string) {\n\tconst valueListInfo = await metaModel.requestValueListInfo(contextPath, true);\n\tconst valueListAnnotationInfo = valueListInfo?.[\"\"] as ValueListAnnotationInfo;\n\tconst valueListModel = valueListAnnotationInfo?.$model;\n\tconst valueListPropertyName = getValueListPropertyName(valueListAnnotationInfo, actionParamName || \"\");\n\tconst valueHelpEntitySet = valueListAnnotationInfo?.[\"CollectionPath\"];\n\tconst valueHelpAnnotation = valueListModel?.getMetaModel()?.getObject(`/${valueHelpEntitySet}/${valueListPropertyName}@`);\n\treturn {\n\t\tvalueHelpAnnotation,\n\t\tvalueListPropertyName,\n\t\tvalueHelpEntitySet,\n\t\tvalueListModelServiceUrl: valueListModel?.getServiceUrl()\n\t};\n};\n\n/**\n * Returns the action parameter name for OData V4 model\n * @param context\n * @param actionVerb\n * @param actionParamName\n * @returns The action parameter label for OData V4 model\n */\nconst getActionParameterName = async function (context: any, actionVerb: string, actionParamName?: string) {\n\tif (actionParamName) {\n\t\tconst entitySetName = context.entitySet;\n\t\tconst metaModel = context.appModel.getMetaModel();\n\t\tconst contextPath = `/${entitySetName}/${actionVerb}/${actionParamName}`;\n\t\tconst entitySet: EntitySet = metaModel.getObject(\"/\" + context?.entitySet);\n\t\tconst actionParameterAnnotation = metaModel.getObject(\"/\" + entitySet?.$Type + \"/\" + actionParamName + \"@\");\n\n\t\tif (metaModel.getObject(`${contextPath}@`)?.[\"@com.sap.vocabularies.Common.v1.ValueListWithFixedValues\"]) {\n\t\t\tconst { valueHelpAnnotation } = await getValueHelpInfo(metaModel as V4ODataMetaModel, contextPath, actionParamName);\n\n\t\t\treturn (\n\t\t\t\tactionParameterAnnotation?.[\"@com.sap.vocabularies.Common.v1.Label\"] ||\n\t\t\t\tvalueHelpAnnotation?.[\"@com.sap.vocabularies.Common.v1.Label\"]\n\t\t\t);\n\t\t}\n\n\t\treturn actionParameterAnnotation?.[\"@com.sap.vocabularies.Common.v1.Label\"] || actionParamName;\n\t}\n};\n\n/**\n * Returns the value list property name from annotations\n *\n * @param oValueList\n * @param sPropertyName\n * @returns\n */\nfunction getValueListPropertyName(oValueList: ValueListAnnotationInfo, sPropertyName: string): string {\n\tconst oValueListParameter = oValueList?.Parameters.find(function (oParameter: ValueListParameter) {\n\t\treturn oParameter?.LocalDataProperty?.$PropertyPath === sPropertyName;\n\t});\n\treturn oValueListParameter?.ValueListProperty;\n}\n\n/**\n * Function to get the action parameter value based on the text arrangement annotation\n *\n * @param propertyPath\n * @param descriptionPath\n * @param textArrangementType\n * @returns\n */\nexport function getActionParameterValue(propertyPath: string, descriptionPath: string, textArrangementType: string): string {\n\tif (textArrangementType === \"TextOnly\") {\n\t\treturn \"${\" + descriptionPath + \"}\";\n\t} else if (textArrangementType === \"TextLast\") {\n\t\treturn \"${\" + propertyPath + \"}\" + \" (\" + \"${\" + descriptionPath + \"}\" + \")\";\n\t} else if (textArrangementType === \"TextSeparate\") {\n\t\treturn \"${\" + propertyPath + \"}\";\n\t}\n\n\treturn \"${\" + descriptionPath + \"}\" + \" (${\" + propertyPath + \"})\";\n}\n\n/**\n * Updates the model data with value help data for the action parameter\n *\n * @param data\n * @param serviceUrl\n * @param valueHelpEntitySet\n */\nexport const updateModelData = async function (data: Record<string, PropertyValue>, serviceUrl: string, valueHelpEntitySet: string) {\n\tconst valueHelpData = await fetch(serviceUrl);\n\tconst { odataModel } = ApplicationInfo.getInstance().fetchDetails();\n\tconst bODataV4 = odataModel === ODataModelVersion.V4;\n\n\tif (valueHelpData && typeof valueHelpData.json === \"function\") {\n\t\tconst valueHelpDataJson = await valueHelpData.json();\n\t\tconst valueHelpDataValue = bODataV4 ? valueHelpDataJson?.value : valueHelpDataJson?.d?.results;\n\n\t\tif (valueHelpDataValue?.length) {\n\t\t\tdata[valueHelpEntitySet] = valueHelpDataValue;\n\t\t}\n\t}\n};\n\n/**\n * Get Action Parameter Data for OData V4 model\n *\n * @param context\n * @param actionVerb\n * @param actionParamName\n * @returns\n */\nconst getActionParameterConfiguration = async function (context: any, actionVerb: string, actionParamName?: string) {\n\tconst actionParameterConfig = {\n\t\tserviceUrl: \"\",\n\t\tvalue: \"\",\n\t\tentitySet: \"\",\n\t\ttitle: \"\"\n\t};\n\n\tif (!actionParamName) {\n\t\treturn actionParameterConfig;\n\t}\n\n\tconst entitySetName = context.entitySet;\n\tconst oDialogModel = context.dialog.getModel();\n\tconst metaModel = context.appModel.getMetaModel();\n\tconst contextPath = `/${entitySetName}/${actionVerb}/${actionParamName}`;\n\tconst actionParamAnnotations = metaModel.getObject(`${contextPath}@`);\n\tif (!actionParamAnnotations?.[\"@com.sap.vocabularies.Common.v1.ValueListWithFixedValues\"]) {\n\t\treturn actionParameterConfig;\n\t}\n\n\tconst { valueHelpAnnotation, valueListPropertyName, valueHelpEntitySet, valueListModelServiceUrl } = await getValueHelpInfo(\n\t\tmetaModel as V4ODataMetaModel,\n\t\tcontextPath,\n\t\tactionParamName\n\t);\n\tconst textArrangementPath = valueHelpAnnotation?.[\"@com.sap.vocabularies.Common.v1.Text\"]?.$Path;\n\tconst textArrangementAnnotation =\n\t\tvalueHelpAnnotation?.[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"];\n\tconst actionParameterValue =\n\t\t(textArrangementAnnotation?.$EnumMember && valueListPropertyName && textArrangementPath) ||\n\t\t(valueListPropertyName && textArrangementPath)\n\t\t\t? getActionParameterValue(valueListPropertyName, textArrangementPath, textArrangementAnnotation?.$EnumMember?.split(\"/\")[1])\n\t\t\t: \"${\" + valueListPropertyName + \"}\";\n\n\tlet serviceUrl = valueListModelServiceUrl;\n\tserviceUrl =\n\t\tvalueListPropertyName && textArrangementPath\n\t\t\t? `${serviceUrl}${valueHelpEntitySet}?$select=${valueListPropertyName},${textArrangementPath}`\n\t\t\t: `${serviceUrl}${valueHelpEntitySet}?$select=${valueListPropertyName}`;\n\tserviceUrl = `${serviceUrl}&skip=0&$top=20`;\n\n\tconst data = oDialogModel.getProperty(\"/configuration/$data\");\n\tawait updateModelData(data, serviceUrl, valueHelpEntitySet);\n\toDialogModel.setProperty(\"/configuration/$data\", data);\n\n\treturn {\n\t\tentitySet: valueHelpEntitySet,\n\t\tserviceUrl: serviceUrl,\n\t\tvalue: actionParameterValue,\n\t\ttitle: \"${\" + valueListPropertyName + \"}\"\n\t};\n};\n\n/**\n * Get Action Parameter Info for OData V4 application's Action\n *\n * The action parameter will consist of errorMessage and placeholder which will be used by adaptive card.\n * Currently the errorMessage and placeholder will have values only for actions having dropdown value as input.\n *\n * @param relatedAction The related action\n * @param context The context\n * @param actionVerb The action verb\n * @param isBoundAction Is bound action\n * @returns The action parameter info\n */\nconst getActionParameterInfo = async function (relatedAction: Action, context: any, actionVerb: string, isBoundAction?: boolean) {\n\tconst actionParamInfo: any = [];\n\tlet actionIndex = 0;\n\n\tif (relatedAction && relatedAction.$Parameter) {\n\t\tconst oResourceBundle = CoreLib.getResourceBundleFor(\"sap.cards.ap.generator.i18n\");\n\n\t\tfor (const actionParam of relatedAction.$Parameter) {\n\t\t\tconst isActionRequired = !isBoundAction || (isBoundAction && actionIndex > 0);\n\t\t\tif (isActionRequired) {\n\t\t\t\tconst isRequired = actionParam.$Nullable === false;\n\t\t\t\tconst actionParamInfoToAdd: AdaptiveCardActionParameter = {\n\t\t\t\t\tisRequired: isRequired,\n\t\t\t\t\tid: actionParam.$Name,\n\t\t\t\t\tlabel: await getActionParameterName(context, actionVerb, actionParam.$Name),\n\t\t\t\t\terrorMessage: isRequired ? oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_ACTION_PARAMETERS_ERROR_MESSAGE\") : \"\",\n\t\t\t\t\tplaceholder: \"\"\n\t\t\t\t};\n\t\t\t\tconst actionParameterConfig = (await getActionParameterConfiguration(\n\t\t\t\t\tcontext,\n\t\t\t\t\tactionVerb,\n\t\t\t\t\tactionParam.$Name\n\t\t\t\t)) as ActionParameterConfiguration;\n\t\t\t\tif (actionParameterConfig?.entitySet) {\n\t\t\t\t\tactionParamInfoToAdd[\"configuration\"] = actionParameterConfig;\n\t\t\t\t\tactionParamInfoToAdd.placeholder = oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_ACTION_PARAMETERS_PLACEHOLDER\");\n\t\t\t\t}\n\t\t\t\tactionParamInfo.push(actionParamInfoToAdd);\n\t\t\t}\n\t\t\tactionIndex++;\n\n\t\t\tif (actionIndex === relatedAction.$Parameter.length) {\n\t\t\t\treturn actionParamInfo;\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Gets the enabled value from annotation\n *\n * @param actionAnnotation\n * @returns\n */\nfunction getEnabledValueFromAnnotation(actionAnnotation: ActionAnnotation) {\n\tif (actionAnnotation) {\n\t\tconst operationAvailable = actionAnnotation[\"@Org.OData.Core.V1.OperationAvailable\"];\n\n\t\tif (operationAvailable?.$Path) {\n\t\t\treturn operationAvailable.$Path;\n\t\t} else if (operationAvailable?.Bool) {\n\t\t\treturn operationAvailable.Bool;\n\t\t}\n\t}\n\n\treturn \"\";\n}\n\n/**\n * Gets the critical value from annotation\n *\n * @param oCriticalAnnotation\n * @returns\n */\nfunction getCriticalValueFromAnnotation(oCriticalAnnotation: CriticalAction) {\n\tif (!oCriticalAnnotation) {\n\t\treturn false;\n\t}\n\tif (oCriticalAnnotation.Bool === undefined) {\n\t\treturn true;\n\t}\n\n\tconst oParameterValue = oCriticalAnnotation.Bool;\n\n\tif (typeof oParameterValue === \"string\") {\n\t\tconst oActionValue = oParameterValue.toLowerCase();\n\t\treturn !(oActionValue == \"false\" || oActionValue == \"\" || oActionValue == \" \");\n\t}\n\n\treturn !!oParameterValue;\n}\n\n/**\n *\n * Returns the metadata annotation info for OData V4 model ( enabled or critical value coming from metadata annotations )\n *\n * @param dataField\n * @param metaModel\n * @param entityTypeName\n * @returns\n */\n\nfunction getMetadataAnnotationInfoV4(dataField: DataFieldV4, metaModel: V4ODataMetaModel, entitySetName: string) {\n\tconst dataFieldAction = dataField.Action;\n\tconst actionVerb = dataFieldAction.indexOf(\"(\") > -1 ? dataFieldAction.split(\"(\")[0] : dataFieldAction;\n\tconst actionAnnotation = metaModel.getObject(\"/\" + entitySetName + \"/\" + actionVerb + \"@\");\n\tconst enablePath = getEnabledValueFromAnnotation(actionAnnotation);\n\tconst isConfirmationRequired = getCriticalValueFromAnnotation(actionAnnotation?.[\"@com.sap.vocabularies.UI.v1.Critical\"]);\n\n\treturn {\n\t\tenablePath: enablePath,\n\t\tisConfirmationRequired: isConfirmationRequired\n\t};\n}\n\n/**\n * Get the metadata annotation info for OData V2 model\n *\n * @param dataField\n * @param metaModel\n * @returns\n */\nfunction getMetadataAnnotationInfoV2(dataField: DataField, metaModel: V2ODataMetaModel) {\n\tconst functionName: string = dataField.Action.String.split(\"/\")[1];\n\tconst functionImport: FunctionImport = metaModel.getODataFunctionImport(functionName);\n\n\treturn {\n\t\tenablePath: functionImport?.[\"sap:applicable-path\"] || \"\",\n\t\tisConfirmationRequired: getCriticalValueFromAnnotation(functionImport?.[\"com.sap.vocabularies.Common.v1.IsActionCritical\"])\n\t};\n}\n\n/**\n * Gets the action parameters for OData V4 model\n * @param controlProperties The control properties\n * @param metaModel The meta model\n * @param context The context\n * @returns Action parameters\n */\nconst getActionParams = async function (controlProperties: ControlProperties, metaModel: V4ODataMetaModel, context: any) {\n\tconst titleKey = controlProperties.titleKey || \"\";\n\tconst actionVerb: string = titleKey.indexOf(\"(\") > -1 ? titleKey.split(\"(\")[0] : titleKey;\n\tconst actionValue = metaModel.getObject(`/${context.entitySet}/${actionVerb}`);\n\tlet actionType: string = titleKey.indexOf(\"(\") > -1 ? titleKey?.split(\"(\")[1] : \"\";\n\tactionType = actionType.indexOf(\")\") > -1 ? actionType.replace(\")\", \"\") : actionType;\n\n\t//Get action Parameters for unbound action\n\tif (actionValue?.$kind === \"ActionImport\" && actionValue?.$Action) {\n\t\tconst unBoundActions = metaModel.getObject(\"/\" + actionValue?.$Action);\n\t\tconst relatedUnboundAction = getRelatedUnboundActions(unBoundActions);\n\t\treturn getActionParameterInfo(relatedUnboundAction[0], context, actionVerb);\n\t}\n\n\t//Get action Parameters for Bound actions\n\tconst relatedBoundAction = getRelatedBoundAction(actionValue, actionType);\n\n\tif (relatedBoundAction?.length && relatedBoundAction[0]?.$Parameter != null && relatedBoundAction[0]?.$Parameter.length > 1) {\n\t\treturn await getActionParameterInfo(relatedBoundAction[0], context, actionVerb, true);\n\t}\n};\n\n/**\n * Get the action verb for OData V4 model\n * @param controlProperties The control properties\n * @param metaModel The meta model\n * @returns Returns the action string\n */\nfunction getActionVerb(controlProperties: ControlProperties, metaModel: V4ODataMetaModel) {\n\tconst titleKey = controlProperties.titleKey || \"\";\n\tconst actionVerb = titleKey.indexOf(\"(\") > -1 ? titleKey.split(\"(\")[0] : titleKey;\n\tconst actionValue = metaModel.getObject(\"/\" + actionVerb) || [];\n\tlet actionType: string = titleKey.indexOf(\"(\") > -1 ? titleKey.split(\"(\")[1] : \"\";\n\tactionType = actionType.indexOf(\")\") > -1 ? actionType.replace(\")\", \"\") : actionType;\n\n\t//Get action string for unbound action\n\tif (actionValue?.$kind === \"ActionImport\" && actionValue?.$Action) {\n\t\treturn titleKey?.split(\"/\")[1];\n\t}\n\n\tconst relatedBoundAction = getRelatedBoundAction(actionValue, actionType);\n\t//Get action string for bound action\n\tif (relatedBoundAction?.length) {\n\t\treturn actionVerb;\n\t}\n\n\treturn actionVerb;\n}\n\n/**\n * Get the function import info for OData V2 model's action\n *\n * @param controlProperties The control properties\n * @param metaModel The meta model\n * @param context Current context\n * @returns Functionimport info\n */\nfunction getFunctionImportInfo(controlProperties: ControlProperties, metaModel: V2ODataMetaModel, context: any) {\n\tconst functionName: string = controlProperties.titleKey;\n\tconst functionImport: FunctionImport = metaModel.getODataFunctionImport(functionName);\n\tconst oContextObject = context.dialog.getModel().getProperty(\"/configuration/$data\");\n\tconst entitySet: EntitySet = metaModel.getODataEntitySet(context?.entitySet);\n\tconst entityType: EntityType = metaModel.getODataEntityType(entitySet?.entityType);\n\tconst mKeyProperties: KeyMap = getPropertyKeys(entityType);\n\tconst oSkipProperties: SkipProperty = {};\n\tconst mActionParams: ParametersInfoV2 = {\n\t\tparameterData: {},\n\t\tadditionalParameters: []\n\t};\n\n\tfunctionImport?.parameter?.forEach(function (importParameter: FunctionImportParameter) {\n\t\taddParameterLabel(importParameter, entityType, metaModel);\n\n\t\tconst parameterName: string = importParameter?.name || \"\";\n\t\tconst isKey = !!mKeyProperties[parameterName];\n\t\tlet parameterValue;\n\n\t\tif (oContextObject?.hasOwnProperty(parameterName)) {\n\t\t\tparameterValue = oContextObject[parameterName];\n\t\t} else if (isKey && oContextObject && functionImport[\"sap:action-for\"]) {\n\t\t\t// parameter is key but not part of the current projection - raise error\n\t\t\tLog.error(\"Key parameter of action not found in current context: \" + parameterName);\n\t\t\tthrow new Error(\"Key parameter of action not found in current context: \" + parameterName);\n\t\t}\n\n\t\tmActionParams.parameterData[parameterName] = parameterValue;\n\n\t\tconst skip = !!oSkipProperties[parameterName];\n\t\tif (!skip && (!isKey || !functionImport[\"sap:action-for\"]) && importParameter.mode.toUpperCase() == \"IN\") {\n\t\t\t// offer as optional parameter with default value from context\n\t\t\tmActionParams.additionalParameters.push(importParameter);\n\t\t}\n\t});\n\n\treturn {\n\t\tmActionParams: mActionParams,\n\t\tfunctionImport: functionImport\n\t};\n}\n\n/**\n * Get the property keys for the entity type\n * @param entityType The entity type\n * @returns The property keys map\n */\nconst getPropertyKeys = function (entityType: EntityType) {\n\tconst oKeyMap: KeyMap = {};\n\n\tentityType.key.propertyRef.forEach((property: Property) => {\n\t\tif (property.name) {\n\t\t\toKeyMap[property.name] = true;\n\t\t}\n\t});\n\n\treturn oKeyMap;\n};\n\n/**\n * Adds the parameter label to the entity type property\n *\n * @param parameter The Action parameter\n * @param entityType The entity type\n * @param metaModel The meta model\n */\nconst addParameterLabel = function (parameter: FunctionImportParameter, entityType: EntityType, metaModel: V2ODataMetaModel) {\n\tif (entityType && parameter && !parameter[\"com.sap.vocabularies.Common.v1.Label\"]) {\n\t\tconst property: Property = metaModel.getODataProperty(entityType, parameter.name, false);\n\t\tif (property && property[\"com.sap.vocabularies.Common.v1.Label\"]) {\n\t\t\t// copy label from property to parameter with same name as default if no label is set for function import parameter\n\t\t\tparameter[\"com.sap.vocabularies.Common.v1.Label\"] = property[\"com.sap.vocabularies.Common.v1.Label\"];\n\t\t}\n\t}\n};\n\n/**\n *\n * Returns the service URL, valueListPropertyPath, descriptionPath for OData V2 model using the value list parameters\n *\n * @param serviceUrlPrefix\n * @param valueListParameters\n * @returns\n */\nfunction getParameterConfigFromValueList(serviceUrlPrefix: string, valueListParameters: ValueListParameter[]) {\n\tconst selectProps: Array<string> = [];\n\tlet valueListPropertyPath = \"\",\n\t\tdescriptionPath = \"\";\n\n\tvalueListParameters.forEach((valueListParameter) => {\n\t\tconst valueListProperty = valueListParameter?.ValueListProperty?.String;\n\t\tif (valueListProperty) {\n\t\t\tselectProps.push(valueListProperty);\n\t\t\tdescriptionPath =\n\t\t\t\tvalueListParameter?.RecordType === \"com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly\"\n\t\t\t\t\t? valueListProperty\n\t\t\t\t\t: descriptionPath;\n\t\t\tvalueListPropertyPath =\n\t\t\t\tvalueListParameter?.RecordType === \"com.sap.vocabularies.Common.v1.ValueListParameterInOut\"\n\t\t\t\t\t? valueListProperty\n\t\t\t\t\t: valueListPropertyPath;\n\t\t}\n\t});\n\n\tconst serviceUrl = `${serviceUrlPrefix}?$select=${selectProps.join(\",\")}`;\n\n\treturn {\n\t\tserviceUrl,\n\t\tvalueListPropertyPath,\n\t\tdescriptionPath\n\t};\n}\n\n/**\n *\n * Get the action parameter configuration for OData V2 model\n *\n * @param parameter\n * @param context\n * @returns The action parameter configuration for OData V2 model\n */\nexport const getActionParameterConfigurationV2 = async function (parameter: FunctionImportParameter, context: any) {\n\tconst actionParameterConfig = {\n\t\tserviceUrl: \"\",\n\t\tvalue: \"\",\n\t\tentitySet: \"\",\n\t\ttitle: \"\"\n\t};\n\n\tif (!parameter) {\n\t\treturn actionParameterConfig;\n\t}\n\n\tconst ValueListAnnotation = parameter?.[\"com.sap.vocabularies.Common.v1.ValueList\"];\n\tconst valueListParameters = ValueListAnnotation?.Parameters as ValueListParameter[];\n\tconst entitySetName = ValueListAnnotation?.CollectionPath?.String;\n\tconst { serviceUrl, valueListPropertyPath, descriptionPath } = getParameterConfigFromValueList(\n\t\t`${context.appModel.sServiceUrl}/${entitySetName}`,\n\t\tvalueListParameters\n\t);\n\n\tlet textArrangementType = \"TextOnly\";\n\n\tif (parameter?.[\"com.sap.vocabularies.UI.v1.TextArrangement\"]) {\n\t\ttextArrangementType = parameter[\"com.sap.vocabularies.UI.v1.TextArrangement\"]?.EnumMember?.split(\"/\")[1];\n\t}\n\n\tconst actionParameterValue =\n\t\tvalueListPropertyPath && descriptionPath\n\t\t\t? getActionParameterValue(valueListPropertyPath, descriptionPath, textArrangementType)\n\t\t\t: \"${\" + valueListPropertyPath + \"}\";\n\n\tconst oDialogModel = context.dialog.getModel();\n\tconst data = oDialogModel.getProperty(\"/configuration/$data\");\n\tawait updateModelData(data, serviceUrl, entitySetName);\n\toDialogModel.setProperty(\"/configuration/$data\", data);\n\n\treturn {\n\t\tentitySet: entitySetName,\n\t\tserviceUrl: serviceUrl,\n\t\tvalue: actionParameterValue,\n\t\ttitle: \"${\" + valueListPropertyPath + \"}\"\n\t};\n};\n"],"mappings":"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","ignoreList":[]}