{"version":3,"file":"FooterActions-dbg.js","names":["sap","ui","define","Log","sap_m_library","CoreLib","___helpers_ApplicationInfo","___helpers_I18nHelper","_iteratorSymbol","Symbol","iterator","_settle","pact","state","value","s","_Pact","v","o","bind","then","observer","prototype","onFulfilled","onRejected","result","this","callback","e","_this","_isSettledPact","thenable","_forTo","array","body","check","i","reject","_cycle","length","addActionToCardManifest","manifest","controlProperties","context","bODataV4","dialog","getModel","getProperty","metaModel","appModel","getMetaModel","Promise","resolve","getAdaptiveCardAction","actionInfo","addActionToCardFooter","_forOf","target","step","next","done","return","_fixup","TypeError","values","push","ButtonType","ApplicationInfo","ODataModelVersion","resolveI18nTextFromResourceModel","formActionInfoFromDataField","dataField","entitySetName","metadataAnnotationInfo","isConfirmationRequired","enablePath","getMetadataAnnotationInfoV4","getMetadataAnnotationInfoV2","label","Label","String","action","Action","split","getButtonTypeForCard","actionStyle","Accept","Reject","Default","addActionInfoToConfigParameters","configuration","parameters","footerActionParameters","_adaptiveFooterActionParameters","cardConfiguration","configParams","titleKey","removeActionInfoFromConfigParams","updateAdaptiveCardInfo","adaptiveCardStyle","adaptiveCardActionInfo","style","cardFooter","footer","actionsStrip","actionLength","type","visible","text","buttonType","actions","enabled","getActionStyles","actionStyles","name","labelWithValue","getActionFromDataField","dataFields","dataFieldForAnnotation","filter","dataFieldType","$Type","RecordType","map","updateActionParameterData","actionParameters","data","resourceBundle","actionParameter","errorMessage","placeholder","actionParameterConfig","valueHelpEntitySet","entitySet","_temp","updateModelData","serviceUrl","getActionsFromManifest","cardManifest","_exit","_temp7","_result","title","enablePathKey","isStyleControlEnabled","_temp6","_temp5","aKeys","Object","keys","_temp4","key","_temp3","triggerActionText","_temp2","getDefaultAction","resourceModel","mCardManifest","_exit2","_temp9","_result2","_temp8","_await$getActionsFrom","getCardActions","appComponent","getObject","getODataEntitySet","entityTypeName","entityType","getODataEntityType","identificationPath","entityTypeAnnotation","entityTypeKeys","identificationAnnotation","removeActionFromManifest","relatedAction","cardParameters","resetCardActions","updateCardManifestAction","forEach","isEnabledExpression","getActionStyle","getActionParameters","oResourceBundle","getResourceBundleFor","_temp12","parameter","_temp11","actionParamInfoToAdd","EnumMember","isRequired","nullable","id","getText","_temp10","getActionParameterConfigurationV2","functionImportInfo","enabledPathKey","verb","getActionParams","_getActionParams","getActionVerb","getFunctionImportInfo","mActionParams","parameterData","additionalParameters","_getActionParameters","actionParams","getRelatedBoundAction","actionValue","actionType","isBoundAction","$IsBound","$Parameter","some","actionParam","getRelatedUnboundActions","getValueHelpInfo","contextPath","actionParamName","requestValueListInfo","valueListInfo","valueListAnnotationInfo","valueListModel","$model","valueListPropertyName","getValueListPropertyName","valueHelpAnnotation","valueListModelServiceUrl","getServiceUrl","getActionParameterName","actionVerb","_exit3","_temp15","_result3","actionParameterAnnotation","_temp14","_ref","_temp13","oValueList","sPropertyName","oValueListParameter","Parameters","find","oParameter","LocalDataProperty","$PropertyPath","ValueListProperty","getActionParameterValue","propertyPath","descriptionPath","textArrangementType","fetch","valueHelpData","odataModel","getInstance","fetchDetails","V4","_temp16","json","valueHelpDataJson","valueHelpDataValue","d","results","getActionParameterConfiguration","oDialogModel","actionParamAnnotations","_ref2","textArrangementPath","$Path","textArrangementAnnotation","actionParameterValue","$EnumMember","setProperty","getActionParameterInfo","_exit4","actionParamInfo","actionIndex","_temp18","isActionRequired","_temp17","$Nullable","_actionParam$$Name","$Name","_getActionParameterNa","_getActionParameterCo","getEnabledValueFromAnnotation","actionAnnotation","operationAvailable","Bool","getCriticalValueFromAnnotation","oCriticalAnnotation","undefined","oParameterValue","oActionValue","toLowerCase","dataFieldAction","indexOf","functionName","functionImport","getODataFunctionImport","replace","$kind","$Action","unBoundActions","relatedUnboundAction","relatedBoundAction","oContextObject","mKeyProperties","getPropertyKeys","oSkipProperties","importParameter","addParameterLabel","parameterName","isKey","parameterValue","hasOwnProperty","error","Error","skip","mode","toUpperCase","oKeyMap","propertyRef","property","getODataProperty","getParameterConfigFromValueList","serviceUrlPrefix","valueListParameters","selectProps","valueListPropertyPath","valueListParameter","valueListProperty","join","ValueListAnnotation","CollectionPath","sServiceUrl","__exports","__esModule"],"sources":["FooterActions.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport Log from \"sap/base/Log\";\nimport { ButtonType } from \"sap/m/library\";\nimport type UIComponent from \"sap/ui/core/Component\";\nimport CoreLib from \"sap/ui/core/Lib\";\nimport type {\n\tActionParameterConfiguration,\n\tAdaptiveCardAction,\n\tAdaptiveCardActionParameter,\n\tCardManifest,\n\tData\n} from \"sap/ui/integration/widgets/Card\";\nimport V2ODataMetaModel from \"sap/ui/model/odata/ODataMetaModel\";\nimport type { EntitySet } from \"sap/ui/model/odata/ODataMetaModel/EntitySet\";\nimport type { EntityType } from \"sap/ui/model/odata/ODataMetaModel/EntityType\";\nimport type { FunctionImport } from \"sap/ui/model/odata/ODataMetaModel/FunctionImport\";\nimport type { FunctionImportParameter } from \"sap/ui/model/odata/ODataMetaModel/FunctionImportParameter\";\nimport type { Property } from \"sap/ui/model/odata/ODataMetaModel/Property\";\nimport V2ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport V4ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport V4ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport ResourceModel from \"sap/ui/model/resource/ResourceModel\";\nimport { ApplicationInfo, ODataModelVersion } from \"../helpers/ApplicationInfo\";\nimport { resolveI18nTextFromResourceModel } from \"../helpers/I18nHelper\";\nimport type { ActionAnnotation, ActionStyles, AnnotationAction, ControlProperties, CriticalAction } from \"../types/ActionTypes\";\n\ntype ActionParameter = {\n\t$Type?: string;\n\t$Nullable?: boolean;\n\t$Name: string;\n};\n\ntype Action = {\n\t$IsBound: boolean;\n\t$Parameter?: Array<ActionParameter>;\n\t$Action?: string;\n};\n\ntype DataFieldString = {\n\tString: string;\n};\n\ntype DataFieldV4 = {\n\t$Type: string;\n\tRecordType: string;\n\tLabel: string;\n\tAction: string;\n};\n\ntype DataField = {\n\t$Type: string;\n\tRecordType: string;\n\tLabel: DataFieldString;\n\tAction: DataFieldString;\n};\n\ntype EntityTypeAnnotation = {\n\t[key: string]: Array<DataField>;\n};\n\ntype ParametersInfoV2 = {\n\tparameterData: {\n\t\t[key: string]: Array<object>;\n\t};\n\tadditionalParameters: Array<FunctionImportParameter>;\n};\n\ntype KeyMap = {\n\t[key: string]: boolean;\n};\n\ntype SkipProperty = {\n\t[key: string]: string;\n};\n\ntype ValueListAnnotationInfo = {\n\t$model: V4ODataModel;\n\t[\"CollectionPath\"]: string;\n\tParameters: Array<any>;\n};\n\ntype PropertyValue = string | null | undefined;\n\ninterface ValueListParameter {\n\tLocalDataProperty: {\n\t\t$PropertyPath: string;\n\t};\n\tValueListProperty: {\n\t\tString: string;\n\t};\n\tRecordType: string;\n}\n\n/**\n * Forms the action info from the data field\n * @param dataField The data field\n * @param bODataV4 The OData version\n * @returns Action info\n */\nfunction formActionInfoFromDataField(\n\tdataField: DataField,\n\tbODataV4: boolean,\n\tmetaModel: V2ODataMetaModel | V4ODataMetaModel,\n\tentitySetName: string\n) {\n\tlet metadataAnnotationInfo = {\n\t\tisConfirmationRequired: false,\n\t\tenablePath: \"\"\n\t};\n\n\tif (bODataV4) {\n\t\tmetadataAnnotationInfo = getMetadataAnnotationInfoV4(\n\t\t\tdataField as unknown as DataFieldV4,\n\t\t\tmetaModel as V4ODataMetaModel,\n\t\t\tentitySetName\n\t\t);\n\t} else {\n\t\tmetadataAnnotationInfo = getMetadataAnnotationInfoV2(dataField as unknown as DataField, metaModel as V2ODataMetaModel);\n\t}\n\n\treturn {\n\t\tlabel: bODataV4 ? dataField.Label : dataField.Label.String,\n\t\taction: bODataV4 ? dataField.Action : dataField.Action.String.split(\"/\")[1],\n\t\tisConfirmationRequired: metadataAnnotationInfo.isConfirmationRequired || false,\n\t\tenablePath: metadataAnnotationInfo.enablePath\n\t};\n}\n\n/**\n * Gets the button type for the card\n * @param actionStyle The action style\n * @returns The button type\n */\n\nfunction getButtonTypeForCard(actionStyle: string | undefined) {\n\tif (actionStyle === \"Positive\") {\n\t\treturn ButtonType.Accept;\n\t}\n\tif (actionStyle === \"Negative\") {\n\t\treturn ButtonType.Reject;\n\t}\n\treturn ButtonType.Default;\n}\n\n/**\n *\n * Adds action information to integration card configuration parameters\n *\n * @param manifest\n * @param actionInfo\n * @param controlProperties\n */\nfunction addActionInfoToConfigParameters(manifest: CardManifest, actionInfo: AdaptiveCardAction, controlProperties: ControlProperties) {\n\tif (!manifest[\"sap.card\"].configuration) {\n\t\tmanifest[\"sap.card\"].configuration = {\n\t\t\tparameters: {\n\t\t\t\tfooterActionParameters: {},\n\t\t\t\t_adaptiveFooterActionParameters: {}\n\t\t\t}\n\t\t};\n\t} else if (manifest[\"sap.card\"].configuration && !manifest[\"sap.card\"].configuration.parameters) {\n\t\tmanifest[\"sap.card\"].configuration.parameters = {\n\t\t\tfooterActionParameters: {},\n\t\t\t_adaptiveFooterActionParameters: {}\n\t\t};\n\t}\n\n\tconst cardConfiguration = manifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration.parameters;\n\n\tif (configParams && !configParams._adaptiveFooterActionParameters) {\n\t\tconfigParams._adaptiveFooterActionParameters = {};\n\t}\n\tif (configParams && !configParams.footerActionParameters) {\n\t\tconfigParams.footerActionParameters = {};\n\t}\n\n\tif (configParams?._adaptiveFooterActionParameters && configParams?.footerActionParameters) {\n\t\tconfigParams.footerActionParameters[controlProperties.titleKey] = actionInfo.parameters || {};\n\t\tconfigParams._adaptiveFooterActionParameters[controlProperties.titleKey] = actionInfo || {};\n\t}\n}\n\n/**\n *\n * Removes action information from integration card configuration parameters\n *\n * @param manifest\n * @param controlProperties\n */\nfunction removeActionInfoFromConfigParams(manifest: CardManifest, controlProperties: ControlProperties) {\n\tconst cardConfiguration = manifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration?.parameters;\n\tif (configParams?._adaptiveFooterActionParameters && configParams?.footerActionParameters) {\n\t\tdelete configParams.footerActionParameters[controlProperties.titleKey];\n\t\tdelete configParams._adaptiveFooterActionParameters[controlProperties.titleKey];\n\t}\n}\n\n/**\n *\n * Updates the style and enablePath for the adaptive card action\n *\n * @param manifest\n * @param controlProperties\n * @param adaptiveCardStyle\n * @param enablePath\n */\nfunction updateAdaptiveCardInfo(\n\tmanifest: CardManifest,\n\tcontrolProperties: ControlProperties,\n\tadaptiveCardStyle: string,\n\tenablePath: string\n) {\n\tconst cardConfiguration = manifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration?.parameters;\n\n\tif (configParams?._adaptiveFooterActionParameters && configParams?.footerActionParameters) {\n\t\tconst adaptiveCardActionInfo = configParams._adaptiveFooterActionParameters[controlProperties.titleKey];\n\t\tadaptiveCardActionInfo.style = adaptiveCardStyle;\n\t\tadaptiveCardActionInfo.enablePath = enablePath;\n\t}\n}\n\n/**\n * Adds the action to the card footer\n * @param manifest The card manifest\n * @param actionInfo The action info\n */\nfunction addActionToCardFooter(manifest: CardManifest, actionInfo: AdaptiveCardAction, controlProperties: ControlProperties) {\n\tlet cardFooter = manifest[\"sap.card\"].footer;\n\n\tif (!cardFooter) {\n\t\tmanifest[\"sap.card\"].footer = {\n\t\t\tactionsStrip: []\n\t\t};\n\t\tcardFooter = manifest[\"sap.card\"].footer;\n\t}\n\n\tconst actionLength = cardFooter.actionsStrip.length;\n\n\tif (actionLength < 2) {\n\t\tcardFooter.actionsStrip.push({\n\t\t\ttype: \"Button\",\n\t\t\tvisible: false,\n\t\t\ttext: actionInfo.label,\n\t\t\tbuttonType: getButtonTypeForCard(actionInfo.style),\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"custom\",\n\t\t\t\t\tenabled: actionInfo.enablePath ? \"${\" + actionInfo.enablePath + \"}\" : \"true\",\n\t\t\t\t\tparameters: \"{{parameters.footerActionParameters.\" + controlProperties.titleKey + \"}}\"\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\n\t\taddActionInfoToConfigParameters(manifest, actionInfo, controlProperties);\n\t}\n}\n\n/**\n * Gets the action styles for the card\n * @returns The action styles\n */\nexport function getActionStyles() {\n\tconst actionStyles: Array<ActionStyles> = [\n\t\t{\n\t\t\tname: \"Default\",\n\t\t\tlabel: \"Default\",\n\t\t\tlabelWithValue: \"Default\"\n\t\t},\n\t\t{\n\t\t\tname: \"Positive\",\n\t\t\tlabel: \"Positive\",\n\t\t\tlabelWithValue: \"Positive\"\n\t\t},\n\t\t{\n\t\t\tname: \"Negative\",\n\t\t\tlabel: \"Negative\",\n\t\t\tlabelWithValue: \"Negative\"\n\t\t}\n\t];\n\n\treturn actionStyles;\n}\n\n/**\n * Forms action info from the data field\n * @param dataFields The data fields\n * @param bODataV4 The OData version\n * @returns Action info\n */\nfunction getActionFromDataField(\n\tdataFields: Array<DataField>,\n\tbODataV4: boolean,\n\tmetaModel: V2ODataMetaModel | V4ODataMetaModel,\n\tentitySetName: string\n) {\n\tconst actions: Array<AnnotationAction> = [];\n\tconst dataFieldForAnnotation: string = \"com.sap.vocabularies.UI.v1.DataFieldForAction\";\n\n\tdataFields\n\t\t?.filter(function (dataField: DataField) {\n\t\t\tconst dataFieldType: string = bODataV4 ? dataField?.$Type : dataField?.RecordType;\n\t\t\treturn dataFieldType === dataFieldForAnnotation;\n\t\t})\n\t\t.map(function (dataField: DataField) {\n\t\t\tconst actionInfo = formActionInfoFromDataField(dataField, bODataV4, metaModel, entitySetName) as AnnotationAction;\n\t\t\tactions.push(actionInfo);\n\t\t});\n\n\treturn actions;\n}\n\n/**\n *\n * Updates the action parameter data to the model data.\n * Resolves the i18n keys for label, errorMessage and placeholder properties of adaptive card action parameters.\n *\n *\n * @param actionParameters\n * @param data\n * @param resourceBundle\n */\nconst updateActionParameterData = async function (\n\tactionParameters: AdaptiveCardActionParameter[],\n\tdata: Record<string, PropertyValue>,\n\tresourceBundle?: ResourceModel\n) {\n\tfor (const actionParameter of actionParameters) {\n\t\tif (resourceBundle) {\n\t\t\tactionParameter.label = resolveI18nTextFromResourceModel(actionParameter.label, resourceBundle);\n\t\t\tactionParameter.errorMessage = resolveI18nTextFromResourceModel(actionParameter?.errorMessage || \"\", resourceBundle);\n\t\t\tactionParameter.placeholder = resolveI18nTextFromResourceModel(actionParameter?.placeholder || \"\", resourceBundle);\n\t\t}\n\n\t\tconst actionParameterConfig = actionParameter.configuration;\n\t\tconst valueHelpEntitySet = actionParameterConfig?.entitySet;\n\n\t\tif (valueHelpEntitySet) {\n\t\t\tawait updateModelData(data, actionParameterConfig?.serviceUrl, valueHelpEntitySet);\n\t\t}\n\t}\n};\n\n/**\n *\n * Gets the saved action from card manifest\n * Resolves i18n keys to text for label and ok button used for Submit type of action in adaptive card.\n *\n * @param cardManifest\n * @param data\n * @param resourceBundle\n * @returns\n */\nconst getActionsFromManifest = async function (\n\tcardManifest: CardManifest,\n\tdata: Record<string, PropertyValue>,\n\tresourceBundle?: ResourceModel\n) {\n\tconst cardConfiguration = cardManifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration?.parameters;\n\tconst actions: Array<ControlProperties> = [];\n\n\tif (configParams?._adaptiveFooterActionParameters) {\n\t\tconst _adaptiveFooterActionParameters = configParams._adaptiveFooterActionParameters;\n\t\tconst aKeys = Object.keys(_adaptiveFooterActionParameters);\n\n\t\tfor (const key of aKeys) {\n\t\t\tconst action = _adaptiveFooterActionParameters[key];\n\n\t\t\tif (resourceBundle) {\n\t\t\t\taction.label = resolveI18nTextFromResourceModel(action.label, resourceBundle);\n\t\t\t\taction.triggerActionText = resolveI18nTextFromResourceModel(action.triggerActionText, resourceBundle);\n\t\t\t}\n\n\t\t\tif (action.actionParameters?.length) {\n\t\t\t\tawait updateActionParameterData(action.actionParameters, data, resourceBundle);\n\t\t\t}\n\n\t\t\tlet style = \"Default\";\n\n\t\t\tif (action.style === \"positive\") {\n\t\t\t\tstyle = \"Positive\";\n\t\t\t} else if (action.style === \"destructive\") {\n\t\t\t\tstyle = \"Negative\";\n\t\t\t}\n\n\t\t\tconst actionInfo: ControlProperties = {\n\t\t\t\ttitle: action.label,\n\t\t\t\ttitleKey: key,\n\t\t\t\tstyle: style,\n\t\t\t\tenablePathKey: action.enablePath,\n\t\t\t\tisStyleControlEnabled: true,\n\t\t\t\tisConfirmationRequired: action.data?.isConfirmationRequired || false,\n\t\t\t\ttriggerActionText: action.triggerActionText\n\t\t\t};\n\t\t\tactions.push(actionInfo);\n\t\t}\n\t\treturn actions;\n\t}\n\n\treturn [\n\t\t{\n\t\t\ttitle: \"\",\n\t\t\ttitleKey: \"\",\n\t\t\tstyle: \"Default\",\n\t\t\tenablePathKey: \"\",\n\t\t\tisStyleControlEnabled: false\n\t\t}\n\t];\n};\n\n/**\n * Gets the saved actions if exists in card manifest otherwise an initial action with default values\n *\n * @param resourceModel\n * @param data\n * @param mCardManifest\n * @returns\n */\nexport const getDefaultAction = async function (\n\tresourceModel?: ResourceModel,\n\tdata?: Record<string, PropertyValue>,\n\tmCardManifest?: CardManifest\n) {\n\tif (mCardManifest && data) {\n\t\treturn await getActionsFromManifest(mCardManifest, data, resourceModel);\n\t}\n\n\treturn [\n\t\t{\n\t\t\ttitle: \"\",\n\t\t\ttitleKey: \"\",\n\t\t\tstyle: \"Default\",\n\t\t\tenablePathKey: \"\",\n\t\t\tisStyleControlEnabled: false\n\t\t}\n\t];\n};\n\n/**\n * Gets the card actions\n * @param appComponent The app component\n * @param entitySetName The entity set name\n * @param bODataV4 The OData version\n * @returns The card actions\n */\nexport function getCardActions(appComponent: UIComponent, entitySetName: string, bODataV4: boolean) {\n\tconst appModel = bODataV4 ? (appComponent.getModel() as V2ODataModel) : (appComponent.getModel() as V4ODataModel),\n\t\tmetaModel = appModel.getMetaModel(),\n\t\tentitySet: EntitySet = bODataV4\n\t\t\t? metaModel.getObject(\"/\" + entitySetName)\n\t\t\t: (metaModel as V2ODataMetaModel).getODataEntitySet(entitySetName),\n\t\tentityTypeName: string = bODataV4 ? entitySet?.$Type : entitySet?.entityType,\n\t\tentityType: EntityType = bODataV4\n\t\t\t? metaModel.getObject(\"/\" + entityTypeName)\n\t\t\t: (metaModel as V2ODataMetaModel).getODataEntityType(entityTypeName),\n\t\tidentificationPath: string = bODataV4 ? \"@com.sap.vocabularies.UI.v1.Identification\" : \"com.sap.vocabularies.UI.v1.Identification\";\n\tlet entityTypeAnnotation: EntityTypeAnnotation = {};\n\n\tif (bODataV4) {\n\t\tentityTypeAnnotation = metaModel.getObject(\"/\" + entityTypeName + \"@\");\n\t}\n\n\tconst entityTypeKeys: Array<string> = bODataV4 ? Object.keys(entityTypeAnnotation) : Object.keys(entityType);\n\tconst identificationAnnotation: Array<string> = entityTypeKeys?.filter((key: string) => {\n\t\treturn key === identificationPath;\n\t});\n\tlet dataFields: Array<DataField> = [];\n\n\tif (identificationAnnotation?.length) {\n\t\tdataFields = bODataV4 ? entityTypeAnnotation[identificationPath] : entityType[identificationPath];\n\t}\n\n\treturn getActionFromDataField(dataFields, bODataV4, metaModel, entitySetName);\n}\n\n/**\n * Adds the action to the card manifest\n * @param manifest The card manifest\n * @param controlProperties The control properties\n * @param context\n */\nexport async function addActionToCardManifest(manifest: CardManifest, controlProperties: ControlProperties, context: any) {\n\tconst bODataV4: boolean = context.dialog.getModel().getProperty(\"/configuration/actions/bODataV4\");\n\tconst metaModel: V2ODataMetaModel | V4ODataMetaModel = context.appModel.getMetaModel();\n\tconst actionInfo = await getAdaptiveCardAction(controlProperties, bODataV4, metaModel, context);\n\taddActionToCardFooter(manifest, actionInfo, controlProperties);\n}\n\n/**\n * Removes the action from the card manifest\n * @param manifest The card manifest\n * @param controlProperties The control properties\n */\nexport function removeActionFromManifest(manifest: CardManifest, controlProperties: ControlProperties) {\n\tconst cardFooter = manifest[\"sap.card\"]?.footer;\n\tconst actionLength = cardFooter?.actionsStrip.length;\n\n\tif (actionLength && cardFooter) {\n\t\tconst relatedAction = cardFooter.actionsStrip.filter((actionsStrip) => {\n\t\t\tconst cardParameters = actionsStrip.actions[0].parameters;\n\t\t\treturn cardParameters !== \"{{parameters.footerActionParameters.\" + controlProperties.titleKey + \"}}\";\n\t\t});\n\n\t\tif (relatedAction.length) {\n\t\t\tcardFooter.actionsStrip = relatedAction;\n\t\t} else {\n\t\t\tdelete manifest[\"sap.card\"]?.footer;\n\t\t}\n\n\t\tremoveActionInfoFromConfigParams(manifest, controlProperties);\n\t}\n}\n\n/**\n * Updates the actions in the footer of the card manifest based on the provided control properties.\n *\n * @param {CardManifest} manifest - The card manifest object that contains the footer actions.\n */\nexport function resetCardActions(manifest: CardManifest) {\n\tmanifest[\"sap.card\"].footer = {\n\t\tactionsStrip: []\n\t};\n\n\tconst cardConfiguration = manifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration?.parameters;\n\tif (configParams) {\n\t\tconfigParams._adaptiveFooterActionParameters = {};\n\t\tconfigParams.footerActionParameters = {};\n\t}\n}\n\n/**\n * Updates the actions in the footer of the card manifest based on the provided control properties.\n *\n * @param {CardManifest} manifest - The card manifest object that contains the footer actions.\n * @param {ControlProperties} controlProperties - The control properties used to update the footer actions.\n */\nexport function updateCardManifestAction(manifest: CardManifest, controlProperties: ControlProperties) {\n\tconst cardFooter = manifest[\"sap.card\"].footer;\n\tconst actionLength = cardFooter?.actionsStrip.length;\n\n\tif (actionLength && cardFooter) {\n\t\tcardFooter.actionsStrip.forEach((actionsStrip) => {\n\t\t\tconst action = actionsStrip.actions[0];\n\t\t\tconst cardParameters = action.parameters;\n\n\t\t\tif (cardParameters === \"{{parameters.footerActionParameters.\" + controlProperties.titleKey + \"}}\") {\n\t\t\t\tconst isEnabledExpression = controlProperties.enablePathKey ? \"${\" + controlProperties.enablePathKey + \"}\" : \"true\";\n\t\t\t\tconst adaptiveCardStyle = getActionStyle(controlProperties);\n\t\t\t\tactionsStrip.buttonType = getButtonTypeForCard(controlProperties.style);\n\t\t\t\taction.enabled = isEnabledExpression;\n\t\t\t\tupdateAdaptiveCardInfo(manifest, controlProperties, adaptiveCardStyle, controlProperties.enablePathKey || \"\");\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * Gets the action style\n * @param controlProperties The control properties\n * @returns Action style\n */\n\nfunction getActionStyle(controlProperties: ControlProperties) {\n\tlet actionStyle: string = \"default\";\n\n\tif (controlProperties.style === \"Positive\") {\n\t\tactionStyle = \"positive\";\n\t} else if (controlProperties.style === \"Negative\") {\n\t\tactionStyle = \"destructive\";\n\t}\n\treturn actionStyle;\n}\n\n/**\n *\n * Gets the OData V2 action parameters for the card\n *\n * @param parameters The parameters\n * @param context The context\n * @returns The OData V2 action parameters\n */\nconst getActionParameters = async function (parameters: Array<FunctionImportParameter>, context: any) {\n\tconst actionParameters: Array<AdaptiveCardActionParameter> = [];\n\tconst oResourceBundle = CoreLib.getResourceBundleFor(\"sap.cards.ap.generator.i18n\");\n\n\tfor (const parameter of parameters) {\n\t\tconst EnumMember = parameter?.[\"com.sap.vocabularies.Common.v1.FieldControl\"]?.EnumMember;\n\t\tconst isRequired = EnumMember === \"com.sap.vocabularies.Common.v1.FieldControlType/Mandatory\" || parameter?.nullable === \"false\";\n\t\tconst actionParamInfoToAdd: AdaptiveCardActionParameter = {\n\t\t\tlabel: parameter?.[\"sap:label\"] || parameter?.name || \"\",\n\t\t\tid: parameter?.name || \"\",\n\t\t\tisRequired: isRequired,\n\t\t\terrorMessage: isRequired ? oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_ACTION_PARAMETERS_ERROR_MESSAGE\") : \"\",\n\t\t\tplaceholder: \"\"\n\t\t};\n\n\t\tif (parameter?.[\"sap:value-list\"] === \"fixed-values\") {\n\t\t\tconst actionParameterConfig = await getActionParameterConfigurationV2(parameter, context);\n\n\t\t\tif (actionParameterConfig?.entitySet) {\n\t\t\t\tactionParamInfoToAdd.configuration = actionParameterConfig;\n\t\t\t\tactionParamInfoToAdd.placeholder = oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_ACTION_PARAMETERS_PLACEHOLDER\");\n\t\t\t}\n\t\t}\n\t\tactionParameters.push(actionParamInfoToAdd);\n\t}\n\n\treturn actionParameters;\n};\n\n/**\n * Forms the Adaptive Card action from the control properties\n * @param controlProperties The control properties\n * @param bODataV4 The OData version\n * @param metaModel The meta model\n * @param context Context\n * @returns The action info\n */\nconst getAdaptiveCardAction = async function (\n\tcontrolProperties: ControlProperties,\n\tbODataV4: boolean,\n\tmetaModel: V2ODataMetaModel | V4ODataMetaModel,\n\tcontext: any\n) {\n\tconst oResourceBundle = CoreLib.getResourceBundleFor(\"sap.cards.ap.generator.i18n\");\n\tconst actionStyle = getActionStyle(controlProperties);\n\tlet actionParameters: Array<AdaptiveCardActionParameter> = [];\n\tlet functionImportInfo;\n\tconst data: Data = {\n\t\tisConfirmationRequired: controlProperties.isConfirmationRequired || false\n\t};\n\tconst enabledPathKey = controlProperties.enablePathKey;\n\tconst actionInfo: AdaptiveCardAction = {\n\t\tstyle: actionStyle,\n\t\tverb: \"\",\n\t\tlabel: controlProperties.title,\n\t\tactionParameters: [],\n\t\tdata: data,\n\t\tenablePath: enabledPathKey || \"\",\n\t\ttriggerActionText: oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_SUBMIT_ACTION_OK_BUTTON\")\n\t};\n\n\tif (bODataV4) {\n\t\tactionParameters = await getActionParams(controlProperties, metaModel as V4ODataMetaModel, context);\n\t\tactionInfo.verb = getActionVerb(controlProperties, metaModel as V4ODataMetaModel);\n\t\tactionInfo.actionParameters = actionParameters || [];\n\n\t\treturn actionInfo;\n\t} else {\n\t\tfunctionImportInfo = getFunctionImportInfo(controlProperties, metaModel as V2ODataMetaModel, context);\n\t\tactionInfo.verb = controlProperties.titleKey;\n\t\tactionInfo.parameters = functionImportInfo?.mActionParams?.parameterData;\n\t\tactionInfo.actionParameters = await getActionParameters(functionImportInfo?.mActionParams?.additionalParameters, context);\n\t\tdata.actionParams = {\n\t\t\tkeys: Object.keys(functionImportInfo?.mActionParams?.parameterData)\n\t\t};\n\t\tactionInfo.data = data;\n\n\t\treturn actionInfo;\n\t}\n};\n\n/**\n * Gets the related bound action for OData V4 model\n * @param actionValue The action value\n * @param actionType The action type\n * @returns Bound action\n */\n\nfunction getRelatedBoundAction(actionValue: Array<Action>, actionType: string) {\n\treturn actionValue?.filter((action: Action) => {\n\t\tconst isBoundAction: boolean = action?.$IsBound;\n\t\tif (isBoundAction) {\n\t\t\treturn action?.$Parameter?.some((actionParam: ActionParameter) => {\n\t\t\t\treturn actionType === actionParam?.$Type;\n\t\t\t});\n\t\t}\n\t});\n}\n\n/**\n * Returns the related unbound actions for OData V4 model\n * @param actionValue The action value\n * @returns\n */\nfunction getRelatedUnboundActions(actionValue: Array<Action>) {\n\treturn actionValue?.filter((action: Action) => {\n\t\treturn !action?.$IsBound;\n\t});\n}\n\n/**\n * Gets the valuehelp info for OData V4 metamodel\n *\n * @param metaModel\n * @param contextPath\n * @param actionParamName\n * @returns\n */\nconst getValueHelpInfo = async function (metaModel: V4ODataMetaModel, contextPath: string, actionParamName?: string) {\n\tconst valueListInfo = await metaModel.requestValueListInfo(contextPath, true);\n\tconst valueListAnnotationInfo = valueListInfo?.[\"\"] as ValueListAnnotationInfo;\n\tconst valueListModel = valueListAnnotationInfo?.$model;\n\tconst valueListPropertyName = getValueListPropertyName(valueListAnnotationInfo, actionParamName || \"\");\n\tconst valueHelpEntitySet = valueListAnnotationInfo?.[\"CollectionPath\"];\n\tconst valueHelpAnnotation = valueListModel?.getMetaModel()?.getObject(`/${valueHelpEntitySet}/${valueListPropertyName}@`);\n\treturn {\n\t\tvalueHelpAnnotation,\n\t\tvalueListPropertyName,\n\t\tvalueHelpEntitySet,\n\t\tvalueListModelServiceUrl: valueListModel?.getServiceUrl()\n\t};\n};\n\n/**\n * Returns the action parameter name for OData V4 model\n * @param context\n * @param actionVerb\n * @param actionParamName\n * @returns The action parameter label for OData V4 model\n */\nconst getActionParameterName = async function (context: any, actionVerb: string, actionParamName?: string) {\n\tif (actionParamName) {\n\t\tconst entitySetName = context.entitySet;\n\t\tconst metaModel = context.appModel.getMetaModel();\n\t\tconst contextPath = `/${entitySetName}/${actionVerb}/${actionParamName}`;\n\t\tconst entitySet: EntitySet = metaModel.getObject(\"/\" + context?.entitySet);\n\t\tconst actionParameterAnnotation = metaModel.getObject(\"/\" + entitySet?.$Type + \"/\" + actionParamName + \"@\");\n\n\t\tif (metaModel.getObject(`${contextPath}@`)?.[\"@com.sap.vocabularies.Common.v1.ValueListWithFixedValues\"]) {\n\t\t\tconst { valueHelpAnnotation } = await getValueHelpInfo(metaModel as V4ODataMetaModel, contextPath, actionParamName);\n\n\t\t\treturn (\n\t\t\t\tactionParameterAnnotation?.[\"@com.sap.vocabularies.Common.v1.Label\"] ||\n\t\t\t\tvalueHelpAnnotation?.[\"@com.sap.vocabularies.Common.v1.Label\"]\n\t\t\t);\n\t\t}\n\n\t\treturn actionParameterAnnotation?.[\"@com.sap.vocabularies.Common.v1.Label\"] || actionParamName;\n\t}\n};\n\n/**\n * Returns the value list property name from annotations\n *\n * @param oValueList\n * @param sPropertyName\n * @returns\n */\nfunction getValueListPropertyName(oValueList: ValueListAnnotationInfo, sPropertyName: string): string {\n\tconst oValueListParameter = oValueList?.Parameters.find(function (oParameter: ValueListParameter) {\n\t\treturn oParameter?.LocalDataProperty?.$PropertyPath === sPropertyName;\n\t});\n\treturn oValueListParameter?.ValueListProperty;\n}\n\n/**\n * Function to get the action parameter value based on the text arrangement annotation\n *\n * @param propertyPath\n * @param descriptionPath\n * @param textArrangementType\n * @returns\n */\nexport function getActionParameterValue(propertyPath: string, descriptionPath: string, textArrangementType: string): string {\n\tif (textArrangementType === \"TextOnly\") {\n\t\treturn \"${\" + descriptionPath + \"}\";\n\t} else if (textArrangementType === \"TextLast\") {\n\t\treturn \"${\" + propertyPath + \"}\" + \" (\" + \"${\" + descriptionPath + \"}\" + \")\";\n\t} else if (textArrangementType === \"TextSeparate\") {\n\t\treturn \"${\" + propertyPath + \"}\";\n\t}\n\n\treturn \"${\" + descriptionPath + \"}\" + \" (${\" + propertyPath + \"})\";\n}\n\n/**\n * Updates the model data with value help data for the action parameter\n *\n * @param data\n * @param serviceUrl\n * @param valueHelpEntitySet\n */\nexport const updateModelData = async function (data: Record<string, PropertyValue>, serviceUrl: string, valueHelpEntitySet: string) {\n\tconst valueHelpData = await fetch(serviceUrl);\n\tconst { odataModel } = ApplicationInfo.getInstance().fetchDetails();\n\tconst bODataV4 = odataModel === ODataModelVersion.V4;\n\n\tif (valueHelpData && typeof valueHelpData.json === \"function\") {\n\t\tconst valueHelpDataJson = await valueHelpData.json();\n\t\tconst valueHelpDataValue = bODataV4 ? valueHelpDataJson?.value : valueHelpDataJson?.d?.results;\n\n\t\tif (valueHelpDataValue?.length) {\n\t\t\tdata[valueHelpEntitySet] = valueHelpDataValue;\n\t\t}\n\t}\n};\n\n/**\n * Get Action Parameter Data for OData V4 model\n *\n * @param context\n * @param actionVerb\n * @param actionParamName\n * @returns\n */\nconst getActionParameterConfiguration = async function (context: any, actionVerb: string, actionParamName?: string) {\n\tconst actionParameterConfig = {\n\t\tserviceUrl: \"\",\n\t\tvalue: \"\",\n\t\tentitySet: \"\",\n\t\ttitle: \"\"\n\t};\n\n\tif (!actionParamName) {\n\t\treturn actionParameterConfig;\n\t}\n\n\tconst entitySetName = context.entitySet;\n\tconst oDialogModel = context.dialog.getModel();\n\tconst metaModel = context.appModel.getMetaModel();\n\tconst contextPath = `/${entitySetName}/${actionVerb}/${actionParamName}`;\n\tconst actionParamAnnotations = metaModel.getObject(`${contextPath}@`);\n\tif (!actionParamAnnotations?.[\"@com.sap.vocabularies.Common.v1.ValueListWithFixedValues\"]) {\n\t\treturn actionParameterConfig;\n\t}\n\n\tconst { valueHelpAnnotation, valueListPropertyName, valueHelpEntitySet, valueListModelServiceUrl } = await getValueHelpInfo(\n\t\tmetaModel as V4ODataMetaModel,\n\t\tcontextPath,\n\t\tactionParamName\n\t);\n\tconst textArrangementPath = valueHelpAnnotation?.[\"@com.sap.vocabularies.Common.v1.Text\"]?.$Path;\n\tconst textArrangementAnnotation =\n\t\tvalueHelpAnnotation?.[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"];\n\tconst actionParameterValue =\n\t\t(textArrangementAnnotation?.$EnumMember && valueListPropertyName && textArrangementPath) ||\n\t\t(valueListPropertyName && textArrangementPath)\n\t\t\t? getActionParameterValue(valueListPropertyName, textArrangementPath, textArrangementAnnotation?.$EnumMember?.split(\"/\")[1])\n\t\t\t: \"${\" + valueListPropertyName + \"}\";\n\n\tlet serviceUrl = valueListModelServiceUrl;\n\tserviceUrl =\n\t\tvalueListPropertyName && textArrangementPath\n\t\t\t? `${serviceUrl}${valueHelpEntitySet}?$select=${valueListPropertyName},${textArrangementPath}`\n\t\t\t: `${serviceUrl}${valueHelpEntitySet}?$select=${valueListPropertyName}`;\n\tserviceUrl = `${serviceUrl}&skip=0&$top=20`;\n\n\tconst data = oDialogModel.getProperty(\"/configuration/$data\");\n\tawait updateModelData(data, serviceUrl, valueHelpEntitySet);\n\toDialogModel.setProperty(\"/configuration/$data\", data);\n\n\treturn {\n\t\tentitySet: valueHelpEntitySet,\n\t\tserviceUrl: serviceUrl,\n\t\tvalue: actionParameterValue,\n\t\ttitle: \"${\" + valueListPropertyName + \"}\"\n\t};\n};\n\n/**\n * Get Action Parameter Info for OData V4 application's Action\n *\n * The action parameter will consist of errorMessage and placeholder which will be used by adaptive card.\n * Currently the errorMessage and placeholder will have values only for actions having dropdown value as input.\n *\n * @param relatedAction The related action\n * @param context The context\n * @param actionVerb The action verb\n * @param isBoundAction Is bound action\n * @returns The action parameter info\n */\nconst getActionParameterInfo = async function (relatedAction: Action, context: any, actionVerb: string, isBoundAction?: boolean) {\n\tconst actionParamInfo: any = [];\n\tlet actionIndex = 0;\n\n\tif (relatedAction && relatedAction.$Parameter) {\n\t\tconst oResourceBundle = CoreLib.getResourceBundleFor(\"sap.cards.ap.generator.i18n\");\n\n\t\tfor (const actionParam of relatedAction.$Parameter) {\n\t\t\tconst isActionRequired = !isBoundAction || (isBoundAction && actionIndex > 0);\n\t\t\tif (isActionRequired) {\n\t\t\t\tconst isRequired = actionParam.$Nullable === false;\n\t\t\t\tconst actionParamInfoToAdd: AdaptiveCardActionParameter = {\n\t\t\t\t\tisRequired: isRequired,\n\t\t\t\t\tid: actionParam.$Name,\n\t\t\t\t\tlabel: await getActionParameterName(context, actionVerb, actionParam.$Name),\n\t\t\t\t\terrorMessage: isRequired ? oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_ACTION_PARAMETERS_ERROR_MESSAGE\") : \"\",\n\t\t\t\t\tplaceholder: \"\"\n\t\t\t\t};\n\t\t\t\tconst actionParameterConfig = (await getActionParameterConfiguration(\n\t\t\t\t\tcontext,\n\t\t\t\t\tactionVerb,\n\t\t\t\t\tactionParam.$Name\n\t\t\t\t)) as ActionParameterConfiguration;\n\t\t\t\tif (actionParameterConfig?.entitySet) {\n\t\t\t\t\tactionParamInfoToAdd[\"configuration\"] = actionParameterConfig;\n\t\t\t\t\tactionParamInfoToAdd.placeholder = oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_ACTION_PARAMETERS_PLACEHOLDER\");\n\t\t\t\t}\n\t\t\t\tactionParamInfo.push(actionParamInfoToAdd);\n\t\t\t}\n\t\t\tactionIndex++;\n\n\t\t\tif (actionIndex === relatedAction.$Parameter.length) {\n\t\t\t\treturn actionParamInfo;\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Gets the enabled value from annotation\n *\n * @param actionAnnotation\n * @returns\n */\nfunction getEnabledValueFromAnnotation(actionAnnotation: ActionAnnotation) {\n\tif (actionAnnotation) {\n\t\tconst operationAvailable = actionAnnotation[\"@Org.OData.Core.V1.OperationAvailable\"];\n\n\t\tif (operationAvailable?.$Path) {\n\t\t\treturn operationAvailable.$Path;\n\t\t} else if (operationAvailable?.Bool) {\n\t\t\treturn operationAvailable.Bool;\n\t\t}\n\t}\n\n\treturn \"\";\n}\n\n/**\n * Gets the critical value from annotation\n *\n * @param oCriticalAnnotation\n * @returns\n */\nfunction getCriticalValueFromAnnotation(oCriticalAnnotation: CriticalAction) {\n\tif (!oCriticalAnnotation) {\n\t\treturn false;\n\t}\n\tif (oCriticalAnnotation.Bool === undefined) {\n\t\treturn true;\n\t}\n\n\tconst oParameterValue = oCriticalAnnotation.Bool;\n\n\tif (typeof oParameterValue === \"string\") {\n\t\tconst oActionValue = oParameterValue.toLowerCase();\n\t\treturn !(oActionValue == \"false\" || oActionValue == \"\" || oActionValue == \" \");\n\t}\n\n\treturn !!oParameterValue;\n}\n\n/**\n *\n * Returns the metadata annotation info for OData V4 model ( enabled or critical value coming from metadata annotations )\n *\n * @param dataField\n * @param metaModel\n * @param entityTypeName\n * @returns\n */\n\nfunction getMetadataAnnotationInfoV4(dataField: DataFieldV4, metaModel: V4ODataMetaModel, entitySetName: string) {\n\tconst dataFieldAction = dataField.Action;\n\tconst actionVerb = dataFieldAction.indexOf(\"(\") > -1 ? dataFieldAction.split(\"(\")[0] : dataFieldAction;\n\tconst actionAnnotation = metaModel.getObject(\"/\" + entitySetName + \"/\" + actionVerb + \"@\");\n\tconst enablePath = getEnabledValueFromAnnotation(actionAnnotation);\n\tconst isConfirmationRequired = getCriticalValueFromAnnotation(actionAnnotation?.[\"@com.sap.vocabularies.UI.v1.Critical\"]);\n\n\treturn {\n\t\tenablePath: enablePath,\n\t\tisConfirmationRequired: isConfirmationRequired\n\t};\n}\n\n/**\n * Get the metadata annotation info for OData V2 model\n *\n * @param dataField\n * @param metaModel\n * @returns\n */\nfunction getMetadataAnnotationInfoV2(dataField: DataField, metaModel: V2ODataMetaModel) {\n\tconst functionName: string = dataField.Action.String.split(\"/\")[1];\n\tconst functionImport: FunctionImport = metaModel.getODataFunctionImport(functionName);\n\n\treturn {\n\t\tenablePath: functionImport?.[\"sap:applicable-path\"] || \"\",\n\t\tisConfirmationRequired: getCriticalValueFromAnnotation(functionImport?.[\"com.sap.vocabularies.Common.v1.IsActionCritical\"])\n\t};\n}\n\n/**\n * Gets the action parameters for OData V4 model\n * @param controlProperties The control properties\n * @param metaModel The meta model\n * @param context The context\n * @returns Action parameters\n */\nconst getActionParams = async function (controlProperties: ControlProperties, metaModel: V4ODataMetaModel, context: any) {\n\tconst titleKey = controlProperties.titleKey || \"\";\n\tconst actionVerb: string = titleKey.indexOf(\"(\") > -1 ? titleKey.split(\"(\")[0] : titleKey;\n\tconst actionValue = metaModel.getObject(`/${context.entitySet}/${actionVerb}`);\n\tlet actionType: string = titleKey.indexOf(\"(\") > -1 ? titleKey?.split(\"(\")[1] : \"\";\n\tactionType = actionType.indexOf(\")\") > -1 ? actionType.replace(\")\", \"\") : actionType;\n\n\t//Get action Parameters for unbound action\n\tif (actionValue?.$kind === \"ActionImport\" && actionValue?.$Action) {\n\t\tconst unBoundActions = metaModel.getObject(\"/\" + actionValue?.$Action);\n\t\tconst relatedUnboundAction = getRelatedUnboundActions(unBoundActions);\n\t\treturn getActionParameterInfo(relatedUnboundAction[0], context, actionVerb);\n\t}\n\n\t//Get action Parameters for Bound actions\n\tconst relatedBoundAction = getRelatedBoundAction(actionValue, actionType);\n\n\tif (relatedBoundAction?.length && relatedBoundAction[0]?.$Parameter != null && relatedBoundAction[0]?.$Parameter.length > 1) {\n\t\treturn await getActionParameterInfo(relatedBoundAction[0], context, actionVerb, true);\n\t}\n};\n\n/**\n * Get the action verb for OData V4 model\n * @param controlProperties The control properties\n * @param metaModel The meta model\n * @returns Returns the action string\n */\nfunction getActionVerb(controlProperties: ControlProperties, metaModel: V4ODataMetaModel) {\n\tconst titleKey = controlProperties.titleKey || \"\";\n\tconst actionVerb = titleKey.indexOf(\"(\") > -1 ? titleKey.split(\"(\")[0] : titleKey;\n\tconst actionValue = metaModel.getObject(\"/\" + actionVerb) || [];\n\tlet actionType: string = titleKey.indexOf(\"(\") > -1 ? titleKey.split(\"(\")[1] : \"\";\n\tactionType = actionType.indexOf(\")\") > -1 ? actionType.replace(\")\", \"\") : actionType;\n\n\t//Get action string for unbound action\n\tif (actionValue?.$kind === \"ActionImport\" && actionValue?.$Action) {\n\t\treturn titleKey?.split(\"/\")[1];\n\t}\n\n\tconst relatedBoundAction = getRelatedBoundAction(actionValue, actionType);\n\t//Get action string for bound action\n\tif (relatedBoundAction?.length) {\n\t\treturn actionVerb;\n\t}\n\n\treturn actionVerb;\n}\n\n/**\n * Get the function import info for OData V2 model's action\n *\n * @param controlProperties The control properties\n * @param metaModel The meta model\n * @param context Current context\n * @returns Functionimport info\n */\nfunction getFunctionImportInfo(controlProperties: ControlProperties, metaModel: V2ODataMetaModel, context: any) {\n\tconst functionName: string = controlProperties.titleKey;\n\tconst functionImport: FunctionImport = metaModel.getODataFunctionImport(functionName);\n\tconst oContextObject = context.dialog.getModel().getProperty(\"/configuration/$data\");\n\tconst entitySet: EntitySet = metaModel.getODataEntitySet(context?.entitySet);\n\tconst entityType: EntityType = metaModel.getODataEntityType(entitySet?.entityType);\n\tconst mKeyProperties: KeyMap = getPropertyKeys(entityType);\n\tconst oSkipProperties: SkipProperty = {};\n\tconst mActionParams: ParametersInfoV2 = {\n\t\tparameterData: {},\n\t\tadditionalParameters: []\n\t};\n\n\tfunctionImport?.parameter?.forEach(function (importParameter: FunctionImportParameter) {\n\t\taddParameterLabel(importParameter, entityType, metaModel);\n\n\t\tconst parameterName: string = importParameter?.name || \"\";\n\t\tconst isKey = !!mKeyProperties[parameterName];\n\t\tlet parameterValue;\n\n\t\tif (oContextObject?.hasOwnProperty(parameterName)) {\n\t\t\tparameterValue = oContextObject[parameterName];\n\t\t} else if (isKey && oContextObject && functionImport[\"sap:action-for\"]) {\n\t\t\t// parameter is key but not part of the current projection - raise error\n\t\t\tLog.error(\"Key parameter of action not found in current context: \" + parameterName);\n\t\t\tthrow new Error(\"Key parameter of action not found in current context: \" + parameterName);\n\t\t}\n\n\t\tmActionParams.parameterData[parameterName] = parameterValue;\n\n\t\tconst skip = !!oSkipProperties[parameterName];\n\t\tif (!skip && (!isKey || !functionImport[\"sap:action-for\"]) && importParameter.mode.toUpperCase() == \"IN\") {\n\t\t\t// offer as optional parameter with default value from context\n\t\t\tmActionParams.additionalParameters.push(importParameter);\n\t\t}\n\t});\n\n\treturn {\n\t\tmActionParams: mActionParams,\n\t\tfunctionImport: functionImport\n\t};\n}\n\n/**\n * Get the property keys for the entity type\n * @param entityType The entity type\n * @returns The property keys map\n */\nconst getPropertyKeys = function (entityType: EntityType) {\n\tconst oKeyMap: KeyMap = {};\n\n\tentityType.key.propertyRef.forEach((property: Property) => {\n\t\tif (property.name) {\n\t\t\toKeyMap[property.name] = true;\n\t\t}\n\t});\n\n\treturn oKeyMap;\n};\n\n/**\n * Adds the parameter label to the entity type property\n *\n * @param parameter The Action parameter\n * @param entityType The entity type\n * @param metaModel The meta model\n */\nconst addParameterLabel = function (parameter: FunctionImportParameter, entityType: EntityType, metaModel: V2ODataMetaModel) {\n\tif (entityType && parameter && !parameter[\"com.sap.vocabularies.Common.v1.Label\"]) {\n\t\tconst property: Property = metaModel.getODataProperty(entityType, parameter.name, false);\n\t\tif (property && property[\"com.sap.vocabularies.Common.v1.Label\"]) {\n\t\t\t// copy label from property to parameter with same name as default if no label is set for function import parameter\n\t\t\tparameter[\"com.sap.vocabularies.Common.v1.Label\"] = property[\"com.sap.vocabularies.Common.v1.Label\"];\n\t\t}\n\t}\n};\n\n/**\n *\n * Returns the service URL, valueListPropertyPath, descriptionPath for OData V2 model using the value list parameters\n *\n * @param serviceUrlPrefix\n * @param valueListParameters\n * @returns\n */\nfunction getParameterConfigFromValueList(serviceUrlPrefix: string, valueListParameters: ValueListParameter[]) {\n\tconst selectProps: Array<string> = [];\n\tlet valueListPropertyPath = \"\",\n\t\tdescriptionPath = \"\";\n\n\tvalueListParameters.forEach((valueListParameter) => {\n\t\tconst valueListProperty = valueListParameter?.ValueListProperty?.String;\n\t\tif (valueListProperty) {\n\t\t\tselectProps.push(valueListProperty);\n\t\t\tdescriptionPath =\n\t\t\t\tvalueListParameter?.RecordType === \"com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly\"\n\t\t\t\t\t? valueListProperty\n\t\t\t\t\t: descriptionPath;\n\t\t\tvalueListPropertyPath =\n\t\t\t\tvalueListParameter?.RecordType === \"com.sap.vocabularies.Common.v1.ValueListParameterInOut\"\n\t\t\t\t\t? valueListProperty\n\t\t\t\t\t: valueListPropertyPath;\n\t\t}\n\t});\n\n\tconst serviceUrl = `${serviceUrlPrefix}?$select=${selectProps.join(\",\")}`;\n\n\treturn {\n\t\tserviceUrl,\n\t\tvalueListPropertyPath,\n\t\tdescriptionPath\n\t};\n}\n\n/**\n *\n * Get the action parameter configuration for OData V2 model\n *\n * @param parameter\n * @param context\n * @returns The action parameter configuration for OData V2 model\n */\nexport const getActionParameterConfigurationV2 = async function (parameter: FunctionImportParameter, context: any) {\n\tconst actionParameterConfig = {\n\t\tserviceUrl: \"\",\n\t\tvalue: \"\",\n\t\tentitySet: \"\",\n\t\ttitle: \"\"\n\t};\n\n\tif (!parameter) {\n\t\treturn actionParameterConfig;\n\t}\n\n\tconst ValueListAnnotation = parameter?.[\"com.sap.vocabularies.Common.v1.ValueList\"];\n\tconst valueListParameters = ValueListAnnotation?.Parameters as ValueListParameter[];\n\tconst entitySetName = ValueListAnnotation?.CollectionPath?.String;\n\tconst { serviceUrl, valueListPropertyPath, descriptionPath } = getParameterConfigFromValueList(\n\t\t`${context.appModel.sServiceUrl}/${entitySetName}`,\n\t\tvalueListParameters\n\t);\n\n\tlet textArrangementType = \"TextOnly\";\n\n\tif (parameter?.[\"com.sap.vocabularies.UI.v1.TextArrangement\"]) {\n\t\ttextArrangementType = parameter[\"com.sap.vocabularies.UI.v1.TextArrangement\"]?.EnumMember?.split(\"/\")[1];\n\t}\n\n\tconst actionParameterValue =\n\t\tvalueListPropertyPath && descriptionPath\n\t\t\t? getActionParameterValue(valueListPropertyPath, descriptionPath, textArrangementType)\n\t\t\t: \"${\" + valueListPropertyPath + \"}\";\n\n\tconst oDialogModel = context.dialog.getModel();\n\tconst data = oDialogModel.getProperty(\"/configuration/$data\");\n\tawait updateModelData(data, serviceUrl, entitySetName);\n\toDialogModel.setProperty(\"/configuration/$data\", data);\n\n\treturn {\n\t\tentitySet: entitySetName,\n\t\tserviceUrl: serviceUrl,\n\t\tvalue: actionParameterValue,\n\t\ttitle: \"${\" + valueListPropertyPath + \"}\"\n\t};\n};\n"],"mappings":"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","ignoreList":[]}