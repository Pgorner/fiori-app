{"version":3,"file":"ApplicationInfo-dbg-dbg.js","names":["sap","ui","define","Component","ODataModelVersion","ApplicationInfo","constructor","rootComponent","_rootComponent","model","getModel","_oDataModelVersion","isA","V4","V2","createInstance","instance","getInstance","Error","getRootComponent","fetchDetails","bODataV4","serviceUrl","getServiceUrl","sServiceUrl","hash","window","hasher","getHash","componentName","getManifest","id","hashPartial","split","semanticObject","action","includes","path","startsWith","replace","index","indexOf","entitySet","substring","floorPlan","odataModel","entitySetWithObjectContext","validateCardGeneration","_this","Promise","resolve","mApplicationInfo","entitySetWithContext","paranStart","paranEnd","sContext","e","reject","_resetInstance","__exports","__esModule"],"sources":["ApplicationInfo.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport Component from \"sap/ui/core/Component\";\nimport V2ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport V4ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\ntype Model = V2ODataModel | V4ODataModel;\n\ntype ObjectPageApplicationInfo = {\n\trootComponent: Component;\n\tfloorPlan: string;\n\todataModel: string;\n\tentitySet: string;\n\tserviceUrl: string;\n\tentitySetWithObjectContext: string;\n\tcomponentName: string;\n\tsemanticObject: string;\n\taction: string;\n};\n\nexport enum ODataModelVersion {\n\tV2 = \"V2\",\n\tV4 = \"V4\"\n}\n\nexport type LibVersionInfo = {\n\tbuildTimestamp: string;\n\tname: string;\n\tscmRevision: string;\n\tversion: string;\n};\n\nexport class ApplicationInfo {\n\tstatic instance: ApplicationInfo | null;\n\t_oDataModelVersion: ODataModelVersion;\n\t_rootComponent: Component;\n\n\tprivate constructor(rootComponent: Component) {\n\t\tthis._rootComponent = rootComponent;\n\t\tconst model = rootComponent.getModel() as Model;\n\t\tthis._oDataModelVersion = model.isA<V4ODataModel>(\"sap.ui.model.odata.v4.ODataModel\") ? ODataModelVersion.V4 : ODataModelVersion.V2;\n\t}\n\n\tpublic static createInstance(rootComponent: Component) {\n\t\tif (!ApplicationInfo.instance) {\n\t\t\tApplicationInfo.instance = new ApplicationInfo(rootComponent);\n\t\t}\n\t\treturn ApplicationInfo.instance;\n\t}\n\n\tpublic static getInstance() {\n\t\tif (ApplicationInfo.instance) {\n\t\t\treturn ApplicationInfo.instance;\n\t\t}\n\t\tthrow new Error(\"ApplicationInfo instance not found\");\n\t}\n\n\tgetRootComponent() {\n\t\treturn this._rootComponent;\n\t}\n\n\tfetchDetails(): ObjectPageApplicationInfo {\n\t\tconst model = this._rootComponent.getModel() as Model;\n\t\tconst bODataV4 = this._oDataModelVersion === ODataModelVersion.V4;\n\t\tconst serviceUrl = bODataV4 ? (model as V4ODataModel).getServiceUrl() : (model as V2ODataModel).sServiceUrl;\n\t\tconst hash = window.hasher.getHash();\n\t\tconst componentName = this._rootComponent.getManifest()[\"sap.app\"].id;\n\t\tconst [hashPartial] = hash.split(\"&/\");\n\t\tconst [semanticObject, action] = hashPartial.includes(\"?\") ? hashPartial.split(\"?\")[0].split(\"-\") : hashPartial.split(\"-\");\n\n\t\tlet path = hash.split(\"&/\")[1] || \"\";\n\t\tpath = path.includes(\"/\") ? path.split(\"/\")[0] : path;\n\n\t\tif (path.startsWith(\"/\")) {\n\t\t\tpath = path.replace(\"/\", \"\");\n\t\t}\n\n\t\tconst index = path.indexOf(\"(\");\n\t\tconst entitySet = path.substring(0, index);\n\n\t\treturn {\n\t\t\trootComponent: this._rootComponent,\n\t\t\tfloorPlan: \"ObjectPage\",\n\t\t\todataModel: bODataV4 ? ODataModelVersion.V4 : ODataModelVersion.V2,\n\t\t\tentitySet,\n\t\t\tserviceUrl,\n\t\t\tentitySetWithObjectContext: path,\n\t\t\tcomponentName,\n\t\t\tsemanticObject,\n\t\t\taction\n\t\t};\n\t}\n\n\tasync validateCardGeneration() {\n\t\tif (!this._rootComponent || !(this._rootComponent instanceof Component)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst mApplicationInfo = this.fetchDetails();\n\t\tif (!mApplicationInfo.serviceUrl || !mApplicationInfo.entitySet) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst entitySetWithContext = mApplicationInfo.entitySetWithObjectContext;\n\t\tif (!entitySetWithContext) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (entitySetWithContext.indexOf(\"(\") > -1) {\n\t\t\tconst paranStart = entitySetWithContext.indexOf(\"(\");\n\t\t\tconst paranEnd = entitySetWithContext.indexOf(\")\");\n\t\t\tconst sContext = entitySetWithContext.substring(paranStart + 1, paranEnd);\n\t\t\tif (!sContext) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * For testing purposes only\n\t */\n\t_resetInstance() {\n\t\tApplicationInfo.instance = null;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}