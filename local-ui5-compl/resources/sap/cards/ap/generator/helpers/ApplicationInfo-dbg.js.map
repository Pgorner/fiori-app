{"version":3,"file":"ApplicationInfo-dbg.js","names":["sap","ui","define","Component","ODataModelVersion","ApplicationInfo","constructor","rootComponent","this","_rootComponent","model","getModel","_oDataModelVersion","isA","V4","V2","createInstance","instance","getInstance","Error","getRootComponent","fetchDetails","bODataV4","serviceUrl","getServiceUrl","sServiceUrl","hash","window","hasher","getHash","componentName","getManifest","id","hashPartial","split","semanticObject","action","includes","path","startsWith","replace","index","indexOf","entitySet","substring","floorPlan","odataModel","entitySetWithObjectContext","validateCardGeneration","_this","Promise","resolve","mApplicationInfo","entitySetWithContext","paranStart","paranEnd","sContext","e","reject","_resetInstance","__exports","__esModule"],"sources":["ApplicationInfo.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport Component from \"sap/ui/core/Component\";\nimport V2ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport V4ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\ntype Model = V2ODataModel | V4ODataModel;\n\ntype ObjectPageApplicationInfo = {\n\trootComponent: Component;\n\tfloorPlan: string;\n\todataModel: string;\n\tentitySet: string;\n\tserviceUrl: string;\n\tentitySetWithObjectContext: string;\n\tcomponentName: string;\n\tsemanticObject: string;\n\taction: string;\n};\n\nexport enum ODataModelVersion {\n\tV2 = \"V2\",\n\tV4 = \"V4\"\n}\n\nexport type LibVersionInfo = {\n\tbuildTimestamp: string;\n\tname: string;\n\tscmRevision: string;\n\tversion: string;\n};\n\nexport class ApplicationInfo {\n\tstatic instance: ApplicationInfo | null;\n\t_oDataModelVersion: ODataModelVersion;\n\t_rootComponent: Component;\n\n\tprivate constructor(rootComponent: Component) {\n\t\tthis._rootComponent = rootComponent;\n\t\tconst model = rootComponent.getModel() as Model;\n\t\tthis._oDataModelVersion = model.isA<V4ODataModel>(\"sap.ui.model.odata.v4.ODataModel\") ? ODataModelVersion.V4 : ODataModelVersion.V2;\n\t}\n\n\tpublic static createInstance(rootComponent: Component) {\n\t\tif (!ApplicationInfo.instance) {\n\t\t\tApplicationInfo.instance = new ApplicationInfo(rootComponent);\n\t\t}\n\t\treturn ApplicationInfo.instance;\n\t}\n\n\tpublic static getInstance() {\n\t\tif (ApplicationInfo.instance) {\n\t\t\treturn ApplicationInfo.instance;\n\t\t}\n\t\tthrow new Error(\"ApplicationInfo instance not found\");\n\t}\n\n\tgetRootComponent() {\n\t\treturn this._rootComponent;\n\t}\n\n\tfetchDetails(): ObjectPageApplicationInfo {\n\t\tconst model = this._rootComponent.getModel() as Model;\n\t\tconst bODataV4 = this._oDataModelVersion === ODataModelVersion.V4;\n\t\tconst serviceUrl = bODataV4 ? (model as V4ODataModel).getServiceUrl() : (model as V2ODataModel).sServiceUrl;\n\t\tconst hash = window.hasher.getHash();\n\t\tconst componentName = this._rootComponent.getManifest()[\"sap.app\"].id;\n\t\tconst [hashPartial] = hash.split(\"&/\");\n\t\tconst [semanticObject, action] = hashPartial.includes(\"?\") ? hashPartial.split(\"?\")[0].split(\"-\") : hashPartial.split(\"-\");\n\n\t\tlet path = hash.split(\"&/\")[1] || \"\";\n\t\tpath = path.includes(\"/\") ? path.split(\"/\")[0] : path;\n\n\t\tif (path.startsWith(\"/\")) {\n\t\t\tpath = path.replace(\"/\", \"\");\n\t\t}\n\n\t\tconst index = path.indexOf(\"(\");\n\t\tconst entitySet = path.substring(0, index);\n\n\t\treturn {\n\t\t\trootComponent: this._rootComponent,\n\t\t\tfloorPlan: \"ObjectPage\",\n\t\t\todataModel: bODataV4 ? ODataModelVersion.V4 : ODataModelVersion.V2,\n\t\t\tentitySet,\n\t\t\tserviceUrl,\n\t\t\tentitySetWithObjectContext: path,\n\t\t\tcomponentName,\n\t\t\tsemanticObject,\n\t\t\taction\n\t\t};\n\t}\n\n\tasync validateCardGeneration() {\n\t\tif (!this._rootComponent || !(this._rootComponent instanceof Component)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst mApplicationInfo = this.fetchDetails();\n\t\tif (!mApplicationInfo.serviceUrl || !mApplicationInfo.entitySet) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst entitySetWithContext = mApplicationInfo.entitySetWithObjectContext;\n\t\tif (!entitySetWithContext) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (entitySetWithContext.indexOf(\"(\") > -1) {\n\t\t\tconst paranStart = entitySetWithContext.indexOf(\"(\");\n\t\t\tconst paranEnd = entitySetWithContext.indexOf(\")\");\n\t\t\tconst sContext = entitySetWithContext.substring(paranStart + 1, paranEnd);\n\t\t\tif (!sContext) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * For testing purposes only\n\t */\n\t_resetInstance() {\n\t\tApplicationInfo.instance = null;\n\t}\n}\n"],"mappings":";;;;AAAA,aAAAA,IAAAC,GAAAC,OAAA,mCAAAC,GAAA,iBAsBYC,EAAiB,SAAjBA,KAAiB,WAAjBA,EAAiB,kBAAjBA,CAAiB,EAAjBA,GAAiB,IAYtB,MAAMC,EAKJC,YAAYC,GACnBC,KAAKC,eAAiBF,EACtB,MAAMG,EAAQH,EAAcI,WAC5BH,KAAKI,mBAAqBF,EAAMG,IAAkB,oCAAsCT,EAAkBU,GAAKV,EAAkBW,EAClI,CAEA,qBAAcC,CAAeT,GAC5B,IAAKF,EAAgBY,SAAU,CAC9BZ,EAAgBY,SAAW,IAAIZ,EAAgBE,EAChD,CACA,OAAOF,EAAgBY,QACxB,CAEA,kBAAcC,GACb,GAAIb,EAAgBY,SAAU,CAC7B,OAAOZ,EAAgBY,QACxB,CACA,MAAM,IAAIE,MAAM,qCACjB,CAEAC,mBACC,OAAOZ,KAAKC,cACb,CAEAY,eACC,MAAMX,EAAQF,KAAKC,eAAeE,WAClC,MAAMW,EAAWd,KAAKI,qBAAuBR,EAAkBU,GAC/D,MAAMS,EAAaD,EAAYZ,EAAuBc,gBAAmBd,EAAuBe,YAChG,MAAMC,EAAOC,OAAOC,OAAOC,UAC3B,MAAMC,EAAgBtB,KAAKC,eAAesB,cAAc,WAAWC,GACnE,MAAOC,GAAeP,EAAKQ,MAAM,MACjC,MAAOC,EAAgBC,GAAUH,EAAYI,SAAS,KAAOJ,EAAYC,MAAM,KAAK,GAAGA,MAAM,KAAOD,EAAYC,MAAM,KAEtH,IAAII,EAAOZ,EAAKQ,MAAM,MAAM,IAAM,GAClCI,EAAOA,EAAKD,SAAS,KAAOC,EAAKJ,MAAM,KAAK,GAAKI,EAEjD,GAAIA,EAAKC,WAAW,KAAM,CACzBD,EAAOA,EAAKE,QAAQ,IAAK,GAC1B,CAEA,MAAMC,EAAQH,EAAKI,QAAQ,KAC3B,MAAMC,EAAYL,EAAKM,UAAU,EAAGH,GAEpC,MAAO,CACNlC,cAAeC,KAAKC,eACpBoC,UAAW,aACXC,WAAYxB,EAAWlB,EAAkBU,GAAKV,EAAkBW,GAChE4B,YACApB,aACAwB,2BAA4BT,EAC5BR,gBACAK,iBACAC,SAEF,CAEMY,yBAAsB,IAAG,MAAAC,EACzBzC,KAAL,IAAKyC,EAAKxC,kBAAoBwC,EAAKxC,0BAA0BN,GAAY,CACxE,OAAA+C,QAAAC,QAAO,MACR,CAEA,MAAMC,EAAmBH,EAAK5B,eAC9B,IAAK+B,EAAiB7B,aAAe6B,EAAiBT,UAAW,CAChE,OAAAO,QAAAC,QAAO,MACR,CAEA,MAAME,EAAuBD,EAAiBL,2BAC9C,IAAKM,EAAsB,CAC1B,OAAAH,QAAAC,QAAO,MACR,CAEA,GAAIE,EAAqBX,QAAQ,MAAQ,EAAG,CAC3C,MAAMY,EAAaD,EAAqBX,QAAQ,KAChD,MAAMa,EAAWF,EAAqBX,QAAQ,KAC9C,MAAMc,EAAWH,EAAqBT,UAAUU,EAAa,EAAGC,GAChE,IAAKC,EAAU,CACd,OAAAN,QAAAC,QAAO,MACR,CACD,KAAO,CACN,OAAAD,QAAAC,QAAO,MACR,CAEA,OAAAD,QAAAC,QAAO,KACR,CAAC,MAAAM,GAAA,OAAAP,QAAAQ,OAAAD,EAAA,EAKDE,iBACCtD,EAAgBY,SAAW,IAC5B,EACA,IAAA2C,EAAA,CAAAC,WAAA,MAAAD,EAAAxD,oBAAAwD,EAAAvD,kBAAA,OAAAuD,CAAA","ignoreList":[]}