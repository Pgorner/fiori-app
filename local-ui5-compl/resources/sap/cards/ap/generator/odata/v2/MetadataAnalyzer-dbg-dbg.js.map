{"version":3,"file":"MetadataAnalyzer-dbg-dbg.js","names":["sap","ui","define","Annotatations","label","isPotentiallySensitive","isoCurrency","unit","getNavigationPropertyInfoFromEntity","oModel","sEntitySet","oMetaModel","getMetaModel","oResult","parameters","oEntityType","getEntityTypeFromEntitySet","aNavigationProperties","navigationProperty","forEach","oNavProperty","oNavigationEntitySet","getODataAssociationEnd","name","oNavigationEntityType","getODataEntityType","type","key","properties","mapProperties","property","navigationParameter","push","getPropertyInfoFromEntity","model","entitySet","withNavigation","resourceModel","metaModel","entityType","propertiesWithoutNav","map","obj","category","getText","kind","propertiesWithNav","filter","isPropertySensitive","mapPropertyInfo","oEntitySet","getODataEntitySet","oProperty","Bool","multiplicity","isDate","checkForDateType","ISOCurrency","unitOfMeasure","UOM","Path","String","getLabelForEntitySet","oEntityDef","getPropertyReference","entitySetName","entityDefinition","propertyRef","includes","getMetaModelObjectForEntitySet","navigationProperties","propertyName","navigationEntitySet","navigationEntityType","complexProperties","__exports","__esModule"],"sources":["MetadataAnalyzer.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport ODataMetaModel, { EntitySet, EntityType } from \"sap/ui/model/odata/ODataMetaModel\";\nimport ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport type { RequestQueryNavigationProperties, RequestQueryParameters } from \"../../helpers/Batch\";\nimport type { NavigationParameter, NavigationParameters, Property } from \"../../helpers/CardGeneratorModel\";\nimport { PropertyInfo, PropertyInfoMap } from \"../ODataTypes\";\n\nconst Annotatations = {\n\tlabel: \"com.sap.vocabularies.Common.v1.Label\",\n\tisPotentiallySensitive: \"com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive\",\n\tisoCurrency: \"Org.OData.Measures.V1.ISOCurrency\",\n\tunit: \"Org.OData.Measures.V1.Unit\"\n};\n\nexport function getNavigationPropertyInfoFromEntity(oModel: ODataModel, sEntitySet: string): NavigationParameter[] {\n\tconst oMetaModel: ODataMetaModel = oModel.getMetaModel();\n\tconst oResult: NavigationParameters = { parameters: [] };\n\n\tconst oEntityType = getEntityTypeFromEntitySet(oMetaModel, sEntitySet);\n\tconst aNavigationProperties = oEntityType?.navigationProperty || [];\n\n\taNavigationProperties.forEach((oNavProperty: any) => {\n\t\tconst oNavigationEntitySet = oMetaModel.getODataAssociationEnd(oEntityType as EntityType, oNavProperty.name);\n\t\tconst oNavigationEntityType = oMetaModel.getODataEntityType(oNavigationEntitySet.type);\n\n\t\tif (oNavigationEntityType.key) {\n\t\t\tconst properties: Property[] = mapProperties(oNavigationEntityType.property);\n\t\t\tconst navigationParameter: NavigationParameter = {\n\t\t\t\tname: oNavProperty.name,\n\t\t\t\tproperties: properties\n\t\t\t};\n\t\t\toResult.parameters.push(navigationParameter);\n\t\t}\n\t});\n\treturn oResult.parameters;\n}\n\nexport function getPropertyInfoFromEntity(\n\tmodel: ODataModel,\n\tentitySet: string,\n\twithNavigation: boolean,\n\tresourceModel?: ResourceBundle\n): PropertyInfoMap {\n\tconst metaModel = model.getMetaModel();\n\tconst entityType = getEntityTypeFromEntitySet(metaModel, entitySet) as EntityType;\n\tlet properties = [];\n\tif (withNavigation) {\n\t\tconst propertiesWithoutNav = (entityType?.property || []).map((obj) => ({\n\t\t\t...obj,\n\t\t\tcategory: resourceModel?.getText(\"CRITICALITY_CONTROL_SELECT_PROP\"),\n\t\t\tkind: \"Property\"\n\t\t}));\n\t\tconst propertiesWithNav = (entityType?.navigationProperty || []).map((obj) => ({\n\t\t\t...obj,\n\t\t\tcategory: resourceModel?.getText(\"GENERATOR_CARD_SELECT_NAV_PROP\"),\n\t\t\tkind: \"NavigationProperty\"\n\t\t}));\n\t\tproperties = [...propertiesWithoutNav, ...propertiesWithNav];\n\t} else {\n\t\tproperties = entityType?.property || [];\n\t\tproperties.forEach((property) => (property.kind = \"Property\"));\n\t}\n\n\treturn properties\n\t\t.filter((property) => !isPropertySensitive(metaModel, entityType, property))\n\t\t.map((property) => mapPropertyInfo(property, withNavigation));\n}\n\nfunction getEntityTypeFromEntitySet(oMetaModel: ODataMetaModel, sEntitySet: string): EntityType | undefined {\n\tconst oEntitySet = oMetaModel.getODataEntitySet(sEntitySet);\n\treturn oMetaModel.getODataEntityType(oEntitySet?.entityType) as EntityType | undefined;\n}\n\nfunction mapProperties(properties: any[]): Property[] {\n\treturn properties.map((property: any) => ({\n\t\tlabel: property[\"sap:label\"] || property?.name,\n\t\ttype: property.type,\n\t\tname: property?.name\n\t}));\n}\n\nfunction isPropertySensitive(oMetaModel: ODataMetaModel, oEntityType: EntityType, oProperty: any): boolean {\n\tconst oNavigationEntitySet = oMetaModel.getODataAssociationEnd(oEntityType, oProperty.name);\n\treturn oProperty[Annotatations.isPotentiallySensitive]?.Bool || oNavigationEntitySet?.multiplicity === \"*\";\n}\n\nfunction mapPropertyInfo(oProperty: any, withNavigation: boolean): PropertyInfo {\n\tconst isDate: boolean = checkForDateType(oProperty);\n\tconst ISOCurrency = oProperty && oProperty[Annotatations.isoCurrency];\n\tconst unitOfMeasure = oProperty && oProperty[Annotatations.unit];\n\tlet UOM: string = \"\";\n\n\tif (ISOCurrency) {\n\t\tUOM = ISOCurrency?.Path ? ISOCurrency?.Path : ISOCurrency?.String;\n\t} else if (unitOfMeasure) {\n\t\tUOM = unitOfMeasure?.Path ? unitOfMeasure?.Path : unitOfMeasure?.String;\n\t} else if (oProperty && oProperty[\"sap:unit\"]) {\n\t\tUOM = oProperty && oProperty[\"sap:unit\"];\n\t}\n\n\treturn {\n\t\tlabel: oProperty[\"sap:label\"] || oProperty?.name,\n\t\ttype: oProperty.type,\n\t\tname: oProperty.name,\n\t\t...(withNavigation && { category: oProperty.category }),\n\t\tUOM,\n\t\tisDate,\n\t\tkind: oProperty.kind\n\t};\n}\n\nexport function checkForDateType(property: PropertyInfo | Property) {\n\treturn property.type === \"Edm.DateTimeOffset\" || property.type === \"Edm.DateTime\";\n}\n\nexport function getLabelForEntitySet(oModel: ODataModel, sEntitySet: string) {\n\tconst oMetaModel = oModel.getMetaModel();\n\tconst oEntitySet = oMetaModel.getODataEntitySet(sEntitySet);\n\tconst oEntityDef = oMetaModel.getODataEntityType(oEntitySet?.entityType);\n\tconst label = oEntityDef[Annotatations.label] && oEntityDef[Annotatations.label].String;\n\treturn label || sEntitySet;\n}\n\nexport function getPropertyReference(oModel: ODataModel, entitySetName: string) {\n\tconst metaModel = oModel.getMetaModel();\n\tconst entitySet = metaModel.getODataEntitySet(entitySetName) as EntitySet;\n\tconst entityDefinition = metaModel.getODataEntityType(entitySet.entityType) as EntityType;\n\tconst propertyRef = entityDefinition.key.propertyRef.map((property) => property.name);\n\tconst properties = getPropertyInfoFromEntity(oModel, entitySetName, false);\n\n\treturn properties.filter((property) => propertyRef.includes(property?.name));\n}\n\nexport function getMetaModelObjectForEntitySet(metaModel: ODataMetaModel, entitySetName: string): RequestQueryParameters {\n\tconst entitySet = metaModel.getODataEntitySet(entitySetName) as EntitySet;\n\tconst entityType = metaModel.getODataEntityType(entitySet.entityType) as EntityType;\n\tconst properties: Property[] = entityType.property || [];\n\tconst navigationProperties: RequestQueryNavigationProperties[] = [];\n\n\tentityType.navigationProperty?.forEach((navigationProperty) => {\n\t\tconst propertyName = navigationProperty.name;\n\t\tconst navigationEntitySet = metaModel.getODataAssociationEnd(entityType, propertyName);\n\t\tif (navigationEntitySet !== null) {\n\t\t\tconst navigationEntityType = metaModel.getODataEntityType(navigationEntitySet.type) as EntityType;\n\t\t\tconst navigationProperty = navigationEntityType.property || [];\n\t\t\tnavigationProperties.push({\n\t\t\t\tname: propertyName,\n\t\t\t\tproperties: navigationProperty\n\t\t\t});\n\t\t}\n\t});\n\n\treturn {\n\t\tproperties,\n\t\tnavigationProperties,\n\t\tcomplexProperties: []\n\t};\n}\n"],"mappings":"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","ignoreList":[]}