{"version":3,"file":"ODataUtils-dbg-dbg.js","names":["sap","ui","define","encodeURLParameters","sap_cards_ap_common_odata_ODataUtils","V2ODataModel","___ODataTypes","V2MetadataAnalyzer","V4MetadataAnalyzer","createContextParameter","PropertyInfoType","getLabelForEntitySet","getLabelForEntitySetV2","getPropertyInfoFromEntity","getPropertyInfoFromEntityV2","getNavigationPropertyInfoFromEntity","getNavigationPropertyInfoFromEntityV2","getMetaModelObjectForEntitySet","getMetaModelObjectForEntitySetForODataV2","getLabelForEntitySetV4","getPropertyInfoFromEntityV4","getNavigationPropertyInfoFromEntityV4","getMetaModelObjectForEntitySetForODataV4","isODataV4Model","oModel","isA","fetchDataAsyncV4","sUrl","sPath","queryParams","formattedUrl","endsWith","format","parameters","sFormattedUrl","Promise","resolve","fetch","then","response","json","data","catch","err","Error","e","reject","fetchDataAsyncV2","fnSuccess","oData","fnFailure","oError","read","success","error","urlParameters","fetchDataAsync","bODataV4","arguments","length","undefined","Object","keys","forEach","key","oAppModel","sEntitySet","withNavigation","resourceBundle","metaModel","getPropertyLabel","sProperty","propertyType","Property","propertyInfo","property","find","oProperty","name","label","getDataType","dataTypeMap","Boolean","Byte","SByte","Int16","Int32","Int64","Single","Double","Float","Decimal","Guid","String","Date","DateTime","DateTimeOffset","Time","Binary","Stream","TimeOfDay","Duration","type","startsWith","replace","createPathWithEntityContext","path","oDataV4","index","indexOf","entitySetName","substring","context","isPropertyTypeDate","dataType","__exports","__esModule"],"sources":["ODataUtils.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport encodeURLParameters from \"sap/base/security/encodeURLParameters\";\nimport { createContextParameter } from \"sap/cards/ap/common/odata/ODataUtils\";\nimport type ODataMetaModel from \"sap/ui/model/odata/ODataMetaModel\";\nimport V2ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport type { default as V4ODataMetaModel } from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type { default as V4ODataModel } from \"sap/ui/model/odata/v4/ODataModel\";\nimport { PropertyInfo, PropertyInfoType } from \"./ODataTypes\";\nimport * as V2MetadataAnalyzer from \"./v2/MetadataAnalyzer\";\nimport * as V4MetadataAnalyzer from \"./v4/MetadataAnalyzer\";\nconst {\n\tgetLabelForEntitySet: getLabelForEntitySetV2,\n\tgetPropertyInfoFromEntity: getPropertyInfoFromEntityV2,\n\tgetNavigationPropertyInfoFromEntity: getNavigationPropertyInfoFromEntityV2,\n\tgetMetaModelObjectForEntitySet: getMetaModelObjectForEntitySetForODataV2\n} = V2MetadataAnalyzer;\n\nconst {\n\tgetLabelForEntitySet: getLabelForEntitySetV4,\n\tgetPropertyInfoFromEntity: getPropertyInfoFromEntityV4,\n\tgetNavigationPropertyInfoFromEntity: getNavigationPropertyInfoFromEntityV4,\n\tgetMetaModelObjectForEntitySet: getMetaModelObjectForEntitySetForODataV4\n} = V4MetadataAnalyzer;\n\nexport const isODataV4Model = function (oModel: V2ODataModel | V4ODataModel | undefined): boolean {\n\treturn (oModel && oModel.isA<V4ODataModel>(\"sap.ui.model.odata.v4.ODataModel\")) || false;\n};\n\nexport const fetchDataAsyncV4 = async function (sUrl: string, sPath: string, queryParams: Record<string, string>) {\n\tconst formattedUrl = sUrl.endsWith(\"/\") ? sUrl : `${sUrl}/`;\n\tqueryParams.format = \"json\";\n\tconst parameters = encodeURLParameters(queryParams);\n\tconst sFormattedUrl = `${formattedUrl}${sPath}?${parameters}`;\n\treturn fetch(sFormattedUrl)\n\t\t.then((response) => response.json())\n\t\t.then((data) => data)\n\t\t.catch((err) => {\n\t\t\tthrow new Error(err);\n\t\t});\n};\n\nconst fetchDataAsyncV2 = async function (sUrl: string, sPath: string, queryParams: Record<string, string>) {\n\tconst oModel = new V2ODataModel(sUrl);\n\treturn new Promise(function (resolve, reject) {\n\t\tconst fnSuccess = function (oData: object) {\n\t\t\tresolve(oData);\n\t\t};\n\t\tconst fnFailure = function (oError: Error) {\n\t\t\treject(oError);\n\t\t};\n\t\toModel.read(\"/\" + sPath, { success: fnSuccess, error: fnFailure, urlParameters: queryParams });\n\t});\n};\n\nexport const fetchDataAsync = async function (sUrl: string, sPath: string, bODataV4?: boolean, urlParameters: Record<string, string> = {}) {\n\tconst queryParams: Record<string, string> = {};\n\tObject.keys(urlParameters).forEach((key) => {\n\t\tif (urlParameters[key].length) {\n\t\t\tqueryParams[key] = urlParameters[key];\n\t\t}\n\t});\n\n\tif (bODataV4) {\n\t\treturn fetchDataAsyncV4(sUrl, sPath, queryParams);\n\t} else {\n\t\treturn fetchDataAsyncV2(sUrl, sPath, queryParams);\n\t}\n};\n\nexport const getLabelForEntitySet = function (oAppModel: V2ODataModel | V4ODataModel | undefined, sEntitySet: string) {\n\tif (!oAppModel) {\n\t\treturn \"\";\n\t}\n\tif (oAppModel.isA<V2ODataModel>(\"sap.ui.model.odata.v2.ODataModel\")) {\n\t\treturn getLabelForEntitySetV2(oAppModel, sEntitySet);\n\t} else {\n\t\treturn getLabelForEntitySetV4(oAppModel, sEntitySet);\n\t}\n};\n\nexport const getPropertyInfoFromEntity = function (\n\toAppModel: V2ODataModel | V4ODataModel | undefined,\n\tsEntitySet: string,\n\twithNavigation: boolean,\n\tresourceBundle?: ResourceBundle\n) {\n\tif (!oAppModel) {\n\t\treturn [];\n\t}\n\tif (oAppModel.isA<V2ODataModel>(\"sap.ui.model.odata.v2.ODataModel\")) {\n\t\treturn getPropertyInfoFromEntityV2(oAppModel, sEntitySet, withNavigation, resourceBundle);\n\t} else {\n\t\treturn getPropertyInfoFromEntityV4(oAppModel, sEntitySet, withNavigation, resourceBundle);\n\t}\n};\n\nexport const getNavigationPropertyInfoFromEntity = function (oAppModel: V2ODataModel | V4ODataModel | undefined, sEntitySet: string) {\n\tif (!oAppModel) {\n\t\treturn [];\n\t}\n\tif (oAppModel.isA<V2ODataModel>(\"sap.ui.model.odata.v2.ODataModel\")) {\n\t\treturn getNavigationPropertyInfoFromEntityV2(oAppModel, sEntitySet);\n\t} else {\n\t\treturn getNavigationPropertyInfoFromEntityV4(oAppModel, sEntitySet);\n\t}\n};\n\nexport const getMetaModelObjectForEntitySet = function (\n\tmetaModel: ODataMetaModel | V4ODataMetaModel,\n\tsEntitySet: string,\n\tisODataV4Model: boolean\n) {\n\tif (!isODataV4Model) {\n\t\treturn getMetaModelObjectForEntitySetForODataV2(metaModel as ODataMetaModel, sEntitySet);\n\t} else {\n\t\treturn getMetaModelObjectForEntitySetForODataV4(metaModel as V4ODataMetaModel, sEntitySet);\n\t}\n};\n\nexport function getPropertyLabel(\n\toModel: V2ODataModel | V4ODataModel | undefined,\n\tsEntitySet: string,\n\tsProperty: string,\n\tpropertyType: PropertyInfoType = PropertyInfoType.Property\n) {\n\tconst propertyInfo =\n\t\tpropertyType === PropertyInfoType.Property\n\t\t\t? getPropertyInfoFromEntity(oModel, sEntitySet, false)\n\t\t\t: getNavigationPropertyInfoFromEntity(oModel, sEntitySet);\n\n\tconst property = propertyInfo.find((oProperty) => oProperty.name === sProperty);\n\treturn propertyType === PropertyInfoType.Property ? (property as PropertyInfo)?.label || \"\" : property || \"\";\n}\n\n/**\n * Get the data type of the property mapped with supported data types by integration cards configuration parameters\n * @param propertyType\n */\nexport function getDataType(propertyType: string) {\n\tconst dataTypeMap: Record<string, string> = {\n\t\tBoolean: \"boolean\",\n\t\tByte: \"integer\",\n\t\tSByte: \"integer\",\n\t\tInt16: \"integer\",\n\t\tInt32: \"integer\",\n\t\tInt64: \"number\",\n\t\tSingle: \"number\",\n\t\tDouble: \"number\",\n\t\tFloat: \"number\",\n\t\tDecimal: \"number\",\n\t\tGuid: \"string\",\n\t\tString: \"string\",\n\t\tDate: \"date\",\n\t\tDateTime: \"datetime\",\n\t\tDateTimeOffset: \"datetime\",\n\t\tTime: \"datetime\",\n\t\tBinary: \"\",\n\t\tStream: \"\",\n\t\tTimeOfDay: \"\",\n\t\tDuration: \"\"\n\t};\n\n\tconst type = propertyType.startsWith(\"Edm.\") ? propertyType.replace(\"Edm.\", \"\") : propertyType;\n\treturn dataTypeMap[type] || \"string\";\n}\n\nexport const createPathWithEntityContext = async function (path: string, oAppModel: V2ODataModel | V4ODataModel, oDataV4: boolean) {\n\tconst index = path.indexOf(\"(\");\n\tconst entitySetName = path.substring(0, index);\n\tconst context = await createContextParameter(path, oAppModel, oDataV4);\n\n\treturn `${entitySetName}(${context})`;\n};\n\n/**\n * Checks if the given data type is of a date type.\n *\n * @param {string} dataType - The data type to check.\n * @returns {boolean} - Returns `true` if the data type is one of \"Edm.Date\", \"Edm.DateTimeOffset\", or \"Edm.TimeOfDay\"; otherwise, returns `false`.\n */\n\nexport function isPropertyTypeDate(dataType: string): boolean {\n\treturn [\"Edm.Date\", \"Edm.DateTime\", \"Edm.DateTimeOffset\", \"Edm.TimeOfDay\"].indexOf(dataType) > -1;\n}\n"],"mappings":"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","ignoreList":[]}