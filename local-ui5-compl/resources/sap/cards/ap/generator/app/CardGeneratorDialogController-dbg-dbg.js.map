{"version":3,"file":"CardGeneratorDialogController-dbg-dbg.js","names":["sap","ui","define","Log","merge","ODataUtils","sap_cards_ap_transpiler_cardTranspiler_Transpile","MessageBox","MessageToast","CoreElement","Fragment","Popup","sap_ui_core_library","Filter","JSONModel","jQuery","___config_PreviewOptions","___helpers_ApplicationInfo","___helpers_Batch","___helpers_FooterActions","___helpers_Formatter","___helpers_I18nHelper","___helpers_IntegrationCardHelper","___helpers_PropertyExpression","___helpers_Transpiler","___odata_ODataTypes","___utils_CommonUtils","_iteratorSymbol","Symbol","iterator","_settle","pact","state","value","s","_Pact","v","o","bind","then","observer","prototype","onFulfilled","onRejected","result","callback","e","_this","_isSettledPact","thenable","_forTo","array","body","check","i","reject","_cycle","length","toggleAdvancedSetting","toggleEvent","toggleButton","getSource","setEnabled","splitter","getElementById","controller","onCriticalityChange","criticalityChangeEvent","updateCriticality","getParameter","onArrangementsChange","arrangementChangeEvent","Promise","resolve","checkForNavigationProperty","updateArrangements","dialogModel","context","dialog","getModel","groups","getProperty","items","item","uom","split","slice","undefined","setProperty","aPropsWithUoM","indexOf","name","push","onPropertyFormatterChangeFromAdvancedSettings","updateHeaderArrangements","load","advancedSettings","getPressed","lastContentArea","getContentAreas","removeContentArea","insertContentArea","setTimeout","transpileIntegrationCardToAdaptive","_forOf","target","step","next","done","return","_fixup","TypeError","values","event","selectedParameters","getParameters","selectedItem","model","navigationProperties","selectedNavigationalProperties","existingIndex","findIndex","navItem","selectedProperty","find","prop","selectedPropertyName","properties","selectedPropertyValues","data","_temp5","updateCardConfigurationData","textArrangementChanged","navigationalPropertiesForId","isNavigationForId","navigationKeyForId","navigationalPropertiesForDescription","isNavigationForDescription","navigationKeyForDescription","onPropertySelection","oEvent","control","selectedKey","getSelectedKey","newValue","currentValue","oModel","validateContol","updateSelectedNavigationProperty","selectedNavigationPropertiesContent","sPath","getBindingContext","getPath","group","getArrangements","unitOfMeasures","textArrangements","propertyValueFormatters","navigationProperty","navigationalProperties","propertyLabel","getPropertyLabel","appModel","entitySet","PropertyInfoType","Property","label","isEnabled","isNavigationEnabled","refresh","updateCardGroups","okPressed","hasError","validateHeader","oCard","mManifest","getManifest","enhanceManifestWithInsights","rootComponent","enhanceManifestWithConfigurationParameters","createAndStoreGeneratedi18nKeys","updateManifestWithSelectQueryParams","keyParameters","appIntent","oAdaptiveCardManifest","convertIntegrationCardToAdaptive","configuration","parameters","contextParameters","payload","floorplan","localPath","fileName","manifests","type","manifest","default","ajax","url","headers","JSON","stringify","success","show","getTranslatedText","error","jqXHR","textStatus","errorThrown","errorMessage","status","statusText","close","isHeader","_temp4","onStateIndicatorSelection","getHeaderConfiguration","header","mainIndicator","getCriticality","number","selectedNavigationPropertyHeader","selectedValue","dataType","isDateType","isPropertyTypeDate","isNumberType","updateTrendForCardHeader","updateSideIndicatorsForHeader","updateCardHeader","selectedNavigationProperty","entitySetWithObjectContext","ApplicationInfo","getInstance","fetchDetails","serviceUrl","oDataV4","$data","queryParameters","map","property","fetchDataAsync","createUrlParameters","addLabelsForProperties","ValueState","PREVIEW_OPTIONS","addActionToCardManifest","removeActionFromManifest","resetCardActions","updateCardManifestAction","formatPropertyDropdownValues","getCurrentCardManifest","renderCardPreview","resolvePropertyPathFromExpression","isBinding","MAX_GROUPS","MAX_GROUP_ITEMS","cardActionHandlers","onActionAddClick","addedActions","title","titleKey","style","enablePathKey","isStyleControlEnabled","isConfirmationRequired","onAddedActionDelete","actionIndex","Number","deletedAction","splice","validateSelectedAction","annotationActions","some","annotationAction","getValue","action","updateRelativeproperties","addedAction","relatedAnnotationAction","filter","enabledPath","enablePath","replace","filterCardActions","comboBox","itemsBinding","getBinding","actionToFilter","loadActions","controlEvent","isSuspended","resume","addEventDelegate","onBeforeRendering","onAddedActionTitleChange","path","_temp3","setValueState","None","_temp2","_temp","Error","setValueStateText","errorControls","focus","onAddedActionStyleChange","CardGeneratorDialogController","initialize","setModel","oModelDialog","cancelPressed","closeDialog","onAddClick","onGroupAddClick","onGroupDeleteClick","onDeleteClick","updateContentNavigationSelection","onPropertyLabelChange","onTitleSelection","onSubTitleSelection","onGroupTitleChange","onDrop","onHeaderUOMSelection","updateHeaderNavigationSelection","onHeightChange","onWidthChange","onResetPressed","onItemsActionsButtonPressed","onPreviewTypeChange","onPropertyFormatting","_updateTrendForCardHeader","_updateSideIndicatorsForHeader","_setAdvancedFormattingOptionsEnablement","setAdvancedFormattingOptionsEnablement","_updateHeaderArrangements","_updateArrangements","_updateCriticality","_validateHeader","applyCriticality","applyUoMFormatting","onTrendDelete","loadAdvancedFormattingConfigurationFragment","disableOrEnableUOMAndTrend","sPropertyName","isCalcuationType","aMainIndicatorCriticality","oMatchedCriticality","oCriticality","criticality","activeCalculation","staticValues","deviationLow","deviationRangeLowValue","deviationHigh","deviationRangeHighValue","toleranceLow","toleranceRangeLowValue","toleranceHigh","toleranceRangeHighValue","sImprovementDirection","improvementDirection","oCriticalityConfigValues","Negative","Critical","Positive","sourceProperty","mainIndicatorProperty","unitsOfMeasure","mainIndicatorCriticality","selectedTrendOptions","selectedIndicatorOptions","isFormatterApplied","formatterDetail","formatterApplied","formatterName","isUOMApplied","arrangementDetail","isCriticalityApplied","indicatorCriticality","isTrendApplied","trendDetail","downDifference","isIndicatorsApplied","indicatorDetail","targetUnit","trendOptions","indicatorsValue","referenceValue","upDifference","targetValue","deviationValue","deviationUnit","fnGetHeaderConfig","key","navigationValue","sapCardHeader","currentManifest","oManifest","sideIndicators","controlName","resourceBundle","getResourceBundle","getKey","getText","controlErrorText","forEach","errorControl","index","getId","subTitle","unitOfMeasurement","propVal","ele","propertyValue","labelWithValue","updateSelectedNavigation","typeSupported","propertyType","isNaN","isUoMEnabled","navProperty","NavigationProperty","oProperty","source","selectedNavigation","existingItem","navValues","includes","propertyPath","sKey","getObject","nextItemNumber","newItem","iItemsAdded","getValueState","validateIndicatorsValues","buttonId","targetInputId","setValueStateTextForControl","deviationInputId","targetUnitInputId","deviationUnitInputId","validateTrendValues","trendValues","referenceInputId","trendDownDifferenceInputId","trendUpDifferenceInputId","controlId","isSelectControl","elementControl","validateControl","validationText","iLength","currentDefaultValue","groupLength","groupIndex","_itemActionsMenu","itemIndex","match","sValue","destroy","trend","selectedTrendOptionIndex","selectedTrendOption","newTrendValues","getTrendDirection","selectedIndicatorOptionIndex","selectedIndicatorOption","unit","indicatorsValueToAdd","mainIndicatorKey","oDragged","oDropped","sInsertPosition","oDragPos","getParent","oDropPos","sDraggedPath","sDroppedPath","aDragItems","aDropItems","iDragPosition","indexOfItem","iDropPosition","oSelectedItem","setWidth","setHeight","setValue","setCriticalitySourceProperty","sProperty","relavantCriticality","relavantProperty","parse","hostCriticality","oSource","_advancedFormattingOptionsPopover","id","onFormatTypeSelection","sourceItem","aUom","sSourceUoMProperty","aSourceUom","onAdvancedFormattingConfigOpen","oPopover","addDependent","oContext","setBindingContext","openBy","oConfigurationController","onPopoverClose","onPropertyFormatterChange","applyFormatting","applyFormatter","resetValueState","onDownDifferenceChange","onUpDifferenceChange","onReferenceValInputChange","onTargetValueChange","onDeviationValueChange","onTargetUnitChange","onDeviationUnitChange","applyIndicators","hasIndicatorsError","_advancedFormattingConfigurationPopover","applyTrendCalculation","hasTrendError","onDelete","sourceUoMProperty","iIndex","itemsBindingPath","relativeIndex","updatedPropertyValueFormatters","formatter","onIndicatorsDelete","selectedIndicatorValues","onDeleteFormatter","deleteFormatter","onDeleteCriticality","_onDeleteButtonClicked","sourceCriticalityProperty","propertyExists","targetProperty","propertyKeyForDescription","oData","propertyKeyForId","bMatchingProperty","oUom","selectedTrendValues","mainIndicatorUnitText","oResourceBundle","sUomText","sFormatterText","criticalityText","sSelectedGroupItemPath","sSelectedGroupProperty","sProperties","propertyLabelWithValue","sIndicatorsText","sTrendCalculatorText","mLabels","uomText","formatterText","indicatorsText","trendCalculatorText","oController","onNavigationActionSelect","sId","customData","getCustomData","customAction","custom","actionType","actions","hasActions","isDestroyed","oMenu","open","Dock","BeginTop","BeginBottom","selectedCardType","getSelectedItem","oAdaptiveCardContainer","oCustomSize","setVisible","subtitle","mainIndicatorValue","aUnitOfMeasures","aTextArrangements","aPropertyValueFormatters","groupItem","groupItemValue","content","__exports","__esModule"],"sources":["CardGeneratorDialogController.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport Log from \"sap/base/Log\";\nimport merge from \"sap/base/util/merge\";\nimport * as ODataUtils from \"sap/cards/ap/generator/odata/ODataUtils\";\nimport { convertIntegrationCardToAdaptive } from \"sap/cards/ap/transpiler/cardTranspiler/Transpile\";\nimport type ComboBox from \"sap/m/ComboBox\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport type Event from \"sap/ui/base/Event\";\nimport type EventProvider from \"sap/ui/base/EventProvider\";\nimport CoreElement from \"sap/ui/core/Element\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport Popup from \"sap/ui/core/Popup\";\nimport { ValueState } from \"sap/ui/core/library\";\nimport type { CardManifest, ObjectContent } from \"sap/ui/integration/widgets/Card\";\nimport Card from \"sap/ui/integration/widgets/Card\";\nimport Filter from \"sap/ui/model/Filter\";\nimport ListBinding from \"sap/ui/model/ListBinding\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport jQuery from \"sap/ui/thirdparty/jquery\";\nimport { PREVIEW_OPTIONS } from \"../config/PreviewOptions\";\nimport { ApplicationInfo } from \"../helpers/ApplicationInfo\";\nimport { QueryParameters, createUrlParameters, updateManifestWithSelectQueryParams } from \"../helpers/Batch\";\nimport type {\n\tGroupItem,\n\tNavigationParameter,\n\tNavigationalData,\n\tObjectCardGroups,\n\tSideIndicatorOptions,\n\tTrendOptions,\n\tTrendOrIndicatorOptions\n} from \"../helpers/CardGeneratorModel\";\nimport { addActionToCardManifest, removeActionFromManifest, resetCardActions, updateCardManifestAction } from \"../helpers/FooterActions\";\nimport { formatPropertyDropdownValues, type FormatterConfigurationMap } from \"../helpers/Formatter\";\nimport { createAndStoreGeneratedi18nKeys } from \"../helpers/I18nHelper\";\nimport {\n\tenhanceManifestWithConfigurationParameters,\n\tenhanceManifestWithInsights,\n\tgetCurrentCardManifest,\n\trenderCardPreview,\n\tupdateCardGroups\n} from \"../helpers/IntegrationCardHelper\";\nimport { getArrangements, resolvePropertyPathFromExpression } from \"../helpers/PropertyExpression\";\nimport { transpileIntegrationCardToAdaptive } from \"../helpers/Transpiler\";\nimport { PropertyInfo, PropertyInfoMap, PropertyInfoType } from \"../odata/ODataTypes\";\nimport type { AnnotationAction, ControlProperties } from \"../types/ActionTypes\";\nimport { isBinding } from \"../utils/CommonUtils\";\nimport { ArrangementOptions } from \"./controls/ArrangementsEditor\";\nimport ToggleButton from \"sap/m/ToggleButton\";\nimport Control from \"sap/ui/core/Control\";\nimport Splitter from \"sap/ui/layout/Splitter\";\n\ntype UnitOfMeasures = {\n\tpropertyKeyForDescription: string;\n\tname: string;\n\tpropertyKeyForId: string;\n\tvalue: string;\n};\ntype ValueFormatter = {\n\tproperty: string;\n};\ntype Criticality = {\n\tcriticality: string;\n\tname: string;\n};\n\ntype Property = {\n\tname: string;\n};\ntype EventParameters = {\n\tselectedItem: ArrangementOptions;\n\ttextArrangementChanged: boolean;\n};\n\nconst context: any = {};\nconst aPropsWithUoM: any = [];\nconst MAX_GROUPS = 5;\nconst MAX_GROUP_ITEMS = 5;\n\nconst cardActionHandlers = {\n\tonActionAddClick: function () {\n\t\tconst oModel = context.dialog.getModel();\n\t\tconst addedActions: Array<ControlProperties> = oModel.getProperty(\"/configuration/actions/addedActions\");\n\n\t\tif (addedActions.length < 2) {\n\t\t\taddedActions.push({\n\t\t\t\ttitle: \"\",\n\t\t\t\ttitleKey: \"\",\n\t\t\t\tstyle: \"Default\",\n\t\t\t\tenablePathKey: \"\",\n\t\t\t\tisStyleControlEnabled: false,\n\t\t\t\tisConfirmationRequired: false\n\t\t\t});\n\t\t\toModel.setProperty(\"/configuration/actions/addedActions\", addedActions);\n\t\t}\n\t\toModel.setProperty(\"/configuration/actions/isAddActionEnabled\", addedActions.length < 2);\n\t},\n\tonAddedActionDelete: function (oEvent: Event) {\n\t\tconst oModel = context.dialog.getModel();\n\t\tconst control: ComboBox = oEvent?.getSource();\n\t\tconst sPath = control?.getBindingContext()?.getPath();\n\t\tconst actionIndex = Number(sPath?.split(\"/configuration/actions/addedActions/\")[1]);\n\t\tconst addedActions: Array<ControlProperties> = oModel.getProperty(\"/configuration/actions/addedActions\");\n\t\tconst deletedAction = actionIndex !== undefined ? addedActions.splice(actionIndex, 1) : [];\n\t\toModel.setProperty(\"/configuration/actions/addedActions\", addedActions);\n\t\toModel.setProperty(\"/configuration/actions/isAddActionEnabled\", addedActions.length < 2);\n\t\tconst manifest = getCurrentCardManifest();\n\t\tremoveActionFromManifest(manifest, deletedAction[0]);\n\t\trenderCardPreview(manifest, context.dialog.getModel());\n\t\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n\t},\n\tvalidateSelectedAction: function (control: ComboBox) {\n\t\tconst oModel = context.dialog.getModel();\n\t\tconst annotationActions: Array<AnnotationAction> = oModel.getProperty(\"/configuration/actions/annotationActions\");\n\t\treturn annotationActions.some((annotationAction) => {\n\t\t\treturn annotationAction.label === control.getValue() && annotationAction.action === control.getSelectedKey();\n\t\t});\n\t},\n\tupdateRelativeproperties: function (addedAction: ControlProperties, sPath: string) {\n\t\tconst oModel = context.dialog.getModel();\n\t\tconst annotationActions: Array<AnnotationAction> = oModel.getProperty(\"/configuration/actions/annotationActions\");\n\t\tconst relatedAnnotationAction = annotationActions.filter((annotationAction) => {\n\t\t\treturn annotationAction.label === addedAction.title && annotationAction.action === addedAction.titleKey;\n\t\t});\n\n\t\tif (relatedAnnotationAction.length) {\n\t\t\tlet enabledPath = relatedAnnotationAction[0].enablePath;\n\t\t\tenabledPath = enabledPath?.indexOf(\"_it/\") > -1 ? enabledPath?.replace(\"_it/\", \"\") : enabledPath; // Remove instance of _it/ from the path\n\t\t\tconst isConfirmationRequired = relatedAnnotationAction[0].isConfirmationRequired;\n\t\t\tif (enabledPath) {\n\t\t\t\taddedAction.enablePathKey = enabledPath;\n\t\t\t}\n\n\t\t\tif (isConfirmationRequired) {\n\t\t\t\taddedAction.isConfirmationRequired = isConfirmationRequired;\n\t\t\t}\n\t\t}\n\t\tif (sPath) {\n\t\t\toModel.setProperty(sPath, addedAction);\n\t\t}\n\t},\n\n\tfilterCardActions: function (comboBox: ComboBox) {\n\t\tconst dialogModel = context.dialog.getModel();\n\t\tconst addedActions: ControlProperties[] = dialogModel.getProperty(\"/configuration/actions/addedActions\");\n\t\tconst itemsBinding = comboBox.getBinding(\"items\");\n\t\tconst titleKey = comboBox.getSelectedKey();\n\t\tconst actionToFilter = addedActions.filter((addedAction) => addedAction.titleKey !== titleKey);\n\t\tconst filter = actionToFilter.length ? new Filter(\"action\", \"NE\", actionToFilter[0].titleKey) : [];\n\t\t(itemsBinding as ListBinding).filter(filter);\n\t},\n\n\tloadActions: function (controlEvent: Event) {\n\t\tconst comboBox: ComboBox = controlEvent.getSource();\n\t\tconst itemsBinding = comboBox.getBinding(\"items\");\n\n\t\tif (itemsBinding?.isSuspended()) {\n\t\t\titemsBinding.refresh(true);\n\t\t\titemsBinding.resume();\n\t\t}\n\n\t\tcomboBox.addEventDelegate({\n\t\t\tonBeforeRendering: this.filterCardActions.bind(null, comboBox)\n\t\t});\n\t},\n\n\tonAddedActionTitleChange: async function (oEvent: Event) {\n\t\tconst oModel = context.dialog.getModel();\n\t\tconst control: ComboBox = oEvent.getSource();\n\t\tconst path = control?.getBindingContext()?.getPath();\n\n\t\tif (this.validateSelectedAction(control)) {\n\t\t\tconst addedAction: ControlProperties = oModel.getProperty(path);\n\t\t\taddedAction.titleKey = control.getSelectedKey();\n\t\t\taddedAction.title = control.getValue();\n\t\t\taddedAction.isStyleControlEnabled = true;\n\t\t\tthis.updateRelativeproperties(addedAction, path || \"\");\n\t\t\tcontrol.setValueState(ValueState.None);\n\t\t\tconst manifest = getCurrentCardManifest();\n\n\t\t\tresetCardActions(manifest);\n\t\t\tconst addedActions: ControlProperties[] = oModel.getProperty(\"/configuration/actions/addedActions\");\n\t\t\tfor (const action of addedActions) {\n\t\t\t\tif (action.titleKey) {\n\t\t\t\t\tawait addActionToCardManifest(manifest, action, context);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trenderCardPreview(manifest, context.dialog.getModel());\n\t\t\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n\t\t} else {\n\t\t\tcontrol.setValueState(ValueState.Error);\n\t\t\tcontrol.setValueStateText(getTranslatedText(\"GENERATOR_ACTION_ERROR_TEXT\"));\n\t\t\tconst errorControls = oModel.getProperty(\"/configuration/errorControls\");\n\t\t\terrorControls?.push(control);\n\t\t\tcontrol.focus();\n\t\t}\n\t},\n\n\tonAddedActionStyleChange: function (oEvent: Event) {\n\t\tconst oModel = context.dialog.getModel();\n\t\tconst control: ComboBox = oEvent.getSource();\n\t\tconst sPath = control?.getBindingContext()?.getPath();\n\t\tconst addedAction: ControlProperties = oModel.getProperty(sPath);\n\t\taddedAction.style = control.getSelectedKey();\n\t\toModel.setProperty(sPath, addedAction);\n\t\tconst manifest = getCurrentCardManifest();\n\t\tupdateCardManifestAction(manifest, addedAction);\n\t\trenderCardPreview(manifest, context.dialog.getModel());\n\t\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n\t}\n};\n\nexport const CardGeneratorDialogController = {\n\tinitialize: function (rootComponent: any, control: any, entitySet: string) {\n\t\tcontext.rootComponent = rootComponent;\n\t\tcontext.appModel = rootComponent.getModel();\n\t\tcontext.dialog = control;\n\t\tcontext.entitySet = entitySet;\n\t\tconst oModel = new JSONModel(PREVIEW_OPTIONS);\n\t\tcontext?.dialog?.setModel(oModel, \"previewOptions\");\n\t\tconst oModelDialog = context.dialog.getModel();\n\t\tupdateCardGroups(oModelDialog);\n\t},\n\tokPressed,\n\tcancelPressed: closeDialog,\n\tonAddClick,\n\tonGroupAddClick,\n\tonGroupDeleteClick,\n\tonDeleteClick,\n\tonPropertySelection,\n\tupdateContentNavigationSelection,\n\tonPropertyLabelChange,\n\tonTitleSelection,\n\tonSubTitleSelection,\n\tonGroupTitleChange,\n\tvalidateContol,\n\tonDrop,\n\tonHeaderUOMSelection,\n\tonStateIndicatorSelection,\n\tupdateHeaderNavigationSelection,\n\tonHeightChange,\n\tonWidthChange,\n\tonResetPressed,\n\tonItemsActionsButtonPressed,\n\tonPreviewTypeChange,\n\ttoggleAdvancedSetting,\n\tgetTranslatedText,\n\tonPropertyFormatting,\n\tonActionAddClick: cardActionHandlers.onActionAddClick,\n\tonAddedActionDelete: cardActionHandlers.onAddedActionDelete,\n\tonAddedActionStyleChange: cardActionHandlers.onAddedActionStyleChange,\n\tonAddedActionTitleChange: cardActionHandlers.onAddedActionTitleChange,\n\tvalidateSelectedAction: cardActionHandlers.validateSelectedAction,\n\tupdateRelativeproperties: cardActionHandlers.updateRelativeproperties,\n\tloadActions: cardActionHandlers.loadActions,\n\tfilterCardActions: cardActionHandlers.filterCardActions,\n\t/* Methods exposed for testing */\n\t_updateTrendForCardHeader: updateTrendForCardHeader,\n\t_updateSideIndicatorsForHeader: updateSideIndicatorsForHeader,\n\t_setAdvancedFormattingOptionsEnablement: setAdvancedFormattingOptionsEnablement,\n\t_updateHeaderArrangements: updateHeaderArrangements,\n\t_updateArrangements: updateArrangements,\n\t_updateCriticality: updateCriticality,\n\t_validateHeader: validateHeader,\n\tapplyCriticality: applyCriticality,\n\tapplyUoMFormatting: applyUoMFormatting,\n\tonTrendDelete: onTrendDelete,\n\tloadAdvancedFormattingConfigurationFragment: loadAdvancedFormattingConfigurationFragment,\n\taddLabelsForProperties: addLabelsForProperties,\n\tcheckForNavigationProperty: checkForNavigationProperty,\n\tdisableOrEnableUOMAndTrend: disableOrEnableUOMAndTrend\n};\nexport function getCriticality(sPropertyName: string, isCalcuationType?: boolean) {\n\tconst oModel = context?.dialog?.getModel();\n\tconst aMainIndicatorCriticality = oModel?.getProperty(\"/configuration/mainIndicatorOptions/criticality\");\n\tconst oMatchedCriticality = aMainIndicatorCriticality?.find(function (oCriticality: any) {\n\t\treturn oCriticality?.name === sPropertyName || \"{\" + oCriticality?.name + \"}\" === sPropertyName;\n\t});\n\tif (oMatchedCriticality) {\n\t\tif (isBinding(oMatchedCriticality?.criticality)) {\n\t\t\treturn \"{= extension.formatters.formatCriticality($\" + oMatchedCriticality?.criticality + \", 'color') }\";\n\t\t}\n\t\tif (oMatchedCriticality?.activeCalculation || isCalcuationType) {\n\t\t\tconst staticValues = {\n\t\t\t\tdeviationLow: oMatchedCriticality?.deviationRangeLowValue,\n\t\t\t\tdeviationHigh: oMatchedCriticality?.deviationRangeHighValue,\n\t\t\t\ttoleranceLow: oMatchedCriticality?.toleranceRangeLowValue,\n\t\t\t\ttoleranceHigh: oMatchedCriticality?.toleranceRangeHighValue,\n\t\t\t\tsImprovementDirection: oMatchedCriticality?.improvementDirection,\n\t\t\t\toCriticalityConfigValues: { None: \"Neutral\", Negative: \"Error\", Critical: \"Critical\", Positive: \"Good\" }\n\t\t\t};\n\t\t\treturn \"{= extension.formatters.formatValueColor(${\" + oMatchedCriticality?.name + \"},\" + JSON.stringify(staticValues) + \") }\";\n\t\t}\n\t\treturn oMatchedCriticality?.criticality;\n\t}\n\treturn \"None\";\n}\n\n/**\n * This functions updates the enablement of the advanced formatting options based on the source property.\n * @param sourceProperty\n * @returns\n */\nfunction setAdvancedFormattingOptionsEnablement(sourceProperty: string) {\n\tconst oModel = context.dialog.getModel();\n\tconst mainIndicatorProperty = oModel.getProperty(\"/configuration/mainIndicatorStatusKey\");\n\toModel.setProperty(\"/configuration/trendOptions/sourceProperty\", mainIndicatorProperty);\n\toModel.setProperty(\"/configuration/indicatorsValue/sourceProperty\", mainIndicatorProperty);\n\tconst properties = oModel.getProperty(\"/configuration/properties\");\n\tconst unitsOfMeasure = oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\") || [];\n\tconst propertyValueFormatters = oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\") || [];\n\tconst mainIndicatorCriticality = oModel.getProperty(\"/configuration/mainIndicatorOptions/criticality\") || [];\n\tconst selectedTrendOptions = oModel.getProperty(\"/configuration/selectedTrendOptions\") || [];\n\tconst selectedIndicatorOptions = oModel.getProperty(\"/configuration/selectedIndicatorOptions\") || [];\n\tconst dataType = properties.find((property: Property) => property.name === sourceProperty)?.type || \"\";\n\tconst isDateType = ODataUtils.isPropertyTypeDate(dataType);\n\tconst isNumberType = [\"Edm.Decimal\", \"Edm.Int16\", \"Edm.Int32\", \"Edm.Double\"].indexOf(dataType) > -1;\n\n\tlet isFormatterApplied = propertyValueFormatters.some(function (formatterDetail: ValueFormatter) {\n\t\treturn formatterDetail.property === sourceProperty || \"{\" + formatterDetail.property + \"}\" === sourceProperty;\n\t});\n\n\tconst formatterApplied = propertyValueFormatters.filter(function (formatterDetail: ValueFormatter) {\n\t\treturn formatterDetail.property === sourceProperty || \"{\" + formatterDetail.property + \"}\" === sourceProperty;\n\t})[0];\n\n\tif (formatterApplied?.formatterName === \"format.unit\" && typeof formatterApplied?.parameters[1].properties[0].value !== \"number\") {\n\t\tisFormatterApplied = false;\n\t}\n\n\tconst isUOMApplied = unitsOfMeasure.some(function (arrangementDetail: UnitOfMeasures) {\n\t\treturn arrangementDetail.name === sourceProperty;\n\t});\n\tconst isCriticalityApplied = mainIndicatorCriticality.some((indicatorCriticality: Criticality) => {\n\t\treturn indicatorCriticality.name === sourceProperty;\n\t});\n\tconst isTrendApplied = selectedTrendOptions.some(function (trendDetail: TrendOptions) {\n\t\treturn trendDetail.sourceProperty === sourceProperty && trendDetail.downDifference;\n\t});\n\tconst isIndicatorsApplied = selectedIndicatorOptions.some(function (indicatorDetail: SideIndicatorOptions) {\n\t\treturn indicatorDetail.sourceProperty === sourceProperty && indicatorDetail.targetUnit;\n\t});\n\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/isFormatterApplied\", isFormatterApplied);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/isFormatterEnabled\", isDateType || isNumberType);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/isUOMApplied\", isUOMApplied);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/isCriticalityApplied\", isCriticalityApplied);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/isTrendApplied\", isTrendApplied);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/isIndicatorsApplied\", isIndicatorsApplied);\n\n\tconst trendOptions = oModel.getProperty(\"/configuration/trendOptions\") as TrendOptions;\n\tconst indicatorsValue = oModel.getProperty(\"/configuration/indicatorsValue\") as SideIndicatorOptions;\n\n\tif (trendOptions) {\n\t\tconst { referenceValue, downDifference, upDifference } = trendOptions;\n\t\tif (referenceValue && downDifference && upDifference) {\n\t\t\toModel.setProperty(\"/configuration/trendOptions/upDown\", true);\n\t\t}\n\t}\n\n\tif (indicatorsValue) {\n\t\tconst { targetValue, deviationValue, targetUnit, deviationUnit } = indicatorsValue;\n\t\tif (targetValue && deviationValue && targetUnit && deviationUnit) {\n\t\t\toModel.setProperty(\"/configuration/indicatorsValue/targetDeviation\", true);\n\t\t}\n\t}\n}\n\n/**\n * Updates \"sap.card.header\" property of integration card manifest and triggers rendering of the card preview.\n *\n * @param oEvent\n * @param key\n * @param fnGetHeaderConfig\n */\nfunction updateCardHeader(oEvent: Event, fnGetHeaderConfig: Function, key?: string) {\n\tconst control = oEvent.getSource() as ComboBox;\n\tconst selectedKey = control.getSelectedKey() || \"\";\n\tconst newValue = oEvent.getParameter(\"newValue\");\n\tlet currentValue = selectedKey !== \"\" ? `{${selectedKey}}` : newValue;\n\tconst oModel = context.dialog.getModel();\n\n\tif (key === \"navSelection\") {\n\t\tconst navigationValue = oModel.getProperty(\"/configuration/navigationValue\");\n\t\tcurrentValue = navigationValue ? `{${navigationValue}}` : \"\";\n\t}\n\n\tif (!selectedKey && key === \"mainIndicator\") {\n\t\tcurrentValue = \"\";\n\t}\n\n\tif (selectedKey !== \"\" || currentValue !== \"\") {\n\t\tcontrol.setValueState(ValueState.None);\n\t}\n\n\tconst sapCardHeader = fnGetHeaderConfig(currentValue);\n\tconst currentManifest = getCurrentCardManifest();\n\tconst oManifest = merge(currentManifest, sapCardHeader) as CardManifest;\n\n\tif (currentValue === \"\" && key === \"mainIndicator\") {\n\t\tdelete oManifest[\"sap.card\"].header.mainIndicator;\n\t\tdelete oManifest[\"sap.card\"].header.sideIndicators;\n\t}\n\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/sourceProperty\", selectedKey);\n\trenderCardPreview(oManifest, context.dialog.getModel());\n\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n}\n\n/**\n * Handles the change event for card title selection.\n * @param oEvent\n */\nfunction onTitleSelection(oEvent: Event) {\n\tconst getHeaderConfiguration = (value: string) => {\n\t\treturn {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {\n\t\t\t\t\ttitle: value\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\tvalidateContol(oEvent, \"title\");\n\tupdateCardHeader(oEvent, getHeaderConfiguration);\n}\n/**\n * Validates the control(control's selected key) based on the provided event and control name.\n * @param {Event} oEvent The event triggered by the control.\n * @param {string} [controlName] The name of the control being validated.\n */\nfunction validateContol(oEvent: Event, controlName?: string) {\n\tconst control: ComboBox = oEvent.getSource();\n\tconst selectedKey = control.getSelectedKey();\n\tconst value: string = oEvent.getParameter(\"newValue\");\n\n\tconst oModel = context.dialog.getModel();\n\tconst errorControls = oModel.getProperty(\"/configuration/errorControls\");\n\tconst resourceBundle = context.dialog.getModel(\"i18n\").getResourceBundle();\n\n\t/**\n\t * Gets the key for the given control name.\n\t * @param {string} name The name of the control.\n\t * @returns {string} The key associated with the control name.\n\t */\n\tconst getKey = (name: string): string => {\n\t\tswitch (name) {\n\t\t\tcase \"title\":\n\t\t\t\treturn resourceBundle.getText(\"GENERATOR_CARD_TITLE\");\n\t\t\tcase \"stateIndicator\":\n\t\t\t\treturn resourceBundle.getText(\"GENERATOR_MAIN_INDICATOR\");\n\t\t\tdefault:\n\t\t\t\treturn resourceBundle.getText(\"GENERATOR_GROUP_PROPERTY\");\n\t\t}\n\t};\n\n\tconst controlErrorText = resourceBundle.getText(\"GENERIC_ERR_MSG\", [getKey(controlName ?? \"\")]);\n\n\tif (!selectedKey && !value && controlName === \"title\") {\n\t\terrorControls?.push(control);\n\t\tcontrol.setValueStateText(controlErrorText);\n\t} else if (!selectedKey && value) {\n\t\terrorControls?.push(control);\n\t\tcontrol.setValueState(ValueState.Error);\n\t\tcontrol.setValueStateText(controlErrorText);\n\t} else {\n\t\terrorControls?.forEach((errorControl: ComboBox, index: number) => {\n\t\t\tif (control.getId() === errorControl.getId()) {\n\t\t\t\terrorControls.splice(index, 1);\n\t\t\t}\n\t\t});\n\t\tcontrol.setValueState(ValueState.None);\n\t}\n}\n\n/**\n * Handles the change event for card subtitle selection.\n * @param oEvent\n */\nfunction onSubTitleSelection(oEvent: Event) {\n\tconst getHeaderConfiguration = (value: string) => {\n\t\tconst oModel = context.dialog.getModel();\n\t\treturn {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {\n\t\t\t\t\tsubTitle: getArrangements(value, {\n\t\t\t\t\t\tunitOfMeasures: oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\t\t\t\t\ttextArrangements: oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\"),\n\t\t\t\t\t\tpropertyValueFormatters: oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\")\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\tupdateCardHeader(oEvent, getHeaderConfiguration);\n}\n\n/**\n * Handles the change event for card header UOM selection.\n * @param oEvent\n */\nfunction onHeaderUOMSelection(oEvent: Event) {\n\tconst getHeaderConfiguration = (value: string) => {\n\t\tconst oModel = context.dialog.getModel();\n\t\treturn {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {\n\t\t\t\t\tunitOfMeasurement: getArrangements(value, {\n\t\t\t\t\t\tunitOfMeasures: oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\t\t\t\t\ttextArrangements: oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\"),\n\t\t\t\t\t\tpropertyValueFormatters: oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\")\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\n\tupdateCardHeader(oEvent, getHeaderConfiguration);\n}\nfunction addLabelsForProperties(selectedNavigationProperty: NavigationalData, data: Record<string, unknown>) {\n\tif (\n\t\tselectedNavigationProperty.name &&\n\t\tdata[selectedNavigationProperty.name] !== undefined &&\n\t\tdata[selectedNavigationProperty.name] !== null\n\t) {\n\t\tconst propVal = selectedNavigationProperty?.value as unknown as PropertyInfoMap;\n\t\tpropVal?.forEach((ele: PropertyInfo) => {\n\t\t\tconst name = data[selectedNavigationProperty.name] as Record<string, unknown>;\n\t\t\tif (name[ele.name] !== undefined && name[ele.name] !== null) {\n\t\t\t\tconst propertyValue = name[ele.name] as string;\n\t\t\t\tconst value = formatPropertyDropdownValues(ele, propertyValue);\n\t\t\t\tele.labelWithValue = value;\n\t\t\t} else {\n\t\t\t\tele.labelWithValue = `${ele.label} (<empty>)`;\n\t\t\t}\n\t\t});\n\t} else {\n\t\tselectedNavigationProperty.value = [];\n\t}\n}\n\nasync function updateCardConfigurationData(selectedProperty: string, selectedNavigationProperty: NavigationalData) {\n\tconst { entitySetWithObjectContext } = ApplicationInfo.getInstance().fetchDetails();\n\tconst oModel = context.dialog.getModel();\n\tconst { serviceUrl, oDataV4, $data } = oModel.getProperty(\"/configuration\");\n\tconst queryParameters: QueryParameters = {\n\t\tproperties: [],\n\t\tnavigationProperties: [\n\t\t\t{\n\t\t\t\tname: selectedProperty,\n\t\t\t\tproperties: selectedNavigationProperty.value.map((property) => property.name) || []\n\t\t\t}\n\t\t]\n\t};\n\tconst result = await ODataUtils.fetchDataAsync(serviceUrl, entitySetWithObjectContext, oDataV4, createUrlParameters(queryParameters));\n\taddLabelsForProperties(selectedNavigationProperty, result);\n\t$data[selectedProperty] = result[selectedProperty];\n\toModel.setProperty(\"/configuration/$data\", $data);\n}\n\nfunction updateHeaderNavigationSelection(oEvent: Event) {\n\tconst oModel = context.dialog.getModel();\n\tconst getHeaderConfiguration = (value: string) => ({\n\t\t\"sap.card\": {\n\t\t\theader: {\n\t\t\t\tmainIndicator: {\n\t\t\t\t\tnumber: getArrangements(value, {\n\t\t\t\t\t\tunitOfMeasures: oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\t\t\t\t\ttextArrangements: oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\"),\n\t\t\t\t\t\tpropertyValueFormatters: oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\")\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tconst control = oEvent.getSource() as ComboBox;\n\tconst selectedKey = control.getSelectedKey();\n\tconst sourceProperty = oModel.getProperty(\"/configuration/mainIndicatorStatusKey\");\n\tupdateSelectedNavigation(selectedKey, sourceProperty, oModel, \"header\");\n\n\toModel.setProperty(\"/configuration/navigationValue\", `${sourceProperty}/${selectedKey}`);\n\toModel.setProperty(\"/configuration/mainIndicatorNavigationSelectedKey\", selectedKey);\n\tupdateCardHeader(oEvent, getHeaderConfiguration, \"navSelection\");\n}\n\n/**\n * Handles the change event for card KPI value selection.\n * @param oEvent\n */\nasync function onStateIndicatorSelection(oEvent: Event) {\n\tconst getHeaderConfiguration = (value: string) => {\n\t\tconst oModel = context.dialog.getModel();\n\t\treturn {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {\n\t\t\t\t\tmainIndicator: {\n\t\t\t\t\t\tstate: getCriticality(value),\n\t\t\t\t\t\tnumber: getArrangements(value, {\n\t\t\t\t\t\t\tunitOfMeasures: oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\t\t\t\t\t\ttextArrangements: oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\"),\n\t\t\t\t\t\t\tpropertyValueFormatters: oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\")\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\tconst oModel = context.dialog.getModel();\n\tconst control = oEvent.getSource() as ComboBox;\n\tconst selectedKey = control.getSelectedKey();\n\tawait updateSelectedNavigationProperty(selectedKey, true);\n\tconst selectedNavigationPropertyHeader = oModel.getProperty(\"/configuration/selectedNavigationPropertyHeader\");\n\tconst selectedValue: string = oEvent.getParameter(\"newValue\");\n\tvalidateContol(oEvent, \"stateIndicator\");\n\tconst currentValue = selectedKey !== \"\" ? `{${selectedKey}}` : selectedValue;\n\toModel.setProperty(\"/configuration/mainIndicatorNavigationSelectedValue\", \"\");\n\toModel.setProperty(\"/configuration/mainIndicatorNavigationSelectedKey\", \"\");\n\toModel.setProperty(\n\t\t\"/configuration/advancedFormattingOptions/isPropertyFormattingEnabled\",\n\t\t!!(selectedKey && !selectedNavigationPropertyHeader?.value?.length && selectedNavigationPropertyHeader?.name === \"\")\n\t);\n\n\tconst properties = oModel.getProperty(\"/configuration/properties\");\n\tconst dataType = properties.find((prop: Property) => prop.name === selectedKey)?.type || \"\";\n\tconst isDateType = ODataUtils.isPropertyTypeDate(dataType);\n\tconst isNumberType = [\"Edm.Decimal\", \"Edm.Int16\", \"Edm.Int32\", \"Edm.Double\"].indexOf(dataType) > -1;\n\n\toModel.setProperty(\"/configuration/mainIndicatorStatusKey\", selectedKey);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/isFormatterEnabled\", isDateType || isNumberType);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/textArrangementSourceProperty\", currentValue);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/textArrangementSelectedKey\", selectedKey);\n\n\tif (oModel.getProperty(\"/configuration/trendOptions/sourceProperty\") !== selectedKey) {\n\t\toModel.setProperty(\"/configuration/trendOptions\", {});\n\t\toModel.setProperty(\"/configuration/indicatorsValue\", {});\n\t}\n\n\toModel.setProperty(\"/configuration/trendOptions/sourceProperty\", selectedKey);\n\toModel.setProperty(\"/configuration/indicatorsValue/sourceProperty\", selectedKey);\n\n\tupdateTrendForCardHeader();\n\tupdateSideIndicatorsForHeader();\n\toModel.setProperty(\"/configuration/navigationValue\", \"\");\n\tif (!selectedNavigationPropertyHeader?.value.length) {\n\t\tupdateCardHeader(oEvent, getHeaderConfiguration, \"mainIndicator\");\n\t} else {\n\t\tupdateCardHeader(oEvent, getHeaderConfiguration, \"navSelection\");\n\t}\n}\n\n/**\n * Disables or enables the apply unit of measure based on the selected property.\n * @param {JSONModel} model - The JSON model containing the configuration.\n * @param {string} selectedProperty - The name of the selected property.\n */\nfunction disableOrEnableUOMAndTrend(model: JSONModel, selectedProperty: string) {\n\tlet typeSupported = true;\n\tconst propertyType = model.getProperty(\"/configuration/properties\").find((prop: Property) => prop.name === selectedProperty)?.type;\n\tconst selectedValue = model.getProperty(\"/configuration/$data\")[selectedProperty];\n\tif (propertyType === \"Edm.String\") {\n\t\ttypeSupported = !isNaN(Number(selectedValue));\n\t}\n\tconst isDateType = ODataUtils.isPropertyTypeDate(propertyType);\n\tconst isUoMEnabled = !(propertyType === \"Edm.Boolean\" || propertyType === \"Edm.Guid\" || isDateType) && typeSupported;\n\tconst isNumberType = [\"Edm.Decimal\", \"Edm.Int16\", \"Edm.Int32\", \"Edm.Double\"].indexOf(propertyType) > -1;\n\n\tmodel.setProperty(\"/configuration/advancedFormattingOptions/isUoMEnabled\", isUoMEnabled);\n\tmodel.setProperty(\"/configuration/advancedFormattingOptions/isTrendEnabled\", isNumberType);\n}\n\nfunction updateContentNavigationSelection(oEvent: Event) {\n\tconst control: ComboBox = oEvent.getSource();\n\tconst selectedKey = control.getSelectedKey() || \"\";\n\tconst oModel = context.dialog.getModel();\n\tconst sPath = control?.getBindingContext()?.getPath() as string;\n\tconst group: GroupItem = oModel.getProperty(sPath);\n\tconst currentValue = `{${group.name}/${selectedKey}}`;\n\tgroup.value =\n\t\tselectedKey &&\n\t\tgetArrangements(currentValue, {\n\t\t\tunitOfMeasures: oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\t\ttextArrangements: oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\"),\n\t\t\tpropertyValueFormatters: oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\")\n\t\t});\n\tupdateSelectedNavigation(selectedKey, group.name, oModel, \"content\");\n\n\tconst navProperty = ODataUtils.getPropertyLabel(\n\t\tcontext.appModel,\n\t\tcontext.entitySet,\n\t\tgroup.name,\n\t\tPropertyInfoType.NavigationProperty\n\t) as NavigationParameter;\n\tconst property = navProperty?.properties?.find((oProperty) => oProperty.name === selectedKey);\n\tconst propertyLabel = property ? property.label : \"\";\n\tgroup.label = propertyLabel;\n\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n}\n\nfunction updateSelectedNavigation(selectedKey: string, sourceProperty: string, oModel: JSONModel, source: string) {\n\tconst selectedNavigation: NavigationParameter[] =\n\t\tsource === \"header\"\n\t\t\t? oModel.getProperty(\"/configuration/selectedHeaderNavigation\")\n\t\t\t: oModel.getProperty(\"/configuration/selectedContentNavigation\");\n\tconst existingIndex = selectedNavigation.findIndex((navItem) => navItem.name === sourceProperty);\n\n\tif (existingIndex !== -1) {\n\t\tconst existingItem = selectedNavigation[existingIndex];\n\t\tconst navValues = existingItem?.value?.includes(selectedKey) ? existingItem.value : [...existingItem.value, selectedKey];\n\t\tselectedNavigation[existingIndex] = { ...existingItem, value: navValues };\n\t} else {\n\t\tconst name = sourceProperty;\n\t\tselectedNavigation.push({ name, value: [selectedKey] });\n\t}\n\n\tconst propertyPath = source === \"header\" ? \"/configuration/selectedHeaderNavigation\" : \"/configuration/selectedContentNavigation\";\n\toModel.setProperty(propertyPath, selectedNavigation);\n}\nasync function updateSelectedNavigationProperty(selectedKey: string, isHeader: boolean) {\n\tconst oModel = context.dialog.getModel();\n\tconst navigationProperty: NavigationParameter[] = oModel.getProperty(\"/configuration/navigationProperty\") || [];\n\tconst selectedNavigationalProperties: NavigationalData[] = oModel.getProperty(\"/configuration/selectedNavigationalProperties\") || [];\n\tconst existingIndex = selectedNavigationalProperties.findIndex((navItem) => navItem.name === selectedKey);\n\n\tconst selectedProperty = navigationProperty.find((prop) => prop.name === selectedKey);\n\tconst selectedPropertyName = selectedProperty?.name || \"\";\n\tconst selectedPropertyValues = selectedProperty?.properties || [];\n\n\tconst data: NavigationalData = {\n\t\tname: selectedPropertyName,\n\t\tvalue: selectedPropertyValues\n\t};\n\n\tif (existingIndex === -1 && selectedProperty) {\n\t\tselectedNavigationalProperties.push(data);\n\t}\n\toModel.setProperty(\"/configuration/selectedNavigationalProperties\", selectedNavigationalProperties);\n\tif (isHeader) {\n\t\toModel.setProperty(\"/configuration/selectedNavigationPropertyHeader\", data);\n\t} else {\n\t\toModel.setProperty(\"/configuration/selectedNavigationPropertiesContent\", data);\n\t}\n\n\tif (selectedProperty) {\n\t\tawait updateCardConfigurationData(selectedProperty.name, data);\n\t}\n}\n\nfunction getTranslatedText(sKey: string) {\n\treturn context.dialog.getModel(\"i18n\").getObject(sKey);\n}\n\nfunction onAddClick(oEvent: Event) {\n\tconst oModel = context.dialog.getModel();\n\tconst sPath = oEvent.getSource().getBindingContext().getPath();\n\tconst group = oModel.getProperty(sPath);\n\tif (!group.items) {\n\t\tgroup.items = [];\n\t}\n\tconst nextItemNumber = oModel.getProperty(sPath).items.length;\n\tconst newItem = {\n\t\tlabel: null,\n\t\tvalue: `{/items/${nextItemNumber}}`,\n\t\tisEnabled: false,\n\t\tisNavigationEnabled: false,\n\t\tnavigationalProperties: []\n\t};\n\toModel.getProperty(sPath).items.push(newItem);\n\tconst iItemsAdded = oModel.getProperty(sPath).items.length;\n\toModel.setProperty(sPath + \"/enableAddMoreGroupItems\", true);\n\tif (iItemsAdded === MAX_GROUP_ITEMS) {\n\t\toModel.setProperty(sPath + \"/enableAddMoreGroupItems\", false);\n\t}\n\toModel.refresh();\n}\n\nasync function okPressed() {\n\tconst hasError = validateHeader();\n\tif (hasError) {\n\t\treturn;\n\t}\n\n\tconst oCard = CoreElement.getElementById(\"cardGeneratorDialog--cardPreview\") as Card;\n\tconst mManifest = oCard.getManifest() as CardManifest;\n\n\tawait enhanceManifestWithInsights(mManifest, context.rootComponent);\n\tenhanceManifestWithConfigurationParameters(mManifest, context.dialog.getModel());\n\tcreateAndStoreGeneratedi18nKeys(mManifest);\n\tupdateManifestWithSelectQueryParams(mManifest);\n\n\tconst oModel = context.dialog.getModel();\n\tconst keyParameters = oModel.getProperty(\"/configuration/keyParameters\");\n\tconst appIntent = oModel.getProperty(\"/configuration/appIntent\");\n\tconst oAdaptiveCardManifest = convertIntegrationCardToAdaptive(mManifest, appIntent, keyParameters);\n\tdelete mManifest[\"sap.card\"].configuration?.parameters?.contextParameters;\n\tconst payload = {\n\t\tfloorplan: \"ObjectPage\",\n\t\tlocalPath: `cards/op/${context.entitySet}`,\n\t\tfileName: \"manifest.json\",\n\t\tmanifests: [\n\t\t\t{\n\t\t\t\ttype: \"integration\",\n\t\t\t\tmanifest: mManifest,\n\t\t\t\tdefault: true,\n\t\t\t\tentitySet: context.entitySet\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: \"adaptive\",\n\t\t\t\tmanifest: oAdaptiveCardManifest,\n\t\t\t\tdefault: true,\n\t\t\t\tentitySet: context.entitySet\n\t\t\t}\n\t\t]\n\t};\n\n\tjQuery.ajax({\n\t\ttype: \"POST\",\n\t\turl: \"/cards/store\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tdata: JSON.stringify(payload),\n\t\tsuccess: function () {\n\t\t\tMessageToast.show(getTranslatedText(\"CARD_SAVE_SUCCESS_MESSAGE\"));\n\t\t},\n\t\terror: function (jqXHR, textStatus, errorThrown) {\n\t\t\tconst errorMessage = `Unable to save the card: ${textStatus} - ${errorThrown} (Status: ${jqXHR.status} - ${jqXHR.statusText})`;\n\t\t\tLog.error(errorMessage);\n\t\t\tMessageBox.error(getTranslatedText(\"CARD_SAVE_ERROR_MESSAGE\"));\n\t\t}\n\t});\n\tcontext.dialog.close();\n}\n\nfunction validateHeader() {\n\tlet hasError = false;\n\tconst oModel = context.dialog.getModel();\n\tconst errorControls = oModel.getProperty(\"/configuration/errorControls\");\n\terrorControls?.forEach((ele: ComboBox) => {\n\t\tif (!ele.getValue() || ele.getValueState() == \"Error\") {\n\t\t\tele.setValueState(ValueState.Error);\n\t\t\thasError = true;\n\t\t}\n\t});\n\treturn hasError;\n}\n\nfunction validateIndicatorsValues(buttonId: string) {\n\tconst oModel = context.dialog.getModel();\n\tconst indicatorsValue = oModel.getProperty(\"/configuration/indicatorsValue\");\n\tlet hasError = false;\n\tconst { targetValue, deviationValue, targetUnit, deviationUnit } = indicatorsValue;\n\n\tif (!targetValue) {\n\t\toModel.setProperty(\"/configuration/indicatorsValue/targetValueState\", \"Error\");\n\t\tconst targetInputId = buttonId + \"--targetInputValue\";\n\t\tsetValueStateTextForControl(targetInputId, getTranslatedText(\"TARGET_VALUE_ERR_MSG\"));\n\t}\n\tif (!deviationValue) {\n\t\toModel.setProperty(\"/configuration/indicatorsValue/deviationValueState\", \"Error\");\n\t\tconst deviationInputId = buttonId + \"--deviationInputValue\";\n\t\tsetValueStateTextForControl(deviationInputId, getTranslatedText(\"DEVIATION_VALUE_ERR_MSG\"));\n\t}\n\tif (!targetUnit) {\n\t\toModel.setProperty(\"/configuration/indicatorsValue/targetUnitValueState\", \"Error\");\n\t\tconst targetUnitInputId = buttonId + \"--targetUnitInput\";\n\t\tsetValueStateTextForControl(targetUnitInputId, getTranslatedText(\"TARGET_UNIT_ERR_MSG\"), true);\n\t}\n\tif (!deviationUnit) {\n\t\toModel.setProperty(\"/configuration/indicatorsValue/deviationUnitValueState\", \"Error\");\n\t\tconst deviationUnitInputId = buttonId + \"--deviationUnitInput\";\n\t\tsetValueStateTextForControl(deviationUnitInputId, getTranslatedText(\"DEVIATION_UNIT_ERR_MSG\"), true);\n\t}\n\tif (!targetValue || !deviationValue || !targetUnit || !deviationUnit) {\n\t\thasError = true;\n\t}\n\treturn hasError;\n}\n\nfunction validateTrendValues(buttonId: string) {\n\tconst oModel = context.dialog.getModel();\n\tconst trendValues = oModel.getProperty(\"/configuration/trendOptions\");\n\tlet hasError = false;\n\tconst { referenceValue, downDifference, upDifference } = trendValues;\n\n\tif (!referenceValue) {\n\t\toModel.setProperty(\"/configuration/trendOptions/referenceValueState\", \"Error\");\n\t\tconst referenceInputId = buttonId + \"--trendReferenceValueInput\";\n\t\tsetValueStateTextForControl(referenceInputId, getTranslatedText(\"REF_ERR_MSG\"));\n\t}\n\tif (!downDifference) {\n\t\toModel.setProperty(\"/configuration/trendOptions/downDifferenceValueState\", \"Error\");\n\t\tconst trendDownDifferenceInputId = buttonId + \"--trendDownDifferenceInput\";\n\t\tsetValueStateTextForControl(trendDownDifferenceInputId, getTranslatedText(\"LOW_RANGE_ERR_MSG\"));\n\t}\n\tif (!upDifference) {\n\t\toModel.setProperty(\"/configuration/trendOptions/upDifferenceValueState\", \"Error\");\n\t\tconst trendUpDifferenceInputId = buttonId + \"--trendUpDifferenceInput\";\n\t\tsetValueStateTextForControl(trendUpDifferenceInputId, getTranslatedText(\"HIGH_RANGE_ERR_MSG\"));\n\t}\n\tif (!referenceValue || !downDifference || !upDifference) {\n\t\thasError = true;\n\t}\n\treturn hasError;\n}\n\nfunction setValueStateTextForControl(controlId: string, errorMessage: string, isSelectControl?: boolean) {\n\tconst elementControl = CoreElement?.getElementById(controlId);\n\telementControl.key = errorMessage;\n\tconst validateControl = isSelectControl\n\t\t? !elementControl?.getSelectedKey() || elementControl.getValueState() == \"Error\"\n\t\t: !elementControl?.getValue() || elementControl.getValueState() == \"Error\";\n\tif (validateControl) {\n\t\tconst resourceBundle = context?.dialog?.getModel(\"i18n\").getResourceBundle();\n\t\tconst validationText = resourceBundle?.getText(\"GENERIC_ERR_MSG\", [elementControl?.key]);\n\t\telementControl?.setValueStateText(validationText);\n\t}\n}\n\nfunction onGroupAddClick(oEvent: any) {\n\t//on click of Add new group.\n\tconst oModel = context.dialog.getModel();\n\tconst iLength = oModel.getProperty(\"/configuration/groups\").length;\n\tconst currentDefaultValue = context?.dialog\n\t\t.getModel(\"i18n\")\n\t\t?.getResourceBundle()\n\t\t?.getText(\"GENERATOR_DEFAULT_GROUP_NAME\", [iLength + 1]);\n\toModel.getProperty(\"/configuration/groups\").push({\n\t\ttitle: currentDefaultValue,\n\t\titems: [\n\t\t\t{\n\t\t\t\tlabel: null,\n\t\t\t\tvalue: \"{/items/0}\",\n\t\t\t\tisEnabled: false,\n\t\t\t\tisNavigationEnabled: false,\n\t\t\t\tnavigationalProperties: []\n\t\t\t}\n\t\t],\n\t\tnewItem: {\n\t\t\tlabel: null,\n\t\t\tvalue: null,\n\t\t\tisEnabled: false,\n\t\t\tisNavigationEnabled: false,\n\t\t\tnavigationalProperties: []\n\t\t}\n\t});\n\tconst groupLength = oModel.getProperty(\"/configuration/groups\").length;\n\tif (groupLength === MAX_GROUPS) {\n\t\toModel.setProperty(\"/configuration/groupLimitReached\", true);\n\t}\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n}\n\nfunction onGroupDeleteClick(oEvent: any) {\n\tconst oModel = context.dialog.getModel();\n\tconst sPath = oEvent.getSource().getBindingContext().getPath();\n\tconst groupIndex = sPath.split(\"/configuration/groups/\")[1];\n\toModel.getProperty(\"/configuration/groups\").splice(groupIndex, 1);\n\tconst groupLength = oModel.getProperty(\"/configuration/groups\").length;\n\tif (groupLength < MAX_GROUPS) {\n\t\toModel.setProperty(\"/configuration/groupLimitReached\", false);\n\t}\n\tdelete context._itemActionsMenu;\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n}\n\nfunction onGroupTitleChange(oEvent: any) {\n\tconst currentValue = oEvent.getParameters().newValue;\n\tconst oModel = context.dialog.getModel();\n\tconst sPath = oEvent.getSource().getBindingContext().getPath();\n\tconst group = oModel.getProperty(sPath);\n\tgroup.title = currentValue;\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n}\n\nfunction onDeleteClick(oEvent: any) {\n\tconst oModel = context.dialog.getModel();\n\tconst sPath = oEvent.getSource().getBindingContext().getPath();\n\tconst [groupIndex, itemIndex] = sPath.match(/(\\d+)/g).map(function (sValue: string) {\n\t\treturn Number(sValue);\n\t});\n\toModel.getProperty(\"/configuration/groups/\" + groupIndex).items.splice(itemIndex, 1);\n\tconst iLength = oModel.getProperty(\"/configuration/groups/\" + groupIndex).items.length;\n\tif (iLength < MAX_GROUP_ITEMS) {\n\t\toModel.setProperty(\"/configuration/groups/\" + groupIndex + \"/enableAddMoreGroupItems\", true);\n\t}\n\tcontext._itemActionsMenu?.destroy();\n\tdelete context._itemActionsMenu;\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n}\n\n/**\n * Updates the sap.card.header.mainIndicator.trend property of the integration card manifest and triggers rendering of the card preview.\n */\nfunction updateTrendForCardHeader() {\n\tconst oModel = context.dialog.getModel();\n\tlet trendOptions = oModel.getProperty(\"/configuration/trendOptions\");\n\tconst selectedTrendOptions = oModel.getProperty(\"/configuration/selectedTrendOptions\");\n\n\tconst sapCardHeader = {\n\t\t\"sap.card\": {\n\t\t\theader: {\n\t\t\t\tmainIndicator: {\n\t\t\t\t\ttrend: \"None\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tlet selectedTrendOptionIndex = -1;\n\tselectedTrendOptions?.forEach((selectedTrendOption: any, index: number) => {\n\t\tif (selectedTrendOption.sourceProperty === trendOptions.sourceProperty) {\n\t\t\tselectedTrendOptionIndex = index;\n\t\t\ttrendOptions = { ...selectedTrendOption, ...trendOptions };\n\t\t\toModel.setProperty(\"/configuration/trendOptions\", trendOptions);\n\t\t}\n\t});\n\tconst { referenceValue, downDifference, upDifference, sourceProperty } = trendOptions;\n\n\tif (referenceValue && downDifference && upDifference && sourceProperty) {\n\t\tconst newTrendValues = { referenceValue, downDifference, upDifference, sourceProperty };\n\t\tif (selectedTrendOptionIndex !== -1) {\n\t\t\tselectedTrendOptions[selectedTrendOptionIndex] = newTrendValues;\n\t\t} else {\n\t\t\tselectedTrendOptions.push(newTrendValues);\n\t\t}\n\t\tconst staticValues = {\n\t\t\treferenceValue: Number(referenceValue),\n\t\t\tdownDifference: Number(downDifference),\n\t\t\tupDifference: Number(upDifference)\n\t\t};\n\t\tsapCardHeader[\"sap.card\"][\"header\"][\"mainIndicator\"][\"trend\"] = getTrendDirection(staticValues);\n\t}\n\n\tconst currentManifest = getCurrentCardManifest();\n\tconst oManifest = merge(currentManifest, sapCardHeader) as CardManifest;\n\trenderCardPreview(oManifest, context.dialog.getModel());\n\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n}\n\n/**\n * Updates the sap.card.header.sideIndicators property of the integration card manifest and triggers rendering of the card preview.\n */\nfunction updateSideIndicatorsForHeader() {\n\tconst oModel = context.dialog.getModel();\n\tlet indicatorsValue = oModel.getProperty(\"/configuration/indicatorsValue\");\n\tconst selectedIndicatorOptions = oModel.getProperty(\"/configuration/selectedIndicatorOptions\");\n\n\tlet selectedIndicatorOptionIndex = -1;\n\tselectedIndicatorOptions?.forEach((selectedIndicatorOption: any, index: number) => {\n\t\tif (selectedIndicatorOption.sourceProperty === indicatorsValue.sourceProperty) {\n\t\t\tselectedIndicatorOptionIndex = index;\n\t\t\tindicatorsValue = { ...selectedIndicatorOption, ...indicatorsValue };\n\t\t\toModel.setProperty(\"/configuration/indicatorsValue\", indicatorsValue);\n\t\t}\n\t});\n\n\tlet sapCardHeader = {\n\t\t\"sap.card\": {\n\t\t\theader: {\n\t\t\t\tsideIndicators: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"\",\n\t\t\t\t\t\tnumber: \"\",\n\t\t\t\t\t\tunit: \"\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"\",\n\t\t\t\t\t\tnumber: \"\",\n\t\t\t\t\t\tunit: \"\"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t};\n\tconst { targetValue, deviationValue, targetUnit, deviationUnit, sourceProperty } = indicatorsValue;\n\tif (targetValue && deviationValue && targetUnit && deviationUnit && sourceProperty) {\n\t\tconst indicatorsValueToAdd = { targetValue, deviationValue, targetUnit, deviationUnit, sourceProperty };\n\t\tif (selectedIndicatorOptionIndex !== -1) {\n\t\t\tselectedIndicatorOptions[selectedIndicatorOptionIndex] = indicatorsValueToAdd;\n\t\t} else {\n\t\t\tselectedIndicatorOptions.push(indicatorsValueToAdd);\n\t\t}\n\t\toModel.setProperty(\"/configuration/indicatorsValue/targetDeviation\", targetValue);\n\t\tsapCardHeader = {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {\n\t\t\t\t\tsideIndicators: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Target\",\n\t\t\t\t\t\t\tnumber: targetValue,\n\t\t\t\t\t\t\tunit: targetUnit\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Deviation\",\n\t\t\t\t\t\t\tnumber: deviationValue,\n\t\t\t\t\t\t\tunit: deviationUnit\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tconst currentManifest = getCurrentCardManifest();\n\tconst oManifest = merge(currentManifest, sapCardHeader) as CardManifest;\n\trenderCardPreview(oManifest, context.dialog.getModel());\n\toModel.refresh();\n\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n}\n\n/**\n * Get trend direction based on the static values.\n * @param staticValues\n * @returns\n */\nfunction getTrendDirection(staticValues: object | undefined) {\n\tconst oModel = context.dialog.getModel();\n\tconst mainIndicatorKey = oModel.getProperty(\"/configuration/mainIndicatorStatusKey\");\n\tconst trendValues = oModel.getProperty(\"/configuration/trendOptions\");\n\tconst { referenceValue } = trendValues;\n\n\tif (mainIndicatorKey && staticValues) {\n\t\toModel.setProperty(\"/configuration/trendOptions/upDown\", referenceValue);\n\t\treturn \"{= extension.formatters.formatTrendIcon(${\" + mainIndicatorKey + \"},\" + JSON.stringify(staticValues) + \") }\";\n\t}\n\treturn \"None\";\n}\n\nasync function onPropertySelection(oEvent: Event) {\n\tconst control: ComboBox = oEvent.getSource();\n\tconst selectedKey = control.getSelectedKey() || \"\";\n\tconst newValue = oEvent.getParameter(\"newValue\");\n\n\tconst currentValue = selectedKey !== \"\" ? `{${selectedKey}}` : newValue;\n\tconst oModel = context.dialog.getModel();\n\tvalidateContol(oEvent);\n\tawait updateSelectedNavigationProperty(selectedKey, false);\n\tconst selectedNavigationPropertiesContent = oModel.getProperty(\"/configuration/selectedNavigationPropertiesContent\");\n\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/sourceProperty\", selectedKey);\n\tconst sPath: string | undefined = control?.getBindingContext()?.getPath();\n\n\tconst group = oModel.getProperty(sPath);\n\n\tif (!selectedNavigationPropertiesContent?.value?.length) {\n\t\tgroup.value =\n\t\t\tselectedKey &&\n\t\t\tgetArrangements(currentValue, {\n\t\t\t\tunitOfMeasures: oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\t\t\ttextArrangements: oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\"),\n\t\t\t\tpropertyValueFormatters: oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\")\n\t\t\t});\n\t} else {\n\t\tgroup.value = \"\";\n\t\tgroup.navigationProperty = \"\";\n\t\tgroup.navigationalProperties = selectedNavigationPropertiesContent?.value;\n\t}\n\tconst propertyLabel = ODataUtils.getPropertyLabel(context.appModel, context.entitySet, selectedKey, PropertyInfoType.Property);\n\tgroup.label = selectedNavigationPropertiesContent?.value?.length ? \"\" : propertyLabel;\n\tgroup.isEnabled = (propertyLabel?.length > 0 && !selectedNavigationPropertiesContent?.value?.length) || false;\n\tgroup.isNavigationEnabled = selectedNavigationPropertiesContent?.value?.length > 0;\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n}\n\nfunction onPropertyLabelChange(oEvent: any) {\n\tconst currentValue = oEvent.getParameters().newValue;\n\tconst oModel = context.dialog.getModel();\n\tconst sPath = oEvent.getSource().getBindingContext().getPath();\n\tconst group = oModel.getProperty(sPath);\n\tgroup.label = currentValue;\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n}\nfunction onDrop(oEvent: any) {\n\tconst oDragged = oEvent.getParameter(\"draggedControl\"),\n\t\toDropped = oEvent.getParameter(\"droppedControl\"),\n\t\tsInsertPosition = oEvent.getParameter(\"dropPosition\"),\n\t\toModel = context.dialog.getModel(),\n\t\toDragPos = oDragged.getParent(),\n\t\toDropPos = oDropped.getParent(),\n\t\tsDraggedPath = oDragPos.getBindingContext().getPath(),\n\t\tsDroppedPath = oDropPos.getBindingContext().getPath(),\n\t\taDragItems = oModel.getProperty(sDraggedPath).items,\n\t\taDropItems = oModel.getProperty(sDroppedPath).items,\n\t\tiDragPosition = oDragPos.indexOfItem(oDragged),\n\t\tiDropPosition = oDropPos.indexOfItem(oDropped);\n\n\tconst oSelectedItem = aDragItems[iDragPosition];\n\t// insert the control in target aggregation, remove the item\n\tif (sInsertPosition === \"Before\" && aDropItems.length < MAX_GROUP_ITEMS) {\n\t\taDragItems.splice(iDragPosition, 1);\n\t\taDropItems.splice(iDropPosition, 0, oSelectedItem);\n\t} else if (sInsertPosition && aDropItems.length < MAX_GROUP_ITEMS) {\n\t\taDragItems.splice(iDragPosition, 1);\n\t\taDropItems.splice(iDropPosition + 1, 0, oSelectedItem);\n\t}\n\tif (aDragItems.length < MAX_GROUP_ITEMS) {\n\t\toModel.setProperty(sDraggedPath + \"/enableAddMoreGroupItems\", true);\n\t}\n\tif (aDropItems.length === MAX_GROUP_ITEMS) {\n\t\toModel.setProperty(sDroppedPath + \"/enableAddMoreGroupItems\", false);\n\t}\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n}\nfunction onResetPressed() {\n\tconst oCard: any = CoreElement.getElementById(\"cardGeneratorDialog--cardPreview\");\n\toCard.setWidth();\n\toCard.setHeight();\n\tCoreElement.getElementById(\"cardGeneratorDialog--widthInput\").setValue(\"\");\n\tCoreElement.getElementById(\"cardGeneratorDialog--heightInput\").setValue(\"\");\n\toCard.refresh();\n}\nfunction onHeightChange(oEvent: any) {\n\tconst oCard: any = CoreElement.getElementById(\"cardGeneratorDialog--cardPreview\");\n\tconst currentValue = Number(oEvent.getParameters().newValue);\n\tcurrentValue > 200 ? oCard.setHeight(currentValue + \"px\") : oCard.setHeight(\"232px\");\n\toCard.refresh();\n}\nfunction onWidthChange(oEvent: any) {\n\tconst oCard: any = CoreElement.getElementById(\"cardGeneratorDialog--cardPreview\");\n\tconst currentValue = Number(oEvent.getParameters().newValue);\n\tcurrentValue > 200 ? oCard.setWidth(currentValue + \"px\") : oCard.setWidth(\"582px\");\n\toCard.refresh();\n}\n\nfunction closeDialog() {\n\tconst oModel = context?.dialog?.getModel();\n\tconst errorControls = oModel.getProperty(\"/configuration/errorControls\");\n\terrorControls?.forEach((ele: ComboBox) => {\n\t\tele.setValueState(ValueState.None);\n\t});\n\tcontext?.dialog?.close();\n}\n\nfunction setCriticalitySourceProperty(sProperty: string) {\n\tconst oModel = context?.dialog?.getModel();\n\tconst mainIndicatorCriticality: any = oModel?.getProperty(\"/configuration/mainIndicatorOptions/criticality\");\n\tlet relavantCriticality;\n\n\tconst relavantProperty: any = mainIndicatorCriticality?.filter((indicatorCriticality: any) => {\n\t\treturn indicatorCriticality?.name === sProperty;\n\t});\n\tif (relavantProperty) {\n\t\trelavantCriticality = JSON.parse(JSON.stringify(relavantProperty));\n\t}\n\tif (relavantProperty?.length === 1) {\n\t\trelavantCriticality[0].hostCriticality = relavantProperty[0].criticality;\n\t\tdelete relavantCriticality.criticality;\n\t\toModel?.setProperty(\"/configuration/advancedFormattingOptions/sourceCriticalityProperty\", relavantCriticality);\n\t} else {\n\t\toModel?.setProperty(\"/configuration/advancedFormattingOptions/sourceCriticalityProperty\", [{ name: sProperty }]);\n\t}\n}\n\nfunction onPropertyFormatting(oEvent: any) {\n\tconst oSource = oEvent.getSource();\n\tconst sProperty = context.dialog.getModel().getProperty(\"/configuration/mainIndicatorStatusKey\");\n\tconst oModel = context?.dialog?.getModel();\n\n\toModel?.setProperty(\"/configuration/advancedFormattingOptions/targetFormatterProperty\", sProperty);\n\toModel?.setProperty(\"/configuration/advancedFormattingOptions/sourceUoMProperty\", sProperty);\n\n\tdisableOrEnableUOMAndTrend(oModel, sProperty);\n\tsetCriticalitySourceProperty(sProperty);\n\tsetAdvancedFormattingOptionsEnablement(sProperty);\n\n\tif (!context._advancedFormattingOptionsPopover) {\n\t\tFragment.load({\n\t\t\tid: \"advancedFormattingOptions\",\n\t\t\tname: \"sap.cards.ap.generator.app.fragments.configuration.AdvancedFormattingOptions\",\n\t\t\tcontroller: {\n\t\t\t\tonFormatTypeSelection: (oEvent: any) => {\n\t\t\t\t\tconst sourceItem = oEvent.getParameter(\"item\");\n\t\t\t\t\tconst oModel = context.dialog.getModel();\n\t\t\t\t\tconst key = sourceItem.getKey();\n\t\t\t\t\toModel.setProperty(\"/configuration/popoverContentType\", key);\n\t\t\t\t\tconst aUom = oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\");\n\t\t\t\t\tconst sSourceUoMProperty = oModel.getProperty(\"/configuration/advancedFormattingOptions/sourceUoMProperty\");\n\t\t\t\t\tif (aUom.length > 0) {\n\t\t\t\t\t\tconst aSourceUom = aUom.filter((oProperty: any) => {\n\t\t\t\t\t\t\treturn oProperty.name === sSourceUoMProperty;\n\t\t\t\t\t\t})[0];\n\t\t\t\t\t\tif (aSourceUom) {\n\t\t\t\t\t\t\toModel.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", aSourceUom.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (aPropsWithUoM.indexOf(sSourceUoMProperty) === -1) {\n\t\t\t\t\t\toModel.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", \"\");\n\t\t\t\t\t}\n\t\t\t\t\tonAdvancedFormattingConfigOpen(oEvent, oSource);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t\t.then(function (oPopover: any) {\n\t\t\t\tcontext._advancedFormattingOptionsPopover = oPopover;\n\t\t\t\toSource.addDependent(oPopover);\n\t\t\t\treturn oPopover;\n\t\t\t})\n\t\t\t.then(function (oPopover) {\n\t\t\t\tconst oContext = oSource.getBindingContext();\n\t\t\t\toPopover.setBindingContext(oContext);\n\t\t\t\toPopover.openBy(oSource);\n\t\t\t});\n\t} else {\n\t\tconst oContext = oSource.getBindingContext();\n\t\tcontext._advancedFormattingOptionsPopover.setBindingContext(oContext);\n\t\tcontext._advancedFormattingOptionsPopover.openBy(oSource);\n\t}\n}\n\nfunction onAdvancedFormattingConfigOpen(oEvent: any, oSource: any) {\n\tconst oModel = context?.dialog?.getModel();\n\tconst oConfigurationController = {\n\t\tonPopoverClose: (oEvent: any) => {\n\t\t\tconst source = oEvent.getSource();\n\t\t\tsource?.destroy();\n\t\t},\n\t\t// applyCriticalityFormattingForHeader: () => { },\n\t\tonPropertyFormatterChange: () => {\n\t\t\tupdateArrangements();\n\t\t\tconst buttonId = oSource?.getId();\n\t\t\tconst oPopover = CoreElement.getElementById(buttonId + \"--advanceFormattingPopover\");\n\t\t\toPopover?.close();\n\t\t},\n\t\tapplyCriticality: () => applyCriticality(oEvent),\n\t\tapplyUoMFormatting: () => applyUoMFormatting(),\n\t\tapplyFormatting: () => {\n\t\t\tconst buttonId = oSource?.getId();\n\t\t\tCoreElement.getElementById(buttonId + \"--headerFormatterEditor\").applyFormatter();\n\t\t\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n\t\t},\n\t\tresetValueState(oEvent: any, isSelectControl?: boolean) {\n\t\t\tconst control = oEvent.getSource();\n\t\t\tconst currentValue = !isSelectControl ? oEvent.getParameters().newValue : control.getSelectedKey();\n\t\t\tif (currentValue !== \"\") {\n\t\t\t\tcontrol.setValueState(ValueState.None);\n\t\t\t}\n\t\t},\n\t\tonDownDifferenceChange(oEvent: any) {\n\t\t\toModel.setProperty(\"/configuration/trendOptions/downDifferenceValueState\", \"None\");\n\t\t\tthis.resetValueState(oEvent);\n\t\t},\n\t\tonUpDifferenceChange(oEvent: any) {\n\t\t\toModel.setProperty(\"/configuration/trendOptions/upDifferenceValueState\", \"None\");\n\t\t\tthis.resetValueState(oEvent);\n\t\t},\n\t\tonReferenceValInputChange(oEvent: any) {\n\t\t\toModel.setProperty(\"/configuration/trendOptions/referenceValueState\", \"None\");\n\t\t\tthis.resetValueState(oEvent);\n\t\t},\n\t\tonTargetValueChange(oEvent: any) {\n\t\t\toModel.setProperty(\"/configuration/indicatorsValue/targetValueState\", \"None\");\n\t\t\tthis.resetValueState(oEvent);\n\t\t},\n\t\tonDeviationValueChange(oEvent: any) {\n\t\t\toModel.setProperty(\"/configuration/indicatorsValue/deviationValueState\", \"None\");\n\t\t\tthis.resetValueState(oEvent);\n\t\t},\n\t\tonTargetUnitChange(oEvent: any) {\n\t\t\toModel.setProperty(\"/configuration/indicatorsValue/targetUnitValueState\", \"None\");\n\t\t\tthis.resetValueState(oEvent, true);\n\t\t},\n\t\tonDeviationUnitChange(oEvent: any) {\n\t\t\toModel.setProperty(\"/configuration/indicatorsValue/deviationUnitValueState\", \"None\");\n\t\t\tthis.resetValueState(oEvent, true);\n\t\t},\n\t\tapplyIndicators: () => {\n\t\t\tconst buttonId = oSource?.getId();\n\t\t\tconst hasIndicatorsError = validateIndicatorsValues(buttonId);\n\t\t\tif (!hasIndicatorsError) {\n\t\t\t\tupdateSideIndicatorsForHeader();\n\t\t\t\tcontext?._advancedFormattingConfigurationPopover?.close();\n\t\t\t}\n\t\t},\n\t\tapplyTrendCalculation: () => {\n\t\t\tconst buttonId = oSource?.getId();\n\t\t\tconst hasTrendError = validateTrendValues(buttonId);\n\t\t\tif (!hasTrendError) {\n\t\t\t\tupdateTrendForCardHeader();\n\t\t\t\tcontext?._advancedFormattingConfigurationPopover?.close();\n\t\t\t}\n\t\t},\n\t\tonDelete: () => {\n\t\t\tconst oModel = context?.dialog?.getModel();\n\t\t\tconst sourceUoMProperty: any = oModel?.getProperty(\"/configuration/advancedFormattingOptions/sourceUoMProperty\");\n\t\t\tconst iIndex = aPropsWithUoM?.indexOf(sourceUoMProperty);\n\t\t\taPropsWithUoM?.splice(iIndex, 1);\n\t\t\toModel?.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", \"\");\n\n\t\t\tconst itemsBindingPath: string = \"/configuration/advancedFormattingOptions/unitOfMeasures\",\n\t\t\t\tunitOfMeasures: any = oModel?.getProperty(itemsBindingPath);\n\t\t\tlet relativeIndex: number = -1;\n\n\t\t\tconst propertyValueFormatters = oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\");\n\t\t\tconst updatedPropertyValueFormatters = propertyValueFormatters.filter(\n\t\t\t\t(formatter: ValueFormatter) => formatter.property !== sourceUoMProperty\n\t\t\t);\n\t\t\toModel.setProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\", updatedPropertyValueFormatters);\n\t\t\tfor (let i = 0; i < unitOfMeasures.length; i++) {\n\t\t\t\tif (unitOfMeasures[i]?.name === sourceUoMProperty) {\n\t\t\t\t\trelativeIndex = i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (relativeIndex >= 0 && itemsBindingPath) {\n\t\t\t\tconst sPath = itemsBindingPath + \"/\" + relativeIndex;\n\t\t\t\tunitOfMeasures?.splice(sPath.slice(sPath.length - 1), 1);\n\t\t\t\tupdateArrangements();\n\t\t\t\toModel?.refresh();\n\t\t\t}\n\t\t\tcontext?._advancedFormattingConfigurationPopover?.close();\n\t\t},\n\t\tonTrendDelete: () => onTrendDelete(),\n\t\tonIndicatorsDelete: () => {\n\t\t\tconst oModel = context?.dialog?.getModel();\n\t\t\tconst indicatorsValue = oModel.getProperty(\"/configuration/indicatorsValue\");\n\t\t\tconst selectedIndicatorValues = oModel.getProperty(\"/configuration/selectedIndicatorOptions\");\n\t\t\tlet iIndex: number = -1;\n\t\t\tselectedIndicatorValues?.forEach((trend: any, index: number) => {\n\t\t\t\tif (trend.sourceProperty === indicatorsValue.sourceProperty) {\n\t\t\t\t\tiIndex = index;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (iIndex !== -1) {\n\t\t\t\tselectedIndicatorValues.splice(iIndex, 1);\n\t\t\t}\n\t\t\toModel.setProperty(\"/configuration/indicatorsValue\", {});\n\t\t\tupdateSideIndicatorsForHeader();\n\t\t\tcontext?._advancedFormattingConfigurationPopover?.close();\n\t\t},\n\t\tonDeleteFormatter: () => {\n\t\t\tconst buttonId = oSource?.getId();\n\t\t\tCoreElement.getElementById(buttonId + \"--headerFormatterEditor\").deleteFormatter();\n\t\t\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n\t\t},\n\t\tonDeleteCriticality: () => {\n\t\t\tconst oModel = context.dialog.getModel();\n\t\t\tconst buttonId = oSource?.getId();\n\t\t\tCoreElement.getElementById(buttonId + \"--headerCriticalityEditor\")._onDeleteButtonClicked();\n\t\t\toModel.setProperty(\"/configuration/advancedFormattingOptions/selectedKeyCriticality\", \"\");\n\t\t\tupdateCriticality(false);\n\t\t\tcontext?._advancedFormattingConfigurationPopover?.close();\n\t\t}\n\t};\n\n\tif (oEvent?.getParameter(\"item\")?.getKey?.() === \"uom\") {\n\t\toConfigurationController.applyUoMFormatting();\n\t}\n\tif (oEvent.getSource()?.getParent()?.close) {\n\t\toEvent.getSource().getParent().close();\n\t}\n\n\tloadAdvancedFormattingConfigurationFragment(oSource, oConfigurationController);\n}\n\nfunction applyCriticality(oEvent: Event) {\n\tconst oModel = context?.dialog?.getModel();\n\tconst mainIndicatorCriticality = oModel?.getProperty(\"/configuration/mainIndicatorOptions/criticality\");\n\tlet sourceCriticalityProperty = oModel?.getProperty(\"/configuration/advancedFormattingOptions/sourceCriticalityProperty\");\n\tsourceCriticalityProperty = sourceCriticalityProperty?.[0];\n\n\tif (sourceCriticalityProperty?.hostCriticality !== sourceCriticalityProperty?.criticality) {\n\t\tsourceCriticalityProperty.criticality = sourceCriticalityProperty.hostCriticality;\n\t}\n\n\tconst propertyExists: boolean = mainIndicatorCriticality?.some((indicatorCriticality: Property) => {\n\t\treturn indicatorCriticality?.name === sourceCriticalityProperty?.name;\n\t});\n\n\tif (!propertyExists && sourceCriticalityProperty) {\n\t\tdelete sourceCriticalityProperty.hostCriticality;\n\t\tmainIndicatorCriticality?.push(sourceCriticalityProperty);\n\t} else {\n\t\tfor (let i = 0; i < mainIndicatorCriticality.length; i++) {\n\t\t\tif (mainIndicatorCriticality[i]?.name === sourceCriticalityProperty?.name) {\n\t\t\t\tdelete mainIndicatorCriticality[i];\n\t\t\t\tdelete sourceCriticalityProperty.hostCriticality;\n\t\t\t\tmainIndicatorCriticality[i] = sourceCriticalityProperty;\n\t\t\t}\n\t\t}\n\t}\n\n\toModel?.setProperty(\"/configuration/mainIndicatorOptions/criticality\", mainIndicatorCriticality);\n\tupdateCriticality(oEvent.getParameter(\"isCalcuationType\") || false);\n\tcontext?._advancedFormattingConfigurationPopover?.close();\n}\n\nfunction applyUoMFormatting() {\n\tconst oModel = context?.dialog?.getModel();\n\tconst unitOfMeasures = oModel?.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\tsourceProperty: string = oModel.getProperty(\"/configuration/advancedFormattingOptions/sourceUoMProperty\");\n\tlet relavantProperty = unitOfMeasures?.filter((property: Property) => property?.name === sourceProperty),\n\t\ttargetProperty: string = oModel?.getProperty(\"/configuration/advancedFormattingOptions/targetProperty\");\n\trelavantProperty = relavantProperty?.[0];\n\n\tif (!targetProperty && relavantProperty) {\n\t\toModel?.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", relavantProperty?.propertyKeyForDescription);\n\t}\n\n\ttargetProperty = oModel?.getProperty(\"/configuration/advancedFormattingOptions/targetProperty\");\n\tconst oData = {\n\t\tpropertyKeyForDescription: targetProperty,\n\t\tname: sourceProperty,\n\t\tpropertyKeyForId: sourceProperty,\n\t\tvalue: targetProperty\n\t};\n\tlet bMatchingProperty = false;\n\tunitOfMeasures.forEach((oUom: any) => {\n\t\tif (oUom.name === oData.name) {\n\t\t\tbMatchingProperty = true;\n\t\t\toUom.propertyKeyForDescription = oData.value;\n\t\t\toUom.value = oData.value;\n\t\t}\n\t});\n\tif (!bMatchingProperty && sourceProperty && targetProperty) {\n\t\tunitOfMeasures.push(oData);\n\t}\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\", unitOfMeasures);\n\tupdateArrangements();\n\tfor (let i = 0; i < unitOfMeasures.length; i++) {\n\t\tif (unitOfMeasures[i].value !== \"\" && aPropsWithUoM?.indexOf(unitOfMeasures[i]?.name) === -1) {\n\t\t\taPropsWithUoM?.push(unitOfMeasures[i]?.name);\n\t\t}\n\t}\n\tcontext?._advancedFormattingConfigurationPopover?.close();\n}\n\nfunction onTrendDelete() {\n\tconst oModel = context?.dialog?.getModel();\n\tconst trendValues = oModel.getProperty(\"/configuration/trendOptions\");\n\tconst selectedTrendValues = oModel.getProperty(\"/configuration/selectedTrendOptions\");\n\tlet iIndex: number = -1;\n\tselectedTrendValues?.forEach((trend: TrendOrIndicatorOptions, index: number) => {\n\t\tif (trend.sourceProperty === trendValues.sourceProperty) {\n\t\t\tiIndex = index;\n\t\t}\n\t});\n\tif (iIndex !== -1) {\n\t\tselectedTrendValues.splice(iIndex, 1);\n\t}\n\toModel.setProperty(\"/configuration/trendOptions\", {});\n\tupdateTrendForCardHeader();\n\tcontext?._advancedFormattingConfigurationPopover?.close();\n}\n\nfunction loadAdvancedFormattingConfigurationFragment(oSource: EventProvider, oConfigurationController: object) {\n\tFragment.load({\n\t\tid: oSource.getId(),\n\t\tname: \"sap.cards.ap.generator.app.fragments.configuration.AdvancedFormattingConfiguration\",\n\t\tcontroller: oConfigurationController\n\t})\n\t\t.then(function (oPopover: any) {\n\t\t\tcontext._advancedFormattingConfigurationPopover = oPopover;\n\t\t\tconst model = context.dialog.getModel();\n\t\t\tconst mainIndicatorUnitText = model.getProperty(\"/configuration/mainIndicatorStatusUnit\");\n\t\t\tconst oResourceBundle = context.dialog.getModel(\"i18n\").getResourceBundle();\n\t\t\tlet sUomText, sFormatterText, criticalityText;\n\t\t\tif (oSource.getBindingContext()) {\n\t\t\t\tconst sSelectedGroupItemPath = oSource.getBindingContext().sPath;\n\t\t\t\tconst sSelectedGroupProperty = model.getProperty(sSelectedGroupItemPath)?.label;\n\t\t\t\tconst sProperties: PropertyInfoMap = model.getProperty(\"/configuration/properties\");\n\t\t\t\tconst propertyLabelWithValue =\n\t\t\t\t\tsProperties?.filter((property) => {\n\t\t\t\t\t\treturn property.label === sSelectedGroupProperty;\n\t\t\t\t\t})[0].labelWithValue || sSelectedGroupProperty;\n\t\t\t\tsUomText = oResourceBundle.getText(\"SELECT_UOM_TEXT\", [propertyLabelWithValue]);\n\t\t\t\tsFormatterText = oResourceBundle.getText(\"SELECT_FORMATTER_TEXT\", [propertyLabelWithValue]);\n\t\t\t\tcriticalityText = oResourceBundle.getText(\"SELECT_CRITICALITY_TEXT\", [propertyLabelWithValue]);\n\t\t\t} else {\n\t\t\t\tsUomText = oResourceBundle.getText(\"SELECT_UOM_TEXT\", [mainIndicatorUnitText]);\n\t\t\t\tsFormatterText = oResourceBundle.getText(\"SELECT_FORMATTER_TEXT\", [mainIndicatorUnitText]);\n\t\t\t\tcriticalityText = oResourceBundle.getText(\"SELECT_CRITICALITY_TEXT\", [mainIndicatorUnitText]);\n\t\t\t}\n\t\t\tconst sIndicatorsText = oResourceBundle.getText(\"SELECT_INDICATORS_TEXT\", [mainIndicatorUnitText]);\n\t\t\tconst sTrendCalculatorText = oResourceBundle.getText(\"TREND_CALCULATION_TEXT\", [mainIndicatorUnitText]);\n\n\t\t\tconst mLabels = {\n\t\t\t\tuomText: sUomText,\n\t\t\t\tcriticalityText: criticalityText,\n\t\t\t\tformatterText: sFormatterText,\n\t\t\t\tindicatorsText: sIndicatorsText,\n\t\t\t\ttrendCalculatorText: sTrendCalculatorText\n\t\t\t};\n\t\t\toPopover.setModel(new JSONModel(mLabels), \"i18nLabelText\");\n\t\t\toSource.addDependent(oPopover);\n\t\t\treturn oPopover;\n\t\t})\n\t\t.then(function (oPopover) {\n\t\t\tconst oContext = oSource.getBindingContext();\n\t\t\toPopover.setBindingContext(oContext);\n\t\t\toPopover.openBy(oSource);\n\t\t\treturn oPopover;\n\t\t});\n}\n\nfunction onItemsActionsButtonPressed(oEvent: any) {\n\tconst oModel = context?.dialog?.getModel();\n\tconst sPath = oEvent?.getSource().getBindingContext().getPath();\n\tconst sourceProperty = oModel?.getProperty(sPath)?.name;\n\tconst oSource = oEvent.getSource();\n\tdisableOrEnableUOMAndTrend(oModel, sourceProperty);\n\tsetAdvancedFormattingOptionsEnablement(sourceProperty);\n\tconst oController = {\n\t\tonNavigationActionSelect: (oEvent: any) => {\n\t\t\tconst sId = oEvent.getParameter(\"item\").getId();\n\t\t\tconst oModel = context.dialog.getModel();\n\t\t\tif (sId === \"formatter\" || sId === \"uom\") {\n\t\t\t\toModel.setProperty(\"/configuration/popoverContentType\", sId);\n\t\t\t\tconst sPath = oEvent.getSource().getBindingContext().getPath();\n\t\t\t\toModel.setProperty(\"/configuration/advancedFormattingOptions/targetFormatterProperty\", oModel.getProperty(sPath).name);\n\t\t\t\toModel.setProperty(\"/configuration/advancedFormattingOptions/sourceUoMProperty\", oModel.getProperty(sPath).name);\n\t\t\t\tconst aUom = oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\");\n\t\t\t\tconst sSourceUoMProperty = oModel.getProperty(\"/configuration/advancedFormattingOptions/sourceUoMProperty\");\n\t\t\t\tif (aUom.length > 0) {\n\t\t\t\t\tconst aSourceUom = aUom.filter((oProperty: any) => {\n\t\t\t\t\t\treturn oProperty.name === sSourceUoMProperty;\n\t\t\t\t\t})[0];\n\t\t\t\t\tif (aSourceUom) {\n\t\t\t\t\t\toModel.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", aSourceUom.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (aPropsWithUoM.length && aPropsWithUoM.indexOf(sSourceUoMProperty) === -1) {\n\t\t\t\t\toModel.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", \"\");\n\t\t\t\t}\n\t\t\t\tonAdvancedFormattingConfigOpen(oEvent, oEvent.getSource().getParent());\n\t\t\t} else if (sId === \"criticality\") {\n\t\t\t\toModel.setProperty(\"/configuration/popoverContentType\", sId);\n\t\t\t\tconst sPath = oEvent.getSource().getBindingContext().getPath();\n\t\t\t\tif (oModel.getProperty(sPath)?.name) {\n\t\t\t\t\tsetCriticalitySourceProperty(oModel.getProperty(sPath).name);\n\t\t\t\t}\n\t\t\t\tonAdvancedFormattingConfigOpen(oEvent, oEvent.getSource().getParent());\n\t\t\t} else if (sId === \"actions\") {\n\t\t\t\t// do nothing\n\t\t\t} else {\n\t\t\t\tconst sourceItem = oEvent.getParameter(\"item\");\n\t\t\t\tconst customData = sourceItem.getCustomData();\n\t\t\t\tconst customAction = customData.filter((custom: any) => custom.getKey() === \"action\")[0];\n\t\t\t\tconst actionType = customAction.getValue();\n\t\t\t\tconst source = oEvent.getSource();\n\t\t\t\tconst sPath = source.getBindingContext().getPath();\n\t\t\t\tconst [groupIndex, itemIndex] = sPath.match(/(\\d+)/g).map((sValue: any) => Number(sValue));\n\t\t\t\tconst group = oModel.getProperty(\"/configuration/groups/\" + groupIndex);\n\t\t\t\tconst item = group.items[itemIndex];\n\n\t\t\t\tif (actionType === \"add\") {\n\t\t\t\t\tlet value = \"\";\n\t\t\t\t\tconst key = sourceItem.getId();\n\n\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\tcase \"url\":\n\t\t\t\t\t\t\tvalue = `${item.value}`;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"email\":\n\t\t\t\t\t\t\tvalue = `mailto: ${item.value}`;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"tel\":\n\t\t\t\t\t\t\tvalue = `tel: ${item.value}`;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (value === \"\") {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst actions = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: \"Navigation\",\n\t\t\t\t\t\t\tparameters: {\n\t\t\t\t\t\t\t\turl: value\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\n\t\t\t\t\titem[\"hasActions\"] = true;\n\t\t\t\t\titem[\"actionType\"] = key;\n\t\t\t\t\titem[\"actions\"] = actions;\n\t\t\t\t}\n\n\t\t\t\tif (actionType === \"remove\" && item.hasActions) {\n\t\t\t\t\tdelete item.hasActions;\n\t\t\t\t\tdelete item.actionType;\n\t\t\t\t\tdelete item.actions;\n\t\t\t\t}\n\t\t\t}\n\t\t\toModel.refresh();\n\t\t\tupdateCardGroups(oModel);\n\t\t\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n\t\t}\n\t};\n\tif (!context._itemActionsMenu || context?._itemActionsMenu?.isDestroyed()) {\n\t\tFragment.load({\n\t\t\tname: \"sap.cards.ap.generator.app.fragments.configuration.ItemActions\",\n\t\t\tcontroller: oController\n\t\t}).then(\n\t\t\tfunction (oMenu: any) {\n\t\t\t\tcontext._itemActionsMenu = oMenu;\n\t\t\t\tconst oContext = oSource.getBindingContext();\n\t\t\t\toMenu.setBindingContext(oContext);\n\t\t\t\toSource.addDependent(oMenu);\n\t\t\t\tcontext._itemActionsMenu.open(false, oSource, Popup.Dock.BeginTop, Popup.Dock.BeginBottom, oSource);\n\t\t\t}.bind(oController)\n\t\t);\n\t} else {\n\t\tconst oContext = oSource.getBindingContext();\n\t\tcontext._itemActionsMenu.setBindingContext(oContext);\n\t\toSource.addDependent(context._itemActionsMenu);\n\t\tcontext._itemActionsMenu.open(false, oSource, Popup.Dock.BeginTop, Popup.Dock.BeginBottom, oSource);\n\t}\n}\n\nfunction onPreviewTypeChange(oEvent: any) {\n\tconst selectedCardType = oEvent.getSource().getSelectedItem().getBindingContext(\"previewOptions\").getProperty(\"type\");\n\tconst oCard: any = CoreElement.getElementById(\"cardGeneratorDialog--cardPreview\");\n\tconst oAdaptiveCardContainer: any = CoreElement.getElementById(\"cardGeneratorDialog--adaptiveCardPreviewContainer\");\n\tconst oCustomSize: any = CoreElement.getElementById(\"cardGeneratorDialog--custom-entry\");\n\toCard.setVisible(false);\n\toAdaptiveCardContainer.setVisible(false);\n\toCustomSize.setVisible(false);\n\tswitch (selectedCardType) {\n\t\tcase \"adaptive\":\n\t\t\toAdaptiveCardContainer.setVisible(true);\n\t\t\tsetTimeout(() => {\n\t\t\t\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n\t\t\t}, 0);\n\t\t\tbreak;\n\t\tcase \"custom\":\n\t\t\toCard.setVisible(true);\n\t\t\toCustomSize.setVisible(true);\n\t\t\tbreak;\n\t\tcase \"integration\":\n\t\t\toCard.setVisible(true);\n\t\t\toCard.setWidth(oEvent.getSource().getSelectedItem().getBindingContext(\"previewOptions\").getProperty(\"width\"));\n\t\t\toCard.setHeight(oEvent.getSource().getSelectedItem().getBindingContext(\"previewOptions\").getProperty(\"height\"));\n\t\t\tbreak;\n\t\tdefault:\n\t\t\toCard.setVisible(true);\n\t\t\toCard.setWidth(oEvent.getSource().getSelectedItem().getBindingContext(\"previewOptions\").getProperty(\"width\"));\n\t\t\toCard.setHeight(oEvent.getSource().getSelectedItem().getBindingContext(\"previewOptions\").getProperty(\"height\"));\n\t\t\tbreak;\n\t}\n}\n\n/**\n * Update the sap.card.header of the integration card manifest by appling latest text arrangements, unit of measurement and formatters and triggers rendering of the card preview.\n * - This method is triggered when text arrrangement, unit of measurement or formatters are changed.\n */\nfunction updateHeaderArrangements() {\n\tconst oModel = context.dialog.getModel();\n\tconst currentManifest = getCurrentCardManifest();\n\tconst header = currentManifest[\"sap.card\"].header;\n\tconst subtitle = resolvePropertyPathFromExpression(header.subTitle, currentManifest);\n\tconst unitOfMeasurement = resolvePropertyPathFromExpression(header.unitOfMeasurement, currentManifest);\n\tconst mainIndicatorValue =\n\t\toModel.getProperty(\"/configuration/navigationValue\") || oModel.getProperty(\"/configuration/mainIndicatorStatusKey\");\n\tconst aUnitOfMeasures = oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\");\n\tconst aTextArrangements = oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\");\n\tconst aPropertyValueFormatters: FormatterConfigurationMap = oModel.getProperty(\n\t\t\"/configuration/advancedFormattingOptions/propertyValueFormatters\"\n\t);\n\n\tconst sapCardHeader = {\n\t\t\"sap.card\": {\n\t\t\theader: {\n\t\t\t\tmainIndicator: {\n\t\t\t\t\tnumber:\n\t\t\t\t\t\tmainIndicatorValue &&\n\t\t\t\t\t\tgetArrangements(`{${mainIndicatorValue}}`, {\n\t\t\t\t\t\t\tunitOfMeasures: aUnitOfMeasures,\n\t\t\t\t\t\t\ttextArrangements: aTextArrangements,\n\t\t\t\t\t\t\tpropertyValueFormatters: aPropertyValueFormatters\n\t\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tsubTitle: getArrangements(subtitle, {\n\t\t\t\t\tunitOfMeasures: aUnitOfMeasures,\n\t\t\t\t\ttextArrangements: aTextArrangements,\n\t\t\t\t\tpropertyValueFormatters: aPropertyValueFormatters\n\t\t\t\t}),\n\t\t\t\tunitOfMeasurement: getArrangements(unitOfMeasurement, {\n\t\t\t\t\tunitOfMeasures: aUnitOfMeasures,\n\t\t\t\t\ttextArrangements: aTextArrangements,\n\t\t\t\t\tpropertyValueFormatters: aPropertyValueFormatters\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t};\n\t\n\tconst oManifest = merge(currentManifest, sapCardHeader) as CardManifest;\n\trenderCardPreview(oManifest, context.dialog.getModel());\n}\n\nfunction updateArrangements() {\n\tconst oModel = context.dialog.getModel();\n\tupdateHeaderArrangements();\n\tconst groups: ObjectCardGroups[] = oModel.getProperty(\"/configuration/groups\");\n\tgroups?.forEach(function (group) {\n\t\tgroup?.items?.forEach((groupItem) => {\n\t\t\tif (groupItem.name && groupItem.name !== \"\") {\n\t\t\t\tconst groupItemValue = groupItem.isNavigationEnabled ? `${groupItem.name}/${groupItem.navigationProperty}` : groupItem.name;\n\t\t\t\tgroupItem.value = getArrangements(`{${groupItemValue}}`, {\n\t\t\t\t\tunitOfMeasures: oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\t\t\t\ttextArrangements: oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\"),\n\t\t\t\t\tpropertyValueFormatters: oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\")\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n}\n\nfunction updateCriticality(isCalcuationType: boolean) {\n\tconst currentManifest = getCurrentCardManifest();\n\tconst oModel = context.dialog.getModel();\n\tconst mainIndicator = currentManifest[\"sap.card\"].header.mainIndicator;\n\tconst groups = (currentManifest[\"sap.card\"].content as ObjectContent).groups;\n\n\tif (!mainIndicator && groups.length < 1) {\n\t\treturn;\n\t}\n\tlet oManifest;\n\tif (mainIndicator) {\n\t\tconst mainIndicatorValue = resolvePropertyPathFromExpression(mainIndicator.number, currentManifest);\n\t\tconst sapCardHeader = {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {\n\t\t\t\t\tmainIndicator: {\n\t\t\t\t\t\tstate: getCriticality(mainIndicatorValue || mainIndicator.number, isCalcuationType)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\toManifest = merge(currentManifest, sapCardHeader) as CardManifest;\n\t} else {\n\t\toManifest = currentManifest;\n\t}\n\n\trenderCardPreview(oManifest, context.dialog.getModel());\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n}\n\nasync function checkForNavigationProperty(event: Event) {\n\tconst selectedParameters = event.getParameters() as EventParameters;\n\tconst selectedItem = selectedParameters.selectedItem;\n\tif (!selectedItem) return;\n\tconst model = context.dialog.getModel() as JSONModel;\n\tconst navigationProperties: NavigationParameter[] = model.getProperty(\"/configuration/navigationProperty\") || [];\n\tconst selectedNavigationalProperties: NavigationalData[] = model.getProperty(\"/configuration/selectedNavigationalProperties\") || [];\n\n\tconst existingIndex = selectedNavigationalProperties.findIndex((navItem) => navItem.name === selectedItem.value);\n\tconst selectedProperty = navigationProperties.find((prop) => prop.name === selectedItem.value);\n\n\tconst { name: selectedPropertyName = \"\", properties: selectedPropertyValues = [] } = selectedProperty || {};\n\n\tconst data: NavigationalData = { name: selectedPropertyName, value: selectedPropertyValues };\n\n\tif (existingIndex === -1 && selectedProperty) {\n\t\tselectedNavigationalProperties.push(data);\n\t}\n\tmodel.setProperty(\"/configuration/selectedNavigationalProperties\", selectedNavigationalProperties);\n\n\tif (selectedProperty) {\n\t\tawait updateCardConfigurationData(selectedProperty.name, data);\n\t\tif (selectedParameters.textArrangementChanged) {\n\t\t\tselectedItem.navigationalPropertiesForId = data.value;\n\t\t\tselectedItem.isNavigationForId = data.value.length > 0;\n\t\t\tselectedItem.navigationKeyForId = \"\";\n\t\t} else {\n\t\t\tselectedItem.navigationalPropertiesForDescription = data.value;\n\t\t\tselectedItem.isNavigationForDescription = data.value.length > 0;\n\t\t\tselectedItem.navigationKeyForDescription = \"\";\n\t\t}\n\t\tselectedItem.value = \"\"; // to reset navigation combobox value in the card and dropdown.\n\t} else {\n\t\tif (selectedParameters.textArrangementChanged) {\n\t\t\tselectedItem.isNavigationForId = false;\n\t\t\tselectedItem.navigationKeyForId = \"\";\n\t\t} else {\n\t\t\tselectedItem.isNavigationForDescription = false;\n\t\t\tselectedItem.navigationKeyForDescription = \"\";\n\t\t}\n\t}\n}\n\nasync function toggleAdvancedSetting(toggleEvent: Event) {\n\tconst toggleButton: ToggleButton = toggleEvent.getSource();\n\ttoggleButton.setEnabled(false);\n\t\n\tconst splitter = CoreElement.getElementById(\"cardGeneratorDialog--contentSplitter\") as Splitter;\n\tconst controller = {\n\t\tonCriticalityChange: (criticalityChangeEvent: Event<{ isCalcuationType: boolean }>) => {\n\t\t\tupdateCriticality(criticalityChangeEvent.getParameter(\"isCalcuationType\") || false);\n\t\t},\n\t\tonArrangementsChange: async (arrangementChangeEvent: Event) => {\n\t\t\tawait checkForNavigationProperty(arrangementChangeEvent);\n\t\t\tupdateArrangements();\n\t\t\tconst dialogModel = context.dialog.getModel();\n\t\t\tconst groups = dialogModel.getProperty(\"/configuration/groups\");\n\n\t\t\tfor (let i = 0; i < groups?.[0].items.length; i++) {\n\t\t\t\tconst item = groups[0].items[i];\n\t\t\t\tconst uom = item.value.split(\" \")[1] && item.value.split(\" \")[1].slice(1, -1);\n\n\t\t\t\tif (uom !== \"undefined\" && uom !== undefined) {\n\t\t\t\t\tdialogModel.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", uom);\n\t\t\t\t} else if (uom === undefined) {\n\t\t\t\t\tdialogModel.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", \"\");\n\t\t\t\t}\n\n\t\t\t\tif (uom !== \"undefined\" && uom !== undefined && aPropsWithUoM?.indexOf(item?.name) === -1) {\n\t\t\t\t\taPropsWithUoM.push(item?.name);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonPropertyFormatterChangeFromAdvancedSettings: function () {\n\t\t\tupdateHeaderArrangements();\n\t\t}\n\t};\n\n\t\n\tawait Fragment.load({\n\t\tname: \"sap.cards.ap.generator.app.fragments.AdvancedSettings\",\n\t\tcontroller: controller\n\t}).then(function (advancedSettings: Control | Control[]) {\n\t\tif (!toggleButton.getPressed()) {\n\t\t\tconst lastContentArea = splitter.getContentAreas()[1]; // position 1 is the advance panel\n\t\t\tsplitter.removeContentArea(lastContentArea);\n\t\t} else {\n\t\t\tsplitter.insertContentArea(advancedSettings as Control, 1); // position 1 is the advance panel\n\t\t}\n\t\ttoggleButton.setEnabled(true);\n\t\tsetTimeout(() => {\n\t\t\ttranspileIntegrationCardToAdaptive(context.dialog.getModel());\n\t\t}, 0);\n\t});\n}\n\n"],"mappings":"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","ignoreList":[]}