/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *  * (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
"use strict";sap.ui.define(["sap/base/security/encodeURLParameters","sap/ui/model/odata/ODataUtils","sap/ui/model/odata/v4/ODataUtils","../helpers/ApplicationInfo","./v2/MetadataAnalyzer","./v4/MetadataAnalyzer"],function(t,e,n,o,r,s){"use strict";const c=o["ODataModelVersion"];const a=r["getPropertyReference"];const i=s["getPropertyReferenceKey"];const u=s["getSemanticKeys"];const l=function(t,n,o){const r=[];const s=n.getObject(`/${t}`);const c=a(n,o);c.forEach(t=>{const n=e.formatValue(`${s[t.name]}`,t.type,true);r.push(`${t.name}=${n}`)});return r};const f=function(t,e){if(t.length!==e.length){return false}const n=[...t].sort();const o=[...e].sort();return n.join("")===o.join("")};const m=function(t,e,o,r,s,a){try{const i=t.isA("sap.ui.model.odata.v4.ODataModel")?c.V4:c.V2;const u=i===c.V4;const l=u?t.getServiceUrl():t.sServiceUrl;const f=r[0].$PropertyPath;const m={$select:s.join(","),$filter:`${f} eq ${decodeURIComponent(o[0])}`};return Promise.resolve($(l,e,m)).then(function(t){if(t.value.length){const e=t.value[0];return a.map(t=>`${t.name}=${n.formatLiteral(e[t.name],t.type)}`)}return o})}catch(t){return Promise.reject(t)}};const h=function(t,e){const o=t.find(t=>t.type==="Edm.Guid")?.name;const r=e[0];e[0]=o?`${o}=${n.formatLiteral(r,"Edm.Guid")}`:t.map(t=>`${t.name}=${r}`).join(",");return e};const d=function(t,e){const n=t.map(t=>t.split("=")[0]);e.forEach(e=>{if(!n.includes(e.name)&&e.name==="IsActiveEntity"){t.push("IsActiveEntity=true")}});return t};const p=function(t,e,n){try{let o=false;function r(t){return o?t:c.length===1&&c[0].indexOf("=")===-1?h(s,c):d(c,s)}const s=i(t,e);const c=n.split(",");const a=u(t.getMetaModel(),e);const l=a.map(t=>t.$PropertyPath);const p=s.map(t=>t.name);const y=!f(l,p);const $=function(){if(a.length&&y){return Promise.resolve(m(t,e,c,a,p,s)).then(function(t){o=true;return t})}}();return Promise.resolve($&&$.then?$.then(r):r($))}catch(P){return Promise.reject(P)}};const y=function(t,e,n){try{function o(){return i.join(",")}const r=t.indexOf("(");const s=t.substring(0,r);const c=t.indexOf(")");const a=t.substring(r+1,c);let i=[];const u=function(){if(n){return Promise.resolve(p(e,s,a)).then(function(t){i=t})}else{i=l(t,e,s)}}();return Promise.resolve(u&&u.then?u.then(o):o(u))}catch(f){return Promise.reject(f)}};const $=function(e,n){let o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};try{const r={};Object.keys(o).forEach(t=>{if(o[t].length){r[t]=o[t]}});const s=e.endsWith("/")?e:`${e}/`;r.format="json";const c=t(r);const a=`${s}${n}?${c}`;return Promise.resolve(fetch(a).then(t=>t.json()).then(t=>t).catch(t=>{throw new Error(t)}))}catch(t){return Promise.reject(t)}};var P={__esModule:true};P.createContextParameter=y;P.fetchDataAsync=$;return P});
//# sourceMappingURL=ODataUtils-dbg.js.map