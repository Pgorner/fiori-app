{"version":3,"file":"ApplicationInfo-dbg.js","names":["sap","ui","define","ResourceBundle","ODataModelVersion","fetchApplicationInfo","rootComponent","fetchOptions","isDesignMode","componentName","getManifest","id","model","getModel","hash","window","hasher","getHash","hashPartial","split","semanticObject","action","includes","path","startsWith","slice","index","indexOf","entitySet","substring","context","odataModel","isA","V4","V2","i18nModel","Promise","resolve","getResourceBundle","then","resourceBundle","_temp2","appModel","entitySetWithObjectContext","_temp","i18nBundleUrl","oUrlInfo","url","timeStamp","Date","now","create","async","_ResourceBundle$creat","e","reject","__exports","__esModule"],"sources":["ApplicationInfo.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport Component from \"sap/ui/core/Component\";\nimport { default as V2ODataModel } from \"sap/ui/model/odata/v2/ODataModel\";\nimport { default as V4ODataModel } from \"sap/ui/model/odata/v4/ODataModel\";\nimport ResourceModel from \"sap/ui/model/resource/ResourceModel\";\n\nexport enum ODataModelVersion {\n\tV2 = \"V2\",\n\tV4 = \"V4\"\n}\n\ntype ODataModel = V2ODataModel | V4ODataModel;\n\nexport type ApplicationInfo = {\n\tappModel: ODataModel;\n\todataModel: ODataModelVersion;\n\tentitySet: string;\n\tcontext: string;\n\tentitySetWithObjectContext: string;\n\tcomponentName: string;\n\tresourceBundle: ResourceBundle;\n\tsemanticObject: string;\n\taction: string;\n};\n\ntype ResourceBundleWithURL = ResourceBundle & { oUrlInfo: { url: string } };\ntype FetchApplicationInfoOptions = {\n\tisDesignMode?: boolean;\n};\n\ntype ManifestContentSapCardsAP = {\n\tembeds: {\n\t\tObjectPage?: {\n\t\t\tdefault: string;\n\t\t\tmanifests: {\n\t\t\t\t[key: string]: Array<{\n\t\t\t\t\tlocalUri: string;\n\t\t\t\t\thideActions: boolean;\n\t\t\t\t}>;\n\t\t\t};\n\t\t};\n\t};\n};\n\nexport type AppManifest = {\n\t\"sap.app\": {\n\t\tid: string;\n\t};\n\t\"sap.ui5\": {};\n\t\"sap.ui\": {};\n\t\"sap.fe\"?: {};\n\t\"sap.platform.abap\"?: {\n\t\turi: string;\n\t};\n\t\"sap.cards.ap\"?: ManifestContentSapCardsAP;\n};\n\n/**\n * Fetches the details of the application\n *\n * @param {Component} rootComponent - The root component of the application\n * @param {FetchApplicationInfoOptions} fetchOptions\n * @returns {Promise<ApplicationInfo>} The application info\n */\nexport const fetchApplicationInfo = async function (\n\trootComponent: Component,\n\tfetchOptions?: FetchApplicationInfoOptions\n): Promise<ApplicationInfo> {\n\tconst isDesignMode = fetchOptions?.isDesignMode || false;\n\tconst componentName = (rootComponent.getManifest() as AppManifest)[\"sap.app\"].id;\n\tconst model = rootComponent.getModel() as ODataModel;\n\tconst hash = window.hasher.getHash();\n\tconst [hashPartial] = hash.split(\"&/\");\n\tconst [semanticObject, action] = hashPartial.includes(\"?\") ? hashPartial.split(\"?\")[0].split(\"-\") : hashPartial.split(\"-\");\n\n\tlet path = hash.split(\"&/\")[1] || \"\";\n\tpath = path.includes(\"/\") ? path.split(\"/\")[0] : path;\n\tpath = path.startsWith(\"/\") ? path.slice(1) : path;\n\n\tconst index = path.indexOf(\"(\");\n\tconst entitySet = index > -1 ? path.substring(0, index) : path;\n\tconst context = index > -1 ? path.substring(index + 1, path.indexOf(\")\")) : \"\";\n\tconst odataModel = model.isA<V4ODataModel>(\"sap.ui.model.odata.v4.ODataModel\") ? ODataModelVersion.V4 : ODataModelVersion.V2;\n\tconst i18nModel = (rootComponent.getModel(\"i18n\") || rootComponent.getModel(\"@i18n\")) as ResourceModel;\n\tlet resourceBundle = await i18nModel.getResourceBundle();\n\n\tif (isDesignMode) {\n\t\t/* Refreshing or destroying the i18nModel does not fetch the latest values because of caching.\n\t\tFor cache busting, we are appending a unique identifier to the i18nBundleUrl to fetch the latest i18n values everytime dialog is opened. */\n\t\tconst i18nBundleUrl = (resourceBundle as ResourceBundleWithURL)?.oUrlInfo?.url;\n\t\tconst timeStamp = Date.now();\n\n\t\tresourceBundle = await ResourceBundle.create({\n\t\t\turl: `${i18nBundleUrl}?v=${timeStamp}`,\n\t\t\tasync: true\n\t\t});\n\t}\n\n\treturn {\n\t\todataModel,\n\t\tappModel: model,\n\t\tentitySet,\n\t\tentitySetWithObjectContext: path,\n\t\tcontext,\n\t\tcomponentName,\n\t\tresourceBundle,\n\t\tsemanticObject,\n\t\taction\n\t} as ApplicationInfo;\n};\n"],"mappings":";;;;AAAA,aAAAA,IAAAC,GAAAC,OAAA,0CAAAC,GAAA,iBAUYC,EAAiB,SAAjBA,KAAiB,WAAjBA,EAAiB,kBAAjBA,CAAiB,EAAjBA,GAAiB,IA0DtB,MAAMC,EAAoB,SAChCC,EACAC,GAA0C,IAE1C,MAAMC,EAAeD,GAAcC,cAAgB,MACnD,MAAMC,EAAiBH,EAAcI,cAA8B,WAAWC,GAC9E,MAAMC,EAAQN,EAAcO,WAC5B,MAAMC,EAAOC,OAAOC,OAAOC,UAC3B,MAAOC,GAAeJ,EAAKK,MAAM,MACjC,MAAOC,EAAgBC,GAAUH,EAAYI,SAAS,KAAOJ,EAAYC,MAAM,KAAK,GAAGA,MAAM,KAAOD,EAAYC,MAAM,KAEtH,IAAII,EAAOT,EAAKK,MAAM,MAAM,IAAM,GAClCI,EAAOA,EAAKD,SAAS,KAAOC,EAAKJ,MAAM,KAAK,GAAKI,EACjDA,EAAOA,EAAKC,WAAW,KAAOD,EAAKE,MAAM,GAAKF,EAE9C,MAAMG,EAAQH,EAAKI,QAAQ,KAC3B,MAAMC,EAAYF,GAAS,EAAIH,EAAKM,UAAU,EAAGH,GAASH,EAC1D,MAAMO,EAAUJ,GAAS,EAAIH,EAAKM,UAAUH,EAAQ,EAAGH,EAAKI,QAAQ,MAAQ,GAC5E,MAAMI,EAAanB,EAAMoB,IAAkB,oCAAsC5B,EAAkB6B,GAAK7B,EAAkB8B,GAC1H,MAAMC,EAAa7B,EAAcO,SAAS,SAAWP,EAAcO,SAAS,SAA2B,OAAAuB,QAAAC,QAC5EF,EAAUG,qBAAmBC,KAAA,SAApDC,GAAc,SAAAC,IAclB,MAAO,CACNV,aACAW,SAAU9B,EACVgB,YACAe,2BAA4BpB,EAC5BO,UACArB,gBACA+B,iBACApB,iBACAC,SACoB,OAAAuB,EAAA,cAtBjBpC,EAAY,CAGf,MAAMqC,EAAiBL,GAA0CM,UAAUC,IAC3E,MAAMC,EAAYC,KAAKC,MAAM,OAAAd,QAAAC,QAENlC,EAAegD,OAAO,CAC5CJ,IAAK,GAAGF,OAAmBG,IAC3BI,MAAO,QACNb,KAAA,SAAAc,GAHFb,EAAca,CAGX,IAaiB,GAbjB,OAAAT,KAAAL,KAAAK,EAAAL,KAAAE,KAAAG,EAAA,EAcL,CAAC,MAAAU,GAAA,OAAAlB,QAAAmB,OAAAD,EAAA,GAAC,IAAAE,EAAA,CAAAC,WAAA,MAAAD,EAAApD,oBAAAoD,EAAAnD,uBAAA,OAAAmD,CAAA","ignoreList":[]}