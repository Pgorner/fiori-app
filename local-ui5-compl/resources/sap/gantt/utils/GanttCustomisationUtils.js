/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/model/json/JSONModel","sap/m/Button","sap/m/Dialog","sap/ui/comp/smartform/SmartForm","sap/ui/comp/smartform/Group","sap/ui/comp/smartform/GroupElement","sap/m/SelectDialog","sap/m/CustomListItem","sap/m/Input","sap/ui/core/theming/Parameters","sap/ui/core/Icon","sap/m/HBox","sap/m/Text","sap/m/DateRangeSelection","sap/gantt/misc/Format","sap/gantt/library","sap/ui/core/Lib"],function(e,t,a,o,n,r,l,s,i,m,g,p,T,c,u,_,S){"use strict";var d=S.getResourceBundleFor("sap.gantt");var C=_.palette;var h=C.SemanticColors.concat(C.LegendColors).concat(C.AccentColors);var E=function(){var t=h.map(function(e){return{color:e}});return new e({colors:t})};var w={dialogBox:function(e,_){return new Promise(function(S,C){var w="";if(_){w=new c({dateValue:u.abapTimestampToDate(e.getTimeStamp()),secondDateValue:u.abapTimestampToDate(e.getEndTimeStamp()),minDate:new Date(1900,0,1),maxDate:new Date(2100,12,31)})}else{w=new i({placeholder:d.getText("TXT_CH_AL_PH_TIMESTAMP"),value:e.getTimeStamp()})}var A=new o({editable:true,useHorizontalLayout:false,groups:[new n({groupElements:[new r({label:d.getText("TXT_CH_AL_STROKE"),elements:[new i({type:"Text",value:{path:"colors",formatter:function(t){t=h;for(var a=0;a<t.length;a++){if(e.getStroke()===m.get(t[a])){return t[a]}}}},placeholder:d.getText("TXT_CH_AL_PH_STROKE_VALUE"),showValueHelp:true,valueHelpOnly:true,valueHelpRequest:function(){if(this.oSelectDialog){this.oSelectDialog.open();return}this.oSelectDialog=new l({title:d.getText("TXT_CH_AL_DIALOG_COLOR_SELECTOR"),confirm:function(e){A.getGroups()[0].getGroupElements()[0].getElements()[0].setValue(e.getParameter("selectedItem").getContent()[0].getItems()[1].getText())},items:{growing:false,path:"colors>/colors",template:new s({content:[new p({alignItems:"Center",items:[new g({src:"sap-icon://color-fill",color:{path:"colors>color",formatter:function(e){return m.get(e)}}}).addStyleClass("sapUiTinyMargin"),new T({text:{path:"colors>color",formatter:function(e){return e}}})]})]}),templateShareable:false,showSecondaryValues:true}});this.oSelectDialog.setModel(E(),"colors");this.oSelectDialog.open()}})]}),new r({label:d.getText("TXT_CH_AL_STROKE_DASHARRAY"),elements:[new i({placeholder:d.getText("TXT_CH_AL_PH_STROKE_DASHARRAY"),value:e.getStrokeDasharray()})]}),new r({label:d.getText("TXT_CH_AL_STROKE_OPACITY"),elements:[new i({placeholder:d.getText("TXT_CH_AL_PH_STROKE_OPACITY"),value:e.getStrokeOpacity()})]}),new r({label:d.getText("TXT_CH_AL_TIMESTAMP"),elements:[w]}),new r({label:d.getText("TXT_CH_AL_DESCRIPTION"),elements:[new i({placeholder:d.getText("TXT_CH_AL_PH_DESCRIPTION"),value:e.getDescription()})]})]})]});A.getGroups()[0].getGroupElements()[0].getElements()[0].setModel(E());var D=new t({text:d.getText("SAVE_BUTTON"),type:"Emphasized"}),f=new t({text:d.getText("CANCEL_BUTTON")});var L=new a({title:_?d.getText("TXT_CH_DL_DIALOG_TITLE"):d.getText("TXT_CH_AL_DIALOG_TITLE"),buttons:[D,f],content:[A]});f.attachPress(function(e){L.close()});D.attachPress(function(t){var a=L.getContent()[0].getGroups()[0].getGroupElements(),o={newChange:{stroke:m.get(a[0].getElements()[0].getValue()),strokeDasharray:a[1].getElements()[0].getValue(),strokeOpacity:parseFloat(a[2].getElements()[0].getValue()),description:a[4].getElements()[0].getValue()},oldChange:{stroke:e.getStroke(),strokeDasharray:e.getStrokeDasharray(),strokeOpacity:e.getStrokeOpacity(),description:e.getDescription()}};if(_){o.newChange["timeStamp"]=u.dateToAbapTimestamp(a[3].getElements()[0].getDateValue());o.newChange["endTimeStamp"]=u.dateToAbapTimestamp(a[3].getElements()[0].getSecondDateValue());o.oldChange["timeStamp"]=e.getTimeStamp();o.oldChange["endTimeStamp"]=e.getEndTimeStamp()}else{o.newChange["timeStamp"]=a[3].getElements()[0].getValue();o.oldChange["timeStamp"]=e.getTimeStamp()}L.close();S(o)});L.open()})},designTimeSettings:function(e,t){return{icon:"sap-icon://edit",name:d.getText(e),isEnabled:true,handler:t}}};return w},true);
//# sourceMappingURL=GanttCustomisationUtils.js.map