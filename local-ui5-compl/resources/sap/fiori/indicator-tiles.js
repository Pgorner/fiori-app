//@ui5-bundle sap/fiori/indicator-tiles.js
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/base/util/UriParameters", ["sap/base/Log"],function(e){"use strict";function t(e){var t=e.indexOf("#");if(t>=0){e=e.slice(0,t)}var n=e.indexOf("?");if(n>=0){return e.slice(n+1)}return""}function n(e){return decodeURIComponent(e.replace(/\+/g," "))}function r(e,t){function r(t,n){if(t in e){e[t].push(n)}else{e[t]=[n]}}t.split("&").forEach(function(e){var t=e.indexOf("=");if(t>=0){r(n(e.slice(0,t)),n(e.slice(t+1)))}else if(e.length){r(n(e),"")}})}var i=function(n){var i=Object.create(null);if(n!=null){if(typeof n!=="string"){throw new TypeError("query parameter must be a string")}r(i,t(n))}this.has=function(e){return e in i};this._get=function(e){return e in i?i[e][0]:null};this.getAll=function(e){return e in i?i[e].slice():[]};this.keys=function(){return Object.keys(i).values()};var u=false;Object.defineProperty(this,"mParams",{get:function(){if(!u){e.warning("[Deprecated] UriParameters.mParams must not be accessed.");u=true}return Object.assign({},i)},configurable:false})};i.prototype.get=function(t,n){if(n){e.warning("[Deprecated] UriParameters.get(..., true) must not be used, use getAll() instead.");return this.getAll(t)}return this._get(t)};i.fromURL=function(e){return new i(e)};i.fromQuery=function(e){if(typeof e==="string"){if(e[0]!=="?"){e="?"+e}e=e.replace(/#/g,"%23")}return new i(e)};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Column", ["./library","sap/ui/core/Element","sap/ui/core/Renderer","sap/ui/core/library","sap/ui/Device","sap/ui/core/InvisibleText"],function(e,t,i,r,n,a){"use strict";var o=e.PopinDisplay;var s=r.VerticalAlign;var p=r.TextAlign;var u=r.SortOrder;var d=t.extend("sap.m.Column",{metadata:{library:"sap.m",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},hAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:p.Begin},vAlign:{type:"sap.ui.core.VerticalAlign",group:"Appearance",defaultValue:s.Inherit},styleClass:{type:"string",group:"Appearance",defaultValue:null},visible:{type:"boolean",group:"Appearance",defaultValue:true},minScreenWidth:{type:"string",group:"Behavior",defaultValue:null},demandPopin:{type:"boolean",group:"Behavior",defaultValue:false},popinHAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:p.Begin,deprecated:true},popinDisplay:{type:"sap.m.PopinDisplay",group:"Appearance",defaultValue:o.Block},mergeDuplicates:{type:"boolean",group:"Behavior",defaultValue:false},mergeFunctionName:{type:"string",group:"Misc",defaultValue:"getText"},sortIndicator:{type:"sap.ui.core.SortOrder",group:"Appearance",defaultValue:u.None},importance:{type:"sap.ui.core.Priority",group:"Behavior",defaultValue:"None"},autoPopinWidth:{type:"float",group:"Behavior",defaultValue:8}},defaultAggregation:"header",aggregations:{header:{type:"sap.ui.core.Control",multiple:false},footer:{type:"sap.ui.core.Control",multiple:false}},associations:{headerMenu:{type:"sap.ui.core.IColumnHeaderMenu",multiple:false}},designtime:"sap/m/designtime/Column.designtime"}});d.prototype._index=-1;d.prototype._media=null;d.prototype._bForcedColumn=false;d.prototype.exit=function(){this._clearMedia()};d.prototype.setParent=function(e){t.prototype.setParent.apply(this,arguments);if(!e){delete this._initialOrder}return this};d.prototype.getTable=function(){var e=this.getParent();if(e&&e.isA("sap.m.Table")){return e}};d.prototype.informTable=function(e,t,i){var r=this.getTable();if(r){var n="onColumn"+e;if(r[n]){r[n](this,t,i)}}};d.prototype.ontouchstart=function(e){this._bTouchStartMarked=e.isMarked()};d.prototype.ontap=function(e){if(!this._bTouchStartMarked&&!e.isMarked()){this.informTable("Press")}};d.prototype.onsapspace=function(e){if(e.srcControl===this){this.informTable("Press");e.preventDefault()}};d.prototype.onsapenter=d.prototype.onsapspace;d.prototype.oncontextmenu=function(e){var t=this.getHeaderMenuInstance();if(t){t.openBy(this);e.preventDefault()}};d.prototype.invalidate=function(){var e=this.getParent();if(e&&e.bOutput){t.prototype.invalidate.apply(this,arguments)}};d.prototype._clearMedia=function(){if(this._media&&this._minWidth){this._detachMediaContainerWidthChange(this._notifyResize,this,this.getId());n.media.removeRangeSet(this.getId());this._media=null}};d.prototype._addMedia=function(){delete this._bShouldAddMedia;if(this._minWidth){n.media.initRangeSet(this.getId(),[parseFloat(this._minWidth)]);this._attachMediaContainerWidthChange(this._notifyResize,this,this.getId());this._media=this._getCurrentMediaContainerRange(this.getId());if(this._media){this._media.matches=!!this._media.from}}};d.prototype._notifyResize=function(e){if(this._media.from===e.from){return}this._media=e;this._media.matches=!!e.from;if(this.getVisible()){this.informTable("Resize")}};d.prototype._validateMinWidth=function(t){if(!t){return}if(Object.prototype.toString.call(t)!="[object String]"){throw new Error('expected string for property "minScreenWidth" of '+this)}if(Object.keys(e.ScreenSizes).indexOf(t.toLowerCase())!=-1){return}if(!/^\d+(\.\d+)?(px|em|rem)$/i.test(t)){throw new Error('invalid CSS size("px", "em", "rem" required) or sap.m.ScreenSize enumeration for property "minScreenWidth" of '+this)}};d.prototype.getCssAlign=function(e){e=e||this.getHAlign();if(e===p.Begin||e===p.End||e===p.Initial){e=i.getTextAlign(e)}return e.toLowerCase()};d.prototype.setIndex=function(e){this._index=+e};d.prototype.getIndex=function(){return this._index};d.prototype.setOrder=function(e){this._order=+e};d.prototype.getOrder=function(){return this.hasOwnProperty("_order")?this._order:this.getInitialOrder()};d.prototype.setInitialOrder=function(e){this._initialOrder=+e};d.prototype.getInitialOrder=function(){if(this.hasOwnProperty("_initialOrder")){return this._initialOrder}var e=this.getTable();if(!e){return-1}return e.indexOfColumn(this)};d.prototype._setMinScreenWidth=function(t){this._clearMedia();this._minWidth=0;if(t){t=t.toLowerCase();var i=e.ScreenSizes[t];if(i){this._minWidth=i+"px"}else if(t.endsWith("px")){this._minWidth=t}else{var r=parseFloat(e.BaseFontSize);this._minWidth=parseFloat(t)*r+"px"}var n=this.getTable();if(n&&n.isActive()){this._addMedia()}else{this._bShouldAddMedia=true}}};d.prototype.setMinScreenWidth=function(e){e=e||"";if(e==this.getMinScreenWidth()){return this}this._validateMinWidth(e);this._setMinScreenWidth(e);return this.setProperty("minScreenWidth",e)};d.prototype.setSortIndicator=function(e){this.setProperty("sortIndicator",e,true);this.$().attr("aria-sort",this.getSortIndicator().toLowerCase());return this};d.prototype.isPopin=function(){if(!this.getDemandPopin()){return false}var e=this.getTable();if(e){var t=e.getHiddenInPopin()||[];var i=t.includes(this.getImportance());if(i){return false}}return this.isHidden()};d.prototype.isHidden=function(){return this._media?!this._media.matches:false};d.prototype.setLastValue=function(e){this._lastValue=e;return this};d.prototype.clearLastValue=function(){return this.setLastValue(NaN)};d.prototype.getLastValue=function(){return this._lastValue};d.prototype.onItemsRemoved=function(){this.clearLastValue()};d.prototype.onTableRendering=function(){this.clearLastValue();if(this._bShouldAddMedia){this._addMedia()}};d.prototype.getCalculatedMinScreenWidth=function(){return parseInt(this._minWidth)||0};d.prototype.setForcedColumn=function(e){if(this._bForcedColumn==e){return}this._bForcedColumn=e;this._setMinScreenWidth(e?"":this.getMinScreenWidth())};d.prototype.getHeaderMenuInstance=function(){return t.getElementById(this.getHeaderMenu())};d.prototype.setHeader=function(e){var t=this.getHeader();if(t){if(t.isA("sap.m.Label")){t.detachEvent("_change",this._onLabelPropertyChange,this)}t.setIsInColumnHeaderContext?.(false)}this.setAggregation("header",e);var i=this.getHeader();if(i){if(i.isA("sap.m.Label")){i.attachEvent("_change",this._onLabelPropertyChange,this)}i.setIsInColumnHeaderContext?.(true)}return this};d.prototype._onLabelPropertyChange=function(e){var t=this.getTable();if(!t||e.getParameter("name")!="required"){return}if(t.bActiveHeaders||this.getHeaderMenuInstance()){this.$()[e.getSource().getRequired()?"addAriaDescribedBy":"removeAriaDescribedBy"](a.getStaticId("sap.m","CONTROL_IN_COLUMN_REQUIRED"))}};d.prototype.getFieldHelpInfo=function(){return{label:this.getHeader()?.getText?.()||""}};return d});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Menu", ["./library","sap/ui/core/library","sap/ui/core/Control","./Button","./Dialog","./NavContainer","./List","./Page","./MenuListItem","./MenuItem","sap/ui/core/Lib","sap/ui/unified/Menu","sap/ui/unified/MenuItem","sap/ui/unified/MenuItemGroup","sap/ui/Device","sap/ui/core/EnabledPropagator","sap/ui/thirdparty/jquery","sap/ui/core/Popup","sap/ui/base/ManagedObject","sap/ui/core/Element"],function(e,t,i,n,s,o,a,r,l,u,g,p,m,h,d,_,jQuery,I,f,c){"use strict";var y=I.Dock;var C=e.ListType;var v=e.ListMode;var M=t.ItemSelectionMode;var S=i.extend("sap.m.Menu",{metadata:{interfaces:["sap.ui.core.IContextMenu"],library:"sap.m",properties:{title:{type:"string",group:"Misc",defaultValue:null}},defaultAggregation:"items",aggregations:{items:{type:"sap.m.IMenuItem",multiple:true,singularName:"item",bindable:"bindable",defaultClass:u},_dialog:{type:"sap.m.Dialog",multiple:false,visibility:"hidden"},_menu:{type:"sap.ui.unified.Menu",multiple:false,visibility:"hidden"}},events:{itemSelected:{parameters:{item:{type:"sap.m.MenuItem"}}},closed:{},beforeClose:{allowPreventDefault:true}}},renderer:null});_.call(S.prototype);S.UNIFIED_MENU_ITEMS_ID_SUFFIX="-unifiedmenu";S.UNFIFIED_MENU_ITEMS_PROPS=m.getMetadata().getAllProperties();S.LIST_ITEMS_ID_SUFFIX="-menuinnerlist";S.MENU_LIST_ITEMS_PROPS=l.getMetadata().getAllProperties();S.prototype.init=function(){if(d.system.phone){this._initDialog()}this._bIsInitialized=false;this.attachEvent("propertyChanged",this._onPropertyChanged,this);this.attachEvent("aggregationChanged",this._onAggregationChanged,this)};S.prototype.exit=function(){var e=this._getMenu(),t=e&&e.getPopup(),i=this._getDialog();if(this._navContainerId){this._navContainerId=null}if(this._bIsInitialized){this._bIsInitialized=null}if(t){t.detachClosed(this._menuClosed,this);e.detachBeforeClose(this._handleVisualParentClose,this)}if(i){i.detachBeforeClose(this._handleVisualParentClose,this)}};S.prototype.invalidate=function(){};S.prototype.setTitle=function(e){var t=this._getNavContainer();this.setProperty("title",e,true);if(t&&t.getPages().length){t.getPages()[0].setTitle(e)}return this};S.prototype.openBy=function(e,t,i,n,s){if(d.system.phone){this._openDialog()}else{if(!this._bIsInitialized){this._initAllMenuItems();this._bIsInitialized=true}if(!i){i=y.BeginTop}if(!n){n=y.BeginBottom}if(!s){s="0 -2"}this._getMenu().open(t,e,i,n,e,s)}};S.prototype.close=function(){if(d.system.phone){this._getDialog()&&this._getDialog().close()}else{this._getVisualParent()&&this._getVisualParent().close()}};S.prototype.isOpen=function(){if(d.system.phone){return this._getDialog()&&this._getDialog().isOpen()}else{return this._getVisualParent()&&this._getVisualParent().isOpen()}};S.prototype._initDialog=function(){var e=new s({showHeader:false,stretch:true,content:this._initNavContainer(),buttons:[this._initCloseButton()]});e.addStyleClass("sapMRespMenuDialog");e.addStyleClass("sapUiNoContentPadding");this.setAggregation("_dialog",e,true);e.attachAfterClose(this._menuClosed,this);e.attachBeforeClose(this._handleVisualParentClose,this)};S.prototype._getDialog=function(){return this.getAggregation("_dialog")};S.prototype._openDialog=function(){if(!this._bIsInitialized){this._initAllPages();this._bIsInitialized=true}this._getNavContainer().to(this._getNavContainer().getPages()[0]);this._getDialog().open()};S.prototype._initAllMenuItems=function(){this._initMenuForItems(this.getItems())};S.prototype._setCustomEnhanceAccStateFunction=function(e){this._fnEnhanceUnifiedMenuAccState=e};S.prototype._initMenuForItems=function(e,t){var i=new p;i.attachBeforeClose(this._handleVisualParentClose,this);i._setCustomEnhanceAccStateFunction(this._fnEnhanceUnifiedMenuAccState);i.isCozy=this._isMenuCozy.bind(this,i);this.addStyleClass("sapMMenu");i.aCustomStyleClasses=this.aCustomStyleClasses;i.mCustomStyleClassMap=this.mCustomStyleClassMap;e.forEach(function(e){if(this._isMenuItemGroup(e)){this._addVisualMenuItemGroupFromItemsGroup(e,i)}else{this._addVisualMenuItemFromItem(e,i)}}.bind(this));if(t){t.setSubmenu(i)}else{i.getPopup().attachClosed(this._menuClosed,this);this.setAggregation("_menu",i,true)}i.attachItemSelect(this._handleMenuItemSelect,this)};S.prototype._handleVisualParentClose=function(e){if(!this.fireBeforeClose()){e.preventDefault()}};S.prototype._menuClosed=function(){this.fireClosed()};S.prototype._getMenu=function(){return this.getAggregation("_menu")};S.prototype._initCloseButton=function(){var e=g.getResourceBundleFor("sap.m");return new n({text:e.getText("MENU_CLOSE"),press:P.bind(this)})};function P(){this._getDialog().close()}S.prototype._initNavContainer=function(){var e=new o;this._navContainerId=e.getId();return e};S.prototype._getNavContainer=function(){return c.getElementById(this._navContainerId)};S.prototype._initAllPages=function(){this._initPageForParent(this)};S.prototype._initPageForParent=function(e){var t=e.getItems(),i=e instanceof S,n=i?e.getTitle():e.getText(),s=new a({mode:v.None}),o=new r({title:n,showNavButton:!i,content:s});if(!i){this._setBackButtonTooltipForPageWithParent(e,o)}o.attachNavButtonPress(function(){this._getNavContainer().back()},this);this._getNavContainer().addPage(o);t.forEach(function(e){this._addListItemFromItem(e,o)},this);this._updateListInset(s);s.attachEvent("itemPress",this._handleListItemPress,this);return o};S.prototype._handleListItemPress=function(e){var t=e.getParameter("listItem"),i=c.getElementById(t.getMenuItem()),n=i._getItems().length?i._getVisualChild():null,s=!t.getProperty("selected");if(n){this._getNavContainer().to(n)}else{this._getDialog().close();if(t._getItemSelectionMode()!==M.None){t.setSelected(s);i.setSelected(s)}this.fireItemSelected({item:i})}i.firePress()};S.prototype._setBackButtonTooltipForPageWithParent=function(e,t){var i=e.getParent(),n=g.getResourceBundleFor("sap.m"),s;s=i instanceof S?i.getTitle():i.getText();s=n.getText("MENU_PAGE_BACK_BUTTON")+" "+s;t.setNavButtonTooltip(s)};S.prototype._isMenuItemGroup=function(e){return!!e.getItemSelectionMode};S.prototype._createMenuListItemFromItem=function(e){var t=this._generateListItemId(e.getId()),i=c.getElementById(t),n=c.getElementById(e.getAssociation("_group"));if(i){return i}i=new l({id:t,type:e.getEnabled()?C.Active:C.Inactive,icon:e.getIcon(),title:this._handleSettingsValue(e.getText()),selected:e.getSelected(),startsSection:e.getStartsSection(),menuItem:e,tooltip:this._handleSettingsValue(e.getTooltip()),visible:e.getVisible(),enabled:e.getEnabled()});i.setAssociation("_group",n);e.aDelegates.forEach(function(e){i.addEventDelegate(e.oDelegate,e.vThis)});return i};S.prototype._createVisualMenuItemFromItem=function(e){var t=this._generateUnifiedMenuItemId(e.getId()),i=c.getElementById(t),n=e.getCustomData(),s=e.getEndContent();if(i){return i}i=new m({id:t,icon:e.getIcon(),text:this._handleSettingsValue(e.getText()),selected:e.getSelected(),shortcutText:this._handleSettingsValue(e.getShortcutText()),startsSection:e.getStartsSection(),tooltip:this._handleSettingsValue(e.getTooltip()),visible:e.getVisible(),enabled:e.getEnabled()});for(var o=0;o<n.length;o++){e._addCustomData(i,n[o])}s.forEach(t=>{e._addEndContent(i,t)});e.aDelegates.forEach(function(e){i.addEventDelegate(e.oDelegate,e.vThis)});return i};S.prototype._addVisualMenuItemFromItem=function(e,t,i){var n=this._createVisualMenuItemFromItem(e),s=this._isMenuItemGroup(t)?t.getParent():t,o=e.getItems(),a;e._setVisualParent(s);e._setVisualControl(n);if(o.length){a=o[0];if(this._isMenuItemGroup(a)){var r=a.getItems();a=r.length?r[0]:null}this._initMenuForItems(o,n);a&&e._setVisualChild(a._getVisualParent())}i===undefined?t.addItem(n):t.insertItem(n,i)};S.prototype._createVisualMenuItemGroupFromItemsGroup=function(e){var t=this._generateUnifiedMenuItemId(e.getId()),i=c.getElementById(t),n=e.getCustomData();if(i){return i}i=new h({id:t,itemSelectionMode:e.getItemSelectionMode()});e._setVisualControl(i);e._setParentMenu(this);for(var s=0;s<n.length;s++){e._addCustomData(i,n[s])}return i};S.prototype._addVisualMenuItemGroupFromItemsGroup=function(e,t,i){var n=this._createVisualMenuItemGroupFromItemsGroup(e),s=e.getItems();i===undefined?t.addItem(n):t.insertItem(n,i);for(var o=0;o<s.length;o++){this._addVisualMenuItemFromItem(s[o],n)}};S.prototype._addListItemFromItem=function(e,t,i){var n=e.getItems(),s=this._isMenuItemGroup(e),o;if(s){e._setParentMenu(this);e.getItems().forEach(e=>{this._addListItemFromItem(e,t,i);if(i!==undefined){i++}});return}var a=this._createMenuListItemFromItem(e),r=t.getContent()[0];e._setVisualParent(t);e._setVisualControl(a);if(n.length){this._initPageForParent(e);o=n[0];if(this._isMenuItemGroup(o)){n=o.getItems();o=n.length?n[0]:null}if(o){e._setVisualChild(o._getVisualParent())}}if(i===undefined){r.addItem(a)}else{r.insertItem(a,i)}r.invalidate()};S.prototype._connectVisualItem=function(e,t,i){if(!t||c.getElementById(e._getVisualControl())&&t.indexOfItem(e)!==-1){return}if(d.system.phone){this._addListItemFromItem(e,t,i);var n=t.getContent()[0];this._updateListInset(n)}else{this._addVisualMenuItemFromItem(e,t,i)}};S.prototype._updateListInset=function(e){var t=false,i="sapMListIcons",n=e.getItems();for(var s=0;s<n.length;s++){if(n[s].getIcon()){t=true;break}}if(t){e.addStyleClass(i)}else{e.removeStyleClass(i)}};S.prototype._getItems=function(){var e=[];const t=i=>{i.forEach(i=>{if(!this._isMenuItemGroup(i)){e.push(i)}else{t(i.getItems())}})};t(this.getItems());return e};S.prototype._handleMenuItemSelect=function(e){var t=e.getParameter("item"),i;if(!t){return}i=this._findMenuItemByUnfdMenuItem(t);i.setSelected(t.getSelected());if(i&&!i._getItems().length){this.fireItemSelected({item:i})}if(i){i.firePress()}};S.prototype._generateListItemId=function(e){return e+S.LIST_ITEMS_ID_SUFFIX};S.prototype._generateUnifiedMenuItemId=function(e){return e+S.UNIFIED_MENU_ITEMS_ID_SUFFIX};S.prototype._findMenuItemByUnfdMenuItem=function(e){var t=e.getId().slice(0,-S.UNIFIED_MENU_ITEMS_ID_SUFFIX.length);return c.getElementById(t)};S.prototype._isMenuCozy=function(e){if(!e.bCozySupported){return false}if(e.hasStyleClass("sapUiSizeCozy")){return true}if(V(e.oOpenerRef)){return true}return false};function V(e){if(!e){return false}e=e.$?e.$():jQuery(e);var t=e.closest(".sapUiSizeCompact,.sapUiSizeCondensed,.sapUiSizeCozy");return!t.hasClass("sapUiSizeCompact")&&!t.hasClass("sapUiSizeCondensed")||t.hasClass("sapUiSizeCozy")}S.prototype.addAggregation=function(e,t,n){i.prototype.addAggregation.apply(this,arguments);if(e==="items"){this._connectVisualItem(t,this._getVisualParent())}return this};S.prototype.insertAggregation=function(e,t,n,s){i.prototype.insertAggregation.apply(this,arguments);if(e==="items"){this._connectVisualItem(t,this._getVisualParent(),n)}return this};S.prototype.removeAggregation=function(e,t,n){var s=i.prototype.removeAggregation.apply(this,arguments);if(e==="items"){this._removeVisualItem(s)}return s};S.prototype.removeAllAggregation=function(e,t){var n=i.prototype.removeAllAggregation.apply(this,arguments);if(e==="items"){for(var s=0;s<n.length;s++){this._removeVisualItem(n[s])}}return n};S.prototype._removeVisualItem=function(e,t){var i=c.getElementById(e._getVisualControl()),n;if(i){n=i.getParent();n.removeItem(i);if(d.system.phone){this._removeSubPageForItem(e);if(n.getItems().length===0){if(t){t._setVisualChild(null);c.getElementById(t._getVisualControl()).invalidate()}}if(n){n.invalidate()}}}};S.prototype.destroyAggregation=function(e,t){if(e==="items"){for(var n=0;n<this.getItems().length;n++){this._removeVisualItem(this.getItems()[n])}}return i.prototype.destroyAggregation.apply(this,arguments)};S.prototype._removeSubPageForItem=function(e,t){var i;if(!t){for(var n=0;n<e.getItems().length;n++){this._removeSubPageForItem(e.getItems()[n])}}if(e._getVisualChild()){i=c.getElementById(e._getVisualChild());if(this._getNavContainer()&&i){this._getNavContainer().removePage(i)}!!i&&i.destroy()}};S.prototype._getVisualParent=function(){var e=this._getNavContainer(),t=this._getMenu();if(e&&e.getPages().length){return e.getPages()[0]}else{return t}};S.prototype._onPropertyChanged=function(e){e.cancelBubble();var t=e.getParameter("propertyKey"),i=e.getParameter("propertyValue"),n=d.system.phone?S.MENU_LIST_ITEMS_PROPS:S.UNFIFIED_MENU_ITEMS_PROPS,s=d.system.phone?this._generateListItemId:this._generateUnifiedMenuItemId,o,a;if(d.system.phone&&t==="text"){t="title"}if(!n[t]){return}o=s(e.getSource().getId());a=c.getElementById(o);if(a){a.setProperty(t,i);if(d.system.phone&&this._getDialog().isOpen()){this._getDialog().close()}}};S.prototype._onAggregationChanged=function(e){e.cancelBubble();var t=e.getParameter("aggregationName");switch(t){case"items":this._onItemsAggregationChanged(e);break;case"tooltip":this._onTooltipAggregationChanged(e);break;default:}};S.prototype._onTooltipAggregationChanged=function(e){var t=e.getSource()._getVisualControl(),i=e.getParameter("methodName"),n=e.getParameter("methodParams"),s;if(!t){return}s=c.getElementById(t);if(i==="set"){s.setTooltip(n.item)}if(i==="destroy"){s.destroyTooltip()}};S.prototype._onItemsAggregationChanged=function(e){var t=e.getSource(),i=e.getParameter("methodName"),n=e.getParameter("methodParams"),s;if(i==="add"||i==="insert"){if(i==="insert"){s=n.index}this._addOrInsertItem(t,n.item,s)}if(i==="remove"){this._removeVisualItem(n.item,t)}if(i==="removeall"){for(var o=0;o<n.items.length;o++){this._removeVisualItem(n.items[o],t)}}if(i==="destroy"){this._destroyItem(t)}};S.prototype._addOrInsertItem=function(e,t,i){var n;if(e._getVisualChild()){this._connectVisualItem(t,c.getElementById(e._getVisualChild()),i)}else{if(d.system.phone){this._initPageForParent(e);e._setVisualChild(e.getItems()[0]._getVisualParent());n=c.getElementById(e._getVisualControl());n&&n.invalidate()}else{this._initMenuForItems(e.getItems(),c.getElementById(e._getVisualControl()));e._setVisualChild(e._getItems()[0]._getVisualParent())}}};S.prototype._destroyItem=function(e){var t=c.getElementById(e._getVisualControl());if(t&&t.setMenuItem){t.setMenuItem(null)}this._removeSubPageForItem(e,true);e._setVisualChild(null);if(t&&t.setMenuItem){t.invalidate();t.setMenuItem(e)}};S.prototype.getDomRefId=function(){if(d.system.phone){return this._getDialog().getId()}else{return this._getMenu().getId()}};S.prototype.openAsContextMenu=function(e,t){if(d.system.phone){this._openDialog()}else{if(!this._bIsInitialized){this._initAllMenuItems();this._bIsInitialized=true}this._getMenu().openAsContextMenu(e,t)}};["addStyleClass","removeStyleClass","toggleStyleClass"].forEach(function(e){S.prototype[e]=function(t,n){var s=this._getDialog();i.prototype[e].apply(this,arguments);if(s){s[e].apply(s,arguments)}return this}});S.prototype.getSelectedItems=function(){return this._getItems().filter(e=>e.getSelected&&e.getSelected()&&e._getItemSelectionMode()!==M.None)};S.prototype._handleSettingsValue=function(e){if(typeof e!=="string"){return e}try{f.bindingParser(e);return e}catch{return f.escapeSettingsValue(e)}};return S});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MenuItem", ["./library","sap/ui/core/library","sap/ui/core/Element","sap/ui/core/Item","sap/ui/base/ManagedObjectObserver"],function(e,t,n,o,r){"use strict";var s=t.ItemSelectionMode;var a=o.extend("sap.m.MenuItem",{metadata:{interfaces:["sap.m.IMenuItem"],library:"sap.m",properties:{icon:{type:"string",group:"Appearance",defaultValue:null},visible:{type:"boolean",group:"Appearance",defaultValue:true},selected:{type:"boolean",group:"Behavior",defaultValue:false},shortcutText:{type:"string",group:"Appearance",defaultValue:""},startsSection:{type:"boolean",group:"Behavior",defaultValue:false}},defaultAggregation:"items",aggregations:{items:{type:"sap.m.IMenuItem",multiple:true,singularName:"item",bindable:"bindable"},endContent:{type:"sap.ui.core.Control",multiple:true}},associations:{_group:{type:"sap.ui.unified.MenuItemGroup",group:"Behavior",visibility:"hidden"}},events:{press:{},propertyChanged:{parameters:{propertyKey:{type:"string"},propertyValue:{type:"any"}}},aggregationChanged:{parameters:{aggregationName:{type:"string"},methodName:{type:"string"},methodParams:{type:"object"}}}}}});a.UNIFIED_MENU_ITEMS_ID_SUFFIX="-unifiedmenu";a.prototype.exit=function(){if(this._sVisualChild){this._sVisualChild=null}if(this._sVisualParent){this._sVisualParent=null}if(this._sVisualControl){this._sVisualControl=null}};a.prototype.setProperty=function(e,t){o.prototype.setProperty.apply(this,arguments);this.fireEvent("propertyChanged",{propertyKey:e,propertyValue:t},false,true)};a.prototype.setAggregation=function(e,t,n){o.prototype.setAggregation.apply(this,arguments);this.fireEvent("aggregationChanged",{aggregationName:e,methodName:"set",methodParams:{item:t}},false,true);return this};a.prototype.addAggregation=function(e,t,r){var s=this._getVisualControl(),a;o.prototype.addAggregation.apply(this,arguments);if(e==="customData"&&s){a=n.getElementById(s);this._addCustomData(a,t)}else if(e==="endContent"&&s){a=n.getElementById(s);this._addEndContent(a,t)}this.fireEvent("aggregationChanged",{aggregationName:e,methodName:"add",methodParams:{item:t}},false,true);return this};a.prototype.insertAggregation=function(e,t,r,s){var i=this._getVisualControl(),u;o.prototype.insertAggregation.apply(this,arguments);if(e==="customData"&&i){u=n.getElementById(i);u.insertCustomData(t.clone(a.UNIFIED_MENU_ITEMS_ID_SUFFIX),r);this._observeCustomDataChanges(t)}else if(e==="endContent"&&i){u=n.getElementById(i);u.insertEndContent(t.clone(a.UNIFIED_MENU_ITEMS_ID_SUFFIX),r);this._observeEndContentChanges(t)}this.fireEvent("aggregationChanged",{aggregationName:e,methodName:"insert",methodParams:{item:t,index:r}},false,true);return this};a.prototype.removeAggregation=function(e,t,n){var r=o.prototype.removeAggregation.apply(this,arguments);if(e==="customData"){if(this.getCustomData().length===1){this._disconnectAndDestroyCustomDataObserver()}else if(t&&this._oCustomDataObserver){this._oCustomDataObserver.unobserve(t,{properties:["value"]})}}else if(e==="endContent"){if(this.getEndContent().length===1){this._disconnectAndDestroyEndContentObserver()}else if(t&&this._oEndContentObserver){if(!this.getEndContent().length){this._oEndContentObserver.unobserve(t,{aggregations:["endContent"]})}}}this.fireEvent("aggregationChanged",{aggregationName:e,methodName:"remove",methodParams:{item:r}},false,true);return r};a.prototype.removeAllAggregation=function(e,t){var n=o.prototype.removeAllAggregation.apply(this,arguments);if(e==="customData"){this._disconnectAndDestroyCustomDataObserver()}else if(e==="endContent"){this._disconnectAndDestroyEndContentObserver()}this.fireEvent("aggregationChanged",{aggregationName:e,methodName:"removeall",methodParams:{items:n}},false,true);return n};a.prototype.destroyAggregation=function(e,t){if(e==="customData"){this._disconnectAndDestroyCustomDataObserver()}else if(e==="endContent"){this._disconnectAndDestroyEndContentObserver()}this.fireEvent("aggregationChanged",{aggregationName:e,methodName:"destroy"},false,true);return o.prototype.destroyAggregation.apply(this,arguments)};a.prototype.destroy=function(){var e=n.getElementById(this._getVisualControl());if(e){e.destroy()}return o.prototype.destroy.apply(this,arguments)};a.prototype.addEventDelegate=function(e,t){o.prototype.addEventDelegate.apply(this,arguments);if(this._getVisualControl()){var r=n.getElementById(this._getVisualControl());r.addEventDelegate(e,t)}return this};a.prototype.removeEventDelegate=function(e){o.prototype.removeEventDelegate.apply(this,arguments);if(this._getVisualControl()){var t=n.getElementById(this._getVisualControl());t.removeEventDelegate(e)}return this};a.prototype.setSelected=function(e){var t=n.getElementById(this.getAssociation("_group"));if(e&&t&&t.getItemSelectionMode()===s.SingleSelect){t._clearSelectedItems()}this.setProperty("selected",e);return this};a.prototype._addCustomData=function(e,t){e.addCustomData(t.clone(a.UNIFIED_MENU_ITEMS_ID_SUFFIX,undefined,{bCloneChildren:false,bCloneBindings:true}));this._observeCustomDataChanges(t)};a.prototype._addEndContent=function(e,t){e.addEndContent(t.clone(a.UNIFIED_MENU_ITEMS_ID_SUFFIX,undefined,{bCloneChildren:false,bCloneBindings:true}));this._observeEndContentChanges(t)};a.prototype._observeCustomDataChanges=function(e){this._getCustomDataObserver().observe(e,{properties:["value"]})};a.prototype._observeEndContentChanges=function(e){this._getEndContentObserver().observe(e,{properties:true})};a.prototype._customDataObserverCallbackFunction=function(e){n.getElementById(e.object.getId()+"-"+a.UNIFIED_MENU_ITEMS_ID_SUFFIX).setValue(e.current)};a.prototype._endContentObserverCallbackFunction=function(e){n.getElementById(e.object.getId()+"-"+a.UNIFIED_MENU_ITEMS_ID_SUFFIX).setProperty(e.name,e.current)};a.prototype._getCustomDataObserver=function(){if(!this._oCustomDataObserver){this._oCustomDataObserver=new r(this._customDataObserverCallbackFunction)}return this._oCustomDataObserver};a.prototype._getEndContentObserver=function(){if(!this._oEndContentObserver){this._oEndContentObserver=new r(this._endContentObserverCallbackFunction)}return this._oEndContentObserver};a.prototype._disconnectAndDestroyCustomDataObserver=function(){if(this._oCustomDataObserver){this._oCustomDataObserver.disconnect();this._oCustomDataObserver.destroy();this._oCustomDataObserver=null}};a.prototype._disconnectAndDestroyEndContentObserver=function(){if(this._oEndContentObserver){this._oEndContentObserver.disconnect();this._oEndContentObserver.destroy();this._oEndContentObserver=null}};a.prototype._setVisualChild=function(e){this._setInternalRef(e,"_sVisualChild")};a.prototype._setVisualParent=function(e){this._setInternalRef(e,"_sVisualParent")};a.prototype._setVisualControl=function(e){this._setInternalRef(e,"_sVisualControl")};a.prototype._setInternalRef=function(e,t){if(!e||typeof e==="string"){this[t]=e}else if(e.getId){this[t]=e.getId()}};a.prototype._getVisualChild=function(){return this._sVisualChild};a.prototype._getVisualParent=function(){return this._sVisualParent};a.prototype._getVisualControl=function(){return this._sVisualControl};a.prototype._getItems=function(){var e=[];const t=n=>{n.forEach(n=>{if(!n.getItemSelectionMode){e.push(n)}else{t(n.getItems())}})};t(this.getItems());return e};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MenuListItem", ["./ListItemBase","./library","sap/ui/core/Element","sap/ui/core/IconPool","sap/ui/core/library","./MenuListItemRenderer","sap/m/Image"],function(e,t,i,r,o,n,a){"use strict";var s=o.TextDirection;var u=t.ListType;var p=o.ItemSelectionMode;var l=e.extend("sap.m.MenuListItem",{metadata:{library:"sap.m",properties:{enabled:{type:"boolean",group:"Misc",defaultValue:true},title:{type:"string",group:"Misc",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},iconDensityAware:{type:"boolean",group:"Misc",defaultValue:true},itemSelectionMode:{type:"sap.ui.core.ItemSelectionMode",group:"Behavior",defaultValue:p.None},titleTextDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:s.Inherit},startsSection:{type:"boolean",group:"Behavior",defaultValue:false}},associations:{_group:{type:"sap.ui.unified.MenuItemGroup",group:"Behavior",visibility:"hidden"},menuItem:{type:"sap.m.MenuItem",multiple:false}}},renderer:n});l.prototype.exit=function(){if(this._image){this._image.destroy()}if(this._imageRightArrow){this._imageRightArrow.destroy()}e.prototype.exit.apply(this,arguments)};l.prototype._getImage=function(e,t,i,o){var n=this._image;if(n){n.setSrc(i);if(n.isA("sap.m.Image")){n.setDensityAware(o)}}else{n=r.createControlByURI({id:e,src:i,densityAware:o,useIconTooltip:false},a).setParent(this,null,true)}if(n.isA("sap.m.Image")){n.addStyleClass(t,true)}else{n.addStyleClass(t+"Icon",true)}this._image=n;return this._image};l.prototype._getIconArrowRight=function(){if(!this._imageRightArrow){this._imageRightArrow=r.createControlByURI({id:this.getId()+"-arrowRight",src:"sap-icon://slim-arrow-right",useIconTooltip:false},a).setParent(this,null,true);this._imageRightArrow.addStyleClass("sapMMenuLIArrowRightIcon",true)}return this._imageRightArrow};l.prototype._hasSubItems=function(){return!!(this.getMenuItem()&&i.getElementById(this.getMenuItem())._getItems().length)};l.prototype.setProperty=function(t,i){e.prototype.setProperty.apply(this,arguments);this.fireEvent("propertyChanged",{propertyKey:t,propertyValue:i});if(t==="enabled"){this.setType(i?u.Active:u.Inactive)}};l.prototype._getMenuItemGroup=function(){return i.getElementById(this.getAssociation("_group"))};l.prototype._getItemSelectionMode=function(){var e=this._getMenuItemGroup();return e?e.getItemSelectionMode():p.None};l.prototype._hasGroupSeparator=function(){var e=i.getElementById(this.getMenuItem()),t=e&&e.getParent(),r,o;if(!t){return false}if(t.getItemSelectionMode){t=t.getParent()}r=t._getItems();o=r.indexOf(e);return o>0&&r[o-1]&&r[o-1].getAssociation("_group")!==e.getAssociation("_group")};l.prototype._hasEndContent=function(){var e=i.getElementById(this.getMenuItem());return!!e?.getEndContent().length};l.prototype._getEndContent=function(){var e=i.getElementById(this.getMenuItem());return e?.getEndContent()};return l});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MenuListItemRenderer", ["./ListItemBaseRenderer","sap/ui/core/Renderer","sap/m/library","sap/ui/core/library"],function(e,t,n,i){"use strict";var o=i.TextDirection;var s=n.ListType;var a=i.ItemSelectionMode;var r=t.extend(e);r.apiVersion=2;r.renderSeparator=function(e,t){e.openStart("li");e.attr("role","separator");e.class("sapUiMnuDiv");e.openEnd();e.openStart("div");e.class("sapUiMnuDivL");e.openEnd();e.close("div");e.voidStart("hr").voidEnd();e.openStart("div");e.class("sapUiMnuDivR");e.openEnd();e.close("div");e.close("li")};r.renderLIAttributes=function(e,t){e.class("sapMSLI");if(t.getIcon()){e.class("sapMSLIIcon")}if(t.getType()==s.Detail||t.getType()==s.DetailAndActive){e.class("sapMSLIDetail")}if(t._hasSubItems()){e.class("sapMMenuLIHasChildren")}if(!t.getEnabled()){e.class("sapMMLIDisabled")}};r.renderLIContent=function(e,t){var n=t.getTitleTextDirection();if(t.getStartsSection()||t._hasGroupSeparator()){r.renderSeparator(e,t)}e.openStart("div");e.class("sapMMenuLIImgThumbWrapper");e.openEnd();if(t.getIcon()){e.renderControl(t._getImage(t.getId()+"-img","sapMMenuLIImgThumb",t.getIcon(),t.getIconDensityAware()))}e.close("div");e.openStart("div");e.class("sapMSLIDiv");e.class("sapMSLITitleDiv");e.openEnd();if(t._bNoFlex){e.openStart("div");e.class("sapMLIBNoFlex");e.openEnd()}e.openStart("div");e.class("sapMSLITitleOnly");if(n!==o.Inherit){e.attr("dir",n.toLowerCase())}e.openEnd();e.text(t.getTitle());e.close("div");if(t._bNoFlex){e.close("div")}e.close("div");if(t._hasSubItems()){e.renderControl(t._getIconArrowRight())}else if(t._getItemSelectionMode()!==a.None&&t.getProperty("selected")||t._hasEndContent()){if(t._getItemSelectionMode()!==a.None&&t.getProperty("selected")){e.openStart("div",t.getId()+"-sel");e.class("sapMMenuLISel");e.openEnd();e.close("div")}if(t?._getEndContent().length){e.openStart("div",t.getId()+"-endContent");e.class("sapUiMnuEndContent");e.openEnd();t._getEndContent().forEach(t=>e.renderControl(t));e.close("div")}}};r.getAccessibilityState=function(t){var n=e.getAccessibilityState(t),i;if(t._getItemSelectionMode()!==a.None&&t.getProperty("selected")){n.checked=true;n.selected=null}switch(t._getItemSelectionMode()){case a.SingleSelect:i="menuitemradio";break;case a.MultiSelect:i="menuitemcheckbox";break;default:i="menuitem"}n.role=i;return n};r.getAriaRole=function(e){};return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/TableSelectDialog", ["./Button","./Dialog","./SearchField","./Table","./library","sap/ui/core/Lib","sap/ui/core/library","./SelectDialogBase","sap/ui/core/InvisibleText","sap/ui/core/InvisibleMessage","sap/ui/core/StaticArea","sap/ui/Device","sap/m/Toolbar","sap/m/Text","sap/m/BusyIndicator","sap/m/Bar","sap/m/Title","sap/base/Log","sap/ui/core/Element"],function(e,t,i,o,s,a,n,l,r,h,u,d,c,g,p,_,f,y,b){"use strict";var S=s.ListMode;var m=s.ButtonType;var T=s.TitleAlignment;var C=n.InvisibleMessageMode;var I=n.TitleLevel;var B=l.extend("sap.m.TableSelectDialog",{metadata:{library:"sap.m",properties:{title:{type:"string",group:"Appearance",defaultValue:null},noDataText:{type:"string",group:"Appearance",defaultValue:null},multiSelect:{type:"boolean",group:"Dimension",defaultValue:false},growing:{type:"boolean",group:"Behavior",defaultValue:true},growingThreshold:{type:"int",group:"Misc",defaultValue:null},contentWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},rememberSelections:{type:"boolean",group:"Behavior",defaultValue:false},contentHeight:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},showClearButton:{type:"boolean",group:"Behavior",defaultValue:false},confirmButtonText:{type:"string",group:"Appearance"},draggable:{type:"boolean",group:"Behavior",defaultValue:false},resizable:{type:"boolean",group:"Behavior",defaultValue:false},titleAlignment:{type:"sap.m.TitleAlignment",group:"Misc",defaultValue:T.Auto},searchPlaceholder:{type:"string",group:"Appearance"}},defaultAggregation:"items",aggregations:{items:{type:"sap.m.ColumnListItem",multiple:true,singularName:"item",bindable:"bindable",forwarding:{idSuffix:"-table",aggregation:"items",forwardBinding:true}},_dialog:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},columns:{type:"sap.m.Column",multiple:true,singularName:"column",bindable:"bindable",forwarding:{idSuffix:"-table",aggregation:"columns",forwardBinding:true}}},events:{confirm:{parameters:{selectedItem:{type:"sap.m.StandardListItem"},selectedItems:{type:"sap.m.StandardListItem[]"},selectedContexts:{type:"object[]"}}},search:{parameters:{value:{type:"string"},itemsBinding:{type:"any"},clearButtonPressed:{type:"boolean"}}},liveChange:{parameters:{value:{type:"string"},itemsBinding:{type:"any"}}},cancel:{}}},renderer:{apiVersion:2,render:function(){}}});B.prototype.init=function(){var e=this,n=0;this._bAppendedToUIArea=false;this._bInitBusy=false;this._bFirstRender=true;this._oRb=a.getResourceBundleFor("sap.m");this._bAfterCloseAttached=false;this._oItemDelegate={ontap:this._tableColumnsEventDelegates.bind(this),onsapselect:this._tableColumnsEventDelegates.bind(this)};this._oTable=new o(this.getId()+"-table",{growing:e.getGrowing(),growingScrollToLoad:e.getGrowing(),mode:S.SingleSelectMaster,modeAnimationOn:false,sticky:[s.Sticky.InfoToolbar,s.Sticky.ColumnHeaders],infoToolbar:new c({visible:false,active:false,content:[new g({text:this._oRb.getText("TABLESELECTDIALOG_SELECTEDITEMS",[0])})]}),ariaLabelledBy:l.getInvisibleText(),selectionChange:this._selectionChange.bind(this),updateStarted:this._updateStarted.bind(this),updateFinished:this._updateFinished.bind(this),popinChanged:function(e){if(e.getParameter("hasPopin")){this._oTable.getItems().forEach(function(e){e._oPopin?.addEventDelegate(this._oItemDelegate)},this)}}.bind(this)});this._table=this._oTable;this._oBusyIndicator=new p(this.getId()+"-busyIndicator").addStyleClass("sapMTableSelectDialogBusyIndicator",true);this._oSearchField=new i(this.getId()+"-searchField",{width:"100%",ariaLabelledBy:r.getStaticId("sap.m","SELECTDIALOG_SEARCH"),liveChange:function(t){var i=t.getSource().getValue(),o=i?300:0;clearTimeout(n);if(o){n=setTimeout(function(){e._executeSearch(i,false,"liveChange")},o)}else{e._executeSearch(i,false,"liveChange")}},search:function(t){var i=t.getSource().getValue(),o=t.getParameter("clearButtonPressed");e._executeSearch(i,o,"search")}});this._searchField=this._oSearchField;this._oSubHeader=new _(this.getId()+"-subHeader",{contentMiddle:[this._searchField]});var h=new _(this.getId()+"-dialog-header",{titleAlignment:this.getTitleAlignment(),contentMiddle:[new f(this.getId()+"-dialog-title",{level:I.H1})]});this._oDialog=new t(this.getId()+"-dialog",{customHeader:h,titleAlignment:this.getTitleAlignment(),stretch:d.system.phone,contentHeight:"2000px",subHeader:this._oSubHeader,content:[this._oBusyIndicator,this._oTable],endButton:this._getCancelButton(),draggable:this.getDraggable()&&d.system.desktop,resizable:this.getResizable()&&d.system.desktop,escapeHandler:function(t){e._onCancel();t.resolve()}}).addStyleClass("sapMTableSelectDialog");this._dialog=this._oDialog;this.setAggregation("_dialog",this._oDialog);this._sSearchFieldValue="";this._iTableUpdateRequested=0;this._oDialog.getProperty=function(e){if(e!=="title"){return l.prototype.getProperty.call(this,e)}return this.getCustomHeader().getAggregation("contentMiddle")[0].getText()}.bind(this._oDialog)};B.prototype.exit=function(){this._oTable=null;this._oSearchField=null;this._oSubHeader=null;this._oClearButton=null;this._oBusyIndicator=null;this._sSearchFieldValue=null;this._iTableUpdateRequested=null;this._bInitBusy=false;this._bFirstRender=false;if(this._bAppendedToUIArea){var e=u.getUIArea();e.removeContent(this,true)}if(this._oDialog){this._oDialog.destroy();this._oDialog=null}if(this._oOkButton){this._oOkButton.destroy();this._oOkButton=null}this._oSelectedItem=null;this._aSelectedItems=null;this._aInitiallySelectedItems=null;this._table=null;this._searchField=null;this._dialog=null};B.prototype.onAfterRendering=function(){if(this._bInitBusy&&this._bFirstRender){this._setBusy(true);this._bInitBusy=false;this._bFirstRender=false}};B.prototype.invalidate=function(){if(this._oDialog&&(!arguments[0]||arguments[0]&&arguments[0].getId()!==this.getId()+"-dialog")){this._oDialog.invalidate(arguments)}else{l.prototype.invalidate.apply(this,arguments)}return this};B.prototype.open=function(e){if(!this.getParent()&&!this._bAppendedToUIArea){var t=u.getUIArea();t.addContent(this,true);this._bAppendedToUIArea=true}this._oSearchField.setValue(e);this._sSearchFieldValue=e||"";this._oDialog.setInitialFocus(this._getInitialFocus());this._updateSelectionIndicator();this.updateDialogAriaDescribedBy();this._oDialog.open();if(this._bInitBusy){this._setBusy(true)}this._aInitiallySelectedItems=this._oTable.getSelectedItems();return this};B.prototype.setGrowing=function(e){this._oTable.setGrowing(e);this._oTable.setGrowingScrollToLoad(e);this.setProperty("growing",e,true);return this};B.prototype.setGrowingThreshold=function(e){this._oTable.setGrowingThreshold(e);this.setProperty("growingThreshold",e,true);return this};B.prototype.setDraggable=function(e){this._setInteractionProperty(e,"draggable",this._oDialog.setDraggable);return this};B.prototype.setResizable=function(e){this._setInteractionProperty(e,"resizable",this._oDialog.setResizable);return this};B.prototype._setInteractionProperty=function(e,t,i){this.setProperty(t,e,true);if(!d.system.desktop&&e){y.warning(t+" property works only on desktop devices!");return}if(d.system.desktop&&this._oDialog){i.call(this._oDialog,e)}};B.prototype.setBusy=function(e){this._oSearchField.setEnabled(!e);this._oDialog.setBusy.apply(this._oDialog,arguments);return this};B.prototype.getBusy=function(){return this._oDialog.getBusy.apply(this._oDialog,arguments)};B.prototype.setBusyIndicatorDelay=function(e){this._oTable.setBusyIndicatorDelay(e);this._oDialog.setBusyIndicatorDelay(e);this.setProperty("busyIndicatorDelay",e,true);return this};B.prototype.setMultiSelect=function(e){this.setProperty("multiSelect",e,true);if(e){this._oTable.setMode(S.MultiSelect);this._oTable.setIncludeItemInSelection(true);this._oDialog.setEndButton(this._getCancelButton());this._oDialog.setBeginButton(this._getOkButton())}else{this._oTable.setMode(S.SingleSelectMaster);this._oDialog.setEndButton(this._getCancelButton());this._oDialog.destroyBeginButton();delete this._oOkButton}return this};B.prototype.setTitle=function(e){this.setProperty("title",e,true);this._oDialog.getCustomHeader().getAggregation("contentMiddle")[0].setText(e);return this};B.prototype.setTitleAlignment=function(e){this.setProperty("titleAlignment",e);if(this._oDialog){this._oDialog.setTitleAlignment(e)}return this};B.prototype.setConfirmButtonText=function(e){this.setProperty("confirmButtonText",e,true);this._oOkButton&&this._oOkButton.setText(e||this._oRb.getText("SELECT_CONFIRM_BUTTON"));return this};B.prototype.setNoDataText=function(e){this._oTable.setNoDataText(e);return this};B.prototype.getNoDataText=function(){return this._oTable.getNoDataText()};B.prototype.setSearchPlaceholder=function(e){this.setProperty("searchPlaceholder",e);this._oSearchField.setPlaceholder(e);return this};B.prototype.getSearchPlaceholder=function(){return this._oSearchField.getPlaceholder()};B.prototype.getContentWidth=function(){return this._oDialog.getContentWidth()};B.prototype.setContentWidth=function(e){this._oDialog.setContentWidth(e);return this};B.prototype.getContentHeight=function(){return this._oDialog.getContentHeight()};B.prototype.setContentHeight=function(e){this._oDialog.setContentHeight(e);return this};B.prototype.addStyleClass=function(){this._oDialog.addStyleClass.apply(this._oDialog,arguments);return this};B.prototype.removeStyleClass=function(){this._oDialog.removeStyleClass.apply(this._oDialog,arguments);return this};B.prototype.toggleStyleClass=function(){this._oDialog.toggleStyleClass.apply(this._oDialog,arguments);return this};B.prototype.hasStyleClass=function(){return this._oDialog.hasStyleClass.apply(this._oDialog,arguments)};B.prototype.getDomRef=function(){if(this._oDialog){return this._oDialog.getDomRef.apply(this._oDialog,arguments)}else{return null}};B.prototype.setShowClearButton=function(e){this.setProperty("showClearButton",e,true);if(e){var t=this._oDialog.getCustomHeader();t.addContentRight(this._getClearButton());this._oClearButton.setVisible(e)}else if(this._oClearButton){this._oClearButton.setVisible(e)}return this};B.prototype.setModel=function(e,t){this._setBusy(false);this._bInitBusy=false;this._iTableUpdateRequested+=1;this._oTable.setModel(e,t);l.prototype.setModel.apply(this,arguments);this._updateSelectionIndicator();return this};B.prototype.setBindingContext=function(e,t){this._oTable.setBindingContext(e,t);l.prototype.setBindingContext.apply(this,arguments);return this};B.prototype._executeSearch=function(e,t,i){var o=this._oTable,s=o?o.getBinding("items"):undefined,a=this._sSearchFieldValue!==e;if(this._oDialog.isOpen()&&(a&&i==="liveChange"||i==="search")){this._sSearchFieldValue=e;if(s){this._iTableUpdateRequested+=1;if(i==="search"){this.fireSearch({value:e,itemsBinding:s,clearButtonPressed:t})}else if(i==="liveChange"){this.fireLiveChange({value:e,itemsBinding:s})}}else{if(i==="search"){this.fireSearch({value:e,clearButtonPressed:t})}else if(i==="liveChange"){this.fireLiveChange({value:e})}}}return this};B.prototype._resetAfterClose=function(){this._oSelectedItem=this._oTable.getSelectedItem();this._aSelectedItems=this._oTable.getSelectedItems();this._bAfterCloseAttached=false;this._fireConfirmAndUpdateSelection()};B.prototype._selectionChange=function(e){if(e.getParameters){this.fireSelectionChange(e.getParameters())}if(!this._oDialog){return}if(this.getMultiSelect()){this._updateSelectionIndicator();this._announceSelectionIndicator();return}if(!this._bAfterCloseAttached){this._oDialog.attachEventOnce("afterClose",this._resetAfterClose,this);this._bAfterCloseAttached=true}this._oDialog.close()};B.prototype._setBusy=function(e){if(this._iTableUpdateRequested){if(e){this._oSearchField.setEnabled(false);this._oTable.addStyleClass("sapMSelectDialogListHide");this._oBusyIndicator.$().css("display","inline-block")}else{this._oSearchField.setEnabled(true);this._oTable.removeStyleClass("sapMSelectDialogListHide");this._oBusyIndicator.$().css("display","none")}}};B.prototype._updateStarted=function(e){this.fireUpdateStarted(e.getParameters());if(this.getModel()&&this.getModel().isA("sap.ui.model.odata.ODataModel")){if(this._oDialog.isOpen()&&this._iTableUpdateRequested){this._setBusy(true)}else{this._bInitBusy=true}}};B.prototype._updateFinished=function(e){this.fireUpdateFinished(e.getParameters());this._updateSelectionIndicator();if(this.getModel()&&this.getModel().isA("sap.ui.model.odata.ODataModel")){this._setBusy(false);this._bInitBusy=false}this._iTableUpdateRequested=0;this._oTable.getItems().forEach(function(e){e.addEventDelegate(this._oItemDelegate);e._oPopin?.addEventDelegate(this._oItemDelegate)},this)};B.prototype._getOkButton=function(){var t=this,i=null;i=function(){t._sSearchFieldValue=null;t._oSelectedItem=t._oTable.getSelectedItem();t._aSelectedItems=t._oTable.getSelectedItems();t._oDialog.detachAfterClose(i);t._fireConfirmAndUpdateSelection()};if(!this._oOkButton){this._oOkButton=new e(this.getId()+"-ok",{type:m.Emphasized,text:this.getConfirmButtonText()||this._oRb.getText("SELECT_CONFIRM_BUTTON"),press:function(){t._oDialog.attachAfterClose(i);t._oDialog.close()}})}return this._oOkButton};B.prototype._getCancelButton=function(){var t=this;if(!this._oCancelButton){this._oCancelButton=new e(this.getId()+"-cancel",{text:this._oRb.getText("MSGBOX_CANCEL"),press:function(){t._onCancel()}})}return this._oCancelButton};B.prototype._getClearButton=function(){if(!this._oClearButton){this._oClearButton=new e(this.getId()+"-clear",{text:this._oRb.getText("TABLESELECTDIALOG_CLEARBUTTON"),press:function(){this._removeSelection();this._updateSelectionIndicator();this._getInitialFocus().focus()}.bind(this)})}return this._oClearButton};B.prototype._onCancel=function(e){var t=this,i=null;i=function(){t._oSelectedItem=null;t._aSelectedItems=[];t._sSearchFieldValue=null;t._oDialog.detachAfterClose(i);t.fireCancel()};t._resetSelection();this._oDialog.attachAfterClose(i);this._oDialog.close()};B.prototype._updateSelectionIndicator=function(){var e=this._oTable.getSelectedContextPaths(true).length,t=this._oTable.getInfoToolbar();if(this.getShowClearButton()&&this._oClearButton){this._oClearButton.setEnabled(e>0)}t.setVisible(!!e);t.getContent()[0].setText(this._oRb.getText("TABLESELECTDIALOG_SELECTEDITEMS",[e]));l.getSelectionIndicatorInvisibleText().setText(e>0?this._oRb.getText("TABLESELECTDIALOG_SELECTEDITEMS_SR",[e]):"")};B.prototype._announceSelectionIndicator=function(){const e=this._oTable.getSelectedContextPaths(true).length;if(e){h.getInstance().announce(this._oRb.getText("TABLESELECTDIALOG_SELECTEDITEMS_SR",[e]),C.Polite)}};B.prototype._fireConfirmAndUpdateSelection=function(){var e={selectedItem:this._oSelectedItem,selectedItems:this._aSelectedItems};Object.defineProperty(e,"selectedContexts",{get:this._oTable.getSelectedContexts.bind(this._oTable,true)});this.fireConfirm(e);this._updateSelection()};B.prototype._updateSelection=function(){if(!this.getRememberSelections()&&!this.bIsDestroyed){this._removeSelection()}};B.prototype._removeSelection=function(){this._oTable.removeSelections(true);delete this._oSelectedItem;delete this._aSelectedItems};B.prototype._resetSelection=function(){var e=0;if(!this.bIsDestroyed){var t=this._oTable.getBinding("items");if(t&&t.aFilters&&t.aFilters.length){t.filter([])}this._oTable.removeSelections();for(;e<this._aInitiallySelectedItems.length;e++){this._oTable.setSelectedItem(this._aInitiallySelectedItems[e])}}};B.prototype._tableColumnsEventDelegates=function(e){let t=e.target.closest(".sapMLIB"),i;if(!t){t=e.target.closest(".sapMListTblSubRow");const o=b.closestTo(t);i=o.getParent()}else{i=b.closestTo(t)}if(i._eventHandledByControl){return}if(e&&e.isDefaultPrevented&&e.isMarked&&(e.isDefaultPrevented()||e.isMarked("preventSelectionChange"))){return}if(e&&e.srcControl.isA("sap.m.GroupHeaderListItem")){return}this._selectionChange(e)};return B});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/GenericTile", ["sap/m/GenericTile","sap/m/GenericTileRenderer"],function(e,r){"use strict";var i=e.extend("sap.suite.ui.commons.GenericTile",{metadata:{deprecated:true,library:"sap.suite.ui.commons"},renderer:r});return i});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/HarveyBallMicroChart", ["sap/suite/ui/microchart/library","sap/suite/ui/microchart/HarveyBallMicroChart","sap/suite/ui/microchart/HarveyBallMicroChartRenderer"],function(r,a,e){"use strict";var i=a.extend("sap.suite.ui.commons.HarveyBallMicroChart",{metadata:{deprecated:true,library:"sap.suite.ui.commons"},renderer:e});return i});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/HarveyBallMicroChartItem", ["sap/suite/ui/microchart/HarveyBallMicroChartItem"],function(e){"use strict";var a=e.extend("sap.suite.ui.commons.HarveyBallMicroChartItem",{metadata:{deprecated:true,library:"sap.suite.ui.commons"}});return a});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/TileContent", ["sap/m/TileContent","sap/m/TileContentRenderer"],function(e,t){"use strict";var n=e.extend("sap.suite.ui.commons.TileContent",{metadata:{deprecated:true,library:"sap.suite.ui.commons"},renderer:t});return n});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/library", ["sap/ui/core/Core","sap/ui/core/Lib","sap/ui/core/library","sap/m/library"],function(e,o){"use strict";var i=o.init({name:"sap.suite.ui.commons",dependencies:["sap.ui.core","sap.m"],types:["sap.suite.ui.commons.BulletChartMode","sap.suite.ui.commons.CalculationBuilderComparisonOperatorType","sap.suite.ui.commons.CalculationBuilderFunctionType","sap.suite.ui.commons.CalculationBuilderItemType","sap.suite.ui.commons.CalculationBuilderLayoutType","sap.suite.ui.commons.CalculationBuilderLogicalOperatorType","sap.suite.ui.commons.CalculationBuilderOperatorType","sap.suite.ui.commons.CalculationBuilderValidationType","sap.suite.ui.commons.CommonBackground","sap.suite.ui.commons.ComparisonChartView","sap.suite.ui.commons.DeviationIndicator","sap.suite.ui.commons.FacetOverviewHeight","sap.suite.ui.commons.FrameType","sap.suite.ui.commons.HeaderContainerView","sap.suite.ui.commons.ImageEditorContainerMode","sap.suite.ui.commons.ImageEditorMode","sap.suite.ui.commons.ImageFormat","sap.suite.ui.commons.InfoTileSize","sap.suite.ui.commons.InfoTileTextColor","sap.suite.ui.commons.InfoTileValueColor","sap.suite.ui.commons.LoadState","sap.suite.ui.commons.MicroAreaChartView","sap.suite.ui.commons.MicroProcessFlowRenderType","sap.suite.ui.commons.networkgraph.ActionButtonPosition","sap.suite.ui.commons.networkgraph.BackgroundColor","sap.suite.ui.commons.networkgraph.ElementStatus","sap.suite.ui.commons.networkgraph.LayoutAlgorithmType","sap.suite.ui.commons.networkgraph.LayoutRenderType","sap.suite.ui.commons.networkgraph.LineArrowOrientation","sap.suite.ui.commons.networkgraph.LineArrowPosition","sap.suite.ui.commons.networkgraph.LineType","sap.suite.ui.commons.networkgraph.HeaderCheckboxState","sap.suite.ui.commons.networkgraph.NodePlacement","sap.suite.ui.commons.networkgraph.NodeShape","sap.suite.ui.commons.networkgraph.NodeSize","sap.suite.ui.commons.networkgraph.Orientation","sap.suite.ui.commons.networkgraph.RenderType","sap.suite.ui.commons.ProcessFlowConnectionLabelState","sap.suite.ui.commons.ProcessFlowConnectionState","sap.suite.ui.commons.ProcessFlowConnectionType","sap.suite.ui.commons.ProcessFlowDisplayState","sap.suite.ui.commons.ProcessFlowLaneState","sap.suite.ui.commons.ProcessFlowNodeState","sap.suite.ui.commons.ProcessFlowNodeType","sap.suite.ui.commons.ProcessFlowZoomLevel","sap.suite.ui.commons.SelectionState","sap.suite.ui.commons.statusindicator.FillingType","sap.suite.ui.commons.statusindicator.FillingDirectionType","sap.suite.ui.commons.taccount.TAccountPanelState","sap.suite.ui.commons.ThingGroupDesign","sap.suite.ui.commons.TimelineAlignment","sap.suite.ui.commons.TimelineAxisOrientation","sap.suite.ui.commons.TimelineFilterType","sap.suite.ui.commons.TimelineGroupType","sap.suite.ui.commons.TimelineScrollingFadeout","sap.suite.ui.commons.ValueStatus","sap.suite.ui.commons.SemanticColorType"],interfaces:[],controls:["sap.suite.ui.commons.BulletChart","sap.suite.ui.commons.BusinessCard","sap.suite.ui.commons.CalculationBuilder","sap.suite.ui.commons.CalculationBuilderExpression","sap.suite.ui.commons.CalculationBuilderFunction","sap.suite.ui.commons.CalculationBuilderInput","sap.suite.ui.commons.CalculationBuilderItem","sap.suite.ui.commons.CalculationBuilderVariable","sap.suite.ui.commons.ChartContainer","sap.suite.ui.commons.ChartContainerContent","sap.suite.ui.commons.ChartContainerToolbarPlaceholder","sap.suite.ui.commons.ChartTile","sap.suite.ui.commons.ColumnMicroChart","sap.suite.ui.commons.ComparisonChart","sap.suite.ui.commons.CloudFilePicker","sap.suite.ui.commons.DateRangeScroller","sap.suite.ui.commons.DateRangeSlider","sap.suite.ui.commons.DateRangeSliderInternal","sap.suite.ui.commons.DeltaMicroChart","sap.suite.ui.commons.DynamicContainer","sap.suite.ui.commons.FacetOverview","sap.suite.ui.commons.FeedItemHeader","sap.suite.ui.commons.FeedTile","sap.suite.ui.commons.GenericTile","sap.suite.ui.commons.GenericTile2X2","sap.suite.ui.commons.HarveyBallMicroChart","sap.suite.ui.commons.HeaderCell","sap.suite.ui.commons.HeaderContainer","sap.suite.ui.commons.imageeditor.ImageEditor","sap.suite.ui.commons.imageeditor.ImageEditorContainer","sap.suite.ui.commons.InfoTile","sap.suite.ui.commons.JamContent","sap.suite.ui.commons.KpiTile","sap.suite.ui.commons.LaunchTile","sap.suite.ui.commons.LinkActionSheet","sap.suite.ui.commons.MicroAreaChart","sap.suite.ui.commons.MonitoringContent","sap.suite.ui.commons.MonitoringTile","sap.suite.ui.commons.networkgraph.Graph","sap.suite.ui.commons.networkgraph.Node","sap.suite.ui.commons.NewsContent","sap.suite.ui.commons.NoteTaker","sap.suite.ui.commons.NoteTakerCard","sap.suite.ui.commons.NoteTakerFeeder","sap.suite.ui.commons.NumericContent","sap.suite.ui.commons.NumericTile","sap.suite.ui.commons.PictureZoomIn","sap.suite.ui.commons.ProcessFlow","sap.suite.ui.commons.ProcessFlowConnection","sap.suite.ui.commons.ProcessFlowConnectionLabel","sap.suite.ui.commons.ProcessFlowLaneHeader","sap.suite.ui.commons.ProcessFlowNode","sap.suite.ui.commons.RepeaterViewConfiguration","sap.suite.ui.commons.SplitButton","sap.suite.ui.commons.statusindicator.StatusIndicator","sap.suite.ui.commons.statusindicator.ShapeGroup","sap.suite.ui.commons.statusindicator.Shape","sap.suite.ui.commons.statusindicator.Rectangle","sap.suite.ui.commons.statusindicator.Circle","sap.suite.ui.commons.statusindicator.CustomShape","sap.suite.ui.commons.statusindicator.PropertyThreshold","sap.suite.ui.commons.statusindicator.DiscreteThreshold","sap.suite.ui.commons.statusindicator.LibraryShape","sap.suite.ui.commons.taccount.TAccount","sap.suite.ui.commons.TargetFilter","sap.suite.ui.commons.ThingCollection","sap.suite.ui.commons.ThreePanelThingInspector","sap.suite.ui.commons.ThreePanelThingViewer","sap.suite.ui.commons.TileContent","sap.suite.ui.commons.TileContent2X2","sap.suite.ui.commons.Timeline","sap.suite.ui.commons.TimelineFilterListItem","sap.suite.ui.commons.TimelineItem","sap.suite.ui.commons.UnifiedThingGroup","sap.suite.ui.commons.UnifiedThingInspector","sap.suite.ui.commons.VerticalNavigationBar","sap.suite.ui.commons.ViewRepeater"],elements:["sap.suite.ui.commons.BulletChartData","sap.suite.ui.commons.CalculationBuilderValidationResult","sap.suite.ui.commons.ColumnData","sap.suite.ui.commons.ColumnMicroChartLabel","sap.suite.ui.commons.ComparisonData","sap.suite.ui.commons.CountingNavigationItem","sap.suite.ui.commons.FeedItem","sap.suite.ui.commons.HarveyBallMicroChartItem","sap.suite.ui.commons.HeaderCellItem","sap.suite.ui.commons.imageeditor.CustomSizeItem","sap.suite.ui.commons.MicroAreaChartItem","sap.suite.ui.commons.MicroAreaChartLabel","sap.suite.ui.commons.MicroAreaChartPoint","sap.suite.ui.commons.TargetFilterColumn","sap.suite.ui.commons.TargetFilterMeasureColumn","sap.suite.ui.commons.AriaProperties"],version:"1.132.0",extensions:{flChangeHandlers:{"sap.suite.ui.commons.Timeline":"sap/suite/ui/commons/flexibility/Timeline"}}});i.BulletChartMode={Actual:"Actual",Delta:"Delta"};i.CommonBackground={Lightest:"Lightest",ExtraLight:"ExtraLight",Light:"Light",MediumLight:"MediumLight",Medium:"Medium",Dark:"Dark",ExtraDark:"ExtraDark",Darkest:"Darkest"};i.ComparisonChartView={Normal:"Normal",Wide:"Wide"};i.CalculationBuilderComparisonOperatorType={"<":"<",">":">","<=":"<=",">=":">=","=":"=","!=":"!="};i.CalculationBuilderFunctionType={ABS:"ABS",Round:"ROUND",RoundUp:"RoundUp",RoundDown:"RoundDown",Case:"CASE",SQRT:"SQRT",NDIV0:"NDIV0",NODIM:"NODIM",SUMCT:"SUMCT",SUMGT:"SUMGT",SUMRT:"SUMRT"};i.CalculationBuilderItemType={Operator:"Operator",CustomOperator:"CustomOperator",Variable:"Variable",Constant:"Constant",Literal:"Literal",Function:"Function",CustomFunction:"CustomFunction",Empty:"Empty",Error:"Error"};i.CalculationBuilderLogicalOperatorType={AND:"AND",OR:"OR",XOR:"XOR",NOT:"NOT"};i.CalculationBuilderLayoutType={Default:"Default",VisualTextualReadOnly:"VisualTextualReadOnly",VisualOnly:"VisualOnly",TextualOnly:"TextualOnly"};i.CalculationBuilderOperatorType={"+":"+","-":"-","/":"/","*":"*","(":"(",")":")",",":","};i.CalculationBuilderValidationMode={FocusOut:"FocusOut",LiveChange:"LiveChange"};i.DeviationIndicator={Up:"Up",Down:"Down",None:"None"};i.FacetOverviewHeight={XS:"XS",S:"S",M:"M",L:"L",XL:"XL",XXL:"XXL",Auto:"Auto",None:"None"};i.FrameType={OneByOne:"OneByOne",TwoByOne:"TwoByOne",TwoThirds:"TwoThirds",Auto:"Auto"};i.HeaderContainerView={Horizontal:"Horizontal",Vertical:"Vertical"};i.InfoTileSize={XS:"XS",S:"S",M:"M",L:"L",Auto:"Auto"};i.InfoTileTextColor={Positive:"Positive",Critical:"Critical",Negative:"Negative"};i.InfoTileValueColor={Neutral:"Neutral",Good:"Good",Critical:"Critical",Error:"Error"};i.LoadState={Loading:"Loading",Loaded:"Loaded",Failed:"Failed",Disabled:"Disabled"};i.MicroAreaChartView={Normal:"Normal",Wide:"Wide"};i.MicroProcessFlowRenderType={Wrap:"Wrap",NoWrap:"NoWrap",Scrolling:"Scrolling",ScrollingWithResizer:"ScrollingWithResizer"};i.networkgraph=i.networkgraph||{};i.networkgraph.BackgroundColor={Default:"Default",White:"White"};i.networkgraph.ActionButtonPosition={Left:"Left",Right:"Right"};i.networkgraph.NodeShape={Circle:"Circle",Box:"Box",Custom:"Custom"};i.networkgraph.LineType={Solid:"Solid",Dashed:"Dashed",Dotted:"Dotted"};i.networkgraph.NodePlacement={BrandesKoepf:"BrandesKoepf",LinearSegments:"LinearSegments",Simple:"Simple"};i.networkgraph.ElementStatus={Standard:"Standard",Success:"Success",Warning:"Warning",Error:"Error",Information:"Information"};i.networkgraph.Orientation={LeftRight:"LeftRight",RightLeft:"RightLeft",TopBottom:"TopBottom",BottomTop:"BottomTop"};i.networkgraph.RenderType={Html:"Html",Svg:"Svg"};i.networkgraph.LineArrowOrientation={ParentOf:"ParentOf",ChildOf:"ChildOf",None:"None",Both:"Both"};i.networkgraph.LineArrowPosition={Start:"Start",Middle:"Middle",End:"End"};i.networkgraph.LayoutRenderType={LayeredWithGroups:"LayeredWithGroups",SwimLanes:"SwimLanes",Forces:"Forces",TwoColumns:"TwoColumns"};i.networkgraph.HeaderCheckboxState={Hidden:"Hidden",Checked:"Checked",Unchecked:"Unchecked"};i.SemanticColorType={Neutral:"Neutral",None:"None",Good:"Good",Information:"Information",Critical:"Critical",Error:"Error",Sequence1:"Sequence1",Sequence2:"Sequence2",Sequence3:"Sequence3",Sequence4:"Sequence4",Sequence5:"Sequence5",Sequence6:"Sequence6",Sequence7:"Sequence7",Sequence8:"Sequence8",Sequence9:"Sequence9",Sequence10:"Sequence10",Sequence11:"Sequence11",Sequence12:"Sequence12"};i.ProcessFlowConnectionLabelState={Neutral:"Neutral",Positive:"Positive",Critical:"Critical",Negative:"Negative"};i.ProcessFlowConnectionState={Highlighted:"Highlighted",Dimmed:"Dimmed",Regular:"Regular",Selected:"Selected"};i.ProcessFlowConnectionType={Planned:"Planned",Normal:"Normal"};i.ProcessFlowDisplayState={Regular:"Regular",RegularFocused:"RegularFocused",Highlighted:"Highlighted",HighlightedFocused:"HighlightedFocused",Dimmed:"Dimmed",DimmedFocused:"DimmedFocused",Selected:"Selected",SelectedHighlighted:"SelectedHighlighted",SelectedHighlightedFocused:"SelectedHighlightedFocused",SelectedFocused:"SelectedFocused"};i.ProcessFlowLaneState={value:"value",state:"state"};i.ProcessFlowNodeState={Positive:"Positive",Negative:"Negative",Critical:"Critical",Planned:"Planned",Neutral:"Neutral",PlannedNegative:"PlannedNegative"};i.ProcessFlowNodeType={Single:"Single",Aggregated:"Aggregated"};i.ProcessFlowZoomLevel={One:"One",Two:"Two",Three:"Three",Four:"Four"};i.SelectionState={Selected:"Selected",NotSelected:"NotSelected",Semantic:"Semantic"};i.statusindicator=i.statusindicator||{};i.statusindicator.FillingDirectionType={Up:"Up",Down:"Down",Left:"Left",Right:"Right",Clockwise:"Clockwise",CounterClockwise:"CounterClockwise"};i.taccount=i.taccount||{};i.taccount.TAccountPanelState={Default:"Default",Table:"Table"};i.statusindicator.HorizontalAlignmentType={Left:"Left",Middle:"Middle",Right:"Right"};i.statusindicator.VerticalAlignmentType={Top:"Top",Middle:"Middle",Bottom:"Bottom"};i.statusindicator.SizeType={None:"None",Small:"Small",Medium:"Medium",Large:"Large",ExtraLarge:"ExtraLarge"};i.statusindicator.LabelPositionType={Top:"Top",Right:"Right",Bottom:"Bottom",Left:"Left"};i.statusindicator.FillingType={Linear:"Linear",Radial:"Radial",Circular:"Circular",None:"None"};i.ThingGroupDesign={ZeroIndent:"ZeroIndent",TopIndent:"TopIndent"};i.TimelineAlignment={Right:"Right",Left:"Left",Top:"Top",Bottom:"Bottom"};i.TimelineAxisOrientation={Vertical:"Vertical",Horizontal:"Horizontal"};i.TimelineFilterType={Data:"Data",Time:"Time",Search:"Search"};i.TimelineGroupType={None:"None",Year:"Year",Month:"Month",Quarter:"Quarter",Week:"Week",Day:"Day"};i.TimelineScrollingFadeout={None:"None",Area:"Area",AreaWithButtons:"AreaWithButtons"};i.ValueStatus={Good:"Good",Neutral:"Neutral",Critical:"Critical",Bad:"Bad"};i.ImageEditorMode={Resize:"Resize",CropRectangle:"CropRectangle",CropEllipse:"CropEllipse",CropCustomShape:"CropCustomShape",Default:"Default"};i.ImageEditorContainerMode={Transform:"Transform",Crop:"Crop",Filter:"Filter"};i.ImageFormat={Png:"Png",Jpeg:"Jpeg"};i.ImageEditorContainerButton={Transform:"Transform",Crop:"Crop",Filter:"Filter"};i.FilePickerModes={All:"All",FileOnly:"FileOnly",FolderOnly:"FolderOnly"};i.FilePickerType={Export:"Export",Upload:"Upload"};i.SelectionModes={SingleSelect:"SingleSelectMaster",MultiSelect:"MultiSelect"};return i});
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/AreaMicroChart", ["./library","sap/ui/core/Control","sap/m/FlexBox","sap/suite/ui/microchart/MicroChartUtils","sap/base/Log","sap/ui/events/KeyCodes","sap/ui/core/theming/Parameters","sap/ui/core/ResizeHandler","./AreaMicroChartRenderer","sap/ui/core/Core","sap/ui/core/Theming","sap/base/i18n/Localization","./AreaMicroChartItem","./AreaMicroChartLabel","sap/ui/core/Lib"],function(e,t,i,r,s,a,o,n,l,h,u,d,p,g,f){"use strict";var c=e.MicroChartColorType;var _=e.AreaMicroChartViewType;var C=t.extend("sap.suite.ui.microchart.AreaMicroChart",{metadata:{library:"sap.suite.ui.microchart",properties:{size:{type:"sap.m.Size",group:"Misc",defaultValue:"Auto"},width:{type:"sap.ui.core.CSSSize",group:"Misc"},height:{type:"sap.ui.core.CSSSize",group:"Misc"},maxXValue:{type:"float",group:"Misc",defaultValue:null},minXValue:{type:"float",group:"Misc",defaultValue:null},maxYValue:{type:"float",group:"Misc",defaultValue:null},minYValue:{type:"float",group:"Misc",defaultValue:null},view:{type:"sap.suite.ui.microchart.AreaMicroChartViewType",group:"Appearance",defaultValue:"Normal"},colorPalette:{type:"string[]",group:"Appearance",defaultValue:[]},showLabel:{type:"boolean",group:"Misc",defaultValue:true},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false},hideOnNoData:{type:"boolean",group:"Appearance",defaultValue:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{press:{}},defaultAggregation:"lines",aggregations:{chart:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartItem",defaultClass:p,bindable:"bindable"},maxThreshold:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartItem",defaultClass:p},innerMaxThreshold:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartItem",defaultClass:p},innerMinThreshold:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartItem",defaultClass:p},minThreshold:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartItem",defaultClass:p},target:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartItem",defaultClass:p,bindable:"bindable"},firstXLabel:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartLabel",defaultClass:g},firstYLabel:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartLabel",defaultClass:g},lastXLabel:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartLabel",defaultClass:g},lastYLabel:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartLabel",defaultClass:g},maxLabel:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartLabel",defaultClass:g},minLabel:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartLabel",defaultClass:g},lines:{multiple:true,type:"sap.suite.ui.microchart.AreaMicroChartItem",defaultClass:p,bindable:"bindable"}}},renderer:l});C.THRESHOLD_LOOK_XS=1.125;C.THRESHOLD_LOOK_S=3.5;C.THRESHOLD_LOOK_M=4.5;C.THRESHOLD_LOOK_L=5.875;C.THRESHOLD_WIDTH_NO_LABEL=6;C.THRESHOLD_WIDE_HEIGHT_NO_LABEL=2.25;C.ITEM_NEUTRAL_COLOR="sapSuiteAMCSemanticColorNeutral";C.ITEM_NEUTRAL_NOTHRESHOLD_CSSCLASS="sapSuiteAMCNeutralNoThreshold";C._CHARTITEM_AGGREGATIONS=["chart","target","minThreshold","maxThreshold","innerMinThreshold","innerMaxThreshold"];C.prototype.init=function(){this._oRb=f.getResourceBundleFor("sap.suite.ui.microchart");this.setAggregation("tooltip","((AltText))",true);this._bThemeApplied=false;h.ready(this._handleCoreInitialized.bind(this))};C.prototype._handleCoreInitialized=function(){u.attachApplied(this._handleThemeApplied.bind(this));d.attachChange(this._handleThemeApplied.bind(this))};C.prototype._handleThemeApplied=function(){this._bThemeApplied=true;this.invalidate()};C.prototype._getCssValues=function(){this._$CssHelper.className=Array.prototype.slice.call(arguments).join(" ");var e=window.getComputedStyle(this._$CssHelper);if(!e.backgroundColor){e.backgroundColor=e["background-color"]}if(!e.outlineStyle){e.outlineStyle=e["outline-style"]}if(!e.outlineWidth){e.outlineWidth=e["outline-width"]}return e};C.prototype.__fillThresholdArea=function(e,t,i,r){e.beginPath();e.moveTo(t[0].x,t[0].y);for(var s=1,a=t.length;s<a;s++){e.lineTo(t[s].x,t[s].y)}for(var o=i.length-1;o>=0;o--){e.lineTo(i[o].x,i[o].y)}e.closePath();e.fillStyle="white";e.fill();e.fillStyle=r;e.fill();e.lineWidth=1;e.strokeStyle="white";e.stroke();e.strokeStyle=r;e.stroke()};C.prototype._renderDashedLine=function(e,t,i){if(e.setLineDash){e.setLineDash(i);this._renderLine(e,t);e.setLineDash([])}else{e.beginPath();for(var r=0,s=t.length-1;r<s;r++){e._dashedLine(t[r].x,t[r].y,t[r+1].x,t[r+1].y,i)}e.stroke()}};C.prototype._renderLine=function(e,t){e.beginPath();e.moveTo(t[0].x,t[0].y);for(var i=1,r=t.length;i<r;i++){e.lineTo(t[i].x,t[i].y)}e.stroke()};C.prototype._getItemColor=function(e,t){var i;if(t&&this.getTarget()){i="sapSuiteAMCSemanticColor"+this.getTarget().getColor()}else if(!t&&this.getChart()){i="sapSuiteAMCSemanticColor"+this.getChart().getColor()}if(i===C.ITEM_NEUTRAL_COLOR&&!this._isThresholdPresent(e)){return C.ITEM_NEUTRAL_NOTHRESHOLD_CSSCLASS}else{return i}};C.prototype._isThresholdPresent=function(e){var t=[e.minThreshold.length,e.maxThreshold.length,e.innerMinThreshold.length,e.innerMaxThreshold.length];for(var i=0;i<t.length;i++){if(t[i]>1){return true}}return false};C.prototype._renderTarget=function(e,t){if(t.target.length>1){var i=this._getItemColor(t,true);var r=this._getCssValues("sapSuiteAMCTarget",i);e.strokeStyle=r.color;e.lineWidth=parseFloat(r.width);if(r?.textShadow&&r.textShadow!=="none"){this._renderShadows(r,e)}if(r.outlineStyle=="dotted"){this._renderDashedLine(e,t.target,[parseFloat(r.outlineWidth),3])}else{this._renderLine(e,t.target,t)}}else if(t.target.length==1){s.warning("Target is not rendered because only 1 point was given")}};C.prototype._renderThresholdLine=function(e,t){if(t&&t.length){var i=this._getCssValues("sapSuiteAMCThreshold");e.strokeStyle=i.color;e.lineWidth=i.width;this._renderLine(e,t)}};C.prototype._fillMaxThreshold=function(e,t){if(t.maxThreshold.length>1){var i=this._getCssValues("sapSuiteAMCThreshold","sapSuiteAMCSemanticColor"+this.getMaxThreshold().getColor());this.__fillThresholdArea(e,t.maxThreshold,[{x:t.maxThreshold[0].x,y:t.minY},{x:t.maxThreshold[t.maxThreshold.length-1].x,y:t.minY}],i.backgroundColor);this._renderThresholdLine(e,t.maxThreshold,t)}else if(t.maxThreshold.length==1){s.warning("Max Threshold is not rendered because only 1 point was given")}};C.prototype._fillMinThreshold=function(e,t){if(t.minThreshold.length>1){var i=this._getCssValues("sapSuiteAMCThreshold","sapSuiteAMCSemanticColor"+this.getMinThreshold().getColor());this.__fillThresholdArea(e,t.minThreshold,[{x:t.minThreshold[0].x,y:t.maxY},{x:t.minThreshold[t.minThreshold.length-1].x,y:t.maxY}],i.backgroundColor)}else if(t.minThreshold.length==1){s.warning("Min Threshold is not rendered because only 1 point was given")}};C.prototype._fillThresholdArea=function(e,t){if(t.minThreshold.length>1&&t.maxThreshold.length>1){var i=this._getCssValues("sapSuiteAMCThreshold","sapSuiteAMCSemanticColorCritical");this.__fillThresholdArea(e,t.maxThreshold,t.minThreshold,i.backgroundColor)}};C.prototype._fillInnerThresholdArea=function(e,t){if(t.innerMinThreshold.length>1&&t.innerMaxThreshold.length>1){var i=this._getCssValues("sapSuiteAMCThreshold","sapSuiteAMCSemanticColor"+this.getInnerMaxThreshold().getColor());this.__fillThresholdArea(e,t.innerMaxThreshold,t.innerMinThreshold,i.backgroundColor)}else if(t.innerMinThreshold.length||t.innerMaxThreshold.length){s.warning("Inner threshold area is not rendered because inner min and max threshold were not correctly set")}};C.prototype._renderChart=function(e,t){if(t.chart.length>1){var i=this._getItemColor(t);var r=this._getCssValues("sapSuiteAMCChart",i);e.strokeStyle=r.color;e.lineWidth=parseFloat(r.width);if(r?.textShadow&&r.textShadow!=="none"){this._renderShadows(r,e)}this._renderLine(e,t.chart,t)}else if(t.chart.length==1){s.warning("Actual values are not rendered because only 1 point was given")}};C.prototype._renderLines=function(e,t){var i=this.getColorPalette().length,r=0,s=this._getCssValues("sapSuiteAMCLine"),a=t.lines.length;var n=function(e){if(i){if(r===i){r=0}e=this.getColorPalette()[r++].trim()}if(c.hasOwnProperty(e)){s=this._getCssValues("sapSuiteAMCLine","sapSuiteAMCSemanticColor"+e);return s.color}else{return o.get(e)||e}}.bind(this);e.lineWidth=parseFloat(s.width);for(var l=0;l<a;l++){if(t.lines[l].length>1){e.strokeStyle=n(this.getLines()[l].getColor());this._renderLine(e,t.lines[l],t)}}};C.prototype._renderCanvas=function(){var e=this.getDomRef("canvas");if(!this._hasData()||!e){return}this._$CssHelper=this.getDomRef("css-helper");var t=this.$();var i=window.getComputedStyle(e);var r=parseFloat(i.width);e.setAttribute("width",r||360);var s=parseFloat(i.height);e.setAttribute("height",s||242);var a=e.getContext("2d");a.lineJoin="round";a._dashedLine=this._drawDashedLine;var o=this._calculateDimensions(e.width,e.height);if(this._isThresholdPresent(o)){t.find(".sapSuiteAMCCanvasContainer").addClass("sapSuiteAMCWithThreshold")}this._fillMaxThreshold(a,o);this._fillMinThreshold(a,o);this._fillThresholdArea(a,o);this._renderThresholdLine(a,o.minThreshold,o);this._renderThresholdLine(a,o.maxThreshold,o);this._fillInnerThresholdArea(a,o);this._renderThresholdLine(a,o.innerMinThreshold,o);this._renderThresholdLine(a,o.innerMaxThreshold,o);this._renderTarget(a,o);this._renderChart(a,o);this._renderLines(a,o)};C.prototype._drawDashedLine=function(e,t,i,r,s){var a=s.length;this.moveTo(e,t);var o=i-e,n=r-t,l=o?n/o:1e15,h=Math.sqrt(o*o+n*n),u=0,d=true;while(h>=.1){var p=s[u++%a];if(p>h){p=h}var g=Math.sqrt(p*p/(1+l*l));if(o<0){g=-g}e+=g;t+=l*g;this[d?"lineTo":"moveTo"](e,t);h-=p;d=!d}};C.prototype._calculateDimensions=function(e,t){var i,r,a,o;function n(){if(!this._isMinXValue||!this._isMaxXValue||!this._isMinYValue||!this._isMaxYValue){var e=this.getLines();if(this.getMaxThreshold()){e.push(this.getMaxThreshold())}if(this.getMinThreshold()){e.push(this.getMinThreshold())}if(this.getChart()){e.push(this.getChart())}if(this.getTarget()){e.push(this.getTarget())}if(this.getInnerMaxThreshold()){e.push(this.getInnerMaxThreshold())}if(this.getInnerMinThreshold()){e.push(this.getInnerMinThreshold())}for(var t=0,s=e.length;t<s;t++){var n=e[t].getPoints();for(var l=0,h=n.length;l<h;l++){var u=n[l].getXValue();if(u>i||i===undefined){i=u}if(u<a||a===undefined){a=u}var d=n[l].getYValue();if(d>r||r===undefined){r=d}if(d<o||o===undefined){o=d}}}}if(this._isMinXValue){a=this.getMinXValue()}if(this._isMaxXValue){i=this.getMaxXValue()}if(this._isMinYValue){o=this.getMinYValue()}if(this._isMaxYValue){r=this.getMaxYValue()}}n.call(this);var l={minY:0,minX:0,maxY:t,maxX:e,lines:[]};var h;var u=i-a;if(u>0){h=e/u}else if(u==0){h=0;l.maxX/=2}else{s.warning("Min X is greater than max X.")}var p;var g=r-o;if(g>0){p=t/(r-o)}else if(g==0){p=0;l.maxY/=2}else{s.warning("Min Y is greater than max Y.")}function f(e){var t=d.getRTL();var i=function(e){var i=h*(e-a);if(t){i=l.maxX-i}return i};var r=function(e){return l.maxY-p*(e-o)};var n=[];if(e&&h!==undefined&&p!==undefined){var u=e.getPoints();var g=u.length;var f,c,_,C;if(g==1){_=u[0].getXValue();C=u[0].getYValue();if(_==undefined^C==undefined){var T,M;if(_==undefined){M=c=r(C);f=l.minX;T=l.maxX}else{T=f=i(_);c=l.minY;M=l.maxY}n.push({x:f,y:c},{x:T,y:M})}else{s.warning("Point with coordinates ["+_+" "+C+"] ignored")}}else{for(var m=0;m<g;m++){_=u[m].getXValue();C=u[m].getYValue();if(_!=undefined&&C!=undefined){f=i(_);c=r(C);n.push({x:f,y:c})}else{s.warning("Point with coordinates ["+_+" "+C+"] ignored")}}}}return n}l.maxThreshold=f(this.getMaxThreshold());l.minThreshold=f(this.getMinThreshold());l.chart=f(this.getChart());l.target=f(this.getTarget());l.innerMaxThreshold=f(this.getInnerMaxThreshold());l.innerMinThreshold=f(this.getInnerMinThreshold());var c=this.getLines().length;for(var _=0;_<c;_++){l.lines.push(f(this.getLines()[_]))}return l};C.prototype.setMinXValue=function(e,t){this._isMinXValue=this._isNumber(e);return this.setProperty("minXValue",this._isMinXValue?e:NaN,t)};C.prototype.setMaxXValue=function(e,t){this._isMaxXValue=this._isNumber(e);return this.setProperty("maxXValue",this._isMaxXValue?e:NaN,t)};C.prototype.setMinYValue=function(e,t){this._isMinYValue=this._isNumber(e);return this.setProperty("minYValue",this._isMinYValue?e:NaN,t)};C.prototype.setMaxYValue=function(e,t){this._isMaxYValue=this._isNumber(e);return this.setProperty("maxYValue",this._isMaxYValue?e:NaN,t)};C.prototype._isNumber=function(e){return typeof e==="number"&&!isNaN(e)&&isFinite(e)};C.prototype.onBeforeRendering=function(){if(this._bUseIndex){this._indexChartItems()}if(this._sChartResizeHandlerId){n.deregister(this._sChartResizeHandlerId)}this._unbindMouseEnterLeaveHandler()};C.prototype.onAfterRendering=function(){e._checkControlIsVisible(this,this._onControlIsVisible);this._bindMouseEnterLeaveHandler()};C.prototype.setSize=function(e){if(this.getSize()!==e){this.setProperty("size",e)}return this};C.prototype._onControlIsVisible=function(){this._onResize();this._sChartResizeHandlerId=n.register(this,this._onResize.bind(this))};C.prototype._indexChartItems=function(){var e,t=C._CHARTITEM_AGGREGATIONS.length;for(var i=0;i<t;i++){e=this.getAggregation(C._CHARTITEM_AGGREGATIONS[i]);if(e){this._indexChartItemPoints(e)}}};C.prototype._indexChartItemPoints=function(e){var t=e.getPoints();for(var i=0;i<t.length;i++){t[i].setProperty("x",i,true)}};C.prototype.enableXIndexing=function(e){this._bUseIndex=e};C.prototype._onResize=function(){var e=this.$(),t=parseInt(e.width()),i=parseInt(e.height()),r=e.find(".sapSuiteAMCPositionCenter"),s=e.find(".sapSuiteAMCPositionTop .sapSuiteAMCPositionLeft, .sapSuiteAMCPositionTop .sapSuiteAMCPositionRight,"+".sapSuiteAMCSideLabels .sapSuiteAMCLbl:first-child");e.removeClass("sapSuiteAMCNoLabels sapSuiteAMCLookM sapSuiteAMCLookS sapSuiteAMCLookXS sapSuiteAMCNoMinMaxLabels sapSuiteAMCNoTopLabels");if(t<=this.convertRemToPixels(C.THRESHOLD_WIDTH_NO_LABEL)){e.addClass("sapSuiteAMCNoLabels")}if(i<this.convertRemToPixels(C.THRESHOLD_WIDE_HEIGHT_NO_LABEL)){e.addClass("sapSuiteAMCLookXS")}else if(i<this.convertRemToPixels(C.THRESHOLD_LOOK_S)&&this.getView()===_.Normal){e.addClass("sapSuiteAMCLookXS")}else if(i<this.convertRemToPixels(C.THRESHOLD_LOOK_M)){e.addClass("sapSuiteAMCLookS")}else if(i<this.convertRemToPixels(C.THRESHOLD_LOOK_L)){e.addClass("sapSuiteAMCLookM")}if(this._isAnyLabelTruncated(s)||this._isAnyLabelVerticallyTruncated(s)){e.addClass("sapSuiteAMCNoMinMaxLabels");if(this._isAnyLabelTruncated(s)){e.removeClass("sapSuiteAMCNoMinMaxLabels");e.addClass("sapSuiteAMCNoTopLabels")}}if(this._isAnyLabelTruncated(r)){e.addClass("sapSuiteAMCNoMinMaxLabels")}this._renderCanvas()};C.prototype._isLabelTruncated=function(e){return e.offsetWidth<e.scrollWidth};C.prototype.ontap=function(e){this.firePress()};C.prototype.onkeydown=function(e){if(e.which==a.SPACE){e.preventDefault()}};C.prototype.onkeyup=function(e){if(e.which==a.ENTER||e.which==a.SPACE){this.firePress();e.preventDefault()}};C.prototype.attachEvent=function(){t.prototype.attachEvent.apply(this,arguments);if(this.hasListeners("press")){this.$().attr("tabindex",0).addClass("sapSuiteUiMicroChartPointer")}return this};C.prototype.detachEvent=function(){t.prototype.detachEvent.apply(this,arguments);if(!this.hasListeners("press")){this.$().removeAttr("tabindex").removeClass("sapSuiteUiMicroChartPointer")}return this};C.prototype._getLocalizedColorMeaning=function(e){return c.hasOwnProperty(e)?this._oRb.getText(("SEMANTIC_COLOR_"+e).toUpperCase()):""};C.prototype._getAltHeaderText=function(e){var t=this._oRb.getText("AREAMICROCHART");if(e){t+=" "+this._oRb.getText("IS_ACTIVE")}if(!this._hasData()){t+="\n"+this._oRb.getText("NO_DATA");return t}var i=this.getFirstXLabel();var r=this.getFirstYLabel();var s=this.getLastXLabel();var a=this.getLastYLabel();var o=this.getMinLabel();var n=this.getMaxLabel();var l=this.getChart();var h=this.getTarget();if(i&&i.getLabel()||r&&r.getLabel()){t+="\n"+this._oRb.getText("AREAMICROCHART_START")+": "+(i?i.getLabel():"")+" "+(r?r.getLabel()+" "+this._getLocalizedColorMeaning(r.getColor()):"")}if(s&&s.getLabel()||a&&a.getLabel()){t+="\n"+this._oRb.getText("AREAMICROCHART_END")+": "+(s?s.getLabel():"")+" "+(a?a.getLabel()+" "+this._getLocalizedColorMeaning(a.getColor()):"")}if(o&&o.getLabel()){t+="\n"+this._oRb.getText("AREAMICROCHART_MINIMAL_VALUE")+": "+o.getLabel()+" "+this._getLocalizedColorMeaning(o.getColor())}if(n&&n.getLabel()){t+="\n"+this._oRb.getText("AREAMICROCHART_MAXIMAL_VALUE")+": "+n.getLabel()+" "+this._getLocalizedColorMeaning(n.getColor())}if(l&&l.getPoints()&&l.getPoints().length>0){t+="\n"+this._oRb.getText("AREAMICROCHART_ACTUAL_VALUES")+":";var u=l.getPoints();for(var d=0;d<u.length;d++){t+=" "+u[d].getY()}}if(h&&h.getPoints()&&h.getPoints().length>0){t+="\n"+this._oRb.getText("AREAMICROCHART_TARGET_VALUES")+":";var p=h.getPoints();for(var g=0;g<p.length;g++){t+=" "+p[g].getY()}}return t};C.prototype._getAltSubText=function(e){var t="";for(var i=0;i<this.getLines().length;i++){var r=this.getLines()[i],s=r.getTooltip_AsString(),a="",o="";if(!s){continue}if(r.getPoints()&&r.getPoints().length>0){o+=(e?"":"\n")+(r.getTitle()?r.getTitle():this._oRb.getText("AREAMICROCHART_LINE",[i+1]))+":";var n=r.getPoints();for(var l=0;l<n.length;l++){a+=" "+n[l].getY()}if(this.getColorPalette().length===0){a+=" "+this._getLocalizedColorMeaning(r.getColor())}}a=s.split("((AltText))").join(a);if(a){t+=o+a;e=false}}return t};C.prototype.clone=function(){var e=t.prototype.clone.apply(this,arguments);e._isMinXValue=this._isMinXValue;e._isMaxXValue=this._isMaxXValue;e._isMinYValue=this._isMinYValue;e._isMaxYValue=this._isMaxYValue;return e};C.prototype.exit=function(){n.deregister(this._sChartResizeHandlerId);u.attachApplied(this._handleThemeApplied.bind(this));d.detachChange(this._handleThemeApplied.bind(this))};C.prototype._addTitleAttribute=function(){if(!this.$().attr("title")&&this._hasData()){this.$().attr("title",this.getTooltip_AsString())}};C.prototype._removeTitleAttribute=function(){if(this.$().attr("title")){this.$().removeAttr("title")}};C.prototype._bindMouseEnterLeaveHandler=function(){if(!this._oMouseEnterLeaveHandler){this._oMouseEnterLeaveHandler={mouseEnterChart:this._addTitleAttribute.bind(this),mouseLeaveChart:this._removeTitleAttribute.bind(this)}}this.$().on("mouseenter",this._oMouseEnterLeaveHandler.mouseEnterChart);this.$().on("mouseleave",this._oMouseEnterLeaveHandler.mouseLeaveChart)};C.prototype._unbindMouseEnterLeaveHandler=function(){if(this._oMouseEnterLeaveHandler){this.$().off("mouseenter",this._oMouseEnterLeaveHandler.mouseEnterChart);this.$().off("mouseleave",this._oMouseEnterLeaveHandler.mouseLeaveChart)}};C.prototype._hasData=function(){return this.getLines().length>0||!!this.getChart()};C.prototype.firePress=function(){if(this._hasData()){t.prototype.fireEvent.call(this,"press",arguments)}};C.prototype._renderShadows=function(e,t){var i=e.textShadow.split(/,(?![^(]*\))/);var r=i.map(e=>e.trim().replace(/;$/,""));r.forEach(e=>{var i=e.match(/(rgb\([^)]+\))\s+(-?\d+px)\s+(-?\d+px)\s+(-?\d+px)/);if(i){var r=i[1];var a=parseInt(i[2]);var o=parseInt(i[3]);s(t,a,o,r)}});function s(e,t,i,r){e.shadowOffsetX=t;e.shadowOffsetY=i;e.shadowBlur=0;e.shadowColor=r}};r.extendMicroChart(C);return C});
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/AreaMicroChartItem", ["./library","sap/ui/core/Element","./AreaMicroChartPoint","sap/suite/ui/microchart/MicroChartUtils"],function(t,r,i,e){"use strict";const a=t.MicroChartColorType;var o=r.extend("sap.suite.ui.microchart.AreaMicroChartItem",{metadata:{library:"sap.suite.ui.microchart",properties:{color:{group:"Misc",type:"string",defaultValue:a.Neutral},title:{type:"string",group:"Misc",defaultValue:null}},defaultAggregation:"points",aggregations:{points:{multiple:true,type:"sap.suite.ui.microchart.AreaMicroChartPoint",defaultClass:i,bindable:"bindable"}}}});o.prototype.init=function(){this.setAggregation("tooltip","((AltText))",true)};e.extendMicroChartSetColor(o);return o});
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/AreaMicroChartLabel", ["./library","sap/ui/core/Element","sap/suite/ui/microchart/MicroChartUtils"],function(r,t,e){"use strict";const a=r.MicroChartColorType;var i=t.extend("sap.suite.ui.microchart.AreaMicroChartLabel",{metadata:{library:"sap.suite.ui.microchart",properties:{color:{group:"Misc",type:"string",defaultValue:a.Neutral},label:{type:"string",group:"Misc",defaultValue:""}}}});e.extendMicroChartSetColor(i);return i});
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/AreaMicroChartPoint", ["./library","sap/ui/core/Element"],function(t,e){"use strict";var i=e.extend("sap.suite.ui.microchart.AreaMicroChartPoint",{metadata:{library:"sap.suite.ui.microchart",properties:{x:{type:"float",group:"Misc",defaultValue:null},y:{type:"float",group:"Misc",defaultValue:null}}}});i.prototype.setX=function(t,e){this._isXValue=this._isNumber(t);return this.setProperty("x",this._isXValue?t:NaN,e)};i.prototype.setY=function(t,e){this._isYValue=this._isNumber(t);return this.setProperty("y",this._isYValue?t:NaN,e)};i.prototype.getXValue=function(){return this._isXValue?this.getX():undefined};i.prototype.getYValue=function(){return this._isYValue?this.getY():undefined};i.prototype._isNumber=function(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)};i.prototype.clone=function(t,i,r){var u=e.prototype.clone.apply(this,arguments);u._isXValue=this._isXValue;u._isYValue=this._isYValue;return u};return i});
/*!
* SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
*/
sap.ui.predefine("sap/suite/ui/microchart/AreaMicroChartRenderer", ["./library","sap/suite/ui/microchart/MicroChartRenderUtils"],function(e,t){"use strict";var i=e.AreaMicroChartViewType;var a={apiVersion:2};a.render=function(e,t){if(!t._bThemeApplied){return}if(t._hasData()){var a=t.getView()===i.Wide;var s=t.getShowLabel();var l=s&&(!a&&(t.getFirstYLabel()||t.getLastYLabel())||t.getMaxLabel());var r=s&&(!a&&(t.getFirstXLabel()||t.getLastXLabel())||t.getMinLabel());var o=s&&a&&(t.getFirstYLabel()||t.getFirstXLabel());var n=s&&a&&(t.getLastYLabel()||t.getLastXLabel());e.openStart("div",t);this._writeMainProperties(e,t);if(a){e.class("sapSuiteAMCWideMode")}e.openEnd();e.openStart("div");e.class("sapSuiteAMCVerticalAlignmentContainer");e.openEnd();if(l){e.openStart("div",t.getId()+"-top-labels");e.class("sapSuiteAMCLabels");e.class("sapSuiteAMCPositionTop");e.openEnd();if(!a){this._writeLabel(e,t,t.getFirstYLabel(),"-top-left-lbl","sapSuiteAMCPositionLeft")}this._writeLabel(e,t,t.getMaxLabel(),"-top-center-lbl","sapSuiteAMCPositionCenter");if(!a){this._writeLabel(e,t,t.getLastYLabel(),"-top-right-lbl","sapSuiteAMCPositionRight")}e.close("div")}if(a){e.openStart("div");e.class("sapSuiteAMCHorizontalContainer");e.openEnd()}if(o){e.openStart("div",t.getId()+"-left-labels");e.class("sapSuiteAMCSideLabels");e.class("sapSuiteAMCPositionLeft");e.openEnd();this._writeLabel(e,t,t.getFirstYLabel(),"-top-left-lbl","sapSuiteAMCPositionLeft");this._writeLabel(e,t,t.getFirstXLabel(),"-btm-left-lbl","sapSuiteAMCPositionLeft",true);e.close("div")}e.openStart("div",t.getId()+"-canvas-cont");e.class("sapSuiteAMCCanvasContainer");e.openEnd();e.openStart("canvas",t.getId()+"-canvas");e.class("sapSuiteAMCCanvas");e.openEnd();e.close("canvas");e.close("div");if(n){e.openStart("div",t.getId()+"-right-labels");e.class("sapSuiteAMCSideLabels");e.class("sapSuiteAMCPositionRight");e.openEnd();this._writeLabel(e,t,t.getLastYLabel(),"-top-right-lbl","sapSuiteAMCPositionRight");this._writeLabel(e,t,t.getLastXLabel(),"-btm-right-lbl","sapSuiteAMCPositionRight",true);e.close("div")}if(a){e.close("div")}if(r){e.openStart("div",t.getId()+"-bottom-labels");e.class("sapSuiteAMCLabels");e.class("sapSuiteAMCPositionBtm");e.openEnd();if(!a){this._writeLabel(e,t,t.getFirstXLabel(),"-btm-left-lbl","sapSuiteAMCPositionLeft",true)}this._writeLabel(e,t,t.getMinLabel(),"-btm-center-lbl","sapSuiteAMCPositionCenter",true);if(!a){this._writeLabel(e,t,t.getLastXLabel(),"-btm-right-lbl","sapSuiteAMCPositionRight",true)}e.close("div")}e.openStart("div",t.getId()+"-css-helper");e.style("display","none");e.openEnd();e.close("div");e.close("div");e.close("div")}else{this._renderNoData(e,t)}};a._writeMainProperties=function(e,t){var i=t.hasListeners("press");this._renderActiveProperties(e,t);var a=t.getTooltip_AsString(i);e.attr("role","figure");if(t.getAriaLabelledBy().length){e.accessibilityState(t)}else{e.attr("aria-label",a)}e.class("sapSuiteAMC");e.class("sapSuiteAMCSize"+t.getSize());e.style("width",t.getWidth());e.style("height",t.getHeight())};a._writeLabel=function(e,t,i,a,s,l){if(!i){return}var r=i?i.getLabel():"";e.openStart("div",t.getId()+a);if(l){e.class("sapSuiteAMCTextColor")}else{e.class("sapSuiteAMCSemanticColor"+i.getColor())}e.class("sapSuiteAMCLbl");e.class(s);e.openEnd();e.text(r);e.close("div")};t.extendMicroChartRenderer(a);return a},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/BulletMicroChart", ["./library","sap/base/i18n/Localization","sap/m/library","sap/ui/core/Control","sap/m/FlexBox","sap/ui/core/ResizeHandler","sap/ui/events/KeyCodes","sap/suite/ui/microchart/MicroChartUtils","./BulletMicroChartRenderer","sap/ui/core/Core","sap/ui/core/Theming","./BulletMicroChartData"],function(e,t,a,i,s,r,l,o,u,n,h,p){"use strict";var c=a.Size;var f=i.extend("sap.suite.ui.microchart.BulletMicroChart",{metadata:{library:"sap.suite.ui.microchart",properties:{size:{type:"sap.m.Size",group:"Misc",defaultValue:c.Auto},mode:{type:"sap.suite.ui.microchart.BulletMicroChartModeType",group:"Misc",defaultValue:"Actual"},scale:{type:"string",group:"Misc",defaultValue:""},forecastValue:{type:"float",group:"Misc",defaultValue:null},targetValue:{type:"float",group:"Misc",defaultValue:null},minValue:{type:"float",group:"Misc",defaultValue:null},maxValue:{type:"float",group:"Misc",defaultValue:null},showActualValue:{type:"boolean",group:"Misc",defaultValue:true},showDeltaValue:{type:"boolean",group:"Misc",defaultValue:true},showActualValueInDeltaMode:{type:"boolean",group:"Misc",defaultValue:false},showTargetValue:{type:"boolean",group:"Misc",defaultValue:true},showValueMarker:{type:"boolean",group:"Misc",defaultValue:false},showThresholds:{type:"boolean",group:"Misc",defaultValue:true},actualValueLabel:{type:"string",group:"Misc",defaultValue:""},deltaValueLabel:{type:"string",group:"Misc",defaultValue:""},targetValueLabel:{type:"string",group:"Misc",defaultValue:""},width:{type:"sap.ui.core.CSSSize",group:"Misc"},height:{type:"sap.ui.core.CSSSize",group:"Misc"},scaleColor:{type:"sap.suite.ui.microchart.CommonBackgroundType",group:"Misc",defaultValue:"MediumLight"},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false},hideOnNoData:{type:"boolean",group:"Appearance",defaultValue:false},smallRangeAllowed:{type:"boolean",group:"Appearance",defaultValue:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},defaultAggregation:"actual",aggregations:{actual:{type:"sap.suite.ui.microchart.BulletMicroChartData",defaultClass:p,multiple:false,bindable:"bindable"},thresholds:{type:"sap.suite.ui.microchart.BulletMicroChartData",defaultClass:p,multiple:true,singularName:"threshold",bindable:"bindable"}},events:{press:{}}},renderer:u});f.THRESHOLD_SMALL_LABEL=3.5;f.THRESHOLD_BIG_LABEL=4.5;f.THRESHOLD_SMALL_LOOK=3.5;f.THRESHOLD_EXTRASMALL_LOOK=1.3125;f.THRESHOLD_THRESHOLDS=6;f.prototype.init=function(){this._oRb=n.getLibraryResourceBundle("sap.suite.ui.microchart");this.setAggregation("tooltip","((AltText))",true);this._bThemeApplied=false;n.ready(this._handleCoreInitialized.bind(this))};f.prototype._handleCoreInitialized=function(){h.attachApplied(this._handleThemeApplied.bind(this))};f.prototype._handleThemeApplied=function(){this._bThemeApplied=true;this.invalidate();h.detachApplied(this._handleThemeApplied.bind(this))};f.prototype._calculateChartData=function(){var t=100,a=this.getThresholds(),i=[],s=this.getTargetValue(),r=this.getForecastValue(),l=this.getActual()&&this.getActual().getValue()?this.getActual().getValue():0,o=[],u=0,n=0,h=0,p;if(this.getActual()&&this.getActual()._isValueSet){o.push(l)}if(this._isForecastValueSet){o.push(r)}if(this._isTargetValueSet){o.push(s)}if(this._isMinValueSet){o.push(this.getMinValue())}if(this._isMaxValueSet){o.push(this.getMaxValue())}for(p=0;p<a.length;p++){o.push(a[p].getValue())}if(o.length>0){u=n=o[0];for(p=0;p<o.length;p++){if(o[p]<u){u=o[p]}if(o[p]>n){n=o[p]}}if(this.getSmallRangeAllowed()==false){n=n<0&&n<3*(u-n)?0:n;u=u>0&&u>3*(n-u)?0:u}h=n-u;for(p=0;p<a.length;p++){i[p]={color:a[p].getColor(),valuePct:!a[p]._isValueSet||h===0?0:((a[p].getValue()-u)*t/h).toFixed(2)}}}var c,f;if(this.getMode()===e.BulletMicroChartModeType.Delta){c=!this.getActual()||!this.getActual()._isValueSet||h===0?50:(.05+(l-u)*t/h).toFixed(2);f=!this._isTargetValueSet||h===0?50:((s-u)*t/h).toFixed(2)}else{c=!this.getActual()||!this.getActual()._isValueSet||h===0||u===0&&this.getActual().getValue()===0?0:(.05+(l-u)*t/h).toFixed(2);f=!this._isTargetValueSet||h===0?0:((s-u)*t/h).toFixed(2)}return{actualValuePct:c,targetValuePct:f,forecastValuePct:!this._isForecastValueSet||h===0?0:((r-u)*t/h).toFixed(2),thresholdsPct:i,fScaleWidthPct:t}};f.prototype._calculateDeltaValue=function(){if(!this.getActual()._isValueSet||!this._isTargetValueSet){return 0}else{var e=this.getActual().getValue();var t=this.getTargetValue();return Math.abs(e-t).toFixed(Math.max(this._digitsAfterDecimalPoint(e),this._digitsAfterDecimalPoint(t)))}};f.prototype.setMinValue=function(e){this._isMinValueSet=this._fnIsNumber(e);return this.setProperty("minValue",this._isMinValueSet?e:NaN)};f.prototype.setMaxValue=function(e){this._isMaxValueSet=this._fnIsNumber(e);return this.setProperty("maxValue",this._isMaxValueSet?e:NaN)};f.prototype.setTargetValue=function(e){this._isTargetValueSet=this._fnIsNumber(e);return this.setProperty("targetValue",this._isTargetValueSet?e:NaN)};f.prototype.setForecastValue=function(e){this._isForecastValueSet=this._fnIsNumber(e);return this.setProperty("forecastValue",this._isForecastValueSet?e:NaN)};f.prototype.setSize=function(e){if(this.getSize()!==e){this.setProperty("size",e,false)}return this};f.prototype.ontap=function(e){this.firePress()};f.prototype.onkeydown=function(e){if(e.which===l.SPACE){e.preventDefault()}};f.prototype.onkeyup=function(e){if(e.which===l.ENTER||e.which===l.SPACE){this.firePress();e.preventDefault()}};f.prototype._fnIsNumber=function(e){return typeof e==="number"&&!isNaN(e)&&isFinite(e)};f.prototype.attachEvent=function(e,t,a,s){i.prototype.attachEvent.call(this,e,t,a,s);if(this.hasListeners("press")){this.$().attr("tabindex",0).addClass("sapSuiteUiMicroChartPointer")}return this};f.prototype.detachEvent=function(e,t,a){i.prototype.detachEvent.call(this,e,t,a);if(!this.hasListeners("press")){this.$().removeAttr("tabindex").removeClass("sapSuiteUiMicroChartPointer")}return this};f.prototype.onBeforeRendering=function(){if(this._sChartResizeHandlerId){r.deregister(this._sChartResizeHandlerId)}this._unbindMouseEnterLeaveHandler()};f.prototype.onAfterRendering=function(){e._checkControlIsVisible(this,this._onControlIsVisible);this._bindMouseEnterLeaveHandler()};f.prototype._onControlIsVisible=function(){this._onResize();this._sChartResizeHandlerId=r.register(this,this._onResize.bind(this))};f.prototype._onResize=function(){var e=this.$(),t=Math.round(parseFloat(this.$().css("height"))),a=parseInt(e.css("width"));if(this.getShowValueMarker()){this._adjustValueToMarker()}e.removeClass("sapSuiteBMCSmallFont sapSuiteBMCNoLabels sapSuiteBMCSmallLook sapSuiteBMCExtraSmallLook sapSuiteBMCThresholdHidden");if(t<=this.convertRemToPixels(f.THRESHOLD_EXTRASMALL_LOOK)){e.addClass("sapSuiteBMCExtraSmallLook")}else if(t<=this.convertRemToPixels(f.THRESHOLD_SMALL_LOOK)){e.addClass("sapSuiteBMCSmallLook")}if(t>=this.convertRemToPixels(f.THRESHOLD_SMALL_LABEL)&&t<=this.convertRemToPixels(f.THRESHOLD_BIG_LABEL)){e.addClass("sapSuiteBMCSmallFont")}if(t<this.convertRemToPixels(f.THRESHOLD_SMALL_LABEL)||this._isAnyChartLabelTruncated()){e.addClass("sapSuiteBMCNoLabels")}if(a<this.convertRemToPixels(f.THRESHOLD_THRESHOLDS)){e.addClass("sapSuiteBMCThresholdHidden")}this._adjustLabelsPos()};f.prototype._isAnyChartLabelTruncated=function(){var e=this.$().find(".sapSuiteBMCItemValue, .sapSuiteBMCTargetValue");return this._isAnyLabelTruncated(e)};f.prototype.exit=function(){r.deregister(this._sChartResizeHandlerId)};f.prototype._adjustLabelsPos=function(){var a=t.getRTL();var i=this.$("bc-target-bar-value");var s=this.$("chart-bar");var r=s.width();if(r){var l=0;if(i&&i.offset()){l=i.offset().left-s.offset().left;if(a){l=r-l}this._adjustLabelPos(this.$("bc-target-value"),r,l,a)}var o=this.$("bc-bar-value");if(o&&o.offset()){var u=o.offset().left+o.width()-s.offset().left;if(a){u=r-(o.offset().left-s.offset().left)}if(this.getMode()===e.BulletMicroChartModeType.Delta){u=o.width();if(!this.getShowActualValueInDeltaMode()){u=u/2}var n=this.getTargetValue()<this.getActual().getValue()?1:-1;u=i.offset().left-s.offset().left+u*n}this._adjustLabelPos(this.$("bc-item-value"),r,u,a)}}};f.prototype._adjustLabelPos=function(e,t,a,i){var s=i?"right":"left";var r=e.width();if(r>t){e.css(s,"0")}else{var l=a-.5*r;if(l<0){l=0}if(l+r>t){l=t-r}e.css(s,l)}};f.prototype._adjustValueToMarker=function(){var e=this.$("bc-bar-value");var a=this.$("bc-bar-value-marker");var i=this.$().find(".sapSuiteBMCVerticalAlignmentContainer");if(e.offset()&&a.offset()){var s=e.width();var r=e.offset().left;var l=a.width();var o=a.offset().left;if(t.getRTL()){if(o<r){a.css("right","");a.offset({left:r})}if(o+l>r+s){a.css("right","");a.offset({left:r+s-l})}}else{if(o<r){a.offset({left:r})}if(o+l>r+s){e.width((o+l-r)/i.width()*100+"%")}}}};f.prototype._getLocalizedColorMeaning=function(e){return this._oRb.getText(("SEMANTIC_COLOR_"+e).toUpperCase())};f.prototype._getAltHeaderText=function(t){var a=this._oRb.getText("BULLETMICROCHART");if(t){a+=" "+this._oRb.getText("IS_ACTIVE")}if(!this._hasData()){a+="\n"+this._oRb.getText("NO_DATA");return a}var i=this.getActual()&&this.getActual()._isValueSet;var s=this.getScale();var r=this.getTargetValueLabel();var l=!this.getActual()||!this.getActual().getColor()?"":this._getLocalizedColorMeaning(this.getActual().getColor());if(i){var o=this.getActualValueLabel();var u=o?o:""+this.getActual().getValue();a+="\n"+this._oRb.getText("BULLETMICROCHART_ACTUAL_TOOLTIP",[u+s,l])}if(this.getMode()===e.BulletMicroChartModeType.Delta){if(this._isTargetValueSet&&i){var n=this.getDeltaValueLabel();var h=n?n:""+this._calculateDeltaValue();a+="\n"+this._oRb.getText("BULLETMICROCHART_DELTA_TOOLTIP",[h+s,l])}}else if(this._isForecastValueSet){a+=this._isForecastValueSet?"\n"+this._oRb.getText("BULLETMICROCHART_FORECAST_TOOLTIP",[this.getForecastValue()+s,l]):""}if(this._isTargetValueSet){var p=r?r:""+this.getTargetValue();a+="\n"+this._oRb.getText("BULLETMICROCHART_TARGET_TOOLTIP",[p+s])}return a};f.prototype._getAltSubText=function(e){var t="";var a=this.getThresholds().sort(function(e,t){return e.getValue()-t.getValue()});for(var i=0;i<a.length;i++){var s=a[i],r=s.getTooltip_AsString(),l="";if(!r){continue}l+=(e?"":"\n")+this._oRb.getText("BULLETMICROCHART_THRESHOLD_TOOLTIP",[s.getValue()+this.getScale(),this._getLocalizedColorMeaning(s.getColor())]);l=r.split("((AltText))").join(l);if(l){t+=l;e=false}}return t};f.prototype.clone=function(e,t,a){var s=i.prototype.clone.apply(this,arguments);s._isMinValueSet=this._isMinValueSet;s._isMaxValueSet=this._isMaxValueSet;s._isForecastValueSet=this._isForecastValueSet;s._isTargetValueSet=this._isTargetValueSet;return s};f.prototype._addTitleAttribute=function(){if(!this.$().attr("title")&&this._hasData()){this.$().attr("title",this.getTooltip_AsString())}};f.prototype._removeTitleAttribute=function(){if(this.$().attr("title")){this.$().removeAttr("title")}};f.prototype._bindMouseEnterLeaveHandler=function(){if(!this._oMouseEnterLeaveHandler){this._oMouseEnterLeaveHandler={mouseEnterChart:this._addTitleAttribute.bind(this),mouseLeaveChart:this._removeTitleAttribute.bind(this)}}this.$().on("mouseenter",this._oMouseEnterLeaveHandler.mouseEnterChart);this.$().on("mouseleave",this._oMouseEnterLeaveHandler.mouseLeaveChart)};f.prototype._unbindMouseEnterLeaveHandler=function(){if(this._oMouseEnterLeaveHandler){this.$().off("mouseenter",this._oMouseEnterLeaveHandler.mouseEnterChart);this.$().off("mouseleave",this._oMouseEnterLeaveHandler.mouseLeaveChart)}};f.prototype._hasData=function(){return this.getActual()};f.prototype.firePress=function(){if(this._hasData()){i.prototype.fireEvent.call(this,"press",arguments)}};o.extendMicroChart(f);return f});
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/BulletMicroChartData", ["./library","sap/ui/core/Element"],function(t,e){"use strict";var r=e.extend("sap.suite.ui.microchart.BulletMicroChartData",{metadata:{library:"sap.suite.ui.microchart",properties:{value:{type:"float",group:"Misc",defaultValue:"0"},color:{type:"sap.m.ValueColor",group:"Misc",defaultValue:"Neutral"}}}});r.prototype.init=function(){this.setAggregation("tooltip","((AltText))",true)};r.prototype.setValue=function(t){this._isValueSet=this._fnIsNumber(t);return this.setProperty("value",this._isValueSet?t:NaN)};r.prototype._fnIsNumber=function(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)};r.prototype.clone=function(t,r,i){var u=e.prototype.clone.apply(this,arguments);u._isValueSet=this._isValueSet;return u};return r});
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/BulletMicroChartRenderer", ["./library","sap/base/i18n/Localization","sap/m/library","sap/suite/ui/microchart/MicroChartRenderUtils"],function(e,a,t,l){"use strict";var s={apiVersion:2};s.render=function(l,s){if(!s._bThemeApplied){return}if(s._hasData()&&!isNaN(s.getAggregation("actual").getValue())){var i=s._calculateChartData();var r=+i.forecastValuePct;var o;if(s._isResponsive()){o="sapSuiteBMCResponsive"}else{o="sapSuiteBMCSize"+s.getSize()}var c=s.getScale();var u=a.getRTL()?"right":"left";var d="sapSuiteBMCModeType"+s.getMode();var n=s.getMode()===e.BulletMicroChartModeType.Delta?s._calculateDeltaValue():0;var p=s.getActual()&&s.getActual()._isValueSet;var S=s.getShowActualValue()&&s.getSize()!==t.Size.XS&&s.getMode()===e.BulletMicroChartModeType.Actual;var g=s.getShowActualValueInDeltaMode()&&s.getSize()!==t.Size.XS&&s.getMode()===e.BulletMicroChartModeType.Delta;var v=s.getShowDeltaValue()&&s.getSize()!==t.Size.XS&&s.getMode()===e.BulletMicroChartModeType.Delta;var M=s.getShowTargetValue()&&s.getSize()!==t.Size.XS;var h=s.getShowThresholds();var C=s.getActualValueLabel();var B=s.getDeltaValueLabel();var V=s.getTargetValueLabel();var f=s.getThresholds();var T;if(p){T="sapSuiteBMCSemanticColor"+s.getActual().getColor()}l.openStart("div",s);this._writeMainProperties(l,s);l.openEnd();l.openStart("div");l.class("sapSuiteBMCVerticalAlignmentContainer");l.openEnd();l.openStart("div",s.getId()+"-bc-chart");l.class("sapSuiteBMCChart");l.class(o);l.openEnd();if(p&&(S||g)||p&&s._isTargetValueSet&&v){var b="";l.openStart("div");l.class("sapSuiteBMCTopLabel");l.openEnd();if(p&&(S||g)){var y=C?C:""+s.getActual().getValue();b=y+c;l.openStart("div",s.getId()+"-bc-item-value");l.class("sapSuiteBMCItemValue");l.class(T);l.class(o);l.openEnd();l.text(b);l.close("div")}else if(p&&s._isTargetValueSet&&v){var E=B?B:""+n;b=E+c;l.openStart("div",s.getId()+"-bc-item-value");l.class("sapSuiteBMCItemValue");l.class(T);l.class(o);l.openEnd();l.text("");l.text(b);l.close("div")}l.close("div")}l.openStart("div");l.class("sapSuiteBMCChartCanvas");l.openEnd();if(h){for(var _=0;_<i.thresholdsPct.length;_++){if(f[_]._isValueSet){this.renderThreshold(l,s,i.thresholdsPct[_],o)}}}l.openStart("div",s.getId()+"-chart-bar");l.class("sapSuiteBMCBar");l.class(o);l.class("sapSuiteBMCScaleColor"+s.getScaleColor());l.openEnd();l.close("div");if(p){if(s._isForecastValueSet&&s.getMode()===e.BulletMicroChartModeType.Actual){l.openStart("div",s.getId()+"-forecast-bar-value");l.class("sapSuiteBMCForecastBarValue");l.class(T);l.class(o);l.style("width",r+"%");l.openEnd();l.close("div")}l.openStart("div",s.getId()+"-bc-bar-value-marker");l.class("sapSuiteBMCBarValueMarker");l.class(d);if(!s.getShowValueMarker()){l.class("sapSuiteBMCBarValueMarkerHidden")}l.class(T);l.class(o);l.style(u,parseFloat(i.actualValuePct)+parseFloat(1)+"%");if(s.getMode()===e.BulletMicroChartModeType.Delta&&i.actualValuePct<=i.targetValuePct){l.style("margin","0")}l.openEnd();l.close("div");if(s.getMode()===e.BulletMicroChartModeType.Actual&&i.actualValuePct!==0){l.openStart("div",s.getId()+"-bc-bar-value");l.class("sapSuiteBMCBarValue");l.class(T);l.class(o);if(s._isForecastValueSet){l.class("sapSuiteBMCForecast")}l.style("width",i.actualValuePct+"%");l.openEnd();l.close("div")}else if(s._isTargetValueSet&&s.getMode()===e.BulletMicroChartModeType.Delta){l.openStart("div",s.getId()+"-bc-bar-value");l.class("sapSuiteBMCBarValue");l.class(T);l.class(o);l.style("width",Math.abs(i.actualValuePct-i.targetValuePct)+"%");l.style(u,1+Math.min(i.actualValuePct,i.targetValuePct)+"%");l.openEnd();l.close("div")}}if(s._isTargetValueSet){l.openStart("div",s.getId()+"-bc-target-bar-value");l.class("sapSuiteBMCTargetBarValue");l.class(o);l.style(u,parseFloat(i.targetValuePct).toFixed(2)+"%");l.openEnd();l.close("div");l.close("div");if(M){l.openStart("div");l.class("sapSuiteBMCBottomLabel");l.openEnd();var P=V?V:""+s.getTargetValue();var m=P+c;l.openStart("div",s.getId()+"-bc-target-value");l.class("sapSuiteBMCTargetValue");l.class(o);l.openEnd();l.text(m);l.close("div");l.close("div")}}else{l.close("div")}l.close("div");l.openStart("div",s.getId()+"-info");l.attr("aria-hidden","true");l.style("display","none");l.openEnd();l.close("div");l.close("div");l.close("div")}else{this._renderNoData(l,s)}};s._writeMainProperties=function(e,a){var t=a.hasListeners("press");this._renderActiveProperties(e,a);var l=a.getTooltip_AsString(t);e.attr("role","figure");if(a.getAriaLabelledBy().length){e.accessibilityState(a)}else{e.attr("aria-label",l)}e.class("sapSuiteBMC");e.class("sapSuiteBMCContent");e.class(a._isResponsive()?"sapSuiteBMCResponsive":"sapSuiteBMCSize"+a.getSize());e.style("width",a.getWidth());e.style("height",a.getHeight())};s.renderThreshold=function(e,l,s,i){var r=a.getRTL()?"right":"left",o=.98*s.valuePct+1,c="sapSuiteBMCSemanticColor"+s.color;if(c==="sapSuiteBMCSemanticColor"+t.ValueColor.Error){e.openStart("div");e.class("sapSuiteBMCDiamond");e.class(i);e.class(c);e.style(r,o+"%");e.openEnd();e.close("div")}e.openStart("div");e.class("sapSuiteBMCThreshold");e.class(i);e.class(c);e.style(r,o+"%");e.openEnd();e.close("div")};l.extendMicroChartRenderer(s);return s},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/ComparisonMicroChart", ["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/ui/Device","sap/m/FlexBox","sap/suite/ui/microchart/MicroChartUtils","sap/m/library","sap/ui/core/ResizeHandler","./ComparisonMicroChartRenderer","sap/ui/core/Core","sap/ui/core/Theming","./ComparisonMicroChartData","sap/m/Menu","sap/m/MenuItem","sap/ui/core/Lib","sap/base/i18n/Localization"],function(jQuery,e,t,i,a,r,s,o,n,h,p,l,u,d,f,c){"use strict";const g=e.MicroChartColorType;var C=e.ComparisonMicroChartViewType;var v=s.Size;var _=["zh","zh-hk","zh-cn","zh-sg","zh-sw"];var m=t.extend("sap.suite.ui.microchart.ComparisonMicroChart",{metadata:{library:"sap.suite.ui.microchart",properties:{size:{type:"sap.m.Size",group:"Misc",defaultValue:"Auto"},scale:{type:"string",group:"Misc",defaultValue:""},minValue:{type:"float",group:"Appearance",defaultValue:null},maxValue:{type:"float",group:"Appearance",defaultValue:null},view:{type:"sap.suite.ui.microchart.ComparisonMicroChartViewType",group:"Appearance",defaultValue:"Normal"},colorPalette:{type:"string[]",group:"Appearance",defaultValue:[]},shrinkable:{type:"boolean",group:"Misc",defaultValue:false},width:{type:"sap.ui.core.CSSSize",group:"Appearance"},height:{type:"sap.ui.core.CSSSize",group:"Appearance"},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false},hideOnNoData:{type:"boolean",group:"Appearance",defaultValue:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},defaultAggregation:"data",aggregations:{data:{type:"sap.suite.ui.microchart.ComparisonMicroChartData",multiple:true,bindable:"bindable",defaultClass:l}},events:{press:{}}},renderer:n});m.THRESHOLD_LOOK_XS=6;m.THRESHOLD_LOOK_S=8.25;m.THRESHOLD_LOOK_M=10.5;m.THRESHOLD_LOOK_L=12;m.prototype.attachEvent=function(e,i,a,r){t.prototype.attachEvent.call(this,e,i,a,r);if(this.hasListeners("press")){this.$().attr("tabindex",0).addClass("sapSuiteUiMicroChartPointer")}return this};m.prototype.detachEvent=function(e,i,a){t.prototype.detachEvent.call(this,e,i,a);if(!this.hasListeners("press")){this.$().removeAttr("tabindex").removeClass("sapSuiteUiMicroChartPointer")}return this};m.prototype.onclick=function(e){if(!this.fireBarPress(e)){setTimeout(()=>{var e=this._oMenu;if(!e.isOpen()){this.firePress()}},0)}};m.prototype.oncontextmenu=function(e){this._openMenu();e.preventDefault();return false};m.prototype.fireBarPress=function(e){var t=e.target;var i=this._getBarIndex(t);var a=this._getSize()===v.L||this._getSize()===v.M;var r=!!t.getAttribute("data-bar-index");var s=false;if(a){s=i>=0?true:false}if(s||!a&&r){var o=this.getData()[i];if(o&&o.hasListeners("press")){var n=this.$().find(".sapSuiteUiMicroChartBarPointer");var h=n.index(this.$().find(".sapSuiteUiMicroChartBarPointer[tabindex='0']"));this._switchTabindex(h,i,n);return true}}return false};m.prototype.onsaptabprevious=function(){this.$().css("outline-color","")};m.prototype.onsaptabnext=function(){var e=this.$().next();if(e.hasClass("sapSuiteCpMC")&&e.attr("tabindex")){e.css("outline-color","")}};m.prototype.onsapenter=function(e){if(!this.fireBarPress(e)){this.firePress();e.preventDefault();e.stopImmediatePropagation()}};m.prototype.onsapspace=m.prototype.onsapenter;m.prototype.onsapup=function(e){var t=this.$().find(".sapSuiteUiMicroChartBarPointer");if(t.length>0){var i=t.index(e.target);this._switchTabindex(i,i-1,t)}e.preventDefault();e.stopImmediatePropagation()};m.prototype.onsapdown=function(e){var t=this.$().find(".sapSuiteUiMicroChartBarPointer");if(t.length>0){var i=t.index(e.target);this._switchTabindex(i,i+1,t)}e.preventDefault();e.stopImmediatePropagation()};m.prototype.onsaphome=function(e){var t=this.$().find(".sapSuiteUiMicroChartBarPointer");var i=t.index(e.target);if(i!==0&&t.length>0){this._switchTabindex(i,0,t)}e.preventDefault();e.stopImmediatePropagation()};m.prototype.onsapend=function(e){var t=this.$().find(".sapSuiteUiMicroChartBarPointer");var i=t.index(e.target),a=t.length;if(i!==a-1&&a>0){this._switchTabindex(i,a-1,t)}e.preventDefault();e.stopImmediatePropagation()};m.prototype.onsapleft=m.prototype.onsapup;m.prototype.onsapright=m.prototype.onsapdown;m.prototype.setMinValue=function(e){this._isMinValueSet=jQuery.isNumeric(e);return this.setProperty("minValue",this._isMinValueSet?e:NaN)};m.prototype.setMaxValue=function(e){this._isMaxValueSet=jQuery.isNumeric(e);return this.setProperty("maxValue",this._isMaxValueSet?e:NaN)};m.prototype.setSize=function(e){if(this.getSize()!==e){this.setProperty("size",e,false)}return this};m.prototype.init=function(){this._oRb=f.getResourceBundleFor("sap.suite.ui.microchart");this.setAggregation("tooltip","((AltText))",true);this._isMinValueSet=false;this._isMaxValueSet=false;this._bThemeApplied=false;this._oMenu=new u(this.getId()+"-detailView");this.addDependent(this._oMenu);h.ready(this._handleCoreInitialized.bind(this))};m.prototype._handleCoreInitialized=function(){p.attachApplied(this._handleThemeApplied.bind(this))};m.prototype._handleThemeApplied=function(){this._bThemeApplied=true;this.invalidate();p.detachApplied(this._handleThemeApplied.bind(this))};m.prototype._getBarIndex=function(e){var t=this.getData();for(var i=0;i<t.length;i++){if(t[i].getDomRef().contains(e)){return i}}return-1};m.prototype.onBeforeRendering=function(){if(this._sChartResizeHandlerId){o.deregister(this._sChartResizeHandlerId)}this._unbindMouseEnterLeaveHandler()};m.prototype.onAfterRendering=function(){e._checkControlIsVisible(this,this._onControlIsVisible);this._bindMouseEnterLeaveHandler();var t=c.getLanguageTag().language;var i=_.includes(t.toLowerCase());this.toggleStyleClass("sapCMCEastCharsPresent",i)};m.prototype._onControlIsVisible=function(){this._onResize();this._sChartResizeHandlerId=o.register(this,this._onResize.bind(this))};m.prototype.setBarPressable=function(e,t){if(t){var i=this._getBarAltText(e);this.$("chart-item-bar-"+e).addClass("sapSuiteUiMicroChartPointer").attr("tabindex",0).attr("title",i).attr("role","presentation").attr("aria-label",i)}else{this.$("chart-item-bar-"+e).removeAttr("tabindex").removeClass("sapSuiteUiMicroChartPointer").removeAttr("title").removeAttr("role").removeAttr("aria-label")}};m.prototype._getAltHeaderText=function(e){var t=this._oRb.getText("COMPARISONMICROCHART");if(e){t+=" "+this._oRb.getText("IS_ACTIVE")}if(!this._hasData()){t+="\n"+this._oRb.getText("NO_DATA");return t}return t};m.prototype._getAltSubText=function(e){var t="";for(var i=0;i<this.getData().length;i++){var a=this.getData()[i],r=this._getBarAltText(i),s=a.getTooltip_AsString(),o="";if(!s){continue}o=s.split("((AltText))").join(r);if(o){t+=(e?"":"\n")+o;e=false}}return t};m.prototype.exit=function(){o.deregister(this._sChartResizeHandlerId)};m.prototype._calculateChartData=function(){var e=[];var t=this.getData();var i=t.length;var a=0;var r=0;var s;var o;var n;var h;for(h=0;h<i;h++){var p=isNaN(t[h].getValue())?0:t[h].getValue();a=Math.max(a,p);r=Math.min(r,p)}if(this._isMinValueSet){r=Math.min(r,this.getMinValue())}if(this._isMaxValueSet){a=Math.max(a,this.getMaxValue())}s=a-r;o=s==0?0:Math.round(a*100/s);if(o==0&&a!=0){o=1}else if(o==100&&r!=0){o=99}n=100-o;for(h=0;h<i;h++){var l={};var u=isNaN(t[h].getValue())?0:t[h].getValue();l.value=s==0?0:Math.round(u*100/s);if(l.value==0&&u!=0){l.value=u>0?1:-1}else if(l.value==100){l.value=o}else if(l.value==-100){l.value=-n}if(l.value>=0){l.negativeNoValue=n;l.positiveNoValue=o-l.value}else{l.value=-l.value;l.negativeNoValue=n-l.value;l.positiveNoValue=o}e.push(l)}return e};m.prototype._getLocalizedColorMeaning=function(e){return g.hasOwnProperty(e)&&e!="None"?this._oRb.getText(("SEMANTIC_COLOR_"+e).toUpperCase()):""};m.prototype._getBarAltText=function(e){var i=this.getData()[e],a=t.prototype.getTooltip_AsString.apply(i,arguments),r=this.getColorPalette().length?"":this._getLocalizedColorMeaning(i.getColor()),s=i.getTitle()+" "+(i.getDisplayValue()?i.getDisplayValue():i.getValue())+this.getScale()+" "+r;if(!a){return""}return a.split("((AltText))").join(s)};m.prototype._onResize=function(){this.$().find(".sapSuiteCpMCChartItem").show();this._resizeHorizontally();this._resizeVertically()};m.prototype._resizeVertically=function(){var e,t,i,a,r,s,o,n,h,p=this.getData(),l=this.$(),u,d=l.find(".sapSuiteCpMCChartItem"),f=l.find(".sapSuiteCpMCChartBar");d.css("margin-bottom","");d.css("height","");f.css("height","");if(p.length>0&&p[0].getDomRef()){e=p[0].getDomRef().getBoundingClientRect().height;t=parseFloat(p[0].$().css("margin-bottom"));i=f.height();s=l.width();o=this._getCurrentBaseWidth();if(o>0){n=o/e;e=s/n;d.css("height",e);n=o/t;t=s/n;d.css("margin-bottom",t);n=o/i;f.css("height",s/n)}a=l.find(".sapSuiteCpMCVerticalAlignmentContainer")[0].getBoundingClientRect().height;r=0;for(var c=0;c<p.length;c++){r+=e;if(Math.floor(r)>Math.floor(a)){p[c].$().hide()}r+=t}u=this.$().find(".sapSuiteCpMCVerticalAlignmentContainer .sapSuiteCpMCChartItem:visible:last");if(u.length===1&&!this.getShrinkable()){u.css("margin-bottom","");h=this.getDomRef().getBoundingClientRect().bottom-u[0].getBoundingClientRect().bottom;if(h<t){u.css("margin-bottom",h<0?0:h)}}}};m.prototype._resizeHorizontally=function(){var e=this.$();var t=0;var i=0;var a=this.$().find(".sapSuiteCpMCChartItemTitle");var r=this.$().find(".sapSuiteCpMCChartItemValue");var s;var o;e.removeClass("sapSuiteCpMCLookL sapSuiteCpMCLookM sapSuiteCpMCLookS sapSuiteCpMCLookXS sapSuiteCpMCLookWide");o=this._getCurrentLookClass();e.addClass(o);if(!e.hasClass("sapSuiteCpMCLookXS")){this._hideTruncatedLabels(".sapSuiteCpMCChartItemValue")}a.width("auto");r.width("auto");if(e.hasClass("sapSuiteCpMCLookWide")){a.each(function(){s=this.getBoundingClientRect();if(s.width>t){t=Math.ceil(s.width)}});a.width(t);r.each(function(){s=this.getBoundingClientRect();if(s.width>i){i=Math.ceil(s.width)}});r.width(i)}};m.prototype._getCurrentBaseWidth=function(){var e=this.$();var t=parseInt(e.width());var i;if(this.getView()===C.Wide||t>this.convertRemToPixels(m.THRESHOLD_LOOK_L)||this.getSize()!==v.Responsive){i=0}else if(t>this.convertRemToPixels(m.THRESHOLD_LOOK_M)){i=this.convertRemToPixels(m.THRESHOLD_LOOK_L)}else if(t>this.convertRemToPixels(m.THRESHOLD_LOOK_S)){i=this.convertRemToPixels(m.THRESHOLD_LOOK_M)}else if(t>this.convertRemToPixels(m.THRESHOLD_LOOK_XS)){i=this.convertRemToPixels(m.THRESHOLD_LOOK_S)}else{i=0}return i};m.prototype._getCurrentLookClass=function(){var e=this.$();var t=parseInt(e.width());var i;if(this._shouldUseWideView()){i="sapSuiteCpMCLookWide"}else if(this.getSize()!==v.Responsive){i="sapSuiteCpMCLook"+this._getSize()}else if(t>this.convertRemToPixels(m.THRESHOLD_LOOK_M)){i="sapSuiteCpMCLookL"}else if(t>this.convertRemToPixels(m.THRESHOLD_LOOK_S)){i="sapSuiteCpMCLookM"}else if(t>this.convertRemToPixels(m.THRESHOLD_LOOK_XS)){i="sapSuiteCpMCLookS"}else{i="sapSuiteCpMCLookXS"}return i};m.prototype._getSize=function(){var e=this.getSize();if(e===v.Auto){if(i.system.phone){e=v.S}else{e=v.M}}return e};m.prototype._shouldUseWideView=function(){var e=parseInt(this.$().width());return this.getView()===C.Wide||this.getView()===C.Responsive&&e>this.convertRemToPixels(m.THRESHOLD_LOOK_L)};m.prototype._hideTruncatedLabels=function(e){var t=this.$();var i=t.find(e);for(var a=0;a<i.length;a++){jQuery(i[a]).removeClass("sapSuiteCpMCChartItemHiddenLabel");if(this._isLabelTruncated(i[a])){jQuery(i[a]).addClass("sapSuiteCpMCChartItemHiddenLabel")}}};m.prototype._addTitleAttribute=function(){var t=this.getTooltip_AsString();if(!e._isTooltipSuppressed(t)&&this._hasData()){if(this._isResponsive()){this.$().find(".sapSuiteCpMCVerticalAlignmentContainer").attr("title",t)}else{this.$().attr("title",t)}}};m.prototype._removeTitleAttribute=function(){if(this._isResponsive()){this.$().find(".sapSuiteCpMCVerticalAlignmentContainer").removeAttr("title")}else{this.$().removeAttr("title")}};m.prototype._resolveFocus=function(e){var t=jQuery(e.target);if(t&&t.attr("data-bar-index")){var i=parseInt(t.attr("data-bar-index"));var a=this.getData()[i];if(a&&a.hasListeners("press")){this.$().css("outline-color","transparent")}else{this.$().css("outline-color","")}}else{this.$().css("outline-color","")}};m.prototype._switchTabindex=function(e,t,i){if(e>=0&&e<i.length&&t>=0&&t<i.length){i.eq(e).removeAttr("tabindex");i.eq(t).attr("tabindex","0").trigger("focus")}};m.prototype._bindMouseEnterLeaveHandler=function(){if(!this._oMouseEnterLeaveHandler){this._oMouseEnterLeaveHandler={mouseEnterChart:this._addTitleAttribute.bind(this),mouseLeaveChart:this._removeTitleAttribute.bind(this),mouseDownChart:this._resolveFocus.bind(this)}}this.$().on("mouseenter",this._oMouseEnterLeaveHandler.mouseEnterChart);this.$().on("mouseleave",this._oMouseEnterLeaveHandler.mouseLeaveChart);this.$().on("mousedown",this._oMouseEnterLeaveHandler.mouseDownChart)};m.prototype._unbindMouseEnterLeaveHandler=function(){if(this._oMouseEnterLeaveHandler){this.$().off("mouseenter",this._oMouseEnterLeaveHandler.mouseEnterChart);this.$().off("mouseleave",this._oMouseEnterLeaveHandler.mouseLeaveChart);this.$().off("mousedown",this._oMouseEnterLeaveHandler.mouseDownChart)}};m.prototype._hasData=function(){return this.getData().length>0};m.prototype._openMenu=function(){if(this._isDataChanged()){this._oMenu.removeAllItems();this._oMenu.addItem(new d({text:this._oRb.getText("DELTAMICROCHART_ENTIRE_CHART"),press:this._fireChart.bind(this)}));this.getData().forEach(e=>{this._oMenu.addItem(new d({text:this._oRb.getText("DELTAMICROCHART_MENU_ITEM",[e.getTitle()]),press:this._onMenuItemClick.bind(this)}))})}if(this._hasData()){this._oMenu.openBy(this,true,"right")}};m.prototype._fireChart=function(){this.firePress()};m.prototype._isDataChanged=function(){var e=[];var t=[];this.getData().forEach(t=>{e.push(t.getTitle())});this._oMenu.getItems().forEach(e=>{t.push(e.getText())});if(e.length!==t.length){return true}for(var i=0;i<e.length;i++){if(e[i]!=t[i]){return true}}return false};m.prototype._onMenuItemClick=function(e){var t=e.getSource();var i=this._getIndex(t,t.getParent());var a=this.getData()[i-1];if(a&&a.hasListeners("press")){a.firePress()}};m.prototype._getIndex=function(e,t){var i=t.getItems();for(var a=0;a<i.length;a++){if(i[a]===e){return a}}return 0};m.prototype.firePress=function(){if(this._hasData()){t.prototype.fireEvent.call(this,"press",arguments)}};r.extendMicroChart(m);return m});
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/ComparisonMicroChartData", ["./library","sap/ui/core/Element","sap/ui/core/Control","sap/m/library","sap/suite/ui/microchart/MicroChartUtils"],function(t,e,r,i,a){"use strict";const o=t.MicroChartColorType;var s=i.Size;var n=e.extend("sap.suite.ui.microchart.ComparisonMicroChartData",{metadata:{library:"sap.suite.ui.microchart",properties:{value:{type:"float",group:"Misc",defaultValue:"0"},color:{group:"Misc",type:"string",defaultValue:o.Neutral},title:{type:"string",group:"Misc",defaultValue:""},displayValue:{type:"string",group:"Misc",defaultValue:""}},events:{press:{}}}});n.prototype.init=function(){this.setAggregation("tooltip","((AltText))",true)};n.prototype.setValue=function(t,e){this._isValueSet=this._fnIsNumber(t);return this.setProperty("value",this._isValueSet?t:NaN,e)};n.prototype._fnIsNumber=function(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)};n.prototype.clone=function(t,e,i){var a=r.prototype.clone.apply(this,arguments);a._isValueSet=this._isValueSet;return a};n.prototype.attachEvent=function(t,e,i,a){r.prototype.attachEvent.call(this,t,e,i,a);if(this.getParent()){this.getParent().setBarPressable(this.getParent().getData().indexOf(this),true)}return this};n.prototype.detachEvent=function(t,e,i){r.prototype.detachEvent.call(this,t,e,i);if(this.getParent()){this.getParent().setBarPressable(this.getParent().getData().indexOf(this),false)}return this};n.prototype.onsapenter=function(t){this.firePress()};n.prototype.onsapspace=n.prototype.onsapenter;n.prototype.onclick=function(t){var e=this.getParent()?._getSize();if(e===s.XS||e===s.S){var r=t.target;if(r&&!r.getAttribute("data-bar-index")){return}}setTimeout(()=>{var t=this.getParent()?._oMenu;if(!t.isOpen()){this.firePress()}},0);t.preventDefault()};n.prototype.oncontextmenu=function(t){if(this.getParent()){this.getParent().oncontextmenu(t)}};a.extendMicroChartSetColor(n);return n});
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/ComparisonMicroChartRenderer", ["./library","sap/suite/ui/microchart/MicroChartRenderUtils","sap/ui/core/theming/Parameters","sap/m/library"],function(e,t,a,i){"use strict";const r=e.MicroChartColorType;var s=i.Size;var n={apiVersion:2};n.render=function(e,t){if(!t._bThemeApplied){return}if(t._hasData()){var a=t.getTooltip_AsString(t.hasListeners("press"));e.openStart("div",t);this._writeMainProperties(e,t);if(t.getShrinkable()){e.class("sapSuiteCpMCShrinkable");e.style("height","auto")}e.openEnd();this._renderInnerContent(e,t,a);e.openStart("div",t.getId()+"-info");e.attr("aria-hidden","true");e.style("display","none");e.openEnd();e.text(a);e.close("div");e.openStart("div",t.getId()+"-hidden");e.attr("aria-hidden","true");e.attr("focusable","false");e.openEnd();e.close("div");e.close("div")}else{this._renderNoData(e,t)}};n._writeMainProperties=function(e,t){var a=t.hasListeners("press");this._renderActiveProperties(e,t);var i=t.getTooltip_AsString(a);e.attr("role","figure");if(t.getAriaLabelledBy().length){e.accessibilityState(t)}else{e.attr("aria-label",i)}e.class("sapSuiteCpMC");e.class("sapSuiteCpMCChartContent");e.class(t._isResponsive()?"sapSuiteCpMCResponsive":"sapSuiteCpMCSize"+t.getSize());e.class("sapSuiteCpMCViewType"+t.getView());e.style("width",t.getWidth());e.style("height",t.getHeight())};n._renderInnerContent=function(e,t){var i=t.getColorPalette().length,r=0,s=t.getData(),n=t._calculateChartData();var l=function(e){if(i){if(r===i){r=0}e=t.getColorPalette()[r++].trim()}return a.get(e)||e};e.openStart("div");e.class("sapSuiteCpMCVerticalAlignmentContainer");e.openEnd();for(var o=0;o<n.length;o++){this._renderChartItem(e,t,n[o],o,l(s[o].getColor()))}e.close("div")};n._renderChartItem=function(e,t,a,i,r){var n=t.getData();var l=t._getSize();var o=l===s.L||l===s.M;e.openStart("div",n[i]);e.class("sapSuiteCpMCChartItem");if(o){this._applyAriaAttributes(e,t,i)}e.openEnd();this._renderChartTitle(e,t,i);this._renderChartBar(e,t,a,i,r);this._renderChartValue(e,t,i,r);e.close("div")};n._applyAriaAttributes=function(t,a,i){if(a.getData()[i].hasListeners("press")){if(i===0){t.attr("tabindex","0")}t.attr("role","presentation");t.attr("aria-label",a._getBarAltText(i));if(!e._isTooltipSuppressed(a._getBarAltText(i))){t.attr("title",a._getBarAltText(i))}else{t.attr("title","")}t.attr("data-bar-index",i);t.class("sapSuiteUiMicroChartBarPointer")}};n._renderChartBar=function(e,t,a,i,r){var n=t.getData()[i];var l=t._getSize();var o=l===s.L||l===s.M;e.openStart("div",t.getId()+"-chart-item-bar-"+i);e.class("sapSuiteCpMCChartBar");if(!o){this._applyAriaAttributes(e,t,i)}e.openEnd();if(a.negativeNoValue>0){e.openStart("div");e.attr("data-bar-index",i);e.class("sapSuiteCpMCChartBarNegNoValue");if(a.value>0||a.positiveNoValue>0){e.class("sapSuiteCpMCNotLastBarPart")}e.style("width",a.negativeNoValue+"%");e.openEnd();e.close("div")}if(a.value>0){e.openStart("div");e.attr("data-bar-index",i);e.class("sapSuiteCpMCChartBarValue");e.class("sapSuiteCpMCSemanticColor"+n.getColor());e.style("background-color",r?r:"");e.style("width",a.value+"%");e.openEnd();e.close("div")}if(a.positiveNoValue>0){e.openStart("div");e.attr("data-bar-index",i);e.class("sapSuiteCpMCChartBarNoValue");if(a.negativeNoValue&&!a.value){e.class("sapSuiteCpMCNegPosNoValue")}else if(a.negativeNoValue||a.value){e.class("sapSuiteCpMCNotFirstBarPart")}e.style("width",a.positiveNoValue+"%");e.openEnd();e.close("div")}e.close("div")};n._renderChartTitle=function(e,t,a){var i=t.getData()[a];e.openStart("div",t.getId()+"-chart-item-"+a+"-title");e.class("sapSuiteCpMCChartItemTitle");e.openEnd();e.text(i.getTitle());e.close("div")};n._renderChartValue=function(e,t,a,i){var s=t.getData()[a];var n=t.getScale();var l=s.getDisplayValue();var o=l?l:""+s.getValue();var p=o+n;e.openStart("div",t.getId()+"-chart-item-"+a+"-value");e.class("sapSuiteCpMCChartItemValue");if(r.hasOwnProperty(i)){e.class("sapSuiteCpMCSemanticColor"+s.getColor())}if(s.getTitle()){e.class("sapSuiteCpMCTitle")}e.openEnd();if(!isNaN(s.getValue())){e.text(p)}e.close("div")};t.extendMicroChartRenderer(n);return n},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/HarveyBallMicroChart", ["./library","sap/ui/core/Control","sap/ui/Device","sap/ui/events/KeyCodes","sap/suite/ui/microchart/MicroChartUtils","sap/ui/core/ResizeHandler","./HarveyBallMicroChartRenderer","sap/ui/core/Core","sap/ui/core/Theming","./HarveyBallMicroChartItem"],function(t,e,i,a,r,s,o,n,l,p){"use strict";const h=t.MicroChartColorType;var u=e.extend("sap.suite.ui.microchart.HarveyBallMicroChart",{metadata:{library:"sap.suite.ui.microchart",properties:{total:{group:"Misc",type:"float",defaultValue:null},totalLabel:{group:"Misc",type:"string"},totalScale:{group:"Misc",type:"string"},formattedLabel:{group:"Misc",type:"boolean",defaultValue:false},showTotal:{group:"Misc",type:"boolean",defaultValue:true},showFractions:{group:"Misc",type:"boolean",defaultValue:true},size:{group:"Misc",type:"sap.m.Size",defaultValue:"Auto"},colorPalette:{type:"string[]",group:"Appearance",defaultValue:[]},width:{type:"sap.ui.core.CSSSize",group:"Misc"},height:{type:"sap.ui.core.CSSSize",group:"Misc"},alignContent:{group:"Misc",type:"sap.suite.ui.microchart.HorizontalAlignmentType",defaultValue:"Left"},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false},hideOnNoData:{type:"boolean",group:"Appearance",defaultValue:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},defaultAggregation:"items",aggregations:{items:{multiple:true,type:"sap.suite.ui.microchart.HarveyBallMicroChartItem",bindable:"bindable",defaultClass:p}},events:{press:{}}},renderer:o});u.VALUE_TRUNCATION_DIGITS=5;u.THRESHOLD_LOOK_XS=1.125;u.THRESHOLD_LOOK_S=3.5;u.THRESHOLD_LOOK_M=4.5;u.THRESHOLD_LOOK_L=5.875;u.prototype._getAltHeaderText=function(t){var e=this._oRb.getText("HARVEYBALLMICROCHART");if(t){e+=" "+this._oRb.getText("IS_ACTIVE")}if(!this._hasData()){e+="\n"+this._oRb.getText("NO_DATA");return e}return e};u.prototype._getAltSubText=function(t){var e="";var i=this.getItems();i.forEach(function(i){var a=i.getColor(),r=i.getTooltip_AsString(),s="";if(!r){return}var o=this.getColorPalette().length===0&&h.hasOwnProperty(a)?this._oRb.getText(("SEMANTIC_COLOR_"+a).toUpperCase()):"";var n=i.getFractionLabel();var l=i.getFractionScale();if(!n&&l){n=i.getFormattedLabel()?i.getFraction():i.getFraction()+i.getFractionScale().substring(0,3)}else if(!i.getFormattedLabel()&&i.getFractionLabel()&&l){n+=i.getFractionScale().substring(0,3)}s+=n+" "+o;s=r.split("((AltText))").join(s);if(s){e+="\n"+s;t=false}}.bind(this));if(this.getTotal()){var a=this.getTotalLabel();if(!a){if(this.getFormattedLabel()&&this.getTotal()){a=this.getTotal()}else if(this.getTotalScale()&&this.getTotal()){a=this.getTotal()+this.getTotalScale().substring(0,3)}}else if(!this.getFormattedLabel()&&this.getTotalScale()){a+=this.getTotalScale().substring(0,3)}e+=(t?"":"\n")+this._oRb.getText("HARVEYBALLMICROCHART_TOTAL_TOOLTIP")+" "+a}return e};u.prototype.getTooltip_AsString=function(t){var i=e.prototype.getTooltip_AsString.apply(this,arguments),a=this._getAltHeaderText(t),r=false;if(i){a=i.split("((AltText))").join(a)}if(!i||!a){a="";r=true}a+=this._getAltSubText(r);return a};u.prototype.init=function(){this._oRb=n.getLibraryResourceBundle("sap.suite.ui.microchart");this.setAggregation("tooltip","((AltText))",true);i.media.attachHandler(this.invalidate,this,i.media.RANGESETS.SAP_STANDARD);this._sChartResizeHandlerId=null;this._bThemeApplied=false;n.ready(this._handleCoreInitialized.bind(this))};u.prototype.setSize=function(t){if(this.getSize()!==t){this.setProperty("size",t,false)}return this};u.prototype._handleCoreInitialized=function(){l.attachApplied(this._handleThemeApplied.bind(this))};u.prototype._handleThemeApplied=function(){this._bThemeApplied=true;this.invalidate();l.detachApplied(this._handleThemeApplied.bind(this))};u.prototype.onBeforeRendering=function(){if(this._sChartResizeHandlerId){s.deregister(this._sChartResizeHandlerId)}this._unbindMouseEnterLeaveHandler()};u.prototype.onAfterRendering=function(){t._checkControlIsVisible(this,this._onControlIsVisible);this._bindMouseEnterLeaveHandler()};u.prototype._onControlIsVisible=function(){this._onResize();this._sChartResizeHandlerId=s.register(this,this._onResize.bind(this))};u.prototype._onResize=function(){var t=this.$(),e=t.height(),i=t.find(".sapSuiteHBMCChart").first(),a=t.find(".sapSuiteHBMCTextContainer").first(),r,s;t.removeClass("sapSuiteHBMCLookL sapSuiteHBMCLookM sapSuiteHBMCLookS sapSuiteHBMCLookXS");a.removeClass("sapSuiteHBMCTextContainerHide");i.css("width",i.css("height"));var o=t.find(".sapSuiteHBMCChartSvg")[0];if(o){o.setAttribute("viewBox","0 0 72 72")}if(e<this.convertRemToPixels(u.THRESHOLD_LOOK_S)){t.addClass("sapSuiteHBMCLookXS");if(o){o.setAttribute("viewBox","5 5 62 62")}}else if(e<this.convertRemToPixels(u.THRESHOLD_LOOK_M)){t.addClass("sapSuiteHBMCLookS")}else if(e<this.convertRemToPixels(u.THRESHOLD_LOOK_L)){t.addClass("sapSuiteHBMCLookM")}else{t.addClass("sapSuiteHBMCLookL")}r=t.width();s=i.width()+a.outerWidth();if(r<s){a.addClass("sapSuiteHBMCTextContainerHide")}};u.prototype._parseFormattedValue=function(t){return{scale:t.replace(/.*?([^+-.,\d]*)$/g,"$1").trim(),value:t.replace(/(.*?)[^+-.,\d]*$/g,"$1").trim()}};u.prototype.ontap=function(t){if(this.hasListeners("press")===true){t.setMarked();t.stopPropagation()}this.firePress()};u.prototype.onkeydown=function(t){if(t.which==a.SPACE){t.preventDefault()}};u.prototype.onkeyup=function(t){if(t.which===a.ENTER||t.which===a.SPACE){this.firePress();t.preventDefault()}};u.prototype.attachEvent=function(t,i,a,r){e.prototype.attachEvent.call(this,t,i,a,r);if(this.hasListeners("press")){this.$().attr("tabindex",0).addClass("sapSuiteUiMicroChartPointer")}return this};u.prototype.detachEvent=function(t,i,a){e.prototype.detachEvent.call(this,t,i,a);if(!this.hasListeners("press")){this.$().removeAttr("tabindex").removeClass("sapSuiteUiMicroChartPointer")}return this};u.prototype.exit=function(t){i.media.detachHandler(this.invalidate,this,i.media.RANGESETS.SAP_STANDARD);s.deregister(this._sChartResizeHandlerId)};u.prototype._addTitleAttribute=function(){if(!this.$().attr("title")&&this._hasData()){this.$().attr("title",this.getTooltip_AsString())}};u.prototype._removeTitleAttribute=function(){if(this.$().attr("title")){this.$().removeAttr("title")}};u.prototype._bindMouseEnterLeaveHandler=function(){this.$().on("mouseenter.tooltip",this._addTitleAttribute.bind(this));this.$().on("mouseleave.tooltip",this._removeTitleAttribute.bind(this))};u.prototype._unbindMouseEnterLeaveHandler=function(){this.$().off("mouseenter.tooltip");this.$().off("mouseleave.tooltip")};u._truncateValue=function(t,e){var i=t.replace(String.fromCharCode(8206),"").replace(String.fromCharCode(8207),"");var a=i.replace(/[+-., \d]*(.*)$/g,"$1").trim().replace(/\.$/,"");t=i.replace(/([+-., \d]*).*$/g,"$1").trim();var r=t[e-1]==="."||t[e-1]===",";if(t.length>=e&&r){return t.substring(0,e-1)+a}else{return t.substring(0,e)+a}};u.prototype._hasData=function(){return this.getItems().length>0};u.prototype.firePress=function(){if(this._hasData()){e.prototype.fireEvent.call(this,"press",arguments)}};r.extendMicroChart(u);return u});
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/HarveyBallMicroChartItem", ["./library","sap/ui/core/Element","sap/suite/ui/microchart/MicroChartUtils"],function(t,r,e){"use strict";const i=t.MicroChartColorType;var a=r.extend("sap.suite.ui.microchart.HarveyBallMicroChartItem",{metadata:{library:"sap.suite.ui.microchart",properties:{color:{group:"Misc",type:"string",defaultValue:i.Neutral},fraction:{group:"Misc",type:"float",defaultValue:0},fractionLabel:{group:"Misc",type:"string"},fractionScale:{group:"Misc",type:"string"},formattedLabel:{group:"Misc",type:"boolean",defaultValue:false}}}});a.prototype.init=function(){this.setAggregation("tooltip","((AltText))",true)};e.extendMicroChartSetColor(a);return a});
/*!
* SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
*/
sap.ui.predefine("sap/suite/ui/microchart/HarveyBallMicroChartRenderer", ["sap/m/library","./library","sap/base/security/encodeXML","sap/suite/ui/microchart/MicroChartRenderUtils","sap/ui/core/theming/Parameters"],function(e,t,a,r,i){"use strict";var s=e.ValueCSSColor;const n=t.MicroChartColorType;var l;var o={apiVersion:2};o._iReferenceControlSize=72;o._iReferenceControlCenter=o._iReferenceControlSize/2;o.render=function(e,t){l=l||sap.ui.require("sap/suite/ui/microchart/HarveyBallMicroChart");if(!t._hasData()){this._renderNoData(e,t);return}if(!t._bThemeApplied){return}this._calculatePath(t);var r=t.getColorPalette();var o="";var c="";var h="";var p=false;var u=0;var g="";var d=function(e){if(n.hasOwnProperty(e)){g="sapSuiteHBMCSemanticColor"+a(e)}else{return s.isValid(e)&&i.get(e)||e}return null};var S=r.length>0?d(r[0]):null;var v=this._oPath.center;if(t._isThemeHighContrast()){v-=1}if(t.getItems().length){var C=t.getItems()[0];u=C.getFraction();c=C.getFractionLabel()?C.getFractionLabel():c+C.getFraction();h=C.getFractionScale()?C.getFractionScale().substring(0,3):h;p=C.getFormattedLabel();if(!S&&!g){S=d(C.getColor())}}if(p){var f=t._parseFormattedValue(c);h=f.scale.substring(0,3);c=f.value}var _=t.getTotal();var M=t.getTotalLabel()?t.getTotalLabel():""+t.getTotal();if(t.getTotalScale()){o=t.getTotalScale().substring(0,3)}if(t.getFormattedLabel()){var b=t._parseFormattedValue(M);o=b.scale.substring(0,3);M=b.value}if(c){c=l._truncateValue(c,l.VALUE_TRUNCATION_DIGITS)}if(M){M=l._truncateValue(M,l.VALUE_TRUNCATION_DIGITS)}e.openStart("div",t);this._writeMainProperties(e,t);e.openEnd();e.openStart("div");e.class("sapSuiteHBMCAlign"+t.getAlignContent());e.class("sapSuiteHBMCVerticalAlignmentContainer");e.openEnd();e.openStart("div");e.class("sapSuiteHBMCChart");e.openEnd();e.openStart("svg",t.getId()+"-harvey-ball");e.class("sapSuiteHBMCChartSvg");e.attr("viewBox","0 0 72 72");e.attr("focusable",false);e.openEnd();e.openStart("g").openEnd();e.openStart("circle");e.attr("cx",this._oPath.center);e.attr("cy",this._oPath.center);e.attr("r",v);e.class("sapSuiteHBMCBackgroundCircle");e.openEnd();e.close("circle");if(u&&u>=_){e.openStart("circle");e.attr("cx",this._oPath.center);e.attr("cy",this._oPath.center);e.attr("r",v-this._oPath.border);e.class("sapSuiteHBMCSegment");if(S){e.style("fill",S)}else{e.class(g)}e.openEnd();e.close("circle")}else if(u>0){e.openStart("path",t.getId()+"-segment");e.class("sapSuiteHBMCSegment");if(S){e.style("fill",S)}else{e.class(g)}e.attr("d",this._serializePieChart());e.openEnd();e.close("path")}e.close("g");e.close("svg");e.close("div");e.openStart("div");e.class("sapSuiteHBMCTextContainer");e.openEnd();if(t.getShowFractions()){e.openStart("div");e.class("sapSuiteHBMCValueContainer");e.openEnd();this.renderLabel(e,t,[g,"sapSuiteHBMCValue"],c,S,"-fraction");this.renderLabel(e,t,[g,"sapSuiteHBMCValueScale"],h,S,"-fraction-scale");e.close("div")}if(t.getShowTotal()){e.openStart("div");e.class("sapSuiteHBMCTotalContainer");e.openEnd();this.renderLabel(e,t,[g,"sapSuiteHBMCTotal"],M,S,"-total");this.renderLabel(e,t,[g,"sapSuiteHBMCTotalScale"],o,S,"-total-scale");e.close("div")}e.close("div");e.close("div");e.close("div")};o._writeMainProperties=function(e,t){var a=t.hasListeners("press");this._renderActiveProperties(e,t);var r=t.getTooltip_AsString(a);e.attr("role","figure");if(t.getAriaLabelledBy().length){e.accessibilityState(t)}else{e.attr("aria-label",r)}e.class("sapSuiteHBMC");e.class("sapSuiteHBMCSize"+t.getSize());e.style("width",t.getWidth());e.style("height",t.getHeight())};o.renderLabel=function(e,t,a,r,i,s){var n=!(a.indexOf("sapSuiteHBMCTotal")>-1||a.indexOf("sapSuiteHBMCTotalScale")>-1);e.openStart("span",t.getId()+s);for(var l=0;l<a.length;l++){if(!(l===0&&i&&n)){e.class(a[l])}}e.openEnd();if(r){e.text(r)}e.close("span")};o._calculatePath=function(e){var t=e.getTotal();var a=0;if(e.getItems().length){a=e.getItems()[0].getFraction()}var r=o._iReferenceControlCenter;var i=5;this._oPath={initial:{x:r,y:r},lineTo:{x:r,y:i},arc:{x1:r-i,y1:r-i,largeArc:0,x2:"",y2:""},size:o._iReferenceControlSize,border:i,center:r};var s=a/t*360;var n=Math.PI/180;var l=this._oPath.center-this._oPath.border;var c=l*Math.cos((s-90)*n)+this._oPath.center;var h=this._oPath.size-(l*Math.sin((s+90)*n)+this._oPath.center);this._oPath.arc.x2=c.toFixed(2);this._oPath.arc.y2=h.toFixed(2);var p=t/a<2?1:0;this._oPath.arc.largeArc=p};o._serializePieChart=function(){var e=this._oPath;return["M",e.initial.x,",",e.initial.y," L",e.initial.x,",",e.lineTo.y," A",e.arc.x1,",",e.arc.y1," 0 ",e.arc.largeArc,",1 ",e.arc.x2,",",e.arc.y2," L",e.initial.x,",",e.initial.y," z"].join("")};r.extendMicroChartRenderer(o);return o},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/MicroChartRenderUtils", ["sap/ui/core/Lib"],function(e){"use strict";var t={apiVersion:2,extendMicroChartRenderer:function(t){t._renderNoData=function(t,i){if(!i.getHideOnNoData()){t.openStart("div",i);this._writeMainProperties(t,i);t.openEnd();t.openStart("div");t.class("sapSuiteUiMicroChartNoData");t.openEnd();t.openStart("div");t.class("sapSuiteUiMicroChartNoDataTextWrapper");t.openEnd();var r=e.getResourceBundleFor("sap.suite.ui.microchart");var a=r.getText("NO_DATA");t.openStart("span").openEnd();t.text(a);t.close("span");t.close("div");t.close("div");t.close("div")}};t._renderActiveProperties=function(e,t){var i=t.hasListeners("press");if(i){if(t._hasData()){e.class("sapSuiteUiMicroChartPointer")}e.attr("tabindex","0")}}}};return t},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/MicroChartUtils", ["sap/ui/core/Control","sap/m/library","sap/ui/core/Theming","sap/ui/thirdparty/jquery","sap/ui/core/Lib","./library"],function(t,e,r,jQuery,o,i){"use strict";var n=o.getResourceBundleFor("sap.suite.ui.microchart");var s=e.Size;const u=i.MicroChartColorType;const a=e.ValueCSSColor;var l={extendMicroChart:function(o){o.prototype._isResponsive=function(){return this.getSize()===s.Responsive};o.prototype._digitsAfterDecimalPoint=function(t){var e=(""+t).match(/[.,](\d+)/g);return e?(""+e).length-1:0};o.prototype.getAccessibilityInfo=function(){return{type:n.getText("ACC_CTR_TYPE_MICROCHART"),description:this.getTooltip_AsString()}};o.prototype._isThemeHighContrast=function(){return/(hcw|hcb)/g.test(r.getTheme())};o.prototype.convertRemToPixels=function(t){return t*parseFloat(window.getComputedStyle(document.documentElement).fontSize)};o.prototype._isAnyLabelTruncated=function(t){return t.toArray().some(this._isLabelTruncated)};o.prototype._isAnyLabelVerticallyTruncated=function(t){return t.toArray().some(this._isLabelVerticallyTruncated)};o.prototype._isLabelTruncated=function(t){return t.scrollWidth>t.offsetWidth};o.prototype._isLabelVerticallyTruncated=function(t){return Math.abs(t.scrollHeight-t.offsetHeight)>1};o.prototype._isAnyLabelNumericAndTruncated=function(t){return t.toArray().some(this._isLabelNumericAndTruncated.bind(this))};o.prototype._isLabelNumericAndTruncated=function(t){return!jQuery.isNumeric(t.textContent)?false:this._isLabelTruncated(t)};o.prototype.isColorCorrect=function(t){if(u.hasOwnProperty(t)&&t!==""){return true}if(e.ValueCSSColor.isValid(t)&&t!==""){return true}if(e.ValueCSSColor.isValid(t.below)&&t.below!==""&&e.ValueCSSColor.isValid(t.above)&&t.above!==""){return true}if(u.hasOwnProperty(t.below)&&t.below!==""&&u.hasOwnProperty(t.above)&&t.above!==""){return true}else{return false}};o.prototype.getTooltip_AsString=function(e){var r=t.prototype.getTooltip_AsString.apply(this,arguments),o=this._getAltHeaderText(e),i=false;if(r){r=r.split("((AltText))").join(o)}if(!r){r="";i=true}if(this._getAltSubText){r+=this._getAltSubText(i)}return r}},extendMicroChartSetColor:function(t){t.prototype.setColor=function(t,e){var r=false;if(u.hasOwnProperty(t)){r=true}else{r=a.isValid(t)}if(t!=null&&!r){throw new Error(`Value ${t} is not valid for property "color"`)}return this.setProperty("color",r?t:null,e)}}};return l},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/library", ["sap/ui/base/DataType","sap/ui/core/IntervalTrigger","sap/ui/core/Lib","sap/ui/core/library","sap/m/library"],function(i,e,a){"use strict";var r=a.init({name:"sap.suite.ui.microchart",apiVersion:2,version:"1.132.1",dependencies:["sap.ui.core","sap.m"],types:["sap.suite.ui.microchart.AreaMicroChartViewType","sap.suite.ui.microchart.BulletMicroChartModeType","sap.suite.ui.microchart.CommonBackgroundType","sap.suite.ui.microchart.ComparisonMicroChartViewType","sap.suite.ui.microchart.DeltaMicroChartViewType","sap.suite.ui.microchart.HorizontalAlignmentType","sap.suite.ui.microchart.LoadStateType","sap.suite.ui.microchart.LineType","sap.suite.ui.microchart.MicroChartColorType"],interfaces:[],controls:["sap.suite.ui.microchart.AreaMicroChart","sap.suite.ui.microchart.BulletMicroChart","sap.suite.ui.microchart.ColumnMicroChart","sap.suite.ui.microchart.ComparisonMicroChart","sap.suite.ui.microchart.DeltaMicroChart","sap.suite.ui.microchart.HarveyBallMicroChart","sap.suite.ui.microchart.LineMicroChart","sap.suite.ui.microchart.InteractiveBarChart","sap.suite.ui.microchart.InteractiveDonutChart","sap.suite.ui.microchart.InteractiveLineChart","sap.suite.ui.microchart.RadialMicroChart","sap.suite.ui.microchart.StackedBarMicroChart"],elements:["sap.suite.ui.microchart.AreaMicroChartPoint","sap.suite.ui.microchart.AreaMicroChartItem","sap.suite.ui.microchart.AreaMicroChartLabel","sap.suite.ui.microchart.BulletMicroChartData","sap.suite.ui.microchart.ColumnMicroChartData","sap.suite.ui.microchart.ColumnMicroChartLabel","sap.suite.ui.microchart.ComparisonMicroChartData","sap.suite.ui.microchart.HarveyBallMicroChartItem","sap.suite.ui.microchart.LineMicroChartPoint","sap.suite.ui.microchart.LineMicroChartEmphasizedPoint","sap.suite.ui.microchart.LineMicroChartLine","sap.suite.ui.microchart.InteractiveBarChartBar","sap.suite.ui.microchart.InteractiveDonutChartSegment","sap.suite.ui.microchart.InteractiveLineChartPoint","sap.suite.ui.microchart.StackedBarMicroChartBar"]});r.AreaMicroChartViewType={Normal:"Normal",Wide:"Wide"};i.registerEnum("sap.suite.ui.microchart.AreaMicroChartViewType",r.AreaMicroChartViewType);r.BulletMicroChartModeType={Actual:"Actual",Delta:"Delta"};i.registerEnum("sap.suite.ui.microchart.BulletMicroChartModeType",r.BulletMicroChartModeType);r.CommonBackgroundType={Lightest:"Lightest",ExtraLight:"ExtraLight",Light:"Light",MediumLight:"MediumLight",Medium:"Medium",Dark:"Dark",ExtraDark:"ExtraDark",Darkest:"Darkest",Transparent:"Transparent"};i.registerEnum("sap.suite.ui.microchart.CommonBackgroundType",r.CommonBackgroundType);r.LineType={Solid:"Solid",Dashed:"Dashed",Dotted:"Dotted"};i.registerEnum("sap.suite.ui.microchart.LineType",r.LineType);r.HorizontalAlignmentType={Left:"Left",Center:"Center",Right:"Right"};i.registerEnum("sap.suite.ui.microchart.HorizontalAlignmentType",r.HorizontalAlignmentType);r.ComparisonMicroChartViewType={Normal:"Normal",Wide:"Wide",Responsive:"Responsive"};i.registerEnum("sap.suite.ui.microchart.ComparisonMicroChartViewType",r.ComparisonMicroChartViewType);r.DeltaMicroChartViewType={Normal:"Normal",Wide:"Wide",Responsive:"Responsive"};i.registerEnum("sap.suite.ui.microchart.DeltaMicroChartViewType",r.DeltaMicroChartViewType);r.LoadStateType={Loading:"Loading",Loaded:"Loaded",Failed:"Failed",Disabled:"Disabled"};r.MicroChartColorType={Neutral:"Neutral",None:"None",Good:"Good",Critical:"Critical",Error:"Error",Sequence1:"Sequence1",Sequence2:"Sequence2",Sequence3:"Sequence3",Sequence4:"Sequence4",Sequence5:"Sequence5",Sequence6:"Sequence6",Sequence7:"Sequence7",Sequence8:"Sequence8",Sequence9:"Sequence9",Sequence10:"Sequence10",Sequence11:"Sequence11",Sequence12:"Sequence12"};i.registerEnum("sap.suite.ui.microchart.MicroChartColorType",r.MicroChartColorType);r._aStandardMarginClassNames=["sapUiTinyMargin","sapUiSmallMargin","sapUiMediumMargin","sapUiLargeMargin","sapUiTinyMarginBeginEnd","sapUiTinyMarginTopBottom","sapUiSmallMarginBeginEnd","sapUiSmallMarginTopBottom","sapUiMediumMarginBeginEnd","sapUiMediumMarginTopBottom","sapUiLargeMarginBeginEnd","sapUiLargeMarginTopBottom","sapUiTinyMarginTop","sapUiTinyMarginBottom","sapUiTinyMarginBegin","sapUiTinyMarginEnd","sapUiSmallMarginTop","sapUiSmallMarginBottom","sapUiSmallMarginBegin","sapUiSmallMarginEnd","sapUiMediumMarginTop","sapUiMediumMarginBottom","sapUiMediumMarginBegin","sapUiMediumMarginEnd","sapUiLargeMarginTop","sapUiLargeMarginBottom","sapUiLargeMarginBegin","sapUiLargeMarginEnd","sapUiResponsiveMargin","sapUiNoMargin","sapUiNoMarginTop","sapUiNoMarginBottom","sapUiNoMarginBegin","sapUiNoMarginEnd"];r._removeStandardMargins=function(i){for(var e=0;e<r._aStandardMarginClassNames.length;e++){if(i.hasStyleClass(r._aStandardMarginClassNames[e])){i.removeStyleClass(r._aStandardMarginClassNames[e])}}};r._passParentContextToChild=function(i,e){if(i.data("_parentRenderingContext")){e.data("_parentRenderingContext",i.data("_parentRenderingContext"))}else if(typeof i.getParent==="function"){e.data("_parentRenderingContext",i.getParent())}};r._isTooltipSuppressed=function(i){return i!==null&&i!==undefined&&!i.trim()};r._checkControlIsVisible=function(i,a){function r(){return i.getVisible()&&i.getDomRef()&&i.$().is(":visible")&&i.getDomRef().getBoundingClientRect().width!==0}function t(){if(r()){e.removeListener(t);a.call(i)}}var o=i.exit;i.exit=function(){e.removeListener(t);if(o){o.call(i)}};if(r()){a.call(i)}else{e.addListener(t)}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/analytics/odata4analytics", ["sap/base/security/encodeURL","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/Sorter","sap/ui/model/odata/ODataUtils"],function(e,t,r,i,n){"use strict";var o=o||{},a=/^\d+$/;o.constants={};o.constants["SAP_NAMESPACE"]="http://www.sap.com/Protocols/SAPData";o.constants["VERSION"]="0.7";o.helper={deepEqual:function(e,t,r){var i,n,o=0,a,s;if(!e||e.length!==t.length){return 2}if(e!==t){for(a=0,s=e.length;a<s;a+=1){n=e[a];i=t[a];if(n.grouped!==i.grouped||n.inResult!==i.inResult||n.level!==i.level||n.name!==i.name||n.total!==i.total||n.visible!==i.visible){return 2}if(n.formatter!==i.formatter){o=1;if(r){r(i)}}}}return o},tokenizeNametoLabelText:function(e){var t="";t=e.replace(/^P_(.*)/,"$1");t=t.replace(/([^A-Z0-9_]+)([A-Z0-9_])/g,"$1 $2");t=t.replace(/([A-Z0-9_]{2,})([A-Z0-9_])([^A-Z0-9_]+)/g,"$1 $2$3");t=t.replace(/(.*) _E$/,"$1");t=t.replace(/(.*) _(.*)/g,"$1 $2");return t}};o.Model=function(e,t){this._init(e,t)};o.Model.ReferenceByURI=function(e){return{sServiceURI:e}};o.Model.ReferenceByModel=function(e){return{oModel:e}};o.Model.ReferenceWithWorkaround=function(e,t){return{oModelReference:e,aWorkaroundID:t}};o.Model.prototype={_init:function(e,t){var r,i=this;if(typeof t=="string"){throw"Deprecated second argument: Adjust your invocation by passing an object with a property sAnnotationJSONDoc as a second argument instead"}this._mParameter=t;this._oActivatedWorkarounds={};if(e&&e.aWorkaroundID){for(var n=-1,o;(o=e.aWorkaroundID[++n])!==undefined;){this._oActivatedWorkarounds[o]=true}e=e.oModelReference}if(!e||!e.sServiceURI&&!e.oModel){throw"Usage with oModelReference being an instance of Model.ReferenceByURI or Model.ReferenceByModel"}if(e.oModel){this._oModel=e.oModel;a()}if(e.sServiceURI){if(t&&t.modelVersion===2){r=sap.ui.require("sap/ui/model/odata/v2/ODataModel")||sap.ui.requireSync("sap/ui/model/odata/v2/ODataModel");this._oModel=new r(e.sServiceURI);a()}else{r=sap.ui.require("sap/ui/model/odata/ODataModel")||sap.ui.requireSync("sap/ui/model/odata/ODataModel");this._oModel=new r(e.sServiceURI);a()}}if(this._oModel.getServiceMetadata()&&this._oModel.getServiceMetadata().dataServices==undefined){throw"Model could not be loaded"}function a(){if(!i._oModel.getServiceMetadata()){i._oModel.attachMetadataLoaded(s)}else{s()}}function s(){if(i.bIsInitialized){return}i.bIsInitialized=true;if(t&&t.sAnnotationJSONDoc){i.mergeV2Annotations(t.sAnnotationJSONDoc)}i._interpreteMetadata(i._oModel.getServiceMetadata().dataServices)}},_interpreteMetadata:function(e){this._oQueryResultSet={};this._oParameterizationSet={};this._oEntityTypeSet={};this._oEntitySetSet={};this._oEntityTypeNameToEntitySetMap={};var t=this._oModel.getServiceMetadata().dataServices.schema[0];for(var r=-1,i;(i=t.entityContainer[++r])!==undefined;){if(i.isDefaultEntityContainer=="true"){this._oDefaultEntityContainer=i;break}}var n=t.entityType;var a=[],s=[],u=[];for(var l=-1,h;(h=n[++l])!==undefined;){var f=false;if(h.extensions!=undefined){for(var y=-1,p;(p=h.extensions[++y])!==undefined;){if(p.namespace==o.constants.SAP_NAMESPACE&&p.name=="semantics"){f=true;switch(p.value){case"aggregate":a.push(h);break;case"parameters":s.push(h);break;default:u.push(h)}}if(f){continue}}if(!f){u.push(h)}}else{u.push(h)}}for(var d=-1,_;(_=u[++d])!==undefined;){var m=new o.EntityType(this._oModel.getServiceMetadata(),t,_);this._oEntityTypeSet[m.getQName()]=m;var c=this._getEntitySetsOfType(t,m.getQName());if(c.length==0){throw"Invalid consumption model: No entity set for entity type "+m.getQName()+" found"}if(c.length>1){throw"Unsupported consumption model: More than one entity set for entity type "+m.getQName()+" found"}var g=new o.EntitySet(this._oModel.getServiceMetadata(),t,c[0][0],c[0][1],m);this._oEntitySetSet[g.getQName()]=g;this._oEntityTypeNameToEntitySetMap[m.getQName()]=g}var v={};for(var P=-1,S;(S=s[++P])!==undefined;){var E=new o.EntityType(this._oModel.getServiceMetadata(),t,S);this._oEntityTypeSet[E.getQName()]=E;var N=this._getEntitySetsOfType(t,E.getQName());if(N.length==0){throw"Invalid consumption model: No entity set for parameter entity type "+E.getQName()+" found"}if(N.length>1){throw"Unsupported consumption model: More than one entity set for parameter entity type "+E.getQName()+" found"}var b=new o.EntitySet(this._oModel.getServiceMetadata(),t,N[0][0],N[0][1],E);this._oEntitySetSet[b.getQName()]=b;this._oEntityTypeNameToEntitySetMap[E.getQName()]=b;var R=new o.Parameterization(E,b);this._oParameterizationSet[R.getName()]=R;v[E.getQName()]=R;var x=E.getQName();if(t.association!=undefined){for(var T=-1,A;(A=t.association[++T])!==undefined;){if(A.referentialConstraint==undefined){continue}var M=null;if(A.end[0].type==x&&A.end[0].multiplicity=="*"&&A.end[1].multiplicity=="1"){M=A.end[1].type}else if(A.end[1].type==x&&A.end[1].multiplicity=="*"&&A.end[0].multiplicity=="1"){M=A.end[0].type}if(!M){continue}if(A.referentialConstraint.dependent.propertyRef.length!=1){continue}var I=R.findParameterByName(A.referentialConstraint.dependent.propertyRef[0].name);if(I==null){continue}var Q=this._oEntityTypeSet[M];var F=this._oEntityTypeNameToEntitySetMap[M];I.setValueSetEntity(Q,F)}}}for(var D=-1,U;(U=a[++D])!==undefined;){var k=new o.EntityType(this._oModel.getServiceMetadata(),t,U);this._oEntityTypeSet[k.getQName()]=k;var w=k.getQName();var O=null;var V=null;if(t.association!=undefined){for(var L=-1,C;(C=t.association[++L])!==undefined;){var q=null;if(C.end[0].type==w){q=C.end[1].type}else if(C.end[1].type==w){q=C.end[0].type}else{continue}var B=null;B=v[q];if(B!=null){if(O!=null){throw"Unable to handle multiple parameter entity types of query entity "+k.name}else{O=B;V=C}}}}var z=this._getEntitySetsOfType(t,k.getQName());if(z.length!=1){throw"Invalid consumption model: There must be exactly one entity set for an entity type annotated with aggregating semantics"}var $=new o.EntitySet(this._oModel.getServiceMetadata(),t,z[0][0],z[0][1],k);this._oEntitySetSet[$.getQName()]=$;this._oEntityTypeNameToEntitySetMap[k.getQName()]=$;var H=new o.QueryResult(this,k,$,O);this._oQueryResultSet[H.getName()]=H;if(O){O.setTargetQueryResult(H,V)}if(t.association!=undefined){for(var j=-1,K;(K=t.association[++j])!==undefined;){if(K.referentialConstraint==undefined){continue}var W=null;if(K.end[0].type==w&&K.end[0].multiplicity=="*"&&K.end[1].multiplicity=="1"){W=K.end[1].type}else if(K.end[1].type==w&&K.end[1].multiplicity=="*"&&K.end[0].multiplicity=="1"){W=K.end[0].type}if(!W){continue}if(K.referentialConstraint.dependent.propertyRef.length!=1){continue}var Z=H.findDimensionByName(K.referentialConstraint.dependent.propertyRef[0].name);if(Z==null){continue}var J=this._oEntityTypeNameToEntitySetMap[W];Z.setMembersEntitySet(J)}}}},oUI5ODataModelAnnotatableObject:{objectName:"schema",keyPropName:"namespace",extensions:true,aSubObject:[{objectName:"entityType",keyPropName:"name",extensions:true,aSubObject:[{objectName:"property",keyPropName:"name",aSubObject:[],extensions:true}]},{objectName:"entityContainer",keyPropName:"name",extensions:false,aSubObject:[{objectName:"entitySet",keyPropName:"name",extensions:true,aSubObject:[]}]}]},mergeV2Annotations:function(e){var t=null;try{t=JSON.parse(e)}catch(e){return}var r;try{r=this._oModel.getServiceMetadata().dataServices}catch(e){return}for(var i in t){if(!(this.oUI5ODataModelAnnotatableObject.objectName==i)){continue}if(!(t[i]instanceof Array)){continue}this.mergeV2AnnotationLevel(r[this.oUI5ODataModelAnnotatableObject.objectName],t[this.oUI5ODataModelAnnotatableObject.objectName],this.oUI5ODataModelAnnotatableObject);break}return},mergeV2AnnotationLevel:function(e,t,r){for(var i=-1,n;(n=t[++i])!==undefined;){for(var o=-1,a;(a=e[++o])!==undefined;){if(!(n[r.keyPropName]==a[r.keyPropName])){continue}if(n["extensions"]!=undefined){if(a["extensions"]==undefined){a["extensions"]=[]}for(var s=-1,u;(u=n["extensions"][++s])!==undefined;){var l=false;for(var h=-1,f;(f=a["extensions"][++h])!==undefined;){if(u.name==f.name&&u.namespace==f.namespace){f.value=u.value;l=true;break}}if(!l){a["extensions"].push(u)}}}for(var y=-1,p;(p=r.aSubObject[++y])!==undefined;){for(var d in n){if(!(p.objectName==d)){continue}if(!(n[p.objectName]instanceof Array)){continue}if(a[p.objectName]==undefined||!(a[p.objectName]instanceof Array)){continue}this.mergeV2AnnotationLevel(a[p.objectName],n[p.objectName],p);break}}}}return},findQueryResultByName:function(e){var t=this._oQueryResultSet[e];if(!t&&this._oDefaultEntityContainer){var r=this._oDefaultEntityContainer.name+"."+e;t=this._oQueryResultSet[r]}return t},getAllQueryResultNames:function(){if(this._aQueryResultNames){return this._aQueryResultNames}this._aQueryResultNames=new Array(0);for(var e in this._oQueryResultSet){this._aQueryResultNames.push(this._oQueryResultSet[e].getName())}return this._aQueryResultNames},getAllQueryResults:function(){return this._oQueryResultSet},getODataModel:function(){return this._oModel},_getEntitySetsOfType:function(e,t){var r=[];for(var i=-1,n;(n=e.entityContainer[++i])!==undefined;){for(var o=-1,a;(a=n.entitySet[++o])!==undefined;){if(a.entityType==t){r.push([n,a])}}}return r},_mParameter:null,_oModel:null,_oDefaultEntityContainer:null,_aQueryResultNames:null,_oQueryResultSet:null,_oParameterizationSet:null,_oEntityTypeSet:null,_oEntitySetSet:null,_oEntityTypeNameToEntitySetMap:null,_oActivatedWorkarounds:null};o.QueryResult=function(e,t,r,i){this._init(e,t,r,i)};o.QueryResult.prototype={_init:function(e,t,r,i,n){this._oModel=e;this._oEntityType=t;this._oEntitySet=r;this._oParameterization=i;this._oDimensionSet={};this._oMeasureSet={};var a=t.getTypeDescription().property;var s={};for(var u=-1,l;(l=a[++u])!==undefined;){if(l.extensions==undefined){continue}for(var h=-1,f;(f=l.extensions[++h])!==undefined;){if(!f.namespace==o.constants.SAP_NAMESPACE){continue}switch(f.name){case"aggregation-role":switch(f.value){case"dimension":{var y=new o.Dimension(this,l);this._oDimensionSet[y.getName()]=y;break}case"measure":{var p=new o.Measure(this,l);this._oMeasureSet[p.getName()]=p;break}case"totaled-properties-list":this._oTotaledPropertyListProperty=l;break;default:}break;case"attribute-for":{var d=new o.DimensionAttribute(this,l);var _=d.getKeyProperty();s[_.name]=d;break}default:}}}for(var m in s){var c=s[m];c.getDimension().addAttribute(c)}if(e._oActivatedWorkarounds.IdentifyTextPropertiesByName){var g=[];for(var v in this._oDimensionSet){var P=this._oDimensionSet[v];if(!P.getTextProperty()){var S=null;S=t.findPropertyByName(v+"Name");if(!S){S=t.findPropertyByName(v+"Text")}if(!S){S=t.findPropertyByName(v+"Desc")}if(!S){S=t.findPropertyByName(v+"Description")}if(S){P.setTextProperty(S);g.push(S.name)}}}for(var E=-1,N;(N=g[++E])!==undefined;){delete this._oDimensionSet[N]}}},getName:function(){return this.getEntitySet().getQName()},getParameterization:function(){return this._oParameterization},getAllDimensionNames:function(){if(this._aDimensionNames){return this._aDimensionNames}this._aDimensionNames=[];for(var e in this._oDimensionSet){this._aDimensionNames.push(this._oDimensionSet[e].getName())}return this._aDimensionNames},getAllDimensions:function(){return this._oDimensionSet},getAllMeasureNames:function(){if(this._aMeasureNames){return this._aMeasureNames}this._aMeasureNames=[];for(var e in this._oMeasureSet){this._aMeasureNames.push(this._oMeasureSet[e].getName())}return this._aMeasureNames},getAllMeasures:function(){return this._oMeasureSet},findDimensionByName:function(e){return this._oDimensionSet[e]},findDimensionByPropertyName:function(e){if(this._oDimensionSet[e]){return this._oDimensionSet[e]}for(var t in this._oDimensionSet){var r=this._oDimensionSet[t];var i=r.getTextProperty();if(i&&i.name==e){return r}if(r.findAttributeByName(e)){return r}}return null},getTotaledPropertiesListProperty:function(){return this._oTotaledPropertyListProperty},findMeasureByName:function(e){return this._oMeasureSet[e]},findMeasureByPropertyName:function(e){if(this._oMeasureSet[e]){return this._oMeasureSet[e]}for(var t in this._oMeasureSet){var r=this._oMeasureSet[t];var i=r.getFormattedValueProperty();if(i&&i.name==e){return r}}return null},getModel:function(){return this._oModel},getEntityType:function(){return this._oEntityType},getEntitySet:function(){return this._oEntitySet},_oModel:null,_oEntityType:null,_oEntitySet:null,_oParameterization:null,_aDimensionNames:null,_oDimensionSet:null,_aMeasureNames:null,_oMeasureSet:null,_oTotaledPropertyListProperty:null};o.Parameterization=function(e,t){this._init(e,t)};o.Parameterization.prototype={_init:function(e,t){this._oEntityType=e;this._oEntitySet=t;this._oParameterSet={};var r=e.getTypeDescription().property;for(var i=-1,n;(n=r[++i])!==undefined;){if(n.extensions==undefined){continue}for(var a=-1,s;(s=n.extensions[++a])!==undefined;){if(!s.namespace==o.constants.SAP_NAMESPACE){continue}switch(s.name){case"parameter":{var u=new o.Parameter(this,n);this._oParameterSet[u.getName()]=u;break}default:}}}},setTargetQueryResult:function(e,t){this._oQueryResult=e;var r=this._oEntityType.getSchema().namespace+"."+t.name;var i=this._oEntityType.getTypeDescription().navigationProperty;if(!i){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type"}for(var n=-1,o;(o=i[++n])!==undefined;){if(o.relationship==r){this._oNavPropToQueryResult=o.name}}if(!this._oNavPropToQueryResult){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type"}},getTargetQueryResult:function(){if(!this._oQueryResult){throw"No target query result set"}return this._oQueryResult},getName:function(){return this.getEntitySet().getQName()},getAllParameterNames:function(){if(this._aParameterNames){return this._aParameterNames}this._aParameterNames=[];for(var e in this._oParameterSet){this._aParameterNames.push(this._oParameterSet[e].getName())}return this._aParameterNames},getAllParameters:function(){return this._oParameterSet},findParameterByName:function(e){return this._oParameterSet[e]},getNavigationPropertyToQueryResult:function(){return this._oNavPropToQueryResult},getEntityType:function(){return this._oEntityType},getEntitySet:function(){return this._oEntitySet},_oEntityType:null,_oEntitySet:null,_oQueryResult:null,_oNavPropToQueryResult:null,_aParameterNames:null,_oParameterSet:null};o.Parameter=function(e,t){this._init(e,t)};o.Parameter.prototype={_init:function(e,t){this._oParameterization=e;this._oProperty=t;var r=e.getEntityType();if(t.extensions!=undefined){for(var i=-1,n;(n=t.extensions[++i])!==undefined;){if(!n.namespace==o.constants.SAP_NAMESPACE){continue}switch(n.name){case"parameter":switch(n.value){case"mandatory":this._bRequired=true;break;case"optional":this._bRequired=false;break;default:throw"Invalid annotation value for parameter property"}break;case"label":this._sLabelText=n.value;break;case"text":this._oTextProperty=r.findPropertyByName(n.value);break;case"upper-boundary":this._bIntervalBoundaryParameter=true;this._oUpperIntervalBoundaryParameterProperty=r.findPropertyByName(n.value);break;case"lower-boundary":this._bIntervalBoundaryParameter=true;this._oLowerIntervalBoundaryParameterProperty=r.findPropertyByName(n.value);break;default:}}}if(!this._sLabelText){this._sLabelText=""}},setValueSetEntity:function(e,t){this._oValueSetEntityType=e;this._oValueSetEntitySet=t},getTextProperty:function(){return this._oTextProperty},getLabelText:function(){if(!this._sLabelText&&this._oParameterization._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=o.helper.tokenizeNametoLabelText(this.getName())}return this._sLabelText},isOptional:function(){return!this._bRequired},isIntervalBoundary:function(){return this._bIntervalBoundaryParameter},isLowerIntervalBoundary:function(){return this._oUpperIntervalBoundaryParameterProperty?true:false},getPeerIntervalBoundaryParameter:function(){var e=null;if(this._oLowerIntervalBoundaryParameterProperty){e=this._oLowerIntervalBoundaryParameterProperty.name}else{e=this._oUpperIntervalBoundaryParameterProperty.name}if(!e){throw"Parameter is not an interval boundary"}return this._oParameterization.findParameterByName(e)},isValueSetAvailable:function(){return this._oValueSetEntityType?true:false},getName:function(){return this._oProperty.name},getProperty:function(){return this._oProperty},getContainingParameterization:function(){return this._oParameterization},getURIToValueEntitySet:function(e){var t=null;t=(e?e:"")+"/"+this._oValueSetEntitySet.getQName();return t},_oParameterization:null,_oProperty:null,_sLabelText:null,_oTextProperty:null,_bRequired:false,_bIntervalBoundaryParameter:false,_oLowerIntervalBoundaryParameterProperty:null,_oUpperIntervalBoundaryParameterProperty:null,_oValueSetEntityType:null,_oValueSetEntitySet:null};o.Dimension=function(e,t){this._init(e,t)};o.Dimension.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;this._oAttributeSet={}},setMembersEntitySet:function(e){this._oMembersEntitySet=e},getName:function(){return this._oProperty.name},getKeyProperty:function(){return this._oProperty},getTextProperty:function(){if(!this._oTextProperty){this._oTextProperty=this._oQueryResult.getEntityType().getTextPropertyOfProperty(this.getName())}return this._oTextProperty},setTextProperty:function(e){this._oTextProperty=e},getLabelText:function(){if(!this._sLabelText){this._sLabelText=this._oQueryResult.getEntityType().getLabelOfProperty(this.getName())}if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=o.helper.tokenizeNametoLabelText(this.getName())}return this._sLabelText==null?"":this._sLabelText},getSuperOrdinateDimension:function(){if(!this._sSuperOrdinateDimension){var e=this._oQueryResult.getEntityType().getSuperOrdinatePropertyOfProperty(this.getName());if(e){this._sSuperOrdinateDimension=this._oQueryResult.findDimensionByName(e.name)}}return this._sSuperOrdinateDimension},getHierarchy:function(){if(!this._oHierarchy){this._oHierarchy=this._oQueryResult.getEntityType().getHierarchy(this._oProperty.name)}return this._oHierarchy},getAllAttributeNames:function(){if(this._aAttributeNames){return this._aAttributeNames}this._aAttributeNames=[];for(var e in this._oAttributeSet){this._aAttributeNames.push(this._oAttributeSet[e].getName())}return this._aAttributeNames},getAllAttributes:function(){return this._oAttributeSet},findAttributeByName:function(e){return this._oAttributeSet[e]},addAttribute:function(e){this._oAttributeSet[e.getName()]=e},getContainingQueryResult:function(){return this._oQueryResult},hasMasterData:function(){return this._oMembersEntitySet!=null?true:false},getMasterDataEntitySet:function(){return this._oMembersEntitySet},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sSuperOrdinateDimension:null,_aAttributeNames:null,_oAttributeSet:null,_oMembersEntitySet:null,_oHierarchy:null};o.DimensionAttribute=function(e,t){this._init(e,t)};o.DimensionAttribute.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;if(t.extensions!=undefined){for(var r=-1,i;(i=t.extensions[++r])!==undefined;){if(!i.namespace==o.constants.SAP_NAMESPACE){continue}switch(i.name){case"attribute-for":this._sDimensionName=i.value;break;case"label":this._sLabelText=i.value;break;case"text":this._oTextProperty=e.getEntityType().findPropertyByName(i.value);break;default:}}}},getName:function(){return this._oProperty.name},getKeyProperty:function(){return this._oProperty},getTextProperty:function(){return this._oTextProperty},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=o.helper.tokenizeNametoLabelText(this.getName())}return this._sLabelText},getDimension:function(){return this._oQueryResult.findDimensionByName(this._sDimensionName)},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sDimensionName:null};o.Measure=function(e,t){this._init(e,t)};o.Measure.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;if(t.extensions!=undefined){for(var r=-1,i;(i=t.extensions[++r])!==undefined;){if(!i.namespace==o.constants.SAP_NAMESPACE){continue}switch(i.name){case"label":this._sLabelText=i.value;break;case"text":this._oTextProperty=e.getEntityType().findPropertyByName(i.value);break;case"unit":this._oUnitProperty=e.getEntityType().findPropertyByName(i.value);break;default:}}}if(!this._sLabelText){this._sLabelText=""}},getName:function(){return this._oProperty.name},getRawValueProperty:function(){return this._oProperty},getFormattedValueProperty:function(){return this._oTextProperty},getUnitProperty:function(){return this._oUnitProperty},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=o.helper.tokenizeNametoLabelText(this.getName())}return this._sLabelText},isUpdatable:function(){if(this._bIsUpdatable!=null){return this._bIsUpdatable}var e=this._oQueryResult.getEntitySet().getUpdatablePropertyNameSet();return e[this.getName()]!=undefined},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_oUnitProperty:null,_bIsUpdatable:null};o.EntitySet=function(e,t,r,i,n){this._init(e,t,r,i,n)};o.EntitySet.prototype={_init:function(e,t,r,i,n){this._oEntityType=n;this._oEntitySet=i;this._oContainer=r;this._oSchema=t;this._oModel=e;if(t.entityContainer.length>1){this._sQName=r.name+"."+i.name}else{this._sQName=i.name}},getQName:function(){return this._sQName},getSetDescription:function(){return this._oEntitySet},getEntityType:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},getUpdatablePropertyNameSet:function(){if(this._oUpdatablePropertyNames){return this._oUpdatablePropertyNames}this._oUpdatablePropertyNames={};var e=true;if(this._oEntitySet.extensions!=undefined){for(var t=-1,r;(r=this._oEntitySet.extensions[++t])!==undefined;){if(r.namespace==o.constants.SAP_NAMESPACE&&r.name=="updatable"){if(r.value=="false"){e=false;break}}}}if(!e){return this._oUpdatablePropertyNames}var i=this._oEntityType.getTypeDescription().property;for(var n=-1,a;(a=i[++n])!==undefined;){var s=true;if(a.extensions==undefined){continue}for(var u=-1,l;(l=a.extensions[++u])!==undefined;){if(l.namespace!=o.constants.SAP_NAMESPACE){continue}if(l.name=="updatable"){if(l.value=="false"){s=false;break}}}if(s){this._oUpdatablePropertyNames[a.name]=true}}return this._oUpdatablePropertyNames},_oEntityType:null,_oEntitySet:null,_oContainer:null,_oSchema:null,_oModel:null,_sQName:null,_oUpdatablePropertyNames:null};o.EntityType=function(e,t,r){this._init(e,t,r)};o.EntityType.propertyFilterRestriction={SINGLE_VALUE:"single-value",MULTI_VALUE:"multi-value",INTERVAL:"interval"};o.EntityType.prototype={_init:function(e,t,r){this._oEntityType=r;this._oSchema=t;this._oModel=e;this._aKeyProperties=[];this._oPropertySet={};this._aFilterablePropertyNames=[];this._aSortablePropertyNames=[];this._aRequiredFilterPropertyNames=[];this._oPropertyFilterRestrictionSet={};this._oPropertyHeadingsSet={};this._oPropertyQuickInfosSet={};this._sQName=t.namespace+"."+r.name;var i={};function n(e){var t=i[e];if(!t){t=i[e]={}}return t}for(var a=-1,s;(s=r.key.propertyRef[++a])!==undefined;){this._aKeyProperties.push(s.name)}for(var u=-1,l;(l=r.property[++u])!==undefined;){this._oPropertySet[l.name]=l;this._aFilterablePropertyNames.push(l.name);this._aSortablePropertyNames.push(l.name);if(l.extensions==undefined){continue}for(var h=-1,f;(f=l.extensions[++h])!==undefined;){if(f.namespace!==o.constants.SAP_NAMESPACE){continue}switch(f.name){case"filterable":if(f.value=="false"){this._aFilterablePropertyNames.pop(l.name)}break;case"sortable":if(f.value=="false"){this._aSortablePropertyNames.pop(l.name)}break;case"required-in-filter":if(f.value=="true"){this._aRequiredFilterPropertyNames.push(l.name)}break;case"filter-restriction":if(f.value==o.EntityType.propertyFilterRestriction.SINGLE_VALUE||f.value==o.EntityType.propertyFilterRestriction.MULTI_VALUE||f.value==o.EntityType.propertyFilterRestriction.INTERVAL){this._oPropertyFilterRestrictionSet[l.name]=f.value}break;case"hierarchy-node-external-key-for":n(f.value).externalKeyProperty=l;break;case"hierarchy-node-for":n(l.name).dimensionName=f.value;break;case"hierarchy-parent-node-for":case"hierarchy-parent-nod":n(f.value).parentNodeIDProperty=l;break;case"hierarchy-level-for":n(f.value).levelProperty=l;break;case"hierarchy-drill-state-for":case"hierarchy-drill-stat":n(f.value).drillStateProperty=l;break;default:}}}this._oRecursiveHierarchySet={};for(var y in i){var p=i[y];var d=this._oPropertySet[y];var _=this._oPropertySet[p.dimensionName];if(_==null){_=d}this._oRecursiveHierarchySet[_.name]=new o.RecursiveHierarchy(r,d,p.parentNodeIDProperty,p.levelProperty,_,p.externalKeyProperty)}},getProperties:function(){return this._oPropertySet},findPropertyByName:function(e){return this._oPropertySet[e]},getKeyProperties:function(){return this._aKeyProperties},getLabelOfProperty:function(e){var t=this._oPropertySet[e];if(t==null){throw"no such property with name "+e}if(t.extensions!=undefined){for(var r=-1,i;(i=t.extensions[++r])!==undefined;){if(!i.namespace==o.constants.SAP_NAMESPACE){continue}if(i.name=="label"){return i.value}}}return null},getHeadingOfProperty:function(e){var t=this._oPropertySet[e];if(t==null){throw"no such property with name "+e}var r=null;if(t.extensions!=undefined){for(var i=-1,n;(n=t.extensions[++i])!==undefined;){if(!n.namespace==o.constants.SAP_NAMESPACE){continue}if(n.name=="heading"){return n.value}if(n.name=="label"){r=n.value}}}return r},getQuickInfoOfProperty:function(e){var t=this._oPropertySet[e];if(t==null){throw"no such property with name "+e}var r=null;if(t.extensions!=undefined){for(var i=-1,n;(n=t.extensions[++i])!==undefined;){if(!n.namespace==o.constants.SAP_NAMESPACE){continue}if(n.name=="quickinfo"){return n.value}if(n.name=="label"){r=n.value}}}return r},getTextPropertyOfProperty:function(e){var t=this._oPropertySet[e];if(t==null){throw"no such property with name "+e}if(t.extensions!=undefined){for(var r=-1,i;(i=t.extensions[++r])!==undefined;){if(i.name=="text"){return this.findPropertyByName(i.value)}}}return null},getSuperOrdinatePropertyOfProperty:function(e){var t=this._oPropertySet[e];if(t==null){throw"no such property with name "+e}if(t.extensions!=undefined){for(var r=-1,i;(i=t.extensions[++r])!==undefined;){if(i.name=="super-ordinate"){return this.findPropertyByName(i.value)}}}return null},getFilterablePropertyNames:function(){return this._aFilterablePropertyNames},getSortablePropertyNames:function(){return this._aSortablePropertyNames},getRequiredFilterPropertyNames:function(){return this._aRequiredFilterPropertyNames},getPropertiesWithFilterRestrictions:function(){return this._oPropertyFilterRestrictionSet},getAllHierarchyPropertyNames:function(){if(this._aHierarchyPropertyNames){return this._aHierarchyPropertyNames}this._aHierarchyPropertyNames=[];for(var e in this._oRecursiveHierarchySet){this._aHierarchyPropertyNames.push(this._oRecursiveHierarchySet[e].getNodeValueProperty().name)}return this._aHierarchyPropertyNames},getHierarchy:function(e){if(this._oRecursiveHierarchySet[e]==undefined){return null}return this._oRecursiveHierarchySet[e]},getQName:function(){return this._sQName},getTypeDescription:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_sQName:null,_aKeyProperties:null,_oPropertySet:null,_aFilterablePropertyNames:null,_aRequiredFilterPropertyNames:null,_oPropertyFilterRestrictionSet:null,_aHierarchyPropertyNames:null,_oRecursiveHierarchySet:null};o.RecursiveHierarchy=function(e,t,r,i,n,o){this._init(e,t,r,i,n,o)};o.RecursiveHierarchy.prototype={_init:function(e,t,r,i,n,o){this._oEntityType=e;this._oNodeIDProperty=t;this._oParentNodeIDProperty=r;this._oNodeLevelProperty=i;this._oNodeValueProperty=n;this._oNodeExternalKeyProperty=o},isRecursiveHierarchy:function(){return true},isLeveledHierarchy:function(){return false},getNodeExternalKeyProperty:function(){return this._oNodeExternalKeyProperty},getNodeIDProperty:function(){return this._oNodeIDProperty},getParentNodeIDProperty:function(){return this._oParentNodeIDProperty},getNodeLevelProperty:function(){return this._oNodeLevelProperty},getNodeValueProperty:function(){return this._oNodeValueProperty},_oEntityType:null,_oNodeIDProperty:null,_oParentNodeIDProperty:null,_oNodeLevelProperty:null,_oNodeValueProperty:null,_oNodeExternalKeyProperty:null};o.FilterExpression=function(e,t,r){this._init(e,t,r)};o.FilterExpression.prototype={_init:function(e,t,r){this._oEntityType=r;this._oSchema=t;this._oModel=e;this._aConditionUI5Filter=[];this._aUI5FilterArray=[]},_renderPropertyFilterValue:function(t,r,i){if(r==="Edm.Time"&&a.test(t)){t={ms:parseInt(t),__edmType:"Edm.Time"}}return e(n._formatValue(t,r,true,i))},clear:function(){this._aConditionUI5Filter=[];this._aUI5FilterArray=[]},_addCondition:function(e){const{sPath:t,sOperator:r,oValue1:i,oValue2:n,sFractionalSeconds1:o,sFractionalSeconds2:a}=e;const s=this._aConditionUI5Filter.some(e=>e.sPath===t&&e.sOperator===r&&e.oValue1==i&&e.oValue2==n&&e.sFractionalSeconds1===o&&e.sFractionalSeconds2===a);if(!s){this._aConditionUI5Filter.push(e)}},_addUI5FilterArray:function(e){this._aUI5FilterArray.push(e)},addCondition:function(e,r,i,n){let o=e;let a;if(typeof e==="object"){o=e.sPath;a=e}var s=this._oEntityType.findPropertyByName(o);if(s==null){throw"Cannot add filter condition for unknown property name "+o}var u=this._oEntityType.getFilterablePropertyNames();if((u?Array.prototype.indexOf.call(u,o):-1)===-1){throw"Cannot add filter condition for not filterable property name "+o}this._addCondition(a||new t(o,r,i,n));return this},removeConditions:function(e){var t=this._oEntityType.findPropertyByName(e);if(t==null){throw"Cannot remove filter conditions for unknown property name "+e}for(var r=0;r<this._aConditionUI5Filter.length;r++){var i=this._aConditionUI5Filter[r];if(i.sPath==e){this._aConditionUI5Filter.splice(r--,1)}}return this},addSetCondition:function(e,i){var n=this._oEntityType.findPropertyByName(e);if(n==null){throw"Cannot add filter condition for unknown property name "+e}var o=this._oEntityType.getFilterablePropertyNames();if((o?Array.prototype.indexOf.call(o,e):-1)===-1){throw"Cannot add filter condition for not filterable property name "+e}for(var a=-1,s;(s=i[++a])!==undefined;){this._addCondition(new t(e,r.EQ,s))}return this},addUI5FilterConditions:function(e){if(!Array.isArray(e)){throw"Argument is not an array"}if(e.length==0){return this}var t=false;for(var r=0;r<e.length;r++){if(e[r].aFilters!=undefined){t=true;break}}if(t){this._addUI5FilterArray(e)}else{for(var i=0;i<e.length;i++){this.addCondition(e[i])}}return this},getExpressionAsUI5FilterArray:function(){var e=this._aConditionUI5Filter.concat([]);for(var t=-1,r;(r=this._aUI5FilterArray[++t])!==undefined;){for(var i=-1,n;(n=r[++i])!==undefined;){e.push(n)}}return e},getPropertiesReferencedByUI5FilterArray:function(e,t){for(var r=-1,i;(i=e[++r])!==undefined;){if(i.aFilters!=undefined){this.getPropertiesReferencedByUI5FilterArray(i.aFilters,t)}else{if(t[i.sPath]==undefined){t[i.sPath]=[]}t[i.sPath].push(i)}}},getReferencedProperties:function(){var e={};for(var t=-1,r;(r=this._aConditionUI5Filter[++t])!==undefined;){if(e[r.sPath]==undefined){e[r.sPath]=[]}e[r.sPath].push(r)}for(var i=-1,n;(n=this._aUI5FilterArray[++i])!==undefined;){this.getPropertiesReferencedByUI5FilterArray(n,e)}return e},renderUI5Filter:function(e){const{sPath:t,sOperator:i,oValue1:n,oValue2:o,sFractionalSeconds1:a,sFractionalSeconds2:s}=e;let u=null;const l=this._oEntityType.findPropertyByName(t);if(l==null){throw"Cannot add filter condition for unknown property name "+t}switch(i){case r.BT:u="("+t+" ge "+this._renderPropertyFilterValue(n,l.type,a)+" and "+t+" le "+this._renderPropertyFilterValue(o,l.type,s)+")";break;case r.NB:u="("+t+" lt "+this._renderPropertyFilterValue(n,l.type,a)+" or "+t+" gt "+this._renderPropertyFilterValue(o,l.type,s)+")";break;case r.Contains:case r.NotContains:u=(i[0]==="N"?"not ":"")+"substringof("+this._renderPropertyFilterValue(n,"Edm.String")+","+t+")";break;case r.StartsWith:case r.EndsWith:case r.NotStartsWith:case r.NotEndsWith:u=i.toLowerCase().replace("not","not ")+"("+t+","+this._renderPropertyFilterValue(n,"Edm.String")+")";break;default:u=t+" "+i.toLowerCase()+" "+this._renderPropertyFilterValue(n,l.type,a)}return u},renderUI5MultiFilter:function(e){var t=[];var r="";var i=e.bAnd==true?" and ":" or ";for(var n=-1,o;(o=e.aFilters[++n])!==undefined;){if(o.aFilters!=undefined){t.push(o);continue}r+=(r==""?"":i)+"("+this.renderUI5Filter(o)+")"}if(t.length>0){for(var a=-1,s;(s=t[++a])!==undefined;){r+=(r==""?"":i)+"("+this.renderUI5MultiFilter(s)+")"}}return r},renderUI5FilterArray:function(e){if(e.length==0){return""}var t="";e.sort(function(e,t){const r=e.sPath||"";const i=t.sPath||"";if(r===i){return 0}return r>i?1:-1});var i=e[0].sPath;var n="";var o=[],a=[];for(var s=-1,u;(u=e[++s])!==undefined;){if(u.aFilters!=undefined){a.push(u);continue}if(i!=u.sPath){if(n!=""){t+=(t==""?"":" and ")+"("+n+")"}n="";if(o.length>0){for(var l=-1,h;(h=o[++l])!==undefined;){n+=(n==""?"":" and ")+this.renderUI5Filter(h)}t+=(t==""?"":" and ")+"("+n+")";n=""}i=u.sPath;o=[]}if(u.sOperator==r.NE){o.push(u);continue}n+=(n==""?"":" or ")+this.renderUI5Filter(u)}if(n!=""){t+=(t==""?"":" and ")+"("+n+")"}if(o.length>0){n="";for(var f=-1,y;(y=o[++f])!==undefined;){n+=(n==""?"":" and ")+this.renderUI5Filter(y)}t+=(t==""?"":" and ")+"("+n+")"}if(a.length>0){for(var p=-1,d;(d=a[++p])!==undefined;){t+=(t==""?"":" and ")+"("+this.renderUI5MultiFilter(d)+")"}}return t},getURIFilterOptionValue:function(){var e=this.renderUI5FilterArray(this._aConditionUI5Filter);for(var t=-1,r;(r=this._aUI5FilterArray[++t])!==undefined;){e+=(e==""?"":" and ")+"("+this.renderUI5FilterArray(r)+")"}return e},checkValidity:function(){var e=this._oEntityType.getRequiredFilterPropertyNames();var t=this.getReferencedProperties();for(var i=-1,n;(n=e[++i])!==undefined;){if(t[n]==undefined){throw"filter expression does not contain required property "+n}}var a=this._oEntityType.getPropertiesWithFilterRestrictions();for(var s in a){var u=a[s];if(u==o.EntityType.propertyFilterRestriction.SINGLE_VALUE){if(t[s]!=undefined){if(t[s].length>1){var l=t[s][0].oValue1;for(var h=0;h<t[s].length;h++){if(t[s][h].oValue1!=l||t[s][h].sOperator!=r.EQ){throw"filter expression may use "+s+" only with a single EQ condition"}}}}}}return true},getEntityType:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_aFilterCondition:null};o.SortOrder={Ascending:"asc",Descending:"desc"};o.SortExpression=function(e,t,r){this._init(e,t,r)};o.SortExpression.prototype={_init:function(e,t,r){this._oEntityType=r;this._oSchema=t;this._oModel=e;this._aSortCondition=[]},_containsSorter:function(e){var t=null;for(var r=-1,i;(i=this._aSortCondition[++r])!==undefined;){if(i.property.name===e){t={sorter:i,index:r};break}}return t},_removeFromArray:function(e,t,r){var i=e.slice((r||t)+1||e.length);e.length=t<0?e.length+t:t;return e.push.apply(e,i)},clear:function(){this._aSortCondition=[]},addSorter:function(e,t,r){var i=this._oEntityType.findPropertyByName(e);if(i==null){throw"Cannot add sort condition for unknown property name "+e}var n=this._containsSorter(e);if(n!=null){if(!r){n.sorter.order=t}return this}var o=this._oEntityType.getSortablePropertyNames();if((o?Array.prototype.indexOf.call(o,e):-1)===-1){throw"Cannot add sort condition for not sortable property name "+e}this._aSortCondition.push({property:i,order:t});return this},removeSorter:function(e){if(!e){return}var t=this._containsSorter(e);if(t){this._removeFromArray(this._aSortCondition,t.index)}},getExpressionsAsUI5SorterArray:function(){var e=[];for(var t=-1,r;(r=this._aSortCondition[++t])!==undefined;){e.push(new i(r.property.name,r.order==o.SortOrder.Descending))}return e},getExpressionAsUI5Sorter:function(){var e=this.getExpressionsAsUI5SorterArray();if(e.length==0){return null}else{return e[0]}},getURIOrderByOptionValue:function(e){if(this._aSortCondition.length==0){return""}var t="";for(var r=-1,i;(i=this._aSortCondition[++r])!==undefined;){if(!e[i.property.name]){continue}t+=(t==""?"":",")+i.property.name+" "+i.order}return t},getEntityType:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_aSortCondition:null};o.ParameterizationRequest=function(e){this._init(e)};o.ParameterizationRequest.prototype={_init:function(e){if(!e){throw"No parameterization given"}this._oParameterization=e;this._oParameterValueAssignment=[]},_renderParameterKeyValue:function(t,r){return e(this._oParameterization.getTargetQueryResult().getModel().getODataModel().formatValue(t,r))},getParameterization:function(){return this._oParameterization},setParameterValue:function(e,t,r){var i=this._oParameterization.findParameterByName(e);if(!i){throw"Invalid parameter name "+e}if(r!=null){if(!i.isIntervalBoundary()){throw"Range value cannot be applied to parameter "+e+" accepting only single values"}if(!i.isLowerIntervalBoundary()){throw"Range value given, but parameter "+e+" does not hold the lower boundary"}}if(!i.isIntervalBoundary()){if(t==null){delete this._oParameterValueAssignment[e]}else{this._oParameterValueAssignment[e]=t}}else{if(t==null&&r!=null){throw"Parameter "+e+": An upper boundary cannot be given without the lower boundary"}if(t==null){delete this._oParameterValueAssignment[e];r=null}else{this._oParameterValueAssignment[e]=t}var n=i.getPeerIntervalBoundaryParameter();if(r==null){r=t}if(t==null){delete this._oParameterValueAssignment[n.getName()]}else{this._oParameterValueAssignment[n.getName()]=r}}return},getURIToParameterizationEntitySet:function(e){return(e?e:"")+"/"+this._oParameterization.getEntitySet().getQName()},getURIToParameterizationEntry:function(e){var t=this._oParameterization.getAllParameters();for(var r in t){if(this._oParameterValueAssignment[r]==undefined){throw"Parameter "+r+" has no value assigned"}}var i="",n=true;for(var o in this._oParameterValueAssignment){i+=(n?"":",")+o+"="+this._renderParameterKeyValue(this._oParameterValueAssignment[o],t[o].getProperty().type);n=false}return(e?e:"")+"/"+this._oParameterization.getEntitySet().getQName()+"("+i+")"},_oParameterization:null,_oParameterValueAssignment:null};o.QueryResultRequest=function(e,t){this._init(e,t)};o.QueryResultRequest.prototype={_init:function(e,t){this._oQueryResult=e;this._oParameterizationRequest=t;this._oAggregationLevel={};this._oDimensionHierarchies={};this._oMeasures={};this._bIncludeEntityKey=false;this._oFilterExpression=null;this._oSortExpression=null;this._oSelectedPropertyNames=null},addRecursiveHierarchy:function(e,t,r){var i;if(!e){return}i=this._oQueryResult.findDimensionByName(e);if(!i){throw new Error("'"+e+"' is not a dimension property")}if(!i.getHierarchy()){throw new Error("Dimension '"+e+"' does not have a hierarchy")}this._oSelectedPropertyNames=null;this._oDimensionHierarchies[e]={externalKey:t,id:true,text:r}},setParameterizationRequest:function(e){this._oParameterizationRequest=e},setResourcePath:function(e){this._sResourcePath=e;if(this._sResourcePath.indexOf("/")!=0){throw"Missing leading / (slash) for resource path"}if(this._oQueryResult.getParameterization()){var t=e.lastIndexOf("/");if(t==-1){throw"Missing navigation from parameter entity set to query result in resource path"}var r=e.substring(t+1);if(r!=this._oQueryResult.getParameterization().getNavigationPropertyToQueryResult()){throw"Invalid navigation property from parameter entity set to query result in resource path"}}},getParameterizationRequest:function(){return this._oParameterizationRequest},getQueryResult:function(){return this._oQueryResult},setAggregationLevel:function(e){this._oAggregationLevel={};if(!e){e=this._oQueryResult.getAllDimensionNames()}this.addToAggregationLevel(e);this._oSelectedPropertyNames=null},addToAggregationLevel:function(e){if(!e){return}this._oSelectedPropertyNames=null;for(var t=-1,r;(r=e[++t])!==undefined;){if(!this._oQueryResult.findDimensionByName(r)){throw r+" is not a valid dimension name"}this._oAggregationLevel[r]={key:true,text:false,attributes:null}}},removeFromAggregationLevel:function(e){if(!e){return}this._oSelectedPropertyNames=null;for(var t=-1,r;(r=e[++t])!==undefined;){if(!this._oQueryResult.findDimensionByName(r)){throw r+" is not a valid dimension name"}if(this._oAggregationLevel[r]!=undefined){delete this._oAggregationLevel[r];this.getSortExpression().removeSorter(r)}}},getAggregationLevel:function(){var e=[];for(var t in this._oAggregationLevel){e.push(t)}return e},getAggregationLevelDetails:function(e){if(this._oAggregationLevel[e]==undefined){throw"Aggregation level does not include dimension "+e}return this._oAggregationLevel[e]},setMeasures:function(e){if(!e){e=this._oQueryResult.getAllMeasureNames()}this._oSelectedPropertyNames=null;this._oMeasures={};for(var t=-1,r;(r=e[++t])!==undefined;){if(!this._oQueryResult.findMeasureByName(r)){throw r+" is not a valid measure name"}this._oMeasures[r]={value:true,text:false,unit:false}}},getMeasureNames:function(){var e=[];for(var t in this._oMeasures){e.push(t)}return e},includeDimensionKeyTextAttributes:function(e,t,r,i){this._oSelectedPropertyNames=null;var n=[];if(e){if(this._oAggregationLevel[e]==undefined){throw e+" is not included in the aggregation level"}n.push(e)}else{for(var o in this._oAggregationLevel){n.push(o)}i=null}for(var a=-1,s;(s=n[++a])!==undefined;){if(t!=null){this._oAggregationLevel[s].key=t}if(r!=null){this._oAggregationLevel[s].text=r}if(i!=null){this._oAggregationLevel[s].attributes=i}}},includeMeasureRawFormattedValueUnit:function(e,t,r,i){this._oSelectedPropertyNames=null;var n=[];if(e){if(this._oMeasures[e]==undefined){throw e+" is not part of the query result"}n.push(e)}else{for(var o in this._oMeasures){n.push(o)}}for(var a=-1,s;(s=n[++a])!==undefined;){if(t!=null){this._oMeasures[s].value=t}if(r!=null){this._oMeasures[s].text=r}if(i!=null){this._oMeasures[s].unit=i}}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oQueryResult.getEntityType();this._oFilterExpression=new o.FilterExpression(this._oQueryResult.getModel(),e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new o.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},setRequestOptions:function(e,t,r){if(e!=null){this._bIncludeEntityKey=e}if(t!=null){this._bIncludeCount=t}if(r!=null){this._bReturnNoEntities=r}},setResultPageBoundaries:function(e,t){if(e!=null&&typeof e!=="number"){throw"Start value must be null or numeric"}if(t!==null&&typeof t!=="number"){throw"End value must be null or numeric"}if(e==null){e=1}if(e<1||e>(t==null?e:t)){throw"Invalid values for requested page boundaries"}this._iSkipRequestOption=e>1?e-1:null;this._iTopRequestOption=t!=null?t-e+1:null},getResultPageBoundaries:function(){var e=null;if(this._iTopRequestOption!=null){if(this._iSkipRequestOption==null){e=1}else{e=this._iSkipRequestOption+this._iTopRequestOption}}return{start:this._iSkipRequestOption==null?1:this._iSkipRequestOption,end:e}},getURIToQueryResultEntitySet:function(e){var t=null;if(this._sResourcePath!=null){t=(e?e:"")+this._sResourcePath}else if(this._oQueryResult.getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request"}else{t=this._oParameterizationRequest.getURIToParameterizationEntry(e)+"/"+this._oQueryResult.getParameterization().getNavigationPropertyToQueryResult()}}else{t=(e?e:"")+"/"+this._oQueryResult.getEntitySet().getQName()}return t},getURIOrderByOptionValue:function(){var e,t,r=null,i=this._oSortExpression?this._oSortExpression._aSortCondition:[],n,o=i.length;if(o){e=this._oQueryResult.getAllMeasureNames();for(n=0;n<o;n+=1){t=i[n];if(!this._oSelectedPropertyNames[t.property.name]&&e.indexOf(t.property.name)<0){continue}r=(r?r+",":"")+t.property.name+" "+t.order}}return r},getURIQueryOptionValue:function(e){var t,r=null,i,n=this;function o(e){var t;if(!e){return}t=typeof e==="string"?e:e.name;if(!n._oSelectedPropertyNames[t]){i+=(i==""?"":",")+t;n._oSelectedPropertyNames[t]=true}}switch(e){case"$select":{i="";this._oSelectedPropertyNames={};for(t in this._oAggregationLevel){var a=this._oQueryResult.findDimensionByName(t);var s=this._oAggregationLevel[t];if(s.key==true){o(a.getKeyProperty())}if(s.text==true){o(a.getTextProperty())}if(s.attributes){for(var u=-1,l;(l=s.attributes[++u])!==undefined;){o(a.findAttributeByName(l).getName())}}}for(t in this._oMeasures){var h=this._oQueryResult.findMeasureByName(t);var f=this._oMeasures[t];if(f.value==true){o(h.getRawValueProperty())}if(f.text==true){o(h.getFormattedValueProperty())}if(f.unit==true){o(h.getUnitProperty())}}for(t in this._oDimensionHierarchies){var y=this._oQueryResult.findDimensionByName(t).getHierarchy();var p=this._oDimensionHierarchies[t];if(p.id){o(y.getNodeIDProperty())}if(p.externalKey){o(y.getNodeExternalKeyProperty())}if(p.text){o(this._oQueryResult.getEntityType().getTextPropertyOfProperty(y.getNodeIDProperty().name))}}if(this._bIncludeEntityKey){var d=this._oQueryResult.getEntityType().getTypeDescription().key.propertyRef;for(var _=-1,m;(m=d[++_])!==undefined;){i+=(i==""?"":",")+m.name}}r=i?i:null;break}case"$filter":{var c=null;if(this._oFilterExpression){c=this._oFilterExpression.getURIFilterOptionValue()}r=c?c:null;break}case"$orderby":{r=this.getURIOrderByOptionValue();break}case"$top":{r=null;if(this._bReturnNoEntities){r=0}else if(this._iTopRequestOption!==null){r=this._iTopRequestOption}break}case"$skip":{r=null;if(!this._bReturnNoEntities){r=this._iSkipRequestOption}break}case"$inlinecount":{r=this._bIncludeCount==true?"allpages":null;break}default:break}return r},getURIToQueryResultEntries:function(e,t){if(!t){t=this.getURIToQueryResultEntitySet(e)}this.getFilterExpression().checkValidity();var r=this.getURIQueryOptionValue("$select");var i=this.getURIQueryOptionValue("$filter");var n=this.getURIQueryOptionValue("$orderby");var o=this.getURIQueryOptionValue("$top");var a=this.getURIQueryOptionValue("$skip");var s=this.getURIQueryOptionValue("$inlinecount");var u=t;var l=false;if(r!==null){u+="?$select="+r;l=true}if(this._oFilterExpression&&i!==null){if(!l){u+="?";l=true}else{u+="&"}u+="$filter="+i}if(this._oSortExpression&&n!==null){if(!l){u+="?";l=true}else{u+="&"}u+="$orderby="+n}if((this._iTopRequestOption||this._bReturnNoEntities)&&o!==null){if(!l){u+="?";l=true}else{u+="&"}u+="$top="+o}if(this._iSkipRequestOption&&a!==null){if(!l){u+="?";l=true}else{u+="&"}u+="$skip="+a}if(this._bIncludeCount&&s!==null){if(!l){u+="?";l=true}else{u+="&"}u+="$inlinecount="+s}return u},_oQueryResult:null,_oParameterizationRequest:null,_sResourcePath:null,_oAggregationLevel:null,_oDimensionHierarchies:null,_oMeasures:null,_bIncludeEntityKey:null,_bIncludeCount:null,_bReturnNoEntities:null,_oFilterExpression:null,_oSortExpression:null,_iSkipRequestOption:null,_iTopRequestOption:null};o.ParameterValueSetRequest=function(e){this._init(e)};o.ParameterValueSetRequest.prototype={_init:function(e){this._oParameter=e;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null},includeParameterText:function(e){if(e!=null){this._oValueSetResult.text=e}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oParameter.getContainingParameterization().getEntityType();var t=this._oParameter.getContainingParameterization().getTargetQueryResult().getModel();this._oFilterExpression=new o.FilterExpression(t,e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oParameter.getContainingParameterization().getEntityType();this._oSortExpression=new o.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},getURIQueryOptionValue:function(e){var t=null;switch(e){case"$select":{var r="";r+=(r==""?"":",")+this._oParameter.getProperty().name;if(this._oValueSetResult.text==true&&this._oParameter.getTextProperty()){r+=(r==""?"":",")+this._oParameter.getTextProperty().name}t=r?r:null;break}case"$filter":{var i=null;if(this._oFilterExpression){i=this._oFilterExpression.getURIFilterOptionValue()}t=i?i:null;break}case"$orderby":{var n=null;if(this._oSortExpression){n=this._oSortExpression.getURIOrderByOptionValue()}t=n?n:null;break}default:break}return t},getURIToParameterValueSetEntries:function(e){var t=null;t=(e?e:"")+"/"+this._oParameter.getContainingParameterization().getEntitySet().getQName();this.getFilterExpression().checkValidity();var r=this.getURIQueryOptionValue("$select");var i=this.getURIQueryOptionValue("$filter");var n=this.getURIQueryOptionValue("$orderby");var o=t;var a=false;if(r){o+="?$select="+r;a=true}if(this._oFilterExpression&&i){if(!a){o+="?";a=true}else{o+="&"}o+="$filter="+i}if(this._oSortExpression&&n){if(!a){o+="?";a=true}else{o+="&"}o+="$orderby="+n}return o},_oParameter:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};o.DimensionMemberSetRequest=function(e,t,r){this._init(e,t,r)};o.DimensionMemberSetRequest.prototype={_init:function(e,t,r){this._oDimension=e;this._oParameterizationRequest=t;this._bUseMasterData=r;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null;if(this._oParameterizationRequest!=null&&this._bUseMasterData==true){throw"Parameterized master data entity sets are not yet implemented"}if(this._bUseMasterData){this._oEntitySet=this._oDimension.getMasterDataEntitySet()}else{this._oEntitySet=this._oDimension.getContainingQueryResult().getEntitySet();if(this._oDimension.getContainingQueryResult().getParameterization()&&!this._oParameterizationRequest){throw"Missing parameterization request"}}},setParameterizationRequest:function(e){this._oParameterizationRequest=e},includeDimensionTextAttributes:function(e,t){this._oValueSetResult.text={text:false,attributes:false};if(e==true){this._oValueSetResult.text=true}if(t==true){this._oValueSetResult.attributes=true}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oEntitySet.getEntityType();var t=this._oDimension.getContainingQueryResult().getModel();this._oFilterExpression=new o.FilterExpression(t,e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){this._oSortExpression=new o.SortExpression(this._oEntityType.getModel(),this._oEntityType.getSchema(),this._oEntityType)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},setRequestOptions:function(e){if(e!=null){this._bIncludeCount=e}},setResultPageBoundaries:function(e,t){if(e!=null&&typeof e!=="number"){throw"Start value must be null or numeric"}if(t!==null&&typeof t!=="number"){throw"End value must be null or numeric"}if(e==null){e=1}if(e<1||e>(t==null?e:t)){throw"Invalid values for requested page boundaries"}this._iSkipRequestOption=e>1?e-1:null;this._iTopRequestOption=t!=null?t-e+1:null},getResultPageBoundaries:function(){var e=null;if(this._iTopRequestOption!=null){if(this._iSkipRequestOption==null){e=1}else{e=this._iSkipRequestOption+this._iTopRequestOption}}return{start:this._iSkipRequestOption==null?1:this._iSkipRequestOption,end:e}},getURIQueryOptionValue:function(e){var t=null;switch(e){case"$select":{var r="";var i=this._oEntitySet.getEntityType();var n=i.getKeyProperties();var o=[];if(this._bUseMasterData){for(var a=-1,s;(s=n[++a])!==undefined;){r+=(r==""?"":",")+s;var u=i.getTextPropertyOfProperty(s);if(u){if(this._oValueSetResult.text==true){r+=","+u.name}o.push(u.name)}}}else{r+=(r==""?"":",")+this._oDimension.getKeyProperty().name;if(this._oValueSetResult.text==true&&this._oDimension.getTextProperty()){r+=(r==""?"":",")+this._oDimension.getTextProperty().name}}if(this._oValueSetResult.attributes){if(this._bUseMasterData){var l=i.getProperties();for(var h in l){var f=false;for(var y=-1,p;(p=n[++y])!==undefined;){if(h==p){f=true;break}}if(f){continue}for(var d=-1,_;(_=o[++d])!==undefined;){if(h==_){f=true;break}}if(!f){r+=","+h}}}else{var m=this._oDimension.getAllAttributeNames();for(var c=-1,g;(g=m[++c])!==undefined;){r+=(r==""?"":",")+this._oDimension.findAttributeByName(g).getName()}}}t=r?r:null;break}case"$filter":{var v=null;if(this._oFilterExpression){v=this._oFilterExpression.getURIFilterOptionValue()}t=v?v:null;break}case"$orderby":{var P=null;if(this._oSortExpression){P=this._oSortExpression.getURIOrderByOptionValue()}t=P?P:null;break}case"$top":{if(this._iTopRequestOption!==null){t=this._iTopRequestOption}break}case"$skip":{t=this._iSkipRequestOption;break}case"$inlinecount":{t=this._bIncludeCount==true?"allpages":null;break}default:break}return t},getURIToDimensionMemberEntitySet:function(e){var t=null;if(!this._bUseMasterData&&this._oParameterizationRequest){t=this._oParameterizationRequest.getURIToParameterizationEntry(e)+"/"+this._oDimension.getContainingQueryResult().getParameterization().getNavigationPropertyToQueryResult()}else{t=(e?e:"")+"/"+this._oEntitySet.getQName()}return t},getURIToDimensionMemberEntries:function(e){var t=this.getURIToDimensionMemberEntitySet(e);this.getFilterExpression().checkValidity();var r=this.getURIQueryOptionValue("$select");var i=this.getURIQueryOptionValue("$filter");var n=this.getURIQueryOptionValue("$orderby");var o=this.getURIQueryOptionValue("$top");var a=this.getURIQueryOptionValue("$skip");var s=this.getURIQueryOptionValue("$inlinecount");var u=t;var l=false;if(r){u+="?$select="+r;l=true}if(this._oFilterExpression&&i){if(!l){u+="?";l=true}else{u+="&"}u+="$filter="+i}if(this._oSortExpression&&n){if(!l){u+="?";l=true}else{u+="&"}u+="$orderby="+n}if(this._iTopRequestOption&&o){if(!l){u+="?";l=true}else{u+="&"}u+="$top="+o}if(this._iSkipRequestOption&&a){if(!l){u+="?";l=true}else{u+="&"}u+="$skip="+a}if(this._bIncludeCount&&s){if(!l){u+="?";l=true}else{u+="&"}u+="$inlinecount="+s}return u},_oDimension:null,_oParameterizationRequest:null,_oEntitySet:null,_bUseMasterData:false,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null,_bIncludeCount:null,_iSkipRequestOption:0,_iTopRequestOption:null};return o},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/ODataAnnotations", ["./AnnotationParser","sap/base/assert","sap/base/Log","sap/base/i18n/Localization","sap/base/util/extend","sap/base/util/isEmptyObject","sap/ui/base/EventProvider","sap/ui/thirdparty/jquery"],function(t,e,a,o,s,n,r,jQuery){"use strict";var i=r.extend("sap.ui.model.odata.ODataAnnotations",{constructor:function(t){r.apply(this,arguments);if(arguments.length!==1){if(typeof arguments[2]==="object"){t=arguments[2]}t.urls=arguments[0];t.metadata=arguments[1]}this.oMetadata=t.metadata;this.oAnnotations=t.annotationData?t.annotationData:{};this.bLoaded=false;this.bAsync=t&&t.async;this.xPath=null;this.oError=null;this.bValidXML=true;this.oRequestHandles=[];this.oLoadEvent=null;this.oFailedEvent=null;this.mCustomHeaders=t.headers?s({},t.headers):{};if(t.urls){this.addUrl(t.urls);if(!this.bAsync){e(!n(this.oMetadata),"Metadata must be available for synchronous annotation loading");if(this.oError){a.error("OData annotations could not be loaded: "+this.oError.message)}}}},metadata:{publicMethods:["parse","getAnnotationsData","attachFailed","detachFailed","attachLoaded","detachLoaded"]}});i.prototype.getData=function(){return this.oAnnotations};i.prototype.getAnnotationsData=i.prototype.getData;i.prototype.isLoaded=function(){return this.bLoaded};i.prototype.isFailed=function(){return this.oError!==null};i.prototype.fireLoaded=function(t){this.fireEvent("loaded",t);return this};i.prototype.attachLoaded=function(t,e,a){this.attachEvent("loaded",t,e,a);return this};i.prototype.detachLoaded=function(t,e){this.detachEvent("loaded",t,e);return this};i.prototype.fireFailed=function(t){this.fireEvent("failed",t);return this};i.prototype.attachFailed=function(t,e,a){this.attachEvent("failed",t,e,a);return this};i.prototype.detachFailed=function(t,e){this.detachEvent("failed",t,e);return this};i.prototype.setHeaders=function(t){this.mCustomHeaders=s({},t)};i.prototype._createXMLDocument=function(t,e){var a=null;if(typeof t==="string"){e=t;t=null}if(t){a=t}else{a=(new DOMParser).parseFromString(e,"application/xml")}return a};i.prototype._documentHasErrors=function(t){return t.getElementsByTagName("parsererror").length>0};i.prototype._mergeAnnotationData=function(e,a){if(!this.oAnnotations){this.oAnnotations={}}t.merge(this.oAnnotations,e);this.bLoaded=true;if(!a){this.fireLoaded({annotations:e})}};i.prototype.setXML=function(e,a,o){var r={success:function(){},error:function(){},fireEvents:false};o=s({},r,o);var i=this._createXMLDocument(e,a);var u=function(e){var a={xmlDoc:e};var s=t.parse(this.oMetadata,e);if(s){a.annotations=s;o.success(a);this._mergeAnnotationData(s,!o.fireEvents)}else{o.error(a);if(o.fireEvents){this.fireFailed(a)}}}.bind(this,i);if(this._documentHasErrors(i)){o.error({xmlDoc:i});return false}else{var l=this.oMetadata.getServiceMetadata();if(!l||n(l)){this.oMetadata.attachLoaded(u)}else{u()}return true}};i.prototype.addUrl=function(t){var e=this;var a=t;if(Array.isArray(t)&&t.length==0){return Promise.resolve({annotations:this.oAnnotations})}if(!Array.isArray(t)){a=[t]}return new Promise(function(t,o){var s=0;var n={annotations:null,success:[],fail:[]};var r=function(r){s++;if(r.type==="success"){n.success.push(r)}else{n.fail.push(r)}if(s===a.length){n.annotations=e.oAnnotations;if(n.success.length>0){var i={annotations:e.oAnnotations,results:n};e.fireLoaded(i)}if(n.success.length<a.length){var u=new Error("At least one annotation failed to load/parse/merge");u.annotations=n.annotations;u.success=n.success;u.fail=n.fail;o(u)}else{t(n)}}};var i=0;if(e.bAsync){var u=Promise.resolve();for(i=0;i<a.length;++i){var l=e._loadFromUrl.bind(e,a[i]);u=u.then(l,l).then(r,r)}}else{for(i=0;i<a.length;++i){e._loadFromUrl(a[i]).then(r,r)}}})};i.prototype._loadFromUrl=function(t){var e=this;return new Promise(function(a,n){var r={url:t,async:e.bAsync,headers:s({},e.mCustomHeaders,{"Accept-Language":o.getLanguageTag().toString()})};var i;var u=function(a,o){if(i&&i.bSuppressErrorHandlerCall){return}e.oError={type:"fail",url:t,message:o,statusCode:a.status,statusText:a.statusText,responseText:a.responseText};if(e.bAsync){e.oFailedEvent=setTimeout(e.fireFailed.bind(e,e.oError),0)}else{e.fireFailed(e.oError)}n(e.oError)};var l=function(o,s,n){e.setXML(n.responseXML,n.responseText,{success:function(e){a({type:"success",url:t,message:s,statusCode:n.status,statusText:n.statusText,responseText:n.responseText})},error:function(t){u(n,"Malformed XML document")},url:t})};jQuery.ajax(r).done(l).fail(u)})};i.prototype.destroy=function(){for(var t=0;t<this.oRequestHandles.length;++t){if(this.oRequestHandles[t]){this.oRequestHandles[t].bSuppressErrorHandlerCall=true;this.oRequestHandles[t].abort();this.oRequestHandles[t]=null}}r.prototype.destroy.apply(this,arguments);if(this.oLoadEvent){clearTimeout(this.oLoadEvent)}if(this.oFailedEvent){clearTimeout(this.oFailedEvent)}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/ODataContextBinding", ["sap/ui/model/ContextBinding","sap/ui/model/ChangeReason"],function(t,e){"use strict";var i=t.extend("sap.ui.model.odata.ODataContextBinding",{constructor:function(e,i,o,s,n){t.call(this,e,i,o,s,n)}});i.prototype.initialize=function(){var t=this,i=this.oModel.resolve(this.sPath,this.oContext),o=this.oModel._getObject(this.sPath,this.oContext),s=this.oModel._isReloadNeeded(i,o,this.mParameters);if(this.oModel.oMetadata.isLoaded()){if(i&&s){this.fireDataRequested()}this.oModel.createBindingContext(this.sPath,this.oContext,this.mParameters,function(o){t.oElementContext=o;t._fireChange({reason:e.Context});if(i&&s){t.fireDataReceived()}},s)}};i.prototype.refresh=function(t,i){var o=this,s,n,a=false,h=this.oModel.resolve(this.sPath,this.oContext);if(i){n=this.oModel._getObject(this.sPath,this.oContext);if(n){s=this.oModel._getKey(n);if(s in i){a=true}}}else{a=true}if(t||a){if(h){this.fireDataRequested()}this.oModel.createBindingContext(this.sPath,this.oContext,this.mParameters,function(i){if(o.oElementContext===i){if(t){o._fireChange({reason:e.Context})}}else{o.oElementContext=i;o._fireChange({reason:e.Context})}if(h){o.fireDataReceived()}},true)}};i.prototype.setContext=function(t){var i=this,o,s,n;if(this.oContext!==t&&this.isRelative()){this.oContext=t;o=this.oModel.resolve(this.sPath,this.oContext);s=this.oModel._getObject(this.sPath,this.oContext);n=this.oModel._isReloadNeeded(o,s,this.mParameters);if(o&&n){this.fireDataRequested()}this.oModel.createBindingContext(this.sPath,this.oContext,this.mParameters,function(t){i.oElementContext=t;i._fireChange({reason:e.Context});if(o&&n){i.fireDataReceived()}},n)}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/ODataListBinding", ["./CountMode","./ODataUtils","sap/base/assert","sap/base/Log","sap/base/util/deepEqual","sap/base/util/each","sap/base/util/merge","sap/base/util/array/diff","sap/ui/model/ChangeReason","sap/ui/model/Filter","sap/ui/model/FilterProcessor","sap/ui/model/FilterType","sap/ui/model/ListBinding","sap/ui/model/Sorter","sap/ui/model/odata/Filter"],function(t,e,i,s,a,n,r,h,o,l,u,f,d,p,g){"use strict";var c=d.extend("sap.ui.model.odata.ODataListBinding",{constructor:function(t,e,i,s,a,n){d.apply(this,arguments);this.sFilterParams=null;this.sSortParams=null;this.sRangeParams=null;this.sCustomParams=this.oModel.createCustomParams(this.mParameters);this.iStartIndex=0;this.bPendingChange=false;this.aKeys=[];this.bInitial=true;this.sCountMode=n&&n.countMode||this.oModel.sDefaultCountMode;this.bRefresh=false;this.bNeedsUpdate=false;this.bDataAvailable=false;this.bIgnoreSuspend=false;this.oCombinedFilter=null;this.oModel.checkFilter(this.aApplicationFilters);if(!this.oModel.getServiceMetadata()){var r=this,h=function(t){r.bInitial=false;r._initSortersFilters();r.oModel.detachMetadataLoaded(h)};this.oModel.attachMetadataLoaded(this,h)}else{this.bInitial=false;this._initSortersFilters()}var o=this.oModel._getObject(this.sPath,this.oContext);this.aExpandRefs=o;if(Array.isArray(o)&&!s&&!a){this.aKeys=o;this.iLength=o.length;this.bLengthFinal=true;this.bDataAvailable=true}else if(o===null&&this.oModel.resolve(this.sPath,this.oContext)){this.aKeys=[];this.iLength=0;this.bLengthFinal=true;this.bDataAvailable=true}else if(this.oModel.getServiceMetadata()){this.resetData()}}});c.prototype.getAllCurrentContexts=function(){var t=[],e=this;this.aKeys.forEach(function(i){t.push(e.oModel.getContext("/"+i))});return t};c.prototype.getContexts=function(t,e,i){if(this.bInitial){return[]}this.iLastLength=e;this.iLastStartIndex=t;this.iLastThreshold=i;if(!t){t=0}if(!e){e=this.oModel.iSizeLimit;if(this.bLengthFinal&&this.iLength<e){e=this.iLength}}if(!i){i=0}var s=true,n=this._getContexts(t,e),o={},l;l=this.calculateSection(t,e,i,n);s=n.length!=e&&!(this.bLengthFinal&&n.length>=this.iLength-t);if(this.oModel.getServiceMetadata()){if(!this.bPendingRequest&&l.length>0&&(s||e<l.length)){this.loadData(l.startIndex,l.length);n.dataRequested=true}}if(this.bRefresh){if(this.bLengthFinal&&this.iLength==0){this.loadData(l.startIndex,l.length,true);n.dataRequested=true}this.bRefresh=false}else{for(var u=0;u<n.length;u++){o[n[u].getPath()]=n[u].getObject()}if(this.bUseExtendedChangeDetection){if(this.aLastContexts&&t<this.iLastEndIndex){var f=this;var d=h(this.aLastContexts,n,function(t,e){return a(t&&f.oLastContextData&&f.oLastContextData[t.getPath()],e&&o&&o[e.getPath()])});n.diff=d}}this.iLastEndIndex=t+e;this.aLastContexts=n.slice(0);this.oLastContextData=r({},o)}return n};c.prototype.getCurrentContexts=function(){return this.aLastContexts||[]};c.prototype._getContexts=function(t,e){var i=[],s,a;if(!t){t=0}if(!e){e=this.oModel.iSizeLimit;if(this.bLengthFinal&&this.iLength<e){e=this.iLength}}for(var n=t;n<t+e;n++){a=this.aKeys[n];if(!a){break}s=this.oModel.getContext("/"+a);i.push(s)}return i};c.prototype.calculateSection=function(t,e,i,s){var a,n,r,h,o,l={},u;n=t;a=0;for(var f=t;f>=Math.max(t-i,0);f--){u=this.aKeys[f];if(!u){h=f+1;break}}for(var d=t+e;d<t+e+i;d++){u=this.aKeys[d];if(!u){r=d;break}}o=t-h;if(h&&t>i&&o<i){if(s.length!=e){n=t-i}else{n=h-i}a=i}n=Math.max(n,0);if(n==t){n+=s.length}if(s.length!=e){a+=e-s.length}o=r-t-e;if(o==0){a+=i}if(r&&o<i&&o>0){if(n>t){n=r;a+=i}}if(this.bLengthFinal&&this.iLength<a+n){a=this.iLength-n}l.startIndex=n;l.length=a;return l};c.prototype.setContext=function(t){if(this.oContext!=t){this.oContext=t;if(this.isRelative()){this._initSortersFilters();if(!this.bInitial){var e=this.oModel._getObject(this.sPath,this.oContext);this.aExpandRefs=e;if(Array.isArray(e)&&!this.aSorters.length>0&&!this.aFilters.length>0){this.aKeys=e;this.iLength=e.length;this.bLengthFinal=true;this._fireChange({reason:o.Context})}else if(!this.oModel.resolve(this.sPath,this.oContext)||e===null){this.aKeys=[];this.iLength=0;this.bLengthFinal=true;this._fireChange({reason:o.Context})}else{this.refresh()}}}}};c.prototype.getDownloadUrl=function(t){var e=[],i;if(t){e.push("$format="+encodeURIComponent(t))}if(this.sSortParams){e.push(this.sSortParams)}if(this.sFilterParams){e.push(this.sFilterParams)}if(this.sCustomParams){e.push(this.sCustomParams)}i=this.oModel.resolve(this.sPath,this.oContext);return i&&this.oModel._createRequestUrl(i,null,e)};c.prototype.loadData=function(e,i,s){var a=this,r=false;if(e||i){this.sRangeParams="$skip="+e+"&$top="+i;this.iStartIndex=e}else{e=this.iStartIndex}var h=[];if(this.sRangeParams){h.push(this.sRangeParams)}if(this.sSortParams){h.push(this.sSortParams)}if(this.sFilterParams){h.push(this.sFilterParams)}if(this.sCustomParams){h.push(this.sCustomParams)}if(!this.bLengthFinal&&(this.sCountMode==t.Inline||this.sCountMode==t.Both)){h.push("$inlinecount=allpages");r=true}function l(t){n(t.results,function(t,i){a.aKeys[e+t]=a.oModel._getKey(i)});if(r&&t.__count){a.iLength=parseInt(t.__count);a.bLengthFinal=true}if(a.iLength<e+t.results.length){a.iLength=e+t.results.length;a.bLengthFinal=false}if(t.results.length<i||i===undefined){a.iLength=e+t.results.length;a.bLengthFinal=true}if(e==0&&t.results.length==0){a.iLength=0;a.bLengthFinal=true}a.oRequestHandle=null;a.bPendingRequest=false;a.bNeedsUpdate=true;a.bIgnoreSuspend=true}function u(t){a.fireDataReceived({data:t})}function f(t,e){a.oRequestHandle=null;a.bPendingRequest=false;if(!e){a.aKeys=[];a.iLength=0;a.bLengthFinal=true;a.bDataAvailable=true;a._fireChange({reason:o.Change})}a.fireDataReceived()}function d(t){a.oRequestHandle=t}var p=this.sPath,g=this.oContext;if(this.isRelative()){p=this.oModel.resolve(p,g)}if(p){if(s){var c=this.oModel._createRequestUrl(p,null,h);this.fireDataRequested();this.oModel.fireRequestSent({url:c,method:"GET",async:true});setTimeout(function(){a.bNeedsUpdate=true;a.checkUpdate();a.oModel.fireRequestCompleted({url:c,method:"GET",async:true,success:true});a.fireDataReceived({data:{}})},0)}else{this.bPendingRequest=true;this.fireDataRequested();this.oModel._loadData(p,h,l,f,false,d,u)}}};c.prototype.getLength=function(){if(this.bLengthFinal||this.iLength==0){return this.iLength}else{var t=this.iLastThreshold||this.iLastLength||10;return this.iLength+t}};c.prototype.isLengthFinal=function(){return this.bLengthFinal};c.prototype._getLength=function(){var t=this;var e=[];if(this.sFilterParams){e.push(this.sFilterParams)}if(this.mParameters&&this.mParameters.custom){var i={custom:{}};n(this.mParameters.custom,function(t,e){i.custom[t]=e});e.push(this.oModel.createCustomParams(i))}function a(e){t.iLength=parseInt(e);t.bLengthFinal=true}function r(t){var e="Request for $count failed: "+t.message;if(t.response){e+=", "+t.response.statusCode+", "+t.response.statusText+", "+t.response.body}s.warning(e)}var h=this.oModel.resolve(this.sPath,this.oContext);if(h){var o=this.oModel._createRequestUrl(h+"/$count",null,e);var l=this.oModel._createRequest(o,"GET",false);l.headers["Accept"]="text/plain, */*;q=0.5";this.oModel._request(l,a,r,undefined,undefined,this.oModel.getServiceMetadata())}};c.prototype.refresh=function(t,e,i){var s=false;if(!t){if(i){var a=this.oModel.resolve(this.sPath,this.oContext);var r=this.oModel.oMetadata._getEntityTypeByPath(a);if(r&&r.entityType in i){s=true}}if(e&&!s){n(this.aKeys,function(t,i){if(i in e){s=true;return false}return true})}if(!e&&!i){s=true}}if(t||s){this.abortPendingRequest();this.resetData();this._fireRefresh({reason:o.Refresh})}};c.prototype._fireRefresh=function(t){if(this.oModel.resolve(this.sPath,this.oContext)){this.bRefresh=true;this.fireEvent("refresh",t)}};c.prototype.initialize=function(){if(this.oModel.oMetadata.isLoaded()){if(this.bDataAvailable){this._fireChange({reason:o.Change})}else{this._fireRefresh({reason:o.Refresh})}}};c.prototype.checkUpdate=function(t,e){var i=this.sChangeReason?this.sChangeReason:o.Change,s=false,r,h,l=this,u,f;if(this.bSuspended&&!this.bIgnoreSuspend){return}if(!t&&!this.bNeedsUpdate){u=this.oModel._getObject(this.sPath,this.oContext);f=Array.isArray(u)&&!a(u,this.aExpandRefs);this.aExpandRefs=u;if(f){if(this.aSorters.length>0||this.aFilters.length>0){this.refresh();return}else{this.aKeys=u;this.iLength=u.length;this.bLengthFinal=true;s=true}}else if(e){n(this.aKeys,function(t,i){if(i in e){s=true;return false}return true})}else{s=true}if(s&&this.aLastContexts){s=false;var d=this._getContexts(this.iLastStartIndex,this.iLastLength,this.iLastThreshold);if(this.aLastContexts.length!=d.length){s=true}else{n(this.aLastContexts,function(t,e){r=l.oLastContextData[e.getPath()];h=d[t].getObject();if(!a(r,h,true)){s=true;return false}return true})}}}if(t||s||this.bNeedsUpdate){this.bNeedsUpdate=false;this._fireChange({reason:i})}this.sChangeReason=undefined;this.bIgnoreSuspend=false};c.prototype.resetData=function(){this.aKeys=[];this.iLength=0;this.bLengthFinal=false;this.sChangeReason=undefined;this.bDataAvailable=false;if(this.oModel.isCountSupported()&&(this.sCountMode==t.Request||this.sCountMode==t.Both)){this._getLength()}};c.prototype.abortPendingRequest=function(){if(this.oRequestHandle){this.oRequestHandle.abort();this.oRequestHandle=null;this.bPendingRequest=false}};c.prototype.sort=function(t,e){var i=false;if(!t){t=[]}if(t instanceof p){t=[t]}this.aSorters=t;this.createSortParams(t);if(!this.bInitial){this.aKeys=[];this.abortPendingRequest();this.sChangeReason=o.Sort;this._fireRefresh({reason:this.sChangeReason});this._fireSort({sorter:t});i=true}if(e){return i}else{return this}};c.prototype.createSortParams=function(t){this.sSortParams=e.createSortParams(t)};c.prototype.filter=function(t,e,i){var s=false;if(!t){t=[]}if(t instanceof l){t=[t]}this.oModel.checkFilter(t);if(e==f.Application){this.aApplicationFilters=t}else{this.aFilters=t}if(!t||!Array.isArray(t)||t.length==0){this.aFilters=[]}if(!this.aApplicationFilters||!Array.isArray(this.aApplicationFilters)||this.aApplicationFilters.length===0){this.aApplicationFilters=[]}this.convertFilters();this.oCombinedFilter=u.combineFilters(this.aFilters,this.aApplicationFilters);this.createFilterParams(this.oCombinedFilter);if(!this.bInitial){this.resetData();this.abortPendingRequest();this.sChangeReason=o.Filter;this._fireRefresh({reason:this.sChangeReason});if(e==f.Application){this._fireFilter({filters:this.aApplicationFilters})}else{this._fireFilter({filters:this.aFilters})}s=true}if(i){return s}else{return this}};c.prototype.convertFilters=function(){this.aFilters=this.aFilters.map(function(t){return t instanceof g?t.convert():t});this.aApplicationFilters=this.aApplicationFilters.map(function(t){return t instanceof g?t.convert():t})};c.prototype.createFilterParams=function(t){this.sFilterParams=e.createFilterParams(t,this.oModel.oMetadata,this.oEntityType)};c.prototype._initSortersFilters=function(){var t=this.oModel.resolve(this.sPath,this.oContext);if(!t){return}this.oEntityType=this._getEntityType();this.convertFilters();this.oCombinedFilter=u.combineFilters(this.aFilters,this.aApplicationFilters);this.createSortParams(this.aSorters);this.createFilterParams(this.oCombinedFilter)};c.prototype._getEntityType=function(){var t=this.oModel.resolve(this.sPath,this.oContext);if(t){var e=this.oModel.oMetadata._getEntityTypeByPath(t);i(e,"EntityType for path "+t+" could not be found!");return e}return undefined};c.prototype.resume=function(){this.bIgnoreSuspend=false;d.prototype.resume.apply(this,arguments)};return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/ODataModel", ["./CountMode","./ODataContextBinding","./ODataListBinding","./ODataMetadata","./ODataPropertyBinding","./ODataTreeBinding","./ODataUtils","sap/base/assert","sap/base/Log","sap/base/i18n/Localization","sap/base/security/encodeURL","sap/base/util/each","sap/base/util/extend","sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/base/util/merge","sap/base/util/uid","sap/ui/core/Supportability","sap/ui/model/BindingMode","sap/ui/model/Context","sap/ui/model/FilterProcessor","sap/ui/model/Model","sap/ui/model/odata/ODataAnnotations","sap/ui/model/odata/ODataMetaModel","sap/ui/thirdparty/datajs","sap/ui/thirdparty/URI"],function(e,t,a,s,i,r,n,o,d,u,h,f,c,l,p,y,_,g,b,m,v,M,R,T,C,U){"use strict";var A=M.extend("sap.ui.model.odata.ODataModel",{constructor:function(t,a,i,r,o,d,h,f){M.apply(this,arguments);var c,l,p,y=null,_,m,v,R,T,U,q=this;if(typeof t==="object"){a=t;t=a.serviceUrl}if(typeof a==="object"){i=a.user;r=a.password;o=a.headers;d=a.tokenHandling;f=a.loadMetadataAsync;h=a.withCredentials;p=a.maxDataServiceVersion;c=a.useBatch;l=a.refreshAfterChange;y=a.annotationURI;_=a.loadAnnotationsJoined;v=a.defaultCountMode;m=a.metadataNamespaces;R=a.serviceUrlParams;T=a.metadataUrlParams;U=a.skipMetadataAnnotationParsing;a=a.json}this.oServiceData={};this.sDefaultBindingMode=b.OneWay;this.mSupportedBindingModes={OneWay:true,OneTime:true,TwoWay:true};this.mUnsupportedFilterOperators={Any:true,All:true};this.bCountSupported=true;this.bJSON=a;this.bCache=true;this.aPendingRequestHandles=[];this.oRequestQueue={};this.aBatchOperations=[];this.oHandler=undefined;this.bTokenHandling=d!==false;this.bWithCredentials=h===true;this.bUseBatch=c===true;this.bRefreshAfterChange=l!==false;this.sMaxDataServiceVersion=p;this.bLoadMetadataAsync=!!f;this.bLoadAnnotationsJoined=_===undefined?true:_;this.sAnnotationURI=y;this.sDefaultCountMode=v||e.Both;this.oMetadataLoadEvent=null;this.oMetadataFailedEvent=null;this.bSkipMetadataAnnotationParsing=U;this.oHeaders={};this.setHeaders(o);this.oData={};this.oMetadata=null;this.oAnnotations=null;this.aUrlParams=[];if(t.indexOf("?")==-1){this.sServiceUrl=t}else{var E=t.split("?");this.sServiceUrl=E[0];if(E[1]){this.aUrlParams.push(E[1])}}if(g.isStatisticsEnabled()){this.aUrlParams.push("sap-statistics=true")}this.sServiceUrl=this.sServiceUrl.replace(/\/$/,"");var P=this._createRequestUrl("$metadata",undefined,T);if(!A.mServiceData[P]){A.mServiceData[P]={}}this.oServiceData=A.mServiceData[P];if(this.bTokenHandling&&this.oServiceData.securityToken){this.oHeaders["x-csrf-token"]=this.oServiceData.securityToken}this.sUser=i;this.sPassword=r;this.oHeaders["Accept-Language"]=u.getLanguageTag().toString();if(!this.oServiceData.oMetadata){this.oServiceData.oMetadata=new s(P,{async:this.bLoadMetadataAsync,user:this.sUser,password:this.sPassword,headers:this.mCustomHeaders,namespaces:m,withCredentials:this.bWithCredentials})}this.oMetadata=this.oServiceData.oMetadata;this.pAnnotationsLoaded=this.oMetadata.loaded();if(this.sAnnotationURI||!this.bSkipMetadataAnnotationParsing){var S=this._getAnnotationParser();if(!this.bSkipMetadataAnnotationParsing){if(!this.bLoadMetadataAsync){this.addAnnotationXML(this.oMetadata.sMetadataBody,!!this.sAnnotationURI)}else{this.pAnnotationsLoaded=this.oMetadata.loaded().then(function(e,t){if(this.bDestroyed){return Promise.reject()}return this.addAnnotationXML(t["metadataString"],e)}.bind(this,!!this.sAnnotationURI))}}if(this.sAnnotationURI){if(this.bLoadMetadataAsync){this.pAnnotationsLoaded=this.pAnnotationsLoaded.then(S.addUrl.bind(S,this.sAnnotationURI))}else{this.pAnnotationsLoaded=Promise.all([this.pAnnotationsLoaded,S.addUrl(this.sAnnotationURI)])}}}if(R){this.aUrlParams=this.aUrlParams.concat(n._createUrlParamsArray(R))}this.onMetadataLoaded=function(e){q._initializeMetadata();q.initialize()};this.onMetadataFailed=function(e){q.fireMetadataFailed(e.getParameters())};if(!this.oMetadata.isLoaded()){this.oMetadata.attachLoaded(this.onMetadataLoaded);this.oMetadata.attachFailed(this.onMetadataFailed)}if(this.oMetadata.isFailed()){this.refreshMetadata()}if(this.oMetadata.isLoaded()){this._initializeMetadata(true)}if(this.bJSON){if(this.sMaxDataServiceVersion==="3.0"){this.oHeaders["Accept"]="application/json;odata=fullmetadata"}else{this.oHeaders["Accept"]="application/json"}this.oHandler=C.jsonHandler}else{this.oHeaders["Accept"]="application/atom+xml,application/atomsvc+xml,application/xml";this.oHandler=C.atomHandler}this.oHeaders["MaxDataServiceVersion"]="2.0";if(this.sMaxDataServiceVersion){this.oHeaders["MaxDataServiceVersion"]=this.sMaxDataServiceVersion}this.oHeaders["DataServiceVersion"]="2.0"},metadata:{publicMethods:["create","remove","update","submitChanges","getServiceMetadata","read","hasPendingChanges","refresh","refreshMetadata","resetChanges","isCountSupported","setCountSupported","setDefaultCountMode","getDefaultCountMode","forceNoCache","setProperty","getSecurityToken","refreshSecurityToken","setHeaders","getHeaders","setUseBatch"]}});A.M_EVENTS={RejectChange:"rejectChange",MetadataLoaded:"metadataLoaded",MetadataFailed:"metadataFailed",AnnotationsLoaded:"annotationsLoaded",AnnotationsFailed:"annotationsFailed"};A.mServiceData={};A.prototype.fireRejectChange=function(e){this.fireEvent("rejectChange",e);return this};A.prototype.attachRejectChange=function(e,t,a){this.attachEvent("rejectChange",e,t,a);return this};A.prototype.detachRejectChange=function(e,t){this.detachEvent("rejectChange",e,t);return this};A.prototype._initializeMetadata=function(e){var t=this;this.bUseBatch=this.bUseBatch||this.oMetadata.getUseBatch();var a=function(e){if(e){t.metadataLoadEvent=setTimeout(a.bind(t),0)}else if(t.oMetadata){t.fireMetadataLoaded({metadata:t.oMetadata});d.debug("ODataModel fired metadataloaded")}};if(this.sAnnotationURI&&this.bLoadAnnotationsJoined){if(this.oAnnotations&&(this.oAnnotations.bInitialized||this.oAnnotations.isFailed())){a(!this.bLoadMetadataAsync)}else{this.oAnnotations.attachEventOnce("loaded",function(){a(true)})}}else{a(e)}};A.prototype.fireAnnotationsLoaded=function(e){if(!this.bLoadMetadataAsync){setTimeout(this.fireEvent.bind(this,"annotationsLoaded",e),0)}else{this.fireEvent("annotationsLoaded",e)}return this};A.prototype.attachAnnotationsLoaded=function(e,t,a){this.attachEvent("annotationsLoaded",e,t,a);return this};A.prototype.detachAnnotationsLoaded=function(e,t){this.detachEvent("annotationsLoaded",e,t);return this};A.prototype.fireAnnotationsFailed=function(e){if(!this.bLoadMetadataAsync){setTimeout(this.fireEvent.bind(this,"annotationsFailed",e),0)}else{this.fireEvent("annotationsFailed",e)}d.debug("ODataModel fired annotationsFailed");return this};A.prototype.attachAnnotationsFailed=function(e,t,a){this.attachEvent("annotationsFailed",e,t,a);return this};A.prototype.detachAnnotationsFailed=function(e,t){this.detachEvent("annotationsFailed",e,t);return this};A.prototype.fireMetadataLoaded=function(e){this.fireEvent("metadataLoaded",e);return this};A.prototype.attachMetadataLoaded=function(e,t,a){this.attachEvent("metadataLoaded",e,t,a);return this};A.prototype.detachMetadataLoaded=function(e,t){this.detachEvent("metadataLoaded",e,t);return this};A.prototype.fireMetadataFailed=function(e){this.fireEvent("metadataFailed",e);return this};A.prototype.attachMetadataFailed=function(e,t,a){this.attachEvent("metadataFailed",e,t,a);return this};A.prototype.detachMetadataFailed=function(e,t){this.detachEvent("metadataFailed",e,t);return this};A.prototype.refreshMetadata=function(){if(this.oMetadata&&this.oMetadata.refresh){this.oMetadata.refresh().catch(e=>{d.fatal(e)})}};A.prototype._createRequestUrl=function(e,t,a,s,i){var r,o,d,u="";if(e&&e.indexOf("?")!=-1){d=e.substr(e.indexOf("?")+1);e=e.substr(0,e.indexOf("?"))}o=this._normalizePath(e,t);if(!s){u=this.sServiceUrl+o}else{u=o.substr(o.indexOf("/")+1)}r=n._createUrlParamsArray(a);if(this.aUrlParams){r=r.concat(this.aUrlParams)}if(d){r.push(d)}if(r.length>0){u+="?"+r.join("&")}if(i===undefined){i=true}if(i===false){var h=Date.now();var f=u.replace(/([?&])_=[^&]*/,"$1_="+h);u=f+(f===u?(/\?/.test(u)?"&":"?")+"_="+h:"")}return u};A.prototype._loadData=function(e,t,a,s,i,r,n){var o,u=[],h=this._createRequestUrl(e,null,t,null,i||this.bCache),f=this._createRequest(h,"GET",true),c=this;function l(e,t){var s=e,i={};if(t.statusCode==204){if(a){a(null)}if(n){n(null)}c.fireRequestCompleted({url:f.requestUri,type:"GET",async:f.async,info:"Accept headers:"+c.oHeaders["Accept"],infoObject:{acceptHeaders:c.oHeaders["Accept"]},success:true});return undefined}if(!s){d.fatal("The following problem occurred: No data was retrieved by service: "+t.requestUri);c.fireRequestCompleted({url:f.requestUri,type:"GET",async:f.async,info:"Accept headers:"+c.oHeaders["Accept"],infoObject:{acceptHeaders:c.oHeaders["Accept"]},success:false});return false}if(c.bUseBatch){var r=c._getBatchErrors(e);if(r.length>0){p(r[0]);return false}if(s.__batchResponses&&s.__batchResponses.length>0){s=s.__batchResponses[0].data}else{d.fatal("The following problem occurred: No data was retrieved by service: "+t.requestUri)}}u=u.concat(s.results);if(s.__next){var o=new U(s.__next);f.requestUri=o.absoluteTo(t.requestUri).toString();y(f)}else{if(s.results){var h,l;for(l in u){h=u[l];if(u===h){continue}s.results[l]=h}}if(s.results&&!Array.isArray(s.results)){s=s.results}c._importData(s,i);if(c.sChangeKey&&i){var _=c.sChangeKey.substr(c.sChangeKey.lastIndexOf("/")+1);if(i[_]){delete c.oRequestQueue[c.sChangeKey];c.sChangeKey=null}}if(a){a(s)}c.checkUpdate(false,false,i);if(n){n(s)}c.fireRequestCompleted({url:f.requestUri,type:"GET",async:f.async,info:"Accept headers:"+c.oHeaders["Accept"],infoObject:{acceptHeaders:c.oHeaders["Accept"]},success:true})}return undefined}function p(e){if(c.bTokenHandling&&e.response){var t=c._getHeader("x-csrf-token",e.response.headers);if(!f.bTokenReset&&e.response.statusCode=="403"&&t&&t.toLowerCase()=="required"){c.resetSecurityToken();f.bTokenReset=true;y();return}}var a=c._handleError(e);if(s){s(e,o&&o.bAborted)}c.fireRequestCompleted({url:f.requestUri,type:"GET",async:f.async,info:"Accept headers:"+c.oHeaders["Accept"],infoObject:{acceptHeaders:c.oHeaders["Accept"]},success:false,errorobject:a});if(!o||!o.bAborted){a.url=f.requestUri;c.fireRequestFailed(a)}}function y(){if(c.bUseBatch){c.updateSecurityToken();var t=U.parse(f.requestUri).query;var a=c._createRequestUrl(e,null,t,c.bUseBatch);f=c._createRequest(a,"GET",true);if(c.bTokenHandling){delete f.headers["x-csrf-token"]}var s=c._createBatchRequest([f],true);o=c._request(s,l,p,C.batchHandler,undefined,c.getServiceMetadata())}else{o=c._request(f,l,p,c.oHandler,undefined,c.getServiceMetadata())}if(r){var i={abort:function(){o.bAborted=true;o.abort()}};r(i)}}if(c.bTokenHandling){delete f.headers["x-csrf-token"]}this.fireRequestSent({url:f.requestUri,type:"GET",async:f.async,info:"Accept headers:"+this.oHeaders["Accept"],infoObject:{acceptHeaders:this.oHeaders["Accept"]}});y()};A.prototype._importData=function(e,t){var a=this,s,i,r,n;if(e.results){s=[];f(e.results,function(e,i){s.push(a._importData(i,t))});return s}else{i=this._getKey(e);n=this.oData[i];if(!n){n=e;this.oData[i]=n}f(e,function(e,s){if(s&&(s.__metadata&&s.__metadata.uri||s.results)&&!s.__deferred){r=a._importData(s,t);if(Array.isArray(r)){n[e]={__list:r}}else{n[e]={__ref:r}}}else if(!s||!s.__deferred){n[e]=s}});t[i]=true;return i}};A.prototype._removeReferences=function(e){var t=this,a;if(e.results){a=[];f(e.results,function(e,s){a.push(t._removeReferences(s))});return a}else{f(e,function(t,a){if(a){if(a["__ref"]||a["__list"]){delete e[t]}}});return e}};A.prototype._restoreReferences=function(e){var t=this,a,s=[];if(e.results){a=[];f(e.results,function(e,s){a.push(t._restoreReferences(s))});return a}else{f(e,function(a,i){if(i&&i["__ref"]){var r=t._getObject("/"+i["__ref"]);o(r,"ODataModel inconsistent: "+i["__ref"]+" not found!");if(r){delete i["__ref"];e[a]=r;t._restoreReferences(r)}}else if(i&&i["__list"]){f(i["__list"],function(e,a){var r=t._getObject("/"+i["__list"][e]);o(r,"ODataModel inconsistent: "+i["__list"][e]+" not found!");if(r){s.push(r);t._restoreReferences(r)}});delete i["__list"];i.results=s;s=[]}});return e}};A.prototype.removeData=function(){this.oData={}};A.prototype.initialize=function(){var e=this.getBindings();f(e,function(e,t){t.initialize()})};A.prototype.refresh=function(e,t){if(t){this.removeData()}this._refresh(e)};A.prototype._refresh=function(e,t,a){var s=this.getBindings();f(s,function(s,i){i.refresh(e,t,a)})};A.prototype.checkUpdate=function(e,t,a,s){if(t){if(!this.sUpdateTimer){this.sUpdateTimer=setTimeout(function(){this.checkUpdate(e,false,a)}.bind(this),0)}return}if(this.sUpdateTimer){clearTimeout(this.sUpdateTimer);this.sUpdateTimer=null}var i=this.getBindings();f(i,function(t,i){if(!s||this.isMetaModelPath(i.getPath())){i.checkUpdate(e,a)}}.bind(this))};A.prototype.bindProperty=function(e,t,a){var s=new i(this,e,t,a);return s};A.prototype.bindList=function(e,t,s,i,r){var n=new a(this,e,t,s,i,r);return n};A.prototype.bindTree=function(e,t,a,s){var i=new r(this,e,t,a,s);return i};A.prototype.createBindingContext=function(e,t,a,s,i){var r=this.resolve(e,t);i=!!i;if(typeof t=="function"){s=t;t=null}if(typeof a=="function"){s=a;a=null}if(!r){if(s){s(null)}return null}var n=this._getObject(e,t),o,d,u=this;if(!i){i=this._isReloadNeeded(r,n,a)}if(!i){o=this._getKey(n);d=this.getContext("/"+o);if(s){s(d)}return d}if(s){var h=!e.startsWith("/");if(r){var f=[],c=this.createCustomParams(a);if(c){f.push(c)}this._loadData(r,f,function(a){o=a?u._getKey(a):undefined;if(o&&t&&h){var i=t.getPath();i=i.substr(1);if(u.oData[i]){u.oData[i][e]={__ref:o}}}d=u.getContext("/"+o);s(d)},function(){s(null)})}else{s(null)}}return undefined};A.prototype._isReloadNeeded=function(e,t,a){var s,i,r,n,o,d,u=[],h=[];if(!e){return false}if(!t){return true}if(a&&a["expand"]){r=a["expand"].replace(/\s/g,"");u=r.split(",")}if(u){for(i=0;i<u.length;i++){var f=u[i].indexOf("/");if(f!==-1){var c=u[i].slice(0,f);var l=u[i].slice(f+1);u[i]=[c,l]}}}for(i=0;i<u.length;i++){var p=u[i];if(Array.isArray(p)){var y=t[p[0]];var _=p[1];if(!y||y&&y.__deferred){return true}else if(y){if(y.__list&&y.__list.length>0){for(var g=0;g<y.__list.length;g++){n="/"+y.__list[g];s=this.getObject(n);o=this._isReloadNeeded(n,s,{expand:_});if(o){return true}}}else if(y.__ref){n="/"+y.__ref;s=this.getObject(n);o=this._isReloadNeeded(n,s,{expand:_});if(o){return true}}}}else if(t[p]===undefined||t[p]&&t[p].__deferred){return true}}if(a&&a["select"]){d=a["select"].replace(/\s/g,"");h=d.split(",")}for(i=0;i<h.length;i++){if(t[h[i]]===undefined){return true}}if(h.length==0){var b=this.oMetadata._getEntityTypeByPath(e);if(!b){return false}else{for(i=0;i<b.property.length;i++){if(t[b.property[i].name]===undefined){return true}}}}return false};A.prototype.destroyBindingContext=function(e){};A.prototype.createCustomParams=function(e){var t,a,s=[],i,r={expand:true,select:true};for(a in e){if(a in r){s.push("$"+a+"="+h(e[a]))}if(a=="custom"){i=e[a];for(t in i){if(t.indexOf("$")==0){d.warning("Trying to set OData parameter "+t+" as custom query option!")}else{s.push(t+"="+h(i[t]))}}}}return s.join("&")};A.prototype.bindContext=function(e,a,s){var i=new t(this,e,a,s);return i};A.prototype.setCountSupported=function(e){this.bCountSupported=e};A.prototype.isCountSupported=function(){return this.bCountSupported};A.prototype.setDefaultCountMode=function(e){this.sDefaultCountMode=e};A.prototype.getDefaultCountMode=function(){return this.sDefaultCountMode};A.prototype._getKey=function(e,t){var a,s;if(e instanceof m){a=e.getPath().substr(1)}else if(e&&e.__metadata&&e.__metadata.uri){s=e.__metadata.uri;a=s.substr(s.lastIndexOf("/")+1)}if(t){a=decodeURIComponent(a)}return a};A.prototype.getKey=function(e,t){return this._getKey(e,t)};A.prototype.createKey=function(e,t,a){var s=this.oMetadata._getEntityTypeByPath(e),i=e,r=this,d,u,h;o(s,'Could not find entity type of collection "'+e+'" in service metadata!');i+="(";if(s.key.propertyRef.length==1){d=s.key.propertyRef[0].name;o(d in t,'Key property "'+d+'" is missing in object!');h=this.oMetadata._getPropertyMetadata(s,d);u=n.formatValue(t[d],h.type);i+=a?u:encodeURIComponent(u)}else{f(s.key.propertyRef,function(e,f){if(e>0){i+=","}d=f.name;o(d in t,'Key property "'+d+'" is missing in object!');h=r.oMetadata._getPropertyMetadata(s,d);u=n.formatValue(t[d],h.type);i+=d;i+="=";i+=a?u:encodeURIComponent(u)})}i+=")";return i};A.prototype.getProperty=function(e,t,a){var s=this._getObject(e,t);if(a==null||a==undefined){return s}if(!p(s)){return s}s=y({},s);if(a==true){return this._restoreReferences(s)}else{return this._removeReferences(s)}};A.prototype._getObject=function(e,t){var a=this.isLegacySyntax()?this.oData:null,s=this.resolve(e,t),i,r,n,o,d,u;if(this.oMetadata&&s&&s.indexOf("/#")>-1){if(this.isMetaModelPath(s)){i=s.indexOf("/##");u=this.getMetaModel();if(!this.bMetaModelLoaded){return null}r=s.substr(0,i);n=s.substr(i+3);o=u.getMetaContext(r);a=u.getProperty(n,o)}else{a=this.oMetadata._getAnnotation(s)}}else{if(t){d=t.getPath();d=d.substr(1);a=this.oData[d]}if(!e){return a}var h=e.split("/"),f=0;if(!h[0]){a=this.oData;f++}while(a&&h[f]){a=a[h[f]];if(a){if(a.__ref){a=this.oData[a.__ref]}else if(a.__list){a=a.__list}else if(a.__deferred){a=undefined}}f++}}return a};A.prototype.updateSecurityToken=function(){if(this.bTokenHandling){if(!this.oServiceData.securityToken){this.refreshSecurityToken()}if(this.bTokenHandling){this.oHeaders["x-csrf-token"]=this.oServiceData.securityToken}}};A.prototype.resetSecurityToken=function(){delete this.oServiceData.securityToken;delete this.oHeaders["x-csrf-token"]};A.prototype.getSecurityToken=function(){var e=this.oServiceData.securityToken;if(!e){this.refreshSecurityToken();e=this.oServiceData.securityToken}return e};A.prototype.refreshSecurityToken=function(e,t,a){var s=this,i,r;a=a===true;i=this._createRequestUrl("/");var n=this._createRequest(i,"GET",a);n.headers["x-csrf-token"]="Fetch";function o(t,a){if(a){r=s._getHeader("x-csrf-token",a.headers);if(r){s.oServiceData.securityToken=r;s.oHeaders["x-csrf-token"]=r}else{s.resetSecurityToken();s.bTokenHandling=false}}if(e){e(t,a)}}function d(e){s.resetSecurityToken();s.bTokenHandling=false;s._handleError(e);if(t){t(e)}}return this._request(n,o,d,undefined,undefined,this.getServiceMetadata())};A.prototype._submitRequest=function(e,t,a,s,i,r){var n=this,o,d={};function u(s,u){if(t&&i){var c=n._getBatchErrors(s);if(c.length>0){h(c[0]);return false}if(s.__batchResponses&&s.__batchResponses.length>0){o=s.__batchResponses[0].data;if(!o&&s.__batchResponses[0].__changeResponses){o=s.__batchResponses[0].__changeResponses[0].data}}s=o}if(r){if(s&&s.__batchResponses){f(s.__batchResponses,function(e,t){if(t&&t.data){n._importData(t.data,d)}})}}n._handleETag(e,u,t);n._updateRequestQueue(e,t);if(n._isRefreshNeeded(e,u)){n._refresh(false,e.keys,e.entityTypes)}if(a){a(s,u)}return undefined}function h(t){if(n.bTokenHandling&&t.response){var a=n._getHeader("x-csrf-token",t.response.headers);if(!e.bTokenReset&&t.response.statusCode=="403"&&a&&a.toLowerCase()=="required"){n.resetSecurityToken();e.bTokenReset=true;c();return}}n._handleError(t);if(s){s(t)}}function c(){if(n.bTokenHandling){delete e.headers["x-csrf-token"]}if(n.bTokenHandling&&e.method!=="GET"){n.updateSecurityToken();if(n.bTokenHandling){e.headers["x-csrf-token"]=n.oServiceData.securityToken}}if(t){return n._request(e,u,h,C.batchHandler,undefined,n.getServiceMetadata())}else{return n._request(e,u,h,n.oHandler,undefined,n.getServiceMetadata())}}return c()};A.prototype._createBatchRequest=function(e,t){var a,s,i={},r={},n={},o={};r.__batchRequests=e;a=this.sServiceUrl+"/$batch";if(this.aUrlParams.length>0){a+="?"+this.aUrlParams.join("&")}c(i,this.mCustomHeaders,this.oHeaders);delete i["Content-Type"];s={headers:i,requestUri:a,method:"POST",data:r,user:this.sUser,password:this.sPassword,async:t};if(t){s.withCredentials=this.bWithCredentials}f(e,function(e,t){if(t["__changeRequests"]){f(t["__changeRequests"],function(e,t){if(t.keys&&t.method!="POST"){f(t.keys,function(e,t){n[e]=t})}else if(t.entityTypes&&t.method=="POST"){f(t.entityTypes,function(e,t){o[e]=t})}})}});s.keys=n;s.entityTypes=o;return s};A.prototype._handleETag=function(e,t,a){var s,i,r,n,o,u;if(a){o=e.data.__batchRequests;u=t.data.__batchResponses;if(u&&o){for(var h=0;h<o.length;h++){r=o[h].__changeRequests;if(u[h]){n=u[h].__changeResponses;if(r&&n){for(var f=0;f<r.length;f++){if(r[f].method=="MERGE"||r[f].method=="PUT"){s=r[f].requestUri.replace(this.sServiceUrl+"/","");if(!s.startsWith("/")){s="/"+s}i=this._getObject(s);if(i&&i.__metadata&&n[f].headers&&n[f].headers.ETag){i.__metadata.etag=n[f].headers.ETag}}}}}else{d.warning("could not update ETags for batch request: corresponding response for request missing")}}}else{d.warning("could not update ETags for batch request: no batch responses/requests available")}}else{s=e.requestUri.replace(this.sServiceUrl+"/","");if(!s.startsWith("/")){s="/"+s}i=this._getObject(s);if(i&&i.__metadata&&t.headers.ETag){i.__metadata.etag=t.headers.ETag}}};A.prototype._handleBatchErrors=function(e,t){this._getBatchErrors(t);this._handleETag()};A.prototype._getBatchErrors=function(e){var t=[],a;f(e.__batchResponses,function(e,s){if(s.message){a="The following problem occurred: "+s.message;if(s.response){a+=s.response.statusCode+","+s.response.statusText+","+s.response.body}t.push(s);d.fatal(a)}if(s.__changeResponses){f(s.__changeResponses,function(e,s){if(s.message){a="The following problem occurred: "+s.message;if(s.response){a+=s.response.statusCode+","+s.response.statusText+","+s.response.body}t.push(s);d.fatal(a)}})}});return t};A.prototype._handleError=function(e){var t={},a;var s="The following problem occurred: "+e.message;t.message=e.message;if(e.response){if(this.bTokenHandling){a=this._getHeader("x-csrf-token",e.response.headers);if(e.response.statusCode=="403"&&a&&a.toLowerCase()=="required"){this.resetSecurityToken()}}s+=e.response.statusCode+","+e.response.statusText+","+e.response.body;t.statusCode=e.response.statusCode;t.statusText=e.response.statusText;t.responseText=e.response.body}d.fatal(s);return t};A.prototype.getData=function(e,t,a){return this.getProperty(e,t,a)};A.prototype._getETag=function(e,t,a){var s,i,r;if(a){s=a}else if(t&&t.__metadata){s=t.__metadata.etag}else if(e){i=e.replace(this.sServiceUrl+"/","");r=i.indexOf("?");if(r>-1){i=i.substr(0,r)}if(this.oData.hasOwnProperty(i)){s=this.getProperty("/"+i+"/__metadata/etag")}}return s};A.prototype._createRequest=function(e,t,a,s,i){var r={},n;c(r,this.mCustomHeaders,this.oHeaders);n=this._getETag(e,s,i);if(n&&t!="GET"){r["If-Match"]=n}if(this.bJSON&&t!="DELETE"&&this.sMaxDataServiceVersion==="2.0"){r["Content-Type"]="application/json"}if(t=="MERGE"&&!this.bUseBatch){r["x-http-method"]="MERGE";t="POST"}var o={headers:r,requestUri:e,method:t,user:this.sUser,password:this.sPassword,async:a};if(s){o.data=s}if(a){o.withCredentials=this.bWithCredentials}return o};A.prototype._isRefreshNeeded=function(e,t){var a=false,s,i=[],r=this;if(!this.bRefreshAfterChange){return a}if(e.data&&Array.isArray(e.data.__batchRequests)){if(t){i=r._getBatchErrors(t.data);f(i,function(e,t){if(t.response&&t.response.statusCode=="412"){s=t.response.statusCode;return false}return true});if(s){return false}}f(e.data.__batchRequests,function(e,t){if(Array.isArray(t.__changeRequests)){f(t.__changeRequests,function(e,t){a=a||r._isRefreshNeeded(t);return!a})}return!a})}else if(e.method==="GET"){return false}else if(t&&t.statusCode=="412"){a=false}else{a=true}return a};A.prototype.update=function(e,t,a){var s,i,r,n,o,d,u,h,f,c,l,p,y=false;if(a instanceof m||arguments.length>3){d=a;s=arguments[3];i=arguments[4];r=arguments[5]}else{d=a.context||a.oContext;s=a.success||a.fnSuccess;i=a.error||a.fnError;u=a.eTag||a.sETag;r=typeof a.merge=="undefined"?a.bMerge===true:a.merge===true;y=typeof a.async=="undefined"?a.bAsync===true:a.async===true;p=a.urlParameters}o=this._createRequestUrl(e,d,p,this.bUseBatch);if(r){n=this._createRequest(o,"MERGE",y,t,u)}else{n=this._createRequest(o,"PUT",y,t,u)}e=this._normalizePath(e,d);c=this._getObject(e);n.keys={};if(c){l=this._getKey(c);n.keys[l]=true}if(this.bUseBatch){f=this._createBatchRequest([{__changeRequests:[n]}],y);h=this._submitRequest(f,this.bUseBatch,s,i,true)}else{h=this._submitRequest(n,this.bUseBatch,s,i)}return h};A.prototype.create=function(e,t,a){var s,i,r,n,o,d,u,h,f=false,c;if(a&&typeof a=="object"&&!(a instanceof m)){d=a.context;u=a.success;c=a.urlParameters;h=a.error;f=a.async===true}else{d=a;u=arguments[3];h=arguments[4]}r=this._createRequestUrl(e,d,c,this.bUseBatch);s=this._createRequest(r,"POST",f,t);e=this._normalizePath(e,d);o=this.oMetadata._getEntityTypeByPath(e);s.entityTypes={};if(o){s.entityTypes[o.entityType]=true}if(this.bUseBatch){i=this._createBatchRequest([{__changeRequests:[s]}],f);n=this._submitRequest(i,this.bUseBatch,u,h,true)}else{n=this._submitRequest(s,this.bUseBatch,u,h)}return n};A.prototype.remove=function(e,t){var a,s,i,r,n,o,d,u,h,f,c,l,p,y,_=false,g=this;if(t instanceof m||arguments[2]){a=t;r=arguments[2];n=arguments[3]}else if(t){a=t.context||t.oContext;r=t.success||t.fnSuccess;n=t.error||t.fnError;u=t.eTag||t.sETag;f=t.payload||t.oPayload;_=typeof t.async=="undefined"?t.bAsync===true:t.async===true;y=t.urlParameters}c=function(e,t){s=d.substr(d.lastIndexOf("/")+1);if(s.indexOf("?")!=-1){s=s.substr(0,s.indexOf("?"))}delete g.oData[s];delete g.mContexts["/"+s];if(r){r(e,t)}};d=this._createRequestUrl(e,a,y,this.bUseBatch);o=this._createRequest(d,"DELETE",_,f,u);e=this._normalizePath(e,a);i=this._getObject(e);o.keys={};if(i){h=this._getKey(i);o.keys[h]=true}if(this.bUseBatch){l=this._createBatchRequest([{__changeRequests:[o]}],_);p=this._submitRequest(l,this.bUseBatch,c,n,true)}else{p=this._submitRequest(o,this.bUseBatch,c,n)}return p};A.prototype.callFunction=function(e,t){var a,s,i,r,u,h,c,l,p,y,_="GET",g={},b=this;if(t&&typeof t=="object"){_=t.method?t.method:_;h=t.urlParameters;c=t.context;l=t.success;p=t.error;y=t.async===true}else{_=t;h=arguments[2];c=arguments[3];l=arguments[4];p=arguments[5];y=arguments[6]===true}u=this.oMetadata._getFunctionImportMetadata(e,_);o(u,"Function "+e+" not found in the metadata !");if(u){i=this._createRequestUrl(e,c,null,this.bUseBatch);var m=new U(i);if(u.parameter!=null){f(h,function(t,a){var s=u.parameter.filter(function(e){return e.name==t&&e.mode=="In"});if(s.length>0){var i=s[0];g[t]=n.formatValue(a,i.type)}else{d.warning("Parameter "+t+" is not defined for function call "+e+"!")}})}if(_==="GET"){return b.read(e,c,g,true,l,p)}else{f(g,function(e,t){m.addQuery(e,t)});a=this._createRequest(m.toString(),_,y);if(this.bUseBatch){s=this._createBatchRequest([{__changeRequests:[a]}],y);r=this._submitRequest(s,this.bUseBatch,l,p,true)}else{r=this._submitRequest(a,this.bUseBatch,l,p)}return r}}return undefined};A.prototype.read=function(e,t){var a,s,i,r,o,u,h,f,c,l,p,y,_,g,b,M,R;if(t&&typeof t=="object"&&!(t instanceof m)){o=t.context;u=t.urlParameters;h=t.async!==false;f=t.success;c=t.error;l=t.filters;p=t.sorters}else{o=t;u=arguments[2];h=arguments[3]!==false;f=arguments[4];c=arguments[5]}h=h!==false;R=n._createUrlParamsArray(u);_=n.createSortParams(p);if(_){R.push(_)}if(l&&!this.oMetadata){d.fatal("Tried to use filters in read method before metadata is available.")}else{M=this._normalizePath(e,o);b=this.oMetadata&&this.oMetadata._getEntityTypeByPath(M);g=v.groupFilters(l);y=n.createFilterParams(g,this.oMetadata,b);if(y){R.push(y)}}s=this._createRequestUrl(e,o,R,this.bUseBatch);a=this._createRequest(s,"GET",h);if(this.bUseBatch){r=this._createBatchRequest([a],h);i=this._submitRequest(r,this.bUseBatch,f,c,true)}else{i=this._submitRequest(a,this.bUseBatch,f,c)}return i};A.prototype.createBatchOperation=function(e,t,a,s){var i={},r,n,o,d;c(i,this.mCustomHeaders,this.oHeaders);if(e.startsWith("/")){e=e.substr(1)}if(s){r=s.sETag}if(t!="GET"){r=this._getETag(e,a,r);if(r){i["If-Match"]=r}}if(this.bJSON){if(t!="DELETE"&&t!="GET"&&this.sMaxDataServiceVersion==="2.0"){i["Content-Type"]="application/json"}}else{i["Content-Type"]="application/atom+xml"}var u={requestUri:e,method:t.toUpperCase(),headers:i};if(a){u.data=a}if(t!="GET"&&t!="POST"){if(e&&e.indexOf("/")!=0){e="/"+e}n=this._getObject(e);if(n){o=this._getKey(n);u.keys={};u.keys[o]=true}}else if(t=="POST"){var h=e;if(e.indexOf("?")!=-1){h=e.substr(0,e.indexOf("?"))}d=this.oMetadata._getEntityTypeByPath(h);if(d){u.entityTypes={};u.entityTypes[d.entityType]=true}}return u};A.prototype.addBatchReadOperations=function(e){if(!Array.isArray(e)||e.length<=0){d.warning("No array with batch operations provided!");return false}var t=this;f(e,function(e,a){if(a.method!="GET"){d.warning("Batch operation should be a GET operation!");return false}t.aBatchOperations.push(a);return true});return undefined};A.prototype.addBatchChangeOperations=function(e){if(!Array.isArray(e)||e.length<=0){return false}f(e,function(e,t){if(t.method!="POST"&&t.method!="PUT"&&t.method!="MERGE"&&t.method!="DELETE"){d.warning("Batch operation should be a POST/PUT/MERGE/DELETE operation!");return false}return true});this.aBatchOperations.push({__changeRequests:e});return undefined};A.prototype.clearBatch=function(){this.aBatchOperations=[]};A.prototype.submitBatch=function(e,t,a,s){var i,r,n=this;function o(t,a){if(e){e(t,a,n._getBatchErrors(t))}}if(!(typeof e=="function")){var u=a;var h=t;a=e;e=h;t=u}a=a!==false;if(this.aBatchOperations.length<=0){d.warning("No batch operations in batch. No request will be triggered!");return false}i=this._createBatchRequest(this.aBatchOperations,a);r=this._submitRequest(i,true,o,t,false,s);this.clearBatch();return r};A.prototype.getServiceMetadata=function(){if(this.oMetadata&&this.oMetadata.isLoaded()){return this.oMetadata.getServiceMetadata()}return undefined};A.prototype.getServiceAnnotations=function(){if(this.oAnnotations&&this.oAnnotations.getAnnotationsData){return this.oAnnotations.getAnnotationsData()}return undefined};A.prototype.submitChanges=function(e,t,a){var s,i,r=this,n,o,d,u,h,c;if(this.sChangeKey){n=this.sChangeKey.replace(this.sServiceUrl,"");h=this._getObject(n);i=h;if(p(h)){i=y({},h);if(i.__metadata){d=i.__metadata.type;u=i.__metadata.etag;delete i.__metadata;if(d||u){i.__metadata={}}if(d){i.__metadata.type=d}if(u){i.__metadata.etag=u}}f(i,function(e,t){if(t&&t.__deferred){delete i[e]}});var _=this.oMetadata._getEntityTypeByPath(n);if(_){var g=this.oMetadata._getNavigationPropertyNames(_);f(g,function(e,t){delete i[t]})}i=this._removeReferences(i)}if(a&&a.sETag){o=a.sETag}s=this._createRequest(this.sChangeKey,"MERGE",true,i,o);if(this.sUrlParams){s.requestUri+="?"+this.sUrlParams}s.keys={};if(h){c=this._getKey(h);s.keys[c]=true}this.oRequestQueue[this.sChangeKey]=s}if(l(this.oRequestQueue)){return undefined}if(this.bUseBatch){var b=[];f(this.oRequestQueue,function(e,t){delete t._oRef;var a=y({},t);t._oRef=a;a.requestUri=a.requestUri.replace(r.sServiceUrl+"/","");if(a.data._bCreate){delete a.data._bCreate}b.push(a)});s=this._createBatchRequest([{__changeRequests:b}],true);this._submitRequest(s,this.bUseBatch,e,t,true)}else{f(this.oRequestQueue,function(a,s){delete s._oRef;var i=y({},s);s._oRef=i;if(i.data&&i.data._bCreate){delete i.data._bCreate}r._submitRequest(i,this.bUseBatch,e,t,true)})}return undefined};A.prototype._updateRequestQueue=function(e,t){var a,s,i,r=this;if(t){a=e.data.__batchRequests;if(a){for(var n=0;n<a.length;n++){s=a[n].__changeRequests;if(s){for(var o=0;o<s.length;o++){i=s[o];f(this.oRequestQueue,function(e,t){if(t._oRef===i&&e!==r.sChangeKey){delete r.oRequestQueue[e];delete r.oData[e];delete r.mContexts["/"+e]}else if(r.sChangeKey&&e===r.sChangeKey){delete r.oRequestQueue[e];r.sChangeKey=null}})}}}}}else{f(this.oRequestQueue,function(t,a){if(a._oRef===e&&t!==r.sChangeKey){delete r.oRequestQueue[t];delete r.oData[t];delete r.mContexts["/"+t]}else if(r.sChangeKey&&t===r.sChangeKey){delete r.oRequestQueue[t];r.sChangeKey=null}})}};A.prototype.resetChanges=function(e,t){var a;if(this.sChangeKey){a=this.sChangeKey.replace(this.sServiceUrl,"");this._loadData(a,null,e,t)}};A.prototype.setProperty=function(e,t,a,s){var i,r={},n={},o=this._createRequestUrl(e,a),d=e.substring(0,e.lastIndexOf("/")),u,h,f={},c=false;if(!this.resolve(e,a)){return false}o=o.replace(this.sServiceUrl+"/","");o=o.substring(0,o.indexOf("/"));o=this.sServiceUrl+"/"+o;i=e.substr(e.lastIndexOf("/")+1);n=this._getObject(d,a);if(!n){return false}h=d.split("/");for(var l=h.length-1;l>=0;l--){r=this._getObject(h.join("/"),a);if(r){u=this._getKey(r);if(u){break}}h.splice(l-1,1)}if(!u){u=this._getKey(a)}if(u){f[u]=true}if(n._bCreate){n[i]=t;c=true;this.checkUpdate(false,s,f)}else{if(!this.sChangeKey){this.sChangeKey=o}if(this.sChangeKey==o){n[i]=t;c=true;this.checkUpdate(false,s,f)}else{this.fireRejectChange({rejectedValue:t,oldValue:n[i]})}}return c};A.prototype._isHeaderPrivate=function(e){switch(e.toLowerCase()){case"accept":case"accept-language":case"maxdataserviceversion":case"dataserviceversion":return true;case"x-csrf-token":return this.bTokenHandling;default:return false}};A.prototype.setHeaders=function(e){var t={},a=this;if(e){f(e,function(e,s){if(a._isHeaderPrivate(e)){d.warning("Not allowed to modify private header: "+e)}else{t[e]=s}});this.mCustomHeaders=t}else{this.mCustomHeaders={}}if(this.oAnnotations){this.oAnnotations.setHeaders(this.mCustomHeaders)}};A.prototype.getHeaders=function(){return c({},this.mCustomHeaders,this.oHeaders)};A.prototype._getHeader=function(e,t){var a;for(a in t){if(a.toLowerCase()===e.toLowerCase()){return t[a]}}return null};A.prototype.hasPendingChanges=function(){return this.sChangeKey!=null};A.prototype.updateBindings=function(e){this.checkUpdate(e)};A.prototype.forceNoCache=function(e){this.bCache=!e};A.prototype.setTokenHandlingEnabled=function(e){this.bTokenHandling=e};A.prototype.setUseBatch=function(e){this.bUseBatch=e};A.prototype.formatValue=function(e,t){return n.formatValue(e,t)};A.prototype.deleteCreatedEntry=function(e){if(e){var t=e.getPath();delete this.mContexts[t];if(t.startsWith("/")){t=t.substr(1)}delete this.oRequestQueue[t];delete this.oData[t]}};A.prototype.createEntry=function(e,t){var a={},s,i,r;if(!e.startsWith("/")){e="/"+e}var n=this.oMetadata._getEntityTypeByPath(e);if(!n){o(n,"No Metadata for collection "+e+" found");return undefined}if(typeof t==="object"&&!Array.isArray(t)){a=t}else{for(var d=0;d<n.property.length;d++){var u=n.property[d];var h=t&&t.indexOf(u.name)>-1;if(!t||h){a[u.name]=this._createPropertyValue(u.type);if(h){t.splice(t.indexOf(u.name),1)}}}if(t){o(t.length===0,"No metadata for the following properties found: "+t.join(","))}}a._bCreate=true;s=e.substring(1)+"('"+_()+"')";this.oData[s]=a;a.__metadata={type:""+n.entityType};i=this._createRequestUrl(e);r=this._createRequest(i,"POST",true,a);r.entityTypes={};r.entityTypes[n.entityType]=true;this.oRequestQueue[s]=r;return this.getContext("/"+s)};A.prototype._createPropertyValue=function(e){var t=this.oMetadata._splitName(e);var a=t.namespace;var s=t.name;if(a.toUpperCase()!=="EDM"){var i={};var r=this.oMetadata._getObjectMetadata("complexType",s,a);o(r,"Complex type "+e+" not found in the metadata !");for(var n=0;n<r.property.length;n++){var d=r.property[n];i[d.name]=this._createPropertyValue(d.type)}return i}else{return this._getDefaultPropertyValue(s,a)}};A.prototype._getDefaultPropertyValue=function(e,t){return undefined};A.prototype._normalizePath=function(e,t){if(e&&e.indexOf("?")!=-1){e=e.substr(0,e.indexOf("?"))}if(!t&&!e.startsWith("/")){e="/"+e;d.warning(this+" path "+e+" should be absolute if no Context is set")}return this.resolve(e,t)};A.prototype.setRefreshAfterChange=function(e){this.bRefreshAfterChange=e};A.prototype.isList=function(e,t){e=this.resolve(e,t);return e&&e.substr(e.lastIndexOf("/")).indexOf("(")===-1};A.prototype.isMetaModelPath=function(e){return e.indexOf("##")==0||e.indexOf("/##")>-1};A.prototype._request=function(e,t,a,s,i,r){var n;if(this.bDestroyed){return{abort:function(){}}}var o=this;function d(e){return function(){if(o.aPendingRequestHandles){var t=o.aPendingRequestHandles.indexOf(n);if(t>-1){o.aPendingRequestHandles.splice(t,1)}}if(!(n&&n.bSuppressErrorHandlerCall)){e.apply(this,arguments)}}}n=C.request(e,d(t||C.defaultSuccess),d(a||C.defaultError),s,i,r);if(e.async!==false){this.aPendingRequestHandles.push(n)}return n};A.prototype.destroy=function(){this.bDestroyed=true;if(this.aPendingRequestHandles){for(var e=this.aPendingRequestHandles.length-1;e>=0;e--){var t=this.aPendingRequestHandles[e];if(t&&t.abort){t.bSuppressErrorHandlerCall=true;t.abort()}}delete this.aPendingRequestHandles}if(this.oMetadataLoadEvent){clearTimeout(this.oMetadataLoadEvent)}if(this.oMetadataFailedEvent){clearTimeout(this.oMetadataFailedEvent)}if(this.oMetadata){this.oMetadata.detachLoaded(this.onMetadataLoaded);this.oMetadata.detachFailed(this.onMetadataFailed);if(!this.oMetadata.isLoaded()&&!this.oMetadata.hasListeners("loaded")){this.oMetadata.destroy();delete this.oServiceData.oMetadata}delete this.oMetadata}if(this.oAnnotations){this.oAnnotations.detachFailed(this.onAnnotationsFailed);this.oAnnotations.detachLoaded(this.onAnnotationsLoaded);this.oAnnotations.destroy();delete this.oAnnotations;delete this.pAnnotationsLoaded}M.prototype.destroy.apply(this,arguments)};A.prototype._getAnnotationParser=function(e){if(!this.oAnnotations){this.oAnnotations=new R({annotationData:e,url:null,metadata:this.oMetadata,async:this.bLoadMetadataAsync,headers:this.mCustomHeaders});this.oAnnotations.attachFailed(this.onAnnotationsFailed,this);this.oAnnotations.attachLoaded(this.onAnnotationsLoaded,this)}return this.oAnnotations};A.prototype.onAnnotationsFailed=function(e){this.fireAnnotationsFailed(e.getParameters())};A.prototype.onAnnotationsLoaded=function(e){this.fireAnnotationsLoaded(e.getParameters())};A.prototype.addAnnotationUrl=function(e){var t=[].concat(e),a=[],s=[],i=[],r=this;f(t,function(e,t){var i=t.indexOf("$metadata");if(i>=0){if(i==0){t=r.sServiceUrl+"/"+t}a.push(t)}else{s.push(t)}});return this.oMetadata._addUrl(a).then(function(e){return Promise.all(e.map(function(e){i=i.concat(e.entitySets);return r.addAnnotationXML(e["metadataString"])}))}).then(function(){return r._getAnnotationParser().addUrl(s)}).then(function(e){return{annotations:e.annotations,entitySets:i}})};A.prototype.addAnnotationXML=function(e,t){return new Promise(function(a,s){this._getAnnotationParser().setXML(null,e,{success:a,error:s,fireEvents:!t})}.bind(this))};A.prototype.getMetaModel=function(){var e=this;if(!this.oMetaModel){this.oMetaModel=new T(this.oMetadata,this.oAnnotations,this);this.oMetaModel.loaded().then(function(){e.bMetaModelLoaded=true;e.checkUpdate(false,false,null,true)})}return this.oMetaModel};A.prototype.annotationsLoaded=function(){return this.oMetadata.isLoaded()&&(!this.oAnnotations||this.oAnnotations.isLoaded())?null:this.pAnnotationsLoaded};return A});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/ODataTreeBinding", ["./CountMode","sap/base/Log","sap/base/util/each","sap/ui/model/TreeBinding"],function(e,t,s,o){"use strict";var i=o.extend("sap.ui.model.odata.ODataTreeBinding",{constructor:function(e,s,i,r,n){o.apply(this,arguments);this.bPendingRequest=false;this.oFinalLengths={};this.oLengths={};this.oKeys={};this.bNeedsUpdate=false;this.bHasTreeAnnotations=this._hasTreeAnnotations();this.oRootContext=null;this.iNumberOfExpandedLevels=n&&n.numberOfExpandedLevels;this.sCountMode=n&&n.countMode||this.oModel.sDefaultCountMode;if(!this.bHasTreeAnnotations){if(!n||!n.navigation){t.error("A navigation paths parameter object has to be defined");this.oNavigationPaths={}}else{this.oNavigationPaths=n.navigation}}else{t.warning("Tree hierarchy annotations are deprecated and may not work correctly with the sap.ui.model.odata.ODataModel."+" Please use the sap.ui.model.odata.v2.ODataModel (since version 1.28) instead which fully supports hierarchy annotations.")}}});i.prototype.getRootContexts=function(e,t,s){var o=null,i={numberOfExpandedLevels:this.iNumberOfExpandedLevels},r=[],n=true,a=this;if(this.bHasTreeAnnotations){i.level=0;if(!this.bDisplayRootNode){i.level=1}}else{o=this.oModel.resolve(this.getPath(),this.getContext());i.navPath=this._getNavPath(this.getPath());if(i.numberOfExpandedLevels>0){var h=o;for(var l=0;l<i.numberOfExpandedLevels;l++){var f=this._getNavPath(h);i.navPath+="/"+f;h+="/"+f}}var u=this.oModel.isList(this.sPath,this.getContext());if(u){this.bDisplayRootNode=true}else{n=false;this.oModel.createBindingContext(o,null,{expand:i.navPath},function(e){r=[e];if(a.oRootContext!==e){a.oRootContext=e;a._processODataObject(e.getObject(),o,i.navPath);a.bNeedsUpdate=true}},this.bRefresh);this.bRefresh=false}}if(n){if(!this.bDisplayRootNode){r=this._getContextsForNodeId(o,0,1,0,i)}else{r=this._getContextsForNodeId(o,e,t,s,i)}}if(!this.bDisplayRootNode&&r.length>0){this.oRootContext=r[0];r=this.getNodeContexts(r[0],e,t,s)}return r};i.prototype.getNodeContexts=function(e,t,s,o){var i,r={};if(this.bHasTreeAnnotations){var n=e.getProperty(this.oTreeProperties["hierarchy-drill-state-for"]);if(n=="leaf"){return[]}i=e.getProperty(this.oTreeProperties["hierarchy-node-for"]);r.level=parseInt(e.getProperty(this.oTreeProperties["hierarchy-level-for"]))+1}else{var a=this._getNavPath(e.getPath());if(!a){return[]}i=this.oModel.resolve(a,e);r.navPath=this.oNavigationPaths[a]}return this._getContextsForNodeId(i,t,s,o,r)};i.prototype.hasChildren=function(e){if(!e){return false}if(this.bHasTreeAnnotations){var t=e.getProperty(this.oTreeProperties["hierarchy-drill-state-for"]);return t==="expanded"||t==="collapsed"}else{var s=this._getNavPath(e.getPath());var o=e.getPath()+"/"+s;return s&&this.oLengths[o]>0}};i.prototype.getChildCount=function(e){if(this.bHasTreeAnnotations){var t;if(!e){if(this.oRootContext){t=this.oRootContext.getProperty(this.oTreeProperties["hierarchy-node-for"])}else{t="000000"}}else{t=e.getProperty(this.oTreeProperties["hierarchy-node-for"])}return this.oLengths[t]}else{if(!e){return this.oLengths[this.getPath()]}return this.oLengths[e.getPath()+"/"+this._getNavPath(e.getPath())]}};i.prototype._getContextsForNodeId=function(e,t,s,o,i){var r=[],n,a;if(!t){t=0}if(!s){s=this.oModel.iSizeLimit}if(!o){o=0}if(this.bHasTreeAnnotations){if(e==null){e="000000"}if(i.level==0){i.level++}}if(this.oFinalLengths[e]&&this.oLengths[e]<s){s=this.oLengths[e]}if(this.oKeys[e]){for(var h=t;h<t+s;h++){a=this.oKeys[e][h];if(!a){break}r.push(this.oModel.getContext("/"+a))}}n=r.length!=s&&!(this.oFinalLengths[e]&&r.length>=this.oLengths[e]);if(this.oModel.getServiceMetadata()){if(!this.bPendingRequest&&n){var l=[];if(this.bHasTreeAnnotations){if(i.numberOfExpandedLevels>0){var f=i.level+i.numberOfExpandedLevels;l.push("$filter="+this.oTreeProperties["hierarchy-level-for"]+" le '0"+f+"'")}else{l.push("$filter="+this.oTreeProperties["hierarchy-level-for"]+" eq '0"+i.level+"' and "+this.oTreeProperties["hierarchy-parent-node-for"]+" eq '"+e+"'")}}else if(i.navPath){l.push("$expand="+i.navPath)}this._loadSubNodes(e,t,s,o,l,i)}}return r};i.prototype._getCountForNodeId=function(e,s,o,i,r){var n=this;var a=[];function h(t){n.oFinalLengths[e]=true;n.oLengths[e]=parseInt(t)}function l(e){var s="Request for $count failed: "+e.message;if(e.response){s+=", "+e.response.statusCode+", "+e.response.statusText+", "+e.response.body}t.warning(s)}var f;if(this.bHasTreeAnnotations){f=this.oModel.resolve(this.getPath(),this.getContext());a.push("$filter="+this.oTreeProperties["hierarchy-parent-node-for"]+" eq '"+e+"'")}else{f=e}if(f){var u=this.oModel._createRequestUrl(f+"/$count",null,a);var d=this.oModel._createRequest(u,"GET",false);d.headers["Accept"]="text/plain, */*;q=0.5";this.oModel._request(d,h,l,undefined,undefined,this.oModel.getServiceMetadata())}};i.prototype._loadSubNodes=function(t,s,o,i,r,n){var a=this,h=false;if(s||o){r.push("$skip="+s+"&$top="+o)}if(!a.bHasTreeAnnotations&&!this.oFinalLengths[t]&&(this.sCountMode==e.Inline||this.sCountMode==e.Both)){r.push("$inlinecount=allpages");h=true}function l(e){var o,i;if(e.results){if(!a.bHasTreeAnnotations){if(h&&e.__count){a.oLengths[t]=parseInt(e.__count);a.oFinalLengths[t]=true}else if(a.oModel.isCountSupported()){a._getCountForNodeId(t)}a.oKeys[t]=[];for(i=0;i<e.results.length;i++){o=e.results[i];var r=a.oModel._getKey(o);a._processODataObject(o,"/"+r,n.navPath);a.oKeys[t][i+s]=r}}else{var l={};for(i=0;i<e.results.length;i++){o=e.results[i];t=o[a.oTreeProperties["hierarchy-parent-node-for"]];if(i==0){l[t]=s}else if(l[t]==undefined){l[t]=0}if(!(t in a.oKeys)){a.oKeys[t]=[];a._getCountForNodeId(t)}a.oKeys[t][l[t]]=a.oModel._getKey(o);l[t]++}}}else{a.oKeys[null]=a.oModel._getKey(e);if(!a.bHasTreeAnnotations){a._processODataObject(e,t,n.navPath)}}a.oRequestHandle=null;a.bPendingRequest=false;a.bNeedsUpdate=true}function f(){a.fireDataReceived()}function u(e){a.oRequestHandle=null;a.bPendingRequest=false;a.fireDataReceived()}function d(e){a.oRequestHandle=e}if(t){if(!this.oFinalLengths[t]){this.bPendingRequest=true;this.fireDataRequested();var p;if(this.bHasTreeAnnotations){p=this.oModel.resolve(this.getPath(),this.getContext())}else{p=t}this.oModel._loadData(p,r,l,u,false,d,f)}}};i.prototype.resetData=function(e){if(e){var t=e.getPath();delete this.oKeys[t];delete this.oLengths[t];delete this.oFinalLengths[t]}else{this.oKeys={};this.oLengths={};this.oFinalLengths={};this.oRootContext=null}};i.prototype.refresh=function(e,t,o){var i=false;if(!e){if(o){var r=this.oModel.resolve(this.sPath,this.oContext);var n=this.oModel.oMetadata._getEntityTypeByPath(r);if(n&&n.entityType in o){i=true}}if(t&&!i){s(this.oKeys,function(e,o){s(o,function(e,s){if(s in t){i=true;return false}return true});if(i){return false}return true})}if(!t&&!o){i=true}}if(e||i){this.resetData();this.bNeedsUpdate=false;this.bRefresh=true;this._fireChange()}};i.prototype.filter=function(e){t.warning("Filtering is currently not possible in the ODataTreeBinding");return this};i.prototype.checkUpdate=function(e,t){var o=false;if(!e){if(this.bNeedsUpdate||!t){o=true}else{s(this.oKeys,function(e,i){s(i,function(e,s){if(s in t){o=true;return false}return true});if(o){return false}return true})}}if(e||o){this.bNeedsUpdate=false;this._fireChange()}};i.prototype._getNavPath=function(e){var t=this.oModel.resolve(e,this.getContext());if(!t){return undefined}var s=t.split("/"),o=s[s.length-1],i;var r=o.split("(")[0];if(r&&this.oNavigationPaths[r]){i=this.oNavigationPaths[r]}return i};i.prototype._processODataObject=function(e,t,s){var o=[],i=this;if(s&&s.indexOf("/")>-1){o=s.split("/");s=o[0];o.splice(0,1)}var r=this.oModel._getObject(t);if(Array.isArray(r)){this.oKeys[t]=r;this.oLengths[t]=r.length;this.oFinalLengths[t]=true}if(s&&e[s]){if(Array.isArray(r)){r.forEach(function(e){var t=i.getModel().getData("/"+e);i._processODataObject(t,"/"+e+"/"+s,o.join("/"))})}else if(typeof r==="object"){i._processODataObject(e,t+"/"+s,o.join("/"))}}};i.prototype._hasTreeAnnotations=function(){var e=this.oModel,o=e.oMetadata,i=e.resolve(this.getPath(),this.getContext()),r=o._getEntityTypeByPath(i),n=o.mNamespaces["sap"],a=this;this.oTreeProperties={"hierarchy-level-for":false,"hierarchy-parent-node-for":false,"hierarchy-node-for":false,"hierarchy-drill-state-for":false};if(!r){t.fatal("EntityType for path "+i+" could not be found.");return false}s(r.property,function(e,t){if(!t.extensions){return true}s(t.extensions,function(e,s){var o=s.name;if(s.namespace===n&&o in a.oTreeProperties&&!a.oTreeProperties[o]){a.oTreeProperties[o]=t.name}});return true});var h=false;s(this.oTreeProperties,function(e,t){if(!t){h=true;return false}return true});return!h};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/unified/ColorPickerDisplayMode", ["sap/ui/base/DataType"],function(e){"use strict";var i={Default:"Default",Large:"Large",Simplified:"Simplified"};e.registerEnum("sap.ui.unified.ColorPickerDisplayMode",i);return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/unified/FileUploaderHttpRequestMethod", ["sap/ui/base/DataType"],function(e){"use strict";var t={Post:"POST",Put:"PUT"};e.registerEnum("sap.ui.unified.FileUploaderHttpRequestMethod",t);return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/unified/Menu", ["sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/Control","sap/ui/Device","sap/ui/core/Popup","./MenuItemBase","./MenuItem","./library","sap/ui/core/Core","sap/ui/core/library","sap/ui/core/RenderManager","sap/ui/unified/MenuRenderer","sap/ui/dom/containsOrEquals","sap/ui/thirdparty/jquery","sap/ui/events/KeyCodes","sap/base/Log","sap/ui/events/ControlEvents","sap/ui/events/PseudoEvents","sap/ui/events/checkMouseEnterOrLeave"],function(e,t,i,o,n,s,r,u,a,p,h,f,l,jQuery,d,c,g,m,y){"use strict";var v=n.Dock;var b=p.OpenState;var I=p.ItemSelectionMode;var _=i.extend("sap.ui.unified.Menu",{metadata:{interfaces:["sap.ui.core.IContextMenu"],library:"sap.ui.unified",properties:{enabled:{type:"boolean",group:"Behavior",defaultValue:true},ariaDescription:{type:"string",group:"Accessibility",defaultValue:null,deprecated:true},maxVisibleItems:{type:"int",group:"Behavior",defaultValue:0},pageSize:{type:"int",group:"Behavior",defaultValue:5}},defaultAggregation:"items",aggregations:{items:{type:"sap.ui.unified.IMenuItem",multiple:true,singularName:"item",defaultClass:r}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{itemSelect:{parameters:{item:{type:"sap.ui.unified.MenuItemBase"}}},closed:{},beforeClose:{allowPreventDefault:true}}},renderer:f});(function(r){_.prototype.bCozySupported=true;_._DELAY_SUBMENU_TIMER=300;_._DELAY_SUBMENU_TIMER_EXT=400;_.prototype.init=function(){var e=this;this.bOpen=false;this.oOpenedSubMenu=null;this.oHoveredItem=null;this.oPopup=null;this._bOpenedAsContextMenu=false;this.fAnyEventHandlerProxy=jQuery.proxy(function(e){var t=this.getRootMenu();if(t!=this||!this.isOpen()||!this.getDomRef()||e.type!="mousedown"&&e.type!="touchstart"){return}t.handleOuterEvent(this.getId(),e)},this);this.fOrientationChangeHandler=function(){e.close()};this.bUseTopStyle=false};_.prototype._setCustomEnhanceAccStateFunction=function(e){this._fnCustomEnhanceAccStateFunction=e};_.prototype.enhanceAccessibilityState=function(e,t){var i=typeof this._fnCustomEnhanceAccStateFunction==="function";if(i){this._fnCustomEnhanceAccStateFunction(e,t)}};_.prototype.exit=function(){if(this.oPopup){this.oPopup.detachClosed(this._menuClosed,this);this.oPopup.destroy();delete this.oPopup}g.unbindAnyEvent(this.fAnyEventHandlerProxy);if(this._bOrientationChangeBound){jQuery(r).off("orientationchange",this.fOrientationChangeHandler);this._bOrientationChangeBound=false}this._resetDelayedRerenderItems();this._detachResizeHandler()};_.prototype.invalidate=function(e){if(e instanceof s&&this.getDomRef()){this._delayedRerenderItems()}else if(this.oPopup&&this.oPopup.isOpen()){i.prototype.invalidate.apply(this,arguments)}};_.prototype.onBeforeRendering=function(){this._resetDelayedRerenderItems();this.$().off("mousemove")};_.prototype.onAfterRendering=function(){if(this.$().parent().attr("id")!="sap-ui-static"){c.error("sap.ui.unified.Menu: The Menu is popup based and must not be rendered directly as content of the page.");this.close();this.$().remove()}var e=this._getItems();for(var t=0;t<e.length;t++){if(e[t].onAfterRendering&&e[t].getDomRef()){e[t].onAfterRendering()}}if(this.oHoveredItem){this.oHoveredItem.hover(true,this)}S(this);this.$().on("mousemove",this._focusMenuItem.bind(this))};_.prototype._focusMenuItem=function(e){if(!o.system.desktop){return}var t=this.getItemByDomRef(e.target);if(!this.isOpen()||!t){return}if(this.oOpenedSubMenu&&l(this.oOpenedSubMenu.getDomRef(),e.target)){return}this.setHoveredItem(t);var i=t&&t.getDomRef()!==document.activeElement;if(i){t.focus(this)}this._openSubMenuDelayed(t)};_.prototype.onThemeChanged=function(){if(this.getDomRef()&&this.getPopup().getOpenState()===b.OPEN){S(this);this.getPopup()._applyPosition(this.getPopup()._oLastPosition)}};_.prototype.addItem=function(e){this.addAggregation("items",e,!!this.getDomRef());this._delayedRerenderItems();return this};_.prototype.insertItem=function(e,t){this.insertAggregation("items",e,t,!!this.getDomRef());this._delayedRerenderItems();return this};_.prototype.removeItem=function(e){this.removeAggregation("items",e,!!this.getDomRef());this._delayedRerenderItems();return this};_.prototype.removeAllItems=function(){var e=this.removeAllAggregation("items",!!this.getDomRef());this._delayedRerenderItems();return e};_.prototype.destroyItems=function(){this.destroyAggregation("items",!!this.getDomRef());this._delayedRerenderItems();return this};_.prototype._delayedRerenderItems=function(){if(!this.getDomRef()){return}this._resetDelayedRerenderItems();this._discardOpenSubMenuDelayed();this._itemRerenderTimer=setTimeout(function(){var e=this.getDomRef();if(e){var t=(new h).getInterface();f.renderItems(t,this);t.flush(e);t.destroy();this.onAfterRendering();this.getPopup()._applyPosition(this.getPopup()._oLastPosition)}}.bind(this),0)};_.prototype._resetDelayedRerenderItems=function(){if(this._itemRerenderTimer){clearTimeout(this._itemRerenderTimer);delete this._itemRerenderTimer}};_.prototype._detachResizeHandler=function(){if(this._hasResizeListener){o.resize.detachHandler(this._handleResizeChange,this);this._hasResizeListener=false}};_.prototype.open=function(e,t,i,n,s,u,a){var h;this._bLeavingMenu=false;if(this.isOpen()){return}p(this,true);this.oOpenerRef=t;this.bIgnoreOpenerDOMRef=false;this.getPopup().open(0,i,n,s,u||"0 0",a||"flipfit flipfit",function(e){var t=this.getPopup()._getOfDom(s);if(!t||!jQuery(t).is(":visible")||!M(t)){this.close()}else{this.getPopup()._applyPosition(e.lastPosition)}}.bind(this));this.bOpen=this.getPopup().isOpen();o.resize.attachHandler(this._handleResizeChange,this);this._hasResizeListener=true;if(e||this.getRootMenu().getId()===this.getId()){h=this.getNextSelectableItem(-1);this.setHoveredItem(h);h&&h.focus(this)}g.bindAnyEvent(this.fAnyEventHandlerProxy);if(o.support.orientation&&this.getRootMenu()===this){jQuery(r).on("orientationchange",this.fOrientationChangeHandler);this._bOrientationChangeBound=true}};_.prototype._handleResizeChange=function(){this.getPopup()._applyPosition(this.getPopup()._oLastPosition)};_.prototype.openAsContextMenu=function(i,o){var n,s,r,u,a;o=o instanceof t?o.getDomRef():o;if(i instanceof jQuery.Event){a=jQuery(o).offset();n=i.pageX-a.left;s=i.pageY-a.top;this._iX=i.clientX;this._iY=i.clientY}else{n=i.offsetX||0;s=i.offsetY||0;this._iX=i.left||0;this._iY=i.top||0}r=e.getRTL();u=v;if(r){n=o.clientWidth-n}this._bOpenedAsContextMenu=true;this.open(true,o,u.BeginTop,u.BeginTop,o,n+" "+s,"fit")};_.prototype._handleOpened=function(){var t,i,o,n,s,u,a,p,h,f;if(!this._bOpenedAsContextMenu){return}t=this.$();i=jQuery(r);o=this._iX;n=this._iY;s=i.scrollLeft()+i.width();u=i.scrollTop()+i.height();a=e.getRTL();p=false;h=t.width();f=t.height();if(n+f>u){n=n-f;p=true}if(a){if(s-o+h>s){o=s-(o+h);p=true}else{o=s-o;p=true}}else{if(o+h>s){o=o-h;p=true}}this._bOpenedAsContextMenu=false;p&&this.oPopup.setPosition("begin top","begin top",i,o+" "+n,"flipfit")};_.prototype.close=function(e){if(!this.isOpen()||_._dbg){return}this._discardOpenSubMenuDelayed();p(this,false);delete this._bFixed;g.unbindAnyEvent(this.fAnyEventHandlerProxy);if(this._bOrientationChangeBound){jQuery(r).off("orientationchange",this.fOrientationChangeHandler);this._bOrientationChangeBound=false}this.closeSubmenu();this.setHoveredItem();if(!e){this.bIgnoreOpenerDOMRef=true}this.getPopup().close(0);this.bOpen=this.getPopup().isOpen();this._detachResizeHandler();this._resetDelayedRerenderItems();this.$().remove();this.bOutput=false;if(this.isSubMenu()){this.getParent().getParent().oOpenedSubMenu=null}};_.prototype.isOpen=function(){return this.getPopup().isOpen()};_.prototype._menuClosed=function(){this.fireClosed();if(this.oOpenerRef){if(!this.bIgnoreOpenerDOMRef){try{this.oOpenerRef.focus()}catch(e){c.warning("Menu.close cannot restore the focus on opener "+this.oOpenerRef+", "+e)}}this.oOpenerRef=undefined}};_.prototype.onclick=function(e){this.selectItem(this.getItemByDomRef(e.target),false,!!(e.metaKey||e.ctrlKey));e.preventDefault();e.stopPropagation()};_.prototype.onsapnext=function(e){var t,i,o=this.oHoveredItem?this.oHoveredItem.getSubmenu():undefined;if(e.keyCode!==d.ARROW_DOWN&&!e.metaKey&&!e.altKey){if(o){if(o.isOpen()){i=o.getNextSelectableItem(-1);o.setHoveredItem(i);i&&i.focus(this)}else{this.openSubmenu(this.oHoveredItem,true)}}return}if(o&&o.isOpen()){this.closeSubmenu(false,true)}t=this.oHoveredItem?this._getItems().indexOf(this.oHoveredItem):-1;i=this.getNextSelectableItem(t);this.setHoveredItem(i);i&&i.focus(this);if(!e.metaKey&&!e.altKey){e.preventDefault();e.stopPropagation()}};_.prototype.onsapnextmodifiers=_.prototype.onsapnext;_.prototype.onsapprevious=function(e){var t=this.oHoveredItem?this._getItems().indexOf(this.oHoveredItem):-1,i=this.getPreviousSelectableItem(t),o=this.oHoveredItem?this.oHoveredItem.getSubmenu():null;if(e.keyCode!==d.ARROW_UP&&!e.metaKey&&!e.altKey){if(this.isSubMenu()){this.close(true)}e.preventDefault();e.stopPropagation();return}if(o&&o.isOpen()){this.closeSubmenu(false,true)}this.setHoveredItem(i);i&&i.focus(this);if(!e.metaKey&&!e.altKey){e.preventDefault();e.stopPropagation()}};_.prototype.onsappreviousmodifiers=_.prototype.onsapprevious;_.prototype.onsaphome=function(e){var t=this.getNextSelectableItem(-1);this.setHoveredItem(t);t&&t.focus(this);e.preventDefault();e.stopPropagation()};_.prototype.onsapend=function(e){var t=this.getPreviousSelectableItem(this._getItems().length);this.setHoveredItem(t);t&&t.focus(this);e.preventDefault();e.stopPropagation()};_.prototype.onsappagedown=function(e){var t=this._getItems(),i=this.oHoveredItem?t.indexOf(this.oHoveredItem):-1,o;if(this.getPageSize()<1){this.onsapend(e);return}i+=this.getPageSize();if(i>=t.length){this.onsapend(e);return}o=this.getNextSelectableItem(i-1);this.setHoveredItem(o);o&&o.focus(this);e.preventDefault();e.stopPropagation()};_.prototype.onsappageup=function(e){var t=this.oHoveredItem?this._getItems().indexOf(this.oHoveredItem):-1,i;if(this.getPageSize()<1){this.onsaphome(e);return}t-=this.getPageSize();if(t<0){this.onsaphome(e);return}i=this.getPreviousSelectableItem(t+1);this.setHoveredItem(i);i&&i.focus(this);e.preventDefault();e.stopPropagation()};_.prototype.onsapselect=function(e){this._sapSelectOnKeyDown=true;e.preventDefault();e.stopPropagation()};_.prototype.onkeyup=function(e){if(e.keyCode===d.ARROW_LEFT||e.keyCode===d.ARROW_RIGHT){return}if(this.oHoveredItem&&jQuery(e.target).prop("tagName")!="INPUT"){var t=this.oHoveredItem.getDomRef();jQuery(t).trigger("focus")}if(!this._sapSelectOnKeyDown){return}else{this._sapSelectOnKeyDown=false}if(!m.events.sapselect.fnCheck(e)&&e.keyCode!==d.ENTER){return}this.selectItem(this.oHoveredItem,true,false);e.preventDefault();e.stopPropagation()};_.prototype.onsapbackspace=function(e){if(jQuery(e.target).prop("tagName")!="INPUT"){e.preventDefault()}};_.prototype.onsapbackspacemodifiers=_.prototype.onsapbackspace;_.prototype.onsapescape=function(e){this._bLeavingMenu=true;this.close(true);e.preventDefault();e.stopPropagation()};_.prototype.onsaptabnext=function(e){if(this.isSubMenu()){e.preventDefault()}this._bLeavingMenu=true;this.close(true);e.stopPropagation()};_.prototype.onsaptabprevious=_.prototype.onsaptabnext;_.prototype._openSubMenuDelayed=function(e){if(!e){return}var t=e.getSubmenu(),i=t&&t._getItems().length;this._discardOpenSubMenuDelayed();this._delayedSubMenuTimer=setTimeout(function(){if(i){this.setHoveredItem(e);e&&e.focus(this);this.openSubmenu(e,false,true)}}.bind(this),i?_._DELAY_SUBMENU_TIMER:_._DELAY_SUBMENU_TIMER_EXT)};_.prototype._discardOpenSubMenuDelayed=function(e){if(this._delayedSubMenuTimer){clearTimeout(this._delayedSubMenuTimer);this._delayedSubMenuTimer=null}};_.prototype.onmouseout=function(e){if(!o.system.desktop){return}if(y(e,this.getDomRef())){this.setHoveredItem(null);if(!this.oOpenedSubMenu||!(this.oOpenedSubMenu.getParent()===this.oHoveredItem)){this.setHoveredItem(this.oHoveredItem)}this._discardOpenSubMenuDelayed()}};_.prototype.onsapfocusleave=function(e){if(this.oOpenedSubMenu||!this.isOpen()){return}if(o.os.name=="mac"&&o.browser.firefox&&this.isOpen()){var t=e.relatedControlId,i=t?a.byId(t):null,n=i&&i instanceof s;if(i&&!n){this._getItems()[0].focus();return}}this.getRootMenu().handleOuterEvent(this.getId(),e)};_.prototype.handleOuterEvent=function(e,t){var i=false,n=o.support.touch||o.system.combi;this.bIgnoreOpenerDOMRef=false;if(t.type=="mousedown"||t.type=="touchstart"){if(n&&(t.isMarked("delayedMouseEvent")||t.isMarked("cancelAutoClose"))){return}var s=this;while(s&&!i){if(l(s.getDomRef(),t.target)){i=true}s=s.oOpenedSubMenu}}else if(t.type=="sapfocusleave"){if(n){return}if(t.relatedControlId){var s=this;while(s&&!i){if(s.oOpenedSubMenu&&s.oOpenedSubMenu.getId()==t.relatedControlId||l(s.getDomRef(),jQuery(document.getElementById(t.relatedControlId)).get(0))){i=true}s=s.oOpenedSubMenu}}if(!i){this.bIgnoreOpenerDOMRef=true}}if(!i&&this.fireBeforeClose()){this.close()}};_.prototype.getItemByDomRef=function(e){var t=this._getItems(),i=t.length;for(var o=0;o<i;o++){var n=t[o],s=n.getDomRef();if(l(s,e)){return n}}return null};_.prototype.selectItem=function(e,t,i){if(!e||!(e instanceof s&&this.checkEnabled(e))){return}var n=e.getSubmenu();if(!n||!n._getItems().length){if(this.fireBeforeClose()){this.getRootMenu().close(true)}if(e._getItemSelectionMode&&e._getItemSelectionMode()!==I.None){e.setSelected(!e.getSelected())}}else{if(!o.system.desktop&&this.oOpenedSubMenu===n){this.closeSubmenu()}else{this.openSubmenu(e,t)}}e.fireSelect({item:e,ctrlKey:i});this.getRootMenu().fireItemSelect({item:e})};_.prototype.isSubMenu=function(){return this.getParent()&&this.getParent().getParent&&this.getParent().getParent()instanceof _};_.prototype.getRootMenu=function(){var e=this;while(e.isSubMenu()){e=e.getParent().getParent()}return e};_.prototype.getMenuLevel=function(){var e=1;var t=this;while(t.isSubMenu()){t=t.getParent().getParent();e++}return e};_.prototype.getPopup=function(){if(!this.oPopup){this.oPopup=new n(this,false,true,false);this.oPopup.setDurations(0,0);this.oPopup.attachClosed(this._menuClosed,this);this.oPopup.attachOpened(this._handleOpened,this)}return this.oPopup};_.prototype.setHoveredItem=function(e){if(this.oHoveredItem){this.oHoveredItem.hover(false,this)}if(!e){this.oHoveredItem=null;return}this.oHoveredItem=e;e.hover(true,this);this.scrollToItem(this.oHoveredItem)};_.prototype.openSubmenu=function(e,t,i){var o=e.getSubmenu();if(!o){return}if(!this.checkEnabled(e)){return}if(this.oOpenedSubMenu&&this.oOpenedSubMenu!==o){this.closeSubmenu()}if(this.oOpenedSubMenu){this.oOpenedSubMenu._bFixed=i&&this.oOpenedSubMenu._bFixed||!i&&!this.oOpenedSubMenu._bFixed;this.oOpenedSubMenu._bringToFront()}else if(o._getItems().length){this.oOpenedSubMenu=o;var s=n.Dock;o.open(t,e,s.BeginTop,s.EndTop,e,"-4 4")}};_.prototype.closeSubmenu=function(e,t){if(this.oOpenedSubMenu){if(e&&this.oOpenedSubMenu._bFixed){return}if(t){this.oOpenedSubMenu.bIgnoreOpenerDOMRef=true}this.oOpenedSubMenu.close();this.oOpenedSubMenu=null}};_.prototype.scrollToItem=function(e){var t=this.getDomRef(),i=e?e.getDomRef():null;if(!i||!t){return}var o=t.scrollTop,n=i.offsetTop,s=jQuery(t).height(),r=jQuery(i).height();if(o>n){t.scrollTop=n}else if(n+r>o+s){t.scrollTop=Math.ceil(n+r-s)}};_.prototype._bringToFront=function(){jQuery(document.getElementById(this.getPopup().getId())).mousedown()};_.prototype.checkEnabled=function(e){return e&&e.getEnabled()&&this.getEnabled()};_.prototype.getNextSelectableItem=function(e){var t=this._getItems();var i=t[e];for(var o=e+1;o<t.length;o++){if(t[o].getVisible()){return t[o]}}return i&&i.getVisible()?i:null};_.prototype.getPreviousSelectableItem=function(e){var t=this._getItems();var i=t[e];for(var o=e-1;o>=0;o--){if(t[o].getVisible()){return t[o]}}return i&&i.getVisible()?i:null};_.prototype.setRootMenuTopStyle=function(e){this.getRootMenu().bUseTopStyle=e;_.rerenderMenu(this.getRootMenu())};_.rerenderMenu=function(e){var t=e._getItems();for(var i=0;i<t.length;i++){var o=t[i].getSubmenu();if(o){_.rerenderMenu(o)}}e.invalidate()};_.prototype.focus=function(){if(this.isOpen()){i.prototype.focus.apply(this,arguments)}};_.prototype.isCozy=function(){if(!this.bCozySupported){return false}if(this.hasStyleClass("sapUiSizeCozy")){return true}if(u(this.oOpenerRef)){return true}if(u(this.getParent())){return true}return false};_.prototype.getSelectedItems=function(){return this._getItems().filter(e=>e.getSelected&&e.getSelected()&&e._getItemSelectionMode()!==I.None)};_.prototype._getItems=function(){var e=this.getItems(),t=[],i,o;for(o=0;o<e.length;o++){if(e[o].getItems){i=e[o].getItems();for(var n=0;n<i.length;n++){t.push(i[n])}}else{t.push(e[o])}}return t};function u(e){if(!e||!e.getDomRef){return false}return!!e.getDomRef()?.closest(".sapUiSizeCompact,.sapUiSizeCondensed,.sapUiSizeCozy")?.classList.contains("sapUiSizeCozy")}function p(e,t){var i=e.getParent();if(i&&i instanceof s){i.onSubmenuToggle(t)}}function S(e){var t=e.getMaxVisibleItems(),i=document.documentElement.clientHeight-10,o=e.$();if(t>0){var n=e._getItems();for(var s=0;s<n.length;s++){if(n[s].getDomRef()){i=Math.min(i,n[s].$().outerHeight(true)*t);break}}}if(o.outerHeight(true)>i){o.css("max-height",i+"px").toggleClass("sapUiMnuScroll",true)}else{o.css("max-height","").toggleClass("sapUiMnuScroll",false)}}function M(e){var t;if(!e){return false}if(e instanceof jQuery){e=e.get(0)}t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(r.innerHeight||document.documentElement.clientHeight)&&t.right<=(r.innerWidth||document.documentElement.clientWidth)}})(window);return _});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/unified/MenuItem", ["sap/ui/core/Element","sap/ui/core/IconPool","sap/ui/events/KeyCodes","./MenuItemBase","./library","sap/ui/core/library"],function(e,t,o,n,i,s){"use strict";var a=s.ItemSelectionMode;var r=n.extend("sap.ui.unified.MenuItem",{metadata:{interfaces:["sap.ui.unified.IMenuItem"],library:"sap.ui.unified",properties:{text:{type:"string",group:"Appearance",defaultValue:""},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:""},selected:{type:"boolean",group:"Behavior",defaultValue:false},shortcutText:{type:"string",group:"Appearance",defaultValue:""}},aggregations:{endContent:{type:"sap.ui.core.Control",multiple:true,singularName:"endContent"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"},_group:{type:"sap.ui.unified.MenuItemGroup",group:"Behavior",visibility:"hidden"}}}});t.insertFontFaceStyle();r.prototype.render=function(e,t,o,n){var i=e,r=t.getSubmenu(),l=t.getEnabled(),p=t.getSelected()&&t._getItemSelectionMode()!==a.None,u=t.getEndContent(),c=t.getShortcutText(),d,g;i.openStart("li",t);if(!r&&c){i.attr("aria-keyshortcuts",c)}if(t.getVisible()){i.attr("tabindex","0")}i.class("sapUiMnuItm");if(n.iItemNo==1){i.class("sapUiMnuItmFirst")}else if(n.iItemNo==n.iTotalItems){i.class("sapUiMnuItmLast")}if(!o.checkEnabled(t)){i.class("sapUiMnuItmDsbl")}if(t.getStartsSection()){i.class("sapUiMnuItmSepBefore")}if(t.getTooltip_AsString()){i.attr("title",t.getTooltip_AsString())}if(n.bAccessible){switch(t._getItemSelectionMode()){case a.SingleSelect:d="menuitemradio";break;case a.MultiSelect:d="menuitemcheckbox";break;default:d="menuitem"}i.accessibilityState(t,{role:d,disabled:!l,posinset:n.iItemNo,setsize:n.iTotalItems,selected:null,checked:p?true:undefined,labelledby:{value:this.getId()+"-txt",append:true}});if(r){i.attr("aria-haspopup",s.aria.HasPopup.Menu.toLowerCase());i.attr("aria-owns",r.getId())}}i.openEnd();i.openStart("div");i.class("sapUiMnuItmIco");i.openEnd();if(t.getIcon()){g=t._getIcon();i.renderControl(g)}i.close("div");i.openStart("div",this.getId()+"-txt");i.class("sapUiMnuItmTxt");i.openEnd();i.text(t.getText());i.close("div");i.openStart("div",this.getId()+"-scuttxt");i.class("sapUiMnuItmSCut");i.openEnd();if(!r&&c){i.text(c)}i.close("div");if(r){i.openStart("div");i.class("sapUiMnuItmSbMnu");i.openEnd();i.openStart("div");i.class("sapUiIconMirrorInRTL");i.openEnd();i.close("div");i.close("div")}else if(p||u.length){if(u.length){i.openStart("div",this.getId()+"-endContent");i.class("sapUiMnuEndContent");i.openEnd();u.forEach(e=>i.renderControl(e));i.close("div")}if(p){i.openStart("div",this.getId()+"-sel");i.class("sapUiMnuItmSel");i.openEnd();i.close("div")}}i.close("li")};r.prototype.hover=function(e,t){this.$().toggleClass("sapUiMnuItmHov",e)};r.prototype.focus=function(e){if(this.getVisible()){this.$().trigger("focus")}else{e.focus()}};r.prototype._handleContentNavigation=function(e){const t=e.keyCode===o.ARROW_LEFT||e.keyCode===o.ARROW_RIGHT;if(!this.getEndContent().length||!t){this.oHoveredItem=null;return}const n=this.oHoveredItem?this.getEndContent().indexOf(this.oHoveredItem):-1;let i;if(e.keyCode===o.ARROW_LEFT){i=this.getPreviousSelectableItem(n)}else{i=this.getNextSelectableItem(n)}this.setHoveredItem(i);i&&i.focus();e.preventDefault();e.stopPropagation()};r.prototype.onsapnext=r.prototype._handleContentNavigation;r.prototype.onsapprevious=r.prototype._handleContentNavigation;r.prototype.getNextSelectableItem=function(e){const t=this.getEndContent();const o=e+1>=t.length?t.length-1:e+1;return t[o]};r.prototype.getPreviousSelectableItem=function(e){const t=this.getEndContent();const o=e-1<0?0:e-1;return t[o]};r.prototype.setHoveredItem=function(e){if(!e){this.oHoveredItem=null;return}this.oHoveredItem=e};r.prototype._getItemSelectionMode=function(){var t=this.getAssociation("_group");return t?e.getElementById(t).getItemSelectionMode():a.None};r.prototype.setSelected=function(t){var o=e.getElementById(this.getAssociation("_group"));if(t&&o&&o.getItemSelectionMode()===a.SingleSelect){o._clearSelectedItems()}this.setProperty("selected",t);return this};r.prototype.getSelected=function(){return this.getProperty("selected")&&this._getItemSelectionMode()!==a.None};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/unified/MenuItemBase", ["sap/ui/core/Element","./library","sap/ui/core/IconPool","sap/m/Image"],function(e,t,o,n){"use strict";var i=e.extend("sap.ui.unified.MenuItemBase",{metadata:{library:"sap.ui.unified",properties:{enabled:{type:"boolean",group:"Behavior",defaultValue:true},visible:{type:"boolean",group:"Behavior",defaultValue:true},startsSection:{type:"boolean",group:"Behavior",defaultValue:false}},defaultAggregation:"submenu",aggregations:{submenu:{type:"sap.ui.unified.Menu",multiple:false}},events:{select:{parameters:{item:{type:"sap.ui.unified.MenuItemBase"}}}}}});i.prototype.init=function(){};i.prototype.render=function(e,t,o){var n=e;n.openStart("li",t);n.openEnd();n.openStart("div",this.getId()+"-txt");n.style("white-space","nowrap");n.style("display","inline-block");n.style("padding","1px");n.style("color","black");n.openEnd();n.text(t.getId());if(this.getSubmenu()){n.text("&nbsp;&nbsp;->")}n.close("div");n.close("li")};i.prototype.hover=function(e,t){this.$("txt").attr("style",e?"white-space:nowrap;display:inline-block;padding:1px;color:red;":"white-space:nowrap;display:inline-block;padding:1px;color:black;")};i.prototype.focus=function(){};i.prototype.onSubmenuToggle=function(e){this.$().toggleClass("sapUiMnuItmSubMnuOpen",e)};i.prototype.onAfterRendering=function(){};i.prototype.onsapshow=function(e){if(this.getParent()&&this.getParent().close){this.getParent().close(true)}e.preventDefault()};i.prototype._getIcon=function(){return o.createControlByURI({src:this.getIcon(),useIconTooltip:false},n)};i.prototype.onsaphide=i.prototype.onsapshow;return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/unified/MenuItemGroup", ["sap/ui/core/Element","sap/ui/core/library"],function(e,t){"use strict";var i=t.ItemSelectionMode;var n=e.extend("sap.ui.unified.MenuItemGroup",{metadata:{interfaces:["sap.ui.unified.IMenuItem"],library:"sap.ui.unified",properties:{itemSelectionMode:{type:"sap.ui.core.ItemSelectionMode",group:"Behavior",defaultValue:i.None}},aggregations:{items:{type:"sap.ui.unified.IMenuItem",multiple:true,singularName:"item"}}}});n.prototype.setItemSelectionMode=function(e,t){this.setProperty("itemSelectionMode",e,t);if(e===i.SingleSelect){this._ensureSingleSelection()}return this};n.prototype.addItem=function(e,t){this._addOrInsertItem(e,undefined,t);return this};n.prototype.insertItem=function(e,t,i){if(t===undefined){t=this.getItems().length}this._addOrInsertItem(e,t,i);return this};n.prototype.removeItem=function(e,t){const i=this.removeAggregation("items",e,t);!t&&this._invalidateParentControls();return i};n.prototype.removeAllItems=function(e){const t=this.removeAllAggregation("items",e);!e&&this._invalidateParentControls();return t};n.prototype.destroyItems=function(e){this.destroyAggregation("items",e);!e&&this._invalidateParentControls();return this};n.prototype._invalidateParentControls=function(){const e=this.getParent();if(e&&!e._getItems().length){const t=e.getParent();t&&t.invalidate();e.close()}};n.prototype._addOrInsertItem=function(e,t,n){const r=e.getSelected&&e.getSelected(),s=this.getItems().length;e.setAssociation("_group",this);if(r&&this.getItemSelectionMode()===i.SingleSelect){this._clearSelectedItems()}t===undefined?this.addAggregation("items",e,n):this.insertAggregation("items",e,t,n);if(s>0){return}const o=this.getParent();if(o){const e=o.getParent();e&&e.invalidate();o.invalidate()}};n.prototype._clearSelectedItems=function(){this.getItems().forEach(e=>e.setSelected&&e.setSelected(false))};n.prototype._ensureSingleSelection=function(){var e=this.getItems(),t=e.map(e=>e.getSelected()),i=t.lastIndexOf(true);this._clearSelectedItems();if(i!==-1){e[i].setSelected(true)}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/unified/MenuRenderer", ["sap/ui/core/ControlBehavior"],function(e){"use strict";var t={apiVersion:2};t.render=function(i,n){var s=e.isAccessibilityEnabled(),o=n.getRootMenu();if(n.oHoveredItem&&n.indexOfItem(n.oHoveredItem)<0){n.oHoveredItem=null}i.openStart("div",n);i.attr("tabindex",-1);i.attr("hideFocus",true);if(n.getTooltip_AsString()){i.attr("title",n.getTooltip_AsString())}if(s){i.accessibilityState(n,{disabled:null})}i.class("sapUiMnu");if(n.isSubMenu()){i.class("sapUiSubmenu")}if(o.bUseTopStyle){i.class("sapUiMnuTop")}i.openEnd();t.renderItems(i,n);i.close("div")};t.renderItems=function(i,n){var s=n._getItems(),o=e.isAccessibilityEnabled(),r=false,a=false,l=0,u=0,d,c,p=null,f=null,v=false,g;i.openStart("ul");i.attr("role","menu");i.class("sapUiMnuLst");for(d=0;d<s.length;d++){g=s[d].getSubmenu();if(s[d].getIcon&&s[d].getIcon()){r=true}if(g&&g._getItems().length){a=true}}if(!r){i.class("sapUiMnuNoIco")}if(!a){i.class("sapUiMnuNoSbMnu")}i.openEnd();for(d=0;d<s.length;d++){if(s[d].getVisible()&&s[d].render){l++}}for(d=0;d<s.length;d++){c=s[d];if(c.getVisible()&&c.render){u++;f=c.getAssociation("_group");if(v&&p!==f){i.close("div");v=false}if(f&&!v){i.openStart("div");i.attr("role","group");i.openEnd();v=true}if((p!==f||c.getStartsSection())&&u!==1){t.renderSeparator(i,o)}p=f;c.render(i,c,n,{bAccessible:o,iItemNo:u,iTotalItems:l})}}if(v){i.close("div")}i.close("ul")};t.renderSeparator=function(e,t){e.openStart("li");if(t){e.attr("role","separator")}e.class("sapUiMnuDiv");e.openEnd();e.openStart("div");e.class("sapUiMnuDivL");e.openEnd();e.close("div");e.voidStart("hr").voidEnd();e.openStart("div");e.class("sapUiMnuDivR");e.openEnd();e.close("div");e.close("li")};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/unified/library", ["sap/ui/base/Object","sap/ui/base/DataType","sap/ui/core/Lib","./ColorPickerDisplayMode","./FileUploaderHttpRequestMethod","sap/ui/core/RenderManager","sap/ui/core/library"],function(e,i,n,a,t,r){"use strict";var d=n.init({name:"sap.ui.unified",apiVersion:2,version:"1.132.1",dependencies:["sap.ui.core"],designtime:"sap/ui/unified/designtime/library.designtime",types:["sap.ui.unified.CalendarAppointmentVisualization","sap.ui.unified.CalendarDayType","sap.ui.unified.CalendarIntervalType","sap.ui.unifief.CalendarAppointmentHeight","sap.ui.unifief.CalendarAppointmentRoundWidth","sap.ui.unified.ColorPickerDisplayMode","sap.ui.unified.ColorPickerMode","sap.ui.unified.ContentSwitcherAnimation","sap.ui.unified.GroupAppointmentsMode","sap.ui.unified.FileUploaderHttpRequestMethod","sap.ui.unified.StandardCalendarLegendItem"],interfaces:["sap.ui.unified.IMenuItem","sap.ui.unified.IProcessableBlobs"],controls:["sap.ui.unified.calendar.DatesRow","sap.ui.unified.calendar.Header","sap.ui.unified.calendar.Month","sap.ui.unified.calendar.MonthPicker","sap.ui.unified.calendar.MonthsRow","sap.ui.unified.calendar.TimesRow","sap.ui.unified.calendar.YearPicker","sap.ui.unified.calendar.YearRangePicker","sap.ui.unified.Calendar","sap.ui.unified.CalendarDateInterval","sap.ui.unified.CalendarWeekInterval","sap.ui.unified.CalendarMonthInterval","sap.ui.unified.CalendarTimeInterval","sap.ui.unified.CalendarLegend","sap.ui.unified.CalendarRow","sap.ui.unified.ContentSwitcher","sap.ui.unified.ColorPicker","sap.ui.unified.ColorPickerPopover","sap.ui.unified.Currency","sap.ui.unified.FileUploader","sap.ui.unified.Menu","sap.ui.unified.Shell","sap.ui.unified.ShellLayout","sap.ui.unified.ShellOverlay","sap.ui.unified.SplitContainer"],elements:["sap.ui.unified.CalendarAppointment","sap.ui.unified.CalendarLegendItem","sap.ui.unified.DateRange","sap.ui.unified.DateTypeRange","sap.ui.unified.FileUploaderParameter","sap.ui.unified.FileUploaderXHRSettings","sap.ui.unified.MenuItem","sap.ui.unified.MenuItemBase","sap.ui.unified.MenuItemGroup","sap.ui.unified.MenuTextFieldItem","sap.ui.unified.NonWorkingPeriod","sap.ui.unified.RecurringNonWorkingPeriod","sap.ui.unified.ShellHeadItem","sap.ui.unified.ShellHeadUserItem","sap.ui.unified.TimeRange"],extensions:{"sap.ui.support":{publicRules:true}}});d.CalendarDayType={None:"None",NonWorking:"NonWorking",Working:"Working",Type01:"Type01",Type02:"Type02",Type03:"Type03",Type04:"Type04",Type05:"Type05",Type06:"Type06",Type07:"Type07",Type08:"Type08",Type09:"Type09",Type10:"Type10",Type11:"Type11",Type12:"Type12",Type13:"Type13",Type14:"Type14",Type15:"Type15",Type16:"Type16",Type17:"Type17",Type18:"Type18",Type19:"Type19",Type20:"Type20"};i.registerEnum("sap.ui.unified.CalendarDayType",d.CalendarDayType);d.StandardCalendarLegendItem={Today:"Today",WorkingDay:"WorkingDay",NonWorkingDay:"NonWorkingDay",Selected:"Selected"};i.registerEnum("sap.ui.unified.StandardCalendarLegendItem",d.StandardCalendarLegendItem);d.CalendarIntervalType={Hour:"Hour",Day:"Day",Month:"Month",Week:"Week",OneMonth:"One Month"};i.registerEnum("sap.ui.unified.CalendarIntervalType",d.CalendarIntervalType);d.RecurrenceType={Daily:"Daily",Weekly:"Weekly",Monthly:"Monthly",Yearly:"Yearly"};i.registerEnum("sap.ui.unified.RecurrenceType",d.RecurrenceType);d.CalendarAppointmentHeight={HalfSize:"HalfSize",Regular:"Regular",Large:"Large",Automatic:"Automatic"};i.registerEnum("sap.ui.unified.CalendarAppointmentHeight",d.CalendarAppointmentHeight);d.CalendarAppointmentRoundWidth={HalfColumn:"HalfColumn",None:"None"};i.registerEnum("sap.ui.unified.CalendarAppointmentRoundWidth",d.CalendarAppointmentRoundWidth);d.GroupAppointmentsMode={Collapsed:"Collapsed",Expanded:"Expanded"};i.registerEnum("sap.ui.unified.GroupAppointmentsMode",d.GroupAppointmentsMode);d.FileUploaderHttpRequestMethod=t;d.CalendarAppointmentVisualization={Standard:"Standard",Filled:"Filled"};i.registerEnum("sap.ui.unified.CalendarAppointmentVisualization",d.CalendarAppointmentVisualization);d.ContentSwitcherAnimation={None:"None",Fade:"Fade",ZoomIn:"ZoomIn",ZoomOut:"ZoomOut",Rotate:"Rotate",SlideRight:"SlideRight",SlideOver:"SlideOver"};i.registerEnum("sap.ui.unified.ContentSwitcherAnimation",d.ContentSwitcherAnimation);d.ColorPickerMode={HSV:"HSV",HSL:"HSL"};i.registerEnum("sap.ui.unified.ColorPickerMode",d.ColorPickerMode);d.ColorPickerDisplayMode=a;d._ContentRenderer=e.extend("sap.ui.unified._ContentRenderer",{constructor:function(i,n,a,t){e.apply(this);this._id=n;this._cntnt=a;this._ctrl=i;this._rm=(new r).getInterface();this._cb=t||function(){}},destroy:function(){this._rm.destroy();delete this._rm;delete this._id;delete this._cntnt;delete this._cb;delete this._ctrl;if(this._rerenderTimer){clearTimeout(this._rerenderTimer);delete this._rerenderTimer}e.prototype.destroy.apply(this,arguments)},render:function(){if(!this._rm){return}if(this._rerenderTimer){clearTimeout(this._rerenderTimer)}this._rerenderTimer=setTimeout(function(){var e=document.getElementById(this._id);if(e){if(typeof this._cntnt==="string"){var i=this._ctrl.getAggregation(this._cntnt,[]);for(var n=0;n<i.length;n++){this._rm.renderControl(i[n])}}else{this._cntnt(this._rm)}this._rm.flush(e)}this._cb(!!e)}.bind(this),0)}});d._iNumberOfOpenedShellOverlays=0;d.calendar=d.calendar||{};return d});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/api/common/ComponentInstantiation", ["sap/base/Log","sap/ushell/Container","sap/ushell/UI5ComponentType","sap/ushell/utils/UrlParsing","sap/base/util/deepExtend","sap/ushell/ApplicationType","sap/ushell/utils"],function(e,t,n,a,o,i,s){"use strict";class p{async createComponentInstance(e,a,o){const i=await t.getServiceAsync("Ui5ComponentLoader");let s=await this.createComponentInstantiationData(e,a);s=await i.modifyComponentProperties(s,n.Application);s.loadDefaultDependencies=false;if(o){return new Promise((e,t)=>{o.runAsOwner(()=>{this.#e(s,i).then(e).catch(t)})})}return this.#e(s,i)}async#e(t,n){try{const e=await n.instantiateComponent(t);return e.componentHandle.getInstance()}catch(t){e.error(`Cannot create UI5 component: ${t.toString()}`,t.stack,"sap.ushell.api.common.ComponentInstantiation");return Promise.reject(t)}}async createComponentInstantiationData(e,n){const o={componentData:n};if(o.componentData){delete o.componentData.startupParameters;delete o.componentData.config;delete o.componentData["sap-xapp-state"]}const p=a.constructShellHash(a.parseShellHash(e));if(!p){return Promise.reject("Navigation intent invalid!")}const r=await t.getServiceAsync("NavTargetResolutionInternal");const c=await r.resolveHashFragment("#"+p);if(c.applicationType===i.URL.type&&c.appCapabilities&&c.appCapabilities.appFrameworkId==="UI5"&&t.inAppRuntime()){const[t]=await s.requireAsync(["sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent"]);let n;try{const e=new URL(c.url);const t=new URLSearchParams(e.search);n=t.get("sap-ui-app-id")}catch(e){n=c.url.match(/[?&]sap-ui-app-id=([^&]+)/)[1]}let a=await t.getAppInfo(n);if(a.hasOwnProperty("oResolvedHashFragment")){a=a.oResolvedHashFragment}a=this.#t(a,o);if(a.url&&e.indexOf("?")>0){a.url+="?"+e.split("?")[1]}return this.#n({ui5ComponentName:n,applicationDependencies:a,url:a.url},o)}else if(c.applicationType!==i.URL.type&&!/^SAPUI5\.Component=/.test(c.additionalInformation)){return Promise.reject("The resolved target mapping is not of type UI5 component.")}return this.#n(c,o)}async#n(n,a){try{n=this.#t(n,a);n.loadDefaultDependencies=false;const e=await t.getServiceAsync("Ui5ComponentLoader");return e.createComponentData(n)}catch(t){e.error("Cannot get UI5 component data: "+t,t.stack,"sap.ushell.api.common.ComponentInstantiation");return Promise.reject(t)}}#t(e,t){e=o({},e,t);if(!e.ui5ComponentName){if(e.additionalInformation){e.ui5ComponentName=e.additionalInformation.replace(/^SAPUI5\.Component=/,"")}else if(e.name){e.ui5ComponentName=e.name}}return e}}return new p});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncher/Component", ["sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent"],function(e,t){"use strict";return t.extend("sap.ushell.components.tiles.cdm.applauncher.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"]},createContent:function(){var t=this.getComponentData();var o=t.properties.tilePersonalization||{};var i=t.startupParameters;if(i&&i["sap-system"]){o["sap-system"]=i["sap-system"][0]}return e.create({viewName:"sap.ushell.components.tiles.cdm.applauncher.StaticTile",viewData:{properties:t.properties,configuration:o}}).then(function(e){this._oController=e.getController();e.getContent()[0].bindTileContent({path:"/properties",factory:this._oController._getTileContent.bind(this._oController)});return e}.bind(this))},tileSetVisualProperties:function(e){if(this._oController){this._oController.updatePropertiesHandler(e)}},tileRefresh:function(){},tileSetVisible:function(e){},tileSetEditMode:function(e){if(this._oController){this._oController.editModeHandler(e)}},tileSetSizeBehavior:function(e){if(this._oController){this._oController.sizeBehaviorHandler(e)}},exit:function(){this._oController=null}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncher/StaticTile.controller", ["sap/ushell/library","sap/ui/core/mvc/Controller","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/ui/model/json/JSONModel","sap/m/library","sap/base/Log","sap/ushell/utils/UrlParsing","sap/ushell/EventHub","sap/ushell/Container"],function(e,t,i,r,o,n,a,s,p,l){"use strict";var c=n.GenericTileScope;var d=n.GenericTileMode;var f=e.DisplayFormat;var g=e.AppType;return t.extend("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{_aDoables:[],_getConfiguration:function(){var e=this.getView().getViewData();e.properties.configSizeBehavior=i.last("/core/home/sizeBehavior");e.properties.wrappingType=i.last("/core/home/wrappingType");return e},onInit:function(){var e=this.getView();var t=new o;t.setData(this._getConfiguration());e.setModel(t);this._aDoables.push(i.on("/core/home/sizeBehavior").do(function(e){t.setProperty("/properties/configSizeBehavior",e)}));var r=this.getView().getViewData();var n=r.properties;n.mode=n.mode||(n.icon?"ContentMode":"HeaderMode");if(n.displayFormat===f.Compact&&n.title&&n.targetURL){t.setProperty("/properties/mode",d.LineMode)}switch(n.displayFormat){case f.Flat:t.setProperty("/properties/frameType","OneByHalf");break;case f.FlatWide:t.setProperty("/properties/frameType","TwoByHalf");break;case f.StandardWide:t.setProperty("/properties/frameType","TwoByOne");break;default:{t.setProperty("/properties/frameType","OneByOne")}}const a=i.last("/core/contentProviders/providerInfo/enabled");const s=i.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations");t.setProperty("/properties/showContentProviderInfoInTooltip",a);t.setProperty("/properties/showContentProviderInfoOnVisualizations",a&&s);if(a){this._aDoables.push(i.on("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations").do(function(e){t.setProperty("/properties/showContentProviderInfoOnVisualizations",e)}))}},onExit:function(){this._aDoables.forEach(function(e){e.off()});this._aDoables=[]},editModeHandler:function(e){var t=e?c.ActionMore:c.Display;this.getView().getModel().setProperty("/properties/scope",t)},sizeBehaviorHandler:function(e){this.getView().getModel().setProperty("/properties/customSizeBehavior",e)},onPress:function(e){var t=this.getView().getViewData().properties;if(e.getSource().getScope&&e.getSource().getScope()===c.Display){var o=this._createTargetUrl();if(!o){return}p.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:o}});if(o[0]==="#"){hasher.setHash(o)}else{var n=i.last("/core/shell/enableRecentActivity")&&i.last("/core/shell/enableRecentActivityLogging");if(n){var a={title:t.title,appType:g.URL,url:t.targetURL,appId:t.targetURL};l.getRendererInternal("fiori2").logRecentActivity(a)}r.openURL(o,"_blank")}}},updatePropertiesHandler:function(e){var t=this.getView().getContent()[0];var i=t.getTileContent()[0];if(typeof e.title!=="undefined"){t.setHeader(e.title)}if(typeof e.subtitle!=="undefined"){t.setSubheader(e.subtitle)}if(typeof e.icon!=="undefined"){i.getContent().setSrc(e.icon)}if(typeof e.info!=="undefined"){i.setFooter(e.info)}},_createTargetUrl:function(){var e=this.getView().getViewData().properties.targetURL;var t=this.getView().getViewData().configuration["sap-system"];var i;if(e&&t){if(s.isIntentUrl(e)){i=s.parseShellHash(e);if(!i.params){i.params={}}i.params["sap-system"]=t;e="#"+s.constructShellHash(i)}else{e+=(e.indexOf("?")<0?"?":"&")+"sap-system="+t}}return e},_getLeanUrl:function(){return r.getLeanURL(this._createTargetUrl())},_getTileContent:function(e,t){var i=t.getPath().split("/");i.pop();var r=t.getProperty(i.join("/"));if(r!==this.oLastBindingObject||this.oTileContent&&this.oTileContent.bIsDestroyed){this.oLastBindingObject=r;this.oTileContent=this.getView().byId(r.icon?"imageTileContent":"standardTileContent").clone()}return this.oTileContent},_getCurrentProperties:function(){var e=this.getView().getContent()[0];var t=e.getTileContent()[0];var r=i.last("/core/home/sizeBehavior");return{title:e.getHeader(),subtitle:e.getSubheader(),info:t.getFooter(),icon:t.getContent().getSrc(),mode:e.getMode(),configSizeBehavior:r}}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncher/StaticTile.view", ["sap/ui/core/mvc/View","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent"],function(e,t,r,i){"use strict";return e.extend("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncher.StaticTile"},createContent:function(e){this.setHeight("100%");this.setWidth("100%");if(this.getContent().length===1){return this.getContent()[0]}return new t({mode:"{/properties/mode}",header:"{/properties/title}",scope:"{/properties/scope}",subheader:"{/properties/subtitle}",sizeBehavior:"{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}",frameType:"{/properties/frameType}",wrappingType:"{/properties/wrappingType}",url:{path:"/properties/targetURL",formatter:e._getLeanUrl.bind(e)},tileContent:new i({footer:"{/properties/info}",content:new r({src:"{/properties/icon}"})}),press:[e.onPress,e],additionalTooltip:"{/properties/contentProviderLabel}"})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/Component", ["sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent"],function(e,t){"use strict";return t.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"]},createContent:function(){var t=this.getComponentData();var r=t.properties||{};var i=r.tilePersonalization||{};var o=r.indicatorDataSource;if(o&&o.path){i.serviceUrl=o.path;i.serviceRefreshInterval=o.refresh}else if(o&&o.url){i.serviceUrl=o.url;i.serviceRefreshInterval=o.refreshInterval}var s=t.startupParameters;if(s&&s["sap-system"]&&s["sap-system"][0]){i["sap-system"]=s["sap-system"][0]}if(i.serviceUrl&&i.serviceUrl.charAt(0)!=="/"&&r.dataSource&&r.dataSource.uri){var n=r.dataSource.uri;if(i["sap-system"]){if(n.charAt(n.length-1)==="/"){n=n.slice(0,n.length-1)}n+=";o="+i["sap-system"]}if(n.charAt(n.length-1)!=="/"){n+="/"}n+=i.serviceUrl;i.serviceUrl=n}return e.create({viewName:"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",viewData:{properties:r,configuration:i}}).then(function(e){this._oController=e.getController();this._oController.visibleHandler(this.bIsVisible);return e}.bind(this))},tileSetVisualProperties:function(e){if(this._oController){this._oController.updateVisualPropertiesHandler(e)}},tileRefresh:function(){if(this._oController){this._oController.refreshHandler()}},tileSetVisible:function(e){if(this._oController){this._oController.visibleHandler(e)}else{this.bIsVisible=e}},tileSetEditMode:function(e){if(this._oController){this._oController.editModeHandler(e)}},tileSetSizeBehavior:function(e){if(this._oController){this._oController.sizeBehaviorHandler(e)}},tileSetPreview:function(e){if(this._oController){this._oController.previewHandler(e)}},exit:function(){this._oController=null}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.controller", ["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ui/core/format/NumberFormat","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/ui/model/json/JSONModel","sap/m/library","sap/ushell/library","sap/base/Log","sap/base/util/merge","sap/ushell/utils/DynamicTileRequest","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/EventHub","sap/ushell/Container"],function(e,t,r,i,a,o,s,n,l,u,p,f,d,c,h){"use strict";var m=s.GenericTileScope;var g=s.DeviationIndicator;var v=s.ValueColor;var b=s.FrameType;var y=n.DisplayFormat;var _=n.AppType;var D="sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile";var R="<RESET>";var w={title:"",subtitle:"",icon:"",info:"",infoState:v.Neutral,targetURL:"",number_value:"...",number_unit:"",number_factor:"",number_state_arrow:g.None,number_value_state:v.Neutral};return e.extend(D,{_aDoables:[],timer:null,iLastTimeoutStart:0,oDataRequest:null,bShouldNotRefreshDataAfterInit:false,_getConfiguration:function(e){var t={};var r;t.configuration=e.configuration;t.properties=e.properties;t.properties.info=t.properties.info||w.info;t.properties.number_value=t.properties.preview?1234:w.number_value;t.properties.number_value_state=w.number_value_state;t.properties.number_state_arrow=w.number_state_arrow;t.properties.number_factor=w.number_factor;t.properties.number_unit=t.properties.numberUnit||w.number_unit;var a=t.configuration["sap-system"];var o=t.properties.targetURL;if(o&&a){if(d.isIntentUrl(o)){r=d.parseShellHash(o);if(!r.params){r.params={}}r.params["sap-system"]=a;o="#"+d.constructShellHash(r)}else{o+=(o.indexOf("?")<0?"?":"&")+"sap-system="+a}t.properties.targetURL=o}t.properties.configSizeBehavior=i.last("/core/home/sizeBehavior");t.properties.wrappingType=i.last("/core/home/wrappingType");switch(t.properties.displayFormat){case y.Flat:t.properties.frameType=b.OneByHalf;break;case y.FlatWide:t.properties.frameType=b.TwoByHalf;break;case y.StandardWide:t.properties.frameType=b.TwoByOne;break;default:{t.properties.frameType=b.OneByOne}}t.originalProperties=u({},e.properties);return t},onInit:function(){var e=this.getView();var t=new o;var r=e.getViewData();var a=r.properties;t.setData(this._getConfiguration(r));const s=i.last("/core/contentProviders/providerInfo/enabled");const n=i.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations");t.setProperty("/properties/showContentProviderInfoInTooltip",s);t.setProperty("/properties/showContentProviderInfoOnVisualizations",s&&n);if(s){this._aDoables.push(i.on("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations").do(function(e){t.setProperty("/properties/showContentProviderInfoOnVisualizations",e)}))}e.setModel(t);this._aDoables.push(i.on("/core/home/sizeBehavior").do(function(e){t.setProperty("/properties/configSizeBehavior",e)}));if(a.preview){this.previewHandler(true)}},refreshHandler:function(){this.loadData(0,true)},visibleHandler:function(e){if(e){if(!this.oDataRequest||this.timer===null){this.initRequestInterval()}}else{this.stopRequests()}},editModeHandler:function(e){var t=e?m.ActionMore:m.Display;this.getView().getModel().setProperty("/properties/scope",t)},sizeBehaviorHandler:function(e){this.getView().getModel().setProperty("/properties/customSizeBehavior",e)},previewHandler:function(e){var t=this.getView();var r=t.getModel();if(e){var i=t.getViewData();var a=u({},i,{properties:{preview:true}});var o=this._getConfiguration(a);var s=u({},o.properties,{customSizeBehavior:r.getProperty("/properties/customSizeBehavior"),configSizeBehavior:r.getProperty("/properties/configSizeBehavior")});r.setProperty("/properties",s);return}r.setProperty("/properties/preview",false)},updateVisualPropertiesHandler:function(e){var t=this.getView().getModel().getProperty("/properties");var r=this.getView().getModel().getProperty("/originalProperties");if(f.isDefined(e.title)){t.title=e.title;r.title=e.title}if(f.isDefined(e.subtitle)){t.subtitle=e.subtitle;r.subtitle=e.subtitle}if(f.isDefined(e.icon)){t.icon=e.icon;r.icon=e.icon}if(f.isDefined(e.targetURL)){t.targetURL=e.targetURL;r.targetURL=e.targetURL}if(f.isDefined(e.info)){t.info=e.info;r.info=e.info}this.getView().getModel().refresh()},stopRequests:function(){if(this.timer){clearTimeout(this.timer);this.timer=null}if(this.oDataRequest){this.oDataRequest.abort()}},onPress:function(e){if(e.getSource().getScope&&e.getSource().getScope()===m.Display){var t=this.getView().getModel().getProperty("/properties/targetURL");var r=this.getView().getModel().getProperty("/properties/title");if(!t){return}c.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:t}});if(t[0]==="#"){hasher.setHash(t)}else{var o=i.last("/core/shell/enableRecentActivity")&&i.last("/core/shell/enableRecentActivityLogging");if(o){var s={title:r,appType:_.URL,url:t,appId:t};h.getRendererInternal("fiori2").logRecentActivity(s)}a.openURL(t,"_blank")}}},initRequestInterval:function(){var e=this.getView().getModel();var t=e.getProperty("/configuration/serviceRefreshInterval");if(!t||t==="0"){t=0;if(this.oDataRequest){this.bShouldNotRefreshDataAfterInit=true}}else if(t<10){var r=e.getProperty("/configuration/serviceUrl");l.warning("Refresh Interval "+t+" seconds for service URL "+r+" is less than 10 seconds, which is not supported. Increased to 10 seconds automatically.",null,D);t=10}this.loadData(t,false)},loadData:function(e,t){if(!t&&this.bShouldNotRefreshDataAfterInit){return}var r=this.getView().getModel();var i=r.getProperty("/properties/preview");var a=r.getProperty("/configuration/serviceUrl");if(i){l.info("Tile in preview mode",D);return}if(!a){l.error("No service URL given!",D);this._setTileIntoErrorState();return}var o=e*1e3-(Date.now()-this.iLastTimeoutStart);if(!t&&!this.timer&&o>0){l.info("Started timeout to call "+a+" again in "+Math.ceil(o/1e3)+" seconds",null,D);this.timer=setTimeout(this.loadData.bind(this,e,false),f.sanitizeTimeoutDelay(o));return}if(!this.oDataRequest||this.oDataRequest.sUrl!==a){if(this.oDataRequest){this.oDataRequest.destroy()}var s=r.getProperty("/properties/contentProviderId");var n={dataSource:r.getProperty("/properties/dataSource")};this.oDataRequest=new p(a,this.successHandlerFn.bind(this),this.errorHandlerFn.bind(this),s,n)}else if(this.oDataRequest){this.oDataRequest.refresh()}if(e>0){l.info("Started timeout to call "+a+" again in "+e+" seconds",null,D);this.iLastTimeoutStart=Date.now();this.timer=setTimeout(this.loadData.bind(this,e,false),f.sanitizeTimeoutDelay(e*1e3))}},successHandlerFn:function(e){this.updatePropertiesHandler(e)},errorHandlerFn:function(e){var t=e&&e.message?e.message:e;var r=this.getView().getModel().getProperty("/configuration/serviceUrl");if(e.statusText==="Abort"||e.aborted===true){l.info("Data request from service "+r+" was aborted",null,D);this.bShouldNotRefreshDataAfterInit=false}else{if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}l.error("Failed to update data via service "+r+": "+t,null,D);this._setTileIntoErrorState()}},_setTileIntoErrorState:function(){var e=t.getResourceBundleModel().getResourceBundle();this.updatePropertiesHandler({number:"???",info:e.getText("dynamic_data.error")})},_normalizeNumber:function(e,t,i,a){var o;if(isNaN(e)){o=e}else{var s=r.getFloatInstance({maxFractionDigits:a});if(!i){var n=Math.abs(e);if(n>=1e9){i="B";e/=1e9}else if(n>=1e6){i="M";e/=1e6}else if(n>=1e3){i="K";e/=1e3}}o=s.format(e)}var l=o;var u=l[t-1];t-=u==="."||u===","?1:0;l=l.substring(0,t);return{displayNumber:l,numberFactor:i}},updatePropertiesHandler:function(e){var t=this.getView().getModel().getProperty("/originalProperties");var a=this.getView().getModel().getProperty("/properties");var o=[{dataField:"title",modelField:"title"},{dataField:"subtitle",modelField:"subtitle"},{dataField:"icon",modelField:"icon"},{dataField:"info",modelField:"info"},{dataField:"infoState",modelField:"infoState"},{dataField:"targetURL",modelField:"targetURL"},{dataField:"stateArrow",modelField:"number_state_arrow"},{dataField:"numberState",modelField:"number_value_state"},{dataField:"numberUnit",modelField:"number_unit"},{dataField:"numberFactor",modelField:"number_factor"}];o.forEach(function(r){var i=e[r.dataField];var o=!i;var s=w[r.modelField];if(o){a[r.modelField]=t[r.modelField]||s}else if(this._isResetValue(i)){a[r.modelField]=s}else{a[r.modelField]=i}}.bind(this));a.number_value=!isNaN(e.number)?e.number:w.number_value;a.number_digits=e.numberDigits>=0?e.numberDigits:4;var s=[];if(e.targetParams){s.push(e.targetParams)}if(e.results){var n;var l;var u=0;e.results.forEach(function(e){l=e.number||0;if(typeof l==="string"){l=parseFloat(l)}u+=l;n=e.targetParams;if(n){s.push(n)}});a.number_value=u}if(s.length>0){var p=a.targetURL.indexOf("?")!==-1?"&":"?";a.targetURL+=p+s.join("&")}if(!isNaN(e.number)){if(typeof e.number==="string"){e.number=e.number.trim()}var f=this._shouldProcessDigits(e.number,e.numberDigits);var d=a.icon?4:5;if(e.number&&e.number.toString().length>=d||f){var c=this._normalizeNumber(e.number,d,e.numberFactor,e.numberDigits);a.number_factor=c.numberFactor;a.number_value=c.displayNumber}else{var h=r.getFloatInstance({maxFractionDigits:d});a.number_value=h.format(e.number)}}a.configSizeBehavior=i.last("/core/home/sizeBehavior");this.getView().getModel().refresh()},_shouldProcessDigits:function(e,t){var r;e=typeof e!=="string"?e.toString():e;if(e.indexOf(".")!==-1){r=e.split(".")[1].length;if(r>t){return true}}return false},_getLeanUrl:function(e){return a.getLeanURL(e)},_formatValueColor:function(e){if(e==="Positive"){return v.Good}if(e==="Negative"){return v.Error}return v[e]||v.Neutral},_getValueColor:function(e){var t=this._formatValueColor(e);if(t===v.Neutral){return v.None}return t},_isResetValue:function(e){if(typeof e!=="string"){return false}return e===R},onExit:function(){if(this.oDataRequest){this.stopRequests();this.oDataRequest.destroy()}this._aDoables.forEach(function(e){e.off()});this._aDoables=[]}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.view", ["sap/ui/core/mvc/View","sap/m/GenericTile","sap/m/TileContent","sap/m/NumericContent","sap/m/library"],function(e,t,r,i,o){"use strict";var n=o.ValueColor;return e.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile"},createContent:function(e){this.setHeight("100%");this.setWidth("100%");if(this.getContent().length===1){return this.getContent()[0]}return new t({header:"{/properties/title}",scope:"{/properties/scope}",subheader:"{/properties/subtitle}",sizeBehavior:"{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}",frameType:"{/properties/frameType}",wrappingType:"{/properties/wrappingType}",url:{parts:["/properties/targetURL"],formatter:e.formatters&&e.formatters.leanURL},tileContent:new r({footer:"{/properties/info}",footerColor:{path:"/properties/infoState",formatter:function(e){if(e==="Positive"){e=n.Good}if(e==="Negative"){e=n.Error}if(!n[e]){e=n.Neutral}return e}},unit:"{/properties/number_unit}",content:new i({truncateValueTo:5,scale:"{/properties/number_factor}",value:"{/properties/number_value}",indicator:"{/properties/number_state_arrow}",valueColor:{path:"/properties/number_value_state",formatter:function(e){if(!e||e==="Neutral"||!n[e]){return n.None}return e}},icon:"{/properties/icon}",withMargin:false,width:"100%"})}),additionalTooltip:"{/properties/contentProviderLabel}",press:[e.onPress,e]})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/generic", ["sap/ui/core/mvc/Controller","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/ushell/components/tiles/sbtilecontent","sap/m/library","sap/ui/core/format/DateFormat","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,i,t,l,a,s,o,n,jQuery,r){"use strict";var u=a.DeviationIndicator;var c=a.ValueColor;var T=a.FrameType;var h=a.LoadState;var g=e.extend("sap.ushell.components.tiles.generic",{getTile:function(){return this.oKpiTileView.oGenericTile},_updateTileModel:function(e){var i=this.getTile().getModel().getData();jQuery.extend(i,e);this.getTile().getModel().setData(i)},logError:function(e){this._updateTileModel({value:"",scale:"",unit:""});r.error(e);if(this.getView().getViewData().deferredObj){this.getView().getViewData().deferredObj.reject()}else{this.oKpiTileView.oGenericTile.setState(h.Failed)}},getKeyForCallCheck:function(){if(this.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){return this.oConfig.TILE_PROPERTIES.id+"left"}return this.oConfig.TILE_PROPERTIES.id+"right"},getRelativeTime:function(){var e=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate(),i;if(jQuery.type(this.cacheTime)=="date"){i=this.cacheTime}else{i=new Date(parseInt(this.cacheTime.substr(6),10))}var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(e-i),l,a;switch(t.unit){case"minutes":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(t.time,"minutes");e=e-a;l=new Date(e);break;case"hours":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(t.time,"hours");e=e-a;l=new Date(e);break;case"days":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(t.time,"days");e=e-a;l=new Date(e);break}return l},setTimeStamp:function(){this.updateTimeStampjobScheduled=false;var e=s.getDateTimeInstance({relative:true,relativeSource:"auto",style:"short"});var i=e.format(this.getRelativeTime());this.oKpiTileView.oNVConfS.setRefreshOption(true);this.oKpiTileView.oNVConfS.setTimestamp(i);this.updateTimeStampjobScheduled=false;var t=this.oConfig.TILE_PROPERTIES.id+"time";var l=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(t);if(l){clearTimeout(l);l=undefined}sap.ushell.components.tiles.indicatorTileUtils.util.scheduleTimeStampJob.call(this,this.oTileApi.visible.isVisible())},isACurrencyMeasure:function(e){var i=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;return sap.ushell.components.tiles.indicatorTileUtils.util.getFormattingMetadata(this.oRunTimeODataModel,i,e)._hasCurrency},isCurrencyMeasure:function(e){var i=this;var t=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(i.oConfig.TILE_PROPERTIES.id);if(t&&t.Data){var l=t.Data&&JSON.parse(t.Data);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(i.oConfig)){if(i.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){l=l.leftData}else{l=l.rightData}}if(i.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatorcomparison.ComparisonTile"||i.oConfig.TILE_PROPERTIES.tileType==="CM"){if(l&&l.data&&l.data.length){for(var a=0;a<l.data.length;a++){if(l.data[a]&&l.data[a].measure==e){if(jQuery.type(l.data[a].isCurM)=="boolean"){return l.data[a].isCurM}return i.isACurrencyMeasure(e)}return i.isACurrencyMeasure(e)}}else{return i.isACurrencyMeasure(e)}}if(l&&jQuery.type(l.isCurM)=="boolean"){return l.isCurM}return i.isACurrencyMeasure(e)}return i.isACurrencyMeasure(e)},formSelectStatement:function(e){var i=Object.keys(e);var t="";for(var l=0;l<i.length;l++){if(e[i[l]]!==undefined&&e.fullyFormedMeasure){t=t+","+e[i[l]]}}return t},setThresholdValues:function(){var e=this;try{var i={};i.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var t=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(e.oConfig.TILE_PROPERTIES.id);switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);if(t&&t.Data&&t.Data.length){t.Data=JSON.parse(t.Data);i.trendValue=Number(t.Data.trend);i.targetValue=Number(t.Data.target);i.criticalHighValue=Number(t.Data.ch);i.warningHighValue=Number(t.Data.wh);t.Data=JSON.stringify(t.Data)}break;case"MA":i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);if(t&&t.Data&&t.Data.length){t.Data=JSON.parse(t.Data);i.criticalLowValue=Number(t.Data.cl);i.warningLowValue=Number(t.Data.wl);i.trendValue=Number(t.Data.trend);i.targetValue=Number(t.Data.target);t.Data=JSON.stringify(t.Data)}break;case"RA":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);if(t&&t.Data&&t.Data.length){t.Data=JSON.parse(t.Data);i.criticalLowValue=Number(t.Data.cl);i.warningLowValue=Number(t.Data.wl);i.trendValue=Number(t.Data.trend);i.targetValue=Number(t.Data.target);i.criticalHighValue=Number(t.Data.ch);i.warningHighValue=Number(t.Data.wh);t.Data=JSON.stringify(t.Data)}break}}else if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);i.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","FIXED");i.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","FIXED");i.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","FIXED");i.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","FIXED")}else{i.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","FIXED");i.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","FIXED");i.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","FIXED");i.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","FIXED");i.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","FIXED");i.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","FIXED")}return i}catch(i){e.logError(i)}},setNoData:function(){var e=this.getView().getViewData();if(e.parentController){e.parentController.setNoData();if(e.deferredObj){e.deferredObj.resolve()}}else{try{this._updateTileModel({value:"",scale:"",unit:"",footerNum:this.oResourceBundle.getText("sb.noDataAvailable"),footerComp:this.oResourceBundle.getText("sb.noDataAvailable")});this.oKpiTileView.oGenericTile.setState(h.Loaded)}catch(e){}}},getLocalCache:function(e){var i={};i.ChipId=e.ChipId;i.Data=e.Data;i.CacheMaxAge=e.CacheMaxAgeUnit;i.CacheMaxAgeUnit=e.CacheMaxAgeUnit;i.CacheType=e.CacheType;i.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();return i},fetchKpiValue:function(e,i,t,l){var a=this;var s=0;try{var o=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var n=this.setThresholdValues();var u=n.fullyFormedMeasure;var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(a.oConfig.TILE_PROPERTIES.id);var h=a.oTileApi.configuration.getParameterValueAsString("timeStamp");var g=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(a.oConfig.TILE_PROPERTIES.id,h,a.chipCacheTime,a.chipCacheTimeUnit,a.tilePressed);var p=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(t);var d=this.getKeyForCallCheck();var f=true;if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){f=sap.ushell.components.tiles.indicatorTileUtils.util.isCallInProgress(d);if(f==undefined){f=true}}if(f){if(!c||!g&&a.oTileApi.visible.isVisible()||p||l&&a.oTileApi.visible.isVisible()||a.getView().getViewData().refresh){sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(d,false);if(a.kpiValueFetchDeferred){a.kpiValueFetchDeferred=false;var m=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var E=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(a.oRunTimeODataModel,o,u,null,m);if(E){this.QUERY_SERVICE_MODEL=E.model;this.queryUriForKpiValue=E.uri;this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(E.uri,null,null,true,function(i){a.backEndCallMade=true;a.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(d,true);if(i&&i.results&&i.results.length&&i.results[0][a.DEFINITION_DATA.EVALUATION.COLUMN_NAME]!=null){s=i.results[0][a.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var t={};if(E.unit[0]){a._updateTileModel({unit:i.results[0][E.unit[0].name]});t.uom=i.results[0][E.unit[0].name]}if(a.oConfig.TILE_PROPERTIES.frameType=="TwoByOne"){t.numericValue=s}else{t.value=s}if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){n.criticalHighValue=i.results[0][n.sCriticalHigh];n.criticalLowValue=i.results[0][n.sCriticalLow];n.warningHighValue=i.results[0][n.sWarningHigh];n.warningLowValue=i.results[0][n.sWarningLow];n.targetValue=i.results[0][n.sTarget];n.trendValue=i.results[0][n.sTrend]}else if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){n.targetValue=Number(i.results[0][n.sTarget]);n.criticalHighValue=n.targetValue*n.criticalHighValue/100;n.criticalLowValue=n.targetValue*n.criticalLowValue/100;n.warningHighValue=n.targetValue*n.warningHighValue/100;n.warningLowValue=n.targetValue*n.warningLowValue/100;n.trendValue=Number(i.results[0][n.sTrend])}t.cl=n.criticalLowValue;t.ch=n.criticalHighValue;t.wl=n.warningLowValue;t.wh=n.warningHighValue;t.trend=n.trendValue;t.target=n.targetValue;t.isCurM=a.isCurrencyMeasure(a.oConfig.EVALUATION.COLUMN_NAME);var l={};l.ChipId=a.oConfig.TILE_PROPERTIES.id;l.Data=JSON.stringify(t);l.CacheMaxAge=Number(a.chipCacheTime);l.CacheMaxAgeUnit=a.chipCacheTimeUnit;l.CacheType=1;var o=a.getLocalCache(l);if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,o);var r=false;if(c){r=true}if(a.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(a.oTileApi,a.oConfig.TILE_PROPERTIES.id,l,r,function(e){if(e){a.cacheTime=e&&e.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,e);a.setTimeStamp(a.cacheTime)}if(a.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){jQuery.proxy(a.setTimeStamp(a.cacheTime),a)}})}}else{var u=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(a.oConfig.TILE_PROPERTIES.id),T;if(u){if(!u.CachedTime){u.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()}T=u.Data;if(T){T=JSON.parse(T);if(a.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){T.leftData=t}else{T.rightData=t}}u.Data=JSON.stringify(T);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,u)}else{T={};if(a.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){T.leftData=t}else{T.rightData=t}o.Data=JSON.stringify(T);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,o)}a.cacheWriteData=t}a.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();a.updateDatajobScheduled=false;var h=a.oConfig.TILE_PROPERTIES.id+"data";var g=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(h);if(g){clearTimeout(g);g=undefined}e.call(a,s,n)}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,{empty:"empty"});a.setNoData()}},function(e){a.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(d,true);if(e&&e.response){r.error(e.message+" : "+e.request.requestUri);i.call(a,e)}})}else{a.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(d,true);a.logError("Error Preparing Query Service URI")}}}else if(a.DEFINITION_DATA.TILE_PROPERTIES.frameType==T.OneByOne){var C;if(c&&c.Data){C=c.Data&&JSON.parse(c.Data);s=C.value;if(C.uom){a._updateTileModel({unit:C.uom})}if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){n.criticalHighValue=C.ch;n.criticalLowValue=C.cl;n.warningHighValue=C.wh;n.warningLowValue=C.wl;n.targetValue=C.target;n.trendValue=C.trend}else if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){n.targetValue=Number(C.target);n.criticalHighValue=n.targetValue*n.ch/100;n.criticalLowValue=n.targetValue*n.cl/100;n.warningHighValue=n.targetValue*n.wh/100;n.warningLowValue=n.targetValue*n.wl/100;n.trendValue=Number(C.trend)}a.cacheTime=c.CachedTime;if(a.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){jQuery.proxy(a.setTimeStamp(c.CachedTime),a)}e.call(a,s,n)}else{a.setNoData()}}else if(c&&c.Data){C=c.Data&&JSON.parse(c.Data);if(a.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){C=C.leftData}else{C=C.rightData}s=C.numericValue;if(C.unit){a._updateTileModel({unit:C.unit})}if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){n.criticalHighValue=C.ch;n.criticalLowValue=C.cl;n.warningHighValue=C.wh;n.warningLowValue=C.wl;n.targetValue=C.target;n.trendValue=C.trend}else if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){n.targetValue=Number(C.target);n.criticalHighValue=n.targetValue*n.criticalHighValue/100;n.criticalLowValue=n.targetValue*n.criticalLowValue/100;n.warningHighValue=n.targetValue*n.warningHighValue/100;n.warningLowValue=n.targetValue*n.warningLowValue/100;n.trendValue=Number(C.trend)}a.cacheTime=c.CachedTime;if(a.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){jQuery.proxy(a.setTimeStamp(c.CachedTime),a)}e.call(a,s,n)}else{a.setNoData()}}}catch(e){a.logError(e)}},getRunTimeODataModel:function(e,i){if(window["sap-ushell-config"].cacheBusting){e=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(e)}if(!this.oRunTimeODataModel){this.oRunTimeODataModel=sap.ushell.components.tiles.indicatorTileUtils.util.getODataModelByServiceUri(e)}if(this.oRunTimeODataModel.getServiceMetadata()){i()}else{this.oRunTimeODataModel.attachMetadataLoaded(i)}},parse_sapclient:function(){var e,i,t,l,a;i="P_SAPClient";t="$$$";l=this.oConfig.EVALUATION_FILTERS;if(l.constructor!==Array){return}if(l.length<1){return}for(e in l){a=l[e];if(a.NAME===i&&a.VALUE_1===t){break}a=null}if(a){jQuery.when(sap.ushell.components.tiles.indicatorTileUtils.util.getHanaClient()).done(function(e){a.VALUE_1=e})}},fetchEvaluation:function(e,i,t,l){var a=this;var s=this.oConfig.TILE_PROPERTIES.sb_metadata||"HANA";a.DEFINITION_DATA=e;a._updateTileModel(this.DEFINITION_DATA);var o=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(t);if(a.oTileApi.visible.isVisible()&&!a.firstTimeVisible||o||l){jQuery.when(sap.ushell.components.tiles.indicatorTileUtils.util.getFrontendCache(e,a.oTileApi)).done(function(e){a.firstTimeVisible=true;e=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(a.oConfig.TILE_PROPERTIES.id);if(e||Number(a.oTileApi.configuration.getParameterValueAsString("isSufficient"))){i.call()}else{try{if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)||!a.dataCallInProgress){a.dataCallInProgress=true;var t=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(a.oConfig.TILE_PROPERTIES.id);if(t){a.oConfig.EVALUATION_FILTERS=t.EVALUATION_FILTERS;i.call()}else if(a.evaluationFetchDeferred){a.evaluationFetchDeferred=false;sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(a.oConfig,a.oTileApi,function(e){a.evaluationFetchDeferred=true;a.oConfig.EVALUATION_FILTERS=e;if(s.toUpperCase()==="HANA"){a.parse_sapclient()}sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(a.oConfig.TILE_PROPERTIES.id,a.oConfig);i.call()})}}}catch(e){a.evaluationFetchDeferred=true;a.logError("no evaluation data")}}}).fail(function(){a.firstTimeVisible=true;if(Number(a.oTileApi.configuration.getParameterValueAsString("isSufficient"))){i.call()}else{try{var e=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(a.oConfig.TILE_PROPERTIES.id);if(e){a.oConfig.EVALUATION_FILTERS=e.EVALUATION_FILTERS;i.call()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(a.oConfig,a.oTileApi,function(e){a.oConfig.EVALUATION_FILTERS=e;if(s.toUpperCase()==="HANA"){a.parse_sapclient()}sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(a.oConfig.TILE_PROPERTIES.id,a.oConfig);i.call()})}}catch(e){a.logError("no evaluation data")}}})}},refreshHandler:function(e,i){var t=this;var l=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(e);var a=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(i);if(!t.firstTimeVisible||l||a){t.fetchEvaluation(t.oConfig,function(){var i;if(t.oConfig.TILE_PROPERTIES.tileType=="NT"||t.oConfig.TILE_PROPERTIES.tileType=="AT"||t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"||t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatordeviation.DeviationTile"){i=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);t.getRunTimeODataModel(i,function(){if(t.KPI_VALUE_REQUIRED){t.fetchKpiValue(function(e,i){this.KPIVALUE=e;t.doProcess(e,i)},t.logError,e,a)}else{t.doProcess()}})}else{i=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);t.getRunTimeODataModel(i,function(){if(t.KPI_VALUE_REQUIRED){t.doProcess(t.KPIVALUE,t.setThresholdValues())}else{t.doProcess(l,a)}})}},e,a)}},visibleHandler:function(e){if(!e){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}if(e){this.refreshHandler(this)}},getChipConfiguration:function(e){var i=this;try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(i.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),i.oTileApi.preview.isEnabled(),function(t){i.oConfig=t;var l=sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(i.oConfig);var a=sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(i.oConfig);if(i.oTileApi.search){i.oTileApi.search.setKeywords([l,a])}if(i.oTileApi.preview){i.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system))}e.call()})}catch(e){i.logError(e.message)}},onAfterTileRendering:function(){var e=this;this.firstTimeVisible=false;this.oKpiTileView=this.getView();this.updateDatajobScheduled=false;this.updateTimeStampjobScheduled=false;this.oViewData=this.oKpiTileView.getViewData();this.tilePressed=false;this.kpiValueFetchDeferred=true;this.evaluationFetchDeferred=true;this.backEndCallMade=false;if(!sap.ushell.components.tiles.utils){sap.ui.require("sap.ushell.components.tiles.utils")}this.oResourceBundle=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();this.oTileApi=this.oViewData.chip;this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(h.Loading);this.getChipConfiguration(function(){var i;e.chipCacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(e.oConfig);e.chipCacheTimeUnit=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(e.oConfig);if(e.oTileApi.preview.isEnabled()){e.doDummyProcess();e.oKpiTileView.oGenericTile.attachPress(function(){o.show(e.oResourceBundle.getText("sb.NavigationHelp"))})}else if(e.oConfig.BLANKTILE||e.oConfig.TILE_PROPERTIES.blankTile){e.doDummyProcess();i=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system);e.oKpiTileView.oGenericTile.$().wrap("<a href ='"+i+"'></a>");e.oKpiTileView.oGenericTile.attachPress(function(){e.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(e.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,null);window.location.hash=i})}else{if(e.oTileApi.visible&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(e.oConfig)){e.oTileApi.visible.attachVisible(e.visibleHandler.bind(e))}i=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system);e.oKpiTileView.oGenericTile.$().wrap("<a href ='"+i+"></a>").style="display:block;";e.oKpiTileView.oGenericTile.attachPress(function(){e.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(e.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,null);window.location.hash=i});if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(e.oConfig)){e.oKpiTileView.oNVConfS.attachRefresh(function(){e.oKpiTileView.oGenericTile.setState(h.Loading);jQuery.proxy(e.refreshHandler(true),e)})}e.fetchEvaluation(e.oConfig,function(){e.DEFINITION_DATA=e.oConfig;var i=e.oTileApi.url.addSystemToServiceUrl(e.oConfig.EVALUATION.ODATA_URL);var t=e.oTileApi.configuration.getParameterValueAsString("timeStamp");var l=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(e.oConfig.TILE_PROPERTIES.id,t,e.chipCacheTime,e.chipCacheTimeUnit,e.tilePressed);if(!l||e.getView().getViewData().refresh){e.getRunTimeODataModel(i,function(){if(e.KPI_VALUE_REQUIRED){e.fetchKpiValue(function(i,t){this.KPIVALUE=i;e.doProcess(i,t)},e.logError)}else{e.doProcess()}})}else if(e.KPI_VALUE_REQUIRED){e.fetchKpiValue(function(i,t){this.KPIVALUE=i;e.doProcess(i,t)},e.logError)}else{e.doProcess()}})}})},onAfterRendering:function(){this.onAfterTileRendering()},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new n({}))}},autoFormatter:function(e,i){i=i||false;if(!e){return""}return sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(e),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,i)},setToolTip:function(e,i,t){var l=this,a,s=this.setThresholdValues(),o=this.oConfig.EVALUATION.COLUMN_NAME,n=this.isCurrencyMeasure(o),r;if(t=="CONT"||t=="COMP"){if(this.oKpiTileView.getContent()[0].getTileContent().length){a=l.oKpiTileView.getContent()[0].getTileContent()[0].getContent();var u,c,T,h,g,p,d,f,m;if(i&&i[0]){u=i[0].title;h=this.autoFormatter(i[0].value,n);d=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(i[0].color)}if(i&&i[1]){c=i[1].title;g=this.autoFormatter(i[1].value,n);f=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(i[1].color)}if(i&&i[2]){T=i[2].title;p=this.autoFormatter(i[2].value,n);m=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(i[2].color)}var E={};E["0"]=this.oConfig.EVALUATION.COLUMN_NAME+",asc";E["1"]=this.oConfig.EVALUATION.COLUMN_NAME+",desc";E["2"]=this.oConfig.TILE_PROPERTIES.dimension+",asc";E["3"]=this.oConfig.TILE_PROPERTIES.dimension+",desc";var C=E[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");r={measure:this.oConfig.EVALUATION.COLUMN_NAME,contributionTile:C,m1:u,v1:h,c1:d,m2:c,v2:g,c2:f,m3:T,v3:p,c3:m};sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(a,t,r)}}else{var V="";if(e=="Error"){V="sb.error"}if(e=="Neutral"){V="sb.neutral"}if(e=="Critical"){V="sb.critical"}if(e=="Good"){V="sb.good"}r={status:V,actual:this.autoFormatter(i,n),target:this.autoFormatter(s.targetValue,n),cH:this.autoFormatter(s.criticalHighValue,n),wH:this.autoFormatter(s.warningHighValue,n),wL:this.autoFormatter(s.warningLowValue,n),cL:this.autoFormatter(s.criticalLowValue,n)};a=l.oKpiTileView.getContent()[0].getTileContent()[0]&&l.oKpiTileView.getContent()[0].getTileContent()[0].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(a,t,r)}},getTrendColor:function(e){var i=this,t,l,a,s;try{var o=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var n=c.Neutral;if(o==="MI"){if(e.criticalHighValue&&e.warningHighValue){s=Number(e.criticalHighValue);a=Number(e.warningHighValue);if(this.CALCULATED_KPI_VALUE<a){n=c.Good}else if(this.CALCULATED_KPI_VALUE<=s){n=c.Critical}else{n=c.Error}}}else if(o==="MA"){if(e.criticalLowValue&&e.warningLowValue){l=Number(e.criticalLowValue);t=Number(e.warningLowValue);if(this.CALCULATED_KPI_VALUE<l){n=c.Error}else if(this.CALCULATED_KPI_VALUE<=t){n=c.Critical}else{n=c.Good}}}else if(e.warningLowValue&&e.warningHighValue&&e.criticalLowValue&&e.criticalHighValue){s=Number(e.criticalHighValue);a=Number(e.warningHighValue);t=Number(e.warningLowValue);l=Number(e.criticalLowValue);if(this.CALCULATED_KPI_VALUE<l||this.CALCULATED_KPI_VALUE>s){n=c.Error}else if(this.CALCULATED_KPI_VALUE>=l&&this.CALCULATED_KPI_VALUE<=t||this.CALCULATED_KPI_VALUE>=a&&this.CALCULATED_KPI_VALUE<=s){n=c.Critical}else{n=c.Good}}return n}catch(e){i.logError(e)}},getTrendIndicator:function(e){var i=this;e=Number(e);try{var t=u.None;if(e>this.CALCULATED_KPI_VALUE){t=u.Down}else if(e<this.CALCULATED_KPI_VALUE){t=u.Up}return t}catch(e){i.logError(e)}},setTextInTile:function(){var e=this;var i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:i.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(e.oConfig),subheader:i.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(e.oConfig)})},_getEvaluationThresholdMeasures:function(){var e=[];e.push(this.oConfig.EVALUATION.COLUMN_NAME);if(this.oConfig.EVALUATION.VALUES_SOURCE==="MEASURE"){var i=this.oConfig.EVALUATION_VALUES;if(i&&i.length){for(var t=0;t<i.length;t++){if(i[t].COLUMN_NAME&&!i[t].FIXED){e.push(i[t].COLUMN_NAME)}}}}return e},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}});return g});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorArea/AreaChartTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/ui/thirdparty/jquery"],function(e,i,a,t,jQuery){"use strict";var l=i.FrameType;var r=i.LoadState;var s=e.extend("sap.ushell.components.tiles.indicatorArea.AreaChartTile",{onInit:function(){this.KPI_VALUE_REQUIRED=false},doProcess:function(e,i){this.onAfterFinalEvaluation(e,i)},doDummyProcess:function(){var e=this;this.setTextInTile();e._updateTileModel({footer:"",description:"",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});this.oKpiTileView.oGenericTile.setState(r.Loaded)},scheduleJob:function(e){if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible())}},onAfterFinalEvaluation:function(e,i){var s=this;var o=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var n=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;var c=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var u=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(u==undefined){this.logError();return}var h=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var E=this.DEFINITION_DATA.EVALUATION_VALUES;var T=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){if(T){var d=T.Data&&JSON.parse(T.Data)}}var f=s.oTileApi.configuration.getParameterValueAsString("timeStamp");var g=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(s.oConfig.TILE_PROPERTIES.id,f,s.chipCacheTime,s.chipCacheTimeUnit,s.tilePressed);var m=n;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(h){case"MI":s.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"WH","MEASURE");s.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"CH","MEASURE");s.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"TA","MEASURE");s.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"TC","MEASURE");if(s.sWarningHigh&&s.sCriticalHigh&&s.sTarget){m+=","+s.sWarningHigh+","+s.sCriticalHigh+","+s.sTarget}break;case"MA":s.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"WL","MEASURE");s.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"CL","MEASURE");s.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"TA","MEASURE");s.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"TC","MEASURE");if(s.sWarningLow&&s.sCriticalLow&&s.sTarget){m+=","+s.sWarningLow+","+s.sCriticalLow+","+s.sTarget}break;case"RA":s.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"WH","MEASURE");s.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"CH","MEASURE");s.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"TA","MEASURE");s.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"TC","MEASURE");s.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"WL","MEASURE");s.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(s.oConfig,"CL","MEASURE");if(s.sWarningLow&&s.sCriticalLow&&s.sTarget&&s.sWarningHigh&&s.sCriticalHigh){m+=","+s.sWarningLow+","+s.sCriticalLow+","+s.sTarget+","+s.sWarningHigh+","+s.sCriticalHigh}break}}var p=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(e);if(d&&!d.rightData||!T||!g&&s.oTileApi.visible.isVisible()||p||i&&s.oTileApi.visible.isVisible()||s.getView().getViewData().refresh){if(s.kpiValueFetchDeferred){s.kpiValueFetchDeferred=false;var C=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(s.oRunTimeODataModel,o,m,u,c);if(C){this.queryUriForTrendChart=C.uri;var A={};try{this.trendChartODataReadRef=C.model.read(C.uri,null,null,true,function(e){s.kpiValueFetchDeferred=true;if(e&&e.results&&e.results.length){if(C.unit[0]){s.unit=e.results[0][C.unit[0].name];s.CURRENCY_CODE=s.unit;A.unit=C.unit[0];A.unit.name=C.unit[0].name}s.queryUriResponseForTrendChart=e;u=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(s.oRunTimeODataModel,o,u);e.results.splice(10);e.firstXlabel=e.results[0][u];e.lastXlabel=e.results[e.results.length-1][u];A.data=e;if(A&&A.data&&A.data.results&&A.data.results.length){for(var i=0;i<A.data.results.length;i++){delete A.data.results[i].__metadata}}A.isCurM=s.isCurrencyMeasure(s.oConfig.EVALUATION.COLUMN_NAME);A.dimensionName=u;I(e,s.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);var a={};s.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();a.ChipId=s.oConfig.TILE_PROPERTIES.id;a.Data=JSON.stringify(A);a.CacheMaxAge=Number(s.chipCacheTime);a.CacheMaxAgeUnit=s.chipCacheTimeUnit;a.CacheType=1;var t=s.getLocalCache(a);if(s.DEFINITION_DATA.TILE_PROPERTIES.frameType==l.TwoByOne){var n=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id),c;if(n){if(!n.CachedTime){n.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()}c=n.Data;if(c){c=JSON.parse(c);c.rightData=A}n.Data=JSON.stringify(c);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,n)}else{c={};c.rightData=A;t.Data=JSON.stringify(c);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,t)}s.cacheWriteData=A;s.getView().getViewData().deferredObj.resolve()}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,t);var h=false;if(T){h=true}if(s.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(s.oTileApi,s.oConfig.TILE_PROPERTIES.id,a,h,function(e){if(e){s.cacheTime=e&&e.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,e);s.setTimeStamp()}if(s.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){jQuery.proxy(s.setTimeStamp(s.cacheTime),s)}})}s.oKpiTileView.oGenericTile.setState(r.Loaded);s.updateDatajobScheduled=false;var E=s.oConfig.TILE_PROPERTIES.id+"data";var d=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(E);if(d){clearTimeout(d);d=undefined}jQuery.proxy(s.scheduleJob(s.cacheTime),s)}}else{s.setNoData()}},function(e){s.kpiValueFetchDeferred=true;if(e&&e.response){s.logError("Data call failed")}})}catch(e){s.kpiValueFetchDeferred=true;s.logError(e)}}else{s.kpiValueFetchDeferred=true;s.logError()}}}else if(T&&T.Data){try{var L;var N=s.oConfig&&s.oConfig.TILE_PROPERTIES&&s.oConfig.TILE_PROPERTIES.tileType;if(N.indexOf("DT-")==-1){L=T.Data&&JSON.parse(T.Data)}else{L=T.Data&&JSON.parse(T.Data);L=L.rightData}if(L.unit){s.unit=L.data.results[0][L.unit.name];s.CURRENCY_CODE=s.unit}s.cacheTime=T.CachedTime;if(s.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){jQuery.proxy(s.setTimeStamp(s.cacheTime),s)}s.queryUriResponseForTrendChart=L.data;u=L.dimensionName;I(L.data,s.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);if(s.oConfig.TILE_PROPERTIES.frameType==l.OneByOne){s.oKpiTileView.oGenericTile.setState(r.Loaded)}else{s.getView().getViewData().deferredObj.resolve()}jQuery.proxy(s.scheduleJob(s.cacheTime),s)}catch(e){s.logError(e)}}else{s.setNoData()}function I(e,i){var l=[];var r=[];var o=[];var c=[];var T=[];var d=[];var f=e.firstXlabel;var g,m,p,C,A;var L=e.lastXlabel;var N=Number(e.results[0][n]);var I=Number(e.results[e.results.length-1][n]);var U;for(U in e.results){e.results[U][u]=Number(U);e.results[U][n]=Number(e.results[U][n]);if(s.sWarningHigh){e.results[U][s.sWarningHigh]=Number(e.results[U][s.sWarningHigh])}if(s.sCriticalHigh){e.results[U][s.sCriticalHigh]=Number(e.results[U][s.sCriticalHigh])}if(s.sCriticalLow){e.results[U][s.sCriticalLow]=Number(e.results[U][s.sCriticalLow])}if(s.sWarningLow){e.results[U][s.sWarningLow]=Number(e.results[U][s.sWarningLow])}if(s.sTarget){e.results[U][s.sTarget]=Number(e.results[U][s.sTarget])}if(s.sWarningHigh){o.push(e.results[U][s.sWarningHigh])}if(s.sCriticalHigh){c.push(e.results[U][s.sCriticalHigh])}if(s.sCriticalLow){T.push(e.results[U][s.sCriticalLow])}if(s.sWarningLow){d.push(e.results[U][s.sWarningLow])}l.push(e.results[U][u]);r.push(e.results[U][n])}try{f=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(f);L=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(L)}catch(e){s.logError(e)}var b=Number(N);if(s.oConfig.EVALUATION.SCALING==-2){b*=100}var M=Math.min.apply(Math,r);var S=s.isCurrencyMeasure(s.oConfig.EVALUATION.COLUMN_NAME);var D=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(b,s.oConfig.EVALUATION.SCALING,s.oConfig.EVALUATION.DECIMAL_PRECISION,S,s.CURRENCY_CODE);if(s.oConfig.EVALUATION.SCALING==-2){D+=" %"}var w=D.toString();var R=Number(I);if(s.oConfig.EVALUATION.SCALING==-2){R*=100}var O=Math.max.apply(Math,r);S=s.isCurrencyMeasure(s.oConfig.EVALUATION.COLUMN_NAME);var v=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(R,s.oConfig.EVALUATION.SCALING,s.oConfig.EVALUATION.DECIMAL_PRECISION,S,s.CURRENCY_CODE);if(s.oConfig.EVALUATION.SCALING==-2){v+=" %"}var V=v.toString();try{var H=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,l));var y=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,l))}catch(e){s.logError(e)}if(i=="MEASURE"){if(o.length!=0){s.firstwH=o[H];s.lastwH=o[y]}if(c.length!=0){s.firstcH=c[H];s.lastcH=c[y]}if(T.length!=0){s.firstcL=T[H];s.lastcL=T[y]}if(d.length!=0){s.firstwL=d[H];s.lastwL=d[y]}}var F={width:"100%",height:"100%",unit:s.unit||"",chart:{color:"Neutral",data:e.results},size:"Auto",minXValue:H,maxXValue:y,minYValue:M,maxYValue:O,firstXLabel:{label:f+"",color:"Neutral"},lastXLabel:{label:L+"",color:"Neutral"},firstYLabel:{label:w+"",color:"Neutral"},lastYLabel:{label:V+"",color:"Neutral"},minLabel:{},maxLabel:{}};var P;switch(h){case"MA":for(U in E){if(E[U].TYPE=="CL"){F.minThreshold={color:"Error"};P={};P[u]="";P[n]=Number(E[U].FIXED);s.cl=Number(E[U].FIXED);F.minThreshold.data=i=="MEASURE"?e.results:[P];g=i=="MEASURE"?s.sCriticalLow:n}else if(E[U].TYPE=="WL"){F.maxThreshold={color:"Good"};P={};P[u]="";P[n]=Number(E[U].FIXED);F.maxThreshold.data=i=="MEASURE"?e.results:[P];m=i=="MEASURE"?s.sWarningLow:n;s.wl=Number(E[U].FIXED)}else if(E[U].TYPE=="TA"){P={};P[u]="";P[n]=Number(E[U].FIXED);F.target={color:"Neutral"};F.target.data=i=="MEASURE"?e.results:[P];A=i=="MEASURE"?s.sTarget:n}}F.innerMinThreshold={data:[]};F.innerMaxThreshold={data:[]};if(i=="FIXED"){F.firstYLabel.color=N<s.cl?"Error":s.cl<=N&&N<=s.wl?"Critical":N>s.wl?"Good":"Neutral";F.lastYLabel.color=I<s.cl?"Error":s.cl<=I&&I<=s.wl?"Critical":I>s.wl?"Good":"Neutral"}else if(i=="MEASURE"&&s.firstwL&&s.lastwL&&s.firstcL&&s.lastcL){F.firstYLabel.color=N<s.firstcL?"Error":s.firstcL<=N&&N<=s.firstwL?"Critical":N>s.firstwL?"Good":"Neutral";F.lastYLabel.color=I<s.lastcL?"Error":s.lastcL<=I&&I<=s.lastwL?"Critical":I>s.lastwL?"Good":"Neutral"}break;case"MI":for(U in E){if(E[U].TYPE=="CH"){P={};P[u]="";P[n]=Number(E[U].FIXED);s.ch=Number(E[U].FIXED);F.maxThreshold={color:"Error"};F.maxThreshold.data=i=="MEASURE"?e.results:[P];m=i=="MEASURE"?s.sCriticalHigh:n}else if(E[U].TYPE=="WH"){P={};P[u]="";P[n]=Number(E[U].FIXED);s.wh=Number(E[U].FIXED);F.minThreshold={color:"Good"};F.minThreshold.data=i=="MEASURE"?e.results:[P];g=i=="MEASURE"?s.sWarningHigh:n}else if(E[U].TYPE=="TA"){P={};P[u]="";P[n]=Number(E[U].FIXED);F.target={color:"Neutral"};F.target.data=i=="MEASURE"?e.results:[P];A=i=="MEASURE"?s.sTarget:n}}if(i=="FIXED"){F.firstYLabel.color=N>s.ch?"Error":s.wh<=N&&N<=s.ch?"Critical":N<s.wh?"Good":"Neutral";F.lastYLabel.color=I>s.ch?"Error":s.wh<=I&&I<=s.ch?"Critical":I<s.wh?"Good":"Neutral"}else if(i=="MEASURE"&&s.firstwH&&s.lastwH&&s.firstcH&&s.lastcH){F.firstYLabel.color=N>s.firstcH?"Error":s.firstwH<=N&&N<=s.firstcH?"Critical":N<s.firstwH?"Good":"Neutral";F.lastYLabel.color=I>s.lastcH?"Error":s.lastwH<=I&&I<=s.lastcH?"Critical":I<s.lastwH?"Good":"Neutral"}F.innerMaxThreshold={data:[]};F.innerMinThreshold={data:[]};break;case"RA":for(U in E){if(E[U].TYPE=="CH"){P={};P[u]="";P[n]=Number(E[U].FIXED);s.ch=Number(E[U].FIXED);F.maxThreshold={color:"Error"};F.maxThreshold.data=i=="MEASURE"?e.results:[P];m=i=="MEASURE"?s.sCriticalHigh:n}else if(E[U].TYPE=="WH"){P={};P[u]="";P[n]=Number(E[U].FIXED);s.wh=Number(E[U].FIXED);F.innerMaxThreshold={color:"Good"};F.innerMaxThreshold.data=i=="MEASURE"?e.results:[P];C=i=="MEASURE"?s.sWarningHigh:n}else if(E[U].TYPE=="WL"){P={};P[u]="";P[n]=Number(E[U].FIXED);s.wl=Number(E[U].FIXED);F.innerMinThreshold={color:"Good"};F.innerMinThreshold.data=i=="MEASURE"?e.results:[P];p=i=="MEASURE"?s.sWarningLow:n}else if(E[U].TYPE=="CL"){P={};P[u]="";P[n]=Number(E[U].FIXED);s.cl=Number(E[U].FIXED);F.minThreshold={color:"Error"};F.minThreshold.data=i=="MEASURE"?e.results:[P];g=i=="MEASURE"?s.sCriticalLow:n}else if(E[U].TYPE=="TA"){P={};P[u]="";P[n]=Number(E[U].FIXED);F.target={color:"Neutral"};F.target.data=i=="MEASURE"?e.results:[P];A=i=="MEASURE"?s.sTarget:n}}if(i=="FIXED"){F.firstYLabel.color=N>s.ch||N<s.cl?"Error":s.wh<=N&&N<=s.ch||s.cl<=N&&N<=s.wl?"Critical":N>=s.wl&&N<=s.wh?"Good":"Neutral";F.lastYLabel.color=I>s.ch||I<s.cl?"Error":s.wh<=I&&I<=s.ch||s.cl<=I&&I<=s.wl?"Critical":I>=s.wl&&I<=s.wh?"Good":"Neutral"}else if(i=="MEASURE"&&s.firstwL&&s.lastwL&&s.firstcL&&s.lastcL&&s.firstwH&&s.lastwH&&s.firstcH&&s.lastcH){F.firstYLabel.color=N>s.firstcH||N<s.firstcL?"Error":s.firstwH<=N&&N<=s.firstcH||s.firstcL<=N&&N<=s.firstwL?"Critical":N>=s.firstwL&&N<=s.firstwH?"Good":"Neutral";F.lastYLabel.color=I>s.lastcH||I<s.lastcL?"Error":s.lastwH<=I&&I<=s.lastcH||s.lastcL<=I&&I<=s.lastwL?"Critical":I>=s.lastwL&&I<=s.lastwH?"Good":"Neutral"}break}var _=function(e,i,l,r){return new a({color:"{/"+e+"/color}",points:{path:"/"+e+"/data",template:new t({x:"{"+i+"}",y:"{"+l+"}"})}})};var Y=s.getView().oNVConfContS;Y.setTarget(_("target",u,A));Y.setInnerMinThreshold(_("innerMinThreshold",u,p));Y.setInnerMaxThreshold(_("innerMaxThreshold",u,C));Y.setMinThreshold(_("minThreshold",u,g));Y.setMaxThreshold(_("maxThreshold",u,m));Y.setChart(_("chart",u,n));s.setTextInTile();if(s.getView().getViewData().parentController){s.getView().getViewData().parentController._updateTileModel(F)}else{s._updateTileModel(F)}}}});return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorArea/AreaChartTile.view", ["sap/ui/core/mvc/JSView","sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/m/library","sap/suite/ui/microchart/AreaMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,t,i,a,r,s,l,o,n,h){"use strict";var u=l.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorArea.AreaChartTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorArea.AreaChartTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e="Lorem ipsum";var t="Lorem ipsum";var i=l.Size;var c=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(c.title&&c.subTitle){e=c.title;t=c.subTitle}var m=function(e){return new a({color:"Good",points:{path:"/"+e+"/data",template:new r({x:"{day}",y:"{balance}"})}})};var p=function(e){return new s({label:"{/"+e+"/label}",color:"{/"+e+"/color}"})};var d={subheader:t,header:e,footerNum:"",footerComp:"",scale:"",unit:"",value:8888,size:"Auto",frameType:"OneByOne",state:u.Loading};this.oNVConfContS=new o({width:"{/width}",height:"{/height}",size:i.Responsive,target:m("target"),innerMinThreshold:m("innerMinThreshold"),innerMaxThreshold:m("innerMaxThreshold"),minThreshold:m("minThreshold"),maxThreshold:m("maxThreshold"),chart:m("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:p("firstXLabel"),lastXLabel:p("lastXLabel"),firstYLabel:p("firstYLabel"),lastYLabel:p("lastYLabel"),minLabel:p("minLabel"),maxLabel:p("maxLabel")});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oNVConfContS});this.oGenericTile=new n({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var b=new h;b.setData(d);this.oGenericTile.setModel(b);return this.oGenericTile}})},true);
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDual/DualTile.controller", ["sap/m/MessageToast","sap/m/library","sap/ui/core/library","sap/ui/core/format/DateFormat","sap/ui/thirdparty/jquery"],function(e,i,t,a,jQuery){"use strict";var l=i.DeviationIndicator;var o=i.ValueColor;var s=i.FrameType;var r=i.Size;var n=i.LoadState;var c=t.mvc.ViewType;sap.ui.controller("sap.ushell.components.tiles.indicatorDual.DualTile",{getRelativeTime:function(){var e=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();this.cacheTime=jQuery.type(this.cacheTime)=="date"?this.cacheTime:new Date(parseInt(this.cacheTime.substr(6),10));var i=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(e-this.cacheTime),t,a;switch(i.unit){case"minutes":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(i.time,"minutes");e=e-a;t=new Date(e);break;case"hours":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(i.time,"hours");e=e-a;t=new Date(e);break;case"days":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(i.time,"days");e=e-a;t=new Date(e);break}return t},getTile:function(){return this.oKpiTileView.oGenericTile},setTimeStamp:function(){this.updateTimeStampjobScheduled=false;var e=a.getDateTimeInstance({relative:true,relativeSource:"auto"});var i=e.format(this.getRelativeTime());var t=this.getView().oGenericTile.getTileContent()[0];if(t){if(t.setRefreshOption){t.setRefreshOption(true)}if(t.setTimestamp){t.setTimestamp(i)}}this.updateTimeStampjobScheduled=false;var l=this.oConfig.TILE_PROPERTIES.id+"time";var o=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(l);if(o){clearTimeout(o);o=undefined}sap.ushell.components.tiles.indicatorTileUtils.util.scheduleTimeStampJob.call(this,this.oTileApi.visible.isVisible())},getLocalCache:function(e){var i={};i.ChipId=e.ChipId;i.Data=e.Data;i.CacheMaxAge=e.CacheMaxAgeUnit;i.CacheMaxAgeUnit=e.CacheMaxAgeUnit;i.CacheType=e.CacheType;i.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();return i},refreshPress:function(){this.initProcess(true)},_getView:function(e,i,t){var a=this.oKpiTileView.getViewData();var l=sap.ui.view({type:c.JS,viewName:e,viewData:jQuery.extend(true,{},a,{parentController:this},{deferredObj:i},{refresh:t})});return l},logError:function(){this._updateTileModel({value:"",scale:"",unit:""});if(this.getView().getViewData().deferredObj){this.getView().getViewData().deferredObj.reject()}},doProcess:function(e){sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(this.oKpiTileView.oConfig.TILE_PROPERTIES.id+"defferedLeft",this.deferred_left);sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(this.oKpiTileView.oConfig.TILE_PROPERTIES.id+"defferedRight",this.deferred_right);var i=this;this.getView().oGenericTile.removeAllTileContent();var t=this.getView().oGenericTile;this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(n.Loading);var a=i.tileType.split("-")[1];try{var l;l="sap.ushell.components.tiles.indicatornumeric.NumericTile";this.leftView=i._getView(l,this.deferred_left,e);this.leftView.getController().dataCallInProgress=false;t.addTileContent(this.leftView.oGenericTile.getTileContent()[0]);switch(a){case"CM":l="sap.ushell.components.tiles.indicatorcomparison.ComparisonTile";this.rightView=i._getView(l,this.deferred_right,e);this.rightView.getController().dataCallInProgress=false;t.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"CT":l="sap.ushell.components.tiles.indicatorcontribution.ContributionTile";this.rightView=i._getView(l,this.deferred_right,e);this.rightView.getController().dataCallInProgress=false;t.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"AT":l="sap.ushell.components.tiles.indicatordeviation.DeviationTile";this.rightView=i._getView(l,this.deferred_right,e);this.rightView.getController().dataCallInProgress=false;t.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"TT":l="sap.ushell.components.tiles.indicatorArea.AreaChartTile";this.rightView=i._getView(l,this.deferred_right,e);this.rightView.getController().dataCallInProgress=false;t.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break}this.leftView.getController().onAfterTileRendering();this.rightView.getController().onAfterTileRendering();var o=this.getView().oGenericTile.getTileContent()[0];if(o&&o.attachRefresh){o.attachRefresh(this.refreshPress.bind(i))}}catch(e){this.logError(e)}},_updateTileModel:function(e){var i=this.getTile().getModel().getData();jQuery.extend(i,e);this.getTile().getModel().setData(i)},setTextInTile:function(){var e=this;var i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:i.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(e.oConfig),subheader:i.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(e.oConfig)})},doDummyProcess:function(){var e=this;try{e.setTextInTile();switch(e.tileType){case"DT-CM":e._updateTileModel({value:1,size:r.Auto,frameType:s.TwoByOne,state:n.Loading,valueColor:o.Good,indicator:l.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1,color:"Good"},{title:"Measure 2",value:2,color:"Good"},{title:"Measure 3",value:3,color:"Good"}]});break;case"DT-AT":e._updateTileModel({valueColor:"Good",value:100,frameType:s.TwoByOne,unit:"USD",actual:{value:120,color:o.Good},targetValue:100,thresholds:[{value:0,color:o.Error},{value:50,color:o.Critical},{value:150,color:o.Critical},{value:200,color:o.Error}],showActualValue:true,showTargetValue:true});break;case"DT-CT":e._updateTileModel({value:8888,size:r.Auto,frameType:s.TwoByOne,state:n.Loading,valueColor:o.Error,indicator:l.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral",displayValue:""},{title:"EMEA",value:50,color:"Neutral",displayValue:""},{title:"APAC",value:-20,color:"Neutral",displayValue:""}]});break;case"DT-TT":this._updateTileModel({value:8888,size:r.Auto,frameType:s.TwoByOne,state:n.Loading,valueColor:o.Error,indicator:l.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});break}}catch(e){}},visibleHandler:function(e){if(!e){if(this.leftView){this.leftView.getController().firstTimeVisible=false}if(this.rightView){this.rightView.getController().firstTimeVisible=false}sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}if(e){if(this.leftView){this.leftView.getController().refreshHandler()}if(this.rightView){this.rightView.getController().refreshHandler()}}},initProcess:function(i){var t=this;this.oKpiTileView=this.getView();this.oResourceBundle=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();this.viewData={};t.viewData=this.oKpiTileView.getViewData();this.oTileApi=this.viewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this))}this.deferred_left=new jQuery.Deferred;this.deferred_right=new jQuery.Deferred;jQuery.when(this.deferred_left,this.deferred_right).done(function(){t.setTextInTile();t.oConfig=t.oKpiTileView.oConfig;t.chipCacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(t.oConfig);t.chipCacheTimeUnit=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(t.oConfig);var e=t.leftView.getController().cacheWriteData;var i=t.rightView.getController().cacheWriteData;t.oKpiTileView.oGenericTile.setState(n.Loaded);var a=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oKpiTileView.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+a+"'></a>");t.oKpiTileView.oGenericTile.attachPress(function(){t.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oKpiTileView.oConfig.TILE_PROPERTIES.id,null);window.location.hash=a});var l={};var o={};o.leftData=e;o.rightData=i;l.ChipId=t.oConfig.TILE_PROPERTIES.id;l.Data=JSON.stringify(o);l.CacheMaxAge=Number(t.chipCacheTime);l.CacheMaxAgeUnit=t.chipCacheTimeUnit;l.CacheType=1;var s=t.getLocalCache(l);if(o.leftData&&o.rightData){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,s)}var r=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(t.chipCacheTime&&o.leftData&&o.rightData){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,l,false,function(e){if(e){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,e);t.cacheTime=e.CachedTime;t.setTimeStamp.call(t)}})}if(t.chipCacheTime){if(!t.cacheTime){t.cacheTime=r.CachedTime}t.setTimeStamp.call(t);sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(t,t.oTileApi.visible.isVisible())}}).fail(function(){t.oKpiTileView.oGenericTile.setState(n.Failed)});t.tileType=t.oKpiTileView.oConfig.TILE_PROPERTIES.tileType;this.oTileApi=t.viewData.chip;if(this.oTileApi.preview.isEnabled()){this.doDummyProcess();t.oKpiTileView.oGenericTile.attachPress(function(){e.show(t.oResourceBundle.getText("sb.NavigationHelp"))})}else{this.doProcess(i)}},onAfterRendering:function(){this.initProcess()},setNoData:function(){try{this._updateTileModel({value:"",scale:"",unit:"",footerNum:this.oResourceBundle.getText("sb.noDataAvailable"),footerComp:this.oResourceBundle.getText("sb.noDataAvailable")});this.oKpiTileView.oGenericTile.setState(n.Loaded)}catch(e){}},getChipConfiguration:function(e){var i=this;try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(i.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),i.oTileApi.preview.isEnabled(),function(t){i.oConfig=t;e.call()})}catch(e){i.logError(e.message)}}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDual/DualTile.view", ["sap/ui/core/mvc/JSView","sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/ushell/components/tiles/sbtilecontent","sap/m/NumericContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/suite/ui/microchart/AreaMicroChart","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/m/library","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,t,a,i,l,o,n,s,r,u,c,h,p,m,d,T){"use strict";var C=m.Size;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorDual.DualTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorDual.DualTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e=this;e.oGenericTileData={};sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(e.getViewData().chip.configuration.getParameterValueAsString("tileConfiguration"),e.getViewData().chip.preview.isEnabled(),function(t){e.oConfig=t});e.tileType=e.oConfig.TILE_PROPERTIES.tileType;e.oNumericContent=new l({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:"{/isFormatterValue}",truncateValueTo:5,valueColor:"{/valueColor}",nullifyValue:false});e.oLeftTileContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oNumericContent});var t;switch(e.tileType){case"DT-CM":t=new o({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});e.oComparisionContent=new n({size:"{/size}",scale:"{/scale}",data:{template:t,path:"/data"}});e.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oComparisionContent});break;case"DT-CT":t=new o({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});e.oContributionContent=new n({size:"{/size}",scale:"{/scale}",data:{template:t,path:"/data"}});e.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oContributionContent});break;case"DT-TT":var a=function(e){return new s({color:"Good",points:{path:"/"+e+"/data",template:new r({x:"{day}",y:"{balance}"})}})};var i=function(e){return new u({label:"{/"+e+"/label}",color:"{/"+e+"/color}"})};var m=new c({width:"{/width}",height:"{/height}",size:"{/size}",target:a("target"),innerMinThreshold:a("innerMinThreshold"),innerMaxThreshold:a("innerMaxThreshold"),minThreshold:a("minThreshold"),maxThreshold:a("maxThreshold"),chart:a("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:i("firstXLabel"),lastXLabel:i("lastXLabel"),firstYLabel:i("firstYLabel"),lastYLabel:i("lastYLabel"),minLabel:i("minLabel"),maxLabel:i("maxLabel")});e.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",content:m});break;case"DT-AT":var b=new h({value:"{value}",color:"{color}"});var w=new p({size:C.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:b,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});e.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:w});break}e.oGenericTile=new d({subheader:"{/subheader}",frameType:"TwoByOne",size:"{/size}",header:"{/header}",tileContent:[e.oLeftTileContent,e.oRightContent]});e.oGenericTileModel=new T;e.oGenericTileModel.setData(e.oGenericTileData);e.oGenericTile.setModel(e.oGenericTileModel);return e.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualComparison/DualComparison.controller", ["sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(i,e,jQuery,t){"use strict";var l=e.Size;var a=e.DeviationIndicator;var o=e.ValueColor;var s=e.LoadState;sap.ui.controller("tiles.indicatorDualComparison.DualComparison",{getTile:function(){return this.oDualComparisonView.oGenericTile},_updateTileModel:function(i){var e=this.getTile().getModel().getData();jQuery.extend(e,i);this.getTile().getModel().setData(e)},setTitle:function(){var i=this;var e=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oChip);this._updateTileModel({header:e.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(i.oConfig),subheader:e.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(i.oConfig)})},logError:function(i){this.oDualComparisonView.oGenericTile.setState(s.Failed);this.oDualComparisonView.oGenericTile.setState(s.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(i)},formSelectStatement:function(i){var e=Object.keys(i);var t="";for(var l=0;l<e.length;l++){if(i[e[l]]!==undefined&&i.fullyFormedMeasure){t+=","+i[e[l]]}}return t},setThresholdValues:function(){var i=this;try{var e={};e.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":e.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WH","MEASURE");e.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CH","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","MEASURE");e.fullyFormedMeasure+=i.formSelectStatement(e);break;case"MA":e.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WL","MEASURE");e.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CL","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","MEASURE");e.fullyFormedMeasure+=i.formSelectStatement(e);break;case"RA":e.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WH","MEASURE");e.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CH","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","MEASURE");e.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WL","MEASURE");e.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CL","MEASURE");e.fullyFormedMeasure+=i.formSelectStatement(e);break}}else{e.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CH","FIXED");e.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CL","FIXED");e.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WH","FIXED");e.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WL","FIXED");e.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","FIXED");e.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","FIXED")}return e}catch(e){i.logError(e)}},getTrendColor:function(i){var e=this;var t,l,a,s;try{var r=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var n=o.Neutral;if(r==="MI"){if(i.criticalHighValue&&i.warningHighValue){t=Number(i.criticalHighValue);l=Number(i.warningHighValue);if(this.CALCULATED_KPI_VALUE<l){n=o.Good}else if(this.CALCULATED_KPI_VALUE<=t){n=o.Critical}else{n=o.Error}}}else if(r==="MA"){if(i.criticalLowValue&&i.warningLowValue){a=Number(i.criticalLowValue);s=Number(i.warningLowValue);if(this.CALCULATED_KPI_VALUE<a){n=o.Error}else if(this.CALCULATED_KPI_VALUE<=s){n=o.Critical}else{n=o.Good}}}else if(i.warningLowValue&&i.warningHighValue&&i.criticalLowValue&&i.criticalHighValue){t=Number(i.criticalHighValue);l=Number(i.warningHighValue);s=Number(i.warningLowValue);a=Number(i.criticalLowValue);if(this.CALCULATED_KPI_VALUE<a||this.CALCULATED_KPI_VALUE>t){n=o.Error}else if(this.CALCULATED_KPI_VALUE>=a&&this.CALCULATED_KPI_VALUE<=s||this.CALCULATED_KPI_VALUE>=l&&this.CALCULATED_KPI_VALUE<=t){n=o.Critical}else{n=o.Good}}return n}catch(i){e.logError(i)}},_processDataForComparisonChart:function(i,e,t){var l=[],a={},o,s,r;var n;var u=[];var E=this;for(o=0;o<i.results.length;o++){var T=i.results[o]}u=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oConfig.EVALUATION.ODATA_URL,this.oConfig.EVALUATION.ODATA_ENTITYSET);for(o=0,r=u.length;o<r;o++){s=u[o];a[s.key]=s.value}var c=E.oConfig.TILE_PROPERTIES.COLUMN_NAMES||E.oConfig.EVALUATION.COLUMN_NAMES;for(o=0;o<c.length;o++){var A={};var C=c[o];A.value=Number(T[C.COLUMN_NAME]);var L=Number(T[C.COLUMN_NAME]);if(E.oConfig.EVALUATION.SCALING==-2){L*=100}n=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(L,E.oConfig.EVALUATION.SCALING,E.oConfig.EVALUATION.DECIMAL_PRECISION);if(E.oConfig.EVALUATION.SCALING==-2){n+=" %"}A.displayValue=n.toString();if(t[o]&&T[t[o].name]){A.displayValue+=" "+T[t[o].name]}A.color=C.semanticColor;A.title=a[C.COLUMN_NAME]||C.COLUMN_NAME;l.push(A)}return l},getTrendIndicator:function(i,e){var t=this;i=Number(i);try{var l=a.None;if(i>e){l=a.Down}else if(i<e){l=a.Up}return l}catch(i){t.logError(i)}},fetchKpiValue:function(i,e){var l=this;try{var a=this.oConfig.EVALUATION.ODATA_URL,o=this.oConfig.EVALUATION.ODATA_ENTITYSET,s;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){s=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure}else{s=this.oConfig.EVALUATION.COLUMN_NAME;var r=s;if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES){for(var n=0;n<this.oConfig.TILE_PROPERTIES.COLUMN_NAMES.length;n++){if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[n].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){r=r+","+this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[n].COLUMN_NAME}}}}var u=this.oConfig.EVALUATION_VALUES;var E=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(l.oConfig.TILE_PROPERTIES.id);if(!E){var T=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var c={};c["0"]=s+",asc";c["1"]=s+",desc";var A=c[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var C=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(l.oChip.url.addSystemToServiceUrl(a),o,r,null,T,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){C.uri+="&$orderby="+A[0]+" "+A[2]}else{C.uri+="&$orderby="+A[0]+" "+A[1]}this.writeData={};this.comparisionChartODataRef=C.model.read(C.uri,null,null,true,function(t){if(t&&t.results&&t.results.length){if(C.unit){l.writeData.unit=C.unit}l.oConfig.TILE_PROPERTIES.FINALVALUE=t;l.oConfig.TILE_PROPERTIES.FINALVALUE=l._processDataForComparisonChart(l.oConfig.TILE_PROPERTIES.FINALVALUE,r.split(",")[0],C.unit);l.writeData.data=t;var a;for(var o=0;o<l.oConfig.TILE_PROPERTIES.FINALVALUE.length;o++){if(l.oConfig.TILE_PROPERTIES.FINALVALUE[o].title==l.DEFINITION_DATA.EVALUATION.COLUMN_NAME){l.writeData.numericData=l.oConfig.TILE_PROPERTIES.FINALVALUE[o];calculatedValueforScaling=l.oConfig.TILE_PROPERTIES.FINALVALUE[o].value;l.getTrendIndicator(l.setThresholdValues().trendValue,calculatedValueforScaling);l._updateTileModel({valueColor:l.oConfig.TILE_PROPERTIES.FINALVALUE[o].color,value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(a),l.oConfig.EVALUATION.SCALING,l.oConfig.EVALUATION.DECIMAL_PRECISION).toString()});break}}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(l.oConfig.TILE_PROPERTIES.id,l.writeData);i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(t.results.length==0){l.oConfig.TILE_PROPERTIES.FINALVALUE=t;l.writeData.data=t;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(l.oConfig.TILE_PROPERTIES.id,l.writeData);i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else{e.call(l,"no Response from QueryServiceUri")}},function(i){if(i&&i.response){t.error(i.message+" : "+i.request.requestUri);e.call(l,i)}});if(!l.writeData.numericData){var L=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(l.DEFINITION_DATA.EVALUATION_FILTERS,l.DEFINITION_DATA.ADDITIONAL_FILTERS);var I=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(l.oChip.url.addSystemToServiceUrl(a),o,s,null,L);if(I){l.QUERY_SERVICE_MODEL=I.model;l.queryUriForKpiValue=I.uri;l.numericODataReadRef=l.QUERY_SERVICE_MODEL.read(I.uri,null,null,true,function(i){if(i&&i.results&&i.results.length){if(I.unit){l._updateTileModel({unitNumeric:i.results[0][I.unit.name]});l.writeData.unitNumeric=I.unit;l.writeData.unitNumeric.name=I.unit.name}l.writeData.numericData=i.results[0];l.DEFINITION_DATA.value=l.writeData.numericData[l.DEFINITION_DATA.EVALUATION.COLUMN_NAME];l.writeData.numericData.color=l.getTrendColor(l.setThresholdValues());l.DEFINITION_DATA.valueColor=l.writeData.numericData.color;var t="";var a=i.results[0][l.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var o=l.getTrendIndicator(l.setThresholdValues().trendValue,a);if(l.oConfig.EVALUATION.SCALING==-2){a*=100;l.getView().oNumericContent.setFormatterValue(false)}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(a),l.oConfig.EVALUATION.SCALING,l.oConfig.EVALUATION.DECIMAL_PRECISION);if(l.oConfig.EVALUATION.SCALING==-2){l._updateTileModel({scale:"%"})}l._updateTileModel({value:t.toString(),valueColor:l.writeData.numericData.color,indicator:o})}else{e.call(l,"no Response from QueryServiceUri")}})}}}else{if(E.unit){l._updateTileModel({unit:E.data.results[0][E.unit.name]})}if(E.data&&E.data.results&&E.data.results.length){l.oConfig.TILE_PROPERTIES.FINALVALUE=E.data;l._updateTileModel({value:E.data.results[0][l.DEFINITION_DATA.EVALUATION.COLUMN_NAME]});l.oConfig.TILE_PROPERTIES.FINALVALUE=l._processDataForComparisonChart(l.oConfig.TILE_PROPERTIES.FINALVALUE,r,l.writeData.unit);i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(u.results.length==0){l.oConfig.TILE_PROPERTIES.FINALVALUE=E.data;i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else{e.call(l,"no Response from QueryServiceUri")}}}catch(i){e.call(l,i)}},flowWithoutDesignTimeCall:function(){var i=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(e){this.CALCULATED_KPI_VALUE=e;i.oDualComparisonView.oGenericTile.setFrameType("TwoByOne");i.oDualComparisonView.oGenericTile.removeAllTileContent();i.oDualComparisonView.oGenericTile.addTileContent(i.oDualComparisonView.oNumericTile);i.oDualComparisonView.oGenericTile.addTileContent(i.oDualComparisonView.oComparisonTile);var t=this.CALCULATED_KPI_VALUE;var l,a;for(var o=0;o<t.length;o++){if(t[o].title==i.DEFINITION_DATA.EVALUATION.COLUMN_NAME){a=t[o].value;l=t[o].color||"Neutral";i._updateTileModel({value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(a),i.oConfig.EVALUATION.SCALING,i.oConfig.EVALUATION.DECIMAL_PRECISION).toString(),valueColor:l});break}}if(!l&&!a){l=i.DEFINITION_DATA.valueColor;a=i.DEFINITION_DATA.value}this._updateTileModel({value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(a),i.oConfig.EVALUATION.SCALING,i.oConfig.EVALUATION.DECIMAL_PRECISION).toString(),data:this.CALCULATED_KPI_VALUE});var r=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system);i.oDualComparisonView.oGenericTile.$().wrap("<a href ='"+r+"'></a>");this.oDualComparisonView.oGenericTile.setState(s.Loaded);var n="";if(l=="Error"){n="sb.error"}if(l=="Neutral"){n="sb.neutral"}if(l=="Critical"){n="sb.critical"}if(l=="Good"){n="sb.good"}var u=i.setThresholdValues();var E,T,c,A,C,L,I,h,g;if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[0]){E=this.CALCULATED_KPI_VALUE[0].title;A=this.CALCULATED_KPI_VALUE[0].value;I=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[0].color)}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[1]){T=this.CALCULATED_KPI_VALUE[1].title;C=this.CALCULATED_KPI_VALUE[1].value;h=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[1].color)}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[2]){c=this.CALCULATED_KPI_VALUE[2].title;L=this.CALCULATED_KPI_VALUE[2].value;g=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[2].color)}var f={status:n,actual:a,target:u.targetValue,cH:u.criticalHighValue,wH:u.warningHighValue,wL:u.warningLowValue,cL:u.criticalLowValue};var U={m1:E,v1:A,c1:I,m2:T,v2:C,c2:h,m3:c,v3:L,c3:g};var p=i.oDualComparisonView.oGenericTile.getTileContent()[0].getContent();var m=i.oDualComparisonView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(p,"NT",f);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(m,"COMP",U)},this.logError)}},flowWithDesignTimeCall:function(){var i=this;try{var e=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(e){i.oConfig.EVALUATION_FILTERS=e.EVALUATION_FILTERS;i.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(e){i.oConfig.EVALUATION_FILTERS=e;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(i.oConfig.TILE_PROPERTIES.id,i.oConfig);i.flowWithoutDesignTimeCall()})}}catch(i){this.logError(i)}},refreshHandler:function(i){if(!i.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient"))){i.flowWithoutDesignTimeCall()}else{i.flowWithDesignTimeCall()}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}if(i){this.refreshHandler(this)}},onInit:function(){var i=this;this.firstTimeVisible=false;this.oDualComparisonView=this.getView();this.oChip=this.oDualComparisonView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oChip.url.getApplicationSystem();this.oDualComparisonView.oGenericTile.setState(s.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),this.oChip.preview.isEnabled(),function(e){i.oConfig=e;if(i.oChip.preview){i.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system))}if(i.oChip.preview.isEnabled()){i.setTitle();i._updateTileModel({value:1,size:l.Auto,frameType:"TwoByOne",state:s.Loading,valueColor:o.Good,indicator:a.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1,color:"Good"},{title:"Measure 2",value:2,color:"Good"},{title:"Measure 3",value:3,color:"Good"}]});i.oDualComparisonView.oGenericTile.setState(s.Loaded)}else{i.setTitle();i.oDualComparisonView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(i.comparisionChartODataRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(i.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system)});if(Number(i.oChip.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(i.oConfig.TILE_PROPERTIES.id,i.oConfig);i.flowWithoutDesignTimeCall()}else{i.flowWithDesignTimeCall()}}})}catch(i){this.logError(i)}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualComparison/DualComparison.view", ["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,i,t,a,o,r,s,n,l,u){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualComparison.DualComparison",{getControllerName:function(){return"tiles.indicatorDualComparison.DualComparison"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e=this;e.oGenericTileData={};e.oNumericContent=new o({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});e.oNumericTile=new r({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oNumericContent});e.oCmprsDataTmpl=new s({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});e.oCmprsChrtTmpl=new n({size:"{/size}",scale:"{/scale}",data:{template:e.oCmprsDataTmpl,path:"/data"}});e.oComparisonTile=new r({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:e.oCmprsChrtTmpl});e.oGenericTile=new l({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[e.oNumericTile,e.oComparisonTile]});e.oGenericTileModel=new u;e.oGenericTileModel.setData(e.oGenericTileData);e.oGenericTile.setModel(e.oGenericTileModel);return e.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualContribution/DualContribution.controller", ["sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(i,jQuery,e){"use strict";var t=i.ValueColor;var l=i.Size;var o=i.DeviationIndicator;var a=i.LoadState;sap.ui.controller("tiles.indicatorDualContribution.DualContribution",{getTile:function(){return this.oDualContributionView.oGenericTile},_updateTileModel:function(i){var e=this.getTile().getModel().getData();jQuery.extend(e,i);this.getTile().getModel().setData(e);this.getTile().getModel().updateBindings()},setTitle:function(){var i=this;var e=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oChip);this._updateTileModel({header:e.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(i.oConfig),subheader:e.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(i.oConfig)})},formSelectStatement:function(i){var e=Object.keys(i);var t="";for(var l=0;l<e.length;l++){if(i[e[l]]!==undefined&&i.fullyFormedMeasure){t+=","+i[e[l]]}}return t},logError:function(i){this.oDualContributionView.oGenericTile.setState(a.Failed);this.oDualContributionView.oGenericTile.setState(a.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(i)},setThresholdValues:function(){var i=this;try{var e={};e.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":e.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WH","MEASURE");e.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CH","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","MEASURE");e.fullyFormedMeasure+=i.formSelectStatement(e);break;case"MA":e.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WL","MEASURE");e.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CL","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","MEASURE");e.fullyFormedMeasure+=i.formSelectStatement(e);break;case"RA":e.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WH","MEASURE");e.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CH","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","MEASURE");e.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WL","MEASURE");e.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CL","MEASURE");e.fullyFormedMeasure+=i.formSelectStatement(e);break}}else{e.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CH","FIXED");e.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"CL","FIXED");e.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WH","FIXED");e.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"WL","FIXED");e.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TA","FIXED");e.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(i.oConfig,"TC","FIXED")}return e}catch(e){i.logError(e)}},getTrendIndicator:function(i,e){var t=this;i=Number(i);try{var l=o.None;if(i>e){l=o.Down}else if(i<e){l=o.Up}return l}catch(i){t.logError(i)}},_processDataForComparisonChart:function(i,e,t){var l=this.oConfig.TILE_PROPERTIES.semanticMeasure;var o=[];var a;for(var s=0;s<i.results.length;s++){var n=i.results[s];var r={};try{r.title=n[t].toString()}catch(i){r.title=""}r.value=Number(n[e]);var u=Number(n[e]);if(this.oConfig.EVALUATION.SCALING==-2){u*=100}a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(u,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION);r.displayValue=a.toString();if(typeof l==="undefined"){r.color="Neutral"}else if(this.oConfig.EVALUATION.GOAL_TYPE==="MA"){if(r.value>n[l]){r.color="Good"}else{r.color="Error"}}else if(this.oConfig.EVALUATION.GOAL_TYPE==="MI"){if(r.value<n[l]){r.color="Good"}else{r.color="Error"}}else{r.color="Neutral"}o.push(r)}return o},fetchKpiValue:function(i,t){var l=this;try{var o=this.oConfig.EVALUATION.ODATA_URL,a=this.oConfig.EVALUATION.ODATA_ENTITYSET,s;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){s=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure}else{s=this.oConfig.EVALUATION.COLUMN_NAME}var n=this.oConfig.TILE_PROPERTIES.dimension;var r=this.oConfig.EVALUATION_VALUES;var u=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(l.oConfig.TILE_PROPERTIES.id);if(!u){var T=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var c={};c["0"]=s+",asc";c["1"]=s+",desc";c["2"]=n+",asc";c["3"]=n+",desc";var E=c[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var C=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(l.oChip.url.addSystemToServiceUrl(o),a,s,n,T,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){C.uri+="&$top=3&$orderby="+E[0]+" "+E[2]}else{C.uri+="&$top=3&$orderby="+E[0]+" "+E[1]}this.comparisionChartODataRef=C.model.read(C.uri,null,null,true,function(e){if(C.unit[0]){l._updateTileModel({unitContribution:e.results[0][C.unit[0].name]});l.writeData.unitContribution=C.unit[0];l.writeData.unitContribution.name=C.unit[0].name}if(e&&e.results&&e.results.length){n=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(l.oChip.url.addSystemToServiceUrl(o),a,n);l.writeData.dimension=n;l.oConfig.TILE_PROPERTIES.FINALVALUE=e;l.oConfig.TILE_PROPERTIES.FINALVALUE=l._processDataForComparisonChart(l.oConfig.TILE_PROPERTIES.FINALVALUE,s.split(",")[0],n);l.writeData.data=e;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(l.oConfig.TILE_PROPERTIES.id,l.writeData);i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(e.results.length==0){l.oConfig.TILE_PROPERTIES.FINALVALUE=e;l.writeData.data=e;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(l.oConfig.TILE_PROPERTIES.id,l.writeData)}else{t.call(l,"no Response from QueryServiceUri")}},function(i){if(i&&i.response){e.error(i.message+" : "+i.request.requestUri);t.call(l,i)}});var h=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(l.DEFINITION_DATA.EVALUATION_FILTERS,l.DEFINITION_DATA.ADDITIONAL_FILTERS);var A=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(l.oChip.url.addSystemToServiceUrl(o),a,s,null,h);if(A){l.QUERY_SERVICE_MODEL=A.model;l.queryUriForKpiValue=A.uri;l.numericODataReadRef=l.QUERY_SERVICE_MODEL.read(A.uri,null,null,true,function(e){if(e&&e.results&&e.results.length){if(A.unit){l._updateTileModel({unitNumeric:e.results[0][A.unit.name]});l.writeData.unitNumeric=A.unit;l.writeData.unitNumeric.name=A.unit.name}l.writeData.numericData=e;var o="";var a=e.results[0][l.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var s=l.getTrendIndicator(l.setThresholdValues().trendValue,a);if(l.oConfig.EVALUATION.SCALING==-2){a*=100;l.getView().oNumericContent.setFormatterValue(false)}l.DEFINITION_DATA.value=a;o=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(a),l.oConfig.EVALUATION.SCALING,l.oConfig.EVALUATION.DECIMAL_PRECISION);if(l.oConfig.EVALUATION.SCALING==-2){l._updateTileModel({scale:"%"})}l._updateTileModel({value:o.toString(),valueColor:l.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution,indicator:s});i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE,a)}else{t.call(l,"no Response from QueryServiceUri")}})}}else{var g=l.setThresholdValues();var f;if(u.unitContribution){l._updateTileModel({unitContribution:u.data.results[0][u.unitContribution.name]})}if(u.unitNumeric){l._updateTileModel({unitNumeric:u.numericData.results[0][u.unitNumeric.name]})}if(u.data&&u.data.results&&u.data.results.length){n=u.dimension;l.oConfig.TILE_PROPERTIES.FINALVALUE=u.data;l.oConfig.TILE_PROPERTIES.FINALVALUE=l._processDataForComparisonChart(l.oConfig.TILE_PROPERTIES.FINALVALUE,s.split(",")[0],n);i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(r.results.length==0){l.oConfig.TILE_PROPERTIES.FINALVALUE=u.data}else{t.call(l,"no Response from QueryServiceUri")}if(u.numericData&&u.numericData.results&&u.numericData.results.length){f=u.numericData.results[0][l.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(l.oConfig.EVALUATION.SCALING==-2){f*=100;l.getView().oNumericContent.setFormatterValue(false)}var I=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(f),l.oConfig.EVALUATION.SCALING,l.oConfig.EVALUATION.DECIMAL_PRECISION);if(l.oConfig.EVALUATION.SCALING==-2){l._updateTileModel({scale:"%"})}var p=l.getTrendIndicator(g.trendValue,f);l._updateTileModel({value:I.toString(),indicator:p,valueColor:l.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution});i.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE,f)}else{t.call(l,"no Response from QueryServiceUri")}}}catch(i){t.call(l,i)}},flowWithoutDesignTimeCall:function(){var i=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(e,t){this.CALCULATED_KPI_VALUE=e;if(i.oConfig.TILE_PROPERTIES.frameType=="TwoByOne"){i.oDualContributionView.oGenericTile.setFrameType("TwoByOne");i.oDualContributionView.oGenericTile.removeAllTileContent();i.oDualContributionView.oGenericTile.addTileContent(i.oDualContributionView.oNumericTile);i.oDualContributionView.oGenericTile.addTileContent(i.oDualContributionView.oComparisonTile)}else{i.oDualContributionView.oGenericTile.setFrameType("OneByOne");i.oDualContributionView.oGenericTile.removeAllTileContent();i.oDualContributionView.oGenericTile.addTileContent(i.oDualContributionView.oComparisonTile)}var l=this.CALCULATED_KPI_VALUE;var o=this.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution;for(var s=0;s<this.CALCULATED_KPI_VALUE.length;s++){l[s].color=o}this._updateTileModel({data:l});var n=i.setThresholdValues();var r=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system);i.oDualContributionView.oGenericTile.$().wrap("<a href ='"+r+"'></a>");this.oDualContributionView.oGenericTile.setState(a.Loaded);var u="";if(o=="Error"){u="sb.error"}if(o=="Neutral"){u="sb.neutral"}if(o=="Critical"){u="sb.critical"}if(o=="Good"){u="sb.good"}n=i.setThresholdValues();var T,c,E,C,h,A,g,f,I;if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[0]){T=this.CALCULATED_KPI_VALUE[0].title;C=this.CALCULATED_KPI_VALUE[0].value;g=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[0].color)}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[1]){c=this.CALCULATED_KPI_VALUE[1].title;h=this.CALCULATED_KPI_VALUE[1].value;f=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[1].color)}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[2]){E=this.CALCULATED_KPI_VALUE[2].title;A=this.CALCULATED_KPI_VALUE[2].value;I=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[2].color)}var p={status:u,actual:t,target:n.targetValue,cH:n.criticalHighValue,wH:n.warningHighValue,wL:n.warningLowValue,cL:n.criticalLowValue};var d={m1:T,v1:C,c1:g,m2:c,v2:h,c2:f,m3:E,v3:A,c3:I};var m=i.oDualContributionView.oGenericTile.getTileContent()[0].getContent();var L=i.oDualContributionView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(m,"NT",p);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(L,"CONT",d)},this.logError)}},flowWithDesignTimeCall:function(){var i=this;try{var e=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(e){i.oConfig.EVALUATION_FILTERS=e.EVALUATION_FILTERS;i.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(e){i.oConfig.EVALUATION_FILTERS=e;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(i.oConfig.TILE_PROPERTIES.id,i.oConfig);i.flowWithoutDesignTimeCall()})}}catch(i){this.logError(i)}},refreshHandler:function(i){if(!i.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient"))){i.flowWithoutDesignTimeCall()}else{i.flowWithDesignTimeCall()}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}if(i){this.refreshHandler(this)}},onInit:function(){var i=this;i.writeData={};this.firstTimeVisible=false;this.oDualContributionView=this.getView();this.oChip=this.oDualContributionView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oChip.url.getApplicationSystem();this.oDualContributionView.oGenericTile.setState(a.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),this.oChip.preview.isEnabled(),function(e){i.oConfig=e;if(i.oChip.preview){i.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system))}if(i.oChip.preview.isEnabled()){i.setTitle();i._updateTileModel({value:8888,size:l.Auto,frameType:"TwoByOne",state:a.Loading,valueColor:t.Error,indicator:o.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral",displayValue:""},{title:"EMEA",value:50,color:"Neutral",displayValue:""},{title:"APAC",value:-20,color:"Neutral",displayValue:""}]});i.oDualContributionView.oGenericTile.setState(a.Loaded)}else{i.setTitle();i.oDualContributionView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(i.comparisionChartODataRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(i.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system)});if(Number(i.oChip.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(i.oConfig.TILE_PROPERTIES.id,i.oConfig);i.flowWithoutDesignTimeCall()}else{i.flowWithDesignTimeCall()}}})}catch(i){this.logError(i)}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualContribution/DualContribution.view", ["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,i,t,o,a,r,n,l,s,u){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualContribution.DualContribution",{getControllerName:function(){return"tiles.indicatorDualContribution.DualContribution"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e=this;e.oGenericTileData={};e.oNumericContent=new a({value:"{/value}",scale:"{/scale}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});e.oNumericTile=new r({unit:"{/unitNumeric}",size:"{/size}",footer:"{/footerNum}",content:e.oNumericContent});e.oCmprsDataTmpl=new n({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});e.oCmprsChrtTmpl=new l({size:"{/size}",scale:"{/scale}",data:{template:e.oCmprsDataTmpl,path:"/data"}});e.oComparisonTile=new r({unit:"{/unitContribution}",size:"{/size}",footer:"{/footerComp}",content:e.oCmprsChrtTmpl});e.oGenericTile=new s({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[e.oNumericTile,e.oComparisonTile]});e.oGenericTileModel=new u;e.oGenericTileModel.setData(e.oGenericTileData);e.oGenericTile.setModel(e.oGenericTileModel);return e.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualDeviation/DualDeviation.controller", ["sap/ui/model/json/JSONModel","sap/m/library","sap/ui/thirdparty/jquery"],function(e,i,jQuery){"use strict";var t=i.DeviationIndicator;var l=i.ValueColor;var a=i.LoadState;sap.ui.controller("tiles.indicatorDualDeviation.DualDeviation",{logError:function(e){this.oDualDeviationView.oGenericTile.setState(a.Failed);this.oDualDeviationView.oGenericTile.setState(a.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e)},getThresholdsObjAndColor:function(e){try{var i={};i.arrObj=[];i.returnColor=l.Neutral;var t=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var a,o,r,s;if(t==="MI"){r=Number(e.criticalHighValue)||0;s=Number(e.warningHighValue)||0;if(r&&s){r=window.parseFloat(r);s=window.parseFloat(s);i.arrObj.push({value:r,color:l.Error});i.arrObj.push({value:s,color:l.Critical});if(this.CALCULATED_KPI_VALUE<s){i.returnColor=l.Good}else if(this.CALCULATED_KPI_VALUE<=r){i.returnColor=l.Critical}else{i.returnColor=l.Error}}}else if(t==="MA"){o=Number(e.criticalLowValue)||0;a=Number(e.warningLowValue)||0;if(o&&a){o=window.parseFloat(o);a=window.parseFloat(a);i.arrObj.push({value:o,color:l.Error});i.arrObj.push({value:a,color:l.Critical});if(this.CALCULATED_KPI_VALUE<o){i.returnColor=l.Error}else if(this.CALCULATED_KPI_VALUE<=a){i.returnColor=l.Critical}else{i.returnColor=l.Good}}}else{r=Number(e.criticalHighValue)||0;s=Number(e.warningHighValue)||0;o=Number(e.criticalLowValue)||0;a=Number(e.warningLowValue)||0;if(a&&s&&o&&o){r=window.parseFloat(r);s=window.parseFloat(s);a=window.parseFloat(a);o=window.parseFloat(o);i.arrObj.push({value:r,color:l.Error});i.arrObj.push({value:s,color:l.Critical});i.arrObj.push({value:a,color:l.Critical});i.arrObj.push({value:o,color:l.Error});if(this.CALCULATED_KPI_VALUE<o||this.CALCULATED_KPI_VALUE>r){i.returnColor=l.Error}else if(this.CALCULATED_KPI_VALUE>=o&&this.CALCULATED_KPI_VALUE<=a||this.CALCULATED_KPI_VALUE>=s&&this.CALCULATED_KPI_VALUE<=r){i.returnColor=l.Critical}else{i.returnColor=l.Good}}}return i}catch(e){this.logError(e)}},getTrendIndicator:function(e,i){var l=this;e=Number(e);try{var a=t.None;if(e>i){a=t.Down}else if(e<i){a=t.Up}return a}catch(e){l.logError(e)}},getTile:function(){return this.oDualDeviationView.oGenericTile},_updateTileModel:function(e){var i=this.getTile().getModel().getData();jQuery.extend(i,e);this.getTile().getModel().setData(i)},formSelectStatement:function(e){var i=Object.keys(e);var t="";for(var l=0;l<i.length;l++){if(e[i[l]]!==undefined&&e.fullyFormedMeasure){t+=","+e[i[l]]}}return t},setThresholdValues:function(){var e=this;var i={};i.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"MA":i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"RA":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break}}else{i.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","FIXED");i.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","FIXED");i.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","FIXED");i.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","FIXED");i.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","FIXED");i.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","FIXED")}return i},fetchKpiValue:function(e,i){var t=this;var l=0;try{var a=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var o=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var r=this.setThresholdValues();var s=r.fullyFormedMeasure;var n=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!n){var u=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var c=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(a),o,s,null,u);if(c){this.QUERY_SERVICE_MODEL=c.model;this.queryUriForKpiValue=c.uri;try{this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(c.uri,null,null,true,function(a){t.writeData={};if(a&&a.results&&a.results.length){l=a.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(c.unit[0]){t._updateTileModel({unit:a.results[0][c.unit[0].name]});t.writeData.unit=c.unit[0];t.writeData.unit.name=c.unit[0].name}t.writeData.numericData=a;var o="",s;var n=l;if(t.oConfig.EVALUATION.SCALING==-2){n*=100;t.getView().oNumericContent.setFormatterValue(false)}o=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(n),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);s=t.getTrendIndicator(r.trendValue,n);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"})}t._updateTileModel({value:o.toString(),indicator:s,valueColor:t.getThresholdsObjAndColor(r).returnColor});t.writeData.data=a;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){r.criticalHighValue=a.results[0][r.sCriticalHigh];r.criticalLowValue=a.results[0][r.sCriticalLow];r.warningHighValue=a.results[0][r.sWarningHigh];r.warningLowValue=a.results[0][r.sWarningLow];r.targetValue=a.results[0][r.sTarget];r.trendValue=a.results[0][r.sTrend]}e.call(t,l,r)}else{i.call(t,"no Response from QueryServiceUri")}},function(e){if(e&&e.response){i.call(t,e.message)}})}catch(e){t.logError("Error in Query Service URI")}}}else if(n.data&&n.data.results&&n.data.results.length){var T,g,h;r=t.setThresholdValues();T=n.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(t.oConfig.EVALUATION.SCALING==-2){T*=100;t.getView().oNumericContent.setFormatterValue(true)}if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"})}g=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(T),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);h=t.getTrendIndicator(r.trendValue,T);if(n.unit){t._updateTileModel({unit:n.data.results[0][n.unit.name]})}t._updateTileModel({indicator:h,value:g.toString()});if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){r.criticalHighValue=n.data.results[0][r.sCriticalHigh];r.criticalLowValue=n.data.results[0][r.sCriticalLow];r.warningHighValue=n.data.results[0][r.sWarningHigh];r.warningLowValue=n.data.results[0][r.sWarningLow];r.targetValue=n.data.results[0][r.sTarget];r.trendValue=n.data.results[0][r.sTrend]}e.call(t,n.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME],r)}else{i.call(t,"no Response from QueryServiceUri")}}catch(e){i.call(t,e)}},flowWithoutDesignTimeCall:function(){var e=this;var i,t;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(l,o){var r=Number(l);if(this.oConfig.EVALUATION.SCALING==-2){r*=100}i=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(r),this.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);this.CALCULATED_KPI_VALUE=Number(l);var s={};var n=this.getThresholdsObjAndColor(o);var u={value:Number(l),color:n.returnColor};s.valueColor=u.color;s.actualValueLabel=i.toString();s.actual=u;var c=this.DEFINITION_DATA.EVALUATION_VALUES,T;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T=Number(o.targetValue);if(this.oConfig.EVALUATION.SCALING==-2){T*=100}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(T,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION);s.targetValue=Number(o.targetValue);s.targetValueLabel=t.toString()}else{for(var g=0;g<c.length;g++){if(c[g].TYPE==="TA"){T=Number(c[g].FIXED);if(this.oConfig.EVALUATION.SCALING==-2){T*=100}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(T);s.targetValue=Number(c[g].FIXED);s.targetValueLabel=t.toString()}}}this._updateTileModel(s);var h=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system);e.oDualDeviationView.oGenericTile.$().wrap("<a href ='"+h+"'></a>");this.oDualDeviationView.oGenericTile.setState(a.Loaded);var E="";if(s.valueColor=="Error"){E="sb.error"}if(s.valueColor=="Neutral"){E="sb.neutral"}if(s.valueColor=="Critical"){E="sb.critical"}if(s.valueColor=="Good"){E="sb.good"}var A={status:E,actual:r,target:o.targetValue,cH:o.criticalHighValue,wH:o.warningHighValue,wL:o.warningLowValue,cL:o.criticalLowValue};var d=A;var C=e.oDualDeviationView.oGenericTile.getTileContent()[0].getContent();var f=e.oDualDeviationView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"NT",A);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(f,"DT",d)},this.logError)}},flowWithDesignTimeCall:function(){var e=this;try{var i=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(i){e.oConfig.EVALUATION_FILTERS=i.EVALUATION_FILTERS;e.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(i){e.oConfig.EVALUATION_FILTERS=i;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()})}}catch(e){this.logError(e)}},refreshHandler:function(e){if(!e.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}}},visibleHandler:function(e){if(!e){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef)}if(e){this.refreshHandler(this)}},setTextInTile:function(){var e=this;var i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:i.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(e.oConfig),subheader:i.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(e.oConfig)})},onInit:function(){var e=this;this.firstTimeVisible=false;this.oDualDeviationView=this.getView();this.oViewData=this.oDualDeviationView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oTileApi.url.getApplicationSystem();this.oDualDeviationView.oGenericTile.setState(a.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(e.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),e.oTileApi.preview.isEnabled(),function(i){e.oConfig=i;e.setTextInTile();if(e.oTileApi.preview){e.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system))}if(e.oTileApi.preview.isEnabled()){e._updateTileModel({valueColor:"Good",value:100,frameType:"TwoByOne",unit:"USD",actual:{value:120,color:l.Good},targetValue:100,thresholds:[{value:0,color:l.Error},{value:50,color:l.Critical},{value:150,color:l.Critical},{value:200,color:l.Error}],showActualValue:true,showTargetValue:true});e.oDualDeviationView.oGenericTile.setState(a.Loaded)}else{e.oDualDeviationView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(e.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system)});if(Number(e.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}}})}catch(e){this.logError(e)}},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new e({}))}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef)}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualDeviation/DualDeviation.view", ["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,t,a,i,l,o,r,u,s,n,c){"use strict";var m=l.Size;var h=l.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualDeviation.DualDeviation",{getControllerName:function(){return"tiles.indicatorDualDeviation.DualDeviation"},createContent:function(){var e=this;this.setHeight("100%");this.setWidth("100%");var t="Lorem ipsum";var a="Lorem ipsum";var i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(i.title&&i.subTitle){t=i.title;a=i.subTitle}var l={subheader:a,header:t,footerNum:"",footerComp:"",frameType:"TwoByOne",state:h.Loading,scale:""};e.oNumericContent=new o({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});e.oNumericTile=new r({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oNumericContent});var p=new u({value:"{value}",color:"{color}"});e.oBCTmpl=new s({size:m.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:p,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});var d=new r({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oBCTmpl});e.oGenericTile=new n({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[e.oNumericTile,d]});var v=new c;v.setData(l);e.oGenericTile.setModel(v);return e.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualTrend/DualTrend.controller", ["sap/ui/model/json/JSONModel","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartItem","sap/m/library","sap/ui/thirdparty/jquery"],function(e,i,t,l,jQuery){"use strict";var a=l.Size;var r=l.ValueColor;var s=l.DeviationIndicator;var o=l.LoadState;sap.ui.controller("tiles.indicatorDualTrend.DualTrend",{logError:function(e){this.oDualTrendView.oGenericTile.setState(o.Failed);this.oDualTrendView.oGenericTile.setState(o.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e)},formSelectStatement:function(e){var i=Object.keys(e);var t="";for(var l=0;l<i.length;l++){if(e[i[l]]!==undefined&&e.fullyFormedMeasure){t+=","+e[i[l]]}}return t},setThresholdValues:function(){var e=this;try{var i={};i.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"MA":i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"RA":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break}}else{i.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","FIXED");i.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","FIXED");i.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","FIXED");i.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","FIXED");i.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","FIXED");i.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","FIXED")}return i}catch(i){e.logError(i)}},getTrendIndicator:function(e,i){var t=this;e=Number(e);try{var l=s.None;if(e>i){l=s.Down}else if(e<i){l=s.Up}return l}catch(e){t.logError(e)}},getTile:function(){return this.oDualTrendView.oGenericTile},getTrendColor:function(e){var i=this;try{var t=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var l=r.Neutral;if(t==="MI"){if(e.criticalHighValue&&e.warningHighValue){e.criticalHighValue=Number(e.criticalHighValue);e.warningHighValue=Number(e.warningHighValue);if(this.CALCULATED_KPI_VALUE<e.warningHighValue){l=r.Good}else if(this.CALCULATED_KPI_VALUE<=e.criticalHighValue){l=r.Critical}else{l=r.Error}}}else if(t==="MA"){if(e.criticalLowValue&&e.warningLowValue){e.criticalLowValue=Number(e.criticalLowValue);e.warningLowValue=Number(e.warningLowValue);if(this.CALCULATED_KPI_VALUE<e.criticalLowValue){l=r.Error}else if(this.CALCULATED_KPI_VALUE<=e.warningLowValue){l=r.Critical}else{l=r.Good}}}else if(e.warningLowValue&&e.warningHighValue&&e.criticalLowValue&&e.criticalHighValue){e.criticalHighValue=Number(e.criticalHighValue);e.warningHighValue=Number(e.warningHighValue);e.warningLowValue=Number(e.warningLowValue);e.criticalLowValue=Number(e.criticalLowValue);if(this.CALCULATED_KPI_VALUE<e.criticalLowValue||this.CALCULATED_KPI_VALUE>e.criticalHighValue){l=r.Error}else if(this.CALCULATED_KPI_VALUE>=e.criticalLowValue&&this.CALCULATED_KPI_VALUE<=e.warningLowValue||this.CALCULATED_KPI_VALUE>=e.warningHighValue&&this.CALCULATED_KPI_VALUE<=e.criticalHighValue){l=r.Critical}else{l=r.Good}}return l}catch(e){i.logError(e)}},_updateTileModel:function(e){var i=this.getTile().getModel().getData();jQuery.extend(i,e);this.getTile().getModel().setData(i)},onAfterFinalEvaluation:function(){var e=this;var l=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var a=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var r=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;var s=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var n=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(n==undefined){this.logError();return}var u=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE,c=this.DEFINITION_DATA.EVALUATION_VALUES,T;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var h=r;switch(u){case"MI":e.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");e.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");if(e.sWarningHigh&&e.sCriticalHigh&&e.sTarget){h+=","+e.sWarningHigh+","+e.sCriticalHigh+","+e.sTarget}break;case"MA":e.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");e.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");if(e.sWarningLow&&e.sCriticalLow&&e.sTarget){h+=","+e.sWarningLow+","+e.sCriticalLow+","+e.sTarget}break;case"RA":e.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");e.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");e.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");e.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");if(e.sWarningLow&&e.sCriticalLow&&e.sTarget&&e.sWarningHigh&&e.sCriticalHigh){h+=","+e.sWarningLow+","+e.sCriticalLow+","+e.sTarget+","+e.sWarningHigh+","+e.sCriticalHigh}break}T=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(e.oTileApi.url.addSystemToServiceUrl(l),a,h,n,s)}else{T=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(e.oTileApi.url.addSystemToServiceUrl(l),a,r,n,s)}var E=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(e.oConfig.TILE_PROPERTIES.id);if(!E){if(T){this.queryUriForTrendChart=T.uri;e.writeData={};try{this.trendChartODataReadRef=T.model.read(T.uri,null,null,true,function(i){if(i&&i.results&&i.results.length){if(T.unit[0]){e.unit=i.results[0][T.unit[0].name];e.writeData.unit=T.unit[0];e.writeData.unit.name=T.unit[0].name}e.queryUriResponseForTrendChart=i;n=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(e.oTileApi.url.addSystemToServiceUrl(l),a,n);i.firstXlabel=i.results[0][n];i.lastXlabel=i.results[i.results.length-1][n];e.writeData.data=i;e.writeData.dimensionName=n;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,e.writeData);var t=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system);e.oDualTrendView.oGenericTile.$().wrap("<a href ='"+t+"'></a>");e.oDualTrendView.oGenericTile.setState(o.Loaded);f(i,e.DEFINITION_DATA.EVALUATION.VALUES_SOURCE)}else{e.logError("no Response from QueryServiceUri")}},function(i){if(i&&i.response){e.logError("Data call failed")}})}catch(i){e.logError(i)}}else{e.logError()}s=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(e.DEFINITION_DATA.EVALUATION_FILTERS,e.DEFINITION_DATA.ADDITIONAL_FILTERS);T=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(e.oTileApi.url.addSystemToServiceUrl(l),a,r,null,s);if(T){e.QUERY_SERVICE_MODEL=T.model;e.queryUriForKpiValue=T.uri;e.numericODataReadRef=e.QUERY_SERVICE_MODEL.read(T.uri,null,null,true,function(i){if(i&&i.results&&i.results.length){var t="";var l=i.results[0][e.DEFINITION_DATA.EVALUATION.COLUMN_NAME];e.writeData.numericData=i;if(e.oConfig.EVALUATION.SCALING==-2){l*=100}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(l),e.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);if(e.oConfig.EVALUATION.SCALING==-2){e._updateTileModel({scale:"%"})}var a=e.getTrendIndicator(e.setThresholdValues().trendValue,l);e._updateTileModel({value:t.toString(),valueColor:e.getTrendColor(e.setThresholdValues()),indicator:a})}else{fnError.call(e,"no Response from QueryServiceUri")}})}}else{try{if(E.unit!==undefined){e.unit=E.data.results[0][E.unit.name]}e.queryUriResponseForTrendChart=E.data;n=E.dimensionName;var g=E.numericData.results[0][e.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var d=e.getTrendIndicator(e.setThresholdValues().trendValue,E.data.results[0][e.DEFINITION_DATA.EVALUATION.COLUMN_NAME]);var A=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(g),e.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);e.oDualTrendView.oGenericTile.setState(o.Loaded);f(E.data,e.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);e._updateTileModel({value:A.toString(),valueColor:e.getTrendColor(e.setThresholdValues()),indicator:d})}catch(i){e.logError(i)}}function f(l,a){var s=[];var o=[];var T=[];var h=[];var E=[];var g=[];var d=l.firstXlabel;var A,f,m,L,C;var N=l.lastXlabel;var p=Number(l.results[0][r]);var I=Number(l.results[l.results.length-1][r]);var U;for(U in l.results){l.results[U][n]=Number(U);l.results[U][r]=Number(l.results[U][r]);if(e.sWarningHigh){l.results[U][e.sWarningHigh]=Number(l.results[U][e.sWarningHigh])}if(e.sCriticalHigh){l.results[U][e.sCriticalHigh]=Number(l.results[U][e.sCriticalHigh])}if(e.sCriticalLow){l.results[U][e.sCriticalLow]=Number(l.results[U][e.sCriticalLow])}if(e.sWarningLow){l.results[U][e.sWarningLow]=Number(l.results[U][e.sWarningLow])}if(e.sTarget){l.results[U][e.sTarget]=Number(l.results[U][e.sTarget])}if(e.sWarningHigh){T.push(l.results[U][e.sWarningHigh])}if(e.sCriticalHigh){h.push(l.results[U][e.sCriticalHigh])}if(e.sCriticalLow){E.push(l.results[U][e.sCriticalLow])}if(e.sWarningLow){g.push(l.results[U][e.sWarningLow])}s.push(l.results[U][n]);o.push(l.results[U][r])}try{d=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(d);N=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(N)}catch(i){e.logError(i)}var V=Number(p);if(e.oConfig.EVALUATION.SCALING==-2){V*=100}var w=Math.min.apply(Math,o);var M=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(V,e.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);if(e.oConfig.EVALUATION.SCALING==-2){M+=" %"}var S=M.toString();var D=Number(I);if(e.oConfig.EVALUATION.SCALING==-2){D*=100}var b=Math.max.apply(Math,o);var v=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(D,e.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);if(e.oConfig.EVALUATION.SCALING==-2){v+=" %"}var R=v.toString();try{var O=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,s));var H=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,s))}catch(i){e.logError(i)}if(a=="MEASURE"){if(T.length!=0){e.firstwH=T[O];e.lastwH=T[H]}if(h.length!=0){e.firstcH=h[O];e.lastcH=h[H]}if(E.length!=0){e.firstcL=E[O];e.lastcL=E[H]}if(g.length!=0){e.firstwL=g[O];e.lastwL=g[H]}}var _={width:"100%",height:"100%",unit:e.unit||"",chart:{color:"Neutral",data:l.results},size:"Auto",minXValue:O,maxXValue:H,minYValue:w,maxYValue:b,firstXLabel:{label:d+"",color:"Neutral"},lastXLabel:{label:N+"",color:"Neutral"},firstYLabel:{label:S+"",color:"Neutral"},lastYLabel:{label:R+"",color:"Neutral"},minLabel:{},maxLabel:{}},F;switch(u){case"MA":for(U in c){if(c[U].TYPE=="CL"){_.minThreshold={color:"Error"};F={};F[n]="";F[r]=Number(c[U].FIXED);e.cl=Number(c[U].FIXED);_.minThreshold.data=a=="MEASURE"?l.results:[F];A=a=="MEASURE"?e.sCriticalLow:r}else if(c[U].TYPE=="WL"){_.maxThreshold={color:"Good"};F={};F[n]="";F[r]=Number(c[U].FIXED);_.maxThreshold.data=a=="MEASURE"?l.results:[F];f=a=="MEASURE"?e.sWarningLow:r;e.wl=Number(c[U].FIXED)}else if(c[U].TYPE=="TA"){F={};F[n]="";F[r]=Number(c[U].FIXED);_.target={color:"Neutral"};_.target.data=a=="MEASURE"?l.results:[F];C=a=="MEASURE"?e.sTarget:r}}_.innerMinThreshold={data:[]};_.innerMaxThreshold={data:[]};if(a=="FIXED"){_.firstYLabel.color=p<e.cl?"Error":e.cl<=p&&p<=e.wl?"Critical":p>e.wl?"Good":"Neutral";_.lastYLabel.color=I<e.cl?"Error":e.cl<=I&&I<=e.wl?"Critical":I>e.wl?"Good":"Neutral"}else if(a=="MEASURE"&&e.firstwL&&e.lastwL&&e.firstcL&&e.lastcL){_.firstYLabel.color=p<e.firstcL?"Error":e.firstcL<=p&&p<=e.firstwL?"Critical":p>e.firstwL?"Good":"Neutral";_.lastYLabel.color=I<e.lastcL?"Error":e.lastcL<=I&&I<=e.lastwL?"Critical":I>e.lastwL?"Good":"Neutral"}break;case"MI":for(U in c){if(c[U].TYPE=="CH"){F={};F[n]="";F[r]=Number(c[U].FIXED);e.ch=Number(c[U].FIXED);_.maxThreshold={color:"Error"};_.maxThreshold.data=a=="MEASURE"?l.results:[F];f=a=="MEASURE"?e.sCriticalHigh:r}else if(c[U].TYPE=="WH"){F={};F[n]="";F[r]=Number(c[U].FIXED);e.wh=Number(c[U].FIXED);_.minThreshold={color:"Good"};_.minThreshold.data=a=="MEASURE"?l.results:[F];A=a=="MEASURE"?e.sWarningHigh:r}else if(c[U].TYPE=="TA"){F={};F[n]="";F[r]=Number(c[U].FIXED);_.target={color:"Neutral"};_.target.data=a=="MEASURE"?l.results:[F];C=a=="MEASURE"?e.sTarget:r}}if(a=="FIXED"){_.firstYLabel.color=p>e.ch?"Error":e.wh<=p&&p<=e.ch?"Critical":p<e.wh?"Good":"Neutral";_.lastYLabel.color=I>e.ch?"Error":e.wh<=I&&I<=e.ch?"Critical":I<e.wh?"Good":"Neutral"}else if(a=="MEASURE"&&e.firstwH&&e.lastwH&&e.firstcH&&e.lastcH){_.firstYLabel.color=p>e.firstcH?"Error":e.firstwH<=p&&p<=e.firstcH?"Critical":p<e.firstwH?"Good":"Neutral";_.lastYLabel.color=I>e.lastcH?"Error":e.lastwH<=I&&I<=e.lastcH?"Critical":I<e.lastwH?"Good":"Neutral"}_.innerMaxThreshold={data:[]};_.innerMinThreshold={data:[]};break;case"RA":for(U in c){if(c[U].TYPE=="CH"){F={};F[n]="";F[r]=Number(c[U].FIXED);e.ch=Number(c[U].FIXED);_.maxThreshold={color:"Error"};_.maxThreshold.data=a=="MEASURE"?l.results:[F];f=a=="MEASURE"?e.sCriticalHigh:r}else if(c[U].TYPE=="WH"){F={};F[n]="";F[r]=Number(c[U].FIXED);e.wh=Number(c[U].FIXED);_.innerMaxThreshold={color:"Good"};_.innerMaxThreshold.data=a=="MEASURE"?l.results:[F];L=a=="MEASURE"?e.sWarningHigh:r}else if(c[U].TYPE=="WL"){F={};F[n]="";F[r]=Number(c[U].FIXED);e.wl=Number(c[U].FIXED);_.innerMinThreshold={color:"Good"};_.innerMinThreshold.data=a=="MEASURE"?l.results:[F];m=a=="MEASURE"?e.sWarningLow:r}else if(c[U].TYPE=="CL"){F={};F[n]="";F[r]=Number(c[U].FIXED);e.cl=Number(c[U].FIXED);_.minThreshold={color:"Error"};_.minThreshold.data=a=="MEASURE"?l.results:[F];A=a=="MEASURE"?e.sCriticalLow:r}else if(c[U].TYPE=="TA"){F={};F[n]="";F[r]=Number(c[U].FIXED);_.target={color:"Neutral"};_.target.data=a=="MEASURE"?l.results:[F];C=a=="MEASURE"?e.sTarget:r}}if(a=="FIXED"){_.firstYLabel.color=p>e.ch||p<e.cl?"Error":e.wh<=p&&p<=e.ch||e.cl<=p&&p<=e.wl?"Critical":p>=e.wl&&p<=e.wh?"Good":"Neutral";_.lastYLabel.color=I>e.ch||I<e.cl?"Error":e.wh<=I&&I<=e.ch||e.cl<=I&&I<=e.wl?"Critical":I>=e.wl&&I<=e.wh?"Good":"Neutral"}else if(a=="MEASURE"&&e.firstwL&&e.lastwL&&e.firstcL&&e.lastcL&&e.firstwH&&e.lastwH&&e.firstcH&&e.lastcH){_.firstYLabel.color=p>e.firstcH||p<e.firstcL?"Error":e.firstwH<=p&&p<=e.firstcH||e.firstcL<=p&&p<=e.firstwL?"Critical":p>=e.firstwL&&p<=e.firstwH?"Good":"Neutral";_.lastYLabel.color=I>e.lastcH||I<e.lastcL?"Error":e.lastwH<=I&&I<=e.lastcH||e.lastcL<=I&&I<=e.lastwL?"Critical":I>=e.lastwL&&I<=e.lastwH?"Good":"Neutral"}break}var y=function(e,l,a){return new t({color:"{/"+e+"/color}",points:{path:"/"+e+"/data",template:new i({x:"{"+l+"}",y:"{"+a+"}"})}})};e.getTile().getTileContent()[1].getContent().setTarget(y("target",n,C));e.getTile().getTileContent()[1].getContent().setInnerMinThreshold(y("innerMinThreshold",n,m));e.getTile().getTileContent()[1].getContent().setInnerMaxThreshold(y("innerMaxThreshold",n,L));e.getTile().getTileContent()[1].getContent().setMinThreshold(y("minThreshold",n,A));e.getTile().getTileContent()[1].getContent().setMaxThreshold(y("maxThreshold",n,f));e.getTile().getTileContent()[1].getContent().setChart(y("chart",n,r));e._updateTileModel(_)}},flowWithoutDesignTimeCall:function(){this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true}this.onAfterFinalEvaluation()},flowWithDesignTimeCall:function(){var e=this;try{var i=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(i){e.oConfig.EVALUATION_FILTERS=i.EVALUATION_FILTERS;e.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(i){e.oConfig.EVALUATION_FILTERS=i;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()})}}catch(e){this.logError(e)}},refreshHandler:function(e){if(!e.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}}},visibleHandler:function(e){if(!e){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef)}if(e){this.refreshHandler(this)}},setTextInTile:function(){var e=this;this._updateTileModel({header:e.oTileApi.preview.getTitle()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(e.oConfig),subheader:e.oTileApi.preview.getDescription()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(e.oConfig)})},onInit:function(){var e=this;this.firstTimeVisible=false;this.oDualTrendView=this.getView();this.oViewData=this.oDualTrendView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oTileApi.url.getApplicationSystem();this.oDualTrendView.oGenericTile.setState(o.Loading);if(this.oTileApi.preview.isEnabled()){this.setTextInTile();this._updateTileModel({value:8888,size:a.Auto,frameType:"TwoByOne",state:o.Loading,valueColor:r.Error,indicator:s.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});this.oDualTrendView.oGenericTile.setState(o.Loaded)}else{try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),function(i){e.oConfig=i;e.setTextInTile();e.oDualTrendView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(e.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system)});if(Number(e.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}})}catch(e){this.logError(e)}}},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new e({}))}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef)}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualTrend/DualTrend.view", ["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/suite/ui/microchart/AreaMicroChart","sap/m/TileContent","sap/m/NumericContent","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,a,i,t,r,n,l,s,o,u,c,h){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualTrend.DualTrend",{getControllerName:function(){return"tiles.indicatorDualTrend.DualTrend"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e=function(e){return new r({color:"Good",points:{path:"/"+e+"/data",template:new n({x:"{day}",y:"{balance}"})}})};var a=function(e){return new l({label:"{/"+e+"/label}",color:"{/"+e+"/color}"})};var i={footer:"",header:"",subheader:""};var t=new s({width:"{/width}",height:"{/height}",size:"{/size}",target:e("target"),innerMinThreshold:e("innerMinThreshold"),innerMaxThreshold:e("innerMaxThreshold"),minThreshold:e("minThreshold"),maxThreshold:e("maxThreshold"),chart:e("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:a("firstXLabel"),lastXLabel:a("lastXLabel"),firstYLabel:a("firstYLabel"),lastYLabel:a("lastYLabel"),minLabel:a("minLabel"),maxLabel:a("maxLabel")});var m=new o({unit:"{/unit}",size:"{/size}",content:t});var d=new u({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});var b=new o({unit:"{/unit}",size:"{/size}",content:d});this.oGenericTile=new c({subheader:"{/subheader}",frameType:"TwoByOne",size:"{/size}",header:"{/header}",tileContent:[b,m]});var p=new h;p.setData(i);this.oGenericTile.setModel(p);return this.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorHarveyBall/HarveyBallTile.controller", ["sap/ui/model/json/JSONModel","sap/suite/ui/commons/library"],function(e,t){"use strict";var a=t.InfoTileValueColor;var i=t.InfoTileSize;var r=t.LoadState;sap.ui.controller("tiles.indicatorHarveyBall.HarveyBallTile",{onInit:function(){this.getView().setModel(new e);this.initializeVariables();this.attachHandlers();this.getVariable("tile").setState(r.Loading);this.readChipConfiguration()},attachHandlers:function(){var e=this;var t=this.getVariable("chip");if(t.visible){t.visible.attachVisible(function(t){if(t){e.onVisible()}else{e.abortAllOpenODataRequests()}})}this.getVariable("tile").attachPress(function(){e.abortAllOpenODataRequests();var t=e.getVariable("indicatorUtils");e.getVariable("cache").setKpivalueById(e.getVariable("chipId"),null);window.location.hash=t.getNavigationTarget(e.getVariable("evalData"),e.getVariable("system"))})},initializeVariables:function(){this._variables={};this._oDataRequests={};var e=this.getView();var t=e.getViewData();var a=e.oTile;var i=t.chip;this.setVariable("indicatorUtils",sap.ushell.components.tiles.indicatorTileUtils.util);this.setVariable("cache",sap.ushell.components.tiles.indicatorTileUtils.cache);this.setVariable("hasAppeared",false);this.setVariable("chip",i);this.setVariable("tile",a);this.setVariable("tileControl",a.getTileContent()[0].getContent());this.setVariable("configurationString",i.configuration.getParameterValueAsString("tileConfiguration"));this.setVariable("system",i.url.getApplicationSystem())},getVariable:function(e){return this._variables[e]},setVariable:function(e,t){this._variables[e]=t},readChipConfiguration:function(){var e=this;var t=this.getVariable("chip");var a=this.getVariable("indicatorUtils");a.getParsedChip(this.getVariable("configurationString"),function(i){e.setVariable("evalData",i);e.setVariable("chipId",i.TILE_PROPERTIES.id);e.setVariable("tileProperties",i.TILE_PROPERTIES);if(t.preview){t.preview.setTargetUrl(a.getNavigationTarget(i,e.getVariable("system")));e.loadPreviewData();if(t.preview.isEnabled()){e.getVariable("tile").setState(r.Loaded)}else{e.loadActualData()}}})},loadPreviewData:function(){var e=this.getVariable("indicatorUtils").getTileTitleSubtitle(this.getVariable("chip"));this.getView().getModel().setData({fractionValue:34,value:100,size:i.Auto,frameType:"OneByOne",color:"Good",state:r.Loading,header:e.title||this.getVariable("indicatorUtils").getChipTitle(this.getVariable("evalData")),subheader:e.subTitle||this.getVariable("indicatorUtils").getChipSubTitle(this.getVariable("evalData"))})},loadActualData:function(){if(Number(this.getVariable("chip").configuration.getParameterValueAsString("isSufficient"))){this.getVariable("cache").setEvaluationById(this.getVariable("chipId"),this.getVariable("evalData"));this.onEvalFiltersFetched()}else{this.fetchEvalFilters(this.onEvalFiltersFetched)}},registerOpenODataRequest:function(e,t){this._oDataRequests[e]=t},deregisterOpenODataRequest:function(e){delete this._oDataRequests[e]},abortAllOpenODataRequests:function(){for(var e in this._oDataRequests){try{this.getVariable("indicatorUtils").abortPendingODataCalls(this._oDataRequests[e]);delete this._oDataRequests[e]}catch(e){}}},fetchKpiValue:function(e){function t(e,t,i,r,l){var s=e.read(t,null,null,true,function(e){a.deregisterOpenODataRequest(i.type);if(e&&e.results&&e.results.length){try{if(i.thresholds&&i.thresholds.length){a._setThresholdValues(e.results[0])}b[i.type]=e.results[0][i.measure];b.unit=b.unit||e.results[0][i.unit]||"";if(--v==0){a.getVariable("cache").setKpivalueById(a.getVariable("chipId"),b);r.call(a,b)}}catch(e){a.logError(e)}}else{l.call(a,"no data")}},function(e){a.deregisterOpenODataRequest(i.type);if(e&&e.response){l.call(a,e.message)}});a.registerOpenODataRequest(i.type,s)}var a=this;var i=this.getVariable("indicatorUtils");var r=this.getVariable("cache").getKpivalueById(this.getVariable("chipId"));if(r){e.fnS.call(a,r)}else{var l=e.measure1,s=e.measure2;var o=e.url,n=e.entitySet;var h=e.filters;var u=e.fractionFilters.concat(h);var c,V;var g,f,b;var v=2;u.forEach(function(e){e.value=e.value+"";e.valueTo=e.valueTo+""});if(e.thresholds&&e.thresholds.length){c=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(o),n,l+","+e.thresholds,null,h)}else{c=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(o),n,l,null,h)}V=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(o),n,s,null,u);g=c.unit[0];f=V.unit[0];b={kpiValue:null,fractionValue:null,unit:""};if(c){t(c.model,c.uri,{measure:l,type:"kpiValue",unit:g,thresholds:e.thresholds},e.fnS,e.fnE)}if(V){t(V.model,V.uri,{measure:s,type:"fractionValue",unit:f},e.fnS,e.fnE)}if(!(c&&V)){e.fnE.call(a,"Error Preparing Query Service URI")}}},_setThresholdValues:function(e){var t=this.getVariable("oThreshold"),a;if(t){if(this.getVariable("evalData").EVALUATION.VALUES_SOURCE=="RELATIVE"){if(t.TA.COLUMN_NAME){t.TA.VALUE=parseFloat(e[t.TA.COLUMN_NAME]);for(a in t){if(!t[a].COLUMN_NAME){t[a].VALUE=t.TA.VALUE*t[a].VALUE/100}}}}else{for(a in t){if(t[a].COLUMN_NAME){t[a].VALUE=parseFloat(e[t[a].COLUMN_NAME])}}}}this.setVariable("oThreshold",t)},getThresholdObject:function(){var e=this.getVariable("oThreshold");if(!e){var t=this.getVariable("evalData").EVALUATION_VALUES;e={};for(var a=0,i=t.length;a<i;a++){e[t[a].TYPE]={VALUE:parseFloat(t[a].FIXED),COLUMN_NAME:t[a].COLUMN_NAME}}this.setVariable("oThreshold",e)}return e},hasSomeValue:function(){var e=true;if(arguments.length){for(var t=0,a=arguments.length;t<a;t++){if(!(arguments[t]||arguments[t]=="0")){e=false;break}}}else{e=false}return e},getTrendColor:function(e){var t="Neutral";var i,r,l,s,o,n;if(this.getVariable("tileProperties").isFractionMeasure){i=this.getThresholdObject();r=this.getVariable("evalData").EVALUATION.GOAL_TYPE;if(r=="MA"){l=i.WL;o=i.CL;if(this.hasSomeValue(l,o)){t="Good";if(e<o.VALUE){t="Error"}else if(e<=l.VALUE){t="Critical"}}}else if(r=="MI"){s=i.WH;n=i.CH;if(this.hasSomeValue(s,n)){t="Error";if(e<s.VALUE){t="Good"}else if(e<=n.VALUE){t="Critical"}}}else{l=i.WL;o=i.CL;s=i.WH;n=i.CH;if(this.hasSomeValue(s,n,o,l)){if(e<=o.VALUE||e>=s.VALUE){t="Error"}else if(l.VALUE>=e&&e>=o.VALUE||n.VALUE>=e&&e>=s.VALUE){t="Critical"}else{t="Good"}}}}return a[t]},_getThresholdMeasures:function(){var e=[];var t=this.getThresholdObject();for(var a in t){if(t[a].COLUMN_NAME){e.push(t[a].COLUMN_NAME)}}return e},onEvalFiltersFetched:function(){var e=this;if(this.getVariable("chip").visible.isVisible()&&!this.getVariable("hasAppeared")){try{var t=this.getVariable("evalData");var a=t.EVALUATION.ODATA_URL;var i=t.EVALUATION.ODATA_ENTITYSET;var r=this.getVariable("tileProperties");var l=[];var s=this.getVariable("indicatorUtils").prepareFilterStructure(t.EVALUATION_FILTERS,t.ADDITIONAL_FILTERS);var o=t.EVALUATION.COLUMN_NAME;var n=o;var h=[];if(r.isFractionMeasure){n=r.harveyTotalMeasure;h=this._getThresholdMeasures()}else{l=this.getVariable("indicatorUtils").prepareFilterStructure(r.harveyFilters||l)}this.setVariable("totalMeasure",n);this.setVariable("fractionMeasure",o);this.fetchKpiValue({measure1:n,measure2:o,entitySet:i,thresholds:h,url:a,filters:s,fractionFilters:l,fnS:function(t){t.kpiValue=Number(t.kpiValue);t.fractionValue=Number(t.fractionValue);e.setVariable("kpiValue",t.kpiValue);e.setVariable("fractionValue",t.fractionValue);e.onKpiValueFetched(t.kpiValue,t.unit,t.fractionValue)},fnE:this.logError});e.setVariable("hasAppeared",true)}catch(e){this.logError(e)}}},fetchEvalFilters:function(e){var t=this;try{var a=this.getVariable("cache").getEvaluationById(this.getVariable("chipId"));if(a){this.getVariable("evalData").EVALUATION_FILTERS=a.EVALUATION_FILTERS;e()}else{var i=this.getVariable("indicatorUtils").getFilterFromRunTimeService(this.getVariable("evalData"),function(a){t.deregisterOpenODataRequest("kpiFilterRequest");t.getVariable("evalData").EVALUATION_FILTERS=a;t.getVariable("cache").setEvaluationById(t.getVariable("chipId"),t.getVariable("evalData"));e.call(t)},function(e){this.logError(e);t.deregisterOpenODataRequest("kpiFilterRequest")});this.registerOpenODataRequest("kpiFilterRequest",i)}}catch(e){this.logError(e)}},onKpiValueFetched:function(e,t,a,i){var l=this.getVariable("indicatorUtils");var s=e;var o=a;var n=this.getVariable("evalData");var h=n.EVALUATION.SCALING;if(h==-2){s*=100;o*=100}var u=this.isACurrencyMeasure(this.getVariable("totalMeasure"));s=l.getLocaleFormattedValue(Number(s),h,null,u,t);u=this.isACurrencyMeasure(this.getVariable("fractionMeasure"));o=l.getLocaleFormattedValue(Number(o),h,null,u,t);this.getView().getModel().setProperty("/totalLabel",s+" "+t);this.getView().getModel().setProperty("/fractionLabel",o+" "+i);this.getView().getModel().setProperty("/color",this.getTrendColor(a));this.getView().getModel().setProperty("/value",e);this.getView().getModel().setProperty("/fractionValue",a);var c=l.getNavigationTarget(this.getVariable("evalData"),this.getVariable("system"));this.getVariable("tile").$().wrap("<a href ='"+c+"'></a>");this.getVariable("tile").setState(r.Loaded)},logError:function(e){this.getVariable("tile").setState(r.Failed);this.getVariable("indicatorUtils").logError(e,this.getVariable("tile"))},onVisible:function(){if(!this.getVariable("hasAppeared")){if(Number(this.getVariable("chip").configuration.getParameterValueAsString("isSufficient"))){this.onEvalFiltersFetched()}else{this.fetchEvalFilters(this.onEvalFiltersFetched)}}},onExit:function(){this.abortAllOpenODataRequests()}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorTileUtils/cache", [],function(){"use strict";var n={};var t={};var e="HANA_CLIENT";return{getCacheHanaClient:function(){return n[e]},setCacheHanaClient:function(t){n[e]=t},getEvaluationByChipId:function(t){if(n[t]){return n[t]}return null},getEvaluationById:function(n){return this.getEvaluationByChipId(n)},setEvaluationById:function(t,e){n[t]=e},getFrontEndCacheDeferredObject:function(t){if(n[t]){return n[t]}return null},setFrontEndCacheDefferedObject:function(t,e){n[t]=e},getKpivalueById:function(n){if(t[n]){return t[n]}return null},setKpivalueById:function(n,e){t[n]=e}}},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorTileUtils/indicatorTileHelper", [],function(){"use strict";var t=function(t){this.tile=t};t.prototype.setErrorState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Failed)};t.prototype.setLoadingState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loading)};t.prototype.setLoadedState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loaded)};t.prototype.setTrendDown=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Down)};t.prototype.setTrendUp=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Up)};t.prototype.setTrendNeutral=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.None)};t.prototype.setThresholdGood=function(){};t.prototype.setThresholdBad=function(){};t.prototype.setThresholdCritical=function(){};t.prototype.setThresholdNeutral=function(){};t.prototype.calculateThreshold=function(){};t.prototype.setTile=function(t){this.tile=t};t.prototype.getTile=function(){return this.tile};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics", ["sap/ui/model/odata/ODataModel","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/core/Core"],function(e,t,i,n){"use strict";sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants={};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE="http://www.sap.com/Protocols/SAPData";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.VERSION="0.7";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper={renderPropertyKeyValue:function(e,t){if(e.charAt(0)=="'"){throw"Illegal property value starting with a quote"}switch(t){case"Edm.String":return"'"+e+"'";case"Edm.DateTime":return"datetime'"+e+"'";case"Edm.Guid":return"guid'"+e+"'";case"Edm.Time":return"time'"+e+"'";case"Edm.DateTimeOffset":return"datetimeoffset'"+e+"'";default:return e}},renderPropertyFilterValue:function(e,t){if(e.charAt(0)=="'"){throw"Illegal property value starting with a quote"}switch(t){case"Edm.String":return"'"+e+"'";case"Edm.DateTime":return"datetime'"+e+"'";case"Edm.Guid":return"guid'"+e+"'";case"Edm.Time":return"time'"+e+"'";case"Edm.DateTimeOffset":return"datetimeoffset'"+e+"'";default:return e}},tokenizeNametoLabelText:function(e){var t="";t=e.replace(/([^A-Z0-9_]+)([A-Z0-9_])/g,"$1 $2");t=t.replace(/([A-Z0-9_]{2,})([A-Z0-9_])([^A-Z0-9_]+)/g,"$1 $2$3");t=t.replace(/(.*) _E$/,"$1");t=t.replace(/(.*) _(.*)/g,"$1 $2");return t}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByURI=function(e){return{sServiceURI:e}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByModel=function(e){return{oModel:e}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceWithWorkaround=function(e,t){return{oModelReference:e,aWorkaroundID:t}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.prototype={_init:function(t,i){this._oActivatedWorkarounds={};if(t&&t.aWorkaroundID){var n=t.aWorkaroundID;for(var r=0;r<n.length;r++){this._oActivatedWorkarounds[n[r]]=true}t=t.oModelReference}if(!t||!t.sServiceURI&&!t.oModel){throw"Usage with oModelReference being an instance of Model.ReferenceByURI or Model.ReferenceByModel"}if(t.oModel){this._oModel=t.oModel}else{this._oModel=new e(t.sServiceURI)}if(this._oModel.getServiceMetadata().dataServices==undefined){throw"Model could not be loaded"}this.mergeV2Annotations(i);this._oQueryResultSet={};this._oParameterizationSet={};this._oEntityTypeSet={};this._oEntitySetSet={};this._oEntityTypeNameToEntitySetMap={};var a=this._oModel.getServiceMetadata().dataServices.schema[0];var o;for(r=-1,o;o=a.entityContainer[++r];){if(o.isDefaultEntityContainer=="true"){this._oDefaultEntityContainer=o;break}}var s=a.entityType;var l=[],u=[],p=[];var y;for(r=-1,b;b=s[++r];){var h=false;if(b.extensions!=undefined){var c;for(y=-1;c=b.extensions[++y];){if(c.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE&&c.name=="semantics"){h=true;switch(c.value){case"aggregate":l.push(b);break;case"parameters":u.push(b);break;default:p.push(b)}}if(h){continue}}if(!h){p.push(b)}}else{p.push(b)}}for(r=-1,b;b=p[++r];){var m=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),a,b);this._oEntityTypeSet[m.getQName()]=m;var d=this._getEntitySetsOfType(a,m.getQName());if(d.length==0){throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics"}if(d.length>1){throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics"}var f=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),a,d[0][0],d[0][1]);this._oEntitySetSet[f.getQName()]=f;this._oEntityTypeNameToEntitySetMap[m.getQName()]=f}var _={};for(r=-1,b;b=u[++r];){m=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),a,b);this._oEntityTypeSet[m.getQName()]=m;d=this._getEntitySetsOfType(a,m.getQName());if(d.length==0){throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics"}if(d.length>1){throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics"}f=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),a,d[0][0],d[0][1]);this._oEntitySetSet[f.getQName()]=f;this._oEntityTypeNameToEntitySetMap[m.getQName()]=f;var g=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization(m,f);this._oParameterizationSet[g.getName()]=g;_[m.getQName()]=g;var v=m.getQName();if(a.association!=undefined){var P;for(y=-1;P=a.association[++y];){if(P.referentialConstraint==undefined){continue}var S=null;if(P.end[0].type==v&&P.end[0].multiplicity=="*"&&P.end[1].multiplicity=="1"){S=P.end[1].type}else if(P.end[1].type==v&&P.end[1].multiplicity=="*"&&P.end[0].multiplicity=="1"){S=P.end[0].type}if(!S){continue}if(P.referentialConstraint.dependent.propertyRef.length!=1){continue}var T=g.findParameterByName(P.referentialConstraint.dependent.propertyRef[0].name);if(T==null){continue}var E=this._oEntityTypeSet[S];var N=this._oEntityTypeNameToEntitySetMap[S];T.setValueSetEntity(E,N)}}}var b;for(r=-1,b;b=l[++r];){m=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),a,b);this._oEntityTypeSet[m.getQName()]=m;var R=m.getQName();g=null;var x=null;if(a.association!=undefined){for(y=-1,P;P=a.association[++y];){var A=null;if(P.end[0].type==R){A=P.end[1].type}else if(P.end[1].type==R){A=P.end[0].type}else{continue}var U=null;U=_[A];if(U!=null){if(g!=null){throw"RESTRICTION: Unable to handle multiple parameter entity types of query entity "+m.name}else{g=U;x=P}}}}d=this._getEntitySetsOfType(a,m.getQName());if(d.length!=1){throw"Invalid consumption model: There must be exactly one entity set for an entity type annotated with aggregating semantics"}f=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),a,d[0][0],d[0][1]);this._oEntitySetSet[f.getQName()]=f;this._oEntityTypeNameToEntitySetMap[m.getQName()]=f;var M=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult(this,m,f,g);this._oQueryResultSet[M.getName()]=M;if(g){g.setTargetQueryResult(M,x)}}},oUI5ODataModelAnnotatableObject:{objectName:"schema",keyPropName:"namespace",extensions:true,aSubObject:[{objectName:"entityType",keyPropName:"name",extensions:true,aSubObject:[{objectName:"property",keyPropName:"name",aSubObject:[],extensions:true}]},{objectName:"entityContainer",keyPropName:"name",extensions:false,aSubObject:[{objectName:"entitySet",keyPropName:"name",extensions:true,aSubObject:[]}]}]},mergeV2Annotations:function(e){try{var t=JSON.parse(e)}catch(e){return}var i;try{i=this._oModel.getServiceMetadata().dataServices}catch(e){return}for(var n in t){if(!(this.oUI5ODataModelAnnotatableObject.objectName===n)){continue}if(!(t[n]instanceof Array)){continue}this.mergeV2AnnotationLevel(i[this.oUI5ODataModelAnnotatableObject.objectName],t[this.oUI5ODataModelAnnotatableObject.objectName],this.oUI5ODataModelAnnotatableObject);break}return},mergeV2AnnotationLevel:function(e,t,i){for(var n=-1,r;r=t[++n];){for(var a=-1,o;o=e[++a];){if(!(r[i.keyPropName]==o[i.keyPropName])){continue}if(r.extensions!=undefined){if(o.extensions==undefined){o.extensions=[]}for(var s=-1,l;l=r.extensions[++s];){var u=false;for(var p=-1,y;y=o.extensions[++p];){if(l.name==y.name&&l.namespace==y.namespace){y.value=l.value;u=true;break}}if(!u){o.extensions.push(l)}}}for(var h=-1,c;c=i.aSubObject[++h];){for(var m in r){if(!(c.objectName==m)){continue}if(!(r[c.objectName]instanceof Array)){continue}if(o[c.objectName]==undefined||!(o[c.objectName]instanceof Array)){continue}this.mergeV2AnnotationLevel(o[c.objectName],r[c.objectName],c);break}}}}return},findQueryResultByName:function(e){var t=this._oQueryResultSet[e];if(!t&&this._oDefaultEntityContainer){var i=this._oDefaultEntityContainer.name+"."+e;t=this._oQueryResultSet[i]}return t},getAllQueryResultNames:function(){if(this._aQueryResultNames){return this._aQueryResultNames}this._aQueryResultNames=new Array(0);for(var e in this._oQueryResultSet){this._aQueryResultNames.push(this._oQueryResultSet[e].getName())}return this._aQueryResultNames},getAllQueryResults:function(){return this._oQueryResultSet},getODataModel:function(){return this._oModel},_getEntitySetsOfType:function(e,t){var i=[];for(var n=-1,r;r=e.entityContainer[++n];){for(var a=-1,o;o=r.entitySet[++a];){if(o.entityType==t){i.push([r,o])}}}return i},_oModel:null,_oDefaultEntityContainer:null,_aQueryResultNames:null,_oQueryResultSet:null,_oParameterizationSet:null,_oEntityTypeSet:null,_oEntitySetSet:null,_oEntityTypeNameToEntitySetMap:null,_oActivatedWorkarounds:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult=function(e,t,i,n){this._init(e,t,i,n)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult.prototype={_init:function(e,t,i,n,r){this._oModel=e;this._oEntityType=t;this._oEntitySet=i;this._oParameterization=n;this._oDimensionSet={};this._oMeasureSet={};var a=t.getTypeDescription().property;var o={};for(var s=-1,l;l=a[++s];){if(l.extensions==undefined){continue}for(var u=-1,p;p=l.extensions[++u];){if(!p.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(p.name){case"aggregation-role":switch(p.value){case"dimension":var y=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension(this,l);this._oDimensionSet[y.getName()]=y;break;case"measure":var h=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure(this,l);this._oMeasureSet[h.getName()]=h;break;case"totaled-properties-list":this._oTotaledPropertyListProperty=l;break}break;case"attribute-for":var c=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute(this,l);o[c.getKeyProperty()]=c;break}}}for(var m in o){c=o[m];c.getDimension().addAttribute(c)}if(e._oActivatedWorkarounds.IdentifyTextPropertiesByName){var d=[];for(var f in this._oDimensionSet){y=this._oDimensionSet[f];if(!y.getTextProperty()){var _=null;_=t.findPropertyByName(f+"Name");if(!_){_=t.findPropertyByName(f+"Text")}if(!_){_=t.findPropertyByName(f+"Desc")}if(!_){_=t.findPropertyByName(f+"Description")}if(_){y.setTextProperty(_);d.push(_.name)}}}var g;for(s=-1,g;g=d[++s];){delete this._oDimensionSet[g]}}},getName:function(){return this.getEntitySet().getQName()},getParameterization:function(){return this._oParameterization},getAllDimensionNames:function(){if(this._aDimensionNames){return this._aDimensionNames}this._aDimensionNames=[];for(var e in this._oDimensionSet){this._aDimensionNames.push(this._oDimensionSet[e].getName())}return this._aDimensionNames},getAllDimensions:function(){return this._oDimensionSet},getAllMeasureNames:function(){if(this._aMeasureNames){return this._aMeasureNames}this._aMeasureNames=[];for(var e in this._oMeasureSet){this._aMeasureNames.push(this._oMeasureSet[e].getName())}return this._aMeasureNames},getAllMeasures:function(){return this._oMeasureSet},findDimensionByName:function(e){return this._oDimensionSet[e]},getTotaledPropertiesListProperty:function(){return this._oTotaledPropertyListProperty},findMeasureByName:function(e){return this._oMeasureSet[e]},getModel:function(){return this._oModel},getEntityType:function(){return this._oEntityType},getEntitySet:function(){return this._oEntitySet},_oModel:null,_oEntityType:null,_oEntitySet:null,_oParameterization:null,_aDimensionNames:null,_oDimensionSet:null,_aMeasureNames:null,_oMeasureSet:null,_oTotaledPropertyListProperty:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization.prototype={_init:function(e,t){this._oEntityType=e;this._oEntitySet=t;this._oParameterSet={};var i=e.getTypeDescription().property;for(var n=-1,r;r=i[++n];){if(r.extensions==undefined){continue}for(var a=-1,o;o=r.extensions[++a];){if(!o.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(o.name){case"parameter":var s=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter(this,r);this._oParameterSet[s.getName()]=s;break}}}},setTargetQueryResult:function(e,t){this._oQueryResult=e;var i=this._oEntityType.getSchema().namespace+"."+t.name;var n=this._oEntityType.getTypeDescription().navigationProperty;if(!n){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type"}for(var r=-1,a;a=n[++r];){if(a.relationship==i){this._oNavPropToQueryResult=a.name}}if(!this._oNavPropToQueryResult){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type"}},getName:function(){return this.getEntitySet().getQName()},getAllParameterNames:function(){if(this._aParameterNames){return this._aParameterNames}this._aParameterNames=[];for(var e in this._oParameterSet){this._aParameterNames.push(this._oParameterSet[e].getName())}return this._aParameterNames},getAllParameters:function(){return this._oParameterSet},findParameterByName:function(e){return this._oParameterSet[e]},getNavigationPropertyToQueryResult:function(){return this._oNavPropToQueryResult},getEntityType:function(){return this._oEntityType},getEntitySet:function(){return this._oEntitySet},_oEntityType:null,_oEntitySet:null,_oQueryResult:null,_oNavPropToQueryResult:null,_aParameterNames:null,_oParameterSet:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter.prototype={_init:function(e,t){this._oParameterization=e;this._oProperty=t;var i=e.getEntityType();if(t.extensions!=undefined){for(var n=-1,r;r=t.extensions[++n];){if(!r.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(r.name){case"parameter":switch(r.value){case"mandatory":this._bRequired=true;break;case"optional":this._bRequired=false;break;default:throw"Invalid annotation value for parameter property"}break;case"label":this._sLabelText=r.value;break;case"text":this._oTextProperty=i.findPropertyByName(r.value);break;case"upper-boundary":this._bIntervalBoundaryParameter=true;this._oUpperIntervalBoundaryParameterProperty=i.findPropertyByName(r.value);break;case"lower-boundary":this._bIntervalBoundaryParameter=true;this._oLowerIntervalBoundaryParameterProperty=i.findPropertyByName(r.value);break}}}if(!this._sLabelText){this._sLabelText=""}},setValueSetEntity:function(e,t){this._oValueSetEntityType=e;this._oValueSetEntitySet=t},getTextProperty:function(){return this._oTextProperty},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName())}return this._sLabelText},isOptional:function(){return!this._bRequired},isIntervalBoundary:function(){return this._bIntervalBoundaryParameter},isLowerIntervalBoundary:function(){return!!this._oUpperIntervalBoundaryParameterProperty},getPeerIntervalBoundaryParameter:function(){var e=null;if(this._oLowerIntervalBoundaryParameterProperty){e=this._oLowerIntervalBoundaryParameterProperty.name}else{e=this._oUpperIntervalBoundaryParameterProperty.name}if(!e){throw"Parameter is not an interval boundary"}return this._oParameterization.findParameterByName(e)},isValueSetAvailable:function(){return!!this._oValueSetEntityType},getName:function(){return this._oProperty.name},getProperty:function(){return this._oProperty},getContainingParameterization:function(){return this._oParameterization},getURIToValueEntitySet:function(e){var t=null;t=(e||"")+"/"+this._oValueSetEntitySet.getQName();return t},_oParameterization:null,_oProperty:null,_sLabelText:null,_oTextProperty:null,_bRequired:false,_bIntervalBoundaryParameter:false,_oLowerIntervalBoundaryParameterProperty:null,_oUpperIntervalBoundaryParameterProperty:null,_oValueSetEntityType:null,_oValueSetEntitySet:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;this._oAttributeSet={};if(t.extensions!=undefined){for(var i=-1,n;n=t.extensions[++i];){if(!n.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(n.name){case"label":this._sLabelText=n.value;break;case"text":this._oTextProperty=e.getEntityType().findPropertyByName(n.value);break;case"super-ordinate":this._sSuperOrdinatePropertyName=n.value;break}}}if(!this._sLabelText){this._sLabelText=""}},getName:function(){return this._oProperty.name},getKeyProperty:function(){return this._oProperty},getTextProperty:function(){return this._oTextProperty},setTextProperty:function(e){this._oTextProperty=e},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName())}return this._sLabelText},getSuperOrdinateDimension:function(){if(!this._sSuperOrdinatePropertyName){return null}return this._oQueryResult.findDimensionByName(this._sSuperOrdinatePropertyName)},getHierarchy:function(){if(!this._oHierarchy){this._oHierarchy=this._oQueryResult.getEntityType().getHierarchy(this._oProperty.name)}return this._oHierarchy},getAllAttributeNames:function(){if(this._aAttributeNames){return this._aAttributeNames}this._aAttributeNames=[];for(var e in this._oAttributeSet){this._aAttributeNames.push(this._oAttributeSet[e].getName())}return this._aAttributeNames},getAllAttributes:function(){return this._oAttributeSet},findAttributeByName:function(e){return this._oAttributeSet[e]},addAttribute:function(e){this._oAttributeSet[e.getName()]=e},getContainingQueryResult:function(){return this._oQueryResult},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sSuperOrdinatePropertyName:null,_aAttributeNames:null,_oAttributeSet:null,_oHierarchy:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;if(t.extensions!=undefined){for(var i=-1,n;n=t.extensions[++i];){if(!n.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(n.name){case"attribute-for":this._sDimensionName=n.value;break;case"label":this._sLabelText=n.value;break;case"text":this._oTextProperty=e.getEntityType().findPropertyByName(n.value);break}}}},getName:function(){return this._oProperty.name},getKeyProperty:function(){return this._oProperty},getTextProperty:function(){return this._oTextProperty},getLabelText:function(){return this._sLabelText},getDimension:function(){return this._oQueryResult.findDimensionByName(this._sDimensionName)},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sDimensionName:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;if(t.extensions!=undefined){for(var i=-1,n;n=t.extensions[++i];){if(!n.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(n.name){case"label":this._sLabelText=n.value;break;case"text":this._oTextProperty=e.getEntityType().findPropertyByName(n.value);break;case"unit":this._oUnitProperty=e.getEntityType().findPropertyByName(n.value);break}}}if(!this._sLabelText){this._sLabelText=""}},getName:function(){return this._oProperty.name},getRawValueProperty:function(){return this._oProperty},getFormattedValueProperty:function(){return this._oTextProperty},getUnitProperty:function(){return this._oUnitProperty},getLabelText:function(){return this._sLabelText},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_oUnitProperty:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet=function(e,t,i,n){this._init(e,t,i,n)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet.prototype={_init:function(e,t,i,n){this._oEntitySet=n;this._oContainer=i;this._oSchema=t;this._oModel=e;if(t.entityContainer.length>1){this._sQName=i.name+"."+n.name}else{this._sQName=n.name}},getQName:function(){return this._sQName},getSetDescription:function(){return this._oEntitySet},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntitySet:null,_oContainer:null,_oSchema:null,_oModel:null,_sQName:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType=function(e,t,i){this._init(e,t,i)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType.prototype={_init:function(e,t,i){this._oEntityType=i;this._oSchema=t;this._oModel=e;this._oPropertySet={};this._aFilterablePropertyNames=[];this._aSortablePropertyNames=[];this._aRequiredFilterPropertyNames=[];this._sQName=t.namespace+"."+i.name;var n={};var r=null;for(var a=-1,o;o=i.property[++a];){this._aFilterablePropertyNames.push(o.name);this._aSortablePropertyNames.push(o.name);if(o.extensions==undefined){continue}for(var s=-1,l;l=o.extensions[++s];){if(!l.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(l.name){case"filterable":if(l.value=="false"){this._aFilterablePropertyNames.pop(o.name)}break;case"sortable":if(l.value=="false"){this._aSortablePropertyNames.pop(o.name)}break;case"required-filter":if(l.value=="true"){this._aRequiredFilterPropertyNames.push(o.name)}break;case"hierarchy-node-for":if(!(r=n[o.name])){r=n[o.name]={}}r.dimensionName=l.value;break;case"hierarchy-parent-node-for":case"hierarchy-parent-nod":if(!(r=n[l.value])){r=n[l.value]={}}r.parentNodeIDProperty=o;break;case"hierarchy-level-for":if(!(r=n[l.value])){r=n[l.value]={}}r.levelProperty=o;break;case"hierarchy-drill-state-for":case"hierarchy-drill-stat":if(!(r=n[l.value])){r=n[l.value]={}}r.drillStateProperty=o;break}}this._oPropertySet[o.name]=o}this._oRecursiveHierarchySet={};for(var u in n){var p=n[u];var y=this._oPropertySet[u];var h=this._oPropertySet[p.dimensionName];if(h==null){h=y}this._oRecursiveHierarchySet[h.name]=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy(i,y,p.parentNodeIDProperty,p.levelProperty,h)}},findPropertyByName:function(e){return this._oPropertySet[e]},getFilterablePropertyNames:function(){return this._aFilterablePropertyNames},getSortablePropertyNames:function(){return this._aSortablePropertyNames},getRequiredFilterPropertyNames:function(){return this._aRequiredFilterPropertyNames},getAllHierarchyPropertyNames:function(){if(this._aHierarchyPropertyNames){return this._aHierarchyPropertyNames}this._aHierarchyPropertyNames=[];for(var e in this._oRecursiveHierarchySet){this._aHierarchyPropertyNames.push(this._oRecursiveHierarchySet[e].getNodeValueProperty().name)}return this._aHierarchyPropertyNames},getHierarchy:function(e){if(this._oRecursiveHierarchySet[e]==undefined){return null}return this._oRecursiveHierarchySet[e]},getQName:function(){return this._sQName},getTypeDescription:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_sQName:null,_oPropertySet:null,_aFilterablePropertyNames:null,_aRequiredFilterPropertyNames:null,_aHierarchyPropertyNames:null,_oRecursiveHierarchySet:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy=function(e,t,i,n,r){this._init(e,t,i,n,r)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy.prototype={_init:function(e,t,i,n,r){this._oEntityType=e;this._oNodeIDProperty=t;this._oParentNodeIDProperty=i;this._oNodeLevelProperty=n;this._oNodeValueProperty=r},isRecursiveHierarchy:function(){return true},isLeveledHierarchy:function(){return false},getNodeIDProperty:function(){return this._oNodeIDProperty},getParentNodeIDProperty:function(){return this._oParentNodeIDProperty},getNodeLevelProperty:function(){return this._oNodeLevelProperty},getNodeValueProperty:function(){return this._oNodeValueProperty},_oNodeIDProperty:null,_oParentNodeIDProperty:null,_oNodeLevelProperty:null,_oNodeValueProperty:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression=function(e,t,i){this._init(e,t,i)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression.prototype={_init:function(e,t,i){this._oEntityType=i;this._oSchema=t;this._oModel=e;this._aFilterCondition=[]},clear:function(){this._aFilterCondition=[]},addCondition:function(e,t,i,n){var r=this._oEntityType.findPropertyByName(e);if(r==null){throw"Cannot add filter condition for unknown property name "+e}var a=this._oEntityType.getFilterablePropertyNames();if(a.indexOf(e)===-1){throw"Cannot add filter condition for not filterable property name "+e}this._aFilterCondition.push({property:r,op:t,val1:i,val2:n});return this._aFilterablePropertyNames},addSetCondition:function(e,i){var n=this._oEntityType.findPropertyByName(e);if(n==null){throw"Cannot add filter condition for unknown property name "+e}var r=this._oEntityType.getFilterablePropertyNames();if(r.indexOf(e)===-1){throw"Cannot add filter condition for not filterable property name "+e}for(var a=-1,o;o=i[++a];){this._aFilterCondition.push({property:n,op:t.EQ,val1:o})}return this._aFilterablePropertyNames},getExpressionAsUI5FilterArray:function(){var e=[];for(var t=-1,n;n=this._aFilterCondition[++t];){e.push(new i(n.property.name,n.op,n.val1,n.val2))}return e},getURIFilterOptionValue:function(){if(this._aFilterCondition.length==0){return""}this._aFilterCondition.sort(function(e,t){if(e.property.name==t.property.name){return 0}if(e.property.name>t.property.name){return 1}return-1});var e=this._aFilterCondition[0].property.name;var i="";var n="";for(var r=-1,a;a=this._aFilterCondition[++r];){if(e!=a.property.name){i+=(i==""?"":" and ")+"("+n+")";n="";e=a.property.name}switch(a.op){case t.BT:n+=(n==""?"":" or ")+"("+a.property.name+" "+t.GE.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(a.val1,a.property.type)+" and "+a.property.name+" "+t.LE.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(a.val2,a.property.type)+")";break;default:n+=(n==""?"":" or ")+"("+a.property.name+" "+a.op.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(a.val1,a.property.type)+")"}}i+=(i==""?"":" and ")+"("+n+")";return i},getEntityType:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_aFilterCondition:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder={Ascending:"asc",Descending:"desc"};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression=function(e,t,i){this._init(e,t,i)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression.prototype={_init:function(e,t,i){this._oEntityType=i;this._oSchema=t;this._oModel=e;this._aSortCondition=[]},_containsSorter:function(e){var t=null;for(var i=-1,n;n=this._aSortCondition[++i];){if(n.property.name===e){t={sorter:n,index:i};break}}return t},_removeFromArray:function(e,t,i){var n=e.slice((i||t)+1||e.length);e.length=t<0?e.length+t:t;return e.push.apply(e,n)},clear:function(){this._aSortCondition=[]},addSorter:function(e,t){var i=this._oEntityType.findPropertyByName(e);if(i==null){throw"Cannot add sort condition for unknown property name "+e}if(this._containsSorter(e)!=null){throw"Sort condition for this property name is already defined "+e}var n=this._oEntityType.getSortablePropertyNames();if(n.indexOf(e)===-1){throw"Cannot add sort condition for not sortable property name "+e}this._aSortCondition.push({property:i,order:t});return this},removeSorter:function(e){if(!e){return}var t=this._containsSorter(e);if(t){this._removeFromArray(this._aSortCondition,t.index)}},getExpressionsAsUI5SorterArray:function(){var e=[];for(var t=-1,i;i=this._aSortCondition[++t];){e.push(new n(i.property.name,i.order==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder.Descending))}return e},getExpressionAsUI5Sorter:function(){var e=this.getExpressionsAsUI5SorterArray();if(e.length==0){return null}return e[0]},getURIOrderByOptionValue:function(){if(this._aSortCondition.length==0){return""}var e="";for(var t=-1,i;i=this._aSortCondition[++t];){e+=i.property.name+" "+i.order;if(t<this._aSortCondition.length-1){e+=", "}}return e},getEntityType:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_aSortCondition:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest=function(e){this._init(e)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest.prototype={_init:function(e){if(!e){throw"No parameterization given"}this._oParameterization=e;this._oParameterValueAssignment=[]},getParameterization:function(){return this._oParameterization},setParameterValue:function(e,t,i){var n=this._oParameterization.findParameterByName(e);if(!n){throw"Invalid parameter name "+e}if(i!=null){if(!n.isIntervalBoundary()){throw"Range value cannot be applied to parameter "+e+" accepting only single values"}if(!n.isLowerIntervalBoundary()){throw"Range value given, but parameter "+e+" does not hold the lower boundary"}}if(!n.isIntervalBoundary()){if(t==null){delete this._oParameterValueAssignment[e]}else{this._oParameterValueAssignment[e]=t}}else{if(t==null&&i!=null){throw"Parameter "+e+": An upper boundary cannot be given without the lower boundary"}if(t==null){delete this._oParameterValueAssignment[e];i=null}else{this._oParameterValueAssignment[e]=t}var r=n.getPeerIntervalBoundaryParameter();if(i==null){i=t}if(t==null){delete this._oParameterValueAssignment[r.getName()]}else{this._oParameterValueAssignment[r.getName()]=i}}return},getURIToParameterizationEntitySet:function(e){return(e||"")+"/"+this._oParameterization.getEntitySet().getQName()},getURIToParameterizationEntry:function(e){var t=this._oParameterization.getAllParameters();for(var i in t){if(this._oParameterValueAssignment[i]==undefined){throw"Parameter "+i+" has no value assigned"}}var n="",r=true;for(var a in this._oParameterValueAssignment){n+=(r?"":",")+a+"="+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyKeyValue(this._oParameterValueAssignment[a],t[a].getProperty().type);r=false}return(e||"")+"/"+this._oParameterization.getEntitySet().getQName()+"("+n+")"},_oParameterization:null,_oParameterValueAssignment:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest=function(e){this._init(e)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest.prototype={_init:function(e,t){this._oQueryResult=e;this._oParameterizationRequest=t;this._oAggregationLevel={};this._oMeasures={};this._bIncludeEntityKey=false;this._oFilterExpression=null},setParameterizationRequest:function(e){this._oParameterizationRequest=e},getQueryResult:function(){return this._oQueryResult},setAggregationLevel:function(e){this._oAggregationLevel={};if(!e){e=this._oQueryResult.getAllDimensionNames()}this.addToAggregationLevel(e)},addToAggregationLevel:function(e){if(!e){return}for(var t=-1,i;i=e[++t];){if(!this._oQueryResult.findDimensionByName(i)){throw i+" is not a valid dimension name"}this._oAggregationLevel[i]={key:true,text:false,attributes:null}}},removeFromAggregationLevel:function(e){if(!e){return}for(var t=-1,i;i=e[++t];){if(!this._oQueryResult.findDimensionByName(i)){throw i+" is not a valid dimension name"}if(this._oAggregationLevel[i]!=undefined){delete this._oAggregationLevel[i];this.getSortExpression().removeSorter(i)}}},getAggregationLevel:function(){var e=[];for(var t in this._oAggregationLevel){e.push(t)}return e},getAggregationLevelDetails:function(e){if(this._oAggregationLevel[e]==undefined){throw"Aggregation level does not include dimension "+e}return this._oAggregationLevel[e]},setMeasures:function(e){if(!e){e=this._oQueryResult.getAllMeasureNames()}this._oMeasures={};for(var t=-1,i;i=e[++t];){if(!this._oQueryResult.findMeasureByName(i)){throw i+" is not a valid measure name"}this._oMeasures[i]={value:true,text:false,unit:false}}},getMeasureNames:function(){var e=[];for(var t in this._oMeasures){e.push(t)}return e},includeDimensionKeyTextAttributes:function(e,t,i,n){var r=[];if(e){if(this._oAggregationLevel[e]==undefined){throw e+" is not included in the aggregation level"}r.push(e)}else{for(var a in this._oAggregationLevel){r.push(a)}n=null}for(var o=-1,s;s=r[++o];){if(t!=null){this._oAggregationLevel[s].key=t}if(i!=null){this._oAggregationLevel[s].text=i}if(n!=null){this._oAggregationLevel[s].attributes=n}}},includeMeasureRawFormattedValueUnit:function(e,t,i,n){var r=[];if(e){if(this._oMeasures[e]==undefined){throw e+" is not part of the query result"}r.push(e)}else{for(var a in this._oMeasures){r.push(a)}}for(var o=-1,s;s=r[++o];){if(t!=null){this._oMeasures[s].value=t}if(i!=null){this._oMeasures[s].text=i}if(n!=null){this._oMeasures[s].unit=n}}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oQueryResult.getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},setRequestOptions:function(e,t){if(e){this._bIncludeEntityKey=e}if(t){this._bIncludeCount=t}},setResultPageBoundaries:function(e,t){if(e!=null&&typeof e!=="number"){throw"Start value must be null or numeric"}if(t!==null&&typeof t!=="number"){throw"End value must be null or numeric"}if(e==null){e=1}if(e<1||e>(t==null?e:t)){throw"Invalid values for requested page boundaries"}this._iSkipRequestOption=e>1?e:null;this._iTopRequestOption=t!=null?t-e+1:null},getResultPageBoundaries:function(){var e,t;if(this._iSkipRequestOption==null){e=1;t=1}else{e=this._iSkipRequestOption;t=this._iSkipRequestOption+this._iTopRequestOption}return{start:e,end:this._iTopRequestOption!=null?t:null}},getURIToQueryResultEntitySet:function(e){var t=null;if(this._oQueryResult.getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request"}else{t=this._oParameterizationRequest.getURIToParameterizationEntry(e)+"/"+this._oQueryResult.getParameterization().getNavigationPropertyToQueryResult()}}else{t=(e||"")+"/"+this._oQueryResult.getEntitySet().getQName()}return t},getURIQueryOptionValue:function(e){var t=null;switch(e){case"$select":{var i="",n;for(var r in this._oAggregationLevel){var a=this._oQueryResult.findDimensionByName(r);var o=this._oAggregationLevel[r];if(o.key==true){i+=(i==""?"":",")+a.getKeyProperty().name}if(o.text==true&&a.getTextProperty()){i+=(i==""?"":",")+a.getTextProperty().name}if(o.attributes){var s;for(n=-1;s=o.attributes[++n];){i+=(i==""?"":",")+a.findAttributeByName(s).getName()}}}for(var l in this._oMeasures){var u=this._oQueryResult.findMeasureByName(l);var p=this._oMeasures[l];if(p.value==true){i+=(i==""?"":",")+u.getRawValueProperty().name}if(p.text==true&&u.getFormattedValueProperty()){i+=(i==""?"":",")+u.getFormattedValueProperty().name}if(p.unit==true&&u.getUnitProperty()){i+=(i==""?"":",")+u.getUnitProperty().name}}if(this._bIncludeEntityKey){var y=this._oQueryResult.getEntityType().getTypeDescription().key.propertyRef,h;for(n=-1;h=y[++n];){i+=(i==""?"":",")+h.name}}t=i||null;break}case"$filter":{var c=null;if(this._oFilterExpression){c=this._oFilterExpression.getURIFilterOptionValue()}t=c||null;break}case"$orderby":{var m=null;if(this._oSortExpression){m=this._oSortExpression.getURIOrderByOptionValue()}t=m||null;break}case"$top":{if(this._iTopRequestOption!==null){t=this._iTopRequestOption}break}case"$skip":{t=this._iSkipRequestOption;break}default:break}return t},getURIToQueryResultEntries:function(e){var t=this.getURIToQueryResultEntitySet(e);var i=this.getURIQueryOptionValue("$select");var n=this.getURIQueryOptionValue("$filter");var r=this.getURIQueryOptionValue("$orderby");var a=this.getURIQueryOptionValue("$top");var o=this.getURIQueryOptionValue("$skip");var s=t;var l=false;if(i){s+="?$select="+i;l=true}if(this._oFilterExpression&&n){if(!l){s+="?";l=true}else{s+="&"}s+="$filter="+n}if(this._oSortExpression&&r){if(!l){s+="?";l=true}else{s+="&"}s+="$orderby="+r}if(this._iTopRequestOption&&a){if(!l){s+="?";l=true}else{s+="&"}s+="$top="+a}if(this._iSkipRequestOption&&o){if(!l){s+="?";l=true}else{s+="&"}s+="$skip="+o}if(this._bIncludeCount){if(!l){s+="?";l=true}else{s+="&"}s+="$inlinecount=allpages"}return s},_oQueryResult:null,_oParameterizationRequest:null,_oAggregationLevel:null,_oMeasures:null,_bIncludeEntityKey:null,_bIncludeCount:null,_oFilterExpression:null,_oSortExpression:null,_iSkipRequestOption:0,_iTopRequestOption:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest=function(e){this._init(e)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest.prototype={_init:function(e){this._oParameter=e;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null},includeParameterText:function(e){if(e!=null){this._oValueSetResult.text=e}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oParameter.getContainingParameterization().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},getURIQueryOptionValue:function(e){var t=null;switch(e){case"$select":{var i="";i+=(i==""?"":",")+this._oParameter.getProperty().name;if(this._oValueSetResult.text==true&&this._oParameter.getTextProperty()){i+=(i==""?"":",")+this._oParameter.getTextProperty().name}t=i||null;break}case"$filter":{var n=null;if(this._oFilterExpression){n=this._oFilterExpression.getURIFilterOptionValue()}t=n||null;break}case"$orderby":{var r=null;if(this._oSortExpression){r=this._oSortExpression.getURIOrderByOptionValue()}t=r||null;break}default:break}return t},getURIToParameterValueSetEntries:function(e){var t=null;t=(e||"")+"/"+this._oParameter.getContainingParameterization().getEntitySet().getQName();var i=this.getURIQueryOptionValue("$select");var n=this.getURIQueryOptionValue("$filter");var r=this.getURIQueryOptionValue("$orderby");var a=t;var o=false;if(i){a+="?$select="+i;o=true}if(this._oFilterExpression&&n){if(!o){a+="?";o=true}else{a+="&"}a+="$filter="+n}if(this._oSortExpression&&r){if(!o){a+="?";o=true}else{a+="&"}a+="$orderby="+r}return a},_oParameter:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest.prototype={_init:function(e,t){this._oDimension=e;this._oParameterizationRequest=t;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null},setParameterizationRequest:function(e){this._oParameterizationRequest=e},includeDimensionTextAttributes:function(e,t){if(e!=null){this._oValueSetResult.text=e}if(t!=null){this._oValueSetResult.attributes=t}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oDimension.getContainingQueryResult().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},hasMasterDataAvailable:function(){return false},getURIQueryOptionValue:function(e){var t=null;switch(e){case"$select":{var i="";i+=(i==""?"":",")+this._oDimension.getKeyProperty().name;if(this._oValueSetResult.text==true&&this._oDimension.getTextProperty()){i+=(i==""?"":",")+this._oDimension.getTextProperty().name}if(this._oValueSetResult.attributes){for(var n=-1,r;r=this._oValueSetResult.attributes[++n];){i+=(i==""?"":",")+this._oDimension.findAttributeByName(r).getName()}}t=i||null;break}case"$filter":{var a=null;if(this._oFilterExpression){a=this._oFilterExpression.getURIFilterOptionValue()}t=a||null;break}case"$orderby":{var o=null;if(this._oSortExpression){o=this._oSortExpression.getURIOrderByOptionValue()}t=o||null;break}default:break}return t},getURIToDimensionMemberEntries:function(e){var t=null;if(this._oDimension.getContainingQueryResult().getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request"}else{t=this._oParameterizationRequest.getURIToParameterizationEntry(e)+"/"+this._oDimension.getContainingQueryResult().getParameterization().getNavigationPropertyToQueryResult()}}else{t=(e||"")+"/"+this._oDimension.getContainingQueryResult().getEntitySet().getQName()}var i=this.getURIQueryOptionValue("$select");var n=this.getURIQueryOptionValue("$filter");var r=this.getURIQueryOptionValue("$orderby");var a=t;var o=false;if(i){a+="?$select="+i;o=true}if(this._oFilterExpression&&n){if(!o){a+="?";o=true}else{a+="&"}a+="$filter="+n}if(this._oSortExpression&&r){if(!o){a+="?";o=true}else{a+="&"}a+="$orderby="+r}return a},_oDimension:null,_oParameterizationRequest:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};return{}},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil", ["sap/ui/model/FilterOperator","sap/ui/model/analytics/odata4analytics","sap/ui/core/format/NumberFormat","sap/ui/model/odata/ODataModel","sap/base/Log","sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/ushell/utils/UrlParsing","sap/ushell/services/CrossApplicationNavigation"],function(e,t,i,r,a,jQuery,n,s,l){"use strict";var o=t.ParameterizationRequest;var u=t.QueryResultRequest;var c=t.Model.ReferenceByModel;var f=t.Model;sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.util=sap.ushell.components.tiles.indicatorTileUtils.util||{};sap.ushell.components.tiles.indicatorTileUtils.util=function(t,s){var g={},T={ANN:"years",WEE:"weeks",DAY:"days",HUR:"hours",MIN:"minutes"},h={},d={};return{getScheduledJob:function(e){return h[e]},setScheduledJob:function(e,t){h[e]=t},isCallInProgress:function(e){return d[e]},setUnsetCallInProgress:function(e,t){d[e]=t},getTimeUnitMap:function(){return T},getHanaUser:function(){return authObject.userName},addSystemToServiceUrl:function(e,t){a.info("Hana Adapter --\x3e Add System to Service Url");if(sap.ushell&&sap.ushell.Container){if(t){sap.ushell.Container.getServiceAsync("URLParsing").then(function(i){sap.ui.model.odata.ODataUtils.setOrigin(e,{alias:t})})}else{sap.ushell.Container.getServiceAsync("URLParsing").then(function(t){sap.ui.model.odata.ODataUtils.setOrigin(e)})}}return e},getODataModelByServiceUri:function(e){e=this.addSystemToServiceUrl(e);if(!g[e]){var t=new r(e,{loadMetadataAsync:true,json:true});g[e]=t}return g[e]},getEdmType:function(e,t){var i=null;if(e instanceof r){i=e}else{i=this.getODataModelByServiceUri(e)}if(i&&i.getServiceMetadata()){var a=i.getServiceMetadata();var n=a.dataServices.schema[0].entityType;if(n){for(var s=0;s<n.length;s++){var l=n[s];var o=l.property;for(var u=0;u<o.length;u++){var c=o[u];if(c.name==t){return c.type}}}}}return null},getMillisecond:function(e,t){var i;switch(t){case"seconds":i=e*1e3;break;case"minutes":i=e*60*1e3;break;case"hours":i=e*60*60*1e3;break;case"days":i=e*24*60*60*1e3;break;case"weeks":i=e*7*24*60*60*1e3;break;case"months":i=e*4*7*24*60*60*1e3;break;case"years":i=e*12*4*7*24*60*60*1e3;break}return i},getUTCDate:function(){var e=new Date;return e},isCacheValid:function(e,t,i,r,a){var n=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(e);if(!n){return false}else if(!(i&&Number(i))){return true}var s=this.getMillisecond(i,T[r]),l;if(jQuery.type(n.CachedTime)=="date"){l=n.CachedTime&&n.CachedTime.getTime()}else{l=n.CachedTime&&parseInt(n.CachedTime.substr(6),10)}var o=this.getUTCDate();return l>=t&&s>=o-l&&!a},getMantissaLength:function(e){var t=e.toString();var i=0;if(e<0){i=1}if(t.indexOf(".")===-1){return e<0?t.length-1:t.length}return t.substring(i,t.indexOf(".")).length},getLocaleFormattedValue:function(e,t,r,a,n){sap.ui.require("sap.ui.core.format.NumberFormat");a=a||false;n=n||null;if(a){return i.getCurrencyInstance({style:"short",showMeasure:false}).format(e,n)}var s=2;var l={style:"short"};var o;if(!(r==-1||r==null)){l.shortDecimals=Number(r);l.minFractionDigits=Number(r);l.maxFractionDigits=Number(r)}var u=i.getInstance(l);if(t==-2){if(e>9999){o="????"}else if(e>-.001&&e<0||e<.001&&e>0){o="0"}else{if(e.toString().indexOf(".")!=-1){o=Number(e).toFixed(4-e.toString().indexOf("."))}else{o=Number(e)}o=u.format(o)}}else if(r==-1||r==null){var c=this.getMantissaLength(e);if(!(c%3)){s=1}if(c%3===1){s=3}if(c%3===2){s=2}if(Math.abs(e)%Math.pow(10,c-1)==0){s=0}else if(Math.abs(e)%Math.pow(10,c-1)<6*Math.pow(10,c-4)){s=0}u=i.getInstance({style:"short",shortDecimals:s});o=u.format(e)}else{o=u.format(e)}return o},getPlatform:function(e){return(new n(window.location.href).get("sb_metadata")||e||"HANA").toUpperCase()},getTileTitleSubtitle:function(e){var t={};if(e.bag&&e.bag.getBagIds()&&e.bag.getBagIds().length){t.title=e.bag.getBag("sb_tileProperties").getText("title")||e.bag.getBag("sb_tileProperties").getProperty("title")||e.preview.getTitle();t.subTitle=e.bag.getBag("sb_tileProperties").getText("description")||e.bag.getBag("sb_tileProperties").getProperty("description")||e.preview.getDescription()}else{t.title=e.preview.getTitle();t.subTitle=e.preview.getDescription()}return t},scheduleFetchDataJob:function(e){var t;if(this.getView().getViewName().indexOf("DualTile")!==-1){t=this.oKpiTileView.oConfig}else{t=this.oConfig}var i=t.TILE_PROPERTIES.id+"data";var r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(i);if(r){clearTimeout(r);r=undefined}var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeUnitMap(),n=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(t),s=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(t),l=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(n,a[s]),o;if(jQuery.type(this.cacheTime)=="date"){o=this.cacheTime}else{o=new Date(parseInt(this.cacheTime.substr(6),10))}var u=l-(sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()-o);if(u<=0){u=0}else if(u>2147483646){u=2147483646}if(!e){u=3e5}if(this.getView().getViewName().indexOf("DualTile")!==-1){r=setTimeout(this.refreshPress.bind(this),u)}else{r=setTimeout(this.refreshHandler.bind(this,false,true),u);sap.ushell.components.tiles.indicatorTileUtils.util.setScheduledJob(i,r)}this.updateDatajobScheduled=true},scheduleTimeStampJob:function(){var e=this.oConfig.TILE_PROPERTIES.id+"time",t=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(e),i;if(t){clearTimeout(t);t=undefined}if(jQuery.type(this.cacheTime)=="date"){i=this.cacheTime}else{i=new Date(parseInt(this.cacheTime.substr(6),10),13)}var r=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()-i);t=setTimeout(this.setTimeStamp.bind(this,this.cacheTime),r.timer);sap.ushell.components.tiles.indicatorTileUtils.util.setScheduledJob(e,t);this.updateTimeStampjobScheduled=true},getBoolValue:function(e){var t=false;if(typeof e==="boolean"&&e){t=true}return t},getSeconds:function(e){return e/1e3},getMinutes:function(e){return this.getSeconds(e)/60},getHours:function(e){return this.getMinutes(e)/60},getDays:function(e){return this.getHours(e)/24},getWeeks:function(e){return this.getDays(e)/7},getMonths:function(e){return this.getWeeks(e)/4},getYears:function(e){return this.getMonths(e)/12},getTimeDifference:function(e){var t={};if(e){var i=this.getMinutes(e);var r=this.getHours(e);var a=this.getDays(e);if(i<5){t.time=0;t.unit="minutes";t.timer=Math.round(this.getMillisecond(5-i,"minutes"))}else if(i>=5&&i<60){if(i<10){t.time=5}else{t.time=i-i%10}t.unit="minutes";t.timer=Math.round(this.getMillisecond(10-i%10,"minutes"))}else if(r>=1&&r<24){t.unit="hours";t.time=r-r%1;t.timer=Math.round(this.getMillisecond(1-r%1,"hours"))}else if(a>=1&&a<2){t.unit="days";t.time=a-a%1;t.timer=Math.round(this.getMillisecond(1-a%1,"days"))}else{t.unit="days";t.time=a-a%1;t.timer=this.getMillisecond(2,"days")}}else{t.timer=6e3;t.unit="days";t.timer=2e3}return t},getCachingTime:function(e){return e.CACHINGTIME&&Number(e.CACHINGTIME)||e.TILE_PROPERTIES.cachingTime&&Number(e.TILE_PROPERTIES.cachingTime)},getCachingTimeUnit:function(e){return e.CACHINGUNIT||e.TILE_PROPERTIES.cachingTimeUnit},getFrontendCacheQuery:function(e,t,i,r){var n;try{var s=r.url.addSystemToServiceUrl("/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV");s=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(s);n=this.getODataModelByServiceUri(s);s="/CacheParameters(P_CacheType=1)/Results";return{oModel:n,uri:s}}catch(e){a.error("FrontEnd cache Metadata failed");return null}},isDualTile:function(e){var t=e&&e.TILE_PROPERTIES&&e.TILE_PROPERTIES.tileType;if(t.indexOf("DT-")==-1){return false}return true},writeFrontendCacheByChipAndUserId:function(e,t,i,r,n){var s=function(e){a.info("cache write successFully");n(e)};var l=function(){a.error("cache update failed");n(null)};try{var o=e.url.addSystemToServiceUrl("/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV/");o=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(o);var u=this.getODataModelByServiceUri(o);var c="/CacheData";u.create(c,i,{async:true,success:s,error:l})}catch(e){a.error(e)}},getKpiChipsOnPage:function(e,t){var i=[];sap.ushell.Container.getServiceAsync("FlpLaunchPage").then(function(r){r.getGroups().done(function(r){if(r&&r instanceof Array&&r.length){a.info("Group Chip fetch")}t(e,i)})})},getFrontendCache:function(e,t){var i=this;var r=sap.ushell.components.tiles.indicatorTileUtils.cache.getFrontEndCacheDeferredObject(t.url.getApplicationSystem());var n;if(r){n=r}else{n=jQuery.Deferred()}var s=e&&e.TILE_PROPERTIES&&e.TILE_PROPERTIES.id;var l=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s);if(l){r.resolve(true)}else if(r){return r.promise()}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setFrontEndCacheDefferedObject(t.url.getApplicationSystem(),n);r=n;this.getKpiChipsOnPage(s,function(e,n){if(n){var s=i.getFrontendCacheQuery(n,sap.ushell.Container.getUser().getId(),n,t);if(s){var l=s.oModel;var o=s.uri;var u=false;l.read(o,null,null,true,function(t){if(t&&t.results&&t.results instanceof Array&&t.results.length){jQuery.each(t.results,function(e,t){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.ChipId,t)})}if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(e)){u=true}r.resolve(u)},function(e){if(e&&e.response){a.error(e.message+" : "+e.request.requestUri)}r.reject()})}else{r.reject()}}else{r.resolve(false)}})}return r.promise()},getModelerRuntimeServiceModel:function(){var e="/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata";e=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(e);return this.getODataModelByServiceUri(e)},getSapFontErrorCode:function(){return String.fromCharCode(57521)},getSapFontBusyCode:function(){return String.fromCharCode(57842)},prepareFilterStructure:function(e,t){var i=[];if(t){e=e.concat(t)}for(var r=0;r<e.length;r++){var a={};a.comparator=e[r].OPERATOR;a.filterPropertyName=e[r].NAME;if(e[r].ID){a.id=e[r].ID}a.type=e[r].TYPE;a.value=e[r].VALUE_1;a.valueTo=e[r].VALUE_2;i.push(a)}return i},getODataModelByServiceUriFromChipAPI:function(e,t){e=t.url.addSystemToServiceUrl(e);if(!g[e]){var i=new r(e,true);g[e]=i}return g[e]},cacheBustingMechanism:function(e){if(window["sap-ushell-config"].cacheBusting.cacheBusterToken){var t=window["sap-ushell-config"].cacheBusting&&window["sap-ushell-config"].cacheBusting.cacheBusterToken;e=e+"?_="+t}return e},getRunTimeUri:function(e){var t="/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata";var i="/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV";if(e.toUpperCase()=="HANA"){if(window["sap-ushell-config"].cacheBusting){t=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(t)}return t}if(window["sap-ushell-config"].cacheBusting){i=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(i)}return i},getFilterFromRunTimeService:function(e,t,i,r){var a=e.TILE_PROPERTIES.sb_metadata;var n=this.getODataModelByServiceUriFromChipAPI(this.getRunTimeUri(a),t);var s="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",e.EVALUATION.ID);var l=n.read("/EVALUATION_FILTERS",null,{$filter:s},true,function(e){var t=[];if(e.results.length){t=e.results}i.call(this,t)},r);return l},_getOData4AnalyticsObject:function(e){var t=null;if(e instanceof r){t=e}else if(typeof e==="string"){t=this.getODataModelByServiceUri(e)}else{throw new Error("Invalid Input to Create ODataModel Object : "+e)}var i=new f(c(t));return i},findTextPropertyForDimension:function(e,t,i){try{var r=this._getOData4AnalyticsObject(e);var n=r.findQueryResultByName(t);var s=n.findDimensionByName(i);if(s.getTextProperty()){return s.getTextProperty().name}return i}catch(e){a.error("Error Fetching Text Property for "+i+" : "+e.toString())}},getEvalValueMeasureName:function(e,t,i){var r=e.EVALUATION_VALUES;for(var a=0;a<r.length;a++){if(r[a].TYPE==t){if(i==="FIXED"){return r[a].FIXED}return r[a].COLUMN_NAME}}},getSemanticColorName:function(e){var t="";if(e=="Error"){t="sb.error"}if(e=="Neutral"){t="sb.neutral"}if(e=="Critical"){t="sb.critical"}if(e=="Good"){t="sb.good"}return t},setTooltipInTile:function(e,t,i){var r="";var a=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();if(t=="NT"||t=="DT"){if(i.status){r+=a.getText("sb.status")+": "+a.getText(i.status)+"\n"}if(i.actual){r+=a.getText("sb.actual")+": "+i.actual+"\n"}if(i.target){r+=a.getText("sb.target")+": "+i.target+"\n"}if(i.cH){r+=a.getText("sb.ch")+": "+i.cH+"\n"}if(i.wH){r+=a.getText("sb.wh")+": "+i.wH+"\n"}if(i.wL){r+=a.getText("sb.wl")+": "+i.wL+"\n"}if(i.cL){r+=a.getText("sb.cl")+": "+i.cL+"\n"}}if(t=="CONT"||t=="COMP"){if(i.measure&&t=="CONT"){if(i&&i.contributionTile.contributionTile&&i.contributionTile.contributionTile[1]==="asc"){r+=a.getText("sb.bottomn")+": "+i.contributionTile[0]+"\n"}else if(i&&i.contributionTile.contributionTile&&i.contributionTile.contributionTile.length){r+=a.getText("sb.topn")+": "+i.contributionTile[0]+"\n"}}if(i.m1&&(i.v1==undefined||i.v1==null?false:i.v1.toString())&&i.c1){r+=i.m1+": "+i.v1+" "+a.getText(i.c1)+"\n"}if(i.m2&&(i.v2==undefined||i.v2==null?false:i.v2.toString())&&i.c2){r+=i.m2+": "+i.v2+" "+a.getText(i.c2)+"\n"}if(i.m3&&(i.v3==undefined||i.v3==null?false:i.v3.toString())&&i.c3){r+=i.m3+": "+i.v3+" "+a.getText(i.c3)+"\n"}}if(e&&e.setTooltip){e.setTooltip(r)}},_getFormattedTileProperties:function(e){e=e||{};var t=["sb_metadata","sb_navigation","sb_catalog"];var i=false;for(var r=0;!i&&r<t.length;r++){i=i||new n(window.location.href).get(t[r])||e[t[r]]}e.sb_metadata=(new n(window.location.href).get("sb_metadata")||e.sb_metadata||"HANA").toLowerCase();e.sb_navigation=(new n(window.location.href).get("sb_navigation")||e.sb_navigation||"abap").toLowerCase();e.sb_catalog=(new n(window.location.href).get("sb_catalog")||e.sb_catalog||"HANA").toLowerCase();e.isPlatformInfoPresent=i;return e},getEvaluationDetailsFromRunTimeService:function(e,t,i,r){var a=this.getODataModelByServiceUri(this.getRunTimeUri(t));var n="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",i);a.read(e,null,{$filter:n},true,function(e){var t=[];if(e.results.length){t=e.results}r.call(this,t)})},getParsedChip:function(e,t,i){try{var r={};var a=JSON.parse(e);var n=JSON.parse(a.TILE_PROPERTIES).evaluationId||"";if(a.TILE_PROPERTIES){var s=JSON.parse(a.TILE_PROPERTIES);if(s&&(s.instanceId||s.catalogId)){return false}}var l=this;if(a.blankTile){r.BLANKTILE=a.blankTile}if(a.cachingTime){r.CACHINGTIME=a.cachingTime}if(a.cachingTimeUnit){r.CACHINGUNIT=a.cachingTimeUnit}if(a.TAGS){r.TAGS=JSON.parse(a.TAGS)}if(a.ADDITIONAL_FILTERS){r.ADDITIONAL_FILTERS=JSON.parse(a.ADDITIONAL_FILTERS)}if(a.ADDITIONAL_APP_PARAMETERS){r.ADDITIONAL_APP_PARAMETERS=JSON.parse(a.ADDITIONAL_APP_PARAMETERS)}r.TILE_PROPERTIES=this._getFormattedTileProperties(JSON.parse(a.TILE_PROPERTIES));var o=r.TILE_PROPERTIES.sb_metadata;if(a.EVALUATION_FILTERS){r.EVALUATION_FILTERS=JSON.parse(a.EVALUATION_FILTERS);if(a.EVALUATION_VALUES){r.EVALUATION_VALUES=JSON.parse(a.EVALUATION_VALUES);if(a.EVALUATION){r.EVALUATION=JSON.parse(a.EVALUATION);if(i){i(r)}else{return r}}else if(!t){l.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",o,n,function(e){r.EVALUATION=e;if(i){i(r)}else{return r}})}else if(i){i(r)}else{return r}}else if(!t){l.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",o,n,function(e){r.EVALUATION_VALUES=e;if(a.EVALUATION){r.EVALUATION=JSON.parse(a.EVALUATION);if(i){i(r)}else{return r}}else{l.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",o,n,function(e){r.EVALUATION=e;if(i){i(r)}else{return r}})}})}else if(i){i(r)}else{return r}}else if(t){if(i){i(r)}else{return r}}else{l.getEvaluationDetailsFromRunTimeService("/EVALUATION_FILTERS",o,n,function(e){r.EVALUATION_FILTERS=e;if(a.EVALUATION_VALUES){r.EVALUATION_VALUES=JSON.parse(a.EVALUATION_VALUES);if(a.EVALUATION){r.EVALUATION=JSON.parse(a.EVALUATION);if(i){i(r)}else{return r}}else{l.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",o,n,function(e){r.EVALUATION=e;if(i){i(r)}else{return r}})}}else{l.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",o,n,function(e){r.EVALUATION_VALUES=e;if(a.EVALUATION){r.EVALUATION=JSON.parse(a.EVALUATION);if(i){i(r)}else{return r}}else{l.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",o,n,function(e){r.EVALUATION=e;if(i){i(r)}else{return r}})}})}})}}catch(e){return false}},getNavigationTarget:function(e,t){var i;var r={};r.evaluationId=e.EVALUATION.ID;r.chipId=e.TILE_PROPERTIES.id;if(t){r["sap-system"]=t}r.tileType=e.TILE_PROPERTIES.tileType;if(e.TILE_PROPERTIES.dimension){r.dimension=e.TILE_PROPERTIES.dimension}if(e.TILE_PROPERTIES.storyId){r.storyId=e.TILE_PROPERTIES.storyId}if(e.TILE_PROPERTIES.apfConfId){r["sap-apf-configuration-id"]=e.TILE_PROPERTIES.apfConfId}if(e.TILE_PROPERTIES.isPlatformInfoPresent){r.sb_metadata=e.TILE_PROPERTIES.sb_metadata;r.sb_navigation=e.TILE_PROPERTIES.sb_navigation;r.sb_catalog=e.TILE_PROPERTIES.sb_catalog}if(e.ADDITIONAL_APP_PARAMETERS){for(i in e.ADDITIONAL_APP_PARAMETERS){if(e.ADDITIONAL_APP_PARAMETERS.hasOwnProperty(i)){if(e.ADDITIONAL_APP_PARAMETERS[i].constructor==Array){var a=e.ADDITIONAL_APP_PARAMETERS[i];for(var n=0;n<a.length;n++){r[i]=a[n]}}else{r[i]=e.ADDITIONAL_APP_PARAMETERS[i]}}}}var s=l&&l.hrefForExternal({target:{semanticObject:e.TILE_PROPERTIES.semanticObject,action:e.TILE_PROPERTIES.semanticAction},params:r})||"";if(e.ADDITIONAL_FILTERS){var o=e.ADDITIONAL_FILTERS;var u="&";for(var c=0;c<o.length;c++){if(o[c].OPERATOR==="EQ"){u=u+"/"+o[c].NAME+"="+o[c].VALUE_1}}s+=u}return s},getChipTitle:function(e){var t="";if(e){var i=e.EVALUATION||{};t=i.INDICATOR_TITLE||""}return t},getstringifyTileConfig:function(e){var t={};t.EVALUATION=JSON.stringify(e.EVALUATION);t.EVALUATION_FILTERS=JSON.stringify(e.EVALUATION_FILTERS);t.EVALUATION_VALUES=JSON.stringify(e.EVALUATION_VALUES);t.TILE_PROPERTIES=JSON.stringify(e.TILE_PROPERTIES);return JSON.stringify(t)},getChipSubTitle:function(e){var t="";if(e){var i=e.EVALUATION||{};t=i.TITLE||""}return t},getAllMeasures:function(e,t){var i=[];try{var r=this._getOData4AnalyticsObject(e);var n=r.findQueryResultByName(t);i=n.getAllMeasureNames()}catch(e){a.error("Error Fetching All Measures : "+e.toString())}return i},getFormattingMetadata:function(e,t,i){var a={};a._hasCurrency=false;a._hasSapText=false;var n=null;if(e instanceof r){n=c(e)}else{var s=this.getODataModelByServiceUri(e);n=c(s)}var l=new f(n);var o=l.findQueryResultByName(t);var u=o.getAllMeasures();if(u[i]){var g=u[i]._oTextProperty&&u[i]._oTextProperty.name?u[i]._oTextProperty.name:"";if(g!=""){a._hasSapText=true;a._sapTextColumn=g}else if(u[i].hasOwnProperty("_oUnitProperty")){var T=u[i]._oUnitProperty.extensions;for(var h=0;h<u[i]._oUnitProperty.extensions.length;h++){if(T[h].name==="semantics"&&T[h].value==="currency-code"){a._hasCurrency=true;a._currencyColumn=u[i]._oUnitProperty.name}}}}return a},getAllDimensions:function(e,t){function i(e,t){var i=0,r=0;var a=[];while(i<e.length&&r<t.length){if(e[i]<t[r]){i++}else if(e[i]>t[r]){r++}else{a.push(e[i]);i++;r++}}return a}var r=[];var n=[];try{var s=this._getOData4AnalyticsObject(e);var l=s.findQueryResultByName(t);var o=l.getEntityType();n=o.getFilterablePropertyNames();r=l.getAllDimensionNames();if(n&&n.length){r=i(n.sort(),r.sort())}}catch(e){a.error("Error Fetching All Dimesions : "+e.toString())}return r},prepareQueryServiceUri:function(t,i,n,s,l,g,T){function h(e){return e.replace(/'/g,"''")}var d=null;var m=function(){};var p=function(){};try{var v=null;if(t instanceof r){v=c(t)}else{var E=this.getODataModelByServiceUri(t);v=c(E)}var A=new f(v);var I=A.findQueryResultByName(i);var S=new u(I);if(n){S.setMeasures(n.split(","));S.includeMeasureRawFormattedValueUnit(null,true,true,true)}if(s){if(typeof s==="string"){d=s;d=d.split(",")}for(var O=0;O<d.length;O++){S.addToAggregationLevel([d[O]]);var y=I.getAllDimensions();if(y[d[O]].getTextProperty()!=null){S.includeDimensionKeyTextAttributes([d[O]],true,true,null)}}}if(l&&l.length){var N=[];var P=[];var U;for(O=0,U=l.length;O<U;O++){var R=l[O];if(R.type==="PA"){P.push(R)}else if(R.type==="FI"){N.push(R)}}m=function(e){var t=e.toJSON();var i=t.charAt(t.length-1).toUpperCase();if(i.charCodeAt(0)>=65&&i.charCodeAt(0)<=90){t=t.slice(0,-1)}return t};p=function(e){if(e){try{if(e==+e){e=window.parseInt(e)}var t=new Date(e);var i=t.getTime();if(isNaN(i)){return e}return m(t)}catch(e){}}return e};if(N.length){var L=S.getFilterExpression();for(O=0,U=N.length;O<U;O++){R=N[O];if(this.getEdmType(t,R.filterPropertyName)=="Edm.DateTime"){R.value=p(R.value);R.valueTo=p(R.valueTo)}if(R.comparator==e.BT){L.addCondition(R.filterPropertyName,R.comparator,h(R.value),R.valueTo)}else{var _=R.value.split(",");for(var b=0,D=_.length;b<D;b++){L.addCondition(R.filterPropertyName,R.comparator,h(_[b].replace(/\^\|/g,",")),null)}}}}if(P.length){if(I.getParameterization()){var C=new o(I.getParameterization());var M=I.getParameterization();var V,w,F,B,x;for(var H=0,j=P.length;H<j;H++){V=P[H];w=M.findParameterByName(V.filterPropertyName);if(w.isIntervalBoundary()===true&&w.isLowerIntervalBoundary()===true){x=w.getPeerIntervalBoundaryParameter();for(O=0,U=P.length;O<U;O++){if(P[O].filterPropertyName===x.getName()){B=h(P[O].value);break}}F=h(V.value);if(B){C.setParameterValue(V.filterPropertyName,F,B)}}else if(w.isIntervalBoundary()===true&&w.isLowerIntervalBoundary()===false){a.info("Future development")}else{C.setParameterValue(V.filterPropertyName,h(V.value))}}S.setParameterizationRequest(C)}}}var J=S.getURIToQueryResultEntries();if(g&&g.length){J=J+"&$orderby=";for(H=0,j=g.length;H<j;H++){var k=g[H].sortOrder||"asc";if(k){J+=g[H].element+" "+k+","}}J=J.slice(0,J.length-1)}if(T){J=J+"&$top="+T}var Q=I.getAllMeasures();var G=[];for(O=0;O<n.split(",").length;O++){G.push(Q[n.split(",")[O]].getUnitProperty())}return{uri:J,model:A.getODataModel(),unit:G}}catch(e){a.error("Error Preparing Query Service Uri using OData4Analytics Library : "+e.toString());if(arguments.length){a.error("Arguments Passed to this function");a.error(arguments[0]+","+arguments[1]+","+arguments[2]+","+arguments[3])}else{a.error("NO Arguments passed to this function")}return null}},getAllEntitySet:function(e){var t=[];try{var i=this._getOData4AnalyticsObject(e);t=i.getAllQueryResultNames()}catch(e){a.error("Error fetching Enity Set : "+e.toString())}return t},getAllMeasuresWithLabelText:function(e,i){var r=[];try{var n=this._getOData4AnalyticsObject(e);var s=n.findQueryResultByName(i);var l=s.getAllMeasureNames();for(var o=0;o<l.length;o++){var u=l[o];t.oMeasure=s.findMeasureByName(u);r.push({key:u,value:oMeasure.getLabelText()})}}catch(e){a.error("Error Fetching All Measures : "+e.toString())}return r},getAllDimensionsWithLabelText:function(e,t){var i=[];try{var r=this._getOData4AnalyticsObject(e);var n=r.findQueryResultByName(t);var s=n.getAllDimensionNames();for(var l=0;l<s.length;l++){var o=s[l];var u=n.findDimensionByName(o);var c=null;if(u.getTextProperty()!=null){c=u.getTextProperty().name}i.push({key:o,value:u.getLabelText(),textProperty:c})}}catch(e){a.error("Error Fetching All Dimesions : "+e.toString())}return i},getAllInputParams:function(e,t){var i=[];try{var r=this._getOData4AnalyticsObject(e);var n=r.findQueryResultByName(t);if(n.getParameterization()){var s=n.getParameterization();i=s.getAllParameterNames()}}catch(e){a.error("Error Fetching Input Params : "+e.toString())}return i},getAllInputParamsWithFlag:function(e,t){var i=[];try{var r=this._getOData4AnalyticsObject(e);var n=r.findQueryResultByName(t);if(n.getParameterization()){var s=n.getParameterization();var l=s.getAllParameterNames();for(var o=0;o<l.length;o++){var u=l[o];var c=s.findParameterByName(u);i.push({name:u,optional:c.isOptional()})}}}catch(e){a.error("Error Fetching Input Params : "+e.toString())}return i},formatOdataObjectToString:function(e){if(e&&e.constructor==Object){if(e.__edmType=="Edm.Time"){var t=e.ms;var i=Math.floor(t/1e3%60);var r=Math.floor(t/6e4%60);var a=Math.floor(t/36e5%24);return a+"H"+r+"M"+i+"S"}}return e},generateCombinations:function(e){function t(e,t){while(t.length<e){t="0"+t}return t}var i=Math.pow(2,e.length);var r=[];var a=0;while(i>1){var n=(i-1).toString(2);n=t(e.length,n);r[a]=[];for(var s=0;s<n.length;s++){if(Number(n[s])){r[a].push(e[s])}}i--;a++}return r},logError:function(e,t){if(e=="no data"&&t){var i=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();t.setFailedText(i.getText("sb.noData"))}a.error(e.toString())},numberOfLeadingZeros:function(e){e=String(e);var t=0;var i=e.indexOf(".");if(i==-1){return 0}if(Number(e.split(".")[0])!=0){return 0}var r=i+1;while(e[r++]=="0"){++t}return t},formatValue:function(e,t,i){i=i||3;var r={3:"K",6:"M",9:"B",12:"T",0:""};r["-3"]="m";r["-6"]="u";r["-9"]="n";r["-12"]="t";r["-2"]="%";var a,n,s;a=Number(e).toPrecision(i);var l=this.numberOfLeadingZeros(a);if(l>0&&t<0){n=a*Math.pow(10,l+i);s=-(l+i)}else{n=Number(a.split("e")[0]);s=Number(a.split("e")[1])||0}if(!e&&e!=0){return{value:"",unitPrefix:""}}if(t>=0){if(s%3!=0){if(s%3==2){if(s+1==t){s=s+1;n=n/10}else{s=s-2;n=n*100}}else if(s+2==t){s=s+2;n=n/100}else{s--;n=n*10}}else if(s==15){n=n*1e3;s=12}}else if(t=="-2"){var o=this.formatValue(e*100,0)}else if(s>=0&&e<10&&t=="-3"){n=e*Math.pow(10,3);s=-3}else if(s>=0){return this.formatValue(e,0)}else{s=Math.abs(s);t=Math.abs(t);if(t>s){n=n/Math.pow(10,s%3);s=s-s%3}else{var u=s-t;n=n/Math.pow(10,u);s=s-u}s=0-s}n+="";if(t=="-2"){var c=o.unitPrefix==""?Number(o.value+"").toFixed(4-(o.value+"").indexOf(".")):Number(o.value+"").toFixed(3-(o.value+"").indexOf("."));return{value:Number(c),unitPrefix:o.unitPrefix+r[-2]}}n=Number(n).toFixed(4-n.indexOf("."));return{value:Number(n),unitPrefix:r[s]}},isSmartbusinessChipAndCachable:function(e){var t=this.getParsedChip(e&&e.getConfigurationParameter("tileConfiguration"));return t&&t.TILE_PROPERTIES&&t.TILE_PROPERTIES.tileType&&this.getCachingTime(t)},getHanaClient:function(){var e;var t=function(t,i,r){e=t.sessionClient;sap.ushell.components.tiles.indicatorTileUtils.cache.setCacheHanaClient(e);sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.resolve(e)};var i=function(e,t,i){a.error(e.responseText);a.error("session client call failed");sap.ushell.components.tiles.indicatorTileUtils.cache.setCacheHanaClient(null);sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.reject()};var r=sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED||jQuery.Deferred();var n=sap.ushell.components.tiles.indicatorTileUtils.cache.getCacheHanaClient();if(n!=undefined){e=n;sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.resolve(e)}else if(sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED){return sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.promise()}else{sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED=r;jQuery.ajax({type:"GET",async:false,dataType:"json",url:"/sap/hba/r/sb/core/logic/GetSessionClient.xsjs",success:t,error:i})}return sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.promise()},abortPendingODataCalls:function(e){try{if(e){e.abort()}}catch(e){this.logError(e)}}}}(window,jQuery);sap.ushell.components.tiles.indicatorTileUtils.cache=function(){var e={};var t={};var i="HANA_CLIENT";return{getCacheHanaClient:function(){return e[i]},setCacheHanaClient:function(t){e[i]=t},getEvaluationByChipId:function(t){if(e[t]){return e[t]}return null},getEvaluationById:function(e){return this.getEvaluationByChipId(e)},setEvaluationById:function(t,i){e[t]=i},getFrontEndCacheDeferredObject:function(t){if(e[t]){return e[t]}return null},setFrontEndCacheDefferedObject:function(t,i){e[t]=i},getKpivalueById:function(e){if(t[e]){return t[e]}return null},setKpivalueById:function(e,i){t[e]=i}}}();return{}},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorcomparison/ComparisonTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,i,jQuery,t){"use strict";var a=i.DeviationIndicator;var o=i.ValueColor;var l=i.Size;var s=i.LoadState;var n=i.FrameType;var r=e.extend("sap.ushell.components.tiles.indicatorcomparison.ComparisonTile",{onInit:function(){this.KPI_VALUE_REQUIRED=false},_processDataForComparisonChart:function(e,i,t){var a=[],o={},l,s,n;var r;var T=[];var E=this;var c=null;for(l=0;l<e.results.length;l++){var u=e.results[l]}T=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oTileApi.url.addSystemToServiceUrl(this.oConfig.EVALUATION.ODATA_URL),this.oConfig.EVALUATION.ODATA_ENTITYSET);for(l=0,n=T.length;l<n;l++){s=T[l];o[s.key]=s.value}var h=E.oConfig.TILE_PROPERTIES.COLUMN_NAMES||E.oConfig.EVALUATION.COLUMN_NAMES;for(l=0;l<h.length;l++){var p={};var C=h[l];p.value=Number(u[C.COLUMN_NAME]);var f=Number(u[C.COLUMN_NAME]);var I=false;var L=0;var d=E._getEvaluationThresholdMeasures();var A=d?Array.prototype.indexOf.call(d,C.COLUMN_NAME):-1;if(A>-1){I=true;L=E.oConfig.EVALUATION.SCALING}if(E.oConfig.EVALUATION.SCALING==-2&&I){f*=100}var g=E.isCurrencyMeasure(C.COLUMN_NAME);if(t&&t[l]&&u[t[l].name]){c=u[t[l].name]}r=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(f,E.oConfig.EVALUATION.SCALING,E.oConfig.EVALUATION.DECIMAL_PRECISION,g,c);if(E.oConfig.EVALUATION.SCALING==-2&&I){r+=" %"}p.displayValue=r.toString();if(t){if(t[l]&&u[t[l].name]){p.displayValue+=" "+u[t[l].name]}}p.color=C.semanticColor;p.title=o[C.COLUMN_NAME]||C.COLUMN_NAME;p.measure=C.COLUMN_NAME;p.isCurM=g;a.push(p)}return a},fetchChartData:function(e,i,a,o){function l(e,i){var t=false;if(e&&e.results&&e.results.length){for(var a=0,o=i.length;a<o&&!t;a++){t=e.results[0][i[a].COLUMN_NAME]!==null}}return t}var s=this;try{var n=this.oConfig.EVALUATION.ODATA_ENTITYSET;var r=this.oConfig.EVALUATION.COLUMN_NAME;var T=r,E;if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES){for(E=0;E<this.oConfig.TILE_PROPERTIES.COLUMN_NAMES.length;E++){if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[E].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){T=T+","+this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[E].COLUMN_NAME}}}else{for(E=0;E<this.oConfig.EVALUATION.COLUMN_NAMES.length;E++){if(this.oConfig.EVALUATION.COLUMN_NAMES[E].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){T=T+","+this.oConfig.EVALUATION.COLUMN_NAMES[E].COLUMN_NAME}}}var c=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(e);var u=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){if(u){var h=u.Data&&JSON.parse(u.Data)}}var p=s.oTileApi.configuration.getParameterValueAsString("timeStamp");var C=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(s.oConfig.TILE_PROPERTIES.id,p,s.chipCacheTime,s.chipCacheTimeUnit,s.tilePressed);if(h&&!h.rightData||!u||!C&&s.oTileApi.visible.isVisible()||c||i&&s.oTileApi.visible.isVisible()||s.getView().getViewData().refresh){if(s.kpiValueFetchDeferred){s.kpiValueFetchDeferred=false;var f=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var I=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(s.oRunTimeODataModel,n,T,null,f,3);this.comparisionChartODataRef=I.model.read(I.uri,null,null,true,function(e){s.kpiValueFetchDeferred=true;var i={};if(I.unit){i.unit=I.unit}if(l(e,s.oConfig.TILE_PROPERTIES.COLUMN_NAMES||s.oConfig.EVALUATION.COLUMN_NAMES)){s.oConfig.TILE_PROPERTIES.FINALVALUE=e;s.oConfig.TILE_PROPERTIES.FINALVALUE=s._processDataForComparisonChart(s.oConfig.TILE_PROPERTIES.FINALVALUE,T.split(",")[0],I.unit);i.data=s.oConfig.TILE_PROPERTIES.FINALVALUE;var t={};s.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();t.ChipId=s.oConfig.TILE_PROPERTIES.id;t.Data=JSON.stringify(i);t.CacheMaxAge=Number(s.chipCacheTime);t.CacheMaxAgeUnit=s.chipCacheTimeUnit;t.CacheType=1;var o=s.getLocalCache(t);s.updateDatajobScheduled=false;var n=s.oConfig.TILE_PROPERTIES.id+"data";var r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(n);if(r){clearTimeout(r);r=undefined}if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,o);var E=false;if(u){E=true}if(s.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(s.oTileApi,s.oConfig.TILE_PROPERTIES.id,t,E,function(e){if(e){s.cacheTime=e&&e.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,e);s.setTimeStamp()}if(s.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){jQuery.proxy(s.setTimeStamp(s.cacheTime),s)}})}}else{var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id),h;if(c){if(!c.CachedTime){c.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()}h=c.Data;if(h){h=JSON.parse(h);h.rightData=i}c.Data=JSON.stringify(h);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,c)}else{h={};h.rightData=i;o.Data=JSON.stringify(h);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,o)}s.cacheWriteData=i}a.call(s,s.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(e.results.length==0){s.oConfig.TILE_PROPERTIES.FINALVALUE=e;if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id)){i=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id);i.data=e}else{i.data=e}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,i);a.call(s,s.oConfig.TILE_PROPERTIES.FINALVALUE);s.setNoData()}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,{empty:"empty"});s.setNoData()}},function(e){s.kpiValueFetchDeferred=true;if(e&&e.response){t.error(e.message+" : "+e.request.requestUri);o.call(s,e)}})}}else if(u&&u.Data){var L;var d=s.oConfig&&s.oConfig.TILE_PROPERTIES&&s.oConfig.TILE_PROPERTIES.tileType;if(d.indexOf("DT-")==-1){L=u.Data&&JSON.parse(u.Data)}else{L=u.Data&&JSON.parse(u.Data);L=L.rightData}s.cacheTime=u.CachedTime;if(s.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){jQuery.proxy(s.setTimeStamp(s.cacheTime),s)}if(L.data&&L.data.length){s.oConfig.TILE_PROPERTIES.FINALVALUE=L.data;a.call(s,s.oConfig.TILE_PROPERTIES.FINALVALUE)}else{s.oConfig.TILE_PROPERTIES.FINALVALUE=L.data;a.call(s,s.oConfig.TILE_PROPERTIES.FINALVALUE);s.setNoData()}}else{s.setNoData()}}catch(e){s.kpiValueFetchDeferred=true;o.call(s,e)}},doProcess:function(e,i){var t=this;this.setTextInTile();this.fetchChartData(e,i,function(e){this.CALCULATED_KPI_VALUE=e;this._updateTileModel({data:this.CALCULATED_KPI_VALUE});if(t.oConfig.TILE_PROPERTIES.frameType==n.TwoByOne){t.oKpiTileView.oGenericTile.setFrameType(n.TwoByOne);t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());var i={};i.data=this.CALCULATED_KPI_VALUE;t.getView().getViewData().deferredObj.resolve()}else{t.oKpiTileView.oGenericTile.setFrameType(n.OneByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oNVConfS);this.oKpiTileView.oGenericTile.setState(s.Loaded)}this.setToolTip(null,this.CALCULATED_KPI_VALUE,"COMP");if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible())}},this.logError)},doDummyProcess:function(){var e=this;this.setTextInTile();e._updateTileModel({value:8888,size:l.Auto,frameType:n.OneByOne,state:s.Loading,valueColor:o.Error,indicator:a.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1.2,color:"Good"},{title:"Measure 2",value:.78,color:"Good"},{title:"Measure 3",value:1.4,color:"Error"}]});this.oKpiTileView.oGenericTile.setState(s.Loaded)}});return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorcomparison/ComparisonTile.view", ["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel","sap/m/library"],function(e,i,t,a,o,s,r,l){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorcomparison.ComparisonTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorcomparison.ComparisonTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e=l.Size;var i=this;i.oGenericTileData={};i.oCmprsDataTmpl=new a({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});i.oCmprsChrtTmpl=new o({size:e.Responsive,scale:"{/scale}",data:{template:i.oCmprsDataTmpl,path:"/data"}});i.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:i.oCmprsChrtTmpl});i.oGenericTile=new s({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[i.oNVConfS]});i.oGenericTileModel=new r;i.oGenericTileModel.setData(i.oGenericTileData);i.oGenericTile.setModel(i.oGenericTileModel);return i.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorcontribution/ContributionTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,i,jQuery,t){"use strict";var a=i.DeviationIndicator;var l=i.ValueColor;var o=i.Size;var s=i.LoadState;var n=i.FrameType;var r=e.extend("sap.ushell.components.tiles.indicatorcontribution.ContributionTile",{onInit:function(){this.KPI_VALUE_REQUIRED=false},_processDataForComparisonChart:function(e,i,t,a){var l=this.oConfig.TILE_PROPERTIES.semanticColorContribution;var o=[];var s;var n;for(var r=0;r<e.results.length;r++){var T=e.results[r];var c={};try{c.title=T[t].toString()}catch(e){c.title=""}c.value=Number(T[i]);var u=Number(T[i]);if(this.oConfig.EVALUATION.SCALING==-2){u*=100}var p=this.isCurrencyMeasure(i);n=T[a];s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(u,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,p,n);c.displayValue=s.toString();if(typeof l==="undefined"){c.color="Neutral"}else{c.color=l}if(c&&a){c[a]=n}o.push(c)}return o},fetchChartData:function(e,i,a,l){var o=this;try{var s=this.oConfig.EVALUATION.ODATA_ENTITYSET,n;o.setThresholdValues();if(this.oConfig.TILE_PROPERTIES.semanticMeasure){n=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure}else{n=this.oConfig.EVALUATION.COLUMN_NAME}var r=null;var T=this.oConfig.TILE_PROPERTIES.dimension;var c=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(e);var u=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(o.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(o.oConfig)){if(u){var p=u.Data&&JSON.parse(u.Data)}}var E=o.oTileApi.configuration.getParameterValueAsString("timeStamp");var h=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(o.oConfig.TILE_PROPERTIES.id,E,o.chipCacheTime,o.chipCacheTimeUnit,o.tilePressed);if(p&&!p.rightData||!u||!h&&o.oTileApi.visible.isVisible()||c||i&&o.oTileApi.visible.isVisible()||o.getView().getViewData().refresh){if(o.kpiValueFetchDeferred){o.kpiValueFetchDeferred=false;var d=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var f={};f["0"]=n+",asc";f["1"]=n+",desc";f["2"]=T+",asc";f["3"]=T+",desc";var I=f[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var C=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(o.oRunTimeODataModel,s,n,T,d,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){C.uri+="&$top=3&$orderby="+I[0]+" "+I[2]}else{C.uri+="&$top=3&$orderby="+I[0]+" "+I[1]}this.comparisionChartODataRef=C.model.read(C.uri,null,null,true,function(e){o.kpiValueFetchDeferred=true;var i={};if(e&&e.results&&e.results.length){if(C.unit[0]){o._updateTileModel({unit:e.results[0][C.unit[0].name]});r=C.unit[0].name;i.unit=C.unit[0];i.unit.name=C.unit[0].name}T=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(o.oRunTimeODataModel,s,T);i.dimension=T;o.oConfig.TILE_PROPERTIES.FINALVALUE=e;o.oConfig.TILE_PROPERTIES.FINALVALUE=o._processDataForComparisonChart(o.oConfig.TILE_PROPERTIES.FINALVALUE,n.split(",")[0],T,r);i.data=o.oConfig.TILE_PROPERTIES.FINALVALUE;i.isCurM=o.isACurrencyMeasure(o.oConfig.EVALUATION.COLUMN_NAME);var t={};o.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();t.ChipId=o.oConfig.TILE_PROPERTIES.id;t.Data=JSON.stringify(i);t.CacheMaxAge=Number(o.chipCacheTime);t.CacheMaxAgeUnit=o.chipCacheTimeUnit;t.CacheType=1;var l=o.getLocalCache(t);o.updateDatajobScheduled=false;var c=o.oConfig.TILE_PROPERTIES.id+"data";var p=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(c);if(p){clearTimeout(p);p=undefined}if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(o.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(o.oConfig.TILE_PROPERTIES.id,l);var E=false;if(u){E=true}if(o.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(o.oTileApi,o.oConfig.TILE_PROPERTIES.id,t,E,function(e){if(e){o.cacheTime=e&&e.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(o.oConfig.TILE_PROPERTIES.id,e)}if(o.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(o.oConfig)){jQuery.proxy(o.setTimeStamp(o.cacheTime),o)}})}}else{var h=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(o.oConfig.TILE_PROPERTIES.id),d;if(h){if(!h.CachedTime){h.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()}d=h.Data;if(d){d=JSON.parse(d);if(o.oKpiTileView.getViewName()=="tiles.indicatornumeric.NumericTile"){d.leftData=i}else{d.rightData=i}}h.Data=JSON.stringify(d);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(o.oConfig.TILE_PROPERTIES.id,h)}else{d={};d.rightData=i;l.Data=JSON.stringify(d);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(o.oConfig.TILE_PROPERTIES.id,l)}o.cacheWriteData=i}a.call(o,o.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(e.results.length==0){o.oConfig.TILE_PROPERTIES.FINALVALUE=e;if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(o.oConfig.TILE_PROPERTIES.id)){i=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(o.oConfig.TILE_PROPERTIES.id);i.data=e}else{i.data=e}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(o.oConfig.TILE_PROPERTIES.id,i);a.call(o,o.oConfig.TILE_PROPERTIES.FINALVALUE);o.setNoData()}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(o.oConfig.TILE_PROPERTIES.id,{empty:"empty"});o.setNoData()}},function(e){o.kpiValueFetchDeferred=true;if(e&&e.response){t.error(e.message+" : "+e.request.requestUri);l.call(o,e)}})}}else if(u&&u.Data){var g;var m=o.oConfig&&o.oConfig.TILE_PROPERTIES&&o.oConfig.TILE_PROPERTIES.tileType;if(m.indexOf("DT-")==-1){g=u.Data&&JSON.parse(u.Data)}else{g=u.Data&&JSON.parse(u.Data);g=g.rightData}o.cacheTime=u.CachedTime;if(o.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(o.oConfig)){jQuery.proxy(o.setTimeStamp(o.cacheTime),o)}if(g.data&&g.data.length){if(g.unit){o._updateTileModel({unit:g.data[0][g.unit.name]})}T=g.dimension;o.oConfig.TILE_PROPERTIES.FINALVALUE=g.data;a.call(o,o.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(g&&g.data&&g.data instanceof Array&&g.data.length==0){o.oConfig.TILE_PROPERTIES.FINALVALUE=g.data;a.call(o,o.oConfig.TILE_PROPERTIES.FINALVALUE);o.setNoData()}else{o.setNoData()}}else{o.setNoData()}}catch(e){o.kpiValueFetchDeferred=true;l.call(o,e)}},doProcess:function(e,i){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);this.setTextInTile();this.fetchChartData(e,i,function(e){this.CALCULATED_KPI_VALUE=e;this._updateTileModel({data:this.CALCULATED_KPI_VALUE});if(t.oConfig.TILE_PROPERTIES.frameType==n.TwoByOne){t.oKpiTileView.oGenericTile.setFrameType(n.TwoByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());t.getView().getViewData().deferredObj.resolve()}else{t.oKpiTileView.oGenericTile.setFrameType(n.OneByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oNVConfS);this.oKpiTileView.oGenericTile.setState(s.Loaded)}this.setToolTip(null,this.CALCULATED_KPI_VALUE,"CONT");if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible())}},this.logError)},doDummyProcess:function(){var e=this;e.setTextInTile();e._updateTileModel({value:8888,size:o.Auto,frameType:n.OneByOne,state:s.Loading,valueColor:l.Error,indicator:a.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral"},{title:"EMEA",value:50,color:"Neutral"},{title:"APAC",value:-20,color:"Neutral"}]});this.oKpiTileView.oGenericTile.setState(s.Loaded)}});return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorcontribution/ContributionTile.view", ["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel","sap/m/library"],function(e,i,t,o,a,s,n,r){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorcontribution.ContributionTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorcontribution.ContributionTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e=r.Size;var i=this;i.oGenericTileData={};i.oCmprsDataTmpl=new o({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});i.oCmprsChrtTmpl=new a({size:e.Responsive,scale:"{/scale}",data:{template:i.oCmprsDataTmpl,path:"/data"}});i.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:i.oCmprsChrtTmpl});i.oGenericTile=new s({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[i.oNVConfS]});i.oGenericTileModel=new n;i.oGenericTileModel.setData(i.oGenericTileData);i.oGenericTile.setModel(i.oGenericTileModel);return i.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatordeviation/DeviationTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library"],function(e,i){"use strict";var r=i.ValueColor;var t=i.LoadState;var o=i.FrameType;var l=e.extend("sap.ushell.components.tiles.indicatordeviation.DeviationTile",{onInit:function(){this.KPI_VALUE_REQUIRED=true},doProcess:function(e,i){var r=this;var l,a;l=i.targetValue;var s=Number(e);this.setThresholdValues();if(this.oConfig.EVALUATION.SCALING==-2){s*=100}var u=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(s),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,u,this.CURRENCY_CODE);this.CALCULATED_KPI_VALUE=Number(e);var n={};var A=this.getThresholdsObjAndColor(i).returnColor;var h={value:Number(e),color:A};n.actualValueLabel=a.toString();n.actual=h;n.thresholds=[];n.thresholds=this.getThresholdsObjAndColor(i).arrObj;var C=this.DEFINITION_DATA.EVALUATION_VALUES,E;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){E=Number(l);if(this.oConfig.EVALUATION.SCALING==-2){E*=100}u=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);l=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(E,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,u,this.CURRENCY_CODE);n.targetValue=Number(E);n.targetValueLabel=l.toString()}else{for(var L=0;L<C.length;L++){if(C[L].TYPE==="TA"){E=Number(l);if(this.oConfig.EVALUATION.SCALING==-2){E*=100}u=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);l=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(E,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,u,this.CURRENCY_CODE);n.targetValue=Number(E);n.targetValueLabel=l.toString()}}}if(this.oConfig.EVALUATION.SCALING==-2){n.scale="%"}this._updateTileModel(n);if(this.DEFINITION_DATA.TILE_PROPERTIES.frameType==o.TwoByOne){r.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());r.getView().getViewData().deferredObj.resolve();sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(r.oConfig.TILE_PROPERTIES.id+"defferedRight",false)}else{this.oKpiTileView.oGenericTile.setState(t.Loaded)}this.setToolTip(A,s,"DT");if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){if(r.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible())}}},getThresholdsObjAndColor:function(e){try{var i={};i.arrObj=[];i.returnColor=r.Neutral;var t=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var o,l,a,s;if(t==="MI"){a=Number(e.criticalHighValue)||0;s=Number(e.warningHighValue)||0;if(a&&s){a=window.parseFloat(a);s=window.parseFloat(s);i.arrObj.push({value:a,color:r.Error});i.arrObj.push({value:s,color:r.Critical});if(this.CALCULATED_KPI_VALUE<s){i.returnColor=r.Good}else if(this.CALCULATED_KPI_VALUE<=a){i.returnColor=r.Critical}else{i.returnColor=r.Error}}}else if(t==="MA"){l=Number(e.criticalLowValue)||0;o=Number(e.warningLowValue)||0;if(l&&o){l=window.parseFloat(l);o=window.parseFloat(o);i.arrObj.push({value:l,color:r.Error});i.arrObj.push({value:o,color:r.Critical});if(this.CALCULATED_KPI_VALUE<l){i.returnColor=r.Error}else if(this.CALCULATED_KPI_VALUE<=o){i.returnColor=r.Critical}else{i.returnColor=r.Good}}}else{a=Number(e.criticalHighValue)||0;s=Number(e.warningHighValue)||0;l=Number(e.criticalLowValue)||0;o=Number(e.warningLowValue)||0;if(o&&s&&l&&l){a=window.parseFloat(a);s=window.parseFloat(s);o=window.parseFloat(o);l=window.parseFloat(l);i.arrObj.push({value:a,color:r.Error});i.arrObj.push({value:s,color:r.Critical});i.arrObj.push({value:o,color:r.Critical});i.arrObj.push({value:l,color:r.Error});if(this.CALCULATED_KPI_VALUE<l||this.CALCULATED_KPI_VALUE>a){i.returnColor=r.Error}else if(this.CALCULATED_KPI_VALUE>=l&&this.CALCULATED_KPI_VALUE<=o||this.CALCULATED_KPI_VALUE>=s&&this.CALCULATED_KPI_VALUE<=a){i.returnColor=r.Critical}else{i.returnColor=r.Good}}}return i}catch(e){this.logError(e)}},doDummyProcess:function(){var e=this;this.setTextInTile();e._updateTileModel({actual:{value:120,color:r.Good},targetValue:100,thresholds:[{value:0,color:r.Error},{value:50,color:r.Critical},{value:150,color:r.Critical},{value:200,color:r.Error}],showActualValue:true,showTargetValue:true});this.oKpiTileView.oGenericTile.setState(t.Loaded)}});return l});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatordeviation/DeviationTile.view", ["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,t,a,i,s,l,o,r){"use strict";var u=i.Size;var n=i.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatordeviation.DeviationTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatordeviation.DeviationTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");var e="Lorem ipsum";var t="Lorem ipsum";var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(a.title&&a.subTitle){e=a.title;t=a.subTitle}var i={subheader:t,header:e,footerNum:"",footerComp:"",frameType:"OneByOne",state:n.Loading,scale:""};var c=new s({value:"{value}",color:"{color}"});this.oBCTmpl=new l({size:u.Responsive,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:c,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oBCTmpl});this.oGenericTile=new o({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var h=new r;h.setData(i);this.oGenericTile.setModel(h);return this.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatornumeric/NumericTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library"],function(e,i){"use strict";var t=i.DeviationIndicator;var o=i.ValueColor;var s=i.LoadState;var l=i.FrameType;var a=e.extend("sap.ushell.components.tiles.indicatornumeric.NumericTile",{onInit:function(){this.KPI_VALUE_REQUIRED=true},doProcess:function(e,i){var t=this;this.CALCULATED_KPI_VALUE=e;var o=this.getTrendColor(i);var a=this.getTrendIndicator(i.trendValue);var n="";var r=this.CALCULATED_KPI_VALUE;if(this.oConfig.EVALUATION.SCALING==-2){r*=100;this.getView().oNVConfContS.setFormatterValue(false)}var T=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);n=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(r),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,T,this.CURRENCY_CODE);if(this.oConfig.EVALUATION.SCALING==-2){this._updateTileModel({scale:"%"})}this._updateTileModel({value:n.toString(),valueColor:o,indicator:a});if(t.oConfig.TILE_PROPERTIES.frameType==l.OneByOne){this.oKpiTileView.oGenericTile.setState(s.Loaded);this.setToolTip(o,r,"NT")}else{t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());t.getView().getViewData().deferredObj.resolve();sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(t.oConfig.TILE_PROPERTIES.id+"defferedLeft",false)}this.setToolTip(o,r,"NT");if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,t.oTileApi.visible.isVisible())}}},doDummyProcess:function(){var e=this;this.setTextInTile();if(!(e.oConfig.BLANKTILE||e.oConfig.TILE_PROPERTIES.blankTile)){e._updateTileModel({value:"10.34",scale:"M",valueColor:o.Neutral,indicator:t.None})}else{this.oKpiTileView.oNVConfContS.setIcon("sap-icon://BusinessSuiteInAppSymbols/icon-multiple-charts")}this.oKpiTileView.oGenericTile.setState(s.Loaded)}});return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatornumeric/NumericTile.view", ["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/m/NumericContent","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(e,i,t,o,a,s,n){"use strict";var l=o.DeviationIndicator;var r=o.ValueColor;var u=o.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("sap.ushell.components.tiles.indicatornumeric.NumericTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatornumeric.NumericTile"},createContent:function(){var e="Lorem ipsum";var i="Lorem ipsum";var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(t.title&&t.subTitle){e=t.title;i=t.subTitle}var o={subheader:i,header:e,footerNum:"",footerComp:"",scale:"",unit:"",value:"",size:"Auto",frameType:"OneByOne",state:u.Loading,valueColor:r.Neutral,indicator:l.None,title:"",footer:"",description:""};this.oNVConfContS=new a({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",valueColor:"{/valueColor}",size:"{/size}",formatterValue:true,truncateValueTo:5,nullifyValue:false});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oNVConfContS});this.oGenericTile=new s({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var c=new n;c.setData(o);this.oGenericTile.setModel(c);return this.oGenericTile}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/sbtilecontent", ["sap/m/TileContent","sap/m/TileContentRenderer","sap/ui/core/Control"],function(e,t,i){"use strict";var n=i.extend("numeric.TileContent_Timestamp",{ontap:function(e){if(this.getParent().getRefreshOption()){e.preventDefault();e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}this.getParent().fireRefresh()}},renderer:function(e,t){e.write("<div");e.writeElementData(t);e.addClass("sapMTileCntFtrTxt");if(t.getParent().getRefreshOption()){e.addClass("sapMLnk")}e.writeClasses();e.addStyle("position","absolute");e.addStyle("z-index","2");e.addStyle(e.getConfiguration().getRTL()?"left":"right","auto");e.writeStyles();e.write(">");var i=t.getParent().getTimestamp();if(i){if(!t.getParent().getRefreshOption()){e.writeEscaped(i)}else if(e.getConfiguration().getRTL()){e.writeEscaped(i+"");e.writeIcon("sap-icon://refresh","sapMCmpTileUnitInner")}else{e.writeIcon("sap-icon://refresh","sapMCmpTileUnitInner");e.writeEscaped(""+i)}}e.write("</div>")}});return e.extend("sap.ushell.components.tiles.sbtilecontent",{metadata:{properties:{timestamp:{type:"string"},refreshOption:{type:"boolean"}},events:{refresh:{}}},init:function(){this.addDependent(this._oTimestamp=new n)},getAltText:function(){var t=e.prototype.getAltText.apply(this,arguments);if(this.getTimestamp()){t+=(t===""?"":"\n")+this.getTimestamp()}return t},renderer:{_renderFooter:function(e,i){t._renderFooter.apply(this,arguments);e.renderControl(i._oTimestamp)}}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/utils", ["sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/Locale","sap/ushell/services/ClientSideTargetResolution/PrelaunchOperations","sap/ushell/resources","sap/ui/thirdparty/datajs","sap/ui/core/mvc/View","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/m/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/IconPool","sap/ui/core/Icon","sap/m/SelectDialog","sap/m/StandardListItem","sap/m/Text","sap/m/TableSelectDialog","sap/m/Column","sap/m/ColumnListItem","sap/ui/core/CustomData","sap/ui/core/Item","sap/m/Label","sap/ui/model/Sorter","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/format/NumberFormat"],function(e,t,a,i,n,r,s,l,o,u,p,c,g,d,_,f,b,y,I,v,m,V,w,h,jQuery,S,x){"use strict";var T=o.MessageType;var P=o.ValueState;var D=o.mvc.ViewType;var C=u.ButtonType;var R={};R.isInitial=function(e){return e==="App Launcher  Static"||e==="App Launcher  Dynamic"||e==="Target Mapping"};R.getResourceBundleModel=function(){return n.i18nModel};R.getEmptyRowObj=function(e){return{name:"",mandatory:false,value:"",isRegularExpression:false,defaultValue:"",valEnabled:false||!e,defValEnabled:true,editable:e}};R.getEmptyTileActionsRowObj=function(e){var t=R.getResourceBundleModel().getResourceBundle();return{menu_title:"",target_type:t.getText("configuration.tile_actions.table.target_type.url"),navigation_target:"",action:"",icon:"",isTargetTypeIntent:false,editable:e}};R.getTileNavigationActionsRows=function(e,t){var a=[],i=[];i=this.getTileNavigationActions(e);if(i.length){for(var n=0;n<i.length;n++){a.push(A(i[n],t))}}else{a=[this.getEmptyTileActionsRowObj(t)]}return a};R.getTileNavigationActions=function(e){var t=[],a="";var i=e.bag.getBag("tileNavigationActions");if(i.getPropertyNames().indexOf("tile_navigation_actions")>=0){t=JSON.parse(i.getProperty("tile_navigation_actions"));for(var n=0;n<t.length;n++){if(t[n].text){if(i.getTextNames().indexOf("action_tile_"+(n+1))>=0){a=i.getText("action_tile_"+(n+1))}t[n].text=a}}}return t};var A=function(e,t){var a={},i=R.getResourceBundleModel().getResourceBundle();a.menu_title=e.text;a.icon=e.icon;if(e.targetURL.charAt(0)==="#"){a.target_type=i.getText("configuration.tile_actions.table.target_type.intent");var n=e.targetURL.split("-");a.navigation_target=n[0].substring(1,n[0].length);a.action=n[1];a.isTargetTypeIntent=true}else{a.target_type=i.getText("configuration.tile_actions.table.target_type.url");a.navigation_target=e.targetURL;a.action="";a.isTargetTypeIntent=false}a.editable=t;return a};R.tileActionsRows2TileActionsArray=function(e){var t=[];for(var a=0;a<e.length;a++){if(e[a].menu_title){t.push(E(e[a]))}}return t};var E=function(e){var t={};t.text=e.menu_title;t.icon=e.icon;if(e.action){t.targetURL="#"+e.navigation_target+"-"+e.action}else{t.targetURL=e.navigation_target}return t};R.populateTileNavigationActionsBag=function(e,t){e.setProperty("tile_navigation_actions",JSON.stringify(t));for(var a=0;a<t.length;a++){var i=t[a].text;e.setText("action_tile_"+(a+1),i)}};R.getDefaultFormFactors=function(){return{appDefault:false,manual:{desktop:true,tablet:true,phone:true},defaultParam:true}};R.buildFormFactorsObject=function(e){return{appDefault:e.getProperty("/config/appFormFactor"),manual:{desktop:e.getProperty("/config/desktopChecked"),tablet:e.getProperty("/config/tabletChecked"),phone:e.getProperty("/config/phoneChecked")}}};R.tableHasDuplicateParameterNames=function(e){var t={};for(var a=0;a<e.length;a++){var i=e[a].name;if(i!==""){if(t[i]){return true}t[i]=true}}return false};R.tableHasInvalidSapPrelaunchOperationValue=function(e){for(var t=0;t<e.length;t++){if(e[t].name==="sap-prelaunch-operations"){if(i.parseAndValidateOperations(e[t].defaultValue)===null){return false}break}}return true};R.getMappingSignatureString=function(e,t){var a="";for(var i=0;i<e.length;i++){if(e[i].name){a+=M(e[i])+"&"}}return t?a+"*=*":a.substring(0,a.length-1)};var M=function(e){var t="";if(e.mandatory){if(e.isRegularExpression){t="{"+e.name+"="+encodeURIComponent(e.value)+"}"}else{t=e.name+"="+encodeURIComponent(e.value)}}else{t="["+e.name+"="+encodeURIComponent(e.defaultValue)+"]"}return t};R.getMappingSignatureTableData=function(e,t){var a=[];var i=e.split("&");for(var n=0;n<i.length;n++){var r=i[n];if(r!=="*=*"){a.push(k(i[n],t))}}return a};var k=function(e,t){var a={};if(e.charAt(0)==="["){a.mandatory=false;a.isRegularExpression=false;a.value="";e=e.substring(1,e.length-1);a.name=e.substring(0,e.indexOf("="));a.defaultValue=decodeURIComponent(e.substring(e.indexOf("=")+1))}else{a.mandatory=true;a.defaultValue="";if(e.charAt(0)==="{"){a.isRegularExpression=true;e=e.substring(1,e.length-1)}else{a.isRegularExpression=false}a.name=e.substring(0,e.indexOf("="));a.value=decodeURIComponent(e.substring(e.indexOf("=")+1))}a.editable=t;if(t){a.valEnabled=a.mandatory;a.defValEnabled=!a.mandatory}else{a.valEnabled=true;a.defValEnabled=true}return a};R.getAllowUnknownParametersValue=function(e){if(e&&e.substring(e.length-3,e.length)==="*=*"){return true}return false};R.getMappingSignature=function(e,t){var a=t?"allowed":"ignored";var i=new RegExp("%%UserDefault[.].+%%");var n=[];var r={parameters:{},additional_parameters:a};e.forEach(function(e){r.parameters[e.name]={required:e.mandatory,rename_to:e.rename_to};if(e.defaultValue){n=i.exec(e.defaultValue);if(n){e.defaultValue=n[0]}r.parameters[e.name].defaultValue={value:e.defaultValue}}if(e.value){n=i.exec(e.value);if(n){e.value=n[0]}r.parameters[e.name].filter={value:e.value};if(e.isRegularExpression){r.parameters[e.name].filter.format="regexp"}}});return r};R.getSignatureTableData=function(e,t){var a=[];var i={};var n={};var r=e.parameters;for(var s in r){n=r[s];i={};i.editable=t;i.name=s;i.mandatory=n.required;if(n.rename_to){i.rename_to=n.rename_to}else{i.rename_to=n.renameTo}if(t){i.valEnabled=i.mandatory;i.defValEnabled=!i.mandatory}else{i.valEnabled=true;i.defValEnabled=true}if(n.filter){i.value=n.filter.value;if(n.filter.format&&n.filter.format==="regexp"){i.isRegularExpression=true}}if(n.defaultValue){i.defaultValue=n.defaultValue.value}a.push(i)}return a};R.getTranslatedTitle=function(e){if(e.bag){var t=e.bag.getBag("tileProperties");if(t.getTextNames().indexOf("display_title_text")>=0){return t.getText("display_title_text")}}if(e.title){return e.title.getTitle()}if(e.preview){return e.preview.getTitle()}return""};R.getTranslatedSubtitle=function(e,t){if(e.bag){var a=e.bag.getBag("tileProperties");if(a.getTextNames().indexOf("display_subtitle_text")>=0){return a.getText("display_subtitle_text")}}if(typeof t.display_subtitle_text==="string"){return t.display_subtitle_text}if(e.preview&&e.preview.getDescription&&e.preview.getDescription()){return e.preview.getDescription()}return""};R.getTranslatedProperty=function(e,t,a){if(e.bag){var i=e.bag.getBag("tileProperties");if(i.getTextNames().indexOf(a)>=0){return i.getText(a)}}return t[a]};R.getActionConfiguration=function(e,t){var a=e.configuration.getParameterValueAsString("tileConfiguration");var i=JSON.parse(a||"{}"),n;if(typeof t==="undefined"){t=e.configurationUi.isEnabled()}if(t){n=R.getResourceBundleModel().getResourceBundle()}i.semantic_object=i.semantic_object||(t?"["+n.getText("configuration.semantic_object")+"]":"");i.semantic_action=i.semantic_action||(t?"["+n.getText("configuration.semantic_action")+"]":"");i.navigation_provider=i.navigation_provider||"";i.navigation_provider_role=i.navigation_provider_role||"";i.navigation_provider_instance=i.navigation_provider_instance||"";i.target_application_id=i.target_application_id||"";i.target_application_alias=i.target_application_alias||"";i.display_info_text=i.display_info_text||"";i.editable=true;if(e.configurationUi&&e.configurationUi.isReadOnly){if(e.configurationUi.isReadOnly()){i.editable=false}}return i};R.getViewConfiguration=function(e){var t=e.getViewData();var a=t.chip;var i=R.getAppLauncherConfig(a,true,true);return i};R.getConfigurationUi=function(e,t){var a,i,n,r,o;var u=e.getViewData();var p=R.getViewConfiguration(e);var c=new l({config:p,tileModel:e.getModel()});return s.create({type:D.XML,viewData:u,viewName:t}).then(function(t){t.setModel(c);a=t.byId("navigation_semantic_objectInput")||t.byId("semantic_objectInput");if(a){a.getModel().setProperty("/enabled",p.navigation_use_semantic_object);a.getModel().setProperty("/value",p.semantic_object||p.navigation_semantic_object)}i=t.byId("navigation_provider_roleInput");if(i){i.getModel().setProperty("/value",p.navigation_provider_role)}n=t.byId("navigation_provider_instanceInput");if(n){n.getModel().setProperty("/value",p.navigation_provider_instance)}r=t.byId("target_application_aliasInput");if(r){r.getModel().setProperty("/value",p.target_application_alias)}o=t.byId("targetTypeInput");if(o){if(!t.getModel().getProperty("/config/transaction")){t.getModel().setProperty("/config/transaction",{})}if(!t.getModel().getProperty("/config/web_dynpro")){t.getModel().setProperty("/config/web_dynpro",{})}if(e.getModel().getProperty("/config/navigation_provider")==="LPD"){R.displayLpdCustApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WCF"){o.setSelectedKey("WCF");R.displayWCFApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="SAPUI5"||e.getModel().getProperty("/config/navigation_provider")===""){o.setSelectedKey("SAPUI5");R.displaySapui5ApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="TR"){R.displayTransactionApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WDA"){R.displayWebDynproApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URL"){R.displayURLApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URLT"){R.displayURLTApplicationTypeFields(t);c.setProperty("/config/editable",false);c.setProperty("/config/manualFormFactor",false)}}return t})};R._updateTilePropertiesTexts=function(e,t){var a=t.getTextNames(),i=e.getModel();a.forEach(function(e){i.setProperty("/data/"+e,t.getText(e));i.setProperty("/config/"+e,t.getText(e))})};R._updateTileConfiguration=function(e,t){var a=e.getModel(),i=JSON.parse(t),n;Object.keys(i).forEach(function(e){n=i[e];a.setProperty("/data/"+e,n);a.setProperty("/config/"+e,n);if(e==="navigation_target_url"){a.setProperty("/nav/"+e,n)}})};R.aData=[];R.aActionData=[];R.aRoleData=[];R.aAliasData=[];R.objectSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r;if(a!==undefined){i=e.getParameter("itemsBinding");n=new p("name",c.Contains,a);r=new p("obj",c.Contains,a);t.push(r);t.push(n);i.filter(new p(t,false))}};R.actionSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n;if(a!==undefined){i=e.getParameter("itemsBinding");n=new p("text",c.Contains,a);t.push(n);i.filter(new p(t,false))}};R.roleSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r;if(a!==undefined){i=e.getParameter("itemsBinding");n=new p("role",c.Contains,a);r=new p("instance",c.Contains,a);t.push(n);t.push(r);i.filter(new p(t,false))}};R.instanceSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r,s,l;i=e.getSource().getCustomData();n=i[0].getValue();if(a!==undefined){r=e.getParameter("itemsBinding");if(a!==""){l=new p("instance",c.Contains,a);t.push(l)}if(n!==""){s=new p("role",c.EQ,n);t.push(s)}if(t.length>0){r.filter(new p(t,true))}}};R.instanceSuggest=function(e,t){var a=e.getView(),i=[],n=t.getParameter("value"),r,s,l,o,u;r=a.byId("navigation_provider_roleInput");s=r.getValue();n=t.getParameter("suggestValue");if(n!==""){u=new p("instance",c.Contains,n);i.push(u)}if(s!==""){o=new p("role",c.EQ,s);i.push(o)}if(i.length>0){l=t.oSource.getBinding("suggestionItems");l.filter(new p(i,true))}};R.aliasSuggest=function(e,t){var a=e.getView(),i=[],n=t.getParameter("value"),r,s,l,o,u;r=a.byId("navigation_provider_instanceInput");s=r.getValue();n=t.getParameter("suggestValue");if(n!==""){u=new p("alias",c.Contains,n);i.push(u)}if(s!==""){o=new p("instance",c.EQ,s);i.push(o)}if(i.length>0){l=t.oSource.getBinding("suggestionItems");l.filter(new p(i,true))}};R.aliasSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r,s,l;i=e.getSource().getCustomData();n=i[0].getValue();if(a!==undefined){r=e.getParameter("itemsBinding");s=new p("instance",c.EQ,n);if(a!==""){l=new p("alias",c.Contains,a);t.push(l)}t.push(s);r.filter(new p(t,true))}};R.objectSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new p("name",c.Contains,t);a.push(n);i.filter(a)}};R.actionSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new p("text",c.Contains,t);a.push(n);i.filter(a)}};R.roleSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new p("role",c.Contains,t);a.push(n);i.filter(a)}};R.instanceSelectUpdateDialog=function(e,t){var a=[],i,n=e.getBinding("items"),r,s,l;i=e.getCustomData();s=i[0].getValue();if(t!==undefined){r=new p("instance",c.Contains,t);a.push(r)}if(s!==""){l=new p("role",c.EQ,s);a.push(l)}if(a.length>0){n.filter(a,true)}};R.aliasSelectUpdateDialog=function(e,t){var a=[],i,n,r=e.getBinding("items"),s,l;i=e.getCustomData();n=i[0].getValue();if(t!==undefined){l=new p("alias",c.Contains,t);a.push(l)}if(n!==""){s=new p("instance",c.EQ,n);a.push(s)}if(a.length>0){r.filter(a,true)}};R.sSelectedColor=(jQuery(".sapMStdTileIconDiv").css("color")||"#007cc0").split(" ").join("");R.sDeselectedColor=(jQuery(".sapMLabel:not(.sapFioriDropZoneText )").css("color")||"#666666").split(" ").join("");R.iconSelect=function(e,t){e.setColor(t?R.sSelectedColor:R.sDeselectedColor);e.setActiveColor(t?R.sDeselectedColor:R.sSelectedColor)};R.onSelectIcon=function(e,t,a,i){var n=e.getView().getModel(),r;if(t){r=n.getProperty("/config/tile_actions_selected_icon")}else{r=n.getProperty("/config/selected_icon")}if(r){R.iconSelect(r,false)}r=i.getSource();R.iconSelect(r,true);n.setProperty("/config/ok.enabled",true);if(t){n.setProperty("/config/tile_actions_selected_icon",r)}else{n.setProperty("/config/selected_icon",r)}e.byId("selectIconDialog").setTitle(r.getSrc())};R.onSelectIconClose=function(e){e.byId("selectIconDialog").close()};R.onSelectIconOk=function(e,t){var a=e.getModel().getProperty("/config/selected_icon");if(!t){e.getModel().setProperty("/config/display_icon_url",a.getSrc());e.byId("iconInput").setValueState(P.None)}else{a=e.getModel().getProperty("/config/tile_actions_selected_icon");if(a){t.setValue(a.getSrc());t.setValueState(P.None)}}R.onSelectIconClose(e)};R.iconSelectOnValueHelpRequest=function(e,a,i){var n=e.getView().getModel();var r=e.getView().byId("icons");var s=g.getIconCollectionNames();var l=e.getView().byId("selectIconDialog");var o=e.getView().byId("ok");var u,p,c,_,f,b,y,I=false;r.destroyContent();if(i){c=t.getElementById(a.getParameter("id"));p=c.getValue()}else{p=n.getProperty("/config/display_icon_url")}o.attachEventOnce("press",function(){R.onSelectIconOk(e.getView(),c)});s.sort();s=s.filter(function(e){if(e==="BusinessSuiteInAppSymbols"){I=true;return false}return true});if(I){s.push("BusinessSuiteInAppSymbols")}for(f=0;f<s.length;f+=1){_=g.getIconNames(s[f]);_.sort();for(b=0;b<_.length;b+=1){y=g.getIconURI(_[b],s[f]);r.addContent(new d({height:"38px",press:R.onSelectIcon.bind(null,e,i,c),size:"2rem",src:y,tooltip:y,width:"38px"}))}}u=r.getContent();n.setProperty("/config/ok.enabled",false);l.bindProperty("title",{model:"i18n",path:"configuration.select_icon"});for(f=0;f<u.length;f+=1){if(u[f].getSrc()===p){if(i){n.setProperty("/config/tile_actions_selected_icon",u[f])}else{n.setProperty("/config/selected_icon",u[f])}R.iconSelect(u[f],true);n.setProperty("/config/ok.enabled",true);l.setTitle(p)}else{R.iconSelect(u[f],false)}}l.open()};R.objectSelectOnValueHelpRequest=function(e,a,i){var n=e.getView();var r=R.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_object");var s;var o;var u=new l;var p=new _("semantic_object_select_dialog",{title:r,search:R.objectSelectDoSearch,liveChange:R.objectSelectDoSearch}),c=new f({title:"{obj}"});if(i){s=t.getElementById(a.getParameter("id"))}else{s=n.byId("semantic_objectInput")||n.byId("navigation_semantic_objectInput")}o=s.getValue();p.open(o);u.setData(e.aDefaultObjects.concat(R.aData));p.bindAggregation("items","/",c);p.setModel(u);R.objectSelectUpdateDialog(p,o);p.attachCancel(function(e){s.setValue(o);if(!i){s.fireChange()}p.destroy();p=null});p.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){s.setValue(t.getTitle());if(!i){s.fireChange()}}p.destroy();p=null})};R.actionSelectOnValueHelpRequest=function(e,a,i){var n=e.getView();var r=R.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_action");var s;var o;var u=new l;var p=new _("semantic_action_select_dialog",{title:r,search:R.actionSelectDoSearch,liveChange:R.actionSelectDoSearch}),c=new f({title:"{text}"});if(i){s=t.getElementById(a.getParameter("id"))}else{s=n.byId("semantic_actionInput")||n.byId("navigation_semantic_actionInput")}o=s.getValue();p.open(o);u.setData(R.aActionData);p.bindAggregation("items","/items",c);p.setModel(u);R.actionSelectUpdateDialog(p,o);p.attachCancel(function(e){s.setValue(o);if(!i){s.fireChange()}p.destroy();p=null});p.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){s.setValue(t.getTitle());if(!i){s.fireChange();s.fireLiveChange({newValue:t.getTitle()})}}p.destroy();p=null})};R.roleSelectOnValueHelpRequest=function(e){var t=e.getView(),a=R.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role"),i,n,r,s=new l,o=new y("role_select_dialog",{title:a,search:R.roleSelectDoSearch,liveChange:R.roleSelectDoSearch,columns:[new I({header:[new b({text:R.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role")})]}),new I({header:[new b({text:R.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance")})]})]}),u=new v({cells:[new b({text:"{role}"}),new b({text:"{instance}"})]});i=t.byId("navigation_provider_roleInput");n=t.byId("navigation_provider_instanceInput");r=i.getValue();o.open(r);s.setData(e.aDefaultObjects.concat(R.aRoleData));o.bindAggregation("items","/",u);o.setModel(s);R.roleSelectUpdateDialog(o,r);o.attachCancel(function(e){i.setValue(r);i.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){i.setValue(t.getCells()[0].getText());n.setValue(t.getCells()[1].getText());i.fireChange();n.fireChange()}o.destroy();o=null})};R.instanceSelectOnValueHelpRequest=function(e){var t=e.getView();var a;var i=R.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance");var n;var r;var s=new l;var o=new _("instance_select_dialog",{title:i,search:R.instanceSelectDoSearch,liveChange:R.instanceSelectDoSearch}),u=new f({title:"{instance}"});n=t.byId("navigation_provider_instanceInput");r=n.getValue();a=t.byId("navigation_provider_roleInput").getValue();o.addCustomData(new m({key:"role",value:a}));o.open(r);s.setData(e.aDefaultObjects.concat(R.aRoleData));o.bindAggregation("items","/",u);o.setModel(s);R.instanceSelectUpdateDialog(o,r);o.attachCancel(function(e){n.setValue(r);n.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){n.setValue(t.getTitle());n.fireChange()}o.destroy();o=null})};R.applicationAliasSelectOnValueHelpRequest=function(e){var t=e.getView();var a=R.getResourceBundleModel().getResourceBundle().getText("configuration.target_application_alias");var i;var n;var r;var s=new l;var o=new _("alias_select_dialog",{title:a,search:R.aliasSelectDoSearch,liveChange:R.aliasSelectDoSearch}),u=new f({title:"{alias}"});i=t.byId("target_application_aliasInput");n=i.getValue();r=t.byId("navigation_provider_instanceInput").getValue();o.addCustomData(new m({key:"instance",value:r}));o.open(n);s.setData(e.aDefaultObjects.concat(R.aAliasData));o.bindAggregation("items","/",u);o.setModel(s);R.aliasSelectUpdateDialog(o,n);o.attachCancel(function(e){i.setValue(n);i.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){i.setValue(t.getTitle());i.fireChange()}o.destroy();o=null})};R.onTargetTypeChange=function(e){var a=e.getParameter("id");var i=t.getElementById(a).getParent().getCells();var n=e.getSource().getSelectedKey();if(n==="INT"){i[3].setEnabled(true);i[2].setShowValueHelp(true);i[2].setValue("")}else{i[2].setShowValueHelp(false);i[2].setValue("");i[3].setEnabled(false);i[3].setValue("")}};R.addTileActionsRow=function(e){var t=e.getModel();var a=t.getProperty("/config/tile_actions_rows");var i=this.getEmptyTileActionsRowObj();a.push(i);t.setProperty("/config/tile_actions_rows",a)};R.deleteTileActionsRow=function(e){var t=e.getModel();var a=t.getProperty("/config/tile_actions_rows");var i=e.byId("tileActions");var n=i.getSelectedIndices();var r=n.sort(function(e,t){return t-e}).slice();for(var s=0;s<r.length;s++){i.removeSelectionInterval(r[s],r[s]);a.splice(r[s],1)}t.setProperty("/config/tile_actions_rows",a)};R.checkInput=function(e,t){var a=R.getResourceBundleModel().getResourceBundle(),i=e.byId("iconInput"),n=e.byId("useLpdCheckbox"),r=e.byId("navigation_semantic_objectInput")||e.byId("semantic_objectInput"),s=e.byId("navigation_semantic_actionInput")||e.byId("semantic_actionInput"),l=P.None,o=null,u=String(t.getParameter("newValue")||"").trim();switch(t.getSource()){case i:if(u!==""&&u.substring(0,11)!=="sap-icon://"){l=P.Error;o=a.getText("configuration.display_icon_url.warning")}break;case n:if(!n.getSelected()){s.setValueState(P.None);r.setValueState(P.None)}break;case r:if(/[-#&? ]/.test(u)){l=P.Error;o=a.getText("configuration.semantic_object.error_invalid_chars")}else if(u===""){l=P.Error}break;case s:if(/[-#&? ]/.test(u)){l=P.Error;o=a.getText("configuration.semantic_action.error_invalid_chars")}else if(u===""){l=P.Error}break;default:break}if(l){t.getSource().setValueState(l);if(o!==null){t.getSource().setValueStateText(o||"")}}};R.checkInputOnSaveConfig=function(e){var t=e.byId("iconInput");var a=e.byId("navigation_semantic_objectInput");var i=e.byId("navigation_semantic_actionInput");var n=e.byId("useLpdCheckbox");var r=R.getResourceBundleModel().getResourceBundle();var s=false;if(t.getValue()!==""&&!R.isIconURIValid(t.getValue())){t.setValueState(P.Error);t.setValueStateText(r.getText("configuration.display_icon_url.warning"));s=true}if(n.getSelected()&&/[-#&? ]/.test(a.getValue())){a.setValueState(P.Error);a.setValueStateText(r.getText("configuration.semantic_object.error_invalid_chars"));s=true}else if(n.getSelected()&&a.getValue()===""){a.setValueState(P.Error);s=true}if(/[-#&? ]/.test(i.getValue())){i.setValueState(P.Error);i.setValueStateText(r.getText("configuration.semantic_action.error_invalid_chars"));s=true}else if(n.getSelected()&&i.getValue()===""){i.setValueState(P.Error);s=true}return s};R.checkTileActions=function(e){var t=e.getModel().getProperty("/config/tile_actions_rows");var a=R.getResourceBundleModel().getResourceBundle();var i=false;for(var n=0;n<t.length;n++){if(!t[n].menu_title&&(t[n].navigation_target||t.length>1)){t[n].valueState=P.Error;i=true}else{t[n].valueState=P.None}if(t[n].icon){if(!R.isIconURIValid(t[n].icon)){t[n].iconValueState=P.Error;t[n].iconValueStateText=a.getText("configuration.display_icon_url.warning");i=true}}}e.getModel().setProperty("/config/tile_actions_rows",t);return i};R.isIconURIValid=function(e){var t=[];var a="";var i="";var n="";t=/sap-icon:\/\/(.+)\//.exec(e);if(t){a=t[1];t=/\/\/.+\/(.+)/.exec(e);if(t){i=t[1]}else{i=""}n=g.getIconURI(i,a);if(n!==e){return false}}else{t=/sap-icon:\/\/(.+)/.exec(e);if(t){i=t[1];if(!g.getIconInfo(i)){return false}}else{return false}}return true};R.checkTMInput=function(e,t){var a=R.getResourceBundleModel().getResourceBundle(),i=e.byId("semantic_objectInput"),n=e.byId("semantic_actionInput"),r=e.byId("target_application_descriptionInput"),s=e.byId("target_application_urlInput"),l=e.byId("target_application_componentInput"),o=e.byId("navigation_provider_roleInput"),u=e.byId("navigation_provider_instanceInput"),p=e.byId("target_application_aliasInput"),c=e.byId("target_application_idInput"),g=String(t.getParameter("newValue")||"").trim(),d=P.None,_=null;switch(t.getSource()){case i:if(/[-#&? ]/.test(g)){d=P.Error;_=a.getText("configuration.semantic_object.error_invalid_chars")}if(n.getValue()===""){n.setValueState(P.Error)}break;case n:if(/[-#&? ]/.test(g)){d=P.Error;_=a.getText("configuration.semantic_action.error_invalid_chars")}else if(g===""){d=P.Error}break;case r:if(g===""){d=P.Error}break;case s:if(g!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(g)){d=P.Error;_=a.getText("configuration.target_application.url.error_invalid_chars")}break;case l:if(g===""){d=P.Error}else if(g.substring(0,17)==="SAPUI5.Component="){d=P.Error;_=a.getText("configuration.target_application.component.error_invalid_input")}break;case o:if(g===""){d=P.Error}else if(!/^[\w/]+$/.test(g)){d=P.Error;_=a.getText("configuration.target_application.role.error_invalid_chars")}break;case u:if(g===""){d=P.Error}else if(!/^[\w/]+$/.test(g)){d=P.Error;_=a.getText("configuration.target_application.instance.error_invalid_chars")}break;case p:if(g===""&&c.getValue()===""){d=P.Error;_=a.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&c.getValue()!==""){d=P.Error;_=a.getText("configuration.target_application.alias_id.warning");c.setValueState(d);c.setValueStateText(_)}else{c.setValueState(P.None)}break;case c:if(g===""&&p.getValue()===""){d=P.Error;_=a.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&p.getValue()!==""){d=P.Error;_=a.getText("configuration.target_application.alias_id.warning");p.setValueState(d);p.setValueStateText(_)}else if(g!==""&&!/^[A-Fa-f0-9]+$/.test(g)){d=P.Error;_=a.getText("configuration.target_application.alias_id.error_invalid_chars")}else{p.setValueState(P.None)}break;default:break}if(d){t.getSource().setValueState(d);if(_!==null){t.getSource().setValueStateText(_||"")}}};R.checkTMInputOnSaveConfig=function(e){var t=R.getResourceBundleModel().getResourceBundle();var a=e.byId("semantic_objectInput");var i=e.byId("semantic_actionInput");var n=e.byId("target_application_descriptionInput");var r=e.byId("target_application_urlInput");var s=e.byId("target_application_componentInput");var l=e.byId("navigation_provider_roleInput");var o=e.byId("navigation_provider_instanceInput");var u=e.byId("target_application_aliasInput");var p=e.byId("target_application_idInput");var c=e.byId("targetTypeInput");var g=e.byId("target_transactionInput");var d=e.byId("target_web_dynpro_applicationInput");var _=e.byId("target_wcf_application_idInput");var f=e.byId("desktopCB");var b=e.byId("tabletCB");var y=e.byId("phoneCB");var I=false;a.setValue(a.getValue().trim());if(/[-#&? ]/.test(a.getValue())){a.setValueState(P.Error);a.setValueStateText(t.getText("configuration.semantic_object.error_invalid_chars"));I=true}i.setValue(i.getValue().trim());if(/[-#&? ]/.test(i.getValue())){i.setValueState(P.Error);i.setValueStateText(t.getText("configuration.semantic_action.error_invalid_chars"));I=true}else if(i.getValue()===""){i.setValueState(P.Error);I=true}var v=e.getModel().getProperty("/config/navigation_provider"),m;if(v==="SAPUI5"){if(n.getValue()===""){n.setValueState(P.Error);I=true}if(r.getValue()!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(r.getValue())){r.setValueState(P.Error);r.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}if(s.getValue()===""){s.setValueState(P.Error);I=true}else if(s.getValue().substring(0,17)==="SAPUI5.Component="){s.setValueState(P.Error);s.setValueStateText(t.getText("configuration.target_application.component.error_invalid_input"));I=true}}else if(v==="LPD"){if(l.getValue()===""){l.setValueState(P.Error);I=true}if(!/^[\w]+$/.test(l.getValue())){l.setValueState(P.Error);m=t.getText("configuration.target_application.role.error_invalid_chars");l.setValueStateText(m);I=true}if(o.getValue()===""){o.setValueState(P.Error);I=true}if(!/^[\w]+$/.test(o.getValue())){o.setValueState(P.Error);m=t.getText("configuration.target_application.instance.error_invalid_chars");o.setValueStateText(m);I=true}if(u.getValue()===""&&p.getValue()===""){m=t.getText("configuration.target_application.alias_id.warning");u.setValueState(P.Error);u.setValueStateText(m);p.setValueState(P.Error);p.setValueStateText(m);I=true}if(u.getValue()!==""&&p.getValue()!==""){m=t.getText("configuration.target_application.alias_id.warning");u.setValueState(P.Error);u.setValueStateText(m);p.setValueState(P.Error);p.setValueStateText(m);I=true}if(p.getValue()!==""&&!/^[A-Fa-f0-9]+$/.test(p.getValue())){p.setValueState(P.Error);p.setValueStateText(t.getText("configuration.target_application.alias_id.error_invalid_chars"));I=true}}else if(v==="TR"){if(g.getValue()===""){g.setValueState(P.Error);I=true}}else if(v==="WDA"){if(d.getValue()===""){d.setValueState(P.Error);I=true}}else if(v==="WCF"){if(_.getValue()===""){_.setValueState(P.Error);I=true}}else if(v==="URL"){if(r.getValue()===""){r.setValueState(P.Error);I=true}else if(!/^[-~+,;:?%&#=/.\w]+$/.test(r.getValue())){r.setValueState(P.Error);r.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}}else{c.setValueState(P.Error);c.setValueStateText(t.getText("configuration.navigation_provider.error_invalid_provider"));I=true}if(!f.getSelected()&&!b.getSelected()&&!y.getSelected()){m=t.getText("configuration.form_factor.warning");f.setValueState(P.Error);f.setValueStateText(m);b.setValueState(P.Error);b.setValueStateText(m);y.setValueState(P.Error);y.setValueStateText(m);I=true}return I};R.updateTooltipForDisabledProperties=function(e){var t=e.getModel();var a=t.getProperty("/config/isLocaleSuitable");if(!a){var i=R.getResourceBundleModel().getResourceBundle();var n=i.getText("edit_configuration.original_locale_not_fit_tooltip",[t.getProperty("/config/userLocale"),t.getProperty("/config/orgLocale")]);e.byId("titleInput").setTooltip(n);e.byId("subtitleInput").setTooltip(n);e.byId("keywordsInput").setTooltip(n);e.byId("infoInput").setTooltip(n)}};R.updateMessageStripForOriginalLanguage=function(e){var t=e.getModel();if(t.getProperty("/config/isLocaleSuitable")===false){var a=R.getResourceBundleModel().getResourceBundle().getText("edit_configuration.original_locale_not_fit_message",[t.getProperty("/config/orgLocale").toUpperCase(),t.getProperty("/config/userLocale").toUpperCase()]);var i=e.byId("messageStrip");i.setVisible(true);i.setText(a);i.setType(T.Warning)}};R.createSemanticObjectModel=function(e,t,a){var i=e.getView(),n="/sap/opu/odata/UI2/INTEROP/SemanticObjects",s=[{obj:"",name:""},{obj:"*",name:"*"}],o=(a||s).slice(0),u=new l;u.setSizeLimit(999999);u.setProperty("/value","");u.setProperty("/enabled",true);t.bindAggregation("suggestionItems","suggest>/items",new V({text:"{suggest>obj}"}));t.setModel(u,"suggest");if(R.aData.length>0){setTimeout(function(){u.setData({items:o.concat(R.aData)},true)},0);return}r.read({requestUri:n,headers:{Accept:"application/json"}},function(e){var t,a,i;for(i=0;i<e.results.length;i=i+1){t=e.results[i].id;a=e.results[i].text;R.aData.push({obj:t,name:a||t})}u.setData({items:o.concat(R.aData)},true)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}S.error("Could not fetch data: "+n+": "+t,null,i.getViewName()||"sap.ushell.components.tiles.utils")})};R.createRoleModel=function(e,t,a){var i=e.getView(),n="/sap/opu/odata/UI2/INTEROP/GetLPDInstances",s=new l,o=new l;s.setSizeLimit(999999);o.setSizeLimit(999999);s.setProperty("/value","");s.setProperty("/enabled",true);o.setProperty("/value","");o.setProperty("/enabled",true);var u=new v({cells:[new w({text:"{role}"}),new w({text:"{instance}"})]});t.bindAggregation("suggestionRows","/items",u);a.bindAggregation("suggestionItems","/items",new V({text:"{instance}"}));a.setModel(o);t.setModel(s);t.attachSuggestionItemSelected(function(e){a.setValue(e.getParameter("selectedRow").getCells()[1].getText());a.fireChange()});if(R.aRoleData.length>0){s.setData({items:R.aRoleData},false);o.setData({items:R.aRoleData},false);return}r.read({requestUri:n,headers:{Accept:"application/json"}},function(e){var t,a,i;for(i=0;i<e.results.length;i=i+1){t=e.results[i].lpdRole;a=e.results[i].instance;R.aRoleData.push({role:t,instance:a})}s.setData({items:R.aRoleData},true);o.setData({items:R.aRoleData},true)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}S.error("Could not fetch data: "+n+": "+t,null,i.getViewName()||"sap.ushell.components.tiles.utils")})};R.createAliasModel=function(e,t){var a=e.getView(),i,n="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias",s=new l;s.setSizeLimit(999999);s.setProperty("/value","");s.setProperty("/enabled",true);t.bindAggregation("suggestionItems","/items",new V({text:"{alias}"}));t.setModel(s);i=R.getAppLauncherConfig(a.oViewData.chip,true,true);if(i&&i.navigation_provider_role&&i.navigation_provider_instance){if(i.navigation_provider_role!==""&&i.navigation_provider_instance!==""){n=n+"?role='"+i.navigation_provider_role+"'&instance='"+i.navigation_provider_instance+"'"}}r.read({requestUri:n,headers:{Accept:"application/json"}},function(e){var t,a,i,n,r;R.aAliasData=[];for(n=0;n<e.results.length;n=n+1){t=e.results[n].lpdApplicationAlias;a=e.results[n].lpdRole;i=e.results[n].lpdInstance;R.aAliasData.push({role:a,instance:i,alias:t})}r=s.getData();if(r){r.items=R.aAliasData}else{r={items:R.aAliasData}}s.setData(r,false)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}S.error("Could not fetch data: "+n+": "+t,null,a.getViewName()||"sap.ushell.components.tiles.utils")})};R.updateAliasModel=function(e,t){var a,i,n,s=t.getModel();i=e.byId("navigation_provider_instanceInput").getValue();n=e.byId("navigation_provider_roleInput").getValue();a="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias?role='"+n+"'&instance='"+i+"'";r.read({requestUri:a,headers:{Accept:"application/json"}},function(e){var t,a,i,n,r;R.aAliasData=[];for(n=0;n<e.results.length;n=n+1){t=e.results[n].lpdApplicationAlias;a=e.results[n].lpdRole;i=e.results[n].lpdInstance;R.aAliasData.push({role:a,instance:i,alias:t})}r=s.getData();if(r){r.items=R.aAliasData}else{r={items:R.aAliasData}}s.setData(r,false)},function(t){var i=t&&t.message?t.message:t;if(t.response){i+=" - "+t.response.statusCode+" "+t.response.statusText}S.error("Could not fetch data: "+a+": "+i,null,e.getViewName()||"sap.ushell.components.tiles.utils")})};R.createActionModel=function(e,t){var a=new l;var i=e.getView(),n,r;a.setData({items:[{text:"display"},{text:"approve"},{text:"displayFactSheet"},{text:"manage"},{text:"create"},{text:"monitor"},{text:"track"},{text:"change"},{text:"register"},{text:"release"},{text:"analyzeKPIDetails"},{text:"lookup"},{text:"manageLineItems"}]});R.aActionData=a.getData();n=R.getAppLauncherConfig(i.oViewData.chip,true,true);r=n.navigation_semantic_action||n.semantic_action;if(r){if(!a.getData().items.some(function(e){return e.text===r})){a.getData().items.push({text:r})}}t.bindAggregation("suggestionItems","items>/items",new V({text:"{items>text}"}));t.setModel(a,"items");t.getBinding("suggestionItems").sort(new h("text",false))};R.createNavigationProviderModel=function(e,t){var a=new l;var i=R.getResourceBundleModel().getResourceBundle();var n=[{key:"SAPUI5",text:i.getText("configuration.target_application.sapui5")},{key:"LPD",text:i.getText("configuration.target_application.lpd_cust")},{key:"TR",text:i.getText("configuration.target_application.transaction")},{key:"WDA",text:i.getText("configuration.target_application.web_dynpro")},{key:"URL",text:i.getText("configuration.target_application.url")}];var r=R.getViewConfiguration(e.getView()).navigation_provider;if(r==="WCF"){n.push({key:"WCF",text:i.getText("configuration.target_application.wcf")})}else if(r==="URLT"){n.push({key:"URLT",text:i.getText("configuration.target_application.urlt")})}a.setData({items:n});t.bindItems("items>/items",new V({key:"{items>key}",text:"{items>text}"}));t.setModel(a,"items");t.getBinding("items").sort(new h("text",false))};R.displayApplicationTypeFields=function(e,t){switch(e){case"LPD":R.displayLpdCustApplicationTypeFields(t);break;case"SAPUI5":R.displaySapui5ApplicationTypeFields(t);break;case"TR":R.displayTransactionApplicationTypeFields(t);break;case"WDA":R.displayWebDynproApplicationTypeFields(t);break;case"URL":R.displayURLApplicationTypeFields(t);break;case"WCF":R.displayWCFApplicationTypeFields(t);break;case"URLT":R.displayURLTApplicationTypeFields(t);break}};R.displayWCFApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(true);e.byId("target_wcf_application_idInput").setVisible(true);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displaySapui5ApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(true);e.byId("target_application_componentInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displayLpdCustApplicationTypeFields=function(e){e.byId("application_description").setVisible(false);e.byId("target_application_descriptionInput").setVisible(false);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(true);e.byId("navigation_provider_roleInput").setVisible(true);e.byId("navigation_provider_instance").setVisible(true);e.byId("navigation_provider_instanceInput").setVisible(true);e.byId("target_application_alias").setVisible(true);e.byId("target_application_aliasInput").setVisible(true);e.byId("target_application_id").setVisible(true);e.byId("target_application_idInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(true)};R.displayTransactionApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(true);e.byId("target_transactionInput").setVisible(true);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displayWebDynproApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(true);e.byId("target_web_dynpro_applicationInput").setVisible(true);e.byId("target_web_dynpro_configuration").setVisible(true);e.byId("target_web_dynpro_configurationInput").setVisible(true);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displayURLApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displayURLTApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(true);e.byId("urlt_application_componentInput").setVisible(true);e.byId("target_urlt_system_alias").setVisible(true);e.byId("target_urlt_system_aliasInput").setVisible(true);e.byId("application_type_deprecated").setVisible(false)};R.getAppLauncherConfig=function(t,i,n){var r;var s=t.configuration.getParameterValueAsString("tileConfiguration");var l;try{l=JSON.parse(s||"{}")}catch(e){S.error("Error while trying to parse tile configuration",e,"sap.ushell.components.tiles.utils");return{}}l.editable=true;if(t.configurationUi&&t.configurationUi.isReadOnly){if(t.configurationUi.isReadOnly()){l.editable=false}}var o=R.getTranslatedTitle(t);var u=R.getTranslatedSubtitle(t,l);var p=R.getTranslatedProperty(t,l,"display_info_text");var c=R.getTranslatedProperty(t,l,"display_search_keywords");if(i){r=R.getResourceBundleModel().getResourceBundle();if(n&&t.bag){var g=t.bag.getOriginalLanguage();var d=new a(e.getLanguageTag()).getSAPLogonLanguage();var _=e.getLanguage();l.isLocaleSuitable=g===""||g.toLowerCase()===d.toLowerCase()||g.toLowerCase()===_.toLowerCase();l.orgLocale=g;l.userLocale=d}}l.display_icon_url=l.display_icon_url||"";if(p!==undefined){l.display_info_text=p}else if(l.display_info_text===undefined){if(i&&!n){l.display_info_text="["+r.getText("configuration.display_info_text")+"]"}else{l.display_info_text=""}}l.navigation_semantic_object=l.navigation_semantic_object||"";l.navigation_semantic_action=l.navigation_semantic_action||"";l.navigation_semantic_parameters=l.navigation_semantic_parameters||"";l.display_number_unit=l.display_number_unit||"";l.display_number_factor=l.display_number_factor||"";l.service_refresh_interval=l.service_refresh_interval?parseInt(l.service_refresh_interval,10):0;l.service_url=l.service_url||"";l.navigation_target_url=l.navigation_target_url||"";if(i&&R.isInitial(o)){l.display_title_text=n?"":"["+r.getText("configuration.display_title_text")+"]";l.display_subtitle_text=n?"":"["+r.getText("configuration.display_subtitle_text")+"]"}else{l.display_title_text=o||l.display_title_text||"";if(u!==undefined){l.display_subtitle_text=u}else if(l.display_subtitle_text===undefined){l.display_subtitle_text=""}}l.navigation_use_semantic_object=l.navigation_use_semantic_object!==false;l.display_search_keywords=c||l.display_search_keywords||"";if(i){l.display_number_value=l.display_number_value||1234}l.form_factors=l.form_factors?l.form_factors:R.getDefaultFormFactors();l.desktopChecked=l.form_factors.manual.desktop;l.tabletChecked=l.form_factors.manual.tablet;l.phoneChecked=l.form_factors.manual.phone;l.manualFormFactor=!l.form_factors.appDefault&&l.editable;l.appFormFactor=l.form_factors.appDefault;l.formFactorConfigDefault=!!l.form_factors.defaultParam;if(l.signature){l.rows=R.getSignatureTableData(l.signature,n&&l.editable)}else{l.rows=l.mapping_signature&&l.mapping_signature!=="*=*"?R.getMappingSignatureTableData(l.mapping_signature,n&&l.editable):[R.getEmptyRowObj(l.editable)]}if(l.signature){l.isUnknownAllowed=l.signature.additional_parameters==="allowed"||l.signature.additionalParameters==="allowed"}else{l.isUnknownAllowed=l.mapping_signature!==undefined?R.getAllowUnknownParametersValue(l.mapping_signature):true}if(i){l.tile_actions_rows=R.getTileNavigationActionsRows(t,l.editable)}else if(!l.actions){l.actions=R.getTileNavigationActions(t)}if(i){var f=t.bag.getBag("deprecationProperties"),b=f.getProperty("deprecation"),y=null;if(b){y=r.getText(b==="D"?"configuration.app_deprecated":"configuration.app_archived",[f.getProperty("successor")])}l.deprecation_text=y}return l};R.getDataToDisplay=function(e,t){var a=0,i,n,r,s,l={display_icon_url:t.icon||e.display_icon_url||"",display_title_text:t.title||e.display_title_text||"",display_number_value:!isNaN(t.number)?t.number:"...",display_number_unit:t.numberUnit||e.display_number_unit||"",display_info_text:t.info||e.display_info_text||"",display_info_state:t.infoState||"Neutral",display_subtitle_text:t.subtitle||e.display_subtitle_text||"",display_state_arrow:t.stateArrow||"None",display_number_state:t.numberState||"None",display_number_digits:t.numberDigits>=0?t.numberDigits:4,display_number_factor:t.numberFactor||"",display_search_keyword:t.keywords||e.display_search_keyword||"",targetParams:[]};if(t.infoStatus){l.display_info_state=t.infoStatus}if(t.targetParams){l.targetParams.push(t.targetParams)}if(t.results){for(i=0,n=t.results.length;i<n;i=i+1){r=t.results[i].number||0;if(typeof r==="string"){r=parseFloat(r)}a=a+r;s=t.results[i].targetParams;if(s){l.targetParams.push(s)}}l.display_number_value=a}if(!isNaN(t.number)){if(typeof t.number==="string"){t.number=t.number.trim()}if(t.number===""){l.display_number_value="..."}else{var o=this._shouldProcessDigits(t.number,t.numberDigits),u=l.display_icon_url?4:5;if(t.number&&t.number.toString().length>=u||o){var p=this._normalizeNumber(t.number,u,t.numberFactor,t.numberDigits);l.display_number_factor=p.numberFactor;l.display_number_value=p.displayNumber}else{var c=x.getFloatInstance({maxFractionDigits:u});l.display_number_value=c.format(t.number)}}}if(l&&l.display_number_state){switch(l.display_number_state){case"Positive":l.display_number_state="Good";break;case"Negative":l.display_number_state="Error";break}}return l};R._normalizeNumber=function(e,t,a,i){var n;if(isNaN(e)){n=e}else{var r=x.getFloatInstance({maxFractionDigits:i});if(!a){var s=Math.abs(e);if(s>=1e9){a="B";e/=1e9}else if(s>=1e6){a="M";e/=1e6}else if(s>=1e3){a="K";e/=1e3}}n=r.format(e)}var l=n;var o=l[t-1];t-=o==="."||o===","?1:0;l=l.substring(0,t);return{displayNumber:l,numberFactor:a}};R._shouldProcessDigits=function(e,t){var a;e=typeof e!=="string"?e.toString():e;if(e.indexOf(".")!==-1){a=e.split(".")[1].length;if(a>t){return true}}return false};R.getTileSettingsAction=function(e,t,a){var i=R.getResourceBundleModel().getResourceBundle();var n=!a||a==="tile"?"tileSettingsBtn":"linkSettingsBtn";return{id:n,text:i.getText(n),press:function(){return new Promise(function(n){sap.ui.require(["sap/m/Button","sap/m/Dialog","sap/ui/core/mvc/View","sap/ui/layout/form/SimpleForm","sap/ui/layout/library"],function(r,s,o,u,p){var c=p.form.SimpleFormLayout;var g={showGroupSelection:false,title:e.getProperty("/config/display_title_text"),subtitle:e.getProperty("/config/display_subtitle_text")};if(!a||a==="tile"){g.info=e.getProperty("/config/display_info_text");g.icon=e.getProperty("/config/display_icon_url");g.keywords=e.getProperty("/config/display_search_keywords")}else if(a==="link"){g.showInfo=false;g.showIcon=false;g.showPreview=false}o.create({viewName:"module:sap/ushell/ui/footerbar/SaveAsTile.view"}).then(function(e){var o=new l(g);e.setModel(o);var p=new u({id:"tileSettings",layout:c.GridLayout,content:[e]}).addStyleClass("sapUshellAddBookmarkForm");var d=new r("bookmarkOkBtn",{text:i.getText("okBtn"),type:C.Emphasized,press:function(){t(e);b.close()},enabled:true});var _=new r("bookmarkCancelBtn",{text:i.getText("cancelBtn"),press:function(){b.close()}});var f=function(e){d.setEnabled(!!e.trim())};e.getTitleInput().attachLiveChange(function(){f(this.getValue())});var b=new s({id:"settingsDialog",title:!a||a==="tile"?i.getText("tileSettingsDialogTitle"):i.getText("linkSettingsDialogTitle"),contentWidth:"400px",content:p,beginButton:d,endButton:_,horizontalScrolling:false,afterClose:function(){b.destroy()}}).addStyleClass("sapContrastPlus");b.open();n(b)})})})}}};R.getSemanticNavigationUrl=function(e){var t="#"+String(e.navigation_semantic_object||"").trim();t+="-"+String(e.navigation_semantic_action||"").trim();if(e.navigation_semantic_parameters&&String(e.navigation_semantic_parameters||"").trim().length>0){t+="?"+String(e.navigation_semantic_parameters||"").trim()}return t};R.addParamsToUrl=function(e,t){var a="",i=e.indexOf("?")!==-1,n=t.targetParams,r;if(n&&n.length>0){for(r=0;r<n.length;r=r+1){a+=n[r];if(r<n.length-1){a+="&"}}}if(a.length>0){if(!i){e+="?"}else{e+="&"}e+=a}return e};return R},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/CrossApplicationNavigation", ["sap/ushell/services/AppConfiguration","sap/ushell/services/_CrossApplicationNavigation/utils","sap/ushell/utils/type","sap/ushell/TechnicalParameters","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/base/util/deepExtend","sap/base/util/isPlainObject","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/merge","sap/ushell/utils","sap/ushell/ApplicationType","sap/ushell/UI5ComponentType","sap/base/Log","sap/ushell/utils/UrlParsing","sap/base/util/deepClone","sap/ui/base/Object","sap/ushell/api/common/ComponentInstantiation"],function(e,t,n,a,r,i,s,jQuery,o,p,c,l,u,h,f,g,v,m){"use strict";function d(l,u,d){var A;if(d&&d.config){A=d.config}function y(a,r){var i;var o;var p;if(typeof a!=="string"&&!s(a)&&a!==undefined){h.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined}if(a===undefined){return undefined}var c=e.getCurrentApplication();if(r){if(typeof r.getComponentData!=="function"||!s(r.getComponentData())||!r.getComponentData().startupParameters||!s(r.getComponentData().startupParameters)){h.error("Cannot call getComponentData on component","the component should be an application root component","sap.ushell.services.CrossApplicationNavigation")}else{var l=r.getComponentData().startupParameters;if(l.hasOwnProperty("sap-system")){i=l["sap-system"][0]}if(l.hasOwnProperty("sap-ushell-next-navmode")){o=l["sap-ushell-next-navmode"][0]}}}else{if(c&&c["sap-system"]){i=c["sap-system"]}else if(c&&c.url){i=new URL(c.url,window.location.href).searchParams.get("sap-system")}if(c&&c["sap-ushell-next-navmode"]){o=c["sap-ushell-next-navmode"]}else if(c&&c.url){o=new URL(c.url,window.location.href).searchParams.get("sap-ushell-next-navmode")}}if(c){p=c.contentProviderId}var u=t._injectParameters({type:n,inject:{"sap-system":i,"sap-ushell-navmode":o,"sap-app-origin-hint":p},injectEmptyString:{"sap-app-origin-hint":true},args:a});return u}function S(e){if(localStorage&&localStorage["sap-ushell-enc-test"]==="false"){return e}if(!A||!A["sap-ushell-enc-test"]){if(localStorage&&localStorage["sap-ushell-enc-test"]!=="true"){return e}}if(typeof e!=="string"&&!s(e)&&e!==undefined){h.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined}if(e===undefined){return undefined}if(s(e)){var t=i({},e);if(t.target&&t.target.shellHash){if(typeof t.target.shellHash==="string"){if(t.target.shellHash!=="#"&&t.target.shellHash!==""){t.target.shellHash=S(t.target.shellHash)}}return t}t.params=t.params||{};t.params["sap-ushell-enc-test"]=["A B%20C"];return t}var n=e;if(!/[?&]sap-system=/.test(n)){var a=n.indexOf("?")>-1?"&":"?";n+=a+"sap-ushell-enc-test="+encodeURIComponent("A B%20C")}return n}this._extractInnerAppRoute=function(e){var t=this;if(typeof e==="string"){var n=e.split("&/");var a=n.shift();return{intent:a,innerAppRoute:n.length>0?"&/"+n.join("&/"):""}}if(Object.prototype.toString.apply(e)==="[object Object]"){var r=o.get("target.shellHash",e);if(typeof r==="string"){var i=t._extractInnerAppRoute(r);e.target.shellHash=i.intent;return{intent:e,innerAppRoute:i.innerAppRoute}}if(e.hasOwnProperty("appSpecificRoute")){var s=e.appSpecificRoute;delete e.appSpecificRoute;var p=typeof s==="string"&&s.indexOf("&/")!==0&&s.length>0;return{innerAppRoute:p?"&/"+s:s,intent:e}}return{intent:e,innerAppRoute:""}}h.error("Invalid input parameter","expected string or object","sap.ushell.services.CrossApplicationNavigation");return{intent:e}};this._injectInnerAppRoute=function(e,t){var n=this;if(!t){return e}if(typeof e==="string"){return e+t}if(Object.prototype.toString.apply(e)==="[object Object]"){var a=o.get("target.shellHash",e);if(typeof a==="string"){e.target.shellHash=n._injectInnerAppRoute(a,t);return e}e.appSpecificRoute=t}return e};this.hrefForExternal=function(e,i,s){if(typeof i!=="object"&&i!==undefined&&i!==null){s=i;i=undefined}if(s){var o=new jQuery.Deferred;this.hrefForExternalAsync(e,i).then(o.resolve).catch(o.reject);return o.promise()}h.error("Deprecated option 'bAsync=false'. Please use 'bAsync=true' instead",null,"sap.ushell.services.CrossApplicationNavigation");var c=p({},e);var l=this._extractInnerAppRoute(c);var u=l.intent;t.addXAppStateFromParameter(u,"sap-xapp-state-data");c=y(u,i);c=t.injectStickyParameters({args:c,appLifeCycle:r,technicalParameters:a,type:n});c=S(c);c=this._injectInnerAppRoute(c,l.innerAppRoute);var f=sap.ushell.Container.getService("ShellNavigationInternal");if(!f){h.debug("Shell not available, no Cross App Navigation");return""}return f.hrefForExternalSync(c,undefined,i)};this.hrefForExternalAsync=function(e,i){var s=p({},e);var o=this._extractInnerAppRoute(s);var c=o.intent;return Promise.resolve().then(function(){return t.addXAppStateFromParameterAsync(c,"sap-xapp-state-data")}).then(function(){s=y(c,i);return t.injectStickyParametersAsync({args:s,appLifeCycle:r,technicalParameters:a,type:n})}).then(function(e){s=e;s=S(s);s=this._injectInnerAppRoute(s,o.innerAppRoute);return sap.ushell.Container.getServiceAsync("ShellNavigationInternal")}.bind(this)).then(function(e){return new Promise(function(t,n){e.hrefForExternal(s,undefined,i).then(t).catch(n)})}).catch(function(){h.debug("Shell not available, no Cross App Navigation");return""})};this.expandCompactHash=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolutionInternal").then(function(n){n.expandCompactHash(e).done(t.resolve).fail(t.reject)});return t.promise()};this.backToPreviousApp=function(){return this.isInitialNavigationAsync().then(function(e){if(e){return this.toExternal({target:{shellHash:"#"},writeHistory:false})}this.historyBack();return undefined}.bind(this))};this.historyBack=function(e){var t=-1;if(e&&typeof e==="number"){if(e<=0){h.warning("historyBack called with an argument <= 0 and will result in a forward navigation or refresh","expected was an argument > 0","sap.ushell.services.CrossApplicationNavigation#historyBack")}t=e*-1}window.history.go(t)};this.isInitialNavigation=function(){h.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.isInitialNavigation'. Please use 'isInitialNavigationAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var e=o.get("sap.ushell.Container");var t=e&&typeof e.getService==="function"&&e.getService("ShellNavigationInternal");if(!t){h.debug("ShellNavigationInternal service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true}var n=t.isInitialNavigation();if(typeof n==="undefined"){return true}return n};this.isInitialNavigationAsync=function(){return sap.ushell.Container.getServiceAsync("ShellNavigationInternal").then(function(e){var t=e.isInitialNavigation();if(typeof t==="undefined"){return true}return t}).catch(function(){h.debug("ShellNavigationInternal service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true})};this.toExternal=function(e,i){var s=e.writeHistory;var o=p({},e);var c=p({},o);this._processShellHashWithParams(o);var l=this._extractInnerAppRoute(o);var u=l.intent;var f;var g;return Promise.all([sap.ushell.Container.getServiceAsync("AppLifeCycle"),sap.ushell.Container.getServiceAsync("ShellNavigationInternal")]).then(function(e){var t=e[0];f=e[1];g=t.getCurrentApplication();return g&&g.getIntent()}).then(function(e){this._checkIfAppNeedsToBeReloaded(c,g,e,f.hashChanger);return t.addXAppStateFromParameterAsync(u,"sap-xapp-state-data")}.bind(this)).then(function(){o=y(u,i);return t.injectStickyParametersAsync({args:o,appLifeCycle:r,technicalParameters:a,type:n})}).then(function(e){o=e;o=S(o);delete o.writeHistory;o=this._injectInnerAppRoute(o,l.innerAppRoute);return f.toExternal(o,i,s)}.bind(this)).catch(function(e){h.error("CrossAppNavigation.toExternal failed",e,"sap.ushell.services.CrossApplicationNavigation")})};this._checkIfAppNeedsToBeReloaded=function(e,t,n,a){if(!t||!n||!e||!e.target){return}if(e.target.shellHash){var r=f.parseShellHash(e.target.shellHash)||{};e.target={semanticObject:r.semanticObject,action:r.action,contextRaw:r.contextRaw};e.appSpecificRoute=r.appSpecificRoute;e.params=Object.assign({},e.params,r.params)}if(e.appSpecificRoute){return}if(t.applicationType!=="UI5"){return}if(e.target.semanticObject!==n.semanticObject){return}if(e.target.action!==n.action){return}var i={params:{}};if(e.params){Object.keys(e.params).forEach(function(t){var n=e.params[t];var a=Array.isArray(n)?n:[n];i.params[t]=a.map(function(e){return e.toString()})})}if(!f.haveSameIntentParameters(i,n)){return}a.setReloadApplication(true)};this.hrefForAppSpecificHash=function(e){h.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.hrefForAppSpecificHash'. Please use 'hrefForAppSpecificHashAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var t=o.get("sap.ushell.Container");if(t&&typeof t.getService==="function"){var n=t.getService("ShellNavigationInternal");if(n){return n.hrefForAppSpecificHash(e)}}h.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(e)};this.hrefForAppSpecificHashAsync=function(e){return sap.ushell.Container.getServiceAsync("ShellNavigationInternal").then(function(t){return t.hrefForAppSpecificHash(e)}).catch(function(){h.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(e)})};this.getPrimaryIntent=function(e,t){var n={};var a;var r=/^#\w+-displayFactSheet(?:$|\?.)/;n.tags=["primaryAction"];n.semanticObject=e;if(t){n.params=t}return this.getLinks(n).then(function(e){if(e.length===0){delete n.tags;n.action="displayFactSheet";a=function(e,t){var n;if(e.intent===t.intent){return 0}n=r.test(e.intent)^r.test(t.intent);if(n){return r.test(e.intent)?-1:1}return e.intent<t.intent?-1:1};return this.getLinks(n)}a=function(e,t){if(e.intent===t.intent){return 0}return e.intent<t.intent?-1:1};return e}.bind(this)).then(function(e){return e.length===0?null:e.sort(a)[0]})};this.getSemanticObjectLinks=function(e,i,s,o,p,l){var u=new jQuery.Deferred;Promise.resolve().then(function(){return t.injectStickyParametersAsync({args:{params:i},appLifeCycle:r,technicalParameters:a,type:n})}).then(function(t){t=y(t,o).params;t=S({params:t}).params;var n;if(Array.isArray(e)){n=[];e.forEach(function(e){n.push([{semanticObject:e[0],params:e[1],ignoreFormFactor:!!e[2],ui5Component:e[3],appStateKey:e[4],compactIntents:!!e[5]}])})}else{n={semanticObject:e,params:t,ignoreFormFactor:s,ui5Component:o,appStateKey:p,compactIntents:!!l}}return Promise.all([sap.ushell.Container.getServiceAsync("NavTargetResolutionInternal"),n])}).then(function(e){var t=e[0];var n=e[1];c.invokeUnfoldingArrayArguments(t.getLinks.bind(t),[n]).done(u.resolve).fail(u.reject)});return u.promise()};this.getLinks=function(e){var t;t=c.invokeUnfoldingArrayArguments(this._getLinks.bind(this),[e]);return t};this._getLinks=function(e){var s=new jQuery.Deferred;if(typeof e==="undefined"){e={}}var o=i({},e);o.compactIntents=!!o.compactIntents;o.action=o.action||undefined;o.paramsOptions=t.extractGetLinksParameterOptions(o.params);Promise.resolve().then(function(){return t.injectStickyParametersAsync({args:o,appLifeCycle:r,technicalParameters:a,type:n})}).then(function(e){o=e;var n;if(o.params){n=t.extractGetLinksParameterDefinition(o.params)}else{n=o.params}var a=y({params:n},o.ui5Component).params;a=S({params:a}).params;if(o.appStateKey){a["sap-xapp-state"]=[o.appStateKey];delete o.appStateKey}o.params=a;return sap.ushell.Container.getServiceAsync("NavTargetResolutionInternal")}).then(function(e){e.getLinks(o).done(s.resolve).fail(s.reject)});return s.promise()};this.getDistinctSemanticObjects=function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolutionInternal").then(function(t){t.getDistinctSemanticObjects().done(e.resolve).fail(e.reject)});return e.promise()};this.isIntentSupported=function(e,t){var n=new jQuery.Deferred;var a={};var r=e.map(function(e){var n=y(e,t);a[n]=e;return n});sap.ushell.Container.getServiceAsync("NavTargetResolutionInternal").then(function(e){e.isIntentSupported(r).done(function(e){var t={};Object.keys(e).forEach(function(n){t[a[n]]=e[n]});n.resolve(t)}).fail(n.reject.bind(n))});return n.promise()};this.isNavigationSupported=function(e,t){var n=new jQuery.Deferred;var a=g(e).map(function(e){var n=this._extractInnerAppRoute(e);return y(n.intent,t)}.bind(this));sap.ushell.Container.getServiceAsync("NavTargetResolutionInternal").then(function(e){e.isNavigationSupported(a).done(n.resolve).fail(n.reject)});return n.promise()};this.isUrlSupported=function(e){return new Promise((t,n)=>{if(typeof e!=="string"){n()}if(f.isIntentUrl(e)){const a=f.getHash(e);const r={target:{shellHash:a}};this.isNavigationSupported([r]).done(e=>{if(e[0].supported){t()}else{n()}}).fail(()=>{n()})}else{t()}})};this.createComponentInstance=function(e,t,n){const a=new jQuery.Deferred;const r=this._checkComponentConfig(t);if(r){a.reject(r);return a.promise()}const i=t?.componentData;m.createComponentInstance(e,i,n).then(a.resolve).catch(a.reject);return a.promise()};this.createComponentData=function(e,t){const n=this._checkComponentConfig(t);if(n){return Promise.reject(n)}const a=t?.componentData;return m.createComponentInstantiationData(e,a)};this._checkComponentConfig=function(e){if(e){var t=Object.keys(e).length;if(t>1||t===1&&!e.componentData){return"`oConfig` argument should either be an empty object or contain only the `componentData` property."}}return null};this.createEmptyAppState=function(e,t,n,a){h.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.createEmptyAppState'. Please use 'createEmptyAppStateAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var r=sap.ushell.Container.getService("AppState");if(!v.isA(e,"sap.ui.core.UIComponent")){throw new Error("The passed oAppComponent must be a UI5 Component.")}return r.createEmptyAppState(e,t,n,a)};this.createEmptyAppStateAsync=function(e,t,n,a){if(!v.isA(e,"sap.ui.core.UIComponent")){return Promise.reject("The passed oAppComponent must be a UI5 Component.")}return sap.ushell.Container.getServiceAsync("AppState").then(function(r){return r.createEmptyAppState(e,t,n,a)})};this.getStartupAppState=function(e){this._checkComponent(e);var t=e.getComponentData()&&e.getComponentData()["sap-xapp-state"]&&e.getComponentData()["sap-xapp-state"][0];return this.getAppState(e,t)};this._checkComponent=function(e){if(!v.isA(e,"sap.ui.core.UIComponent")){throw new Error("oComponent passed must be a UI5 Component")}};this.getAppState=function(e,t){var n;var a=new jQuery.Deferred;this._checkComponent(e);sap.ushell.Container.getServiceAsync("AppState").then(function(r){if(typeof t!=="string"){if(t!==undefined){h.error("Illegal Argument sAppStateKey ")}setTimeout(function(){n=r.createEmptyUnmodifiableAppState(e);a.resolve(n)},0);return}r.getAppState(t).done(a.resolve).fail(a.reject)});return a.promise()};this.getAppStateData=function(e){return c.invokeUnfoldingArrayArguments(this._getAppStateData.bind(this),[e])};this._getAppStateData=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(n){if(typeof e!=="string"){if(e!==undefined){h.error("Illegal Argument sAppStateKey ")}setTimeout(function(){t.resolve(undefined)},0)}else{n.getAppState(e).done(function(e){t.resolve(e.getData())}).fail(t.resolve.bind(t,undefined))}});return t.promise()};this.saveMultipleAppStates=function(e){var t=[];var n=new jQuery.Deferred;e.forEach(function(e){t.push(e.save())});jQuery.when.apply(this,t).done(function(){n.resolve(t)}).fail(function(){n.reject("save failed")});return n.promise()};this._processShellHashWithParams=function(e){if(e&&e.processParams===true&&e.target&&e.target.shellHash&&e.params){var t=f.parseShellHash(e.target.shellHash);e.target={semanticObject:t.semanticObject,action:t.action,contextRaw:t.contextRaw};e.appSpecificRoute=t.appSpecificRoute;e.params=Object.assign({},e.params,t.params)}};this.getSupportedAppStatePersistencyMethods=function(){h.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.getSupportedAppStatePersistencyMethods'. Please use 'getSupportedAppStatePersistencyMethodsAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var e=sap.ushell.Container.getService("AppState");return e.getSupportedPersistencyMethods()};this.getSupportedAppStatePersistencyMethodsAsync=function(){return sap.ushell.Container.getServiceAsync("AppState").then(function(e){return e.getSupportedPersistencyMethods()})};this.makeStatePersistent=function(e,t,n){var a=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(r){r.makeStatePersistent(e,t,n).done(a.resolve).fail(a.reject)});return a.promise()};this.resolveIntent=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolutionInternal").then(function(n){n.resolveHashFragment(e).then(function(e){t.resolve({url:e.url})}).fail(function(e){t.reject(e)})});return t.promise()}}d.hasNoAdapter=true;return d},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_CrossApplicationNavigation/utils", ["sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/Log","sap/ushell/utils/UrlParsing"],function(e,t,r,a){"use strict";var n={};n.extractGetLinksParameterOptions=function(e){return n.parseGetLinksParameters(e).filter(function(e){return Object.keys(e.options).length>0}).map(function(e){return{name:e.name,options:e.options}})};n.extractGetLinksParameterDefinition=function(e){return n.parseGetLinksParameters(e).reduce(function(e,t){e[t.name]=t.value;return e},{})};n.parseGetLinksParameters=function(e){if(Object.prototype.toString.apply(e)!=="[object Object]"){return[]}var t=JSON.parse(JSON.stringify(e));return Object.keys(t).map(function(e){var r=t[e];var a={};if(Object.prototype.toString.apply(r)==="[object Object]"){r=r.value;delete t[e].value;a=t[e]}return{name:e,value:r,options:a}})};n.safeParseToObject=function(e){try{return JSON.parse(e)}catch(t){r.error("Cannot parse the given string to object",e)}return null};n.createAppStateFromData=function(e){r.error("Deprecated API call of '_CrossApplicationNavigation.utils.createAppStateFromData'. Please use 'createAppStateFromDataAsync' instead",null,"sap.ushell.services._CrossApplicationNavigation.utils");var t=sap.ushell.Container.getService("AppState");var a=t.createEmptyAppState(null);a.setData(e);a.save();return a.getKey()};n.createAppStateFromDataAsync=function(e){return sap.ushell.Container.getServiceAsync("AppState").then(function(t){var r=t.createEmptyAppState(null);r.setData(e);r.save();return r.getKey()})};n.extractParameter=function(i,s){var c;var p=null;if(typeof i==="string"){if(i.indexOf(s+"=")===-1){return{intent:i,data:null}}var o=a.parseShellHash(i);if(!o){return{intent:i,data:null}}p=o.params[s];delete o.params[s];c=a.constructShellHash(o);return{intent:c,data:p}}if(e(i)){var u=t.get("target.shellHash",i);if(typeof u==="string"){var l=n.extractParameter(u,s);i.target.shellHash=l.intent;return{intent:i,data:l.data}}var f=i.params;if(f&&f[s]){const e=f[s];p=typeof e==="string"?[e]:e;delete f[s]}return{intent:i,data:p}}r.error("Invalid input parameter","expected string or object");return{intent:i}};n.addXAppStateFromParameter=function(e,t){var r=n.extractParameter(e,t);var a=r.intent;var i=r.data&&r.data[0];if(!i){return}var s=n.safeParseToObject(i);if(!s){return}var c=n.createAppStateFromData(s);n.injectParameter(a,"sap-xapp-state",c)};n.addXAppStateFromParameterAsync=function(e,t){var r=n.extractParameter(e,t);var a=r.intent;var i=r.data&&r.data[0];if(!i){return Promise.resolve()}var s=n.safeParseToObject(i);if(!s){return Promise.resolve()}return n.createAppStateFromDataAsync(s).then(function(e){n.injectParameter(a,"sap-xapp-state",e)})};n.injectParameter=function(e,r,i){if(typeof e==="string"){var s=a.parseShellHash(e);s.params[r]=i;return a.constructShellHash(s)}if(Object.prototype.toString.apply(e)==="[object Object]"){var c=t.get("target.shellHash",e);if(typeof c==="string"){e.target.shellHash=n.injectParameter(c,r,i);return e}if(!e.params){e.params={}}e.params[r]=i}return e};n._injectParameters=function(e){var t=e.inject;var r=e.injectEmptyString||{};var a=e.type;var i=e.args;function s(e,t){return e||e===""&&t}if(a.isPlainObject(i)){if(i.target&&i.target.shellHash){if(typeof i.target.shellHash==="string"){i.target.shellHash=n._injectParameters({inject:t,injectEmptyString:r,type:e.type,args:i.target.shellHash})}return i}var c=Object.keys(t).reduce(function(e,a){var n=t[a];var i=r[a]===true;if(s(n,i)&&typeof e==="string"){var c=new RegExp("[&]"+a);var p=!c.test(e);if(p){var o=e?"&":"";e+=o+a+"="+n}}else if(s(n,i)&&!e.hasOwnProperty(a)){e[a]=n}return e},i.params||{});if(c&&Object.keys(c).length>0){i.params=c}return i}var p=i;if(p){Object.keys(t).forEach(function(e){var a=t[e];var n=r[e]===true;var i=new RegExp("[?&]"+e);var c=!i.test(p);if(s(a,n)&&c){var o=p.indexOf("?")>-1?"&":"?";p+=o+e+"="+a}})}return p};n.injectStickyParameters=function(e){r.error("Deprecated API call of '_CrossApplicationNavigation.utils.injectStickyParameters'. Please use 'injectStickyParametersAsync' instead",null,"sap.ushell.services._CrossApplicationNavigation.utils");var t=sap.ushell.Container.getService("AppLifeCycle");return n._injectStickyParameters(e,t)};n.injectStickyParametersAsync=function(e){return sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(t){return n._injectStickyParameters(e,t)})};n._injectStickyParameters=function(e,t){if(!t||Object.keys(t).length<=0){return e.args}var r=t.getCurrentApplication();if(!r||Object.keys(r).length<=0){return e.args}var a=e.appLifeCycle;var i=e.technicalParameters;var s=i.getParameters({sticky:true}).reduce(function(e,t){var n=t.name;var s=r.componentInstance;var c=r.applicationType;var p;if(c==="UI5"){p={}}else{p=a.getCurrentApplication().container}var o=i.getParameterValueSync(n,s,p,c);var u=t.stickyName||n;e[u]=o;return e},{});var c={type:e.type,inject:s,args:e.args};return n._injectParameters(c)};return n});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/DynamicTileRequest", ["sap/base/i18n/Localization","sap/ushell/utils/HttpClient","sap/ui/thirdparty/URI","sap/base/util/isEmptyObject","sap/ushell/utils/UriParameters","sap/base/Log","sap/ui/core/Configuration","sap/base/util/ObjectPath","sap/ushell/EventHub","sap/ushell/Container"],function(e,t,s,r,n,i,a,o,l,u){"use strict";const c="sap.ushell.utils.DynamicTileRequest";class h{#e=()=>{};#t=()=>{};#s=null;#r=null;#n=null;#i=null;#a=null;#o=null;#l=null;#u=null;#c=null;#h=Promise.resolve();constructor(e,t,s,r,n){this.#e=t;this.#t=s;this.#s=e;this.#r=o.get(["dataSource","settings","odataVersion"],n);this.#n=true;this.#i=r;this.#h=this.#f(e,r).then(e=>{if(e){this.#a=e}}).catch(e=>{i.error("Was not able to create a DynamicTileRequest:",e,c)});this._oInitialRefreshPromise=this.#h.then(()=>{if(this.#a){return this.refresh()}})}set originalUrl(e){throw new Error("originalUrl is read-only!")}get originalUrl(){return this.#s}set oDataVersion(e){throw new Error("oDataVersion is read-only!")}get oDataVersion(){return this.#r}refresh(){if(!this.#o){this.#o=this.#h.then(this.#g.bind(this)).then(e=>{if(e){return this.#d(e)}})}return this.#o}async#g(){if(!this.#n){return this.#a}try{const e=await u.getServiceAsync("ReferenceResolver");const t=await e.resolveSemanticDateRanges(this.#a,this.#r);if(t.ignoredReferences&&t.ignoredReferences.length>0||t.invalidSemanticDates&&t.invalidSemanticDates.length>0){const e=[].concat(t.invalidSemanticDates||[],t.ignoredReferences||[]);i.error("The service URL contains invalid Reference(s): "+e.join(", "),"",c);return}this.#n=t.hasSemanticDateRanges;return t.url}catch(e){i.error("Could not resolve semantic date ranges:",e,c);return Promise.reject(e)}}#d(r){let n=new s(r).escapeQuerySpace(false);const i=e.getSAPLogonLanguage();if(i&&!n.hasQuery("sap-language")){n.addQuery("sap-language",i)}let a=false;if(n.is("relative")){a=true;n=n.absoluteTo(location.href)}const o=this.#R(a);const l={headers:o};this.#c=n.origin();this.#u=n.href();this.#l=new t(this.#c,l);return this.#l.get(n.relativeTo(this.#c).href()).then(this.#U.bind(this)).catch(this.#m.bind(this))}abort(){if(this.#o&&this.#l){this.#l.abortAll();this.#l=null;this.#o=null;return true}return false}#U(e){l.emit("UITracer.trace",{source:"Tile",reason:"FetchData",data:{providerId:this.#i,targetUrl:this.#u,status:200}});let t;try{t=JSON.parse(e.responseText)}catch(e){throw new Error("Was not able to parse response of dynamic tile request")}this.#l=null;this.#o=null;let s;if(typeof t==="object"){t=t.d?t.d:t;const e=n.fromURL(this.#u);if(e.get("$inlinecount")==="allpages"){s={number:t.__count}}else if(e.get("$count")==="true"){s={number:t["@odata.count"]}}else{s=this.#v(t)}}else if(typeof t==="string"||typeof t==="number"){s={number:t}}this.#e(s)}#m(e){l.emit("UITracer.trace",{source:"Tile",reason:"FetchData",data:{providerId:this.#i,targetUrl:this.#u,status:e.status}});this.#l=null;this.#o=null;this.#t(e)}#v(e){const t=["results","icon","title","number","numberUnit","info","infoState","infoStatus","targetParams","subtitle","stateArrow","numberState","numberDigits","numberFactor"];const s=Object.keys(e).reduce((s,r)=>{if(t.indexOf(r)>-1){s[r]=e[r]}return s},{});if(!r(s)){return s}const n=Object.keys(e)[0];if(n!==undefined&&Object.keys(e).length===1){return Object.keys(e[n]).reduce((s,r)=>{if(t.indexOf(r)>-1){s[r]=e[n][r]}return s},{})}return{}}#R(t){const s={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":e.getLanguage()||"",Accept:"application/json, text/plain"};const r=e.getSAPLogonLanguage();if(r){s["sap-language"]=r}if(t){const e=u.getLogonSystem();const t=e&&e.getClient();if(t){s["sap-client"]=t}}return s}async#f(e,t){const s=await u.getServiceAsync("ClientSideTargetResolution");const r=await u.getServiceAsync("ReferenceResolver");const n=await s.getSystemContext(t);const a=await r.resolveUserDefaultParameters(e,n);if(a.defaultsWithoutValue&&a.defaultsWithoutValue.length>0){i.error("The service URL contains User Default(s) with no set value: "+a.defaultsWithoutValue.join(", "),"",c);return}if(a.ignoredReferences&&a.ignoredReferences.length>0){const e=a.ignoredReferences.filter(e=>!e.startsWith("DynamicDate"));if(e.length>0){i.error("The service URL contains invalid Reference(s): "+e.join(", "),"",c);return}}return a.url}destroy(){this.abort();this.#t=null;this.#e=null}}return h});
sap.ui.require.preload({
	"sap/ca/ui/model/format/FormatHelper.js":function(){
/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.model.format.FormatHelper");jQuery.sap.require("sap.ui.core.format.NumberFormat");jQuery.sap.require("sap.ui.core.LocaleData");sap.ui.base.Object.extend("sap.ca.ui.model.format.FormatHelper",{});sap.ca.ui.model.format.FormatHelper.stringToNumeric=function(e){var a=/^\s*[\+-]?0[xX]/;if(a.test(e)){return parseInt(e,16)}else{return parseFloat(e)}};sap.ca.ui.model.format.FormatHelper.toNumeric=function(e){if(e===null||e===undefined){return NaN}var a=typeof e;var r;switch(a){case"number":r=e;break;case"string":r=sap.ca.ui.model.format.FormatHelper.stringToNumeric(e);break;case"object":var t=e.valueOf();if(typeof t==="number"){r=t}else if(Array.isArray(e)){r=NaN}else{r=sap.ca.ui.model.format.FormatHelper.stringToNumeric(e.toString())}break;default:r=NaN;break}return r};sap.ca.ui.model.format.FormatHelper.isNumeric=function(e){return isFinite(sap.ca.ui.model.format.FormatHelper.toNumeric(e))};sap.ca.ui.model.format.FormatHelper.getFormatOptions=function(e,a){var r={};r.locale=a;var t=typeof e;switch(t){case"number":r.decimals=e;break;case"object":if(typeof e.locale==="string"){r.locale=new sap.ui.core.Locale(e.locale)}else if(e.locale){r.locale=e.locale}r.decimals=e.decimals;r.rounding=e.rounding;r.formatStyle=e.formatStyle;r.shortDecimals=e.shortDecimals;r.shortRounding=e.shortRounding;break}if(!r.locale){if(sap.ui.getCore().getConfiguration().getLanguage()=="ZH"){r.locale=new sap.ui.core.Locale("zh_CN")}else{r.locale=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale()}}return r};sap.ca.ui.model.format.FormatHelper.hasRounding=function(e){var a;if(e!==undefined){if(typeof e==="number"){a=true}else{if(e.formatStyle==="short"){a=e.shortDecimals!==undefined||e.shortRounding!==undefined}else{a=e.decimals!==undefined||e.rounding!==undefined}}}else{a=false}return a};sap.ca.ui.model.format.FormatHelper.roundNumber=function(e,a){a=a||{};var r;var t,o;if(a.formatStyle==="short"){t=a.shortRounding;o=a.shortDecimals}else{t=a.rounding;o=a.decimals}if(t){r=t(e)}else if(o!==undefined){var i=sap.ca.ui.model.format.FormatHelper._getDecimals(o,e);r=e.toFixed(i)}else{r=e}return r};sap.ca.ui.model.format.FormatHelper._getDecimals=function(e,a){var r;if(typeof e==="function"){r=e(a)}else{r=e}return r};sap.ca.ui.model.format.FormatHelper._getUi5DecimalsFormatOptions=function(e,a,r){var t={};var o=null;if(e.formatStyle==="short"){o=e.shortDecimals}else if(e.decimals||e.decimals===0){o=e.decimals}if(o!==null){var i=sap.ca.ui.model.format.FormatHelper._getDecimals(o,a);t.minFractionDigits=i;t.maxFractionDigits=i}else if(typeof r==="string"){var l=r.indexOf(".");var u=l>-1?Math.max(r.length-l-1,0):0;t.minFractionDigits=u;t.maxFractionDigits=u}return t};sap.ca.ui.model.format.FormatHelper.formatNumber=function(e,a){var r=sap.ca.ui.model.format.FormatHelper.toNumeric(e);if(!isFinite(r)){return""}var t=sap.ca.ui.model.format.FormatHelper.getFormatOptions(a);var o=sap.ca.ui.model.format.FormatHelper._getUi5DecimalsFormatOptions(t,r,e);var i=sap.ui.core.format.NumberFormat.getFloatInstance(o,t.locale);if(sap.ca.ui.model.format.FormatHelper.hasRounding(a)){r=sap.ca.ui.model.format.FormatHelper.roundNumber(r,t);return i.format(r)}else{return i.format(e)}};sap.ca.ui.model.format.FormatHelper.getMagnitude=function(e){var a=[{value:1e3,suffix:"Kilo"},{value:1e6,suffix:"Mega"},{value:1e9,suffix:"Giga"},{value:1e12,suffix:"Tera"},{value:1e15,suffix:"Peta"},{value:1e18,suffix:"Exa"},{value:1e21,suffix:"Zetta"},{value:1e24,suffix:"Yotta"}];var r=e>=0?e:-e;for(var t=a.length-1;t>=0;--t){var o=a[t];if(r>=o.value){return o}}return{value:1,suffix:""}};
},
	"sap/ca/ui/model/format/NumberFormat.js":function(){
/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.model.format.NumberFormat");jQuery.sap.require("sap.ui.core.LocaleData");jQuery.sap.require("sap.ca.ui.model.format.FormatHelper");jQuery.sap.require("sap.ca.ui.utils.resourcebundle");sap.ca.ui.model.format.NumberFormat=function(){throw new Error};sap.ca.ui.model.format.NumberFormat.oValueInfo={oDefaultFormatOptions:{style:"standard"}};sap.ca.ui.model.format.NumberFormat.getInstance=function(a,e){return this.createInstance(a,e,this.oValueInfo)};sap.ca.ui.model.format.NumberFormat.createInstance=function(a,e,t){var r=jQuery.sap.newObject(this.prototype);if(a instanceof sap.ui.core.Locale){e=a;a=undefined}if(!e){e=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale()}r.oLocale=e;r.oLocaleData=sap.ui.core.LocaleData.getInstance(e);r.oFormatOptions=jQuery.extend(false,{},t.oDefaultFormatOptions,a);r.oFormatOptions.formatStyle="standard";r.init();return r};sap.ca.ui.model.format.NumberFormat.prototype.init=function(){};sap.ca.ui.model.format.NumberFormat.prototype.format=function(a){var e="";var t="format_"+this.oFormatOptions.style;if(this[t]){e=this[t](a)}else{e=this.format_standard(a)}return e};sap.ca.ui.model.format.NumberFormat.prototype.format_standard=function(a){var e=sap.ca.ui.model.format.FormatHelper.getFormatOptions(this.oFormatOptions,this.oLocale);return sap.ca.ui.model.format.FormatHelper.formatNumber(a,e)};sap.ca.ui.model.format.NumberFormat.prototype.format_short=function(a){var e;var t;var r;function o(a){var r;if(!t){t=sap.ui.core.LocaleData.getInstance(e.locale)._get("decimalFormat-short");if(!t){var o=new sap.ui.core.Locale("en");t=sap.ui.core.LocaleData.getInstance(o)._get("decimalFormat-short")}}if(t){var i=1;while(Math.abs(a)>=i*10&&i<1e14){i=i*10}var m=t[i.toString()+"-other"];r={};if(!m||m=="0"){r.magnitude=1}else{r.formatString=m;var s=m.match(/0+\.*0*/);if(s){r.valueSubString=s[0];var n=r.valueSubString.indexOf(".");if(n==-1){r.decimals=0;r.magnitude=i*Math.pow(10,1-r.valueSubString.length)}else{r.decimals=r.valueSubString.length-n-1;r.magnitude=i*Math.pow(10,1-n)}}else{r.magnitude=1}}}return r}var i=sap.ca.ui.model.format.FormatHelper.toNumeric(a);if(!isFinite(i)){return""}var m="";e=sap.ca.ui.model.format.FormatHelper.getFormatOptions(this.oFormatOptions,this.oLocale);r=o(i);if(!r){return this.format_standard(a)}var s=i/r.magnitude;var n={};n.shortRounding=e.shortRounding;n.rounding=e.rounding;if(r.magnitude==1){n.formatStyle="standard";n.decimals=e.decimals}else if(e.shortDecimals){n.formatStyle="short";n.shortDecimals=e.shortDecimals}else{n.formatStyle="short";n.shortDecimals=r.decimals}s=sap.ca.ui.model.format.FormatHelper.roundNumber(s,n);r=o(s*r.magnitude);if(!r||r.magnitude==1){m=this.format_standard(a)}else{s=sap.ca.ui.model.format.FormatHelper.roundNumber(i/r.magnitude,n);if(!e.shortDecimals){e.shortDecimals=r.decimals}e.formatStyle="short";m=sap.ca.ui.model.format.FormatHelper.formatNumber(s,e);m=r.formatString.replace(r.valueSubString,m);m=m.replace(/'.'/g,".")}return m};sap.ca.ui.model.format.NumberFormat.prototype.parse=function(a){var e=sap.ui.core.format.NumberFormat.getInstance(this.oFormatOptions,this.oLocale);if(e.oFormatOptions.groupingSeparator==""){a=a.replace(/ /g,e.oFormatOptions.groupingSeparator)}return e.parse(a)};sap.ca.ui.model.format.NumberFormat.prototype.format_percentage=function(a){var e,t;if(this.oFormatOptions.decimals===undefined){this.oFormatOptions.decimals=0}var r=sap.ca.ui.model.format.FormatHelper.toNumeric(a);r=r*100;var o=this.format_standard(r);var i=sap.ui.core.LocaleData.getInstance(this.oLocale)._get("percentFormat");if(!i){t=new sap.ui.core.Locale("en");i=sap.ui.core.LocaleData.getInstance(t)._get("percentFormat")}var m=i["standard"];if(m===undefined||m==""){e=o;jQuery.sap.log.error("no percent format available for the current locale")}else{var s=/[\.0,#]+/;var n=m.replace(s,o);var u=sap.ui.core.LocaleData.getInstance(this.oLocale)._get("symbols-latn-percentSign");if(!u){t=new sap.ui.core.Locale("en");u=sap.ui.core.LocaleData.getInstance(t)._get("symbols-latn-percentSign")}e=n.replace(/\u0025/,u)}return e};
},
	"sap/ca/ui/utils/resourcebundle.js":function(){
/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.utils.resourcebundle");jQuery.sap.require("sap.ui.model.resource.ResourceModel");sap.ca.ui.utils.resourcebundle=function(){var e=new sap.ui.model.resource.ResourceModel({bundleUrl:jQuery.sap.getModulePath("sap.ca.ui.i18n.i18n",".properties")});sap.ui.getCore().setModel(e,"sap.ca.ui.i18n");return e.getResourceBundle()}();
},
	"sap/suite/ui/commons/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.suite.ui.commons","type":"library","embeds":["collaboration/flpplugins/msplugin"],"applicationVersion":{"version":"1.132.0"},"title":"SAP UI library: sap.suite.ui.commons","description":"SAP UI library: sap.suite.ui.commons","ach":"CA-UI5-SC","resources":"resources.json","offline":true,"openSourceComponents":[{"name":"@azure/msal-browser","packagedWithMySelf":true,"version":"2.22.0"}]},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_base","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_bluecrystal_base","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.132","libs":{"sap.ui.core":{"minVersion":"1.132.1"},"sap.m":{"minVersion":"1.132.1"},"sap.suite.ui.microchart":{"minVersion":"1.132.1","lazy":true},"sap.ui.ux3":{"minVersion":"1.132.1","lazy":true},"sap.ui.comp":{"minVersion":"1.132.1","lazy":true},"sap.viz":{"minVersion":"1.132.1","lazy":true},"sap.ui.commons":{"minVersion":"1.132.1","lazy":true}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cnr","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","mk","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":["sap.suite.ui.commons.BulletChart","sap.suite.ui.commons.BusinessCard","sap.suite.ui.commons.CalculationBuilder","sap.suite.ui.commons.CalculationBuilderExpression","sap.suite.ui.commons.CalculationBuilderFunction","sap.suite.ui.commons.CalculationBuilderInput","sap.suite.ui.commons.CalculationBuilderItem","sap.suite.ui.commons.CalculationBuilderVariable","sap.suite.ui.commons.ChartContainer","sap.suite.ui.commons.ChartContainerContent","sap.suite.ui.commons.ChartContainerToolbarPlaceholder","sap.suite.ui.commons.ChartTile","sap.suite.ui.commons.ColumnMicroChart","sap.suite.ui.commons.ComparisonChart","sap.suite.ui.commons.CloudFilePicker","sap.suite.ui.commons.DateRangeScroller","sap.suite.ui.commons.DateRangeSlider","sap.suite.ui.commons.DateRangeSliderInternal","sap.suite.ui.commons.DeltaMicroChart","sap.suite.ui.commons.DynamicContainer","sap.suite.ui.commons.FacetOverview","sap.suite.ui.commons.FeedItemHeader","sap.suite.ui.commons.FeedTile","sap.suite.ui.commons.GenericTile","sap.suite.ui.commons.GenericTile2X2","sap.suite.ui.commons.HarveyBallMicroChart","sap.suite.ui.commons.HeaderCell","sap.suite.ui.commons.HeaderContainer","sap.suite.ui.commons.imageeditor.ImageEditor","sap.suite.ui.commons.imageeditor.ImageEditorContainer","sap.suite.ui.commons.InfoTile","sap.suite.ui.commons.JamContent","sap.suite.ui.commons.KpiTile","sap.suite.ui.commons.LaunchTile","sap.suite.ui.commons.LinkActionSheet","sap.suite.ui.commons.MicroAreaChart","sap.suite.ui.commons.MonitoringContent","sap.suite.ui.commons.MonitoringTile","sap.suite.ui.commons.networkgraph.Graph","sap.suite.ui.commons.networkgraph.Node","sap.suite.ui.commons.NewsContent","sap.suite.ui.commons.NoteTaker","sap.suite.ui.commons.NoteTakerCard","sap.suite.ui.commons.NoteTakerFeeder","sap.suite.ui.commons.NumericContent","sap.suite.ui.commons.NumericTile","sap.suite.ui.commons.PictureZoomIn","sap.suite.ui.commons.ProcessFlow","sap.suite.ui.commons.ProcessFlowConnection","sap.suite.ui.commons.ProcessFlowConnectionLabel","sap.suite.ui.commons.ProcessFlowLaneHeader","sap.suite.ui.commons.ProcessFlowNode","sap.suite.ui.commons.RepeaterViewConfiguration","sap.suite.ui.commons.SplitButton","sap.suite.ui.commons.statusindicator.StatusIndicator","sap.suite.ui.commons.statusindicator.ShapeGroup","sap.suite.ui.commons.statusindicator.Shape","sap.suite.ui.commons.statusindicator.Rectangle","sap.suite.ui.commons.statusindicator.Circle","sap.suite.ui.commons.statusindicator.CustomShape","sap.suite.ui.commons.statusindicator.PropertyThreshold","sap.suite.ui.commons.statusindicator.DiscreteThreshold","sap.suite.ui.commons.statusindicator.LibraryShape","sap.suite.ui.commons.taccount.TAccount","sap.suite.ui.commons.TargetFilter","sap.suite.ui.commons.ThingCollection","sap.suite.ui.commons.ThreePanelThingInspector","sap.suite.ui.commons.ThreePanelThingViewer","sap.suite.ui.commons.TileContent","sap.suite.ui.commons.TileContent2X2","sap.suite.ui.commons.Timeline","sap.suite.ui.commons.TimelineFilterListItem","sap.suite.ui.commons.TimelineItem","sap.suite.ui.commons.UnifiedThingGroup","sap.suite.ui.commons.UnifiedThingInspector","sap.suite.ui.commons.VerticalNavigationBar","sap.suite.ui.commons.ViewRepeater"],"elements":["sap.suite.ui.commons.BulletChartData","sap.suite.ui.commons.CalculationBuilderValidationResult","sap.suite.ui.commons.ColumnData","sap.suite.ui.commons.ColumnMicroChartLabel","sap.suite.ui.commons.ComparisonData","sap.suite.ui.commons.CountingNavigationItem","sap.suite.ui.commons.FeedItem","sap.suite.ui.commons.HarveyBallMicroChartItem","sap.suite.ui.commons.HeaderCellItem","sap.suite.ui.commons.imageeditor.CustomSizeItem","sap.suite.ui.commons.MicroAreaChartItem","sap.suite.ui.commons.MicroAreaChartLabel","sap.suite.ui.commons.MicroAreaChartPoint","sap.suite.ui.commons.TargetFilterColumn","sap.suite.ui.commons.TargetFilterMeasureColumn","sap.suite.ui.commons.AriaProperties"],"types":["sap.suite.ui.commons.BulletChartMode","sap.suite.ui.commons.CalculationBuilderComparisonOperatorType","sap.suite.ui.commons.CalculationBuilderFunctionType","sap.suite.ui.commons.CalculationBuilderItemType","sap.suite.ui.commons.CalculationBuilderLayoutType","sap.suite.ui.commons.CalculationBuilderLogicalOperatorType","sap.suite.ui.commons.CalculationBuilderOperatorType","sap.suite.ui.commons.CalculationBuilderValidationType","sap.suite.ui.commons.CommonBackground","sap.suite.ui.commons.ComparisonChartView","sap.suite.ui.commons.DeviationIndicator","sap.suite.ui.commons.FacetOverviewHeight","sap.suite.ui.commons.FrameType","sap.suite.ui.commons.HeaderContainerView","sap.suite.ui.commons.ImageEditorContainerMode","sap.suite.ui.commons.ImageEditorMode","sap.suite.ui.commons.ImageFormat","sap.suite.ui.commons.InfoTileSize","sap.suite.ui.commons.InfoTileTextColor","sap.suite.ui.commons.InfoTileValueColor","sap.suite.ui.commons.LoadState","sap.suite.ui.commons.MicroAreaChartView","sap.suite.ui.commons.MicroProcessFlowRenderType","sap.suite.ui.commons.networkgraph.ActionButtonPosition","sap.suite.ui.commons.networkgraph.BackgroundColor","sap.suite.ui.commons.networkgraph.ElementStatus","sap.suite.ui.commons.networkgraph.LayoutAlgorithmType","sap.suite.ui.commons.networkgraph.LayoutRenderType","sap.suite.ui.commons.networkgraph.LineArrowOrientation","sap.suite.ui.commons.networkgraph.LineArrowPosition","sap.suite.ui.commons.networkgraph.LineType","sap.suite.ui.commons.networkgraph.HeaderCheckboxState","sap.suite.ui.commons.networkgraph.NodePlacement","sap.suite.ui.commons.networkgraph.NodeShape","sap.suite.ui.commons.networkgraph.NodeSize","sap.suite.ui.commons.networkgraph.Orientation","sap.suite.ui.commons.networkgraph.RenderType","sap.suite.ui.commons.ProcessFlowConnectionLabelState","sap.suite.ui.commons.ProcessFlowConnectionState","sap.suite.ui.commons.ProcessFlowConnectionType","sap.suite.ui.commons.ProcessFlowDisplayState","sap.suite.ui.commons.ProcessFlowLaneState","sap.suite.ui.commons.ProcessFlowNodeState","sap.suite.ui.commons.ProcessFlowNodeType","sap.suite.ui.commons.ProcessFlowZoomLevel","sap.suite.ui.commons.SelectionState","sap.suite.ui.commons.statusindicator.FillingType","sap.suite.ui.commons.statusindicator.FillingDirectionType","sap.suite.ui.commons.taccount.TAccountPanelState","sap.suite.ui.commons.ThingGroupDesign","sap.suite.ui.commons.TimelineAlignment","sap.suite.ui.commons.TimelineAxisOrientation","sap.suite.ui.commons.TimelineFilterType","sap.suite.ui.commons.TimelineGroupType","sap.suite.ui.commons.TimelineScrollingFadeout","sap.suite.ui.commons.ValueStatus","sap.suite.ui.commons.SemanticColorType"],"interfaces":[]}}}}',
	"sap/suite/ui/microchart/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.suite.ui.microchart","type":"library","embeds":[],"applicationVersion":{"version":"1.132.1"},"title":"UI5 library: sap.suite.ui.microchart","description":"UI5 library: sap.suite.ui.microchart","ach":"CA-UI5-SC","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_base","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_bluecrystal_base","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.132","libs":{"sap.ui.core":{"minVersion":"1.132.1"},"sap.m":{"minVersion":"1.132.1"}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cnr","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","mk","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":["sap.suite.ui.microchart.AreaMicroChart","sap.suite.ui.microchart.BulletMicroChart","sap.suite.ui.microchart.ColumnMicroChart","sap.suite.ui.microchart.ComparisonMicroChart","sap.suite.ui.microchart.DeltaMicroChart","sap.suite.ui.microchart.HarveyBallMicroChart","sap.suite.ui.microchart.LineMicroChart","sap.suite.ui.microchart.InteractiveBarChart","sap.suite.ui.microchart.InteractiveDonutChart","sap.suite.ui.microchart.InteractiveLineChart","sap.suite.ui.microchart.RadialMicroChart","sap.suite.ui.microchart.StackedBarMicroChart"],"elements":["sap.suite.ui.microchart.AreaMicroChartPoint","sap.suite.ui.microchart.AreaMicroChartItem","sap.suite.ui.microchart.AreaMicroChartLabel","sap.suite.ui.microchart.BulletMicroChartData","sap.suite.ui.microchart.ColumnMicroChartData","sap.suite.ui.microchart.ColumnMicroChartLabel","sap.suite.ui.microchart.ComparisonMicroChartData","sap.suite.ui.microchart.HarveyBallMicroChartItem","sap.suite.ui.microchart.LineMicroChartPoint","sap.suite.ui.microchart.LineMicroChartEmphasizedPoint","sap.suite.ui.microchart.LineMicroChartLine","sap.suite.ui.microchart.InteractiveBarChartBar","sap.suite.ui.microchart.InteractiveDonutChartSegment","sap.suite.ui.microchart.InteractiveLineChartPoint","sap.suite.ui.microchart.StackedBarMicroChartBar"],"types":["sap.suite.ui.microchart.AreaMicroChartViewType","sap.suite.ui.microchart.BulletMicroChartModeType","sap.suite.ui.microchart.CommonBackgroundType","sap.suite.ui.microchart.ComparisonMicroChartViewType","sap.suite.ui.microchart.DeltaMicroChartViewType","sap.suite.ui.microchart.HorizontalAlignmentType","sap.suite.ui.microchart.LoadStateType","sap.suite.ui.microchart.LineType","sap.suite.ui.microchart.MicroChartColorType"],"interfaces":[]}}}}',
	"sap/ui/unified/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ui.unified","type":"library","embeds":[],"applicationVersion":{"version":"1.132.1"},"title":"Unified controls intended for both, mobile and desktop scenarios","description":"Unified controls intended for both, mobile and desktop scenarios","ach":"CA-UI5-CTR","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_hcb"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.132","libs":{"sap.ui.core":{"minVersion":"1.132.1"}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cnr","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","mk","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":["sap.ui.unified.calendar.DatesRow","sap.ui.unified.calendar.Header","sap.ui.unified.calendar.Month","sap.ui.unified.calendar.MonthPicker","sap.ui.unified.calendar.MonthsRow","sap.ui.unified.calendar.TimesRow","sap.ui.unified.calendar.YearPicker","sap.ui.unified.calendar.YearRangePicker","sap.ui.unified.Calendar","sap.ui.unified.CalendarDateInterval","sap.ui.unified.CalendarWeekInterval","sap.ui.unified.CalendarMonthInterval","sap.ui.unified.CalendarTimeInterval","sap.ui.unified.CalendarLegend","sap.ui.unified.CalendarRow","sap.ui.unified.ContentSwitcher","sap.ui.unified.ColorPicker","sap.ui.unified.ColorPickerPopover","sap.ui.unified.Currency","sap.ui.unified.FileUploader","sap.ui.unified.Menu","sap.ui.unified.Shell","sap.ui.unified.ShellLayout","sap.ui.unified.ShellOverlay","sap.ui.unified.SplitContainer"],"elements":["sap.ui.unified.CalendarAppointment","sap.ui.unified.CalendarLegendItem","sap.ui.unified.DateRange","sap.ui.unified.DateTypeRange","sap.ui.unified.FileUploaderParameter","sap.ui.unified.FileUploaderXHRSettings","sap.ui.unified.MenuItem","sap.ui.unified.MenuItemBase","sap.ui.unified.MenuItemGroup","sap.ui.unified.MenuTextFieldItem","sap.ui.unified.NonWorkingPeriod","sap.ui.unified.RecurringNonWorkingPeriod","sap.ui.unified.ShellHeadItem","sap.ui.unified.ShellHeadUserItem","sap.ui.unified.TimeRange"],"types":["sap.ui.unified.CalendarAppointmentVisualization","sap.ui.unified.CalendarDayType","sap.ui.unified.CalendarIntervalType","sap.ui.unifief.CalendarAppointmentHeight","sap.ui.unifief.CalendarAppointmentRoundWidth","sap.ui.unified.ColorPickerDisplayMode","sap.ui.unified.ColorPickerMode","sap.ui.unified.ContentSwitcherAnimation","sap.ui.unified.GroupAppointmentsMode","sap.ui.unified.FileUploaderHttpRequestMethod","sap.ui.unified.StandardCalendarLegendItem"],"interfaces":["sap.ui.unified.IMenuItem","sap.ui.unified.IProcessableBlobs"]}}}}',
	"sap/ushell/components/tiles/cdm/applauncher/StaticTile.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.tiles.cdm.applauncher.StaticTile"\n    height="100%"\n    width="100%"><GenericTile\n        additionalTooltip="{= ${/properties/showContentProviderInfoInTooltip} ? ${/properties/contentProviderLabel} : \'\'}"\n        systemInfo="{= ${/properties/showContentProviderInfoOnVisualizations} ? ${/properties/contentProviderLabel} : \'\'}"\n        frameType="{/properties/frameType}"\n        header="{/properties/title}"\n        mode="{/properties/mode}"\n        scope="{/properties/scope}"\n        sizeBehavior="{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}"\n        subheader="{/properties/subtitle}"\n        url="{\n            path: \'/properties/targetURL\',\n            formatter: \'._getLeanUrl\'\n        }"\n        wrappingType="{/properties/wrappingType}"\n        press=".onPress"><dependents><TileContent id="standardTileContent" footer="{/properties/info}" /><TileContent id="imageTileContent" footer="{/properties/info}"><ImageContent src="{/properties/icon}" /></TileContent></dependents></GenericTile></mvc:View>\n',
	"sap/ushell/components/tiles/cdm/applauncher/manifest.json":'{"_version":"1.21.0","sap.flp":{"type":"tile","tileSize":"1x1","vizOptions":{"displayFormats":{"supported":["standard","standardWide","compact","flat","flatWide"],"default":"standard"}}},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncher","type":"component","applicationVersion":{"version":"1.0.0"},"title":"","tags":{"keywords":[]},"ach":"CA-FE-FLP-COR"},"sap.ui":{"_version":"1.1.0","technology":"UI5","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize","sap_belize_plus"]},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncher","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncher.StaticTile","type":"XML"},"handleValidation":false,"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile"\n    height="100%"\n    width="100%"><GenericTile\n        additionalTooltip="{= ${/properties/showContentProviderInfoInTooltip} ? ${/properties/contentProviderLabel} : \'\'}"\n        systemInfo="{= ${/properties/showContentProviderInfoOnVisualizations} ? ${/properties/contentProviderLabel} : \'\'}"\n        frameType="{/properties/frameType}"\n        header="{/properties/title}"\n        scope="{/properties/scope}"\n        sizeBehavior="{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}"\n        subheader="{/properties/subtitle}"\n        url="{\n            path: \'/properties/targetURL\',\n            formatter: \'._getLeanUrl\'\n        }"\n        wrappingType="{/properties/wrappingType}"\n        press=".onPress"><TileContent\n            id="numericTileContent"\n            footer="{/properties/info}"\n            footerColor="{\n                path: \'/properties/infoState\',\n                formatter: \'._formatValueColor\'\n            }"\n            unit="{/properties/number_unit}"><NumericContent\n                icon="{/properties/icon}"\n                indicator="{/properties/number_state_arrow}"\n                scale="{/properties/number_factor}"\n                truncateValueTo="5"\n                value="{/properties/number_value}"\n                valueColor="{\n                    path: \'/properties/number_value_state\',\n                    formatter: \'._getValueColor\'\n                }"\n                withMargin="false"\n                width="100%" /></TileContent></GenericTile></mvc:View>\n',
	"sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json":'{"_version":"1.21.0","sap.flp":{"type":"tile","tileSize":"1x1","vizOptions":{"displayFormats":{"supported":["standard","standardWide","compact","flat","flatWide"],"default":"standard"}}},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncherdynamic","_version":"1.0.0","type":"component","applicationVersion":{"version":"1.0.0"},"title":"","description":"","tags":{"keywords":[]},"ach":"CA-FLP-FE-COR"},"sap.ui":{"_version":"1.1.0","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize","sap_belize_plus"]},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncherdynamic","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile","type":"JS"},"handleValidation":false}}',
	"sap/ushell/components/tiles/indicatorArea/AreaChartTileChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../../../../</basePath><viewName>sap.ushell.components.tiles.indicatorArea.AreaChartTile.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorDual/DualTileChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../../../../</basePath><viewName>sap.ushell.components.tiles.indicatorDual.DualTile.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /><parameter name="row">1</parameter><parameter name="col">2</parameter></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorDualComparison/DualComparisonChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../</basePath><viewName>tiles/indicatorDualComparison.DualComparison.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /><parameter name="row">1</parameter><parameter name="col">2</parameter></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorDualContribution/DualContributionChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../</basePath><viewName>tiles/indicatorDualComparison.DualComparison.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /><parameter name="row">1</parameter><parameter name="col">2</parameter></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorDualDeviation/DualDeviationChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../</basePath><viewName>tiles/indicatorDualDeviation.DualDeviation.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /><parameter name="row">1</parameter><parameter name="col">2</parameter></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorDualTrend/DualTrendChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../</basePath><viewName>tiles/indicatorDualTrend.DualTrend.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /><parameter name="row">1</parameter><parameter name="col">2</parameter></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorHarveyBall/HarveyBallTile.view.js":function(){
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.require(["sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/commons/HarveyBallMicroChart","sap/suite/ui/commons/HarveyBallMicroChartItem","sap/suite/ui/commons/TileContent","sap/suite/ui/commons/GenericTile"],function(e,a,i,t,s,o,l){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorHarveyBall.HarveyBallTile",{getControllerName:function(){},createContent:function(){var e=new t({total:"{/value}",size:"{/size}",totalLabel:"{/totalLabel}",items:[new s({fraction:"{/fractionValue}",fractionLabel:"{/fractionLabel}",color:"{/color}"})]});var a=new o({size:"{/size}",content:e});this.oTile=new l({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[a]})}})});
},
	"sap/ushell/components/tiles/indicatorHarveyBall/HarveyBallTileChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../</basePath><viewName>tiles/indicatorHarveyBall.HarveyBallTile.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorcomparison/ComparisonTileChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../../../../</basePath><viewName>sap.ushell.components.tiles.indicatorcomparison.ComparisonTile.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorcontribution/ContributionTileChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../../../../</basePath><viewName>sap.ushell.components.tiles.indicatorcontribution.ContributionTile.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatordeviation/DeviationTileChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../../../../</basePath><viewName>sap.ushell.components.tiles.indicatordeviation.DeviationTile.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /><parameter name="row">1</parameter><parameter name="col">1</parameter></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatornumeric/NumericTileChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../../../../</basePath><viewName>sap.ushell.components.tiles.indicatornumeric.NumericTile.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n'
},"sap/fiori/indicator-tiles");
//# sourceMappingURL=indicator-tiles.js.map
