/*!
 * SAPUI5
 * (c) Copyright 2009-2024 SAP SE. All rights reserved.
 */
sap.ui.define(["./library","sap/ui/core/theming/Parameters","sap/suite/ui/microchart/MicroChartRenderUtils"],function(e,t,s){"use strict";var i={apiVersion:2};var o=e.LineType;const a=e.MicroChartColorType;i.QUALITATIVE_CLASS="sapChart_Sequence_";i.QUALITATIVE_MAX=13;i.render=function(e,t){if(t._hasData()){e.openStart("div",t);this._writeMainProperties(e,t);if(t._bSemanticMode){e.class("sapSuiteLMCSemanticMode")}if(t._bFocusMode){e.class("sapSuiteLMCFocusMode")}if(t._bNoBottomLabels||!t.getShowBottomLabels()){e.class("sapSuiteLMCNoBottomLabels")}if(t._bNoTopLabels||!t.getShowTopLabels()){e.class("sapSuiteLMCNoTopLabels")}e.openEnd();e.openStart("div");e.class("sapSuiteLMCVerticalAlignmentContainer");e.openEnd();this._renderLabelsTop(e,t);e.openStart("div");e.class("sapSuiteLMCContentWrapper");e.openEnd();this._renderCanvas(e,t);this._renderThresholdLabel(e,t);e.close("div");this._renderLabelsBottom(e,t);e.close("div");e.close("div")}else{this._renderNoData(e,t)}};i._writeMainProperties=function(e,t){var s=t.hasListeners("press");this._renderActiveProperties(e,t);var i=t.getTooltip_AsString(s);e.attr("role","figure");if(t.getAriaLabelledBy().length){e.accessibilityState(t)}else{e.attr("aria-label",i)}e.class("sapSuiteLMC");e.class("sapSuiteLMCSize"+t.getSize());e.style("width",t.getWidth());e.style("height",t.getHeight())};i._renderCanvas=function(e,t){var s;var i;e.openStart("div");e.class("sapSuiteLMCSvgCanvas");e.openEnd();if(t._bScalingValid){e.openStart("svg",t.getId()+"-sapSuiteLMCSvgElement");e.attr("focusable","false");e.class("sapSuiteLMCSvgElement");e.openEnd();this._renderThresholdLine(e,t);t._getLines().forEach(function(s,o){e.openStart("g",s);e.openEnd();i=s._getPoints().length;for(var a=1;a<i;a++){this._renderLine(e,t,o,s._aNormalizedPoints[a-1].x,s._aNormalizedPoints[a-1].y,s._aNormalizedPoints[a].x,s._aNormalizedPoints[a].y)}e.close("g")},this);e.close("svg");e.openStart("div",t.getId()+"-sapSuiteLMCPointsContainer");e.class("sapSuiteLMCPointsContainer");e.openEnd();t._getLines().forEach(function(o,a){s=o._getPoints();i=s.length;var l=o.getShowPoints(),r,n;if(o._bFocusMode||l){for(var d=0;d<i;d++){r=s[d];n=this._isPointEmphasized(r);if(!o._bFocusMode&&l||o._bFocusMode&&n&&r.getShow()){this._renderPoint(e,t,a,r,d,n)}}}},this);e.close("div")}e.close("div")};i._renderThresholdLabel=function(e,t){var s=t.getThresholdDisplayValue();if(this._isThresholdValue(t)&&t.getShowThresholdLine()&&t.getShowThresholdValue()){e.openStart("div");e.class("sapSuiteLMCThresholdLabelWrapper");e.openEnd();e.openStart("div");e.class("sapSuiteLMCThresholdLabel");e.openEnd();s=s?s:t.getThreshold();e.text(s);e.close("div");e.close("div")}};i._renderPoint=function(e,t,s,i,l,r){var n=t._getLines()[s],d=n.getType(),h=n._aNormalizedPoints[l],p=n.getColor(),L,c;if(h.x<0||h.x>100||h.y<0||h.y>100){return}e.openStart("div");e.style("left",h.x+"%");e.style("top",100-h.y+"%");c=d===o.Dotted?"border-color":"background-color";e.class("sapSuiteLMCPoint"+d);if(n._bFocusMode&&n._bSemanticMode){L=i.getColor();if(a.hasOwnProperty(L)){e.class("sapSuiteLMCPoint"+L)}else{e.style(c,this._getHexColor(L))}}else if(!n._bFocusMode&&n._bSemanticMode){if(i.getY()>=t.getThreshold()){if(a.hasOwnProperty(p.above)){e.class("sapSuiteLMCPoint"+p.above)}else{e.style(c,this._getHexColor(p.above))}}else if(a.hasOwnProperty(p.below)){e.class("sapSuiteLMCPoint"+p.below)}else{e.style(c,this._getHexColor(p.below))}}else if(!n._bSemanticMode&&typeof p==="string"){if(n.getColor()==="Neutral"){e.style(c,this._getQualitativeColor(s+1))}else if(a.hasOwnProperty(p)){e.class("sapSuiteLMCPoint"+p)}else{e.style(c,this._getHexColor(p))}}else{e.style(c,this._getQualitativeColor(s+1))}e.class("sapSuiteLMCPoint");if(r&&i.getShow()){e.class("sapSuiteLMCPointEmphasized")}e.openEnd();e.close("div")};i._renderThresholdLine=function(e,t){if(this._isThresholdValue(t)&&t.getShowThresholdLine()){e.openStart("line");e.attr("x1","0%");e.attr("y1",100-t._fNormalizedThreshold+"%");e.attr("x2","100%");e.attr("y2",100-t._fNormalizedThreshold+"%");e.class("sapSuiteLMCLineThreshold");e.openEnd();e.close("line")}};i._isThresholdValue=function(e){return e._fNormalizedThreshold>=0&&e._fNormalizedThreshold<=100&&!e._bThresholdNull};i._renderLine=function(e,t,s,i,o,a,l){if(this._isDimensionLineOutsideCanvas(t,i,a,"X")||this._isDimensionLineOutsideCanvas(t,o,l,"Y")){return}var r,n,d=a-i,h=l-o;if((o-t._fNormalizedThreshold)*(l-t._fNormalizedThreshold)<0){r=i+(t._fNormalizedThreshold-o)*d/h;this._renderLine(e,t,s,i,o,r,t._fNormalizedThreshold);this._renderLine(e,t,s,r,t._fNormalizedThreshold,a,l)}else if(o*l<0){r=i-o*d/h;this._renderLine(e,t,s,i,o,r,0);this._renderLine(e,t,s,r,0,a,l)}else if((o-100)*(l-100)<0){r=i+(100-o)*d/h;this._renderLine(e,t,s,i,o,r,100);this._renderLine(e,t,s,r,100,a,l)}else if(i*a<0){n=o-i*h/d;this._renderLine(e,t,s,i,o,0,n);this._renderLine(e,t,s,0,n,a,l)}else if((i-100)*(a-100)<0){n=o+(100-i)*h/d;this._renderLine(e,t,s,i,o,100,n);this._renderLine(e,t,s,100,n,a,l)}else{this._displayLine(e,t,s,i,o,a,l)}};i._displayLine=function(e,t,s,i,o,l,r){var n=t._getLines()[s],d=n.getColor();e.openStart("line");e.attr("x1",i+"%");e.attr("y1",100-o+"%");e.attr("x2",l+"%");e.attr("y2",100-r+"%");e.class("sapSuiteLMCLine");e.class("sapSuiteLMCLine"+n.getType());if(n._bSemanticMode&&n._bFocusMode){e.class("sapSuiteLMCLineNeutral")}else if(n._bSemanticMode&&!n._bFocusMode){if(o>=t._fNormalizedThreshold&&r>=t._fNormalizedThreshold){if(a.hasOwnProperty(d.above)){e.class("sapSuiteLMCLine"+d.above)}else{e.style("stroke",this._getHexColor(d.above))}}else if(a.hasOwnProperty(d.below)){e.class("sapSuiteLMCLine"+d.below)}else{e.style("stroke",this._getHexColor(d.below))}}else if(!n._bSemanticMode&&typeof d==="string"){if(d==="Neutral"){e.style("stroke",this._getQualitativeColor(s+1))}else if(a.hasOwnProperty(d)){e.class("sapSuiteLMCLine"+d)}else{e.style("stroke",this._getHexColor(d))}}else{e.style("stroke",this._getQualitativeColor(s+1))}e.openEnd();e.close("line")};i._getQualitativeColor=function(e){return this._getHexColor(this.QUALITATIVE_CLASS+e%this.QUALITATIVE_MAX)};i._renderLabelsBottom=function(e,t){var s=t.getLeftBottomLabel(),i=t.getRightBottomLabel();if(!t.getShowBottomLabels()||!s&&!i){return}e.openStart("div");e.class("sapSuiteLMCLabels");e.class("sapSuiteLMCLabelsBottom");e.openEnd();if(s&&s.length>0||i&&i.length>0){e.openStart("div");e.class("sapSuiteLMCLeftBottomLabel");e.class("sapSuiteLMCLabel");e.openEnd();e.text(s);e.close("div");e.openStart("div");e.class("sapSuiteLMCRightBottomLabel");e.class("sapSuiteLMCLabel");e.openEnd();e.text(i);e.close("div")}e.close("div")};i._renderLabelsTop=function(e,t){var s=t.getLeftTopLabel(),i=t.getRightTopLabel(),o=t._getLines()[0];if(!t.getShowTopLabels()||!s&&!i){return}var l="",r="",n="",d="",h,p,L,c,u;var _=function(t){e.style("color",t)};var S=function(e,t){var s="",i="";if(this._isPointEmphasized(e)&&e.getShow()){u=e.getColor();if(a.hasOwnProperty(u)){s="sapSuiteLMCLabel"+u}else{i=this._getHexColor(u)}}else{s="sapSuiteLMCLabelNeutral"}if(t){d=i;r=s}else{n=i;l=s}}.bind(this);if(o&&o._getPoints().length>1){h=o._getPoints();p=h.length;L=h[0];c=h[p-1];var g=o.getColor();if(o._bFocusMode&&o._bSemanticMode&&t._bScalingValid){S(L,false);S(c,true)}else if(!o._bFocusMode&&o._bSemanticMode&&t._bScalingValid&&o.getShowPoints()&&a.hasOwnProperty(g.above)&&a.hasOwnProperty(g.below)){if(L.getY()>=t.getThreshold()){l="sapSuiteLMCLabel"+g.above}else{l="sapSuiteLMCLabel"+g.below}if(c.getY()>=t.getThreshold()){r="sapSuiteLMCLabel"+g.above}else{r="sapSuiteLMCLabel"+g.below}}else{l="sapSuiteLMCLabelNeutral";r="sapSuiteLMCLabelNeutral"}}e.openStart("div");e.class("sapSuiteLMCLabels");e.class("sapSuiteLMCLabelsTop");e.openEnd();if(s&&s.length>0||i&&i.length>0){e.openStart("div");e.class("sapSuiteLMCLeftTopLabel");e.class("sapSuiteLMCLabel");e.class(l);if(n){_(n)}e.openEnd();e.text(s);e.close("div");e.openStart("div");e.class("sapSuiteLMCRightTopLabel");e.class("sapSuiteLMCLabel");e.class(r);if(d){_(d)}e.openEnd();e.text(t.getRightTopLabel());e.close("div")}e.close("div")};i._isPointEmphasized=function(e){return e&&e.getMetadata().getName()==="sap.suite.ui.microchart.LineMicroChartEmphasizedPoint"};i._getHexColor=function(e){return t.get(e)||e};i._isDimensionLineOutsideCanvas=function(e,t,s,i){var o=100,a=0;if(i==="X"&&e._minXScale===e._maxXScale){o=50;a=50}else if(i==="Y"&&e._minYScale===e._maxYScale){o=50;a=50}return t>=o&&s>=o&&!(t===o&&s===o)||t<=a&&s<=a&&!(t===a&&s===a)};s.extendMicroChartRenderer(i);return i},true);
//# sourceMappingURL=LineMicroChartRenderer.js.map