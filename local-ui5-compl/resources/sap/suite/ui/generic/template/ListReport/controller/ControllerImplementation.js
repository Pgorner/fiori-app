sap.ui.define(["sap/ui/model/Filter","sap/suite/ui/generic/template/ListReport/extensionAPI/ExtensionAPI","sap/suite/ui/generic/template/listTemplates/listUtils","sap/suite/ui/generic/template/listTemplates/controller/MessageStripHelper","sap/suite/ui/generic/template/ListReport/controller/IappStateHandler","sap/suite/ui/generic/template/ListReport/controller/MultipleViewsHandler","sap/suite/ui/generic/template/ListReport/controller/WorklistHandler","sap/suite/ui/generic/template/lib/ShareUtils","sap/suite/ui/generic/template/genericUtilities/controlHelper","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/base/util/ObjectPath","sap/suite/ui/generic/template/js/StableIdHelper","sap/base/util/deepExtend","sap/suite/ui/generic/template/lib/CreateWithDialogHandler","sap/suite/ui/generic/template/ListReport/controller/CtxMenuHandler","sap/suite/ui/generic/template/ListReport/controller/MultiEditHandler","sap/fe/navigation/SelectionVariant","sap/suite/ui/generic/template/lib/insights/InsightsHandler","sap/suite/ui/generic/template/listTemplates/filterSettingsPreparationHelper","sap/m/table/Util","sap/suite/ui/generic/template/genericUtilities/filterHelper","sap/suite/ui/generic/template/js/AnnotationHelperHiddenTermSupport","sap/m/IllustratedMessageType","sap/suite/ui/generic/template/lib/ai/EasyFilterBarHandler","sap/ui/model/FilterOperator","sap/ui/core/message/MessageType","sap/ui/core/Element"],function(e,t,n,r,i,a,o,l,s,c,d,u,p,g,f,m,v,S,C,h,E,y,b,F,H,I,T){"use strict";var P=new c("ListReport.controller.ControllerImplementation").getLogger();var M={getMethods:function(c,M,U){var D={};D.oWorklistData={bWorkListEnabled:!!M.oComponentUtils.getSettings().isWorklist};var A=new f(U,M,D);var w;var B=null;var R=new Map;function O(){var e=U.getOwnerComponent();var t=M.oComponentUtils.getTemplatePrivateModel();t.setProperty("/listReport/isLeaf",e.getIsLeaf())}function x(e){var t=e.getSource();var n=U.getOwnerComponent().getAnnotationPath();if(n!==undefined){L(t,n)}U.onInitSmartFilterBarExtension(e);U.templateBaseExtension.onInitSmartFilterBar(e)}function L(e,t){if(t.indexOf("com.sap.vocabularies.UI.v1.PresentationVariant")>-1){return}var r=new v(JSON.stringify(e.getUiState().getSelectionVariant()));var i=U.getOwnerComponent().getModel().getMetaModel();var a=U.getOwnerComponent().getEntitySet();var o=i.getODataEntityType(i.getODataEntitySet(a).entityType);var l=i.getObject(o.$path+"/"+t);if(l&&l.SelectionVariant&&(l.SelectionVariant.Path||l.SelectionVariant.AnnotationPath)){t=(l.SelectionVariant.Path||l.SelectionVariant.AnnotationPath).split("@")[1]}var s=i.getObject(o.$path+"/"+t);if(s){s=n.createSVObject(s,e);s.FilterContextUrl=r.getFilterContextUrl();D.oIappStateHandler.setFiltersUsingUIState(s.toJSONObject(),true,false)}else{var c=U.getOwnerComponent().getAppComponent().getNavigationController();c.navigateToMessagePage({title:M.oCommonUtils.getText("ST_ERROR"),text:"Manifest property 'annotationPath' is configured with "+t+" but no such annotation found.",description:"",messageType:b.UnableToLoad})}}function V(e){M.oCommonUtils.setEnabledToolbarButtons(e);if(!s.isSmartChart(e)){M.oCommonUtils.setEnabledFooterButtons(e)}}function k(e){var t;t=e.getSource();t.getChartAsync().then(function(e){e.attachSelectData(V.bind(null,t));e.attachDeselectData(V.bind(null,t))})}function N(e){var t=e.getParameters();var n=e.getSource();M.oCommonEventHandlers.onSemanticObjectLinkNavigationPressed(n,t)}function W(e){var t,n;t=e.getParameters();n=e.getSource();M.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(n.getEntitySet(),n.getFieldSemanticObjectMap(),t,D)}function j(e){var t=e.getParameters(),n=t.mainNavigation,r=e.getSource(),i;if(n){i=r.getText&&r.getText();var a=M.oCommonUtils.getCustomData(e);if(a&&a["LinkDescr"]){var o=a["LinkDescr"];n.setDescription(o)}}M.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(D.oPresentationControlHandler.getEntitySet(),{},t,D,i)}function _(e){var t=c.getItems();for(var n=0;n<t.length;n++){if(!e||t[n].getBindingContextPath()===e){return t[n]}}}function Q(e){M.oCommonEventHandlers.onListNavigate(e,D,undefined,true)}function q(e,t,n){var r=M.oServices.oCRUDManager.getDefaultValues(t,e);if(r instanceof Promise){var i=function(e){n.call(this,e,t)};r.then(i,i)}else{n.call(this,e,t)}}function z(e,t){if(e){J(e,t)}else{q(null,t,J)}}function J(e,t){if(t.data("CrossNavigation")){M.oCommonUtils.fnProcessDataLossOrDraftDiscardConfirmation(function(){M.oCommonEventHandlers.addEntry(t,false,D.oSmartFilterbar,e)},Function.prototype,"LeaveApp")}else{M.oCommonEventHandlers.addEntry(t,false,D.oSmartFilterbar,e)}}function K(){var e=D.oMultipleViewsHandler.getMode()!=="single"&&D.oMultipleViewsHandler.getSelectedKey()||"";var t=u.getStableId({type:"ListReportAction",subType:"Create",sQuickVariantKey:e});M.oCommonUtils.executeIfControlReady(function(t){var n=u.getStableId({type:"ListReportAction",subType:"CreateWithDialog",sQuickVariantKey:e});var r=n&&U.byId(n);if(r){D.oCreateWithDialogHandler.createWithDialog(r,t)}else{z(null,t)}},t)}function $(e){q(undefined,e.getSource(),G)}function G(e,t){var n=U.getOwnerComponent().getCreateWithFilters();var r=n.strategy||"extension";var i;switch(r){case"extension":i=U.getPredefinedValuesForCreateExtension(D.oSmartFilterbar,e)||{};break;default:P.error(r+" is not a valid strategy to extract values from the SmartFilterBar");return}var a=u.getStableId({type:"ListReportAction",subType:"CreateWithDialog"});var o=a&&U.byId(a);if(o){D.oCreateWithDialogHandler.createWithDialog(o,t,i)}else{z(i,t)}}function X(e){var t=M.oComponentUtils.getTemplatePrivateModel();var n=t.getProperty("/listReport/deleteEnabled");if(n){M.oCommonEventHandlers.deleteEntries(e)}}function Y(t){if(!M.oComponentUtils.isDraftEnabled()){return}var n=M.oComponentUtils.getTemplatePrivateModel();var r=n.getProperty("/listReport/vDraftState");switch(r){case"1":t.push(new e("IsActiveEntity","EQ",true));t.push(new e("HasDraftEntity","EQ",false));break;case"2":t.push(new e("IsActiveEntity","EQ",false));break;case"3":t.push(new e("IsActiveEntity","EQ",true));t.push(new e("SiblingEntity/IsActiveEntity","EQ",null));t.push(new e("DraftAdministrativeData/InProcessByUser","NE",""));break;case"4":t.push(new e("IsActiveEntity","EQ",true));t.push(new e("SiblingEntity/IsActiveEntity","EQ",null));t.push(new e("DraftAdministrativeData/InProcessByUser","EQ",""));break;case"5":t.push(new e("IsActiveEntity","EQ",true));break;default:var i=new e({filters:[new e("IsActiveEntity","EQ",false),new e("SiblingEntity/IsActiveEntity","EQ",null)],and:false});if(t[0]&&t[0].aFilters){var a=t[0];t[0]=new e([a,i],true)}else{t.push(i)}break}}function Z(){return D.oSmartFilterbar.getBasicSearchValue()||D.oWorklistHandler.getSearchString()}function ee(e){var t=function(){var e=D.oPresentationControlHandler;var t=e.getModel().getMetaModel();var n=t.getODataEntitySet(e.getEntitySet()).entityType;var r=e.getBinding(D);var i=r?r.getDownloadUrl():"";var a=r?r.aApplicationFilter||r.aApplicationFilters:[];if(!a.length){return Promise.resolve({sServiceUrl:i})}var o=D.oSmartFilterbar.getFilterData();var l=E.getFilterParams(t,n,a,o);if(l){i=M.oCommonUtils.fnReplaceFiltersWithGetDownloadUrl(i,l);return Promise.resolve({sServiceUrl:i})}else{return Promise.resolve({sServiceUrl:""})}};var n={sharePageToPressed:function(e){var t=M.oServices.oApplication.getBusyHelper();if(t.isBusy()){return}var n=M.oServices.oApplication.getAppTitle();var r=l.getCurrentUrl().then(function(t){switch(e){case"Email":n=M.oCommonUtils.getText("EMAIL_HEADER",[n]);sap.m.URLHelper.triggerEmail(null,n,t);break;default:break}});t.setBusy(r)},shareJamPressed:function(){l.openJamShareDialog(M.oServices.oApplication.getAppTitle())},shareTilePressed:function(){l.fireBookMarkPress()},getServiceUrl:function(){return t().then(function(e){if(e.sServiceUrl){e.sServiceUrl=e.sServiceUrl?e.sServiceUrl+"&$top=0&$inlinecount=allpages":""}var t={serviceUrl:e.sServiceUrl};U.onSaveAsTileExtension(t);return t.serviceUrl})},getModelData:function(){var e=d.get("sap.ushell.Container.getUser");var t=U.getOwnerComponent().getAppComponent();var r=t.getManifestEntry("sap.ui");var i=t.getManifestEntry("sap.app");return n.getServiceUrl().then(function(t){return l.getCurrentUrl().then(function(n){return{serviceUrl:t,icon:r&&r.icons?r.icons.icon:"",shellTitle:i?i.title:"",isShareInJamActive:!!e&&e().isJamActive(),customUrl:l.getCustomUrl(),currentUrl:n}})})}};var r=D.oIappStateHandler.areDataShownInTable();if(!r){D.oSmartFilterbar.search()}l.openSharePopup(M.oCommonUtils,e,n)}function te(e){var t=e.getId();var n=D.oSmartFilterbar;var r="";var i=[];var a=!!(M.oComponentUtils&&M.oComponentUtils.getSettings()&&(M.oComponentUtils.getSettings().quickVariantSelectionX||M.oComponentUtils.getSettings().quickVariantSelection));if(e.fetchVariant()&&e.fetchVariant().filter&&e.fetchVariant().filter.filterItems){i=e.fetchVariant().filter.filterItems}var o={search:!!n.getBasicSearchValue(),filter:!!(i.length||n.retrieveFiltersWithValues().length)};if(a){r=M.oCommonUtils.getContextText("NOITEMS_MULTIVIEW_LR_SMARTTABLE_WITH_FILTER",t)}else if(o.search||o.filter){r=M.oCommonUtils.getContextText("NOITEMS_LR_SMARTTABLE_WITH_FILTER",t)}else{r=M.oCommonUtils.getContextText("NOITEMS_LR_SMARTTABLE",t)}e.setNoData(r)}function ne(e){var t=e.getId();var n=M.oCommonUtils.getContextText("NOITEMS_LR_SMARTCHART",t);e.getChartAsync().then(function(e){e.setCustomMessages({NO_DATA:n})})}function re(e){var t=e.getEntitySet();if(R.has(t)){return R.get(t)}var n=M.oServices.oApplication.preloadComponent(t);R.set(t,n);return n}var ie;function ae(e){if(ie){ie()}ie=Function.prototype;M.oCommonEventHandlers.onDataReceived(e);if(B){var t;var n=false;for(var r=0;r<B.aWaitingObjects.length&&!n;r++){t=_(B.aWaitingObjects[r]);if(t){Q(t);B.resolve();n=true}}if(!n){t=_();if(t){Q(t);B.resolve()}else{B.reject()}}B=null;return}if(s.isTable(e)){var i=M.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(e).getBinding().getCount();h.announceTableUpdate(e.getHeader(),i)}w.handleDataReceived(e,Q);var a=M.oComponentUtils.getTemplatePrivateModel();a.setProperty("/listReport/firstSelection",true);D.oIappStateHandler.setDataShownInTable(true);M.oComponentUtils.hidePlaceholder()}function oe(e,t){A.beforeOpenContextMenu(e,t)}function le(e,t){A.onContextMenu(e,t)}return{onInit:function(){D.oSmartFilterbar=U.byId("listReportFilter");D.oPresentationControlHandler=M.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(U.byId(u.getStableId({type:"ListReportTable",subType:"SmartTable"}))||U.byId(u.getStableId({type:"ListReportTable",subType:"SmartList"})));C.fnMergeControlConfiguration(D.oSmartFilterbar.getControlConfiguration());D.updateControlOnSelectionChange=V;w=M.oComponentUtils.getFclProxy();D.bLoadListAndFirstEntryOnStartup=w.isListAndFirstEntryLoadedOnStartup();var e=new a(D,U,M);D.oMultipleViewsHandler=e;D.oMessageStripHelper=new r(D.oPresentationControlHandler,e,U,M,"listReport");D.refreshModel=function(){var t=M.oCommonUtils.refreshModel(D.oPresentationControlHandler.getEntitySet());if(t){e.refreshSiblingControls(D.oPresentationControlHandler)}};D.oCreateWithDialogHandler=new g(D,U,M);D.oWorklistHandler=new o(D,U,M);D.oIappStateHandler=new i(D,U,M);D.oMultiEditHandler=new m(D,U,M);D.oInsightsHandler=new S(D,U,M);var t=M.oComponentUtils.getTemplatePrivateModel();t.setProperty("/listReport/aMissingNavProperties",false);t.setProperty("/generic/bDataAreShownInTable",false);t.setProperty("/listReport/firstSelection",false);t.setProperty("/listReport/isHeaderExpanded",true);t.setProperty("/listReport/filterMode","classic");t.setProperty("/listReport/deleteEnabled",false);t.setProperty("/listReport/multiEditEnabled",false);if(M.oComponentUtils.isDraftEnabled()){t.setProperty("/listReport/vDraftState","0")}t.setProperty("/listReport/multipleViews/msgVisibility",false);var n=M.oServices.oInsightsFECardProvider&&M.oServices.oInsightsFECardProvider.getCardProviderInsightsInstance();if(n&&!M.oCommonUtils.isMultiViewMultiEntity()){M.oServices.oInsightsFECardProvider.fnRegisterComponentForProvider(D.oInsightsHandler,U.getView().getId());t.bindProperty("/generic/bDataAreShownInTable").attachChange(function(e){if(e.getSource().getValue()){D.oInsightsHandler.getCardsToShare("Table").then(function(e){n.onViewUpdate(true,e)})}else{n.onViewUpdate(true,[])}})}c.adaptToChildContext=function(e){D.oPresentationControlHandler.scrollToSelectedItemAsPerChildContext(e)};c.getItems=function(){return D.oPresentationControlHandler.getItems()};c.displayNextObject=function(e){return new Promise(function(t,n){B={aWaitingObjects:e,resolve:t,reject:n}})};c.refreshBinding=function(e,t,n){if(D.oIappStateHandler.areDataShownInTable()){if(D.oMultipleViewsHandler.refreshOperation(2,null,!e&&t)){return}if(e||t[U.getOwnerComponent().getEntitySet()]){M.oCommonUtils.refreshModel(U.getOwnerComponent().getEntitySet());D.oPresentationControlHandler.refresh(undefined,undefined,n)}}};c.getCurrentState=function(){return{permanentState:{data:D.oIappStateHandler.getCurrentAppState(),lifecycle:{permanent:true}}}};c.applyState=function(e){D.oIappStateHandler.applyState(e.permanentState).then(function(){if(!D.oIappStateHandler.areDataShownInTable()){w.handleDataReceived()}})};O();U.byId("template::FilterText").attachBrowserEvent("click",function(){U.byId("page").setHeaderExpanded(true)});var l=U.byId(u.getStableId({type:"ListReportAction",subType:"Share"})+"-internalBtn");l.attachPress(function(){ee(l)})},handlers:{addEntry:K,addEntryWithFilters:$,deleteEntries:X,deleteEntry:function(e){M.oCommonEventHandlers.deleteEntry(e)},updateTableTabCounts:function(){D.oMultipleViewsHandler.fnUpdateTableTabCounts()},onCancelCreateWithPopUpDialog:function(){D.oCreateWithDialogHandler.onCancelPopUpDialog()},onSaveCreateWithPopUpDialog:function(e){D.oCreateWithDialogHandler.onSavePopUpDialog(e)},onSelectionChange:function(e){var t=e.getSource();V(t)},onMultiSelectionChange:function(e){M.oCommonEventHandlers.onMultiSelectionChange(e)},onContactDetails:function(e){M.oCommonEventHandlers.onContactDetails(e)},onSmartFilterBarInitialise:x,onSmartFilterBarInitialized:function(){D.oIappStateHandler.onSmartFilterBarInitialized();M.oServices.oFioriAIHandler&&M.oServices.oFioriAIHandler.getFioriAIEnabledPromise("EasyFilter").then(function(){D.oIappStateHandler.onFEStartupInitialized().then(function(){D.oEasyFilterBarHandler=new F(D,U,M);D.oEasyFilterBarHandler.initialiseEasyFilterBar();D.oSmartFilterbar.attachFilterChange(function(e){D.oEasyFilterBarHandler.onFilterChange(e)})})})},onAfterSFBVariantLoad:function(e){D.oIappStateHandler.onAfterSFBVariantLoad(e);D.oEasyFilterBarHandler&&D.oEasyFilterBarHandler.handleVariantLoad(e)},onSmartListDataReceived:function(e){var t=e.getSource();ae(t)},onEasyFilterClearFilters:function(e){D.oEasyFilterBarHandler.onClearFilters(e)},onEasyFilterAfterQueryProcessing:function(e){D.oEasyFilterBarHandler.onAfterQueryProcessing(e)},onEasyFilterBeforeQueryProcessing:function(e){D.oEasyFilterBarHandler.onBeforeQueryProcessing(e)},onEasyFilterTokensChanged:function(e){D.oEasyFilterBarHandler.onTokensChanged(e)},onEasyFilterQueryChanged:function(e){D.oEasyFilterBarHandler.onQueryChanged(e)},onEasyFilterShowValueHelp:function(e){D.oEasyFilterBarHandler.onShowValueHelp(e)},onFilterSwitch:function(){var e=D.oSmartFilterbar;var t=M.oComponentUtils.getTemplatePrivateModel();if(t.getProperty("/listReport/filterMode")==="easyFilter"){e.setVisible(false);var n=M.oComponentUtils.getTemplatePrivateModel();n.setProperty("/listReport/firstSelection",true);n.setProperty("/generic/bDataAreShownInTable",false)}else{e.setVisible(true)}},onBeforeRebindTable:function(t){var r=t.getSource();te(r);var i=t.getParameters().bindingParams;var a=i.filters.slice(0);var o=D.oSmartFilterbar.getId();var l=M.oCommonUtils.getControlStateWrapperById(o,"SmartFilterBar");var s=l.getMissingNavProperties();if(s.length){var c=Object.keys(s).map(function(e){return s[e][0].keyField.replace(".","/")});var d=D.oSmartFilterbar.getVariantManagement().getId();var u=D.oSmartFilterbar.getCurrentVariantId();var p=T.getElementById(d).getAllVariants();var g=p.find(function(e){return e.getId()===u});var f=g?g.mProperties.texts.variantName.value:"";var m=M.oCommonUtils.getMetaModelEntityType(D.oSmartFilterbar.getEntitySet());var v=c.reduce(function(e,t){var n=m.property.filter(function(e){return e["sap:text"]&&e["sap:text"].startsWith(t)});n.forEach(function(t){if(t){e.push(t.name)}});return e},[]).filter(Boolean);var S=M.oCommonUtils.getText("MESSAGE_FILTER_NOT_AVAILABLE",[f,v.join(", ")]);var C={message:S,type:I.Warning};var h=D.oMultipleViewsHandler.getSelectedKey();this.extensionAPI.setCustomMessage(C,h);s.forEach(function(t){if(!t[0].exclude){var n=new e({aFilters:[new e({path:t[0].keyField.replace(".","/"),operator:H[t[0].operation],value1:t[0].value1})],bAnd:false});i.filters.push(n)}})}M.oCommonEventHandlers.onBeforeRebindTable(t,{determineSortOrder:D.oMultipleViewsHandler.determineSortOrder,ensureExtensionFields:U.templateBaseExtension.ensureFieldsForSelect,addTemplateSpecificFilters:Y,getSearchString:Z,addExtensionFilters:U.templateBaseExtension.addFilters,resolveParamaterizedEntitySet:D.oMultipleViewsHandler.resolveParameterizedEntitySet,isFieldControlRequired:false,isPopinWithoutHeader:true,isDataFieldForActionRequired:true,isFieldControlsPathRequired:true,isMandatoryFiltersRequired:true,numberOfExpandedLevels:1});U.onBeforeRebindTableExtension(t);var E=i.events.dataRequested||Function.prototype;i.events.dataRequested=function(e){var t=this;re(r).then(function(){E.call(t,e)})};var b=i.events.dataReceived||Function.prototype;i.events.dataReceived=function(e){ae(r);var t=y.getHiddenColumnInfo(r);M.oCommonEventHandlers.hideTableCells(r,t);b.call(this,e)};var F=i.events.refresh||Function.prototype;i.events.refresh=function(e){D.oMultipleViewsHandler.onDataRequested();F.call(this,e)};D.oMessageStripHelper.onBeforeRebindControl(t);D.oMultipleViewsHandler.onRebindContentControl(i,a);n.handleErrorsOnTableOrChart(M,t,D)},onListNavigate:function(e){var t=p({},e);(M.oComponentUtils.isDraftEnabled()?M.oServices.oApplicationController.synchronizeDraftAsync():Promise.resolve()).then(function(){M.oCommonEventHandlers.onListNavigate(t,D)})},onEdit:function(e){M.oCommonEventHandlers.onListNavigate(e,D)},onCallActionFromToolBar:function(e){M.oCommonEventHandlers.onCallActionFromToolBar(e,D)},onDataFieldForIntentBasedNavigation:function(e){M.oCommonEventHandlers.onDataFieldForIntentBasedNavigation(e,D)},onDataFieldWithEmail:function(e){M.oCommonEventHandlers.onDataFieldWithEmail(e)},onDataFieldWithIntentBasedNavigation:function(e){M.oCommonEventHandlers.onDataFieldWithIntentBasedNavigation(e,D)},onBeforeSemanticObjectLinkNavigationCallback:function(e){return M.oCommonEventHandlers.onBeforeSemanticObjectLinkNavigationCallback(e)},onBeforeSemanticObjectLinkPopoverOpens:function(e){var t=e.getSource();var n=D.oSmartFilterbar.getUiState().getSelectionVariant();if(D.oSmartFilterbar.getEntitySet()!==t.getEntitySet()){n.FilterContextUrl=M.oServices.oApplication.getNavigationHandler().constructContextUrl(t.getEntitySet(),t.getModel())}var r=JSON.stringify(n);M.oCommonUtils.semanticObjectLinkNavigation(e,r,U,D)},onSemanticObjectLinkNavigationPressed:N,onSemanticObjectLinkNavigationTargetObtained:W,onSemanticObjectLinkNavigationTargetObtainedSmartLink:j,onDraftLinkPressed:function(e){var t=e.getSource();var n=t.getBindingContext();M.oCommonUtils.showDraftPopover(n,t)},onAssignedFiltersChanged:function(e){if(e.getSource()){U.byId("template::FilterText").setText(e.getSource().retrieveFiltersWithValuesAsText())}},onSearchButtonPressed:function(){D.oIappStateHandler.onSearchPressed()},onAddCardsToRepository:function(e){M.oServices.oApplication.performAfterSideEffectExecution(function(){D.oInsightsHandler.prepareAndShowCard(e,{cardType:"Table"})},true)},onBeforeRebindChart:function(e){var t=e.getSource();ne(t);var r=e.getParameters().bindingParams;var i=r.filters.slice(0);var a={setBindingPath:t.setChartBindingPath.bind(t),ensureExtensionFields:Function.prototype,addTemplateSpecificFilters:Y,addExtensionFilters:U.templateBaseExtension.addFilters,resolveParamaterizedEntitySet:D.oMultipleViewsHandler.resolveParameterizedEntitySet,isFieldControlRequired:false,isMandatoryFiltersRequired:true};M.oCommonUtils.onBeforeRebindTableOrChart(e,a,D.oSmartFilterbar);U.onBeforeRebindChartExtension(e);var o=r.events.dataReceived||Function.prototype;r.events.dataReceived=function(e){D.oMultipleViewsHandler.onDataRequested();M.oComponentUtils.hidePlaceholder();o.call(this,e)};D.oMultipleViewsHandler.onRebindContentControl(r,i);n.handleErrorsOnTableOrChart(M,e,D)},onChartInitialized:function(e){k(e);M.oCommonUtils.checkToolbarIntentsSupported(e.getSource())},onSelectionDetailsActionPress:function(e){D.oMultipleViewsHandler.onDetailsActionPress(e)},onShareListReportActionButtonPress:function(e){M.oCommonUtils.executeIfControlReady(ee,u.getStableId({type:"ListReportAction",subType:"Share"})+"-internalBtn")},onInlineDataFieldForAction:function(e){M.oCommonEventHandlers.onInlineDataFieldForAction(e)},onInlineDataFieldForIntentBasedNavigation:function(e){M.oCommonEventHandlers.onInlineDataFieldForIntentBasedNavigation(e.getSource(),D)},onDeterminingDataFieldForAction:function(e){M.oCommonEventHandlers.onDeterminingDataFieldForAction(e,D.oPresentationControlHandler)},onDeterminingDataFieldForIntentBasedNavigation:function(e){M.oCommonEventHandlers.onDeterminingDataFieldForIntentBasedNavigation(e.getSource(),D.oPresentationControlHandler.getSelectedContexts(),D.oSmartFilterbar)},onTableInit:function(e){var t=e.getSource();var n=y.getHiddenColumnInfo(t);if(n&&n.staticHiddenColumns&&n.staticHiddenColumns.length>0){t.deactivateColumns(n.staticHiddenColumns)}M.oCommonUtils.checkToolbarIntentsSupported(t);t.setModel(new sap.ui.model.base.ManagedObjectModel(t),"tableobserver");M.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(t).addCellSelector()},onSearchWorkList:function(e){D.oWorklistHandler.performWorklistSearch(e)},onMultiEditButtonPress:function(){D.oMultiEditHandler.onMultiEditButtonPress()},onSaveMultiEditDialog:function(e){D.oMultiEditHandler.onSaveMultiEditDialog(e)},onCancelMultiEditDialog:function(e){D.oMultiEditHandler.onCancelMultiEditDialog(e)},dataStateFilter:function(e,t){return D.oMessageStripHelper.dataStateFilter(e,t)},dataStateClose:function(){D.oMessageStripHelper.onClose()},onBeforeExport:function(e){M.oCommonEventHandlers.onBeforeExport(e)},beforeOpenContextMenu:oe,onContextMenu:le},formatters:{formatDraftType:function(e,t,n){if(e&&e.DraftUUID){if(!t){return sap.m.ObjectMarkerType.Draft}else if(n){return e.InProcessByUser?sap.m.ObjectMarkerType.Locked:sap.m.ObjectMarkerType.Unsaved}}return sap.m.ObjectMarkerType.Flagged},formatDraftVisibility:function(e,t){if(e&&e.DraftUUID){if(!t){return sap.m.ObjectMarkerVisibility.TextOnly}}return sap.m.ObjectMarkerVisibility.IconAndText},formatDraftLineItemVisible:function(e,t){if(e&&e.DraftUUID){if(t==="5"){return false}return true}return false},formatDraftOwner:function(e,t){var n="";if(e&&e.DraftUUID&&t){var r=e.InProcessByUserDescription||e.InProcessByUser||e.LastChangedByUserDescription||e.LastChangedByUser;if(r){n=M.oCommonUtils.getText("ST_DRAFT_OWNER",[r])}else{n=M.oCommonUtils.getText("ST_DRAFT_ANOTHER_USER")}}return n},formatItemTextForMultipleView:function(e){return D.oMultipleViewsHandler?D.oMultipleViewsHandler.formatItemTextForMultipleView(e):""},formatMessageStrip:function(e,t){return D.oMultipleViewsHandler?D.oMultipleViewsHandler.formatMessageStrip(e,t):""}},extensionAPI:new t(M,U,D)}}};return M});
//# sourceMappingURL=ControllerImplementation.js.map