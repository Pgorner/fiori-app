{"version":3,"file":"SearchQuery.js","names":["sap","ui","define","core","___Query","___EqualsMode","___ConditionType","___DataSourceType","___core_errors","___ComparisonOperator","____timecontroller_timecontrolledexecutor","Query","EqualsMode","ConditionType","DataSourceSubType","DataSourceType","QueryIsReadOnlyError","ComparisonOperator","TimeControlledExecutor","SearchRequest","query","constructor","this","execute","result","_executeImpl","equals","other","clone","SearchQuery","calculateFacets","multiSelectFacets","facetTop","timeControlledExecutor","groupBy","limitAjaxRequests","properties","suppressRefuseOutdatedResponsesDecorator","super","outdatedTimeLimit","setCalculateFacets","setMultiSelectFacets","setFacetTop","_createReadOnlyClone","getResultSetAsync","skip","top","nlq","filter","sortOrder","sina","mode","CheckFireQuery","_execute","filterAttributes","chartQueries","_collectAttributesWithFilter","_createChartQueries","requests","delayedCharQueries","push","_executeSearchQuery","i","length","chartQuery","dataSourceMetadata","dataSource","getAttributeMetadata","dimension","usage","Facet","results","Promise","all","delayedChartQueryRequests","j","delayedCharQuery","delayedCharQueryResults","concat","searchResult","chartResultSets","slice","_mergeFacetsToSearchResultSet","isFolderMode","_executeSearchQueryInFolderMode","_executeSearchQueryInSearchMode","_doExecuteSearchQuery","queryForFacets","queryForItems","_assembleQueryForItems","resultSetForFacets","resultSetForItems","mergedResultSet","_mergeResultSetsInNavigationFolderMode","items","item","parent","totalCount","addErrors","getErrors","folderAttribute","getFolderAttribute","isAdditionalRootNodeFilterNeeded","autoInsertCondition","createSimpleCondition","attribute","operator","DescendantOf","value","folderAttributeConditions","rootCondition","getConditionsByAttribute","condition","ChildOf","descendantFilterConditions","transformedQuery","_filteredQueryTransform","resultSet","provider","executeSearchQuery","_filteredQueryBackTransform","_genericFilteredQueryTransform","type","BusinessObject","subType","Filtered","chartResultSet","facets","_formatResultSetAsync","executeSequentialAsync","searchResultSetFormatters","formatter","formatAsync","attributeMap","_doCollectAttributes","attributedIds","Object","keys","attributeId","attributeMetadata","isHierarchy","Simple","Complex","conditions","subCondition","_createChartQuery","filterAttribute","createChartQuery","setFilter","removeAttributeConditions","searchResultSet","_addSelectedFiltersToSearchResultSet","_addChartResultSetToSearchResultSet","_calculateFacetTitle","getFirstAttribute","label","conditionAttributeLabel","conditionAttribute","matchFacetIndex","_findMatchFacet","matchFacet","chartquery","_createChartResultSet","title","splice","countValue","selectedFacetItemList","k","matchFacetItemIndex","_findFilterConditionInFacetItemList","_createChartResultSetItem","filterCondition","dimensionValueFormatted","valueLabel","measureValue","measureValueFormatted","facetItemSelectionOutsideRange","appendFacetItemList","m","matchIndex","_isRangeFacet","sort","a","b","facet","facetItems","index","chartFacetitem","AttributeType","Double","__exports","__esModule"],"sources":["SearchQuery-dbg.js"],"mappings":"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","ignoreList":[]}