/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){
/*!
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(["./Condition","./ConditionType","./LogicalOperator","./SimpleCondition"],function(t,i,o,n){"use strict";const e=t["Condition"];const s=i["ConditionType"];const r=o["LogicalOperator"];const c=n["SimpleCondition"];class l extends e{type=(()=>s.Complex)();operator=(()=>r.And)();conditions=[];constructor(t){super(t);this.operator=t.operator??this.operator;this.conditions=t.conditions??this.conditions}clone(){const t=[];for(let i=0;i<this.conditions.length;++i){t.push(this.conditions[i].clone())}return new l({sina:this.sina,operator:this.operator,conditions:t,valueLabel:this.valueLabel,attributeLabel:this.attributeLabel})}equals(t){if(!(t instanceof l)){return false}if(this.operator!==t.operator){return false}if(this.conditions.length!==t.conditions.length){return false}const i={};for(let o=0;o<this.conditions.length;++o){const n=this.conditions[o];let e=false;for(let o=0;o<t.conditions.length;++o){if(i[o]){continue}const s=t.conditions[o];if(n.equals(s)){e=true;i[o]=true;break}}if(!e){return false}}return true}containsAttribute(t){for(const i of this.conditions){if(i.containsAttribute(t)){return true}}return false}_collectAttributes(t){for(const i of this.conditions){i._collectAttributes(t)}}addCondition(t){if(!(t instanceof e)){t=this.sina.createSimpleCondition(t)}this.conditions.push(t)}removeConditionAt(t){this.conditions.splice(t,1)}hasFilters(){return this.conditions.length>=1}removeAttributeConditions(t){let i={deleted:false,attribute:"",value:""};for(let o=0;o<this.conditions.length;++o){const n=this.conditions[o];switch(n.type){case s.Complex:i=n.removeAttributeConditions(t);break;case s.Simple:if(n.attribute===t){i={deleted:true,attribute:n.attribute,value:n.value};this.removeConditionAt(o);o--}break}}this.cleanup();return i}getAttributeConditions(t){const i=[];const o=function(t,n){switch(t.type){case s.Complex:for(let i=0;i<t.conditions.length;i++){o(t.conditions[i],n)}break;case s.Simple:if(t.attribute===n){i.push(t)}break}};o(this,t);return i}cleanup(){let t=false;const i=function(o){for(let n=0;n<o.conditions.length;++n){const e=o.conditions[n];switch(e.type){case s.Complex:i(e);if(e.conditions.length===0){t=true;o.removeConditionAt(n);n--}break;case s.Simple:break}}};do{t=false;i(this)}while(t)}resetConditions(){this.conditions.splice(0,this.conditions.length)}getFirstAttribute(){if(this.conditions.length===0){return null}if(this.conditions[0]instanceof l){return this.conditions[0].getFirstAttribute()}if(this.conditions[0]instanceof c){return this.conditions[0].getFirstAttribute()}throw new Error("Condition is neither simple nor complex")}_collectFilterConditions(t,i){for(const o of this.conditions){o._collectFilterConditions(t,i)}}toJson(){const t={type:s.Complex,operator:this.operator,conditions:[],valueLabel:this.valueLabel,attributeLabel:this.attributeLabel};for(let i=0;i<this.conditions.length;++i){const o=this.conditions[i];if(o instanceof l){t.conditions.push(o.toJson())}if(o instanceof c){t.conditions.push(o.toJson())}}if(this.userDefined){t.userDefined=true}return t}}var a={__esModule:true};a.ComplexCondition=l;return a})})();
//# sourceMappingURL=ComplexCondition.js.map