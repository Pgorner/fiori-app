/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){
/*!
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(["./SinaObject","./DataSourceType","./AttributeMetadata","./AttributeGroupMetadata","../core/errors","./HierarchyDisplayType","./MatchingStrategy","./AttributeType"],function(t,a,e,i,r,s,h,u){"use strict";const c=t["SinaObject"];const n=a["DataSourceType"];const o=e["AttributeMetadata"];const l=i["AttributeGroupMetadata"];const d=r["DataSourceAttributeMetadataNotFoundError"];const b=s["HierarchyDisplayType"];const y=h["MatchingStrategy"];const p=u["AttributeType"];class M extends c{annotations;type;subType;id;label;labelPlural;icon;hidden=false;usage={};attributesMetadata=[];attributeMetadataMap={};attributeGroupsMetadata=[];attributeGroupMetadataMap={};isHierarchyDataSource;hierarchyName;hierarchyDisplayType;hierarchyAttribute;_hierarchyDataSource;system;_hierarchyAttributeGroupMetadata;_staticHierarchyAttributeMetadata;static getAllDataSource(){return new M({id:"All",label:"All",type:n.Category})}constructor(t){super({sina:t.sina});this.annotations=t.annotations??this.annotations;this.type=t.type??this.type;this.subType=t.subType;this.id=t.id??this.id;this.label=t.label??this.label;this.labelPlural=t.labelPlural??this.labelPlural;this.icon=t.icon;this.hidden=t.hidden??this.hidden;this.usage=t.usage??this.usage;this.attributesMetadata=t.attributesMetadata??this.attributesMetadata;this.attributeMetadataMap=t.attributeMetadataMap??this.createAttributeMetadataMap(this.attributesMetadata);this.attributeGroupsMetadata=t.attributeGroupsMetadata??this.attributeGroupsMetadata;this.attributeGroupMetadataMap=t.attributeGroupMetadataMap??this.attributeGroupMetadataMap;this.isHierarchyDataSource=t.isHierarchyDataSource;this.hierarchyName=t.hierarchyName;this.hierarchyDisplayType=t.hierarchyDisplayType;this.hierarchyAttribute=t.hierarchyAttribute;if(!this.labelPlural||this.labelPlural.length===0){this.labelPlural=this.label}if(this.type===n.BusinessObject&&this.attributesMetadata.length===0){}}_configure(){const t=this.sina.metadataFormatters;if(!t){return}for(let a=0;a<t.length;++a){const e=t[a];e.format({dataSources:[this]})}}createAttributeMetadataMap(t=[]){const a={};for(let e=0;e<t.length;++e){const i=t[e];a[i.id]=i}return a}getAttributeMetadata(t){if(this.id==="All"){return this.getCommonAttributeMetadata(t)}if(this.id==="CD$ALL~ESH_TRANSACTION~"&&(t==="TCDTEXT"||t==="TCODE")&&!this.attributeMetadataMap[t]){this.attributeMetadataMap[t]=new o({label:"label",isSortable:false,isKey:false,matchingStrategy:y.Text,id:t,usage:{Title:{displayOrder:1}},type:p.String})}const a=this.attributeMetadataMap[t];if(a){return a}throw new d(t,this.id)}getAttributeGroupMetadata(t){if(this.attributeGroupMetadataMap){const a=this.attributeGroupMetadataMap[t];if(a){return a}}throw new d(t,this.id)}getCommonAttributeMetadata(t){for(const a of this.sina.dataSources){if(a.type!==n.BusinessObject){continue}const e=a.attributeMetadataMap[t];if(e){return e}}throw new d(t,this.id)}getHierarchyDataSource(){if(this._hierarchyDataSource instanceof M){return this._hierarchyDataSource}for(let t=0;t<this.attributesMetadata.length;++t){const a=this.attributesMetadata[t];if(!a.isHierarchy){continue}if(a.hierarchyDisplayType===b.StaticHierarchyFacet||a.hierarchyDisplayType===b.HierarchyResultView){this._hierarchyDataSource=this.sina.getHierarchyDataSource(a.hierarchyName);return this._hierarchyDataSource}}return undefined}getStaticHierarchyAttributeMetadata(){if(this._staticHierarchyAttributeMetadata){return this._staticHierarchyAttributeMetadata}for(let t=0;t<this.attributesMetadata.length;++t){const a=this.attributesMetadata[t];if(!a.isHierarchy){continue}if(a.hierarchyDisplayType===b.StaticHierarchyFacet){this._staticHierarchyAttributeMetadata=a;return this._staticHierarchyAttributeMetadata}}return undefined}_getStaticHierarchyAttributeForDisplay(){if(this._hierarchyAttributeGroupMetadata instanceof l||this._hierarchyAttributeGroupMetadata instanceof o){return this._hierarchyAttributeGroupMetadata}const t=this.hierarchyAttribute||this.getHierarchyDataSource()?.hierarchyAttribute;if(!t){return undefined}for(let a=0;a<this.attributeGroupsMetadata.length;a++){const e=this.attributeGroupsMetadata[a];const i=e._private?.parentAttribute;if(i instanceof o&&i.id===t&&e._private?.isDescription===true){this._hierarchyAttributeGroupMetadata=e;return this._hierarchyAttributeGroupMetadata}}this._hierarchyAttributeGroupMetadata=this.attributeMetadataMap[this.hierarchyAttribute];return this._hierarchyAttributeGroupMetadata}toJson(){return{type:this.type,id:this.id,label:this.label,labelPlural:this.labelPlural}}}var A={__esModule:true};A.DataSource=M;return A})})();
//# sourceMappingURL=DataSource.js.map