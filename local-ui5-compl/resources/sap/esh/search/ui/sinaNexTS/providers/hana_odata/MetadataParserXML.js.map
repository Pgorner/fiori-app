{"version":3,"file":"MetadataParserXML.js","names":["sap","ui","define","____sina_DataSourceType","___MetadataParser","___HierarchyMetadataParser","____core_errors","____sina_i18n","DataSourceType","MetadataParser","HierarchyMetadataParser","MetadataParserError","getText","MetadataParserXML","jsDOMWindow","constructor","provider","super","_getWindow","window","this","jsdom","require","fs","jquery","readFileSync","dom","JSDOM","runScripts","$","jQuery","fireRequest","client","url","response","getXML","parseResponse","metaXML","that","allInOneMap","businessObjectMap","Map","businessObjectList","dataSourceMap","dataSourcesList","xmlDoc","parseXML","schemaNode","find","$schemaNode","helperMap","_parseEntityType","_parseEntityContainer","schema","hierarchyMetadataParser","loadResourceBundlePromises","each","entityTypeName","attr","entitySet","keys","attributeMap","resourceBundle","undefined","labelResourceBundle","label","labelPlural","annotations","hierarchyDefinitionsMap","icon","name","dataSource","push","parse","siblings","$element","annotationName","length","toUpperCase","annotationValue","_getValueFromElement","sKey","getTextFromResourceBundle","then","sTranslatedText","catch","e","log","error","toString","_setAnnotationValue","index","attributeName","attribute","labelRaw","type","presentationUsage","isFacet","isSortable","supportsTextSearch","displayOrder","annotationsAttr","unknownAnnotation","hierarchyDefinition","facetPosition","facetIconUrlAttributeName","isKey","isFilteringAttribute","children","arrayEntry","entryAnnoName","entryAnnoValue","startsWith","identification","UI","IDENTIFICATION","POSITION","Array","isArray","i","TYPE","Promise","all","element","textValue","text","trim","floatValue","Number","parseFloat","isNaN","intValue","parseInt","schemaXML","entityTypeFullQualified","entityType","slice","lastIndexOf","newDatasource","sina","createDataSource","id","BusinessObject","attributesMetadata","__exports","__esModule"],"sources":["MetadataParserXML-dbg.js"],"mappings":"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","ignoreList":[]}