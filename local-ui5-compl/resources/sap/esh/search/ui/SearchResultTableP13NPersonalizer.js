/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["./i18n","sap/m/p13n/Popup","sap/m/p13n/SelectionPanel","./error/ErrorHandler"],function(e,t,n,s){"use strict";function l(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const o=l(e);const a=l(s);class i{model;table;p13nPanel;p13nPopup;constructor(e){this.model=e}initialize(e){try{this.table=e;if(this.p13nPopup===undefined){this.createPopup()}}catch(e){const t=a.getInstance();t.onError(e)}}updateTableColumns(e){if(e){this.model.setTableColumns(this.model.getTableInitialColumns(),true)}else{const e=this.p13nPanel.getP13nData(false);const t=this.model.getTableColumns(false);const n=[];for(const s of e){for(const e of t){if(e.p13NColumnName===s.name){e.visible=s.visible;n.push(e);break}}}this.model.setTableColumns(n,true)}}updateP13NColumns(e){const t=[];let n=[];if(e){n=this.model.getTableInitialColumns()}else{n=this.model.getTableColumns(false)}for(const e of n){t.push({name:e.p13NColumnName,label:e.name,visible:e.visible})}this.p13nPanel.setP13nData(t)}createPopup(){this.p13nPanel=new n({showHeader:false});this.p13nPopup=new t(this.table.getId()+"-personalizer",{title:o.getText("personalizeTable"),panels:[this.p13nPanel],warningText:o.getText("resetColumns"),reset:function(){this.updateP13NColumns(true)}.bind(this),close:function(e){if(e.getParameter("reason")==="Ok"){this.updateTableColumns(this.p13nPopup.getResetButton().getEnabled()===false);this.table.update()}}.bind(this)});this.p13nPopup.addStyleClass("sapUshellSearchResultTablePersonalizationDialog")}destroyControllerAndDialog(){this.p13nPopup.destroyPanels();this.p13nPopup.destroy()}openDialog(){this.updateP13NColumns(false);this.p13nPopup.open(null)}}return i})})();
//# sourceMappingURL=SearchResultTableP13NPersonalizer.js.map