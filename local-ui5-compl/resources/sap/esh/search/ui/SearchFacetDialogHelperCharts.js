/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["./i18n","./controls/facets/types/tabbarfacet/SearchFacetPieChart","sap/base/Log","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/IconTabFilter","sap/m/Button","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/ResizeHandler","sap/suite/ui/microchart/ComparisonMicroChartData","sap/m/ActionSheet","sap/m/library","sap/ui/core/Element"],function(t,e,a,s,r,n,i,o,c,l,h,p,d){"use strict";function g(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const u=g(t);const f=g(e);const m=p["ValueColor"];const y=p["PlacementType"];class C{static dialog;constructor(t){C.dialog=t}static getBarChartPlaceholder(){const t={height:"90%",width:"100%",colorPalette:"",tooltip:""};const e=new s(t);e.addStyleClass("largeChart1barchart");const a=new i({path:"value",operator:o.GT,value1:0});const r={path:"items",factory:()=>{const t=new l({title:{path:"label"},value:{path:"value"},color:{path:"selected",formatter:t=>{let e=m.Good;if(!t){e=m.Neutral}return e}},tooltip:{parts:[{path:"label"},{path:"value"}],formatter:(t,e)=>t+": "+e},displayValue:{path:"valueLabel"},press:t=>{this.dialog.onDetailPageSelectionChangeCharts(t)}});return t},filters:[a]};e.bindAggregation("data",r);e.setBusyIndicatorDelay(0);return e}testWhetherPieWedgeOrLabelIsDummy(t){let e=false;try{const a=JSON.stringify(t.getParameters().data[0].data).split('"')[3];const s=a.match(/\d+/g)[0];const r=a.match(/\d+/g)[1];if(a===u.getText("facetPieChartOverflowText2",[s,r])){e=true}else if(a===u.getText("facetPieChartOverflowText2",[r,s])){e=true}}catch(t){a.debug(t)}return e}static getPieChartPlaceholder(){const t={oSearchFacetDialog:this.dialog};const e=new f("",t);e.addStyleClass("largeChart2piechart");c.register(e,function(t){let e=0;let a=0;if(t.target.firstChild){e=parseInt(window.getComputedStyle(t.target.firstChild,null).getPropertyValue("transform-origin").split(" ")[0],10);a=t.size.width/2-e;t.target.firstChild.style.marginLeft=a+"px"}});return e}static setDummyTabBarItems(t,...e){const a=[new r({text:u.getText("facetList"),icon:"sap-icon://list",key:"list"+e[0]}),new r({text:u.getText("facetBarChart"),icon:"sap-icon://horizontal-bar-chart",key:"barChart"+e[0]}),new r({text:u.getText("facetPieChart"),icon:"sap-icon://pie-chart",key:"pieChart"+e[0]})];t.setProperty("tabBarItems",a);t.chartOnDisplayIndex=0}static getDropDownButton(t){const e=[];let s;const r=t.getProperty("tabBarItems");const i=new n({icon:r[t.chartOnDisplayIndex].getIcon()});for(let a=0;a<r.length;a++){s=new n({text:r[a].getText(),icon:r[a].getIcon(),press:e=>{let a;const s=e.getSource().sId;a=document.getElementById(s).dataset.facetViewIndex;a=parseInt(a,10);t.chartOnDisplayIndex=a;if(t.chartOnDisplayIndex===0){$(".sapUshellSearchFacetDialogSettingsContainer").css("display","block")}else{$(".sapUshellSearchFacetDialogSettingsContainer").css("display","none")}t.chartOnDisplayIndexByFilterArray[t.facetOnDisplayIndex]=a;const n=r[t.chartOnDisplayIndex].getIcon();i.setIcon(n);const o=r[t.chartOnDisplayIndex].getText();const c=u.getText("displayAs",[o]);i.setTooltip(c);const l=$(".sapUshellSearchFacetDialogFacetList")[0];if(l){const t=d.getElementById(l.id);if(!t.getSelectedItem()){t.setSelectedItem(t.getItems()[0])}t.fireSelectionChange({listItem:t.getSelectedItem()})}t.controlChartVisibility(t,a)}});s.data("facet-view-index",""+a,true);e.push(s)}const o=new h({showCancelButton:true,buttons:e,placement:y.Bottom,cancelButtonPress:function(){a.info("sap.m.ActionSheet: cancelButton is pressed")}});i.addStyleClass("sapUshellSearchFacetDialogTabBarButton");const c=r[t.chartOnDisplayIndex].getText();const l=u.getText("displayAs",[c]);i.setTooltip(l);i.attachPress(function(){o.openBy(this)});return i}static getListContainersForDetailPage(){let t,e,a;const s=[];let r=0;let n=440;const i=$(".searchFacetLargeChartContainer");for(let t=0;t<i.length;t++){if(i[t].clientHeight>0){n=i[t].offsetParent.offsetParent.offsetParent.clientHeight;r=t;break}}const o=$(".searchFacetLargeChartContainer")[r];if(o){const r=d.getElementById(o.id);const i=$(".sapUshellSearchFacetDialogSubheaderToolbar .sapMSF");const c=$(".sapUshellSearchFacetDialogSortButton");const l=o.firstChild["children"];for(let s=0;s<l.length;s++){if(l[s].className){if(l[s].className.match(/sapMList/)){t=l[s]}else if(l[s].className.match(/barchart/)){e=l[s]}else if(l[s].className.match(/piechart/)){a=l[s]}}}s.push(o);s.push(r);s.push(n);s.push(t);s.push(e);s.push(a);s.push(c);s.push(i)}return s}}return C})})();
//# sourceMappingURL=SearchFacetDialogHelperCharts.js.map