/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../../i18n","./SearchResultListItem","./SearchText","sap/esh/search/ui/SearchHelper","sap/ui/core/Icon","sap/ui/core/IconPool","sap/ui/core/format/DateFormat","sap/ui/core/Locale","sap/base/i18n/Localization"],function(e,t,n,s,i,r,a,o,l){"use strict";function c(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const u=c(e);const d=c(t);const h=c(n);const p=d.extend("sap.esh.search.ui.controls.SearchResultListItemDocument",{renderer:{apiVersion:2},_renderContentContainer:function e(t){const n=this.getModel();t.openStart("div",this.getId()+"-content");t.class("sapUshellSearchResultListItem-Content");if(!n.config.optimizeForValueHelp){t.class("sapUshellSearchResultListItem-ContentValueHelp")}t.openEnd();this._renderTitleContainer(t);this._renderAttributesContainer(t);t.close("div")},_renderTitleContainer:function e(t){const n=this.getModel();if(!n.config.optimizeForValueHelp){t.openStart("div",this.getId()+"-title-and-image-container");t.class("sapUshellSearchResultListItem-TitleAndImageContainer");t.openEnd()}t.openStart("div",this.getId()+"-title-container");t.class("sapUshellSearchResultListItem-TitleContainer");if(n.config.optimizeForValueHelp){t.class("sapUshellSearchResultListItem-TitleContainerValueHelp")}t.openEnd();this._renderCheckbox(t);const s=this.getProperty("additionalParameters").titleUrl;const i=this.getAggregation("_titleLink");i.setHref(s);i.setText(this.getProperty("title"));if(s.length===0){i.setEnabled(false)}t.renderControl(i);const r=this.getAggregation("_typeText");r.setText(this.getProperty("type"));t.renderControl(r);t.close("div");if(!n.config.optimizeForValueHelp){this._renderImageForPhone(t);t.close("div")}},_renderAttributesContainer:function e(t){t.openStart("div",this.getId()+"-attributes-expand-container");t.class("sapUshellSearchResultListItemDoc-AttributesExpandContainer");const n=this.getProperty("expanded");if(n){t.class("sapUshellSearchResultListItem-AttributesExpanded")}t.openEnd();t.openStart("div",this.getId()+"-attributes-and-actions");t.class("sapUshellSearchResultListItem-AttributesAndActions");t.openEnd();t.openStart("ul",this.getId()+"-attributes");t.class("sapUshellSearchResultListItem-Attributes");t.openEnd();this._renderThumbnailSnippetContainer(t);this._renderDocAttributesContainer(t);t.openStart("div",this.getId()+"-expand-spacer-attribute");t.class("sapUshellSearchResultListItem-ExpandSpacerAttribute");t.attr("aria-hidden","true");t.openEnd();t.close("div");t.close("ul");this._renderRelatedObjectsToolbar(t);t.close("div");t.close("div")},_renderThumbnailContainer:function e(t){if(!this.getProperty("imageUrl")){return}if(this.getProperty("containsThumbnail")===true){t.openStart("div",this.getId()+"-thumbnail-container");t.class("sapUshellSearchResultListItemDoc-ThumbnailContainer");t.openEnd();t.openStart("div",this.getId()+"-thumbnail-container-inner");t.class("sapUshellSearchResultListItemDoc-ThumbnailContainerInner");t.openEnd();const e=new i({src:r.getIconURI("search"),useIconTooltip:false});if(this.getProperty("containsSuvFile")===true){const t=function(){window.open(this.getSuvlink(),"_blank","noopener,noreferrer")};e.attachPress(t)}e.addStyleClass("sapUshellSearchResultListItemDoc-ThumbnailZoomIcon");t.renderControl(e);if(this.getProperty("containsSuvFile")===true){t.openStart("a",this.getId()+"-suv-link-1");t.attr("target","_blank");t.attr("href",this.getProperty("suvlink"));t.attr("rel","noopener noreferrer");t.openEnd()}else{t.openStart("a",this.getId()+"-suv-link-2");t.attr("target","_blank");t.attr("rel","noopener noreferrer");t.openEnd()}t.openStart("img",this.getId()+"-thumbnail");t.class("sapUshellSearchResultListItemDoc-Thumbnail");t.attr("src",this.getProperty("imageUrl"));t.openEnd();t.close("img");t.close("a");t.close("div");t.close("div")}else{t.openStart("div",this.getId()+"-thumbnail-container-hidden");t.class("sapUshellSearchResultListItemDoc-ThumbnailContainer-hidden");t.openEnd();t.close("div")}},_renderImageForPhone:function e(t){if(this.getProperty("imageUrl")&&this.getProperty("containsThumbnail")===true){t.openStart("div",this.getId()+"-title-image");t.class("sapUshellSearchResultListItem-TitleImage");t.openEnd();t.openStart("div",this.getId()+"-image-container-alignment-helper");t.class("sapUshellSearchResultListItem-ImageContainerAlignmentHelper");t.openEnd();t.close("div");t.openStart("img",this.getId()+"-image");t.class("sapUshellSearchResultListItem-Image");t.attr("src",this.getProperty("imageUrl"));t.openEnd();t.close("img");t.close("div")}},_renderDocAttributesContainer:function e(t){t.openStart("div",this.getId()+"-attributes-container");t.class("sapUshellSearchResultListItemDoc-AttributesContainer");t.openEnd();const n=this.getProperty("attributes");this._renderAllAttributes(t,n);t.close("div")},_renderThumbnailSnippetContainer:function e(t){t.openStart("div",this.getId()+"-thumbnail-snippet-container");t.class("sapUshellSearchResultListItemDoc-ThumbnailSnippetContainer");t.openEnd();this._renderThumbnailContainer(t);this._renderSnippetContainer(t);t.close("div")},_renderSnippetContainer:function e(t){const n=this.getProperty("attributes");for(let e=0;e<n.length;e++){const s=n[e];if(s.longtext){const e=new h;e.setText(s.value);e.addStyleClass("sapUshellSearchResultListItemDoc-Snippet");t.renderControl(e)}}},_renderAllAttributes:function e(t,n){let i;let r;let c;let u;let p;let g=8;if(this.getProperty("imageUrl")){g--}const m=function(e){let t;for(let n=0;n<e.length;n++){t=e[n];if(t.key==="FILE_PROPERTY"&&t.value){return true}}return false};const f=m(n);this.destroyAggregation("_attributeValues");let I,S,b;for(;S<g&&I<n.length;I++){i=n[I];if(i.isTitle||i.longtext){continue}if(f===true&&i.key!=="FILE_PROPERTY"){continue}if(!i.value){continue}if(f===true){const e=JSON.parse(i.value);for(;b<e.length&&b<10;b++){p=e[b];switch(p.type){case"date-time":{const e=new Date(p.value);const t=a.getDateTimeInstance({style:"medium"},new o(l.getLanguageTag().toString()));c=t.format(e);break}case"byte":c=s.formatFileSize(Number(p.value));break;case"integer":c=s.formatInteger(Number(p.value));break;default:c=p.value}r=p.category+": "+p.name;if(c===undefined){continue}if(!c||c===""){c=d.noValue}u=new h;u.setText(c);u.addStyleClass("sapUshellSearchResultListItemDoc-AttributeValue");u.addStyleClass("sapUshellSearchResultListItem-MightOverflow");t.renderControl(u);this.addAggregation("_attributeValues",u,true)}}else{r=i.name;c=i.value;if(r===undefined||c===undefined){continue}if(!c||c===""){c=d.noValue}u=new h;u.setText(c);u.addStyleClass("sapUshellSearchResultListItemDoc-AttributeValue");u.addStyleClass("sapUshellSearchResultListItem-MightOverflow");t.renderControl(u);this.addAggregation("_attributeValues",u,true)}S++}},_getExpandAreaObjectInfo:function e(){const t=$(this.getDomRef());const n=t.find(".sapUshellSearchResultListItemDoc-AttributesExpandContainer");const s=t.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");let i=false;if(s.css("display")==="none"){s.css("display","block");i=true}const r=n.height();const a=t.find(".sapUshellSearchResultListItem-AttributesAndActions").height();if(i){s.css("display","")}const o=[];t.find(".sapUshellSearchResultListItem-GenericAttribute").each(function(){const e=$(this);if(Number(e.css("order"))>2){o.push(this)}});const l=200;const c=l/10;const u={resultListItem:t,attributesExpandContainer:n,currentHeight:r,expandedHeight:a,elementsToFadeInOrOut:o,expandAnimationDuration:l,fadeInOrOutAnimationDuration:c,relatedObjectsToolbar:s};return u},hideDetails:function e(){const t=$(this.getDomRef());if(!this.isShowingDetails()){return}const n=this._getExpandAreaObjectInfo();const s=t.find(".sapUshellSearchResultListItem-Attributes").outerHeight(true);let i=false;const a=n.attributesExpandContainer.animate({height:s},{duration:n.expandAnimationDuration,progress:function(e,t,s){if(!i&&s<=n.fadeInOrOutAnimationDuration){i=true;const e=$(n.elementsToFadeInOrOut).animate({opacity:0},n.fadeInOrOutAnimationDuration).promise();jQuery.when(a,e).done(function(){this.setProperty("expanded",false,true);n.attributesExpandContainer.removeClass("sapUshellSearchResultListItem-AttributesExpanded");$(n.elementsToFadeInOrOut).css("opacity","");const e=r.getIconURI("slim-arrow-down");const t=this.getAggregation("_expandButton");t.setTooltip(u.getText("showDetailBtn_tooltip"));t.setIcon(e);t.rerender()})}}}).promise()}});return p})})();
//# sourceMappingURL=SearchResultListItemDocument.js.map