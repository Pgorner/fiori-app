/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["./SearchFacetSimpleListItem","sap/m/List","sap/m/library","../../FacetTypeUI","../../../../eventlogging/UserEvents","../../../../error/errors","sap/ui/core/Element"],function(e,t,i,c,o,n,s){"use strict";function a(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const r=a(e);const l=i["ListMode"];const f=i["ListSeparators"];const p=c["FacetTypeUI"];const d=o["UserEventType"];const u=a(n);const h=t.extend("sap.esh.search.ui.controls.SearchFacetSimpleList",{renderer:{apiVersion:2},metadata:{properties:{facetType:{type:"string",defaultValue:p.DataSource}}},constructor:function e(i,c){let o;if(c?.facetType){o={facetType:c?.facetType};delete c.facetType}t.prototype.constructor.call(this,i,c);if(o?.facetType){this.setProperty("facetType",o.facetType)}this.setMode(l.SingleSelectMaster);this.setShowSeparators(f.None);this.setIncludeItemInSelection(true);this.attachSelectionChange(e=>{if(this.getProperty("facetType")===p.Attribute){this.handleItemPress(e)}});this.attachItemPress(e=>{const t=this.getModel();if(t.config.searchScopeWithoutAll){return}if(this.getProperty("facetType")===p.DataSource){this.handleItemPress(e)}});this.addStyleClass("sapUshellSearchFacet");this.data("sap-ui-fastnavgroup","false",true)},handleItemPress:function e(t){const i=t.getParameter("listItem");const c=i.getBindingContext().getObject();const o=this.getModel();const n=c.filterCondition;if(i.getSelected()){if(typeof o.config.cleanUpSpaceFilters==="function"){o.config.cleanUpSpaceFilters(o,n)}o.addFilterCondition(n);o.eventLogger.logEvent({type:d.FACET_FILTER_ADD,referencedAttribute:c.facetAttribute,clickedValue:c.value,clickedLabel:c.label,clickedPosition:i.getList().getItems().indexOf(i)})}else{o.removeFilterCondition(c.filterCondition);o.eventLogger.logEvent({type:d.FACET_FILTER_DEL,referencedAttribute:c.facetAttribute,clickedValue:c.value,clickedLabel:c.label,clickedPosition:i.getList().getItems().indexOf(i)})}},onAfterRendering:function e(i){t.prototype.onAfterRendering.call(this,i);const c=jQuery(this.getDomRef()).closest(".sapUshellSearchFacetIconTabBar").find(".sapUshellSearchFacetInfoZeile")[0];if(c){const e=s.getElementById(c.id);e.setVisible(false)}const o=this.getModel();if(o.config.searchInAreaOverwriteMode&&typeof o.config.setQuickSelectDataSourceAllAppearsNotSelected==="function"){try{o.config.setQuickSelectDataSourceAllAppearsNotSelected(o,this)}catch(e){const t=new u.ConfigurationExitError("setQuickSelectDataSourceAllAppearsNotSelected",o.config.applicationComponent,e);throw t}}},switchFacetType:function e(t){const i={path:"items",template:new r("",{isDataSource:t===p.DataSource})};switch(t){case p.Attribute:{const e=this.getModel();let t;if(e.config&&typeof e.config.getSearchInFacetListMode==="function"){const i=e.getProperty(this.getBindingContext().getPath());try{t=e.config.getSearchInFacetListMode(i)}catch(t){const i=new u.ConfigurationExitError("getSearchInFacetListMode",e.config.applicationComponent,t);throw i}}this.setMode(t||l.MultiSelect);break}case p.DataSource:this.setMode(l.SingleSelectMaster);break;default:throw new Error(`unknown facet type ${t}.`)}this.bindItems(i);this.setProperty("facetType",t,true)}});return h})})();
//# sourceMappingURL=SearchFacetSimpleList.js.map