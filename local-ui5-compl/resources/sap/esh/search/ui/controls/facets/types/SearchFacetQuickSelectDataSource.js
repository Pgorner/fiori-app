/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["sap/m/List","sap/m/StandardListItem","sap/m/library","sap/ui/core/CustomData","sap/m/Tree","sap/m/CustomListItem","./SearchFacetHierarchyStaticTreeItem","sap/m/Label","sap/ui/core/Icon","../../../eventlogging/UserEvents","sap/m/VBox","sap/m/FlexBox","../../../i18n"],function(e,t,n,c,a,r,o,s,i,d,l,u,h){"use strict";function p(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const S=n["FlexAlignItems"];const g=n["FlexJustifyContent"];const f=n["ListSeparators"];const m=n["ListMode"];const y=n["ListType"];const x=p(o);const T=d["UserEventType"];const I=p(h);const b=l.extend("sap.esh.search.ui.controls.SearchFacetQuickSelectDataSource",{renderer:{apiVersion:2},constructor:function t(n,c){l.prototype.constructor.call(this,n,c);this.addStyleClass("sapUshellSearchFacetContainer");const a=new u({justifyContent:g.SpaceBetween,alignItems:S.Center,items:[new s({text:I.getText("quickSelectDataSourcesHeader")})]});a.addStyleClass("sapUshellSearchFacetHeader");this.addItem(a);const r=new e({itemPress:e=>{const t=e.getParameter("srcControl");const n=t.getBindingContext().getObject();this.handleSelectDataSource(n.dataSource);const c=this.getModel();const a={type:T.QUICK_SELECT_SWITCH,dataSourceKey:n.dataSource.id};c.eventLogger.logEvent(a)},items:{path:"items",factory:(e,t)=>{const n=t.getObject();if(n.type==="quickSelectDataSourceTreeNode"){return this.createTree()}else{return this.createListItem()}}}});r.setShowSeparators(f.None);r.setMode(m.SingleSelectMaster);this.addItem(r);this.getSelectedItem=r.getSelectedItem.bind(r)},handleSelectDataSource:function e(t){const n=this.getModel();if(n.config.bResetSearchTermOnQuickSelectDataSourceItemPress){n.setSearchBoxTerm("",false)}if(typeof n.config.cleanUpSpaceFilters==="function"){n.config.cleanUpSpaceFilters(n)}n.setDataSource(t)},createTree:function e(){this.tree=new a({mode:m.None,includeItemInSelection:true,items:{path:"children",factory:this.createTreeItem.bind(this)},toggleOpenState:function(e){e.getParameter("itemContext").getObject().toggleExpand()}});const t={onAfterRendering:function(){this.expandTreeNodes()}.bind(this)};this.addEventDelegate(t,this);return new r({content:this.tree})},expandTreeNodes:function e(){const t=this.getBindingContext().getObject();const n=t.items[0];this.expandTreeNodeRecursively(n,true)},expandTreeNodeRecursively:function e(t,n){if(t.expanded&&!n){this.doExpandTreeNode(t)}if(!t.children){return}for(let e=0;e<t.children.length;++e){const n=t.children[e];this.expandTreeNodeRecursively(n)}},doExpandTreeNode:function e(t){const n=this.tree.getItems();for(let e=0;e<n.length;++e){const c=n[e];const a=c.getBindingContext().getObject();if(a===t){this.tree.expand(e);return}}},createTreeItem:function e(t,n){const c=[];const a=n.getObject().icon;if(a){const e=new i("",{src:"{icon}"});e.addStyleClass("sapUiTinyMarginEnd");c.push(e)}const r=new s({text:"{label}"});r.attachBrowserEvent("click",()=>{this.handleSelectDataSource(n.getObject().getDataSource())});c.push(r);const o=new x("",{content:c,selectLine:{parts:["/queryFilter","dataSourceId"],formatter:function(e,t){return e.dataSource.id===t}}});return o},createListItem:function e(){return new t("",{type:y.Active,title:"{dataSource/label}",tooltip:"{dataSource/label}",icon:"{dataSource/icon}",customData:[new c({key:"test-id-collection",value:"{dataSource/label}",writeToDom:true})],selected:{parts:[{path:"/queryFilter"},{path:"dataSource"}],formatter:function(e,t){return e.dataSource===t}}})}});return b})})();
//# sourceMappingURL=SearchFacetQuickSelectDataSource.js.map