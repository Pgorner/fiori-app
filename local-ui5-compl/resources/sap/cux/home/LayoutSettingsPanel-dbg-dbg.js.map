{"version":3,"file":"LayoutSettingsPanel-dbg-dbg.js","names":["sap","ui","define","Log","Button","Column","ColumnListItem","HBox","MessageBox","ObjectIdentifier","Table","Text","ToggleButton","VBox","Element","Icon","Lib","DragDropInfo","JSONModel","__BaseSettingsPanel","___flexibility_Layoutflexibility","___utils_Constants","__PersonalisationUtils","_interopRequireDefault","obj","__esModule","default","BaseSettingsPanel","CHANGE_TYPES","SETTINGS_PANELS_KEYS","PersonalisationUtils","LayoutSettingsPanel","extend","metadata","library","constructor","_constructor","id","settings","BaseSettingsPanel.prototype.constructor.call","_isCollapseHandlerAttached","init","_init","BaseSettingsPanel.prototype.init.call","setProperty","LAYOUT","_i18nBundle","getText","addAggregation","_getContent","getId","text","press","resetMyhomeSettings","attachPanelNavigated","_loadSections","_manageSectionsChanges","createShowHideChangeFile","_createShowHideChangeFile","oControlEvent","_this","toggle","getSource","bValue","getPressed","oContext","getBindingContext","getObject","visible","_getPanel","getSections","find","section","completeId","sChangeType","UNHIDE","HIDE","oWrapperItem","getElementById","push","selectorElement","changeSpecificData","changeType","Promise","resolve","_saveManageSectionsDialog","then","setTimeout","adjustLayout","_switchToCollapsedViewIfRequired","e","reject","containers","layout","isLayoutExpanded","getProperty","forEach","container","toggleFullScreen","_getSelectedPanel","_this2","_calculateSectionsState","_orderedSections","JSON","parse","stringify","oSection","sContainerType","title","String","_controlModel","_layoutTable","setModel","bindItems","path","template","type","cells","alignItems","items","src","addStyleClass","justifyContent","width","tooltip","icon","enabled","event","pressed","ariaLabelledBy","attachEvent","_rearrangeLayoutIfRequired","currentLayoutElements","getItems","Array","isArray","_allLayoutElements","length","isOrderChanged","some","element","index","removeAllItems","addItem","oHeader","_setHeaderIntro","oTable","setLayoutTable","oContentVBox","renderType","oHeaderText","oHeaderVBox","backgroundDesign","_setLayoutTable","columns","dragDropConfig","sourceAggregation","targetAggregation","groupName","dropPosition","drop","onDropManageSections","_this3","_persistUserChanges","changes","appComponent","getOwnerComponent","tableModel","getModel","refresh","finally","mProperties","load","name","require","ControlPersonalizationWriteAPI","add","ignoreVariantManagement","aGeneratedChanges","save","selector","catch","oError","Error","error","message","_getActualIndex","expandedElementConfig","_getCurrentExpandedElement","targetContainer","splice","indexOfItem","findIndex","_rearrangeLayoutElements","sourceIndex","targetIndex","_onDropManageSections","oEvent","_this4","oWrapper","wrapperId","oDragItem","getParameter","draggedControl","iDragItemIndex","getParent","oDropItem","droppedControl","iDropItemIndex","_temp","sectionOrder","dragObject","dropObject","actualDragItemIndex","actualDropItemIndex","setSections","MOVE","movedElements","source","aggregation","target","draggedContainer","droppedContainer","_resetMyhomeSettings","_this5","show","QUESTION","actions","Action","CANCEL","onClose","oAction","_temp2","aChangesForDeletion","reset","selectors","changeTypes","resetSections","closeSettingsDialog"],"sources":["LayoutSettingsPanel.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport Log from \"sap/base/Log\";\nimport ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport Button from \"sap/m/Button\";\nimport Column from \"sap/m/Column\";\nimport ColumnListItem from \"sap/m/ColumnListItem\";\nimport HBox from \"sap/m/HBox\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport ObjectIdentifier from \"sap/m/ObjectIdentifier\";\nimport Table from \"sap/m/Table\";\nimport Text from \"sap/m/Text\";\nimport ToggleButton from \"sap/m/ToggleButton\";\nimport VBox from \"sap/m/VBox\";\nimport Event from \"sap/ui/base/Event\";\nimport Component from \"sap/ui/core/Component\";\nimport type { MetadataOptions } from \"sap/ui/core/Element\";\nimport Element from \"sap/ui/core/Element\";\nimport Icon from \"sap/ui/core/Icon\";\nimport Lib from \"sap/ui/core/Lib\";\nimport DragDropInfo from \"sap/ui/core/dnd/DragDropInfo\";\nimport { DropInfo$DropEvent } from \"sap/ui/core/dnd/DropInfo\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport BaseContainer from \"./BaseContainer\";\nimport BaseLayout from \"./BaseLayout\";\nimport BaseSettingsPanel, { $BaseSettingsPanelSettings } from \"./BaseSettingsPanel\";\nimport Layout from \"./Layout\";\nimport { CHANGE_TYPES } from \"./flexibility/Layout.flexibility\";\nimport { IControlPersonalizationWriteAPI, IDragEvent, IElement, IManagePersChanges } from \"./interface/LayoutInterface\";\nimport { SETTINGS_PANELS_KEYS } from \"./utils/Constants\";\nimport PersonalisationUtils from \"./utils/PersonalisationUtils\";\n\n/**\n *\n * Class for My Home Layout Settings Panel.\n *\n * @extends BaseSettingsPanel\n *\n * @author SAP SE\n * @version 0.0.1\n * @since 1.121\n *\n * @internal\n * @experimental Since 1.121\n * @private\n *\n * @alias sap.cux.home.LayoutSettingsPanel\n */\nexport default class LayoutSettingsPanel extends BaseSettingsPanel {\n\tprivate _layoutTable!: Table;\n\tpublic _i18nBundle!: ResourceBundle;\n\tprivate _orderedSections!: IElement[];\n\tprivate _manageSectionsChanges!: IManagePersChanges[];\n\tprivate _controlModel!: JSONModel;\n\tprivate _allLayoutElements!: BaseContainer[];\n\tprivate _isCollapseHandlerAttached: boolean = false;\n\n\tconstructor(id?: string | $BaseSettingsPanelSettings);\n\tconstructor(id?: string, settings?: $BaseSettingsPanelSettings);\n\tconstructor(id?: string, settings?: $BaseSettingsPanelSettings) {\n\t\tsuper(id, settings);\n\t}\n\n\tstatic readonly metadata: MetadataOptions = {\n\t\tlibrary: \"sap.cux.home\"\n\t};\n\n\t/**\n\t * Init lifecycle method\n\t *\n\t * @public\n\t * @override\n\t */\n\tpublic init(): void {\n\t\tsuper.init();\n\n\t\t//setup panel\n\t\tthis.setProperty(\"key\", SETTINGS_PANELS_KEYS.LAYOUT);\n\t\tthis.setProperty(\"title\", this._i18nBundle.getText(\"layout\"));\n\t\tthis.setProperty(\"icon\", \"sap-icon://grid\");\n\n\t\t// //setup layout content\n\t\tthis.addAggregation(\"content\", this._getContent());\n\t\tthis.addAggregation(\n\t\t\t\"actionButtons\",\n\t\t\tnew Button({\n\t\t\t\tid: `${this.getId()}-layoutResetBtn`,\n\t\t\t\ttext: this._i18nBundle.getText(\"resetButton\"),\n\t\t\t\tpress: () => {\n\t\t\t\t\tthis.resetMyhomeSettings();\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t\t//fired every time on panel navigation\n\t\tthis.attachPanelNavigated(() => void this._loadSections());\n\t\tthis._manageSectionsChanges = [];\n\t}\n\n\t/**\n\t * Method to set visibility of the container sections\n\t * Toggle button pressed event handler\n\t *\n\t * @private\n\t */\n\tprivate async createShowHideChangeFile(oControlEvent: Event): Promise<void> {\n\t\tconst toggle = oControlEvent.getSource<ToggleButton>();\n\t\tconst bValue = !toggle.getPressed();\n\t\tconst oContext = toggle.getBindingContext()?.getObject() as IElement;\n\n\t\toContext.visible = bValue;\n\t\t(this._getPanel() as Layout).getSections().find((section) => section.completeId === oContext.completeId)!.visible = bValue;\n\n\t\tconst sChangeType = bValue ? CHANGE_TYPES.UNHIDE : CHANGE_TYPES.HIDE;\n\t\tconst oWrapperItem = Element.getElementById(oContext.completeId) as BaseContainer;\n\t\t// visibility handling\n\t\t// const layout = this._getPanel() as Layout;\n\t\t// const isPagesAvailable = layout?.getPagesAvailable();\n\t\t// const isCustomNewsVisible = layout?.customNewAvailable();\n\n\t\t//****review this code */\n\t\t// const isPageSection = oContext.sContainerType === \"sap.cux.home.NewsAndPagesContainer\",\n\t\t// bIsPageSectionDisabled = isPageSection && !isPagesAvailable && !isCustomNewsVisible;\n\t\t// if (!bIsPageSectionDisabled) {\n\t\tthis._manageSectionsChanges.push({\n\t\t\tselectorElement: oWrapperItem,\n\t\t\tchangeSpecificData: {\n\t\t\t\tchangeType: sChangeType\n\t\t\t}\n\t\t});\n\t\t// }\n\t\tawait this._saveManageSectionsDialog();\n\t\tsetTimeout(() => oWrapperItem.adjustLayout());\n\n\t\t// switch to collapsed view if the container is in expanded view\n\t\tif (!bValue) {\n\t\t\tthis._switchToCollapsedViewIfRequired([oWrapperItem]);\n\t\t}\n\t}\n\n\t/**\n\t * Switches the layout to collapsed view if the current container is in expanded view\n\t *\n\t * @private\n\t * @param {BaseContainer} container - container instance to check\n\t * @returns {void}\n\t */\n\tprivate _switchToCollapsedViewIfRequired(containers: BaseContainer[]): void {\n\t\tconst layout = this._getPanel() as Layout;\n\t\tconst isLayoutExpanded = layout.getProperty(\"expanded\") as boolean;\n\n\t\tif (isLayoutExpanded) {\n\t\t\tcontainers.forEach((container) => {\n\t\t\t\tlayout.toggleFullScreen(container._getSelectedPanel());\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Method to load the sections\n\t *\n\t * @private\n\t */\n\tprivate async _loadSections(): Promise<void> {\n\t\tconst layout = this._getPanel() as Layout;\n\t\tawait layout._calculateSectionsState();\n\n\t\tthis._orderedSections = JSON.parse(JSON.stringify(layout.getSections())) as IElement[];\n\t\t// not a good way as there could be more than one insights container, discuss\n\t\tthis._orderedSections.forEach((oSection) => {\n\t\t\tif (oSection.sContainerType === \"sap.cux.home.InsightsContainer\" && !oSection.title) {\n\t\t\t\toSection.title = String(this._i18nBundle?.getText(\"insights\"));\n\t\t\t}\n\t\t});\n\t\tthis._controlModel = new JSONModel(this._orderedSections);\n\t\tthis._layoutTable.setModel(this._controlModel);\n\n\t\tthis._layoutTable.bindItems({\n\t\t\tpath: \"/\",\n\t\t\ttemplate: new ColumnListItem({\n\t\t\t\ttype: \"Inactive\",\n\t\t\t\tcells: [\n\t\t\t\t\tnew HBox({\n\t\t\t\t\t\talignItems: \"Center\",\n\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\tnew Icon({\n\t\t\t\t\t\t\t\tsrc: \"sap-icon://vertical-grip\"\n\t\t\t\t\t\t\t}).addStyleClass(\"sapUiSmallMarginEnd\"),\n\t\t\t\t\t\t\tnew HBox({\n\t\t\t\t\t\t\t\tjustifyContent: \"SpaceBetween\",\n\t\t\t\t\t\t\t\talignItems: \"Center\",\n\t\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\tnew ObjectIdentifier({\n\t\t\t\t\t\t\t\t\t\ttitle: \"{title}\",\n\t\t\t\t\t\t\t\t\t\ttext: \"{text}\",\n\t\t\t\t\t\t\t\t\t\ttooltip: \"{title}\"\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tnew ToggleButton({\n\t\t\t\t\t\t\t\t\t\ttooltip:\n\t\t\t\t\t\t\t\t\t\t\t\"{= ${visible} ? '\" +\n\t\t\t\t\t\t\t\t\t\t\tthis._i18nBundle.getText(\"hideBtn\") +\n\t\t\t\t\t\t\t\t\t\t\t\"' : '\" +\n\t\t\t\t\t\t\t\t\t\t\tthis._i18nBundle.getText(\"showBtn\") +\n\t\t\t\t\t\t\t\t\t\t\t\"' }\",\n\t\t\t\t\t\t\t\t\t\ticon: \"sap-icon://show\",\n\t\t\t\t\t\t\t\t\t\ttype: \"Emphasized\",\n\t\t\t\t\t\t\t\t\t\tenabled: \"{= !${blocked}}\",\n\t\t\t\t\t\t\t\t\t\tpress: (event: Event) => {\n\t\t\t\t\t\t\t\t\t\t\tvoid this.createShowHideChangeFile(event);\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tpressed: \"{= !${visible}}\",\n\t\t\t\t\t\t\t\t\t\tariaLabelledBy: [\"selectLabel\"]\n\t\t\t\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMarginEnd sapUiTinyMarginTop\")\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t],\n\t\t\t\t\t\twidth: \"100%\"\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}).addStyleClass(\"insightsListItem insightsListMargin\")\n\t\t});\n\n\t\t// attach collapse event handler to rearrange layout elements if required\n\t\tif (!this._isCollapseHandlerAttached) {\n\t\t\tlayout.attachEvent(\"onCollapse\", () => this._rearrangeLayoutIfRequired());\n\t\t}\n\t}\n\n\t/**\n\t * Rearranges the layout elements if their order has changed.\n\t *\n\t * @private\n\t */\n\tprivate _rearrangeLayoutIfRequired(): void {\n\t\tconst layout = this._getPanel() as Layout;\n\t\tconst currentLayoutElements = layout.getItems();\n\n\t\tif (Array.isArray(this._allLayoutElements) && currentLayoutElements.length === this._allLayoutElements.length) {\n\t\t\tconst isOrderChanged = currentLayoutElements.some((element, index) => {\n\t\t\t\treturn element.getId() !== this._allLayoutElements[index].getId();\n\t\t\t});\n\n\t\t\tif (isOrderChanged) {\n\t\t\t\tlayout.removeAllItems();\n\t\t\t\tthis._allLayoutElements.forEach((element) => {\n\t\t\t\t\tlayout.addItem(element);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns the content for the Layout Settings Panel.\n\t *\n\t * @private\n\t * @returns {VBox} The control containing the Layout Settings Panel content.\n\t */\n\tprivate _getContent(): VBox {\n\t\tconst oHeader = this._setHeaderIntro();\n\t\tconst oTable = this.setLayoutTable();\n\n\t\tconst oContentVBox = new VBox(this.getId() + \"--idNewsPageOuterVBoX\", {\n\t\t\talignItems: \"Start\",\n\t\t\tjustifyContent: \"SpaceBetween\",\n\t\t\trenderType: \"Bare\",\n\t\t\titems: [oHeader, oTable]\n\t\t});\n\t\treturn oContentVBox;\n\t}\n\n\t/**\n\t * Returns the content for the Layout Settings Panel Header.\n\t *\n\t * @private\n\t * @returns {VBox} The control containing the Layout Settings Panel's Header content.\n\t */\n\tprivate _setHeaderIntro(): VBox {\n\t\tconst oHeaderText = new Text(this.getId() + \"--idCustLayoutText\", {\n\t\t\ttext: this._i18nBundle.getText(\"layoutIntroMsg\")\n\t\t});\n\t\tconst oHeaderVBox = new VBox(this.getId() + \"--idLayoutIntroText\", {\n\t\t\tbackgroundDesign: \"Solid\",\n\t\t\talignItems: \"Start\",\n\t\t\tjustifyContent: \"SpaceBetween\",\n\t\t\titems: [oHeaderText],\n\t\t\trenderType: \"Bare\"\n\t\t}).addStyleClass(\"sapUiSmallMargin\");\n\t\treturn oHeaderVBox;\n\t}\n\n\t/**\n\t * Returns the content for the Layout Table.\n\t *\n\t * @private\n\t * @returns {sap.ui.core.Control} The control containing the Layout Settings Panel'sTable.\n\t */\n\tprivate setLayoutTable(): Table {\n\t\tif (!this._layoutTable) {\n\t\t\tthis._layoutTable = new Table(this.getId() + \"--idManageSectionsTable\", {\n\t\t\t\twidth: \"calc(100% - 2rem)\",\n\t\t\t\titems: [],\n\n\t\t\t\tcolumns: [\n\t\t\t\t\tnew Column(this.getId() + \"--idSectionTitleColumn\", {\n\t\t\t\t\t\twidth: \"100%\"\n\t\t\t\t\t})\n\t\t\t\t],\n\t\t\t\tdragDropConfig: new DragDropInfo(this.getId() + \"--idManageSectionsDragInfo\", {\n\t\t\t\t\tsourceAggregation: \"items\",\n\t\t\t\t\ttargetAggregation: \"items\",\n\t\t\t\t\tgroupName: \"manageSectionsItems\",\n\t\t\t\t\tdropPosition: \"On\",\n\t\t\t\t\tdrop: (event: DropInfo$DropEvent) => {\n\t\t\t\t\t\tvoid this.onDropManageSections(event);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}).addStyleClass(\"sapContrastPlus sapUiSmallMarginBeginEnd sapUiTinyMarginBottom\");\n\t\t}\n\n\t\treturn this._layoutTable;\n\t}\n\n\t/**\n\t * Function to save section changes of MyHomeSettingsDialog\n\t *\n\t * @private\n\t */\n\tprivate async _saveManageSectionsDialog(): Promise<void> {\n\t\treturn this._persistUserChanges({\n\t\t\tchanges: this._manageSectionsChanges,\n\t\t\tappComponent: PersonalisationUtils.getOwnerComponent(this._getPanel() as Layout)\n\t\t})\n\t\t\t.then(() => {\n\t\t\t\tconst tableModel = this._layoutTable.getModel() as JSONModel;\n\t\t\t\ttableModel.refresh();\n\t\t\t\tthis._controlModel.refresh();\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tthis._manageSectionsChanges = [];\n\t\t\t});\n\t}\n\n\t/**\n\t * Function to persist user changes\n\t *\n\t * @private\n\t */\n\tprivate _persistUserChanges(mProperties: { changes: IManagePersChanges[]; appComponent: Component | undefined }): Promise<void> {\n\t\treturn Lib.load({ name: \"sap.ui.fl\" }).then(function () {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tsap.ui.require(\n\t\t\t\t\t[\"sap/ui/fl/write/api/ControlPersonalizationWriteAPI\"],\n\t\t\t\t\tfunction (ControlPersonalizationWriteAPI: IControlPersonalizationWriteAPI) {\n\t\t\t\t\t\tControlPersonalizationWriteAPI.add({\n\t\t\t\t\t\t\tchanges: mProperties.changes,\n\t\t\t\t\t\t\tignoreVariantManagement: true\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(function (aGeneratedChanges) {\n\t\t\t\t\t\t\t\treturn resolve(\n\t\t\t\t\t\t\t\t\tControlPersonalizationWriteAPI.save({\n\t\t\t\t\t\t\t\t\t\tselector: {\n\t\t\t\t\t\t\t\t\t\t\tappComponent: mProperties.appComponent\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tchanges: aGeneratedChanges\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(function (oError) {\n\t\t\t\t\t\t\t\tif (oError instanceof Error) {\n\t\t\t\t\t\t\t\t\tLog.error(\"Unable to Save User Change: \" + oError.message);\n\t\t\t\t\t\t\t\t\treturn reject(oError);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves the actual index of a layout element by its ID.\n\t *\n\t * @private\n\t * @param {string} id - The ID of the layout element to find.\n\t * @returns {number} The index of the layout element.\n\t */\n\tprivate _getActualIndex(id: string): number {\n\t\tconst layout = this._getPanel() as Layout;\n\t\tthis._allLayoutElements = this._allLayoutElements || [...layout.getItems()];\n\t\tconst isLayoutExpanded = layout.getProperty(\"expanded\") as boolean;\n\t\tconst expandedElementConfig = layout._getCurrentExpandedElement();\n\n\t\tif (isLayoutExpanded && expandedElementConfig) {\n\t\t\t// add the expanded element if it isn't already in the list\n\t\t\tif (!this._allLayoutElements.some((element) => element.getId() === expandedElementConfig.targetContainer.getId())) {\n\t\t\t\tthis._allLayoutElements.splice(\n\t\t\t\t\tlayout.indexOfItem(expandedElementConfig.targetContainer),\n\t\t\t\t\t0,\n\t\t\t\t\texpandedElementConfig.targetContainer\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn this._allLayoutElements.findIndex((element) => element.getId() === id);\n\t}\n\n\t/**\n\t * Rearranges the layout elements by moving an element from the source index to the target index.\n\t *\n\t * @private\n\t * @param {number} sourceIndex - The index of the element to move.\n\t * @param {number} targetIndex - The index to move the element to.\n\t */\n\tprivate _rearrangeLayoutElements(sourceIndex: number, targetIndex: number): void {\n\t\tconst container = this._allLayoutElements.splice(sourceIndex, 1)[0];\n\t\tthis._allLayoutElements.splice(targetIndex, 0, container);\n\t}\n\n\t/**\n\t * Function to execute drag and drop among sections\n\t *\n\t * @private\n\t */\n\tprivate async onDropManageSections(oEvent: DropInfo$DropEvent | IDragEvent): Promise<void> {\n\t\tconst oWrapper = this._getPanel() as Layout;\n\t\tconst wrapperId = oWrapper.getId();\n\t\tconst oDragItem = ((oEvent as DropInfo$DropEvent).getParameter?.(\"draggedControl\") ||\n\t\t\t(oEvent as IDragEvent).draggedControl) as ColumnListItem;\n\t\tconst iDragItemIndex = (oDragItem.getParent() as Table)?.indexOfItem(oDragItem);\n\t\tconst oDropItem = ((oEvent as DropInfo$DropEvent).getParameter?.(\"droppedControl\") ||\n\t\t\t(oEvent as IDragEvent).droppedControl) as ColumnListItem;\n\t\tconst iDropItemIndex = (oDragItem.getParent() as Table)?.indexOfItem(oDropItem);\n\n\t\tif (iDragItemIndex !== iDropItemIndex) {\n\t\t\tconst sectionOrder = this._orderedSections;\n\t\t\tconst dragObject = oDragItem.getBindingContext()?.getObject() as IElement;\n\t\t\tconst dropObject = oDropItem.getBindingContext()?.getObject() as IElement;\n\n\t\t\tconst actualDragItemIndex = this._getActualIndex(dragObject.completeId);\n\t\t\tconst actualDropItemIndex = this._getActualIndex(dropObject.completeId);\n\t\t\tthis._rearrangeLayoutElements(actualDragItemIndex, actualDropItemIndex);\n\n\t\t\tsectionOrder.splice(iDragItemIndex, 1);\n\t\t\tsectionOrder.splice(iDropItemIndex, 0, dragObject);\n\t\t\toWrapper.setSections(sectionOrder);\n\n\t\t\tthis._manageSectionsChanges.push({\n\t\t\t\tselectorElement: oWrapper,\n\t\t\t\tchangeSpecificData: {\n\t\t\t\t\tchangeType: CHANGE_TYPES.MOVE,\n\t\t\t\t\tmovedElements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: dragObject.completeId,\n\t\t\t\t\t\t\tsourceIndex: actualDragItemIndex,\n\t\t\t\t\t\t\ttargetIndex: actualDropItemIndex\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tsource: {\n\t\t\t\t\t\tid: wrapperId,\n\t\t\t\t\t\taggregation: \"items\"\n\t\t\t\t\t},\n\t\t\t\t\ttarget: {\n\t\t\t\t\t\tid: wrapperId,\n\t\t\t\t\t\taggregation: \"items\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tawait this._saveManageSectionsDialog();\n\n\t\t\t//switch to collapsed view if any of the containers is in expanded view\n\t\t\tconst draggedContainer = Element.getElementById(dragObject.completeId) as BaseContainer;\n\t\t\tconst droppedContainer = Element.getElementById(dropObject.completeId) as BaseContainer;\n\t\t\tthis._switchToCollapsedViewIfRequired([draggedContainer, droppedContainer]);\n\t\t}\n\t}\n\n\t/**\n\t * Function to reset MyHome settings changes\n\t *\n\t * @private\n\t */\n\tprivate resetMyhomeSettings(): void {\n\t\tMessageBox.show(this._i18nBundle.getText(\"reset_cards_confirmation_msg\") as string, {\n\t\t\tid: \"resetCardsConfirmation\",\n\t\t\ticon: MessageBox.Icon.QUESTION,\n\t\t\ttitle: this._i18nBundle.getText(\"reset_cards_confirmation_title\"),\n\t\t\tactions: [this._i18nBundle.getText(\"reset_cards_button\") as string, MessageBox.Action.CANCEL],\n\t\t\tonClose: async (oAction: string) => {\n\t\t\t\tif (oAction === this._i18nBundle.getText(\"reset_cards_button\")) {\n\t\t\t\t\tconst aChangesForDeletion: (BaseContainer | BaseLayout)[] = [];\n\n\t\t\t\t\tfor (let section of this._orderedSections) {\n\t\t\t\t\t\tconst element = Element.getElementById(section.completeId) as BaseContainer;\n\t\t\t\t\t\taChangesForDeletion.push(element);\n\t\t\t\t\t}\n\t\t\t\t\t// Revert Changes Related to DragnDrop\n\t\t\t\t\taChangesForDeletion.push(this._getPanel() as Layout);\n\t\t\t\t\tawait Lib.load({ name: \"sap.ui.fl\" }).then(() => {\n\t\t\t\t\t\tsap.ui.require(\n\t\t\t\t\t\t\t[\"sap/ui/fl/write/api/ControlPersonalizationWriteAPI\"],\n\t\t\t\t\t\t\t(ControlPersonalizationWriteAPI: IControlPersonalizationWriteAPI) => {\n\t\t\t\t\t\t\t\tvoid ControlPersonalizationWriteAPI.reset({\n\t\t\t\t\t\t\t\t\tselectors: aChangesForDeletion,\n\t\t\t\t\t\t\t\t\tchangeTypes: [CHANGE_TYPES.MOVE, CHANGE_TYPES.UNHIDE, CHANGE_TYPES.HIDE]\n\t\t\t\t\t\t\t\t}).finally(() => {\n\t\t\t\t\t\t\t\t\tconst layout = this._getPanel() as Layout;\n\t\t\t\t\t\t\t\t\tlayout.resetSections();\n\t\t\t\t\t\t\t\t\tlayout.closeSettingsDialog();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n"],"mappings":"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","ignoreList":[]}