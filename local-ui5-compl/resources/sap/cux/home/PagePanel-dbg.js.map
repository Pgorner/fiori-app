{"version":3,"file":"PagePanel-dbg.js","names":["sap","ui","define","Button","FlexBox","GenericTile","IllustratedMessage","VBox","EventBus","DragDropInfo","sap_ui_core_library","__BasePagePanel","__MenuItem","__Page","___utils_Constants","___utils_Device","___utils_DragDropUtils","___utils_FESRUtil","__PageManager","__PersonalisationUtils","__UShellPersonalizer","_interopRequireDefault","obj","__esModule","default","dnd","BasePagePanel","MenuItem","Page","SETTINGS_PANELS_KEYS","DeviceType","attachKeyboardHandler","addFESRId","addFESRSemanticStepName","PageManager","PersonalisationUtils","UShellPersonalizer","maxTileSize","minTileSize","CustomFlexBox","extend","renderer","apiVersion","metadata","library","aggregations","items","type","multiple","singularName","draggable","droppable","constructor","_constructor","id","settings","FlexBox.prototype.constructor.call","this","PagePanel","properties","title","group","visibility","key","pages","_constructor2","BasePagePanel.prototype.constructor.call","persContainerId","getPersContainerId","PageManagerInstance","getInstance","getOwnerComponent","init","_init","BasePagePanel.prototype.init.call","_oWrapperFlexBox","justifyContent","height","width","direction","renderType","wrap","addStyleClass","addDragDropConfig","sourceAggregation","targetAggregation","dropPosition","DropPosition","Between","dropLayout","DropLayout","Horizontal","drop","oEvent","_handlePageDnd","attachBrowserEvent","event","dragDropEvent","_addContent","setProperty","_i18nBundle","getText","menuItem","getId","icon","press","_handleEditPages","addAggregation","oEventBus","subscribe","sChannelId","sEventId","oData","aFavPages","_getInnerControls","_importdone","getData","stateData","status","publish","_getData","forceUpdate","arguments","length","undefined","_this","_temp2","oPagePromise","_temp","getFavoritePages","Promise","resolve","then","e","reject","parent","getParent","_getLayout","openSettingsDialog","PAGES","attachResizeHandler","_attachResizeHandler","bIsNewsTileVisible","containerWidth","pagesContentWrapper","containerWrapper","iFavPagesCount","domRef","getDomRef","domRefClientWidth","clientWidth","pagesPerRow","tileWidth","wrapperWidth","gap","flexWrapperWidth","setAlignItems","spaceRequired","_setPropertyValues","hBoxWidth","pagesTileWidth","setWidth","_handleResizeForDesktop","oErr","Error","getUserAvailablePages","_getUserAvailablePages","_this2","fetchAllAvailablePages","sDeviceType","getDeviceType","pagesToDisplay","Math","ceil","Desktop","LargeDesktop","Tablet","myFavPage","oInnerControls","oParent","forEach","oPage","push","subTitle","spaceTitle","bgColor","BGColor","pageId","spaceId","url","oFav","header","getTitle","subheader","getSubTitle","onPageTilePress","sizeBehavior","state","frameType","mode","backgroundColor","getBgColor","tileIcon","getIcon","visible","renderOnThemeChange","ariaRole","dropAreaOffset","getProperty","panelLoadedFn","loaded","count","_setFavPagesContent","_setNoPageContent","removeAggregation","removeAllItems","oTile","addItem","_createNoPageContent","_oIllusMsg","illustrationSize","illustrationType","description","oAddPageBtn","text","tooltip","oWrapperNoPageVBox","backgroundDesign","addAdditionalContent","oVal","propNames","Object","keys","sProperty","_this3","sInsertPosition","getParameter","oDragItem","oDropItem","iDragItemIndex","indexOfItem","iDropItemIndex","_temp3","_DragnDropPages","_this4","_temp5","oPersonalizer","read","oPersData","favouritePages","write","oItemMoved","splice","_temp4","_UShellPersonalizer$g","applyColorPersonalizations","_applyColorPersonalizations","personalizations","applyIconPersonalizations","_applyIconPersonalizations"],"sources":["PagePanel.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport Button from \"sap/m/Button\";\nimport FlexBox, { $FlexBoxSettings } from \"sap/m/FlexBox\";\nimport GenericTile from \"sap/m/GenericTile\";\nimport IllustratedMessage from \"sap/m/IllustratedMessage\";\nimport VBox from \"sap/m/VBox\";\nimport Event from \"sap/ui/base/Event\";\nimport Component from \"sap/ui/core/Component\";\nimport Control from \"sap/ui/core/Control\";\nimport { MetadataOptions } from \"sap/ui/core/Element\";\nimport EventBus from \"sap/ui/core/EventBus\";\nimport DragDropInfo from \"sap/ui/core/dnd/DragDropInfo\";\nimport { DropInfo$DropEventParameters } from \"sap/ui/core/dnd/DropInfo\";\nimport { dnd } from \"sap/ui/core/library\";\nimport BasePagePanel, { $BasePagePanelSettings } from \"./BasePagePanel\";\nimport MenuItem from \"./MenuItem\";\nimport NewsAndPagesContainer from \"./NewsAndPagesContainer\";\nimport Page from \"./Page\";\nimport { ISpacePagePersonalization } from \"./interface/KeyUserInterface\";\nimport { IPage } from \"./interface/PageSpaceInterface\";\nimport { SETTINGS_PANELS_KEYS } from \"./utils/Constants\";\nimport { DeviceType } from \"./utils/Device\";\nimport { attachKeyboardHandler } from \"./utils/DragDropUtils\";\nimport { addFESRId, addFESRSemanticStepName } from \"./utils/FESRUtil\";\nimport PageManager from \"./utils/PageManager\";\nimport PersonalisationUtils from \"./utils/PersonalisationUtils\";\nimport UShellPersonalizer from \"./utils/UshellPersonalizer\";\n\nconst maxTileSize = 15,\n\tminTileSize = 7;\n\n/**\n *\n * CustomFlexBox extending FlexBox to enable drag & drop.\n *\n * @extends sap.m.FlexBox\n *\n * @author SAP SE\n * @version 0.0.1\n * @since 1.122\n *\n * @internal\n * @experimental Since 1.121\n * @private\n *\n * @alias sap.cux.home.CustomFlexBox\n */\nclass CustomFlexBox extends FlexBox {\n\tconstructor(idOrSettings?: string | $FlexBoxSettings);\n\tconstructor(id?: string, settings?: $FlexBoxSettings);\n\tconstructor(id?: string, settings?: $FlexBoxSettings) {\n\t\tsuper(id, settings);\n\t}\n\n\tstatic readonly metadata: MetadataOptions = {\n\t\tlibrary: \"sap.cux.home\",\n\t\taggregations: {\n\t\t\titems: { type: \"sap.ui.core.Control\", multiple: true, singularName: \"item\", dnd: { draggable: true, droppable: true } }\n\t\t}\n\t};\n\tstatic renderer = {\n\t\tapiVersion: 2\n\t};\n}\n\n/**\n *\n * Panel class for managing and storing Pages.\n *\n * @extends sap.cux.home.BasePagePanel\n *\n * @author SAP SE\n * @version 0.0.1\n * @since 1.122\n *\n * @internal\n * @experimental Since 1.121\n * @public\n *\n * @alias sap.cux.home.PagePanel\n */\n\nexport default class PagePanel extends BasePagePanel {\n\tstatic readonly metadata: MetadataOptions = {\n\t\tlibrary: \"sap.cux.home\",\n\t\tproperties: {\n\t\t\t/**\n\t\t\t * Title for the page panel\n\t\t\t */\n\t\t\ttitle: { type: \"string\", group: \"Misc\", visibility: \"hidden\" },\n\t\t\t/**\n\t\t\t * Key for the page panel\n\t\t\t */\n\t\t\tkey: { type: \"string\", group: \"Misc\", visibility: \"hidden\" }\n\t\t},\n\t\taggregations: {\n\t\t\t/**\n\t\t\t * Aggregation of pages available within the page panel\n\t\t\t */\n\t\t\tpages: { type: \"sap.cux.home.Page\", singularName: \"page\", multiple: true, visibility: \"hidden\" }\n\t\t}\n\t};\n\tprivate _oWrapperFlexBox!: CustomFlexBox;\n\tprivate oPagePromise!: Promise<IPage[]> | null;\n\tprivate persContainerId: string = PersonalisationUtils.getPersContainerId(this);\n\tprivate PageManagerInstance: PageManager = PageManager.getInstance(\n\t\tthis.persContainerId,\n\t\tPersonalisationUtils.getOwnerComponent(this) as Component\n\t);\n\tprivate aFavPages!: IPage[];\n\tprivate oInnerControls!: GenericTile[];\n\tprivate _oIllusMsg!: IllustratedMessage;\n\tprivate oAddPageBtn!: Button;\n\tprivate oPersonalizer!: UShellPersonalizer;\n\tprivate oEventBus!: EventBus;\n\n\t/**\n\t * Constructor for a new Page panel.\n\t *\n\t * @param {string} [id] ID for the new control, generated automatically if an ID is not provided\n\t * @param {object} [settings] Initial settings for the new control\n\t */\n\tpublic constructor(id?: string, settings?: $BasePagePanelSettings) {\n\t\tsuper(id, settings);\n\t}\n\n\tinit() {\n\t\tsuper.init();\n\n\t\tthis._oWrapperFlexBox = new CustomFlexBox({\n\t\t\tjustifyContent: \"Start\",\n\t\t\theight: \"100%\",\n\t\t\twidth: \"100%\",\n\t\t\tdirection: \"Row\",\n\t\t\trenderType: \"Bare\",\n\t\t\twrap: \"Wrap\"\n\t\t}).addStyleClass(\"newsSlideFlexGap sapUiSmallMarginTop sapUiSmallMarginBottom\");\n\n\t\tthis._oWrapperFlexBox\n\t\t\t.addDragDropConfig(\n\t\t\t\tnew DragDropInfo({\n\t\t\t\t\tsourceAggregation: \"items\",\n\t\t\t\t\ttargetAggregation: \"items\",\n\t\t\t\t\tdropPosition: dnd.DropPosition.Between,\n\t\t\t\t\tdropLayout: dnd.DropLayout.Horizontal,\n\t\t\t\t\tdrop: (oEvent) => void this._handlePageDnd(oEvent)\n\t\t\t\t})\n\t\t\t)\n\t\t\t.attachBrowserEvent(\"keydown\", (event: KeyboardEvent) =>\n\t\t\t\tattachKeyboardHandler(event, true, (dragDropEvent: Event) => this._handlePageDnd(dragDropEvent))\n\t\t\t);\n\n\t\tthis._addContent(this._oWrapperFlexBox);\n\t\tthis.setProperty(\"title\", this._i18nBundle.getText(\"pageTitle\"));\n\n\t\tconst menuItem = new MenuItem(`${this.getId()}-managePages`, {\n\t\t\ttitle: this._i18nBundle.getText(\"mngPage\"),\n\t\t\ticon: \"sap-icon://edit\",\n\t\t\tpress: () => this._handleEditPages()\n\t\t});\n\t\tthis.addAggregation(\"menuItems\", menuItem);\n\t\taddFESRId(menuItem, \"managePages\");\n\t\tthis.oEventBus = EventBus.getInstance();\n\t\t// Subscribe to the event\n\t\tthis.oEventBus.subscribe(\n\t\t\t\"importChannel\",\n\t\t\t\"favPagesImport\",\n\t\t\t(sChannelId?: string, sEventId?: string, oData?) => {\n\t\t\t\tthis.aFavPages = oData as IPage[];\n\t\t\t\tthis._getInnerControls();\n\t\t\t\tthis._importdone();\n\t\t\t},\n\t\t\tthis\n\t\t);\n\n\t\t// Subscribe to page changes from pageManager\n\t\tthis.oEventBus.subscribe(\n\t\t\t\"pageChannel\",\n\t\t\t\"pageUpdated\",\n\t\t\t() => {\n\t\t\t\tvoid this.getData(true);\n\t\t\t},\n\t\t\tthis\n\t\t);\n\t}\n\n\tprivate _importdone() {\n\t\tconst stateData = { status: true };\n\t\tthis.oEventBus.publish(\"importChannel\", \"favPagesImported\", stateData);\n\t}\n\n\tpublic async getData(forceUpdate: boolean = false) {\n\t\tif (this.oPagePromise === undefined || this.oPagePromise === null || forceUpdate) {\n\t\t\tthis.oPagePromise = this.PageManagerInstance.getFavoritePages();\n\t\t\tconst aFavPages = await this.oPagePromise;\n\t\t\tthis.aFavPages = aFavPages;\n\t\t\tthis._getInnerControls();\n\t\t\tthis.oPagePromise = null;\n\t\t}\n\t\treturn this.oPagePromise;\n\t}\n\n\t/**\n\t * Handles the edit page event.\n\t * Opens the page dialog for managing page data.\n\t * @param {Event} oEvent - The event object.\n\t * @private\n\t */\n\tprivate _handleEditPages() {\n\t\tconst parent = this.getParent() as NewsAndPagesContainer;\n\t\tparent?._getLayout().openSettingsDialog(SETTINGS_PANELS_KEYS.PAGES);\n\t}\n\n\tpublic attachResizeHandler(\n\t\tbIsNewsTileVisible: boolean,\n\t\tcontainerWidth: number,\n\t\tpagesContentWrapper: FlexBox,\n\t\tcontainerWrapper: FlexBox\n\t) {\n\t\ttry {\n\t\t\tconst iFavPagesCount = this.aFavPages.length,\n\t\t\t\tdomRef = pagesContentWrapper.getDomRef() as Element;\n\n\t\t\tlet domRefClientWidth = 0;\n\t\t\tdomRefClientWidth = bIsNewsTileVisible ? domRef.clientWidth : containerWidth;\n\n\t\t\tlet pagesPerRow: number = 0,\n\t\t\t\ttileWidth,\n\t\t\t\twrapperWidth = domRefClientWidth / 16; // Divide by 16 to convert to rem,\n\t\t\tconst gap = 1,\n\t\t\t\tflexWrapperWidth = containerWidth || domRef.clientWidth;\n\n\t\t\tif (iFavPagesCount === 1) {\n\t\t\t\tcontainerWrapper.setAlignItems(\"Start\");\n\t\t\t}\n\n\t\t\tif (bIsNewsTileVisible && flexWrapperWidth >= 1520) {\n\t\t\t\t// As newsTile will grow till 40.75 rem, calculating the remaining width\n\t\t\t\twrapperWidth = flexWrapperWidth / 16 - 40.75;\n\t\t\t}\n\n\t\t\tif (iFavPagesCount > 0) {\n\t\t\t\tif (!bIsNewsTileVisible) {\n\t\t\t\t\t// If Space available display all tiles in a single row\n\t\t\t\t\tconst spaceRequired = iFavPagesCount * minTileSize + (iFavPagesCount - 1) * gap;\n\t\t\t\t\tif (spaceRequired <= wrapperWidth) {\n\t\t\t\t\t\tpagesPerRow = iFavPagesCount;\n\t\t\t\t\t\ttileWidth = (wrapperWidth - (pagesPerRow - 1) * gap) / pagesPerRow;\n\t\t\t\t\t\ttileWidth = tileWidth <= maxTileSize ? tileWidth : maxTileSize;\n\t\t\t\t\t\tthis._setPropertyValues({ hBoxWidth: wrapperWidth + \"rem\", pagesTileWidth: tileWidth + \"rem\" });\n\t\t\t\t\t\tpagesContentWrapper.setWidth(wrapperWidth + \"rem\");\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tpagesPerRow = this._handleResizeForDesktop(bIsNewsTileVisible, iFavPagesCount, pagesPerRow);\n\t\t\t\ttileWidth = (wrapperWidth - (pagesPerRow - 1) * gap) / pagesPerRow;\n\t\t\t\ttileWidth = tileWidth <= maxTileSize ? tileWidth : maxTileSize;\n\n\t\t\t\tconst hBoxWidth = pagesPerRow === 0 ? \"100%\" : pagesPerRow * tileWidth + pagesPerRow * gap + \"rem\";\n\t\t\t\tthis._setPropertyValues({ hBoxWidth: hBoxWidth, pagesTileWidth: tileWidth + \"rem\" });\n\t\t\t\tpagesContentWrapper.setWidth(wrapperWidth + \"rem\");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tpagesContentWrapper.setWidth(wrapperWidth + \"rem\");\n\t\t\treturn true;\n\t\t} catch (oErr) {\n\t\t\tif (oErr instanceof Error) {\n\t\t\t\tconsole.error(oErr.message);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tpublic async getUserAvailablePages() {\n\t\treturn await this.PageManagerInstance.fetchAllAvailablePages();\n\t}\n\n\tprivate _handleResizeForDesktop(bIsNewsTileVisible: boolean, iFavPagesCount: number, pagesPerRow: number): number {\n\t\tconst sDeviceType = this.getDeviceType();\n\t\tconst pagesToDisplay = Math.ceil(iFavPagesCount >= 8 ? 4 : iFavPagesCount / 2);\n\t\tif (sDeviceType === DeviceType.Desktop || sDeviceType === DeviceType.LargeDesktop) {\n\t\t\tif (bIsNewsTileVisible) {\n\t\t\t\tpagesPerRow = pagesToDisplay;\n\t\t\t} else {\n\t\t\t\tpagesPerRow = iFavPagesCount <= 4 ? iFavPagesCount : pagesToDisplay;\n\t\t\t}\n\t\t} else if (sDeviceType === DeviceType.Tablet) {\n\t\t\tpagesPerRow = iFavPagesCount <= 4 ? iFavPagesCount : pagesToDisplay;\n\t\t}\n\t\treturn pagesPerRow;\n\t}\n\n\tprivate _getInnerControls() {\n\t\tconst myFavPage: Page[] = [];\n\t\tthis.oInnerControls = [];\n\t\tconst oParent = this.getParent() as NewsAndPagesContainer;\n\t\tif (this.aFavPages) {\n\t\t\tthis.aFavPages.forEach((oPage: IPage) => {\n\t\t\t\tmyFavPage.push(\n\t\t\t\t\tnew Page(\"\", {\n\t\t\t\t\t\ttitle: oPage.title,\n\t\t\t\t\t\tsubTitle: oPage.title === oPage.spaceTitle ? \"\" : oPage.spaceTitle,\n\t\t\t\t\t\ticon: oPage.icon,\n\t\t\t\t\t\tbgColor: oPage.BGColor as string,\n\t\t\t\t\t\tpageId: oPage.pageId,\n\t\t\t\t\t\tspaceId: oPage.spaceId,\n\t\t\t\t\t\tspaceTitle: oPage.spaceTitle,\n\t\t\t\t\t\turl: \"#Launchpad-openFLPPage?pageId=\" + oPage.pageId + \"&spaceId=\" + oPage.spaceId\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t});\n\t\t\tmyFavPage.forEach((oFav: Page) => {\n\t\t\t\tthis.oInnerControls.push(\n\t\t\t\t\tnew GenericTile({\n\t\t\t\t\t\t// width: \"10rem\",\n\t\t\t\t\t\theader: oFav.getTitle(),\n\t\t\t\t\t\tsubheader: oFav.getSubTitle(),\n\t\t\t\t\t\tpress: () => void oFav.onPageTilePress(oFav),\n\t\t\t\t\t\tsizeBehavior: \"Responsive\",\n\t\t\t\t\t\tstate: \"Loaded\",\n\t\t\t\t\t\tframeType: \"OneByOne\",\n\t\t\t\t\t\tmode: \"IconMode\",\n\t\t\t\t\t\tbackgroundColor: oFav.getBgColor(),\n\t\t\t\t\t\ttileIcon: oFav.getIcon(),\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\trenderOnThemeChange: true,\n\t\t\t\t\t\tariaRole: \"listitem\",\n\t\t\t\t\t\tdropAreaOffset: 8,\n\t\t\t\t\t\turl: oFav.getProperty(\"url\") as string\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tthis.addAggregation(\"pages\", oFav, true);\n\t\t\t});\n\n\t\t\tthis._oWrapperFlexBox.setAlignItems(this.aFavPages.length == 1 ? \"Start\" : \"Center\");\n\n\t\t\tif (this.aFavPages.length) {\n\t\t\t\toParent?.panelLoadedFn(\"Page\", { loaded: true, count: this.aFavPages.length });\n\t\t\t\tthis._setFavPagesContent();\n\t\t\t} else {\n\t\t\t\toParent?.panelLoadedFn(\"Page\", { loaded: true, count: 0 });\n\t\t\t\tthis._setNoPageContent();\n\t\t\t}\n\t\t} else {\n\t\t\toParent?.panelLoadedFn(\"Page\", { loaded: false, count: 0 });\n\t\t\tthis.removeAggregation(\"content\", this._oWrapperFlexBox);\n\t\t}\n\t}\n\n\tprivate _setFavPagesContent() {\n\t\tthis._oWrapperFlexBox.removeAllItems();\n\t\tthis.oInnerControls.forEach((oTile: GenericTile) => {\n\t\t\tthis._oWrapperFlexBox.addItem(oTile);\n\t\t});\n\t}\n\n\tprivate _createNoPageContent() {\n\t\tif (!this._oIllusMsg) {\n\t\t\tthis._oIllusMsg = new IllustratedMessage(this.getId() + \"--idNoPages\", {\n\t\t\t\tillustrationSize: \"Spot\",\n\t\t\t\tillustrationType: \"sapIllus-SimpleNoSavedItems\",\n\t\t\t\ttitle: this._i18nBundle.getText(\"noDataPageTitle\"),\n\t\t\t\tdescription: this._i18nBundle.getText(\"noPageDescription\")\n\t\t\t}).addStyleClass(\"myHomeIllustratedMsg myHomeIllustratedMessageAlign\");\n\t\t\tthis.oAddPageBtn = new Button(this.getId() + \"--idAddPageBtn\", {\n\t\t\t\ttext: this._i18nBundle.getText(\"addPage\"),\n\t\t\t\ttooltip: this._i18nBundle.getText(\"addPage\"),\n\t\t\t\ttype: \"Emphasized\",\n\t\t\t\tpress: () => this._handleEditPages()\n\t\t\t});\n\t\t\taddFESRSemanticStepName(this.oAddPageBtn, \"press\", \"addPages\");\n\t\t}\n\t}\n\n\tprivate _setNoPageContent() {\n\t\tconst oWrapperNoPageVBox = new VBox({\n\t\t\twidth: \"100%\",\n\t\t\theight: \"17rem\",\n\t\t\tbackgroundDesign: \"Solid\",\n\t\t\tjustifyContent: \"Center\"\n\t\t}).addStyleClass(\"sapUiRoundedBorder noCardsBorder\");\n\t\tthis._createNoPageContent();\n\t\tthis._oIllusMsg.addAdditionalContent(this.oAddPageBtn);\n\t\tthis._oWrapperFlexBox.removeAllItems();\n\t\tthis._oWrapperFlexBox.addStyleClass(\"pagesFlexBox\");\n\t\toWrapperNoPageVBox.addItem(this._oIllusMsg);\n\t\tthis._oWrapperFlexBox.addItem(oWrapperNoPageVBox);\n\t}\n\n\tprivate _setPropertyValues(oVal: { hBoxWidth: string; pagesTileWidth: string }) {\n\t\tconst propNames = Object.keys(oVal);\n\t\tpropNames.forEach((sProperty: string) => {\n\t\t\tif (sProperty === \"hBoxWidth\") {\n\t\t\t\tthis._oWrapperFlexBox.setProperty(\"width\", oVal[sProperty]);\n\t\t\t} else if (sProperty === \"pagesTileWidth\" && this.oInnerControls.length) {\n\t\t\t\tthis.oInnerControls.forEach(function (oTile) {\n\t\t\t\t\toTile.setProperty(\"width\", oVal[sProperty]);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async _handlePageDnd(oEvent: Event<DropInfo$DropEventParameters>) {\n\t\tconst sInsertPosition = oEvent.getParameter?.(\"dropPosition\"),\n\t\t\toDragItem = oEvent?.getParameter?.(\"draggedControl\") as Control,\n\t\t\toDropItem = oEvent.getParameter(\"droppedControl\") as Control,\n\t\t\tiDragItemIndex = (oDragItem.getParent() as FlexBox)?.indexOfItem(oDragItem);\n\t\tlet iDropItemIndex = (oDragItem.getParent() as FlexBox)?.indexOfItem(oDropItem);\n\n\t\tif (sInsertPosition === \"Before\" && iDragItemIndex === iDropItemIndex - 1) {\n\t\t\tiDropItemIndex--;\n\t\t} else if (sInsertPosition === \"After\" && iDragItemIndex === iDropItemIndex + 1) {\n\t\t\tiDropItemIndex++;\n\t\t}\n\n\t\tif (iDragItemIndex !== iDropItemIndex) {\n\t\t\tawait this._DragnDropPages(iDragItemIndex, iDropItemIndex, sInsertPosition as string);\n\t\t}\n\t}\n\n\tprivate async _DragnDropPages(iDragItemIndex: number, iDropItemIndex: number, sInsertPosition: string) {\n\t\tif (sInsertPosition === \"Before\" && iDragItemIndex < iDropItemIndex) {\n\t\t\tiDropItemIndex--;\n\t\t} else if (sInsertPosition === \"After\" && iDragItemIndex > iDropItemIndex) {\n\t\t\tiDropItemIndex++;\n\t\t}\n\t\t// take the moved item from dragIndex and add to dropindex\n\t\tconst oItemMoved = this.aFavPages.splice(iDragItemIndex, 1)[0];\n\t\tthis.aFavPages.splice(iDropItemIndex, 0, oItemMoved);\n\t\tthis._getInnerControls();\n\n\t\tif (this.oPersonalizer === undefined) {\n\t\t\tthis.oPersonalizer = await UShellPersonalizer.getInstance(\n\t\t\t\tthis.persContainerId,\n\t\t\t\tPersonalisationUtils.getOwnerComponent(this) as Component\n\t\t\t);\n\t\t}\n\n\t\tlet oPersData = await this.oPersonalizer.read();\n\t\tif (!oPersData) oPersData = { favouritePages: [] };\n\t\toPersData.favouritePages = this.aFavPages;\n\t\tawait this.oPersonalizer.write(oPersData);\n\t}\n\n\tpublic applyColorPersonalizations(personalizations: Array<ISpacePagePersonalization>) {\n\t\tvoid this.PageManagerInstance?.applyColorPersonalizations(personalizations);\n\t}\n\n\tpublic applyIconPersonalizations(personalizations: Array<ISpacePagePersonalization>) {\n\t\tvoid this.PageManagerInstance?.applyIconPersonalizations(personalizations);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}