{"version":3,"file":"TilesPanel-dbg-dbg.js","names":["sap","ui","define","GridContainer","GridContainerItemLayoutData","Button","CustomListItem","Dialog","HBox","HeaderContainer","IllustratedMessage","Label","List","ObjectIdentifier","Title","sap_m_library","EventBus","Icon","Lib","DragDropInfo","sap_ui_core_library","JSONModel","Config","Container","S4MyHome","__BasePanel","__MenuItem","__AppManager","___utils_Constants","___utils_Device","___utils_DragDropUtils","___utils_FESRUtil","_interopRequireDefault","obj","__esModule","default","_catch","body","recover","result","e","then","ButtonType","dnd","BasePanel","MenuItem","AppManager","DEFAULT_BG_COLOR","END_USER_COLORS","MYHOME_PAGE_ID","MYINSIGHT_SECTION_ID","SETTINGS_PANELS_KEYS","DeviceType","fetchElementProperties","attachKeyboardHandler","addFESRId","addFESRSemanticStepName","FESR_EVENTS","tilesMenuItems","DisplayFormat","_showAddApps","last","TilesPanel","extend","metadata","library","properties","title","type","group","defaultValue","visibility","key","fullScreenName","defaultAggregation","aggregations","tiles","multiple","singularName","events","handleHidePanel","parameters","handleUnhidePanel","constructor","_constructor","id","settings","BasePanel.prototype.constructor.call","_insightsSectionTitle","_i18nBundle","getText","_addFromFavDialogId","getId","init","_init","_this","BasePanel.prototype.init.call","_controlMap","Map","_oData","activateInsightsTiles","_controlModel","appManagerInstance","getInstance","setProperty","refreshMenuItem","REFRESH","icon","press","refreshData","addfromFavAppMenuItem","ADD_APPS","_handleAddFromFavApps","editTilesMenuItem","EDIT_TILES","event","handleEditTiles","menuItems","addTilesButton","text","actionButtons","_setupHeader","Promise","resolve","getServiceAsync","_Container$getService","VizInstantiationService","oEventBus","subscribe","sChannelId","sEventId","oData","createInsightSection","_addSectionViz","_adjustLayout","_importdone","reject","_toggleTileActivity","_this2","toggleUserActions","show","getParameter","_temp","attachRouteMatched","aSectionViz","sSectionId","reduce","promiseChain","oViz","isBookmark","addBookMark","addVisualization","vizId","stateData","status","publish","forEach","menuItem","addAggregation","actionButton","renderPanel","_renderPanel","bRefresh","arguments","length","undefined","_exit","_this3","_temp3","_result2","_temp2","tilesContainer","_createWrapperFlexBox","_await$_this3$refresh","error","fireHandleHidePanel","_refreshData","refreshTiles","_this4","fetchInsightApps","_this4$appManagerInst","_temp5","aInsightsApps","fireHandleUnhidePanel","sDefaultAggreName","getMetadata","getDefaultAggregationName","dynamicTiles","getAggregation","refresh","_getInsightsContainer","updatePanelsItemCount","getName","getProperty","bIsSmartBusinessTilePresent","some","oApp","isSmartBusinessTile","_temp4","load","name","getDeviceType","Mobile","scrollStep","scrollStepByItem","gridLayout","scrollTime","showDividers","addStyleClass","setModel","bindAggregation","path","factory","context","getObject","oVisualization","instantiateVisualization","visualization","setLayoutData","minRows","columns","getDisplayFormat","Standard","bindProperty","addDragDropConfig","sourceAggregation","targetAggregation","dropPosition","DropPosition","Between","dropLayout","DropLayout","Horizontal","drop","oEvent","_handleTilesDnd","attachBrowserEvent","disablenavigation","metaKey","ctrlKey","dragDropEvent","_addContent","sInsertPosition","oDragItem","oDropItem","iDragItemIndex","getParent","indexOfItem","iDropItemIndex","_DragnDropTiles","_this5","oDisplacedItem","oItemMoved","splice","moveConfigs","pageId","sourceSectionIndex","persConfig","sectionIndex","sourceVisualizationIndex","visualizationIndex","targetSectionIndex","targetVisualizationIndex","moveVisualization","_handleEditTiles","parent","getSource","isA","_getLayout","openSettingsDialog","INSIGHTS_TILES","handleRemoveActions","_handleRemoveActions","removeAllAggregation","handleAddActions","_handleAddActions","_closeAddFromFavDialog","get","close","navigateToAppFinder","_navigateToAppFinder","groupId","navigationService","navigationObject","pageID","sectionID","navigate","target","shellHash","JSON","stringify","_getLegendColor","color","find","oColor","value","_this6","_getFavToAdd","appsToAdd","dialog","_generateAddFromFavAppsDialog","setVisible","_generateAddFromFavAppsListItems","open","_this7","fetchFavVizs","aFavApps","aDynamicApps","filter","oDynApp","isCount","aFilteredFavApps","iAppIndex","findIndex","oInsightApps","targetURL","_getSelectedInsights","list","getSelectedItems","destroyItems","listItems","map","app","index","content","alignItems","items","src","backgroundColor","BGColor","width","height","size","subtitle","tooltip","data","item","addItem","getAppFinderBtn","btnType","appFinderBtn","visible","Default","PRESS","setAddBtnEnabled","selectedItems","setEnabled","set","mode","selectionChange","addButton","_addFromFavApps","enabled","illustrationSize","illustrationType","description","wrapping","justifyContent","Transparent","contentWidth","contentHeight","endButton","bind","escapeHandler","buttons","_this8","setBusy","promise","oMovingConfig","insightsSectionIndex","displayFormatHint","supportedDisplayFormats","includes","_temp6","_calculateVisibleTileCount","insightsApps","layoutDomRef","getDomRef","apps","count","sectionDomRef","childNodes","domProperties","availableWidth","widthMap","StandardWide","nextTileWidth","layout","isFullScreenEnabled","isMobileDevice","visibleTileCount","isElementExpanded","_getCurrentExpandedElementName","slice","toggleFullScreenElements","insightsContainer"],"sources":["TilesPanel.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport GridContainer from \"sap/f/GridContainer\";\nimport GridContainerItemLayoutData from \"sap/f/GridContainerItemLayoutData\";\nimport Button from \"sap/m/Button\";\nimport CustomListItem from \"sap/m/CustomListItem\";\nimport Dialog from \"sap/m/Dialog\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport HBox from \"sap/m/HBox\";\nimport HeaderContainer from \"sap/m/HeaderContainer\";\nimport IllustratedMessage from \"sap/m/IllustratedMessage\";\nimport Label from \"sap/m/Label\";\nimport List from \"sap/m/List\";\nimport ObjectIdentifier from \"sap/m/ObjectIdentifier\";\nimport Title from \"sap/m/Title\";\nimport { ButtonType } from \"sap/m/library\";\nimport Event from \"sap/ui/base/Event\";\nimport ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Control from \"sap/ui/core/Control\";\nimport type { MetadataOptions } from \"sap/ui/core/Element\";\nimport EventBus from \"sap/ui/core/EventBus\";\nimport Icon from \"sap/ui/core/Icon\";\nimport Lib from \"sap/ui/core/Lib\";\nimport DragDropInfo from \"sap/ui/core/dnd/DragDropInfo\";\nimport { DropInfo$DropEventParameters } from \"sap/ui/core/dnd/DropInfo\";\nimport { dnd } from \"sap/ui/core/library\";\nimport Context from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport Config from \"sap/ushell/Config\";\nimport Container from \"sap/ushell/Container\";\nimport S4MyHome from \"sap/ushell/api/S4MyHome\";\nimport Navigation from \"sap/ushell/services/Navigation\";\nimport VisualizationInstantiation from \"sap/ushell/services/VisualizationInstantiation\";\nimport BasePanel from \"./BasePanel\";\nimport InsightsContainer from \"./InsightsContainer\";\nimport MenuItem from \"./MenuItem\";\nimport { $TilesPanelSettings } from \"./TilesPanel\";\nimport { ICustomVisualization, ISectionAndVisualization, IVisualization } from \"./interface/AppsInterface\";\nimport AppManager from \"./utils/AppManager\";\nimport { DEFAULT_BG_COLOR, END_USER_COLORS, MYHOME_PAGE_ID, MYINSIGHT_SECTION_ID, SETTINGS_PANELS_KEYS } from \"./utils/Constants\";\nimport { DeviceType, fetchElementProperties } from \"./utils/Device\";\nimport { attachKeyboardHandler } from \"./utils/DragDropUtils\";\nimport { addFESRId, addFESRSemanticStepName, FESR_EVENTS } from \"./utils/FESRUtil\";\n\nexport enum tilesMenuItems {\n\tREFRESH = \"tiles-refresh\",\n\tADD_APPS = \"tiles-addSmartApps\",\n\tEDIT_TILES = \"tiles-editTiles\"\n}\n\nexport enum DisplayFormat {\n\tStandard = \"standard\",\n\tStandardWide = \"standardWide\"\n}\n\nconst _showAddApps = () => {\n\treturn (Config.last(\"/core/shell/enablePersonalization\") || Config.last(\"/core/catalog/enabled\")) as boolean;\n};\n\n/**\n *\n * Tiles Panel class for managing and storing Insights Tiles.\n *\n * @extends sap.cux.home.BasePanel\n *\n * @author SAP SE\n * @version 0.0.1\n * @since 1.122.0\n *\n * @internal\n * @experimental Since 1.122\n * @public\n *\n * @alias sap.cux.home.TilesPanel\n */\n\nexport default class TilesPanel extends BasePanel {\n\tconstructor(idOrSettings?: string | $TilesPanelSettings);\n\tconstructor(id?: string, settings?: $TilesPanelSettings);\n\t/**\n\t * Constructor for a new Tiles Panel.\n\t *\n\t * @param {string} [id] ID for the new control, generated automatically if an ID is not provided\n\t * @param {object} [settings] Initial settings for the new control\n\t */\n\tpublic constructor(id?: string, settings?: $TilesPanelSettings) {\n\t\tsuper(id, settings);\n\t}\n\tprivate _oData!: Record<string, unknown>;\n\tprivate _insightsSectionTitle: string = this._i18nBundle.getText(\"insights\") as string;\n\tprivate _addFromFavDialogId: string = `${this.getId()}-addFromFavDialog`;\n\tprivate appManagerInstance!: AppManager;\n\tprivate VizInstantiationService!: VisualizationInstantiation;\n\tprivate tilesContainer!: GridContainer | HeaderContainer;\n\tprivate aInsightsApps!: ICustomVisualization[];\n\tprivate _controlModel!: JSONModel;\n\tpublic _controlMap!: Map<string, Control | Element>;\n\tpublic menuItems!: MenuItem[];\n\tpublic actionButtons!: Button[];\n\tprivate oEventBus!: EventBus;\n\tprivate insightsContainer!: InsightsContainer;\n\tstatic readonly metadata: MetadataOptions = {\n\t\tlibrary: \"sap.cux.home\",\n\t\tproperties: {\n\t\t\t/**\n\t\t\t * Title for the tiles panel\n\t\t\t */\n\t\t\ttitle: { type: \"string\", group: \"Misc\", defaultValue: \"\", visibility: \"hidden\" },\n\t\t\t/**\n\t\t\t * Key for the tiles panel\n\t\t\t */\n\t\t\tkey: { type: \"string\", group: \"Misc\", defaultValue: \"\", visibility: \"hidden\" },\n\t\t\t/**\n\t\t\t * The name of the URL parameter used to expand the container into full-screen mode.\n\t\t\t */\n\t\t\tfullScreenName: { type: \"string\", group: \"Misc\", defaultValue: \"SI1\", visibility: \"hidden\" }\n\t\t},\n\t\tdefaultAggregation: \"tiles\",\n\t\taggregations: {\n\t\t\t/**\n\t\t\t * Aggregation of tiles available within the tiles Panel\n\t\t\t */\n\t\t\ttiles: { type: \"sap.cux.home.App\", multiple: true, singularName: \"tile\", visibility: \"hidden\" }\n\t\t},\n\t\tevents: {\n\t\t\thandleHidePanel: {\n\t\t\t\tparameters: {}\n\t\t\t},\n\t\t\thandleUnhidePanel: {\n\t\t\t\tparameters: {}\n\t\t\t}\n\t\t}\n\t};\n\n\tasync init() {\n\t\tsuper.init();\n\t\tthis._controlMap = new Map();\n\t\t//Initialise Tiles Model\n\t\tthis._oData = {\n\t\t\ttiles: [] as ICustomVisualization[],\n\t\t\tactivateInsightsTiles: true\n\t\t};\n\t\tthis._controlModel = new JSONModel(this._oData);\n\t\tthis.appManagerInstance = AppManager.getInstance();\n\t\tthis.setProperty(\"title\", `${this._i18nBundle?.getText(\"insights\")} ${this._i18nBundle.getText(\"insightsTilesTitle\")}`);\n\t\tconst refreshMenuItem = new MenuItem(tilesMenuItems.REFRESH, {\n\t\t\ttitle: this._i18nBundle.getText(\"refresh\"),\n\t\t\ticon: \"sap-icon://refresh\",\n\t\t\tpress: () => void this.refreshData(true)\n\t\t});\n\t\taddFESRId(refreshMenuItem, \"tilesRefresh\");\n\t\tconst addfromFavAppMenuItem = new MenuItem(tilesMenuItems.ADD_APPS, {\n\t\t\ttitle: this._i18nBundle.getText(\"addSmartApps\"),\n\t\t\ticon: \"sap-icon://duplicate\",\n\t\t\tpress: () => void this._handleAddFromFavApps()\n\t\t});\n\t\taddFESRId(addfromFavAppMenuItem, \"smartAppsDialog\");\n\t\tconst editTilesMenuItem = new MenuItem(tilesMenuItems.EDIT_TILES, {\n\t\t\ttitle: this._i18nBundle.getText(\"editLinkTiles\"),\n\t\t\ticon: \"sap-icon://edit\",\n\t\t\tpress: (event: Event) => this.handleEditTiles(event)\n\t\t});\n\t\taddFESRId(editTilesMenuItem, \"manageTiles\");\n\n\t\tthis.menuItems = [refreshMenuItem, addfromFavAppMenuItem, editTilesMenuItem];\n\n\t\tconst addTilesButton = new Button({\n\t\t\tid: `${this.getId()}-addTilesButton`,\n\t\t\ttext: this._i18nBundle.getText(\"appFinderLink\"),\n\t\t\tpress: () => void this._handleAddFromFavApps()\n\t\t});\n\t\taddFESRId(addTilesButton, \"smartAppsDialog\");\n\n\t\tthis.actionButtons = [addTilesButton];\n\n\t\t// Setup Header Content\n\t\tthis._setupHeader();\n\t\tthis.VizInstantiationService = await Container.getServiceAsync<VisualizationInstantiation>(\"VisualizationInstantiation\");\n\n\t\tthis.oEventBus = EventBus.getInstance();\n\t\t// Subscribe to the event\n\t\tthis.oEventBus.subscribe(\n\t\t\t\"importChannel\",\n\t\t\t\"tilesImport\",\n\t\t\tasync (sChannelId?: string, sEventId?: string, oData?) => {\n\t\t\t\tawait this.appManagerInstance.createInsightSection(this._i18nBundle.getText(\"insightsTiles\") as string);\n\t\t\t\tawait this._addSectionViz(oData as IVisualization[], MYINSIGHT_SECTION_ID);\n\n\t\t\t\tthis._adjustLayout();\n\t\t\t\tthis._importdone();\n\t\t\t},\n\t\t\tthis\n\t\t);\n\n\t\t// Toggles the activity of tiles\n\t\tthis._toggleTileActivity();\n\t}\n\n\t/**\n\t * Toggles the activity of tiles on route change.\n\t *\n\t * @private\n\t * @returns {void}\n\t */\n\tprivate _toggleTileActivity(): void {\n\t\tconst toggleUserActions = async (event: Event<{ isMyHomeRoute: boolean }>) => {\n\t\t\tconst show = event.getParameter(\"isMyHomeRoute\");\n\t\t\tthis._controlModel.setProperty(\"/activateInsightsTiles\", show);\n\t\t\tif (show) {\n\t\t\t\tawait this.refreshData(true);\n\t\t\t}\n\t\t};\n\n\t\tS4MyHome.attachRouteMatched({}, toggleUserActions, this);\n\t}\n\n\t/**\n\t * Takes the visualizations and add it to the provided section id\n\t * @param {IVisualization[]} aSectionViz - array of visualizations\n\t * @param {string} sSectionId - section id where the visualizations to be added\n\t * @returns {any}\n\t */\n\tprivate _addSectionViz(aSectionViz: IVisualization[], sSectionId: string) {\n\t\treturn aSectionViz.reduce((promiseChain, oViz) => {\n\t\t\treturn promiseChain.then(() => {\n\t\t\t\tif (oViz.isBookmark) {\n\t\t\t\t\treturn this.appManagerInstance.addBookMark(oViz);\n\t\t\t\t} else {\n\t\t\t\t\treturn sSectionId\n\t\t\t\t\t\t? this.appManagerInstance.addVisualization(oViz.vizId, sSectionId)\n\t\t\t\t\t\t: this.appManagerInstance.addVisualization(oViz.vizId);\n\t\t\t\t}\n\t\t\t});\n\t\t}, Promise.resolve());\n\t}\n\n\tprivate _importdone() {\n\t\tconst stateData = { status: true };\n\t\tthis.oEventBus.publish(\"importChannel\", \"tilesImported\", stateData);\n\t}\n\n\tprivate _setupHeader() {\n\t\tthis.menuItems.forEach((menuItem) => this.addAggregation(\"menuItems\", menuItem));\n\t\tthis.actionButtons.forEach((actionButton) => this.addAggregation(\"actionButtons\", actionButton));\n\t\tthis.setProperty(\"enableFullScreen\", true);\n\t}\n\n\tpublic async renderPanel(bRefresh: boolean = false): Promise<void> {\n\t\ttry {\n\t\t\tif (!this.tilesContainer || bRefresh) {\n\t\t\t\tthis._createWrapperFlexBox();\n\t\t\t\treturn await this.refreshData();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\tthis.fireHandleHidePanel();\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\tpublic async refreshData(refreshTiles: boolean = false) {\n\t\tthis.aInsightsApps = await this.appManagerInstance.fetchInsightApps(true, this._insightsSectionTitle);\n\t\tconst bIsSmartBusinessTilePresent = this.aInsightsApps.some((oApp) => oApp.isSmartBusinessTile);\n\t\tif (bIsSmartBusinessTilePresent) {\n\t\t\tawait Lib.load({ name: \"sap.cloudfnd.smartbusiness.lib.reusetiles\" });\n\t\t}\n\t\tthis._controlModel.setProperty(\"/tiles\", this.aInsightsApps);\n\t\tif (this.aInsightsApps?.length) {\n\t\t\tthis.fireHandleUnhidePanel();\n\t\t\tif (refreshTiles && this.tilesContainer) {\n\t\t\t\tconst sDefaultAggreName = this.tilesContainer.getMetadata().getDefaultAggregationName();\n\t\t\t\tconst dynamicTiles = (this.tilesContainer.getAggregation(sDefaultAggreName) as ManagedObject[]) || [];\n\t\t\t\tdynamicTiles.forEach((tiles) => (tiles as ICustomVisualization).refresh?.());\n\t\t\t}\n\t\t\tthis.fireHandleUnhidePanel();\n\t\t\tthis._getInsightsContainer().updatePanelsItemCount(this.aInsightsApps.length, this.getMetadata().getName());\n\t\t\tif (this.getProperty(\"title\")) {\n\t\t\t\tthis.setProperty(\n\t\t\t\t\t\"title\",\n\t\t\t\t\t`${this._i18nBundle?.getText(\"insights\")} ${this._i18nBundle.getText(\"insightsTilesTitle\")} (${this.aInsightsApps.length})`\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.fireHandleHidePanel();\n\t\t}\n\n\t\t//adjust layout\n\t\tthis._adjustLayout();\n\t}\n\n\tprivate _createWrapperFlexBox() {\n\t\tif (!this.tilesContainer) {\n\t\t\tif (this.getDeviceType() === DeviceType.Mobile) {\n\t\t\t\tthis.tilesContainer = new HeaderContainer(`${this.getId()}-insightsTilesMobileContainer`, {\n\t\t\t\t\tscrollStep: 0,\n\t\t\t\t\tscrollStepByItem: 1,\n\t\t\t\t\tgridLayout: true,\n\t\t\t\t\tscrollTime: 1000,\n\t\t\t\t\tshowDividers: false\n\t\t\t\t}).addStyleClass(\"sectionMarginTopTilesInsight sapMHeaderContainerAlign sapMHeaderContainerMarginBottom tilesBoxShadow\");\n\t\t\t} else {\n\t\t\t\tthis.tilesContainer = new GridContainer(`${this.getId()}-insightsTilesContainer`, {}).addStyleClass(\n\t\t\t\t\t\"insightTiles sapUiSmallMarginTop sapUiSmallMarginBottom\"\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.tilesContainer.setModel(this._controlModel);\n\t\t\tconst sDefaultAggreName = this.tilesContainer.getMetadata().getDefaultAggregationName();\n\t\t\tthis.tilesContainer.bindAggregation(sDefaultAggreName, {\n\t\t\t\tpath: \"/tiles\",\n\t\t\t\tfactory: (id: string, context: Context): ManagedObject => {\n\t\t\t\t\tconst oApp = context.getObject() as ICustomVisualization,\n\t\t\t\t\t\toVisualization = this.VizInstantiationService.instantiateVisualization(oApp.visualization) as ICustomVisualization;\n\t\t\t\t\toVisualization.setLayoutData?.(\n\t\t\t\t\t\tnew GridContainerItemLayoutData({\n\t\t\t\t\t\t\tminRows: 2,\n\t\t\t\t\t\t\tcolumns: oVisualization.getDisplayFormat?.() === DisplayFormat.Standard ? 2 : 4\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\toVisualization?.bindProperty?.(\"active\", \"/activateInsightsTiles\");\n\t\t\t\t\treturn oVisualization as ManagedObject;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.tilesContainer\n\t\t\t\t.addDragDropConfig(\n\t\t\t\t\tnew DragDropInfo({\n\t\t\t\t\t\tsourceAggregation: \"items\",\n\t\t\t\t\t\ttargetAggregation: \"items\",\n\t\t\t\t\t\tdropPosition: dnd.DropPosition.Between,\n\t\t\t\t\t\tdropLayout: dnd.DropLayout.Horizontal,\n\t\t\t\t\t\tdrop: (oEvent) => this._handleTilesDnd(oEvent)\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t\t.attachBrowserEvent(\"keydown\", (event: KeyboardEvent) => {\n\t\t\t\t\tconst disablenavigation = event.metaKey || event.ctrlKey;\n\t\t\t\t\tvoid attachKeyboardHandler(event, disablenavigation, (dragDropEvent: Event) => this._handleTilesDnd(dragDropEvent));\n\t\t\t\t});\n\t\t}\n\t\tthis._addContent(this.tilesContainer);\n\t}\n\n\tprivate _handleTilesDnd(oEvent: Event<DropInfo$DropEventParameters>) {\n\t\tconst sInsertPosition = oEvent.getParameter?.(\"dropPosition\"),\n\t\t\toDragItem = oEvent?.getParameter?.(\"draggedControl\") as Control,\n\t\t\toDropItem = oEvent.getParameter(\"droppedControl\") as Control,\n\t\t\tiDragItemIndex = (oDragItem.getParent() as FlexBox)?.indexOfItem(oDragItem);\n\t\tlet iDropItemIndex = (oDragItem.getParent() as FlexBox)?.indexOfItem(oDropItem);\n\n\t\tif (sInsertPosition === \"Before\" && iDragItemIndex === iDropItemIndex - 1) {\n\t\t\tiDropItemIndex--;\n\t\t} else if (sInsertPosition === \"After\" && iDragItemIndex === iDropItemIndex + 1) {\n\t\t\tiDropItemIndex++;\n\t\t}\n\n\t\tif (iDragItemIndex !== iDropItemIndex) {\n\t\t\tvoid this._DragnDropTiles(iDragItemIndex, iDropItemIndex, sInsertPosition as string);\n\t\t}\n\t}\n\n\tprivate async _DragnDropTiles(iDragItemIndex: number, iDropItemIndex: number, sInsertPosition: string) {\n\t\tif (sInsertPosition === \"Before\" && iDragItemIndex < iDropItemIndex) {\n\t\t\tiDropItemIndex--;\n\t\t} else if (sInsertPosition === \"After\" && iDragItemIndex > iDropItemIndex) {\n\t\t\tiDropItemIndex++;\n\t\t}\n\t\tconst oDisplacedItem = this.aInsightsApps[iDropItemIndex],\n\t\t\toItemMoved = this.aInsightsApps.splice(iDragItemIndex, 1)[0];\n\t\tthis.aInsightsApps.splice(iDropItemIndex, 0, oItemMoved);\n\t\tconst moveConfigs = {\n\t\t\tpageId: MYHOME_PAGE_ID,\n\t\t\tsourceSectionIndex: oItemMoved.persConfig?.sectionIndex as number,\n\t\t\tsourceVisualizationIndex: oItemMoved.persConfig?.visualizationIndex as number,\n\t\t\ttargetSectionIndex: oDisplacedItem.persConfig?.sectionIndex as number,\n\t\t\ttargetVisualizationIndex: oDisplacedItem.persConfig?.visualizationIndex as number\n\t\t};\n\t\tthis._controlModel.setProperty(\"/tiles\", this.aInsightsApps);\n\t\tawait this.appManagerInstance.moveVisualization(moveConfigs);\n\t\tawait this.renderPanel(true);\n\t}\n\n\tprivate handleEditTiles(event: Event) {\n\t\t/* If called from Panel Header event.source() will return TilesPanel, if called from Insights Container event.source() will return InsightsContainer.\n\t\t_getLayout is available at Container Level*/\n\t\tlet parent: ManagedObject = event.getSource<TilesPanel>().getParent() || this;\n\t\tif (parent?.isA(\"sap.cux.home.TilesPanel\")) {\n\t\t\tparent = parent.getParent() as ManagedObject;\n\t\t}\n\t\t(parent as InsightsContainer)?._getLayout().openSettingsDialog(SETTINGS_PANELS_KEYS.INSIGHTS_TILES);\n\t}\n\n\tpublic handleRemoveActions() {\n\t\tthis.setProperty(\"title\", \"\");\n\t\tthis.setProperty(\"enableSettings\", false);\n\t\tthis.setProperty(\"enableFullScreen\", false);\n\t\tthis.removeAllAggregation(\"actionButtons\");\n\t\tthis.removeAllAggregation(\"menuItems\");\n\t}\n\n\tpublic handleAddActions() {\n\t\tthis.setProperty(\n\t\t\t\"title\",\n\t\t\t`${this._i18nBundle?.getText(\"insights\")} ${this._i18nBundle.getText(\"insightsTilesTitle\")} (${this.aInsightsApps.length})`\n\t\t);\n\t\tthis.setProperty(\"enableSettings\", true);\n\t\tthis.setProperty(\"enableFullScreen\", true);\n\t\tthis._setupHeader();\n\t}\n\n\tprivate _closeAddFromFavDialog() {\n\t\t(this._controlMap.get(this._addFromFavDialogId) as Dialog)?.close();\n\t}\n\n\t/**\n\t * Navigates to the App Finder with optional group Id.\n\t * @async\n\t * @private\n\t * @param {string} [groupId] - Optional group Id\n\t */\n\tprivate async navigateToAppFinder(groupId?: string) {\n\t\tconst navigationService = await Container.getServiceAsync<Navigation>(\"Navigation\");\n\t\tconst navigationObject: { pageID: string; sectionID?: string } = {\n\t\t\tpageID: MYHOME_PAGE_ID,\n\t\t\tsectionID: MYINSIGHT_SECTION_ID\n\t\t};\n\t\tif (groupId) {\n\t\t\tnavigationObject.sectionID = groupId;\n\t\t}\n\t\tawait navigationService.navigate({\n\t\t\ttarget: {\n\t\t\t\tshellHash: `Shell-appfinder?&/catalog/${JSON.stringify(navigationObject)}`\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves the key of the legend color based on the provided color value.\n\t * @param {string} color - The color value for which to retrieve the legend color key.\n\t * @returns {string} The legend color key corresponding to the provided color value, or the default background color key if not found.\n\t * @private\n\t */\n\tprivate _getLegendColor(color: string) {\n\t\treturn END_USER_COLORS().find((oColor) => oColor.value === color) || DEFAULT_BG_COLOR();\n\t}\n\n\t/**\n\t * Handles the addition of tiles from favorite apps.\n\t * @returns {Promise<void>} A Promise that resolves when the operation is complete.\n\t * @private\n\t */\n\tprivate async _handleAddFromFavApps() {\n\t\tconst appsToAdd = await this._getFavToAdd();\n\t\tconst dialog = this._generateAddFromFavAppsDialog();\n\t\t(this._controlMap.get(`${this._addFromFavDialogId}-errorMessage`) as IllustratedMessage)?.setVisible(appsToAdd.length === 0);\n\t\tthis._generateAddFromFavAppsListItems(appsToAdd);\n\t\tdialog.open();\n\t}\n\n\tprivate async _getFavToAdd(): Promise<ISectionAndVisualization[]> {\n\t\tconst aFavApps: ISectionAndVisualization[] = await this.appManagerInstance.fetchFavVizs(false, true);\n\t\tconst aDynamicApps = aFavApps.filter(function (oDynApp) {\n\t\t\treturn oDynApp.isCount || oDynApp.isSmartBusinessTile;\n\t\t});\n\n\t\tconst aFilteredFavApps = aDynamicApps.filter((oDynApp) => {\n\t\t\tconst iAppIndex = this.aInsightsApps.findIndex(function (oInsightApps) {\n\t\t\t\treturn (\n\t\t\t\t\t(!oDynApp.visualization?.isBookmark && oInsightApps.visualization?.vizId === oDynApp.visualization?.vizId) ||\n\t\t\t\t\t(oDynApp.visualization?.isBookmark && oInsightApps.visualization?.targetURL === oDynApp.visualization?.targetURL)\n\t\t\t\t);\n\t\t\t});\n\t\t\treturn iAppIndex === -1;\n\t\t});\n\n\t\treturn aFilteredFavApps;\n\t}\n\n\t/**\n\t * Retrieves the selected Apps from the dialog.\n\t * @returns {sap.m.ListItemBase[]} An array of selected Apps.\n\t * @private\n\t */\n\tprivate _getSelectedInsights() {\n\t\tconst list = this._controlMap.get(`${this._addFromFavDialogId}-list`) as List;\n\t\treturn list.getSelectedItems() || [];\n\t}\n\n\tprivate _generateAddFromFavAppsListItems(appsToAdd: ISectionAndVisualization[]) {\n\t\tconst id = this._addFromFavDialogId;\n\t\tconst list = this._controlMap.get(`${id}-list`) as List;\n\t\tif (appsToAdd.length) {\n\t\t\tlist.destroyItems();\n\t\t\tconst listItems = appsToAdd.map(\n\t\t\t\t(app, index) =>\n\t\t\t\t\tnew CustomListItem({\n\t\t\t\t\t\tid: `${id}-listItem-${index}`,\n\t\t\t\t\t\tcontent: [\n\t\t\t\t\t\t\tnew HBox({\n\t\t\t\t\t\t\t\tid: `${id}-listItem-${index}-content`,\n\t\t\t\t\t\t\t\talignItems: \"Center\",\n\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\tnew Icon({\n\t\t\t\t\t\t\t\t\t\tid: `${id}-listItem-${index}-content-icon`,\n\t\t\t\t\t\t\t\t\t\tsrc: app.icon,\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: this._getLegendColor(app.BGColor || \"\").value,\n\t\t\t\t\t\t\t\t\t\tcolor: \"white\",\n\t\t\t\t\t\t\t\t\t\twidth: \"2.25rem\",\n\t\t\t\t\t\t\t\t\t\theight: \"2.25rem\",\n\t\t\t\t\t\t\t\t\t\tsize: \"1.25rem\"\n\t\t\t\t\t\t\t\t\t}).addStyleClass(\"sapUiRoundedBorder sapUiTinyMargin\"),\n\t\t\t\t\t\t\t\t\tnew ObjectIdentifier({\n\t\t\t\t\t\t\t\t\t\tid: `${id}-listItem-${index}-content-identifier`,\n\t\t\t\t\t\t\t\t\t\ttitle: app.title,\n\t\t\t\t\t\t\t\t\t\ttext: app.subtitle,\n\t\t\t\t\t\t\t\t\t\ttooltip: app.title\n\t\t\t\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMargin\")\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t\t\t.addStyleClass(\"sapUiContentPadding\")\n\t\t\t\t\t\t.data(\"app\", app) as CustomListItem\n\t\t\t);\n\t\t\tlistItems.forEach((item) => list.addItem(item));\n\t\t}\n\t\tlist?.setVisible(appsToAdd.length !== 0);\n\t}\n\n\tprivate _generateAddFromFavAppsDialog(): Dialog {\n\t\tconst id = this._addFromFavDialogId;\n\t\tif (!this._controlMap.get(id)) {\n\t\t\tconst getAppFinderBtn = (id: string, btnType?: ButtonType) => {\n\t\t\t\tconst appFinderBtn = new Button(id, {\n\t\t\t\t\ticon: \"sap-icon://action\",\n\t\t\t\t\ttext: this._i18nBundle.getText(\"appFinderBtn\"),\n\t\t\t\t\tpress: () => {\n\t\t\t\t\t\tthis._closeAddFromFavDialog();\n\t\t\t\t\t\tvoid this.navigateToAppFinder();\n\t\t\t\t\t},\n\t\t\t\t\tvisible: _showAddApps(),\n\t\t\t\t\ttype: btnType || ButtonType.Default\n\t\t\t\t});\n\t\t\t\taddFESRSemanticStepName(appFinderBtn, FESR_EVENTS.PRESS, \"tilesAppFinder\");\n\t\t\t\treturn appFinderBtn;\n\t\t\t};\n\t\t\tconst setAddBtnEnabled = () => {\n\t\t\t\tconst selectedItems = this._getSelectedInsights();\n\t\t\t\t(this._controlMap.get(`${id}-addBtn`) as Button).setEnabled(selectedItems.length > 0);\n\t\t\t};\n\t\t\tthis._controlMap.set(\n\t\t\t\t`${id}-list`,\n\t\t\t\tnew List({\n\t\t\t\t\tid: `${id}-list`,\n\t\t\t\t\tmode: \"MultiSelect\",\n\t\t\t\t\tselectionChange: setAddBtnEnabled\n\t\t\t\t})\n\t\t\t);\n\t\t\tconst addButton = new Button({\n\t\t\t\tid: `${id}-addBtn`,\n\t\t\t\ttext: this._i18nBundle.getText(\"addBtn\"),\n\t\t\t\ttype: \"Emphasized\",\n\t\t\t\tpress: () => {\n\t\t\t\t\tvoid this._addFromFavApps();\n\t\t\t\t},\n\t\t\t\tenabled: false\n\t\t\t});\n\t\t\taddFESRSemanticStepName(addButton, FESR_EVENTS.PRESS, \"addSmartApps\");\n\t\t\tthis._controlMap.set(`${id}-addBtn`, addButton);\n\t\t\tthis._controlMap.set(\n\t\t\t\t`${id}-errorMessage`,\n\t\t\t\tnew IllustratedMessage({\n\t\t\t\t\tid: `${id}-errorMessage`,\n\t\t\t\t\tillustrationSize: \"Spot\",\n\t\t\t\t\tillustrationType: \"sapIllus-AddDimensions\",\n\t\t\t\t\ttitle: this._i18nBundle.getText(\"noAppsTitle\"),\n\t\t\t\t\tdescription: this._i18nBundle.getText(\"tilesSectionNoDataDescription\"),\n\t\t\t\t\tvisible: true\n\t\t\t\t}).addStyleClass(\"sapUiLargeMarginTop\")\n\t\t\t);\n\t\t\tthis._controlMap.set(\n\t\t\t\tid,\n\t\t\t\tnew Dialog(id, {\n\t\t\t\t\ttitle: this._i18nBundle.getText(\"addSmartApps\"),\n\t\t\t\t\tcontent: [\n\t\t\t\t\t\tnew Label({\n\t\t\t\t\t\t\tid: `${id}-label`,\n\t\t\t\t\t\t\ttext: this._i18nBundle.getText(\"suggTileDialogLabel\"),\n\t\t\t\t\t\t\twrapping: true\n\t\t\t\t\t\t}).addStyleClass(\"sapMTitleAlign sapUiTinyMarginTopBottom sapUiSmallMarginBeginEnd\"),\n\t\t\t\t\t\tnew HBox({\n\t\t\t\t\t\t\tid: `${id}-textContainer`,\n\t\t\t\t\t\t\tjustifyContent: \"SpaceBetween\",\n\t\t\t\t\t\t\talignItems: \"Center\",\n\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\tnew Title({\n\t\t\t\t\t\t\t\t\tid: `${id}-text`,\n\t\t\t\t\t\t\t\t\ttext: this._i18nBundle.getText(\"suggTileDialogTitle\")\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tgetAppFinderBtn(`${id}-addAppsBtn`, ButtonType.Transparent)\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMarginTop dialogHeader sapUiSmallMarginBeginEnd\"),\n\t\t\t\t\t\tthis._controlMap.get(`${id}-list`) as List,\n\t\t\t\t\t\tthis._controlMap.get(`${id}-errorMessage`) as IllustratedMessage\n\t\t\t\t\t],\n\t\t\t\t\tcontentWidth: \"42.75rem\",\n\t\t\t\t\tcontentHeight: \"32.5rem\",\n\t\t\t\t\tendButton: new Button({\n\t\t\t\t\t\ttext: this._i18nBundle.getText(\"closeBtn\"),\n\t\t\t\t\t\tpress: this._closeAddFromFavDialog.bind(this)\n\t\t\t\t\t}),\n\t\t\t\t\tescapeHandler: this._closeAddFromFavDialog.bind(this),\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\tthis._controlMap.get(`${id}-addBtn`) as Button,\n\t\t\t\t\t\tnew Button({\n\t\t\t\t\t\t\tid: `${id}-cancelBtn`,\n\t\t\t\t\t\t\ttext: this._i18nBundle.getText(\"cancelBtn\"),\n\t\t\t\t\t\t\tpress: this._closeAddFromFavDialog.bind(this)\n\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t}).addStyleClass(\"sapContrastPlus sapCuxAddFromInsightsDialog\")\n\t\t\t);\n\t\t}\n\t\treturn this._controlMap.get(id) as Dialog;\n\t}\n\n\tprivate async _addFromFavApps() {\n\t\tconst dialog = this._controlMap.get(this._addFromFavDialogId) as Dialog;\n\t\tdialog.setBusy(true);\n\t\tconst selectedItems = this._getSelectedInsights();\n\t\tawait selectedItems.reduce(async (promise, oApp) => {\n\t\t\tawait promise;\n\t\t\tconst app = oApp.data(\"app\") as ISectionAndVisualization;\n\t\t\tconst oMovingConfig = {\n\t\t\t\tpageId: MYHOME_PAGE_ID,\n\t\t\t\tsourceSectionIndex: app.persConfig?.sectionIndex as number,\n\t\t\t\tsourceVisualizationIndex: app.persConfig?.visualizationIndex as number,\n\t\t\t\ttargetSectionIndex: this.appManagerInstance.insightsSectionIndex,\n\t\t\t\ttargetVisualizationIndex: -1\n\t\t\t};\n\t\t\tif (app.visualization?.displayFormatHint !== \"standard\" && app.visualization?.displayFormatHint !== \"standardWide\") {\n\t\t\t\tif (app.visualization?.supportedDisplayFormats?.includes(\"standard\")) {\n\t\t\t\t\tapp.visualization.displayFormatHint = \"standard\";\n\t\t\t\t} else if (app.visualization?.supportedDisplayFormats?.includes(\"standardWide\")) {\n\t\t\t\t\tapp.visualization.displayFormatHint = \"standardWide\";\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Add Selected App to Insights Section\n\t\t\tif (!app.visualization?.vizId) {\n\t\t\t\t(app.visualization as IVisualization).vizId = app.visualization?.targetURL || \"\";\n\t\t\t}\n\t\t\tif (app.visualization?.isBookmark === true) {\n\t\t\t\tawait this.appManagerInstance.addBookMark(app.visualization, oMovingConfig);\n\t\t\t} else {\n\t\t\t\tawait this.appManagerInstance.addVisualization(app.visualization?.vizId as string, MYINSIGHT_SECTION_ID);\n\t\t\t}\n\t\t}, Promise.resolve());\n\n\t\tawait this.refreshData();\n\t\tdialog.setBusy(false);\n\t\tdialog.close();\n\t}\n\n\t/**\n\t * Calculates the number of visible tiles that can fit within the available width of the parent container.\n\t *\n\t * @private\n\t * @param {ICustomVisualization[]} insightsApps - An array of custom visualizations to be displayed as tiles.\n\t * @returns {number} - The number of visible tiles.\n\t */\n\tprivate _calculateVisibleTileCount(insightsApps: ICustomVisualization[]): number {\n\t\tconst layoutDomRef = this._getInsightsContainer()?._getLayout()?.getDomRef();\n\t\tconst apps = insightsApps || [];\n\t\tlet count = 0;\n\n\t\tif (layoutDomRef && apps.length) {\n\t\t\tconst sectionDomRef = layoutDomRef.childNodes[0] as Element;\n\t\t\tconst domProperties = fetchElementProperties(sectionDomRef, [\"width\", \"padding-left\", \"padding-right\"]);\n\t\t\tlet availableWidth = domProperties.width - domProperties[\"padding-left\"] - domProperties[\"padding-right\"];\n\t\t\tconst widthMap = {} as Record<DisplayFormat, number>;\n\n\t\t\twidthMap[DisplayFormat.Standard] = 176 + 16; // Width + Gap\n\t\t\twidthMap[DisplayFormat.StandardWide] = 368 + 16; // Width + Gap\n\n\t\t\tlet nextTileWidth = widthMap[(apps[count].visualization?.displayFormatHint || DisplayFormat.Standard) as DisplayFormat];\n\t\t\tdo {\n\t\t\t\tavailableWidth -= nextTileWidth;\n\t\t\t\t++count;\n\t\t\t\tnextTileWidth =\n\t\t\t\t\twidthMap[((apps[count] && apps[count].visualization?.displayFormatHint) || DisplayFormat.Standard) as DisplayFormat];\n\t\t\t} while (availableWidth > nextTileWidth);\n\t\t}\n\n\t\treturn count || 1;\n\t}\n\n\t/**\n\t * Adjusts the layout of the tiles panel based on the current layout and device type.\n\t *\n\t * @private\n\t * @override\n\t */\n\tpublic _adjustLayout() {\n\t\tconst layout = this._getInsightsContainer()?._getLayout();\n\t\tconst isFullScreenEnabled = this.getProperty(\"enableFullScreen\") as boolean;\n\t\tconst isMobileDevice = this.getDeviceType() === DeviceType.Mobile;\n\n\t\tif (layout && isFullScreenEnabled) {\n\t\t\tconst visibleTileCount = isMobileDevice ? this.aInsightsApps?.length : this._calculateVisibleTileCount(this.aInsightsApps);\n\t\t\tconst isElementExpanded = layout._getCurrentExpandedElementName() === this.getProperty(\"fullScreenName\");\n\t\t\tthis._controlModel.setProperty(\n\t\t\t\t\"/tiles\",\n\t\t\t\tisElementExpanded ? this.aInsightsApps : this.aInsightsApps?.slice(0, visibleTileCount)\n\t\t\t);\n\n\t\t\t//Show/Hide Full Screen Button if available\n\t\t\tthis._getInsightsContainer()?.toggleFullScreenElements(this, this.aInsightsApps?.length > visibleTileCount, isElementExpanded);\n\t\t}\n\t}\n\n\tprivate _getInsightsContainer(): InsightsContainer {\n\t\tif (!this.insightsContainer) {\n\t\t\tthis.insightsContainer = this.getParent() as InsightsContainer;\n\t\t}\n\t\treturn this.insightsContainer;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}