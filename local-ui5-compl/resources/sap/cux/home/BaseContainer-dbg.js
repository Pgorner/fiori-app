/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *  * (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
"use strict";sap.ui.define(["sap/m/Button","sap/m/FlexBox","sap/m/HBox","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/List","sap/m/Popover","sap/m/StandardListItem","sap/m/Title","sap/m/library","sap/ui/core/Control","sap/ui/core/CustomData","sap/ui/core/Element","sap/ui/core/Lib","./BaseContainerRenderer","./BasePanel","./MenuItem","./library","./utils/Device","./utils/FESRUtil"],function(e,t,n,i,o,s,r,a,l,c,u,d,g,p,h,y,m,_,f,I){"use strict";function S(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const b=c["BackgroundDesign"];const M=c["ButtonType"];const B=c["PlacementType"];const P=S(h);const T=S(y);const C=S(m);const v=_["LayoutType"];const $=f["calculateDeviceType"];const w=f["DeviceType"];const E=I["addFESRId"];const H=I["addFESRSemanticStepName"];const A=I["FESR_EVENTS"];const x=I["getFESRId"];const F=u.extend("sap.cux.home.BaseContainer",{renderer:P,metadata:{library:"sap.cux.home",properties:{title:{type:"string",group:"Data",defaultValue:"",visibility:"hidden"},layout:{type:"sap.cux.home.LayoutType",group:"Data",defaultValue:v.SideBySide,visibility:"hidden"},selectedKey:{type:"string",group:"Data",defaultValue:"",visibility:"hidden"},width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"100%",visibility:"public"},height:{type:"sap.ui.core.CSSSize",group:"Appearance",visibility:"public"},blocked:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"},busy:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"},busyIndicatorDelay:{type:"int",defaultValue:1e3,visibility:"hidden"},busyIndicatorSize:{type:"sap.ui.core.BusyIndicatorSize",defaultValue:"Medium",visibility:"hidden"},fieldGroupIds:{type:"string[]",defaultValue:[],visibility:"hidden"},visible:{type:"boolean",group:"Appearance",defaultValue:true,visibility:"hidden"},enableSettings:{type:"boolean",group:"Misc",visibility:"hidden"},enableFullScreen:{type:"boolean",group:"Misc",visibility:"hidden"},fullScreenName:{type:"string",group:"Misc",visibility:"hidden"}},defaultAggregation:"content",aggregations:{content:{type:"sap.cux.home.BasePanel",singularName:"content",multiple:true,visibility:"public"},actionButtons:{type:"sap.m.Button",multiple:true,singularName:"actionButton",visibility:"public"},menuItems:{type:"sap.cux.home.MenuItem",multiple:true,singularName:"menuItem",visibility:"public"}},associations:{layout:{type:"sap.cux.home.BaseLayout",multiple:false,singularName:"layout",visibility:"hidden"},fullScreenButton:{type:"sap.m.Button",multiple:false,singularName:"fullScreenButton",visibility:"hidden"},fullScreenMenuItem:{type:"sap.cux.home.MenuItem",multiple:false,singularName:"fullScreenMenuItem",visibility:"hidden"}},events:{onExpand:{}},designtime:true},adjustLayout:function e(){},constructor:function e(t,n){u.prototype.constructor.call(this,t,n)},init:function e(){this._controlMap=new Map;this._commonHeaderElementStates=new Map;this._i18nBundle=p.getResourceBundleFor("sap.cux.home.i18n");this._createHeader(this)},_createHeader:function e(t){const i=t.getId();const o=`${i}-header`;const s=t.isA("sap.cux.home.BasePanel");const r=this.getProperty("title")?.trim().length>0;if(!this._controlMap.get(o)){this._controlMap.set(`${i}-header-title`,new l(`${i}-title`,{titleStyle:s&&r?"H6":"H4"}));this._controlMap.set(`${i}-header-contentLeft`,new n(`${i}-contentLeft`,{renderType:"Bare"}).addStyleClass("sapCuxSectionContentArea"));this._controlMap.set(`${i}-header-contentRight`,new n(`${i}-contentRight`,{renderType:"Bare"}).addStyleClass("sapCuxSectionContentArea"));this._controlMap.set(`${i}-header-content`,new n(`${i}-content`,{width:"100%",justifyContent:"SpaceBetween",renderType:"Bare",items:[this._controlMap.get(`${i}-header-contentLeft`),this._controlMap.get(`${i}-header-contentRight`)]}).addStyleClass("sapUiTinyMarginBegin"));this._controlMap.set(o,new n(`${i}-header`,{alignItems:"Center",items:[this._controlMap.get(`${i}-header-title`),this._controlMap.get(`${i}-header-content`)]}));this.addDependent(this._controlMap.get(o))}this._controlMap.get(o)?.addStyleClass(s&&r?"sapCuxPanelHeader":"sapUiContainerHeader");return this._controlMap.get(o)},_getHeader:function e(){return this._controlMap.get(`${this.getId()}-header`)},_getInnerControl:function e(){return this.getProperty("layout")===v.SideBySide?this._iconTabBar:this._wrapper},_onPanelSelect:function e(t){this.setProperty("selectedKey",t.getParameter("selectedKey"),true);this._updateContainerHeader(this)},_setPanelCount:function e(t,n){if(this.getProperty("layout")===v.SideBySide){this._getIconTabFilter(t).setCount(n)}},_addToPanel:function e(t,n){if(this.getProperty("layout")===v.SideBySide){this._getIconTabFilter(t)?.addContent(n)}else{this._controlMap.get(`${t.getId()}-wrapper`)?.addItem(n)}},_getIconTabFilter:function e(t){const n=`${t.getId()}-tabFilter`;if(!this._controlMap.get(n)){const e=new o(n,{key:t.getProperty("key"),text:t.getProperty("title"),tooltip:t.getProperty("tooltip")});e.addCustomData(new d({key:"sap-ui-fastnavgroup",value:"true",writeToDom:true}));this._controlMap.set(n,e);H(e,A.SELECT,t.getProperty("key"))}t._getContent()?.forEach(e=>this._controlMap.get(n).addContent(e));return this._controlMap.get(n)},onBeforeRendering:function e(){this._createInnerControl();this._updateContainerHeader(this);this._addAllPanelContent()},onAfterRendering:function e(){this._attachResizeHandler()},_attachResizeHandler:function e(){if(this.getDomRef()){this._resizeObserver?.disconnect();this._resizeObserver=new ResizeObserver(e=>{this._setDeviceType(e);this.adjustLayout()});this._resizeObserver?.observe(this.getDomRef())}},_createInnerControl:function e(){const n=this.getProperty("layout");if(n===v.Horizontal||n===v.Vertical){if(!this._wrapper){this._wrapper=new t(`${this.getId()}-wrapper`,{width:"100%",renderType:"Bare"}).addStyleClass("sapCuxBaseWrapper");this.addDependent(this._wrapper)}this._wrapper.setDirection(n===v.Horizontal?"Row":"Column")}else if(!this._iconTabBar){this._iconTabBar=new i(`${this.getId()}-iconTabBar`,{expandable:true,backgroundDesign:b.Transparent,headerMode:"Inline",headerBackgroundDesign:b.Transparent,select:e=>this._onPanelSelect(e)});this.addDependent(this._iconTabBar)}},_updateContainerHeader:function e(t){this._controlMap.get(t.getId()+"-header-contentLeft")?.removeAllItems();this._controlMap.get(t.getId()+"-header-contentRight")?.removeAllItems();this._updateHeader(t)},_updateHeader:function e(t){const n=this.getProperty("layout")===v.SideBySide;const i=t.isA("sap.cux.home.BaseContainer");const o=this._controlMap.get(t.getId()+"-header-title");o?.setText(t.getProperty("title"));o?.setVisible(t.getProperty("title")?.trim().length>0);this._addCommonHeaderElements();const s=i&&n?this._getSelectedPanel():t;const r=!i&&n?this:t;const a=s?.getAggregation("menuItems")||[];if(a.length>0){this._addMenuItems(r,a)}s?.getAggregation("actionButtons")?.forEach(e=>{this._controlMap.get(r.getId()+"-header-contentRight")?.addItem(this._getHeaderButton(e))})},_addCommonHeaderElements:function e(){const t=e=>{const t=[{property:"enableFullScreen",aggregation:"menuItems",headerElement:this._getFullScreenMenuItem(e)},{property:"enableSettings",aggregation:"menuItems",headerElement:this._getHomeSettingsMenuItem(e)},{property:"enableFullScreen",aggregation:"actionButtons",headerElement:this._getFullScreenButton(e)}];t.forEach(t=>{let{property:n,aggregation:i,headerElement:o}=t;const s=this._getLayout();const r=e.getProperty(n);const a=this._commonHeaderElementStates.get(`${o.getId()}-${n}`);if(r!==a){if(r){this._commonHeaderElementStates.set(`${o.getId()}-${n}`,r);e.addAggregation(i,o);if(n==="enableFullScreen"){if(i==="actionButtons"){e.setAssociation("fullScreenButton",o,true)}if(i==="menuItems"){e.setAssociation("fullScreenMenuItem",o,true)}s?.registerFullScreenElement(e)}}else{this._commonHeaderElementStates.set(`${o.getId()}-${n}`,r);e.removeAggregation(i,o);if(n==="enableFullScreen"){if(i==="actionButtons"){e.removeAssociation("fullScreenButton",o,true)}if(i==="menuItems"){e.removeAssociation("fullScreenMenuItem",o,true)}s?.deregisterFullScreenElement(e)}}}})};t(this);const n=this.getContent()||[];n.forEach(t)},_getHomeSettingsMenuItem:function e(t){const n=`${t.getId()}-settings`;if(!this._controlMap.get(n)){const e=new C(n,{title:this._i18nBundle.getText("myHomeSettings"),icon:"sap-icon://user-settings",press:()=>{const e=this._getLayout();e?.openSettingsDialog()}});E(e,"myHomeSettings");this._controlMap.set(n,e)}return this._controlMap.get(n)},_getFullScreenMenuItem:function e(t){const n=`${t.getId()}-showMore`;if(!this._controlMap.get(n)){const e=new C(n,{title:this._i18nBundle.getText("expand"),icon:"sap-icon://display-more",press:()=>{const e=this._getLayout();e?.toggleFullScreen(t)}});E(e,"toggleFullScreen");this._controlMap.set(n,e)}return this._controlMap.get(n)},_getFullScreenButton:function t(n){const i=`${n.getId()}-fullScreen`;if(!this._controlMap.get(i)){const t=new e(i,{text:this._i18nBundle.getText("expand"),type:M.Transparent,press:()=>{const e=this._getLayout();e?.toggleFullScreen(n)}});E(t,"toggleFullScreen");this._controlMap.set(i,t)}return this._controlMap.get(i)},_getSelectedPanel:function e(){const t=this.getContent()?.find(e=>e.getProperty("key")===this.getProperty("selectedKey"))||this.getContent()?.[0];this.setProperty("selectedKey",t?.getProperty("key"),true);return t},_addAllPanelContent:function e(){const t=this.getContent()||[];if(this.getProperty("layout")===v.SideBySide){this._iconTabBar.removeAllItems();t.forEach(e=>this._iconTabBar.addItem(this._getIconTabFilter(e)));this._iconTabBar.setSelectedKey(this.getProperty("selectedKey"))}else{this._wrapper.removeAllItems();t.forEach(e=>this._wrapper.addItem(this._getPanelContentWrapper(e)))}},_getPanelContentWrapper:function e(n){const i=`${n.getId()}-contentWrapper`;if(!this._controlMap.get(i)){this._controlMap.set(i,new t(i,{direction:"Column",renderType:"Bare"}))}this._controlMap.get(i).addItem(this._updatePanelHeader(n));n._getContent()?.forEach(e=>this._controlMap.get(i).addItem(e));return this._controlMap.get(i)},_updatePanelHeader:function e(t){const n=this._createHeader(t);const i=t.getProperty("title")?.trim().length>0;const o=this.getProperty("title")?.trim().length>0;this._updateContainerHeader(t);n.toggleStyleClass("sapCuxPanelHeader",o&&(i||t.getAggregation("menuItems")?.length>0||t.getAggregation("actionButtons")?.length>0));return n},_setTitle:function e(t){this.setProperty("title",t,true);this._controlMap.get(`${this.getId()}-header-title`).setText(t);return this},_addMenuItems:function t(n,i){if(!this._controlMap.get(`${n.getId()}-menu`)){const t=new s(`${n.getId()}-list`,{itemPress:e=>e.getSource().getParent().close()});this._controlMap.set(`${n.getId()}-menu`,t);const i=new r(`${n.getId()}-popover`,{placement:B.VerticalPreferredBottom,showHeader:false,content:[t]});const o=new e(`${n.getId()}-menu-btn`,{icon:"sap-icon://slim-arrow-down",type:M.Transparent,press:e=>i.openBy(e.getSource())});this._controlMap.set(`${n.getId()}-menu-btn`,o)}this._controlMap.get(n.getId()+"-header-contentLeft")?.addItem(this._controlMap.get(`${n.getId()}-menu-btn`));this._controlMap.get(`${n.getId()}-menu`).removeAllItems();i.forEach(e=>this._controlMap.get(`${n.getId()}-menu`).addItem(this._getMenuListItem(e)))},_getHeaderButton:function t(n){const i=`${n.getId()}-btn`;if(!this._controlMap.get(i)){this._controlMap.set(i,new e(i,{type:M.Transparent,press:()=>n.firePress()}));H(this._controlMap.get(i),A.PRESS,x(n))}const o=this._controlMap.get(i);o.setText(n.getText());o.setTooltip(n.getTooltip());o.setIcon(n.getIcon());o.setVisible(n.getVisible());o.setEnabled(n.getEnabled());return o},_getLayout:function e(){return g.getElementById(this.getAssociation("layout",null))},_getMenuListItem:function e(t){if(!this._controlMap.get(`${t.getId()}-listItem`)){this._controlMap.set(`${t.getId()}-listItem`,new a(`${t.getId()}-listItem`,{type:"Active",icon:t.getIcon(),title:t.getTitle(),press:e=>t.firePress({button:e.getSource()})}));H(this._controlMap.get(`${t.getId()}-listItem`),A.PRESS,x(t))}const n=this._controlMap.get(`${t.getId()}-listItem`);n.setIcon(t.getIcon());n.setTitle(t.getTitle());n.setVisible(t.getVisible());return n},toggleMenuListItem:function e(t,n){if(t){const e=this._getMenuListItem(t);e?.setVisible(n)}},removeContent:function e(t){if(this.getProperty("selectedKey")&&this.getProperty("selectedKey")===t.getProperty("key")){this.setProperty("selectedKey",undefined,true)}this.removeAggregation("content",t)},getWidth:function e(){return this.getProperty("width")},toggleActionButtons:function e(t){const n=this.getProperty("layout")===v.SideBySide;let i=false;const o=e=>{e.getActionButtons()?.forEach(e=>{const n=e.getVisible();if(n!==t){e.setProperty("visible",t,true);i=true}});if(!n&&i){this._updateContainerHeader(e)}};o(this);const s=this.getContent()||[];s.forEach(o);if(n&&i){this._updateContainerHeader(this)}},toggleFullScreenElements:function e(t,n,i){const o=g.getElementById(t.getAssociation("fullScreenButton",null));const s=g.getElementById(t.getAssociation("fullScreenMenuItem",null));const r=this.getProperty("layout")===v.SideBySide;const a=this.getDeviceType()===w.Mobile;let l=false;[o,s].forEach(e=>{if(e&&n!==e.getVisible()){l=true;n=!a?n:false;e.setProperty("visible",i?true:n,true)}});const c=t instanceof T&&t.getKey();if(l&&(!r||r&&this.getProperty("selectedKey")===c)){this._updateContainerHeader(t)}},_setDeviceType:function e(t){const[n]=t;const i=n?.contentRect.width;const o=$(i);if(this._deviceType!==o){this._deviceType=o}},getDeviceType:function e(){return this._deviceType||$()}});return F});
//# sourceMappingURL=BaseContainer-dbg.js.map