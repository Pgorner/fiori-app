{"version":3,"file":"FrequentAppPanel.js","names":["sap","ui","define","Log","Container","EventHub","__BaseAppPersPanel","__MenuItem","_interopRequireDefault","obj","__esModule","default","_catch","body","recover","result","e","then","BaseAppPersPanel","MenuItem","FrequentAppPanel","extend","metadata","library","defaultAggregation","aggregations","apps","type","singularName","multiple","visibility","constructor","_constructor","id","settings","BaseAppPersPanel.prototype.constructor.call","this","setSupported","init","_init","BaseAppPersPanel.prototype.init.call","setProperty","_i18nBundle","getText","_attachUserActivityTracking","on","do","refresh","loadApps","_loadApps","_this","Promise","resolve","_getFrequentVisualizations","frequentVisualizations","map","visualization","menuItems","_getActions","addedInFavorites","destroyAggregation","frequentApps","generateApps","setApps","reject","_this2","getServiceAsync","UserRecentsService","getFrequentActivity","frequentActivities","convertActivitiesToVisualizations","error","isAppAddedInFavorite","arguments","length","undefined","action","push","title","icon","press","event","_addAppToFavorites","generateIllustratedMessage","_generateIllustratedMessage","illustratedMessage","BaseAppPersPanel.prototype.generateIllustratedMessage.call","setDescription"],"sources":["FrequentAppPanel.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport Log from \"sap/base/Log\";\nimport type { MetadataOptions } from \"sap/ui/core/Element\";\nimport Container from \"sap/ushell/Container\";\nimport EventHub from \"sap/ushell/EventHub\";\nimport UserRecents from \"sap/ushell/services/UserRecents\";\nimport BaseAppPersPanel, { $BaseAppPersPanelSettings } from \"./BaseAppPersPanel\";\nimport MenuItem from \"./MenuItem\";\nimport { IActivity } from \"./interface/AppsInterface\";\n\n/**\n *\n * Provides the class for managing frequent apps.\n *\n * @extends sap.cux.home.BaseAppPersPanel\n *\n * @author SAP SE\n * @version 0.0.1\n * @since 1.121.0\n *\n * @internal\n * @experimental Since 1.121\n * @public\n *\n * @alias sap.cux.home.FrequentAppPanel\n */\n\nexport default class FrequentAppPanel extends BaseAppPersPanel {\n\tstatic readonly metadata: MetadataOptions = {\n\t\tlibrary: \"sap.cux.home\",\n\t\tdefaultAggregation: \"apps\",\n\t\taggregations: {\n\t\t\t/**\n\t\t\t * Apps aggregation for Frequent apps\n\t\t\t */\n\t\t\tapps: { type: \"sap.cux.home.App\", singularName: \"app\", multiple: true, visibility: \"hidden\" }\n\t\t}\n\t};\n\n\t/**\n\t * Constructor for a new frequent app panel.\n\t *\n\t * @param {string} [id] ID for the new control, generated automatically if an ID is not provided\n\t * @param {object} [settings] Initial settings for the new control\n\t */\n\tpublic constructor(id?: string, settings?: $BaseAppPersPanelSettings) {\n\t\tsuper(id, settings);\n\t\tthis.setSupported(false);\n\t}\n\n\tpublic init() {\n\t\tsuper.init();\n\t\tthis.setProperty(\"key\", \"frequentApps\");\n\t\tthis.setProperty(\"title\", this._i18nBundle.getText(\"frequentlyUsedTab\"));\n\t\tthis.setProperty(\"tooltip\", this._i18nBundle.getText(\"frequentlyUsedTabInfo\"));\n\t\tthis._attachUserActivityTracking();\n\t\tEventHub.on(\"userRecentsCleared\").do(() => {\n\t\t\tvoid this.refresh();\n\t\t});\n\t}\n\n\t/**\n\t * Fetch frequent apps and set apps aggregation\n\t * @private\n\t */\n\tpublic async loadApps() {\n\t\tlet frequentVisualizations = await this._getFrequentVisualizations();\n\t\tfrequentVisualizations = frequentVisualizations.map((visualization) => {\n\t\t\treturn {\n\t\t\t\t...visualization,\n\t\t\t\tmenuItems: this._getActions(visualization.addedInFavorites)\n\t\t\t};\n\t\t});\n\t\tthis.destroyAggregation(\"apps\", true);\n\t\t//convert apps objects array to apps instances\n\t\tconst frequentApps = this.generateApps(frequentVisualizations);\n\t\tthis.setApps(frequentApps);\n\t}\n\n\t/**\n\t * Returns list of frequent apps\n\t * @private\n\t * @returns {object[]} - Array of frequent apps.\n\t */\n\tprivate async _getFrequentVisualizations() {\n\t\ttry {\n\t\t\tconst UserRecentsService = await Container.getServiceAsync<UserRecents>(\"UserRecents\");\n\t\t\tconst frequentActivities: IActivity[] = (await UserRecentsService?.getFrequentActivity()) || [];\n\t\t\t//convert activity to apps\n\t\t\tconst frequentVisualizations = await this.convertActivitiesToVisualizations(frequentActivities);\n\t\t\treturn frequentVisualizations;\n\t\t} catch (error) {\n\t\t\tLog.error(error as string);\n\t\t\treturn [];\n\t\t}\n\t}\n\n\t/**\n\t * Returns list of actions available for selected app\n\t * @private\n\t * @param {boolean} isAppAddedInFavorite - true if app is already present in favorite, false otherwise.\n\t * @returns {sap.cux.home.MenuItem[]} - Array of list items.\n\t */\n\tprivate _getActions(isAppAddedInFavorite: boolean = false) {\n\t\tconst action = [];\n\t\tif (!isAppAddedInFavorite) {\n\t\t\taction.push(\n\t\t\t\tnew MenuItem(\"\", {\n\t\t\t\t\ttitle: this._i18nBundle.getText(\"addToFavorites\"),\n\t\t\t\t\ticon: \"sap-icon://add-favorite\",\n\t\t\t\t\tpress: (event) => {\n\t\t\t\t\t\tvoid this._addAppToFavorites(event);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t\treturn action;\n\t}\n\n\t/**\n\t * Generates illustrated message for frequent apps panel.\n\t * @private\n\t * @override\n\t * @returns {sap.m.IllustratedMessage} Illustrated error message.\n\t */\n\tprotected generateIllustratedMessage() {\n\t\tconst illustratedMessage = super.generateIllustratedMessage();\n\t\t//override the default description\n\t\tillustratedMessage.setDescription(this._i18nBundle.getText(\"noFreqAppsDescription\"));\n\t\treturn illustratedMessage;\n\t}\n}\n"],"mappings":";;;;AAAA,aAAAA,IAAAC,GAAAC,OAAA,yGAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,sBAAAC,EAAAC,GAAA,OAAAA,KAAAC,mBAAAD,EAAAE,UAAA,YAAAF,EAAAE,QAAAF,CAAA,CAkjBO,SAAAG,EAAgBC,EAAMC,GAC5B,IACC,IAAIC,EAASF,GACd,CAAE,MAAMG,GACP,OAAOF,EAAQE,EAChB,CACA,GAAID,GAAUA,EAAOE,KAAM,CAC1B,OAAOF,EAAOE,UAAU,EAAGH,EAC5B,CACA,OAAOC,CACR,CAAC,MAljBMG,EAAgBV,EAAAF,GAAA,MAChBa,EAAQX,EAAAD,GAGf,MAiBqBa,EAAyBF,EAAgBG,OAAA,iCAC7CC,SAA4B,CAC3CC,QAAS,eACTC,mBAAoB,OACpBC,aAAc,CAIbC,KAAM,CAAEC,KAAM,mBAAoBC,aAAc,MAAOC,SAAU,KAAMC,WAAY,YAU9EC,YAAW,SAAAC,EAACC,EAAaC,GAC/BC,6BAAAC,KAAMH,EAAIC,GACVE,KAAKC,aAAa,MACnB,EAEOC,KAAI,SAAAC,IACVC,sBAAAJ,MACAA,KAAKK,YAAY,MAAO,gBACxBL,KAAKK,YAAY,QAASL,KAAKM,YAAYC,QAAQ,sBACnDP,KAAKK,YAAY,UAAWL,KAAKM,YAAYC,QAAQ,0BACrDP,KAAKQ,8BACLvC,EAASwC,GAAG,sBAAsBC,GAAG,UAC/BV,KAAKW,WAEZ,EAMaC,SAAQ,SAAAC,IAAA,IAAG,MAAAC,EACYd,KAAI,OAAAe,QAAAC,QAAJF,EAAKG,8BAA4BpC,KAAA,SAAhEqC,GACJA,EAAyBA,EAAuBC,IAAKC,QAEhDA,EACHC,UAAWP,EAAKQ,YAAYF,EAAcG,qBAG5CT,EAAKU,mBAAmB,OAAQ,MAEhC,MAAMC,EAAeX,EAAKY,aAAaR,GACvCJ,EAAKa,QAAQF,EAAc,EAC5B,CAAC,MAAA7C,GAAA,OAAAmC,QAAAa,OAAAhD,EAAA,GAOaqC,2BAA0B,SAAAA,IAAA,IAAG,MAAAY,EAKJ7B,KAAI,OAAAe,QAAAC,QAAAxC,EAAA,WAJtC,OAAAuC,QAAAC,QAC8BhD,EAAU8D,gBAA6B,gBAAcjD,KAAA,SAAhFkD,GAAkB,OAAAhB,QAAAC,QACuBe,GAAoBC,uBAAqBnD,KAAA,SAAlFoD,GACN,OAAAlB,QAAAC,QACqCa,EAAKK,kCAAkCD,GAAmB,IAEhG,EAAC,SAAQE,GACRpE,EAAIoE,MAAMA,GACV,MAAO,EACR,GACD,CAAC,MAAAvD,GAAA,OAAAmC,QAAAa,OAAAhD,EAAA,GAQO0C,YAAW,SAAAA,IAAwC,IAAvCc,EAA6BC,UAAAC,OAAA,GAAAD,UAAA,KAAAE,UAAAF,UAAA,GAAG,MACnD,MAAMG,EAAS,GACf,IAAKJ,EAAsB,CAC1BI,EAAOC,KACN,IAAI1D,EAAS,GAAI,CAChB2D,MAAO1C,KAAKM,YAAYC,QAAQ,kBAChCoC,KAAM,0BACNC,MAAQC,SACF7C,KAAK8C,mBAAmBD,MAIjC,CACA,OAAOL,CACR,EAQUO,2BAA0B,SAAAC,IACnC,MAAMC,EAAkBC,4CAAAlD,MAExBiD,EAAmBE,eAAenD,KAAKM,YAAYC,QAAQ,0BAC3D,OAAO0C,CACR,IAAC,OAvGmBjE,CAAgB","ignoreList":[]}