/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *  * (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
"use strict";sap.ui.define(["sap/m/HBox","sap/m/Label","sap/m/List","sap/m/StandardListItem","sap/m/Switch","sap/m/Text","sap/m/Title","sap/m/VBox","./BaseSettingsPanel","./utils/Constants","./utils/FESRUtil","./utils/PersonalisationUtils","./utils/UshellPersonalizer"],function(e,t,s,n,i,o,a,r,l,d,c,u,h){"use strict";function w(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const g=w(l);const S=d["SETTINGS_PANELS_KEYS"];const m=c["addFESRSemanticStepName"];const p=c["FESR_EVENTS"];const f=w(u);const P=w(h);const N=g.extend("sap.cux.home.NewsSettingsPanel",{init:function e(){g.prototype.init.call(this);this.setProperty("key",S.NEWS);this.setProperty("title",this._i18nBundle.getText("news"));this.setProperty("icon","sap-icon://newspaper");this.addAggregation("content",this.getContent());this.attachPanelNavigated(()=>{void this.loadNewsFeedSettings()});this.aFavNewsFeed=[]},getContent:function e(){const t=this.setHeader();const s=this.setTitleMessage();const n=new r(this.getId()+"--idNewsPageOuterVBoX",{alignItems:"Start",justifyContent:"SpaceBetween",items:[t,s,this.setNewsList()]});return n},getPersonalization:function e(){try{const t=this;function s(){return t.oPersonalizer}const n=function(){if(!t.oPersonalizer){return Promise.resolve(P.getInstance(f.getPersContainerId(t._getPanel()),f.getOwnerComponent(t._getPanel()))).then(function(e){t.oPersonalizer=e})}}();return Promise.resolve(n&&n.then?n.then(s):s(n))}catch(i){return Promise.reject(i)}},setHeader:function e(){const t=new o(this.getId()+"--idCustNewsFeedSettingsText",{text:this._i18nBundle.getText("newsFeedSettingsText")});const s=new r(this.getId()+"--idCustNewsFeedSettingsTextContainer",{alignItems:"Start",justifyContent:"SpaceBetween",items:[t]}).addStyleClass("sapUiSmallMarginTop sapUiSmallMarginBegin");return s},setTitleMessage:function t(){const s=new a(this.getId()+"--idCustNewsFeedSettignsTitle",{text:this._i18nBundle.getText("newsFeedSettingsHeading"),titleStyle:"H5"});const n=new e(this.getId()+"--idCustNewsFeedSettingsTitleContainer",{alignItems:"Center",justifyContent:"SpaceBetween",items:[s]});const i=new r(this.getId()+"--idCustNewsFeedSettingsTitleVBox",{alignItems:"Start",justifyContent:"SpaceBetween",items:[n]}).addStyleClass("sapUiSmallMarginTop sapUiSmallMarginBegin");return i},setNewsList:function n(){const o=new t(this.getId()+"--idShowAllCustNewsSwitchLabel",{text:this._i18nBundle.getText("showAllPreparationRequiredSwitchLabel")});this.oShowSwitch=new i("",{customTextOn:" ",customTextOff:" ",change:()=>{void this.saveNewsFeedSettings()},state:false});m(this.oShowSwitch,p.CHANGE,"showPrepRequire");const a=new e(this.getId()+"--idShowAllCustNewsSwitchContainer",{alignItems:"Center",items:[o,this.oShowSwitch],width:"94%"}).addStyleClass("sapUiSmallMarginTop");const l=new r(this.getId()+"--idShowAllCustNewsSwitchVBox",{items:[a],width:"94%"}).addStyleClass("sapUiSmallMarginTop");this.oList=new s(this.getId()+"--idCustNewsFeedList",{mode:"MultiSelect",selectionChange:()=>{void this.saveNewsFeedSettings()}});const d=new r(this.getId()+"--idCustNewsFeedListContainer",{direction:"Column",items:[this.oList,l],width:"96%"}).addStyleClass("sapUiSmallMarginTop sapUiSmallMarginBegin");return d},saveNewsFeedSettings:function e(){try{const e=this;const t=e.oList.getSelectedItems().map(e=>e.getTitle());if(t&&t.length>0){}const s={items:t,showAllPreparationRequired:e.oShowSwitch.getState()};return Promise.resolve(e.getPersonalization()).then(function(t){return Promise.resolve(t.read()).then(function(n){n.favNewsFeed=s;return Promise.resolve(t.write(n)).then(function(){e.oShowSwitch.setState(s.showAllPreparationRequired);return Promise.resolve(e.oNewsPanel.setCustomNewsFeed(e.oNewsPanel.getCustomFeedKey())).then(function(){})})})})}catch(e){return Promise.reject(e)}},setItems:function e(t){this.oList.destroyAggregation("items",true);(t||[]).forEach((e,t)=>{const s=new n(this.getId()+"--idCustNewsFeedItem"+"--"+t,{title:e.title,selected:e.selected});this.oList.addItem(s)})},loadNewsFeedSettings:function e(){try{const e=this;e.oNewsPanel=e._getPanel();return Promise.resolve(e.getPersonalization()).then(function(t){return Promise.resolve(t.read()).then(function(t){const s=t?.["favNewsFeed"];const n=!s?true:s.showAllPreparationRequired;return Promise.resolve(e.oNewsPanel.getCustomNewsFeed(e.oNewsPanel.getCustomFeedKey(),false)).then(function(t){if(t&&t.length>0){e.aFavNewsFeed=s&&s.items||t;t=t.map(t=>{const n=e.aFavNewsFeed.find(e=>e===t.title)?true:false;t.selected=!s?true:n;return t});e.aFavNewsFeed=t;e.setItems(e.aFavNewsFeed);e.oShowSwitch.setState(n);return t}})})})}catch(e){return Promise.reject(e)}}});return N});
//# sourceMappingURL=NewsSettingsPanel.js.map