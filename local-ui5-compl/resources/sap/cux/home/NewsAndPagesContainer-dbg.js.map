{"version":3,"file":"NewsAndPagesContainer-dbg.js","names":["sap","ui","define","__BaseContainer","___utils_Device","_interopRequireDefault","obj","__esModule","default","BaseContainer","DeviceType","NewsAndPagesContainer","extend","metadata","properties","colorPersonalizations","type","group","defaultValue","visibility","iconPersonalizations","newsFeedVisibility","renderer","apiVersion","constructor","_constructor","id","settings","BaseContainer.prototype.constructor.call","this","panelLoaded","init","_init","BaseContainer.prototype.init.call","setProperty","onBeforeRendering","_onBeforeRendering","BaseContainer.prototype.onBeforeRendering.call","aContent","getContent","forEach","oContent","getData","setColorPersonalizations","_setColorPersonalizations","personalizations","existingPers","getProperty","updatedPers","concat","getMetadata","getName","applyColorPersonalizations","setIconPersonalizations","_setIconPersonalizations","applyIconPersonalizations","newsVisibilityChangeHandler","_newsVisibilityChangeHandler","personalization","newsPanel","isNewsFeedVisible","_getPanelContentWrapper","setVisible","newsPersonalization","_newsPersonalization","Boolean","url","newsFeedURL","showCustomNewsFeed","customNewsFeedKey","customNewsFeedFileName","customFeedKey","String","showCustom","setCustomNewsFeed","setURL","panelLoadedFn","_panelLoadedFn","sPanelType","oVal","pagePanel","adjustLayout","adjustStyleLayout","_adjustStyleLayout","bIsNewsTileVisible","sDeviceType","getDeviceType","newsContentWrapper","undefined","pagesContentWrapper","containerWrapper","_getInnerControl","Desktop","LargeDesktop","setWidth","setAlignItems","setDirection","addStyleClass","Tablet","setTimeout","attachResizeHandler","bind","getDomRef","clientWidth","_adjustLayout","getVisible","loaded","removeContent"],"sources":["NewsAndPagesContainer.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport FlexBox from \"sap/m/FlexBox\";\nimport type { MetadataOptions } from \"sap/ui/core/Element\";\nimport BaseContainer, { $BaseContainerSettings } from \"./BaseContainer\";\nimport BasePanel from \"./BasePanel\";\nimport NewsPanel from \"./NewsPanel\";\nimport PagePanel from \"./PagePanel\";\nimport { INewsFeedVisibiliyChange, INewsPersData, ISpacePagePersonalization } from \"./interface/KeyUserInterface\";\nimport { DeviceType } from \"./utils/Device\";\n\ninterface IpanelLoaded {\n\t[key: string]: { loaded: boolean; count: number };\n}\n\n/**\n *\n * Container class for managing and storing News and Pages.\n *\n * @extends sap.cux.home.BaseContainer\n *\n * @author SAP SE\n * @version 0.0.1\n * @since 1.121\n *\n * @internal\n * @experimental Since 1.121\n * @public\n *\n * @alias sap.cux.home.NewsAndPagesContainer\n */\n\nexport default class NewsAndPagesContainer extends BaseContainer {\n\tstatic renderer = {\n\t\t...BaseContainer.renderer,\n\t\tapiVersion: 2\n\t};\n\tstatic readonly metadata: MetadataOptions = {\n\t\tproperties: {\n\t\t\t/**\n\t\t\t * Color Personalizations for Spaces & Pages\n\t\t\t */\n\t\t\tcolorPersonalizations: { type: \"array\", group: \"Misc\", defaultValue: [], visibility: \"hidden\" },\n\t\t\t/**\n\t\t\t * Icon Personalizations for Spaces & Pages\n\t\t\t */\n\t\t\ticonPersonalizations: { type: \"array\", group: \"Misc\", defaultValue: [], visibility: \"hidden\" },\n\t\t\t/**\n\t\t\t * News feed visibility flag\n\t\t\t */\n\t\t\tnewsFeedVisibility: { type: \"boolean\", group: \"Misc\", defaultValue: true, visibility: \"hidden\" }\n\t\t}\n\t};\n\n\tprivate panelLoaded: IpanelLoaded = {};\n\tprivate pagePanel!: PagePanel;\n\tprivate newsPanel!: NewsPanel;\n\n\tconstructor(idOrSettings?: string | $BaseContainerSettings);\n\tconstructor(id?: string, settings?: $BaseContainerSettings);\n\t/**\n\t * Constructor for the new News and Pages container.\n\t *\n\t * @param {string} [id] ID for the new control, generated automatically if an ID is not provided\n\t * @param {object} [settings] Initial settings for the new control\n\t */\n\tpublic constructor(id?: string, settings?: $BaseContainerSettings) {\n\t\tsuper(id, settings);\n\t}\n\n\t/**\n\t * Init lifecycle method\n\t *\n\t * @private\n\t * @override\n\t */\n\tpublic init(): void {\n\t\tsuper.init();\n\n\t\tthis.panelLoaded = {};\n\t\tthis.setProperty(\"layout\", \"Horizontal\");\n\t}\n\n\tpublic onBeforeRendering() {\n\t\tsuper.onBeforeRendering();\n\t\tconst aContent = this.getContent() as PagePanel[];\n\t\taContent.forEach((oContent) => {\n\t\t\tvoid oContent.getData();\n\t\t});\n\t}\n\n\t/**\n\t * Sets property value for colorPersonalization.\n\t * Overridden to update cached personalizations.\n\t *\n\t * @public\n\t * @override\n\t * @returns {NewsAndPagesContainer} the container for chaining\n\t */\n\tsetColorPersonalizations(personalizations: Array<ISpacePagePersonalization>): NewsAndPagesContainer {\n\t\tconst existingPers = (this.getProperty(\"colorPersonalizations\") as ISpacePagePersonalization[]) || [];\n\t\tconst updatedPers = existingPers.concat(personalizations);\n\t\tthis.setProperty(\"colorPersonalizations\", updatedPers);\n\t\tthis.getContent().forEach((oContent) => {\n\t\t\tif (oContent.getMetadata().getName() === \"sap.cux.home.PagePanel\") {\n\t\t\t\t(oContent as PagePanel).applyColorPersonalizations(updatedPers);\n\t\t\t}\n\t\t});\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets property value for iconPersonalization.\n\t * Overridden to update cached personalizations.\n\t *\n\t * @public\n\t * @override\n\t * @returns {NewsAndPagesContainer} the container for chaining\n\t */\n\tsetIconPersonalizations(personalizations: Array<ISpacePagePersonalization>): NewsAndPagesContainer {\n\t\tconst existingPers = (this.getProperty(\"iconPersonalizations\") as ISpacePagePersonalization[]) || [];\n\t\tconst updatedPers = existingPers.concat(personalizations);\n\t\tthis.setProperty(\"iconPersonalizations\", updatedPers);\n\t\tthis.getContent().forEach((oContent) => {\n\t\t\tif (oContent.getMetadata().getName() === \"sap.cux.home.PagePanel\") {\n\t\t\t\t(oContent as PagePanel).applyIconPersonalizations(updatedPers);\n\t\t\t}\n\t\t});\n\t\treturn this;\n\t}\n\n\tpublic newsVisibilityChangeHandler(personalization: INewsFeedVisibiliyChange) {\n\t\tconst aContent = this.getContent();\n\t\taContent.forEach((oContent: BasePanel) => {\n\t\t\tif (oContent.getMetadata().getName() === \"sap.cux.home.NewsPanel\") {\n\t\t\t\tlet newsPanel = oContent as NewsPanel;\n\t\t\t\tif (personalization.isNewsFeedVisible) {\n\t\t\t\t\tthis.setProperty(\"newsFeedVisibility\", true);\n\t\t\t\t\tthis._getPanelContentWrapper(newsPanel).setVisible(true);\n\t\t\t\t} else {\n\t\t\t\t\tthis.setProperty(\"newsFeedVisibility\", false);\n\t\t\t\t\tthis._getPanelContentWrapper(newsPanel).setVisible(false);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic newsPersonalization(personalizations: INewsPersData) {\n\t\tconst aContent = this.getContent();\n\t\taContent.forEach((oContent: BasePanel) => {\n\t\t\tif (oContent.getMetadata().getName() === \"sap.cux.home.NewsPanel\") {\n\t\t\t\tlet newsPanel = oContent as NewsPanel;\n\t\t\t\tconst newsFeedVisibility = Boolean(this.getProperty(\"newsFeedVisibility\"));\n\t\t\t\tconst url = personalizations.newsFeedURL;\n\t\t\t\tnewsPanel.setProperty(\"url\", personalizations.newsFeedURL);\n\t\t\t\tnewsPanel.setProperty(\"showCustom\", personalizations.showCustomNewsFeed);\n\t\t\t\tnewsPanel.setProperty(\"customFeedKey\", personalizations.customNewsFeedKey);\n\t\t\t\tnewsPanel.setProperty(\"customFileName\", personalizations.customNewsFeedFileName);\n\n\t\t\t\tif (newsFeedVisibility) {\n\t\t\t\t\tthis._getPanelContentWrapper(newsPanel).setVisible(true);\n\t\t\t\t\tconst customFeedKey = String(newsPanel.getProperty(\"customFeedKey\"));\n\t\t\t\t\tconst showCustom = Boolean(newsPanel.getProperty(\"showCustom\"));\n\t\t\t\t\tif (showCustom && customFeedKey) {\n\t\t\t\t\t\tnewsPanel.setProperty(\"newsAvailable\", true);\n\t\t\t\t\t\tvoid newsPanel.setCustomNewsFeed(customFeedKey);\n\t\t\t\t\t} else if (!showCustom && url) {\n\t\t\t\t\t\tvoid newsPanel.setURL(url);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._getPanelContentWrapper(newsPanel).setVisible(false);\n\t\t\t\t\t\tthis.setProperty(\"newsFeedVisibility\", false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic panelLoadedFn(sPanelType: string, oVal: { loaded: boolean; count: number }) {\n\t\t// same issue of panelwrapper not available at this time\n\t\tconst aContent = this.getContent();\n\t\taContent.forEach((oContent: BasePanel) => {\n\t\t\tif (oContent.getMetadata().getName() === \"sap.cux.home.PagePanel\") {\n\t\t\t\tthis.pagePanel = oContent as PagePanel;\n\t\t\t} else if (oContent.getMetadata().getName() === \"sap.cux.home.NewsPanel\") {\n\t\t\t\tthis.newsPanel = oContent as NewsPanel;\n\t\t\t}\n\t\t});\n\t\tthis.panelLoaded[sPanelType] = oVal;\n\t\tthis.adjustLayout();\n\t}\n\n\tpublic adjustStyleLayout(bIsNewsTileVisible: boolean) {\n\t\tconst sDeviceType = this.getDeviceType();\n\t\tconst newsContentWrapper = this.newsPanel ? this._getPanelContentWrapper(this.newsPanel) : undefined;\n\t\tconst pagesContentWrapper = this.pagePanel ? this._getPanelContentWrapper(this.pagePanel) : undefined;\n\t\tconst containerWrapper = this._getInnerControl() as FlexBox;\n\t\tif (sDeviceType === DeviceType.Desktop || sDeviceType === DeviceType.LargeDesktop) {\n\t\t\tif (bIsNewsTileVisible) {\n\t\t\t\tpagesContentWrapper?.setWidth(\"50vw\");\n\t\t\t}\n\t\t\tcontainerWrapper.setAlignItems(\"Center\");\n\t\t\tcontainerWrapper.setDirection(\"Row\");\n\t\t\tnewsContentWrapper?.setWidth(\"100%\");\n\t\t\tnewsContentWrapper?.addStyleClass(\"sapMNewsFlex\");\n\t\t} else if (sDeviceType === DeviceType.Tablet) {\n\t\t\tpagesContentWrapper?.setWidth(\"100%\");\n\t\t\tnewsContentWrapper?.setWidth(\"calc(100vw - 64px)\");\n\t\t\tcontainerWrapper.setAlignItems(\"Baseline\");\n\t\t\tcontainerWrapper.setDirection(\"Column\");\n\t\t}\n\n\t\tif (pagesContentWrapper) {\n\t\t\tsetTimeout(\n\t\t\t\tthis.pagePanel.attachResizeHandler.bind(\n\t\t\t\t\tthis.pagePanel,\n\t\t\t\t\tbIsNewsTileVisible,\n\t\t\t\t\tthis.getDomRef()?.clientWidth || 0,\n\t\t\t\t\tpagesContentWrapper,\n\t\t\t\t\tcontainerWrapper\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Adjusts the layout of the all panels in the container.\n\t *\n\t * @private\n\t * @override\n\t */\n\tpublic adjustLayout() {\n\t\tif (this.pagePanel && this.newsPanel && this._getPanelContentWrapper(this.newsPanel).getVisible()) {\n\t\t\tif (this.panelLoaded[\"Page\"]?.loaded && this.panelLoaded[\"News\"]?.loaded) {\n\t\t\t\t// If Both Panels are available wait for both panels are successfully loaded to apply styling\n\t\t\t\tconst bIsNewsTileVisible = true;\n\t\t\t\tthis.adjustStyleLayout(bIsNewsTileVisible);\n\t\t\t} else if (this.panelLoaded[\"News\"]?.loaded === false) {\n\t\t\t\t// In case News Panel fails to load remove the panel and apply styles for page to take full width\n\t\t\t\tconst bIsNewsTileVisible = false;\n\t\t\t\tthis.removeContent(this.newsPanel);\n\t\t\t\tthis.adjustStyleLayout(bIsNewsTileVisible);\n\t\t\t} else if (this.panelLoaded[\"Page\"]?.loaded === false) {\n\t\t\t\tthis.removeContent(this.pagePanel);\n\t\t\t}\n\t\t} else if (this.pagePanel && this.panelLoaded[\"Page\"]?.loaded) {\n\t\t\t// If News Panel is not present apply styles for page to take full width\n\t\t\tconst bIsNewsTileVisible = false;\n\t\t\tthis.adjustStyleLayout(bIsNewsTileVisible);\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}