/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *  * (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
"use strict";sap.ui.define(["sap/f/GridContainer","sap/m/FlexBox","sap/ui/base/Event","sap/ui/core/Element","sap/ui/core/library"],function(e,t,n,o,r){"use strict";const s=function(e,t,r){try{const s=o.closestTo(e.target.firstElementChild);const u=s.getParent();const f=e.metaKey||e.ctrlKey;const l=u.getItems();const p=l.findIndex(e=>document.activeElement===e.getDomRef());d(l.map(e=>e.getDomRef()),p);if(!s||!u||!(t&&["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(e.key))){return Promise.resolve()}e.preventDefault();e.stopPropagation();let g=u.indexOfItem(s);const m=[...l].reverse();switch(e.key){case"ArrowRight":g+=1;break;case"ArrowLeft":g-=1;break;case"ArrowUp":case"ArrowDown":g=c(u,g,e.key);break;case"Home":g=s.data("groupId")?l.findIndex(e=>e.data("groupId")):l.findIndex(e=>!e.data("groupId"));break;case"End":g=l.length-1-(s.data("groupId")?m.findIndex(e=>e.data("groupId")):m.findIndex(e=>!e.data("groupId")));break}const h=g>-1&&g<l.length?l[g]:null;const w=function(){if(s&&h){function t(){a(u,g)}const o=new n("keyboardDragDropEvent",u,{draggedControl:s,droppedControl:h,dropPosition:["ArrowLeft","ArrowUp","Home"].includes(e.key)?i.RelativeDropPosition.Before:i.RelativeDropPosition.After});d(l.map(e=>e.getDomRef()),g);const c=function(){if(r&&f){return Promise.resolve(r(o)).then(function(){})}}();return c&&c.then?c.then(t):t(c)}}();return Promise.resolve(w&&w.then?w.then(function(){}):void 0)}catch(e){return Promise.reject(e)}};const i=r["dnd"];const a=(n,o)=>{let r=null;if(n instanceof e){const e=[];n.$("listUl").children().each(function(t,n){if(n.classList.contains("sapFGridContainerItemWrapper")){e.push(n)}});r=e[o]}else if(n instanceof t){r=n.getItems()[o].getDomRef()}if(r){r.setAttribute("tabindex","0");r.focus()}};const c=(e,t,n)=>{const o=function(e){return e.getBoundingClientRect().x};const r=function(e){return e.getBoundingClientRect().y};let s=t;let i=Number.MAX_SAFE_INTEGER;const a=e.getItems().map(e=>e.getDomRef());a.forEach(function(e,c){const d=Math.sqrt(Math.pow(o(a[t])-o(e),2)+Math.pow(r(a[t])-r(e),2));const u=n==="ArrowDown"&&c>t||n==="ArrowUp"&&c<t;if(u&&d<i&&r(e)!==r(a[t])){i=d;s=c}});return s};const d=(e,t)=>{e.forEach((e,n)=>{e.tabIndex=n===t?0:-1})};var u={__esModule:true};u.attachKeyboardHandler=s;return u});
//# sourceMappingURL=DragDropUtils-dbg.js.map