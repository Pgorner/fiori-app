/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *  * (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
"use strict";sap.ui.define(["./BaseContainer","./CardsPanel","./ErrorPanel","./TilesPanel","./utils/Device"],function(e,t,n,s,i){"use strict";function a(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const l=a(e);const h=t["cardsMenuItems"];const o=a(n);const r=s["tilesMenuItems"];const d=i["DeviceType"];const u="sap.cux.home.TilesPanel";const c="sap.cux.home.CardsPanel";const g="sap.cux.home.ErrorPanel";const f=l.extend("sap.cux.home.InsightsContainer",{renderer:{...l.renderer,apiVersion:2},constructor:function e(t,n){l.prototype.constructor.call(this,t,n);this._visiblePanels=[];this._isInitialRender=true},init:function e(){l.prototype.init.call(this);this.setProperty("layout","Vertical");this.setTooltip(String(this._i18nBundle.getText("insightLayoutSectionTitle")))},onBeforeRendering:function e(){l.prototype.onBeforeRendering.call(this);if(this._isInitialRender){const e=this.getContent();const t=[];e.forEach(e=>{if(!this.tilesPanel&&e.isA(u)){this.tilesPanel=e;t.push(this.tilesPanel)}if(!this.cardsPanel&&e.isA(c)){this.cardsPanel=e;t.push(this.cardsPanel)}});this.handleHidePanel(this.tilesPanel);this.handleHidePanel(this.cardsPanel);t.forEach(e=>{e.handleRemoveActions();e.attachHandleHidePanel(()=>this.handleHidePanel(e));e.attachHandleUnhidePanel(()=>this.unhidePanelIfHidden(e));void e.renderPanel()});this._isInitialRender=false}},handleHidePanel:function e(t){this.removeContent(t);const n=this.getContent()?.length;this._addContainerHeader(this.getContent());if(n===0){if(!this._errorPanel){this._errorPanel=new o(`${this.getId()}-errorPanel`,{messageTitle:this._i18nBundle.getText("noAppsTitle"),messageDescription:this._i18nBundle.getText("noInsightsMsg")});this._errorPanel.getData()}this.addAggregation("content",this._errorPanel)}else if(n===1){const e=this.getContent()[0];if(!e.isA(g)){e?.handleRemoveActions()}}},_addContainerHeader:function e(t){this.setProperty("title",this._i18nBundle?.getText("insights"));this.setProperty("enableSettings",true);const n=[];if(t.length===0||t[0]?.isA(g)){this._visiblePanels=[];n.push(...this._handleNoPanelMenuItems())}else if(t.length===1){if(t[0].isA(u)){this._visiblePanels=[u];this.setProperty("title",`${this._i18nBundle?.getText("insights")} (${this.tilesCount||0})`);n.push(...this._handleTilesPanelMenuItems())}if(t[0].isA(c)){this._visiblePanels=[c];this.setProperty("title",`${this._i18nBundle?.getText("insights")} (${this.cardsCount||0})`);n.push(...this._handleCardsPanelMenuItems())}}const s=(this.getAggregation("menuItems")||[])?.find(e=>e.getId()===`${this.getId()}-settings`);if(s){n.push(s)}this.removeAllAggregation("menuItems");this.removeAllAggregation("actionButtons");this.tilesPanel.actionButtons.forEach(e=>this.addAggregation("actionButtons",e));n.forEach(e=>this.addAggregation("menuItems",e))},_removeContainerHeader:function e(){this.setProperty("title","");this.setProperty("enableSettings",false);this.removeAllAggregation("menuItems");this.removeAllAggregation("actionButtons");this.getContent().forEach(e=>e.handleAddActions())},_handleNoPanelMenuItems:function e(){const t=[];this.tilesPanel.menuItems.forEach(e=>{if(e.getId()!==r.REFRESH.valueOf()){t.push(e)}});const n=this.cardsPanel.getId();this.cardsPanel.menuItems.forEach(e=>{if(e.getId()!==`${n}-${h.REFRESH.valueOf()}`){t.push(e)}});return t},_handleTilesPanelMenuItems:function e(){const t=[];this.tilesPanel.menuItems.forEach(e=>t.push(e));const n=this.cardsPanel.getId();this.cardsPanel.menuItems.forEach(e=>{if(e.getId()!==`${n}-${h.REFRESH.valueOf()}`){t.push(e)}});return t},_handleCardsPanelMenuItems:function e(){const t=[];this.tilesPanel.menuItems.forEach(e=>{if(e.getId()!==r.REFRESH.valueOf()){t.push(e)}});const n=this.cardsPanel.getId();this.cardsPanel.menuItems.forEach(e=>{if(e.getId()===`${n}-${h.REFRESH.valueOf()}`){t.unshift(e)}else{t.push(e)}});return t},updatePanelsItemCount:function e(t,n){if(n===u){this.tilesCount=t}else if(n===c){this.cardsCount=t}if(this.getContent().length===1){this.setProperty("title",`${this._i18nBundle?.getText("insights")} (${t||0})`)}},unhidePanelIfHidden:function e(t){this.removeContent(this._errorPanel);if(t.isA(u)&&!this._visiblePanels.includes(u)){this._visiblePanels.push(u);if(this._visiblePanels.includes(c)){this.removeContent(this.cardsPanel);this.addContent(this.tilesPanel);this.addContent(this.cardsPanel)}else{this.addContent(this.tilesPanel)}const e=this.getContent();if(e.length>1){this._removeContainerHeader()}else{this._addContainerHeader(e)}}if(t.isA(c)&&!this._visiblePanels.includes(c)){this._visiblePanels.push(c);this.addContent(this.cardsPanel);const e=this.getContent();if(e.length===2){this._removeContainerHeader()}else{this._addContainerHeader(e)}}},adjustLayout:function e(){this.toggleActionButtons(this.getDeviceType()!==d.Mobile);this.getContent().forEach(e=>e._adjustLayout?.())}});return f});
//# sourceMappingURL=InsightsContainer-dbg.js.map