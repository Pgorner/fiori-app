<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loio326a77d194fe4243849cc89b15221ec9" class=" section topic"><div class="section-mdeditlink hidden">
				<a class="mdeditlink hidden" href="https://github.com/SAP-docs/sapui5/blob/main/docs/09_Developing_Controls/provide-the-design-time-metadata-for-the-settings-action-326a77d.md">Edit on GitHub</a>
			</div><div class="collapsible-icon sap-icon innerTitle"><h2 class="title ">Provide the Design-Time Metadata for the <cite>Settings</cite> Action</h2></div><div class="fig"><div class="topictitle1 title"><h2 class="title ">Provide the Design-Time Metadata for the <cite>Settings</cite> Action</h2></div><div class="shortdesc">Provide the design-time metadata and the meta functions needed when the <cite>settings</cite> action is performed.</div><section id="section_mlz_vf4_hyb">
			<h2 class="title ">Single Settings Action</h2>
			<p>The module returns an object literal with the following properties:</p>
			<div class="tableWrapper "><div class="fig"><table border="1" id="table_ohc_yf4_hyb" class=" ">
					
					
					
					
					
					<thead>
						<tr>
							<th colspan="1" rowspan="1">
								<p>Property</p>
								<p>(Level 1)</p>
							</th>
							<th colspan="1" rowspan="1">
								<p>Property</p>
								<p>(Level 2)</p>
							</th>
							<th colspan="1" rowspan="1">
								<p>Property</p>
								<p>(Level 3)</p>
							</th>
							<th colspan="1" rowspan="1">
								<p>Property</p>
								<p>(Level 4)</p>
							</th>
							<th colspan="1" rowspan="1">Description</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td colspan="1" rowspan="11"><code>actions: &lt;object&gt;</code> (mandatory)</td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">
								<p>Describes the actions that can be applied to the element.</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="10"><code>"settings": &lt;object&gt; | &lt;function&gt;</code></td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">
								<p>Provides or calculates the design-time metadata specific to the <cite>settings</cite> action for an element as an
									object with the following properties.</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1"><code>isEnabled: &lt;function&gt; | &lt;boolean&gt;</code> (optional)</td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">
								<p>This method influences the enablement of settings in the context menu for a selected element. By default it's
										<code>true</code>. If a selected element under some boundary conditions doesn't have this context menu
									item, it returns <code>false</code>. </p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1"><code>name: &lt;i18n key&gt;|&lt;function&gt;</code> (optional)</td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">
								<p><code>i18n</code> key from library resource bundle or function returning translated text as string. This text
									is used in the context menu entry, otherwise it's called <cite>Settings</cite>.</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1"><code>icon: &lt;string&gt;</code> (optional)</td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">
								<p>This property allows you to define an individual icon for the <cite>Settings</cite> action. The  default icon is:
										<code>sap-icon://key-user-settings</code></p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1"><code>handler: &lt;function&gt;</code> (mandatory) </td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">
								<p>This method handles everything concerning the changes in the settings of a control and returns a promise with an
									object including change-specific data.</p>
								<p>See the next sections for examples and parameters.</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="5"><code>submenu: &lt;object[]&gt; </code></td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">
								<p>Array of submenu entries.</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1"><code>name &lt;string&gt;</code></td>
							<td colspan="1" rowspan="1">
								<p>Name to be shown on the UI.</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1"><code>icon &lt;string&gt;</code> (optional)</td>
							<td colspan="1" rowspan="1">
								<p>Icon to be shown on the UI, default is blank.</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1"><code>enabled &lt;boolean&gt;</code> (optional)</td>
							<td colspan="1" rowspan="1">
								<p>Controls if the button is enabled or not, default is <code>true</code>.</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1"><code>key &lt;string&gt;</code> (optional)</td>
							<td colspan="1" rowspan="1">
								<p>This key will be available in the handler on the custom data of the <code>eventItem</code> object.</p>
							</td>
						</tr>
					</tbody>
				</table></div></div>
		</section><section id="section_htg_jh4_hyb">
			<h2 class="title ">Multiple Settings Actions</h2>
			<p>Each action requires an identifier, a text to be displayed on the context menu and its own handler to execute. The order of the actions
				on the context menu is the same as the order in which they're described in the <code>designtime</code> file.</p>
			<div class="tableWrapper "><div class="fig"><table border="1" id="table_ngn_ph4_hyb" class=" ">
					
					
					
					
					
					
					<thead>
						<tr>
							<th colspan="1" rowspan="1">
								<p>Property</p>
								<p>(Level 1)</p>
							</th>
							<th colspan="1" rowspan="1">
								<p>Property</p>
								<p>(Level 2)</p>
							</th>
							<th colspan="1" rowspan="1">
								<p>Property</p>
								<p>(Level 3)</p>
							</th>
							<th colspan="1" rowspan="1">
								<p>Property</p>
								<p>(Level 4)</p>
							</th>
							<th colspan="1" rowspan="1">
								<p>Property</p>
								<p>(Level 5)</p>
							</th>
							<th colspan="1" rowspan="1">Description</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td colspan="1" rowspan="11"><code>actions:&lt;object&gt;</code> (mandatory)</td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">Describes the actions that can be applied to the element.</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="10"><code>"settings": &lt;object&gt;|&lt;function&gt;</code></td>
							<td colspan="1" rowspan="1"><code>{</code></td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">For multiple actions, return them in a map object. Entries are shown in this order in the context menu. </td>
						</tr>
						<tr>
							<td colspan="1" rowspan="8">
							</td><td colspan="1" rowspan="1"><code>"&lt;key&gt;": &lt;object&gt;</code></td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">Describes the settings action called <code>&lt;key&gt;</code></td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1"><code>{</code></td>
							<td colspan="1" rowspan="1">
							</td><td colspan="1" rowspan="1">
						</td></tr>
						<tr>
							<td colspan="1" rowspan="4">
							</td><td colspan="1" rowspan="1"><code>name: &lt;i18n key&gt;|&lt;function&gt;</code> (mandatory)</td>
							<td colspan="1" rowspan="1">The text for context menu entries is mandatory for multiple settings actions to distinguish the different
								entries.</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1"><code>isEnabled: &lt;function&gt;</code> (optional) </td>
							<td colspan="1" rowspan="1">
								<p>This method influences the enablement of settings in the context menu for a selected element. By default it's
										<code>true</code>. If a selected element under some boundary conditions doesn't have this context menu
									item, it returns <code>false</code>. </p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1"><code>icon: &lt;string&gt;</code> (optional)</td>
							<td colspan="1" rowspan="1">
								<p>This property allows you to define an individual icon for the <cite>Settings</cite> action. The  default icon is:
										<code>sap-icon://key-user-settings</code></p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1"><code>handler: &lt;function&gt;</code> (mandatory) </td>
							<td colspan="1" rowspan="1">
								<p>This method handles everything concerning the changes in the settings of a control and returns a promise with an
									object including change-specific data.</p>
								<p>See the next sections for examples and parameters.</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1"><code>},</code></td>
							<td colspan="1" rowspan="1">
							</td><td colspan="1" rowspan="1">
						</td></tr>
						<tr>
							<td colspan="1" rowspan="1"><code>&lt;other action&gt;</code></td>
							<td colspan="1" rowspan="1">
								<p>-&gt;</p>
							</td>
							<td colspan="1" rowspan="1">See previous rows. Other actions follow the same schema and have the same properties / functions.</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1"><code>};</code></td>
							<td colspan="1" rowspan="1">
							</td><td colspan="1" rowspan="1">
							</td><td colspan="1" rowspan="1">
						</td></tr>
					</tbody>
				</table></div></div>
		</section><section id="section_zsg_s34_hyb">
			<h2 class="title ">Handler Function</h2>
			<p>We call the handler function with two parameters: <code>oElement</code> and <code>mPropertyBag</code>. Use the following
				methods:</p>
			<ul class="ul ">
				<li class="li">
					<p><code>mPropertyBag.getUnsavedChanges</code>: Function that returns an array of unsaved changes.</p>
				</li>
				<li class="li">
					<p><code>mPropertyBag.styleClass</code>: Contains the name of the CSS class that every dialog/popup from SAPUI5 flexibility (including the settings-dialog) needs to have. Add
						this style class to the control if you build a dialog or popup.</p>
				</li>
			</ul>
			<p>Here's an example with one action: </p>
			<div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p><code>&lt;control&gt;.designtime.js</code></p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">sap.ui.define(['&lt;your namespace&gt;/YourControl'], function(YourControl) {
    "use strict";
    return {
        actions: {
            settings: {
                handler: function(oYourControl, mPropertyBag) {
                    return new Promise(function(resolve) {
                        // For example, open a dialog to handle the settings
                        YourControl.createDialog().addClass(mPropertyBag.styleClass) // Please attach the RTA style so that users will recognize your dialog belongs to key user adaptation and not the app
                        // Handle dialog close and resolve promise with data to create the corresponding changes:
                        resolve([{
                            selectorControl: oYourControl,
                            changeSpecificData: {
                                changeType: "yourChangeType",
                                content: "changeSpecificContent" // Can also be a deep object, your change handler has to handle it
                            }
                        },{
                            selectorControl: { // If control doesn't exist at the moment you can return the following data
                                id: "idOfNotYetExistingControl",
                                controlType: "sap.ui.XXX.YourControlType", // Needed to retrieve the change handler
                                appComponent: oAppComponent  // You can use sap.ui.fl.Utils.getAppComponentForControl(oYourControl) for it
                            },
                            changeSpecificData: {
                                changeType: "yourChangeType",
                                content: "changeSpecificContent" // Can also be a deep object, your change handler has to handle it
                            }
                        }]);
                    });
                }
            };
        }
    }
});</pre></div></div></section><p></p></div></div>
			<p>Here's an example with more actions: </p>
			<div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p><code>&lt;control&gt;.designtime.js</code></p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">sap.ui.define([], function() {
    "use strict";
    return {
        actions: {
            settings: {
                action1: { // This action will be always enabled and its context menu text (name) will be retrieved from i18n
                    name: "ACTION1_i18n_KEY",
                    handler: function(oControl, mPropertyBag) {
                        return ActionExecuter.execute(oControl, mPropertyBag);
                    }
                },
                action2: { // This action's context menu text (name) is retrieved by a function, and the enabled check is also a function
                    name: function() {
                        return "Execute Action 2"; // This is just an example! Remember to use translatable strings.
                    },
                    isEnabled: function(oControl) {
                        return checkEnabled(oControl);
                    },
                    handler: function(oControl, mPropertyBag) {
                        // You can, for example, build the changes inline; but it is recommended to implement a handler to keep the designtime.js file clean
                        return new Promise(function(resolve) {
                            resolve([{
                                selectorControl: oControl,
                                changeSpecificData: {
                                    changeType: "myChangeType",
                                    content: "changeSpecificContent"
                                }
                            }]);
                        });
                    }
                }
            }
        }
    };
});</pre></div></div></section><p></p></div></div>
		</section><section id="section_kxw_nys_hyb">
			<h2 class="title ">Creating Manifest Changes Using Settings</h2>
			<p>In addition to the usual SAPUI5
				flexibility changes, the <cite>Settings</cite> action can also create changes that
				modify the <code>manifest.json</code> file.</p>
			<p>Manifest changes are used, for example, on an Overview Page (OVP), where adding a card
				modifies the manifest. </p>
			<p>In most cases, the change must also be visible when the user creates it. For example, when
				users click on <cite>Add Card</cite>, they want to see the new card on the screen.
				For this reason, in the usual case, a flexibility change is created in parallel with
				the manifest change, as shown in this diagram: </p>
			<div><div class="fig"><img src="loiob1c32cb2366c4d5195ab2fdc4f5437bd_LowRes.png" title="The Handler calls the Settuings Plugin with an array of mChangeContent,
						which contains the change types and all data required for each change. The
						Settings Plugin then creates a Settings Command and an AppDescritor Command.
						The Settings Command creates and executes the Flex Change on the UI and
						applies the change. The actual action execution requires a change handler.
						The AppDescriptor Command creates and executes an AppDescriptor Change and
						persists it. The manifest (app descriptor) change is saved in the layered
						repository (LREP) to include the new card when the app is loaded. " alt="The Handler calls the Settuings Plugin with an array of mChangeContent,
						which contains the change types and all data required for each change. The
						Settings Plugin then creates a Settings Command and an AppDescritor Command.
						The Settings Command creates and executes the Flex Change on the UI and
						applies the change. The actual action execution requires a change handler.
						The AppDescriptor Command creates and executes an AppDescriptor Change and
						persists it. The manifest (app descriptor) change is saved in the layered
						repository (LREP) to include the new card when the app is loaded. " usemap="#"></div></div>
			<p>If the flexibility change is only relevant during the execution of SAPUI5 flexibility (because
				the "real" change is saved on the manifest), it needs to have parameter
					<code>runtimeOnly: true</code>. If you set this parameter, the change is not
				persisted.</p>
			<p>On the other hand, a change that has the manifest as the target needs the
					<code>appDescriptorChangeType</code> parameter instead of
					<code>changeType</code>. Here's an example:</p>
			<div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>&lt;control&gt;.designtime.js</p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">actions: {
    settings: {
        handler: function(oSelectedElement, mPropertyBag) {
            return openAddCardDialog(oSelectedElement, mPropertyBag.styleClass).then(function(mChangeContent)) {
                return [
                    {
                        // appDescriptorChange does not need a selector control
                        appComponent: oSelectedElement.getAppComponent(), // example
                        changeSpecificData: {
                            appDescriptorChangeType: "appdescr_ovp_addNewCard",
                            content: {
                                parameters: mChangeContent.parameters,
                                texts: mChangeContent.texts
                            }
                        }
                    },
                    {
                        selectorControl: oSelectedElement,
                        changeSpecificData: {
                            runtimeOnly: true, // UI change would be used only at runtime to modify the app; it will not be persisted
                            changeType: "addCard",
                            content: toUIChange(mChangeContent) // Allows for different parameters in runtime or manifest change
                        }
                    }
                ])
            });
        }
    }
}</pre></div></div></section><p></p></div></div>
			<p>This example is for a single action created with <cite>Settings</cite>, but there are no
				restrictions that prevent implementing multiple actions in <cite>Settings</cite>,
				which can create manifest changes as well. </p>
		</section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink"><br><strong>Parent topic: </strong><a href="topic/5483068f017049339e6a9e25f89f7074">Enabling the Settings Action</a></div><div class="previousLink hidden"><br><strong>Previous: </strong></div><div class="nextLink"><br><strong>Next: </strong><a href="topic/3f606dff02074eabaae9816c69662f6d">Register a Settings Change Handler</a></div></section><section class="hidden relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig"></ul></section></div></section></div></body></html>