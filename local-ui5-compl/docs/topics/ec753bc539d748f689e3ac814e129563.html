<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loioec753bc539d748f689e3ac814e129563" class=" section topic"><div class="section-mdeditlink hidden">
				<a class="mdeditlink hidden" href="https://github.com/SAP-docs/sapui5/blob/main/docs/04_Essentials/supported-locales-and-fallback-chain-ec753bc.md">Edit on GitHub</a>
			</div><div class="collapsible-icon sap-icon innerTitle"><h2 class="title ">Supported Locales and Fallback Chain</h2></div><div class="fig"><div class="topictitle1 title"><h2 class="title ">Supported Locales and Fallback Chain</h2></div><div class="shortdesc">You can configure a list of supported locales and a fallback locale in your app's manifest to control the loading of resource bundles and
		avoid '404 Not Found' network responses. </div><div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
			</p><ol>
				<li class="li">
					<p><a href="https://sap.github.io/ui5-tooling/stable/" title="https://sap.github.io/ui5-tooling/stable/" class="external-link" target="_blank" rel="noopener">UI5 Tooling</a> v4 and higher is capable of automatically adding
						supported locales to the manifest based on the available properties files. Detailed information and requirements can be found
						in <a href="https://sap.github.io/ui5-tooling/stable/pages/Builder/#generation-of-supported-locales" title="https://sap.github.io/ui5-tooling/stable/pages/Builder/#generation-of-supported-locales" class="external-link" target="_blank" rel="noopener">UI5 Builder - Generation of Supported Locales</a>.</p>
				</li>
				<li class="li">
					<p>Available properties files for a resource bundle and the locales you specify in <code>supportedLocales</code> need to be in sync. Missing
						properties files result in 404 responses by the server.</p>
				</li>
				<li class="li">
					<p>More severely, a missing entry in <code>supportedLocales</code> leads to a language fallback, even if the texts for the corresponding
						language are available.</p>
				</li>
				<li class="li">
					<p>Only use the <code>supportedLocales</code> feature if you are in control of maintaining the properties files for resource bundles within
						the same project or know the full list of supported locales. If the complete list of supported locales is not known, make sure
						to set the <code>supportedLocales</code> entry in the manifest to an empty list (<code>[]</code>) to indicate that all
						locales are supported. This prevents UI5 Tooling from adding a list
						of supported locales based on the available properties files. For more information, see <a href="https://sap.github.io/ui5-tooling/stable/pages/Builder/#generation-of-supported-locales" title="https://sap.github.io/ui5-tooling/stable/pages/Builder/#generation-of-supported-locales" class="external-link" target="_blank" rel="noopener">UI5
							Builder - Generation of Supported Locales</a>.</p>
				</li>
				<li class="li">The language tags can use modern or legacy ISO639 language codes. Whatever language code is used in the list of
						<code>supportedLocales</code> will also be used when requesting a file from the server. If the locale contains a legacy
					language code like "iw" and the <code>supportedLocales</code> contains [...,"he",...], "he" will be used in the URL. This
					mapping works in both directions.</li>
			</ol>
		<p></p></div></div><section id="section_xqx_s3f_wqb">
			<h2 class="title ">Introduction</h2>
			<p>When developing apps and working with resource bundles for internationalization (i18n), you might run into the following problems:</p>
			<ul class="ul ">
				<li class="li">'404 Not Found' responses in the network trace, for example for a request to <code>myapp/i18n_de_DE.properties</code> when the
					client's locale is <code>"de_DE"</code>, because there is no translation file for this locale.</li>
				<li class="li">Resource bundle requests for language <code>"en"</code>, such as for e.g. <code>myapp/i18n_en.properties</code>, although
					the client's locale is not set to English.</li>
			</ul>
			<p>These issues occur most often when a text translated for the user's locale cannot be found in the resource bundle. The resource bundle then
				tries to load all potential locale-specific translation files using synchronous requests. This not only looks bad when checking the
				network trace but also comes at a price of poor performance and unwanted network traffic. Since SAPUI5 1.77 you can avoid this by providing the
					<code>supportedLocales</code> and <code>fallbackLocale</code> configuration in your app's manifest. This enables the
				client to know in advance which language bundles to request.</p>
		</section><section id="section_FallbackChain">
			<h2 class="title ">Fallback Chain and Fallback Locale</h2>
			<div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
				</p><p>A locale can be either a BCP47 language tag or a JDK-compatible locale string (e.g. <code>"en-GB"</code>, <code>"en_GB"</code>, or
						<code>"en"</code>).</p>
			<p></p></div></div>
			<p>A fallback chain determines the locale-specific resource bundle file to load. It is used for loading resource bundles initially, and when a
				translation key cannot be found in the already loaded resource bundle.</p>
			<p>Part of this fallback chain is your configured <code>fallbackLocale</code>, which defaults to <code>"en"</code>.</p>
			<p>The fallback chain produces locale candidates according to the following directives:</p>
			<ol>
				<li class="li">
					<p>Determine the input language, for example <code>"de_DE"</code>. For more information, see <a href="topic/91f21f176f4d1014b6dd926db0e91070" title="For the identification of languages, the framework uses a language code of type string." class="sap-doc">Identifying the Language Code / Locale</a>.</p>
				</li>
				<li class="li">
					<p>Remove the region suffix from the locale code, e.g. <code>"de_DE"</code> -&gt; <code>"de"</code>.</p>
				</li>
				<li class="li">
					<p>Use your configured <code>fallbackLocale</code>, e.g. <code>"en"</code> (defaults to <code>"en"</code>).</p>
				</li>
				<li class="li">
					<p>Use the raw bundle, that is <code>""</code>.</p>
				</li>
			</ol>
			<p>Each directive produces a locale candidate, which is then used to create a request. For example, <code>"de_DE"</code> is used to create a
				request for a <code>i18n/i18n_de_DE.properties</code> file.</p>
			<p> The directives are executed in order until a resource bundle is loaded (successful request). The raw bundle <code>""</code> means
				that no locale is appended to the requested file. For example, it may be called <code>i18n/i18n.properties</code>.</p>
			<p><span class="emphasis">Sample fallback
				chain:</span></p><section class="lang-html"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">input locale: "de_DE"
fallbackLocale: "en"

fallback chain: "de_DE" -&gt; "de" -&gt; "en" -&gt; ""</pre></div></div></section><p></p>
			<div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
				</p><p>To skip the default fallback locale, you can configure the empty string <code>""</code> as your <code>fallbackLocale</code>.</p>
				<p>If specified, the <code>fallbackLocale</code> must be present in your list of <code>supportedLocales</code> (see next section).</p>
			<p></p></div></div>
		</section><section id="section_SupportedLocales">
			<h2 class="title ">Supported Locales</h2>
			<p>Locale candidates obtained from the fallback chain are filtered using your entries in <code>supportedLocales</code>. In this way, only
				resource bundles for configured locales are requested. If this list is empty or not specified, <span class="emphasis">all</span> locales are
				supported.</p>
			<p><span class="emphasis">Sample:</span></p><section class="lang-html"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">input locale: "de_DE"
fallbackLocale: "en"

fallback chain: "de_DE" -&gt; "de" -&gt; "en" -&gt; ""

supportedLocales: ["de", "fr", "en"]</pre></div></div></section><p></p>
			<p>For the given input locale and fallback chain only bundle files for <code>"de"</code> and <code>"en"</code> are requested at most,
				because the list of <code>supportedLocales</code> contains them. <code>"fr"</code> is not part of the fallback chain, so
				although supported, it won't be requested. If the requested text can be found in <code>"de"</code>, then <code>"en"</code>
				will not be requested.</p>
			<p>As of manifest version <code>1.21.0</code> the <code>sap.app/i18n</code> section can hold an object containing
					<code>bundleUrl</code>, <code>supportedLocales</code> and <code>fallbackLocale</code>. This corresponds to the
					<code>ResourceModel</code> configuration.</p>
			<p><span class="emphasis">Sample configuration in the manifest.json:</span></p>
			<section class="lang-json"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">{
	"_version": "1.21.0",
	"sap.app": {
		"id": "sap.ui.demo.todo",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": ["en", "de"],
			"fallbackLocale": "en"
		},
		"title": "{{appTitle}}",
		...
	},
	"sap.ui5": {
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleUrl": "i18n/i18n.properties",
					"supportedLocales": ["en", "de"],
					"fallbackLocale": "en"
				}
			}
		},
		...	
	}
}</pre></div></div></section>
			<p>What is loaded with this configuration:</p>
			<ul class="ul ">
				<li class="li">input locale <code>"de_DE"</code> will load <code>i18n_de.properties</code></li>
				<li class="li">input locale <code>"en_US"</code> will load <code>i18n_en.properties</code></li>
				<li class="li">input locale <code>"fr_FR"</code> will load <code>i18n_en.properties</code></li>
			</ul>
			<p>In this sample the locales <code>"de"</code> and <code>"en"</code> are supported. This means that you must provide the following two
				resource bundle files:</p>
			<ul class="ul ">
				<li class="li">
					<p><code>myapp/i18n/i18n_de.properties</code></p>
				</li>
				<li class="li">
					<p><code>myapp/i18n/i18n_en.properties</code></p>
				</li>
			</ul>
		</section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink hidden"><br><strong>Parent topic: </strong></div><div class="previousLink hidden"><br><strong>Previous: </strong></div><div class="nextLink hidden"><br><strong>Next: </strong></div></section><section class="hidden relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig"></ul></section></div></section></div></body></html>