<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loiob54f7895b7594c61a83fa7257fa9d13f" class=" section topic"><div class="section-mdeditlink hidden">
				<a class="mdeditlink hidden" href="https://github.com/SAP-docs/sapui5/blob/main/docs/04_Essentials/odata-operations-b54f789.md">Edit on GitHub</a>
			</div><div class="collapsible-icon sap-icon innerTitle"><h2 class="title ">OData Operations</h2></div><div class="fig"><div class="topictitle1 title"><h2 class="title ">OData Operations</h2></div><div class="shortdesc">The OData V4 model supports OData operations (<code>ActionImport</code>,
			<code>FunctionImport</code>, bound <code>Actions</code> and bound
			<code>Functions</code>). Unbound parameters are limited to primitive
		values.</div><section>
			<h2 class="title ">Simple Function Bindings</h2>
			<p>You gain access to a <code>FunctionImport</code> by binding it to a view element.
				If there are no parameters and there is no need to control the point in time when
				the function is called, you can simply bind the OData path like this:
				</p><section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;Text text="{path: '/GetNumberOfAvailableItems()', type: 'sap.ui.model.odata.type.Int16'}"/&gt;</pre></div></div></section>This
				binding path represents the function's return value. The model calls the function
				immediately when a control requests this value.<p></p>
			<p>The type must be specified if the return value is a primitive type.</p>
		</section><section>
			<h2 class="title ">Deferred Operation Bindings</h2>
			<p>Often it is not feasible for the operation to be called immediately, for example if
				there are parameters that the user has to enter first. In such cases, use an
				ODataContextBinding as element binding at a layout element in the view, for example
				a <code>&lt;Form&gt;</code> or a <code>&lt;VBox&gt;</code>
				(see the
						<a href="api/sap.ui.model.odata.v4.ODataContextBinding" title="api/sap.ui.model.odata.v4.ODataContextBinding" class="sap-doc" alt="api/sap.ui.model.odata.v4.ODataContextBinding">ODataContextBinding</a> API documentation
					in the Demo Kit). Mark the operation as <span class="emphasis">deferred</span> by inserting an
				ellipsis ("...") in the brackets, for example
					<code>GetNextAvailableItem(...)</code>. Access the return value from child
				elements using relative bindings. When used like this, the context binding is called
				an <span class="emphasis">operation binding</span> or more specifically, a <span class="emphasis">function
					binding</span> or <span class="emphasis">action binding</span> depending on the type
				of OData operation it is used for.</p>
			<p>If the operation binding defers operation invocation, you need to call its <code>invoke</code> method to invoke the operation. See below for
				an example.</p>
			<p><span class="emphasis">View:</span></p>
			<section class="lang-xml"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;Form id="getNextAvailableItem" binding="{/GetNextAvailableItem(...)}"&gt;
    &lt;Label text="Description"/&gt;
    &lt;Text text="{Description}"/&gt;
    &lt;Button text="Call the function" press="onGetNextAvailableItem"/&gt;
&lt;/Form&gt;</pre></div></div></section>
			<p><span class="emphasis">Controller:</span></p>
			<section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">onGetNextAvailableItem : function (oEvent) {
    this.getView().byId("getNextAvailableItem").getObjectBinding().invoke();
}</pre></div></div></section>
			<p>In the above example, the form (which has an ID that we need later) is bound to the
				context of the operation binding. The text field showing a property of the result is
				a child of this form. It has a relative binding to the property
					<code>"Description"</code>. </p>
			<p>If the function returns a primitive value or a collection, the binding for the result
				must be <code>"{value}"</code> as shown in the two examples below:</p>
			<p><span class="emphasis">View:</span></p>
			<section class="lang-xml"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;Form id="getNumberOfAvailableItems" binding="{/GetNumberOfAvailableItems(...)}"&gt;
    &lt;Label text="Number of available items:"/&gt;
    &lt;Text text="{value}"/&gt;
    &lt;Button text="Call the function" press="onGetNumberOfAvailableItems"/&gt;
&lt;/Form&gt;</pre></div></div></section>
			<section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;VBox id="getAvailableItems" binding="{path : '/GetAvailableItems(...)', parameters : {$select : ['ProductName', 'ProductId']}}"&gt;
    &lt;List id="xyz" items="{value}"&gt;
        &lt;items&gt;
            &lt;ObjectListItem title="{ProductName}" /&gt;
        &lt;/items&gt;
    &lt;/List&gt;
&lt;/VBox&gt;</pre></div></div></section>
			<p><code>invoke</code> returns a promise which is resolved if the operation was successful and rejected with an error if this was not the case.
				Note that the promise is <span class="emphasis">not</span> fulfilled with the action's result: Use dependent bindings to access the result. </p>
			<p><code>refresh</code> is silently ignored on a deferred function binding as long as it has not yet been invoked. Afterwards, a
					<code>refresh</code> calls the function again.</p>
		</section><section>
			<h2 class="title ">Action Bindings</h2>
			<p>Action bindings must be deferred, otherwise the application cannot control when the action is invoked. A deferred action binding is declared
				exactly like a deferred function binding: </p>
			<p><span class="emphasis">View:</span></p>
			<section class="lang-xml"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;Form id="Submit" binding="{/Submit(...)}"&gt;
    &lt;Button text="Submit the action" press="onSubmit"/&gt;
&lt;/Form&gt;</pre></div></div></section>
			<p>You append "(...)" even though the action's resource URL does not contain them. However, they are needed to mark the binding as deferred. In
					<code>invoke</code>, the binding uses the metadata to distinguish between action and function and to build the correct
				operation resource path.</p>
			<p><code>refresh</code> is always silently ignored on a deferred action binding to prevent the action from being invoked accidentally (for
				example by calling the <code>refresh</code> method on the ODataModel instance <code>oModel.refresh()</code>).</p>
		</section><section>
			<h2 class="title ">Operation Parameters</h2>
			<p>You can use the parameters of a deferred operation binding inside an XML view.</p>
			<p>The parameters are addressed by the path prefix "$Parameter". This can either be done
				by binding each control property via the path prefix "$Parameter" (Option 1) or by
				having an outer binding with a "$Parameter" path (Option 2).</p>
			<div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
				</p><p>The path "$Parameter" must not be added directly to the path of a deferred
					operation binding. A deferred operation binding is identified by an ellipsis at
					the end of the path.</p>
			<p></p></div></div>
			<p>This is how to bind each property without a "$Parameter" context: </p>
			<p><span class="emphasis">View:</span></p>
			<div class="note other example "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Example
				</strong></div></div><div class="fig"><p>Binding parameters to a dialog (Option
				1)</p><section class="lang-xml"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;Dialog binding="{/ChangeTeamBudgetByID(...)}" id="operation1" title ="Change Team Budget"&gt;
    &lt;buttons&gt;
        ...         
    &lt;/buttons&gt;
    &lt;form:SimpleForm&gt;
        &lt;Label text="TeamID" /&gt;
        &lt;Input value="{$Parameter/TeamID}" /&gt;
        &lt;Label text="Budget" /&gt;
        &lt;Input value="{$Parameter/Budget}" /&gt;
    &lt;/form:SimpleForm&gt;
&lt;/Dialog&gt;</pre></div></div></section><p></p></div></div>
			<p>Alternatively, you may bind the entire form to the <code>$Parameter</code>
				context:</p>
			<p><span class="emphasis">View:</span></p>
			<div class="note other example "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Example
				</strong></div></div><div class="fig"><p>Binding parameters to a dialog (Option
				2)</p><section class="lang-xml"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;Dialog binding="{/ChangeTeamBudgetByID(...)}" id="operation2" title="Change Team Budget"&gt;
    &lt;buttons&gt;
        ...         
    &lt;/buttons&gt;
    &lt;form:SimpleForm binding="{$Parameter}"&gt;
        &lt;Label text="TeamID" /&gt;
        &lt;Input value="{TeamID}" /&gt;
        &lt;Label text="Budget" /&gt;
        &lt;Input value="{Budget}" /&gt;
    &lt;/form:SimpleForm&gt;
&lt;/Dialog&gt;</pre></div></div></section><p></p></div></div>
			<p>In either case, the values of the parameters are set using the context binding of the
				control, with no need to write any application code.</p>
			<p>Alternatively, operation parameters can be set by calling the function
					<code>setParameter</code> on the operation binding, as shown in this
				example:</p>
			<p><span class="emphasis">Controller:</span></p>
			<section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">onSubmit : function (oEvent) {
    this.getView().byId("Submit").getObjectBinding().setParameter("Comment", sComment).invoke();
}</pre></div></div></section>
			<p>The API method <code>getParameterContext</code> can be used to access parameters
				in controller code, see also <a href="topic/17b30ac2d5474078be31e695e97450cc" title="In the OData V4 model, bindings are used to access and modify back-end data also if the data is accessed or modified in controller code." class="sap-doc">Accessing Data in Controller Code</a></p>
			<p>The example below demonstrates how a budget may be modified depending on the
					<code>TeamID</code>:</p>
			<p><span class="emphasis">Controller:</span></p>
			<div class="note other example "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Example
				</strong></div></div><div class="fig"><p>Reading parameter values using the parameter
				context</p><section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">adaptBudgetToTeam : function (){
    var oDialog = this.oView.byId("operation2"); // the second dialog in the paragraph before
        oParameterContext = oDialog.getObjectBinding().getParameterContext();
 
 
    if (oParameterContext.getProperty("TeamID") === "STARTUP") {
        oParameterContext.setProperty("Budget", 555.55);
    else {
        oParameterContext.setProperty("Budget", 123.45);
    }
}</pre></div></div></section><p></p></div></div>
			<div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
				</p><p>The parameter context is only defined if the operation binding is resolved.</p>
			<p></p></div></div>
		</section><section id="section_BAAF"><h2 class="title ">Bound Actions and Functions</h2><p>So far, the examples
				always used operations at root level, addressed via an action import or function
				import. However, it is also possible to bind an action or a function to another
				resource of the service. This can be an entity or a collection of
				entities.</p><p>Bound actions or functions are controlled in the same way as unbound
				operations; append <code>(...)</code> to the binding path for the control's
				property. </p><p>To call actions or functions bound to a single entity or navigation
				property, use a relative binding. The following sample calls the "invoice created"
				action on the sales order selected in the corresponding
				table:</p><section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">var oModel = this.getView().getModel(),
    oTable = this.getView().byId("SalesOrders"),
    oSalesOrderContext = oTable.getSelectedItem().getBindingContext(),
    oAction = oModel.bindContext("name.space.InvoiceCreated(...)", oSalesOrderContext);
 
oAction.invoke().then(
    function () {
        MessageToast.show("Invoice created for sales order " + oSalesOrderContext.getProperty("SalesOrderID"));
    },
    function (oError) {
        MessageBox.alert(oError.message, {
            icon : MessageBox.Icon.ERROR,
            title : "Error"});
        });
    }
);</pre></div></div></section><p>To
				call actions or functions bound to a collection specified by an OData entity set,
				you can create a context binding with an absolute path, or with a relative path for
				the operation (for example <code>name.space.DestroyOutdated(...)"</code>) and
				the header context of a list binding as parent context. The following sample shows a
				button press event handler which calls the <code>destroy outdated</code> action
				on the <code>LeaveRequests</code> entity
				set.</p><section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">var oModel = this.getView().getModel();
 
oModel.bindContext("/LeaveRequests/name.space.DestroyOutdated(...)").invoke();</pre></div></div></section><p>The
				same example with a relative binding and the header context of the list binding as
				parent context:</p><section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">var oModel = this.getView().getModel(),
    // assume there is a table with ID "leaveRequests" and its items aggregation bound to "/LeaveRequests"
    oListBinding = this.byId("leaveRequests").getBinding("items"),
    oHeaderContext = oListBinding.getHeaderContext();

oModel.bindContext("name.space.DestroyOutdated(...)", oHeaderContext).invoke(); </pre></div></div></section><div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
				</p><ul class="ul ">
					<li class="li">
						<p>The path of an operation binding may also start with a navigation
							property.</p>
						<p>Example: The operation binding has a relative path <code>BP_2_PRODUCT/name.space.Change(...)</code>. You set its binding context from the
							selected item in a table bound to <code>/BusinessPartners</code>. When you call <code>invoke</code> on the
							operation binding, the "change" action is invoked with the selected business partner's navigation property
								<code>BP_2_PRODUCT</code> as binding parameter.</p>
					</li>
					<li class="li">
						<p>The parent binding of a deferred operation must not be a deferred
							operation itself.</p>
					</li>
					<li class="li">
						<p>When invoking a bound action, you can use the <code>bIgnoreETag</code> argument of 
								<a href="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke" title="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke" class="sap-doc" alt="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke"><code>ODataContextBinding#invoke</code></a> to actively ignore the
							ETag match that normally happens (technically, the header <span class="ph uicontrol">"If-Match : *"</span> will be used). This is
							useful if a second bound action for the same entity is to be invoked within the same batch (especially if it is in a
							different change set). An example would be "prepare" and "activate" for draft handling. Without this, the second bound
							action would be rejected, because the client sent the initial ETag via the <span class="ph uicontrol">"If-Match"</span> header, but
							the first bound action changes that ETag on the server before the second one is invoked.</p>
					</li>
				</ul>
			<p></p></div></div><section>
				<h3 class="title ">Addressing properties of an entity via an operation's binding
					parameter</h3>
				<p>For operations bound to an entity, it is possible to address properties of the
					entity through the operation's binding parameter.</p>
				<p>For example, let <code>CreateInvoice</code> be a bound action on the
						<code>SalesOrder</code> entity type with the binding parameter
						<code>_it</code>. Properties of the current sales order can be addressed
					with a property binding having a path that starts with the binding parameter
					name <code>_it</code>.</p>
				<div class="note other example "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Example
				</strong></div></div><div class="fig"><p>Addressing properties of the binding
					parameter</p><section class="lang-xml"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;Dialog binding="{name.space.CreateInvoice(...)}" id="operation" title="Address Note property of the sales order"&gt;
    &lt;form:SimpleForm binding="{$Parameter}"&gt;
        &lt;Label text="Note" /&gt;
        &lt;Input value="{_it/Note}" /&gt;
    &lt;/form:SimpleForm&gt;
&lt;/Dialog&gt;</pre></div></div></section><p></p></div></div>
			</section></section><section id="section_SH">
			<h2 class="title ">Strict Handling</h2>
			<p>In some cases an action should not be performed in case warnings are present, unless
				the user explicitly confirms the action. To this end, the HTTP request header
					<code>Prefer:handling=strict</code> is used to request the server to handle
				warnings like errors. In the case of an action, this means that the request will
				only be successful if there are no warnings. In case the request fails, the user is
				prompted to decide whether the action is aborted, allowing the user to fix the
				warnings, or continued by ignoring the warnings.</p>
			<p>The strict handling is requested by the client with the HTTP request header
					<code>Prefer:handling=strict</code>. The server replies with HTTP status
				code <code>412 Precondition Failed</code> and the response header
					<code>Preference-Applied:handling=strict</code> if the request fails because
				the preference was applied.</p>
			<p>To request this behavior, you have to provide <code>fnOnStrictHandlingFailed</code> as a callback function when invoking 
					<a href="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke" title="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke" class="sap-doc" alt="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke"><code>sap.ui.model.odata.v4.ODataContextBinding#invoke</code></a>
				. This
				callback is called if the action is rejected with HTTP status code <code>412 Precondition Failed</code> and the response header
					<code>Preference-Applied:handling=strict</code>. All relevant messages of the OData error are passed to the callback as an
				array of 
					<a href="api/sap.ui.core.message.Message" title="api/sap.ui.core.message.Message" class="sap-doc" alt="api/sap.ui.core.message.Message"><code>sap.ui.core.message.Message</code></a>
				. These messages are not reported
				to the message model. The callback may be used to visualize the messages and has to return a <code>Promise</code> resolving with a
					<code>boolean</code> value. If this <code>Promise</code> resolves with <code>true</code>, the bound action is
				repeated, now without requesting <code>Prefer:handling=strict</code>. Otherwise, the <code>Promise</code> returned by
					<code>sap.ui.model.odata.v4.ODataContextBinding#invoke</code> will be canceled.</p>
			<p>It is possible to include multiple actions in the same change set, for example when invoking an action on multiple items in a list. If one or
				more of the actions is rejected with HTTP status code <code>412 Precondition Failed</code> and the response header
					<code>Preference-Applied:handling=strict</code>, <span class="emphasis">all</span> of the actions included in the change set are
				rejected. The <code>fnOnStrictHandlingFailed</code> callback will then be invoked for all rejected actions; each callback instance
				only recieves the relevant messages for its associated action. This means that it's possible that no messages will be given to some of
				the callbacks.</p>
			<p>To enable strict handling for the above example, the controller code snippet may look
				like this:</p>
			<div class="note other example "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Example
				</strong></div></div><div class="fig"><p>"<code>Prefer:handling=strict</code>"</p><section class="lang-xml"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">// XML view:
// the messages may be visualized in a sap.m.Dialog via sap.m.MessageView and sap.m.MessageItem like this
    &lt;Dialog id="onStrictMessagesDialog"
            title="Messages during order confirmation, do you want to continue?"
            resizable="true" contentHeight="50%" contentWidth="50%"
            verticalScrolling="false" state="Warning"&gt;
        &lt;buttons&gt;
            &lt;Button id="confirmStrictMode" text="Yes"
                    tooltip="Ignore warnings and confirm anyhow"
                press="onConfirmStrictMessages"/&gt;
            &lt;Button id="cancelStrictMode" text="No"
                    tooltip="Cancel confirmation"
                press="onCancelStrictMessages" type="Emphasized"/&gt;
        &lt;/buttons&gt;
        &lt;MessageView items="{ui&gt;/strictMessages}"&gt;
            &lt;MessageItem
                type="{ui&gt;type}"
                title="{ui&gt;message}"
                subtitle="{ui&gt;target}"&gt;
            &lt;/MessageItem&gt;
        &lt;/MessageView&gt;
    &lt;/Dialog&gt;
 
// controller code:
// event handler that invokes the bound action
onInvokeAction : function () {
  var that = this;
 
...
 
    function onStrictHandlingFailed (aMessages) {
        var oView = that.oView;
 
        oView.getModel("ui").setProperty("/strictMessages", aMessages);
        oView.byId("onStrictMessagesDialog").open();
            return new Promise(function (fnResolve) {
                that.fnStrictResolve = fnResolve;
            });
        }
    }
 
    oAction.invoke(undefined, undefined, onStrictHandlingFailed).then(
      function () {
        MessageToast.show("Invoice created for sales order");
      },
      function (oError) {
        if (!oError.canceled)
          MessageBox.alert(oError.message, {icon : MessageBox.Icon.ERROR, title : "Error"});
      });
});
 
// event handler to confirm the message and repeat the action
onConfirmStrictMessages : function () {
    this.fnStrictResolve(true);
    this.oView.byId("onStrictMessagesDialog").close();
},
 
// event handler to reject the action
onCancelStrictMessages : function () {
    this.fnStrictResolve(false);
    this.oView.byId("onStrictMessagesDialog").close();
},</pre></div></div></section><p></p></div></div>
			<p>
				See also the
					example in the Demo Kit: <a href="entity/sap.ui.model.odata.v4.ODataModel/sample/sap.ui.core.sample.odata.v4.SalesOrders/code/Main.controller.js" title="entity/sap.ui.model.odata.v4.ODataModel/sample/sap.ui.core.sample.odata.v4.SalesOrders/code/Main.controller.js" class="sap-doc" alt="entity/sap.ui.model.odata.v4.ODataModel/sample/sap.ui.core.sample.odata.v4.SalesOrders/code/Main.controller.js">Controller Code for
							<code>sap.ui.core.sample.odata.v4.SalesOrders.onConfirmSalesOrder</code></a></p>
		</section><section id="section_osx_m5l_gdb">
			<h2 class="title ">Advertised Operations</h2>
			<p>According to the <a href="http://docs.oasis-open.org/odata/odata/v4.0/errata03/os/complete/part1-protocol/odata-v4.0-errata03-os-part1-protocol-complete.html#_Toc453752309" title="http://docs.oasis-open.org/odata/odata/v4.0/errata03/os/complete/part1-protocol/odata-v4.0-errata03-os-part1-protocol-complete.html#_Toc453752309" class="external-link" target="_blank" rel="noopener">OData 4.0 specification ("11.5.2 Advertising Available Operations within a Payload")</a> services may return
				available actions and functions bound to a particular entity as part of the entity representation within the payload. Data for an
				advertised operation within an entity is sent as property starting with <code>#&lt;namespace&gt;.&lt;action&gt;</code> of that
				entity. If the entity does not advertise the operation, it does not contain this property. To access the advertised operation in a
				binding, the same format has to be used. See the following example:</p><div class="note other example "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Example
				</strong></div></div><div class="fig"><p>Enable a button to initiate an action
						<span class="parmname">AcSetIsOccupied</span> available on entity type of entity set <span class="parmname">EMPLOYEES</span> depending on
					advertisement of this action on the entity <span class="parmname">EMPLOYEES('1')</span></p></div></div><p></p>
			<section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;FlexBox binding="{/EMPLOYEES('1')}"&gt;
    &lt;Button text="Set occupied" enabled="{= !!%{#com.sap.gateway.default.iwbep.tea_busi.v0001.AcSetIsOccupied} }"/&gt;
&lt;/FlexBox&gt;</pre></div></div></section>
			<p>Here a button is enabled only if the action <span class="parmname">AcSetIsOccupied</span> is
				advertised for the entity <span class="parmname">EMPLOYEES('1')</span>. The
					<code>%</code> operator is used to set the internal type to
					<code>any</code> because the advertised action is sent as an object. The
				double negation <code>!!</code> converts this object to a boolean value that is
				needed by the <code>enabled</code> control property.</p>
			<p>If no advertised action was returned in the payload, <code>undefined</code> (or
					<code>null</code> in OData 4.01 in case of advertised non-availability) is
				returned as value for the binding. This translates to false in the expression
				above.</p>
			<p>If there is an additional list of non-binding parameter names to identify a specific
				overload, then they need to be given in the binding path as well, for instance:
					<code>%{#Model.RemainingVacation(Year)}</code>.</p>
			<div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
				</p><p>The bound action advertisement is added to $select automatically if the model
					parameter <a href="api/sap.ui.model.odata.v4.ODataModel/constructor" title="api/sap.ui.model.odata.v4.ODataModel/constructor" class="sap-doc" alt="api/sap.ui.model.odata.v4.ODataModel/constructor"><code>autoExpandSelect</code></a> is
					set.</p>
			<p></p></div></div>
			<p>To access the metadata of an operation, the double hash (<code>##</code>) syntax
				has to be used as is illustrated in the next example:</p><div class="note other example "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Example
				</strong></div></div><div class="fig"><p>Binding against
					metadata of an
					action</p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">var oContext = oModel.createBindingContext("/EMPLOYEES('1')/##com.sap.gateway.default.iwbep.tea_busi.v0001.AcSetIsOccupied");
var oMetaModel = oContext.getModel();
oMetaModel.requestObject("0/$ReturnType/$Type", oContext).then(alert);</pre></div></div></section><p></p></div></div><p></p>
			<p>Here a context is created pointing to the metadata of the action and afterwards the
				type is accessed using this context.</p>
			<p>This approach can also be used with XML templating where <a href="api/sap.ui.model.odata.v4.ODataModel#methods/createBindingContext" title="api/sap.ui.model.odata.v4.ODataModel#methods/createBindingContext" class="sap-doc" alt="api/sap.ui.model.odata.v4.ODataModel#methods/createBindingContext"><code>createBindingContext</code></a> is
				called internally.</p>
		</section><section id="section_AOR">
			<h2 class="title ">Access Operation Results</h2>
			<p>You can access the results of the operation by calling <code>getObject()</code>
				from the bound context.</p>
			<section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">// let oOperation be the operation's context binding
oOperation.invoke().then(function () {
    <span class="emphasis">// Note: invoke does not deliver the results
</span>
    var oResults = oOperation.getBoundContext().getObject();
    ...
});</pre></div></div></section>
			<p>The promise returned by the operation binding's <a href="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke" title="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke" class="sap-doc" alt="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke"><code>invoke</code></a> method may resolve with a <cite>return value context</cite> provided the conditions specified
				in <a href="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke" title="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke" class="sap-doc" alt="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke"><code>invoke</code></a> are met. The operation binding may be bound to an entity or a collection of
				entities.</p>
			<p>The typical use case for <cite>return value context</cite> is when you call a bound
				operation with a <span class="parmname">C1</span> context defining its binding parameter and
				the bound operation returns a <cite>different version</cite> of the entity used as
				binding parameter. <span class="parmname">C1</span> is the binding context of an "object
				page" container displaying properties of the corresponding entity. You need to
					replace <span class="parmname">C1</span> as binding context of the object page by
					the<cite> return value context</cite>. This way, the <cite>different
					version</cite> of the entity is displayed without a further read request. If the
				bound operation returns the entity used as binding parameter, the changes will
				automatically be copied to the binding parameter.</p>
			<p>If the operation binding fulfills the conditions for returning a context, you can set
				the <code>$$inheritExpandSelect</code> parameter for the binding: The request
				for the bound operation is then sent with the same <code>$expand</code> and
					<code>$select</code> query options used to load the operation's binding
				parameter. This way you guarantee that all fields of the object page are available
				in the operation response.</p>
			<p>If the <span class="parmname">C1</span> context belongs to a list binding, for example in a list report, you can pass the
					<code>bReplaceWithRVC</code> flag to the operation binding's <code>invoke</code> method in order to immediately replace
					<span class="parmname">C1</span> in the list with the return value context and return that list context instead. This way, the
					<cite>different version</cite> of the entity is displayed even inside the list report without a further read request. For more
				information, see <a href="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke" title="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke" class="sap-doc" alt="api/sap.ui.model.odata.v4.ODataContextBinding#methods/invoke"><code>sap.ui.model.odata.v4.ODataContextBinding#invoke</code></a> and <a href="topic/40986e6343c944279cafbbc6ac07c83d" title="A draft is an interim version of a business entity that has not yet been explicitly saved. Drafts are saved automatically in the background whenever users add or change information within a business entity." class="sap-doc">Draft Handling with the OData V4 Model</a>.</p>
			<p>Sample object page to display an <span class="parmname">Artist</span>
				entity</p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;form:SimpleForm id="objectPage"&gt;
    &lt;Toolbar&gt;
        &lt;Button text="Edit" enabled="{IsActiveEntity}" press=".onEdit"/&gt;
    &lt;/Toolbar&gt;
    &lt;Label text="ID"/&gt; &lt;Text text="{ArtistID}"/&gt;
    &lt;Label text="Is Active"/&gt; &lt;Text text="{IsActiveEntity}"/&gt;
    &lt;Label text="Name"/&gt; &lt;Input value="{Name}" /&gt;
    ...
&lt;/form:SimpleForm&gt;</pre></div></div></section><p></p>
			<p>Controller code to display the active version of <span class="parmname">Artist 42</span> initially and switch to draft version on
					<span class="ph uicontrol">Edit</span></p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">// display "active" version of artist initially
onInit : function () {
    var oActiveArtistContext = oModel
        	.bindContext("/Artists(ArtistID='42',IsActiveEntity=true)")
        	.getBoundContext();
    this.byId("objectPage").setBindingContext(oActiveArtistContext);
},
 
// display the "inactive" version of the entity returned by the "EditAction"
onEdit : function () {
    var that = this;
    oModel.bindContext("name.space.EditAction(...)", this.byId("objectPage").getBindingContext(), {$$inheritExpandSelect : true})
        .invoke()
        .then(function (oInactiveArtistContext) {
            that.byId("objectPage").setBindingContext(oInactiveArtistContext);
        });
}</pre></div></div></section><p></p>
		</section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink hidden"><br><strong>Parent topic: </strong></div><div class="previousLink hidden"><br><strong>Previous: </strong></div><div class="nextLink hidden"><br><strong>Next: </strong></div></section><section class="relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig">
		<li><a href="http://docs.oasis-open.org/odata/odata/v4.0/odata-v4.0-part1-protocol.html" title="http://docs.oasis-open.org/odata/odata/v4.0/odata-v4.0-part1-protocol.html" class="external-link" target="_blank" rel="noopener">OData Version 4.0 Part 1, 11.5 Operations</a></li>
		<li><a href="api/sap.ui.model.odata.v4.ODataContextBinding" title="api/sap.ui.model.odata.v4.ODataContextBinding" class="sap-doc" alt="api/sap.ui.model.odata.v4.ODataContextBinding">ODataContextBinding</a></li>
	</ul></section></div></section></div></body></html>