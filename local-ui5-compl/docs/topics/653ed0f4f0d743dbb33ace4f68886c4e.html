<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loio653ed0f4f0d743dbb33ace4f68886c4e" class=" section topic"><div class="section-mdeditlink hidden">
				<a class="mdeditlink hidden" href="https://github.com/SAP-docs/sapui5/blob/main/docs/06_SAP_Fiori_Elements/configuring-charts-653ed0f.md">Edit on GitHub</a>
			</div><div class="collapsible-icon sap-icon innerTitle"><h2 class="title ">Configuring Charts</h2></div><div class="fig"><div class="topictitle1 title"><h2 class="title ">Configuring Charts</h2></div><div class="shortdesc">You can add a chart facet to a content section within the list report and object page.</div><p>A chart facet is suitable to use if you wish to present data graphically for analysis.</p><section id="section_tth_5tc_2tb">
            <h2 class="title ">Configuring Charts in a List Report</h2>
            <p>You can configure a chart to be part of a list report that has multiple
                views. For more information, see <a href="topic/37aeed74e17a42caa2cba3123f0c15fc" title="You can define multiple views of a table and display them in multiple table mode. Users can switch between views using an icon tab bar." class="sap-doc">Defining Multiple Views on a List Report Table - Multiple Table Mode</a> and <a href="topic/b6b59e4a4c3548cf83ff9c3b955d3ba3" title="You can configure your application to display data for different entity sets and table settings, for example, sales orders or suppliers." class="sap-doc">Defining Multiple Views on a List Report with Different Entity Sets and Table Settings</a>.</p>
            <p>
        </p></section><section id="section_fnc_ptc_2tb">
            <h2 class="title ">Configuring Charts in an Object Page</h2>
            <p>For more information, see <a href="topic/6495eab00f5a459b893c3cc83b763b20" title="You can add a chart facet to a content section within the object page." class="sap-doc">Adding a Chart Facet</a>.</p>
        </section><section>
            <h2 class="title ">Code Samples</h2>
            <p>The following code samples show how to create your annotations for the chart facet:</p>
            <section>
                <h3 class="title "><code>UI.ReferenceFacet</code></h3>
                <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>XML
                    Annotation</p><section class="collapsible lang-xml"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType"&gt;
   &lt;Annotation Term="UI.Facets"&gt;
      &lt;Record Type="UI.ReferenceFacet"&gt;
         &lt;PropertyValue Property="Label" String="{@i18n&gt;@SalesData}"/&gt;
         &lt;PropertyValue Property="Target" AnnotationPath="to_ProductSalesData/@UI.Chart"/&gt;
      &lt;/Record&gt;
   &lt;/Annotation&gt;
&lt;/Annotations&gt;
</pre></div></div></section><p></p></div></div>
                <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>ABAP CDS Annotation</p><section class="collapsible"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">@UI.facet: [
 {
  label: '{@i18n&gt;@SalesData}',
  type: #CHART_REFERENCE,
  purpose: #STANDARD,
  targetElement: '_productSalesData'
 }
]  </pre></div></div></section><p></p></div></div>
                <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>CAP CDS
                    Annotation</p><section class="collapsible"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">annotate STTA_PROD_MAN.STTA_C_MP_ProductType @(
  UI.Facets : {
    $Type : 'UI.ReferenceFacet',
    Label : '{@i18n&gt;@SalesData}',
    Target : 'to_ProductSalesData/@UI.Chart'
  }
);
</pre></div></div></section><p></p></div></div>
            </section>
            <section>
                <h3 class="title "><code>UI.Chart</code></h3>
                <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>XML
                    Annotation</p><section class="collapsible lang-xml"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductSalesDataType"&gt;
   &lt;Annotation Term="UI.Chart"&gt;
      &lt;Record&gt;
         &lt;PropertyValue Property="Title" String="Test Chart"/&gt;
         &lt;PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/&gt;
         &lt;PropertyValue Property="Dimensions"&gt;
            &lt;Collection&gt;
               &lt;PropertyPath&gt;DeliveryMonth&lt;/PropertyPath&gt;
            &lt;/Collection&gt;
         &lt;/PropertyValue&gt; 
         &lt;PropertyValue Property="Measures"&gt;
            &lt;Collection&gt;
               &lt;PropertyPath&gt;Revenue&lt;/PropertyPath&gt;
            &lt;/Collection&gt;
         &lt;/PropertyValue&gt;
      &lt;/Record&gt;
   &lt;/Annotation&gt;
&lt;/Annotations&gt;
</pre></div></div></section><p></p></div></div>
                <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>ABAP CDS Annotation</p><section class="collapsible"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">@UI.Chart: [
  {
    title: 'Test Chart',
    chartType: #COLUMN,
    dimensions: [
      'DELIVERYMONTH'
    ],
    measures: [
      'REVENUE'
    ]
  }
]
annotate view STTA_C_MP_PRODUCTSALESDATA with {

}</pre></div></div></section><p></p></div></div>
                <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>CAP CDS
                    Annotation</p><section class="collapsible"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">annotate STTA_PROD_MAN.STTA_C_MP_ProductSalesDataType @(
  UI.Chart : {
    Title : 'Test Chart',
    ChartType : #Column,
    Dimensions : [
        DeliveryMonth
    ],
    Measures : [
        Revenue
    ]
  }
);</pre></div></div></section><p></p></div></div>
            </section>
            <p>The chart definition contains measures on which the aggregations calculations are done, and dimensions, which categorize these
                measures.
                
            </p>
            
            <div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p></p><p>The use of navigation properties within the <code>UI.Chart</code> term isn't supported.</p><div><div class="fig"><span class="collapsible-icon sap-icon figcap title"><h2 class="title ">Navigation Property</h2></span></div><img src="loio63620b40db464579b5306a5ded83981b_LowRes.png" usemap="#"><p></p></div></div>
        </div></section><section class="collapsible expanded"><div class="collapsible-icon sap-icon"><h2 class="title collapsible expanded">Additional Features in SAP Fiori Elements for OData V2</h2></div><div class="fig"><div class="note restriction  "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Restriction
				</strong></div></div><div class="fig"><p>
                </p><p>Charts are only supported for entities or services that are <span class="emphasis">not</span> draft enabled or for read-only entities or
                    services.</p>
            <p></p></div></div></div></section><section id="section_ymw_bdc_4nb" class="collapsible expanded"><div class="collapsible-icon sap-icon"><h2 class="title collapsible expanded">Additional Features in SAP Fiori Elements for OData V4</h2></div><div class="fig"><section>
                <h3 class="title ">Enabling the Chart from a Draft-Enabled Entity</h3>
                <p>You can define a chart against a draft-enabled entity. In this case, only active data is used for the chart display.</p>
            </section><section>
                <h3 class="title ">Enabling the Chart Facet in a List Report</h3>
                <p>You can configure a chart to be part of the content area
                    using
                    the <code>manifest.json</code> file.
                    For more information, see the <a href="topic/2a9df06673d34f72b238549d49da8bfb.html#loio2a9df06673d34f72b238549d49da8bfb/section_b3f_qhf_1qb" title="2a9df06673d34f72b238549d49da8bfb.xml#loio2a9df06673d34f72b238549d49da8bfb/section_b3f_qhf_1qb" class="sap-doc">Enabling the ALP in SAP Fiori Elements for OData V4</a>
                    section
                    in <a href="topic/2a9df06673d34f72b238549d49da8bfb" title="The descriptor file (manifest.json) is an application configuration file that contains valid entries for initializing the analytical list page (ALP)." class="sap-doc">Descriptor Configuration for the Analytical List Page</a>.</p>
            </section><section id="criticality_coloring_subsection">
                <h3 class="title ">Support for Criticality Coloring</h3>
                <p>SAP Fiori elements supports the criticality based on
                        <code>UI.CriticalityType</code>. You can
                    wrap
                    this annotation with the
                    <code>UI.ValueCriticality</code>
                    annotation, as shown in the following sample code:</p>
                <div class="note other samplecode lang-xml"><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>XML
                    Annotation</p><section class="collapsible"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;Annotations Target="com.c_salesordermanage_sd_aggregate.SalesOrderManage/SalesOrderType"&gt;
    &lt;Annotation Term="UI.ValueCriticality"&gt;
        &lt;Collection&gt;
            &lt;Record Type="UI.ValueCriticalityType"&gt;
                &lt;PropertyValue Property="Value" String="CCLN"/&gt;
                &lt;PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Negative"/&gt;
            &lt;/Record&gt;
            &lt;Record Type="UI.ValueCriticalityType"&gt;
                &lt;PropertyValue Property="Value" String="CR"/&gt;
                &lt;PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Critical"/&gt;
            &lt;/Record&gt;
            &lt;Record Type="UI.ValueCriticalityType"&gt;
                &lt;PropertyValue Property="Value" String="OR"/&gt;
                &lt;PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Positive"/&gt;
            &lt;/Record&gt;
        &lt;/Collection&gt;
    &lt;/Annotation&gt;
&lt;/Annotations&gt;</pre></div></div></section><p></p></div></div>
                <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>ABAP CDS
                    Annotation</p><section class="collapsible"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">annotate view C_SALESORDERMANAGE_SD_AGGREGATE.SALESORDERMANAGE with {

@UI.ValueCriticality: [
  {
    value: 'CCLN',
    criticality: #NEGATIVE
  },
  {
    value: 'CR',
    criticality: #CRITICAL
  },
  {
    value: 'OR',
    criticality: #POSITIVE
  }
]

salesordertype;
}


</pre></div></div></section><p></p></div></div>
                <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>CAP CDS
                    Annotation</p><section class="collapsible"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">SalesOrderType         @(
        UI.ValueCriticality   : [
        {
            Value       : 'CCLN',
            Criticality : #Negative
        },
        {
            Value       : 'CR',
            Criticality : #Critical
        },
       {
            Value       : 'OR',
            Criticality : #Positive
        }
        ]
    );


</pre></div></div></section><p></p></div></div>
                <div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
                    </p><p>No color is applied to the chart dimension when a neutral value is returned.</p>
                <p></p></div></div>
                <p>You can see the result in the following chart:</p>
                <div><div class="fig"><img src="loio040e94800fd14bb9af262c2c5cb53741_LowRes.png" usemap="#"></div></div>
            </section><section>
                <h3 class="title ">Supporting Charts with Time Axis</h3>
                <p>The time axis is automatically enabled for a chart when its dimension is one of the following types:</p>
                <ul class="ul ">
                    <li class="li">
                        <p><code>Edm.Date</code></p>
                    </li>
                    
                    
                    
                    <li class="li">
                        <p><code>Edm.DateTimeOffset</code></p>
                    </li>
                </ul>
                <p>Additionally, the time axis is enabled when the dimension is of type <code>String</code> and is annotated with one of the
                    following annotations:</p>
                <ul class="ul ">
                    <li class="li">
                        <p><code>@Common.IsFiscalYear</code></p>
                    </li>
                    <li class="li">
                        <p><code>@Common.IsFiscalYearPeriod</code></p>
                    </li>
                    <li class="li">
                        <p><code>@Common.IsCalendarYearMonth</code></p>
                    </li>
                    <li class="li">
                        <p><code>@Common.IsCalendarYearQuarter</code></p>
                    </li>
                    <li class="li">
                        <p><code>@Common.IsCalendarYearWeek</code></p>
                    </li>
                    <li class="li">
                        <p><code>@Common.IsCalendarDate</code></p>
                    </li>
                </ul>
            </section><section id="enabling_aggregation_subsection">
                <h3 class="title ">Enabling Aggregation in the Back End</h3>
                <p>For charts to work, the entity set must support aggregation. SAP Fiori elements supports transformation
                    aggregation.
                    Both
                    standard aggregation methods and custom aggregation methods are
                    supported.</p>
                <ul class="ul ">
                    <li class="li">
                        <p>Specifying Chart Dimensions and Measures</p>
                        <p>You specify a dimension or a measure using the <code>"GroupableProperties"</code> and the
                                <code>"AggregatableProperties"</code> at the entity set level. (In the past, you did this by using the
                                <code>"Aggregation.Groupable"</code> and <code>"Aggregation.Aggregatable"</code> annotation at the property
                            level.) You can find the corresponding annotations in the following sample code:</p>
                        <div class="note other samplecode lang-xml"><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>XML
                            Annotation</p><section class="collapsible lang-xml"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;Annotations Target="sap.fe.managepartners.ManagePartnersService.EntityContainer/BusinessPartners"&gt;
    &lt;Annotation Term="Aggregation.ApplySupported"&gt;
        &lt;Record Type="Aggregation.ApplySupportedType"&gt;
            &lt;PropertyValue Property="AggregatableProperties"&gt;
                &lt;Collection&gt;
                    &lt;Record Type="Aggregation.AggregatablePropertyType"&gt;
                        &lt;PropertyValue Property="Property"&gt;
                            &lt;PropertyPath&gt;SalesAmount&lt;/PropertyPath&gt;
                        &lt;/PropertyValue&gt;
                    &lt;/Record&gt;
                    &lt;Record Type="Aggregation.AggregatablePropertyType"&gt;
                        &lt;PropertyValue Property="Property"&gt;
                            &lt;PropertyPath&gt;SalesAmountLocalCurrency&lt;/PropertyPath&gt;
                        &lt;/PropertyValue&gt;
                    &lt;/Record&gt;
                    ....
                    ....
                &lt;/Collection&gt;
            &lt;/PropertyValue&gt;
            &lt;PropertyValue Property="GroupableProperties"&gt;
                &lt;Collection&gt;
                    &lt;PropertyPath&gt;AccountResponsible&lt;/PropertyPath&gt;
                    &lt;PropertyPath&gt;Country&lt;/PropertyPath&gt;
                    ....
                    ....
                &lt;/Collection&gt;
            &lt;/PropertyValue&gt;
        &lt;/Record&gt;
    &lt;/Annotation&gt;
&lt;/Annotations&gt;</pre></div></div></section><p></p></div></div>
                        <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>ABAP CDS Annotation</p><p>No ABAP CDS annotation sample is available. Please use the local XML
                                annotation.</p><p></p></div></div>
                        <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>CAP CDS
                            Annotation</p><section class="collapsible"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">@Aggregation.ApplySupported : {
     GroupableProperties : [AccountResponsible, Country, .......],
     AggregatableProperties: [{
          Property: SalesAmount
          },{
          Property: SalesAmountLocalCurrency
          },
          ....
          ....
     ]
}</pre></div></div></section><p></p></div></div>
                    </li>
                    <li class="li">
                        <p>Transformation Aggregation that Uses Standard Aggregation Methods</p>
                        <p>In the metadata, such entity sets have the <code>Aggregation.ApplySupported</code> set. The collection of
                                <code>Analytics.AggregatedProperty</code> must then list all the aggregatable
                            measures or
                            aggregation methods that are
                            used.</p>
                        <div class="note other samplecode lang-xml"><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>XML
                            Annotation</p><section class="collapsible"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;Annotations Target="com.c_salesordermanage_sd_aggregate.SalesOrderManage"&gt;
    &lt;Annotation Term="Aggregation.ApplySupported"&gt;
        …
        …
    &lt;/Annotation&gt;
    &lt;Annotation Term="Analytics.AggregatedProperty"&gt;
        &lt;Record Type="Analytics.AggregatedPropertyType"&gt;
            &lt;PropertyValue Property="Name" String="minPrice"/&gt;
            &lt;PropertyValue Property="AggregationMethod" String="min"/&gt;
            &lt;PropertyValue Property="AggregatableProperty" PropertyPath="NetPricing"/&gt;
            &lt;Annotation Term="Common.Label" String="Minimum Net Price"/&gt;
         &lt;/Record&gt;
    &lt;/Annotation&gt;
    &lt;Annotation Term="Analytics.AggregatedProperty" Qualifier="max"&gt;
        &lt;Record Type="Analytics.AggregatedPropertyType"&gt;
            &lt;PropertyValue Property="Name" String="maximumPrice"/&gt;
            &lt;PropertyValue Property="AggregationMethod" String="max"/&gt;
            &lt;PropertyValue Property="AggregatableProperty" PropertyPath="NetPricing"/&gt;
            &lt;Annotation Term="Common.Label" String="Maximum Net Price"/&gt;
         &lt;/Record&gt;
    &lt;/Annotation&gt;   
&lt;/Annotations&gt;</pre></div></div></section><p></p></div></div>
                        <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>ABAP CDS Annotation</p><p>No ABAP CDS annotation sample is available.
                                Please use the local XML annotation.</p><p></p></div></div>
                        <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>CAP CDS
                            Annotation</p><section class="collapsible"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">annotate com.c_salesordermanage_sd_aggregate.SalesOrderManage with @(
  Aggregation.ApplySupported        : {
    AggregatableProperties   : [{Property : NetPricing}],
    CustomAggregationMethods : ['Custom.concat']
  },
  Analytics.AggregatedProperty      : {
    Name                 : 'minPrice',
    AggregationMethod    : 'min',
    AggregatableProperty : 'NetPricing',
    ![@Common.Label]     : 'Minimum Net Price'
  }
});</pre></div></div></section><p></p></div></div>
                        <p>In the preceding
                            example,
                                <code>"NetPricing"</code> is the property in the entity on which the standard aggregation methods
                                <code>"min"</code> and <code>"max"</code> are defined. The call to the back end asks for the
                            min or
                            max aggregation to be
                            applied on <code>NetPricing</code> and to be returned as <code>"minPrice"</code>/<code>"maximumPrice"</code>
                            for the client-side binding of the aggregated value.
                            For more information, see <a href="http://docs.oasis-open.org/odata/odata-data-aggregation-ext/v4.0/cs01/odata-data-aggregation-ext-v4.0-cs01.html#_Toc378326290" title="http://docs.oasis-open.org/odata/odata-data-aggregation-ext/v4.0/cs01/odata-data-aggregation-ext-v4.0-cs01.html#_Toc378326290" class="external-link" target="_blank" rel="noopener">Transformation Aggregation</a>.</p>
                        
                        <p><span class="emphasis">– Using
                                Transformation Aggregate-Based Measures in the Definition of a Chart – </span></p>
                        <p>If you need to define transformation aggregate-based measures as part of the chart annotation,
                            you must define them as
                                <code>DynamicMeasures</code> and not <code>Measures</code> (<code>Measures</code> must only have those
                            measure properties that are directly part of the entity set, that is, only custom aggregate-based measures).</p>
                        <div class="note other samplecode lang-xml"><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>XML Annotation for a Chart Using a
                                <code>DynamicMeasure</code></p><section class="collapsible"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;Annotation Term="UI.Chart"&gt;
    &lt;Record Type="UI.ChartDefinitionType"&gt;
        &lt;PropertyValue Property="Title" String="Sales Chart"/&gt;
        &lt;PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/&gt;
        &lt;PropertyValue Property="Measures"&gt;
            &lt;Collection&gt;
                &lt;PropertyPath&gt;avgPricing&lt;/PropertyPath&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
        &lt;PropertyValue Property="DynamicMeasures"&gt;
            &lt;Collection&gt;
                &lt;AnnotationPath&gt;@Analytics.AggregatedProperty#sum&lt;/AnnotationPath&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
        &lt;PropertyValue Property="Dimensions"&gt;
            &lt;Collection&gt;
                &lt;PropertyPath&gt;SalesOrganization&lt;/PropertyPath&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
        &lt;PropertyValue Property="MeasureAttributes"&gt;
            &lt;Collection&gt;
                &lt;Record Type="UI.ChartMeasureAttributeType"&gt;
                    &lt;PropertyValue Property="Measure" PropertyPath="avgPricing"/&gt;
                    &lt;PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1"/&gt;
                &lt;/Record&gt;
                &lt;Record Type="UI.ChartMeasureAttributeType"&gt;
                    &lt;PropertyValue Property="DynamicMeasure" AnnotationPath="@Analytics.AggregatedProperty#sum"/&gt;
                    &lt;PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1"/&gt;
                &lt;/Record&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
        &lt;PropertyValue Property="DimensionAttributes"&gt;
            &lt;Collection&gt;
                &lt;Record Type="UI.ChartDimensionAttributeType"&gt;
                    &lt;PropertyValue Property="Dimension" PropertyPath="SalesOrganization"/&gt;
                    &lt;PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Category"/&gt;
                &lt;/Record&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
    &lt;/Record&gt;
&lt;/Annotation&gt;</pre></div></div></section><p></p></div></div>
                        <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>ABAP CDS Annotation</p><p>No ABAP CDS annotation sample is available.
                                Please use the local XML annotation.</p><p></p></div></div>
                        <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>CAP CDS
                            Annotation</p><section class="collapsible"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">Chart                                                    : {
      $Type               : 'UI.ChartDefinitionType',
      Title               : 'Sales Chart',
      ChartType           : #Column,
      Measures            : [avgPricing],
      DynamicMeasures     : ['@Analytics.AggregatedProperty#sum'],
      Dimensions          : [SalesOrganization],
      MeasureAttributes   : [
        {
          $Type   : 'UI.ChartMeasureAttributeType',
          Measure : avgPricing,
          Role    : #Axis1
        },
        {
          $Type          : 'UI.ChartMeasureAttributeType',
          DynamicMeasure : '@Analytics.AggregatedProperty#sum',
          Role           : #Axis1
        }
      ],
      DimensionAttributes : [{
        $Type     : 'UI.ChartDimensionAttributeType',
        Dimension : SalesOrganization,
        Role      : #Category
      }]
    }</pre></div></div></section><p></p></div></div>
                    </li>
                    <li class="li">
                        <p>Transformation
                            Aggregate
                            that Uses Custom Aggregation Methods</p>
                        <p>To use custom aggregation in the back end,
                            you
                            must ensure that the metadata has <code>Aggregation.ApplySupported</code> set and that the following annotations are enabled at entity set
                            level:</p>
                        <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>XML
                            Annotation</p><section class="collapsible"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;Annotations Target="sap.fe.managepartners.ManagePartnersService.EntityContainer/BusinessPartners"&gt;
     &lt;Annotation Term="Aggregation.CustomAggregate" Qualifier="RequestedQuantity"&gt;
        &lt;String&gt;Edm.Decimal&lt;/String&gt;
     &lt;/Annotation&gt;
     &lt;Annotation Term="Aggregation.CustomAggregate" Qualifier="RequestedQuantityLocalUnit"&gt;
        &lt;String&gt;Edm.Decimal&lt;/String&gt;
     &lt;/Annotation&gt;
&lt;/Annotations&gt;
 
&lt;Annotations Target="sap.fe.managepartners.ManagePartnersService.BusinessPartners/Name"&gt;
     &lt;Annotation Term="Aggregation.Groupable"&gt;
        &lt;Bool&gt;true&lt;/Bool&gt;
     &lt;/Annotation&gt;
     &lt;Annotation Term="Common.Label"&gt;
        &lt;String&gt;Partner Name&lt;/String&gt;
     &lt;/Annotation&gt;
&lt;/Annotations&gt;</pre></div></div></section><p></p></div></div>
                        
                        <div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>CAP CDS
                            Annotation</p><section class="collapsible"><div class="collapsible-icon sap-icon title"><strong>
						Sample Code
					</strong></div><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">@Aggregation.CustomAggregate #RequestedQuantity          : 'Edm.Decimal'
@Aggregation.CustomAggregate #RequestedQuantityLocalUnit : 'Edm.Decimal'

entity BusinessPartners {
               Name   : String @Common : { Label: 'Partner Name' }
               @Aggregation.Groupable: true;
}
</pre></div></div></section><p></p></div></div>
                        <p>In this example, the properties <code>"RequestedQuantity"</code> and <code>"RequestedQuantityLocalUnit"</code> are measures and use custom
                            aggregation, while the property <code>"Name"</code> is a dimension that is marked with <code>Groupable: true</code> and can be used to plot the
                            chart.</p>
                        
                        <div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
                            </p><p>As an exception, a unit property of a measure can be annotated as a custom aggregate. However, this unit property does not appear in the list of
                                measures available for the chart.</p>
                        <p></p></div></div>
                        <p>For more information, see <a href="http://docs.oasis-open.org/odata/odata-data-aggregation-ext/v4.0/cs01/odata-data-aggregation-ext-v4.0-cs01.html#_Toc378326320" title="http://docs.oasis-open.org/odata/odata-data-aggregation-ext/v4.0/cs01/odata-data-aggregation-ext-v4.0-cs01.html#_Toc378326320" class="external-link" target="_blank" rel="noopener">Custom Aggregation</a>.</p>
                        
                        
                    </li>
                </ul>
                <div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
                    </p><p>For the chart facet, the following applies:</p>
                    <ul class="ul ">
                        <li class="li">
                            <p>Applications can't control whether the chart selection can be configured to allow no selection or single selection. SAP
                                Fiori elements always enables multi-selection for the chart control.</p>
                        </li>
                        <li class="li">
                            <p>If a table refresh occurs (because a user changes the table personalization, for example), the chart is also refreshed
                                to keep the chart and table data synchronized. Chart selections are <span class="emphasis">not</span> maintained, however,
                                since they aren't stored in the <code>iAppState</code>.</p>
                        </li>
                        
                        <li class="li">
                            <p>SAP Fiori elements for OData
                            V4 assumes that the back end supports
                                transformation filters for aggregate controls, such as charts or visual filter charts. For more information about
                                transformation filters, see <a href="http://docs.oasis-open.org/odata/odata-data-aggregation-ext/v4.0/cs01/odata-data-aggregation-ext-v4.0-cs01.html" title="http://docs.oasis-open.org/odata/odata-data-aggregation-ext/v4.0/cs01/odata-data-aggregation-ext-v4.0-cs01.html" class="external-link" target="_blank" rel="noopener">OData Extension for Data Aggregation Version 4.0</a>. </p>
                            <p>You must ensure the following:</p>
                            <ul class="ul ">
                                <li class="li">
                                    <p>The back end supports transformation filters.</p>
                                </li>
                                <li class="li">
                                    <p>The annotations must be added for the aggregate entities. For more information about annotation samples, see the
                                        <a href="topic/7f844f1021cd4791b8f7408eac7c1cec.html#loio7f844f1021cd4791b8f7408eac7c1cec/AggregateControls" title="7f844f1021cd4791b8f7408eac7c1cec.xml#loio7f844f1021cd4791b8f7408eac7c1cec/AggregateControls" class="sap-doc">How to Set Transformation Filters on
                                            Aggregate
                                        Controls</a>
                                        section
                                        in
                                            <a href="topic/7f844f1021cd4791b8f7408eac7c1cec" title="You can control which table type is rendered in the list report and on the object page by configuring the manifest.json file and by using annotations." class="sap-doc">Setting the Table Type</a>.</p>
                                </li>
                            </ul>
                        </li>
                        
                    </ul>
                <p></p></div></div>
            </section><div class="note restriction  "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Restriction
				</strong></div></div><div class="fig"><p>
                </p><p>The following restrictions apply regarding the support of the chart control:</p>
                <ul class="ul ">
                    
                    
                    <li class="li">
                        <p>Properties such as measures, dimensions, and text associations that come from associated entity sets
                            aren't supported.</p>
                    </li>
                    <li class="li">
                        <p>Chart personalization settings or selections aren't part of the variant changes and
                            not
                            saved in the <code>iAppState</code>.</p>
                    </li>
                    <li class="li">
                        <p>Semantic coloring using the
                                <code>UI.Criticality</code>
                            and 
                            
                            <code>UI.CriticalityCalculation</code>
                            annotations
                            isn't
                            
                            supported.</p>
                    </li>
                    
                    <li class="li">
                        <p> Aggregations on
                            draft-enabled entities are
                            <span class="emphasis">not</span> supported in ABAP CDS, since currently <code>$apply</code> with or without a filter on draft
                            or transactional entities isn't supported by SADL.</p>
                        
                        
                    </li>
                </ul>
            <p></p></div></div></div></section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink hidden"><br><strong>Parent topic: </strong></div><div class="previousLink hidden"><br><strong>Previous: </strong></div><div class="nextLink hidden"><br><strong>Next: </strong></div></section><section class="hidden relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig"></ul></section></div></section></div></body></html>