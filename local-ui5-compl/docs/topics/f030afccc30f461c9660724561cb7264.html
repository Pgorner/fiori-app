<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loiof030afccc30f461c9660724561cb7264" class=" section topic"><div class="section-mdeditlink hidden">
				<a class="mdeditlink hidden" href="https://github.com/SAP-docs/sapui5/blob/main/docs/03_Get-Started/step-17-fragment-callbacks-typescript-f030afc.md">Edit on GitHub</a>
			</div><div class="collapsible-icon sap-icon innerTitle"><h2 class="title ">Step 17: Fragment Callbacks (TypeScript)</h2></div><div class="fig"><div class="topictitle1 title"><h2 class="title ">Step 17: Fragment Callbacks (TypeScript)</h2></div><div class="shortdesc">Now that we have integrated the dialog, it's time to add some user interaction. The
		user will definitely want to close the dialog again at some point, so we add a button to
		close the dialog and assign an event handler.</div><section>
			<h2 class="title ">Preview</h2>
			<div><div class="fig"><img src="loioc351bbd078824c43bf1758b0c3679cbd_LowRes.png" title="The graphic has an explanatory text." alt="The graphic has an explanatory text." usemap="#"></div><span class="collapsible-icon sap-icon figcap title"><h2 class="title ">The dialog now has an "OK" button</h2></span></div>
		</section><section id="section_mt1_5fk_syb">
			<h2 class="title ">Coding</h2>
			<p>You can view all files at <a href="https://github.com/sap-samples/ui5-typescript-walkthrough/tree/main/steps/17" title="https://github.com/sap-samples/ui5-typescript-walkthrough/tree/main/steps/17" class="external-link" target="_blank" rel="noopener">OpenUI5 TypeScript Walkthrough - Step 17: Fragment Callbacks</a> and <a href="https://sap-samples.github.io/ui5-typescript-walkthrough/ui5-typescript-walkthrough-step-17.zip" title="https://sap-samples.github.io/ui5-typescript-walkthrough/ui5-typescript-walkthrough-step-17.zip" class="external-link" target="_blank" rel="noopener">download the solution as a zip file</a>.</p>
		</section><section id="section_nt1_5fk_syb">
			<h2 class="title ">webapp/controller/HelloPanel.controller.ts</h2>
			<p>We add an event handler function into the <code>HelloPanel</code> controller file that closes the dialog when triggered. To get the
				dialog instance, we use the <code>byId</code> function and then call the <code>close</code> function of the dialog.</p>
			<section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">import Controller from "sap/ui/core/mvc/Controller";
import MessageToast from "sap/m/MessageToast";
import JSONModel from "sap/ui/model/json/JSONModel";
import ResourceModel from "sap/ui/model/resource/ResourceModel";
import ResourceBundle from "sap/base/i18n/ResourceBundle";
import Dialog from "sap/m/Dialog";

/**
 * @namespace ui5.walkthrough.controller
 */
export default class HelloPanel extends Controller {
    private dialog: Dialog;

    onShowHello(): void {
        ...
    }
   async onOpenDialog(): Promise&lt;void&gt; {
        ...
    }
    <span class="emphasis">onCloseDialog(): void {
        // note: We don't need to chain to the pDialog promise, since this event-handler
        // is only called from within the loaded dialog itself.
        (this.byId("helloDialog") as Dialog)?.close();
    }</span>        
};</pre></div></div></section>
		</section><section id="section_d5m_ypr_r2b">
			<h2 class="title ">webapp/i18n/i18n.properties</h2>
			<p>We extend the text bundle by the new text for the dialog's <span class="keynote apiname">Close</span> button.</p>
			<section class="lang-prefs"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock"># App Descriptor
appTitle=Hello World
appDescription=A simple walkthrough app that explains the most important concepts of SAPUI5

# Hello Panel
showHelloButtonText=Say Hello
helloMsg=Hello {0}
homePageTitle=UI5 TypeScript Walkthrough
helloPanelTitle=Hello World
openDialogButtonText=Say Hello With Dialog
<span class="emphasis">dialogCloseButtonText=Ok</span></pre></div></div></section>
		</section><section>
			<h2 class="title ">webapp/view/HelloDialog.fragment.xml</h2>
			<p> In the fragment definition, we add a button to the <code>beginButton</code> aggregation of the dialog and refer the press handler
				to the event handler we just defined in the controller of the panel's content view.</p>
			<section class="lang-xml"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;core:FragmentDefinition
   xmlns="sap.m"
   xmlns:core="sap.ui.core"&gt;
   &lt;Dialog
      id="helloDialog"
      title ="Hello {/recipient/name}"&gt;
<span class="emphasis">      &lt;beginButton&gt;
         &lt;Button
            text="{i18n&gt;dialogCloseButtonText}"
            press=".onCloseDialog"/&gt;
      &lt;/beginButton&gt;</span>
   &lt;/Dialog&gt;
&lt;/core:FragmentDefinition&gt;</pre></div></div></section>
			<p>By using the <code>loadFragment</code> function to create the fragment content in the controller of the panel's content view, the
				method will be invoked there when the button is pressed. The dialog has an aggregation named <code>beginButton</code> as well as
					<code>endButton</code>. Placing buttons in both of these aggregations makes sure that the <code>beginButton</code> is
				placed before the <code>endButton</code> on the UI. What <code>before</code> means, however, depends on the text direction of
				the current language. We therefore use the terms <code>begin</code> and <code>end</code> as a synonym to "left" and "right".
				In languages with left-to-right direction, the <code>beginButton</code> will be rendered left, the <code>endButton</code> on
				the right side of the dialog footer; in right-to-left mode for specific languages the order is switched. </p>
		</section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink"><br><strong>Parent topic: </strong><a href="topic/dad1905a07f849ce9c509721317d38d8">Walkthrough Tutorial (TypeScript)</a></div><div class="previousLink"><br><strong>Previous: </strong><a href="topic/4b2e306f4bcd4777b068e5a99e007e85">Step 16: Dialogs and Fragments (TypeScript)</a></div><div class="nextLink"><br><strong>Next: </strong><a href="topic/49b1ac6f768947769d3daa9baf807f31">Step 18: Icons (TypeScript)</a></div></section><section class="relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig">
		<li><a href="topic/36a5b130076e4b4aac2c27eebf324909" title="Fragments are light-weight UI parts (UI sub-trees) which can be reused, defined similar to views, but do not have any controller or other behavior code involved." class="sap-doc">Reusing UI Parts: Fragments</a></li>
		<li><a href="topic/04129b2798c447368f4c8922c3c33cd7" title="SAPUI5 provides two options to instantiate a fragment: If it is instantiated inside a controller extending sap.ui.core.mvc.Controller, the loadFragment() function is the way to go. However, if it is instantiated in a non-controller artefact, the generic function sap.ui.core.Fragment.load() can be used." class="sap-doc">Instantiation of Fragments</a></li>
		<li><a href="api/sap.m.Dialog" title="api/sap.m.Dialog" class="sap-doc" alt="api/sap.m.Dialog">API Reference: sap.m.Dialog</a></li>
		<li><a href="entity/sap.m.Dialog" title="entity/sap.m.Dialog" class="sap-doc" alt="entity/sap.m.Dialog">Samples: sap.m.Dialog</a></li>
	</ul></section></div></section></div></body></html>