<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loio3c65f2cc630c472da8328a6f3c193683" class=" section topic"><div class="section-mdeditlink hidden">
				<a class="mdeditlink hidden" href="https://github.com/SAP-docs/sapui5/blob/main/docs/06_SAP_Fiori_Elements/refresh-entity-sets-in-sap-keep-alive-mode-3c65f2c.md">Edit on GitHub</a>
			</div><div class="collapsible-icon sap-icon innerTitle"><h2 class="title ">Refresh Entity Sets in <code>sap-keep-alive</code> Mode</h2></div><div class="fig"><div class="topictitle1 title"><h2 class="title ">Refresh Entity Sets in <code>sap-keep-alive</code> Mode</h2></div><div class="shortdesc"><code>sap-keep-alive</code> is an SAP Fiori launchpad feature that ensures that a
		view is not destroyed in the view cache when navigating away from the application.</div><p>The feature ensures improved performance when you reload the same view again once you navigate back to the application. For more
			information, see <a href="https://help.sap.com/viewer/a7b390faab1140c087b8926571e942b7/202009.002/en-US/921e7e2e45494f9a87ae70624155fd7c.html" title="https://help.sap.com/viewer/a7b390faab1140c087b8926571e942b7/202009.002/en-US/921e7e2e45494f9a87ae70624155fd7c.html" class="external-link" target="_blank" rel="noopener">Keeping SAPUI5 Apps Alive</a>.</p><p>If you make changes in an external application that you navigated to, then when you navigate back and reactivate the application view, the
			changes that you made are reflected without rebinding the control. It means that the application still shows the latest data, but the
			control is not rebound. This allows the earlier state (scroll position, selections) to be retained.</p><p>You can configure the entity
			sets
			that you want to refresh. To do so, upon navigating back to the source application from the target application, you can use the manifest
			configurations described below. SAP Fiori Elements defines default refresh mechanisms when the application configured with the
				<code>sap-keep-alive</code> parameter is activated again by SAP Fiori launchpad
			(for example, upon a back navigation following an external navigation).</p><section id="section_lyg_rv3_3cc">
			<h2 class="title ">Entity Set Configuration</h2>
			<p>The following configurations are supported for entity sets:</p>
			<div class="tableWrapper "><div class="fig"><table border="1" id="table_yby_3rt_yqb" class=" ">
					
					
					<tbody>
						<tr>
							<td colspan="1" rowspan="1">
								<p>EntitySet1: self</p>
							</td>
							<td colspan="1" rowspan="1">
								<p>Only &lt;EntitySet1&gt; is to be refreshed</p>
							</td>
						</tr>
						<tr>
							<td colspan="1" rowspan="1">
								<p>EntitySet2: <code>includingDependents</code></p>
							</td>
							<td colspan="1" rowspan="1">
								<p>Refresh &lt;EntitySet2&gt; along with all its dependents (navigation property) </p>
							</td>
						</tr>
					</tbody>
				</table></div></div>
			<div class="note tip  "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Tip
				</strong></div></div><div class="fig"><p><code>includingDependents</code> doesn't mean that data for child navigation entities gets refreshed, even if the UI
				has no control that is bound to the navigation entity. It only refreshes the data for the child navigation entity, if there is a
				control in the UI that is bound to the child navigation entity.</p></div></div>
		</section><section id="section_umb_yv3_3cc">
			<h2 class="title ">Source Application Behavior</h2>
			<section>
				<h3 class="title ">External Create Navigation</h3>
				<p>Refresh occurs for the entity set of the table that gets triggered from the navigation, while moving back to the source
					application. You can't override this behavior in SAP Fiori elements for OData
                            V2.</p>
			</section>
			<section>
				<h3 class="title ">External Chevron Navigation</h3>
				<p>Refresh occurs for the entity set of the table that gets triggered from the navigation, while moving back to the source
					application. However, you can switch it off or override it by configuring the <code>manifest.json</code> file. For more
					information about the sample code, see the version-specific sections.</p>
			</section>
			<section>
				<h3 class="title ">Other External Navigation Including Navigation Using Extension APIs</h3>
				<p>Refresh is not performed by default. You can override the default behavior and refresh specific entity sets using the manifest
					configuration. You can configure the refresh strategies defined for specific outbound navigation by configuring the
						<code>manifest.json</code> file. For more information, see the version-specific sections.</p>
			</section>
			<section>
				<h3 class="title ">Navigation Using Extensions </h3>
				<p>While navigating back to the source application, if an external navigation is triggered using the <code>navigateExternal</code>
					API, the refresh strategies of the outbound target that is passed to the API is considered for refreshing the entity set. The
					entity sets specified in the manifest under <code>refreshStrategyOnAppRestore</code> of that specific outbound configuration
					are considered for refresh. The refresh mechanism is exactly the same as defined for the external navigation section.</p>
			</section>
		</section><section id="section_nfx_4gn_5tb" class="collapsible expanded"><div class="collapsible-icon sap-icon"><h2 class="title collapsible expanded">Additional Features in SAP Fiori Elements for OData V2</h2></div><div class="fig"><section>
				<h3 class="title ">Source Application Behavior</h3>
				<p><span class="emphasis">Configure the Default Refresh Behavior During Chevron Navigation</span></p>
				<p>You can either <span class="emphasis">switch off</span> or override the default refresh behavior settings in the
						<code>manifest.json</code> file. To <span class="emphasis">switch off</span>, the <code>entitySets</code> parameter must be
					empty. Otherwise, you can override it with your refresh requirements.</p>
				<div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>manifest.json</p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">"sap.app": {
	...
	"crossNavigation": {
		"outbounds": {
			"&lt;OutboundTarget&gt;": {
				"semanticObject": "&lt;SemanticObject&gt;",
				"action": "&lt;Action&gt;"
			}
		}
	}
}

....
....

"sap.ui.generic.app": {
	...
	"pages": {
			"ListReport|&lt;ListReportEntitySet&gt;": {
				...
				"pages": {
					"ObjectPage|&lt;ObjectPageEntitySet&gt;": {
						...
						"navigation": {
							"display": {
								"path": "sap.apps.crossNavigation.outbounds",
								"target": "&lt;OutboundTarget&gt;",
								"refreshStrategyOnAppRestore": {
									"entitySets": {			
										"&lt;EntitySetToRefresh&gt;": "&lt;self/includingDependents&gt;",
										"&lt;AnotherEntitySetToRefresh&gt;": "&lt;self/includingDependents&gt;"
									}
								}
							}
						}
					}
				}
			}
		}
}</pre></div></div></section><p></p></div></div>
				<p><span class="emphasis">Other External Navigation Including Navigation Using Extension APIs</span></p>
				<p>The following sample code shows you how to configure <code>manifest.json</code> to define refresh strategies for specific
					outbound navigation. You can also define the default refresh strategies for external navigation for cases wherein an outbound
					navigation doesn't have specific refresh strategies.</p>
				<p>
					</p><div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>manifest.json</p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">"sap.app": {
   ...
   "crossNavigation": {
      "outbounds": {
         "&lt;OutboundTarget1&gt;": {
            "semanticObject": "&lt;SemanticObject1&gt;",
            "action": "&lt;Action1&gt;"
         },
         "&lt;OutboundTarget2&gt;": {
            "semanticObject": "&lt;SemanticObject2&gt;",
            "action": "&lt;Action2&gt;"
         }
      }
   }
}

....
....</pre></div></div></section><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">
"sap.ui.generic.app": {
      "_version": "1.3.0",
      "settings": {
         "externalNavigationSettings": {
            "defaultOutboundSettings": {
               "refreshStrategyOnAppRestore": {
                  "entitySets": {
                     "&lt;EntitySetToRefresh&gt;": "&lt;self/includingDependents&gt;",
                     "&lt;AnotherEntitySetToRefresh&gt;": "&lt;self/includingDependents&gt;"
                  }
               }
            },
            "outbounds": {
               "&lt;OutboundTarget1&gt;": {
                  "refreshStrategyOnAppRestore": {
                     "entitySets": {
                        "&lt;EntitySetToRefresh&gt;": "&lt;self/includingDependents&gt;",
                        "&lt;AnotherEntitySetToRefresh&gt;": "&lt;self/includingDependents&gt;"
                     }
                  }
               },
               "&lt;OutboundTarget2&gt;": {
                  "refreshStrategyOnAppRestore": {
                     "entitySets": {
                        "&lt;EntitySetToRefresh&gt;": "&lt;self/includingDependents&gt;",
                        "&lt;AnotherEntitySetToRefresh&gt;": "&lt;self/includingDependents&gt;"
                     }
                  }
               }
            }
         }
      }
      ...
      ...
   }
</pre></div></div></section><p></p></div></div>
				<p></p>
				<p><span class="emphasis">Navigation Using Extensions</span></p>
				<p>The following sample code shows you how to use extensions to navigate back to the souce application:</p>
				<div class="note other samplecode collapsible"><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>Extension
					Class</p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">onListNavigationExtension: function (oEvent) {
	var oNavigationController = this.extensionAPI.getNavigationController();
	oNavigationController.navigateExternal("&lt;OutboundTarget&gt;");
	return true;
}</pre></div></div></section><p></p></div></div>
				<div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>manifest.json</p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">

"sap.app": {
   ...
   "crossNavigation": {
      "outbounds": {
         "&lt;OutboundTarget&gt;": {
            "semanticObject": "&lt;SemanticObject&gt;",
            "action": "&lt;Action&gt;"
         }
      }
   }
}

....
....

"sap.ui.generic.app": {
      "settings": {
         "externalNavigationSettings": {
            "outbounds": {
               "&lt;OutboundTarget&gt;": {
                  "refreshStrategyOnAppRestore": {
                     "entitySets": {
                        "&lt;EntitySetToRefresh&gt;": "&lt;self/includingDependents&gt;",
                        "&lt;AnotherEntitySetToRefresh&gt;": "&lt;self/includingDependents&gt;"
                     }
                  }
               }
            }
         }
    }
      ...
      ...
   }
</pre></div></div></section><p></p></div></div>
				<div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
					</p><p>If the back-end service isn't ETag enabled, and the table in List Report is configured to be refreshed in Flexible Column
						Layout mode, the refresh is triggered for all of the table's entity set dependents. To avoid this, enable ETag for your
						back-end service.</p>
				<p></p></div></div>
				<p><span class="emphasis">Refresh in Scenarios Involving Navigation from Reuse Component or Extension View</span></p>
				<p> Applications can also configure refresh on back navigation when the navigation was triggered using smart link from the reuse
					component or an extension view.</p>
				<p>The following sample code shows you a <code>stStart</code> function of a reuse component where extension API
						<code>setRefreshBehaviour</code> is used to refresh an entity set:</p>
				<div class="note other samplecode collapsible"><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>
					</p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">stStart: function(oModel, oBindingContext, oExtensionAPI) {
            var oComponentModel = this.getComponentModel();
            var oBinding = oComponentModel.bindProperty("/state");
            oBinding.attachChange(function(){
                oExtensionAPI.onCustomStateChange();
                this.setMessage();
            }.bind(this));
            this.adaptToBindingContext(oBindingContext);
            var oNavPopOverLink = this.getRootControl().getContent()[0].getContent()[7];
            var oNavigationController = oExtensionAPI.getNavigationController();
            oNavPopOverLink.setBeforeNavigationCallback(oNavigationController.setRefreshBehaviour.bind(null,"EPMSalesOrder"));
        },
</pre></div></div></section>
				<p></p></div></div>
			</section></div></section><section id="section_sb4_tsp_brb" class="collapsible expanded"><div class="collapsible-icon sap-icon"><h2 class="title collapsible expanded">Additional Features in SAP Fiori Elements for OData V4</h2></div><div class="fig"><section>
				<h3 class="title ">Overriding the Default Refresh Mechanism</h3>
				<p>The configuration is specified for each page and the most specific configuration, based on the external navigation that is
					performed, is considered. The following logic is applied:</p>
				<ul class="ul ">
					<li class="li">
						<p>If there is a configuration specified for the exact semantic object-action that matches the external navigation, then this
							configuration is used.</p>
					</li>
					<li class="li">
						<p>If no such configuration is found, but if there is a configuration for the same semantic object, then this is used.</p>
					</li>
					<li class="li">
						<p>If this is also not found, then the default configuration of the page level is used (if defined).</p>
					</li>
				</ul>
				<p>Examples of the applied logic are shown in the following sample code:</p>
				<div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>Manifest configuration for the refresh strategies in <code>sap-keep-alive</code>
					mode</p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">{
    "sap.ui5": {
        "routing": {
            "targets": {
                "SalesOrderManageList": {
                    "type": "Component",
                    "id": "SalesOrderManageList",
                    "name": "sap.fe.templates.ListReport",
                    "options": {
                        "settings": {
                            ...
                            "refreshStrategyOnAppRestore": {
                                "defaultBehavior": {
                                    "SalesOrderManage": "self"
                                }
                            }
                        }
                    }
                },
                "SalesOrderManageObjectPage": {
                    "options": {
                        "settings": {
                            ...
                            "refreshStrategyOnAppRestore": {
                                "intents": {
                                    "v4Freestyle": { // This block is considered if the block above is NOT matched but the external navigation before we landed on this page only matches the Semantic Object specified here and NOT the action part
                                        "SalesOrderItem": "includingDependents" 
                                    },
                                    "v4Freestyle-Inbound": { // This block is considered if the external navigation before we landed on this page matches exactly the Semantic Object-Action specified here
                                        "SalesOrderItem": "includingDependents"
                                    }
                                },
                                "defaultBehavior": { // This block is used if the external navigation before we landed on this page does NOT match the above blocks. This can happen for navigations where the Semantic Object is different from what is specified above.
                                    "SalesOrderManage/_Item": "includingDependents"
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}</pre></div></div></section><p></p></div></div>
			</section><section>
				<h3 class="title ">Switching Off the Default Refresh Behavior During Chevron Navigation</h3>
				<p>Applications can choose to switch off the default refresh behavior that happens when an external chevron navigation is triggered.
					To achieve this, keep an empty block within the manifest configuration as shown in the following sample code:</p>
				<div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>Switching off the default refresh behavior</p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">"refreshStrategyOnAppRestore": {
    "intents": {
        "v4Freestyle-Inbound": {
            "SalesOrderItem": "includingDependents" // Due to this override, only SalesOrderItem and dependents are refreshed for V4FreeStyle-Inbound So-Action external navigation
        },
        "v4Freestyle": {} // Due to this override, for all other intents from V4FreeStyle SO other than Inbound, no refresh is done (including when going to such a target via chevron navigation which normally triggers a default refresh of the table)
    }  
}</pre></div></div></section><p></p></div></div>
				<p>This does <span class="emphasis">not</span> affect the default refresh behavior of the table entity set when external navigation is
					triggered for a Create case.</p>
				<div class="note remember  "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Remember
				</strong></div></div><div class="fig"><p>
					</p><ul class="ul ">
						<li class="li">
							<p>The refresh mechanism explained earlier is <span class="emphasis">only</span> for refreshing the data seen on that page after
								navigating back from an external target. After the user navigates back from the external target, if the user then
								navigates forward via the standard internal navigation provided by SAP Fiori elements (for example, to a detail page), a data
								request is always sent to the back end â€“ irrespective of the configuration given above. For back navigation within the
								app (internal navigation), the refresh is based on the refresh strategy for the page from where the external
								navigation was triggered.</p>
						</li>
						<li class="li">
							<p>When specifying an entity set, application developers must note the following:</p>
							<ul class="ul ">
								<li class="li">
									<p>Begin with a forward slash ("/") if the entity is a containment-based entity (a parameterized entity) and if
										you need to specify the full path of the resulting entity ("/Customer/Set") in the same manner as specified
										via the <code>"contextPath"</code> manifest property. For more information, see the section <a href="topic/4bd7590569c74c61a0124c6e370030f6.html#loio4bd7590569c74c61a0124c6e370030f6/suppprting_parameterized_entities_subsection" title="4bd7590569c74c61a0124c6e370030f6.xml#loio4bd7590569c74c61a0124c6e370030f6/suppprting_parameterized_entities_subsection" class="sap-doc">Supporting
											Parameterized Entities</a> in <a href="topic/4bd7590569c74c61a0124c6e370030f6" title="You can configure filter bars in both list report applications and analytical list pages." class="sap-doc">Configuring Filter Bars</a>.</p>
								</li>
								<li class="li">
									<p>If it is not a containment scenario/parameterized entity but a regular entity set, then the slash is not
										required at the beginning (<code>"SalesOrderItem"</code>).</p>
								</li>
							</ul>
						</li>
					</ul>
				<p></p></div></div>
			</section></div></section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink hidden"><br><strong>Parent topic: </strong></div><div class="previousLink hidden"><br><strong>Previous: </strong></div><div class="nextLink hidden"><br><strong>Next: </strong></div></section><section class="relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig">
		<li><a href="topic/f1c2704cc302401ba935f18e6303f123" title="When sap-keep-alive is set to true, and the user navigates from one application to another, modifies some common data and navigates back to the source app, the data isn't refreshed automatically. You can add a custom code to perform a refresh of specific data." class="sap-doc">Refresh Data Set for Back Navigation when sap-keep-alive is Set to True</a></li>
	</ul></section></div></section></div></body></html>