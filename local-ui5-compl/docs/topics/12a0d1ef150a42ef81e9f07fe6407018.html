<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loio12a0d1ef150a42ef81e9f07fe6407018" class=" section topic"><div class="section-mdeditlink hidden">
				<a class="mdeditlink hidden" href="https://github.com/SAP-docs/sapui5/blob/main/docs/03_Get-Started/step-7-delete-12a0d1e.md">Edit on GitHub</a>
			</div><div class="collapsible-icon sap-icon innerTitle"><h2 class="title ">Step 7: Delete</h2></div><div class="fig"><div class="topictitle1 title"><h2 class="title ">Step 7: Delete</h2></div><div class="shortdesc">In this step, we make it possible to delete user data.</div><section id="section_bt4_fxc_z1b"><h2 class="title ">Preview</h2>
			<div><div class="fig"><img src="loio32509f45ef8549998c73af49b8cfaa01_LowRes.png" usemap="#"></div><span class="collapsible-icon sap-icon figcap title"><h2 class="title ">A new <span class="ph uicontrol">Delete User</span> button is added</h2></span></div></section><section id="section_tsr_gxc_z1b"><h2 class="title ">Coding</h2>
			<p>You can view and download all files at <a href="entity/sap.ui.core.tutorial.odatav4/sample/sap.ui.core.tutorial.odatav4.07" title="entity/sap.ui.core.tutorial.odatav4/sample/sap.ui.core.tutorial.odatav4.07" class="sap-doc" alt="entity/sap.ui.core.tutorial.odatav4/sample/sap.ui.core.tutorial.odatav4.07">OData V4 - Step 7</a>.</p></section><section id="section_pvc_fyc_z1b">
			<h2 class="title ">webapp/App.controller.js</h2>
			<section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">...
		onInit: function () {
			...
				oViewModel = new JSONModel({
					busy : false,
					hasUIChanges : false,<span class="emphasis">
					usernameEmpty : false,</span>
					order : 0
				});
			...
		},
		onCreate : function () {
			var oList = this.byId("peopleList"),
				oBinding = oList.getBinding("items"),
				oContext = oBinding.create({
					"UserName" : "",
					"FirstName" : "",
					"LastName" : "",
					"Age" : "18"
				});

			this._setUIChanges();
			this.getView().getModel("appView").setProperty("/usernameEmpty", true);

			oList.getItems().some(function (oItem) {
				if (oItem.getBindingContext() === oContext) {
					oItem.focus();
					oItem.setSelected(true);
					return true;
				}
			});
		},

<span class="emphasis">		onDelete : function () {
		    var oContext,
		        oSelected = this.byId("peopleList").getSelectedItem(),
		        sUserName;
 
		    if (oSelected) {
		        oContext = oSelected.getBindingContext();
		        sUserName = oContext.getProperty("UserName");
		        oContext.delete().then(function () {
		            MessageToast.show(this._getText("deletionSuccessMessage", sUserName));
		        }.bind(this), function (oError) {
		            this._setUIChanges();
		            if (oError.canceled) {
		                MessageToast.show(this._getText("deletionRestoredMessage", sUserName));
		                return;
		            }
		            MessageBox.error(oError.message + ": " + sUserName);
		        }.bind(this));
		        this._setUIChanges(true);
		    }
		},</span>

		onInputChange : function (oEvt) {
			if (oEvt.getParameter("escPressed")) {
				this._setUIChanges();
			} else {
				this._setUIChanges(true);
				if (oEvt.getSource().getParent().getBindingContext().getProperty("UserName")) {
					this.getView().getModel("appView").setProperty("/usernameEmpty", false);
				}
			}
		},

...</pre></div></div></section>
			<p>We add the <code>onDelete</code> event handler to the controller. In the event handler, we check whether an item is selected in the table
				and if so, we retrieve the binding context of the selection and call its <code>delete</code> method. By doing this, the context is
				removed from the table on the client side and the deletion is stored as a pending change in the update group of the table's list
				binding. A call to <code>_setUIChanges</code> ensures that the <code>appView</code> model reflects the deletion as a pending
				change and that the <span class="ph uicontrol">Save</span> button becomes enabled. The deletion will be submitted with all other changes related
				to the same update group once the <span class="ph uicontrol">Save</span> button is pressed. If the deletion fails on the server side, or the
				changes are reset via API, the related entity is restored in the table automatically. To distinguish these two situations, the
				rejected error has <code>canceled</code> set to <code>true</code> in case of a reset.</p>
		</section><section id="section_pp2_mxc_z1b"><h2 class="title ">webapp/App.view.xml</h2><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;mvc:View
	controllerName="sap.ui.core.tutorial.odatav4.controller.App"
	displayBlock="true"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"&gt;
	&lt;Shell&gt;
		&lt;App busy="{appView&gt;/busy}" class="sapUiSizeCompact"&gt;
			&lt;pages&gt;
				&lt;Page title="{i18n&gt;peoplePageTitle}"&gt;
					&lt;content&gt;
						&lt;Table
							id="peopleList"
							growing="true"
							growingThreshold="10"
							items="{
								path: '/People',
								parameters: {
									$count: true,
									$$updateGroupId : 'peopleGroup'
								}
							}"
			<span class="emphasis">							mode="SingleSelectLeft"</span>&gt;
							&lt;headerToolbar&gt;
								&lt;OverflowToolbar&gt;
									&lt;content&gt;
										&lt;ToolbarSpacer/&gt;
										&lt;SearchField
										.../&gt;
										&lt;Button
										.../&gt;
<span class="emphasis">										&lt;Button
											id="deleteUserButton"
											icon="sap-icon://delete"
											tooltip="{i18n&gt;deleteButtonText}"
											press=".onDelete"&gt;
											&lt;layoutData&gt;
												&lt;OverflowToolbarLayoutData priority="NeverOverflow"/&gt;
											&lt;/layoutData&gt;
										&lt;/Button&gt;</span>
										&lt;Button
										.../&gt;
										&lt;Button
										...&gt;
									&lt;/content&gt;
								&lt;/OverflowToolbar&gt;
							&lt;/headerToolbar&gt;
							&lt;columns&gt;
								...
							&lt;/columns&gt;
							&lt;items&gt;
								...
							&lt;/items&gt;
						&lt;/Table&gt;
					&lt;/content&gt;
					&lt;footer&gt;
						...
					&lt;/footer&gt;
				&lt;/Page&gt;
			&lt;/pages&gt;
		&lt;/App&gt;
	&lt;/Shell&gt;
&lt;/mvc:View&gt;</pre></div></div></section>
			<p>We change the <code>mode</code> of the table to <code>SingleSelectLeft</code>
				to make it possible to select a row.</p><p>We add the <span class="ph uicontrol">Delete</span>
				button to the toolbar. With the <code>OverflowToolbarLayoutData
					priority="NeverOverflow"</code> parameter, we make sure that the button is
				always visible.</p></section><section id="section_kl4_d1x_4cb">
			<h2 class="title ">webapp/i18n/i18n.properties</h2>
			<section class="lang-prefs"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">...
# Toolbar
...
<span class="emphasis">#XBUT: Button text for delete user
deleteButtonText=Delete User</span>
...
# Messages
...
<span class="emphasis">#XMSG: Message for user deleted
deletionSuccessMessage=User {0} deleted

#XMSG: Message for user restored (undeleted)
deletionRestoredMessage=User {0} restored</span>
...</pre></div></div></section>
			<p>We add the missing texts to the properties file.</p>
		</section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink"><br><strong>Parent topic: </strong><a href="topic/bcdbde6911bd4fc68fd435cf8e306ed0">OData V4 Tutorial</a></div><div class="previousLink"><br><strong>Previous: </strong><a href="topic/b4f12660538147f8839b05cb03f1d478">Step 6: Create and Edit</a></div><div class="nextLink"><br><strong>Next: </strong><a href="topic/a3e7cb6f671b4b839f37eb5f88429e41">Step 8: OData Operations</a></div></section><section class="relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig">
		<li><a href="topic/2613ebc835764abd9aefd2e6fa8b7392" title="The v4.Context.delete method deletes an entity on the server and updates the user interface accordingly." class="sap-doc">Deleting an Entity</a></li>
	</ul></section></div></section></div></body></html>