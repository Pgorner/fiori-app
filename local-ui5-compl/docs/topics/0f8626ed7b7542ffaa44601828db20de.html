<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loio0f8626ed7b7542ffaa44601828db20de" class=" section topic"><div class="section-mdeditlink hidden">
				<a class="mdeditlink hidden" href="https://github.com/SAP-docs/sapui5/blob/main/docs/03_Get-Started/step-22-custom-formatters-0f8626e.md">Edit on GitHub</a>
			</div><div class="collapsible-icon sap-icon innerTitle"><h2 class="title ">Step 22: Custom Formatters</h2></div><div class="fig"><div class="topictitle1 title"><h2 class="title ">Step 22: Custom Formatters</h2></div><div class="shortdesc">If we want to do a more complex logic for formatting properties of our data model, we
		can also write a custom formatting function. We will now add a localized status with a
		custom formatter, because the status in our data model is in a rather technical
		format.</div><section>
			<h2 class="title ">Preview</h2>
			<div><div class="fig"><img src="loio7aa185a90dd7495cb6ec30c96bc80a54_LowRes.png" title="A list of invoices is displayed below the panel" alt="A list of invoices is displayed below the panel" usemap="#"></div><span class="collapsible-icon sap-icon figcap title"><h2 class="title ">A status is now displayed with a custom formatter</h2></span></div>
		</section><section id="section_lp1_2nk_syb">
			<h2 class="title ">Coding</h2>
			<p>You can view and download all files at <a href="entity/sap.m.tutorial.walkthrough/sample/sap.m.tutorial.walkthrough.22" title="entity/sap.m.tutorial.walkthrough/sample/sap.m.tutorial.walkthrough.22" class="sap-doc" alt="entity/sap.m.tutorial.walkthrough/sample/sap.m.tutorial.walkthrough.22">Walkthrough - Step 22</a>.</p>
		</section><section id="section_mp1_2nk_syb">
			<h2 class="title ">webapp/model/formatter.js (New)</h2>
			<section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock"><span class="emphasis">sap.ui.define([], () =&gt; {
	"use strict";

	return {
		statusText(sStatus) {
			const oResourceBundle = this.getOwnerComponent().getModel("i18n").getResourceBundle();
			switch (sStatus) {
				case "A":
					return oResourceBundle.getText("invoiceStatusA");
				case "B":
					return oResourceBundle.getText("invoiceStatusB");
				case "C":
					return oResourceBundle.getText("invoiceStatusC");
				default:
					return sStatus;
			}
		}
	};
});</span></pre></div></div></section>
			<p>We create a new folder <code>model</code> in our app project. The new <code>formatter</code> file is placed in the model folder
				of the app, because formatters are working on data properties and format them for display on the UI. So far we did not have any
				model-related artifacts, except for the <code>Invoices.json</code> file, we will now add the folder
					<code>webapp/model</code> to our app. This time we do not extend from any base object but just return a JavaScript object with
				our <code>formatter</code> functions inside the <code>sap.ui.define</code> call.</p>
			<p>The <code>statusText</code> function gets the technical status from the data model as input parameter and returns the correct
				human-readable text from the <code>resourceBundle</code> file.</p><div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
					</p><p>In the above example, <code>this</code> refers to the controller instance as soon as the formatter gets called. We access
						the data model via the component using <code>this.getOwnerComponent().getModel()</code> instead of using
							<code>this.getView().getModel()</code>. The latter call might return <code>undefined</code>, because the view
						might not have been attached to the component yet, and thus the view can't inherit a model from the component.</p>
				<p></p></div></div><p></p>
			<p><span class="emphasis">Additional Information:</span></p>
			<ul class="ul ">
				<li class="li">
						<a href="api/sap.ui.core.mvc.Controller#methods/getOwnerComponent" title="api/sap.ui.core.mvc.Controller#methods/getOwnerComponent" class="sap-doc" alt="api/sap.ui.core.mvc.Controller#methods/getOwnerComponent">API Reference: <code>sap.ui.core.mvc.Controller#getOwnerComponent</code></a>.
					</li>
				<li class="li">
						<a href="api/sap.ui.core.mvc.Controller#methods/onInit" title="api/sap.ui.core.mvc.Controller#methods/onInit" class="sap-doc" alt="api/sap.ui.core.mvc.Controller#methods/onInit">API Reference: <code>sap.ui.core.mvc.Controller#onInit</code></a>.
					</li>
			</ul>
		</section><section>
			<h2 class="title ">webapp/view/InvoiceList.view.xml</h2>
			<section class="lang-xml"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;mvc:View
    controllerName="ui5.walkthrough.controller.InvoiceList"
    xmlns="sap.m"<span class="emphasis">
    xmlns:core="sap.ui.core"</span>
    xmlns:mvc="sap.ui.core.mvc"&gt;
    &lt;List
        headerText="{i18n&gt;invoiceListTitle}"
        class="sapUiResponsiveMargin"
        width="auto"
        items="{invoice&gt;/Invoices}"&gt;
        &lt;items&gt;
            &lt;ObjectListItem
                title="{invoice&gt;Quantity} x {invoice&gt;ProductName}"
                number="{
                    parts: [
                        'invoice&gt;ExtendedPrice',
                        'view&gt;/currency'
                    ],
                    type: 'sap.ui.model.type.Currency',
                    formatOptions: {
                        showMeasure: false
                    }
                }"
                numberUnit="{view&gt;/currency}"
                numberState="{= ${invoice&gt;ExtendedPrice} &gt; 50 ? 'Error' : 'Success' }"&gt;
                <span class="emphasis">&lt;firstStatus&gt;
                    &lt;ObjectStatus
                        core:require="{
                            Formatter: 'ui5/walkthrough/model/formatter'
                        }"
                        text="{
                            path: 'invoice&gt;Status',
                            formatter: 'Formatter.statusText.bind($controller)'
                        }"/&gt;
                &lt;/firstStatus&gt;</span>
            &lt;/ObjectListItem&gt;
        &lt;/items&gt;
    &lt;/List&gt;
&lt;/mvc:View&gt;</pre></div></div></section>
			<p>To load our formatter functions, we use the <a href="topic/b11d853a8e784db6b2d210ef57b0f7d7" title="Modules can be required in XML views and fragments and assigned to aliases which can be used as variables in properties, event handlers, and bindings." class="sap-doc"><code>require</code></a>
				attribute with the <code>sap.ui.core</code> namespace URI, for which the <code>core</code> prefix is already defined in our
				XML view. This allows us to write the attribute as <code>core:require</code>. We then add our custom formatter module to the list
				of required modules and assign it the <code>Formatter</code> alias, making it available for use within the view.</p>
			<p>We add a status using the <code>firstStatus</code> aggregation to our <code>ObjectListItem</code> that will display the status of our
				invoice. The custom formatter function is specified with the reserved <code>formatter</code> property of the binding syntax.
				There, we use our <code>Formatter</code> alias that holds our formatter functions in order to access the desired function via
					<code>Formatter.statusText</code>. When called, we want the <code>this</code> context to be set to the current view
				controller's context. To achieve this, we use <a href="topic/07e4b920f5734fd78fdaa236f26236d8" title="Data that is presented on the UI often has to be converted so that is human readable and fits to the locale of the user. On the other hand, data entered by the user has to be parsed and validated to be understood by the data source. For this purpose, you use formatters and data types." class="sap-doc"><code>.bind($controller)</code></a>.</p>
		</section><section>
			<h2 class="title ">webapp/i18n/i18n.properties</h2>
			<section class="lang-prefs"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock"># App Descriptor
appTitle=Hello World
appDescription=A simple walkthrough app that explains the most important concepts of SAPUI5

# Hello Panel
showHelloButtonText=Say Hello
helloMsg=Hello {0}
homePageTitle=Walkthrough
helloPanelTitle=Hello World
openDialogButtonText=Say Hello With Dialog
dialogCloseButtonText=Ok

# Invoice List
invoiceListTitle=Invoices
<span class="emphasis">invoiceStatusA=New
invoiceStatusB=In Progress
invoiceStatusC=Done</span></pre></div></div></section>
			<p>We add three new entries to the resource bundle that reflect our translated status
				texts. These texts are now displayed below the <code>number</code> attribute of
				the <code>ObjectListItem</code> dependent on the status of the invoice.</p>
		</section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink"><br><strong>Parent topic: </strong><a href="topic/3da5f4be63264db99f2e5b04c5e853db">Walkthrough Tutorial (JavaScript)</a></div><div class="previousLink"><br><strong>Previous: </strong><a href="topic/c98d57347ba444c6945f596584d2db45">Step 21: Expression Binding</a></div><div class="nextLink"><br><strong>Next: </strong><a href="topic/5295470d7eee46c1898ee46c1b9ad763">Step 23: Filtering</a></div></section><section class="relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig">
		<li><a href="topic/07e4b920f5734fd78fdaa236f26236d8" title="Data that is presented on the UI often has to be converted so that is human readable and fits to the locale of the user. On the other hand, data entered by the user has to be parsed and validated to be understood by the data source. For this purpose, you use formatters and data types." class="sap-doc">Formatting, Parsing, and Validating Data</a></li>
	</ul></section></div></section></div></body></html>