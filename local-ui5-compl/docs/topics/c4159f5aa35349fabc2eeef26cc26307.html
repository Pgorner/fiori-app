<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loioc4159f5aa35349fabc2eeef26cc26307" class=" section topic"><div class="section-mdeditlink hidden">
				<a class="mdeditlink hidden" href="https://github.com/SAP-docs/sapui5/blob/main/docs/09_Developing_Controls/propagating-design-time-metadata-for-composite-controls-c4159f5.md">Edit on GitHub</a>
			</div><div class="collapsible-icon sap-icon innerTitle"><h2 class="title ">Propagating Design-Time Metadata for Composite Controls</h2></div><div class="fig"><div class="topictitle1 title"><h2 class="title ">Propagating Design-Time Metadata for Composite Controls</h2></div><div class="shortdesc">If you want the controls used inside a composite control to behave differently as compared to being used stand-alone, the composite
        control needs to propagate different design-time metadata to the inner controls.</div><p>Composite controls in SAPUI5 internally reuse other SAPUI5 controls to create the required structure and to achieve the requested
            functionality. For example, <code>SmartGroup</code> creates and renders a <code>sap.m.Title</code> control to display the group's
            title. If you want the controls used inside a composite control to behave differently as compared to being used stand-alone, the composite
            control needs to propagate different design-time metadata to the inner controls.</p><p>The following table shows a hierarchical overview of the properties:</p><div class="tableWrapper "><div class="fig"><table border="1" id="table_hwm_vt2_2yb" class=" ">
				
				
				
				
				<thead>
					<tr>
						<th colspan="1" rowspan="1">
                            <p>Property</p>
                            <p>(Level 1)</p>
                        </th>
						<th colspan="1" rowspan="1">
                            <p>Property</p>
                            <p>(Level 2)</p>
                        </th>
						<th colspan="1" rowspan="1">
                            <p>Property</p>
                            <p>(Level 3)</p>
                        </th>
						<th colspan="1" rowspan="1">Description</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td colspan="1" rowspan="3"><code>aggregations: &lt;object&gt;</code></td>
						<td colspan="1" rowspan="1">
                            <p>-</p>
                        </td>
						<td colspan="1" rowspan="1">
                            <p>-</p>
                        </td>
						<td colspan="1" rowspan="1">
					</td></tr>
					<tr>
						<td colspan="1" rowspan="2"><code> &lt;aggregationName&gt;: &lt;object&gt;</code></td>
						<td colspan="1" rowspan="1">
                            <p>-</p>
                        </td>
						<td colspan="1" rowspan="1">
					</td></tr>
					<tr>
						<td colspan="1" rowspan="1"><code>propagateMetadata: &lt;function&gt;</code> (optional) </td>
						<td colspan="1" rowspan="1">
                            <p>For example, in forms, the form defines the context for all the groups and the fields inside the groups. So, the form
                                propagates the relevant container information to all groups, fields, etc. It defines a design-time metadata object
                                that extends or overrides existing metadata of a successor control.</p>
                            <p>If no metadata is to be propagated (can be based on a condition inside the function), the function is to return
                                    <code>false</code>.</p>
                            <p>The <code>propagateMetadata</code> function is called with two arguments: <code>oControl</code> and
                                    <code>oRelevantContainerContro</code>l. The second parameter is the control that has defined this propagation
                                function. It can be used if you need to know the relevant container during the execution of the function.</p>
                        </td>
					</tr>
				</tbody>
			</table></div></div><section id="section_u4w_s52_2yb">
			<h2 class="title ">Example</h2>
			<p>Let's imagine the following composite control:</p>
			<div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>Public API</p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">new NewFioriLayout({
    content : [
        new FieldControl("field1"),
        new FieldControl("field2")
    ],
    footer : [
        new Button()
    ]
})</pre></div></div></section><p></p></div></div>
			<div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>Actual UI5 control
                tree</p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">new NewFioriLayout({
    content: [ // Public API
        new FieldControl("field1"),
        new FieldControl("field2")
    ],
    _layout: // Hidden aggregation
        new SomeLayout({ // Control used internally
            left: {
                new FieldControl("field1") // Public controls are moved into the internal structure
            },
            right: {
                new FieldControl("field2") // Public controls are moved into the internal structure
            }
        })
    footer: [
        new Button()
    ]
})</pre></div></div></section><p></p></div></div>
			<p>To open up actions on the hidden aggregation that you want to map to the control's public API, and to define a different design-time behavior
                for inner controls, use <code>propagateMetadata</code>, like in the following example:</p>
			<div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>NewFioriLayout.designtime.js</p><section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">var oSomeLayoutDesigntime = {
    //designtime metadata that overwrites the regular designtime metadata of SomeLayout
}
var oButtonDesigntime = {
    //designtime metadata that overwrites the regular designtime metadata of SomeLayout
}
{
    ...
    aggregations: {
        content: {
            ignore: true // We will use the hidden aggregation, so no need for the public aggregation
        },
        _layout: {
            ignore: false, // Enable the hidden aggregation
            propagateMetadata: function(oInnerControl) {  // Will be called for all successor controls
                var sType = oInnerControl.getMetadata().getName();
                if (sType === "SomeLayout") {
                    return oSomeLayoutDesigntime;
                } else if (sType !== "FieldControl") {
                    return {
                        actions: null // Overwrites all actions for all other controls
                                      // Property changes and other technical changes (for example addXml) are still possible
                    };
                } else if (sType !== "AnotherFieldControl") {
                    return {
                        actions: "not-adaptable" // Overwrites all actions for all other controls and
                                                 // no property changes or other technical changes are possible (not editable/selectable)
                    };
                }
            },
            propagateRelevantContainer: true
        },
        footer: {
            propagateMetadata: function(oInnerControl) { // For example, forbid button in footer removal
                var sType = oInnerControl.getMetadata().getName();
                if (sType === "Button") {
                    return oButtonDesigntime;
                }
            }
        }
    // ...
}</pre></div></div></section><p></p></div></div>
		</section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink hidden"><br><strong>Parent topic: </strong></div><div class="previousLink hidden"><br><strong>Previous: </strong></div><div class="nextLink hidden"><br><strong>Next: </strong></div></section><section class="hidden relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig"></ul></section></div></section></div></body></html>