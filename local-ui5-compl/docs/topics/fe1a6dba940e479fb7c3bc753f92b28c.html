<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loiofe1a6dba940e479fb7c3bc753f92b28c" class=" section topic"><div class="section-mdeditlink hidden">
				<a class="mdeditlink hidden" href="https://github.com/SAP-docs/sapui5/blob/main/docs/05_Developing_Apps/content-security-policy-fe1a6db.md">Edit on GitHub</a>
			</div><div class="collapsible-icon sap-icon innerTitle"><h2 class="title ">Content Security Policy</h2></div><div class="fig"><div class="topictitle1 title"><h2 class="title ">Content Security Policy</h2></div><div class="shortdesc">Content Security Policy (CSP) adds an additional layer of security that can detect and mitigate certain types of attacks, such as
		cross-site scripting and data injection.</div><section id="section_zp5_qmq_crb">
			<p>CSP restricts the sources from which the browser is allowed to load resources, such as scripts, fonts, and images:</p>
			<ul class="ul ">
				<li class="li">
					<p>CSP mitigates and reports XSS attacks; CSP-compatible browsers only execute scripts loaded in source files that are received
						from allowed sources.</p>
				</li>
				<li class="li">
					<p>CSP also mitigates packet sniffing attacks by specifying the protocols that may be used on the web server, for example, specifying that
						content must be loaded from HTTPS.</p>
				</li>
			</ul>
			<p>CSP is either enabled via a configuration in the web server to return the Content-Security-Policy HTTP header (preferred solution), or via the
					<code>&lt;meta&gt;</code> element in the meta tags of an HTML page.</p>
			<p>For generic information about CSP, see <a href="https://www.w3.org/TR/CSP2/" title="https://www.w3.org/TR/CSP2/" class="external-link" target="_blank" rel="noopener">https://www.w3.org/TR/CSP2/</a>.</p>
		</section><section id="section_chc_tmq_crb"><h2 class="title ">CSP for SAPUI5 - Dos and Don'ts</h2><p>For
					SAPUI5, we recommend that developers build their apps CSP-compliant,
				in particular regarding the loading of resources and the use of inline scripts.</p><section>
				<h3 class="title ">Policies Without <code>script-src 'unsafe-inline'</code></h3>
			</section><p>To build CSP-compliant SAPUI5 without inline scripts, avoid
				the following:</p><ul class="ul ">
				<li class="li">
					<p><code>&lt;script&gt;</code> elements with inlined source code</p>
				</li>
				<li class="li">
					<p>Inline event handlers</p>
				</li>
				<li class="li">
					<p><code>javascript:</code> URLs</p>
				</li>
				<li class="li">
					<p><code>document.write()</code>, <code>createElement('script')</code>, and so on, if they are used to create inline
						scripts. Creating script references, such as <code>&lt;script src="..."&gt;&lt;/script&gt;</code>, or non-script content
						with them is okay.</p>
				</li>
			</ul><section>
				<h3 class="title ">Policies Without <code>script-src 'unsafe-eval'</code></h3>
				<p><code>eval()</code> is currently still required in some parts of SAPUI5 for
					synchronous loading and other functionality. However, we recommend loading JavaScript resources asynchronously, which also avoids
					the use of <code>eval()</code>. For more information about asynchronous loading, see <a href="topic/91f23a736f4d1014b6dd926db0e91070" title="The SAPUI5 framework has built-in support for modularizing comprehensive JavaScript applications. That means, instead of defining and loading one large bundle of JavaScript code, an application can be split into smaller parts which then can be loaded at runtime at the time when they are needed. These smaller individual files are called modules." class="sap-doc">Modules and Dependencies</a>. For more information about avoiding synchronous APIs that might lead to
						synchronous loading, see <a href="topic/491bd9c70b9f4c4d913c8c7b4a970833" title="Overview of the replacement of global functions with the factory functions" class="sap-doc">Deprecated Factories Replacement</a>.</p>
				<p>For a CSP policy that doesn't allow <code>eval()</code> you must also avoid the following elements when developing SAPUI5 apps:</p>
				<ul class="ul ">
					<li class="li">
						<p><code>new Function()</code></p>
					</li>
					<li class="li">
						<p><code>&lt;setTimeout(&lt;non-fn&gt;)</code></p>
						<p>This will be ignored silently and not create a timer without <code>'unsafe-eval'</code>, that is,
								<code>&lt;non-fn&gt;</code> is never executed. <code>setTimeout(&lt;fn&gt;)</code> works with and without
								<code>'unsafe-eval'</code>.</p>
					</li>
					<li class="li">
						<p><code>setInterval(&lt;non-fn&gt;)</code></p>
						<p>This will be ignored silently and not create a repeated timer without <code>'unsafe-eval'</code>, that is, the
								<code>&lt;non-fn&gt;</code> is never executed. <code>setInterval(&lt;fn&gt;)</code> works with and without the
								<code>'unsafe-eval'</code>.</p>
					</li>
				</ul>
			</section></section><section id="section_spl_4p3_2rb">
			<h2 class="title ">Test Your Policies with <code>Report-Only</code></h2>
			<div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
				</p><p>CSP is a complex subject with many interdependencies and dynamics. Example: A CSP-compliant control or function in your app might
					have a dependency to a deprecated API that is not fully CSP-compliant. In this case you may need to add
						<code>'unsafe-eval'</code> to the <code>script-src</code> directive. That's why it's important to test your policies
					to check this.</p>
			<p></p></div></div>
			<p>To test policies without enforcing them, set up CSP with the <code>Content-Security-Policy-Report-Only</code> response header and
				test with the <span class="emphasis">most restrictive</span> policy. Monitor the reports to add missing sources (see <a href="topic/fe1a6dba940e479fb7c3bc753f92b28c.html#loiofe1a6dba940e479fb7c3bc753f92b28c/directives" title="fe1a6dba940e479fb7c3bc753f92b28c.xml#loiofe1a6dba940e479fb7c3bc753f92b28c/directives" class="sap-doc">Directives</a>. When you have found the desired policy, replace the
					<code>Content-Security-Policy-Report-Only</code> header with <code>Content-Security-Policy</code> to enforce the
				policy.</p>
		</section><section id="directives">
			<h2 class="title ">Directives</h2>
			<p>To run an app in an environment in which CSP has been enabled, SAPUI5 requires the
				following CSP directives and source entries:</p><div class="tableWrapper "><div class="fig"><table border="1" id="table_sgn_vqq_crb" class=" ">
						
						
						
						
						
						
						<thead>
							<tr>
								<th colspan="1" rowspan="2">Directive</th>
								<th colspan="4" rowspan="1">Sources Required by the SAPUI5
									Framework</th>
								<th colspan="1" rowspan="1">Sources Required by the App</th>
							</tr>
							<tr>
								<th colspan="1" rowspan="1"><code>&lt;source hosting SAPUI5&gt;</code><p>(equals
											<code>'self'</code> if SAPUI5 is hosted
										with the app)</p></th>
								<th colspan="1" rowspan="1"><code>data:</code></th>
								<th colspan="1" rowspan="1"><code>blob:</code></th>
								<th colspan="1" rowspan="1">Other Sources</th>
								<th colspan="1" rowspan="1">Custom Sources (Including 'self' for the App's Own Origin)</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td colspan="1" rowspan="1"><code>script-src</code></td>
								<td colspan="1" rowspan="1" align="center"><span class="SAP-icons sapUiPositiveElement sapUiInheritedBackground" style="font-size:inherit;"></span><span class="$description/@outputclass"></span></td>
								<td colspan="1" rowspan="1">
								</td><td colspan="1" rowspan="1">
								</td><td colspan="1" rowspan="1">
									<p><code>'unsafe-eval'</code></p>
									<p>Required for synchronous loading of JavaScript resources.</p>
									<p>Required for the following libraries:</p><ul class="ul ">
											<li class="li"><code>sap.ca.ui</code> and scaffolding framework</li>
											<li class="li"><code>sap.makit</code></li>
											<li class="li"><code>sap.me</code></li>
											<li class="li"><code>sap.ui.commons</code></li>
											<li class="li"><code>sap.ui.ux3</code></li>
											<li class="li"><code>sap.uiext.inbox</code></li>
											<li class="li"><code>sap.viz.*</code> (deprecated part)</li>
											<li class="li"><code>sap.zen.*</code></li>
										</ul><p></p>
									<p>Most likely required for deprecated APIs, especially for programming model APIs, like old factories in the
											<code>sap.ui</code> namespace.</p>
									<p>Certain
										libraries at least partly still require
											<code>'unsafe-eval'</code>, including the
											following:</p><ul class="ul ">
											<li class="li"><code>sap.apf</code></li>
											<li class="li"><code>sap.collaboration</code></li>
											<li class="li"><code>sap.ovp</code></li>
											<li class="li"><code>sap.suite.ui.generic.template</code></li>
											<li class="li"><code>sap.rules.ui</code></li>
											<li class="li"><code>sap.ui.vbm</code></li>
											<li class="li"><code>sap.ushell</code></li>
										</ul>The above list assumes that the app runs using library
										preloads (recommended, see <a href="topic/408b40efed3c416681e1bd8cdd8910d4.html#loio408b40efed3c416681e1bd8cdd8910d4/section_LibraryPreloads" title="408b40efed3c416681e1bd8cdd8910d4.xml#loio408b40efed3c416681e1bd8cdd8910d4/section_LibraryPreloads" class="sap-doc">Ensure that Library Preloads are Enabled</a>). If
										the application runs without preloads, more libraries
										require <code>unsafe-eval</code>.<p></p>
								</td>
								<td colspan="1" rowspan="1">
									<ul class="ul ">
										<li class="li">Requires <code>'self'</code> for loading application resources.</li>
										<li class="li">May require <code>'unsafe-inline'</code> or <code>'unsafe-eval'</code> depending on custom
											scripts.</li>
									</ul>
								</td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>style-src</code></td>
								<td colspan="1" rowspan="1" align="center"><span class="SAP-icons sapUiPositiveElement sapUiInheritedBackground" style="font-size:inherit;"></span><span class="$description/@outputclass"></span></td>
								<td colspan="1" rowspan="1">
								</td><td colspan="1" rowspan="1">
								</td><td colspan="1" rowspan="1">
									<p><code>'unsafe-inline'</code></p>
									<p>Required for the following libraries:</p><ul class="ul ">
											<li class="li"><code>sap.ca.ui</code> and scaffolding framework</li>
											<li class="li"><code>sap.makit</code></li>
											<li class="li"><code>sap.me</code></li>
										<li class="li"><code>sap.ui.richtexteditor</code></li>
											<li class="li"><code>sap.ui.commons</code></li>
											<li class="li"><code>sap.ui.ux3</code></li>
											<li class="li"><code>sap.uiext.inbox</code></li>
											<li class="li"><code>sap.viz.*</code> (deprecated part)</li>
											<li class="li"><code>sap.zen.*</code></li>
										</ul><p></p>
									<p>Most likely required for deprecated APIs.</p>
									<p>Certain libraries at least partly still require <code>'unsafe-inline'</code>, including:</p><ul class="ul ">
											
											<li class="li"><code>sap.gantt</code></li>
											<li class="li"><code>sap.rules.ui</code></li>
											<li class="li"><code>sap.suite.ui.commons</code></li>
											<li class="li"><code>sap.ui.vbm</code></li>
											<li class="li"><code>sap.ui.vk</code></li>
											<li class="li"><code>sap.ushell</code></li>
											
										</ul><p></p>
								</td>
								<td colspan="1" rowspan="1">
									<ul class="ul ">
										<li class="li">May require <code>'self'</code> and additional locations for application-specific styles and
											themes.</li>
										<li class="li">Requires <code>'unsafe-inline'</code> for custom controls using inline styles.</li>
									</ul>
								</td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>img-src</code></td>
								<td colspan="1" rowspan="1" align="center"><span class="SAP-icons sapUiPositiveElement sapUiInheritedBackground" style="font-size:inherit;"></span><span class="$description/@outputclass"></span></td>
								<td colspan="1" rowspan="1">May be required by some specific SAPUI5
									functionality.</td>
								<td colspan="1" rowspan="1">May be required by some specific SAPUI5
									functionality.</td>
								<td colspan="1" rowspan="1">
								</td><td colspan="1" rowspan="1">May require <code>'self'</code> or additional locations for application-specific images (such as custom
									themes or images in the back end). </td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>font-src</code></td>
								<td colspan="1" rowspan="1" align="center"><span class="SAP-icons sapUiPositiveElement sapUiInheritedBackground" style="font-size:inherit;"></span><span class="$description/@outputclass"></span></td>
								<td colspan="1" rowspan="1">May be required by some specific SAPUI5
									functionality.</td>
								<td colspan="1" rowspan="1">
								</td><td colspan="1" rowspan="1">
								</td><td colspan="1" rowspan="1">May require <code>'self'</code> or additional locations for application-specific fonts. </td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>frame-src</code></td>
								<td colspan="1" rowspan="1">Required for using the support assistant and/or the diagnostics tool. Also required to avoid a fallback to
										<code>child-src</code>.*</td>
								<td colspan="1" rowspan="1">May be required by some specific SAPUI5
									functionality.</td>
								<td colspan="1" rowspan="1">May be required by some specific SAPUI5
									functionality.</td>
								<td colspan="1" rowspan="1">
								</td><td colspan="1" rowspan="1">May require additional locations depending on the integration, application, or test scenario.</td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>worker-src</code></td>
								<td colspan="1" rowspan="1" align="center"><span class="SAP-icons sapUiPositiveElement sapUiInheritedBackground" style="font-size:inherit;"></span><span class="$description/@outputclass"></span></td>
								<td colspan="1" rowspan="1">May be required by some specific SAPUI5
									functionality.</td>
								<td colspan="1" rowspan="1">May be required by some specific SAPUI5
									functionality.</td>
								<td colspan="1" rowspan="1">
								</td><td colspan="1" rowspan="1">
							</td></tr>
							<tr>
								<td colspan="1" rowspan="1"><code>child-src</code>**</td>
								<td colspan="1" rowspan="1" align="center"><span class="SAP-icons sapUiPositiveElement sapUiInheritedBackground" style="font-size:inherit;"></span><span class="$description/@outputclass"></span></td>
								<td colspan="1" rowspan="1">May be required by some specific SAPUI5
									functionality.</td>
								<td colspan="1" rowspan="1">May be required by some specific SAPUI5
									functionality.</td>
								<td colspan="1" rowspan="1">
								</td><td colspan="1" rowspan="1">
							</td></tr>
							<tr>
								<td colspan="1" rowspan="1"><code>connect-src</code></td>
								<td colspan="1" rowspan="1" align="center"><span class="SAP-icons sapUiPositiveElement sapUiInheritedBackground" style="font-size:inherit;"></span><span class="$description/@outputclass"></span></td>
								<td colspan="1" rowspan="1">
								</td><td colspan="1" rowspan="1">
								</td><td colspan="1" rowspan="1">Some specific SAPUI5 functionality may require
										<code>wss:</code>.</td>
								<td colspan="1" rowspan="1">Requires <code>'self'</code> for loading application resources. </td>
							</tr>
						</tbody>
					</table></div></div><p></p>
			<p>*In case <code>child-src</code> has been specified but no fallback for <code>frame-src</code> is intended, define
					<code>frame-src</code> with proper sources (could also be <code>'none'</code>).</p>
			<p>**<code>child-src</code> is still required for browsers that don't support <code>worker-src</code> yet.</p>
		</section><section id="section_c1k_gt3_2rb">
			<h2 class="title ">Specific Restrictions</h2>
			<p>The following functions and features require additional CSP source entries or have certain restrictions:</p><div class="tableWrapper "><div class="fig"><table border="1" id="table_p3t_st3_2rb" class=" ">
						
						
						
						<thead>
							<tr>
								<th colspan="1" rowspan="1">Library</th>
								<th colspan="1" rowspan="1">Topic</th>
								<th colspan="1" rowspan="1">Comment</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td colspan="3" rowspan="1" align="center" class="background_blue"><code><span class="emphasis">script-src
											'unsafe-eval'</span></code></td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>sap.ui.support</code></td>
								<td colspan="1" rowspan="1">Support Assistant - Temporary Rules</td>
								<td colspan="1" rowspan="1">For temporary rules in the Support Assistant, dynamic code execution is essential, so it can't be removed. Support Assistant detects
									whether dynamic code execution is allowed and informs the user if temporary rules can be used or not.</td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>sap.ushell</code></td>
								<td colspan="1" rowspan="1">Search, App Finder, Custom Tiles</td>
								<td colspan="1" rowspan="1"><code>script-src 'unsafe-eval'</code> is required for the App Finder and the rendering of custom tiles.
									It's also required to start the search function via a deep link.</td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>sap.viz</code></td>
								<td colspan="1" rowspan="1">VizContainer, typed charts </td>
								<td colspan="1" rowspan="1">VizContainer and old typed charts require synchronous loading of JavaScript.</td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>unified.shell</code></td>
								<td colspan="1" rowspan="1">Factsheets, Smart Business</td>
								<td colspan="1" rowspan="1">Factsheets and Smart Business (tiles) have not been fully adopted to run without synchronous loading
									yet.</td>
							</tr>
							<tr>
								<td colspan="3" rowspan="1" align="center" class="background_blue"><code><span class="emphasis">script-src
											'unsafe-inline'</span></code></td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>sap.ui.richtexteditor</code></td>
								<td colspan="1" rowspan="1">RichTextEditor</td>
								<td colspan="1" rowspan="1">
									<p>The following cases can cause CSP-relevant issues for inline
										scripts when the RichTextEditor is used:</p>
									<ul class="ul ">
										<li class="li">If you're using one of the following plugins:
												<code>linkchecker</code>,
												<code>preview</code></li>
										<li class="li">If you're using the <code>tinymce.ui.Iframe</code>
											widget</li>
									</ul>
									<p>See also <a href="topic/d4f3f1598373452bb73f2120930c133c" title="The sap.ui.richtexteditor offers functionality for text editing - like, for example, bullets, indentation, fonts, and coloring." class="sap-doc">sap.ui.richtexteditor</a>.</p>
								</td>
							</tr>
							<tr>
								<td colspan="3" rowspan="1" align="center" class="background_blue"><code><span class="emphasis">script-src
											'wasm-eval'</span></code></td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>sap.ui.core</code></td>
								<td colspan="1" rowspan="1">Hyphenation</td>
								<td colspan="1" rowspan="1">
									<p><code>script-src</code> requires <code>wasm-eval</code></p>
									<p>When native hyphenation is not available, a third-party library (Hyphenopoly) is used. This library uses WASM,
										which leads to CSP issues due to browser limitations. There is a fallback to <code>asm.js</code>, if WASM
										can't be used.</p>
								</td>
							</tr>
							<tr>
								<td colspan="3" rowspan="1" align="center" class="background_blue"><code><span class="emphasis">style-src
											'unsafe-inline'</span></code></td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>sap.m</code> and others</td>
								<td colspan="1" rowspan="1">Controls that display provided HTML text (for example <code>sap.m.FormattedText</code> and
										<code>sap.ui.core.HTML</code>)</td>
								<td colspan="1" rowspan="1">Certain controls display provided HTML text, for example <code>sap.m.FormattedText</code>. If the provided
									text contains a style attribute or a style element with inline styles, <code>'unsafe-inline'</code> is
									required for <code>style-src</code>.<p>It's recommended to use styling with the <code>class</code>
										attribute and external stylesheets.</p></td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>sap.ui.vk</code></td>
								<td colspan="1" rowspan="1">2D drawings (<code>sap.ui.vk.svg.Viewport</code>)</td>
								<td colspan="1" rowspan="1">When a 2D drawing is loaded, <code>sap.ui.vk.svg.Viewport</code> creates an SVG document that uses inline
									styles to define SVG drawing elements, colors, line styles, etc.</td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>sap.ushell</code></td>
								<td colspan="1" rowspan="1">Company Logo</td>
								<td colspan="1" rowspan="1">A console error related to the loading of the company logo is logged during startup of the SAP Fiori launchpad.
									Eventually, the logo is loaded as expected.</td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>sap.viz</code></td>
								<td colspan="1" rowspan="1">VizContainer, typed charts</td>
								<td colspan="1" rowspan="1">VizContainer and old typed charts require synchronous loading of JavaScript.</td>
							</tr>
							<tr>
								<td colspan="1" rowspan="1"><code>unified.shell</code></td>
								<td colspan="1" rowspan="1">Factsheets, Smart Business</td>
								<td colspan="1" rowspan="1">Factsheets and Smart Business (tiles) have not been fully adopted to run without inline styles yet.</td>
							</tr>
						</tbody>
					</table></div></div><p></p>
		</section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink hidden"><br><strong>Parent topic: </strong></div><div class="previousLink hidden"><br><strong>Previous: </strong></div><div class="nextLink hidden"><br><strong>Next: </strong></div></section><section class="hidden relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig"></ul></section></div></section></div></body></html>