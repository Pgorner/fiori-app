<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loio5cff8d1c3fb84c5db7a00f2daca125af" class=" section topic"><div class="section-mdeditlink hidden">
				<a class="mdeditlink hidden" href="https://github.com/SAP-docs/sapui5/blob/main/docs/03_Get-Started/step-14-expression-binding-5cff8d1.md">Edit on GitHub</a>
			</div><div class="collapsible-icon sap-icon innerTitle"><h2 class="title ">Step 14: Expression Binding</h2></div><div class="fig"><div class="topictitle1 title"><h2 class="title ">Step 14: Expression Binding</h2></div><div class="shortdesc">An expression binding lets you display a calculated value on the screen, which is derived from values found in a model object. This
		feature allows you to insert simple formatting or calculations directly into the data binding string. In this example, we're changing the
		color of the price depending on whether it's above or below a certain threshold. The threshold value is stored in the JSON model. </div><section>
			<h2 class="title ">Preview</h2>
			<div><div class="fig"><img src="loiob9fb758efb0a481cb88a412a0712972f_LowRes.png" title="The graphic has an explanatory text" alt="The graphic has an explanatory text" usemap="#"></div><span class="collapsible-icon sap-icon figcap title"><h2 class="title ">Prices are color-coded depending on a selected threshold</h2></span></div>
		</section><section>
			<h2 class="title ">Coding</h2>
			<p>You can view and download all files in the Demo Kit at <a href="entity/sap.ui.core.tutorial.databinding/sample/sap.ui.core.tutorial.databinding.14" title="entity/sap.ui.core.tutorial.databinding/sample/sap.ui.core.tutorial.databinding.14" class="sap-doc" alt="entity/sap.ui.core.tutorial.databinding/sample/sap.ui.core.tutorial.databinding.14">Data Binding - Step 14</a>.</p>
			<ol>
				<li class="li">
					<p>Add a new property called <code>priceThreshold</code> with a value of 20 to the <code>data.json</code> file.</p>
					<p><span class="emphasis">webapp/model/data.json</span></p><section class="language-json"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">{
	"firstName": "Harry",
	"lastName": "Hawk",
	"enabled": true,
	"address": {
		"street": "Dietmar-Hopp-Allee 16",
		"city": "Walldorf",
		"zip": "69190",
		"country": "Germany"
	},
	"salesAmount": 12345.6789,<span class="emphasis">
	"priceThreshold": 20,</span>
	"currencyCode": "EUR"
}</pre></div></div></section><p></p>
				</li>
				<li class="li">
					<p>In the <code>App.view.xml file</code>, add a new <code>numberState</code> property to the <code>ObjectListItem</code> element
						within the <code>List</code>. The value of this property is an expression that gets evaluated for each item. The
						expression compares each invoice value against the price threshold and returns a number state based on the result.</p>
					<p><span class="emphasis">webapp/view/App.view.xml</span></p><section class="lang-xml"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">...
	&lt;Panel headerText="{i18n&gt;panel3HeaderText}" class="sapUiResponsiveMargin" width="auto"&gt;
		&lt;List headerText="{i18n&gt;productListTitle}" items="{products&gt;/Products}"&gt;
			&lt;items&gt;
				&lt;ObjectListItem
					press=".onItemSelected"
					type="Active"
					title="{products&gt;ProductName}"
					number="{
						parts: [
							{path: 'products&gt;UnitPrice'},
							{path: '/currencyCode'}
						],
						type: 'sap.ui.model.type.Currency',
						formatOptions: { showMeasure: false }
					}"
					numberUnit="{/currencyCode}"
<span class="emphasis">					numberState="{= ${products&gt;UnitPrice} &gt; ${/priceThreshold} ? 'Error' : 'Success' }"&gt;</span>
					&lt;attributes&gt;
						&lt;ObjectAttribute text="{products&gt;QuantityPerUnit}"/&gt;
						&lt;ObjectAttribute title="{i18n&gt;stockValue}"
							text="{
								parts: [
									{path: 'products&gt;UnitPrice'},
									{path: 'products&gt;UnitsInStock'},
									{path: '/currencyCode'}
								],
								formatter: '.formatStockValue'
							}"/&gt;
					&lt;/attributes&gt;
				&lt;/ObjectListItem&gt;
			&lt;/items&gt;
		&lt;/List&gt;
	&lt;/Panel&gt;
...</pre></div></div></section><p></p>
				</li>
			</ol>
			<p>By binding an expression to the <code>numberState</code> property, the error status (color) of the price field changes depending on the
				invoice value.</p>
			<p>Consider the following two expressions:</p><ul class="ul ">
					<li class="li">
						<p><code>numberState="{= ${products&gt;UnitPrice} &gt; ${/priceThreshold} ? 'Error' : 'Success' }"</code></p>
					</li>
					<li class="li">
						<p><code>numberState="{= ${products&gt;UnitPrice} &lt;= ${/priceThreshold} ? 'Success' : 'Error' }"</code></p>
					</li>
				</ul> Can you see why one of these expressions works, and the other doesn't? <p></p>
			<p>Logically, both expressions are identical. However, the first one works, and the second one doesn't: it only produces an empty screen and an
				"Invalid XML" message in the browser's console. So, what's happening here?</p>
			<p>To understand the situation, you need to know how XML files are parsed.</p>
			<p>When an XML file is parsed, certain characters have a special (high-priority) meaning to the XML parser. When these characters are encountered,
				they're <span class="emphasis">always</span> interpreted to be part of the XML definition itself, and not as part of any other content within
				the XML document.</p>
			<p>The XML parser always interprets one of these high-priority characters (in this case, a less-than (<code>&lt;</code>) character)  as the
				start of a new XML tag. This happens regardless of any other meaning that character might have within the context of the expression.
				This is known as a <span class="emphasis">syntax collision</span>. </p>
			<p>In our case, the collision occurs between the syntax of XML and the syntax of the JavaScript-like expression language used by SAPUI5.</p>
			<p>Therefore, this statement fails because the less-than character is interpreted as the start of an XML tag: <code>numberState="{=
					${products&gt;UnitPrice} &lt;= ${/priceThreshold} ? 'Success' : 'Error' }"</code></p>
			<p>You can avoid this problem in one of two ways:</p><ul class="ul ">
					<li class="li">
						<p>Reverse the logic of the condition (use "greater than or equal to" instead of "less than")</p>
					</li>
					<li class="li">
						<p> Use the escaped value for the less-than character: <code>numberState="{= ${products&gt;UnitPrice} &amp;lt;=
								${/priceThreshold} ? 'Success' : 'Error' }"</code>
						</p>
					</li>
				</ul>Since using an escaped character is not so easy to read, we recommend reversing the logic of the condition and using a
				greater-than character instead.<p></p>
			<p>The ampersand (<code>&</code>) character also has a high-priority meaning to the XML parser. This character always means "The start of
				an escaped character". So, if you'd like to use the Boolean <code>AND</code> operator (<code>&&</code>) in a
				condition, you must escape both ampersand characters (<code>&amp;amp;&amp;amp;</code>).</p>
		</section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink"><br><strong>Parent topic: </strong><a href="topic/e5310932a71f42daa41f3a6143efca9c">Data Binding Tutorial</a></div><div class="previousLink"><br><strong>Previous: </strong><a href="topic/6c7c5c266b534e7ea9a28f861dc515f5">Step 13: Element Binding</a></div><div class="nextLink"><br><strong>Next: </strong><a href="topic/284a036c8ff943238fb65bf5a2676fb7">Step 15: Aggregation Binding Using a Factory Function</a></div></section><section class="relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig">
		<li><a href="topic/daf6852a04b44d118963968a1239d2c0" title="Expression binding is an enhancement of the SAPUI5 binding syntax, which allows for providing expressions instead of custom formatter functions." class="sap-doc">Expression Binding</a></li>
	</ul></section></div></section></div></body></html>