<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loio139a71f866ad4692a3af9023c089998a" class=" section topic"><div class="section-mdeditlink hidden">
				<a class="mdeditlink hidden" href="https://github.com/SAP-docs/sapui5/blob/main/docs/09_Developing_Controls/implementing-a-change-handler-139a71f.md">Edit on GitHub</a>
			</div><div class="collapsible-icon sap-icon innerTitle"><h2 class="title ">Implementing a Change Handler</h2></div><div class="fig"><div class="topictitle1 title"><h2 class="title ">Implementing a Change Handler</h2></div><div class="shortdesc">Here's how you write a change handler.</div><p>The custom change handler resides in the library of the control. Implement the following methods to write a change handler for a control:</p><div class="tableWrapper "><div class="fig"><table border="1" id="table_or5_5g2_2yb" class=" ">
				
				
				
				<thead>
					<tr>
						<th colspan="1" rowspan="1">Method</th>
						<th colspan="1" rowspan="1">Parameter</th>
						<th colspan="1" rowspan="1">Description</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td colspan="1" rowspan="4">
							<p><code>applyChange(oChange, oControl, mPropertyBag)</code></p>
							<p><code>revertChange(oChange, oControl, mPropertyBag)</code></p>
						</td>
						<td colspan="1" rowspan="1">
							<p>-&gt;</p>
						</td>
						<td colspan="1" rowspan="1">
							<p>Used at runtime to apply and revert the change. A change can be applied or reverted on a pure XML view or with the available SAPUI5 controls. </p>
							<p>When the user clicks <span class="ph uicontrol">Undo</span> in the in the UI adaptation header bar, the
									<code>revertChange</code> method is called. When the user clicks <span class="ph uicontrol">Redo</span> in the in the UI
								adaptation header bar, the <code>applyChange</code> method is called again.</p>
							<p>Always use the modifier from <code>mPropertyBag</code> to change the controls as this hides the difference between the XML node and real
									SAPUI5 controls.</p>
							<p>The method is also used at design time to create the change and record the <cite>undo</cite> behavior.</p>
							<p>It also interprets change data that have been created using <code>completeChangeContent()</code> and the change parameters of the
								control.</p>
							<p>If a new control is created during the process, it needs to be returned, otherwise no return value is needed.</p>
							<p>If the change doesn't pass a validation or if there's a problem, an error has to be thrown. This error is handled and shown in the
								console.</p>
						</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oChange</code></td>
						<td colspan="1" rowspan="1">Instance of a SAPUI5 flexibility change.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oControl</code></td>
						<td colspan="1" rowspan="1">Instance of a control or XML node representing the control from the change selector.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>mPropertyBag</code></td>
						<td colspan="1" rowspan="1">Contains the following: <section><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">{
     modifier: &lt;JSControlTreeModifier or XMLTreeModifier&gt;,
     view: &lt;view instance of an XML view node&gt;,
     appComponent: &lt;instance of an application component&gt;
}</pre></div></div></section></td>
					</tr>
					<tr>
						<td colspan="1" rowspan="3"><code>completeChangeContent(oChange, mChangeSpecificInfo)</code></td>
						<td colspan="1" rowspan="1">
							<p>-&gt;</p>
						</td>
						<td colspan="1" rowspan="1"><p>Converts the change-specfic information into the content of the change.</p><p><span class="emphasis">Never store control IDs in the
									change!</span> They contain app component prefixes that prevent applying such changes if the component prefix
								changes. Instead, store selectors and mark controls as dependent.</p><p>If there are texts in your change content, such as labels from the
									<cite>rename</cite> action, make sure to add them to the text section of the control using the following code:
								</p><code>oChange.setText(sKey, sText,
									sTranslationTextType)</code><p><code>sap.ui.fl.changeHandler.Base.setTextInChange(oChange, sKey, sText, sType)
								</code></p></td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oChange</code></td>
						<td colspan="1" rowspan="1">
							<p>Instance of an SAPUI5 flexibility change containing the raw information.</p>
							<p>The change content has to be filled in this method.</p>
						</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>mChangeSpecificInfo</code></td>
						<td colspan="1" rowspan="1">
							<p>Object containing the action-specific information for the current change.</p>
							<p>The concrete format is change-specific.</p>
						</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="15"><code>[getCondenserInfo(oChange, mPropertyBag)]</code> (optional)</td>
						<td colspan="1" rowspan="1">
							<p>-&gt;</p>
						</td>
						<td colspan="1" rowspan="1">Enables the <a href="topic/f4e064b604c8460781b01b0a9247b105" title="Condensing keeps change files clean." class="sap-doc">Condensing</a> information for the change handler.<p>Has to return an object with all
								necessary information depending on the classification.</p></td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oChange</code></td>
						<td colspan="1" rowspan="1">Instance of an SAPUI5 flexibility change.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>mPropertyBag</code></td>
						<td colspan="1" rowspan="1">See <code>applyChange</code>.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oReturn.affectedControl </code></td>
						<td colspan="1" rowspan="1">Selector (object containing <code>id</code> and the  <code>idIsLocal</code> flag) of the affected control, for example the moved
							control in case of a <cite>move</cite> action.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oReturn.classification </code></td>
						<td colspan="1" rowspan="1">Use the <code>sap.ui.fl.changeHandler.condenser.Classification</code> enum.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oReturn.uniqueKey</code></td>
						<td colspan="1" rowspan="1">
							<p>Unique identifier.</p>
							<p>Has to be unique per classification per control.</p>
						</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oReturn.sourceContainer </code></td>
						<td colspan="1" rowspan="1">Selector pointing to the source container.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oReturn.targetContainer </code></td>
						<td colspan="1" rowspan="1">Selector pointing to the target container.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oReturn.sourceIndex </code></td>
						<td colspan="1" rowspan="1">Source index.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oReturn.sourceAggregation </code></td>
						<td colspan="1" rowspan="1">Source aggregation name.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oReturn.targetAggregation</code></td>
						<td colspan="1" rowspan="1">Target aggregation name.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oReturn.setTargetIndex</code></td>
						<td colspan="1" rowspan="1">Function to set the target index in the change content.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oReturn.getTargetIndex</code></td>
						<td colspan="1" rowspan="1">Function to get the target index from the change content.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oReturn.updateContent</code></td>
						<td colspan="1" rowspan="1">Content that is passed to the update function of the receiving change.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oReturn.update</code></td>
						<td colspan="1" rowspan="1">Function to update the change with the content passed to this function.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="3"><code>[onAfterXMLChangeProcessing(oElement, mPropertyBag)]</code> (optional)</td>
						<td colspan="1" rowspan="1">
							<p>-&gt;</p>
						</td>
						<td colspan="1" rowspan="1">Optional hook that is called for every control on each change handler that applied a change on that control during XML change
								application.<p>Called once all changes for the control have been processed.</p></td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oElement</code></td>
						<td colspan="1" rowspan="1">The HTML element on which the change was applied.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>mPropertyBag</code></td>
						<td colspan="1" rowspan="1">See <code>applyChange</code>.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="3"><code>[getChangeVisualizationInfo(oChange, oAppComponent)]</code> (optional)</td>
						<td colspan="1" rowspan="1">
							<p>-&gt;</p>
						</td>
						<td colspan="1" rowspan="1">See <a href="topic/46e29bb05f2b41e2a8d21a2f5a9042db" title="Change visualization is a way for key users to get an overview of the changes that have been made on the UI." class="sap-doc">Change Visualization</a>.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>oChange</code></td>
						<td colspan="1" rowspan="1">Instance of an SAPUI5 flexibility change.</td>
					</tr>
					<tr>
						<td colspan="1" rowspan="1"><code>appComponent</code></td>
						<td colspan="1" rowspan="1">Component instance used to retrieve IDs (if needed).</td>
					</tr>
				</tbody>
			</table></div></div><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink hidden"><br><strong>Parent topic: </strong></div><div class="previousLink hidden"><br><strong>Previous: </strong></div><div class="nextLink hidden"><br><strong>Next: </strong></div></section><section class="hidden relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig"></ul></section></div></section></div></body></html>