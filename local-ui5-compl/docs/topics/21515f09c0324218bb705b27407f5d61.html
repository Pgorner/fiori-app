<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loio21515f09c0324218bb705b27407f5d61" class=" section topic"><div class="section-mdeditlink hidden">
				<a class="mdeditlink hidden" href="https://github.com/SAP-docs/sapui5/blob/main/docs/04_Essentials/using-controller-extension-21515f0.md">Edit on GitHub</a>
			</div><div class="collapsible-icon sap-icon innerTitle"><h2 class="title ">Using Controller Extension</h2></div><div class="fig"><div class="topictitle1 title"><h2 class="title ">Using Controller Extension</h2></div><div class="shortdesc">Controller extensions allow you to add functionality to existing applications. They can be used for extensibility purposes, for example by
        a customer wishing to extend SAP-delivered applications, or as a reusable part that is added to the original application.</div><section id="section_p4y_nvy_32b"><h2 class="title ">Overview</h2>The following sample code shows how to define an extension for an existing
                controller.<section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">sap.ui.define(['sap/ui/core/mvc/ControllerExtension', 'sap/ui/core/mvc/OverrideExecution'], function(ControllerExtension, OverrideExecution) {
  "use strict";
  return ControllerExtension.extend("my.extension.SampleExtension", {
    metadata: {
      // extension can declare the public methods
      // in general methods that start with "_" are private
      methods: {
        publicMethod: {
          public: true /*default*/ ,
          final: false /*default*/ ,
          overrideExecution: OverrideExecution.Instead /*default*/
        },
        finalMethod: {
          final: true
        },
        onMyHook: {
          public: true /*default*/ ,
          final: false /*default*/ ,
          overrideExecution: OverrideExecution.After
        },
        couldBePrivate: {
          public: false
        }
      }
    },

    // adding a private method, only accessible from this controller extension
    _privateMethod: function() {},
    // adding a public method, might be called from or overridden by other controller extensions as well
    publicMethod: function() {},
    // adding final public method, might be called from, but not overridden by other controller extensions as well
    finalMethod: function() {},
    // adding a hook method, might be called from but not overridden by other controller extensions
    // overriding these method does not replace the implementation, but executes after the original method
    onMyHook: function() {},
    // method public by default, but made private via metadata
    couldBePrivate: function() {},
    // this section allows to extend lifecycle hooks or override public methods of the base controller
    override: {
      // override onInit of base controller
      onInit: function() {},
      // override public method of the base controller
      basePublicMethod: function() {}
    }
  });
});
</pre></div></div></section><p>For
                more detailed information on lifecycle hooks and controller metadata, see <a href="topic/121b8e6337d147af9819129e428f1f75" title="A controller contains methods that define how models and views interact." class="sap-doc">Controller</a>.</p><section>
                <h3 class="title ">Custom Lifecycle Events</h3>
                <p>If you want to have additional lifecycle events like the standard <code>onInit</code> or <code>onExit</code> for developers
                    extending the controller, you can define them as described in this section.</p>
                <p>Controller extensions allow you to define custom lifecycle hooks. In the sample below, a custom lifecycle hook is defined by
                    specifying an <code>overrideExecution</code> function:</p>
                <section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">return ControllerExtension.extend("sap.my.ReuseExtension", {
        metadata: {
            methods: {
                "onFilterHook": {"public": true, "final": false, overrideExecution: OverrideExecution.After}
            }
        },
        //...
        /**
         * @abstract
         */
        onFilterHook: function(aFilter) {
        }
    });
</pre></div></div></section>
                <p>With <code>OverrideExecution.After</code>, the extensions are called in the order they are provided, with
                        <code>OverrideExecution.Before</code> the order is reversed and the last extension is called first.</p>
            </section><section>
                <h3 class="title ">Final Methods in Controller Extensions</h3>
                <p>Adding <code>"final": true</code> metadata to the public method makes it available for execution (call) but not for overriding
                    in the next controller extension.</p>
                <section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">return ControllerExtension.extend("sap.my.ReuseExtension", {
        metadata: {
            methods: {
                "myPublicMethod": {"public": true, "final": true}
            }
        },
        myPublicMethod: function() {
        }
    });
</pre></div></div></section>
            </section></section><section><section>
				<h3 class="title ">Accessing Controls in Controller Extensions</h3>
				<p>Only controls that belong to an extension are accessible by the <code>byId</code>
					function in a controller extension. These controls must be prefixed by the
					namespace of the controller extension. The namespace can be retrieved by calling
						<code>getMetadata().getNamespace()</code>. Here is an example of a valid
					ID: <code>my.controller.extension.MyControlId</code>.</p>
				<p>Using the <code>byId</code> of the base controller allows the accessing of all controls
					of the corresponding view by calling
						<code>this.base.byId(myControlId)</code>.</p>
			</section></section><section id="section_hrv_gcz_32b">
			<h2 class="title ">Integrating Controller Extensions into Controllers</h2>
			<p>Controller extensions can serve for reuse purposes. You can achieve this by including a
				controller extension to your controller as a member.</p>
			<section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">sap.ui.define(['sap/ui/core/mvc/Controller', 'my/extension/SampleExtension'], function(Controller, SampleExtension) {
    "use strict";
    return Controller.extend("sample.Main", {
        //include the extension
        sample: SampleExtension,
         
        _basePrivateMethod: function() {
            ...
        },
        basePublicMethod: function() {
     ...
    });
});
</pre></div></div></section>
			<p>If the controller is instantiated, all members that have a
          <code>ControllerExtension</code> associated will create an instance of these
        controller extensions.</p>
			<p>You can also override an extension directly in a controller.</p>
			<div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>
				</p><section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">sap.ui.define(['sap/ui/core/mvc/Controller', 'my/extension/SampleExtension'],
    function(Controller, SampleExtension) {
    "use strict";
    return MainController = Controller.extend("sample.Main", {
        //inline override of an extension. E.g. to provide a hook implementation
        sample: SampleExtension.override({
            someHook: function() {},
            someOtherMethod: function() {}
        }),
        onLifecycleHook: function() {
        }
    });
});
</pre></div></div></section>
			<p></p></div></div>
            <p>For information on integrating controller extensions into controllers in TypeScript, see <cite>Assigning Controller Extensions</cite>
                and <cite>Overriding Controller Extension Behavior</cite> in <a href="topic/21515f09c0324218bb705b27407f5d61.html#loio21515f09c0324218bb705b27407f5d61/section_UCETS" title="21515f09c0324218bb705b27407f5d61.xml#loio21515f09c0324218bb705b27407f5d61/section_UCETS" class="sap-doc">Using Controller Extension with TypeScript</a>.</p>
		</section><section id="section_UCETS">
            <h2 class="title ">Using Controller Extension with TypeScript</h2>
            <p>In UI5 JavaScript code, controller extensions may have an <code>override</code> definition block, containing methods like
                    <code>onInit</code> which are to be overridden by the extension. In TypeScript, the presence of a definition block with the
                same name as a static member of an ES6 class would lead to a name clash with the static UI5 method
                    <code>sap.ui.core.mvc.ControllerExtension.override</code>. Furthermore, specifying this block as a static member would not
                work — regardless of its name — because the<a href="https://github.com/ui5-community/babel-plugin-transform-modules-ui5/" title="https://github.com/ui5-community/babel-plugin-transform-modules-ui5/" class="external-link" target="_blank" rel="noopener"> transformer</a> would assign this
                block as a static member to the transformed UI5 class instead of moving it <span class="emphasis">into</span> the definition block of
                    <code>BaseClass.extend("ClassName", { ... })</code> where it is expected.</p>
            <p>We therefore offer the <code>overrides</code> keyword as an additional name for this definition block, so that controller
                extensions can be specified as ES6 classes in TypeScript as shown below. The transformer has been changed to handle the
                    <code>overrides</code> definition block in the correct way.</p>
            <p>
                </p><div class="note other samplecode "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Sample Code
				</strong></div></div><div class="fig"><p>
                    </p><section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">/**
 * @namespace my.sample
 */
export default class AppExtension extends ControllerExtension {
   static readonly overrides = {
     onInit: function() {
       // ...
     }
   }
}</pre></div></div></section>
                <p></p></div></div>
                <div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
                    </p><p>The <code>@namespace</code> comment is required for the extension class to be known by its full name at runtime, so it can
                        e.g. be referenced in the <code>manifest.json</code> when applying the controller extension.</p>
                <p></p></div></div>
            <p></p>
            <p>
                </p><div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
                    </p><p>The <code>overrides</code> keyword is only recognized by UI5 runtime versions 1.112 and higher.</p>
                    <p>When using the UI5 Babel transformer plugin, the <code>overridesToOverride</code> option must be set to enable its use with
                        older versions. It then changes the <code>overrides</code> keyword back to <code>override</code>, which is recognized
                        by older UI5 runtime versions.</p>
                    <p>When using the ui5-tooling-transpile task and middleware, which is recommended for the most convenient TypeScript setup and
                        internally uses the aforementioned UI5 Babel transformer plugin, you can enable this option by adding the required
                        configuration for ui5-tooling-transpile directly to the <code>ui5.yaml</code> file as follows:</p>
                    <p>
                        </p><section class="language-json"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">builder:
  customTasks:
  - name: ui5-tooling-transpile-task
    afterTask: replaceVersion
    <span class="emphasis">configuration:
      transformModulesToUI5:
        overridesToOverride: true</span>

[...]
server:
  customMiddleware:
  - name: ui5-tooling-transpile-middleware
    afterMiddleware: compression
    <span class="emphasis">configuration:
      transformModulesToUI5:
        overridesToOverride: true</span></pre></div></div></section>
                    <p></p>
                <p></p></div></div>
            <p></p>
            <section>
                <h3 class="title ">Assigning Controller Extensions</h3>
                <p>In JavaScript, when a controller uses a pre-defined controller extension, the respective extension class needs to be assigned to
                    the <code>extend</code> object under an arbitrary property name. In TypeScript, however, the class property should contain an
                    extension instance, as the controller code should interact with an instance — not the class — of the extension.</p>
                <p>To support this, the dummy method <code>ControllerExtension.use(...)</code> is introduced in the UI5 type definitions. This
                    method takes an extension class as its argument and claims to return an instance, allowing you to work with this instance in your
                    controller.</p>
                <p>Behind the scenes, the <code>ControllerExtension.use(...)</code> method call is removed by the UI5 Babel transformer plugin
                    when your TypeScript code is converted to JavaScript, so the UI5 runtime gets the extension class it needs to create a new
                    instance of the extension for each controller instance.</p><div class="note other example "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Example
				</strong></div></div><div class="fig"><p>
                        </p><section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">import Routing from "sap/fe/core/controllerextensions/Routing";
import ControllerExtension from "sap/ui/core/mvc/ControllerExtension";

/**
 * @namespace my.sample
 */
class MyController extends Controller {
  routing = ControllerExtension.use(Routing); // use the "Routing" extension provided by sap.fe
  
  someMethod() {
    this.routing.navigate(...);
  }
}
</pre></div></div></section>
                    <p></p></div></div><p></p>
                <div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
                    </p><p><code>ControllerExtension.use(...)</code> requires <code>babel-plugin-transform-modules-ui5</code> version 7.5.0 or
                        higher. If you use <code>ui5-tooling-transpile</code> instead, you have to make sure to execute <code>npm
                            update</code> in your project.</p>
                    <p>To have the transformer plugin recognize and remove the dummy method call, you must do the following:</p><ul class="ul ">
                            <li class="li">
                                <p>Call it on the <code>ControllerExtension</code> base class (imported from
                                        <code>sap/ui/core/mvc/ControllerExtension</code>), not on a class deriving from it.</p>
                            </li>
                            <li class="li">
                                <p>Assign the extension right in the class definition using an equal sign (not a colon as in JavaScript).</p>
                            </li>
                        </ul><p></p>
                <p></p></div></div>
            </section>
            <section>
                <h3 class="title ">Overriding Controller Extension Behavior</h3>
                <p>Some controller extensions allow implementing hooks or overriding their behavior. This can be done equally well in TypeScript:</p>
                <div class="note other example "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Example
				</strong></div></div><div class="fig"><p>
                    </p><section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">import Routing from "sap/fe/core/controllerextensions/Routing";
import ControllerExtension from "sap/ui/core/mvc/ControllerExtension";

/**
 * @namespace my.sample
 */
class MyController extends Controller {
  routing = ControllerExtension.use(Routing.override({
    someHook: function(...) { ... }
  })); // adapt the "Routing" extension provided by sap.fe
  
  someMethod() {
    this.routing.navigate(...);
  }
}
</pre></div></div></section>
                <p></p></div></div>
            </section>
        </section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink hidden"><br><strong>Parent topic: </strong></div><div class="previousLink hidden"><br><strong>Previous: </strong></div><div class="nextLink hidden"><br><strong>Next: </strong></div></section><section class="relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig">
        <li><a href="https://github.com/ui5-community/babel-plugin-transform-modules-ui5/" title="https://github.com/ui5-community/babel-plugin-transform-modules-ui5/" class="external-link" target="_blank" rel="noopener">UI5 Babel Transformer Plugin</a></li>
        <li><a href="api/sap.ui.core.mvc.ControllerExtension#methods/sap.ui.core.mvc.ControllerExtension.override" title="api/sap.ui.core.mvc.ControllerExtension#methods/sap.ui.core.mvc.ControllerExtension.override" class="sap-doc" alt="api/sap.ui.core.mvc.ControllerExtension#methods/sap.ui.core.mvc.ControllerExtension.override">API Reference: sap.ui.core.mvc.ControllerExtension.override</a></li>
    </ul></section></div></section></div></body></html>