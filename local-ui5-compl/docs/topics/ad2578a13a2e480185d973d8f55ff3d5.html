<html><head></head><body><div id="d4h5-main-container" class="dk-main"><section id="loioad2578a13a2e480185d973d8f55ff3d5" class=" section topic"><div class="section-mdeditlink hidden">
				<a class="mdeditlink hidden" href="https://github.com/SAP-docs/sapui5/blob/main/docs/03_Get-Started/step-5-adding-view-gallery-ad2578a.md">Edit on GitHub</a>
			</div><div class="collapsible-icon sap-icon innerTitle"><h2 class="title ">Step 5: Adding View Gallery</h2></div><div class="fig"><div class="topictitle1 title"><h2 class="title ">Step 5: Adding View Gallery</h2></div><div class="shortdesc">In this step, you will be adding the <code>sap.ui.vk.ViewGallery</code> control
        to a 3D Viewer application. </div><div class="note   "><div class="collapsible-icon sap-icon"><div class="title"><strong>
					Note
				</strong></div></div><div class="fig"><p>
            </p><p>The <span class="ph uicontrol">sap.ui.vk.ViewGallery</span> control is the successor of the
                    <span class="ph uicontrol">sap.ui.vk.StepNavigation</span> control. The
                    <span class="ph uicontrol">sap.ui.vk.StepNavigation</span> control can only be used with
                the legacy DVL rendering engine. All new applications should switch to ThreeJs
                rendering engine and <span class="ph uicontrol">sap.ui.vk.ViewGallery</span> control.</p>
        <p></p></div></div><p>Sometimes, you may encounter a 3D model that has a sequence of animations associated with
            it. The <code>ViewGallery</code> control allows you to display the steps in the
            animation sequence, navigate to the individual steps in the animation sequence, and play
            the animation in a single step or in all of the steps.</p><p>The content in this step builds on the code from <a href="topic/773a0088c5a54d0cbeb985c347cb643f" title="In this step, you will be adding an sap.ui.vk.SceneTree control to your 3D Viewer application." class="sap-doc">Step 4: Adding a Scene Tree</a>, and code changes performed in this
            step of the tutorial are done in relation to the files in <a href="topic/773a0088c5a54d0cbeb985c347cb643f" title="In this step, you will be adding an sap.ui.vk.SceneTree control to your 3D Viewer application." class="sap-doc">Step 4: Adding a Scene Tree</a>.</p><section>
            <h2 class="title ">Preview</h2>
            <div><div class="fig"><img src="loioa0285c1735644965bda939adaaf2ce6c_LowRes.png" usemap="#"></div><span class="collapsible-icon sap-icon figcap title"><h2 class="title ">Viewer application with a View Gallery, Viewport, and Scene Tree</h2></span></div>
        </section><section>
            <h2 class="title ">Coding</h2>
            <p>You can view and download all files at <a href="entity/sap.ui.vk.tutorial.VIT/sample/sap.ui.vk.tutorial.VIT.05" title="entity/sap.ui.vk.tutorial.VIT/sample/sap.ui.vk.tutorial.VIT.05" class="sap-doc" alt="entity/sap.ui.vk.tutorial.VIT/sample/sap.ui.vk.tutorial.VIT.05">3D Viewer - Step 5 - Add Step Navigation
                        control</a>.</p>
        </section><section><section>
                <h3 class="title ">index.html</h3>
                <p>Update the <code>index.html</code> file to reference the
                        <code>viewportScenetreeStepnav</code> namespace, which will be the
                    namespace we'll use for the sample application in this step.</p>
                <section class="lang-html"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/&gt;
    &lt;script id="sap-ui-bootstrap"
        src="https://ui5.sap.com/resources/sap-ui-core.js"
        data-sap-ui-theme="sap_horizon"
        data-sap-ui-compat-version="edge"
        data-sap-ui-async="true"
        data-sap-ui-libs="sap.ui.vk, sap.m, sap.ui.core"
        data-sap-ui-resource-roots='{
            <span class="emphasis">"viewportScenetreeStepnav": "./"</span>
        }'&gt;
    &lt;/script&gt;
    &lt;script&gt;
    sap.ui.getCore().attachInit(function(){
        new sap.m.Shell({
            app: new sap.ui.core.ComponentContainer({
                <span class="emphasis">name : "viewportScenetreeStepnav"</span>
            })
        }).placeAt("content");
    });
    &lt;/script&gt;
    &lt;/head&gt;
    &lt;body id="content" class="sapUiBody"&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre></div></div></section>
            </section><section>
                <h3 class="title ">Component.js</h3>
                <p>Update the <code>Component.js</code> file to reference the namespace
                    specified for this application.</p>
                <section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">sap.ui.define([
    "sap/ui/core/UIComponent"
], function (UIComponent) {
    "use strict";
    <span class="emphasis">return UIComponent.extend("viewportScenetreeStepnav.Component",</span> {
        metadata: {
            manifest: "json"
        },
        init: function () {
            // call the init function of the parent
            UIComponent.prototype.init.apply(this, arguments);
        }
    });
});</pre></div></div></section>
            </section><section>
                <h3 class="title ">i18n.properties</h3>
                <p>Because we are not creating any fields that a user can interact with, we only
                    have one line of code which specifies what the label for the page title is.</p>
                <section class="lang-prefs"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock"># Page Descriptor
<span class="emphasis">pageTitle=Viewport with Scene Tree and View Gallery</span></pre></div></div></section>
            </section><section>
                <h3 class="title ">manifest.json</h3>
                <p>Update the <code>manifest.json</code> file so that it references the correct
                    files.</p>
                <section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">{
    "_version": "1.8.0",
    "sap.app": {
        <span class="emphasis">"id": "viewportScenetreeStepnav",</span>
        "type": "application",
        "i18n": "i18n/i18n.properties",
        "title": "{{appTitle}}",
        "description": "{{appDescription}}",
        "applicationVersion": {
            "version": "1.0.0"
        }
    },
    "sap.ui": {
        "technology": "UI5",
        "deviceTypes": {
            "desktop": true,
            "tablet": true,
            "phone": true
        }
    },
    "sap.ui5": {
        <span class="emphasis">"rootView": "viewportScenetreeStepnav.view.App",</span>
        "dependencies": {
            "minUI5Version": "1.30",
            "libs": {
                "sap.m": {}
            }
        },
        "models": {
            "i18n": {
                "type": "sap.ui.model.resource.ResourceModel",
                "settings": {
                    <span class="emphasis">"bundleName": "viewportScenetreeStepnav.i18n.i18n"</span>
                }
            }
        }
    }
</pre></div></div></section>
            </section><section>
                <h3 class="title ">App.view.xml</h3>
                <p>In this file, we have added a `&lt;vk:ViewGallery&gt;` element to this file. We use
                    this file to specify the width and height of the <code>ViewGallery</code>
                    control on the screen.</p>
                <section class="lang-xml"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">&lt;mvc:View
        <span class="emphasis">controllerName="viewportScenetreeStepnav.controller.App"</span>
        xmlns="sap.m"
        xmlns:mvc="sap.ui.core.mvc"
        xmlns:vk="sap.ui.vk"
        xmlns:l="sap.ui.layout"
        xmlns:f="sap.ui.layout.form"
        xmlns:u="sap.ui.unified"
        displayBlock="true"&gt;
    &lt;App id="viewportScenetreeStepnav"&gt;
        &lt;Page
                title="{i18n&gt;pageTitle}"&gt;
<span class="emphasis">                &lt;vk:ViewGallery
                id="ViewGallery" /&gt;</span>
            &lt;vk:Viewport
                    id="viewport"
                    width="100%"
                    height="50%"/&gt;
            &lt;vk:SceneTree
                    id="scenetree" /&gt;
        &lt;/Page&gt;
    &lt;/App&gt;
&lt;/mvc:View&gt;</pre></div></div></section>
            </section><section>
                <h3 class="title ">App.controller.js</h3>
                <p>The highlighted sections in the following code block indicate the additions and
                    changes made in the code to incorporate step navigation in the 3D Viewer
                    application.</p>
                <section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">sap.ui.define([
    "sap/base/Log",
    "sap/ui/core/mvc/Controller",
    "sap/ui/vk/ContentResource",
    "sap/ui/vk/ContentConnector",
    "sap/ui/vk/ViewStateManager",
    "sap/ui/vk/AnimationPlayer",
    "sap/ui/vk/ViewManager"
], function (Log, Controller, ContentResource, ContentConnector, ViewStateManager, AnimationPlayer, ViewManager) {   
    "use strict";
    var contentResource = new ContentResource({
        source: "models/cooper.vds",
        sourceType: "vds4",
        id: "abc123"
    });
    <span class="emphasis">return Controller.extend("viewportScenetreeStepnav.controller.App", </span>{
        onInit: function() {
            var view = this.getView();
            var viewport = view.byId("viewport");
            var sceneTree = view.byId("scenetree");
            var viewGallery = view.byId ("ViewGallery");
            var contentConnector = new ContentConnector();
            var viewStateManager = new ViewStateManager({
                contentConnector: contentConnector
            
            });
            var animationPlayer = new AnimationPlayer({
                viewStateManager: viewStateManager
            });
    
            var viewManager = new ViewManager({
                contentConnector: contentConnector,
                animationPlayer: animationPlayer
            });
            viewStateManager.setViewManager(viewManager);
            viewport.setContentConnector(contentConnector);
            viewport.setViewStateManager(viewStateManager);
            sceneTree.setContentConnector(contentConnector);
            sceneTree.setViewStateManager(viewStateManager);
            viewGallery.setContentConnector(contentConnector);
            viewGallery.setHost(viewport);
            viewGallery.setViewManager(viewManager);
            contentConnector.addContentResource(contentResource);
        }
    });
});</pre></div></div></section>
                <p>Let us look at the changes in more detail.</p>
                <p>The following line of code gets reference to a new <code>ViewGallery</code>
                    object.</p>
                <section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">var stepNavigation = view.byId ("ViewGallery");</pre></div></div></section>
                <p>We then wire several objects with the <code>ViewGallery</code> object, so
                    that the animation sequences in the model are displayed in the
                        <code>ViewGallery</code> control.</p>
                <section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">var animationPlayer = new AnimationPlayer({
    viewStateManager: viewStateManager
});
var viewManager = new ViewManager({
    contentConnector: contentConnector,
    animationPlayer: animationPlayer
});
viewStateManager.setViewManager(viewManager);</pre></div></div></section>
                <p>The <code>ViewGallery</code> control also needs a reference to
                        <code>ContentConnector</code> to be able to react on scene loading
                    events. We also need to associate <code>ViewGallery</code> with
                        <code>Viewport</code>:</p>
                <section class="lang-js"><div class="fig fig-codeblock"><div class="copyButton"><span style="display: none;">Hidden</span></div><div class="codeblock-wrapper"><pre class="codeblock">viewGallery.setContentConnector(contentConnector);
viewGallery.setHost(viewport);
viewGallery.setViewManager(viewManager);</pre></div></div></section>
                <p>Now we can run our application and see a model loaded in the Viewport, and now we
                    can also see thumbnail images for animated views (steps) displayed in the View
                    Gallery. By clicking on any of the thumbnails we can activate an animation from
                    that view.</p>
            </section></section><section>
            <h2 class="title ">API Reference</h2>
            <ul class="ul ">
                <li class="li"><a href="api/sap.ui.vk.ViewGallery" title="api/sap.ui.vk.ViewGallery" class="sap-doc" alt="api/sap.ui.vk.ViewGallery"><code>sap.ui.vk.ViewGallery</code></a></li>
            </ul>
        </section><section class="contentInSection hidden"><h2>In this section:</h2></section><section class="familyLinks"><div class="parentLink hidden"><br><strong>Parent topic: </strong></div><div class="previousLink hidden"><br><strong>Previous: </strong></div><div class="nextLink hidden"><br><strong>Next: </strong></div></section><section class="relatedLinks "><div class="collapsible-icon sap-icon title"><h2>Related information</h2></div><ul class="fig">
        <li><a href="topic/4717af4919e34245ba91905be4b57836" title="4717af4919e34245ba91905be4b57836.xml" class="sap-doc">View Gallery</a></li>
    </ul></section></div></section></div></body></html>