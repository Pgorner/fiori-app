import type { MockDataContributor } from "@sap-ux/ui5-middleware-fe-mockserver";
import type { ChildEntityType } from "./types";

const ChildEntityWithSE: MockDataContributor<object> = {
	async executeAction(actionDefinition, actionData, keys, odataRequest) {
		if (actionDefinition.name === "generateMessage") {
			const entries: Array<ChildEntityType> = (await this.base?.fetchEntries(keys, odataRequest)) as Array<ChildEntityType>;
			entries[0]["SAP_Message"] = [
				{
					code: "XXX",
					message: "A notification has been generated by the global SideEffects",
					numericSeverity: 2,
					transition: true,
					target: "item",
					longtextUrl: ""
				}
			];
			await this.base?.updateEntry(keys, entries[0], odataRequest);
			return undefined; // this action does not return anything
		}
	}
};
export default ChildEntityWithSE;
