{"version":3,"file":"PluginController.test.js","names":["__exports","errorLogStub","QUnit","module","beforeEach","sinon","stub","Log","afterEach","restore","test","assert","pxApiWrapper","pxApi","isUserInitiatedFeedbackEnabled","resourceBundle","pluginController","PluginController","initUserInitiatedFeedbackStub","prepareThemingSupportStub","initAppTriggeredPushStub","Promise","resolve","initPlugin","then","ok","called","e","reject","notCalled","initShellBarButtonStub","ShellBarButton","openSurvey","getDataStub","AppContextData","returns","Error","Constants","ERROR","CURRENT_APP_NOT_AVAILABLE","notOk","calledWith","CANNOT_TRIGGER_USER_INITIATED_FEEDBACK","COMPONENT","PLUGIN_CONTROLLER","undefined","appContextData","appFrameworkId","appFrameworkVersion","appId","appSupportInfo","appVersion","technicalAppComponentId","appTitle","languageTag","theme","pushData","areaId","payload","shortText","triggerName","eventBus","UI5Util","getEventBus","pxApiWrapperMock","requestPush","userInitiatedFeedbackStub","publish","EVENT_BUS","CHANNEL_ID","EVENT_ID","updateThemeIdStub","updateThemeId","ui5UtilGetThemeStub","initLastThemeStub","ThemeData","attachAppliedThemingStub","Theming","changedThemeId","eventDataMock","updateCurrentThemeStub","onThemeChangedStub"],"sourceRoot":".","sources":["PluginController.test.ts"],"sourcesContent":["import ResourceBundle from 'sap/base/i18n/ResourceBundle';\nimport Log from 'sap/base/Log';\nimport Constants from 'sap/feedback/ui/flpplugin/common/Constants';\nimport UI5Util from 'sap/feedback/ui/flpplugin/common/UI5Util';\nimport PluginController from 'sap/feedback/ui/flpplugin/controller/PluginController';\nimport AppContextData from 'sap/feedback/ui/flpplugin/data/AppContextData';\nimport ThemeData from 'sap/feedback/ui/flpplugin/data/ThemeData';\nimport PxApiWrapper from 'sap/feedback/ui/flpplugin/pxapi/PxApiWrapper';\nimport ShellBarButton from 'sap/feedback/ui/flpplugin/ui/ShellBarButton';\nimport Theming, { Theming$AppliedEvent } from 'sap/ui/core/Theming';\n// eslint-disable-next-line import/no-unresolved\nimport * as sinon from 'sinon';\n\nexport default () => {\n\tlet errorLogStub: sinon.SinonStub<any[], any>;\n\tQUnit.module('PluginController unit tests', {\n\t\tbeforeEach: function () {\n\t\t\terrorLogStub = sinon.stub(Log, 'error');\n\t\t},\n\t\tafterEach: function () {\n\t\t\terrorLogStub.restore();\n\t\t}\n\t});\n\n\tQUnit.test('initPlugin - shall initiate the user initiated feedback', async (assert) => {\n\t\tconst pxApiWrapper = { pxApi: { isUserInitiatedFeedbackEnabled: true } } as PxApiWrapper;\n\t\tconst resourceBundle = {} as ResourceBundle;\n\t\tconst pluginController = new PluginController(pxApiWrapper, resourceBundle);\n\t\tconst initUserInitiatedFeedbackStub = sinon.stub(pluginController, 'initUserInitiatedFeedback' as any);\n\t\tconst prepareThemingSupportStub = sinon.stub(pluginController, 'prepareThemingSupport' as any);\n\t\tconst initAppTriggeredPushStub = sinon.stub(pluginController, 'initAppTriggeredPush' as any);\n\n\t\tawait pluginController.initPlugin();\n\n\t\tassert.ok(initUserInitiatedFeedbackStub.called);\n\t\tassert.ok(prepareThemingSupportStub.called);\n\n\t\tinitUserInitiatedFeedbackStub.restore();\n\t\tprepareThemingSupportStub.restore();\n\t\tinitAppTriggeredPushStub.restore();\n\t});\n\n\tQUnit.test('initPlugin - shall not initiate the user initiated feedback when \"manual\" scope set not defined', async (assert) => {\n\t\tconst pxApiWrapper = { pxApi: { isUserInitiatedFeedbackEnabled: false } } as PxApiWrapper;\n\t\tconst resourceBundle = {} as ResourceBundle;\n\t\tconst pluginController = new PluginController(pxApiWrapper, resourceBundle);\n\t\tconst initUserInitiatedFeedbackStub = sinon.stub(pluginController, 'initUserInitiatedFeedback' as any);\n\t\tconst prepareThemingSupportStub = sinon.stub(pluginController, 'prepareThemingSupport' as any);\n\t\tconst initAppTriggeredPushStub = sinon.stub(pluginController, 'initAppTriggeredPush' as any);\n\n\t\tawait pluginController.initPlugin();\n\n\t\tassert.ok(initUserInitiatedFeedbackStub.notCalled);\n\t\tassert.ok(prepareThemingSupportStub.called);\n\n\t\tinitUserInitiatedFeedbackStub.restore();\n\t\tprepareThemingSupportStub.restore();\n\t\tinitAppTriggeredPushStub.restore();\n\t});\n\n\tQUnit.test('initUserInitiatedFeedback - shall call the initShellBarButton', async (assert) => {\n\t\tconst pxApiWrapper = {} as PxApiWrapper;\n\t\tconst resourceBundle = {} as ResourceBundle;\n\t\tconst pluginController = new PluginController(pxApiWrapper, resourceBundle);\n\t\tconst initShellBarButtonStub = sinon.stub(ShellBarButton, 'initShellBarButton');\n\n\t\tawait pluginController['initUserInitiatedFeedback']();\n\n\t\tassert.ok(initShellBarButtonStub.called);\n\n\t\tinitShellBarButtonStub.restore();\n\t});\n\n\tQUnit.test('openSurveyCallback - shall catch the error thrown by AppContextData - with Error()', async (assert) => {\n\t\tconst pxApiWrapper = {\n\t\t\topenSurvey: sinon.stub()\n\t\t};\n\t\tconst pluginController = new PluginController(pxApiWrapper as unknown as PxApiWrapper, {} as ResourceBundle);\n\t\tconst getDataStub = sinon.stub(AppContextData, 'getData').returns(Promise.reject(new Error(Constants.ERROR.CURRENT_APP_NOT_AVAILABLE)));\n\n\t\tawait pluginController['openSurveyCallback']();\n\n\t\tassert.ok(getDataStub.called);\n\t\tassert.notOk(pxApiWrapper.openSurvey.called);\n\t\tassert.ok(\n\t\t\terrorLogStub.calledWith(\n\t\t\t\tConstants.ERROR.CANNOT_TRIGGER_USER_INITIATED_FEEDBACK,\n\t\t\t\tConstants.ERROR.CURRENT_APP_NOT_AVAILABLE,\n\t\t\t\tConstants.COMPONENT.PLUGIN_CONTROLLER\n\t\t\t)\n\t\t);\n\n\t\tgetDataStub.restore();\n\t\terrorLogStub.restore();\n\t});\n\n\tQUnit.test('openSurveyCallback - shall catch the error thrown by AppContextData - with undefined error', async (assert) => {\n\t\tconst pxApiWrapper = {\n\t\t\topenSurvey: sinon.stub()\n\t\t};\n\t\tconst pluginController = new PluginController(pxApiWrapper as unknown as PxApiWrapper, {} as ResourceBundle);\n\t\tconst getDataStub = sinon.stub(AppContextData, 'getData').returns(Promise.reject(undefined));\n\n\t\tawait pluginController['openSurveyCallback']();\n\n\t\tassert.ok(getDataStub.called);\n\t\tassert.notOk(pxApiWrapper.openSurvey.called);\n\t\tassert.ok(errorLogStub.calledWith(Constants.ERROR.CANNOT_TRIGGER_USER_INITIATED_FEEDBACK, undefined, Constants.COMPONENT.PLUGIN_CONTROLLER));\n\n\t\tgetDataStub.restore();\n\t\terrorLogStub.restore();\n\t});\n\n\tQUnit.test('openSurveyCallback - call the openSurvey after fetching the appContextData', async (assert) => {\n\t\tconst appContextData = {\n\t\t\tappFrameworkId: '1',\n\t\t\tappFrameworkVersion: '1.109.3 (202212090942)',\n\t\t\tappId: 'LAUNCHPAD',\n\t\t\tappSupportInfo: 'ach',\n\t\t\tappVersion: '1.0.0',\n\t\t\ttechnicalAppComponentId: 'sap.feedback.demo.fxtest',\n\t\t\tappTitle: 'Launchpad',\n\t\t\tlanguageTag: 'EN',\n\t\t\ttheme: 'someTheme'\n\t\t};\n\t\tconst pxApiWrapper = {\n\t\t\topenSurvey: sinon.stub()\n\t\t};\n\t\tconst pluginController = new PluginController(pxApiWrapper as unknown as PxApiWrapper, {} as ResourceBundle);\n\t\tconst getDataStub = sinon.stub(AppContextData, 'getData').returns(Promise.resolve(appContextData));\n\n\t\tawait pluginController['openSurveyCallback']();\n\n\t\tassert.ok(getDataStub.called);\n\t\tassert.ok(pxApiWrapper.openSurvey.calledWith(appContextData));\n\t\tassert.notOk(errorLogStub.called);\n\n\t\tgetDataStub.restore();\n\t});\n\n\tQUnit.test('initAppTriggeredPush - shall trigger the requestPush with the push data', async (assert) => {\n\t\tconst pushData = {\n\t\t\tareaId: '001',\n\t\t\tpayload: { test: '1234 - 5678 - 90123' },\n\t\t\tshortText: 'Some Feature',\n\t\t\ttriggerName: 'manageStockPoC'\n\t\t};\n\t\tconst eventBus = UI5Util.getEventBus();\n\t\tconst pxApiWrapperMock = {\n\t\t\trequestPush: sinon.stub(),\n\t\t\tpxApi: { isUserInitiatedFeedbackEnabled: true }\n\t\t};\n\t\tconst pluginController = new PluginController(pxApiWrapperMock as unknown as PxApiWrapper, {} as ResourceBundle);\n\t\tconst prepareThemingSupportStub = sinon.stub(pluginController, 'prepareThemingSupport' as any);\n\t\tconst userInitiatedFeedbackStub = sinon.stub(pluginController, 'initUserInitiatedFeedback' as any).returns(Promise.resolve());\n\n\t\tawait pluginController.initPlugin();\n\n\t\teventBus.publish(Constants.EVENT_BUS.CHANNEL_ID, Constants.EVENT_BUS.EVENT_ID, pushData);\n\n\t\tassert.ok(pxApiWrapperMock.requestPush.calledWith(pushData));\n\n\t\tprepareThemingSupportStub.restore();\n\t\tuserInitiatedFeedbackStub.restore();\n\t\tpluginController['unsubscribeFromTheEventBusForTesting']();\n\t});\n\n\tQUnit.test('initAppTriggeredPush - shall trigger the requestPush with the push data also when \"manual\" scopeSet not defined.', async (assert) => {\n\t\tconst pushData = {\n\t\t\tareaId: '001',\n\t\t\tpayload: { test: '1234 - 5678 - 90123' },\n\t\t\tshortText: 'Some Feature',\n\t\t\ttriggerName: 'manageStockPoC'\n\t\t};\n\t\tconst eventBus = UI5Util.getEventBus();\n\t\tconst pxApiWrapperMock = {\n\t\t\trequestPush: sinon.stub(),\n\t\t\tpxApi: { isUserInitiatedFeedbackEnabled: false }\n\t\t};\n\t\tconst pluginController = new PluginController(pxApiWrapperMock as unknown as PxApiWrapper, {} as ResourceBundle);\n\t\tconst prepareThemingSupportStub = sinon.stub(pluginController, 'prepareThemingSupport' as any);\n\t\tconst userInitiatedFeedbackStub = sinon.stub(pluginController, 'initUserInitiatedFeedback' as any).returns(Promise.resolve());\n\n\t\tawait pluginController.initPlugin();\n\n\t\teventBus.publish(Constants.EVENT_BUS.CHANNEL_ID, Constants.EVENT_BUS.EVENT_ID, pushData);\n\n\t\tassert.ok(userInitiatedFeedbackStub.notCalled);\n\t\tassert.ok(pxApiWrapperMock.requestPush.calledWith(pushData));\n\n\t\tprepareThemingSupportStub.restore();\n\t\tuserInitiatedFeedbackStub.restore();\n\t\tpluginController['unsubscribeFromTheEventBusForTesting']();\n\t});\n\n\tQUnit.test('prepareThemingSupport - shall init and update last theme and subscribe to themeChange', async (assert) => {\n\t\tconst updateThemeIdStub = sinon.stub();\n\t\tconst pxApiWrapper = { updateThemeId: updateThemeIdStub, pxApi: { isUserInitiatedFeedbackEnabled: true } } as unknown as PxApiWrapper;\n\t\tconst resourceBundle = {} as ResourceBundle;\n\t\tconst ui5UtilGetThemeStub = sinon.stub(UI5Util, 'getTheme').returns('sap_horizon');\n\t\tconst pluginController = new PluginController(pxApiWrapper, resourceBundle);\n\t\tconst initUserInitiatedFeedbackStub = sinon.stub(pluginController, 'initUserInitiatedFeedback' as any);\n\t\tconst initLastThemeStub = sinon.stub(ThemeData, 'initLastTheme');\n\t\t//ActionItem:  UI5 2.0 Refactoring required\n\t\tconst attachAppliedThemingStub = sinon.stub(Theming, 'attachApplied');\n\n\t\tawait pluginController.initPlugin();\n\n\t\tassert.ok(initUserInitiatedFeedbackStub.called);\n\t\tassert.ok(initLastThemeStub.called);\n\t\tassert.ok(updateThemeIdStub.called);\n\t\tassert.ok(attachAppliedThemingStub.called);\n\n\t\tinitUserInitiatedFeedbackStub.restore();\n\t\tinitLastThemeStub.restore();\n\t\tui5UtilGetThemeStub.restore();\n\t\tattachAppliedThemingStub.restore();\n\t});\n\n\tQUnit.test('themeChanged - shall call the onThemeChanged', (assert) => {\n\t\tconst changedThemeId = 'sap_horizon';\n\t\tconst eventDataMock = {\n\t\t\ttheme: changedThemeId\n\t\t} as Theming$AppliedEvent;\n\n\t\tconst updateThemeIdStub = sinon.stub();\n\t\tconst pxApiWrapper = { updateThemeId: updateThemeIdStub } as unknown as PxApiWrapper;\n\t\tconst updateCurrentThemeStub = sinon.stub(ThemeData, 'updateCurrentTheme');\n\n\t\tconst resourceBundle = {} as ResourceBundle;\n\n\t\tconst pluginController = new PluginController(pxApiWrapper, resourceBundle);\n\t\tconst onThemeChangedStub = sinon.stub(pluginController, 'onThemeChanged' as any);\n\n\t\t//ActionItem:  UI5 2.0 Refactoring required\n\t\t// Done but untested\n\t\tpluginController['themeChanged'](eventDataMock);\n\n\t\tassert.ok(onThemeChangedStub.calledWith(changedThemeId));\n\n\t\tupdateCurrentThemeStub.restore();\n\t});\n\n\tQUnit.test('onThemeChanged - update current theme', (assert) => {\n\t\tconst changedThemeId = 'sap_horizon';\n\n\t\tconst updateThemeIdStub = sinon.stub();\n\t\tconst pxApiWrapper = { updateThemeId: updateThemeIdStub } as unknown as PxApiWrapper;\n\t\tconst updateCurrentThemeStub = sinon.stub(ThemeData, 'updateCurrentTheme');\n\n\t\tconst resourceBundle = {} as ResourceBundle;\n\n\t\tconst pluginController = new PluginController(pxApiWrapper, resourceBundle);\n\n\t\t//ActionItem:  UI5 2.0 Refactoring required\n\t\t// Done but untested\n\t\tpluginController['onThemeChanged'](changedThemeId);\n\n\t\tassert.ok(updateThemeIdStub.calledWith('sap_horizon'));\n\t\tassert.ok(updateCurrentThemeStub.calledWith('sap_horizon'));\n\n\t\tupdateCurrentThemeStub.restore();\n\t});\n};\n"],"mappings":"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","ignoreList":[]}