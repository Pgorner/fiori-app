{"version":3,"file":"MetadataAnalyzer.spec.js","names":["sap","ui","define","sap_cards_ap_generator_odata_v2_MetadataAnalyzer","getNavigationPropertyInfoFromEntity","getPropertyInfoFromEntity","getPropertyReference","describe","mockMetaData","beforeEach","getMetaModel","getODataEntityContainer","entitySet","name","entityType","getODataEntitySet","entitySetName","filter","entity","getODataEntityType","path","key","propertyRef","property","type","String","maxLength","Bool","navigationProperty","relationship","fromRole","toRole","nullable","Path","getODataAssociationEnd","multiplicity","role","resourceBundle","getText","jest","fn","mockImplementation","afterEach","clearAllMocks","test","referenceValue","expect","toMatchSnapshot"],"sources":["MetadataAnalyzer.spec.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport {\n\tgetNavigationPropertyInfoFromEntity,\n\tgetPropertyInfoFromEntity,\n\tgetPropertyReference\n} from \"sap/cards/ap/generator/odata/v2/MetadataAnalyzer\";\n\ndescribe(\"Card CardGenerator\", () => {\n\tlet mockMetaData: any;\n\n\tbeforeEach(() => {\n\t\tmockMetaData = {\n\t\t\tgetMetaModel: () => {\n\t\t\t\treturn {\n\t\t\t\t\tgetODataEntityContainer: () => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tentitySet: [\n\t\t\t\t\t\t\t\t{ name: \"C_STTA_SalesOrder_WD_20\", entityType: \"STTA_SALES_ORDER_WD_20_SRV.C_STTA_SalesOrder_WD_20Type\" }\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\tgetODataEntitySet: (entitySetName: string) => {\n\t\t\t\t\t\tconst entitySet = [\n\t\t\t\t\t\t\t{ name: \"C_STTA_SalesOrder_WD_20\", entityType: \"STTA_SALES_ORDER_WD_20_SRV.C_STTA_SalesOrder_WD_20Type\" }\n\t\t\t\t\t\t];\n\t\t\t\t\t\treturn entitySet.filter((entity) => entity.name === entitySetName)[0];\n\t\t\t\t\t},\n\t\t\t\t\tgetODataEntityType: (path: string) => {\n\t\t\t\t\t\tif (path !== \"STTA_SALES_ORDER_WD_20_SRV.I_AIVS_Confirm_StatusType\") {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tkey: {\n\t\t\t\t\t\t\t\t\tpropertyRef: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: \"node_key\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: \"IsActiveEntity\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tproperty: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: \"node_key\",\n\t\t\t\t\t\t\t\t\t\ttype: \"Edm.Guid\",\n\t\t\t\t\t\t\t\t\t\t\"com.sap.vocabularies.Common.v1.Label\": {\n\t\t\t\t\t\t\t\t\t\t\tString: \"Node Key\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: \"IsActiveEntity\",\n\t\t\t\t\t\t\t\t\t\ttype: \"Edm.Boolean\",\n\t\t\t\t\t\t\t\t\t\t\"com.sap.vocabularies.Common.v1.Label\": {\n\t\t\t\t\t\t\t\t\t\t\tString: \"Is Active Entity\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: \"Product\",\n\t\t\t\t\t\t\t\t\t\ttype: \"Edm.String\",\n\t\t\t\t\t\t\t\t\t\tmaxLength: \"7\",\n\t\t\t\t\t\t\t\t\t\t\"com.sap.vocabularies.Common.v1.Label\": {\n\t\t\t\t\t\t\t\t\t\t\tString: \"Product\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\"com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive\": {\n\t\t\t\t\t\t\t\t\t\t\tBool: \"true\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: \"ProductForEdit\",\n\t\t\t\t\t\t\t\t\t\ttype: \"Edm.String\",\n\t\t\t\t\t\t\t\t\t\tmaxLength: \"7\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tnavigationProperty: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: \"to_BillingStatus\",\n\t\t\t\t\t\t\t\t\t\trelationship: \"STTA_SALES_ORDER_WD_20_SRV.assoc_3E1B3FFAFCE6372E0575D426A7553246\",\n\t\t\t\t\t\t\t\t\t\tfromRole: \"FromRole_assoc_3E1B3FFAFCE6372E0575D426A7553246\",\n\t\t\t\t\t\t\t\t\t\ttoRole: \"ToRole_assoc_3E1B3FFAFCE6372E0575D426A7553246\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tkey: {\n\t\t\t\t\t\t\t\t\tpropertyRef: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: \"Status\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tproperty: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: \"Status\",\n\t\t\t\t\t\t\t\t\t\ttype: \"Edm.String\",\n\t\t\t\t\t\t\t\t\t\tnullable: \"false\",\n\t\t\t\t\t\t\t\t\t\tmaxLength: \"10\",\n\t\t\t\t\t\t\t\t\t\t\"sap:display-format\": \"UpperCase\",\n\t\t\t\t\t\t\t\t\t\t\"com.sap.vocabularies.Common.v1.IsUpperCase\": {\n\t\t\t\t\t\t\t\t\t\t\tBool: \"true\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\"sap:text\": \"Status_Text\",\n\t\t\t\t\t\t\t\t\t\t\"com.sap.vocabularies.Common.v1.Text\": {\n\t\t\t\t\t\t\t\t\t\t\tPath: \"Status_Text\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\"sap:label\": \"Lower Value\",\n\t\t\t\t\t\t\t\t\t\t\"com.sap.vocabularies.Common.v1.Label\": {\n\t\t\t\t\t\t\t\t\t\t\tString: \"Lower Value\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: \"Status_Text\",\n\t\t\t\t\t\t\t\t\t\ttype: \"Edm.String\",\n\t\t\t\t\t\t\t\t\t\tmaxLength: \"60\",\n\t\t\t\t\t\t\t\t\t\t\"sap:label\": \"Confirmation\",\n\t\t\t\t\t\t\t\t\t\t\"com.sap.vocabularies.Common.v1.Label\": {\n\t\t\t\t\t\t\t\t\t\t\tString: \"Confirmation\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tgetODataAssociationEnd: () => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: \"STTA_SALES_ORDER_WD_20_SRV.I_AIVS_Confirm_StatusType\",\n\t\t\t\t\t\t\tmultiplicity: \"0..1\",\n\t\t\t\t\t\t\trole: \"ToRole_assoc_3E1B3FFAFCE6372E0575D426A7553246\"\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t});\n\tconst resourceBundle = {\n\t\tgetText: jest.fn().mockImplementation((key) => {\n\t\t\tif (key === \"GENERATOR_CARD_SELECT_NAV_PROP\") return \"Select a Navigational Property:\";\n\t\t\tif (key === \"CRITICALITY_CONTROL_SELECT_PROP\") return \"Select a Property:\";\n\t\t})\n\t};\n\n\tafterEach(() => {\n\t\tjest.clearAllMocks();\n\t});\n\n\ttest(\"validate function getPropertyReference\", () => {\n\t\tconst referenceValue = getPropertyReference(mockMetaData, \"C_STTA_SalesOrder_WD_20\");\n\t\texpect(referenceValue).toMatchSnapshot();\n\t});\n\n\ttest(\"validate function getPropertyInfoFromEntity\", () => {\n\t\tconst referenceValue = getPropertyInfoFromEntity(mockMetaData, \"C_STTA_SalesOrder_WD_20\", false);\n\t\texpect(referenceValue).toMatchSnapshot();\n\t});\n\n\ttest(\"validate function getPropertyInfoFromEntity with navigation\", () => {\n\t\tconst referenceValue = getPropertyInfoFromEntity(mockMetaData, \"C_STTA_SalesOrder_WD_20\", true, resourceBundle);\n\t\texpect(referenceValue).toMatchSnapshot();\n\t});\n\n\ttest(\"validate function getNavigationPropertyInfoFromEntity\", () => {\n\t\tconst referenceValue = getNavigationPropertyInfoFromEntity(mockMetaData, \"C_STTA_SalesOrder_WD_20\");\n\t\texpect(referenceValue).toMatchSnapshot();\n\t});\n});\n"],"mappings":"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","ignoreList":[]}