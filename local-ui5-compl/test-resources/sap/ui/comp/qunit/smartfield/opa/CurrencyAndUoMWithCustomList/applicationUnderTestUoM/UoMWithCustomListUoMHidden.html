<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<title>SmartField UoM With Custom List</title>

	<script id="sap-ui-bootstrap"
			data-sap-ui-async="true"
			data-sap-ui-compat-version="edge"
			data-sap-ui-language="EN"
			data-sap-ui-libs="sap.m, sap.ui.comp"
			data-sap-ui-log-level="0"
			src="../../../../../../../../../resources/sap-ui-core.js">
	</script>

	<script id="mainViewUoM" type="text/xml">
		<mvc:View
				xmlns:mvc="sap.ui.core.mvc"
				viewName="mainView"
				controllerName="mainView.controller"
				xmlns="sap.m"
				xmlns:smartForm="sap.ui.comp.smartform"
				xmlns:smartField="sap.ui.comp.smartfield"
				height="100%">

			<App>
				<Page id="page" title="Smart Field UoM">

					<Button id="checkModelMessages" text="Check model messages" press=".checkModelMessages" />

					<smartForm:SmartForm id="smartForm" title="UoM with custom list" editable="true" editTogglable="true" expanded="true">
						<smartForm:Group>
							<smartForm:GroupElement>
								<smartField:SmartField id="Quantity" value="{Quantity}" uomVisible="false"/>
							</smartForm:GroupElement>
							<smartForm:GroupElement>
								<smartField:SmartField id="UnitCode" value="{UnitCode}"/>
							</smartForm:GroupElement>
						</smartForm:Group>
					</smartForm:SmartForm>
					<Label text="Model message errors:"/>
					<List id="modelMessages" headerText="LOG:"/>
				</Page>
			</App>
		</mvc:View>
	</script>
	<script id="metadata" type="text/xml"><?xml version="1.0" encoding="utf-8"?>
		<edmx:Edmx Version="1.0"
				   xmlns:edmx="http://schemas.microsoft.com/ado/2007/06/edmx"
				   xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"
				   xmlns:sap="http://www.sap.com/Protocols/SAPData">

			<edmx:DataServices m:DataServiceVersion="2.0">
				<Schema Namespace="EmployeesNamespace"
						sap:schema-version="1"
						xmlns="http://schemas.microsoft.com/ado/2008/09/edm">

					<EntityType Name="Employee"
								sap:label="Employees"
								sap:content-version="1">
						<Key>
							<PropertyRef Name="Id"/>
						</Key>
						<Property Name="Id"
								  Type="Edm.String"
								  MaxLength="4"
								  Nullable="false"
								  sap:visible="false"
								  sap:label="Employee Id"
								  sap:creatable="false"/>
						<Property Name="Quantity"
								  Type="Edm.String"
								  Nullable="true"
								  sap:unit="UnitCode"
								  Precision="13"
								  Scale="6"
								  sap:label="Quantity"
								  sap:updatable="true"
						/>
						<Property Name="UnitCode"
								  Type="Edm.String"
								  sap:semantics="unit-of-measure"
								  MaxLength="3"
								  Nullable="false"
								  sap:label="Unit"
								  sap:updatable="true"
						/>
					</EntityType>

					<EntityType Name="UoMVHType" sap:content-version="1">
						<Key>
							<PropertyRef Name="UOMKEY" />
						</Key>
						<Property Name="UOMKEY" Type="Edm.String" Nullable="false" MaxLength="20" sap:label="UoM"/>
						<Property Name="UOMDESCR" Type="Edm.String" sap:label="Unit"/>
					</EntityType>

					<EntityType Name="SAP__UnitsOfMeasure" sap:content-version="1">
						<Key>
							<PropertyRef Name="UnitCode"/>
						</Key>
						<Property Name="UnitCode" Type="Edm.String" Nullable="false" MaxLength="3" sap:label="Internal UoM" sap:semantics="unit-of-measure"/>
						<Property Name="ISOCode" Type="Edm.String" Nullable="false" MaxLength="3" sap:label="ISO Code"/>
						<Property Name="ExternalCode" Type="Edm.String" Nullable="false" MaxLength="3" sap:label="Commercial"/>
						<Property Name="Text" Type="Edm.String" Nullable="false" MaxLength="30" sap:label="UoM Text"/>
						<Property Name="DecimalPlaces" Type="Edm.Int16" sap:label="Decimal Places"/>
					</EntityType>

					<EntityContainer Name="EmployeesNamespace_Entities"
									 m:IsDefaultEntityContainer="true"
									 sap:supported-formats="atom json xlsx">

						<EntitySet Name="Employees"
								   EntityType="EmployeesNamespace.Employee"
								   sap:creatable="true"
								   sap:updatable="true"
								   sap:deletable="true"
								   sap:content-version="1"/>

						<EntitySet Name="UoMVH"
								   EntityType="EmployeesNamespace.UoMVHType"
								   sap:creatable="true"
								   sap:updatable="true"
								   sap:deletable="false"
								   sap:addressable="false"
								   sap:content-version="1" />

						<EntitySet Name="SAP__UnitsOfMeasure"
								   EntityType="EmployeesNamespace.SAP__UnitsOfMeasure"
								   sap:creatable="false"
								   sap:updatable="false"
								   sap:deletable="false"
								   sap:pageable="false"
								   sap:content-version="1"/>
					</EntityContainer>

					<Annotations Target="EmployeesNamespace.EmployeesNamespace_Entities" xmlns="http://docs.oasis-open.org/odata/ns/edm">

						<Annotation Term="com.sap.vocabularies.CodeList.v1.UnitsOfMeasure">
							<Record>
								<PropertyValue Property="Url" String="./$metadata"/>
								<PropertyValue Property="CollectionPath" String="SAP__UnitsOfMeasure"/>
							</Record>
						</Annotation>
					</Annotations>


					<Annotations Target="EmployeesNamespace.SAP__UnitsOfMeasure/UnitCode" xmlns="http://docs.oasis-open.org/odata/ns/edm">
						<Annotation Term="com.sap.vocabularies.Common.v1.Text" Path="Text"/>
						<Annotation Term="com.sap.vocabularies.Common.v1.UnitSpecificScale" Path="DecimalPlaces"/>
						<Annotation Term="com.sap.vocabularies.CodeList.v1.StandardCode" Path="ISOCode"/>
						<Annotation Term="com.sap.vocabularies.CodeList.v1.ExternalCode" Path="ExternalCode"/>
					</Annotations>

					<Annotations Target="EmployeesNamespace.Employee/UnitCode" xmlns="http://docs.oasis-open.org/odata/ns/edm">
						<Annotation Term="com.sap.vocabularies.Common.v1.ValueList">
							<Record>
								<PropertyValue Property="Label" String="Unit"/>
								<PropertyValue Property="CollectionPath" String="UoMVH"/>
								<PropertyValue Property="SearchSupported" Bool="false"/>
								<PropertyValue Property="Parameters">
									<Collection>
										<Record Type="com.sap.vocabularies.Common.v1.ValueListParameterOut">
											<PropertyValue Property="LocalDataProperty" PropertyPath="UnitCode"/>
											<PropertyValue Property="ValueListProperty" String="UOMKEY"/>
										</Record>
										<Record Type="com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly">
											<PropertyValue Property="ValueListProperty" String="UOMDESCR"/>
										</Record>
									</Collection>
								</PropertyValue>
							</Record>
						</Annotation>
					</Annotations>

					<Annotations Target="EmployeesNamespace.Employee/QuantityMandatory" xmlns="http://docs.oasis-open.org/odata/ns/edm">
						<Annotation Term="com.sap.vocabularies.Common.v1.FieldControl" EnumMember="com.sap.vocabularies.Common.v1.FieldControlType/Mandatory"/>
					</Annotations>
				</Schema>
			</edmx:DataServices>
		</edmx:Edmx>
	</script>
	<script id="dataSection" type="text/json">
	{"d": {
		"__count": "1",
		"results": [
				{
					"__metadata": { "uri": "testService.Employees/Employees('0001')","id": "testService.Employees/Employees('1001')", "type": "EmployeesNamespace.Employee" },
					"Id": "0001",
					"Quantity": null,
					"UnitCode": null
				}
			]
	}}
	</script>

	<script src="./UoMWithCustomList.js"></script>

</head>

<body class="sapUiBody" id="content">
<div data-sap-ui-component data-name="UoMWithCustomList"></div>
</body>
</html>
