<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>MyTestApplication</title>

	<!--Application manifest.json-->
	<script id="manifest" type="application/json">
		{
			"_version": "1.12.0",
			"sap.app": {
				"id": "myTest.MyTestApplication",
				"type": "application",
				"i18n": "i18n/i18n.properties",
				"applicationVersion": {
					"version": "1.0.0"
				},
				"title": "App Title",
				"description": "App Description",
				"resources": "resources.json",
				"ach": "ach",
				"sourceTemplate": {
					"id": "ui5template.basicSAPUI5ApplicationProject",
					"version": "1.40.12"
				},
				"dataSources": {
					"mainService": {
						"uri": "./My/ODataService/",
						"type": "OData",
						"settings": {
							"annotations": [
								"localAnnotations"
							]
						}
					},
					"localAnnotations": {
						"uri": "annotations/annotations.xml",
						"type": "ODataAnnotation",
						"settings": {
							"localUri": "annotations/annotations.xml"
						}
					}
				}
			},

			"sap.ui": {
				"technology": "UI5",
				"icons": {
					"icon": "",
					"favIcon": "",
					"phone": "",
					"phone@2": "",
					"tablet": "",
					"tablet@2": ""
				},
				"deviceTypes": {
					"desktop": true,
					"tablet": true,
					"phone": true
				}
			},

			"sap.ui5": {
				"flexEnabled": true,
				"rootView": {
					"viewName": "myTest.MyTestApplication.view.MyApplication",
					"type": "XML",
					"async": true,
					"id": "MyApplication"
				},
				"dependencies": {
					"minUI5Version": "1.65.6",
					"libs": {
						"sap.ui.layout": {},
						"sap.ui.core": {},
						"sap.m": {}
					}
				},
				"contentDensities": {
					"compact": true,
					"cozy": true
				},
				"models": {
					"i18n": {
						"type": "sap.ui.model.resource.ResourceModel",
						"settings": {
							"bundleName": "myTest.MyTestApplication.i18n.i18n"
						}
					},
					"": {
						"dataSource": "mainService",
						"preload": true,
						"settings": {
							"defaultBindingMode": "TwoWay",
							"defaultCountMode": "Inline",
							"useBatch": false,
							"refreshAfterChange": false,
							"metadataUrlParams": {
								"sap-value-list": "none"
							}
						}
					}
				},
				"routing": {
					"config": {
						"routerClass": "sap.m.routing.Router",
						"viewType": "XML",
						"async": true,
						"viewPath": "myTest.MyTestApplication.view",
						"controlAggregation": "pages",
						"controlId": "app",
						"clearControlAggregation": false
					},
					"routes": [{
						"name": "RouteMyApplication",
						"pattern": "RouteMyApplication",
						"target": ["TargetMyApplication"]
					}],
					"targets": {
						"TargetMyApplication": {
							"viewType": "XML",
							"transition": "slide",
							"clearControlAggregation": false,
							"viewId": "MyApplication",
							"viewName": "MyApplication"
						}
					}
				}
			}
		}
	</script>

	<script id="view" type="text/xml">
		<mvc:View
				name="MyView"
				controllerName="myTest.MyTestApplication.controller.MyApplication"
				xmlns:mvc="sap.ui.core.mvc"
				xmlns:sfb="sap.ui.comp.smartfilterbar"
				displayBlock="true"
				xmlns="sap.m">
			<Shell id="shell">
				<App id="app">
					<Page id="page" title="{i18n>title}">
						<sfb:SmartFilterBar
								id="smartFilterBar"
								entitySet="Employees"
								persistencyKey="UniqueAndStablePersistenceKey1"
								enableBasicSearch="true"
								search=".onSearch"
								initialise=".onInitialised">
							<sfb:controlConfiguration>
								<sfb:ControlConfiguration key="Name" visibleInAdvancedArea="true" />
							</sfb:controlConfiguration>
							<sfb:controlConfiguration>
								<sfb:ControlConfiguration key="Combo" visibleInAdvancedArea="true" />
							</sfb:controlConfiguration>
						</sfb:SmartFilterBar>
						<Text id="SFBFilterResult" renderWhitespace="true"/>
					</Page>
				</App>
			</Shell>
		</mvc:View>
	</script>

	<script id="i18n" type="text/plain">
		title=My
		appTitle=MyTestApplication2
		appDescription=App Description2
	</script>

	<script id="metadata" type="application/xml"><?xml version="1.0" encoding="utf-8"?>
		<edmx:Edmx Version="1.0"
				   xmlns:edmx="http://schemas.microsoft.com/ado/2007/06/edmx"
				   xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"
				   xmlns:sap="http://www.sap.com/Protocols/SAPData">

			<edmx:DataServices m:DataServiceVersion="2.0">

				<Schema Namespace="EmployeesNamespace"
						sap:schema-version="1"
						xmlns="http://schemas.microsoft.com/ado/2008/09/edm">

					<EntityType Name="Employee"
								sap:label="Employees"
								sap:content-version="1">

						<Key>
							<PropertyRef Name="Id"/>
						</Key>

						<Property Name="Id"
								  Type="Edm.String"
								  Nullable="false"
								  MaxLength="4"
								  sap:visible="false"
								  sap:label="Employee Id"
								  sap:creatable="false"/>

						<Property Name="Name"
								  Type="Edm.String"
								  sap:creatable="false"
								  sap:updatable="true"
								  sap:label="Name"
								  Nullable="false"/>

						<Property Name="Combo"
							Type="Edm.String"
							sap:creatable="false"
							sap:updatable="true"
							sap:label="Combo"
							sap:required-in-filter="true"
							sap:filter-restriction="single-value"
							Nullable="false"/>

					</EntityType>

					<EntityType Name="StringVHType" sap:content-version="1">
						<Key>
							<PropertyRef Name="KEY" />
						</Key>
						<Property Name="KEY" Type="Edm.String" sap:sortable="true"  Nullable="false" MaxLength="20" sap:label="Key" sap:text="TXT"/>
						<Property Name="KEY2" Type="Edm.String" sap:sortable="false" Nullable="false" MaxLength="20" sap:label="Key2"/>
						<Property Name="CONSTANT" Type="Edm.String" Nullable="false" MaxLength="20" sap:label="Constant"/>
						<Property Name="TXT" Type="Edm.String" sap:label="Desc"/>
					</EntityType>

					<EntityContainer Name="EmployeesNamespace_Entities"
									 m:IsDefaultEntityContainer="true"
									 sap:supported-formats="atom json xlsx">

						<EntitySet Name="Employees"
								EntityType="EmployeesNamespace.Employee"
								sap:creatable="false"
								sap:updatable="true"
								sap:deletable="true"
								sap:content-version="1"/>

						<EntitySet Name="StringVH"
								EntityType="EmployeesNamespace.StringVHType"
								sap:creatable="false"
								sap:updatable="true"
								sap:deletable="false"
								sap:addressable="false"
								sap:content-version="1" />

					</EntityContainer>

					<Annotations Target="EmployeesNamespace.Employee/Combo"
								 xmlns="http://docs.oasis-open.org/odata/ns/edm">

						<Annotation Term="com.sap.vocabularies.UI.v1.TextArrangement" EnumMember="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast" />
						<Annotation Term="com.sap.vocabularies.Common.v1.ValueListWithFixedValues" Bool="true"/>
						<Annotation Term="com.sap.vocabularies.Common.v1.ValueList">
							<Record>
								<PropertyValue Property="Label" String="Types"/>
								<PropertyValue Property="CollectionPath" String="StringVH"/>
								<PropertyValue Property="SearchSupported" Bool="true"/>
								<PropertyValue Property="Parameters">
									<Collection>
										<Record Type="com.sap.vocabularies.Common.v1.ValueListParameterInOut">
											<PropertyValue Property="LocalDataProperty" PropertyPath="Combo"/>
											<PropertyValue Property="ValueListProperty" String="KEY"/>
										</Record>
										<Record Type="com.sap.vocabularies.Common.v1.ValueListParameterIn">
											<PropertyValue Property="LocalDataProperty" PropertyPath="LOCALKEY2"/>
											<PropertyValue Property="ValueListProperty" String="KEY2"/>
										</Record>
										<Record Type="com.sap.vocabularies.Common.v1.ValueListParameterConstant">
											<PropertyValue Property="Constant" String="Bulgaria"/>
											<PropertyValue Property="ValueListProperty" String="CONSTANT"/>
										</Record>
										<Record Type="com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly">
											<PropertyValue Property="LocalDataProperty" PropertyPath="LocalText"/>
											<PropertyValue Property="ValueListProperty" String="TXT"/>
										</Record>
										<Record Type="com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly">
											<PropertyValue Property="LocalDataProperty" PropertyPath="LocalDescription"/>
											<PropertyValue Property="ValueListProperty" String="KEY2"/>
										</Record>
									</Collection>
								</PropertyValue>
							</Record>
						</Annotation>
					</Annotations>

				</Schema>
			</edmx:DataServices>
		</edmx:Edmx>
	</script>

	<script id="employees" type="application/json">
		{"d": {
			"__count": "1",
			"results": [
				{
					"__metadata": { "uri": "testService.Employees/Employees('0001')", "type": "EmployeesNamespace.Employee" },
					"Name": "2",
					"Id": "0001"
				}
			]
		}}
	</script>
	<script id="stringVH" type="text/json">
		{"d": {
			"__count": "1",
			"results": [
				{
					"__metadata": {
						"uri": "testService.StringVH/StringVH('0001')",
						"type": "EmployeesNamespace.StringVH"
					},
					"KEY": "1",
					"KEY2": "AAA",
					"CONSTANT": "Bulgaria",
					"TXT": "Soundstation"
				}
			]
		}}
	</script>
	<script src="../../../../../../../../../resources/sap/ui/thirdparty/sinon.js"></script>
	<script id="sap-ui-bootstrap"
			src="../../../../../../../../../resources/sap-ui-core.js"
			data-sap-ui-async="true"
			data-sap-ui-compat-version="edge"
			data-sap-ui-flexibility-services='[{"connector": "LocalStorageConnector"}]'
			data-sap-ui-frame-options="trusted"
			data-sap-ui-libs="sap.ui.layout, sap.ui.core , sap.m, sap.ui.fl, sap.ui.comp"
			data-sap-ui-on-init="module:sap/ui/core/ComponentSupport"
			data-sap-ui-resource-roots='{
				"myTest.MyTestApplication": "./webapp/"
			}'
			>
	</script>
	<script src="./ReferenceAppDelayInBinding.js"></script>

</head>

<body class='sapUiBody sapUiSizeCompact'>
<div data-sap-ui-component data-name="myTest.MyTestApplication" data-id="container" data-settings='{"id" : "MyTestApplication"}'></div>
</body>

</html>
