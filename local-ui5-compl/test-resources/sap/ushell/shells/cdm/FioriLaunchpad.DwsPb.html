<!DOCTYPE html>
<!--
    About test shells: "../../../../../internal/docs/shells/README.md"
-->
<html class="sapUShellFullHeight">
<head>
    <meta charset="utf-8" />

    <title>Fiori Launchpad CDM local</title>

    <!-- Hardcoded min theme to allow for better performance -->
    <link id="sap-ui-theme-sap.ui.core" href="../../../../../resources/sap/ui/core/themes/sap_horizon/library.css" rel="stylesheet" />
    <link id="sap-ui-theme-sap.m" href="../../../../../resources/sap/m/themes/sap_horizon/library.css" rel="stylesheet" />
    <!-- Update themes dynamically for RTL -->
    <script src="../../../../../test-resources/sap/ushell/shells/applyRtlToCssLinks.js"></script>

    <script src="cep/mockserver.cep.js"></script>
    <script>
        var o = document.createElement("div");
        var searchParams = new URLSearchParams(document.location.search);
        var dwspbUrl = searchParams.get("dwspb-version") ? `https://rlb8gaafrcxwjrjx3m80tb.eu10-int2.dws.workzone.ondemand.com/dws-page-builder/${searchParams.get("dwspb-version")}` : 'http://localhost:8081/'
        o.innerHTML = `<meta name="sap.ushellConfig.crossPlatformDefaults" content='{
        "flpPlatform": "cFLP",
        "ushell": {
            "spaces": { "enabled": true },
            "workPages": {
                "enabled": true,
                "component": {
                    "name": "sap.workzone.dws.workPageBuilder",
                    "url": "${dwspbUrl}",
                    "asyncHints": {
                        "preloadBundles": [
                            "sap/ushell/preload-bundles/workpage-rt-common.js"
                        ]
                    }
                },
                "contentApiUrl": "/cep/content/v1",
                "runtimeSwitcher": true,
                "tileCard": ${!!searchParams.get("sap-ushell-tilecard")},
                "customTileCard": ${!!searchParams.get("sap-ushell-customtilecard")}
            },
            "contentProviders": { "providerInfo": { "enabled": true } },
            "cepSearchConfig": "standard",
            "site": { "siteId": "41b986b7-2001-4ff9-a098-15c8d1fb5158" }
        },
        "renderers": {
            "fiori2": {
                "componentData": {
                    "config": {
                        "sizeBehaviorConfigurable": true,
                        "enablePersonalization": true,
                         "enableSearch": true
                    }
                }
            }
        },
        "services": {
            "PluginManager": { "config": { "loadPluginsFromSite": true } },
            "Container": {
                "adapter": {
                    "config": {
                        "systemProperties": {},
                        "userProfile": {
                            "metadata": {
                                "editablePropterties": [
                                    "accessibility",
                                    "contentDensity",
                                    "theme"
                                ],
                                "ranges": {
                                    "theme": {
                                        "sap_belize": { "displayName": "SAP Belize", "themeRoot": "" },
                                        "sap_fiori_3": { "displayName": "SAP Quartz", "themeRoot": "" },
                                        "sap_horizon": { "displayName": "SAP Morning Horizon", "themeRoot": "" },
                                        "sap_horizon_dark": { "displayName": "SAP Evening Horizon", "themeRoot": "" },
                                        "sap_horizon_hcb": { "displayName": "SAP HCB (SAP Horizon)", "themeRoot": "" },
                                        "sap_horizon_hcw": { "displayName": "SAP HCW (SAP Horizon)", "themeRoot": "" }
                                    }
                                }
                            },
                            "defaults": {
                                "email": "john.doe@sap.com",
                                "firstName": "John",
                                "lastName": "Doe",
                                "fullName": "John Doe",
                                "id": "DOEJ",
                                "isAdminUser": true,
                                "language": "EN",
                                "languageBcp47": "en",
                                "sapDateFormat": "1",
                                "tislcal": [],
                                "numberFormat": "",
                                "rtl": false,
                                "sapTimeFormat": "0",
                                "timeZone": "CET"
                            }
                        },
                        "userProfilePersonalization": {
                            "sapDateFormat": "1",
                            "theme": "sap_horizon",
                            "sapTimeFormat": "0",
                            "timeZone": "CET",
                            "contentDensity": "cozy"
                        }
                    }
                }
            },
            "CommonDataModel": {
                "adapter": {
                    "config": {
                        "ignoreSiteDataPersonalization": true,
                        "siteDataUrl": "../../cdmSiteData/3.1/CommonDataModelAdapterDataCEP.json",
                        "allowSiteSourceFromURLParameter": true
                    }
                }
            },
            "LaunchPage": { "adapter": { "module": "sap.ushell.adapters.cdm.v3.FlpLaunchPageAdapter" } },
            "Search": { "adapter": { "module": "sap.ushell.adapters.local.SearchAdapter" } },
            "SearchCEP": {
               "adapter": {
                "module": "sap.ushell.adapters.cep.SearchCEPAdapter"
              }
            },
            "AllMyApps": { "config": { "enabled": false } },
            "Menu": {
                "adapter": {
                    "module": "sap.ushell.adapters.cep.MenuAdapter",
                    "config": {
                        "serviceUrl": "/cep/content/v1",
                        "siteId": "35dbcf2a-cde4-4687-9b42-6da6a43c5e6e"
                    }
                }
            },
            "NavTargetResolution": {
                "config": {
                    "usageRecorder": {
                        "enabled": false,
                        "serviceUrl": "/navigation/api/v2/record"
                    }
                }
            },
            "UITracer": {
                "config": {
                    "enabled": true,
                    "serviceUrl": "/bff/ui-trace/v1/trace"
                }
            }
        }
    }' />`
    document.head.appendChild(o.firstElementChild);
    </script>
    <script id="sap-ui-bootstrap"
            src="../../../../../resources/sap/ushell/bootstrap/cdm.js"
            data-sap-ui-compatVersion="edge"
            data-sap-ui-theme="sap_horizon"
            data-sap-ui-resourceroots='{
                "sap.ushell.samplecards": "../../democards/CEP/sampleCards",
                "sap.ushell.shells.cdm.cep": "./cep"
            }'></script>
</head>
<body class="sapUiBody">
    <div id="canvas">
        <div class="sapMShellBG sapUiGlobalBackgroundImage"></div>
    </div>
</body>
</html>
